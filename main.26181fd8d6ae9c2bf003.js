(self.webpackChunklive_chat=self.webpackChunklive_chat||[]).push([[179],{8255:jt=>{function nt(Y){return Promise.resolve().then(()=>{var O=new Error("Cannot find module '"+Y+"'");throw O.code="MODULE_NOT_FOUND",O})}nt.keys=()=>[],nt.resolve=nt,nt.id=8255,jt.exports=nt},7238:(jt,nt,Y)=>{"use strict";Y.d(nt,{l3:()=>K,_j:()=>O,LC:()=>c,ZN:()=>ze,jt:()=>Ue,pV:()=>pe,IO:()=>Re,vP:()=>xe,SB:()=>_e,oB:()=>fe,eR:()=>Ce,X$:()=>w,ZE:()=>Ct,k1:()=>On});class O{}class c{}const K="*";function w(Nt,at){return{type:7,name:Nt,definitions:at,options:{}}}function Ue(Nt,at=null){return{type:4,styles:at,timings:Nt}}function xe(Nt,at=null){return{type:2,steps:Nt,options:at}}function fe(Nt){return{type:6,styles:Nt,offset:null}}function _e(Nt,at,zt){return{type:0,name:Nt,styles:at,options:zt}}function Ce(Nt,at,zt=null){return{type:1,expr:Nt,animation:at,options:zt}}function pe(Nt=null){return{type:9,options:Nt}}function Re(Nt,at,zt=null){return{type:11,selector:Nt,animation:at,options:zt}}function ee(Nt){Promise.resolve(null).then(Nt)}class ze{constructor(at=0,zt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=at+zt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(at=>at()),this._onDoneFns=[])}onStart(at){this._onStartFns.push(at)}onDone(at){this._onDoneFns.push(at)}onDestroy(at){this._onDestroyFns.push(at)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ee(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(at=>at()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(at=>at()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(at){this._position=this.totalTime?at*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(at){const zt="start"==at?this._onStartFns:this._onDoneFns;zt.forEach(It=>It()),zt.length=0}}class Ct{constructor(at){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=at;let zt=0,It=0,wn=0;const Et=this.players.length;0==Et?ee(()=>this._onFinish()):this.players.forEach(Ke=>{Ke.onDone(()=>{++zt==Et&&this._onFinish()}),Ke.onDestroy(()=>{++It==Et&&this._onDestroy()}),Ke.onStart(()=>{++wn==Et&&this._onStart()})}),this.totalTime=this.players.reduce((Ke,rt)=>Math.max(Ke,rt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(at=>at()),this._onDoneFns=[])}init(){this.players.forEach(at=>at.init())}onStart(at){this._onStartFns.push(at)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(at=>at()),this._onStartFns=[])}onDone(at){this._onDoneFns.push(at)}onDestroy(at){this._onDestroyFns.push(at)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(at=>at.play())}pause(){this.players.forEach(at=>at.pause())}restart(){this.players.forEach(at=>at.restart())}finish(){this._onFinish(),this.players.forEach(at=>at.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(at=>at.destroy()),this._onDestroyFns.forEach(at=>at()),this._onDestroyFns=[])}reset(){this.players.forEach(at=>at.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(at){const zt=at*this.totalTime;this.players.forEach(It=>{const wn=It.totalTime?Math.min(1,zt/It.totalTime):1;It.setPosition(wn)})}getPosition(){const at=this.players.reduce((zt,It)=>null===zt||It.totalTime>zt.totalTime?It:zt,null);return null!=at?at.getPosition():0}beforeDestroy(){this.players.forEach(at=>{at.beforeDestroy&&at.beforeDestroy()})}triggerCallback(at){const zt="start"==at?this._onStartFns:this._onDoneFns;zt.forEach(It=>It()),zt.length=0}}const On="!"},8583:(jt,nt,Y)=>{"use strict";Y.d(nt,{mr:()=>Ct,Ov:()=>Oo,ez:()=>pt,K0:()=>xe,uU:()=>xo,Do:()=>Nt,V_:()=>re,Ye:()=>at,S$:()=>ee,mk:()=>pn,sg:()=>un,O5:()=>gr,RF:()=>Fi,n9:()=>sr,ED:()=>jn,b0:()=>On,lw:()=>fe,EM:()=>hr,JF:()=>he,NF:()=>Zr,PM:()=>Eo,w_:()=>be,bD:()=>Vt,q:()=>K,Mx:()=>St,HT:()=>Ue});var O=Y(7716);let c=null;function K(){return c}function Ue(P){c||(c=P)}class be{}const xe=new O.OlP("DocumentToken");let fe=(()=>{class P{historyGo(F){throw new Error("Not implemented")}}return P.\u0275fac=function(F){return new(F||P)},P.\u0275prov=(0,O.Yz7)({factory:_e,token:P,providedIn:"platform"}),P})();function _e(){return(0,O.LFG)(Ce)}const re=new O.OlP("Location Initialized");let Ce=(()=>{class P extends fe{constructor(F){super(),this._doc=F,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return K().getBaseHref(this._doc)}onPopState(F){const J=K().getGlobalEventTarget(this._doc,"window");return J.addEventListener("popstate",F,!1),()=>J.removeEventListener("popstate",F)}onHashChange(F){const J=K().getGlobalEventTarget(this._doc,"window");return J.addEventListener("hashchange",F,!1),()=>J.removeEventListener("hashchange",F)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(F){this.location.pathname=F}pushState(F,J,ye){le()?this._history.pushState(F,J,ye):this.location.hash=ye}replaceState(F,J,ye){le()?this._history.replaceState(F,J,ye):this.location.hash=ye}forward(){this._history.forward()}back(){this._history.back()}historyGo(F=0){this._history.go(F)}getState(){return this._history.state}}return P.\u0275fac=function(F){return new(F||P)(O.LFG(xe))},P.\u0275prov=(0,O.Yz7)({factory:pe,token:P,providedIn:"platform"}),P})();function le(){return!!window.history.pushState}function pe(){return new Ce((0,O.LFG)(xe))}function De(P,z){if(0==P.length)return z;if(0==z.length)return P;let F=0;return P.endsWith("/")&&F++,z.startsWith("/")&&F++,2==F?P+z.substring(1):1==F?P+z:P+"/"+z}function Re(P){const z=P.match(/#|\?|$/),F=z&&z.index||P.length;return P.slice(0,F-("/"===P[F-1]?1:0))+P.slice(F)}function Ye(P){return P&&"?"!==P[0]?"?"+P:P}let ee=(()=>{class P{historyGo(F){throw new Error("Not implemented")}}return P.\u0275fac=function(F){return new(F||P)},P.\u0275prov=(0,O.Yz7)({factory:ze,token:P,providedIn:"root"}),P})();function ze(P){const z=(0,O.LFG)(xe).location;return new On((0,O.LFG)(fe),z&&z.origin||"")}const Ct=new O.OlP("appBaseHref");let On=(()=>{class P extends ee{constructor(F,J){if(super(),this._platformLocation=F,this._removeListenerFns=[],null==J&&(J=this._platformLocation.getBaseHrefFromDOM()),null==J)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=J}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}prepareExternalUrl(F){return De(this._baseHref,F)}path(F=!1){const J=this._platformLocation.pathname+Ye(this._platformLocation.search),ye=this._platformLocation.hash;return ye&&F?`${J}${ye}`:J}pushState(F,J,ye,Fe){const tt=this.prepareExternalUrl(ye+Ye(Fe));this._platformLocation.pushState(F,J,tt)}replaceState(F,J,ye,Fe){const tt=this.prepareExternalUrl(ye+Ye(Fe));this._platformLocation.replaceState(F,J,tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(F=0){var J,ye;null===(ye=(J=this._platformLocation).historyGo)||void 0===ye||ye.call(J,F)}}return P.\u0275fac=function(F){return new(F||P)(O.LFG(fe),O.LFG(Ct,8))},P.\u0275prov=O.Yz7({token:P,factory:P.\u0275fac}),P})(),Nt=(()=>{class P extends ee{constructor(F,J){super(),this._platformLocation=F,this._baseHref="",this._removeListenerFns=[],null!=J&&(this._baseHref=J)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}path(F=!1){let J=this._platformLocation.hash;return null==J&&(J="#"),J.length>0?J.substring(1):J}prepareExternalUrl(F){const J=De(this._baseHref,F);return J.length>0?"#"+J:J}pushState(F,J,ye,Fe){let tt=this.prepareExternalUrl(ye+Ye(Fe));0==tt.length&&(tt=this._platformLocation.pathname),this._platformLocation.pushState(F,J,tt)}replaceState(F,J,ye,Fe){let tt=this.prepareExternalUrl(ye+Ye(Fe));0==tt.length&&(tt=this._platformLocation.pathname),this._platformLocation.replaceState(F,J,tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(F=0){var J,ye;null===(ye=(J=this._platformLocation).historyGo)||void 0===ye||ye.call(J,F)}}return P.\u0275fac=function(F){return new(F||P)(O.LFG(fe),O.LFG(Ct,8))},P.\u0275prov=O.Yz7({token:P,factory:P.\u0275fac}),P})(),at=(()=>{class P{constructor(F,J){this._subject=new O.vpe,this._urlChangeListeners=[],this._platformStrategy=F;const ye=this._platformStrategy.getBaseHref();this._platformLocation=J,this._baseHref=Re(wn(ye)),this._platformStrategy.onPopState(Fe=>{this._subject.emit({url:this.path(!0),pop:!0,state:Fe.state,type:Fe.type})})}path(F=!1){return this.normalize(this._platformStrategy.path(F))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(F,J=""){return this.path()==this.normalize(F+Ye(J))}normalize(F){return P.stripTrailingSlash(function(P,z){return P&&z.startsWith(P)?z.substring(P.length):z}(this._baseHref,wn(F)))}prepareExternalUrl(F){return F&&"/"!==F[0]&&(F="/"+F),this._platformStrategy.prepareExternalUrl(F)}go(F,J="",ye=null){this._platformStrategy.pushState(ye,"",F,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+Ye(J)),ye)}replaceState(F,J="",ye=null){this._platformStrategy.replaceState(ye,"",F,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+Ye(J)),ye)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(F=0){var J,ye;null===(ye=(J=this._platformStrategy).historyGo)||void 0===ye||ye.call(J,F)}onUrlChange(F){this._urlChangeListeners.push(F),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(J=>{this._notifyUrlChangeListeners(J.url,J.state)}))}_notifyUrlChangeListeners(F="",J){this._urlChangeListeners.forEach(ye=>ye(F,J))}subscribe(F,J,ye){return this._subject.subscribe({next:F,error:J,complete:ye})}}return P.\u0275fac=function(F){return new(F||P)(O.LFG(ee),O.LFG(fe))},P.normalizeQueryParams=Ye,P.joinWithSlash=De,P.stripTrailingSlash=Re,P.\u0275prov=(0,O.Yz7)({factory:zt,token:P,providedIn:"root"}),P})();function zt(){return new at((0,O.LFG)(ee),(0,O.LFG)(fe))}function wn(P){return P.replace(/\/index.html$/,"")}var rt=(()=>((rt=rt||{})[rt.Zero=0]="Zero",rt[rt.One=1]="One",rt[rt.Two=2]="Two",rt[rt.Few=3]="Few",rt[rt.Many=4]="Many",rt[rt.Other=5]="Other",rt))(),it=(()=>((it=it||{})[it.Format=0]="Format",it[it.Standalone=1]="Standalone",it))(),et=(()=>((et=et||{})[et.Narrow=0]="Narrow",et[et.Abbreviated=1]="Abbreviated",et[et.Wide=2]="Wide",et[et.Short=3]="Short",et))(),_t=(()=>((_t=_t||{})[_t.Short=0]="Short",_t[_t.Medium=1]="Medium",_t[_t.Long=2]="Long",_t[_t.Full=3]="Full",_t))(),st=(()=>((st=st||{})[st.Decimal=0]="Decimal",st[st.Group=1]="Group",st[st.List=2]="List",st[st.PercentSign=3]="PercentSign",st[st.PlusSign=4]="PlusSign",st[st.MinusSign=5]="MinusSign",st[st.Exponential=6]="Exponential",st[st.SuperscriptingExponent=7]="SuperscriptingExponent",st[st.PerMille=8]="PerMille",st[st.Infinity=9]="Infinity",st[st.NaN=10]="NaN",st[st.TimeSeparator=11]="TimeSeparator",st[st.CurrencyDecimal=12]="CurrencyDecimal",st[st.CurrencyGroup=13]="CurrencyGroup",st))();function Fn(P,z){return pr((0,O.cg1)(P)[O.wAp.DateFormat],z)}function Cn(P,z){return pr((0,O.cg1)(P)[O.wAp.TimeFormat],z)}function ur(P,z){return pr((0,O.cg1)(P)[O.wAp.DateTimeFormat],z)}function zn(P,z){const F=(0,O.cg1)(P),J=F[O.wAp.NumberSymbols][z];if(void 0===J){if(z===st.CurrencyDecimal)return F[O.wAp.NumberSymbols][st.Decimal];if(z===st.CurrencyGroup)return F[O.wAp.NumberSymbols][st.Group]}return J}const mn=O.kL8;function Jt(P){if(!P[O.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${P[O.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function pr(P,z){for(let F=z;F>-1;F--)if(void 0!==P[F])return P[F];throw new Error("Locale data API: locale data undefined")}function jr(P){const[z,F]=P.split(":");return{hours:+z,minutes:+F}}const Ve=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Mt={},Pt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var nn=(()=>((nn=nn||{})[nn.Short=0]="Short",nn[nn.ShortGMT=1]="ShortGMT",nn[nn.Long=2]="Long",nn[nn.Extended=3]="Extended",nn))(),At=(()=>((At=At||{})[At.FullYear=0]="FullYear",At[At.Month=1]="Month",At[At.Date=2]="Date",At[At.Hours=3]="Hours",At[At.Minutes=4]="Minutes",At[At.Seconds=5]="Seconds",At[At.FractionalSeconds=6]="FractionalSeconds",At[At.Day=7]="Day",At))(),Ne=(()=>((Ne=Ne||{})[Ne.DayPeriods=0]="DayPeriods",Ne[Ne.Days=1]="Days",Ne[Ne.Months=2]="Months",Ne[Ne.Eras=3]="Eras",Ne))();function ft(P,z,F,J){let ye=function(P){if(co(P))return P;if("number"==typeof P&&!isNaN(P))return new Date(P);if("string"==typeof P){if(P=P.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(P)){const[ye,Fe=1,tt=1]=P.split("-").map(j=>+j);return vt(ye,Fe-1,tt)}const F=parseFloat(P);if(!isNaN(P-F))return new Date(F);let J;if(J=P.match(Ve))return function(P){const z=new Date(0);let F=0,J=0;const ye=P[8]?z.setUTCFullYear:z.setFullYear,Fe=P[8]?z.setUTCHours:z.setHours;P[9]&&(F=Number(P[9]+P[10]),J=Number(P[9]+P[11])),ye.call(z,Number(P[1]),Number(P[2])-1,Number(P[3]));const tt=Number(P[4]||0)-F,j=Number(P[5]||0)-J,B=Number(P[6]||0),L=Math.floor(1e3*parseFloat("0."+(P[7]||0)));return Fe.call(z,tt,j,B,L),z}(J)}const z=new Date(P);if(!co(z))throw new Error(`Unable to convert "${P}" into a date`);return z}(P);z=Dt(F,z)||z;let j,tt=[];for(;z;){if(j=Pt.exec(z),!j){tt.push(z);break}{tt=tt.concat(j.slice(1));const se=tt.pop();if(!se)break;z=se}}let B=ye.getTimezoneOffset();J&&(B=Xr(J,B),ye=function(P,z,F){const ye=P.getTimezoneOffset();return function(P,z){return(P=new Date(P.getTime())).setMinutes(P.getMinutes()+z),P}(P,-1*(Xr(z,ye)-ye))}(ye,J));let L="";return tt.forEach(se=>{const Ze=function(P){if(ai[P])return ai[P];let z;switch(P){case"G":case"GG":case"GGG":z=Ie(Ne.Eras,et.Abbreviated);break;case"GGGG":z=Ie(Ne.Eras,et.Wide);break;case"GGGGG":z=Ie(Ne.Eras,et.Narrow);break;case"y":z=Gt(At.FullYear,1,0,!1,!0);break;case"yy":z=Gt(At.FullYear,2,0,!0,!0);break;case"yyy":z=Gt(At.FullYear,3,0,!1,!0);break;case"yyyy":z=Gt(At.FullYear,4,0,!1,!0);break;case"Y":z=Vn(1);break;case"YY":z=Vn(2,!0);break;case"YYY":z=Vn(3);break;case"YYYY":z=Vn(4);break;case"M":case"L":z=Gt(At.Month,1,1);break;case"MM":case"LL":z=Gt(At.Month,2,1);break;case"MMM":z=Ie(Ne.Months,et.Abbreviated);break;case"MMMM":z=Ie(Ne.Months,et.Wide);break;case"MMMMM":z=Ie(Ne.Months,et.Narrow);break;case"LLL":z=Ie(Ne.Months,et.Abbreviated,it.Standalone);break;case"LLLL":z=Ie(Ne.Months,et.Wide,it.Standalone);break;case"LLLLL":z=Ie(Ne.Months,et.Narrow,it.Standalone);break;case"w":z=Bn(1);break;case"ww":z=Bn(2);break;case"W":z=Bn(1,!0);break;case"d":z=Gt(At.Date,1);break;case"dd":z=Gt(At.Date,2);break;case"c":case"cc":z=Gt(At.Day,1);break;case"ccc":z=Ie(Ne.Days,et.Abbreviated,it.Standalone);break;case"cccc":z=Ie(Ne.Days,et.Wide,it.Standalone);break;case"ccccc":z=Ie(Ne.Days,et.Narrow,it.Standalone);break;case"cccccc":z=Ie(Ne.Days,et.Short,it.Standalone);break;case"E":case"EE":case"EEE":z=Ie(Ne.Days,et.Abbreviated);break;case"EEEE":z=Ie(Ne.Days,et.Wide);break;case"EEEEE":z=Ie(Ne.Days,et.Narrow);break;case"EEEEEE":z=Ie(Ne.Days,et.Short);break;case"a":case"aa":case"aaa":z=Ie(Ne.DayPeriods,et.Abbreviated);break;case"aaaa":z=Ie(Ne.DayPeriods,et.Wide);break;case"aaaaa":z=Ie(Ne.DayPeriods,et.Narrow);break;case"b":case"bb":case"bbb":z=Ie(Ne.DayPeriods,et.Abbreviated,it.Standalone,!0);break;case"bbbb":z=Ie(Ne.DayPeriods,et.Wide,it.Standalone,!0);break;case"bbbbb":z=Ie(Ne.DayPeriods,et.Narrow,it.Standalone,!0);break;case"B":case"BB":case"BBB":z=Ie(Ne.DayPeriods,et.Abbreviated,it.Format,!0);break;case"BBBB":z=Ie(Ne.DayPeriods,et.Wide,it.Format,!0);break;case"BBBBB":z=Ie(Ne.DayPeriods,et.Narrow,it.Format,!0);break;case"h":z=Gt(At.Hours,1,-12);break;case"hh":z=Gt(At.Hours,2,-12);break;case"H":z=Gt(At.Hours,1);break;case"HH":z=Gt(At.Hours,2);break;case"m":z=Gt(At.Minutes,1);break;case"mm":z=Gt(At.Minutes,2);break;case"s":z=Gt(At.Seconds,1);break;case"ss":z=Gt(At.Seconds,2);break;case"S":z=Gt(At.FractionalSeconds,1);break;case"SS":z=Gt(At.FractionalSeconds,2);break;case"SSS":z=Gt(At.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":z=Je(nn.Short);break;case"ZZZZZ":z=Je(nn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":z=Je(nn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":z=Je(nn.Long);break;default:return null}return ai[P]=z,z}(se);L+=Ze?Ze(ye,F,B):"''"===se?"'":se.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),L}function vt(P,z,F){const J=new Date(0);return J.setFullYear(P,z,F),J.setHours(0,0,0),J}function Dt(P,z){const F=function(P){return(0,O.cg1)(P)[O.wAp.LocaleId]}(P);if(Mt[F]=Mt[F]||{},Mt[F][z])return Mt[F][z];let J="";switch(z){case"shortDate":J=Fn(P,_t.Short);break;case"mediumDate":J=Fn(P,_t.Medium);break;case"longDate":J=Fn(P,_t.Long);break;case"fullDate":J=Fn(P,_t.Full);break;case"shortTime":J=Cn(P,_t.Short);break;case"mediumTime":J=Cn(P,_t.Medium);break;case"longTime":J=Cn(P,_t.Long);break;case"fullTime":J=Cn(P,_t.Full);break;case"short":const ye=Dt(P,"shortTime"),Fe=Dt(P,"shortDate");J=Ut(ur(P,_t.Short),[ye,Fe]);break;case"medium":const tt=Dt(P,"mediumTime"),j=Dt(P,"mediumDate");J=Ut(ur(P,_t.Medium),[tt,j]);break;case"long":const B=Dt(P,"longTime"),L=Dt(P,"longDate");J=Ut(ur(P,_t.Long),[B,L]);break;case"full":const se=Dt(P,"fullTime"),Ze=Dt(P,"fullDate");J=Ut(ur(P,_t.Full),[se,Ze])}return J&&(Mt[F][z]=J),J}function Ut(P,z){return z&&(P=P.replace(/\{([^}]+)}/g,function(F,J){return null!=z&&J in z?z[J]:F})),P}function cn(P,z,F="-",J,ye){let Fe="";(P<0||ye&&P<=0)&&(ye?P=1-P:(P=-P,Fe=F));let tt=String(P);for(;tt.length<z;)tt="0"+tt;return J&&(tt=tt.substr(tt.length-z)),Fe+tt}function Gt(P,z,F=0,J=!1,ye=!1){return function(Fe,tt){let j=function(P,z){switch(P){case At.FullYear:return z.getFullYear();case At.Month:return z.getMonth();case At.Date:return z.getDate();case At.Hours:return z.getHours();case At.Minutes:return z.getMinutes();case At.Seconds:return z.getSeconds();case At.FractionalSeconds:return z.getMilliseconds();case At.Day:return z.getDay();default:throw new Error(`Unknown DateType value "${P}".`)}}(P,Fe);if((F>0||j>-F)&&(j+=F),P===At.Hours)0===j&&-12===F&&(j=12);else if(P===At.FractionalSeconds)return function(P,z){return cn(P,3).substr(0,z)}(j,z);const B=zn(tt,st.MinusSign);return cn(j,z,B,J,ye)}}function Ie(P,z,F=it.Format,J=!1){return function(ye,Fe){return function(P,z,F,J,ye,Fe){switch(F){case Ne.Months:return function(P,z,F){const J=(0,O.cg1)(P),Fe=pr([J[O.wAp.MonthsFormat],J[O.wAp.MonthsStandalone]],z);return pr(Fe,F)}(z,ye,J)[P.getMonth()];case Ne.Days:return function(P,z,F){const J=(0,O.cg1)(P),Fe=pr([J[O.wAp.DaysFormat],J[O.wAp.DaysStandalone]],z);return pr(Fe,F)}(z,ye,J)[P.getDay()];case Ne.DayPeriods:const tt=P.getHours(),j=P.getMinutes();if(Fe){const L=function(P){const z=(0,O.cg1)(P);return Jt(z),(z[O.wAp.ExtraData][2]||[]).map(J=>"string"==typeof J?jr(J):[jr(J[0]),jr(J[1])])}(z),se=function(P,z,F){const J=(0,O.cg1)(P);Jt(J);const Fe=pr([J[O.wAp.ExtraData][0],J[O.wAp.ExtraData][1]],z)||[];return pr(Fe,F)||[]}(z,ye,J),Ze=L.findIndex(Ot=>{if(Array.isArray(Ot)){const[En,fr]=Ot,qr=tt>=En.hours&&j>=En.minutes,mr=tt<fr.hours||tt===fr.hours&&j<fr.minutes;if(En.hours<fr.hours){if(qr&&mr)return!0}else if(qr||mr)return!0}else if(Ot.hours===tt&&Ot.minutes===j)return!0;return!1});if(-1!==Ze)return se[Ze]}return function(P,z,F){const J=(0,O.cg1)(P),Fe=pr([J[O.wAp.DayPeriodsFormat],J[O.wAp.DayPeriodsStandalone]],z);return pr(Fe,F)}(z,ye,J)[tt<12?0:1];case Ne.Eras:return function(P,z){return pr((0,O.cg1)(P)[O.wAp.Eras],z)}(z,J)[P.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${F}`)}}(ye,Fe,P,z,F,J)}}function Je(P){return function(z,F,J){const ye=-1*J,Fe=zn(F,st.MinusSign),tt=ye>0?Math.floor(ye/60):Math.ceil(ye/60);switch(P){case nn.Short:return(ye>=0?"+":"")+cn(tt,2,Fe)+cn(Math.abs(ye%60),2,Fe);case nn.ShortGMT:return"GMT"+(ye>=0?"+":"")+cn(tt,1,Fe);case nn.Long:return"GMT"+(ye>=0?"+":"")+cn(tt,2,Fe)+":"+cn(Math.abs(ye%60),2,Fe);case nn.Extended:return 0===J?"Z":(ye>=0?"+":"")+cn(tt,2,Fe)+":"+cn(Math.abs(ye%60),2,Fe);default:throw new Error(`Unknown zone width "${P}"`)}}}function or(P){return vt(P.getFullYear(),P.getMonth(),P.getDate()+(4-P.getDay()))}function Bn(P,z=!1){return function(F,J){let ye;if(z){const Fe=new Date(F.getFullYear(),F.getMonth(),1).getDay()-1,tt=F.getDate();ye=1+Math.floor((tt+Fe)/7)}else{const Fe=or(F),tt=function(P){const z=vt(P,0,1).getDay();return vt(P,0,1+(z<=4?4:11)-z)}(Fe.getFullYear()),j=Fe.getTime()-tt.getTime();ye=1+Math.round(j/6048e5)}return cn(ye,P,zn(J,st.MinusSign))}}function Vn(P,z=!1){return function(F,J){return cn(or(F).getFullYear(),P,zn(J,st.MinusSign),z)}}const ai={};function Xr(P,z){P=P.replace(/:/g,"");const F=Date.parse("Jan 01, 1970 00:00:00 "+P)/6e4;return isNaN(F)?z:F}function co(P){return P instanceof Date&&!isNaN(P.valueOf())}class Qe{}let Ae=(()=>{class P extends Qe{constructor(F){super(),this.locale=F}getPluralCategory(F,J){switch(mn(J||this.locale)(F)){case rt.Zero:return"zero";case rt.One:return"one";case rt.Two:return"two";case rt.Few:return"few";case rt.Many:return"many";default:return"other"}}}return P.\u0275fac=function(F){return new(F||P)(O.LFG(O.soG))},P.\u0275prov=O.Yz7({token:P,factory:P.\u0275fac}),P})();function St(P,z){z=encodeURIComponent(z);for(const F of P.split(";")){const J=F.indexOf("="),[ye,Fe]=-1==J?[F,""]:[F.slice(0,J),F.slice(J+1)];if(ye.trim()===z)return decodeURIComponent(Fe)}return null}let pn=(()=>{class P{constructor(F,J,ye,Fe){this._iterableDiffers=F,this._keyValueDiffers=J,this._ngEl=ye,this._renderer=Fe,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(F){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof F?F.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(F){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof F?F.split(/\s+/):F,this._rawClass&&((0,O.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const F=this._iterableDiffer.diff(this._rawClass);F&&this._applyIterableChanges(F)}else if(this._keyValueDiffer){const F=this._keyValueDiffer.diff(this._rawClass);F&&this._applyKeyValueChanges(F)}}_applyKeyValueChanges(F){F.forEachAddedItem(J=>this._toggleClass(J.key,J.currentValue)),F.forEachChangedItem(J=>this._toggleClass(J.key,J.currentValue)),F.forEachRemovedItem(J=>{J.previousValue&&this._toggleClass(J.key,!1)})}_applyIterableChanges(F){F.forEachAddedItem(J=>{if("string"!=typeof J.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,O.AaK)(J.item)}`);this._toggleClass(J.item,!0)}),F.forEachRemovedItem(J=>this._toggleClass(J.item,!1))}_applyClasses(F){F&&(Array.isArray(F)||F instanceof Set?F.forEach(J=>this._toggleClass(J,!0)):Object.keys(F).forEach(J=>this._toggleClass(J,!!F[J])))}_removeClasses(F){F&&(Array.isArray(F)||F instanceof Set?F.forEach(J=>this._toggleClass(J,!1)):Object.keys(F).forEach(J=>this._toggleClass(J,!1)))}_toggleClass(F,J){(F=F.trim())&&F.split(/\s+/g).forEach(ye=>{J?this._renderer.addClass(this._ngEl.nativeElement,ye):this._renderer.removeClass(this._ngEl.nativeElement,ye)})}}return P.\u0275fac=function(F){return new(F||P)(O.Y36(O.ZZ4),O.Y36(O.aQg),O.Y36(O.SBq),O.Y36(O.Qsj))},P.\u0275dir=O.lG2({type:P,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),P})();class gn{constructor(z,F,J,ye){this.$implicit=z,this.ngForOf=F,this.index=J,this.count=ye}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let un=(()=>{class P{constructor(F,J,ye){this._viewContainer=F,this._template=J,this._differs=ye,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(F){this._ngForOf=F,this._ngForOfDirty=!0}set ngForTrackBy(F){this._trackByFn=F}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(F){F&&(this._template=F)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const F=this._ngForOf;if(!this._differ&&F)try{this._differ=this._differs.find(F).create(this.ngForTrackBy)}catch(J){throw new Error(`Cannot find a differ supporting object '${F}' of type '${function(P){return P.name||typeof P}(F)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const F=this._differ.diff(this._ngForOf);F&&this._applyChanges(F)}}_applyChanges(F){const J=[];F.forEachOperation((ye,Fe,tt)=>{if(null==ye.previousIndex){const j=this._viewContainer.createEmbeddedView(this._template,new gn(null,this._ngForOf,-1,-1),null===tt?void 0:tt),B=new Jn(ye,j);J.push(B)}else if(null==tt)this._viewContainer.remove(null===Fe?void 0:Fe);else if(null!==Fe){const j=this._viewContainer.get(Fe);this._viewContainer.move(j,tt);const B=new Jn(ye,j);J.push(B)}});for(let ye=0;ye<J.length;ye++)this._perViewChange(J[ye].view,J[ye].record);for(let ye=0,Fe=this._viewContainer.length;ye<Fe;ye++){const tt=this._viewContainer.get(ye);tt.context.index=ye,tt.context.count=Fe,tt.context.ngForOf=this._ngForOf}F.forEachIdentityChange(ye=>{this._viewContainer.get(ye.currentIndex).context.$implicit=ye.item})}_perViewChange(F,J){F.context.$implicit=J.item}static ngTemplateContextGuard(F,J){return!0}}return P.\u0275fac=function(F){return new(F||P)(O.Y36(O.s_b),O.Y36(O.Rgc),O.Y36(O.ZZ4))},P.\u0275dir=O.lG2({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),P})();class Jn{constructor(z,F){this.record=z,this.view=F}}let gr=(()=>{class P{constructor(F,J){this._viewContainer=F,this._context=new ki,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=J}set ngIf(F){this._context.$implicit=this._context.ngIf=F,this._updateView()}set ngIfThen(F){eo("ngIfThen",F),this._thenTemplateRef=F,this._thenViewRef=null,this._updateView()}set ngIfElse(F){eo("ngIfElse",F),this._elseTemplateRef=F,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(F,J){return!0}}return P.\u0275fac=function(F){return new(F||P)(O.Y36(O.s_b),O.Y36(O.Rgc))},P.\u0275dir=O.lG2({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),P})();class ki{constructor(){this.$implicit=null,this.ngIf=null}}function eo(P,z){if(z&&!z.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,O.AaK)(z)}'.`)}class Gr{constructor(z,F){this._viewContainerRef=z,this._templateRef=F,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(z){z&&!this._created?this.create():!z&&this._created&&this.destroy()}}let Fi=(()=>{class P{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(F){this._ngSwitch=F,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(F){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(F)}_matchCase(F){const J=F==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||J,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),J}_updateDefaultCases(F){if(this._defaultViews&&F!==this._defaultUsed){this._defaultUsed=F;for(let J=0;J<this._defaultViews.length;J++)this._defaultViews[J].enforceState(F)}}}return P.\u0275fac=function(F){return new(F||P)},P.\u0275dir=O.lG2({type:P,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),P})(),sr=(()=>{class P{constructor(F,J,ye){this.ngSwitch=ye,ye._addCase(),this._view=new Gr(F,J)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return P.\u0275fac=function(F){return new(F||P)(O.Y36(O.s_b),O.Y36(O.Rgc),O.Y36(Fi,9))},P.\u0275dir=O.lG2({type:P,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),P})(),jn=(()=>{class P{constructor(F,J,ye){ye._addDefault(new Gr(F,J))}}return P.\u0275fac=function(F){return new(F||P)(O.Y36(O.s_b),O.Y36(O.Rgc),O.Y36(Fi,9))},P.\u0275dir=O.lG2({type:P,selectors:[["","ngSwitchDefault",""]]}),P})();function ui(P,z){return Error(`InvalidPipeArgument: '${z}' for pipe '${(0,O.AaK)(P)}'`)}class Zo{createSubscription(z,F){return z.subscribe({next:F,error:J=>{throw J}})}dispose(z){z.unsubscribe()}onDestroy(z){z.unsubscribe()}}class Lr{createSubscription(z,F){return z.then(F,J=>{throw J})}dispose(z){}onDestroy(z){}}const is=new Lr,Bi=new Zo;let Oo=(()=>{class P{constructor(F){this._ref=F,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(F){return this._obj?F!==this._obj?(this._dispose(),this.transform(F)):this._latestValue:(F&&this._subscribe(F),this._latestValue)}_subscribe(F){this._obj=F,this._strategy=this._selectStrategy(F),this._subscription=this._strategy.createSubscription(F,J=>this._updateLatestValue(F,J))}_selectStrategy(F){if((0,O.QGY)(F))return is;if((0,O.F4k)(F))return Bi;throw ui(P,F)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(F,J){F===this._obj&&(this._latestValue=J,this._ref.markForCheck())}}return P.\u0275fac=function(F){return new(F||P)(O.Y36(O.sBO,16))},P.\u0275pipe=O.Yjl({name:"async",type:P,pure:!1}),P})(),xo=(()=>{class P{constructor(F){this.locale=F}transform(F,J="mediumDate",ye,Fe){if(null==F||""===F||F!=F)return null;try{return ft(F,J,Fe||this.locale,ye)}catch(tt){throw ui(P,tt.message)}}}return P.\u0275fac=function(F){return new(F||P)(O.Y36(O.soG,16))},P.\u0275pipe=O.Yjl({name:"date",type:P,pure:!0}),P})(),pt=(()=>{class P{}return P.\u0275fac=function(F){return new(F||P)},P.\u0275mod=O.oAB({type:P}),P.\u0275inj=O.cJS({providers:[{provide:Qe,useClass:Ae}]}),P})();const Vt="browser";function Zr(P){return P===Vt}function Eo(P){return"server"===P}let hr=(()=>{class P{}return P.\u0275prov=(0,O.Yz7)({token:P,providedIn:"root",factory:()=>new ho((0,O.LFG)(xe),window)}),P})();class ho{constructor(z,F){this.document=z,this.window=F,this.offset=()=>[0,0]}setOffset(z){this.offset=Array.isArray(z)?()=>z:z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(z){this.supportsScrolling()&&this.window.scrollTo(z[0],z[1])}scrollToAnchor(z){if(!this.supportsScrolling())return;const F=function(P,z){const F=P.getElementById(z)||P.getElementsByName(z)[0];if(F)return F;if("function"==typeof P.createTreeWalker&&P.body&&(P.body.createShadowRoot||P.body.attachShadow)){const J=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let ye=J.currentNode;for(;ye;){const Fe=ye.shadowRoot;if(Fe){const tt=Fe.getElementById(z)||Fe.querySelector(`[name="${z}"]`);if(tt)return tt}ye=J.nextNode()}}return null}(this.document,z);F&&(this.scrollToElement(F),this.attemptFocus(F))}setHistoryScrollRestoration(z){if(this.supportScrollRestoration()){const F=this.window.history;F&&F.scrollRestoration&&(F.scrollRestoration=z)}}scrollToElement(z){const F=z.getBoundingClientRect(),J=F.left+this.window.pageXOffset,ye=F.top+this.window.pageYOffset,Fe=this.offset();this.window.scrollTo(J-Fe[0],ye-Fe[1])}attemptFocus(z){return z.focus(),this.document.activeElement===z}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const z=os(this.window.history)||os(Object.getPrototypeOf(this.window.history));return!(!z||!z.writable&&!z.set)}catch(z){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(z){return!1}}}function os(P){return Object.getOwnPropertyDescriptor(P,"scrollRestoration")}class he{}},1841:(jt,nt,Y)=>{"use strict";Y.d(nt,{eN:()=>st,JF:()=>pr});var O=Y(8583),c=Y(7716),K=Y(5917),w=Y(7574),Ue=Y(4612),be=Y(5435),xe=Y(8002);class fe{}class _e{}class re{constructor(He){this.normalizedNames=new Map,this.lazyUpdate=null,He?this.lazyInit="string"==typeof He?()=>{this.headers=new Map,He.split("\n").forEach(Ve=>{const Mt=Ve.indexOf(":");if(Mt>0){const Pt=Ve.slice(0,Mt),nn=Pt.toLowerCase(),At=Ve.slice(Mt+1).trim();this.maybeSetNormalizedName(Pt,nn),this.headers.has(nn)?this.headers.get(nn).push(At):this.headers.set(nn,[At])}})}:()=>{this.headers=new Map,Object.keys(He).forEach(Ve=>{let Mt=He[Ve];const Pt=Ve.toLowerCase();"string"==typeof Mt&&(Mt=[Mt]),Mt.length>0&&(this.headers.set(Pt,Mt),this.maybeSetNormalizedName(Ve,Pt))})}:this.headers=new Map}has(He){return this.init(),this.headers.has(He.toLowerCase())}get(He){this.init();const Ve=this.headers.get(He.toLowerCase());return Ve&&Ve.length>0?Ve[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(He){return this.init(),this.headers.get(He.toLowerCase())||null}append(He,Ve){return this.clone({name:He,value:Ve,op:"a"})}set(He,Ve){return this.clone({name:He,value:Ve,op:"s"})}delete(He,Ve){return this.clone({name:He,value:Ve,op:"d"})}maybeSetNormalizedName(He,Ve){this.normalizedNames.has(Ve)||this.normalizedNames.set(Ve,He)}init(){this.lazyInit&&(this.lazyInit instanceof re?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(He=>this.applyUpdate(He)),this.lazyUpdate=null))}copyFrom(He){He.init(),Array.from(He.headers.keys()).forEach(Ve=>{this.headers.set(Ve,He.headers.get(Ve)),this.normalizedNames.set(Ve,He.normalizedNames.get(Ve))})}clone(He){const Ve=new re;return Ve.lazyInit=this.lazyInit&&this.lazyInit instanceof re?this.lazyInit:this,Ve.lazyUpdate=(this.lazyUpdate||[]).concat([He]),Ve}applyUpdate(He){const Ve=He.name.toLowerCase();switch(He.op){case"a":case"s":let Mt=He.value;if("string"==typeof Mt&&(Mt=[Mt]),0===Mt.length)return;this.maybeSetNormalizedName(He.name,Ve);const Pt=("a"===He.op?this.headers.get(Ve):void 0)||[];Pt.push(...Mt),this.headers.set(Ve,Pt);break;case"d":const nn=He.value;if(nn){let At=this.headers.get(Ve);if(!At)return;At=At.filter(Ne=>-1===nn.indexOf(Ne)),0===At.length?(this.headers.delete(Ve),this.normalizedNames.delete(Ve)):this.headers.set(Ve,At)}else this.headers.delete(Ve),this.normalizedNames.delete(Ve)}}forEach(He){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ve=>He(this.normalizedNames.get(Ve),this.headers.get(Ve)))}}class Ce{encodeKey(He){return Re(He)}encodeValue(He){return Re(He)}decodeKey(He){return decodeURIComponent(He)}decodeValue(He){return decodeURIComponent(He)}}const pe=/%(\d[a-f0-9])/gi,De={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Re(Tt){return encodeURIComponent(Tt).replace(pe,(He,Ve)=>{var Mt;return null!==(Mt=De[Ve])&&void 0!==Mt?Mt:He})}function Ye(Tt){return`${Tt}`}class ee{constructor(He={}){if(this.updates=null,this.cloneFrom=null,this.encoder=He.encoder||new Ce,He.fromString){if(He.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(Tt,He){const Ve=new Map;return Tt.length>0&&Tt.replace(/^\?/,"").split("&").forEach(Pt=>{const nn=Pt.indexOf("="),[At,Ne]=-1==nn?[He.decodeKey(Pt),""]:[He.decodeKey(Pt.slice(0,nn)),He.decodeValue(Pt.slice(nn+1))],ft=Ve.get(At)||[];ft.push(Ne),Ve.set(At,ft)}),Ve}(He.fromString,this.encoder)}else He.fromObject?(this.map=new Map,Object.keys(He.fromObject).forEach(Ve=>{const Mt=He.fromObject[Ve];this.map.set(Ve,Array.isArray(Mt)?Mt:[Mt])})):this.map=null}has(He){return this.init(),this.map.has(He)}get(He){this.init();const Ve=this.map.get(He);return Ve?Ve[0]:null}getAll(He){return this.init(),this.map.get(He)||null}keys(){return this.init(),Array.from(this.map.keys())}append(He,Ve){return this.clone({param:He,value:Ve,op:"a"})}appendAll(He){const Ve=[];return Object.keys(He).forEach(Mt=>{const Pt=He[Mt];Array.isArray(Pt)?Pt.forEach(nn=>{Ve.push({param:Mt,value:nn,op:"a"})}):Ve.push({param:Mt,value:Pt,op:"a"})}),this.clone(Ve)}set(He,Ve){return this.clone({param:He,value:Ve,op:"s"})}delete(He,Ve){return this.clone({param:He,value:Ve,op:"d"})}toString(){return this.init(),this.keys().map(He=>{const Ve=this.encoder.encodeKey(He);return this.map.get(He).map(Mt=>Ve+"="+this.encoder.encodeValue(Mt)).join("&")}).filter(He=>""!==He).join("&")}clone(He){const Ve=new ee({encoder:this.encoder});return Ve.cloneFrom=this.cloneFrom||this,Ve.updates=(this.updates||[]).concat(He),Ve}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(He=>this.map.set(He,this.cloneFrom.map.get(He))),this.updates.forEach(He=>{switch(He.op){case"a":case"s":const Ve=("a"===He.op?this.map.get(He.param):void 0)||[];Ve.push(Ye(He.value)),this.map.set(He.param,Ve);break;case"d":if(void 0===He.value){this.map.delete(He.param);break}{let Mt=this.map.get(He.param)||[];const Pt=Mt.indexOf(Ye(He.value));-1!==Pt&&Mt.splice(Pt,1),Mt.length>0?this.map.set(He.param,Mt):this.map.delete(He.param)}}}),this.cloneFrom=this.updates=null)}}class Ct{constructor(){this.map=new Map}set(He,Ve){return this.map.set(He,Ve),this}get(He){return this.map.has(He)||this.map.set(He,He.defaultValue()),this.map.get(He)}delete(He){return this.map.delete(He),this}keys(){return this.map.keys()}}function Nt(Tt){return"undefined"!=typeof ArrayBuffer&&Tt instanceof ArrayBuffer}function at(Tt){return"undefined"!=typeof Blob&&Tt instanceof Blob}function zt(Tt){return"undefined"!=typeof FormData&&Tt instanceof FormData}class wn{constructor(He,Ve,Mt,Pt){let nn;if(this.url=Ve,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=He.toUpperCase(),function(Tt){switch(Tt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Pt?(this.body=void 0!==Mt?Mt:null,nn=Pt):nn=Mt,nn&&(this.reportProgress=!!nn.reportProgress,this.withCredentials=!!nn.withCredentials,nn.responseType&&(this.responseType=nn.responseType),nn.headers&&(this.headers=nn.headers),nn.context&&(this.context=nn.context),nn.params&&(this.params=nn.params)),this.headers||(this.headers=new re),this.context||(this.context=new Ct),this.params){const At=this.params.toString();if(0===At.length)this.urlWithParams=Ve;else{const Ne=Ve.indexOf("?");this.urlWithParams=Ve+(-1===Ne?"?":Ne<Ve.length-1?"&":"")+At}}else this.params=new ee,this.urlWithParams=Ve}serializeBody(){return null===this.body?null:Nt(this.body)||at(this.body)||zt(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof ee?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||zt(this.body)?null:at(this.body)?this.body.type||null:Nt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ee?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(He={}){var Ve;const Mt=He.method||this.method,Pt=He.url||this.url,nn=He.responseType||this.responseType,At=void 0!==He.body?He.body:this.body,Ne=void 0!==He.withCredentials?He.withCredentials:this.withCredentials,ft=void 0!==He.reportProgress?He.reportProgress:this.reportProgress;let vt=He.headers||this.headers,Dt=He.params||this.params;const Ut=null!==(Ve=He.context)&&void 0!==Ve?Ve:this.context;return void 0!==He.setHeaders&&(vt=Object.keys(He.setHeaders).reduce((cn,fn)=>cn.set(fn,He.setHeaders[fn]),vt)),He.setParams&&(Dt=Object.keys(He.setParams).reduce((cn,fn)=>cn.set(fn,He.setParams[fn]),Dt)),new wn(Mt,Pt,At,{params:Dt,headers:vt,context:Ut,reportProgress:ft,responseType:nn,withCredentials:Ne})}}var Et=(()=>((Et=Et||{})[Et.Sent=0]="Sent",Et[Et.UploadProgress=1]="UploadProgress",Et[Et.ResponseHeader=2]="ResponseHeader",Et[Et.DownloadProgress=3]="DownloadProgress",Et[Et.Response=4]="Response",Et[Et.User=5]="User",Et))();class Ke{constructor(He,Ve=200,Mt="OK"){this.headers=He.headers||new re,this.status=void 0!==He.status?He.status:Ve,this.statusText=He.statusText||Mt,this.url=He.url||null,this.ok=this.status>=200&&this.status<300}}class rt extends Ke{constructor(He={}){super(He),this.type=Et.ResponseHeader}clone(He={}){return new rt({headers:He.headers||this.headers,status:void 0!==He.status?He.status:this.status,statusText:He.statusText||this.statusText,url:He.url||this.url||void 0})}}class it extends Ke{constructor(He={}){super(He),this.type=Et.Response,this.body=void 0!==He.body?He.body:null}clone(He={}){return new it({body:void 0!==He.body?He.body:this.body,headers:He.headers||this.headers,status:void 0!==He.status?He.status:this.status,statusText:He.statusText||this.statusText,url:He.url||this.url||void 0})}}class et extends Ke{constructor(He){super(He,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${He.url||"(unknown url)"}`:`Http failure response for ${He.url||"(unknown url)"}: ${He.status} ${He.statusText}`,this.error=He.error||null}}function _t(Tt,He){return{body:He,headers:Tt.headers,context:Tt.context,observe:Tt.observe,params:Tt.params,reportProgress:Tt.reportProgress,responseType:Tt.responseType,withCredentials:Tt.withCredentials}}let st=(()=>{class Tt{constructor(Ve){this.handler=Ve}request(Ve,Mt,Pt={}){let nn;if(Ve instanceof wn)nn=Ve;else{let ft,vt;ft=Pt.headers instanceof re?Pt.headers:new re(Pt.headers),Pt.params&&(vt=Pt.params instanceof ee?Pt.params:new ee({fromObject:Pt.params})),nn=new wn(Ve,Mt,void 0!==Pt.body?Pt.body:null,{headers:ft,context:Pt.context,params:vt,reportProgress:Pt.reportProgress,responseType:Pt.responseType||"json",withCredentials:Pt.withCredentials})}const At=(0,K.of)(nn).pipe((0,Ue.b)(ft=>this.handler.handle(ft)));if(Ve instanceof wn||"events"===Pt.observe)return At;const Ne=At.pipe((0,be.h)(ft=>ft instanceof it));switch(Pt.observe||"body"){case"body":switch(nn.responseType){case"arraybuffer":return Ne.pipe((0,xe.U)(ft=>{if(null!==ft.body&&!(ft.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ft.body}));case"blob":return Ne.pipe((0,xe.U)(ft=>{if(null!==ft.body&&!(ft.body instanceof Blob))throw new Error("Response is not a Blob.");return ft.body}));case"text":return Ne.pipe((0,xe.U)(ft=>{if(null!==ft.body&&"string"!=typeof ft.body)throw new Error("Response is not a string.");return ft.body}));case"json":default:return Ne.pipe((0,xe.U)(ft=>ft.body))}case"response":return Ne;default:throw new Error(`Unreachable: unhandled observe type ${Pt.observe}}`)}}delete(Ve,Mt={}){return this.request("DELETE",Ve,Mt)}get(Ve,Mt={}){return this.request("GET",Ve,Mt)}head(Ve,Mt={}){return this.request("HEAD",Ve,Mt)}jsonp(Ve,Mt){return this.request("JSONP",Ve,{params:(new ee).append(Mt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ve,Mt={}){return this.request("OPTIONS",Ve,Mt)}patch(Ve,Mt,Pt={}){return this.request("PATCH",Ve,_t(Pt,Mt))}post(Ve,Mt,Pt={}){return this.request("POST",Ve,_t(Pt,Mt))}put(Ve,Mt,Pt={}){return this.request("PUT",Ve,_t(Pt,Mt))}}return Tt.\u0275fac=function(Ve){return new(Ve||Tt)(c.LFG(fe))},Tt.\u0275prov=c.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})();class tn{constructor(He,Ve){this.next=He,this.interceptor=Ve}handle(He){return this.interceptor.intercept(He,this.next)}}const an=new c.OlP("HTTP_INTERCEPTORS");let Sn=(()=>{class Tt{intercept(Ve,Mt){return Mt.handle(Ve)}}return Tt.\u0275fac=function(Ve){return new(Ve||Tt)},Tt.\u0275prov=c.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})();const ur=/^\)\]\}',?\n/;let Gn=(()=>{class Tt{constructor(Ve){this.xhrFactory=Ve}handle(Ve){if("JSONP"===Ve.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new w.y(Mt=>{const Pt=this.xhrFactory.build();if(Pt.open(Ve.method,Ve.urlWithParams),Ve.withCredentials&&(Pt.withCredentials=!0),Ve.headers.forEach((fn,Gt)=>Pt.setRequestHeader(fn,Gt.join(","))),Ve.headers.has("Accept")||Pt.setRequestHeader("Accept","application/json, text/plain, */*"),!Ve.headers.has("Content-Type")){const fn=Ve.detectContentTypeHeader();null!==fn&&Pt.setRequestHeader("Content-Type",fn)}if(Ve.responseType){const fn=Ve.responseType.toLowerCase();Pt.responseType="json"!==fn?fn:"text"}const nn=Ve.serializeBody();let At=null;const Ne=()=>{if(null!==At)return At;const fn=1223===Pt.status?204:Pt.status,Gt=Pt.statusText||"OK",Se=new re(Pt.getAllResponseHeaders()),Ie=function(Tt){return"responseURL"in Tt&&Tt.responseURL?Tt.responseURL:/^X-Request-URL:/m.test(Tt.getAllResponseHeaders())?Tt.getResponseHeader("X-Request-URL"):null}(Pt)||Ve.url;return At=new rt({headers:Se,status:fn,statusText:Gt,url:Ie}),At},ft=()=>{let{headers:fn,status:Gt,statusText:Se,url:Ie}=Ne(),$e=null;204!==Gt&&($e=void 0===Pt.response?Pt.responseText:Pt.response),0===Gt&&(Gt=$e?200:0);let Je=Gt>=200&&Gt<300;if("json"===Ve.responseType&&"string"==typeof $e){const Xe=$e;$e=$e.replace(ur,"");try{$e=""!==$e?JSON.parse($e):null}catch(Zt){$e=Xe,Je&&(Je=!1,$e={error:Zt,text:$e})}}Je?(Mt.next(new it({body:$e,headers:fn,status:Gt,statusText:Se,url:Ie||void 0})),Mt.complete()):Mt.error(new et({error:$e,headers:fn,status:Gt,statusText:Se,url:Ie||void 0}))},vt=fn=>{const{url:Gt}=Ne(),Se=new et({error:fn,status:Pt.status||0,statusText:Pt.statusText||"Unknown Error",url:Gt||void 0});Mt.error(Se)};let Dt=!1;const Ut=fn=>{Dt||(Mt.next(Ne()),Dt=!0);let Gt={type:Et.DownloadProgress,loaded:fn.loaded};fn.lengthComputable&&(Gt.total=fn.total),"text"===Ve.responseType&&!!Pt.responseText&&(Gt.partialText=Pt.responseText),Mt.next(Gt)},cn=fn=>{let Gt={type:Et.UploadProgress,loaded:fn.loaded};fn.lengthComputable&&(Gt.total=fn.total),Mt.next(Gt)};return Pt.addEventListener("load",ft),Pt.addEventListener("error",vt),Pt.addEventListener("timeout",vt),Pt.addEventListener("abort",vt),Ve.reportProgress&&(Pt.addEventListener("progress",Ut),null!==nn&&Pt.upload&&Pt.upload.addEventListener("progress",cn)),Pt.send(nn),Mt.next({type:Et.Sent}),()=>{Pt.removeEventListener("error",vt),Pt.removeEventListener("abort",vt),Pt.removeEventListener("load",ft),Pt.removeEventListener("timeout",vt),Ve.reportProgress&&(Pt.removeEventListener("progress",Ut),null!==nn&&Pt.upload&&Pt.upload.removeEventListener("progress",cn)),Pt.readyState!==Pt.DONE&&Pt.abort()}})}}return Tt.\u0275fac=function(Ve){return new(Ve||Tt)(c.LFG(O.JF))},Tt.\u0275prov=c.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})();const tr=new c.OlP("XSRF_COOKIE_NAME"),An=new c.OlP("XSRF_HEADER_NAME");class Mn{}let Oi=(()=>{class Tt{constructor(Ve,Mt,Pt){this.doc=Ve,this.platform=Mt,this.cookieName=Pt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ve=this.doc.cookie||"";return Ve!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,O.Mx)(Ve,this.cookieName),this.lastCookieString=Ve),this.lastToken}}return Tt.\u0275fac=function(Ve){return new(Ve||Tt)(c.LFG(O.K0),c.LFG(c.Lbi),c.LFG(tr))},Tt.\u0275prov=c.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})(),mn=(()=>{class Tt{constructor(Ve,Mt){this.tokenService=Ve,this.headerName=Mt}intercept(Ve,Mt){const Pt=Ve.url.toLowerCase();if("GET"===Ve.method||"HEAD"===Ve.method||Pt.startsWith("http://")||Pt.startsWith("https://"))return Mt.handle(Ve);const nn=this.tokenService.getToken();return null!==nn&&!Ve.headers.has(this.headerName)&&(Ve=Ve.clone({headers:Ve.headers.set(this.headerName,nn)})),Mt.handle(Ve)}}return Tt.\u0275fac=function(Ve){return new(Ve||Tt)(c.LFG(Mn),c.LFG(An))},Tt.\u0275prov=c.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})(),Jt=(()=>{class Tt{constructor(Ve,Mt){this.backend=Ve,this.injector=Mt,this.chain=null}handle(Ve){if(null===this.chain){const Mt=this.injector.get(an,[]);this.chain=Mt.reduceRight((Pt,nn)=>new tn(Pt,nn),this.backend)}return this.chain.handle(Ve)}}return Tt.\u0275fac=function(Ve){return new(Ve||Tt)(c.LFG(_e),c.LFG(c.zs3))},Tt.\u0275prov=c.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})(),Kt=(()=>{class Tt{static disable(){return{ngModule:Tt,providers:[{provide:mn,useClass:Sn}]}}static withOptions(Ve={}){return{ngModule:Tt,providers:[Ve.cookieName?{provide:tr,useValue:Ve.cookieName}:[],Ve.headerName?{provide:An,useValue:Ve.headerName}:[]]}}}return Tt.\u0275fac=function(Ve){return new(Ve||Tt)},Tt.\u0275mod=c.oAB({type:Tt}),Tt.\u0275inj=c.cJS({providers:[mn,{provide:an,useExisting:mn,multi:!0},{provide:Mn,useClass:Oi},{provide:tr,useValue:"XSRF-TOKEN"},{provide:An,useValue:"X-XSRF-TOKEN"}]}),Tt})(),pr=(()=>{class Tt{}return Tt.\u0275fac=function(Ve){return new(Ve||Tt)},Tt.\u0275mod=c.oAB({type:Tt}),Tt.\u0275inj=c.cJS({providers:[st,{provide:fe,useClass:Jt},Gn,{provide:_e,useExisting:Gn}],imports:[[Kt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Tt})()},7716:(jt,nt,Y)=>{"use strict";Y.d(nt,{deG:()=>ra,tb:()=>DC,AFp:()=>wC,ip1:()=>Vv,CZH:()=>Of,hGG:()=>PA,z2F:()=>Jp,sBO:()=>ET,Sil:()=>Qp,_Vd:()=>wf,EJc:()=>AC,SBq:()=>Rc,qLn:()=>ll,vpe:()=>kc,gxx:()=>Gl,tBr:()=>Cu,XFs:()=>Kt,OlP:()=>Ii,zs3:()=>yo,ZZ4:()=>Rm,aQg:()=>km,soG:()=>Zm,YKP:()=>d0,v3s:()=>dA,h0i:()=>Ph,PXZ:()=>oA,R0b:()=>Hu,FiY:()=>as,Lbi:()=>TC,g9A:()=>EC,n_E:()=>Yp,Qsj:()=>uT,FYo:()=>Pm,JOm:()=>Js,Tiy:()=>hv,q3G:()=>Kr,tp0:()=>qs,EAV:()=>gA,Rgc:()=>Up,dDg:()=>xC,DyG:()=>Hs,q4F:()=>fv,GfV:()=>r0,s_b:()=>Lm,ifc:()=>At,eFA:()=>NC,G48:()=>JS,Gpc:()=>Ce,f3M:()=>sc,X6Q:()=>zv,_c5:()=>DA,VLi:()=>QS,c2e:()=>SC,zSh:()=>zd,wAp:()=>_r,vHH:()=>Re,EiD:()=>pc,mCW:()=>Jo,qzn:()=>aa,JVY:()=>_d,pB0:()=>ch,eBb:()=>lc,L6k:()=>vd,LAX:()=>lh,cg1:()=>rv,Tjo:()=>EA,kL8:()=>Db,yhl:()=>rl,dqk:()=>Ut,sIi:()=>Mh,CqO:()=>$_,QGY:()=>z_,F4k:()=>xy,RDi:()=>$,AaK:()=>fe,z3N:()=>$r,qOj:()=>Xd,TTD:()=>pt,_Bn:()=>Jb,xp6:()=>Zh,uIk:()=>_f,Gre:()=>pb,ekj:()=>J_,Suo:()=>eC,Xpm:()=>Vn,lG2:()=>co,Yz7:()=>Cn,cJS:()=>zn,oAB:()=>Ri,Yjl:()=>rs,Y36:()=>xp,_UZ:()=>Iy,BQk:()=>q_,ynx:()=>Z_,qZA:()=>G_,TgZ:()=>H_,EpF:()=>Oy,n5z:()=>bt,Ikx:()=>nv,LFG:()=>bi,$8M:()=>ar,NdJ:()=>W_,CRH:()=>tC,oxw:()=>Fy,ALo:()=>W0,xi3:()=>Y0,Hsn:()=>Ly,F$t:()=>Ny,Q6J:()=>B_,DdM:()=>V0,VKq:()=>B0,WLB:()=>j0,kEZ:()=>H0,iGM:()=>J0,MAs:()=>_m,CHM:()=>_s,LSH:()=>gc,kYT:()=>No,Udp:()=>Q_,YNc:()=>Ih,_uU:()=>sb,Oqu:()=>ev,hij:()=>Dm,AsE:()=>tv,Gf:()=>X0});var O=Y(9765),c=Y(5319),K=Y(7574),w=Y(6682),Ue=Y(8819);function be(e){for(let i in e)if(e[i]===be)return i;throw Error("Could not find renamed property on target object.")}function xe(e,i){for(const a in i)i.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(e[a]=i[a])}function fe(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(fe).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const i=e.toString();if(null==i)return""+i;const a=i.indexOf("\n");return-1===a?i:i.substring(0,a)}function _e(e,i){return null==e||""===e?null===i?"":i:null==i||""===i?e:e+" "+i}const re=be({__forward_ref__:be});function Ce(e){return e.__forward_ref__=Ce,e.toString=function(){return fe(this())},e}function le(e){return pe(e)?e():e}function pe(e){return"function"==typeof e&&e.hasOwnProperty(re)&&e.__forward_ref__===Ce}class Re extends Error{constructor(i,a){super(function(e,i){return`${e?`NG0${e}: `:""}${i}`}(i,a)),this.code=i}}function ze(e){return"string"==typeof e?e:null==e?"":String(e)}function Ct(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():ze(e)}function zt(e,i){const a=i?` in ${i}`:"";throw new Re("201",`No provider for ${Ct(e)} found${a}`)}function Bt(e,i){null==e&&function(e,i,a,u){throw new Error(`ASSERTION ERROR: ${e}`+(null==u?"":` [Expected=> ${a} ${u} ${i} <=Actual]`))}(i,e,null,"!=")}function Cn(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function zn(e){return{providers:e.providers||[],imports:e.imports||[]}}function Gn(e){return tr(e,mn)||tr(e,Zn)}function tr(e,i){return e.hasOwnProperty(i)?e[i]:null}function Oi(e){return e&&(e.hasOwnProperty(Jt)||e.hasOwnProperty(Un))?e[Jt]:null}const mn=be({\u0275prov:be}),Jt=be({\u0275inj:be}),Zn=be({ngInjectableDef:be}),Un=be({ngInjectorDef:be});var Kt=(()=>((Kt=Kt||{})[Kt.Default=0]="Default",Kt[Kt.Host=1]="Host",Kt[Kt.Self=2]="Self",Kt[Kt.SkipSelf=4]="SkipSelf",Kt[Kt.Optional=8]="Optional",Kt))();let pr;function Kn(e){const i=pr;return pr=e,i}function Tt(e,i,a){const u=Gn(e);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&Kt.Optional?null:void 0!==i?i:void zt(fe(e),"Injector")}function Ve(e){return{toString:e}.toString()}var Mt=(()=>((Mt=Mt||{})[Mt.OnPush=0]="OnPush",Mt[Mt.Default=1]="Default",Mt))(),At=(()=>((At=At||{})[At.Emulated=0]="Emulated",At[At.None=2]="None",At[At.ShadowDom=3]="ShadowDom",At))();const Ne="undefined"!=typeof globalThis&&globalThis,ft="undefined"!=typeof window&&window,vt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ut=Ne||"undefined"!=typeof global&&global||ft||vt,Gt={},Se=[],Ie=be({\u0275cmp:be}),$e=be({\u0275dir:be}),Je=be({\u0275pipe:be}),Xe=be({\u0275mod:be}),Zt=be({\u0275loc:be}),_n=be({\u0275fac:be}),or=be({__NG_ELEMENT_ID__:be});let Bn=0;function Vn(e){return Ve(()=>{const a={},u={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Mt.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Se,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||At.Emulated,id:"c",styles:e.styles||Se,_:null,setInput:null,schemas:e.schemas||null,tView:null},m=e.directives,y=e.features,E=e.pipes;return u.id+=Bn++,u.inputs=Gi(e.inputs,a),u.outputs=Gi(e.outputs),y&&y.forEach(T=>T(u)),u.directiveDefs=m?()=>("function"==typeof m?m():m).map(Hr):null,u.pipeDefs=E?()=>("function"==typeof E?E():E).map(Xr):null,u})}function Hr(e){return Nr(e)||function(e){return e[$e]||null}(e)}function Xr(e){return function(e){return e[Je]||null}(e)}const Dr={};function Ri(e){return Ve(()=>{const i={type:e.type,bootstrap:e.bootstrap||Se,declarations:e.declarations||Se,imports:e.imports||Se,exports:e.exports||Se,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(Dr[e.id]=e.type),i})}function No(e,i){return Ve(()=>{const a=Vr(e,!0);a.declarations=i.declarations||Se,a.imports=i.imports||Se,a.exports=i.exports||Se})}function Gi(e,i){if(null==e)return Gt;const a={};for(const u in e)if(e.hasOwnProperty(u)){let m=e[u],y=m;Array.isArray(m)&&(y=m[1],m=m[0]),a[m]=u,i&&(i[m]=y)}return a}const co=Vn;function rs(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function Nr(e){return e[Ie]||null}function Vr(e,i){const a=e[Xe]||null;if(!a&&!0===i)throw new Error(`Type ${fe(e)} does not have '\u0275mod' property.`);return a}function Yr(e){return Array.isArray(e)&&"object"==typeof e[1]}function Mr(e){return Array.isArray(e)&&!0===e[1]}function Ui(e){return 0!=(8&e.flags)}function ri(e){return 2==(2&e.flags)}function Vi(e){return 1==(1&e.flags)}function Zi(e){return null!==e.template}function ui(e){return 0!=(512&e[2])}function H(e,i){return e.hasOwnProperty(_n)?e[_n]:null}class ge{constructor(i,a,u){this.previousValue=i,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function pt(){return Vt}function Vt(e){return e.type.prototype.ngOnChanges&&(e.setInput=vr),$t}function $t(){const e=Zr(this),i=null==e?void 0:e.current;if(i){const a=e.previous;if(a===Gt)e.previous=i;else for(let u in i)a[u]=i[u];e.current=null,this.ngOnChanges(i)}}function vr(e,i,a,u){const m=Zr(e)||function(e,i){return e[lr]=i}(e,{previous:Gt,current:null}),y=m.current||(m.current={}),E=m.previous,T=this.declaredInputs[a],k=E[T];y[T]=new ge(k&&k.currentValue,i,E===Gt),e[u]=i}pt.ngInherit=!0;const lr="__ngSimpleChanges__";function Zr(e){return e[lr]||null}let os;function $(e){os=e}function P(e){return!!e.listen}const F={createRenderer:(e,i)=>void 0!==os?os:"undefined"!=typeof document?document:void 0};function ye(e){for(;Array.isArray(e);)e=e[0];return e}function j(e,i){return ye(i[e])}function B(e,i){return ye(i[e.index])}function se(e,i){return e.data[i]}function Ze(e,i){return e[i]}function Ot(e,i){const a=i[e];return Yr(a)?a:a[0]}function En(e){return 4==(4&e[2])}function fr(e){return 128==(128&e[2])}function mr(e,i){return null==i?null:e[i]}function zr(e){e[18]=0}function di(e,i){e[5]+=i;let a=e,u=e[3];for(;null!==u&&(1===i&&1===a[5]||-1===i&&0===a[5]);)u[5]+=i,a=u,u=u[3]}const Tn={lFrame:pi(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Gu(){return Tn.bindingsEnabled}function Ft(){return Tn.lFrame.lView}function br(){return Tn.lFrame.tView}function _s(e){return Tn.lFrame.contextLView=e,e[8]}function Ni(){let e=Ms();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ms(){return Tn.lFrame.currentTNode}function zo(e,i){const a=Tn.lFrame;a.currentTNode=e,a.isParent=i}function ie(){return Tn.lFrame.isParent}function A(){Tn.lFrame.isParent=!1}function oe(){return Tn.isInCheckNoChangesMode}function ve(e){Tn.isInCheckNoChangesMode=e}function Oe(){const e=Tn.lFrame;let i=e.bindingRootIndex;return-1===i&&(i=e.bindingRootIndex=e.tView.bindingStartIndex),i}function Pe(){return Tn.lFrame.bindingIndex}function gt(){return Tn.lFrame.bindingIndex++}function qt(e){const i=Tn.lFrame,a=i.bindingIndex;return i.bindingIndex=i.bindingIndex+e,a}function Ir(e,i){const a=Tn.lFrame;a.bindingIndex=a.bindingRootIndex=e,Nn(i)}function Nn(e){Tn.lFrame.currentDirectiveIndex=e}function hi(){return Tn.lFrame.currentQueryIndex}function Br(e){Tn.lFrame.currentQueryIndex=e}function io(e){const i=e[1];return 2===i.type?i.declTNode:1===i.type?e[6]:null}function fi(e,i,a){if(a&Kt.SkipSelf){let m=i,y=e;for(;!(m=m.parent,null!==m||a&Kt.Host||(m=io(y),null===m||(y=y[15],10&m.type))););if(null===m)return!1;i=m,e=y}const u=Tn.lFrame=To();return u.currentTNode=i,u.lView=e,!0}function Po(e){const i=To(),a=e[1];Tn.lFrame=i,i.currentTNode=a.firstChild,i.lView=e,i.tView=a,i.contextLView=e,i.bindingIndex=a.bindingStartIndex,i.inI18n=!1}function To(){const e=Tn.lFrame,i=null===e?null:e.child;return null===i?pi(e):i}function pi(e){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=i),i}function Ro(){const e=Tn.lFrame;return Tn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const $o=Ro;function ji(){const e=Ro();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function gi(){return Tn.lFrame.selectedIndex}function Qi(e){Tn.lFrame.selectedIndex=e}function yi(){const e=Tn.lFrame;return se(e.tView,e.selectedIndex)}function Ei(e,i){for(let a=i.directiveStart,u=i.directiveEnd;a<u;a++){const y=e.data[a].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:T,ngAfterViewInit:k,ngAfterViewChecked:G,ngOnDestroy:te}=y;E&&(e.contentHooks||(e.contentHooks=[])).push(-a,E),T&&((e.contentHooks||(e.contentHooks=[])).push(a,T),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(a,T)),k&&(e.viewHooks||(e.viewHooks=[])).push(-a,k),G&&((e.viewHooks||(e.viewHooks=[])).push(a,G),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(a,G)),null!=te&&(e.destroyHooks||(e.destroyHooks=[])).push(a,te)}}function ao(e,i,a){Mi(e,i,3,a)}function ei(e,i,a,u){(3&e[2])===a&&Mi(e,i,a,u)}function ta(e,i){let a=e[2];(3&a)===i&&(a&=2047,a+=1,e[2]=a)}function Mi(e,i,a,u){const y=null!=u?u:-1,E=i.length-1;let T=0;for(let k=void 0!==u?65535&e[18]:0;k<E;k++)if("number"==typeof i[k+1]){if(T=i[k],null!=u&&T>=u)break}else i[k]<0&&(e[18]+=65536),(T<y||-1==y)&&(Us(e,a,i,k),e[18]=(4294901760&e[18])+k+2),k++}function Us(e,i,a,u){const m=a[u]<0,y=a[u+1],T=e[m?-a[u]:a[u]];if(m){if(e[2]>>11<e[18]>>16&&(3&e[2])===i){e[2]+=2048;try{y.call(T)}finally{}}}else try{y.call(T)}finally{}}class oi{constructor(i,a,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function ba(e,i,a){const u=P(e);let m=0;for(;m<a.length;){const y=a[m];if("number"==typeof y){if(0!==y)break;m++;const E=a[m++],T=a[m++],k=a[m++];u?e.setAttribute(i,T,k,E):i.setAttributeNS(E,T,k)}else{const E=y,T=a[++m];Ba(E)?u&&e.setProperty(i,E,T):u?e.setAttribute(i,E,T):i.setAttribute(E,T),m++}}return m}function qu(e){return 3===e||4===e||6===e}function Ba(e){return 64===e.charCodeAt(0)}function Vs(e,i){if(null!==i&&0!==i.length)if(null===e||0===e.length)e=i.slice();else{let a=-1;for(let u=0;u<i.length;u++){const m=i[u];"number"==typeof m?a=m:0===a||Al(e,a,m,null,-1===a||2===a?i[++u]:null)}}return e}function Al(e,i,a,u,m){let y=0,E=e.length;if(-1===i)E=-1;else for(;y<e.length;){const T=e[y++];if("number"==typeof T){if(T===i){E=-1;break}if(T>i){E=y-1;break}}}for(;y<e.length;){const T=e[y];if("number"==typeof T)break;if(T===a){if(null===u)return void(null!==m&&(e[y+1]=m));if(u===e[y+1])return void(e[y+2]=m)}y++,null!==u&&y++,null!==m&&y++}-1!==E&&(e.splice(E,0,i),y=E+1),e.splice(y++,0,a),null!==u&&e.splice(y++,0,u),null!==m&&e.splice(y++,0,m)}function na(e){return-1!==e}function ja(e){return 32767&e}function Ha(e,i){let a=function(e){return e>>16}(e),u=i;for(;a>0;)u=u[15],a--;return u}let Xi=!0;function mt(e){const i=Xi;return Xi=e,i}let rn=0;function ys(e,i){const a=Ln(e,i);if(-1!==a)return a;const u=i[1];u.firstCreatePass&&(e.injectorIndex=i.length,Ga(u.data,e),Ga(i,null),Ga(u.blueprint,null));const m=Xn(e,i),y=e.injectorIndex;if(na(m)){const E=ja(m),T=Ha(m,i),k=T[1].data;for(let G=0;G<8;G++)i[y+G]=T[E+G]|k[E+G]}return i[y+8]=m,y}function Ga(e,i){e.push(0,0,0,0,0,0,0,0,i)}function Ln(e,i){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===i[e.injectorIndex+8]?-1:e.injectorIndex}function Xn(e,i){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let a=0,u=null,m=i;for(;null!==m;){const y=m[1],E=y.type;if(u=2===E?y.declTNode:1===E?m[6]:null,null===u)return-1;if(a++,m=m[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function sn(e,i,a){!function(e,i,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(or)&&(u=a[or]),null==u&&(u=a[or]=rn++);const m=255&u;i.data[e+(m>>5)]|=1<<m}(e,i,a)}function lu(e,i,a){if(a&Kt.Optional)return e;zt(i,"NodeInjector")}function kr(e,i,a,u){if(a&Kt.Optional&&void 0===u&&(u=null),0==(a&(Kt.Self|Kt.Host))){const m=e[9],y=Kn(void 0);try{return m?m.get(i,u,a&Kt.Optional):Tt(i,u,a&Kt.Optional)}finally{Kn(y)}}return lu(u,i,a)}function Za(e,i,a,u=Kt.Default,m){if(null!==e){const y=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const i=e.hasOwnProperty(or)?e[or]:void 0;return"number"==typeof i?i>=0?255&i:U:i}(a);if("function"==typeof y){if(!fi(i,e,u))return u&Kt.Host?lu(m,a,u):kr(i,a,u,m);try{const E=y(u);if(null!=E||u&Kt.Optional)return E;zt(a)}finally{$o()}}else if("number"==typeof y){let E=null,T=Ln(e,i),k=-1,G=u&Kt.Host?i[16][6]:null;for((-1===T||u&Kt.SkipSelf)&&(k=-1===T?Xn(e,i):i[T+8],-1!==k&&Te(u,!1)?(E=i[1],T=ja(k),i=Ha(k,i)):T=-1);-1!==T;){const te=i[1];if(ce(y,T,te.data)){const me=x(T,i,a,E,u,G);if(me!==qa)return me}k=i[T+8],-1!==k&&Te(u,i[1].data[T+8]===G)&&ce(y,T,i)?(E=te,T=ja(k),i=Ha(k,i)):T=-1}}}return kr(i,a,u,m)}const qa={};function U(){return new je(Ni(),Ft())}function x(e,i,a,u,m,y){const E=i[1],T=E.data[e+8],te=I(T,E,a,null==u?ri(T)&&Xi:u!=E&&0!=(3&T.type),m&Kt.Host&&y===T);return null!==te?q(i,E,te,T):qa}function I(e,i,a,u,m){const y=e.providerIndexes,E=i.data,T=1048575&y,k=e.directiveStart,te=y>>20,we=m?T+te:e.directiveEnd;for(let ke=u?T:T+te;ke<we;ke++){const We=E[ke];if(ke<k&&a===We||ke>=k&&We.type===a)return ke}if(m){const ke=E[k];if(ke&&Zi(ke)&&ke.type===a)return k}return null}function q(e,i,a,u){let m=e[a];const y=i.data;if(function(e){return e instanceof oi}(m)){const E=m;E.resolving&&function(e,i){throw new Re("200",`Circular dependency in DI detected for ${e}`)}(Ct(y[a]));const T=mt(E.canSeeViewProviders);E.resolving=!0;const k=E.injectImpl?Kn(E.injectImpl):null;fi(e,u,Kt.Default);try{m=e[a]=E.factory(void 0,y,e,u),i.firstCreatePass&&a>=u.directiveStart&&function(e,i,a){const{ngOnChanges:u,ngOnInit:m,ngDoCheck:y}=i.type.prototype;if(u){const E=Vt(i);(a.preOrderHooks||(a.preOrderHooks=[])).push(e,E),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(e,E)}m&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-e,m),y&&((a.preOrderHooks||(a.preOrderHooks=[])).push(e,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(e,y))}(a,y[a],i)}finally{null!==k&&Kn(k),mt(T),E.resolving=!1,$o()}}return m}function ce(e,i,a){return!!(a[i+(e>>5)]&1<<e)}function Te(e,i){return!(e&Kt.Self||e&Kt.Host&&i)}class je{constructor(i,a){this._tNode=i,this._lView=a}get(i,a){return Za(this._tNode,this._lView,i,void 0,a)}}function bt(e){return Ve(()=>{const i=e.prototype.constructor,a=i[_n]||dn(i),u=Object.prototype;let m=Object.getPrototypeOf(e.prototype).constructor;for(;m&&m!==u;){const y=m[_n]||dn(m);if(y&&y!==a)return y;m=Object.getPrototypeOf(m)}return y=>new y})}function dn(e){return pe(e)?()=>{const i=dn(le(e));return i&&i()}:H(e)}function ar(e){return function(e,i){if("class"===i)return e.classes;if("style"===i)return e.styles;const a=e.attrs;if(a){const u=a.length;let m=0;for(;m<u;){const y=a[m];if(qu(y))break;if(0===y)m+=2;else if("number"==typeof y)for(m++;m<u&&"string"==typeof a[m];)m++;else{if(y===i)return a[m+1];m+=2}}}return null}(Ni(),e)}const xr="__parameters__";function go(e,i,a){return Ve(()=>{const u=function(e){return function(...a){if(e){const u=e(...a);for(const m in u)this[m]=u[m]}}}(i);function m(...y){if(this instanceof m)return u.apply(this,y),this;const E=new m(...y);return T.annotation=E,T;function T(k,G,te){const me=k.hasOwnProperty(xr)?k[xr]:Object.defineProperty(k,xr,{value:[]})[xr];for(;me.length<=te;)me.push(null);return(me[te]=me[te]||[]).push(E),k}}return a&&(m.prototype=Object.create(a.prototype)),m.prototype.ngMetadataName=e,m.annotationCls=m,m})}class Ii{constructor(i,a){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Cn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ra=new Ii("AnalyzeForEntryComponents"),Hs=Function;function Ko(e,i){void 0===i&&(i=e);for(let a=0;a<e.length;a++){let u=e[a];Array.isArray(u)?(i===e&&(i=e.slice(0,a)),Ko(u,i)):i!==e&&i.push(u)}return i}function mo(e,i){e.forEach(a=>Array.isArray(a)?mo(a,i):i(a))}function Gs(e,i,a){i>=e.length?e.push(a):e.splice(i,0,a)}function Do(e,i){return i>=e.length-1?e.pop():e.splice(i,1)[0]}function $a(e,i){const a=[];for(let u=0;u<e;u++)a.push(i);return a}function bs(e,i,a){let u=ia(e,i);return u>=0?e[1|u]=a:(u=~u,function(e,i,a,u){let m=e.length;if(m==i)e.push(a,u);else if(1===m)e.push(u,e[0]),e[0]=a;else{for(m--,e.push(e[m-1],e[m]);m>i;)e[m]=e[m-2],m--;e[i]=a,e[i+1]=u}}(e,u,i,a)),u}function xs(e,i){const a=ia(e,i);if(a>=0)return e[1|a]}function ia(e,i){return function(e,i,a){let u=0,m=e.length>>a;for(;m!==u;){const y=u+(m-u>>1),E=e[y<<a];if(i===E)return y<<a;E>i?m=y:u=y+1}return~(m<<a)}(e,i,1)}const Qu={},Sa="__NG_DI_FLAG__",Bo="ngTempTokenPath",Il=/\n/gm,oc="__source",Xu=be({provide:String,useValue:be});let Wa;function Aa(e){const i=Wa;return Wa=e,i}function Ol(e,i=Kt.Default){if(void 0===Wa)throw new Error("inject() must be called from an injection context");return null===Wa?Tt(e,void 0,i):Wa.get(e,i&Kt.Optional?null:void 0,i)}function bi(e,i=Kt.Default){return(pr||Ol)(le(e),i)}const sc=bi;function _u(e){const i=[];for(let a=0;a<e.length;a++){const u=le(e[a]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let m,y=Kt.Default;for(let E=0;E<u.length;E++){const T=u[E],k=vu(T);"number"==typeof k?-1===k?m=T.token:y|=k:m=T}i.push(bi(m,y))}else i.push(bi(u))}return i}function Ma(e,i){return e[Sa]=i,e.prototype[Sa]=i,e}function vu(e){return e[Sa]}function Ya(e,i,a,u){const m=e[Bo];throw i[oc]&&m.unshift(i[oc]),e.message=function(e,i,a,u=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let m=fe(i);if(Array.isArray(i))m=i.map(fe).join(" -> ");else if("object"==typeof i){let y=[];for(let E in i)if(i.hasOwnProperty(E)){let T=i[E];y.push(E+":"+("string"==typeof T?JSON.stringify(T):fe(T)))}m=`{${y.join(", ")}}`}return`${a}${u?"("+u+")":""}[${m}]: ${e.replace(Il,"\n  ")}`}("\n"+e.message,m,a,u),e.ngTokenPath=m,e[Bo]=null,e}const Cu=Ma(go("Inject",e=>({token:e})),-1),as=Ma(go("Optional"),8),qs=Ma(go("SkipSelf"),4);let sa;function jo(e){var i;return(null===(i=function(){if(void 0===sa&&(sa=null,Ut.trustedTypes))try{sa=Ut.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return sa}())||void 0===i?void 0:i.createHTML(e))||e}class Ao{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class nl extends Ao{getTypeName(){return"HTML"}}class ac extends Ao{getTypeName(){return"Style"}}class uh extends Ao{getTypeName(){return"Script"}}class uc extends Ao{getTypeName(){return"URL"}}class Pl extends Ao{getTypeName(){return"ResourceURL"}}function $r(e){return e instanceof Ao?e.changingThisBreaksApplicationSecurity:e}function aa(e,i){const a=rl(e);if(null!=a&&a!==i){if("ResourceURL"===a&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===i}function rl(e){return e instanceof Ao&&e.getTypeName()||null}function _d(e){return new nl(e)}function vd(e){return new ac(e)}function lc(e){return new uh(e)}function lh(e){return new uc(e)}function ch(e){return new Pl(e)}class Rl{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const a=(new window.DOMParser).parseFromString(jo(i),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(i):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class qc{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const u=this.inertDocument.createElement("body");a.appendChild(u)}}getInertBodyElement(i){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=jo(i),a;const u=this.inertDocument.createElement("body");return u.innerHTML=jo(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const a=i.attributes;for(let m=a.length-1;0<m;m--){const E=a.item(m).name;("xmlns:ns1"===E||0===E.indexOf("ns1:"))&&i.removeAttribute(E)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const dh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,kl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Jo(e){return(e=String(e)).match(dh)||e.match(kl)?e:"unsafe:"+e}function ws(e){const i={};for(const a of e.split(","))i[a]=!0;return i}function zi(...e){const i={};for(const a of e)for(const u in a)a.hasOwnProperty(u)&&(i[u]=!0);return i}const Fl=ws("area,br,col,hr,img,wbr"),Su=ws("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),il=ws("rp,rt"),ua=zi(Fl,zi(Su,ws("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zi(il,ws("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zi(il,Su)),Au=ws("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ol=ws("srcset"),sl=zi(Au,ol,ws("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ws("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),dc=ws("script,style,template");class hc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let a=i.firstChild,u=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?u=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,u&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let m=this.checkClobberedElement(a,a.nextSibling);if(m){a=m;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(i){const a=i.nodeName.toLowerCase();if(!ua.hasOwnProperty(a))return this.sanitizedSomething=!0,!dc.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const u=i.attributes;for(let m=0;m<u.length;m++){const y=u.item(m),E=y.name,T=E.toLowerCase();if(!sl.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let k=y.value;Au[T]&&(k=Jo(k)),ol[T]&&(e=k,k=(e=String(e)).split(",").map(i=>Jo(i.trim())).join(", ")),this.buf.push(" ",E,'="',fc(k),'"')}var e;return this.buf.push(">"),!0}endElement(i){const a=i.nodeName.toLowerCase();ua.hasOwnProperty(a)&&!Fl.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(i){this.buf.push(fc(i))}checkClobberedElement(i,a){if(a&&(i.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return a}}const Wc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Yc=/([^\#-~ |!])/g;function fc(e){return e.replace(/&/g,"&amp;").replace(Wc,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(Yc,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Xo;function pc(e,i){let a=null;try{Xo=Xo||function(e){const i=new qc(e);return function(){try{return!!(new window.DOMParser).parseFromString(jo(""),"text/html")}catch(e){return!1}}()?new Rl(i):i}(e);let u=i?String(i):"";a=Xo.getInertBodyElement(u);let m=5,y=u;do{if(0===m)throw new Error("Failed to sanitize html because the input is unstable");m--,u=y,y=a.innerHTML,a=Xo.getInertBodyElement(u)}while(u!==y);return jo((new hc).sanitizeChildren(la(a)||a))}finally{if(a){const u=la(a)||a;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function la(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Kr=(()=>((Kr=Kr||{})[Kr.NONE=0]="NONE",Kr[Kr.HTML=1]="HTML",Kr[Kr.STYLE=2]="STYLE",Kr[Kr.SCRIPT=3]="SCRIPT",Kr[Kr.URL=4]="URL",Kr[Kr.RESOURCE_URL=5]="RESOURCE_URL",Kr))();function gc(e){const i=function(){const e=Ft();return e&&e[12]}();return i?i.sanitize(Kr.URL,e)||"":aa(e,"URL")?$r(e):Jo(ze(e))}const $i="__ngContext__";function Ti(e,i){e[$i]=i}function uo(e){const i=function(e){return e[$i]||null}(e);return i?Array.isArray(i)?i:i.lView:null}function Ks(e){return e.ngOriginalError}function Ad(e,...i){e.error(...i)}class ll{constructor(){this._console=console}handleError(i){const a=this._findOriginalError(i),u=this._findContext(i),m=(e=i)&&e.ngErrorLogger||Ad;var e;m(this._console,"ERROR",i),a&&m(this._console,"ORIGINAL ERROR",a),u&&m(this._console,"ERROR CONTEXT",u)}_findContext(i){return i?i.ngDebugContext||this._findContext(Ks(i)):null}_findOriginalError(i){let a=i&&Ks(i);for(;a&&Ks(a);)a=Ks(a);return a||null}}const hl=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ut))();function Qs(e){return e instanceof Function?e():e}var Js=(()=>((Js=Js||{})[Js.Important=1]="Important",Js[Js.DashCase=2]="DashCase",Js))();function nu(e,i){return undefined(e,i)}function xa(e){const i=e[3];return Mr(i)?i[3]:i}function bc(e){return Pd(e[13])}function fl(e){return Pd(e[4])}function Pd(e){for(;null!==e&&!Mr(e);)e=e[4];return e}function Lu(e,i,a,u,m){if(null!=u){let y,E=!1;Mr(u)?y=u:Yr(u)&&(E=!0,u=u[0]);const T=ye(u);0===e&&null!==a?null==m?S(i,a,T):b(i,a,T,m||null,!0):1===e&&null!==a?b(i,a,T,m||null,!0):2===e?function(e,i,a){const u=ue(e,i);u&&function(e,i,a,u){P(e)?e.removeChild(i,a,u):i.removeChild(a)}(e,u,i,a)}(i,T,E):3===e&&i.destroyNode(T),null!=y&&function(e,i,a,u,m){const y=a[7];y!==ye(a)&&Lu(i,e,u,y,m);for(let T=10;T<a.length;T++){const k=a[T];Fs(k[1],k,e,i,u,y)}}(i,e,y,a,m)}}function Jc(e,i,a){return P(e)?e.createElement(i,a):null===a?e.createElement(i):e.createElementNS(a,i)}function Fd(e,i){const a=e[9],u=a.indexOf(i),m=i[3];1024&i[2]&&(i[2]&=-1025,di(m,-1)),a.splice(u,1)}function Nd(e,i){if(e.length<=10)return;const a=10+i,u=e[a];if(u){const m=u[17];null!==m&&m!==e&&Fd(m,u),i>0&&(e[a-1][4]=u[4]);const y=Do(e,10+i);!function(e,i){Fs(e,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const E=y[19];null!==E&&E.detachView(y[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function p(e,i){if(!(256&i[2])){const a=i[11];P(a)&&a.destroyNode&&Fs(e,i,a,3,null,null),function(e){let i=e[13];if(!i)return f(e[1],e);for(;i;){let a=null;if(Yr(i))a=i[13];else{const u=i[10];u&&(a=u)}if(!a){for(;i&&!i[4]&&i!==e;)Yr(i)&&f(i[1],i),i=i[3];null===i&&(i=e),Yr(i)&&f(i[1],i),a=i&&i[4]}i=a}}(i)}}function f(e,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(e,i){let a;if(null!=e&&null!=(a=e.destroyHooks))for(let u=0;u<a.length;u+=2){const m=i[a[u]];if(!(m instanceof oi)){const y=a[u+1];if(Array.isArray(y))for(let E=0;E<y.length;E+=2){const T=m[y[E]],k=y[E+1];try{k.call(T)}finally{}}else try{y.call(m)}finally{}}}}(e,i),function(e,i){const a=e.cleanup,u=i[7];let m=-1;if(null!==a)for(let y=0;y<a.length-1;y+=2)if("string"==typeof a[y]){const E=a[y+1],T="function"==typeof E?E(i):ye(i[E]),k=u[m=a[y+2]],G=a[y+3];"boolean"==typeof G?T.removeEventListener(a[y],k,G):G>=0?u[m=G]():u[m=-G].unsubscribe(),y+=2}else{const E=u[m=a[y+1]];a[y].call(E)}if(null!==u){for(let y=m+1;y<u.length;y++)u[y]();i[7]=null}}(e,i),1===i[1].type&&P(i[11])&&i[11].destroy();const a=i[17];if(null!==a&&Mr(i[3])){a!==i[3]&&Fd(a,i);const u=i[19];null!==u&&u.detachView(e)}}}function g(e,i,a){return function(e,i,a){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return a[0];if(2&u.flags){const m=e.data[u.directiveStart].encapsulation;if(m===At.None||m===At.Emulated)return null}return B(u,a)}(e,i.parent,a)}function b(e,i,a,u,m){P(e)?e.insertBefore(i,a,u,m):i.insertBefore(a,u,m)}function S(e,i,a){P(e)?e.appendChild(i,a):i.appendChild(a)}function N(e,i,a,u,m){null!==u?b(e,i,a,u,m):S(e,i,a)}function ue(e,i){return P(e)?e.parentNode(i):i.parentNode}function Ge(e,i,a){return xt(e,i,a)}let xt=function(e,i,a){return 40&e.type?B(e,a):null};function Yn(e,i,a,u){const m=g(e,u,i),y=i[11],T=Ge(u.parent||i[6],u,i);if(null!=m)if(Array.isArray(a))for(let k=0;k<a.length;k++)N(y,m,a[k],T,!1);else N(y,m,a,T,!1)}function Wr(e,i){if(null!==i){const a=i.type;if(3&a)return B(i,e);if(4&a)return ka(-1,e[i.index]);if(8&a){const u=i.child;if(null!==u)return Wr(e,u);{const m=e[i.index];return Mr(m)?ka(-1,m):ye(m)}}if(32&a)return nu(i,e)()||ye(e[i.index]);{const u=ts(e,i);return null!==u?Array.isArray(u)?u[0]:Wr(xa(e[16]),u):Wr(e,i.next)}}return null}function ts(e,i){return null!==i?e[16][6].projection[i.projection]:null}function ka(e,i){const a=10+e+1;if(a<i.length){const u=i[a],m=u[1].firstChild;if(null!==m)return Wr(u,m)}return i[7]}function Io(e,i,a,u,m,y,E){for(;null!=a;){const T=u[a.index],k=a.type;if(E&&0===i&&(T&&Ti(ye(T),u),a.flags|=4),64!=(64&a.flags))if(8&k)Io(e,i,a.child,u,m,y,!1),Lu(i,e,m,T,y);else if(32&k){const G=nu(a,u);let te;for(;te=G();)Lu(i,e,m,te,y);Lu(i,e,m,T,y)}else 16&k?Nf(e,i,u,a,m,y):Lu(i,e,m,T,y);a=E?a.projectionNext:a.next}}function Fs(e,i,a,u,m,y){Io(a,u,e.firstChild,i,m,y,!1)}function Nf(e,i,a,u,m,y){const E=a[16],k=E[6].projection[u.projection];if(Array.isArray(k))for(let G=0;G<k.length;G++)Lu(i,e,m,k[G],y);else Io(e,i,k,E[3],m,y,!0)}function og(e,i,a){P(e)?e.setAttribute(i,"style",a):i.style.cssText=a}function Lf(e,i,a){P(e)?""===a?e.removeAttribute(i,"class"):e.setAttribute(i,"class",a):i.className=a}function sg(e,i,a){let u=e.length;for(;;){const m=e.indexOf(i,a);if(-1===m)return m;if(0===m||e.charCodeAt(m-1)<=32){const y=i.length;if(m+y===u||e.charCodeAt(m+y)<=32)return m}a=m+1}}const ls="ng-template";function n_(e,i,a){let u=0;for(;u<e.length;){let m=e[u++];if(a&&"class"===m){if(m=e[u],-1!==sg(m.toLowerCase(),i,0))return!0}else if(1===m){for(;u<e.length&&"string"==typeof(m=e[u++]);)if(m.toLowerCase()===i)return!0;return!1}}return!1}function ug(e){return 4===e.type&&e.value!==ls}function r_(e,i,a){return i===(4!==e.type||a?e.value:ls)}function i_(e,i,a){let u=4;const m=e.attrs||[],y=function(e){for(let i=0;i<e.length;i++)if(qu(e[i]))return i;return e.length}(m);let E=!1;for(let T=0;T<i.length;T++){const k=i[T];if("number"!=typeof k){if(!E)if(4&u){if(u=2|1&u,""!==k&&!r_(e,k,a)||""===k&&1===i.length){if(Uu(u))return!1;E=!0}}else{const G=8&u?k:i[++T];if(8&u&&null!==e.attrs){if(!n_(e.attrs,G,a)){if(Uu(u))return!1;E=!0}continue}const me=o_(8&u?"class":k,m,ug(e),a);if(-1===me){if(Uu(u))return!1;E=!0;continue}if(""!==G){let we;we=me>y?"":m[me+1].toLowerCase();const ke=8&u?we:null;if(ke&&-1!==sg(ke,G,0)||2&u&&G!==we){if(Uu(u))return!1;E=!0}}}}else{if(!E&&!Uu(u)&&!Uu(k))return!1;if(E&&Uu(k))continue;E=!1,u=k|1&u}}return Uu(u)||E}function Uu(e){return 0==(1&e)}function o_(e,i,a,u){if(null===i)return-1;let m=0;if(u||!a){let y=!1;for(;m<i.length;){const E=i[m];if(E===e)return m;if(3===E||6===E)y=!0;else{if(1===E||2===E){let T=i[++m];for(;"string"==typeof T;)T=i[++m];continue}if(4===E)break;if(0===E){m+=4;continue}}m+=y?1:2}return-1}return function(e,i){let a=e.indexOf(4);if(a>-1)for(a++;a<e.length;){const u=e[a];if("number"==typeof u)return-1;if(u===i)return a;a++}return-1}(i,e)}function lg(e,i,a=!1){for(let u=0;u<i.length;u++)if(i_(e,i[u],a))return!0;return!1}function Uf(e,i){e:for(let a=0;a<i.length;a++){const u=i[a];if(e.length===u.length){for(let m=0;m<e.length;m++)if(e[m]!==u[m])continue e;return!0}}return!1}function Vf(e,i){return e?":not("+i.trim()+")":i}function Bf(e){let i=e[0],a=1,u=2,m="",y=!1;for(;a<e.length;){let E=e[a];if("string"==typeof E)if(2&u){const T=e[++a];m+="["+E+(T.length>0?'="'+T+'"':"")+"]"}else 8&u?m+="."+E:4&u&&(m+=" "+E);else""!==m&&!Uu(E)&&(i+=Vf(y,m),m=""),u=E,y=y||!Uu(u);a++}return""!==m&&(i+=Vf(y,m)),i}const Cr={};function Zh(e){jf(br(),Ft(),gi()+e,oe())}function jf(e,i,a,u){if(!u)if(3==(3&i[2])){const y=e.preOrderCheckHooks;null!==y&&ao(i,y,a)}else{const y=e.preOrderHooks;null!==y&&ei(i,y,0,a)}Qi(a)}function qh(e,i){return e<<17|i<<2}function iu(e){return e>>17&32767}function Hf(e){return 2|e}function ml(e){return(131068&e)>>2}function Ld(e,i){return-131069&e|i<<2}function _h(e){return 1|e}function Jh(e,i){const a=e.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const m=a[u],y=a[u+1];if(-1!==y){const E=e.data[y];Br(m),E.contentQueries(2,i[y],y)}}}function Bd(e,i,a,u,m,y,E,T,k,G){const te=i.blueprint.slice();return te[0]=m,te[2]=140|u,zr(te),te[3]=te[15]=e,te[8]=a,te[10]=E||e&&e[10],te[11]=T||e&&e[11],te[12]=k||e&&e[12]||null,te[9]=G||e&&e[9]||null,te[6]=y,te[16]=2==i.type?e[16]:te,te}function jd(e,i,a,u,m){let y=e.data[i];if(null===y)y=function(e,i,a,u,m){const y=Ms(),E=ie(),k=e.data[i]=function(e,i,a,u,m,y){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?y:y&&y.parent,a,i,u,m);return null===e.firstChild&&(e.firstChild=k),null!==y&&(E?null==y.child&&null!==k.parent&&(y.child=k):null===y.next&&(y.next=k)),k}(e,i,a,u,m),Tn.lFrame.inI18n&&(y.flags|=64);else if(64&y.type){y.type=a,y.value=u,y.attrs=m;const E=function(){const e=Tn.lFrame,i=e.currentTNode;return e.isParent?i:i.parent}();y.injectorIndex=null===E?-1:E.injectorIndex}return zo(y,!0),y}function ed(e,i,a,u){if(0===a)return-1;const m=i.length;for(let y=0;y<a;y++)i.push(u),e.blueprint.push(u),e.data.push(null);return m}function Hd(e,i,a){Po(i);try{const u=e.viewQuery;null!==u&&Zd(1,u,a);const m=e.template;null!==m&&wg(e,i,m,1,a),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Jh(e,i),e.staticViewQueries&&Zd(2,e.viewQuery,a);const y=e.components;null!==y&&function(e,i){for(let a=0;a<i.length;a++)rp(e,i[a])}(i,y)}catch(u){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),u}finally{i[2]&=-5,ji()}}function td(e,i,a,u){const m=i[2];if(256==(256&m))return;Po(i);const y=oe();try{zr(i),function(e){Tn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==a&&wg(e,i,a,2,u);const E=3==(3&m);if(!y)if(E){const G=e.preOrderCheckHooks;null!==G&&ao(i,G,null)}else{const G=e.preOrderHooks;null!==G&&ei(i,G,0,null),ta(i,0)}if(function(e){for(let i=bc(e);null!==i;i=fl(i)){if(!i[2])continue;const a=i[9];for(let u=0;u<a.length;u++){const m=a[u],y=m[3];0==(1024&m[2])&&di(y,1),m[2]|=1024}}}(i),function(e){for(let i=bc(e);null!==i;i=fl(i))for(let a=10;a<i.length;a++){const u=i[a],m=u[1];fr(u)&&td(m,u,m.template,u[8])}}(i),null!==e.contentQueries&&Jh(e,i),!y)if(E){const G=e.contentCheckHooks;null!==G&&ao(i,G)}else{const G=e.contentHooks;null!==G&&ei(i,G,1),ta(i,1)}!function(e,i){const a=e.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const m=a[u];if(m<0)Qi(~m);else{const y=m,E=a[++u],T=a[++u];Ir(E,y),T(2,i[y])}}}finally{Qi(-1)}}(e,i);const T=e.components;null!==T&&function(e,i){for(let a=0;a<i.length;a++)Vg(e,i[a])}(i,T);const k=e.viewQuery;if(null!==k&&Zd(2,k,u),!y)if(E){const G=e.viewCheckHooks;null!==G&&ao(i,G)}else{const G=e.viewHooks;null!==G&&ei(i,G,2),ta(i,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),y||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,di(i[3],-1))}finally{ji()}}function p_(e,i,a,u){const m=i[10],y=!oe(),E=En(i);try{y&&!E&&m.begin&&m.begin(),E&&Hd(e,i,u),td(e,i,a,u)}finally{y&&!E&&m.end&&m.end()}}function wg(e,i,a,u,m){const y=gi(),E=2&u;try{Qi(-1),E&&i.length>20&&jf(e,i,20,oe()),a(u,m)}finally{Qi(y)}}function Eg(e,i,a){if(Ui(i)){const m=i.directiveEnd;for(let y=i.directiveStart;y<m;y++){const E=e.data[y];E.contentQueries&&E.contentQueries(1,a[y],y)}}}function Yf(e,i,a){!Gu()||(function(e,i,a,u){const m=a.directiveStart,y=a.directiveEnd;e.firstCreatePass||ys(a,i),Ti(u,i);const E=a.initialInputs;for(let T=m;T<y;T++){const k=e.data[T],G=Zi(k);G&&Ng(i,a,k);const te=q(i,e,T,a);Ti(te,i),null!==E&&Lg(0,T-m,te,k,0,E),G&&(Ot(a.index,i)[8]=te)}}(e,i,a,B(a,i)),128==(128&a.flags)&&function(e,i,a){const u=a.directiveStart,m=a.directiveEnd,E=a.index,T=Tn.lFrame.currentDirectiveIndex;try{Qi(E);for(let k=u;k<m;k++){const G=e.data[k],te=i[k];Nn(k),(null!==G.hostBindings||0!==G.hostVars||null!==G.hostAttrs)&&Rg(G,te)}}finally{Qi(-1),Nn(T)}}(e,i,a))}function bh(e,i,a=B){const u=i.localNames;if(null!==u){let m=i.index+1;for(let y=0;y<u.length;y+=2){const E=u[y+1],T=-1===E?a(i,e):e[E];e[m++]=T}}}function Tg(e){const i=e.tView;return null===i||i.incompleteFirstPass?e.tView=ef(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):i}function ef(e,i,a,u,m,y,E,T,k,G){const te=20+u,me=te+m,we=function(e,i){const a=[];for(let u=0;u<i;u++)a.push(u<e?null:Cr);return a}(te,me),ke="function"==typeof G?G():G;return we[1]={type:e,blueprint:we,template:a,queries:null,viewQuery:T,declTNode:i,data:we.slice().fill(null,te),bindingStartIndex:te,expandoStartIndex:me,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:k,consts:ke,incompleteFirstPass:!1}}function Ag(e,i,a,u){const m=op(i);null===a?m.push(u):(m.push(a),e.firstCreatePass&&Gg(e).push(u,m.length-1))}function tf(e,i,a){for(let u in e)if(e.hasOwnProperty(u)){const m=e[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(i,m):a[u]=[i,m]}return a}function da(e,i,a,u,m,y,E,T){const k=B(i,a);let te,G=i.inputs;!T&&null!=G&&(te=G[u])?(zg(e,a,te,u,m),ri(i)&&function(e,i){const a=Ot(i,e);16&a[2]||(a[2]|=64)}(a,i.index)):3&i.type&&(u=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(u),m=null!=E?E(m,i.value||"",u):m,P(y)?y.setProperty(k,u,m):Ba(u)||(k.setProperty?k.setProperty(u,m):k[u]=m))}function Xf(e,i,a,u){let m=!1;if(Gu()){const y=function(e,i,a){const u=e.directiveRegistry;let m=null;if(u)for(let y=0;y<u.length;y++){const E=u[y];lg(a,E.selectors,!1)&&(m||(m=[]),sn(ys(a,i),e,E.type),Zi(E)?(kg(e,a),m.unshift(E)):m.push(E))}return m}(e,i,a),E=null===u?null:{"":-1};if(null!==y){m=!0,Fg(a,e.data.length,y.length);for(let te=0;te<y.length;te++){const me=y[te];me.providersResolver&&me.providersResolver(me)}let T=!1,k=!1,G=ed(e,i,y.length,null);for(let te=0;te<y.length;te++){const me=y[te];a.mergedAttrs=Vs(a.mergedAttrs,me.hostAttrs),np(e,a,i,G,me),tp(G,me,E),null!==me.contentQueries&&(a.flags|=8),(null!==me.hostBindings||null!==me.hostAttrs||0!==me.hostVars)&&(a.flags|=128);const we=me.type.prototype;!T&&(we.ngOnChanges||we.ngOnInit||we.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(a.index),T=!0),!k&&(we.ngOnChanges||we.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(a.index),k=!0),G++}!function(e,i){const u=i.directiveEnd,m=e.data,y=i.attrs,E=[];let T=null,k=null;for(let G=i.directiveStart;G<u;G++){const te=m[G],me=te.inputs,we=null===y||ug(i)?null:nf(me,y);E.push(we),T=tf(me,G,T),k=tf(te.outputs,G,k)}null!==T&&(T.hasOwnProperty("class")&&(i.flags|=16),T.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=E,i.inputs=T,i.outputs=k}(e,a)}E&&function(e,i,a){if(i){const u=e.localNames=[];for(let m=0;m<i.length;m+=2){const y=a[i[m+1]];if(null==y)throw new Re("301",`Export of name '${i[m+1]}' not found!`);u.push(i[m],y)}}}(a,u,E)}return a.mergedAttrs=Vs(a.mergedAttrs,a.attrs),m}function Og(e,i,a,u,m,y){const E=y.hostBindings;if(E){let T=e.hostBindingOpCodes;null===T&&(T=e.hostBindingOpCodes=[]);const k=~i.index;(function(e){let i=e.length;for(;i>0;){const a=e[--i];if("number"==typeof a&&a<0)return a}return 0})(T)!=k&&T.push(k),T.push(u,m,E)}}function Rg(e,i){null!==e.hostBindings&&e.hostBindings(1,i)}function kg(e,i){i.flags|=2,(e.components||(e.components=[])).push(i.index)}function tp(e,i,a){if(a){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)a[i.exportAs[u]]=e;Zi(i)&&(a[""]=e)}}function Fg(e,i,a){e.flags|=1,e.directiveStart=i,e.directiveEnd=i+a,e.providerIndexes=i}function np(e,i,a,u,m){e.data[u]=m;const y=m.factory||(m.factory=H(m.type)),E=new oi(y,Zi(m),null);e.blueprint[u]=E,a[u]=E,Og(e,i,0,u,ed(e,a,m.hostVars,Cr),m)}function Ng(e,i,a){const u=B(i,e),m=Tg(a),y=e[10],E=wh(e,Bd(e,m,null,a.onPush?64:16,u,i,y,y.createRenderer(u,a),null,null));e[i.index]=E}function vl(e,i,a,u,m,y){const E=B(e,i);!function(e,i,a,u,m,y,E){if(null==y)P(e)?e.removeAttribute(i,m,a):i.removeAttribute(m);else{const T=null==E?ze(y):E(y,u||"",m);P(e)?e.setAttribute(i,m,T,a):a?i.setAttributeNS(a,m,T):i.setAttribute(m,T)}}(i[11],E,y,e.value,a,u,m)}function Lg(e,i,a,u,m,y){const E=y[i];if(null!==E){const T=u.setInput;for(let k=0;k<E.length;){const G=E[k++],te=E[k++],me=E[k++];null!==T?u.setInput(a,me,G,te):a[te]=me}}}function nf(e,i){let a=null,u=0;for(;u<i.length;){const m=i[u];if(0!==m)if(5!==m){if("number"==typeof m)break;e.hasOwnProperty(m)&&(null===a&&(a=[]),a.push(m,e[m],i[u+1])),u+=2}else u+=2;else u+=4}return a}function Ug(e,i,a,u){return new Array(e,!0,!1,i,null,0,u,a,null,null)}function Vg(e,i){const a=Ot(i,e);if(fr(a)){const u=a[1];80&a[2]?td(u,a,u.template,a[8]):a[5]>0&&rf(a)}}function rf(e){for(let u=bc(e);null!==u;u=fl(u))for(let m=10;m<u.length;m++){const y=u[m];if(1024&y[2]){const E=y[1];td(E,y,E.template,y[8])}else y[5]>0&&rf(y)}const a=e[1].components;if(null!==a)for(let u=0;u<a.length;u++){const m=Ot(a[u],e);fr(m)&&m[5]>0&&rf(m)}}function rp(e,i){const a=Ot(i,e),u=a[1];(function(e,i){for(let a=i.length;a<e.blueprint.length;a++)i.push(e.blueprint[a])})(u,a),Hd(u,a,a[8])}function wh(e,i){return e[13]?e[14][4]=i:e[13]=i,e[14]=i,i}function Eh(e){for(;e;){e[2]|=64;const i=xa(e);if(ui(e)&&!i)return e;e=i}return null}function Ac(e,i,a){const u=i[10];u.begin&&u.begin();try{td(e,i,e.template,a)}catch(m){throw qg(i,m),m}finally{u.end&&u.end()}}function ip(e){!function(e){for(let i=0;i<e.components.length;i++){const a=e.components[i],u=uo(a),m=u[1];p_(m,u,m.template,a)}}(e[8])}function Zd(e,i,a){Br(0),i(e,a)}const Hg=(()=>Promise.resolve(null))();function op(e){return e[7]||(e[7]=[])}function Gg(e){return e.cleanup||(e.cleanup=[])}function qg(e,i){const a=e[9],u=a?a.get(ll,null):null;u&&u.handleError(i)}function zg(e,i,a,u,m){for(let y=0;y<a.length;){const E=a[y++],T=a[y++],k=i[E],G=e.data[E];null!==G.setInput?G.setInput(k,m,u,T):k[T]=m}}function Vu(e,i,a){const u=j(i,e);!function(e,i,a){P(e)?e.setValue(i,a):i.textContent=a}(e[11],u,a)}function qd(e,i,a){let u=a?e.styles:null,m=a?e.classes:null,y=0;if(null!==i)for(let E=0;E<i.length;E++){const T=i[E];"number"==typeof T?y=T:1==y?m=_e(m,T):2==y&&(u=_e(u,T+": "+i[++E]+";"))}a?e.styles=u:e.stylesWithoutHost=u,a?e.classes=m:e.classesWithoutHost=m}const Gl=new Ii("INJECTOR",-1);class Di{get(i,a=Qu){if(a===Qu){const u=new Error(`NullInjectorError: No provider for ${fe(i)}!`);throw u.name="NullInjectorError",u}return a}}const zd=new Ii("Set Injector scope."),$d={},Dh={};let lo;function ea(){return void 0===lo&&(lo=new Di),lo}function sp(e,i=null,a=null,u){return new sf(e,a,i||ea(),u)}class sf{constructor(i,a,u,m=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const y=[];a&&mo(a,T=>this.processProvider(T,i,a)),mo([i],T=>this.processInjectorType(T,[],y)),this.records.set(Gl,Wd(void 0,this));const E=this.records.get(zd);this.scope=null!=E?E.value:null,this.source=m||("object"==typeof i?null:fe(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,a=Qu,u=Kt.Default){this.assertNotDestroyed();const m=Aa(this),y=Kn(void 0);try{if(!(u&Kt.SkipSelf)){let T=this.records.get(i);if(void 0===T){const k=("function"==typeof(e=i)||"object"==typeof e&&e instanceof Ii)&&Gn(i);T=k&&this.injectableDefInScope(k)?Wd(af(i),$d):null,this.records.set(i,T)}if(null!=T)return this.hydrate(i,T)}return(u&Kt.Self?ea():this.parent).get(i,a=u&Kt.Optional&&a===Qu?null:a)}catch(E){if("NullInjectorError"===E.name){if((E[Bo]=E[Bo]||[]).unshift(fe(i)),m)throw E;return Ya(E,i,"R3InjectorError",this.source)}throw E}finally{Kn(y),Aa(m)}var e}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,m)=>i.push(fe(m))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,a,u){if(!(i=le(i)))return!1;let m=Oi(i);const y=null==m&&i.ngModule||void 0,E=void 0===y?i:y,T=-1!==u.indexOf(E);if(void 0!==y&&(m=Oi(y)),null==m)return!1;if(null!=m.imports&&!T){let te;u.push(E);try{mo(m.imports,me=>{this.processInjectorType(me,a,u)&&(void 0===te&&(te=[]),te.push(me))})}finally{}if(void 0!==te)for(let me=0;me<te.length;me++){const{ngModule:we,providers:ke}=te[me];mo(ke,We=>this.processProvider(We,we,ke||Se))}}this.injectorDefTypes.add(E);const k=H(E)||(()=>new E);this.records.set(E,Wd(k,$d));const G=m.providers;if(null!=G&&!T){const te=i;mo(G,me=>this.processProvider(me,te,G))}return void 0!==y&&void 0!==i.providers}processProvider(i,a,u){let m=rd(i=le(i))?i:le(i&&i.provide);const y=Kg(e=i)?Wd(void 0,e.useValue):Wd(nd(e),$d);var e;if(rd(i)||!0!==i.multi)this.records.get(m);else{let E=this.records.get(m);E||(E=Wd(void 0,$d,!0),E.factory=()=>_u(E.multi),this.records.set(m,E)),m=i,E.multi.push(i)}this.records.set(m,y)}hydrate(i,a){return a.value===$d&&(a.value=Dh,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(e=a.value)&&"object"==typeof e&&"function"==typeof e.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var e}injectableDefInScope(i){if(!i.providedIn)return!1;const a=le(i.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function af(e){const i=Gn(e),a=null!==i?i.factory:H(e);if(null!==a)return a;if(e instanceof Ii)throw new Error(`Token ${fe(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const i=e.length;if(i>0){const u=$a(i,"?");throw new Error(`Can't resolve all parameters for ${fe(e)}: (${u.join(", ")}).`)}const a=function(e){const i=e&&(e[mn]||e[Zn]);if(i){const a=function(e){if(e.hasOwnProperty("name"))return e.name;const i=(""+e).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),i}return null}(e);return null!==a?()=>a.factory(e):()=>new e}(e);throw new Error("unreachable")}function nd(e,i,a){let u;if(rd(e)){const m=le(e);return H(m)||af(m)}if(Kg(e))u=()=>le(e.useValue);else if(function(e){return!(!e||!e.useFactory)}(e))u=()=>e.useFactory(..._u(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))u=()=>bi(le(e.useExisting));else{const m=le(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return H(m)||af(m);u=()=>new m(..._u(e.deps))}return u}function Wd(e,i,a=!1){return{factory:e,value:i,multi:a?[]:void 0}}function Kg(e){return null!==e&&"object"==typeof e&&Xu in e}function rd(e){return"function"==typeof e}const Xg=function(e,i,a){return function(e,i=null,a=null,u){const m=sp(e,i,a,u);return m._resolveInjectorDefTypes(),m}({name:a},i,e,a)};let yo=(()=>{class e{static create(a,u){return Array.isArray(a)?Xg(a,u,""):Xg(a.providers,a.parent,a.name||"")}}return e.THROW_IF_NOT_FOUND=Qu,e.NULL=new Di,e.\u0275prov=Cn({token:e,providedIn:"any",factory:()=>bi(Gl)}),e.__NG_ELEMENT_ID__=-1,e})();function am(e,i){Ei(uo(e)[1],Ni())}function Xd(e){let i=function(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),a=!0;const u=[e];for(;i;){let m;if(Zi(e))m=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Error("Directives cannot inherit Components");m=i.\u0275dir}if(m){if(a){u.push(m);const E=e;E.inputs=bp(e.inputs),E.declaredInputs=bp(e.declaredInputs),E.outputs=bp(e.outputs);const T=m.hostBindings;T&&um(e,T);const k=m.viewQuery,G=m.contentQueries;if(k&&Ic(e,k),G&&ud(e,G),xe(e.inputs,m.inputs),xe(e.declaredInputs,m.declaredInputs),xe(e.outputs,m.outputs),Zi(m)&&m.data.animation){const te=e.data;te.animation=(te.animation||[]).concat(m.data.animation)}}const y=m.features;if(y)for(let E=0;E<y.length;E++){const T=y[E];T&&T.ngInherit&&T(e),T===Xd&&(a=!1)}}i=Object.getPrototypeOf(i)}!function(e){let i=0,a=null;for(let u=e.length-1;u>=0;u--){const m=e[u];m.hostVars=i+=m.hostVars,m.hostAttrs=Vs(m.hostAttrs,a=Vs(a,m.hostAttrs))}}(u)}function bp(e){return e===Gt?{}:e===Se?[]:e}function Ic(e,i){const a=e.viewQuery;e.viewQuery=a?(u,m)=>{i(u,m),a(u,m)}:i}function ud(e,i){const a=e.contentQueries;e.contentQueries=a?(u,m,y)=>{i(u,m,y),a(u,m,y)}:i}function um(e,i){const a=e.hostBindings;e.hostBindings=a?(u,m)=>{i(u,m),a(u,m)}:i}let gf=null;function ld(){if(!gf){const e=Ut.Symbol;if(e&&e.iterator)gf=e.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<i.length;++a){const u=i[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(gf=u)}}}return gf}class ou{constructor(i){this.wrapped=i}static wrap(i){return new ou(i)}static unwrap(i){return ou.isWrapped(i)?i.wrapped:i}static isWrapped(i){return i instanceof ou}}function Mh(e){return!!Ep(e)&&(Array.isArray(e)||!(e instanceof Map)&&ld()in e)}function Ep(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ju(e,i,a){return e[i]=a}function cs(e,i,a){return!Object.is(e[i],a)&&(e[i]=a,!0)}function Fa(e,i,a,u){const m=cs(e,i,a);return cs(e,i+1,u)||m}function _f(e,i,a,u){const m=Ft();return cs(m,gt(),i)&&(br(),vl(yi(),m,e,i,a,u)),_f}function wl(e,i,a,u){return cs(e,gt(),a)?i+ze(a)+u:Cr}function Ih(e,i,a,u,m,y,E,T){const k=Ft(),G=br(),te=e+20,me=G.firstCreatePass?function(e,i,a,u,m,y,E,T,k){const G=i.consts,te=jd(i,e,4,E||null,mr(G,T));Xf(i,a,te,mr(G,k)),Ei(i,te);const me=te.tViews=ef(2,te,u,m,y,i.directiveRegistry,i.pipeRegistry,null,i.schemas,G);return null!==i.queries&&(i.queries.template(i,te),me.queries=i.queries.embeddedTView(te)),te}(te,G,k,i,a,u,m,y,E):G.data[te];zo(me,!1);const we=k[11].createComment("");Yn(G,k,we,me),Ti(we,k),wh(k,k[te]=Ug(we,k,we,me)),Vi(me)&&Yf(G,k,me),null!=E&&bh(k,me,T)}function _m(e){return Ze(Tn.lFrame.contextLView,20+e)}function xp(e,i=Kt.Default){const a=Ft();return null===a?bi(e,i):Za(Ni(),a,le(e),i)}function B_(e,i,a){const u=Ft();return cs(u,gt(),i)&&da(br(),yi(),u,e,i,u[11],a,!1),B_}function j_(e,i,a,u,m){const E=m?"class":"style";zg(e,a,i.inputs[E],E,u)}function H_(e,i,a,u){const m=Ft(),y=br(),E=20+e,T=m[11],k=m[E]=Jc(T,i,Tn.lFrame.currentNamespace),G=y.firstCreatePass?function(e,i,a,u,m,y,E){const T=i.consts,G=jd(i,e,2,m,mr(T,y));return Xf(i,a,G,mr(T,E)),null!==G.attrs&&qd(G,G.attrs,!1),null!==G.mergedAttrs&&qd(G,G.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,G),G}(E,y,m,0,i,a,u):y.data[E];zo(G,!0);const te=G.mergedAttrs;null!==te&&ba(T,k,te);const me=G.classes;null!==me&&Lf(T,k,me);const we=G.styles;null!==we&&og(T,k,we),64!=(64&G.flags)&&Yn(y,m,k,G),0===Tn.lFrame.elementDepthCount&&Ti(k,m),Tn.lFrame.elementDepthCount++,Vi(G)&&(Yf(y,m,G),Eg(y,G,m)),null!==u&&bh(m,G)}function G_(){let e=Ni();ie()?A():(e=e.parent,zo(e,!1));const i=e;Tn.lFrame.elementDepthCount--;const a=br();a.firstCreatePass&&(Ei(a,e),Ui(e)&&a.queries.elementEnd(e)),null!=i.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(i)&&j_(a,i,Ft(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(i)&&j_(a,i,Ft(),i.stylesWithoutHost,!1)}function Iy(e,i,a,u){H_(e,i,a,u),G_()}function Z_(e,i,a){const u=Ft(),m=br(),y=e+20,E=m.firstCreatePass?function(e,i,a,u,m){const y=i.consts,E=mr(y,u),T=jd(i,e,8,"ng-container",E);return null!==E&&qd(T,E,!0),Xf(i,a,T,mr(y,m)),null!==i.queries&&i.queries.elementStart(i,T),T}(y,m,u,i,a):m.data[y];zo(E,!0);const T=u[y]=u[11].createComment("");Yn(m,u,T,E),Ti(T,u),Vi(E)&&(Yf(m,u,E),Eg(m,E,u)),null!=a&&bh(u,E)}function q_(){let e=Ni();const i=br();ie()?A():(e=e.parent,zo(e,!1)),i.firstCreatePass&&(Ei(i,e),Ui(e)&&i.queries.elementEnd(e))}function Oy(){return Ft()}function z_(e){return!!e&&"function"==typeof e.then}function xy(e){return!!e&&"function"==typeof e.subscribe}const $_=xy;function W_(e,i,a,u){const m=Ft(),y=br(),E=Ni();return function(e,i,a,u,m,y,E,T){const k=Vi(u),te=e.firstCreatePass&&Gg(e),me=i[8],we=op(i);let ke=!0;if(3&u.type||T){const dt=B(u,i),Yt=T?T(dt):dt,Rt=we.length,er=T?wr=>T(ye(wr[u.index])):u.index;if(P(a)){let wr=null;if(!T&&k&&(wr=function(e,i,a,u){const m=e.cleanup;if(null!=m)for(let y=0;y<m.length-1;y+=2){const E=m[y];if(E===a&&m[y+1]===u){const T=i[7],k=m[y+2];return T.length>k?T[k]:null}"string"==typeof E&&(y+=2)}return null}(e,i,m,u.index)),null!==wr)(wr.__ngLastListenerFn__||wr).__ngNextListenerFn__=y,wr.__ngLastListenerFn__=y,ke=!1;else{y=Y_(u,i,me,y,!1);const vi=a.listen(Yt,m,y);we.push(y,vi),te&&te.push(m,er,Rt,Rt+1)}}else y=Y_(u,i,me,y,!0),Yt.addEventListener(m,y,E),we.push(y),te&&te.push(m,er,Rt,E)}else y=Y_(u,i,me,y,!1);const We=u.outputs;let yt;if(ke&&null!==We&&(yt=We[m])){const dt=yt.length;if(dt)for(let Yt=0;Yt<dt;Yt+=2){const As=i[yt[Yt]][yt[Yt+1]].subscribe(y),Sl=we.length;we.push(y,As),te&&te.push(m,u.index,Sl,-(Sl+1))}}}(y,m,m[11],E,e,i,!!a,u),W_}function ky(e,i,a,u){try{return!1!==a(u)}catch(m){return qg(e,m),!1}}function Y_(e,i,a,u,m){return function y(E){if(E===Function)return u;const T=2&e.flags?Ot(e.index,i):i;0==(32&i[2])&&Eh(T);let k=ky(i,0,u,E),G=y.__ngNextListenerFn__;for(;G;)k=ky(i,0,G,E)&&k,G=G.__ngNextListenerFn__;return m&&!1===k&&(E.preventDefault(),E.returnValue=!1),k}}function Fy(e=1){return function(e){return(Tn.lFrame.contextLView=function(e,i){for(;e>0;)i=i[15],e--;return i}(e,Tn.lFrame.contextLView))[8]}(e)}function Cw(e,i){let a=null;const u=function(e){const i=e.attrs;if(null!=i){const a=i.indexOf(5);if(0==(1&a))return i[a+1]}return null}(e);for(let m=0;m<i.length;m++){const y=i[m];if("*"!==y){if(null===u?lg(e,y,!0):Uf(u,y))return m}else a=m}return a}function Ny(e){const i=Ft()[16][6];if(!i.projection){const u=i.projection=$a(e?e.length:1,null),m=u.slice();let y=i.child;for(;null!==y;){const E=e?Cw(y,e):0;null!==E&&(m[E]?m[E].projectionNext=y:u[E]=y,m[E]=y),y=y.next}}}function Ly(e,i=0,a){const u=Ft(),m=br(),y=jd(m,20+e,16,null,a||null);null===y.projection&&(y.projection=i),A(),64!=(64&y.flags)&&function(e,i,a){Nf(i[11],0,i,a,g(e,a,i),Ge(a.parent||i[6],a,i))}(m,u,y)}function $y(e,i,a,u,m){const y=e[a+1],E=null===i;let T=u?iu(y):ml(y),k=!1;for(;0!==T&&(!1===k||E);){const te=e[T+1];Tw(e[T],i)&&(k=!0,e[T+1]=u?_h(te):Hf(te)),T=u?iu(te):ml(te)}k&&(e[a+1]=u?Hf(y):_h(y))}function Tw(e,i){return null===e||null==i||(Array.isArray(e)?e[1]:e)===i||!(!Array.isArray(e)||"string"!=typeof i)&&ia(e,i)>=0}const Ss={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Wy(e){return e.substring(Ss.key,Ss.keyEnd)}function Yy(e,i){const a=Ss.textEnd;return a===i?-1:(i=Ss.keyEnd=function(e,i,a){for(;i<a&&e.charCodeAt(i)>32;)i++;return i}(e,Ss.key=i,a),yf(e,i,a))}function yf(e,i,a){for(;i<a&&e.charCodeAt(i)<=32;)i++;return i}function Q_(e,i,a){return Wl(e,i,a,!1),Q_}function J_(e,i){return Wl(e,i,null,!0),J_}function Pc(e,i){for(let a=function(e){return function(e){Ss.key=0,Ss.keyEnd=0,Ss.value=0,Ss.valueEnd=0,Ss.textEnd=e.length}(e),Yy(e,yf(e,0,Ss.textEnd))}(i);a>=0;a=Yy(i,a))bs(e,Wy(i),!0)}function Wl(e,i,a,u){const m=Ft(),y=br(),E=qt(2);y.firstUpdatePass&&tb(y,e,E,u),i!==Cr&&cs(m,E,i)&&rb(y,y.data[gi()],m,m[11],e,m[E+1]=function(e,i){return null==e||("string"==typeof i?e+=i:"object"==typeof e&&(e=fe($r(e)))),e}(i,a),u,E)}function eb(e,i){return i>=e.expandoStartIndex}function tb(e,i,a,u){const m=e.data;if(null===m[a+1]){const y=m[gi()],E=eb(e,a);ob(y,u)&&null===i&&!E&&(i=!1),i=function(e,i,a,u){const m=function(e){const i=Tn.lFrame.currentDirectiveIndex;return-1===i?null:e[i]}(e);let y=u?i.residualClasses:i.residualStyles;if(null===m)0===(u?i.classBindings:i.styleBindings)&&(a=Pp(a=X_(null,e,i,a,u),i.attrs,u),y=null);else{const E=i.directiveStylingLast;if(-1===E||e[E]!==m)if(a=X_(m,e,i,a,u),null===y){let k=function(e,i,a){const u=a?i.classBindings:i.styleBindings;if(0!==ml(u))return e[iu(u)]}(e,i,u);void 0!==k&&Array.isArray(k)&&(k=X_(null,e,i,k[1],u),k=Pp(k,i.attrs,u),function(e,i,a,u){e[iu(a?i.classBindings:i.styleBindings)]=u}(e,i,u,k))}else y=function(e,i,a){let u;const m=i.directiveEnd;for(let y=1+i.directiveStylingLast;y<m;y++)u=Pp(u,e[y].hostAttrs,a);return Pp(u,i.attrs,a)}(e,i,u)}return void 0!==y&&(u?i.residualClasses=y:i.residualStyles=y),a}(m,y,i,u),function(e,i,a,u,m,y){let E=y?i.classBindings:i.styleBindings,T=iu(E),k=ml(E);e[u]=a;let te,G=!1;if(Array.isArray(a)){const me=a;te=me[1],(null===te||ia(me,te)>0)&&(G=!0)}else te=a;if(m)if(0!==k){const we=iu(e[T+1]);e[u+1]=qh(we,T),0!==we&&(e[we+1]=Ld(e[we+1],u)),e[T+1]=function(e,i){return 131071&e|i<<17}(e[T+1],u)}else e[u+1]=qh(T,0),0!==T&&(e[T+1]=Ld(e[T+1],u)),T=u;else e[u+1]=qh(k,0),0===T?T=u:e[k+1]=Ld(e[k+1],u),k=u;G&&(e[u+1]=Hf(e[u+1])),$y(e,te,u,!0),$y(e,te,u,!1),function(e,i,a,u,m){const y=m?e.residualClasses:e.residualStyles;null!=y&&"string"==typeof i&&ia(y,i)>=0&&(a[u+1]=_h(a[u+1]))}(i,te,e,u,y),E=qh(T,k),y?i.classBindings=E:i.styleBindings=E}(m,y,i,a,E,u)}}function X_(e,i,a,u,m){let y=null;const E=a.directiveEnd;let T=a.directiveStylingLast;for(-1===T?T=a.directiveStart:T++;T<E&&(y=i[T],u=Pp(u,y.hostAttrs,m),y!==e);)T++;return null!==e&&(a.directiveStylingLast=T),u}function Pp(e,i,a){const u=a?1:2;let m=-1;if(null!==i)for(let y=0;y<i.length;y++){const E=i[y];"number"==typeof E?m=E:m===u&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),bs(e,E,!!a||i[++y]))}return void 0===e?null:e}function rb(e,i,a,u,m,y,E,T){if(!(3&i.type))return;const k=e.data,G=k[T+1];Tm(function(e){return 1==(1&e)}(G)?ib(k,i,a,m,ml(G),E):void 0)||(Tm(y)||function(e){return 2==(2&e)}(G)&&(y=ib(k,null,a,m,T,E)),function(e,i,a,u,m){const y=P(e);if(i)m?y?e.addClass(a,u):a.classList.add(u):y?e.removeClass(a,u):a.classList.remove(u);else{let E=-1===u.indexOf("-")?void 0:Js.DashCase;if(null==m)y?e.removeStyle(a,u,E):a.style.removeProperty(u);else{const T="string"==typeof m&&m.endsWith("!important");T&&(m=m.slice(0,-10),E|=Js.Important),y?e.setStyle(a,u,m,E):a.style.setProperty(u,m,T?"important":"")}}}(u,E,j(gi(),a),m,y))}function ib(e,i,a,u,m,y){const E=null===i;let T;for(;m>0;){const k=e[m],G=Array.isArray(k),te=G?k[1]:k,me=null===te;let we=a[m+1];we===Cr&&(we=me?Se:void 0);let ke=me?xs(we,u):te===u?we:void 0;if(G&&!Tm(ke)&&(ke=xs(k,u)),Tm(ke)&&(T=ke,E))return T;const We=e[m+1];m=E?iu(We):ml(We)}if(null!==i){let k=y?i.residualClasses:i.residualStyles;null!=k&&(T=xs(k,u))}return T}function Tm(e){return void 0!==e}function ob(e,i){return 0!=(e.flags&(i?16:32))}function sb(e,i=""){const a=Ft(),u=br(),m=e+20,y=u.firstCreatePass?jd(u,m,1,i,null):u.data[m],E=a[m]=function(e,i){return P(e)?e.createText(i):e.createTextNode(i)}(a[11],i);Yn(u,a,E,y),zo(y,!1)}function ev(e){return Dm("",e,""),ev}function Dm(e,i,a){const u=Ft(),m=wl(u,e,i,a);return m!==Cr&&Vu(u,gi(),m),Dm}function tv(e,i,a,u,m){const y=Ft(),E=function(e,i,a,u,m,y){const T=Fa(e,Pe(),a,m);return qt(2),T?i+ze(a)+u+ze(m)+y:Cr}(y,e,i,a,u,m);return E!==Cr&&Vu(y,gi(),E),tv}function pb(e,i,a){!function(e,i,a,u){const m=br(),y=qt(2);m.firstUpdatePass&&tb(m,null,y,u);const E=Ft();if(a!==Cr&&cs(E,y,a)){const T=m.data[gi()];if(ob(T,u)&&!eb(m,y)){let k=u?T.classesWithoutHost:T.stylesWithoutHost;null!==k&&(a=_e(k,a||"")),j_(m,T,E,a,u)}else!function(e,i,a,u,m,y,E,T){m===Cr&&(m=Se);let k=0,G=0,te=0<m.length?m[0]:null,me=0<y.length?y[0]:null;for(;null!==te||null!==me;){const we=k<m.length?m[k+1]:void 0,ke=G<y.length?y[G+1]:void 0;let yt,We=null;te===me?(k+=2,G+=2,we!==ke&&(We=me,yt=ke)):null===me||null!==te&&te<me?(k+=2,We=te):(G+=2,We=me,yt=ke),null!==We&&rb(e,i,a,u,We,yt,E,T),te=k<m.length?m[k]:null,me=G<y.length?y[G]:null}}(m,T,E,E[11],E[y+1],E[y+1]=function(e,i,a){if(null==a||""===a)return Se;const u=[],m=$r(a);if(Array.isArray(m))for(let y=0;y<m.length;y++)e(u,m[y],!0);else if("object"==typeof m)for(const y in m)m.hasOwnProperty(y)&&e(u,y,m[y]);else"string"==typeof m&&i(u,m);return u}(e,i,a),u,y)}}(bs,Pc,wl(Ft(),e,i,a),!0)}function nv(e,i,a){const u=Ft();return cs(u,gt(),i)&&da(br(),yi(),u,e,i,u[11],a,!0),nv}const xh=void 0;var iE=["en",[["a","p"],["AM","PM"],xh],[["AM","PM"],xh,xh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xh,"{1} 'at' {0}",xh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const i=Math.floor(Math.abs(e)),a=e.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===a?1:5}];let bf={};function rv(e){const i=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let a=Sb(i);if(a)return a;const u=i.split("-")[0];if(a=Sb(u),a)return a;if("en"===u)return iE;throw new Error(`Missing locale data for the locale "${e}".`)}function Db(e){return rv(e)[_r.PluralCase]}function Sb(e){return e in bf||(bf[e]=Ut.ng&&Ut.ng.common&&Ut.ng.common.locales&&Ut.ng.common.locales[e]),bf[e]}var _r=(()=>((_r=_r||{})[_r.LocaleId=0]="LocaleId",_r[_r.DayPeriodsFormat=1]="DayPeriodsFormat",_r[_r.DayPeriodsStandalone=2]="DayPeriodsStandalone",_r[_r.DaysFormat=3]="DaysFormat",_r[_r.DaysStandalone=4]="DaysStandalone",_r[_r.MonthsFormat=5]="MonthsFormat",_r[_r.MonthsStandalone=6]="MonthsStandalone",_r[_r.Eras=7]="Eras",_r[_r.FirstDayOfWeek=8]="FirstDayOfWeek",_r[_r.WeekendRange=9]="WeekendRange",_r[_r.DateFormat=10]="DateFormat",_r[_r.TimeFormat=11]="TimeFormat",_r[_r.DateTimeFormat=12]="DateTimeFormat",_r[_r.NumberSymbols=13]="NumberSymbols",_r[_r.NumberFormats=14]="NumberFormats",_r[_r.CurrencyCode=15]="CurrencyCode",_r[_r.CurrencySymbol=16]="CurrencySymbol",_r[_r.CurrencyName=17]="CurrencyName",_r[_r.Currencies=18]="Currencies",_r[_r.Directionality=19]="Directionality",_r[_r.PluralCase=20]="PluralCase",_r[_r.ExtraData=21]="ExtraData",_r))();const Sm="en-US";let Ab=Sm;function iv(e){Bt(e,"Expected localeId to be defined"),"string"==typeof e&&(Ab=e.toLowerCase().replace(/_/g,"-"))}function av(e,i,a,u,m){if(e=le(e),Array.isArray(e))for(let y=0;y<e.length;y++)av(e[y],i,a,u,m);else{const y=br(),E=Ft();let T=rd(e)?e:le(e.provide),k=nd(e);const G=Ni(),te=1048575&G.providerIndexes,me=G.directiveStart,we=G.providerIndexes>>20;if(rd(e)||!e.multi){const ke=new oi(k,m,xp),We=lv(T,i,m?te:te+we,me);-1===We?(sn(ys(G,E),y,T),uv(y,e,i.length),i.push(T),G.directiveStart++,G.directiveEnd++,m&&(G.providerIndexes+=1048576),a.push(ke),E.push(ke)):(a[We]=ke,E[We]=ke)}else{const ke=lv(T,i,te+we,me),We=lv(T,i,te,te+we),yt=ke>=0&&a[ke],dt=We>=0&&a[We];if(m&&!dt||!m&&!yt){sn(ys(G,E),y,T);const Yt=function(e,i,a,u,m){const y=new oi(e,a,xp);return y.multi=[],y.index=i,y.componentProviders=0,Qb(y,m,u&&!a),y}(m?tT:eT,a.length,m,u,k);!m&&dt&&(a[We].providerFactory=Yt),uv(y,e,i.length,0),i.push(T),G.directiveStart++,G.directiveEnd++,m&&(G.providerIndexes+=1048576),a.push(Yt),E.push(Yt)}else uv(y,e,ke>-1?ke:We,Qb(a[m?We:ke],k,!m&&u));!m&&u&&dt&&a[We].componentProviders++}}}function uv(e,i,a,u){const m=rd(i);if(m||function(e){return!!e.useClass}(i)){const E=(i.useClass||i).prototype.ngOnDestroy;if(E){const T=e.destroyHooks||(e.destroyHooks=[]);if(!m&&i.multi){const k=T.indexOf(a);-1===k?T.push(a,[u,E]):T[k+1].push(u,E)}else T.push(a,E)}}}function Qb(e,i,a){return a&&e.componentProviders++,e.multi.push(i)-1}function lv(e,i,a,u){for(let m=a;m<u;m++)if(i[m]===e)return m;return-1}function eT(e,i,a,u){return cv(this.multi,[])}function tT(e,i,a,u){const m=this.multi;let y;if(this.providerFactory){const E=this.providerFactory.componentProviders,T=q(a,a[1],this.providerFactory.index,u);y=T.slice(0,E),cv(m,y);for(let k=E;k<T.length;k++)y.push(T[k])}else y=[],cv(m,y);return y}function cv(e,i){for(let a=0;a<e.length;a++)i.push((0,e[a])());return i}function Jb(e,i=[]){return a=>{a.providersResolver=(u,m)=>function(e,i,a){const u=br();if(u.firstCreatePass){const m=Zi(e);av(a,u.data,u.blueprint,m,!0),av(i,u.data,u.blueprint,m,!1)}}(u,m?m(e):e,i)}}class Xb{}const t0="ngComponent";class iT{resolveComponentFactory(i){throw function(e){const i=Error(`No component factory found for ${fe(e)}. Did you add it to @NgModule.entryComponents?`);return i[t0]=e,i}(i)}}let wf=(()=>{class e{}return e.NULL=new iT,e})();function xm(...e){}function Ef(e,i){return new Rc(B(e,i))}const aT=function(){return Ef(Ni(),Ft())};let Rc=(()=>{class e{constructor(a){this.nativeElement=a}}return e.__NG_ELEMENT_ID__=aT,e})();function n0(e){return e instanceof Rc?e.nativeElement:e}class Pm{}let uT=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>cT(),e})();const cT=function(){const e=Ft(),a=Ot(Ni().index,e);return function(e){return e[11]}(Yr(a)?a:e)};let hv=(()=>{class e{}return e.\u0275prov=Cn({token:e,providedIn:"root",factory:()=>null}),e})();class r0{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const fv=new r0("12.2.9");class o0{constructor(){}supports(i){return Mh(i)}create(i){return new pT(i)}}const fT=(e,i)=>i;class pT{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||fT}forEachItem(i){let a;for(a=this._itHead;null!==a;a=a._next)i(a)}forEachOperation(i){let a=this._itHead,u=this._removalsHead,m=0,y=null;for(;a||u;){const E=!u||a&&a.currentIndex<a0(u,m,y)?a:u,T=a0(E,m,y),k=E.currentIndex;if(E===u)m--,u=u._nextRemoved;else if(a=a._next,null==E.previousIndex)m++;else{y||(y=[]);const G=T-m,te=k-m;if(G!=te){for(let we=0;we<G;we++){const ke=we<y.length?y[we]:y[we]=0,We=ke+we;te<=We&&We<G&&(y[we]=ke+1)}y[E.previousIndex]=te-G}}T!==k&&i(E,T,k)}}forEachPreviousItem(i){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)i(a)}forEachAddedItem(i){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)i(a)}forEachMovedItem(i){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)i(a)}forEachRemovedItem(i){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)i(a)}forEachIdentityChange(i){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)i(a)}diff(i){if(null==i&&(i=[]),!Mh(i))throw new Error(`Error trying to diff '${fe(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let m,y,E,a=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let T=0;T<this.length;T++)y=i[T],E=this._trackByFn(T,y),null!==a&&Object.is(a.trackById,E)?(u&&(a=this._verifyReinsertion(a,y,E,T)),Object.is(a.item,y)||this._addIdentityChange(a,y)):(a=this._mismatch(a,y,E,T),u=!0),a=a._next}else m=0,function(e,i){if(Array.isArray(e))for(let a=0;a<e.length;a++)i(e[a]);else{const a=e[ld()]();let u;for(;!(u=a.next()).done;)i(u.value)}}(i,T=>{E=this._trackByFn(m,T),null!==a&&Object.is(a.trackById,E)?(u&&(a=this._verifyReinsertion(a,T,E,m)),Object.is(a.item,T)||this._addIdentityChange(a,T)):(a=this._mismatch(a,T,E,m),u=!0),a=a._next,m++}),this.length=m;return this._truncate(a),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,a,u,m){let y;return null===i?y=this._itTail:(y=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,a)||this._addIdentityChange(i,a),this._reinsertAfter(i,y,m)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,m))?(Object.is(i.item,a)||this._addIdentityChange(i,a),this._moveAfter(i,y,m)):i=this._addAfter(new gT(a,u),y,m),i}_verifyReinsertion(i,a,u,m){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==y?i=this._reinsertAfter(y,i._prev,m):i.currentIndex!=m&&(i.currentIndex=m,this._addToMoves(i,m)),i}_truncate(i){for(;null!==i;){const a=i._next;this._addToRemovals(this._unlink(i)),i=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const m=i._prevRemoved,y=i._nextRemoved;return null===m?this._removalsHead=y:m._nextRemoved=y,null===y?this._removalsTail=m:y._prevRemoved=m,this._insertAfter(i,a,u),this._addToMoves(i,u),i}_moveAfter(i,a,u){return this._unlink(i),this._insertAfter(i,a,u),this._addToMoves(i,u),i}_addAfter(i,a,u){return this._insertAfter(i,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,a,u){const m=null===a?this._itHead:a._next;return i._next=m,i._prev=a,null===m?this._itTail=i:m._prev=i,null===a?this._itHead=i:a._next=i,null===this._linkedRecords&&(this._linkedRecords=new s0),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const a=i._prev,u=i._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,i}_addToMoves(i,a){return i.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new s0),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,a){return i.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class gT{constructor(i,a){this.item=i,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mT{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const a=i._prevDup,u=i._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class s0{constructor(){this.map=new Map}put(i){const a=i.trackById;let u=this.map.get(a);u||(u=new mT,this.map.set(a,u)),u.add(i)}get(i,a){const m=this.map.get(i);return m?m.get(i,a):null}remove(i){const a=i.trackById;return this.map.get(a).remove(i)&&this.map.delete(a),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function a0(e,i,a){const u=e.previousIndex;if(null===u)return u;let m=0;return a&&u<a.length&&(m=a[u]),u+i+m}class u0{constructor(){}supports(i){return i instanceof Map||Ep(i)}create(){return new _T}}class _T{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let a;for(a=this._mapHead;null!==a;a=a._next)i(a)}forEachPreviousItem(i){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)i(a)}forEachChangedItem(i){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)i(a)}forEachAddedItem(i){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)i(a)}forEachRemovedItem(i){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)i(a)}diff(i){if(i){if(!(i instanceof Map||Ep(i)))throw new Error(`Error trying to diff '${fe(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,m)=>{if(a&&a.key===m)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const y=this._getOrCreateRecordForKey(m,u);a=this._insertBeforeOrAppend(a,y)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,a){if(i){const u=i._prev;return a._next=i,a._prev=u,i._prev=a,u&&(u._next=a),i===this._mapHead&&(this._mapHead=a),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(i,a){if(this._records.has(i)){const m=this._records.get(i);this._maybeAddToChanges(m,a);const y=m._prev,E=m._next;return y&&(y._next=E),E&&(E._prev=y),m._next=null,m._prev=null,m}const u=new vT(i);return this._records.set(i,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,a){Object.is(a,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=a,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,a){i instanceof Map?i.forEach(a):Object.keys(i).forEach(u=>a(i[u],u))}}class vT{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function l0(){return new Rm([new o0])}let Rm=(()=>{class e{constructor(a){this.factories=a}static create(a,u){if(null!=u){const m=u.factories.slice();a=a.concat(m)}return new e(a)}static extend(a){return{provide:e,useFactory:u=>e.create(a,u||l0()),deps:[[e,new qs,new as]]}}find(a){const u=this.factories.find(m=>m.supports(a));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(e){return e.name||typeof e}(a)}'`)}}return e.\u0275prov=Cn({token:e,providedIn:"root",factory:l0}),e})();function c0(){return new km([new u0])}let km=(()=>{class e{constructor(a){this.factories=a}static create(a,u){if(u){const m=u.factories.slice();a=a.concat(m)}return new e(a)}static extend(a){return{provide:e,useFactory:u=>e.create(a,u||c0()),deps:[[e,new qs,new as]]}}find(a){const u=this.factories.find(m=>m.supports(a));if(u)return u;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return e.\u0275prov=Cn({token:e,providedIn:"root",factory:c0}),e})();function Fm(e,i,a,u,m=!1){for(;null!==a;){const y=i[a.index];if(null!==y&&u.push(ye(y)),Mr(y))for(let T=10;T<y.length;T++){const k=y[T],G=k[1].firstChild;null!==G&&Fm(k[1],k,G,u)}const E=a.type;if(8&E)Fm(e,i,a.child,u);else if(32&E){const T=nu(a,i);let k;for(;k=T();)u.push(k)}else if(16&E){const T=ts(i,a);if(Array.isArray(T))u.push(...T);else{const k=xa(i[16]);Fm(k[1],k,T,u,!0)}}a=m?a.projectionNext:a.next}return u}class Lp{constructor(i,a){this._lView=i,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,a=i[1];return Fm(a,i,a.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Mr(i)){const a=i[8],u=a?a.indexOf(this):-1;u>-1&&(Nd(i,u),Do(a,u))}this._attachedToViewContainer=!1}p(this._lView[1],this._lView)}onDestroy(i){Ag(this._lView[1],this._lView,null,i)}markForCheck(){Eh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ac(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,i,a){ve(!0);try{Ac(e,i,a)}finally{ve(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,Fs(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class bT extends Lp{constructor(i){super(i),this._view=i}detectChanges(){ip(this._view)}checkNoChanges(){!function(e){ve(!0);try{ip(e)}finally{ve(!1)}}(this._view)}get context(){return null}}const wT=function(e){return function(e,i,a){if(ri(e)&&!a){const u=Ot(e.index,i);return new Lp(u,u)}return 47&e.type?new Lp(i[16],i):null}(Ni(),Ft(),16==(16&e))};let ET=(()=>{class e{}return e.__NG_ELEMENT_ID__=wT,e})();const ST=[new u0],MT=new Rm([new o0]),IT=new km(ST),xT=function(){return Nm(Ni(),Ft())};let Up=(()=>{class e{}return e.__NG_ELEMENT_ID__=xT,e})();const PT=Up,RT=class extends PT{constructor(i,a,u){super(),this._declarationLView=i,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(i){const a=this._declarationTContainer.tViews,u=Bd(this._declarationLView,a,i,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(u[19]=y.createEmbeddedView(a)),Hd(a,u,i),new Lp(u)}};function Nm(e,i){return 4&e.type?new RT(i,e,Ef(e,i)):null}class Ph{}class d0{}const NT=function(){return p0(Ni(),Ft())};let Lm=(()=>{class e{}return e.__NG_ELEMENT_ID__=NT,e})();const UT=Lm,h0=class extends UT{constructor(i,a,u){super(),this._lContainer=i,this._hostTNode=a,this._hostLView=u}get element(){return Ef(this._hostTNode,this._hostLView)}get injector(){return new je(this._hostTNode,this._hostLView)}get parentInjector(){const i=Xn(this._hostTNode,this._hostLView);if(na(i)){const a=Ha(i,this._hostLView),u=ja(i);return new je(a[1].data[u+8],a)}return new je(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const a=f0(this._lContainer);return null!==a&&a[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,a,u){const m=i.createEmbeddedView(a||{});return this.insert(m,u),m}createComponent(i,a,u,m,y){const E=u||this.parentInjector;if(!y&&null==i.ngModule&&E){const k=E.get(Ph,null);k&&(y=k)}const T=i.create(E,m,void 0,y);return this.insert(T.hostView,a),T}insert(i,a){const u=i._lView,m=u[1];if(Mr(u[3])){const te=this.indexOf(i);if(-1!==te)this.detach(te);else{const me=u[3],we=new h0(me,me[6],me[3]);we.detach(we.indexOf(i))}}const y=this._adjustIndex(a),E=this._lContainer;!function(e,i,a,u){const m=10+u,y=a.length;u>0&&(a[m-1][4]=i),u<y-10?(i[4]=a[m],Gs(a,10+u,i)):(a.push(i),i[4]=null),i[3]=a;const E=i[17];null!==E&&a!==E&&function(e,i){const a=e[9];i[16]!==i[3][3][16]&&(e[2]=!0),null===a?e[9]=[i]:a.push(i)}(E,i);const T=i[19];null!==T&&T.insertView(e),i[2]|=128}(m,u,E,y);const T=ka(y,E),k=u[11],G=ue(k,E[7]);return null!==G&&function(e,i,a,u,m,y){u[0]=m,u[6]=i,Fs(e,u,a,1,m,y)}(m,E[6],k,u,G,T),i.attachToViewContainerRef(),Gs(pv(E),y,i),i}move(i,a){return this.insert(i,a)}indexOf(i){const a=f0(this._lContainer);return null!==a?a.indexOf(i):-1}remove(i){const a=this._adjustIndex(i,-1),u=Nd(this._lContainer,a);u&&(Do(pv(this._lContainer),a),p(u[1],u))}detach(i){const a=this._adjustIndex(i,-1),u=Nd(this._lContainer,a);return u&&null!=Do(pv(this._lContainer),a)?new Lp(u):null}_adjustIndex(i,a=0){return null==i?this.length+a:i}};function f0(e){return e[8]}function pv(e){return e[8]||(e[8]=[])}function p0(e,i){let a;const u=i[e.index];if(Mr(u))a=u;else{let m;if(8&e.type)m=ye(u);else{const y=i[11];m=y.createComment("");const E=B(e,i);b(y,ue(y,E),m,function(e,i){return P(e)?e.nextSibling(i):i.nextSibling}(y,E),!1)}i[e.index]=a=Ug(u,i,m,e),wh(i,a)}return new h0(a,e,i)}const Af={};class k0 extends wf{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const a=Nr(i);return new N0(a,this.ngModule)}}function F0(e){const i=[];for(let a in e)e.hasOwnProperty(a)&&i.push({propName:e[a],templateName:a});return i}const kD=new Ii("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>hl});class N0 extends Xb{constructor(i,a){super(),this.componentDef=i,this.ngModule=a,this.componentType=i.type,this.selector=i.selectors.map(Bf).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return F0(this.componentDef.inputs)}get outputs(){return F0(this.componentDef.outputs)}create(i,a,u,m){const y=(m=m||this.ngModule)?function(e,i){return{get:(a,u,m)=>{const y=e.get(a,Af,m);return y!==Af||u===Af?y:i.get(a,u,m)}}}(i,m.injector):i,E=y.get(Pm,F),T=y.get(hv,null),k=E.createRenderer(null,this.componentDef),G=this.componentDef.selectors[0][0]||"div",te=u?function(e,i,a){if(P(e))return e.selectRootElement(i,a===At.ShadowDom);let u="string"==typeof i?e.querySelector(i):i;return u.textContent="",u}(k,u,this.componentDef.encapsulation):Jc(E.createRenderer(null,this.componentDef),G,function(e){const i=e.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(G)),me=this.componentDef.onPush?576:528,we=function(e,i){return{components:[],scheduler:e||hl,clean:Hg,playerHandler:i||null,flags:0}}(),ke=ef(0,null,null,1,0,null,null,null,null,null),We=Bd(null,ke,we,me,null,null,E,k,T,y);let yt,dt;Po(We);try{const Yt=function(e,i,a,u,m,y){const E=a[1];a[20]=e;const k=jd(E,20,2,"#host",null),G=k.mergedAttrs=i.hostAttrs;null!==G&&(qd(k,G,!0),null!==e&&(ba(m,e,G),null!==k.classes&&Lf(m,e,k.classes),null!==k.styles&&og(m,e,k.styles)));const te=u.createRenderer(e,i),me=Bd(a,Tg(i),null,i.onPush?64:16,a[20],k,u,te,y||null,null);return E.firstCreatePass&&(sn(ys(k,a),E,i.type),kg(E,k),Fg(k,a.length,1)),wh(a,me),a[20]=me}(te,this.componentDef,We,E,k);if(te)if(u)ba(k,te,["ng-version",fv.full]);else{const{attrs:Rt,classes:er}=function(e){const i=[],a=[];let u=1,m=2;for(;u<e.length;){let y=e[u];if("string"==typeof y)2===m?""!==y&&i.push(y,e[++u]):8===m&&a.push(y);else{if(!Uu(m))break;m=y}u++}return{attrs:i,classes:a}}(this.componentDef.selectors[0]);Rt&&ba(k,te,Rt),er&&er.length>0&&Lf(k,te,er.join(" "))}if(dt=se(ke,20),void 0!==a){const Rt=dt.projection=[];for(let er=0;er<this.ngContentSelectors.length;er++){const wr=a[er];Rt.push(null!=wr?Array.from(wr):null)}}yt=function(e,i,a,u,m){const y=a[1],E=function(e,i,a){const u=Ni();e.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),np(e,u,i,ed(e,i,1,null),a));const m=q(i,e,u.directiveStart,u);Ti(m,i);const y=B(u,i);return y&&Ti(y,i),m}(y,a,i);if(u.components.push(E),e[8]=E,m&&m.forEach(k=>k(E,i)),i.contentQueries){const k=Ni();i.contentQueries(1,E,k.directiveStart)}const T=Ni();return!y.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Qi(T.index),Og(a[1],T,0,T.directiveStart,T.directiveEnd,i),Rg(i,E)),E}(Yt,this.componentDef,We,we,[am]),Hd(ke,We,null)}finally{ji()}return new LD(this.componentType,yt,Ef(dt,We),We,dt)}}class LD extends class{}{constructor(i,a,u,m,y){super(),this.location=u,this._rootLView=m,this._tNode=y,this.instance=a,this.hostView=this.changeDetectorRef=new bT(m),this.componentType=i}get injector(){return new je(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const Mf=new Map;class BD extends Ph{constructor(i,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new k0(this);const u=Vr(i),m=i[Zt]||null;m&&iv(m),this._bootstrapComponents=Qs(u.bootstrap),this._r3Injector=sp(i,a,[{provide:Ph,useValue:this},{provide:wf,useValue:this.componentFactoryResolver}],fe(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,a=yo.THROW_IF_NOT_FOUND,u=Kt.Default){return i===yo||i===Ph||i===Gl?this:this._r3Injector.get(i,a,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Av extends d0{constructor(i){super(),this.moduleType=i,null!==Vr(i)&&function(e){const i=new Set;!function a(u){const m=Vr(u,!0),y=m.id;null!==y&&(function(e,i,a){if(i&&i!==a)throw new Error(`Duplicate module registered for ${e} - ${fe(i)} vs ${fe(i.name)}`)}(y,Mf.get(y),u),Mf.set(y,u));const E=Qs(m.imports);for(const T of E)i.has(T)||(i.add(T),a(T))}(e)}(i)}create(i){return new BD(this.moduleType,i)}}function V0(e,i,a){const u=Oe()+e,m=Ft();return m[u]===Cr?ju(m,u,a?i.call(a):i()):function(e,i){return e[i]}(m,u)}function B0(e,i,a,u){return function(e,i,a,u,m,y){const E=i+a;return cs(e,E,m)?ju(e,E+1,y?u.call(y,m):u(m)):zp(e,E+1)}(Ft(),Oe(),e,i,a,u)}function j0(e,i,a,u,m){return Z0(Ft(),Oe(),e,i,a,u,m)}function H0(e,i,a,u,m,y){return function(e,i,a,u,m,y,E,T){const k=i+a;return function(e,i,a,u,m){const y=Fa(e,i,a,u);return cs(e,i+2,m)||y}(e,k,m,y,E)?ju(e,k+3,T?u.call(T,m,y,E):u(m,y,E)):zp(e,k+3)}(Ft(),Oe(),e,i,a,u,m,y)}function zp(e,i){const a=e[i];return a===Cr?void 0:a}function Z0(e,i,a,u,m,y,E){const T=i+a;return Fa(e,T,m,y)?ju(e,T+2,E?u.call(E,m,y):u(m,y)):zp(e,T+2)}function W0(e,i){const a=br();let u;const m=e+20;a.firstCreatePass?(u=function(e,i){if(i)for(let a=i.length-1;a>=0;a--){const u=i[a];if(e===u.name)return u}throw new Re("302",`The pipe '${e}' could not be found!`)}(i,a.pipeRegistry),a.data[m]=u,u.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(m,u.onDestroy)):u=a.data[m];const y=u.factory||(u.factory=H(u.type)),E=Kn(xp);try{const T=mt(!1),k=y();return mt(T),function(e,i,a,u){a>=e.data.length&&(e.data[a]=null,e.blueprint[a]=null),i[a]=u}(a,Ft(),m,k),k}finally{Kn(E)}}function Y0(e,i,a,u){const m=e+20,y=Ft(),E=Ze(y,m);return function(e,i){ou.isWrapped(i)&&(i=ou.unwrap(i),e[Pe()]=Cr);return i}(y,function(e,i){return e[1].data[i].pure}(y,m)?Z0(y,Oe(),i,E.transform,a,u,E):E.transform(a,u))}function Mv(e){return i=>{setTimeout(e,void 0,i)}}const kc=class extends O.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,a,u){var m,y,E;let T=i,k=a||(()=>null),G=u;if(i&&"object"==typeof i){const me=i;T=null===(m=me.next)||void 0===m?void 0:m.bind(me),k=null===(y=me.error)||void 0===y?void 0:y.bind(me),G=null===(E=me.complete)||void 0===E?void 0:E.bind(me)}this.__isAsync&&(k=Mv(k),T&&(T=Mv(T)),G&&(G=Mv(G)));const te=super.subscribe({next:T,error:k,complete:G});return i instanceof c.w&&i.add(te),te}};function XD(){return this._results[ld()]()}class Yp{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ld(),u=Yp.prototype;u[a]||(u[a]=XD)}get changes(){return this._changes||(this._changes=new kc)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,a){return this._results.reduce(i,a)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,a){const u=this;u.dirty=!1;const m=Ko(i);(this._changesDetected=!function(e,i,a){if(e.length!==i.length)return!1;for(let u=0;u<e.length;u++){let m=e[u],y=i[u];if(a&&(m=a(m),y=a(y)),y!==m)return!1}return!0}(u._results,m,a))&&(u._results=m,u.length=m.length,u.last=m[this.length-1],u.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Iv{constructor(i){this.queryList=i,this.matches=null}clone(){return new Iv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ov{constructor(i=[]){this.queries=i}createEmbeddedView(i){const a=i.queries;if(null!==a){const u=null!==i.contentQueries?i.contentQueries[0]:a.length,m=[];for(let y=0;y<u;y++){const E=a.getByIndex(y);m.push(this.queries[E.indexInDeclarationView].clone())}return new Ov(m)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let a=0;a<this.queries.length;a++)null!==iC(i,a).matches&&this.queries[a].setDirty()}}class K0{constructor(i,a,u=null){this.predicate=i,this.flags=a,this.read=u}}class xv{constructor(i=[]){this.queries=i}elementStart(i,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,a)}elementEnd(i){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(i)}embeddedTView(i){let a=null;for(let u=0;u<this.length;u++){const m=null!==a?a.length:0,y=this.getByIndex(u).embeddedTView(i,m);y&&(y.indexInDeclarationView=u,null!==a?a.push(y):a=[y])}return null!==a?new xv(a):null}template(i,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,a)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Pv{constructor(i,a=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(i,a){this.isApplyingToNode(a)&&this.matchTNode(i,a)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,a){this.elementStart(i,a)}embeddedTView(i,a){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,a),new Pv(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let m=0;m<u.length;m++){const y=u[m];this.matchTNodeWithReadOption(i,a,nS(a,y)),this.matchTNodeWithReadOption(i,a,I(a,i,y,!1,!1))}else u===Up?4&a.type&&this.matchTNodeWithReadOption(i,a,-1):this.matchTNodeWithReadOption(i,a,I(a,i,u,!1,!1))}matchTNodeWithReadOption(i,a,u){if(null!==u){const m=this.metadata.read;if(null!==m)if(m===Rc||m===Lm||m===Up&&4&a.type)this.addMatch(a.index,-2);else{const y=I(a,i,m,!1,!1);null!==y&&this.addMatch(a.index,y)}else this.addMatch(a.index,u)}}addMatch(i,a){null===this.matches?this.matches=[i,a]:this.matches.push(i,a)}}function nS(e,i){const a=e.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===i)return a[u+1];return null}function iS(e,i,a,u){return-1===a?function(e,i){return 11&e.type?Ef(e,i):4&e.type?Nm(e,i):null}(i,e):-2===a?function(e,i,a){return a===Rc?Ef(i,e):a===Up?Nm(i,e):a===Lm?p0(i,e):void 0}(e,i,u):q(e,e[1],a,i)}function Q0(e,i,a,u){const m=i[19].queries[u];if(null===m.matches){const y=e.data,E=a.matches,T=[];for(let k=0;k<E.length;k+=2){const G=E[k];T.push(G<0?null:iS(i,y[G],E[k+1],a.metadata.read))}m.matches=T}return m.matches}function Rv(e,i,a,u){const m=e.queries.getByIndex(a),y=m.matches;if(null!==y){const E=Q0(e,i,m,a);for(let T=0;T<y.length;T+=2){const k=y[T];if(k>0)u.push(E[T/2]);else{const G=y[T+1],te=i[-k];for(let me=10;me<te.length;me++){const we=te[me];we[17]===we[3]&&Rv(we[1],we,G,u)}if(null!==te[9]){const me=te[9];for(let we=0;we<me.length;we++){const ke=me[we];Rv(ke[1],ke,G,u)}}}}}return u}function J0(e){const i=Ft(),a=br(),u=hi();Br(u+1);const m=iC(a,u);if(e.dirty&&En(i)===(2==(2&m.metadata.flags))){if(null===m.matches)e.reset([]);else{const y=m.crossesNgTemplate?Rv(a,i,u,[]):Q0(a,i,m,u);e.reset(y,n0),e.notifyOnChanges()}return!0}return!1}function X0(e,i,a){const u=br();u.firstCreatePass&&(rC(u,new K0(e,i,a),-1),2==(2&i)&&(u.staticViewQueries=!0)),nC(u,Ft(),i)}function eC(e,i,a,u){const m=br();if(m.firstCreatePass){const y=Ni();rC(m,new K0(i,a,u),y.index),function(e,i){const a=e.contentQueries||(e.contentQueries=[]);i!==(a.length?a[a.length-1]:-1)&&a.push(e.queries.length-1,i)}(m,e),2==(2&a)&&(m.staticContentQueries=!0)}nC(m,Ft(),a)}function tC(){return e=Ft(),i=hi(),e[19].queries[i].queryList;var e,i}function nC(e,i,a){const u=new Yp(4==(4&a));Ag(e,i,u,u.destroy),null===i[19]&&(i[19]=new Ov),i[19].queries.push(new Iv(u))}function rC(e,i,a){null===e.queries&&(e.queries=new xv),e.queries.track(new Pv(i,a))}function iC(e,i){return e.queries.getByIndex(i)}const Vv=new Ii("Application Initializer");let Of=(()=>{class e{constructor(a){this.appInits=a,this.resolve=xm,this.reject=xm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,m)=>{this.resolve=u,this.reject=m})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const y=this.appInits[m]();if(z_(y))a.push(y);else if($_(y)){const E=new Promise((T,k)=>{y.subscribe({complete:T,error:k})});a.push(E)}}Promise.all(a).then(()=>{u()}).catch(m=>{this.reject(m)}),0===a.length&&u(),this.initialized=!0}}return e.\u0275fac=function(a){return new(a||e)(bi(Vv,8))},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})();const wC=new Ii("AppId"),FS={provide:wC,useFactory:function(){return`${Bv()}${Bv()}${Bv()}`},deps:[]};function Bv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const EC=new Ii("Platform Initializer"),TC=new Ii("Platform ID"),DC=new Ii("appBootstrapListener");let SC=(()=>{class e{log(a){console.log(a)}warn(a){console.warn(a)}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})();const Zm=new Ii("LocaleId"),AC=new Ii("DefaultCurrencyCode");class LS{constructor(i,a){this.ngModuleFactory=i,this.componentFactories=a}}const jv=function(e){return new Av(e)},US=jv,VS=function(e){return Promise.resolve(jv(e))},MC=function(e){const i=jv(e),u=Qs(Vr(e).declarations).reduce((m,y)=>{const E=Nr(y);return E&&m.push(new N0(E)),m},[]);return new LS(i,u)},BS=MC,jS=function(e){return Promise.resolve(MC(e))};let Qp=(()=>{class e{constructor(){this.compileModuleSync=US,this.compileModuleAsync=VS,this.compileModuleAndAllComponentsSync=BS,this.compileModuleAndAllComponentsAsync=jS}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})();const ZS=(()=>Promise.resolve(0))();function Hv(e){"undefined"==typeof Zone?ZS.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Hu{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kc(!1),this.onMicrotaskEmpty=new kc(!1),this.onStable=new kc(!1),this.onError=new kc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!u&&a,m.shouldCoalesceRunChangeDetection=u,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function(){let e=Ut.requestAnimationFrame,i=Ut.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&i){const a=e[Zone.__symbol__("OriginalDelegate")];a&&(e=a);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(e){const i=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ut,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Zv(e),e.isCheckStableRunning=!0,Gv(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Zv(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,m,y,E,T)=>{try{return IC(e),a.invokeTask(m,y,E,T)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||e.shouldCoalesceRunChangeDetection)&&i(),OC(e)}},onInvoke:(a,u,m,y,E,T,k)=>{try{return IC(e),a.invoke(m,y,E,T,k)}finally{e.shouldCoalesceRunChangeDetection&&i(),OC(e)}},onHasTask:(a,u,m,y)=>{a.hasTask(m,y),u===m&&("microTask"==y.change?(e._hasPendingMicrotasks=y.microTask,Zv(e),Gv(e)):"macroTask"==y.change&&(e.hasPendingMacrotasks=y.macroTask))},onHandleError:(a,u,m,y)=>(a.handleError(m,y),e.runOutsideAngular(()=>e.onError.emit(y)),!1)})}(m)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Hu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,a,u){return this._inner.run(i,a,u)}runTask(i,a,u,m){const y=this._inner,E=y.scheduleEventTask("NgZoneEvent: "+m,i,zS,xm,xm);try{return y.runTask(E,a,u)}finally{y.cancelTask(E)}}runGuarded(i,a,u){return this._inner.runGuarded(i,a,u)}runOutsideAngular(i){return this._outer.run(i)}}const zS={};function Gv(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Zv(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function IC(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function OC(e){e._nesting--,Gv(e)}class YS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kc,this.onMicrotaskEmpty=new kc,this.onStable=new kc,this.onError=new kc}run(i,a,u){return i.apply(a,u)}runGuarded(i,a,u){return i.apply(a,u)}runOutsideAngular(i){return i()}runTask(i,a,u,m){return i.apply(a,u)}}let xC=(()=>{class e{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hu.assertNotInAngularZone(),Hv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,m){let y=-1;u&&u>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==y),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:y,updateCb:m})}whenStable(a,u,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,m){return[]}}return e.\u0275fac=function(a){return new(a||e)(bi(Hu))},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})(),PC=(()=>{class e{constructor(){this._applications=new Map,qv.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return qv.findTestabilityInTree(this,a,u)}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})();class KS{addToWindow(i){}findTestabilityInTree(i,a,u){return null}}function QS(e){qv=e}let qv=new KS,RC=!0,kC=!1;function zv(){return kC=!0,RC}function JS(){if(kC)throw new Error("Cannot enable prod mode after platform setup.");RC=!1}let Jl;const FC=new Ii("AllowMultipleToken");class oA{constructor(i,a){this.name=i,this.token=a}}function NC(e,i,a=[]){const u=`Platform: ${i}`,m=new Ii(u);return(y=[])=>{let E=LC();if(!E||E.injector.get(FC,!1))if(e)e(a.concat(y).concat({provide:m,useValue:!0}));else{const T=a.concat(y).concat({provide:m,useValue:!0},{provide:zd,useValue:"platform"});!function(e){if(Jl&&!Jl.destroyed&&!Jl.injector.get(FC,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Jl=e.get(UC);const i=e.get(EC,null);i&&i.forEach(a=>a())}(yo.create({providers:T,name:u}))}return function(e){const i=LC();if(!i)throw new Error("No platform exists!");if(!i.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(m)}}function LC(){return Jl&&!Jl.destroyed?Jl:null}let UC=(()=>{class e{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const T=function(e,i){let a;return a="noop"===e?new YS:("zone.js"===e?void 0:e)||new Hu({enableLongStackTrace:zv(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),k=[{provide:Hu,useValue:T}];return T.run(()=>{const G=yo.create({providers:k,parent:this.injector,name:a.moduleType.name}),te=a.create(G),me=te.injector.get(ll,null);if(!me)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return T.runOutsideAngular(()=>{const we=T.onError.subscribe({next:ke=>{me.handleError(ke)}});te.onDestroy(()=>{$v(this._modules,te),we.unsubscribe()})}),function(e,i,a){try{const u=a();return z_(u)?u.catch(m=>{throw i.runOutsideAngular(()=>e.handleError(m)),m}):u}catch(u){throw i.runOutsideAngular(()=>e.handleError(u)),u}}(me,T,()=>{const we=te.injector.get(Of);return we.runInitializers(),we.donePromise.then(()=>(iv(te.injector.get(Zm,Sm)||Sm),this._moduleDoBootstrap(te),te))})})}bootstrapModule(a,u=[]){const m=VC({},u);return function(e,i,a){const u=new Av(a);return Promise.resolve(u)}(0,0,a).then(y=>this.bootstrapModuleFactory(y,m))}_moduleDoBootstrap(a){const u=a.injector.get(Jp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(m=>u.bootstrap(m));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${fe(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(a){return new(a||e)(bi(yo))},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})();function VC(e,i){return Array.isArray(i)?i.reduce(VC,e):Object.assign(Object.assign({},e),i)}let Jp=(()=>{class e{constructor(a,u,m,y,E){this._zone=a,this._injector=u,this._exceptionHandler=m,this._componentFactoryResolver=y,this._initStatus=E,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const T=new K.y(G=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{G.next(this._stable),G.complete()})}),k=new K.y(G=>{let te;this._zone.runOutsideAngular(()=>{te=this._zone.onStable.subscribe(()=>{Hu.assertNotInAngularZone(),Hv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,G.next(!0))})})});const me=this._zone.onUnstable.subscribe(()=>{Hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{G.next(!1)}))});return()=>{te.unsubscribe(),me.unsubscribe()}});this.isStable=(0,w.T)(T,k.pipe((0,Ue.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let m;m=a instanceof Xb?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(m.componentType);const y=function(e){return e.isBoundToModule}(m)?void 0:this._injector.get(Ph),T=m.create(yo.NULL,[],u||m.selector,y),k=T.location.nativeElement,G=T.injector.get(xC,null),te=G&&T.injector.get(PC);return G&&te&&te.registerApplication(k,G),T.onDestroy(()=>{this.detachView(T.hostView),$v(this.components,T),te&&te.unregisterApplication(k)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;$v(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(DC,[]).concat(this._bootstrapListeners).forEach(m=>m(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(a){return new(a||e)(bi(Hu),bi(yo),bi(ll),bi(wf),bi(Of))},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})();function $v(e,i){const a=e.indexOf(i);a>-1&&e.splice(a,1)}class dA{}class fA{}const pA={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let gA=(()=>{class e{constructor(a,u){this._compiler=a,this._config=u||pA}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[u,m]=a.split("#");return void 0===m&&(m="default"),Y(8255)(u).then(y=>y[m]).then(y=>GC(y,u,m)).then(y=>this._compiler.compileModuleAsync(y))}loadFactory(a){let[u,m]=a.split("#"),y="NgFactory";return void 0===m&&(m="default",y=""),Y(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(E=>E[m+y]).then(E=>GC(E,u,m))}}return e.\u0275fac=function(a){return new(a||e)(bi(Qp),bi(fA,8))},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})();function GC(e,i,a){if(!e)throw new Error(`Cannot find '${a}' in '${i}'`);return e}const EA=function(e){return null},DA=NC(null,"core",[{provide:TC,useValue:"unknown"},{provide:UC,deps:[yo]},{provide:PC,deps:[]},{provide:SC,deps:[]}]),OA=[{provide:Jp,useClass:Jp,deps:[Hu,yo,ll,wf,Of]},{provide:kD,deps:[Hu],useFactory:function(e){let i=[];return e.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(a){i.push(a)}}},{provide:Of,useClass:Of,deps:[[new as,Vv]]},{provide:Qp,useClass:Qp,deps:[]},FS,{provide:Rm,useFactory:function(){return MT},deps:[]},{provide:km,useFactory:function(){return IT},deps:[]},{provide:Zm,useFactory:function(e){return iv(e=e||"undefined"!=typeof $localize&&$localize.locale||Sm),e},deps:[[new Cu(Zm),new as,new qs]]},{provide:AC,useValue:"USD"}];let PA=(()=>{class e{constructor(a){}}return e.\u0275fac=function(a){return new(a||e)(bi(Jp))},e.\u0275mod=Ri({type:e}),e.\u0275inj=zn({providers:OA}),e})()},9829:(jt,nt,Y)=>{"use strict";Y.d(nt,{zQ:()=>It,Qv:()=>ze});var O=Y(7716),c=Y(9765),K=Y(5917),w=Y(7574),Ue=Y(4402),be=Y(6682),xe=Y(3190);function fe(Et,Ke){return Ke?(0,xe.w)(()=>Et,Ke):(0,xe.w)(()=>Et)}var _e=Y(309),re=Y(8002),Ce=Y(2066),le=Y(8049),pe=Y(9673),De=Y(5435),Re=Y(57),Ye=Y(8583);const ze=new O.OlP("angularfire2.auth.use-emulator"),Ct=new O.OlP("angularfire2.auth.settings"),On=new O.OlP("angularfire2.auth.tenant-id"),Nt=new O.OlP("angularfire2.auth.langugage-code"),at=new O.OlP("angularfire2.auth.use-device-language"),zt=new O.OlP("angularfire.auth.persistence");let It=(()=>{class Et{constructor(rt,it,et,_t,st,tn,an,Sn,on,Bt){const kt=new Re.HU(_t),Qt=(0,Re.ss)(kt),Ht=new c.xQ,Fn=(0,K.of)(void 0).pipe((0,_e.QV)(kt.outsideAngular),(0,xe.w)(()=>_t.runOutsideAngular(()=>Y.e(336).then(Y.bind(Y,1336)))),(0,re.U)(()=>(0,Re.on)(rt,_t,it)),(0,re.U)(Cn=>_t.runOutsideAngular(()=>{const ur=st,zn=tn;return(0,Re.sI)(`${Cn.name}.auth`,"AngularFireAuth",Cn,()=>{const Gn=_t.runOutsideAngular(()=>Cn.auth());if(ur&&Gn.useEmulator(`http://${ur.join(":")}`),an&&(Gn.tenantId=an),Gn.languageCode=Sn,on&&Gn.useDeviceLanguage(),zn)for(const[tr,An]of Object.entries(zn))Gn.settings[tr]=An;return Bt&&Gn.setPersistence(Bt),Gn},[ur,an,Sn,on,zn,Bt])})),(0,Ce.d)({bufferSize:1,refCount:!1}));if((0,Ye.PM)(et))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,K.of)(null);else{Fn.pipe((0,le.P)()).subscribe();const ur=Fn.pipe((0,xe.w)(An=>An.getRedirectResult().then(Mn=>Mn,()=>null)),Qt,(0,Ce.d)({bufferSize:1,refCount:!1})),zn=An=>new w.y(Mn=>({unsubscribe:_t.runOutsideAngular(()=>An(Mn))})),Gn=Fn.pipe((0,xe.w)(An=>zn(An.onAuthStateChanged.bind(An)))),tr=Fn.pipe((0,xe.w)(An=>zn(An.onIdTokenChanged.bind(An))));this.authState=ur.pipe(fe(Gn),(0,pe.R)(kt.outsideAngular),(0,_e.QV)(kt.insideAngular)),this.user=ur.pipe(fe(tr),(0,pe.R)(kt.outsideAngular),(0,_e.QV)(kt.insideAngular)),this.idToken=this.user.pipe((0,xe.w)(An=>An?(0,Ue.D)(An.getIdToken()):(0,K.of)(null))),this.idTokenResult=this.user.pipe((0,xe.w)(An=>An?(0,Ue.D)(An.getIdTokenResult()):(0,K.of)(null))),this.credential=(0,be.T)(ur,Ht,this.authState.pipe((0,De.h)(An=>!An))).pipe((0,re.U)(An=>(null==An?void 0:An.user)?An:null),(0,pe.R)(kt.outsideAngular),(0,_e.QV)(kt.insideAngular))}return(0,Re.pX)(this,Fn,_t,{spy:{apply:(Cn,ur,zn)=>{(Cn.startsWith("signIn")||Cn.startsWith("createUser"))&&zn.then(Gn=>Ht.next(Gn))}}})}}return Et.\u0275fac=function(rt){return new(rt||Et)(O.LFG(Re.Dh),O.LFG(Re.xv,8),O.LFG(O.Lbi),O.LFG(O.R0b),O.LFG(ze,8),O.LFG(Ct,8),O.LFG(On,8),O.LFG(Nt,8),O.LFG(at,8),O.LFG(zt,8))},Et.\u0275prov=O.Yz7({factory:function(){return new Et(O.LFG(Re.Dh),O.LFG(Re.xv,8),O.LFG(O.Lbi),O.LFG(O.R0b),O.LFG(ze,8),O.LFG(Ct,8),O.LFG(On,8),O.LFG(Nt,8),O.LFG(at,8),O.LFG(zt,8))},token:Et,providedIn:"any"}),Et})()},9351:(jt,nt,Y)=>{"use strict";Y.d(nt,{Q1:()=>Ur,TE:()=>os});var O=Y(7574),c=Y(5917),K=Y(4402),w=Y(4395),Ue=Y(8002),be=Y(309),xe=Y(3190),fe=Y(7716),_e=Y(57),re=Y(9759),Ce=Y(4762),le=Y(4685),pe=Y(6034),De="firebasestorage.googleapis.com",Re="storageBucket",ze=function($){function Z(he,P){var z=$.call(this,Ct(he),"Firebase Storage: "+P+" ("+Ct(he)+")")||this;return z.customData={serverResponse:null},z._baseMessage=z.message,Object.setPrototypeOf(z,Z.prototype),z}return(0,Ce.ZT)(Z,$),Z.prototype._codeEquals=function(he){return Ct(he)===this.code},Object.defineProperty(Z.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(he){this.customData.serverResponse=he,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),Z}(le.ZR);function Ct($){return"storage/"+$}function On(){return new ze("unknown","An unknown error occurred, please check the error payload for server response.")}function Ke(){return new ze("canceled","User canceled the upload/download.")}function _t(){return new ze("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function an($){return new ze("invalid-argument",$)}function Sn(){return new ze("app-deleted","The Firebase app was deleted.")}function on($){return new ze("invalid-root-operation","The operation '"+$+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bt($,Z){return new ze("invalid-format","String does not match format '"+$+"': "+Z)}function kt($){throw new ze("internal-error","Internal error: "+$)}var Ht={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Fn=function(Z,he){this.data=Z,this.contentType=he||null};function Cn($,Z){switch($){case Ht.RAW:return new Fn(ur(Z));case Ht.BASE64:case Ht.BASE64URL:return new Fn(Gn($,Z));case Ht.DATA_URL:return new Fn(function($){var Z=new tr($);return Z.base64?Gn(Ht.BASE64,Z.rest):function($){var Z;try{Z=decodeURIComponent($)}catch(he){throw Bt(Ht.DATA_URL,"Malformed data URL.")}return ur(Z)}(Z.rest)}(Z),function($){return new tr($).contentType}(Z))}throw On()}function ur($){for(var Z=[],he=0;he<$.length;he++){var P=$.charCodeAt(he);if(P<=127)Z.push(P);else if(P<=2047)Z.push(192|P>>6,128|63&P);else if(55296==(64512&P))if(he<$.length-1&&56320==(64512&$.charCodeAt(he+1))){var F=P,J=$.charCodeAt(++he);Z.push(240|(P=65536|(1023&F)<<10|1023&J)>>18,128|P>>12&63,128|P>>6&63,128|63&P)}else Z.push(239,191,189);else 56320==(64512&P)?Z.push(239,191,189):Z.push(224|P>>12,128|P>>6&63,128|63&P)}return new Uint8Array(Z)}function Gn($,Z){switch($){case Ht.BASE64:var he=-1!==Z.indexOf("-"),P=-1!==Z.indexOf("_");if(he||P)throw Bt($,"Invalid character '"+(he?"-":"_")+"' found: is it base64url encoded?");break;case Ht.BASE64URL:var F=-1!==Z.indexOf("+"),J=-1!==Z.indexOf("/");if(F||J)throw Bt($,"Invalid character '"+(F?"+":"/")+"' found: is it base64 encoded?");Z=Z.replace(/-/g,"+").replace(/_/g,"/")}var ye;try{ye=function($){return atob($)}(Z)}catch(j){throw Bt($,"Invalid character found")}for(var Fe=new Uint8Array(ye.length),tt=0;tt<ye.length;tt++)Fe[tt]=ye.charCodeAt(tt);return Fe}var tr=function(Z){this.base64=!1,this.contentType=null;var he=Z.match(/^data:([^,]+)?,/);if(null===he)throw Bt(Ht.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var P=he[1]||null;null!=P&&(this.base64=function($,Z){return $.length>=Z.length&&$.substring($.length-Z.length)===Z}(P,";base64"),this.contentType=this.base64?P.substring(0,P.length-";base64".length):P),this.rest=Z.substring(Z.indexOf(",")+1)},Jt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Zn($){switch($){case"running":case"pausing":case"canceling":return Jt.RUNNING;case"paused":return Jt.PAUSED;case"success":return Jt.SUCCESS;case"canceled":return Jt.CANCELED;case"error":default:return Jt.ERROR}}var Un=(()=>{return($=Un||(Un={}))[$.NO_ERROR=0]="NO_ERROR",$[$.NETWORK_ERROR=1]="NETWORK_ERROR",$[$.ABORT=2]="ABORT",Un;var $})(),Kt=function(){function $(){var Z=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Un.NO_ERROR,this.sendPromise_=new Promise(function(he){Z.xhr_.addEventListener("abort",function(){Z.errorCode_=Un.ABORT,he()}),Z.xhr_.addEventListener("error",function(){Z.errorCode_=Un.NETWORK_ERROR,he()}),Z.xhr_.addEventListener("load",function(){he()})})}return $.prototype.send=function(Z,he,P,z){if(this.sent_)throw kt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(he,Z,!0),void 0!==z)for(var F in z)z.hasOwnProperty(F)&&this.xhr_.setRequestHeader(F,z[F].toString());return void 0!==P?this.xhr_.send(P):this.xhr_.send(),this.sendPromise_},$.prototype.getErrorCode=function(){if(!this.sent_)throw kt("cannot .getErrorCode() before sending");return this.errorCode_},$.prototype.getStatus=function(){if(!this.sent_)throw kt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Z){return-1}},$.prototype.getResponseText=function(){if(!this.sent_)throw kt("cannot .getResponseText() before sending");return this.xhr_.responseText},$.prototype.abort=function(){this.xhr_.abort()},$.prototype.getResponseHeader=function(Z){return this.xhr_.getResponseHeader(Z)},$.prototype.addUploadProgressListener=function(Z){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",Z)},$.prototype.removeUploadProgressListener=function(Z){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",Z)},$}(),jr=function(){function $(){}return $.prototype.createConnection=function(){return new Kt},$}(),Kn=function(){function $(Z,he){this.bucket=Z,this.path_=he}return Object.defineProperty($.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),$.prototype.fullServerUrl=function(){var Z=encodeURIComponent;return"/b/"+Z(this.bucket)+"/o/"+Z(this.path)},$.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},$.makeFromBucketSpec=function(Z,he){var P;try{P=$.makeFromUrl(Z,he)}catch(z){return new $(Z,"")}if(""===P.path)return P;throw function($){return new ze("invalid-default-bucket","Invalid default bucket '"+$+"'.")}(Z)},$.makeFromUrl=function(Z,he){var P=null,z="([A-Za-z0-9.\\-_]+)",ye=new RegExp("^gs://"+z+"(/(.*))?$","i");function tt(fo){fo.path_=decodeURIComponent(fo.path)}for(var B=he.replace(/[.]/g,"\\."),mr=[{regex:ye,indices:{bucket:1,path:3},postModify:function(fo){"/"===fo.path.charAt(fo.path.length-1)&&(fo.path_=fo.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+B+"/v[A-Za-z0-9_]+/b/"+z+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:tt},{regex:new RegExp("^https?://"+(he===De?"(?:storage.googleapis.com|storage.cloud.google.com)":he)+"/"+z+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:tt}],zr=0;zr<mr.length;zr++){var di=mr[zr],Tn=di.regex.exec(Z);if(Tn){var ms=Tn[di.indices.path];ms||(ms=""),P=new $(Tn[di.indices.bucket],ms),di.postModify(P);break}}if(null==P)throw function($){return new ze("invalid-url","Invalid URL '"+$+"'.")}(Z);return P},$}(),Tt=function(){function $(Z){this.promise_=Promise.reject(Z)}return $.prototype.getPromise=function(){return this.promise_},$.prototype.cancel=function(Z){},$}();function At($){return"string"==typeof $||$ instanceof String}function Ne($){return ft()&&$ instanceof Blob}function ft(){return"undefined"!=typeof Blob}function vt($,Z,he,P){if(P<Z)throw an("Invalid value for '"+$+"'. Expected "+Z+" or greater.");if(P>he)throw an("Invalid value for '"+$+"'. Expected "+he+" or less.")}function Dt($,Z){var he=Z.match(/^(\w+):\/\/.+/),z=Z;return null==(null==he?void 0:he[1])&&(z="https://"+Z),z+"/v0"+$}function Ut($){var Z=encodeURIComponent,he="?";for(var P in $)$.hasOwnProperty(P)&&(he=he+(Z(P)+"=")+Z($[P])+"&");return he.slice(0,-1)}var cn=function(){function $(Z,he,P,z,F,J,ye,Fe,tt,j,B){var L=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=Z,this.method_=he,this.headers_=P,this.body_=z,this.successCodes_=F.slice(),this.additionalRetryCodes_=J.slice(),this.callback_=ye,this.errorCallback_=Fe,this.progressCallback_=j,this.timeout_=tt,this.pool_=B,this.promise_=new Promise(function(se,Ze){L.resolve_=se,L.reject_=Ze,L.start_()})}return $.prototype.start_=function(){var Z=this;function P(z,F){var J=Z.resolve_,ye=Z.reject_,Fe=F.connection;if(F.wasSuccessCode)try{var tt=Z.callback_(Fe,Fe.getResponseText());!function($){return void 0!==$}(tt)?J():J(tt)}catch(B){ye(B)}else if(null!==Fe)(j=On()).serverResponse=Fe.getResponseText(),ye(Z.errorCallback_?Z.errorCallback_(Fe,j):j);else if(F.canceled)ye(j=Z.appDelete_?Sn():Ke());else{var j;ye(j=new ze("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}}this.canceled_?P(0,new fn(!1,null,!0)):this.backoffId_=function($,Z,he){var P=1,z=null,F=!1,J=0;function ye(){return 2===J}var Fe=!1;function tt(){for(var Ze=[],Ot=0;Ot<arguments.length;Ot++)Ze[Ot]=arguments[Ot];Fe||(Fe=!0,Z.apply(null,Ze))}function j(Ze){z=setTimeout(function(){z=null,$(B,ye())},Ze)}function B(Ze){for(var Ot=[],En=1;En<arguments.length;En++)Ot[En-1]=arguments[En];if(!Fe){if(Ze)return void tt.call.apply(tt,(0,Ce.ev)([null,Ze],Ot));var qr;if(ye()||F)return void tt.call.apply(tt,(0,Ce.ev)([null,Ze],Ot));P<64&&(P*=2),1===J?(J=2,qr=0):qr=1e3*(P+Math.random()),j(qr)}}var L=!1;function se(Ze){L||(L=!0,!Fe&&(null!==z?(Ze||(J=2),clearTimeout(z),j(0)):Ze||(J=1)))}return j(0),setTimeout(function(){F=!0,se(!0)},he),se}(function(z,F){if(F)z(!1,new fn(!1,null,!0));else{var J=Z.pool_.createConnection();Z.pendingConnection_=J,null!==Z.progressCallback_&&J.addUploadProgressListener(ye),J.send(Z.url_,Z.method_,Z.body_,Z.headers_).then(function(){null!==Z.progressCallback_&&J.removeUploadProgressListener(ye),Z.pendingConnection_=null;var Fe=J.getErrorCode()===Un.NO_ERROR,tt=J.getStatus();if(Fe&&!Z.isRetryStatusCode_(tt)){var B=-1!==Z.successCodes_.indexOf(tt);z(!0,new fn(B,J))}else{var j=J.getErrorCode()===Un.ABORT;z(!1,new fn(!1,null,j))}})}function ye(Fe){null!==Z.progressCallback_&&Z.progressCallback_(Fe.loaded,Fe.lengthComputable?Fe.total:-1)}},P,this.timeout_)},$.prototype.getPromise=function(){return this.promise_},$.prototype.cancel=function(Z){this.canceled_=!0,this.appDelete_=Z||!1,null!==this.backoffId_&&function($){$(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},$.prototype.isRetryStatusCode_=function(Z){var he=Z>=500&&Z<600,z=-1!==[408,429].indexOf(Z),F=-1!==this.additionalRetryCodes_.indexOf(Z);return he||z||F},$}(),fn=function(Z,he,P){this.wasSuccessCode=Z,this.connection=he,this.canceled=!!P};function Xe(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Zt(){for(var $=[],Z=0;Z<arguments.length;Z++)$[Z]=arguments[Z];var he=Xe();if(void 0!==he){for(var P=new he,z=0;z<$.length;z++)P.append($[z]);return P.getBlob()}if(ft())return new Blob($);throw new ze("unsupported-environment","This browser doesn't seem to support creating Blobs")}var or=function(){function $(Z,he){var P=0,z="";Ne(Z)?(this.data_=Z,P=Z.size,z=Z.type):Z instanceof ArrayBuffer?(he?this.data_=new Uint8Array(Z):(this.data_=new Uint8Array(Z.byteLength),this.data_.set(new Uint8Array(Z))),P=this.data_.length):Z instanceof Uint8Array&&(he?this.data_=Z:(this.data_=new Uint8Array(Z.length),this.data_.set(Z)),P=Z.length),this.size_=P,this.type_=z}return $.prototype.size=function(){return this.size_},$.prototype.type=function(){return this.type_},$.prototype.slice=function(Z,he){if(Ne(this.data_)){var z=function($,Z,he){return $.webkitSlice?$.webkitSlice(Z,he):$.mozSlice?$.mozSlice(Z,he):$.slice?$.slice(Z,he):null}(this.data_,Z,he);return null===z?null:new $(z)}return new $(new Uint8Array(this.data_.buffer,Z,he-Z),!0)},$.getBlob=function(){for(var Z=[],he=0;he<arguments.length;he++)Z[he]=arguments[he];if(ft()){var P=Z.map(function(Fe){return Fe instanceof $?Fe.data_:Fe});return new $(Zt.apply(null,P))}var z=Z.map(function(Fe){return At(Fe)?Cn(Ht.RAW,Fe).data:Fe.data_}),F=0;z.forEach(function(Fe){F+=Fe.byteLength});var J=new Uint8Array(F),ye=0;return z.forEach(function(Fe){for(var tt=0;tt<Fe.length;tt++)J[ye++]=Fe[tt]}),new $(J,!0)},$.prototype.uploadData=function(){return this.data_},$}();function Bn($){var Z;try{Z=JSON.parse($)}catch(he){return null}return function($){return"object"==typeof $&&!Array.isArray($)}(Z)?Z:null}function Hr($){var Z=$.lastIndexOf("/",$.length-2);return-1===Z?$:$.slice(Z+1)}function Xr($,Z){return Z}var Dr=function(Z,he,P,z){this.server=Z,this.local=he||Z,this.writable=!!P,this.xform=z||Xr},Ri=null;function Gi(){if(Ri)return Ri;var $=[];$.push(new Dr("bucket")),$.push(new Dr("generation")),$.push(new Dr("metageneration")),$.push(new Dr("name","fullPath",!0));var he=new Dr("name");he.xform=function(F,J){return function($){return!At($)||$.length<2?$:Hr($)}(J)},$.push(he);var z=new Dr("size");return z.xform=function(F,J){return void 0!==J?Number(J):J},$.push(z),$.push(new Dr("timeCreated")),$.push(new Dr("updated")),$.push(new Dr("md5Hash",null,!0)),$.push(new Dr("cacheControl",null,!0)),$.push(new Dr("contentDisposition",null,!0)),$.push(new Dr("contentEncoding",null,!0)),$.push(new Dr("contentLanguage",null,!0)),$.push(new Dr("contentType",null,!0)),$.push(new Dr("metadata","customMetadata",!0)),Ri=$}function Nr($,Z,he){var P=Bn(Z);return null===P?null:function($,Z,he){for(var P={type:"file"},z=he.length,F=0;F<z;F++){var J=he[F];P[J.local]=J.xform(P,Z[J.server])}return function($,Z){Object.defineProperty($,"ref",{get:function(){var F=new Kn($.bucket,$.fullPath);return Z._makeStorageReference(F)}})}(P,$),P}($,P,he)}function vn($,Z){for(var he={},P=Z.length,z=0;z<P;z++){var F=Z[z];F.writable&&(he[F.server]=$[F.local])}return JSON.stringify(he)}var Vr="prefixes";var ln=function(Z,he,P,z){this.url=Z,this.method=he,this.handler=P,this.timeout=z,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function In($){if(!$)throw On()}function Qr($,Z){return function(P,z){var F=Nr($,z,Z);return In(null!==F),F}}function ni($){return function(he,P){var z;return(z=401===he.getStatus()?he.getResponseText().includes("Firebase App Check token is invalid")?new ze("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new ze("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===he.getStatus()?function($){return new ze("quota-exceeded","Quota for bucket '"+$+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}($.bucket):403===he.getStatus()?function($){return new ze("unauthorized","User does not have permission to access '"+$+"'.")}($.path):P).serverResponse=P.serverResponse,z}}function Er($){var Z=ni($);return function(P,z){var F=Z(P,z);return 404===P.getStatus()&&(F=function($){return new ze("object-not-found","Object '"+$+"' does not exist.")}($.path)),F.serverResponse=z.serverResponse,F}}function bo($,Z,he){var z=Dt(Z.fullServerUrl(),$.host),J=$.maxOperationRetryTime,ye=new ln(z,"GET",Qr($,he),J);return ye.errorHandler=Er(Z),ye}function so($,Z,he,P,z){var F={};F.prefix=Z.isRoot?"":Z.path+"/",he&&he.length>0&&(F.delimiter=he),P&&(F.pageToken=P),z&&(F.maxResults=z);var ye=Dt(Z.bucketOnlyServerUrl(),$.host),tt=$.maxOperationRetryTime,j=new ln(ye,"GET",function($,Z){return function(P,z){var F=function($,Z,he){var P=Bn(he);return null===P?null:function($,Z,he){var P={prefixes:[],items:[],nextPageToken:he.nextPageToken};if(he[Vr])for(var z=0,F=he[Vr];z<F.length;z++){var ye=F[z].replace(/\/$/,""),Fe=$._makeStorageReference(new Kn(Z,ye));P.prefixes.push(Fe)}if(he.items)for(var tt=0,j=he.items;tt<j.length;tt++)Fe=$._makeStorageReference(new Kn(Z,j[tt].name)),P.items.push(Fe);return P}($,Z,P)}($,Z,z);return In(null!==F),F}}($,Z.bucket),tt);return j.urlParams=F,j.errorHandler=ni(Z),j}function ot($,Z,he){var P=Object.assign({},he);return P.fullPath=$.path,P.size=Z.size(),P.contentType||(P.contentType=function($,Z){return Z&&Z.type()||"application/octet-stream"}(0,Z)),P}var pn=function(Z,he,P,z){this.current=Z,this.total=he,this.finalized=!!P,this.metadata=z||null};function kn($,Z){var he=null;try{he=$.getResponseHeader("X-Goog-Upload-Status")}catch(z){In(!1)}return In(!!he&&-1!==(Z||["active"]).indexOf(he)),he}var gr=function(Z,he,P){if(function($){return"function"==typeof $}(Z)||null!=he||null!=P)this.next=Z,this.error=he,this.complete=P;else{var F=Z;this.next=F.next,this.error=F.error,this.complete=F.complete}};function ki($){return function(){for(var Z=[],he=0;he<arguments.length;he++)Z[he]=arguments[he];Promise.resolve().then(function(){return $.apply(void 0,Z)})}}var eo=function(){function $(Z,he,P){var z=this;void 0===P&&(P=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=Z,this._blob=he,this._metadata=P,this._mappings=Gi(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(F){z._request=void 0,z._chunkMultiplier=1,F._codeEquals("canceled")?(z._needToFetchStatus=!0,z.completeTransitions_()):(z._error=F,z._transition("error"))},this._metadataErrorHandler=function(F){z._request=void 0,F._codeEquals("canceled")?z.completeTransitions_():(z._error=F,z._transition("error"))},this._promise=new Promise(function(F,J){z._resolve=F,z._reject=J,z._start()}),this._promise.then(null,function(){})}return $.prototype._makeProgressCallback=function(){var Z=this,he=this._transferred;return function(P){return Z._updateProgress(he+P)}},$.prototype._shouldDoResumable=function(Z){return Z.size()>262144},$.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},$.prototype._resolveToken=function(Z){var he=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(P){var z=P[0],F=P[1];switch(he._state){case"running":Z(z,F);break;case"canceling":he._transition("canceled");break;case"pausing":he._transition("paused")}})},$.prototype._createResumable=function(){var Z=this;this._resolveToken(function(he,P){var z=function($,Z,he,P,z){var F=Z.bucketOnlyServerUrl(),J=ot(Z,P,z),ye={name:J.fullPath},Fe=Dt(F,$.host),j={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+P.size(),"X-Goog-Upload-Header-Content-Type":J.contentType,"Content-Type":"application/json; charset=utf-8"},B=vn(J,he),Ze=new ln(Fe,"POST",function(Ot){var En;kn(Ot);try{En=Ot.getResponseHeader("X-Goog-Upload-URL")}catch(fr){In(!1)}return In(At(En)),En},$.maxUploadRetryTime);return Ze.urlParams=ye,Ze.headers=j,Ze.body=B,Ze.errorHandler=ni(Z),Ze}(Z._ref.storage,Z._ref._location,Z._mappings,Z._blob,Z._metadata),F=Z._ref.storage._makeRequest(z,he,P);Z._request=F,F.getPromise().then(function(J){Z._request=void 0,Z._uploadUrl=J,Z._needToFetchStatus=!1,Z.completeTransitions_()},Z._errorHandler)})},$.prototype._fetchStatus=function(){var Z=this,he=this._uploadUrl;this._resolveToken(function(P,z){var F=function($,Z,he,P){var Fe=new ln(he,"POST",function(tt){var j=kn(tt,["active","final"]),B=null;try{B=tt.getResponseHeader("X-Goog-Upload-Size-Received")}catch(se){In(!1)}B||In(!1);var L=Number(B);return In(!isNaN(L)),new pn(L,P.size(),"final"===j)},$.maxUploadRetryTime);return Fe.headers={"X-Goog-Upload-Command":"query"},Fe.errorHandler=ni(Z),Fe}(Z._ref.storage,Z._ref._location,he,Z._blob),J=Z._ref.storage._makeRequest(F,P,z);Z._request=J,J.getPromise().then(function(ye){ye=ye,Z._request=void 0,Z._updateProgress(ye.current),Z._needToFetchStatus=!1,ye.finalized&&(Z._needToFetchMetadata=!0),Z.completeTransitions_()},Z._errorHandler)})},$.prototype._continueUpload=function(){var Z=this,he=262144*this._chunkMultiplier,P=new pn(this._transferred,this._blob.size()),z=this._uploadUrl;this._resolveToken(function(F,J){var ye;try{ye=function($,Z,he,P,z,F,J,ye){var Fe=new pn(0,0);if(J?(Fe.current=J.current,Fe.total=J.total):(Fe.current=0,Fe.total=P.size()),P.size()!==Fe.total)throw new ze("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var tt=Fe.total-Fe.current,j=tt;z>0&&(j=Math.min(j,z));var B=Fe.current,Ze={"X-Goog-Upload-Command":j===tt?"upload, finalize":"upload","X-Goog-Upload-Offset":""+Fe.current},Ot=P.slice(B,B+j);if(null===Ot)throw _t();var mr=new ln(he,"POST",function(zr,di){var fo,Tn=kn(zr,["active","final"]),ro=Fe.current+j,ms=P.size();return fo="final"===Tn?Qr(Z,F)(zr,di):null,new pn(ro,ms,"final"===Tn,fo)},Z.maxUploadRetryTime);return mr.headers=Ze,mr.body=Ot.uploadData(),mr.progressCallback=ye||null,mr.errorHandler=ni($),mr}(Z._ref._location,Z._ref.storage,z,Z._blob,he,Z._mappings,P,Z._makeProgressCallback())}catch(tt){return Z._error=tt,void Z._transition("error")}var Fe=Z._ref.storage._makeRequest(ye,F,J);Z._request=Fe,Fe.getPromise().then(function(tt){Z._increaseMultiplier(),Z._request=void 0,Z._updateProgress(tt.current),tt.finalized?(Z._metadata=tt.metadata,Z._transition("success")):Z.completeTransitions_()},Z._errorHandler)})},$.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},$.prototype._fetchMetadata=function(){var Z=this;this._resolveToken(function(he,P){var z=bo(Z._ref.storage,Z._ref._location,Z._mappings),F=Z._ref.storage._makeRequest(z,he,P);Z._request=F,F.getPromise().then(function(J){Z._request=void 0,Z._metadata=J,Z._transition("success")},Z._metadataErrorHandler)})},$.prototype._oneShotUpload=function(){var Z=this;this._resolveToken(function(he,P){var z=function($,Z,he,P,z){var F=Z.bucketOnlyServerUrl(),J={"X-Goog-Upload-Protocol":"multipart"},Fe=function(){for(var mr="",zr=0;zr<2;zr++)mr+=Math.random().toString().slice(2);return mr}();J["Content-Type"]="multipart/related; boundary="+Fe;var tt=ot(Z,P,z),j=vn(tt,he),se=or.getBlob("--"+Fe+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+j+"\r\n--"+Fe+"\r\nContent-Type: "+tt.contentType+"\r\n\r\n",P,"\r\n--"+Fe+"--");if(null===se)throw _t();var Ze={name:tt.fullPath},Ot=Dt(F,$.host),fr=$.maxUploadRetryTime,qr=new ln(Ot,"POST",Qr($,he),fr);return qr.urlParams=Ze,qr.headers=J,qr.body=se.uploadData(),qr.errorHandler=ni(Z),qr}(Z._ref.storage,Z._ref._location,Z._mappings,Z._blob,Z._metadata),F=Z._ref.storage._makeRequest(z,he,P);Z._request=F,F.getPromise().then(function(J){Z._request=void 0,Z._metadata=J,Z._updateProgress(Z._blob.size()),Z._transition("success")},Z._errorHandler)})},$.prototype._updateProgress=function(Z){var he=this._transferred;this._transferred=Z,this._transferred!==he&&this._notifyObservers()},$.prototype._transition=function(Z){if(this._state!==Z)switch(Z){case"canceling":case"pausing":this._state=Z,void 0!==this._request&&this._request.cancel();break;case"running":var he="paused"===this._state;this._state=Z,he&&(this._notifyObservers(),this._start());break;case"paused":this._state=Z,this._notifyObservers();break;case"canceled":this._error=Ke(),this._state=Z,this._notifyObservers();break;case"error":case"success":this._state=Z,this._notifyObservers()}},$.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty($.prototype,"snapshot",{get:function(){var Z=Zn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:Z,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),$.prototype.on=function(Z,he,P,z){var F=this,J=new gr(he,P,z);return this._addObserver(J),function(){F._removeObserver(J)}},$.prototype.then=function(Z,he){return this._promise.then(Z,he)},$.prototype.catch=function(Z){return this.then(null,Z)},$.prototype._addObserver=function(Z){this._observers.push(Z),this._notifyObserver(Z)},$.prototype._removeObserver=function(Z){var he=this._observers.indexOf(Z);-1!==he&&this._observers.splice(he,1)},$.prototype._notifyObservers=function(){var Z=this;this._finishPromise(),this._observers.slice().forEach(function(P){Z._notifyObserver(P)})},$.prototype._finishPromise=function(){if(void 0!==this._resolve){var Z=!0;switch(Zn(this._state)){case Jt.SUCCESS:ki(this._resolve.bind(null,this.snapshot))();break;case Jt.CANCELED:case Jt.ERROR:ki(this._reject.bind(null,this._error))();break;default:Z=!1}Z&&(this._resolve=void 0,this._reject=void 0)}},$.prototype._notifyObserver=function(Z){switch(Zn(this._state)){case Jt.RUNNING:case Jt.PAUSED:Z.next&&ki(Z.next.bind(Z,this.snapshot))();break;case Jt.SUCCESS:Z.complete&&ki(Z.complete.bind(Z))();break;case Jt.CANCELED:case Jt.ERROR:Z.error&&ki(Z.error.bind(Z,this._error))();break;default:Z.error&&ki(Z.error.bind(Z,this._error))()}},$.prototype.resume=function(){var Z="paused"===this._state||"pausing"===this._state;return Z&&this._transition("running"),Z},$.prototype.pause=function(){var Z="running"===this._state;return Z&&this._transition("pausing"),Z},$.prototype.cancel=function(){var Z="running"===this._state||"pausing"===this._state;return Z&&this._transition("canceling"),Z},$}(),Gr=function(){function $(Z,he){this._service=Z,this._location=he instanceof Kn?he:Kn.makeFromUrl(he,Z.host)}return $.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},$.prototype._newRef=function(Z,he){return new $(Z,he)},Object.defineProperty($.prototype,"root",{get:function(){var Z=new Kn(this._location.bucket,"");return this._newRef(this._service,Z)},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"name",{get:function(){return Hr(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"parent",{get:function(){var Z=function($){if(0===$.length)return null;var Z=$.lastIndexOf("/");return-1===Z?"":$.slice(0,Z)}(this._location.path);if(null===Z)return null;var he=new Kn(this._location.bucket,Z);return new $(this._service,he)},enumerable:!1,configurable:!0}),$.prototype._throwIfRoot=function(Z){if(""===this._location.path)throw on(Z)},$}();function sr($){var Z={prefixes:[],items:[]};return jn($,Z).then(function(){return Z})}function jn($,Z,he){return(0,Ce.mG)(this,void 0,void 0,function(){var z,F,J;return(0,Ce.Jh)(this,function(ye){switch(ye.label){case 0:return[4,Yr($,{pageToken:he})];case 1:return z=ye.sent(),(F=Z.prefixes).push.apply(F,z.prefixes),(J=Z.items).push.apply(J,z.items),null==z.nextPageToken?[3,3]:[4,jn($,Z,z.nextPageToken)];case 2:ye.sent(),ye.label=3;case 3:return[2]}})})}function Yr($,Z){return(0,Ce.mG)(this,void 0,void 0,function(){var he,P;return(0,Ce.Jh)(this,function(z){switch(z.label){case 0:return null!=Z&&"number"==typeof Z.maxResults&&vt("options.maxResults",1,1e3,Z.maxResults),P=so($.storage,$._location,"/",(he=Z||{}).pageToken,he.maxResults),[4,$.storage.makeRequestWithTokens(P)];case 1:return[2,z.sent().getPromise()]}})})}function ri($){return(0,Ce.mG)(this,void 0,void 0,function(){var Z;return(0,Ce.Jh)(this,function(he){switch(he.label){case 0:return $._throwIfRoot("getDownloadURL"),Z=function($,Z,he){var z=Dt(Z.fullServerUrl(),$.host),J=$.maxOperationRetryTime,ye=new ln(z,"GET",function($,Z){return function(P,z){var F=Nr($,z,Z);return In(null!==F),function($,Z,he){var P=Bn(Z);if(null===P||!At(P.downloadTokens))return null;var z=P.downloadTokens;if(0===z.length)return null;var F=encodeURIComponent;return z.split(",").map(function(Fe){var j=$.fullPath;return Dt("/b/"+F($.bucket)+"/o/"+F(j),he)+Ut({alt:"media",token:Fe})})[0]}(F,z,$.host)}}($,he),J);return ye.errorHandler=Er(Z),ye}($.storage,$._location,Gi()),[4,$.storage.makeRequestWithTokens(Z)];case 1:return[2,he.sent().getPromise().then(function(P){if(null===P)throw new ze("no-download-url","The given file does not have any download URLs.");return P})]}})})}function Zi($,Z){var he=function($,Z){var he=Z.split("/").filter(function(P){return P.length>0}).join("/");return 0===$.length?he:$+"/"+he}($._location.path,Z),P=new Kn($._location.bucket,he);return new Gr($.storage,P)}function ui($){return/^[A-Za-z]+:\/\//.test($)}function Lr($,Z){if($ instanceof Co){var he=$;if(null==he._bucket)throw new ze("no-default-bucket","No default bucket found. Did you set the '"+Re+"' property when initializing the app?");var P=new Gr(he,he._bucket);return null!=Z?Lr(P,Z):P}return void 0!==Z?Zi($,Z):$}function is($,Z){if(Z&&ui(Z)){if($ instanceof Co)return function($,Z){return new Gr($,Z)}($,Z);throw an("To use ref(service, url), the first argument must be a Storage instance.")}return Lr($,Z)}function Bi($,Z){var he=null==Z?void 0:Z[Re];return null==he?null:Kn.makeFromBucketSpec(he,$)}var Co=function(){function $(Z,he,P,z,F,J){this.app=Z,this._authProvider=he,this._appCheckProvider=P,this._pool=z,this._url=F,this._firebaseVersion=J,this._bucket=null,this._host=De,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=F?Kn.makeFromBucketSpec(F,this._host):Bi(this._host,this.app.options)}return Object.defineProperty($.prototype,"host",{get:function(){return this._host},set:function(Z){this._host=Z,this._bucket=null!=this._url?Kn.makeFromBucketSpec(this._url,Z):Bi(Z,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(Z){vt("time",0,Number.POSITIVE_INFINITY,Z),this._maxUploadRetryTime=Z},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(Z){vt("time",0,Number.POSITIVE_INFINITY,Z),this._maxOperationRetryTime=Z},enumerable:!1,configurable:!0}),$.prototype._getAuthToken=function(){return(0,Ce.mG)(this,void 0,void 0,function(){var Z,he;return(0,Ce.Jh)(this,function(P){switch(P.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(Z=this._authProvider.getImmediate({optional:!0}))?[4,Z.getToken()]:[3,2];case 1:if(null!==(he=P.sent()))return[2,he.accessToken];P.label=2;case 2:return[2,null]}})})},$.prototype._getAppCheckToken=function(){return(0,Ce.mG)(this,void 0,void 0,function(){var Z;return(0,Ce.Jh)(this,function(P){switch(P.label){case 0:return(Z=this._appCheckProvider.getImmediate({optional:!0}))?[4,Z.getToken()]:[3,2];case 1:return[2,P.sent().token];case 2:return[2,null]}})})},$.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(Z){return Z.cancel()}),this._requests.clear()),Promise.resolve()},$.prototype._makeStorageReference=function(Z){return new Gr(this,Z)},$.prototype._makeRequest=function(Z,he,P){var z=this;if(this._deleted)return new Tt(Sn());var F=function($,Z,he,P,z,F){var J=Ut($.urlParams),ye=$.url+J,Fe=Object.assign({},$.headers);return function($,Z){Z&&($["X-Firebase-GMPID"]=Z)}(Fe,Z),function($,Z){null!==Z&&Z.length>0&&($.Authorization="Firebase "+Z)}(Fe,he),function($,Z){$["X-Firebase-Storage-Version"]="webjs/"+(null!=Z?Z:"AppManager")}(Fe,F),function($,Z){null!==Z&&($["X-Firebase-AppCheck"]=Z)}(Fe,P),new cn(ye,$.method,Fe,$.body,$.successCodes,$.additionalRetryCodes,$.handler,$.errorHandler,$.timeout,$.progressCallback,z)}(Z,this._appId,he,P,this._pool,this._firebaseVersion);return this._requests.add(F),F.getPromise().then(function(){return z._requests.delete(F)},function(){return z._requests.delete(F)}),F},$.prototype.makeRequestWithTokens=function(Z){return(0,Ce.mG)(this,void 0,void 0,function(){var he;return(0,Ce.Jh)(this,function(F){switch(F.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return he=F.sent(),[2,this._makeRequest(Z,he[0],he[1])]}})})},$}();function Yi($,Z){return is($=(0,le.m9)($),Z)}var $,Z,xi=function(){function $(Z,he,P){this._delegate=Z,this.task=he,this.ref=P}return Object.defineProperty($.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),$}(),no=function(){function $(Z,he){this._delegate=Z,this._ref=he,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty($.prototype,"snapshot",{get:function(){return new xi(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),$.prototype.then=function(Z,he){var P=this;return this._delegate.then(function(z){if(Z)return Z(new xi(z,P,P._ref))},he)},$.prototype.on=function(Z,he,P,z){var F=this,J=void 0;return he&&(J="function"==typeof he?function(ye){return he(new xi(ye,F,F._ref))}:{next:he.next?function(ye){return he.next(new xi(ye,F,F._ref))}:void 0,complete:he.complete||void 0,error:he.error||void 0}),this._delegate.on(Z,J,P||void 0,z||void 0)},$}(),ii=function(){function $(Z,he){this._delegate=Z,this._service=he}return Object.defineProperty($.prototype,"prefixes",{get:function(){var Z=this;return this._delegate.prefixes.map(function(he){return new wo(he,Z._service)})},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"items",{get:function(){var Z=this;return this._delegate.items.map(function(he){return new wo(he,Z._service)})},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),$}(),wo=function(){function $(Z,he){this._delegate=Z,this.storage=he}return Object.defineProperty($.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),$.prototype.toString=function(){return this._delegate.toString()},$.prototype.child=function(Z){return new $(function($,Z){return Zi($,Z)}(this._delegate,Z),this.storage)},Object.defineProperty($.prototype,"root",{get:function(){return new $(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"parent",{get:function(){var Z=this._delegate.parent;return null==Z?null:new $(Z,this.storage)},enumerable:!1,configurable:!0}),$.prototype.put=function(Z,he){return this._throwIfRoot("put"),new no(function($,Z,he){return function($,Z,he){return $._throwIfRoot("uploadBytesResumable"),new eo($,new or(Z),he)}($=(0,le.m9)($),Z,he)}(this._delegate,Z,he),this)},$.prototype.putString=function(Z,he,P){void 0===he&&(he=Ht.RAW),this._throwIfRoot("putString");var z=Cn(he,Z),F=(0,Ce.pi)({},P);return null==F.contentType&&null!=z.contentType&&(F.contentType=z.contentType),new no(new eo(this._delegate,new or(z.data,!0),F),this)},$.prototype.listAll=function(){var Z=this;return function($){return sr($=(0,le.m9)($))}(this._delegate).then(function(he){return new ii(he,Z.storage)})},$.prototype.list=function(Z){var he=this;return function($,Z){return Yr($=(0,le.m9)($),Z)}(this._delegate,Z||void 0).then(function(P){return new ii(P,he.storage)})},$.prototype.getMetadata=function(){return function($){return function($){return(0,Ce.mG)(this,void 0,void 0,function(){var Z;return(0,Ce.Jh)(this,function(he){switch(he.label){case 0:return $._throwIfRoot("getMetadata"),Z=bo($.storage,$._location,Gi()),[4,$.storage.makeRequestWithTokens(Z)];case 1:return[2,he.sent().getPromise()]}})})}($=(0,le.m9)($))}(this._delegate)},$.prototype.updateMetadata=function(Z){return function($,Z){return function($,Z){return(0,Ce.mG)(this,void 0,void 0,function(){var he;return(0,Ce.Jh)(this,function(P){switch(P.label){case 0:return $._throwIfRoot("updateMetadata"),he=function($,Z,he,P){var F=Dt(Z.fullServerUrl(),$.host),ye=vn(he,P),tt=$.maxOperationRetryTime,j=new ln(F,"PATCH",Qr($,P),tt);return j.headers={"Content-Type":"application/json; charset=utf-8"},j.body=ye,j.errorHandler=Er(Z),j}($.storage,$._location,Z,Gi()),[4,$.storage.makeRequestWithTokens(he)];case 1:return[2,P.sent().getPromise()]}})})}($=(0,le.m9)($),Z)}(this._delegate,Z)},$.prototype.getDownloadURL=function(){return function($){return ri($=(0,le.m9)($))}(this._delegate)},$.prototype.delete=function(){return this._throwIfRoot("delete"),function($){return function($){return(0,Ce.mG)(this,void 0,void 0,function(){var Z;return(0,Ce.Jh)(this,function(he){switch(he.label){case 0:return $._throwIfRoot("deleteObject"),Z=function($,Z){var P=Dt(Z.fullServerUrl(),$.host),ye=new ln(P,"DELETE",function(Fe,tt){},$.maxOperationRetryTime);return ye.successCodes=[200,204],ye.errorHandler=Er(Z),ye}($.storage,$._location),[4,$.storage.makeRequestWithTokens(Z)];case 1:return[2,he.sent().getPromise()]}})})}($=(0,le.m9)($))}(this._delegate)},$.prototype._throwIfRoot=function(Z){if(""===this._delegate._location.path)throw on(Z)},$}(),ne=function(){function $(Z,he){this.app=Z,this._delegate=he}return Object.defineProperty($.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),$.prototype.ref=function(Z){if(ui(Z))throw an("ref() expected a child path but got a URL, use refFromURL instead.");return new wo(Yi(this._delegate,Z),this)},$.prototype.refFromURL=function(Z){if(!ui(Z))throw an("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Kn.makeFromUrl(Z,this._delegate.host)}catch(he){throw an("refFromUrl() expected a valid full URL but got an invalid one.")}return new wo(Yi(this._delegate,Z),this)},$.prototype.setMaxUploadRetryTime=function(Z){this._delegate.maxUploadRetryTime=Z},$.prototype.setMaxOperationRetryTime=function(Z){this._delegate.maxOperationRetryTime=Z},$.prototype.useEmulator=function(Z,he,P){void 0===P&&(P={}),function($,Z,he,P){void 0===P&&(P={}),function($,Z,he,P){void 0===P&&(P={}),$.host="http://"+Z+":"+he;var z=P.mockUserToken;z&&($._overrideAuthToken="string"==typeof z?z:(0,le.Sg)(z,$.app.options.projectId))}($,Z,he,P)}(this._delegate,Z,he,P)},$}();function lr($){const Z=function($){return new O.y(Z=>{const he=J=>Z.next(J);he($.snapshot);const F=$.on("state_changed",he);return $.then(J=>{he(J),Z.complete()},J=>{he($.snapshot),(J=>{Z.error(J)})(J)}),function(){F()}}).pipe((0,w.b)(0))}($);return{task:$,then:$.then.bind($),catch:$.catch.bind($),pause:$.pause.bind($),cancel:$.cancel.bind($),resume:$.resume.bind($),snapshotChanges:()=>Z,percentageChanges:()=>Z.pipe((0,Ue.U)(he=>he.bytesTransferred/he.totalBytes*100))}}function Zr($,Z,he){return{getDownloadURL:()=>(0,c.of)(void 0).pipe((0,be.QV)(Z.outsideAngular),(0,xe.w)(()=>$.getDownloadURL()),he),getMetadata:()=>(0,c.of)(void 0).pipe((0,be.QV)(Z.outsideAngular),(0,xe.w)(()=>$.getMetadata()),he),delete:()=>(0,K.D)($.delete()),child:P=>Zr($.child(P),Z,he),updateMetadata:P=>(0,K.D)($.updateMetadata(P)),put:(P,z)=>lr($.put(P,z)),putString:(P,z,F)=>lr($.putString(P,z,F)),listAll:()=>(0,K.D)($.listAll())}}Z={TaskState:Jt,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:Ht,Storage:Co,Reference:wo},($=re.Z).INTERNAL.registerComponent(new pe.wA("storage",function($,Z){var he=Z.instanceIdentifier,P=$.getProvider("app").getImmediate(),z=$.getProvider("auth-internal"),F=$.getProvider("app-check-internal");return new ne(P,new Co(P,z,F,new jr,he,re.Z.SDK_VERSION))},"PUBLIC").setServiceProps(Z).setMultipleInstances(!0)),$.registerVersion("@firebase/storage","0.7.0"),Y(8583);const Eo=new fe.OlP("angularfire2.storageBucket"),wi=new fe.OlP("angularfire2.storage.maxUploadRetryTime"),Uo=new fe.OlP("angularfire2.storage.maxOperationRetryTime");let Ur=(()=>{class ${constructor(he,P,z,F,J,ye,Fe){this.schedulers=new _e.HU(J),this.keepUnstableUntilFirst=(0,_e.ss)(this.schedulers);const tt=(0,_e.on)(he,J,P);this.storage=(0,_e.sI)(`${tt.name}.storage.${z}`,"AngularFireStorage",tt,()=>{const j=J.runOutsideAngular(()=>tt.storage(z||void 0));return ye&&j.setMaxUploadRetryTime(ye),Fe&&j.setMaxOperationRetryTime(Fe),j},[ye,Fe])}ref(he){return Zr(this.storage.ref(he),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(he){return Zr(this.storage.refFromURL(he),this.schedulers,this.keepUnstableUntilFirst)}upload(he,P,z){return Zr(this.storage.ref(he),this.schedulers,this.keepUnstableUntilFirst).put(P,z)}}return $.\u0275fac=function(he){return new(he||$)(fe.LFG(_e.Dh),fe.LFG(_e.xv,8),fe.LFG(Eo,8),fe.LFG(fe.Lbi),fe.LFG(fe.R0b),fe.LFG(wi,8),fe.LFG(Uo,8))},$.\u0275prov=fe.Yz7({factory:function(){return new $(fe.LFG(_e.Dh),fe.LFG(_e.xv,8),fe.LFG(Eo,8),fe.LFG(fe.Lbi),fe.LFG(fe.R0b),fe.LFG(wi,8),fe.LFG(Uo,8))},token:$,providedIn:"any"}),$})(),ho=(()=>{class ${}return $.\u0275fac=function(he){return new(he||$)},$.\u0275mod=fe.oAB({type:$}),$.\u0275inj=fe.cJS({}),$})(),os=(()=>{class ${}return $.\u0275fac=function(he){return new(he||$)},$.\u0275mod=fe.oAB({type:$}),$.\u0275inj=fe.cJS({providers:[Ur],imports:[ho]}),$})()},57:(jt,nt,Y)=>{"use strict";Y.d(nt,{hO:()=>Et,xv:()=>ee,Dh:()=>Ye,HU:()=>Ce,GT:()=>Re,sI:()=>It,on:()=>On,ss:()=>le,pX:()=>De,yq:()=>Nt});var O=Y(7771),c=Y(3637),K=Y(3342),w=Y(9673),Ue=Y(309),be=Y(7716),xe=Y(2329);function fe(){}jt=Y.hmd(jt);class _e{constructor(rt,it=O.N){this.zone=rt,this.delegate=it}now(){return this.delegate.now()}schedule(rt,it,et){const _t=this.zone;return this.delegate.schedule(function(tn){_t.runGuarded(()=>{rt.apply(this,[tn])})},it,et)}}class re{constructor(rt){this.zone=rt,this.task=null}call(rt,it){const et=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fe,{},fe,fe)),it.pipe((0,K.b)({next:et,complete:et,error:et})).subscribe(rt).add(et)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class Ce{constructor(rt){this.ngZone=rt,this.outsideAngular=rt.runOutsideAngular(()=>new _e(Zone.current)),this.insideAngular=rt.run(()=>new _e(Zone.current,c.z))}}function le(Ke){return function(it){return(it=it.lift(new re(Ke.ngZone))).pipe((0,w.R)(Ke.outsideAngular),(0,Ue.QV)(Ke.insideAngular))}}const pe=["ngOnDestroy"],De=(Ke,rt,it,et={})=>new Proxy(Ke,{get:(_t,st)=>it.runOutsideAngular(()=>{var tn;if(Ke[st])return(null===(tn=null==et?void 0:et.spy)||void 0===tn?void 0:tn.get)&&et.spy.get(st,Ke[st]),Ke[st];if(pe.indexOf(st)>-1)return()=>{};const an=rt.toPromise().then(Sn=>{const on=Sn&&Sn[st];return"function"==typeof on?on.bind(Sn):on&&on.then?on.then(Bt=>it.run(()=>Bt)):it.run(()=>on)});return new Proxy(()=>{},{get:(Sn,on)=>an[on],apply:(Sn,on,Bt)=>an.then(kt=>{var Qt;const Ht=kt&&kt(...Bt);return(null===(Qt=null==et?void 0:et.spy)||void 0===Qt?void 0:Qt.apply)&&et.spy.apply(st,Bt,Ht),Ht})})})}),Re=(Ke,rt)=>{rt.forEach(it=>{Object.getOwnPropertyNames(it.prototype||it).forEach(et=>{Object.defineProperty(Ke.prototype,et,Object.getOwnPropertyDescriptor(it.prototype||it,et))})})},Ye=new be.OlP("angularfire2.app.options"),ee=new be.OlP("angularfire2.app.nameOrConfig"),Ct=new be.GfV("6.1.5");function On(Ke,rt,it){const _t="object"==typeof it&&it||{};_t.name=_t.name||"string"==typeof it&&it||"[DEFAULT]";const tn=xe.Z.apps.filter(an=>an&&an.name===_t.name)[0]||rt.runOutsideAngular(()=>xe.Z.initializeApp(Ke,_t));try{JSON.stringify(Ke)!==JSON.stringify(tn.options)&&at("error",`${tn.name} Firebase App already initialized with different options${jt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(an){}return tn}const Nt=()=>{at("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},at=(Ke,...rt)=>{(0,be.X6Q)()&&"undefined"!=typeof console&&console[Ke](...rt)};function It(Ke,rt,it,et,_t){const[st,...tn]=globalThis.\u0275AngularfireInstanceCache.get(Ke)||[];if(st){try{_t.some((an,Sn)=>{const on=tn[Sn];return an&&"object"==typeof an?JSON.stringify(an)!==JSON.stringify(on):an!==on})&&at("error",`${rt} was already initialized on the ${it.name} Firebase App instance with different settings.${jt.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(an){}return st}{const an=et();return globalThis.\u0275AngularfireInstanceCache.set(Ke,[an,..._t]),an}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const wn={provide:class{},useFactory:On,deps:[Ye,be.R0b,[new be.FiY,ee]]};let Et=(()=>{class Ke{constructor(it){xe.Z.registerVersion("angularfire",Ct.full,it.toString()),xe.Z.registerVersion("angular",be.q4F.full)}static initializeApp(it,et){return{ngModule:Ke,providers:[{provide:Ye,useValue:it},{provide:ee,useValue:et}]}}}return Ke.\u0275fac=function(it){return new(it||Ke)(be.LFG(be.Lbi))},Ke.\u0275mod=be.oAB({type:Ke}),Ke.\u0275inj=be.cJS({providers:[wn]}),Ke})()},665:(jt,nt,Y)=>{"use strict";Y.d(nt,{Wl:()=>De,Fj:()=>ze,qu:()=>Fe,NI:()=>Ar,u:()=>Lo,cw:()=>ni,sg:()=>Lr,u5:()=>F,a5:()=>Un,JJ:()=>Kn,JL:()=>Tt,F:()=>Qe,On:()=>gr,UX:()=>J,kI:()=>It,_Y:()=>ki});var O=Y(7716),c=Y(8583),K=Y(7574),w=Y(9796),Ue=Y(8002),be=Y(1555),xe=Y(4402);function _e(j,B){return new K.y(L=>{const se=j.length;if(0===se)return void L.complete();const Ze=new Array(se);let Ot=0,En=0;for(let fr=0;fr<se;fr++){const qr=(0,xe.D)(j[fr]);let mr=!1;L.add(qr.subscribe({next:zr=>{mr||(mr=!0,En++),Ze[fr]=zr},error:zr=>L.error(zr),complete:()=>{Ot++,(Ot===se||!mr)&&(En===se&&L.next(B?B.reduce((zr,di,Tn)=>(zr[di]=Ze[Tn],zr),{}):Ze),L.complete())}}))}})}let re=(()=>{class j{constructor(L,se){this._renderer=L,this._elementRef=se,this.onChange=Ze=>{},this.onTouched=()=>{}}setProperty(L,se){this._renderer.setProperty(this._elementRef.nativeElement,L,se)}registerOnTouched(L){this.onTouched=L}registerOnChange(L){this.onChange=L}setDisabledState(L){this.setProperty("disabled",L)}}return j.\u0275fac=function(L){return new(L||j)(O.Y36(O.Qsj),O.Y36(O.SBq))},j.\u0275dir=O.lG2({type:j}),j})(),Ce=(()=>{class j extends re{}return j.\u0275fac=function(){let B;return function(se){return(B||(B=O.n5z(j)))(se||j)}}(),j.\u0275dir=O.lG2({type:j,features:[O.qOj]}),j})();const le=new O.OlP("NgValueAccessor"),pe={provide:le,useExisting:(0,O.Gpc)(()=>De),multi:!0};let De=(()=>{class j extends Ce{writeValue(L){this.setProperty("checked",L)}}return j.\u0275fac=function(){let B;return function(se){return(B||(B=O.n5z(j)))(se||j)}}(),j.\u0275dir=O.lG2({type:j,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(L,se){1&L&&O.NdJ("change",function(Ot){return se.onChange(Ot.target.checked)})("blur",function(){return se.onTouched()})},features:[O._Bn([pe]),O.qOj]}),j})();const Re={provide:le,useExisting:(0,O.Gpc)(()=>ze),multi:!0},ee=new O.OlP("CompositionEventMode");let ze=(()=>{class j extends re{constructor(L,se,Ze){super(L,se),this._compositionMode=Ze,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const j=(0,c.q)()?(0,c.q)().getUserAgent():"";return/android (\d+)/.test(j.toLowerCase())}())}writeValue(L){this.setProperty("value",null==L?"":L)}_handleInput(L){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(L)}_compositionStart(){this._composing=!0}_compositionEnd(L){this._composing=!1,this._compositionMode&&this.onChange(L)}}return j.\u0275fac=function(L){return new(L||j)(O.Y36(O.Qsj),O.Y36(O.SBq),O.Y36(ee,8))},j.\u0275dir=O.lG2({type:j,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(L,se){1&L&&O.NdJ("input",function(Ot){return se._handleInput(Ot.target.value)})("blur",function(){return se.onTouched()})("compositionstart",function(){return se._compositionStart()})("compositionend",function(Ot){return se._compositionEnd(Ot.target.value)})},features:[O._Bn([Re]),O.qOj]}),j})();function Ct(j){return null==j||0===j.length}function On(j){return null!=j&&"number"==typeof j.length}const Nt=new O.OlP("NgValidators"),at=new O.OlP("NgAsyncValidators"),zt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class It{static min(B){return j=B,B=>{if(Ct(B.value)||Ct(j))return null;const L=parseFloat(B.value);return!isNaN(L)&&L<j?{min:{min:j,actual:B.value}}:null};var j}static max(B){return j=B,B=>{if(Ct(B.value)||Ct(j))return null;const L=parseFloat(B.value);return!isNaN(L)&&L>j?{max:{max:j,actual:B.value}}:null};var j}static required(B){return Ct(B.value)?{required:!0}:null}static requiredTrue(B){return!0===B.value?null:{required:!0}}static email(B){return Ct((j=B).value)||zt.test(j.value)?null:{email:!0};var j}static minLength(B){return j=B,B=>Ct(B.value)||!On(B.value)?null:B.value.length<j?{minlength:{requiredLength:j,actualLength:B.value.length}}:null;var j}static maxLength(B){return j=B,B=>On(B.value)&&B.value.length>j?{maxlength:{requiredLength:j,actualLength:B.value.length}}:null;var j}static pattern(B){return function(j){if(!j)return tn;let B,L;return"string"==typeof j?(L="","^"!==j.charAt(0)&&(L+="^"),L+=j,"$"!==j.charAt(j.length-1)&&(L+="$"),B=new RegExp(L)):(L=j.toString(),B=j),se=>{if(Ct(se.value))return null;const Ze=se.value;return B.test(Ze)?null:{pattern:{requiredPattern:L,actualValue:Ze}}}}(B)}static nullValidator(B){return null}static compose(B){return Ht(B)}static composeAsync(B){return Cn(B)}}function tn(j){return null}function an(j){return null!=j}function Sn(j){const B=(0,O.QGY)(j)?(0,xe.D)(j):j;return(0,O.CqO)(B),B}function on(j){let B={};return j.forEach(L=>{B=null!=L?Object.assign(Object.assign({},B),L):B}),0===Object.keys(B).length?null:B}function Bt(j,B){return B.map(L=>L(j))}function Qt(j){return j.map(B=>function(j){return!j.validate}(B)?B:L=>B.validate(L))}function Ht(j){if(!j)return null;const B=j.filter(an);return 0==B.length?null:function(L){return on(Bt(L,B))}}function Fn(j){return null!=j?Ht(Qt(j)):null}function Cn(j){if(!j)return null;const B=j.filter(an);return 0==B.length?null:function(L){return function(...j){if(1===j.length){const B=j[0];if((0,w.k)(B))return _e(B,null);if((0,be.K)(B)&&Object.getPrototypeOf(B)===Object.prototype){const L=Object.keys(B);return _e(L.map(se=>B[se]),L)}}if("function"==typeof j[j.length-1]){const B=j.pop();return _e(j=1===j.length&&(0,w.k)(j[0])?j[0]:j,null).pipe((0,Ue.U)(L=>B(...L)))}return _e(j,null)}(Bt(L,B).map(Sn)).pipe((0,Ue.U)(on))}}function ur(j){return null!=j?Cn(Qt(j)):null}function zn(j,B){return null===j?[B]:Array.isArray(j)?[...j,B]:[j,B]}function Gn(j){return j._rawValidators}function tr(j){return j._rawAsyncValidators}function An(j){return j?Array.isArray(j)?j:[j]:[]}function Mn(j,B){return Array.isArray(j)?j.includes(B):j===B}function Oi(j,B){const L=An(B);return An(j).forEach(Ze=>{Mn(L,Ze)||L.push(Ze)}),L}function mn(j,B){return An(B).filter(L=>!Mn(j,L))}let Jt=(()=>{class j{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(L){this._rawValidators=L||[],this._composedValidatorFn=Fn(this._rawValidators)}_setAsyncValidators(L){this._rawAsyncValidators=L||[],this._composedAsyncValidatorFn=ur(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(L){this._onDestroyCallbacks.push(L)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(L=>L()),this._onDestroyCallbacks=[]}reset(L){this.control&&this.control.reset(L)}hasError(L,se){return!!this.control&&this.control.hasError(L,se)}getError(L,se){return this.control?this.control.getError(L,se):null}}return j.\u0275fac=function(L){return new(L||j)},j.\u0275dir=O.lG2({type:j}),j})(),Zn=(()=>{class j extends Jt{get formDirective(){return null}get path(){return null}}return j.\u0275fac=function(){let B;return function(se){return(B||(B=O.n5z(j)))(se||j)}}(),j.\u0275dir=O.lG2({type:j,features:[O.qOj]}),j})();class Un extends Jt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Kt{constructor(B){this._cd=B}is(B){var L,se,Ze;return"submitted"===B?!!(null===(L=this._cd)||void 0===L?void 0:L.submitted):!!(null===(Ze=null===(se=this._cd)||void 0===se?void 0:se.control)||void 0===Ze?void 0:Ze[B])}}let Kn=(()=>{class j extends Kt{constructor(L){super(L)}}return j.\u0275fac=function(L){return new(L||j)(O.Y36(Un,2))},j.\u0275dir=O.lG2({type:j,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(L,se){2&L&&O.ekj("ng-untouched",se.is("untouched"))("ng-touched",se.is("touched"))("ng-pristine",se.is("pristine"))("ng-dirty",se.is("dirty"))("ng-valid",se.is("valid"))("ng-invalid",se.is("invalid"))("ng-pending",se.is("pending"))},features:[O.qOj]}),j})(),Tt=(()=>{class j extends Kt{constructor(L){super(L)}}return j.\u0275fac=function(L){return new(L||j)(O.Y36(Zn,10))},j.\u0275dir=O.lG2({type:j,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(L,se){2&L&&O.ekj("ng-untouched",se.is("untouched"))("ng-touched",se.is("touched"))("ng-pristine",se.is("pristine"))("ng-dirty",se.is("dirty"))("ng-valid",se.is("valid"))("ng-invalid",se.is("invalid"))("ng-pending",se.is("pending"))("ng-submitted",se.is("submitted"))},features:[O.qOj]}),j})();function fn(j,B){return[...B.path,j]}function Gt(j,B){Je(j,B),B.valueAccessor.writeValue(j.value),function(j,B){B.valueAccessor.registerOnChange(L=>{j._pendingValue=L,j._pendingChange=!0,j._pendingDirty=!0,"change"===j.updateOn&&or(j,B)})}(j,B),function(j,B){const L=(se,Ze)=>{B.valueAccessor.writeValue(se),Ze&&B.viewToModelUpdate(se)};j.registerOnChange(L),B._registerOnDestroy(()=>{j._unregisterOnChange(L)})}(j,B),function(j,B){B.valueAccessor.registerOnTouched(()=>{j._pendingTouched=!0,"blur"===j.updateOn&&j._pendingChange&&or(j,B),"submit"!==j.updateOn&&j.markAsTouched()})}(j,B),function(j,B){if(B.valueAccessor.setDisabledState){const L=se=>{B.valueAccessor.setDisabledState(se)};j.registerOnDisabledChange(L),B._registerOnDestroy(()=>{j._unregisterOnDisabledChange(L)})}}(j,B)}function Se(j,B,L=!0){const se=()=>{};B.valueAccessor&&(B.valueAccessor.registerOnChange(se),B.valueAccessor.registerOnTouched(se)),Xe(j,B),j&&(B._invokeOnDestroyCallbacks(),j._registerOnCollectionChange(()=>{}))}function Ie(j,B){j.forEach(L=>{L.registerOnValidatorChange&&L.registerOnValidatorChange(B)})}function Je(j,B){const L=Gn(j);null!==B.validator?j.setValidators(zn(L,B.validator)):"function"==typeof L&&j.setValidators([L]);const se=tr(j);null!==B.asyncValidator?j.setAsyncValidators(zn(se,B.asyncValidator)):"function"==typeof se&&j.setAsyncValidators([se]);const Ze=()=>j.updateValueAndValidity();Ie(B._rawValidators,Ze),Ie(B._rawAsyncValidators,Ze)}function Xe(j,B){let L=!1;if(null!==j){if(null!==B.validator){const Ze=Gn(j);if(Array.isArray(Ze)&&Ze.length>0){const Ot=Ze.filter(En=>En!==B.validator);Ot.length!==Ze.length&&(L=!0,j.setValidators(Ot))}}if(null!==B.asyncValidator){const Ze=tr(j);if(Array.isArray(Ze)&&Ze.length>0){const Ot=Ze.filter(En=>En!==B.asyncValidator);Ot.length!==Ze.length&&(L=!0,j.setAsyncValidators(Ot))}}}const se=()=>{};return Ie(B._rawValidators,se),Ie(B._rawAsyncValidators,se),L}function or(j,B){j._pendingDirty&&j.markAsDirty(),j.setValue(j._pendingValue,{emitModelToViewChange:!1}),B.viewToModelUpdate(j._pendingValue),j._pendingChange=!1}function Vn(j,B){Je(j,B)}function Dr(j,B){if(!j.hasOwnProperty("model"))return!1;const L=j.model;return!!L.isFirstChange()||!Object.is(B,L.currentValue)}function No(j,B){j._syncPendingControls(),B.forEach(L=>{const se=L.control;"submit"===se.updateOn&&se._pendingChange&&(L.viewToModelUpdate(se._pendingValue),se._pendingChange=!1)})}function Gi(j,B){if(!B)return null;let L,se,Ze;return Array.isArray(B),B.forEach(Ot=>{Ot.constructor===ze?L=Ot:function(j){return Object.getPrototypeOf(j.constructor)===Ce}(Ot)?se=Ot:Ze=Ot}),Ze||se||L||null}function co(j,B){const L=j.indexOf(B);L>-1&&j.splice(L,1)}const Nr="VALID",cr="INVALID",vn="PENDING",Vr="DISABLED";function Sr(j){return(Qr(j)?j.validators:j)||null}function Xt(j){return Array.isArray(j)?Fn(j):j||null}function ln(j,B){return(Qr(B)?B.asyncValidators:j)||null}function In(j){return Array.isArray(j)?ur(j):j||null}function Qr(j){return null!=j&&!Array.isArray(j)&&"object"==typeof j}class Si{constructor(B,L){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=B,this._rawAsyncValidators=L,this._composedValidatorFn=Xt(this._rawValidators),this._composedAsyncValidatorFn=In(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(B){this._rawValidators=this._composedValidatorFn=B}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(B){this._rawAsyncValidators=this._composedAsyncValidatorFn=B}get parent(){return this._parent}get valid(){return this.status===Nr}get invalid(){return this.status===cr}get pending(){return this.status==vn}get disabled(){return this.status===Vr}get enabled(){return this.status!==Vr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(B){this._rawValidators=B,this._composedValidatorFn=Xt(B)}setAsyncValidators(B){this._rawAsyncValidators=B,this._composedAsyncValidatorFn=In(B)}addValidators(B){this.setValidators(Oi(B,this._rawValidators))}addAsyncValidators(B){this.setAsyncValidators(Oi(B,this._rawAsyncValidators))}removeValidators(B){this.setValidators(mn(B,this._rawValidators))}removeAsyncValidators(B){this.setAsyncValidators(mn(B,this._rawAsyncValidators))}hasValidator(B){return Mn(this._rawValidators,B)}hasAsyncValidator(B){return Mn(this._rawAsyncValidators,B)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(B={}){this.touched=!0,this._parent&&!B.onlySelf&&this._parent.markAsTouched(B)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(B=>B.markAllAsTouched())}markAsUntouched(B={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(L=>{L.markAsUntouched({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}markAsDirty(B={}){this.pristine=!1,this._parent&&!B.onlySelf&&this._parent.markAsDirty(B)}markAsPristine(B={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(L=>{L.markAsPristine({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}markAsPending(B={}){this.status=vn,!1!==B.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!B.onlySelf&&this._parent.markAsPending(B)}disable(B={}){const L=this._parentMarkedDirty(B.onlySelf);this.status=Vr,this.errors=null,this._forEachChild(se=>{se.disable(Object.assign(Object.assign({},B),{onlySelf:!0}))}),this._updateValue(),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},B),{skipPristineCheck:L})),this._onDisabledChange.forEach(se=>se(!0))}enable(B={}){const L=this._parentMarkedDirty(B.onlySelf);this.status=Nr,this._forEachChild(se=>{se.enable(Object.assign(Object.assign({},B),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},B),{skipPristineCheck:L})),this._onDisabledChange.forEach(se=>se(!1))}_updateAncestors(B){this._parent&&!B.onlySelf&&(this._parent.updateValueAndValidity(B),B.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(B){this._parent=B}updateValueAndValidity(B={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nr||this.status===vn)&&this._runAsyncValidator(B.emitEvent)),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!B.onlySelf&&this._parent.updateValueAndValidity(B)}_updateTreeValidity(B={emitEvent:!0}){this._forEachChild(L=>L._updateTreeValidity(B)),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vr:Nr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(B){if(this.asyncValidator){this.status=vn,this._hasOwnPendingAsyncValidator=!0;const L=Sn(this.asyncValidator(this));this._asyncValidationSubscription=L.subscribe(se=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(se,{emitEvent:B})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(B,L={}){this.errors=B,this._updateControlsErrors(!1!==L.emitEvent)}get(B){return function(j,B,L){if(null==B||(Array.isArray(B)||(B=B.split(".")),Array.isArray(B)&&0===B.length))return null;let se=j;return B.forEach(Ze=>{se=se instanceof ni?se.controls.hasOwnProperty(Ze)?se.controls[Ze]:null:se instanceof Er&&se.at(Ze)||null}),se}(this,B)}getError(B,L){const se=L?this.get(L):this;return se&&se.errors?se.errors[B]:null}hasError(B,L){return!!this.getError(B,L)}get root(){let B=this;for(;B._parent;)B=B._parent;return B}_updateControlsErrors(B){this.status=this._calculateStatus(),B&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(B)}_initObservables(){this.valueChanges=new O.vpe,this.statusChanges=new O.vpe}_calculateStatus(){return this._allControlsDisabled()?Vr:this.errors?cr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vn)?vn:this._anyControlsHaveStatus(cr)?cr:Nr}_anyControlsHaveStatus(B){return this._anyControls(L=>L.status===B)}_anyControlsDirty(){return this._anyControls(B=>B.dirty)}_anyControlsTouched(){return this._anyControls(B=>B.touched)}_updatePristine(B={}){this.pristine=!this._anyControlsDirty(),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}_updateTouched(B={}){this.touched=this._anyControlsTouched(),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}_isBoxedValue(B){return"object"==typeof B&&null!==B&&2===Object.keys(B).length&&"value"in B&&"disabled"in B}_registerOnCollectionChange(B){this._onCollectionChange=B}_setUpdateStrategy(B){Qr(B)&&null!=B.updateOn&&(this._updateOn=B.updateOn)}_parentMarkedDirty(B){return!B&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ar extends Si{constructor(B=null,L,se){super(Sr(L),ln(se,L)),this._onChange=[],this._applyFormState(B),this._setUpdateStrategy(L),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(B,L={}){this.value=this._pendingValue=B,this._onChange.length&&!1!==L.emitModelToViewChange&&this._onChange.forEach(se=>se(this.value,!1!==L.emitViewToModelChange)),this.updateValueAndValidity(L)}patchValue(B,L={}){this.setValue(B,L)}reset(B=null,L={}){this._applyFormState(B),this.markAsPristine(L),this.markAsUntouched(L),this.setValue(this.value,L),this._pendingChange=!1}_updateValue(){}_anyControls(B){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(B){this._onChange.push(B)}_unregisterOnChange(B){co(this._onChange,B)}registerOnDisabledChange(B){this._onDisabledChange.push(B)}_unregisterOnDisabledChange(B){co(this._onDisabledChange,B)}_forEachChild(B){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(B){this._isBoxedValue(B)?(this.value=this._pendingValue=B.value,B.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=B}}class ni extends Si{constructor(B,L,se){super(Sr(L),ln(se,L)),this.controls=B,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(B,L){return this.controls[B]?this.controls[B]:(this.controls[B]=L,L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange),L)}addControl(B,L,se={}){this.registerControl(B,L),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}removeControl(B,L={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}setControl(B,L,se={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],L&&this.registerControl(B,L),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}contains(B){return this.controls.hasOwnProperty(B)&&this.controls[B].enabled}setValue(B,L={}){this._checkAllValuesPresent(B),Object.keys(B).forEach(se=>{this._throwIfControlMissing(se),this.controls[se].setValue(B[se],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(B,L={}){null!=B&&(Object.keys(B).forEach(se=>{this.controls[se]&&this.controls[se].patchValue(B[se],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(B={},L={}){this._forEachChild((se,Ze)=>{se.reset(B[Ze],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this._reduceChildren({},(B,L,se)=>(B[se]=L instanceof Ar?L.value:L.getRawValue(),B))}_syncPendingControls(){let B=this._reduceChildren(!1,(L,se)=>!!se._syncPendingControls()||L);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_throwIfControlMissing(B){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[B])throw new Error(`Cannot find form control with name: ${B}.`)}_forEachChild(B){Object.keys(this.controls).forEach(L=>{const se=this.controls[L];se&&B(se,L)})}_setUpControls(){this._forEachChild(B=>{B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(B){for(const L of Object.keys(this.controls)){const se=this.controls[L];if(this.contains(L)&&B(se))return!0}return!1}_reduceValue(){return this._reduceChildren({},(B,L,se)=>((L.enabled||this.disabled)&&(B[se]=L.value),B))}_reduceChildren(B,L){let se=B;return this._forEachChild((Ze,Ot)=>{se=L(se,Ze,Ot)}),se}_allControlsDisabled(){for(const B of Object.keys(this.controls))if(this.controls[B].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(B){this._forEachChild((L,se)=>{if(void 0===B[se])throw new Error(`Must supply a value for form control with name: '${se}'.`)})}}class Er extends Si{constructor(B,L,se){super(Sr(L),ln(se,L)),this.controls=B,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(B){return this.controls[B]}push(B,L={}){this.controls.push(B),this._registerControl(B),this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}insert(B,L,se={}){this.controls.splice(B,0,L),this._registerControl(L),this.updateValueAndValidity({emitEvent:se.emitEvent})}removeAt(B,L={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),this.controls.splice(B,1),this.updateValueAndValidity({emitEvent:L.emitEvent})}setControl(B,L,se={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),this.controls.splice(B,1),L&&(this.controls.splice(B,0,L),this._registerControl(L)),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(B,L={}){this._checkAllValuesPresent(B),B.forEach((se,Ze)=>{this._throwIfControlMissing(Ze),this.at(Ze).setValue(se,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(B,L={}){null!=B&&(B.forEach((se,Ze)=>{this.at(Ze)&&this.at(Ze).patchValue(se,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(B=[],L={}){this._forEachChild((se,Ze)=>{se.reset(B[Ze],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this.controls.map(B=>B instanceof Ar?B.value:B.getRawValue())}clear(B={}){this.controls.length<1||(this._forEachChild(L=>L._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:B.emitEvent}))}_syncPendingControls(){let B=this.controls.reduce((L,se)=>!!se._syncPendingControls()||L,!1);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_throwIfControlMissing(B){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(B))throw new Error(`Cannot find form control at index ${B}`)}_forEachChild(B){this.controls.forEach((L,se)=>{B(L,se)})}_updateValue(){this.value=this.controls.filter(B=>B.enabled||this.disabled).map(B=>B.value)}_anyControls(B){return this.controls.some(L=>L.enabled&&B(L))}_setUpControls(){this._forEachChild(B=>this._registerControl(B))}_checkAllValuesPresent(B){this._forEachChild((L,se)=>{if(void 0===B[se])throw new Error(`Must supply a value for form control at index: ${se}.`)})}_allControlsDisabled(){for(const B of this.controls)if(B.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(B){B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)}}const bo={provide:Zn,useExisting:(0,O.Gpc)(()=>Qe)},xn=(()=>Promise.resolve(null))();let Qe=(()=>{class j extends Zn{constructor(L,se){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new O.vpe,this.form=new ni({},Fn(L),ur(se))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(L){xn.then(()=>{const se=this._findContainer(L.path);L.control=se.registerControl(L.name,L.control),Gt(L.control,L),L.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(L)})}getControl(L){return this.form.get(L.path)}removeControl(L){xn.then(()=>{const se=this._findContainer(L.path);se&&se.removeControl(L.name),co(this._directives,L)})}addFormGroup(L){xn.then(()=>{const se=this._findContainer(L.path),Ze=new ni({});Vn(Ze,L),se.registerControl(L.name,Ze),Ze.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(L){xn.then(()=>{const se=this._findContainer(L.path);se&&se.removeControl(L.name)})}getFormGroup(L){return this.form.get(L.path)}updateModel(L,se){xn.then(()=>{this.form.get(L.path).setValue(se)})}setValue(L){this.control.setValue(L)}onSubmit(L){return this.submitted=!0,No(this.form,this._directives),this.ngSubmit.emit(L),!1}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(L){return L.pop(),L.length?this.form.get(L):this.form}}return j.\u0275fac=function(L){return new(L||j)(O.Y36(Nt,10),O.Y36(at,10))},j.\u0275dir=O.lG2({type:j,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(L,se){1&L&&O.NdJ("submit",function(Ot){return se.onSubmit(Ot)})("reset",function(){return se.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[O._Bn([bo]),O.qOj]}),j})();const un={provide:Un,useExisting:(0,O.Gpc)(()=>gr)},Li=(()=>Promise.resolve(null))();let gr=(()=>{class j extends Un{constructor(L,se,Ze,Ot){super(),this.control=new Ar,this._registered=!1,this.update=new O.vpe,this._parent=L,this._setValidators(se),this._setAsyncValidators(Ze),this.valueAccessor=Gi(0,Ot)}ngOnChanges(L){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in L&&this._updateDisabled(L),Dr(L,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?fn(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Gt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(L){Li.then(()=>{this.control.setValue(L,{emitViewToModelChange:!1})})}_updateDisabled(L){const se=L.isDisabled.currentValue,Ze=""===se||se&&"false"!==se;Li.then(()=>{Ze&&!this.control.disabled?this.control.disable():!Ze&&this.control.disabled&&this.control.enable()})}}return j.\u0275fac=function(L){return new(L||j)(O.Y36(Zn,9),O.Y36(Nt,10),O.Y36(at,10),O.Y36(le,10))},j.\u0275dir=O.lG2({type:j,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[O._Bn([un]),O.qOj,O.TTD]}),j})(),ki=(()=>{class j{}return j.\u0275fac=function(L){return new(L||j)},j.\u0275dir=O.lG2({type:j,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),j})(),jn=(()=>{class j{}return j.\u0275fac=function(L){return new(L||j)},j.\u0275mod=O.oAB({type:j}),j.\u0275inj=O.cJS({}),j})();const Vi=new O.OlP("NgModelWithFormControlWarning"),Zo={provide:Zn,useExisting:(0,O.Gpc)(()=>Lr)};let Lr=(()=>{class j extends Zn{constructor(L,se){super(),this.validators=L,this.asyncValidators=se,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new O.vpe,this._setValidators(L),this._setAsyncValidators(se)}ngOnChanges(L){this._checkFormPresent(),L.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(L){const se=this.form.get(L.path);return Gt(se,L),se.updateValueAndValidity({emitEvent:!1}),this.directives.push(L),se}getControl(L){return this.form.get(L.path)}removeControl(L){Se(L.control||null,L,!1),co(this.directives,L)}addFormGroup(L){this._setUpFormContainer(L)}removeFormGroup(L){this._cleanUpFormContainer(L)}getFormGroup(L){return this.form.get(L.path)}addFormArray(L){this._setUpFormContainer(L)}removeFormArray(L){this._cleanUpFormContainer(L)}getFormArray(L){return this.form.get(L.path)}updateModel(L,se){this.form.get(L.path).setValue(se)}onSubmit(L){return this.submitted=!0,No(this.form,this.directives),this.ngSubmit.emit(L),!1}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_updateDomValue(){this.directives.forEach(L=>{const se=L.control,Ze=this.form.get(L.path);se!==Ze&&(Se(se||null,L),Ze instanceof Ar&&(Gt(Ze,L),L.control=Ze))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(L){const se=this.form.get(L.path);Vn(se,L),se.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(L){if(this.form){const se=this.form.get(L.path);se&&function(j,B){return Xe(j,B)}(se,L)&&se.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Je(this.form,this),this._oldForm&&Xe(this._oldForm,this)}_checkFormPresent(){}}return j.\u0275fac=function(L){return new(L||j)(O.Y36(Nt,10),O.Y36(at,10))},j.\u0275dir=O.lG2({type:j,selectors:[["","formGroup",""]],hostBindings:function(L,se){1&L&&O.NdJ("submit",function(Ot){return se.onSubmit(Ot)})("reset",function(){return se.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[O._Bn([Zo]),O.qOj,O.TTD]}),j})();const gs={provide:Un,useExisting:(0,O.Gpc)(()=>Lo)};let Lo=(()=>{class j extends Un{constructor(L,se,Ze,Ot,En){super(),this._ngModelWarningConfig=En,this._added=!1,this.update=new O.vpe,this._ngModelWarningSent=!1,this._parent=L,this._setValidators(se),this._setAsyncValidators(Ze),this.valueAccessor=Gi(0,Ot)}set isDisabled(L){}ngOnChanges(L){this._added||this._setUpControl(),Dr(L,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}get path(){return fn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return j.\u0275fac=function(L){return new(L||j)(O.Y36(Zn,13),O.Y36(Nt,10),O.Y36(at,10),O.Y36(le,10),O.Y36(Vi,8))},j.\u0275dir=O.lG2({type:j,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[O._Bn([gs]),O.qOj,O.TTD]}),j._ngModelWarningSentOnce=!1,j})(),z=(()=>{class j{}return j.\u0275fac=function(L){return new(L||j)},j.\u0275mod=O.oAB({type:j}),j.\u0275inj=O.cJS({imports:[[jn]]}),j})(),F=(()=>{class j{}return j.\u0275fac=function(L){return new(L||j)},j.\u0275mod=O.oAB({type:j}),j.\u0275inj=O.cJS({imports:[z]}),j})(),J=(()=>{class j{static withConfig(L){return{ngModule:j,providers:[{provide:Vi,useValue:L.warnOnNgModelWithFormControl}]}}}return j.\u0275fac=function(L){return new(L||j)},j.\u0275mod=O.oAB({type:j}),j.\u0275inj=O.cJS({imports:[z]}),j})(),Fe=(()=>{class j{group(L,se=null){const Ze=this._reduceControls(L);let fr,Ot=null,En=null;return null!=se&&(function(j){return void 0!==j.asyncValidators||void 0!==j.validators||void 0!==j.updateOn}(se)?(Ot=null!=se.validators?se.validators:null,En=null!=se.asyncValidators?se.asyncValidators:null,fr=null!=se.updateOn?se.updateOn:void 0):(Ot=null!=se.validator?se.validator:null,En=null!=se.asyncValidator?se.asyncValidator:null)),new ni(Ze,{asyncValidators:En,updateOn:fr,validators:Ot})}control(L,se,Ze){return new Ar(L,se,Ze)}array(L,se,Ze){const Ot=L.map(En=>this._createControl(En));return new Er(Ot,se,Ze)}_reduceControls(L){const se={};return Object.keys(L).forEach(Ze=>{se[Ze]=this._createControl(L[Ze])}),se}_createControl(L){return L instanceof Ar||L instanceof ni||L instanceof Er?L:Array.isArray(L)?this.control(L[0],L.length>1?L[1]:null,L.length>2?L[2]:null):this.control(L)}}return j.\u0275fac=function(L){return new(L||j)},j.\u0275prov=(0,O.Yz7)({factory:function(){return new j},token:j,providedIn:J}),j})()},6237:(jt,nt,Y)=>{"use strict";Y.d(nt,{Qb:()=>br,PW:()=>Is});var O=Y(7716),c=Y(9075),K=Y(7238);function w(){return"undefined"!=typeof window&&void 0!==window.document}function Ue(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function be(ie){switch(ie.length){case 0:return new K.ZN;case 1:return ie[0];default:return new K.ZE(ie)}}function xe(ie,A,M,V,oe={},ve={}){const Oe=[],Pe=[];let ut=-1,gt=null;if(V.forEach(qt=>{const Rn=qt.offset,dr=Rn==ut,Ir=dr&&gt||{};Object.keys(qt).forEach($n=>{let Nn=$n,yr=qt[$n];if("offset"!==$n)switch(Nn=A.normalizePropertyName(Nn,Oe),yr){case K.k1:yr=oe[$n];break;case K.l3:yr=ve[$n];break;default:yr=A.normalizeStyleValue($n,Nn,yr,Oe)}Ir[Nn]=yr}),dr||Pe.push(Ir),gt=Ir,ut=Rn}),Oe.length){const qt="\n - ";throw new Error(`Unable to animate due to the following errors:${qt}${Oe.join(qt)}`)}return Pe}function fe(ie,A,M,V){switch(A){case"start":ie.onStart(()=>V(M&&_e(M,"start",ie)));break;case"done":ie.onDone(()=>V(M&&_e(M,"done",ie)));break;case"destroy":ie.onDestroy(()=>V(M&&_e(M,"destroy",ie)))}}function _e(ie,A,M){const V=M.totalTime,ve=re(ie.element,ie.triggerName,ie.fromState,ie.toState,A||ie.phaseName,null==V?ie.totalTime:V,!!M.disabled),Oe=ie._data;return null!=Oe&&(ve._data=Oe),ve}function re(ie,A,M,V,oe="",ve=0,Oe){return{element:ie,triggerName:A,fromState:M,toState:V,phaseName:oe,totalTime:ve,disabled:!!Oe}}function Ce(ie,A,M){let V;return ie instanceof Map?(V=ie.get(A),V||ie.set(A,V=M)):(V=ie[A],V||(V=ie[A]=M)),V}function le(ie){const A=ie.indexOf(":");return[ie.substring(1,A),ie.substr(A+1)]}let pe=(ie,A)=>!1,Re=(ie,A)=>!1,ee=(ie,A,M)=>[];const Ct=Ue();(Ct||"undefined"!=typeof Element)&&(pe=w()?(ie,A)=>{for(;A&&A!==document.documentElement;){if(A===ie)return!0;A=A.parentNode||A.host}return!1}:(ie,A)=>ie.contains(A),Re=(()=>{if(Ct||Element.prototype.matches)return(ie,A)=>ie.matches(A);{const ie=Element.prototype,A=ie.matchesSelector||ie.mozMatchesSelector||ie.msMatchesSelector||ie.oMatchesSelector||ie.webkitMatchesSelector;return A?(M,V)=>A.apply(M,[V]):Re}})(),ee=(ie,A,M)=>{let V=[];if(M){const oe=ie.querySelectorAll(A);for(let ve=0;ve<oe.length;ve++)V.push(oe[ve])}else{const oe=ie.querySelector(A);oe&&V.push(oe)}return V});let Nt=null,at=!1;function zt(ie){Nt||(Nt=("undefined"!=typeof document?document.body:null)||{},at=!!Nt.style&&"WebkitAppearance"in Nt.style);let A=!0;return Nt.style&&!function(ie){return"ebkit"==ie.substring(1,6)}(ie)&&(A=ie in Nt.style,!A&&at&&(A="Webkit"+ie.charAt(0).toUpperCase()+ie.substr(1)in Nt.style)),A}const wn=Re,Et=pe,Ke=ee;function rt(ie){const A={};return Object.keys(ie).forEach(M=>{const V=M.replace(/([a-z])([A-Z])/g,"$1-$2");A[V]=ie[M]}),A}let it=(()=>{class ie{validateStyleProperty(M){return zt(M)}matchesElement(M,V){return wn(M,V)}containsElement(M,V){return Et(M,V)}query(M,V,oe){return Ke(M,V,oe)}computeStyle(M,V,oe){return oe||""}animate(M,V,oe,ve,Oe,Pe=[],ut){return new K.ZN(oe,ve)}}return ie.\u0275fac=function(M){return new(M||ie)},ie.\u0275prov=O.Yz7({token:ie,factory:ie.\u0275fac}),ie})(),et=(()=>{class ie{}return ie.NOOP=new it,ie})();const an="ng-enter",Sn="ng-leave",kt="ng-trigger",Qt=".ng-trigger",Ht="ng-animating",Fn=".ng-animating";function Cn(ie){if("number"==typeof ie)return ie;const A=ie.match(/^(-?[\.\d]+)(m?s)/);return!A||A.length<2?0:ur(parseFloat(A[1]),A[2])}function ur(ie,A){switch(A){case"s":return 1e3*ie;default:return ie}}function zn(ie,A,M){return ie.hasOwnProperty("duration")?ie:function(ie,A,M){let oe,ve=0,Oe="";if("string"==typeof ie){const Pe=ie.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Pe)return A.push(`The provided timing value "${ie}" is invalid.`),{duration:0,delay:0,easing:""};oe=ur(parseFloat(Pe[1]),Pe[2]);const ut=Pe[3];null!=ut&&(ve=ur(parseFloat(ut),Pe[4]));const gt=Pe[5];gt&&(Oe=gt)}else oe=ie;if(!M){let Pe=!1,ut=A.length;oe<0&&(A.push("Duration values below 0 are not allowed for this animation step."),Pe=!0),ve<0&&(A.push("Delay values below 0 are not allowed for this animation step."),Pe=!0),Pe&&A.splice(ut,0,`The provided timing value "${ie}" is invalid.`)}return{duration:oe,delay:ve,easing:Oe}}(ie,A,M)}function tr(ie,A={}){return Object.keys(ie).forEach(M=>{A[M]=ie[M]}),A}function Mn(ie,A,M={}){if(A)for(let V in ie)M[V]=ie[V];else tr(ie,M);return M}function Oi(ie,A,M){return M?A+":"+M+";":""}function mn(ie){let A="";for(let M=0;M<ie.style.length;M++){const V=ie.style.item(M);A+=Oi(0,V,ie.style.getPropertyValue(V))}for(const M in ie.style)ie.style.hasOwnProperty(M)&&!M.startsWith("_")&&(A+=Oi(0,Mt(M),ie.style[M]));ie.setAttribute("style",A)}function Jt(ie,A,M){ie.style&&(Object.keys(A).forEach(V=>{const oe=Ve(V);M&&!M.hasOwnProperty(V)&&(M[V]=ie.style[oe]),ie.style[oe]=A[V]}),Ue()&&mn(ie))}function Zn(ie,A){ie.style&&(Object.keys(A).forEach(M=>{const V=Ve(M);ie.style[V]=""}),Ue()&&mn(ie))}function Un(ie){return Array.isArray(ie)?1==ie.length?ie[0]:(0,K.vP)(ie):ie}const pr=new RegExp("{{\\s*(.+?)\\s*}}","g");function jr(ie){let A=[];if("string"==typeof ie){let M;for(;M=pr.exec(ie);)A.push(M[1]);pr.lastIndex=0}return A}function Kn(ie,A,M){const V=ie.toString(),oe=V.replace(pr,(ve,Oe)=>{let Pe=A[Oe];return A.hasOwnProperty(Oe)||(M.push(`Please provide a value for the animation param ${Oe}`),Pe=""),Pe.toString()});return oe==V?ie:oe}function Tt(ie){const A=[];let M=ie.next();for(;!M.done;)A.push(M.value),M=ie.next();return A}const He=/-+([a-z0-9])/g;function Ve(ie){return ie.replace(He,(...A)=>A[1].toUpperCase())}function Mt(ie){return ie.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Pt(ie,A){return 0===ie||0===A}function nn(ie,A,M){const V=Object.keys(M);if(V.length&&A.length){let ve=A[0],Oe=[];if(V.forEach(Pe=>{ve.hasOwnProperty(Pe)||Oe.push(Pe),ve[Pe]=M[Pe]}),Oe.length)for(var oe=1;oe<A.length;oe++){let Pe=A[oe];Oe.forEach(function(ut){Pe[ut]=Ne(ie,ut)})}}return A}function At(ie,A,M){switch(A.type){case 7:return ie.visitTrigger(A,M);case 0:return ie.visitState(A,M);case 1:return ie.visitTransition(A,M);case 2:return ie.visitSequence(A,M);case 3:return ie.visitGroup(A,M);case 4:return ie.visitAnimate(A,M);case 5:return ie.visitKeyframes(A,M);case 6:return ie.visitStyle(A,M);case 8:return ie.visitReference(A,M);case 9:return ie.visitAnimateChild(A,M);case 10:return ie.visitAnimateRef(A,M);case 11:return ie.visitQuery(A,M);case 12:return ie.visitStagger(A,M);default:throw new Error(`Unable to resolve animation metadata node #${A.type}`)}}function Ne(ie,A){return window.getComputedStyle(ie)[A]}function vt(ie,A){const M=[];return"string"==typeof ie?ie.split(/\s*,\s*/).forEach(V=>function(ie,A,M){if(":"==ie[0]){const ut=function(ie,A){switch(ie){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(M,V)=>parseFloat(V)>parseFloat(M);case":decrement":return(M,V)=>parseFloat(V)<parseFloat(M);default:return A.push(`The transition alias value "${ie}" is not supported`),"* => *"}}(ie,M);if("function"==typeof ut)return void A.push(ut);ie=ut}const V=ie.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==V||V.length<4)return M.push(`The provided transition expression "${ie}" is not supported`),A;const oe=V[1],ve=V[2],Oe=V[3];A.push(Gt(oe,Oe));"<"==ve[0]&&!("*"==oe&&"*"==Oe)&&A.push(Gt(Oe,oe))}(V,M,A)):M.push(ie),M}const cn=new Set(["true","1"]),fn=new Set(["false","0"]);function Gt(ie,A){const M=cn.has(ie)||fn.has(ie),V=cn.has(A)||fn.has(A);return(oe,ve)=>{let Oe="*"==ie||ie==oe,Pe="*"==A||A==ve;return!Oe&&M&&"boolean"==typeof oe&&(Oe=oe?cn.has(ie):fn.has(ie)),!Pe&&V&&"boolean"==typeof ve&&(Pe=ve?cn.has(A):fn.has(A)),Oe&&Pe}}const Ie=new RegExp("s*:selfs*,?","g");function $e(ie,A,M){return new Xe(ie).build(A,M)}class Xe{constructor(A){this._driver=A}build(A,M){const V=new or(M);return this._resetContextStyleTimingState(V),At(this,Un(A),V)}_resetContextStyleTimingState(A){A.currentQuerySelector="",A.collectedStyles={},A.collectedStyles[""]={},A.currentTime=0}visitTrigger(A,M){let V=M.queryCount=0,oe=M.depCount=0;const ve=[],Oe=[];return"@"==A.name.charAt(0)&&M.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),A.definitions.forEach(Pe=>{if(this._resetContextStyleTimingState(M),0==Pe.type){const ut=Pe,gt=ut.name;gt.toString().split(/\s*,\s*/).forEach(qt=>{ut.name=qt,ve.push(this.visitState(ut,M))}),ut.name=gt}else if(1==Pe.type){const ut=this.visitTransition(Pe,M);V+=ut.queryCount,oe+=ut.depCount,Oe.push(ut)}else M.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:A.name,states:ve,transitions:Oe,queryCount:V,depCount:oe,options:null}}visitState(A,M){const V=this.visitStyle(A.styles,M),oe=A.options&&A.options.params||null;if(V.containsDynamicStyles){const ve=new Set,Oe=oe||{};if(V.styles.forEach(Pe=>{if(Vn(Pe)){const ut=Pe;Object.keys(ut).forEach(gt=>{jr(ut[gt]).forEach(qt=>{Oe.hasOwnProperty(qt)||ve.add(qt)})})}}),ve.size){const Pe=Tt(ve.values());M.errors.push(`state("${A.name}", ...) must define default values for all the following style substitutions: ${Pe.join(", ")}`)}}return{type:0,name:A.name,style:V,options:oe?{params:oe}:null}}visitTransition(A,M){M.queryCount=0,M.depCount=0;const V=At(this,Un(A.animation),M);return{type:1,matchers:vt(A.expr,M.errors),animation:V,queryCount:M.queryCount,depCount:M.depCount,options:Hr(A.options)}}visitSequence(A,M){return{type:2,steps:A.steps.map(V=>At(this,V,M)),options:Hr(A.options)}}visitGroup(A,M){const V=M.currentTime;let oe=0;const ve=A.steps.map(Oe=>{M.currentTime=V;const Pe=At(this,Oe,M);return oe=Math.max(oe,M.currentTime),Pe});return M.currentTime=oe,{type:3,steps:ve,options:Hr(A.options)}}visitAnimate(A,M){const V=function(ie,A){let M=null;if(ie.hasOwnProperty("duration"))M=ie;else if("number"==typeof ie)return Xr(zn(ie,A).duration,0,"");const V=ie;if(V.split(/\s+/).some(ve=>"{"==ve.charAt(0)&&"{"==ve.charAt(1))){const ve=Xr(0,0,"");return ve.dynamic=!0,ve.strValue=V,ve}return M=M||zn(V,A),Xr(M.duration,M.delay,M.easing)}(A.timings,M.errors);M.currentAnimateTimings=V;let oe,ve=A.styles?A.styles:(0,K.oB)({});if(5==ve.type)oe=this.visitKeyframes(ve,M);else{let Oe=A.styles,Pe=!1;if(!Oe){Pe=!0;const gt={};V.easing&&(gt.easing=V.easing),Oe=(0,K.oB)(gt)}M.currentTime+=V.duration+V.delay;const ut=this.visitStyle(Oe,M);ut.isEmptyStep=Pe,oe=ut}return M.currentAnimateTimings=null,{type:4,timings:V,style:oe,options:null}}visitStyle(A,M){const V=this._makeStyleAst(A,M);return this._validateStyleAst(V,M),V}_makeStyleAst(A,M){const V=[];Array.isArray(A.styles)?A.styles.forEach(Oe=>{"string"==typeof Oe?Oe==K.l3?V.push(Oe):M.errors.push(`The provided style string value ${Oe} is not allowed.`):V.push(Oe)}):V.push(A.styles);let oe=!1,ve=null;return V.forEach(Oe=>{if(Vn(Oe)){const Pe=Oe,ut=Pe.easing;if(ut&&(ve=ut,delete Pe.easing),!oe)for(let gt in Pe)if(Pe[gt].toString().indexOf("{{")>=0){oe=!0;break}}}),{type:6,styles:V,easing:ve,offset:A.offset,containsDynamicStyles:oe,options:null}}_validateStyleAst(A,M){const V=M.currentAnimateTimings;let oe=M.currentTime,ve=M.currentTime;V&&ve>0&&(ve-=V.duration+V.delay),A.styles.forEach(Oe=>{"string"!=typeof Oe&&Object.keys(Oe).forEach(Pe=>{if(!this._driver.validateStyleProperty(Pe))return void M.errors.push(`The provided animation property "${Pe}" is not a supported CSS property for animations`);const ut=M.collectedStyles[M.currentQuerySelector],gt=ut[Pe];let qt=!0;gt&&(ve!=oe&&ve>=gt.startTime&&oe<=gt.endTime&&(M.errors.push(`The CSS property "${Pe}" that exists between the times of "${gt.startTime}ms" and "${gt.endTime}ms" is also being animated in a parallel animation between the times of "${ve}ms" and "${oe}ms"`),qt=!1),ve=gt.startTime),qt&&(ut[Pe]={startTime:ve,endTime:oe}),M.options&&function(ie,A,M){const V=A.params||{},oe=jr(ie);oe.length&&oe.forEach(ve=>{V.hasOwnProperty(ve)||M.push(`Unable to resolve the local animation param ${ve} in the given list of values`)})}(Oe[Pe],M.options,M.errors)})})}visitKeyframes(A,M){const V={type:5,styles:[],options:null};if(!M.currentAnimateTimings)return M.errors.push("keyframes() must be placed inside of a call to animate()"),V;let ve=0;const Oe=[];let Pe=!1,ut=!1,gt=0;const qt=A.steps.map(hi=>{const Br=this._makeStyleAst(hi,M);let io=null!=Br.offset?Br.offset:function(ie){if("string"==typeof ie)return null;let A=null;if(Array.isArray(ie))ie.forEach(M=>{if(Vn(M)&&M.hasOwnProperty("offset")){const V=M;A=parseFloat(V.offset),delete V.offset}});else if(Vn(ie)&&ie.hasOwnProperty("offset")){const M=ie;A=parseFloat(M.offset),delete M.offset}return A}(Br.styles),fi=0;return null!=io&&(ve++,fi=Br.offset=io),ut=ut||fi<0||fi>1,Pe=Pe||fi<gt,gt=fi,Oe.push(fi),Br});ut&&M.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),Pe&&M.errors.push("Please ensure that all keyframe offsets are in order");const Rn=A.steps.length;let dr=0;ve>0&&ve<Rn?M.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==ve&&(dr=1/(Rn-1));const Ir=Rn-1,$n=M.currentTime,Nn=M.currentAnimateTimings,yr=Nn.duration;return qt.forEach((hi,Br)=>{const io=dr>0?Br==Ir?1:dr*Br:Oe[Br],fi=io*yr;M.currentTime=$n+Nn.delay+fi,Nn.duration=fi,this._validateStyleAst(hi,M),hi.offset=io,V.styles.push(hi)}),V}visitReference(A,M){return{type:8,animation:At(this,Un(A.animation),M),options:Hr(A.options)}}visitAnimateChild(A,M){return M.depCount++,{type:9,options:Hr(A.options)}}visitAnimateRef(A,M){return{type:10,animation:this.visitReference(A.animation,M),options:Hr(A.options)}}visitQuery(A,M){const V=M.currentQuerySelector,oe=A.options||{};M.queryCount++,M.currentQuery=A;const[ve,Oe]=function(ie){const A=!!ie.split(/\s*,\s*/).find(M=>":self"==M);return A&&(ie=ie.replace(Ie,"")),[ie=ie.replace(/@\*/g,Qt).replace(/@\w+/g,M=>Qt+"-"+M.substr(1)).replace(/:animating/g,Fn),A]}(A.selector);M.currentQuerySelector=V.length?V+" "+ve:ve,Ce(M.collectedStyles,M.currentQuerySelector,{});const Pe=At(this,Un(A.animation),M);return M.currentQuery=null,M.currentQuerySelector=V,{type:11,selector:ve,limit:oe.limit||0,optional:!!oe.optional,includeSelf:Oe,animation:Pe,originalSelector:A.selector,options:Hr(A.options)}}visitStagger(A,M){M.currentQuery||M.errors.push("stagger() can only be used inside of query()");const V="full"===A.timings?{duration:0,delay:0,easing:"full"}:zn(A.timings,M.errors,!0);return{type:12,animation:At(this,Un(A.animation),M),timings:V,options:null}}}class or{constructor(A){this.errors=A,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Vn(ie){return!Array.isArray(ie)&&"object"==typeof ie}function Hr(ie){return ie?(ie=tr(ie)).params&&(ie.params=function(ie){return ie?tr(ie):null}(ie.params)):ie={},ie}function Xr(ie,A,M){return{duration:ie,delay:A,easing:M}}function Dr(ie,A,M,V,oe,ve,Oe=null,Pe=!1){return{type:1,element:ie,keyframes:A,preStyleProps:M,postStyleProps:V,duration:oe,delay:ve,totalTime:oe+ve,easing:Oe,subTimeline:Pe}}class Ri{constructor(){this._map=new Map}consume(A){let M=this._map.get(A);return M?this._map.delete(A):M=[],M}append(A,M){let V=this._map.get(A);V||this._map.set(A,V=[]),V.push(...M)}has(A){return this._map.has(A)}clear(){this._map.clear()}}const co=new RegExp(":enter","g"),Nr=new RegExp(":leave","g");function cr(ie,A,M,V,oe,ve={},Oe={},Pe,ut,gt=[]){return(new vn).buildKeyframes(ie,A,M,V,oe,ve,Oe,Pe,ut,gt)}class vn{buildKeyframes(A,M,V,oe,ve,Oe,Pe,ut,gt,qt=[]){gt=gt||new Ri;const Rn=new oo(A,M,gt,oe,ve,qt,[]);Rn.options=ut,Rn.currentTimeline.setStyles([Oe],null,Rn.errors,ut),At(this,V,Rn);const dr=Rn.timelines.filter(Ir=>Ir.containsAnimation());if(dr.length&&Object.keys(Pe).length){const Ir=dr[dr.length-1];Ir.allowOnlyTimelineStyles()||Ir.setStyles([Pe],null,Rn.errors,ut)}return dr.length?dr.map(Ir=>Ir.buildKeyframes()):[Dr(M,[],[],[],0,0,"",!1)]}visitTrigger(A,M){}visitState(A,M){}visitTransition(A,M){}visitAnimateChild(A,M){const V=M.subInstructions.consume(M.element);if(V){const oe=M.createSubContext(A.options),ve=M.currentTimeline.currentTime,Oe=this._visitSubInstructions(V,oe,oe.options);ve!=Oe&&M.transformIntoNewTimeline(Oe)}M.previousNode=A}visitAnimateRef(A,M){const V=M.createSubContext(A.options);V.transformIntoNewTimeline(),this.visitReference(A.animation,V),M.transformIntoNewTimeline(V.currentTimeline.currentTime),M.previousNode=A}_visitSubInstructions(A,M,V){let ve=M.currentTimeline.currentTime;const Oe=null!=V.duration?Cn(V.duration):null,Pe=null!=V.delay?Cn(V.delay):null;return 0!==Oe&&A.forEach(ut=>{const gt=M.appendInstructionToTimeline(ut,Oe,Pe);ve=Math.max(ve,gt.duration+gt.delay)}),ve}visitReference(A,M){M.updateOptions(A.options,!0),At(this,A.animation,M),M.previousNode=A}visitSequence(A,M){const V=M.subContextCount;let oe=M;const ve=A.options;if(ve&&(ve.params||ve.delay)&&(oe=M.createSubContext(ve),oe.transformIntoNewTimeline(),null!=ve.delay)){6==oe.previousNode.type&&(oe.currentTimeline.snapshotCurrentStyles(),oe.previousNode=Vr);const Oe=Cn(ve.delay);oe.delayNextStep(Oe)}A.steps.length&&(A.steps.forEach(Oe=>At(this,Oe,oe)),oe.currentTimeline.applyStylesToKeyframe(),oe.subContextCount>V&&oe.transformIntoNewTimeline()),M.previousNode=A}visitGroup(A,M){const V=[];let oe=M.currentTimeline.currentTime;const ve=A.options&&A.options.delay?Cn(A.options.delay):0;A.steps.forEach(Oe=>{const Pe=M.createSubContext(A.options);ve&&Pe.delayNextStep(ve),At(this,Oe,Pe),oe=Math.max(oe,Pe.currentTimeline.currentTime),V.push(Pe.currentTimeline)}),V.forEach(Oe=>M.currentTimeline.mergeTimelineCollectedStyles(Oe)),M.transformIntoNewTimeline(oe),M.previousNode=A}_visitTiming(A,M){if(A.dynamic){const V=A.strValue;return zn(M.params?Kn(V,M.params,M.errors):V,M.errors)}return{duration:A.duration,delay:A.delay,easing:A.easing}}visitAnimate(A,M){const V=M.currentAnimateTimings=this._visitTiming(A.timings,M),oe=M.currentTimeline;V.delay&&(M.incrementTime(V.delay),oe.snapshotCurrentStyles());const ve=A.style;5==ve.type?this.visitKeyframes(ve,M):(M.incrementTime(V.duration),this.visitStyle(ve,M),oe.applyStylesToKeyframe()),M.currentAnimateTimings=null,M.previousNode=A}visitStyle(A,M){const V=M.currentTimeline,oe=M.currentAnimateTimings;!oe&&V.getCurrentStyleProperties().length&&V.forwardFrame();const ve=oe&&oe.easing||A.easing;A.isEmptyStep?V.applyEmptyStep(ve):V.setStyles(A.styles,ve,M.errors,M.options),M.previousNode=A}visitKeyframes(A,M){const V=M.currentAnimateTimings,oe=M.currentTimeline.duration,ve=V.duration,Pe=M.createSubContext().currentTimeline;Pe.easing=V.easing,A.styles.forEach(ut=>{Pe.forwardTime((ut.offset||0)*ve),Pe.setStyles(ut.styles,ut.easing,M.errors,M.options),Pe.applyStylesToKeyframe()}),M.currentTimeline.mergeTimelineCollectedStyles(Pe),M.transformIntoNewTimeline(oe+ve),M.previousNode=A}visitQuery(A,M){const V=M.currentTimeline.currentTime,oe=A.options||{},ve=oe.delay?Cn(oe.delay):0;ve&&(6===M.previousNode.type||0==V&&M.currentTimeline.getCurrentStyleProperties().length)&&(M.currentTimeline.snapshotCurrentStyles(),M.previousNode=Vr);let Oe=V;const Pe=M.invokeQuery(A.selector,A.originalSelector,A.limit,A.includeSelf,!!oe.optional,M.errors);M.currentQueryTotal=Pe.length;let ut=null;Pe.forEach((gt,qt)=>{M.currentQueryIndex=qt;const Rn=M.createSubContext(A.options,gt);ve&&Rn.delayNextStep(ve),gt===M.element&&(ut=Rn.currentTimeline),At(this,A.animation,Rn),Rn.currentTimeline.applyStylesToKeyframe(),Oe=Math.max(Oe,Rn.currentTimeline.currentTime)}),M.currentQueryIndex=0,M.currentQueryTotal=0,M.transformIntoNewTimeline(Oe),ut&&(M.currentTimeline.mergeTimelineCollectedStyles(ut),M.currentTimeline.snapshotCurrentStyles()),M.previousNode=A}visitStagger(A,M){const V=M.parentContext,oe=M.currentTimeline,ve=A.timings,Oe=Math.abs(ve.duration),Pe=Oe*(M.currentQueryTotal-1);let ut=Oe*M.currentQueryIndex;switch(ve.duration<0?"reverse":ve.easing){case"reverse":ut=Pe-ut;break;case"full":ut=V.currentStaggerTime}const qt=M.currentTimeline;ut&&qt.delayNextStep(ut);const Rn=qt.currentTime;At(this,A.animation,M),M.previousNode=A,V.currentStaggerTime=oe.currentTime-Rn+(oe.startTime-V.currentTimeline.startTime)}}const Vr={};class oo{constructor(A,M,V,oe,ve,Oe,Pe,ut){this._driver=A,this.element=M,this.subInstructions=V,this._enterClassName=oe,this._leaveClassName=ve,this.errors=Oe,this.timelines=Pe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Vr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ut||new Sr(this._driver,M,0),Pe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(A,M){if(!A)return;const V=A;let oe=this.options;null!=V.duration&&(oe.duration=Cn(V.duration)),null!=V.delay&&(oe.delay=Cn(V.delay));const ve=V.params;if(ve){let Oe=oe.params;Oe||(Oe=this.options.params={}),Object.keys(ve).forEach(Pe=>{(!M||!Oe.hasOwnProperty(Pe))&&(Oe[Pe]=Kn(ve[Pe],Oe,this.errors))})}}_copyOptions(){const A={};if(this.options){const M=this.options.params;if(M){const V=A.params={};Object.keys(M).forEach(oe=>{V[oe]=M[oe]})}}return A}createSubContext(A=null,M,V){const oe=M||this.element,ve=new oo(this._driver,oe,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(oe,V||0));return ve.previousNode=this.previousNode,ve.currentAnimateTimings=this.currentAnimateTimings,ve.options=this._copyOptions(),ve.updateOptions(A),ve.currentQueryIndex=this.currentQueryIndex,ve.currentQueryTotal=this.currentQueryTotal,ve.parentContext=this,this.subContextCount++,ve}transformIntoNewTimeline(A){return this.previousNode=Vr,this.currentTimeline=this.currentTimeline.fork(this.element,A),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(A,M,V){const oe={duration:null!=M?M:A.duration,delay:this.currentTimeline.currentTime+(null!=V?V:0)+A.delay,easing:""},ve=new Xt(this._driver,A.element,A.keyframes,A.preStyleProps,A.postStyleProps,oe,A.stretchStartingKeyframe);return this.timelines.push(ve),oe}incrementTime(A){this.currentTimeline.forwardTime(this.currentTimeline.duration+A)}delayNextStep(A){A>0&&this.currentTimeline.delayNextStep(A)}invokeQuery(A,M,V,oe,ve,Oe){let Pe=[];if(oe&&Pe.push(this.element),A.length>0){A=(A=A.replace(co,"."+this._enterClassName)).replace(Nr,"."+this._leaveClassName);let gt=this._driver.query(this.element,A,1!=V);0!==V&&(gt=V<0?gt.slice(gt.length+V,gt.length):gt.slice(0,V)),Pe.push(...gt)}return!ve&&0==Pe.length&&Oe.push(`\`query("${M}")\` returned zero elements. (Use \`query("${M}", { optional: true })\` if you wish to allow this.)`),Pe}}class Sr{constructor(A,M,V,oe){this._driver=A,this.element=M,this.startTime=V,this._elementTimelineStylesLookup=oe,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(M),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(M,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(A){const M=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||M?(this.forwardTime(this.currentTime+A),M&&this.snapshotCurrentStyles()):this.startTime+=A}fork(A,M){return this.applyStylesToKeyframe(),new Sr(this._driver,A,M||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(A){this.applyStylesToKeyframe(),this.duration=A,this._loadKeyframe()}_updateStyle(A,M){this._localTimelineStyles[A]=M,this._globalTimelineStyles[A]=M,this._styleSummary[A]={time:this.currentTime,value:M}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(A){A&&(this._previousKeyframe.easing=A),Object.keys(this._globalTimelineStyles).forEach(M=>{this._backFill[M]=this._globalTimelineStyles[M]||K.l3,this._currentKeyframe[M]=K.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(A,M,V,oe){M&&(this._previousKeyframe.easing=M);const ve=oe&&oe.params||{},Oe=function(ie,A){const M={};let V;return ie.forEach(oe=>{"*"===oe?(V=V||Object.keys(A),V.forEach(ve=>{M[ve]=K.l3})):Mn(oe,!1,M)}),M}(A,this._globalTimelineStyles);Object.keys(Oe).forEach(Pe=>{const ut=Kn(Oe[Pe],ve,V);this._pendingStyles[Pe]=ut,this._localTimelineStyles.hasOwnProperty(Pe)||(this._backFill[Pe]=this._globalTimelineStyles.hasOwnProperty(Pe)?this._globalTimelineStyles[Pe]:K.l3),this._updateStyle(Pe,ut)})}applyStylesToKeyframe(){const A=this._pendingStyles,M=Object.keys(A);0!=M.length&&(this._pendingStyles={},M.forEach(V=>{this._currentKeyframe[V]=A[V]}),Object.keys(this._localTimelineStyles).forEach(V=>{this._currentKeyframe.hasOwnProperty(V)||(this._currentKeyframe[V]=this._localTimelineStyles[V])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(A=>{const M=this._localTimelineStyles[A];this._pendingStyles[A]=M,this._updateStyle(A,M)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const A=[];for(let M in this._currentKeyframe)A.push(M);return A}mergeTimelineCollectedStyles(A){Object.keys(A._styleSummary).forEach(M=>{const V=this._styleSummary[M],oe=A._styleSummary[M];(!V||oe.time>V.time)&&this._updateStyle(M,oe.value)})}buildKeyframes(){this.applyStylesToKeyframe();const A=new Set,M=new Set,V=1===this._keyframes.size&&0===this.duration;let oe=[];this._keyframes.forEach((Pe,ut)=>{const gt=Mn(Pe,!0);Object.keys(gt).forEach(qt=>{const Rn=gt[qt];Rn==K.k1?A.add(qt):Rn==K.l3&&M.add(qt)}),V||(gt.offset=ut/this.duration),oe.push(gt)});const ve=A.size?Tt(A.values()):[],Oe=M.size?Tt(M.values()):[];if(V){const Pe=oe[0],ut=tr(Pe);Pe.offset=0,ut.offset=1,oe=[Pe,ut]}return Dr(this.element,oe,ve,Oe,this.duration,this.startTime,this.easing,!1)}}class Xt extends Sr{constructor(A,M,V,oe,ve,Oe,Pe=!1){super(A,M,Oe.delay),this.keyframes=V,this.preStyleProps=oe,this.postStyleProps=ve,this._stretchStartingKeyframe=Pe,this.timings={duration:Oe.duration,delay:Oe.delay,easing:Oe.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let A=this.keyframes,{delay:M,duration:V,easing:oe}=this.timings;if(this._stretchStartingKeyframe&&M){const ve=[],Oe=V+M,Pe=M/Oe,ut=Mn(A[0],!1);ut.offset=0,ve.push(ut);const gt=Mn(A[0],!1);gt.offset=ln(Pe),ve.push(gt);const qt=A.length-1;for(let Rn=1;Rn<=qt;Rn++){let dr=Mn(A[Rn],!1);dr.offset=ln((M+dr.offset*V)/Oe),ve.push(dr)}V=Oe,M=0,oe="",A=ve}return Dr(this.element,A,this.preStyleProps,this.postStyleProps,V,M,oe,!0)}}function ln(ie,A=3){const M=Math.pow(10,A-1);return Math.round(ie*M)/M}class Si{}class ni extends Si{normalizePropertyName(A,M){return Ve(A)}normalizeStyleValue(A,M,V,oe){let ve="";const Oe=V.toString().trim();if(bo[M]&&0!==V&&"0"!==V)if("number"==typeof V)ve="px";else{const Pe=V.match(/^[+-]?[\d\.]+([a-z]*)$/);Pe&&0==Pe[1].length&&oe.push(`Please provide a CSS unit value for ${A}:${V}`)}return Oe+ve}}const bo=(()=>function(ie){const A={};return ie.forEach(M=>A[M]=!0),A}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function xn(ie,A,M,V,oe,ve,Oe,Pe,ut,gt,qt,Rn,dr){return{type:0,element:ie,triggerName:A,isRemovalTransition:oe,fromState:M,fromStyles:ve,toState:V,toStyles:Oe,timelines:Pe,queriedElements:ut,preStyleProps:gt,postStyleProps:qt,totalTime:Rn,errors:dr}}const Qe={};class Be{constructor(A,M,V){this._triggerName=A,this.ast=M,this._stateStyles=V}match(A,M,V,oe){return function(ie,A,M,V,oe){return ie.some(ve=>ve(A,M,V,oe))}(this.ast.matchers,A,M,V,oe)}buildStyles(A,M,V){const oe=this._stateStyles["*"],ve=this._stateStyles[A],Oe=oe?oe.buildStyles(M,V):{};return ve?ve.buildStyles(M,V):Oe}build(A,M,V,oe,ve,Oe,Pe,ut,gt,qt){const Rn=[],dr=this.ast.options&&this.ast.options.params||Qe,$n=this.buildStyles(V,Pe&&Pe.params||Qe,Rn),Nn=ut&&ut.params||Qe,yr=this.buildStyles(oe,Nn,Rn),hi=new Set,Br=new Map,io=new Map,fi="void"===oe,Po={params:Object.assign(Object.assign({},dr),Nn)},To=qt?[]:cr(A,M,this.ast.animation,ve,Oe,$n,yr,Po,gt,Rn);let pi=0;if(To.forEach($o=>{pi=Math.max($o.duration+$o.delay,pi)}),Rn.length)return xn(M,this._triggerName,V,oe,fi,$n,yr,[],[],Br,io,pi,Rn);To.forEach($o=>{const ji=$o.element,pa=Ce(Br,ji,{});$o.preStyleProps.forEach(gi=>pa[gi]=!0);const ga=Ce(io,ji,{});$o.postStyleProps.forEach(gi=>ga[gi]=!0),ji!==M&&hi.add(ji)});const Ro=Tt(hi.values());return xn(M,this._triggerName,V,oe,fi,$n,yr,To,Ro,Br,io,pi)}}class ot{constructor(A,M,V){this.styles=A,this.defaultParams=M,this.normalizer=V}buildStyles(A,M){const V={},oe=tr(this.defaultParams);return Object.keys(A).forEach(ve=>{const Oe=A[ve];null!=Oe&&(oe[ve]=Oe)}),this.styles.styles.forEach(ve=>{if("string"!=typeof ve){const Oe=ve;Object.keys(Oe).forEach(Pe=>{let ut=Oe[Pe];ut.length>1&&(ut=Kn(ut,oe,M));const gt=this.normalizer.normalizePropertyName(Pe,M);ut=this.normalizer.normalizeStyleValue(Pe,gt,ut,M),V[gt]=ut})}}),V}}class pn{constructor(A,M,V){this.name=A,this.ast=M,this._normalizer=V,this.transitionFactories=[],this.states={},M.states.forEach(oe=>{this.states[oe.name]=new ot(oe.style,oe.options&&oe.options.params||{},V)}),gn(this.states,"true","1"),gn(this.states,"false","0"),M.transitions.forEach(oe=>{this.transitionFactories.push(new Be(A,oe,this.states))}),this.fallbackTransition=function(ie,A,M){return new Be(ie,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Oe,Pe)=>!0],options:null,queryCount:0,depCount:0},A)}(A,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(A,M,V,oe){return this.transitionFactories.find(Oe=>Oe.match(A,M,V,oe))||null}matchStyles(A,M,V){return this.fallbackTransition.buildStyles(A,M,V)}}function gn(ie,A,M){ie.hasOwnProperty(A)?ie.hasOwnProperty(M)||(ie[M]=ie[A]):ie.hasOwnProperty(M)&&(ie[A]=ie[M])}const un=new Ri;class Jn{constructor(A,M,V){this.bodyNode=A,this._driver=M,this._normalizer=V,this._animations={},this._playersById={},this.players=[]}register(A,M){const V=[],oe=$e(this._driver,M,V);if(V.length)throw new Error(`Unable to build the animation due to the following errors: ${V.join("\n")}`);this._animations[A]=oe}_buildPlayer(A,M,V){const oe=A.element,ve=xe(0,this._normalizer,0,A.keyframes,M,V);return this._driver.animate(oe,ve,A.duration,A.delay,A.easing,[],!0)}create(A,M,V={}){const oe=[],ve=this._animations[A];let Oe;const Pe=new Map;if(ve?(Oe=cr(this._driver,M,ve,an,Sn,{},{},V,un,oe),Oe.forEach(qt=>{const Rn=Ce(Pe,qt.element,{});qt.postStyleProps.forEach(dr=>Rn[dr]=null)})):(oe.push("The requested animation doesn't exist or has already been destroyed"),Oe=[]),oe.length)throw new Error(`Unable to create the animation due to the following errors: ${oe.join("\n")}`);Pe.forEach((qt,Rn)=>{Object.keys(qt).forEach(dr=>{qt[dr]=this._driver.computeStyle(Rn,dr,K.l3)})});const gt=be(Oe.map(qt=>{const Rn=Pe.get(qt.element);return this._buildPlayer(qt,{},Rn)}));return this._playersById[A]=gt,gt.onDestroy(()=>this.destroy(A)),this.players.push(gt),gt}destroy(A){const M=this._getPlayer(A);M.destroy(),delete this._playersById[A];const V=this.players.indexOf(M);V>=0&&this.players.splice(V,1)}_getPlayer(A){const M=this._playersById[A];if(!M)throw new Error(`Unable to find the timeline player referenced by ${A}`);return M}listen(A,M,V,oe){const ve=re(M,"","","");return fe(this._getPlayer(A),V,ve,oe),()=>{}}command(A,M,V,oe){if("register"==V)return void this.register(A,oe[0]);if("create"==V)return void this.create(A,M,oe[0]||{});const ve=this._getPlayer(A);switch(V){case"play":ve.play();break;case"pause":ve.pause();break;case"reset":ve.reset();break;case"restart":ve.restart();break;case"finish":ve.finish();break;case"init":ve.init();break;case"setPosition":ve.setPosition(parseFloat(oe[0]));break;case"destroy":this.destroy(A)}}}const Li="ng-animate-queued",ki="ng-animate-disabled",eo=".ng-animate-disabled",sr=[],jn={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Yr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Mr="__ng_removed";class Ui{constructor(A,M=""){this.namespaceId=M;const V=A&&A.hasOwnProperty("value");if(this.value=null!=(ie=V?A.value:A)?ie:null,V){const ve=tr(A);delete ve.value,this.options=ve}else this.options={};var ie;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(A){const M=A.params;if(M){const V=this.options.params;Object.keys(M).forEach(oe=>{null==V[oe]&&(V[oe]=M[oe])})}}}const ri="void",Vi=new Ui(ri);class Zi{constructor(A,M,V){this.id=A,this.hostElement=M,this._engine=V,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+A,li(M,this._hostClassName)}listen(A,M,V,oe){if(!this._triggers.hasOwnProperty(M))throw new Error(`Unable to listen on the animation trigger event "${V}" because the animation trigger "${M}" doesn't exist!`);if(null==V||0==V.length)throw new Error(`Unable to listen on the animation trigger "${M}" because the provided event is undefined!`);if("start"!=(ie=V)&&"done"!=ie)throw new Error(`The provided animation trigger event "${V}" for the animation trigger "${M}" is not supported!`);var ie;const ve=Ce(this._elementListeners,A,[]),Oe={name:M,phase:V,callback:oe};ve.push(Oe);const Pe=Ce(this._engine.statesByElement,A,{});return Pe.hasOwnProperty(M)||(li(A,kt),li(A,kt+"-"+M),Pe[M]=Vi),()=>{this._engine.afterFlush(()=>{const ut=ve.indexOf(Oe);ut>=0&&ve.splice(ut,1),this._triggers[M]||delete Pe[M]})}}register(A,M){return!this._triggers[A]&&(this._triggers[A]=M,!0)}_getTrigger(A){const M=this._triggers[A];if(!M)throw new Error(`The provided animation trigger "${A}" has not been registered!`);return M}trigger(A,M,V,oe=!0){const ve=this._getTrigger(M),Oe=new Zo(this.id,M,A);let Pe=this._engine.statesByElement.get(A);Pe||(li(A,kt),li(A,kt+"-"+M),this._engine.statesByElement.set(A,Pe={}));let ut=Pe[M];const gt=new Ui(V,this.id);if(!(V&&V.hasOwnProperty("value"))&&ut&&gt.absorbOptions(ut.options),Pe[M]=gt,ut||(ut=Vi),gt.value!==ri&&ut.value===gt.value){if(!function(ie,A){const M=Object.keys(ie),V=Object.keys(A);if(M.length!=V.length)return!1;for(let oe=0;oe<M.length;oe++){const ve=M[oe];if(!A.hasOwnProperty(ve)||ie[ve]!==A[ve])return!1}return!0}(ut.params,gt.params)){const Nn=[],yr=ve.matchStyles(ut.value,ut.params,Nn),hi=ve.matchStyles(gt.value,gt.params,Nn);Nn.length?this._engine.reportError(Nn):this._engine.afterFlush(()=>{Zn(A,yr),Jt(A,hi)})}return}const dr=Ce(this._engine.playersByElement,A,[]);dr.forEach(Nn=>{Nn.namespaceId==this.id&&Nn.triggerName==M&&Nn.queued&&Nn.destroy()});let Ir=ve.matchTransition(ut.value,gt.value,A,gt.params),$n=!1;if(!Ir){if(!oe)return;Ir=ve.fallbackTransition,$n=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:A,triggerName:M,transition:Ir,fromState:ut,toState:gt,player:Oe,isFallbackTransition:$n}),$n||(li(A,Li),Oe.onStart(()=>{ci(A,Li)})),Oe.onDone(()=>{let Nn=this.players.indexOf(Oe);Nn>=0&&this.players.splice(Nn,1);const yr=this._engine.playersByElement.get(A);if(yr){let hi=yr.indexOf(Oe);hi>=0&&yr.splice(hi,1)}}),this.players.push(Oe),dr.push(Oe),Oe}deregister(A){delete this._triggers[A],this._engine.statesByElement.forEach((M,V)=>{delete M[A]}),this._elementListeners.forEach((M,V)=>{this._elementListeners.set(V,M.filter(oe=>oe.name!=A))})}clearElementCache(A){this._engine.statesByElement.delete(A),this._elementListeners.delete(A);const M=this._engine.playersByElement.get(A);M&&(M.forEach(V=>V.destroy()),this._engine.playersByElement.delete(A))}_signalRemovalForInnerTriggers(A,M){const V=this._engine.driver.query(A,Qt,!0);V.forEach(oe=>{if(oe[Mr])return;const ve=this._engine.fetchNamespacesByElement(oe);ve.size?ve.forEach(Oe=>Oe.triggerLeaveAnimation(oe,M,!1,!0)):this.clearElementCache(oe)}),this._engine.afterFlushAnimationsDone(()=>V.forEach(oe=>this.clearElementCache(oe)))}triggerLeaveAnimation(A,M,V,oe){const ve=this._engine.statesByElement.get(A);if(ve){const Oe=[];if(Object.keys(ve).forEach(Pe=>{if(this._triggers[Pe]){const ut=this.trigger(A,Pe,ri,oe);ut&&Oe.push(ut)}}),Oe.length)return this._engine.markElementAsRemoved(this.id,A,!0,M),V&&be(Oe).onDone(()=>this._engine.processLeaveNode(A)),!0}return!1}prepareLeaveAnimationListeners(A){const M=this._elementListeners.get(A),V=this._engine.statesByElement.get(A);if(M&&V){const oe=new Set;M.forEach(ve=>{const Oe=ve.name;if(oe.has(Oe))return;oe.add(Oe);const ut=this._triggers[Oe].fallbackTransition,gt=V[Oe]||Vi,qt=new Ui(ri),Rn=new Zo(this.id,Oe,A);this._engine.totalQueuedPlayers++,this._queue.push({element:A,triggerName:Oe,transition:ut,fromState:gt,toState:qt,player:Rn,isFallbackTransition:!0})})}}removeNode(A,M){const V=this._engine;if(A.childElementCount&&this._signalRemovalForInnerTriggers(A,M),this.triggerLeaveAnimation(A,M,!0))return;let oe=!1;if(V.totalAnimations){const ve=V.players.length?V.playersByQueriedElement.get(A):[];if(ve&&ve.length)oe=!0;else{let Oe=A;for(;Oe=Oe.parentNode;)if(V.statesByElement.get(Oe)){oe=!0;break}}}if(this.prepareLeaveAnimationListeners(A),oe)V.markElementAsRemoved(this.id,A,!1,M);else{const ve=A[Mr];(!ve||ve===jn)&&(V.afterFlush(()=>this.clearElementCache(A)),V.destroyInnerAnimations(A),V._onRemovalComplete(A,M))}}insertNode(A,M){li(A,this._hostClassName)}drainQueuedTransitions(A){const M=[];return this._queue.forEach(V=>{const oe=V.player;if(oe.destroyed)return;const ve=V.element,Oe=this._elementListeners.get(ve);Oe&&Oe.forEach(Pe=>{if(Pe.name==V.triggerName){const ut=re(ve,V.triggerName,V.fromState.value,V.toState.value);ut._data=A,fe(V.player,Pe.phase,ut,Pe.callback)}}),oe.markedForDestroy?this._engine.afterFlush(()=>{oe.destroy()}):M.push(V)}),this._queue=[],M.sort((V,oe)=>{const ve=V.transition.ast.depCount,Oe=oe.transition.ast.depCount;return 0==ve||0==Oe?ve-Oe:this._engine.driver.containsElement(V.element,oe.element)?1:-1})}destroy(A){this.players.forEach(M=>M.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,A)}elementContainsData(A){let M=!1;return this._elementListeners.has(A)&&(M=!0),M=!!this._queue.find(V=>V.element===A)||M,M}}class ui{constructor(A,M,V){this.bodyNode=A,this.driver=M,this._normalizer=V,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(oe,ve)=>{}}_onRemovalComplete(A,M){this.onRemovalComplete(A,M)}get queuedPlayers(){const A=[];return this._namespaceList.forEach(M=>{M.players.forEach(V=>{V.queued&&A.push(V)})}),A}createNamespace(A,M){const V=new Zi(A,M,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,M)?this._balanceNamespaceList(V,M):(this.newHostElements.set(M,V),this.collectEnterElement(M)),this._namespaceLookup[A]=V}_balanceNamespaceList(A,M){const V=this._namespaceList.length-1;if(V>=0){let oe=!1;for(let ve=V;ve>=0;ve--)if(this.driver.containsElement(this._namespaceList[ve].hostElement,M)){this._namespaceList.splice(ve+1,0,A),oe=!0;break}oe||this._namespaceList.splice(0,0,A)}else this._namespaceList.push(A);return this.namespacesByHostElement.set(M,A),A}register(A,M){let V=this._namespaceLookup[A];return V||(V=this.createNamespace(A,M)),V}registerTrigger(A,M,V){let oe=this._namespaceLookup[A];oe&&oe.register(M,V)&&this.totalAnimations++}destroy(A,M){if(!A)return;const V=this._fetchNamespace(A);this.afterFlush(()=>{this.namespacesByHostElement.delete(V.hostElement),delete this._namespaceLookup[A];const oe=this._namespaceList.indexOf(V);oe>=0&&this._namespaceList.splice(oe,1)}),this.afterFlushAnimationsDone(()=>V.destroy(M))}_fetchNamespace(A){return this._namespaceLookup[A]}fetchNamespacesByElement(A){const M=new Set,V=this.statesByElement.get(A);if(V){const oe=Object.keys(V);for(let ve=0;ve<oe.length;ve++){const Oe=V[oe[ve]].namespaceId;if(Oe){const Pe=this._fetchNamespace(Oe);Pe&&M.add(Pe)}}}return M}trigger(A,M,V,oe){if(Bi(M)){const ve=this._fetchNamespace(A);if(ve)return ve.trigger(M,V,oe),!0}return!1}insertNode(A,M,V,oe){if(!Bi(M))return;const ve=M[Mr];if(ve&&ve.setForRemoval){ve.setForRemoval=!1,ve.setForMove=!0;const Oe=this.collectedLeaveElements.indexOf(M);Oe>=0&&this.collectedLeaveElements.splice(Oe,1)}if(A){const Oe=this._fetchNamespace(A);Oe&&Oe.insertNode(M,V)}oe&&this.collectEnterElement(M)}collectEnterElement(A){this.collectedEnterElements.push(A)}markElementAsDisabled(A,M){M?this.disabledNodes.has(A)||(this.disabledNodes.add(A),li(A,ki)):this.disabledNodes.has(A)&&(this.disabledNodes.delete(A),ci(A,ki))}removeNode(A,M,V,oe){if(Bi(M)){const ve=A?this._fetchNamespace(A):null;if(ve?ve.removeNode(M,oe):this.markElementAsRemoved(A,M,!1,oe),V){const Oe=this.namespacesByHostElement.get(M);Oe&&Oe.id!==A&&Oe.removeNode(M,oe)}}else this._onRemovalComplete(M,oe)}markElementAsRemoved(A,M,V,oe){this.collectedLeaveElements.push(M),M[Mr]={namespaceId:A,setForRemoval:oe,hasAnimation:V,removedBeforeQueried:!1}}listen(A,M,V,oe,ve){return Bi(M)?this._fetchNamespace(A).listen(M,V,oe,ve):()=>{}}_buildInstruction(A,M,V,oe,ve){return A.transition.build(this.driver,A.element,A.fromState.value,A.toState.value,V,oe,A.fromState.options,A.toState.options,M,ve)}destroyInnerAnimations(A){let M=this.driver.query(A,Qt,!0);M.forEach(V=>this.destroyActiveAnimationsForElement(V)),0!=this.playersByQueriedElement.size&&(M=this.driver.query(A,Fn,!0),M.forEach(V=>this.finishActiveQueriedAnimationOnElement(V)))}destroyActiveAnimationsForElement(A){const M=this.playersByElement.get(A);M&&M.forEach(V=>{V.queued?V.markedForDestroy=!0:V.destroy()})}finishActiveQueriedAnimationOnElement(A){const M=this.playersByQueriedElement.get(A);M&&M.forEach(V=>V.finish())}whenRenderingDone(){return new Promise(A=>{if(this.players.length)return be(this.players).onDone(()=>A());A()})}processLeaveNode(A){const M=A[Mr];if(M&&M.setForRemoval){if(A[Mr]=jn,M.namespaceId){this.destroyInnerAnimations(A);const V=this._fetchNamespace(M.namespaceId);V&&V.clearElementCache(A)}this._onRemovalComplete(A,M.setForRemoval)}this.driver.matchesElement(A,eo)&&this.markElementAsDisabled(A,!1),this.driver.query(A,eo,!0).forEach(V=>{this.markElementAsDisabled(V,!1)})}flush(A=-1){let M=[];if(this.newHostElements.size&&(this.newHostElements.forEach((V,oe)=>this._balanceNamespaceList(V,oe)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let V=0;V<this.collectedEnterElements.length;V++)li(this.collectedEnterElements[V],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const V=[];try{M=this._flushAnimations(V,A)}finally{for(let oe=0;oe<V.length;oe++)V[oe]()}}else for(let V=0;V<this.collectedLeaveElements.length;V++)this.processLeaveNode(this.collectedLeaveElements[V]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(V=>V()),this._flushFns=[],this._whenQuietFns.length){const V=this._whenQuietFns;this._whenQuietFns=[],M.length?be(M).onDone(()=>{V.forEach(oe=>oe())}):V.forEach(oe=>oe())}}reportError(A){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${A.join("\n")}`)}_flushAnimations(A,M){const V=new Ri,oe=[],ve=new Map,Oe=[],Pe=new Map,ut=new Map,gt=new Map,qt=new Set;this.disabledNodes.forEach(yn=>{qt.add(yn);const Pn=this.driver.query(yn,".ng-animate-queued",!0);for(let Qn=0;Qn<Pn.length;Qn++)qt.add(Pn[Qn])});const Rn=this.bodyNode,dr=Array.from(this.statesByElement.keys()),Ir=gs(dr,this.collectedEnterElements),$n=new Map;let Nn=0;Ir.forEach((yn,Pn)=>{const Qn=an+Nn++;$n.set(Pn,Qn),yn.forEach(Rr=>li(Rr,Qn))});const yr=[],hi=new Set,Br=new Set;for(let yn=0;yn<this.collectedLeaveElements.length;yn++){const Pn=this.collectedLeaveElements[yn],Qn=Pn[Mr];Qn&&Qn.setForRemoval&&(yr.push(Pn),hi.add(Pn),Qn.hasAnimation?this.driver.query(Pn,".ng-star-inserted",!0).forEach(Rr=>hi.add(Rr)):Br.add(Pn))}const io=new Map,fi=gs(dr,Array.from(hi));fi.forEach((yn,Pn)=>{const Qn=Sn+Nn++;io.set(Pn,Qn),yn.forEach(Rr=>li(Rr,Qn))}),A.push(()=>{Ir.forEach((yn,Pn)=>{const Qn=$n.get(Pn);yn.forEach(Rr=>ci(Rr,Qn))}),fi.forEach((yn,Pn)=>{const Qn=io.get(Pn);yn.forEach(Rr=>ci(Rr,Qn))}),yr.forEach(yn=>{this.processLeaveNode(yn)})});const Po=[],To=[];for(let yn=this._namespaceList.length-1;yn>=0;yn--)this._namespaceList[yn].drainQueuedTransitions(M).forEach(Qn=>{const Rr=Qn.player,Tr=Qn.element;if(Po.push(Rr),this.collectedEnterElements.length){const Mi=Tr[Mr];if(Mi&&Mi.setForMove)return void Rr.destroy()}const Ai=!Rn||!this.driver.containsElement(Rn,Tr),Ei=io.get(Tr),ao=$n.get(Tr),ei=this._buildInstruction(Qn,V,ao,Ei,Ai);if(ei.errors&&ei.errors.length)To.push(ei);else{if(Ai)return Rr.onStart(()=>Zn(Tr,ei.fromStyles)),Rr.onDestroy(()=>Jt(Tr,ei.toStyles)),void oe.push(Rr);if(Qn.isFallbackTransition)return Rr.onStart(()=>Zn(Tr,ei.fromStyles)),Rr.onDestroy(()=>Jt(Tr,ei.toStyles)),void oe.push(Rr);ei.timelines.forEach(Mi=>Mi.stretchStartingKeyframe=!0),V.append(Tr,ei.timelines),Oe.push({instruction:ei,player:Rr,element:Tr}),ei.queriedElements.forEach(Mi=>Ce(Pe,Mi,[]).push(Rr)),ei.preStyleProps.forEach((Mi,Us)=>{const Ji=Object.keys(Mi);if(Ji.length){let oi=ut.get(Us);oi||ut.set(Us,oi=new Set),Ji.forEach(Os=>oi.add(Os))}}),ei.postStyleProps.forEach((Mi,Us)=>{const Ji=Object.keys(Mi);let oi=gt.get(Us);oi||gt.set(Us,oi=new Set),Ji.forEach(Os=>oi.add(Os))})}});if(To.length){const yn=[];To.forEach(Pn=>{yn.push(`@${Pn.triggerName} has failed due to:\n`),Pn.errors.forEach(Qn=>yn.push(`- ${Qn}\n`))}),Po.forEach(Pn=>Pn.destroy()),this.reportError(yn)}const pi=new Map,Ro=new Map;Oe.forEach(yn=>{const Pn=yn.element;V.has(Pn)&&(Ro.set(Pn,Pn),this._beforeAnimationBuild(yn.player.namespaceId,yn.instruction,pi))}),oe.forEach(yn=>{const Pn=yn.element;this._getPreviousPlayers(Pn,!1,yn.namespaceId,yn.triggerName,null).forEach(Rr=>{Ce(pi,Pn,[]).push(Rr),Rr.destroy()})});const $o=yr.filter(yn=>xi(yn,ut,gt)),ji=new Map;qo(ji,this.driver,Br,gt,K.l3).forEach(yn=>{xi(yn,ut,gt)&&$o.push(yn)});const ga=new Map;Ir.forEach((yn,Pn)=>{qo(ga,this.driver,new Set(yn),ut,K.k1)}),$o.forEach(yn=>{const Pn=ji.get(yn),Qn=ga.get(yn);ji.set(yn,Object.assign(Object.assign({},Pn),Qn))});const gi=[],Qi=[],yi={};Oe.forEach(yn=>{const{element:Pn,player:Qn,instruction:Rr}=yn;if(V.has(Pn)){if(qt.has(Pn))return Qn.onDestroy(()=>Jt(Pn,Rr.toStyles)),Qn.disabled=!0,Qn.overrideTotalTime(Rr.totalTime),void oe.push(Qn);let Tr=yi;if(Ro.size>1){let Ei=Pn;const ao=[];for(;Ei=Ei.parentNode;){const ei=Ro.get(Ei);if(ei){Tr=ei;break}ao.push(Ei)}ao.forEach(ei=>Ro.set(ei,Tr))}const Ai=this._buildAnimation(Qn.namespaceId,Rr,pi,ve,ga,ji);if(Qn.setRealPlayer(Ai),Tr===yi)gi.push(Qn);else{const Ei=this.playersByElement.get(Tr);Ei&&Ei.length&&(Qn.parentPlayer=be(Ei)),oe.push(Qn)}}else Zn(Pn,Rr.fromStyles),Qn.onDestroy(()=>Jt(Pn,Rr.toStyles)),Qi.push(Qn),qt.has(Pn)&&oe.push(Qn)}),Qi.forEach(yn=>{const Pn=ve.get(yn.element);if(Pn&&Pn.length){const Qn=be(Pn);yn.setRealPlayer(Qn)}}),oe.forEach(yn=>{yn.parentPlayer?yn.syncPlayerEvents(yn.parentPlayer):yn.destroy()});for(let yn=0;yn<yr.length;yn++){const Pn=yr[yn],Qn=Pn[Mr];if(ci(Pn,Sn),Qn&&Qn.hasAnimation)continue;let Rr=[];if(Pe.size){let Ai=Pe.get(Pn);Ai&&Ai.length&&Rr.push(...Ai);let Ei=this.driver.query(Pn,Fn,!0);for(let ao=0;ao<Ei.length;ao++){let ei=Pe.get(Ei[ao]);ei&&ei.length&&Rr.push(...ei)}}const Tr=Rr.filter(Ai=>!Ai.destroyed);Tr.length?nr(this,Pn,Tr):this.processLeaveNode(Pn)}return yr.length=0,gi.forEach(yn=>{this.players.push(yn),yn.onDone(()=>{yn.destroy();const Pn=this.players.indexOf(yn);this.players.splice(Pn,1)}),yn.play()}),gi}elementContainsData(A,M){let V=!1;const oe=M[Mr];return oe&&oe.setForRemoval&&(V=!0),this.playersByElement.has(M)&&(V=!0),this.playersByQueriedElement.has(M)&&(V=!0),this.statesByElement.has(M)&&(V=!0),this._fetchNamespace(A).elementContainsData(M)||V}afterFlush(A){this._flushFns.push(A)}afterFlushAnimationsDone(A){this._whenQuietFns.push(A)}_getPreviousPlayers(A,M,V,oe,ve){let Oe=[];if(M){const Pe=this.playersByQueriedElement.get(A);Pe&&(Oe=Pe)}else{const Pe=this.playersByElement.get(A);if(Pe){const ut=!ve||ve==ri;Pe.forEach(gt=>{gt.queued||!ut&&gt.triggerName!=oe||Oe.push(gt)})}}return(V||oe)&&(Oe=Oe.filter(Pe=>!(V&&V!=Pe.namespaceId||oe&&oe!=Pe.triggerName))),Oe}_beforeAnimationBuild(A,M,V){const ve=M.element,Oe=M.isRemovalTransition?void 0:A,Pe=M.isRemovalTransition?void 0:M.triggerName;for(const ut of M.timelines){const gt=ut.element,qt=gt!==ve,Rn=Ce(V,gt,[]);this._getPreviousPlayers(gt,qt,Oe,Pe,M.toState).forEach(Ir=>{const $n=Ir.getRealPlayer();$n.beforeDestroy&&$n.beforeDestroy(),Ir.destroy(),Rn.push(Ir)})}Zn(ve,M.fromStyles)}_buildAnimation(A,M,V,oe,ve,Oe){const Pe=M.triggerName,ut=M.element,gt=[],qt=new Set,Rn=new Set,dr=M.timelines.map($n=>{const Nn=$n.element;qt.add(Nn);const yr=Nn[Mr];if(yr&&yr.removedBeforeQueried)return new K.ZN($n.duration,$n.delay);const hi=Nn!==ut,Br=function(ie){const A=[];return Ki(ie,A),A}((V.get(Nn)||sr).map(pi=>pi.getRealPlayer())).filter(pi=>!!pi.element&&pi.element===Nn),io=ve.get(Nn),fi=Oe.get(Nn),Po=xe(0,this._normalizer,0,$n.keyframes,io,fi),To=this._buildPlayer($n,Po,Br);if($n.subTimeline&&oe&&Rn.add(Nn),hi){const pi=new Zo(A,Pe,Nn);pi.setRealPlayer(To),gt.push(pi)}return To});gt.forEach($n=>{Ce(this.playersByQueriedElement,$n.element,[]).push($n),$n.onDone(()=>function(ie,A,M){let V;if(ie instanceof Map){if(V=ie.get(A),V){if(V.length){const oe=V.indexOf(M);V.splice(oe,1)}0==V.length&&ie.delete(A)}}else if(V=ie[A],V){if(V.length){const oe=V.indexOf(M);V.splice(oe,1)}0==V.length&&delete ie[A]}return V}(this.playersByQueriedElement,$n.element,$n))}),qt.forEach($n=>li($n,Ht));const Ir=be(dr);return Ir.onDestroy(()=>{qt.forEach($n=>ci($n,Ht)),Jt(ut,M.toStyles)}),Rn.forEach($n=>{Ce(oe,$n,[]).push(Ir)}),Ir}_buildPlayer(A,M,V){return M.length>0?this.driver.animate(A.element,M,A.duration,A.delay,A.easing,V):new K.ZN(A.duration,A.delay)}}class Zo{constructor(A,M,V){this.namespaceId=A,this.triggerName=M,this.element=V,this._player=new K.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(A){this._containsRealPlayer||(this._player=A,Object.keys(this._queuedCallbacks).forEach(M=>{this._queuedCallbacks[M].forEach(V=>fe(A,M,void 0,V))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(A.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(A){this.totalTime=A}syncPlayerEvents(A){const M=this._player;M.triggerCallback&&A.onStart(()=>M.triggerCallback("start")),A.onDone(()=>this.finish()),A.onDestroy(()=>this.destroy())}_queueEvent(A,M){Ce(this._queuedCallbacks,A,[]).push(M)}onDone(A){this.queued&&this._queueEvent("done",A),this._player.onDone(A)}onStart(A){this.queued&&this._queueEvent("start",A),this._player.onStart(A)}onDestroy(A){this.queued&&this._queueEvent("destroy",A),this._player.onDestroy(A)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(A){this.queued||this._player.setPosition(A)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(A){const M=this._player;M.triggerCallback&&M.triggerCallback(A)}}function Bi(ie){return ie&&1===ie.nodeType}function Co(ie,A){const M=ie.style.display;return ie.style.display=null!=A?A:"none",M}function qo(ie,A,M,V,oe){const ve=[];M.forEach(ut=>ve.push(Co(ut)));const Oe=[];V.forEach((ut,gt)=>{const qt={};ut.forEach(Rn=>{const dr=qt[Rn]=A.computeStyle(gt,Rn,oe);(!dr||0==dr.length)&&(gt[Mr]=Yr,Oe.push(gt))}),ie.set(gt,qt)});let Pe=0;return M.forEach(ut=>Co(ut,ve[Pe++])),Oe}function gs(ie,A){const M=new Map;if(ie.forEach(Pe=>M.set(Pe,[])),0==A.length)return M;const oe=new Set(A),ve=new Map;function Oe(Pe){if(!Pe)return 1;let ut=ve.get(Pe);if(ut)return ut;const gt=Pe.parentNode;return ut=M.has(gt)?gt:oe.has(gt)?1:Oe(gt),ve.set(Pe,ut),ut}return A.forEach(Pe=>{const ut=Oe(Pe);1!==ut&&M.get(ut).push(Pe)}),M}const Lo="$$classes";function li(ie,A){if(ie.classList)ie.classList.add(A);else{let M=ie[Lo];M||(M=ie[Lo]={}),M[A]=!0}}function ci(ie,A){if(ie.classList)ie.classList.remove(A);else{let M=ie[Lo];M&&delete M[A]}}function nr(ie,A,M){be(M).onDone(()=>ie.processLeaveNode(A))}function Ki(ie,A){for(let M=0;M<ie.length;M++){const V=ie[M];V instanceof K.ZE?Ki(V.players,A):A.push(V)}}function xi(ie,A,M){const V=M.get(ie);if(!V)return!1;let oe=A.get(ie);return oe?V.forEach(ve=>oe.add(ve)):A.set(ie,V),M.delete(ie),!0}class no{constructor(A,M,V){this.bodyNode=A,this._driver=M,this._normalizer=V,this._triggerCache={},this.onRemovalComplete=(oe,ve)=>{},this._transitionEngine=new ui(A,M,V),this._timelineEngine=new Jn(A,M,V),this._transitionEngine.onRemovalComplete=(oe,ve)=>this.onRemovalComplete(oe,ve)}registerTrigger(A,M,V,oe,ve){const Oe=A+"-"+oe;let Pe=this._triggerCache[Oe];if(!Pe){const ut=[],gt=$e(this._driver,ve,ut);if(ut.length)throw new Error(`The animation trigger "${oe}" has failed to build due to the following errors:\n - ${ut.join("\n - ")}`);Pe=function(ie,A,M){return new pn(ie,A,M)}(oe,gt,this._normalizer),this._triggerCache[Oe]=Pe}this._transitionEngine.registerTrigger(M,oe,Pe)}register(A,M){this._transitionEngine.register(A,M)}destroy(A,M){this._transitionEngine.destroy(A,M)}onInsert(A,M,V,oe){this._transitionEngine.insertNode(A,M,V,oe)}onRemove(A,M,V,oe){this._transitionEngine.removeNode(A,M,oe||!1,V)}disableAnimations(A,M){this._transitionEngine.markElementAsDisabled(A,M)}process(A,M,V,oe){if("@"==V.charAt(0)){const[ve,Oe]=le(V);this._timelineEngine.command(ve,M,Oe,oe)}else this._transitionEngine.trigger(A,M,V,oe)}listen(A,M,V,oe,ve){if("@"==V.charAt(0)){const[Oe,Pe]=le(V);return this._timelineEngine.listen(Oe,M,Pe,ve)}return this._transitionEngine.listen(A,M,V,oe,ve)}flush(A=-1){this._transitionEngine.flush(A)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function ii(ie,A){let M=null,V=null;return Array.isArray(A)&&A.length?(M=ne(A[0]),A.length>1&&(V=ne(A[A.length-1]))):A&&(M=ne(A)),M||V?new wo(ie,M,V):null}let wo=(()=>{class ie{constructor(M,V,oe){this._element=M,this._startStyles=V,this._endStyles=oe,this._state=0;let ve=ie.initialStylesByElement.get(M);ve||ie.initialStylesByElement.set(M,ve={}),this._initialStyles=ve}start(){this._state<1&&(this._startStyles&&Jt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Jt(this._element,this._initialStyles),this._endStyles&&(Jt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(ie.initialStylesByElement.delete(this._element),this._startStyles&&(Zn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zn(this._element,this._endStyles),this._endStyles=null),Jt(this._element,this._initialStyles),this._state=3)}}return ie.initialStylesByElement=new WeakMap,ie})();function ne(ie){let A=null;const M=Object.keys(ie);for(let V=0;V<M.length;V++){const oe=M[V];qe(oe)&&(A=A||{},A[oe]=ie[oe])}return A}function qe(ie){return"display"===ie||"position"===ie}const ge="animation",pt="animationend";class $t{constructor(A,M,V,oe,ve,Oe,Pe){this._element=A,this._name=M,this._duration=V,this._delay=oe,this._easing=ve,this._fillMode=Oe,this._onDoneFn=Pe,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=ut=>this._handleCallback(ut)}apply(){(function(ie,A){const M=hr(ie,"").trim();let V=0;M.length&&(function(ie,A){let M=0;for(let V=0;V<ie.length;V++)","===ie.charAt(V)&&M++;return M}(M)+1,A=`${M}, ${A}`),Ur(ie,"",A)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Uo(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){vr(this._element,this._name,"paused")}resume(){vr(this._element,this._name,"running")}setPosition(A){const M=Eo(this._element,this._name);this._position=A*this._duration,Ur(this._element,"Delay",`-${this._position}ms`,M)}getPosition(){return this._position}_handleCallback(A){const M=A._ngTestManualTimestamp||Date.now(),V=1e3*parseFloat(A.elapsedTime.toFixed(3));A.animationName==this._name&&Math.max(M-this._startTime,0)>=this._delay&&V>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Uo(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(ie,A){const V=hr(ie,"").split(","),oe=wi(V,A);oe>=0&&(V.splice(oe,1),Ur(ie,"",V.join(",")))}(this._element,this._name))}}function vr(ie,A,M){Ur(ie,"PlayState",M,Eo(ie,A))}function Eo(ie,A){const M=hr(ie,"");return M.indexOf(",")>0?wi(M.split(","),A):wi([M],A)}function wi(ie,A){for(let M=0;M<ie.length;M++)if(ie[M].indexOf(A)>=0)return M;return-1}function Uo(ie,A,M){M?ie.removeEventListener(pt,A):ie.addEventListener(pt,A)}function Ur(ie,A,M,V){const oe=ge+A;if(null!=V){const ve=ie.style[oe];if(ve.length){const Oe=ve.split(",");Oe[V]=M,M=Oe.join(",")}}ie.style[oe]=M}function hr(ie,A){return ie.style[ge+A]||""}class Z{constructor(A,M,V,oe,ve,Oe,Pe,ut){this.element=A,this.keyframes=M,this.animationName=V,this._duration=oe,this._delay=ve,this._finalStyles=Pe,this._specialStyles=ut,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Oe||"linear",this.totalTime=oe+ve,this._buildStyler()}onStart(A){this._onStartFns.push(A)}onDone(A){this._onDoneFns.push(A)}onDestroy(A){this._onDestroyFns.push(A)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(A=>A()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(A=>A()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(A=>A()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(A){this._styler.setPosition(A)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new $t(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(A){const M="start"==A?this._onStartFns:this._onDoneFns;M.forEach(V=>V()),M.length=0}beforeDestroy(){this.init();const A={};if(this.hasStarted()){const M=this._state>=3;Object.keys(this._finalStyles).forEach(V=>{"offset"!=V&&(A[V]=M?this._finalStyles[V]:Ne(this.element,V))})}this.currentSnapshot=A}}class he extends K.ZN{constructor(A,M){super(),this.element=A,this._startingStyles={},this.__initialized=!1,this._styles=rt(M)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(A=>{this._startingStyles[A]=this.element.style[A]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(A=>this.element.style.setProperty(A,this._styles[A])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(A=>{const M=this._startingStyles[A];M?this.element.style.setProperty(A,M):this.element.style.removeProperty(A)}),this._startingStyles=null,super.destroy())}}class F{constructor(){this._count=0}validateStyleProperty(A){return zt(A)}matchesElement(A,M){return wn(A,M)}containsElement(A,M){return Et(A,M)}query(A,M,V){return Ke(A,M,V)}computeStyle(A,M,V){return window.getComputedStyle(A)[M]}buildKeyframeElement(A,M,V){V=V.map(Pe=>rt(Pe));let oe=`@keyframes ${M} {\n`,ve="";V.forEach(Pe=>{ve=" ";const ut=parseFloat(Pe.offset);oe+=`${ve}${100*ut}% {\n`,ve+=" ",Object.keys(Pe).forEach(gt=>{const qt=Pe[gt];switch(gt){case"offset":return;case"easing":return void(qt&&(oe+=`${ve}animation-timing-function: ${qt};\n`));default:return void(oe+=`${ve}${gt}: ${qt};\n`)}}),oe+=`${ve}}\n`}),oe+="}\n";const Oe=document.createElement("style");return Oe.textContent=oe,Oe}animate(A,M,V,oe,ve,Oe=[],Pe){const ut=Oe.filter(yr=>yr instanceof Z),gt={};Pt(V,oe)&&ut.forEach(yr=>{let hi=yr.currentSnapshot;Object.keys(hi).forEach(Br=>gt[Br]=hi[Br])});const qt=function(ie){let A={};return ie&&(Array.isArray(ie)?ie:[ie]).forEach(V=>{Object.keys(V).forEach(oe=>{"offset"==oe||"easing"==oe||(A[oe]=V[oe])})}),A}(M=nn(A,M,gt));if(0==V)return new he(A,qt);const Rn="gen_css_kf_"+this._count++,dr=this.buildKeyframeElement(A,Rn,M);(function(ie){var A;const M=null===(A=ie.getRootNode)||void 0===A?void 0:A.call(ie);return"undefined"!=typeof ShadowRoot&&M instanceof ShadowRoot?M:document.head})(A).appendChild(dr);const $n=ii(A,M),Nn=new Z(A,M,Rn,V,oe,ve,qt,$n);return Nn.onDestroy(()=>{var ie;(ie=dr).parentNode.removeChild(ie)}),Nn}}class B{constructor(A,M,V,oe){this.element=A,this.keyframes=M,this.options=V,this._specialStyles=oe,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=V.duration,this._delay=V.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(A=>A()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const A=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,A,this.options),this._finalKeyframe=A.length?A[A.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(A,M,V){return A.animate(M,V)}onStart(A){this._onStartFns.push(A)}onDone(A){this._onDoneFns.push(A)}onDestroy(A){this._onDestroyFns.push(A)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(A=>A()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(A=>A()),this._onDestroyFns=[])}setPosition(A){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=A*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const A={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(M=>{"offset"!=M&&(A[M]=this._finished?this._finalKeyframe[M]:Ne(this.element,M))}),this.currentSnapshot=A}triggerCallback(A){const M="start"==A?this._onStartFns:this._onDoneFns;M.forEach(V=>V()),M.length=0}}class L{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Ze().toString()),this._cssKeyframesDriver=new F}validateStyleProperty(A){return zt(A)}matchesElement(A,M){return wn(A,M)}containsElement(A,M){return Et(A,M)}query(A,M,V){return Ke(A,M,V)}computeStyle(A,M,V){return window.getComputedStyle(A)[M]}overrideWebAnimationsSupport(A){this._isNativeImpl=A}animate(A,M,V,oe,ve,Oe=[],Pe){if(!Pe&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(A,M,V,oe,ve,Oe);const qt={duration:V,delay:oe,fill:0==oe?"both":"forwards"};ve&&(qt.easing=ve);const Rn={},dr=Oe.filter($n=>$n instanceof B);Pt(V,oe)&&dr.forEach($n=>{let Nn=$n.currentSnapshot;Object.keys(Nn).forEach(yr=>Rn[yr]=Nn[yr])});const Ir=ii(A,M=nn(A,M=M.map($n=>Mn($n,!1)),Rn));return new B(A,M,qt,Ir)}}function Ze(){return w()&&Element.prototype.animate||{}}var Ot=Y(8583);let En=(()=>{class ie extends K._j{constructor(M,V){super(),this._nextAnimationId=0,this._renderer=M.createRenderer(V.body,{id:"0",encapsulation:O.ifc.None,styles:[],data:{animation:[]}})}build(M){const V=this._nextAnimationId.toString();this._nextAnimationId++;const oe=Array.isArray(M)?(0,K.vP)(M):M;return mr(this._renderer,null,V,"register",[oe]),new fr(V,this._renderer)}}return ie.\u0275fac=function(M){return new(M||ie)(O.LFG(O.FYo),O.LFG(Ot.K0))},ie.\u0275prov=O.Yz7({token:ie,factory:ie.\u0275fac}),ie})();class fr extends K.LC{constructor(A,M){super(),this._id=A,this._renderer=M}create(A,M){return new qr(this._id,A,M||{},this._renderer)}}class qr{constructor(A,M,V,oe){this.id=A,this.element=M,this._renderer=oe,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",V)}_listen(A,M){return this._renderer.listen(this.element,`@@${this.id}:${A}`,M)}_command(A,...M){return mr(this._renderer,this.element,this.id,A,M)}onDone(A){this._listen("done",A)}onStart(A){this._listen("start",A)}onDestroy(A){this._listen("destroy",A)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(A){this._command("setPosition",A)}getPosition(){var A,M;return null!==(M=null===(A=this._renderer.engine.players[+this.id])||void 0===A?void 0:A.getPosition())&&void 0!==M?M:0}}function mr(ie,A,M,V,oe){return ie.setProperty(A,`@@${M}:${V}`,oe)}const di="@.disabled";let Tn=(()=>{class ie{constructor(M,V,oe){this.delegate=M,this.engine=V,this._zone=oe,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),V.onRemovalComplete=(ve,Oe)=>{Oe&&Oe.parentNode(ve)&&Oe.removeChild(ve.parentNode,ve)}}createRenderer(M,V){const ve=this.delegate.createRenderer(M,V);if(!(M&&V&&V.data&&V.data.animation)){let qt=this._rendererCache.get(ve);return qt||(qt=new ro("",ve,this.engine),this._rendererCache.set(ve,qt)),qt}const Oe=V.id,Pe=V.id+"-"+this._currentId;this._currentId++,this.engine.register(Pe,M);const ut=qt=>{Array.isArray(qt)?qt.forEach(ut):this.engine.registerTrigger(Oe,Pe,M,qt.name,qt)};return V.data.animation.forEach(ut),new ms(this,Pe,ve,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(M,V,oe){M>=0&&M<this._microtaskId?this._zone.run(()=>V(oe)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(ve=>{const[Oe,Pe]=ve;Oe(Pe)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([V,oe]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return ie.\u0275fac=function(M){return new(M||ie)(O.LFG(O.FYo),O.LFG(no),O.LFG(O.R0b))},ie.\u0275prov=O.Yz7({token:ie,factory:ie.\u0275fac}),ie})();class ro{constructor(A,M,V){this.namespaceId=A,this.delegate=M,this.engine=V,this.destroyNode=this.delegate.destroyNode?oe=>M.destroyNode(oe):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(A,M){return this.delegate.createElement(A,M)}createComment(A){return this.delegate.createComment(A)}createText(A){return this.delegate.createText(A)}appendChild(A,M){this.delegate.appendChild(A,M),this.engine.onInsert(this.namespaceId,M,A,!1)}insertBefore(A,M,V,oe=!0){this.delegate.insertBefore(A,M,V),this.engine.onInsert(this.namespaceId,M,A,oe)}removeChild(A,M,V){this.engine.onRemove(this.namespaceId,M,this.delegate,V)}selectRootElement(A,M){return this.delegate.selectRootElement(A,M)}parentNode(A){return this.delegate.parentNode(A)}nextSibling(A){return this.delegate.nextSibling(A)}setAttribute(A,M,V,oe){this.delegate.setAttribute(A,M,V,oe)}removeAttribute(A,M,V){this.delegate.removeAttribute(A,M,V)}addClass(A,M){this.delegate.addClass(A,M)}removeClass(A,M){this.delegate.removeClass(A,M)}setStyle(A,M,V,oe){this.delegate.setStyle(A,M,V,oe)}removeStyle(A,M,V){this.delegate.removeStyle(A,M,V)}setProperty(A,M,V){"@"==M.charAt(0)&&M==di?this.disableAnimations(A,!!V):this.delegate.setProperty(A,M,V)}setValue(A,M){this.delegate.setValue(A,M)}listen(A,M,V){return this.delegate.listen(A,M,V)}disableAnimations(A,M){this.engine.disableAnimations(A,M)}}class ms extends ro{constructor(A,M,V,oe){super(M,V,oe),this.factory=A,this.namespaceId=M}setProperty(A,M,V){"@"==M.charAt(0)?"."==M.charAt(1)&&M==di?this.disableAnimations(A,V=void 0===V||!!V):this.engine.process(this.namespaceId,A,M.substr(1),V):this.delegate.setProperty(A,M,V)}listen(A,M,V){if("@"==M.charAt(0)){const oe=function(ie){switch(ie){case"body":return document.body;case"document":return document;case"window":return window;default:return ie}}(A);let ve=M.substr(1),Oe="";return"@"!=ve.charAt(0)&&([ve,Oe]=function(ie){const A=ie.indexOf(".");return[ie.substring(0,A),ie.substr(A+1)]}(ve)),this.engine.listen(this.namespaceId,oe,ve,Oe,Pe=>{this.factory.scheduleListenerCallback(Pe._data||-1,V,Pe)})}return this.delegate.listen(A,M,V)}}let Gu=(()=>{class ie extends no{constructor(M,V,oe){super(M.body,V,oe)}ngOnDestroy(){this.flush()}}return ie.\u0275fac=function(M){return new(M||ie)(O.LFG(Ot.K0),O.LFG(et),O.LFG(Si))},ie.\u0275prov=O.Yz7({token:ie,factory:ie.\u0275fac}),ie})();const br=new O.OlP("AnimationModuleType"),_s=[{provide:K._j,useClass:En},{provide:Si,useFactory:function(){return new ni}},{provide:no,useClass:Gu},{provide:O.FYo,useFactory:function(ie,A,M){return new Tn(ie,A,M)},deps:[c.se,no,O.R0b]}],Ni=[{provide:et,useFactory:function(){return"function"==typeof Ze()?new L:new F}},{provide:br,useValue:"BrowserAnimations"},..._s],Ms=[{provide:et,useClass:it},{provide:br,useValue:"NoopAnimations"},..._s];let Is=(()=>{class ie{static withConfig(M){return{ngModule:ie,providers:M.disableAnimations?Ms:Ni}}}return ie.\u0275fac=function(M){return new(M||ie)},ie.\u0275mod=O.oAB({type:ie}),ie.\u0275inj=O.cJS({providers:Ni,imports:[c.b2]}),ie})()},9075:(jt,nt,Y)=>{"use strict";Y.d(nt,{b2:()=>Ri,q6:()=>Xr,se:()=>tr});var O=Y(8583),c=Y(7716);class K extends O.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class w extends K{static makeCurrent(){(0,O.HT)(new w)}onAndCancel(Be,Ae,ot){return Be.addEventListener(Ae,ot,!1),()=>{Be.removeEventListener(Ae,ot,!1)}}dispatchEvent(Be,Ae){Be.dispatchEvent(Ae)}remove(Be){Be.parentNode&&Be.parentNode.removeChild(Be)}createElement(Be,Ae){return(Ae=Ae||this.getDefaultDocument()).createElement(Be)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Be){return Be.nodeType===Node.ELEMENT_NODE}isShadowRoot(Be){return Be instanceof DocumentFragment}getGlobalEventTarget(Be,Ae){return"window"===Ae?window:"document"===Ae?Be:"body"===Ae?Be.body:null}getBaseHref(Be){const Ae=(Ue=Ue||document.querySelector("base"),Ue?Ue.getAttribute("href"):null);return null==Ae?null:function(Qe){xe=xe||document.createElement("a"),xe.setAttribute("href",Qe);const Be=xe.pathname;return"/"===Be.charAt(0)?Be:`/${Be}`}(Ae)}resetBaseElement(){Ue=null}getUserAgent(){return window.navigator.userAgent}getCookie(Be){return(0,O.Mx)(document.cookie,Be)}}let xe,Ue=null;const _e=new c.OlP("TRANSITION_ID"),Ce=[{provide:c.ip1,useFactory:function(Qe,Be,Ae){return()=>{Ae.get(c.CZH).donePromise.then(()=>{const ot=(0,O.q)(),St=Be.querySelectorAll(`style[ng-transition="${Qe}"]`);for(let pn=0;pn<St.length;pn++)ot.remove(St[pn])})}},deps:[_e,O.K0,c.zs3],multi:!0}];class le{static init(){(0,c.VLi)(new le)}addToWindow(Be){c.dqk.getAngularTestability=(ot,St=!0)=>{const pn=Be.findTestabilityInTree(ot,St);if(null==pn)throw new Error("Could not find testability for element.");return pn},c.dqk.getAllAngularTestabilities=()=>Be.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>Be.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(ot=>{const St=c.dqk.getAllAngularTestabilities();let pn=St.length,kn=!1;const gn=function(un){kn=kn||un,pn--,0==pn&&ot(kn)};St.forEach(function(un){un.whenStable(gn)})})}findTestabilityInTree(Be,Ae,ot){if(null==Ae)return null;const St=Be.getTestability(Ae);return null!=St?St:ot?(0,O.q)().isShadowRoot(Ae)?this.findTestabilityInTree(Be,Ae.host,!0):this.findTestabilityInTree(Be,Ae.parentElement,!0):null}}let pe=(()=>{class Qe{build(){return new XMLHttpRequest}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)},Qe.\u0275prov=c.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();const it=new c.OlP("EventManagerPlugins");let et=(()=>{class Qe{constructor(Ae,ot){this._zone=ot,this._eventNameToPlugin=new Map,Ae.forEach(St=>St.manager=this),this._plugins=Ae.slice().reverse()}addEventListener(Ae,ot,St){return this._findPluginFor(ot).addEventListener(Ae,ot,St)}addGlobalEventListener(Ae,ot,St){return this._findPluginFor(ot).addGlobalEventListener(Ae,ot,St)}getZone(){return this._zone}_findPluginFor(Ae){const ot=this._eventNameToPlugin.get(Ae);if(ot)return ot;const St=this._plugins;for(let pn=0;pn<St.length;pn++){const kn=St[pn];if(kn.supports(Ae))return this._eventNameToPlugin.set(Ae,kn),kn}throw new Error(`No event manager plugin found for event ${Ae}`)}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)(c.LFG(it),c.LFG(c.R0b))},Qe.\u0275prov=c.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();class _t{constructor(Be){this._doc=Be}addGlobalEventListener(Be,Ae,ot){const St=(0,O.q)().getGlobalEventTarget(this._doc,Be);if(!St)throw new Error(`Unsupported event target ${St} for event ${Ae}`);return this.addEventListener(St,Ae,ot)}}let st=(()=>{class Qe{constructor(){this._stylesSet=new Set}addStyles(Ae){const ot=new Set;Ae.forEach(St=>{this._stylesSet.has(St)||(this._stylesSet.add(St),ot.add(St))}),this.onStylesAdded(ot)}onStylesAdded(Ae){}getAllStyles(){return Array.from(this._stylesSet)}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)},Qe.\u0275prov=c.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})(),tn=(()=>{class Qe extends st{constructor(Ae){super(),this._doc=Ae,this._hostNodes=new Map,this._hostNodes.set(Ae.head,[])}_addStylesToHost(Ae,ot,St){Ae.forEach(pn=>{const kn=this._doc.createElement("style");kn.textContent=pn,St.push(ot.appendChild(kn))})}addHost(Ae){const ot=[];this._addStylesToHost(this._stylesSet,Ae,ot),this._hostNodes.set(Ae,ot)}removeHost(Ae){const ot=this._hostNodes.get(Ae);ot&&ot.forEach(an),this._hostNodes.delete(Ae)}onStylesAdded(Ae){this._hostNodes.forEach((ot,St)=>{this._addStylesToHost(Ae,St,ot)})}ngOnDestroy(){this._hostNodes.forEach(Ae=>Ae.forEach(an))}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)(c.LFG(O.K0))},Qe.\u0275prov=c.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();function an(Qe){(0,O.q)().remove(Qe)}const Sn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},on=/%COMP%/g;function ur(Qe,Be,Ae){for(let ot=0;ot<Be.length;ot++){let St=Be[ot];Array.isArray(St)?ur(Qe,St,Ae):(St=St.replace(on,Qe),Ae.push(St))}return Ae}function zn(Qe){return Be=>{if("__ngUnwrap__"===Be)return Qe;!1===Qe(Be)&&(Be.preventDefault(),Be.returnValue=!1)}}let tr=(()=>{class Qe{constructor(Ae,ot,St){this.eventManager=Ae,this.sharedStylesHost=ot,this.appId=St,this.rendererByCompId=new Map,this.defaultRenderer=new An(Ae)}createRenderer(Ae,ot){if(!Ae||!ot)return this.defaultRenderer;switch(ot.encapsulation){case c.ifc.Emulated:{let St=this.rendererByCompId.get(ot.id);return St||(St=new Jt(this.eventManager,this.sharedStylesHost,ot,this.appId),this.rendererByCompId.set(ot.id,St)),St.applyToHost(Ae),St}case 1:case c.ifc.ShadowDom:return new Zn(this.eventManager,this.sharedStylesHost,Ae,ot);default:if(!this.rendererByCompId.has(ot.id)){const St=ur(ot.id,ot.styles,[]);this.sharedStylesHost.addStyles(St),this.rendererByCompId.set(ot.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)(c.LFG(et),c.LFG(tn),c.LFG(c.AFp))},Qe.\u0275prov=c.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();class An{constructor(Be){this.eventManager=Be,this.data=Object.create(null)}destroy(){}createElement(Be,Ae){return Ae?document.createElementNS(Sn[Ae]||Ae,Be):document.createElement(Be)}createComment(Be){return document.createComment(Be)}createText(Be){return document.createTextNode(Be)}appendChild(Be,Ae){Be.appendChild(Ae)}insertBefore(Be,Ae,ot){Be&&Be.insertBefore(Ae,ot)}removeChild(Be,Ae){Be&&Be.removeChild(Ae)}selectRootElement(Be,Ae){let ot="string"==typeof Be?document.querySelector(Be):Be;if(!ot)throw new Error(`The selector "${Be}" did not match any elements`);return Ae||(ot.textContent=""),ot}parentNode(Be){return Be.parentNode}nextSibling(Be){return Be.nextSibling}setAttribute(Be,Ae,ot,St){if(St){Ae=St+":"+Ae;const pn=Sn[St];pn?Be.setAttributeNS(pn,Ae,ot):Be.setAttribute(Ae,ot)}else Be.setAttribute(Ae,ot)}removeAttribute(Be,Ae,ot){if(ot){const St=Sn[ot];St?Be.removeAttributeNS(St,Ae):Be.removeAttribute(`${ot}:${Ae}`)}else Be.removeAttribute(Ae)}addClass(Be,Ae){Be.classList.add(Ae)}removeClass(Be,Ae){Be.classList.remove(Ae)}setStyle(Be,Ae,ot,St){St&(c.JOm.DashCase|c.JOm.Important)?Be.style.setProperty(Ae,ot,St&c.JOm.Important?"important":""):Be.style[Ae]=ot}removeStyle(Be,Ae,ot){ot&c.JOm.DashCase?Be.style.removeProperty(Ae):Be.style[Ae]=""}setProperty(Be,Ae,ot){Be[Ae]=ot}setValue(Be,Ae){Be.nodeValue=Ae}listen(Be,Ae,ot){return"string"==typeof Be?this.eventManager.addGlobalEventListener(Be,Ae,zn(ot)):this.eventManager.addEventListener(Be,Ae,zn(ot))}}class Jt extends An{constructor(Be,Ae,ot,St){super(Be),this.component=ot;const pn=ur(St+"-"+ot.id,ot.styles,[]);Ae.addStyles(pn),this.contentAttr="_ngcontent-%COMP%".replace(on,St+"-"+ot.id),this.hostAttr="_nghost-%COMP%".replace(on,St+"-"+ot.id)}applyToHost(Be){super.setAttribute(Be,this.hostAttr,"")}createElement(Be,Ae){const ot=super.createElement(Be,Ae);return super.setAttribute(ot,this.contentAttr,""),ot}}class Zn extends An{constructor(Be,Ae,ot,St){super(Be),this.sharedStylesHost=Ae,this.hostEl=ot,this.shadowRoot=ot.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const pn=ur(St.id,St.styles,[]);for(let kn=0;kn<pn.length;kn++){const gn=document.createElement("style");gn.textContent=pn[kn],this.shadowRoot.appendChild(gn)}}nodeOrShadowRoot(Be){return Be===this.hostEl?this.shadowRoot:Be}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Be,Ae){return super.appendChild(this.nodeOrShadowRoot(Be),Ae)}insertBefore(Be,Ae,ot){return super.insertBefore(this.nodeOrShadowRoot(Be),Ae,ot)}removeChild(Be,Ae){return super.removeChild(this.nodeOrShadowRoot(Be),Ae)}parentNode(Be){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Be)))}}let Un=(()=>{class Qe extends _t{constructor(Ae){super(Ae)}supports(Ae){return!0}addEventListener(Ae,ot,St){return Ae.addEventListener(ot,St,!1),()=>this.removeEventListener(Ae,ot,St)}removeEventListener(Ae,ot,St){return Ae.removeEventListener(ot,St)}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)(c.LFG(O.K0))},Qe.\u0275prov=c.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();const nn=["alt","control","meta","shift"],Ne={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ft={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},fn={alt:Qe=>Qe.altKey,control:Qe=>Qe.ctrlKey,meta:Qe=>Qe.metaKey,shift:Qe=>Qe.shiftKey};let Gt=(()=>{class Qe extends _t{constructor(Ae){super(Ae)}supports(Ae){return null!=Qe.parseEventName(Ae)}addEventListener(Ae,ot,St){const pn=Qe.parseEventName(ot),kn=Qe.eventCallback(pn.fullKey,St,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,O.q)().onAndCancel(Ae,pn.domEventName,kn))}static parseEventName(Ae){const ot=Ae.toLowerCase().split("."),St=ot.shift();if(0===ot.length||"keydown"!==St&&"keyup"!==St)return null;const pn=Qe._normalizeKey(ot.pop());let kn="";if(nn.forEach(un=>{const Jn=ot.indexOf(un);Jn>-1&&(ot.splice(Jn,1),kn+=un+".")}),kn+=pn,0!=ot.length||0===pn.length)return null;const gn={};return gn.domEventName=St,gn.fullKey=kn,gn}static getEventFullKey(Ae){let ot="",St=function(Qe){let Be=Qe.key;if(null==Be){if(Be=Qe.keyIdentifier,null==Be)return"Unidentified";Be.startsWith("U+")&&(Be=String.fromCharCode(parseInt(Be.substring(2),16)),3===Qe.location&&ft.hasOwnProperty(Be)&&(Be=ft[Be]))}return Ne[Be]||Be}(Ae);return St=St.toLowerCase()," "===St?St="space":"."===St&&(St="dot"),nn.forEach(pn=>{pn!=St&&fn[pn](Ae)&&(ot+=pn+".")}),ot+=St,ot}static eventCallback(Ae,ot,St){return pn=>{Qe.getEventFullKey(pn)===Ae&&St.runGuarded(()=>ot(pn))}}static _normalizeKey(Ae){switch(Ae){case"esc":return"escape";default:return Ae}}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)(c.LFG(O.K0))},Qe.\u0275prov=c.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();const Xr=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:O.bD},{provide:c.g9A,useValue:function(){w.makeCurrent(),le.init()},multi:!0},{provide:O.K0,useFactory:function(){return(0,c.RDi)(document),document},deps:[]}]),Dr=[[],{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function(){return new c.qLn},deps:[]},{provide:it,useClass:Un,multi:!0,deps:[O.K0,c.R0b,c.Lbi]},{provide:it,useClass:Gt,multi:!0,deps:[O.K0]},[],{provide:tr,useClass:tr,deps:[et,tn,c.AFp]},{provide:c.FYo,useExisting:tr},{provide:st,useExisting:tn},{provide:tn,useClass:tn,deps:[O.K0]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:et,useClass:et,deps:[it,c.R0b]},{provide:O.JF,useClass:pe,deps:[]},[]];let Ri=(()=>{class Qe{constructor(Ae){if(Ae)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Ae){return{ngModule:Qe,providers:[{provide:c.AFp,useValue:Ae.appId},{provide:_e,useExisting:c.AFp},Ce]}}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)(c.LFG(Qe,12))},Qe.\u0275mod=c.oAB({type:Qe}),Qe.\u0275inj=c.cJS({providers:Dr,imports:[O.ez,c.hGG]}),Qe})();"undefined"!=typeof window&&window},2213:(jt,nt,Y)=>{"use strict";Y.d(nt,{gz:()=>Mr,wm:()=>Ba,F0:()=>oi,rH:()=>qi,Od:()=>ya,Bz:()=>ss,lC:()=>Zu});var O=Y(8583),c=Y(7716),K=Y(4869),w=Y(9796),Ue=Y(5197),be=Y(509),xe=Y(6693);const fe={};class re{constructor(x){this.resultSelector=x}call(x,I){return I.subscribe(new Ce(x,this.resultSelector))}}class Ce extends Ue.L{constructor(x,I){super(x),this.resultSelector=I,this.active=0,this.values=[],this.observables=[]}_next(x){this.values.push(fe),this.observables.push(x)}_complete(){const x=this.observables,I=x.length;if(0===I)this.destination.complete();else{this.active=I,this.toRespond=I;for(let q=0;q<I;q++)this.add((0,be.D)(this,x[q],void 0,q))}}notifyComplete(x){0==(this.active-=1)&&this.destination.complete()}notifyNext(x,I,q){const X=this.values,Te=this.toRespond?X[q]===fe?--this.toRespond:this.toRespond:0;X[q]=I,0===Te&&(this.resultSelector?this._tryResultSelector(X):this.destination.next(X.slice()))}_tryResultSelector(x){let I;try{I=this.resultSelector.apply(this,x)}catch(q){return void this.destination.error(q)}this.destination.next(I)}}var le=Y(4402),pe=Y(5917),De=Y(6215),Re=Y(7574),Ye=Y(3410),ee=Y(8071),ze=Y(1439),Ct=Y(9193),On=Y(2441),Nt=Y(9765),at=Y(5345);function zt(U){return function(I){const q=new It(U),X=I.lift(q);return q.caught=X}}class It{constructor(x){this.selector=x}call(x,I){return I.subscribe(new wn(x,this.selector,this.caught))}}class wn extends at.Ds{constructor(x,I,q){super(x),this.selector=I,this.caught=q}error(x){if(!this.isStopped){let I;try{I=this.selector(x,this.caught)}catch(ce){return void super.error(ce)}this._unsubscribeAndRecycle();const q=new at.IY(this);this.add(q);const X=(0,at.ft)(I,q);X!==q&&this.add(X)}}}var Et=Y(5435),Ke=Y(7393),rt=Y(7108);function it(U){return function(I){return 0===U?(0,Ct.c)():I.lift(new et(U))}}class et{constructor(x){if(this.total=x,this.total<0)throw new rt.W}call(x,I){return I.subscribe(new _t(x,this.total))}}class _t extends Ke.L{constructor(x,I){super(x),this.total=I,this.ring=new Array,this.count=0}_next(x){const I=this.ring,q=this.total,X=this.count++;I.length<q?I.push(x):I[X%q]=x}_complete(){const x=this.destination;let I=this.count;if(I>0){const q=this.count>=this.total?this.total:this.count,X=this.ring;for(let ce=0;ce<q;ce++){const Te=I++%q;x.next(X[Te])}}x.complete()}}var st=Y(4635),tn=Y(5242),an=Y(4487),on=Y(5319);class kt{constructor(x){this.callback=x}call(x,I){return I.subscribe(new Qt(x,this.callback))}}class Qt extends Ke.L{constructor(x,I){super(x),this.add(new on.w(I))}}var Ht=Y(8002),Fn=Y(3190),Cn=Y(5257),ur=Y(9761),zn=Y(2145),Gn=Y(4612),tr=Y(8049),An=Y(9773),Mn=Y(3342),Oi=Y(1307),mn=Y(3282);class Jt{constructor(x,I){this.id=x,this.url=I}}class Zn extends Jt{constructor(x,I,q="imperative",X=null){super(x,I),this.navigationTrigger=q,this.restoredState=X}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Un extends Jt{constructor(x,I,q){super(x,I),this.urlAfterRedirects=q}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Kt extends Jt{constructor(x,I,q){super(x,I),this.reason=q}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pr extends Jt{constructor(x,I,q){super(x,I),this.error=q}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class jr extends Jt{constructor(x,I,q,X){super(x,I),this.urlAfterRedirects=q,this.state=X}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kn extends Jt{constructor(x,I,q,X){super(x,I),this.urlAfterRedirects=q,this.state=X}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tt extends Jt{constructor(x,I,q,X,ce){super(x,I),this.urlAfterRedirects=q,this.state=X,this.shouldActivate=ce}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class He extends Jt{constructor(x,I,q,X){super(x,I),this.urlAfterRedirects=q,this.state=X}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ve extends Jt{constructor(x,I,q,X){super(x,I),this.urlAfterRedirects=q,this.state=X}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mt{constructor(x){this.route=x}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pt{constructor(x){this.route=x}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nn{constructor(x){this.snapshot=x}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class At{constructor(x){this.snapshot=x}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ne{constructor(x){this.snapshot=x}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ft{constructor(x){this.snapshot=x}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vt{constructor(x,I,q){this.routerEvent=x,this.position=I,this.anchor=q}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Dt="primary";class Ut{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const I=this.params[x];return Array.isArray(I)?I[0]:I}return null}getAll(x){if(this.has(x)){const I=this.params[x];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function cn(U){return new Ut(U)}const fn="ngNavigationCancelingError";function Gt(U){const x=Error("NavigationCancelingError: "+U);return x[fn]=!0,x}function Ie(U,x,I){const q=I.path.split("/");if(q.length>U.length||"full"===I.pathMatch&&(x.hasChildren()||q.length<U.length))return null;const X={};for(let ce=0;ce<q.length;ce++){const Te=q[ce],je=U[ce];if(Te.startsWith(":"))X[Te.substring(1)]=je;else if(Te!==je.path)return null}return{consumed:U.slice(0,q.length),posParams:X}}function Je(U,x){const I=U?Object.keys(U):void 0,q=x?Object.keys(x):void 0;if(!I||!q||I.length!=q.length)return!1;let X;for(let ce=0;ce<I.length;ce++)if(X=I[ce],!Xe(U[X],x[X]))return!1;return!0}function Xe(U,x){if(Array.isArray(U)&&Array.isArray(x)){if(U.length!==x.length)return!1;const I=[...U].sort(),q=[...x].sort();return I.every((X,ce)=>q[ce]===X)}return U===x}function Zt(U){return Array.prototype.concat.apply([],U)}function _n(U){return U.length>0?U[U.length-1]:null}function Bn(U,x){for(const I in U)U.hasOwnProperty(I)&&x(U[I],I)}function Vn(U){return(0,c.CqO)(U)?U:(0,c.QGY)(U)?(0,le.D)(Promise.resolve(U)):(0,pe.of)(U)}const Hr={exact:function No(U,x,I){if(!Sr(U.segments,x.segments)||!Nr(U.segments,x.segments,I)||U.numberOfChildren!==x.numberOfChildren)return!1;for(const q in x.children)if(!U.children[q]||!No(U.children[q],x.children[q],I))return!1;return!0},subset:co},Xr={exact:function(U,x){return Je(U,x)},subset:function(U,x){return Object.keys(x).length<=Object.keys(U).length&&Object.keys(x).every(I=>Xe(U[I],x[I]))},ignored:()=>!0};function Dr(U,x,I){return Hr[I.paths](U.root,x.root,I.matrixParams)&&Xr[I.queryParams](U.queryParams,x.queryParams)&&!("exact"===I.fragment&&U.fragment!==x.fragment)}function co(U,x,I){return rs(U,x,x.segments,I)}function rs(U,x,I,q){if(U.segments.length>I.length){const X=U.segments.slice(0,I.length);return!(!Sr(X,I)||x.hasChildren()||!Nr(X,I,q))}if(U.segments.length===I.length){if(!Sr(U.segments,I)||!Nr(U.segments,I,q))return!1;for(const X in x.children)if(!U.children[X]||!co(U.children[X],x.children[X],q))return!1;return!0}{const X=I.slice(0,U.segments.length),ce=I.slice(U.segments.length);return!!(Sr(U.segments,X)&&Nr(U.segments,X,q)&&U.children[Dt])&&rs(U.children[Dt],x,ce,q)}}function Nr(U,x,I){return x.every((q,X)=>Xr[I](U[X].parameters,q.parameters))}class cr{constructor(x,I,q){this.root=x,this.queryParams=I,this.fragment=q}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cn(this.queryParams)),this._queryParamMap}toString(){return Qr.serialize(this)}}class vn{constructor(x,I){this.segments=x,this.children=I,this.parent=null,Bn(I,(q,X)=>q.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Si(this)}}class Vr{constructor(x,I){this.path=x,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=cn(this.parameters)),this._parameterMap}toString(){return Be(this)}}function Sr(U,x){return U.length===x.length&&U.every((I,q)=>I.path===x[q].path)}class ln{}class In{parse(x){const I=new Li(x);return new cr(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(x){var U;return`${`/${Ar(x.root,!0)}`}${function(U){const x=Object.keys(U).map(I=>{const q=U[I];return Array.isArray(q)?q.map(X=>`${Er(I)}=${Er(X)}`).join("&"):`${Er(I)}=${Er(q)}`}).filter(I=>!!I);return x.length?`?${x.join("&")}`:""}(x.queryParams)}${"string"==typeof x.fragment?`#${U=x.fragment,encodeURI(U)}`:""}`}}const Qr=new In;function Si(U){return U.segments.map(x=>Be(x)).join("/")}function Ar(U,x){if(!U.hasChildren())return Si(U);if(x){const I=U.children[Dt]?Ar(U.children[Dt],!1):"",q=[];return Bn(U.children,(X,ce)=>{ce!==Dt&&q.push(`${ce}:${Ar(X,!1)}`)}),q.length>0?`${I}(${q.join("//")})`:I}{const I=function(U,x){let I=[];return Bn(U.children,(q,X)=>{X===Dt&&(I=I.concat(x(q,X)))}),Bn(U.children,(q,X)=>{X!==Dt&&(I=I.concat(x(q,X)))}),I}(U,(q,X)=>X===Dt?[Ar(U.children[Dt],!1)]:[`${X}:${Ar(q,!1)}`]);return 1===Object.keys(U.children).length&&null!=U.children[Dt]?`${Si(U)}/${I[0]}`:`${Si(U)}/(${I.join("//")})`}}function ni(U){return encodeURIComponent(U).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Er(U){return ni(U).replace(/%3B/gi,";")}function so(U){return ni(U).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xn(U){return decodeURIComponent(U)}function Qe(U){return xn(U.replace(/\+/g,"%20"))}function Be(U){return`${so(U.path)}${function(U){return Object.keys(U).map(x=>`;${so(x)}=${so(U[x])}`).join("")}(U.parameters)}`}const St=/^[^\/()?;=#]+/;function pn(U){const x=U.match(St);return x?x[0]:""}const kn=/^[^=?&#]+/,un=/^[^?&#]+/;class Li{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vn([],{}):new vn([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let q={};return this.peekStartsWith("(")&&(q=this.parseParens(!1)),(x.length>0||Object.keys(I).length>0)&&(q[Dt]=new vn(x,I)),q}parseSegment(){const x=pn(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(x),new Vr(xn(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const I=pn(this.remaining);if(!I)return;this.capture(I);let q="";if(this.consumeOptional("=")){const X=pn(this.remaining);X&&(q=X,this.capture(q))}x[xn(I)]=xn(q)}parseQueryParam(x){const I=function(U){const x=U.match(kn);return x?x[0]:""}(this.remaining);if(!I)return;this.capture(I);let q="";if(this.consumeOptional("=")){const Te=function(U){const x=U.match(un);return x?x[0]:""}(this.remaining);Te&&(q=Te,this.capture(q))}const X=Qe(I),ce=Qe(q);if(x.hasOwnProperty(X)){let Te=x[X];Array.isArray(Te)||(Te=[Te],x[X]=Te),Te.push(ce)}else x[X]=ce}parseParens(x){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const q=pn(this.remaining),X=this.remaining[q.length];if("/"!==X&&")"!==X&&";"!==X)throw new Error(`Cannot parse url '${this.url}'`);let ce;q.indexOf(":")>-1?(ce=q.substr(0,q.indexOf(":")),this.capture(ce),this.capture(":")):x&&(ce=Dt);const Te=this.parseChildren();I[ce]=1===Object.keys(Te).length?Te[Dt]:new vn([],Te),this.consumeOptional("//")}return I}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new Error(`Expected "${x}".`)}}class gr{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const I=this.pathFromRoot(x);return I.length>1?I[I.length-2]:null}children(x){const I=ki(x,this._root);return I?I.children.map(q=>q.value):[]}firstChild(x){const I=ki(x,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(x){const I=eo(x,this._root);return I.length<2?[]:I[I.length-2].children.map(X=>X.value).filter(X=>X!==x)}pathFromRoot(x){return eo(x,this._root).map(I=>I.value)}}function ki(U,x){if(U===x.value)return x;for(const I of x.children){const q=ki(U,I);if(q)return q}return null}function eo(U,x){if(U===x.value)return[x];for(const I of x.children){const q=eo(U,I);if(q.length)return q.unshift(x),q}return[]}class Gr{constructor(x,I){this.value=x,this.children=I}toString(){return`TreeNode(${this.value})`}}function Fi(U){const x={};return U&&U.children.forEach(I=>x[I.value.outlet]=I),x}class sr extends gr{constructor(x,I){super(x),this.snapshot=I,ui(this,x)}toString(){return this.snapshot.toString()}}function jn(U,x){const I=function(U,x){const Te=new Vi([],{},{},"",{},Dt,x,null,U.root,-1,{});return new Zi("",new Gr(Te,[]))}(U,x),q=new De.X([new Vr("",{})]),X=new De.X({}),ce=new De.X({}),Te=new De.X({}),je=new De.X(""),bt=new Mr(q,X,Te,je,ce,Dt,x,I.root);return bt.snapshot=I.root,new sr(new Gr(bt,[]),I)}class Mr{constructor(x,I,q,X,ce,Te,je,bt){this.url=x,this.params=I,this.queryParams=q,this.fragment=X,this.data=ce,this.outlet=Te,this.component=je,this._futureSnapshot=bt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ht.U)(x=>cn(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ht.U)(x=>cn(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ui(U,x="emptyOnly"){const I=U.pathFromRoot;let q=0;if("always"!==x)for(q=I.length-1;q>=1;){const X=I[q],ce=I[q-1];if(X.routeConfig&&""===X.routeConfig.path)q--;else{if(ce.component)break;q--}}return function(U){return U.reduce((x,I)=>({params:Object.assign(Object.assign({},x.params),I.params),data:Object.assign(Object.assign({},x.data),I.data),resolve:Object.assign(Object.assign({},x.resolve),I._resolvedData)}),{params:{},data:{},resolve:{}})}(I.slice(q))}class Vi{constructor(x,I,q,X,ce,Te,je,bt,dn,ar,qn){this.url=x,this.params=I,this.queryParams=q,this.fragment=X,this.data=ce,this.outlet=Te,this.component=je,this.routeConfig=bt,this._urlSegment=dn,this._lastPathIndex=ar,this._resolve=qn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(q=>q.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zi extends gr{constructor(x,I){super(I),this.url=x,ui(this,I)}toString(){return Zo(this._root)}}function ui(U,x){x.value._routerState=U,x.children.forEach(I=>ui(U,I))}function Zo(U){const x=U.children.length>0?` { ${U.children.map(Zo).join(", ")} } `:"";return`${U.value}${x}`}function Lr(U){if(U.snapshot){const x=U.snapshot,I=U._futureSnapshot;U.snapshot=I,Je(x.queryParams,I.queryParams)||U.queryParams.next(I.queryParams),x.fragment!==I.fragment&&U.fragment.next(I.fragment),Je(x.params,I.params)||U.params.next(I.params),function(U,x){if(U.length!==x.length)return!1;for(let I=0;I<U.length;++I)if(!Je(U[I],x[I]))return!1;return!0}(x.url,I.url)||U.url.next(I.url),Je(x.data,I.data)||U.data.next(I.data)}else U.snapshot=U._futureSnapshot,U.data.next(U._futureSnapshot.data)}function is(U,x){return Je(U.params,x.params)&&function(U,x){return Sr(U,x)&&U.every((I,q)=>Je(I.parameters,x[q].parameters))}(U.url,x.url)&&!(!U.parent!=!x.parent)&&(!U.parent||is(U.parent,x.parent))}function Oo(U,x,I){if(I&&U.shouldReuseRoute(x.value,I.value.snapshot)){const q=I.value;q._futureSnapshot=x.value;const X=function(U,x,I){return x.children.map(q=>{for(const X of I.children)if(U.shouldReuseRoute(q.value,X.value.snapshot))return Oo(U,q,X);return Oo(U,q)})}(U,x,I);return new Gr(q,X)}{if(U.shouldAttach(x.value)){const ce=U.retrieve(x.value);if(null!==ce){const Te=ce.route;return Co(x,Te),Te}}const q=function(U){return new Mr(new De.X(U.url),new De.X(U.params),new De.X(U.queryParams),new De.X(U.fragment),new De.X(U.data),U.outlet,U.component,U)}(x.value),X=x.children.map(ce=>Oo(U,ce));return new Gr(q,X)}}function Co(U,x){if(U.value.routeConfig!==x.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(U.children.length!==x.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");x.value._futureSnapshot=U.value;for(let I=0;I<U.children.length;++I)Co(U.children[I],x.children[I])}function xo(U){return"object"==typeof U&&null!=U&&!U.outlets&&!U.segmentPath}function li(U){return"object"==typeof U&&null!=U&&U.outlets}function ci(U,x,I,q,X){let ce={};return q&&Bn(q,(Te,je)=>{ce[je]=Array.isArray(Te)?Te.map(bt=>`${bt}`):`${Te}`}),new cr(I.root===U?x:nr(I.root,U,x),ce,X)}function nr(U,x,I){const q={};return Bn(U.children,(X,ce)=>{q[ce]=X===x?I:nr(X,x,I)}),new vn(U.segments,q)}class Yi{constructor(x,I,q){if(this.isAbsolute=x,this.numberOfDoubleDots=I,this.commands=q,x&&q.length>0&&xo(q[0]))throw new Error("Root segment cannot have matrix parameters");const X=q.find(li);if(X&&X!==_n(q))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class to{constructor(x,I,q){this.segmentGroup=x,this.processChildren=I,this.index=q}}function wo(U,x,I){if(U||(U=new vn([],{})),0===U.segments.length&&U.hasChildren())return ne(U,x,I);const q=function(U,x,I){let q=0,X=x;const ce={match:!1,pathIndex:0,commandIndex:0};for(;X<U.segments.length;){if(q>=I.length)return ce;const Te=U.segments[X],je=I[q];if(li(je))break;const bt=`${je}`,dn=q<I.length-1?I[q+1]:null;if(X>0&&void 0===bt)break;if(bt&&dn&&"object"==typeof dn&&void 0===dn.outlets){if(!Vt(bt,dn,Te))return ce;q+=2}else{if(!Vt(bt,{},Te))return ce;q++}X++}return{match:!0,pathIndex:X,commandIndex:q}}(U,x,I),X=I.slice(q.commandIndex);if(q.match&&q.pathIndex<U.segments.length){const ce=new vn(U.segments.slice(0,q.pathIndex),{});return ce.children[Dt]=new vn(U.segments.slice(q.pathIndex),U.children),ne(ce,0,X)}return q.match&&0===X.length?new vn(U.segments,{}):q.match&&!U.hasChildren()?H(U,x,I):q.match?ne(U,0,X):H(U,x,I)}function ne(U,x,I){if(0===I.length)return new vn(U.segments,{});{const q=function(U){return li(U[0])?U[0].outlets:{[Dt]:U}}(I),X={};return Bn(q,(ce,Te)=>{"string"==typeof ce&&(ce=[ce]),null!==ce&&(X[Te]=wo(U.children[Te],x,ce))}),Bn(U.children,(ce,Te)=>{void 0===q[Te]&&(X[Te]=ce)}),new vn(U.segments,X)}}function H(U,x,I){const q=U.segments.slice(0,x);let X=0;for(;X<I.length;){const ce=I[X];if(li(ce)){const bt=ge(ce.outlets);return new vn(q,bt)}if(0===X&&xo(I[0])){q.push(new Vr(U.segments[x].path,pt(I[0]))),X++;continue}const Te=li(ce)?ce.outlets[Dt]:`${ce}`,je=X<I.length-1?I[X+1]:null;Te&&je&&xo(je)?(q.push(new Vr(Te,pt(je))),X+=2):(q.push(new Vr(Te,{})),X++)}return new vn(q,{})}function ge(U){const x={};return Bn(U,(I,q)=>{"string"==typeof I&&(I=[I]),null!==I&&(x[q]=H(new vn([],{}),0,I))}),x}function pt(U){const x={};return Bn(U,(I,q)=>x[q]=`${I}`),x}function Vt(U,x,I){return U==I.path&&Je(x,I.parameters)}class vr{constructor(x,I,q,X){this.routeReuseStrategy=x,this.futureState=I,this.currState=q,this.forwardEvent=X}activate(x){const I=this.futureState._root,q=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,q,x),Lr(this.futureState.root),this.activateChildRoutes(I,q,x)}deactivateChildRoutes(x,I,q){const X=Fi(I);x.children.forEach(ce=>{const Te=ce.value.outlet;this.deactivateRoutes(ce,X[Te],q),delete X[Te]}),Bn(X,(ce,Te)=>{this.deactivateRouteAndItsChildren(ce,q)})}deactivateRoutes(x,I,q){const X=x.value,ce=I?I.value:null;if(X===ce)if(X.component){const Te=q.getContext(X.outlet);Te&&this.deactivateChildRoutes(x,I,Te.children)}else this.deactivateChildRoutes(x,I,q);else ce&&this.deactivateRouteAndItsChildren(I,q)}deactivateRouteAndItsChildren(x,I){this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,I):this.deactivateRouteAndOutlet(x,I)}detachAndStoreRouteSubtree(x,I){const q=I.getContext(x.value.outlet);if(q&&q.outlet){const X=q.outlet.detach(),ce=q.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:X,route:x,contexts:ce})}}deactivateRouteAndOutlet(x,I){const q=I.getContext(x.value.outlet),X=q&&x.value.component?q.children:I,ce=Fi(x);for(const Te of Object.keys(ce))this.deactivateRouteAndItsChildren(ce[Te],X);q&&q.outlet&&(q.outlet.deactivate(),q.children.onOutletDeactivated(),q.attachRef=null,q.resolver=null,q.route=null)}activateChildRoutes(x,I,q){const X=Fi(I);x.children.forEach(ce=>{this.activateRoutes(ce,X[ce.value.outlet],q),this.forwardEvent(new ft(ce.value.snapshot))}),x.children.length&&this.forwardEvent(new At(x.value.snapshot))}activateRoutes(x,I,q){const X=x.value,ce=I?I.value:null;if(Lr(X),X===ce)if(X.component){const Te=q.getOrCreateContext(X.outlet);this.activateChildRoutes(x,I,Te.children)}else this.activateChildRoutes(x,I,q);else if(X.component){const Te=q.getOrCreateContext(X.outlet);if(this.routeReuseStrategy.shouldAttach(X.snapshot)){const je=this.routeReuseStrategy.retrieve(X.snapshot);this.routeReuseStrategy.store(X.snapshot,null),Te.children.onOutletReAttached(je.contexts),Te.attachRef=je.componentRef,Te.route=je.route.value,Te.outlet&&Te.outlet.attach(je.componentRef,je.route.value),lr(je.route)}else{const je=function(U){for(let x=U.parent;x;x=x.parent){const I=x.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig;if(I&&I.component)return null}return null}(X.snapshot),bt=je?je.module.componentFactoryResolver:null;Te.attachRef=null,Te.route=X,Te.resolver=bt,Te.outlet&&Te.outlet.activateWith(X,bt),this.activateChildRoutes(x,null,Te.children)}}else this.activateChildRoutes(x,null,q)}}function lr(U){Lr(U.value),U.children.forEach(lr)}class Eo{constructor(x,I){this.routes=x,this.module=I}}function wi(U){return"function"==typeof U}function Ur(U){return U instanceof cr}const Z=Symbol("INITIAL_VALUE");function he(){return(0,Fn.w)(U=>function(...U){let x,I;return(0,K.K)(U[U.length-1])&&(I=U.pop()),"function"==typeof U[U.length-1]&&(x=U.pop()),1===U.length&&(0,w.k)(U[0])&&(U=U[0]),(0,xe.n)(U,I).lift(new re(x))}(U.map(x=>x.pipe((0,Cn.q)(1),(0,ur.O)(Z)))).pipe((0,zn.R)((x,I)=>{let q=!1;return I.reduce((X,ce,Te)=>X!==Z?X:(ce===Z&&(q=!0),q||!1!==ce&&Te!==I.length-1&&!Ur(ce)?X:ce),x)},Z),(0,Et.h)(x=>x!==Z),(0,Ht.U)(x=>Ur(x)?x:!0===x),(0,Cn.q)(1)))}let P=(()=>{class U{}return U.\u0275fac=function(I){return new(I||U)},U.\u0275cmp=c.Xpm({type:U,selectors:[["ng-component"]],decls:1,vars:0,template:function(I,q){1&I&&c._UZ(0,"router-outlet")},directives:function(){return[Zu]},encapsulation:2}),U})();function z(U,x=""){for(let I=0;I<U.length;I++){const q=U[I];F(q,J(x,q))}}function F(U,x){U.children&&z(U.children,x)}function J(U,x){return x?U||x.path?U&&!x.path?`${U}/`:!U&&x.path?x.path:`${U}/${x.path}`:"":U}function ye(U){const x=U.children&&U.children.map(ye),I=x?Object.assign(Object.assign({},U),{children:x}):Object.assign({},U);return!I.component&&(x||I.loadChildren)&&I.outlet&&I.outlet!==Dt&&(I.component=P),I}function Fe(U){return U.outlet||Dt}function tt(U,x){const I=U.filter(q=>Fe(q)===x);return I.push(...U.filter(q=>Fe(q)!==x)),I}const j={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function B(U,x,I){var q;if(""===x.path)return"full"===x.pathMatch&&(U.hasChildren()||I.length>0)?Object.assign({},j):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const ce=(x.matcher||Ie)(I,U,x);if(!ce)return Object.assign({},j);const Te={};Bn(ce.posParams,(bt,dn)=>{Te[dn]=bt.path});const je=ce.consumed.length>0?Object.assign(Object.assign({},Te),ce.consumed[ce.consumed.length-1].parameters):Te;return{matched:!0,consumedSegments:ce.consumed,lastChild:ce.consumed.length,parameters:je,positionalParamSegments:null!==(q=ce.posParams)&&void 0!==q?q:{}}}function L(U,x,I,q,X="corrected"){if(I.length>0&&function(U,x,I){return I.some(q=>fr(U,x,q)&&Fe(q)!==Dt)}(U,I,q)){const Te=new vn(x,function(U,x,I,q){const X={};X[Dt]=q,q._sourceSegment=U,q._segmentIndexShift=x.length;for(const ce of I)if(""===ce.path&&Fe(ce)!==Dt){const Te=new vn([],{});Te._sourceSegment=U,Te._segmentIndexShift=x.length,X[Fe(ce)]=Te}return X}(U,x,q,new vn(I,U.children)));return Te._sourceSegment=U,Te._segmentIndexShift=x.length,{segmentGroup:Te,slicedSegments:[]}}if(0===I.length&&function(U,x,I){return I.some(q=>fr(U,x,q))}(U,I,q)){const Te=new vn(U.segments,function(U,x,I,q,X,ce){const Te={};for(const je of q)if(fr(U,I,je)&&!X[Fe(je)]){const bt=new vn([],{});bt._sourceSegment=U,bt._segmentIndexShift="legacy"===ce?U.segments.length:x.length,Te[Fe(je)]=bt}return Object.assign(Object.assign({},X),Te)}(U,x,I,q,U.children,X));return Te._sourceSegment=U,Te._segmentIndexShift=x.length,{segmentGroup:Te,slicedSegments:I}}const ce=new vn(U.segments,U.children);return ce._sourceSegment=U,ce._segmentIndexShift=x.length,{segmentGroup:ce,slicedSegments:I}}function fr(U,x,I){return(!(U.hasChildren()||x.length>0)||"full"!==I.pathMatch)&&""===I.path}function qr(U,x,I,q){return!!(Fe(U)===q||q!==Dt&&fr(x,I,U))&&("**"===U.path||B(x,U,I).matched)}function mr(U,x,I){return 0===x.length&&!U.children[I]}class zr{constructor(x){this.segmentGroup=x||null}}class di{constructor(x){this.urlTree=x}}function Tn(U){return new Re.y(x=>x.error(new zr(U)))}function ro(U){return new Re.y(x=>x.error(new di(U)))}function ms(U){return new Re.y(x=>x.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${U}'`)))}class Gu{constructor(x,I,q,X,ce){this.configLoader=I,this.urlSerializer=q,this.urlTree=X,this.config=ce,this.allowRedirects=!0,this.ngModule=x.get(c.h0i)}apply(){const x=L(this.urlTree.root,[],[],this.config).segmentGroup,I=new vn(x.segments,x.children);return this.expandSegmentGroup(this.ngModule,this.config,I,Dt).pipe((0,Ht.U)(ce=>this.createUrlTree(Va(ce),this.urlTree.queryParams,this.urlTree.fragment))).pipe(zt(ce=>{if(ce instanceof di)return this.allowRedirects=!1,this.match(ce.urlTree);throw ce instanceof zr?this.noMatchError(ce):ce}))}match(x){return this.expandSegmentGroup(this.ngModule,this.config,x.root,Dt).pipe((0,Ht.U)(X=>this.createUrlTree(Va(X),x.queryParams,x.fragment))).pipe(zt(X=>{throw X instanceof zr?this.noMatchError(X):X}))}noMatchError(x){return new Error(`Cannot match any routes. URL Segment: '${x.segmentGroup}'`)}createUrlTree(x,I,q){const X=x.segments.length>0?new vn([],{[Dt]:x}):x;return new cr(X,I,q)}expandSegmentGroup(x,I,q,X){return 0===q.segments.length&&q.hasChildren()?this.expandChildren(x,I,q).pipe((0,Ht.U)(ce=>new vn([],ce))):this.expandSegment(x,q,I,q.segments,X,!0)}expandChildren(x,I,q){const X=[];for(const ce of Object.keys(q.children))"primary"===ce?X.unshift(ce):X.push(ce);return(0,le.D)(X).pipe((0,Gn.b)(ce=>{const Te=q.children[ce],je=tt(I,ce);return this.expandSegmentGroup(x,je,Te,ce).pipe((0,Ht.U)(bt=>({segment:bt,outlet:ce})))}),(0,zn.R)((ce,Te)=>(ce[Te.outlet]=Te.segment,ce),{}),function(U,x){const I=arguments.length>=2;return q=>q.pipe(U?(0,Et.h)((X,ce)=>U(X,ce,q)):an.y,it(1),I?(0,tn.d)(x):(0,st.T)(()=>new Ye.K))}())}expandSegment(x,I,q,X,ce,Te){return(0,le.D)(q).pipe((0,Gn.b)(je=>this.expandSegmentAgainstRoute(x,I,q,je,X,ce,Te).pipe(zt(dn=>{if(dn instanceof zr)return(0,pe.of)(null);throw dn}))),(0,tr.P)(je=>!!je),zt((je,bt)=>{if(je instanceof Ye.K||"EmptyError"===je.name){if(mr(I,X,ce))return(0,pe.of)(new vn([],{}));throw new zr(I)}throw je}))}expandSegmentAgainstRoute(x,I,q,X,ce,Te,je){return qr(X,I,ce,Te)?void 0===X.redirectTo?this.matchSegmentAgainstRoute(x,I,X,ce,Te):je&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,I,q,X,ce,Te):Tn(I):Tn(I)}expandSegmentAgainstRouteUsingRedirect(x,I,q,X,ce,Te){return"**"===X.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,q,X,Te):this.expandRegularSegmentAgainstRouteUsingRedirect(x,I,q,X,ce,Te)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,I,q,X){const ce=this.applyRedirectCommands([],q.redirectTo,{});return q.redirectTo.startsWith("/")?ro(ce):this.lineralizeSegments(q,ce).pipe((0,An.zg)(Te=>{const je=new vn(Te,{});return this.expandSegment(x,je,I,Te,X,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,I,q,X,ce,Te){const{matched:je,consumedSegments:bt,lastChild:dn,positionalParamSegments:ar}=B(I,X,ce);if(!je)return Tn(I);const qn=this.applyRedirectCommands(bt,X.redirectTo,ar);return X.redirectTo.startsWith("/")?ro(qn):this.lineralizeSegments(X,qn).pipe((0,An.zg)(xr=>this.expandSegment(x,I,q,xr.concat(ce.slice(dn)),Te,!1)))}matchSegmentAgainstRoute(x,I,q,X,ce){if("**"===q.path)return q.loadChildren?(q._loadedConfig?(0,pe.of)(q._loadedConfig):this.configLoader.load(x.injector,q)).pipe((0,Ht.U)(xr=>(q._loadedConfig=xr,new vn(X,{})))):(0,pe.of)(new vn(X,{}));const{matched:Te,consumedSegments:je,lastChild:bt}=B(I,q,X);if(!Te)return Tn(I);const dn=X.slice(bt);return this.getChildConfig(x,q,X).pipe((0,An.zg)(qn=>{const xr=qn.module,Hn=qn.routes,{segmentGroup:po,slicedSegments:Vo}=L(I,je,dn,Hn),go=new vn(po.segments,po.children);if(0===Vo.length&&go.hasChildren())return this.expandChildren(xr,Hn,go).pipe((0,Ht.U)(cu=>new vn(je,cu)));if(0===Hn.length&&0===Vo.length)return(0,pe.of)(new vn(je,{}));const Bs=Fe(q)===ce;return this.expandSegment(xr,go,Hn,Vo,Bs?Dt:ce,!0).pipe((0,Ht.U)(Yo=>new vn(je.concat(Yo.segments),Yo.children)))}))}getChildConfig(x,I,q){return I.children?(0,pe.of)(new Eo(I.children,x)):I.loadChildren?void 0!==I._loadedConfig?(0,pe.of)(I._loadedConfig):this.runCanLoadGuards(x.injector,I,q).pipe((0,An.zg)(X=>{return X?this.configLoader.load(x.injector,I).pipe((0,Ht.U)(ce=>(I._loadedConfig=ce,ce))):(U=I,new Re.y(x=>x.error(Gt(`Cannot load children because the guard of the route "path: '${U.path}'" returned false`))));var U})):(0,pe.of)(new Eo([],x))}runCanLoadGuards(x,I,q){const X=I.canLoad;if(!X||0===X.length)return(0,pe.of)(!0);const ce=X.map(Te=>{const je=x.get(Te);let bt;if((U=je)&&wi(U.canLoad))bt=je.canLoad(I,q);else{if(!wi(je))throw new Error("Invalid CanLoad guard");bt=je(I,q)}var U;return Vn(bt)});return(0,pe.of)(ce).pipe(he(),(0,Mn.b)(Te=>{if(!Ur(Te))return;const je=Gt(`Redirecting to "${this.urlSerializer.serialize(Te)}"`);throw je.url=Te,je}),(0,Ht.U)(Te=>!0===Te))}lineralizeSegments(x,I){let q=[],X=I.root;for(;;){if(q=q.concat(X.segments),0===X.numberOfChildren)return(0,pe.of)(q);if(X.numberOfChildren>1||!X.children[Dt])return ms(x.redirectTo);X=X.children[Dt]}}applyRedirectCommands(x,I,q){return this.applyRedirectCreatreUrlTree(I,this.urlSerializer.parse(I),x,q)}applyRedirectCreatreUrlTree(x,I,q,X){const ce=this.createSegmentGroup(x,I.root,q,X);return new cr(ce,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(x,I){const q={};return Bn(x,(X,ce)=>{if("string"==typeof X&&X.startsWith(":")){const je=X.substring(1);q[ce]=I[je]}else q[ce]=X}),q}createSegmentGroup(x,I,q,X){const ce=this.createSegments(x,I.segments,q,X);let Te={};return Bn(I.children,(je,bt)=>{Te[bt]=this.createSegmentGroup(x,je,q,X)}),new vn(ce,Te)}createSegments(x,I,q,X){return I.map(ce=>ce.path.startsWith(":")?this.findPosParam(x,ce,X):this.findOrReturn(ce,q))}findPosParam(x,I,q){const X=q[I.path.substring(1)];if(!X)throw new Error(`Cannot redirect to '${x}'. Cannot find '${I.path}'.`);return X}findOrReturn(x,I){let q=0;for(const X of I){if(X.path===x.path)return I.splice(q),X;q++}return x}}function Va(U){const x={};for(const q of Object.keys(U.children)){const ce=Va(U.children[q]);(ce.segments.length>0||ce.hasChildren())&&(x[q]=ce)}return function(U){if(1===U.numberOfChildren&&U.children[Dt]){const x=U.children[Dt];return new vn(U.segments.concat(x.segments),x.children)}return U}(new vn(U.segments,x))}class br{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class _s{constructor(x,I){this.component=x,this.route=I}}function Ni(U,x,I){const q=U._root;return ie(q,x?x._root:null,I,[q.value])}function Is(U,x,I){const q=function(U){if(!U)return null;for(let x=U.parent;x;x=x.parent){const I=x.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig}return null}(x);return(q?q.module.injector:I).get(U)}function ie(U,x,I,q,X={canDeactivateChecks:[],canActivateChecks:[]}){const ce=Fi(x);return U.children.forEach(Te=>{(function(U,x,I,q,X={canDeactivateChecks:[],canActivateChecks:[]}){const ce=U.value,Te=x?x.value:null,je=I?I.getContext(U.value.outlet):null;if(Te&&ce.routeConfig===Te.routeConfig){const bt=function(U,x,I){if("function"==typeof I)return I(U,x);switch(I){case"pathParamsChange":return!Sr(U.url,x.url);case"pathParamsOrQueryParamsChange":return!Sr(U.url,x.url)||!Je(U.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!is(U,x)||!Je(U.queryParams,x.queryParams);case"paramsChange":default:return!is(U,x)}}(Te,ce,ce.routeConfig.runGuardsAndResolvers);bt?X.canActivateChecks.push(new br(q)):(ce.data=Te.data,ce._resolvedData=Te._resolvedData),ie(U,x,ce.component?je?je.children:null:I,q,X),bt&&je&&je.outlet&&je.outlet.isActivated&&X.canDeactivateChecks.push(new _s(je.outlet.component,Te))}else Te&&V(x,je,X),X.canActivateChecks.push(new br(q)),ie(U,null,ce.component?je?je.children:null:I,q,X)})(Te,ce[Te.value.outlet],I,q.concat([Te.value]),X),delete ce[Te.value.outlet]}),Bn(ce,(Te,je)=>V(Te,I.getContext(je),X)),X}function V(U,x,I){const q=Fi(U),X=U.value;Bn(q,(ce,Te)=>{V(ce,X.component?x?x.children.getContext(Te):null:x,I)}),I.canDeactivateChecks.push(new _s(X.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,X))}class dr{}function Ir(U){return new Re.y(x=>x.error(U))}class Nn{constructor(x,I,q,X,ce,Te){this.rootComponentType=x,this.config=I,this.urlTree=q,this.url=X,this.paramsInheritanceStrategy=ce,this.relativeLinkResolution=Te}recognize(){const x=L(this.urlTree.root,[],[],this.config.filter(Te=>void 0===Te.redirectTo),this.relativeLinkResolution).segmentGroup,I=this.processSegmentGroup(this.config,x,Dt);if(null===I)return null;const q=new Vi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Dt,this.rootComponentType,null,this.urlTree.root,-1,{}),X=new Gr(q,I),ce=new Zi(this.url,X);return this.inheritParamsAndData(ce._root),ce}inheritParamsAndData(x){const I=x.value,q=Ui(I,this.paramsInheritanceStrategy);I.params=Object.freeze(q.params),I.data=Object.freeze(q.data),x.children.forEach(X=>this.inheritParamsAndData(X))}processSegmentGroup(x,I,q){return 0===I.segments.length&&I.hasChildren()?this.processChildren(x,I):this.processSegment(x,I,I.segments,q)}processChildren(x,I){const q=[];for(const ce of Object.keys(I.children)){const Te=I.children[ce],je=tt(x,ce),bt=this.processSegmentGroup(je,Te,ce);if(null===bt)return null;q.push(...bt)}const X=io(q);return X.sort((x,I)=>x.value.outlet===Dt?-1:I.value.outlet===Dt?1:x.value.outlet.localeCompare(I.value.outlet)),X}processSegment(x,I,q,X){for(const ce of x){const Te=this.processSegmentAgainstRoute(ce,I,q,X);if(null!==Te)return Te}return mr(I,q,X)?[]:null}processSegmentAgainstRoute(x,I,q,X){if(x.redirectTo||!qr(x,I,q,X))return null;let ce,Te=[],je=[];if("**"===x.path){const Hn=q.length>0?_n(q).parameters:{};ce=new Vi(q,Hn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,pi(x),Fe(x),x.component,x,Po(I),To(I)+q.length,Ro(x))}else{const Hn=B(I,x,q);if(!Hn.matched)return null;Te=Hn.consumedSegments,je=q.slice(Hn.lastChild),ce=new Vi(Te,Hn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,pi(x),Fe(x),x.component,x,Po(I),To(I)+Te.length,Ro(x))}const bt=(U=x).children?U.children:U.loadChildren?U._loadedConfig.routes:[],{segmentGroup:dn,slicedSegments:ar}=L(I,Te,je,bt.filter(Hn=>void 0===Hn.redirectTo),this.relativeLinkResolution);var U;if(0===ar.length&&dn.hasChildren()){const Hn=this.processChildren(bt,dn);return null===Hn?null:[new Gr(ce,Hn)]}if(0===bt.length&&0===ar.length)return[new Gr(ce,[])];const qn=Fe(x)===X,xr=this.processSegment(bt,dn,ar,qn?Dt:X);return null===xr?null:[new Gr(ce,xr)]}}function Br(U){const x=U.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function io(U){const x=[],I=new Set;for(const q of U){if(!Br(q)){x.push(q);continue}const X=x.find(ce=>q.value.routeConfig===ce.value.routeConfig);void 0!==X?(X.children.push(...q.children),I.add(X)):x.push(q)}for(const q of I){const X=io(q.children);x.push(new Gr(q.value,X))}return x.filter(q=>!I.has(q))}function Po(U){let x=U;for(;x._sourceSegment;)x=x._sourceSegment;return x}function To(U){let x=U,I=x._segmentIndexShift?x._segmentIndexShift:0;for(;x._sourceSegment;)x=x._sourceSegment,I+=x._segmentIndexShift?x._segmentIndexShift:0;return I-1}function pi(U){return U.data||{}}function Ro(U){return U.resolve||{}}function Qi(U){return(0,Fn.w)(x=>{const I=U(x);return I?(0,le.D)(I).pipe((0,Ht.U)(()=>x)):(0,pe.of)(x)})}class Pn extends class{shouldDetach(x){return!1}store(x,I){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,I){return x.routeConfig===I.routeConfig}}{}const Qn=new c.OlP("ROUTES");class Rr{constructor(x,I,q,X){this.loader=x,this.compiler=I,this.onLoadStartListener=q,this.onLoadEndListener=X}load(x,I){if(I._loader$)return I._loader$;this.onLoadStartListener&&this.onLoadStartListener(I);const X=this.loadModuleFactory(I.loadChildren).pipe((0,Ht.U)(ce=>{this.onLoadEndListener&&this.onLoadEndListener(I);const Te=ce.create(x);return new Eo(Zt(Te.injector.get(Qn,void 0,c.XFs.Self|c.XFs.Optional)).map(ye),Te)}),zt(ce=>{throw I._loader$=void 0,ce}));return I._loader$=new On.c(X,()=>new Nt.xQ).pipe((0,Oi.x)()),I._loader$}loadModuleFactory(x){return"string"==typeof x?(0,le.D)(this.loader.load(x)):Vn(x()).pipe((0,An.zg)(I=>I instanceof c.YKP?(0,pe.of)(I):(0,le.D)(this.compiler.compileModuleAsync(I))))}}class Tr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ai,this.attachRef=null}}class Ai{constructor(){this.contexts=new Map}onChildOutletCreated(x,I){const q=this.getOrCreateContext(x);q.outlet=I,this.contexts.set(x,q)}onChildOutletDestroyed(x){const I=this.getContext(x);I&&(I.outlet=null,I.attachRef=null)}onOutletDeactivated(){const x=this.contexts;return this.contexts=new Map,x}onOutletReAttached(x){this.contexts=x}getOrCreateContext(x){let I=this.getContext(x);return I||(I=new Tr,this.contexts.set(x,I)),I}getContext(x){return this.contexts.get(x)||null}}class ao{shouldProcessUrl(x){return!0}extract(x){return x}merge(x,I){return x}}function ei(U){throw U}function ta(U,x,I){return x.parse("/")}function Mi(U,x){return(0,pe.of)(null)}const Us={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ji={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let oi=(()=>{class U{constructor(I,q,X,ce,Te,je,bt,dn){this.rootComponentType=I,this.urlSerializer=q,this.rootContexts=X,this.location=ce,this.config=dn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Nt.xQ,this.errorHandler=ei,this.malformedUriErrorHandler=ta,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Mi,afterPreactivation:Mi},this.urlHandlingStrategy=new ao,this.routeReuseStrategy=new Pn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Te.get(c.h0i),this.console=Te.get(c.c2e);const xr=Te.get(c.R0b);this.isNgZoneEnabled=xr instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(dn),this.currentUrlTree=new cr(new vn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Rr(je,bt,Hn=>this.triggerEvent(new Mt(Hn)),Hn=>this.triggerEvent(new Pt(Hn))),this.routerState=jn(this.currentUrlTree,this.rootComponentType),this.transitions=new De.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var I;return null===(I=this.location.getState())||void 0===I?void 0:I.\u0275routerPageId}setupNavigations(I){const q=this.events;return I.pipe((0,Et.h)(X=>0!==X.id),(0,Ht.U)(X=>Object.assign(Object.assign({},X),{extractedUrl:this.urlHandlingStrategy.extract(X.rawUrl)})),(0,Fn.w)(X=>{let ce=!1,Te=!1;return(0,pe.of)(X).pipe((0,Mn.b)(je=>{this.currentNavigation={id:je.id,initialUrl:je.currentRawUrl,extractedUrl:je.extractedUrl,trigger:je.source,extras:je.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Fn.w)(je=>{const bt=this.browserUrlTree.toString(),dn=!this.navigated||je.extractedUrl.toString()!==bt||bt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||dn)&&this.urlHandlingStrategy.shouldProcessUrl(je.rawUrl))return ma(je.source)&&(this.browserUrlTree=je.extractedUrl),(0,pe.of)(je).pipe((0,Fn.w)(qn=>{const xr=this.transitions.getValue();return q.next(new Zn(qn.id,this.serializeUrl(qn.extractedUrl),qn.source,qn.restoredState)),xr!==this.transitions.getValue()?Ct.E:Promise.resolve(qn)}),function(U,x,I,q){return(0,Fn.w)(X=>function(U,x,I,q,X){return new Gu(U,x,I,q,X).apply()}(U,x,I,X.extractedUrl,q).pipe((0,Ht.U)(ce=>Object.assign(Object.assign({},X),{urlAfterRedirects:ce}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Mn.b)(qn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:qn.urlAfterRedirects})}),function(U,x,I,q,X){return(0,An.zg)(ce=>function(U,x,I,q,X="emptyOnly",ce="legacy"){try{const Te=new Nn(U,x,I,q,X,ce).recognize();return null===Te?Ir(new dr):(0,pe.of)(Te)}catch(Te){return Ir(Te)}}(U,x,ce.urlAfterRedirects,I(ce.urlAfterRedirects),q,X).pipe((0,Ht.U)(Te=>Object.assign(Object.assign({},ce),{targetSnapshot:Te}))))}(this.rootComponentType,this.config,qn=>this.serializeUrl(qn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Mn.b)(qn=>{"eager"===this.urlUpdateStrategy&&(qn.extras.skipLocationChange||this.setBrowserUrl(qn.urlAfterRedirects,qn),this.browserUrlTree=qn.urlAfterRedirects);const xr=new jr(qn.id,this.serializeUrl(qn.extractedUrl),this.serializeUrl(qn.urlAfterRedirects),qn.targetSnapshot);q.next(xr)}));if(dn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:xr,extractedUrl:Hn,source:po,restoredState:Vo,extras:go}=je,Bs=new Zn(xr,this.serializeUrl(Hn),po,Vo);q.next(Bs);const Wo=jn(Hn,this.rootComponentType).snapshot;return(0,pe.of)(Object.assign(Object.assign({},je),{targetSnapshot:Wo,urlAfterRedirects:Hn,extras:Object.assign(Object.assign({},go),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=je.rawUrl,this.browserUrlTree=je.urlAfterRedirects,je.resolve(null),Ct.E}),Qi(je=>{const{targetSnapshot:bt,id:dn,extractedUrl:ar,rawUrl:qn,extras:{skipLocationChange:xr,replaceUrl:Hn}}=je;return this.hooks.beforePreactivation(bt,{navigationId:dn,appliedUrlTree:ar,rawUrlTree:qn,skipLocationChange:!!xr,replaceUrl:!!Hn})}),(0,Mn.b)(je=>{const bt=new Kn(je.id,this.serializeUrl(je.extractedUrl),this.serializeUrl(je.urlAfterRedirects),je.targetSnapshot);this.triggerEvent(bt)}),(0,Ht.U)(je=>Object.assign(Object.assign({},je),{guards:Ni(je.targetSnapshot,je.currentSnapshot,this.rootContexts)})),function(U,x){return(0,An.zg)(I=>{const{targetSnapshot:q,currentSnapshot:X,guards:{canActivateChecks:ce,canDeactivateChecks:Te}}=I;return 0===Te.length&&0===ce.length?(0,pe.of)(Object.assign(Object.assign({},I),{guardsResult:!0})):function(U,x,I,q){return(0,le.D)(U).pipe((0,An.zg)(X=>function(U,x,I,q,X){const ce=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!ce||0===ce.length)return(0,pe.of)(!0);const Te=ce.map(je=>{const bt=Is(je,x,X);let dn;if(function(U){return U&&wi(U.canDeactivate)}(bt))dn=Vn(bt.canDeactivate(U,x,I,q));else{if(!wi(bt))throw new Error("Invalid CanDeactivate guard");dn=Vn(bt(U,x,I,q))}return dn.pipe((0,tr.P)())});return(0,pe.of)(Te).pipe(he())}(X.component,X.route,I,x,q)),(0,tr.P)(X=>!0!==X,!0))}(Te,q,X,U).pipe((0,An.zg)(je=>je&&function(U){return"boolean"==typeof U}(je)?function(U,x,I,q){return(0,le.D)(x).pipe((0,Gn.b)(X=>(0,ee.z)(function(U,x){return null!==U&&x&&x(new nn(U)),(0,pe.of)(!0)}(X.route.parent,q),function(U,x){return null!==U&&x&&x(new Ne(U)),(0,pe.of)(!0)}(X.route,q),function(U,x,I){const q=x[x.length-1],ce=x.slice(0,x.length-1).reverse().map(Te=>function(U){const x=U.routeConfig?U.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:U,guards:x}:null}(Te)).filter(Te=>null!==Te).map(Te=>(0,ze.P)(()=>{const je=Te.guards.map(bt=>{const dn=Is(bt,Te.node,I);let ar;if(function(U){return U&&wi(U.canActivateChild)}(dn))ar=Vn(dn.canActivateChild(q,U));else{if(!wi(dn))throw new Error("Invalid CanActivateChild guard");ar=Vn(dn(q,U))}return ar.pipe((0,tr.P)())});return(0,pe.of)(je).pipe(he())}));return(0,pe.of)(ce).pipe(he())}(U,X.path,I),function(U,x,I){const q=x.routeConfig?x.routeConfig.canActivate:null;if(!q||0===q.length)return(0,pe.of)(!0);const X=q.map(ce=>(0,ze.P)(()=>{const Te=Is(ce,x,I);let je;if(function(U){return U&&wi(U.canActivate)}(Te))je=Vn(Te.canActivate(x,U));else{if(!wi(Te))throw new Error("Invalid CanActivate guard");je=Vn(Te(x,U))}return je.pipe((0,tr.P)())}));return(0,pe.of)(X).pipe(he())}(U,X.route,I))),(0,tr.P)(X=>!0!==X,!0))}(q,ce,U,x):(0,pe.of)(je)),(0,Ht.U)(je=>Object.assign(Object.assign({},I),{guardsResult:je})))})}(this.ngModule.injector,je=>this.triggerEvent(je)),(0,Mn.b)(je=>{if(Ur(je.guardsResult)){const dn=Gt(`Redirecting to "${this.serializeUrl(je.guardsResult)}"`);throw dn.url=je.guardsResult,dn}const bt=new Tt(je.id,this.serializeUrl(je.extractedUrl),this.serializeUrl(je.urlAfterRedirects),je.targetSnapshot,!!je.guardsResult);this.triggerEvent(bt)}),(0,Et.h)(je=>!!je.guardsResult||(this.restoreHistory(je),this.cancelNavigationTransition(je,""),!1)),Qi(je=>{if(je.guards.canActivateChecks.length)return(0,pe.of)(je).pipe((0,Mn.b)(bt=>{const dn=new He(bt.id,this.serializeUrl(bt.extractedUrl),this.serializeUrl(bt.urlAfterRedirects),bt.targetSnapshot);this.triggerEvent(dn)}),(0,Fn.w)(bt=>{let dn=!1;return(0,pe.of)(bt).pipe(function(U,x){return(0,An.zg)(I=>{const{targetSnapshot:q,guards:{canActivateChecks:X}}=I;if(!X.length)return(0,pe.of)(I);let ce=0;return(0,le.D)(X).pipe((0,Gn.b)(Te=>function(U,x,I,q){return function(U,x,I,q){const X=Object.keys(U);if(0===X.length)return(0,pe.of)({});const ce={};return(0,le.D)(X).pipe((0,An.zg)(Te=>function(U,x,I,q){const X=Is(U,x,q);return Vn(X.resolve?X.resolve(x,I):X(x,I))}(U[Te],x,I,q).pipe((0,Mn.b)(je=>{ce[Te]=je}))),it(1),(0,An.zg)(()=>Object.keys(ce).length===X.length?(0,pe.of)(ce):Ct.E))}(U._resolve,U,x,q).pipe((0,Ht.U)(ce=>(U._resolvedData=ce,U.data=Object.assign(Object.assign({},U.data),Ui(U,I).resolve),null)))}(Te.route,q,U,x)),(0,Mn.b)(()=>ce++),it(1),(0,An.zg)(Te=>ce===X.length?(0,pe.of)(I):Ct.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Mn.b)({next:()=>dn=!0,complete:()=>{dn||(this.restoreHistory(bt),this.cancelNavigationTransition(bt,"At least one route resolver didn't emit any value."))}}))}),(0,Mn.b)(bt=>{const dn=new Ve(bt.id,this.serializeUrl(bt.extractedUrl),this.serializeUrl(bt.urlAfterRedirects),bt.targetSnapshot);this.triggerEvent(dn)}))}),Qi(je=>{const{targetSnapshot:bt,id:dn,extractedUrl:ar,rawUrl:qn,extras:{skipLocationChange:xr,replaceUrl:Hn}}=je;return this.hooks.afterPreactivation(bt,{navigationId:dn,appliedUrlTree:ar,rawUrlTree:qn,skipLocationChange:!!xr,replaceUrl:!!Hn})}),(0,Ht.U)(je=>{const bt=function(U,x,I){const q=Oo(U,x._root,I?I._root:void 0);return new sr(q,x)}(this.routeReuseStrategy,je.targetSnapshot,je.currentRouterState);return Object.assign(Object.assign({},je),{targetRouterState:bt})}),(0,Mn.b)(je=>{this.currentUrlTree=je.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(je.urlAfterRedirects,je.rawUrl),this.routerState=je.targetRouterState,"deferred"===this.urlUpdateStrategy&&(je.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,je),this.browserUrlTree=je.urlAfterRedirects)}),((U,x,I)=>(0,Ht.U)(q=>(new vr(x,q.targetRouterState,q.currentRouterState,I).activate(U),q)))(this.rootContexts,this.routeReuseStrategy,je=>this.triggerEvent(je)),(0,Mn.b)({next(){ce=!0},complete(){ce=!0}}),function(U){return x=>x.lift(new kt(U))}(()=>{if(!ce&&!Te){const je=`Navigation ID ${X.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(X),this.cancelNavigationTransition(X,je)):this.cancelNavigationTransition(X,je)}this.currentNavigation=null}),zt(je=>{if(Te=!0,function(U){return U&&U[fn]}(je)){const bt=Ur(je.url);bt||(this.navigated=!0,this.restoreHistory(X,!0));const dn=new Kt(X.id,this.serializeUrl(X.extractedUrl),je.message);q.next(dn),bt?setTimeout(()=>{const ar=this.urlHandlingStrategy.merge(je.url,this.rawUrlTree),qn={skipLocationChange:X.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ma(X.source)};this.scheduleNavigation(ar,"imperative",null,qn,{resolve:X.resolve,reject:X.reject,promise:X.promise})},0):X.resolve(!1)}else{this.restoreHistory(X,!0);const bt=new pr(X.id,this.serializeUrl(X.extractedUrl),je);q.next(bt);try{X.resolve(this.errorHandler(je))}catch(dn){X.reject(dn)}}return Ct.E}))}))}resetRootComponentType(I){this.rootComponentType=I,this.routerState.root.component=this.rootComponentType}getTransition(){const I=this.transitions.value;return I.urlAfterRedirects=this.browserUrlTree,I}setTransition(I){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),I))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const q=this.extractLocationChangeInfoFromEvent(I);this.shouldScheduleNavigation(this.lastLocationChangeInfo,q)&&setTimeout(()=>{const{source:X,state:ce,urlTree:Te}=q,je={replaceUrl:!0};if(ce){const bt=Object.assign({},ce);delete bt.navigationId,delete bt.\u0275routerPageId,0!==Object.keys(bt).length&&(je.state=bt)}this.scheduleNavigation(Te,X,ce,je)},0),this.lastLocationChangeInfo=q}))}extractLocationChangeInfoFromEvent(I){var q;return{source:"popstate"===I.type?"popstate":"hashchange",urlTree:this.parseUrl(I.url),state:(null===(q=I.state)||void 0===q?void 0:q.navigationId)?I.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(I,q){if(!I)return!0;const X=q.urlTree.toString()===I.urlTree.toString();return q.transitionId!==I.transitionId||!X||!("hashchange"===q.source&&"popstate"===I.source||"popstate"===q.source&&"hashchange"===I.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(I){this.events.next(I)}resetConfig(I){z(I),this.config=I.map(ye),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,q={}){const{relativeTo:X,queryParams:ce,fragment:Te,queryParamsHandling:je,preserveFragment:bt}=q,dn=X||this.routerState.root,ar=bt?this.currentUrlTree.fragment:Te;let qn=null;switch(je){case"merge":qn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ce);break;case"preserve":qn=this.currentUrlTree.queryParams;break;default:qn=ce||null}return null!==qn&&(qn=this.removeEmptyProps(qn)),function(U,x,I,q,X){if(0===I.length)return ci(x.root,x.root,x,q,X);const ce=function(U){if("string"==typeof U[0]&&1===U.length&&"/"===U[0])return new Yi(!0,0,U);let x=0,I=!1;const q=U.reduce((X,ce,Te)=>{if("object"==typeof ce&&null!=ce){if(ce.outlets){const je={};return Bn(ce.outlets,(bt,dn)=>{je[dn]="string"==typeof bt?bt.split("/"):bt}),[...X,{outlets:je}]}if(ce.segmentPath)return[...X,ce.segmentPath]}return"string"!=typeof ce?[...X,ce]:0===Te?(ce.split("/").forEach((je,bt)=>{0==bt&&"."===je||(0==bt&&""===je?I=!0:".."===je?x++:""!=je&&X.push(je))}),X):[...X,ce]},[]);return new Yi(I,x,q)}(I);if(ce.toRoot())return ci(x.root,new vn([],{}),x,q,X);const Te=function(U,x,I){if(U.isAbsolute)return new to(x.root,!0,0);if(-1===I.snapshot._lastPathIndex){const ce=I.snapshot._urlSegment;return new to(ce,ce===x.root,0)}const q=xo(U.commands[0])?0:1;return function(U,x,I){let q=U,X=x,ce=I;for(;ce>X;){if(ce-=X,q=q.parent,!q)throw new Error("Invalid number of '../'");X=q.segments.length}return new to(q,!1,X-ce)}(I.snapshot._urlSegment,I.snapshot._lastPathIndex+q,U.numberOfDoubleDots)}(ce,x,U),je=Te.processChildren?ne(Te.segmentGroup,Te.index,ce.commands):wo(Te.segmentGroup,Te.index,ce.commands);return ci(Te.segmentGroup,je,x,q,X)}(dn,this.currentUrlTree,I,qn,null!=ar?ar:null)}navigateByUrl(I,q={skipLocationChange:!1}){const X=Ur(I)?I:this.parseUrl(I),ce=this.urlHandlingStrategy.merge(X,this.rawUrlTree);return this.scheduleNavigation(ce,"imperative",null,q)}navigate(I,q={skipLocationChange:!1}){return function(U){for(let x=0;x<U.length;x++){const I=U[x];if(null==I)throw new Error(`The requested path contains ${I} segment at index ${x}`)}}(I),this.navigateByUrl(this.createUrlTree(I,q),q)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let q;try{q=this.urlSerializer.parse(I)}catch(X){q=this.malformedUriErrorHandler(X,this.urlSerializer,I)}return q}isActive(I,q){let X;if(X=!0===q?Object.assign({},Us):!1===q?Object.assign({},Ji):q,Ur(I))return Dr(this.currentUrlTree,I,X);const ce=this.parseUrl(I);return Dr(this.currentUrlTree,ce,X)}removeEmptyProps(I){return Object.keys(I).reduce((q,X)=>{const ce=I[X];return null!=ce&&(q[X]=ce),q},{})}processNavigations(){this.navigations.subscribe(I=>{this.navigated=!0,this.lastSuccessfulId=I.id,this.currentPageId=I.targetPageId,this.events.next(new Un(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,I.resolve(!0)},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)})}scheduleNavigation(I,q,X,ce,Te){var je,bt;if(this.disposed)return Promise.resolve(!1);const dn=this.getTransition(),ar=ma(q)&&dn&&!ma(dn.source),Hn=(this.lastSuccessfulId===dn.id||this.currentNavigation?dn.rawUrl:dn.urlAfterRedirects).toString()===I.toString();if(ar&&Hn)return Promise.resolve(!0);let po,Vo,go;Te?(po=Te.resolve,Vo=Te.reject,go=Te.promise):go=new Promise((Yo,cu)=>{po=Yo,Vo=cu});const Bs=++this.navigationId;let Wo;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(X=this.location.getState()),Wo=X&&X.\u0275routerPageId?X.\u0275routerPageId:ce.replaceUrl||ce.skipLocationChange?null!==(je=this.browserPageId)&&void 0!==je?je:0:(null!==(bt=this.browserPageId)&&void 0!==bt?bt:0)+1):Wo=0,this.setTransition({id:Bs,targetPageId:Wo,source:q,restoredState:X,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:I,extras:ce,resolve:po,reject:Vo,promise:go,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),go.catch(Yo=>Promise.reject(Yo))}setBrowserUrl(I,q){const X=this.urlSerializer.serialize(I),ce=Object.assign(Object.assign({},q.extras.state),this.generateNgRouterState(q.id,q.targetPageId));this.location.isCurrentPathEqualTo(X)||q.extras.replaceUrl?this.location.replaceState(X,"",ce):this.location.go(X,"",ce)}restoreHistory(I,q=!1){var X,ce;if("computed"===this.canceledNavigationResolution){const Te=this.currentPageId-I.targetPageId;"popstate"!==I.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(X=this.currentNavigation)||void 0===X?void 0:X.finalUrl)||0===Te?this.currentUrlTree===(null===(ce=this.currentNavigation)||void 0===ce?void 0:ce.finalUrl)&&0===Te&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Te)}else"replace"===this.canceledNavigationResolution&&(q&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(I,q){const X=new Kt(I.id,this.serializeUrl(I.extractedUrl),q);this.triggerEvent(X),I.resolve(!1)}generateNgRouterState(I,q){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:q}:{navigationId:I}}}return U.\u0275fac=function(I){return new(I||U)(c.LFG(c.DyG),c.LFG(ln),c.LFG(Ai),c.LFG(O.Ye),c.LFG(c.zs3),c.LFG(c.v3s),c.LFG(c.Sil),c.LFG(void 0))},U.\u0275prov=c.Yz7({token:U,factory:U.\u0275fac}),U})();function ma(U){return"imperative"!==U}let qi=(()=>{class U{constructor(I,q,X,ce,Te){this.router=I,this.route=q,this.commands=[],this.onChanges=new Nt.xQ,null==X&&ce.setAttribute(Te.nativeElement,"tabindex","0")}ngOnChanges(I){this.onChanges.next(this)}set routerLink(I){this.commands=null!=I?Array.isArray(I)?I:[I]:[]}onClick(){const I={skipLocationChange:va(this.skipLocationChange),replaceUrl:va(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,I),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:va(this.preserveFragment)})}}return U.\u0275fac=function(I){return new(I||U)(c.Y36(oi),c.Y36(Mr),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},U.\u0275dir=c.lG2({type:U,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(I,q){1&I&&c.NdJ("click",function(){return q.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[c.TTD]}),U})(),_a=(()=>{class U{constructor(I,q,X){this.router=I,this.route=q,this.locationStrategy=X,this.commands=[],this.onChanges=new Nt.xQ,this.subscription=I.events.subscribe(ce=>{ce instanceof Un&&this.updateTargetUrlAndHref()})}set routerLink(I){this.commands=null!=I?Array.isArray(I)?I:[I]:[]}ngOnChanges(I){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(I,q,X,ce,Te){if(0!==I||q||X||ce||Te||"string"==typeof this.target&&"_self"!=this.target)return!0;const je={skipLocationChange:va(this.skipLocationChange),replaceUrl:va(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,je),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:va(this.preserveFragment)})}}return U.\u0275fac=function(I){return new(I||U)(c.Y36(oi),c.Y36(Mr),c.Y36(O.S$))},U.\u0275dir=c.lG2({type:U,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(I,q){1&I&&c.NdJ("click",function(ce){return q.onClick(ce.button,ce.ctrlKey,ce.shiftKey,ce.altKey,ce.metaKey)}),2&I&&(c.Ikx("href",q.href,c.LSH),c.uIk("target",q.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[c.TTD]}),U})();function va(U){return""===U||!!U}let ya=(()=>{class U{constructor(I,q,X,ce,Te,je){this.router=I,this.element=q,this.renderer=X,this.cdr=ce,this.link=Te,this.linkWithHref=je,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=I.events.subscribe(bt=>{bt instanceof Un&&this.update()})}ngAfterContentInit(){(0,pe.of)(this.links.changes,this.linksWithHrefs.changes,(0,pe.of)(null)).pipe((0,mn.J)()).subscribe(I=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var I;null===(I=this.linkInputChangesSubscription)||void 0===I||I.unsubscribe();const q=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(X=>!!X).map(X=>X.onChanges);this.linkInputChangesSubscription=(0,le.D)(q).pipe((0,mn.J)()).subscribe(X=>{this.isActive!==this.isLinkActive(this.router)(X)&&this.update()})}set routerLinkActive(I){const q=Array.isArray(I)?I:I.split(" ");this.classes=q.filter(X=>!!X)}ngOnChanges(I){this.update()}ngOnDestroy(){var I;this.routerEventsSubscription.unsubscribe(),null===(I=this.linkInputChangesSubscription)||void 0===I||I.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const I=this.hasActiveLinks();this.isActive!==I&&(this.isActive=I,this.cdr.markForCheck(),this.classes.forEach(q=>{I?this.renderer.addClass(this.element.nativeElement,q):this.renderer.removeClass(this.element.nativeElement,q)}))})}isLinkActive(I){const q=function(U){return!!U.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return X=>I.isActive(X.urlTree,q)}hasActiveLinks(){const I=this.isLinkActive(this.router);return this.link&&I(this.link)||this.linkWithHref&&I(this.linkWithHref)||this.links.some(I)||this.linksWithHrefs.some(I)}}return U.\u0275fac=function(I){return new(I||U)(c.Y36(oi),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(qi,8),c.Y36(_a,8))},U.\u0275dir=c.lG2({type:U,selectors:[["","routerLinkActive",""]],contentQueries:function(I,q,X){if(1&I&&(c.Suo(X,qi,5),c.Suo(X,_a,5)),2&I){let ce;c.iGM(ce=c.CRH())&&(q.links=ce),c.iGM(ce=c.CRH())&&(q.linksWithHrefs=ce)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[c.TTD]}),U})(),Zu=(()=>{class U{constructor(I,q,X,ce,Te){this.parentContexts=I,this.location=q,this.resolver=X,this.changeDetector=Te,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.name=ce||Dt,I.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const I=this.parentContexts.getContext(this.name);I&&I.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,I}attach(I,q){this.activated=I,this._activatedRoute=q,this.location.insert(I.hostView)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,q){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=I;const Te=(q=q||this.resolver).resolveComponentFactory(I._futureSnapshot.routeConfig.component),je=this.parentContexts.getOrCreateContext(this.name).children,bt=new ba(I,je,this.location.injector);this.activated=this.location.createComponent(Te,this.location.length,bt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return U.\u0275fac=function(I){return new(I||U)(c.Y36(Ai),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},U.\u0275dir=c.lG2({type:U,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),U})();class ba{constructor(x,I,q){this.route=x,this.childContexts=I,this.parent=q}get(x,I){return x===Mr?this.route:x===Ai?this.childContexts:this.parent.get(x,I)}}class qu{}class Ba{preload(x,I){return I().pipe(zt(()=>(0,pe.of)(null)))}}class Vs{preload(x,I){return(0,pe.of)(null)}}let Al=(()=>{class U{constructor(I,q,X,ce,Te){this.router=I,this.injector=ce,this.preloadingStrategy=Te,this.loader=new Rr(q,X,dn=>I.triggerEvent(new Mt(dn)),dn=>I.triggerEvent(new Pt(dn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Et.h)(I=>I instanceof Un),(0,Gn.b)(()=>this.preload())).subscribe(()=>{})}preload(){const I=this.injector.get(c.h0i);return this.processRoutes(I,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,q){const X=[];for(const ce of q)if(ce.loadChildren&&!ce.canLoad&&ce._loadedConfig){const Te=ce._loadedConfig;X.push(this.processRoutes(Te.module,Te.routes))}else ce.loadChildren&&!ce.canLoad?X.push(this.preloadConfig(I,ce)):ce.children&&X.push(this.processRoutes(I,ce.children));return(0,le.D)(X).pipe((0,mn.J)(),(0,Ht.U)(ce=>{}))}preloadConfig(I,q){return this.preloadingStrategy.preload(q,()=>(q._loadedConfig?(0,pe.of)(q._loadedConfig):this.loader.load(I.injector,q)).pipe((0,An.zg)(ce=>(q._loadedConfig=ce,this.processRoutes(ce.module,ce.routes)))))}}return U.\u0275fac=function(I){return new(I||U)(c.LFG(oi),c.LFG(c.v3s),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(qu))},U.\u0275prov=c.Yz7({token:U,factory:U.\u0275fac}),U})(),na=(()=>{class U{constructor(I,q,X={}){this.router=I,this.viewportScroller=q,this.options=X,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},X.scrollPositionRestoration=X.scrollPositionRestoration||"disabled",X.anchorScrolling=X.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(I=>{I instanceof Zn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof Un&&(this.lastId=I.id,this.scheduleScrollEvent(I,this.router.parseUrl(I.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(I=>{I instanceof vt&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,q){this.router.triggerEvent(new vt(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,q))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return U.\u0275fac=function(I){return new(I||U)(c.LFG(oi),c.LFG(O.EM),c.LFG(void 0))},U.\u0275prov=c.Yz7({token:U,factory:U.\u0275fac}),U})();const Ca=new c.OlP("ROUTER_CONFIGURATION"),Ha=new c.OlP("ROUTER_FORROOT_GUARD"),mt=[O.Ye,{provide:ln,useClass:In},{provide:oi,useFactory:function(U,x,I,q,X,ce,Te,je={},bt,dn){const ar=new oi(null,U,x,I,q,X,ce,Zt(Te));return bt&&(ar.urlHandlingStrategy=bt),dn&&(ar.routeReuseStrategy=dn),function(U,x){U.errorHandler&&(x.errorHandler=U.errorHandler),U.malformedUriErrorHandler&&(x.malformedUriErrorHandler=U.malformedUriErrorHandler),U.onSameUrlNavigation&&(x.onSameUrlNavigation=U.onSameUrlNavigation),U.paramsInheritanceStrategy&&(x.paramsInheritanceStrategy=U.paramsInheritanceStrategy),U.relativeLinkResolution&&(x.relativeLinkResolution=U.relativeLinkResolution),U.urlUpdateStrategy&&(x.urlUpdateStrategy=U.urlUpdateStrategy)}(je,ar),je.enableTracing&&ar.events.subscribe(qn=>{var xr,Hn;null===(xr=console.group)||void 0===xr||xr.call(console,`Router Event: ${qn.constructor.name}`),console.log(qn.toString()),console.log(qn),null===(Hn=console.groupEnd)||void 0===Hn||Hn.call(console)}),ar},deps:[ln,Ai,O.Ye,c.zs3,c.v3s,c.Sil,Qn,Ca,[class{},new c.FiY],[class{},new c.FiY]]},Ai,{provide:Mr,useFactory:function(U){return U.routerState.root},deps:[oi]},{provide:c.v3s,useClass:c.EAV},Al,Vs,Ba,{provide:Ca,useValue:{enableTracing:!1}}];function Lt(){return new c.PXZ("Router",oi)}let ss=(()=>{class U{constructor(I,q){}static forRoot(I,q){return{ngModule:U,providers:[mt,ys(I),{provide:Ha,useFactory:Pi,deps:[[oi,new c.FiY,new c.tp0]]},{provide:Ca,useValue:q||{}},{provide:O.S$,useFactory:rn,deps:[O.lw,[new c.tBr(O.mr),new c.FiY],Ca]},{provide:na,useFactory:wa,deps:[oi,O.EM,Ca]},{provide:qu,useExisting:q&&q.preloadingStrategy?q.preloadingStrategy:Vs},{provide:c.PXZ,multi:!0,useFactory:Lt},[sn,{provide:c.ip1,multi:!0,useFactory:tc,deps:[sn]},{provide:kr,useFactory:lu,deps:[sn]},{provide:c.tb,multi:!0,useExisting:kr}]]}}static forChild(I){return{ngModule:U,providers:[ys(I)]}}}return U.\u0275fac=function(I){return new(I||U)(c.LFG(Ha,8),c.LFG(oi,8))},U.\u0275mod=c.oAB({type:U}),U.\u0275inj=c.cJS({}),U})();function wa(U,x,I){return I.scrollOffset&&x.setOffset(I.scrollOffset),new na(U,x,I)}function rn(U,x,I={}){return I.useHash?new O.Do(U,x):new O.b0(U,x)}function Pi(U){return"guarded"}function ys(U){return[{provide:c.deG,multi:!0,useValue:U},{provide:Qn,multi:!0,useValue:U}]}let sn=(()=>{class U{constructor(I){this.injector=I,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Nt.xQ}appInitializer(){return this.injector.get(O.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let q=null;const X=new Promise(je=>q=je),ce=this.injector.get(oi),Te=this.injector.get(Ca);return"disabled"===Te.initialNavigation?(ce.setUpLocationChangeListener(),q(!0)):"enabled"===Te.initialNavigation||"enabledBlocking"===Te.initialNavigation?(ce.hooks.afterPreactivation=()=>this.initNavigation?(0,pe.of)(null):(this.initNavigation=!0,q(!0),this.resultOfPreactivationDone),ce.initialNavigation()):q(!0),X})}bootstrapListener(I){const q=this.injector.get(Ca),X=this.injector.get(Al),ce=this.injector.get(na),Te=this.injector.get(oi),je=this.injector.get(c.z2F);I===je.components[0]&&(("enabledNonBlocking"===q.initialNavigation||void 0===q.initialNavigation)&&Te.initialNavigation(),X.setUpPreloading(),ce.init(),Te.resetRootComponentType(je.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return U.\u0275fac=function(I){return new(I||U)(c.LFG(c.zs3))},U.\u0275prov=c.Yz7({token:U,factory:U.\u0275fac}),U})();function tc(U){return U.appInitializer.bind(U)}function lu(U){return U.bootstrapListener.bind(U)}const kr=new c.OlP("Router Initializer")},9759:(jt,nt,Y)=>{"use strict";Y.d(nt,{Z:()=>Bt});var Ue,at,O=Y(4762),c=Y(4685),K=Y(6034),w=Y(300),be=((Ue={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ue["bad-app-name"]="Illegal App name: '{$appName}",Ue["duplicate-app"]="Firebase App named '{$appName}' already exists",Ue["app-deleted"]="Firebase App named '{$appName}' already deleted",Ue["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ue["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ue),xe=new c.LL("app","Firebase",be),fe="@firebase/app",zt="[DEFAULT]",It=((at={})[fe]="fire-core",at["@firebase/analytics"]="fire-analytics",at["@firebase/app-check"]="fire-app-check",at["@firebase/auth"]="fire-auth",at["@firebase/database"]="fire-rtdb",at["@firebase/functions"]="fire-fn",at["@firebase/installations"]="fire-iid",at["@firebase/messaging"]="fire-fcm",at["@firebase/performance"]="fire-perf",at["@firebase/remote-config"]="fire-rc",at["@firebase/storage"]="fire-gcs",at["@firebase/firestore"]="fire-fst",at["fire-js"]="fire-js",at["firebase-wrapper"]="fire-js-all",at),wn=new w.Yd("@firebase/app"),Et=function(){function kt(Qt,Ht,Fn){var Cn=this;this.firebase_=Fn,this.isDeleted_=!1,this.name_=Ht.name,this.automaticDataCollectionEnabled_=Ht.automaticDataCollectionEnabled||!1,this.options_=(0,c.p$)(Qt),this.container=new K.H0(Ht.name),this._addComponent(new K.wA("app",function(){return Cn},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(ur){return Cn._addComponent(ur)})}return Object.defineProperty(kt.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(Qt){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=Qt},enumerable:!1,configurable:!0}),Object.defineProperty(kt.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(kt.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),kt.prototype.delete=function(){var Qt=this;return new Promise(function(Ht){Qt.checkDestroyed_(),Ht()}).then(function(){return Qt.firebase_.INTERNAL.removeApp(Qt.name_),Promise.all(Qt.container.getProviders().map(function(Ht){return Ht.delete()}))}).then(function(){Qt.isDeleted_=!0})},kt.prototype._getService=function(Qt,Ht){var Fn;void 0===Ht&&(Ht=zt),this.checkDestroyed_();var Cn=this.container.getProvider(Qt);return!Cn.isInitialized()&&"EXPLICIT"===(null===(Fn=Cn.getComponent())||void 0===Fn?void 0:Fn.instantiationMode)&&Cn.initialize(),Cn.getImmediate({identifier:Ht})},kt.prototype._removeServiceInstance=function(Qt,Ht){void 0===Ht&&(Ht=zt),this.container.getProvider(Qt).clearInstance(Ht)},kt.prototype._addComponent=function(Qt){try{this.container.addComponent(Qt)}catch(Ht){wn.debug("Component "+Qt.name+" failed to register with FirebaseApp "+this.name,Ht)}},kt.prototype._addOrOverwriteComponent=function(Qt){this.container.addOrOverwriteComponent(Qt)},kt.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},kt.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw xe.create("app-deleted",{appName:this.name_})},kt}();Et.prototype.name&&Et.prototype.options||Et.prototype.delete||console.log("dc");var et=function it(){var kt=function(kt){var Qt={},Ht=new Map,Fn={__esModule:!0,initializeApp:function(mn,Jt){void 0===Jt&&(Jt={}),("object"!=typeof Jt||null===Jt)&&(Jt={name:Jt});var Un=Jt;void 0===Un.name&&(Un.name=zt);var Kt=Un.name;if("string"!=typeof Kt||!Kt)throw xe.create("bad-app-name",{appName:String(Kt)});if((0,c.r3)(Qt,Kt))throw xe.create("duplicate-app",{appName:Kt});var pr=new kt(mn,Un,Fn);return Qt[Kt]=pr,pr},app:ur,registerVersion:function(mn,Jt,Zn){var Un,Kt=null!==(Un=It[mn])&&void 0!==Un?Un:mn;Zn&&(Kt+="-"+Zn);var pr=Kt.match(/\s|\//),jr=Jt.match(/\s|\//);if(pr||jr){var Kn=['Unable to register library "'+Kt+'" with version "'+Jt+'":'];return pr&&Kn.push('library name "'+Kt+'" contains illegal characters (whitespace or "/")'),pr&&jr&&Kn.push("and"),jr&&Kn.push('version name "'+Jt+'" contains illegal characters (whitespace or "/")'),void wn.warn(Kn.join(" "))}tr(new K.wA(Kt+"-version",function(){return{library:Kt,version:Jt}},"VERSION"))},setLogLevel:w.Ub,onLog:function(mn,Jt){if(null!==mn&&"function"!=typeof mn)throw xe.create("invalid-log-argument");(0,w.Am)(mn,Jt)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:tr,removeApp:function(mn){delete Qt[mn]},components:Ht,useAsService:function(mn,Jt){return"serverAuth"===Jt?null:Jt}}};function ur(mn){if(!(0,c.r3)(Qt,mn=mn||zt))throw xe.create("no-app",{appName:mn});return Qt[mn]}function tr(mn){var Jt=mn.name;if(Ht.has(Jt))return wn.debug("There were multiple attempts to register component "+Jt+"."),"PUBLIC"===mn.type?Fn[Jt]:null;if(Ht.set(Jt,mn),"PUBLIC"===mn.type){var Zn=function(jr){if(void 0===jr&&(jr=ur()),"function"!=typeof jr[Jt])throw xe.create("invalid-app-argument",{appName:Jt});return jr[Jt]()};void 0!==mn.serviceProps&&(0,c.ZB)(Zn,mn.serviceProps),Fn[Jt]=Zn,kt.prototype[Jt]=function(){for(var jr=[],Kn=0;Kn<arguments.length;Kn++)jr[Kn]=arguments[Kn];return this._getService.bind(this,Jt).apply(this,mn.multipleInstances?jr:[])}}for(var Un=0,Kt=Object.keys(Qt);Un<Kt.length;Un++)Qt[Kt[Un]]._addComponent(mn);return"PUBLIC"===mn.type?Fn[Jt]:null}return Fn.default=Fn,Object.defineProperty(Fn,"apps",{get:function(){return Object.keys(Qt).map(function(mn){return Qt[mn]})}}),ur.App=kt,Fn}(Et);return kt.INTERNAL=(0,O.pi)((0,O.pi)({},kt.INTERNAL),{createFirebaseNamespace:it,extendNamespace:function(Ht){(0,c.ZB)(kt,Ht)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),kt}(),_t=function(){function kt(Qt){this.container=Qt}return kt.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(Ht){if(function(kt){var Qt=kt.getComponent();return"VERSION"===(null==Qt?void 0:Qt.type)}(Ht)){var Fn=Ht.getImmediate();return Fn.library+"/"+Fn.version}return null}).filter(function(Ht){return Ht}).join(" ")},kt}();if((0,c.jU)()&&void 0!==self.firebase){wn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var an=self.firebase.SDK_VERSION;an&&an.indexOf("LITE")>=0&&wn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Sn=et.initializeApp;et.initializeApp=function(){for(var kt=[],Qt=0;Qt<arguments.length;Qt++)kt[Qt]=arguments[Qt];return(0,c.UG)()&&wn.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Sn.apply(void 0,kt)};var kt,on=et;(kt=on).INTERNAL.registerComponent(new K.wA("platform-logger",function(Ht){return new _t(Ht)},"PRIVATE")),kt.registerVersion(fe,"0.6.30",undefined),kt.registerVersion("fire-js","");const Bt=on},6034:(jt,nt,Y)=>{"use strict";Y.d(nt,{wA:()=>K,H0:()=>fe,zt:()=>Ue});var O=Y(4762),c=Y(4685),K=function(){function _e(re,Ce,le){this.name=re,this.instanceFactory=Ce,this.type=le,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return _e.prototype.setInstantiationMode=function(re){return this.instantiationMode=re,this},_e.prototype.setMultipleInstances=function(re){return this.multipleInstances=re,this},_e.prototype.setServiceProps=function(re){return this.serviceProps=re,this},_e.prototype.setInstanceCreatedCallback=function(re){return this.onInstanceCreated=re,this},_e}(),w="[DEFAULT]",Ue=function(){function _e(re,Ce){this.name=re,this.container=Ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return _e.prototype.get=function(re){var Ce=this.normalizeInstanceIdentifier(re);if(!this.instancesDeferred.has(Ce)){var le=new c.BH;if(this.instancesDeferred.set(Ce,le),this.isInitialized(Ce)||this.shouldAutoInitialize())try{var pe=this.getOrInitializeService({instanceIdentifier:Ce});pe&&le.resolve(pe)}catch(De){}}return this.instancesDeferred.get(Ce).promise},_e.prototype.getImmediate=function(re){var Ce,le=this.normalizeInstanceIdentifier(null==re?void 0:re.identifier),pe=null!==(Ce=null==re?void 0:re.optional)&&void 0!==Ce&&Ce;if(!this.isInitialized(le)&&!this.shouldAutoInitialize()){if(pe)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:le})}catch(De){if(pe)return null;throw De}},_e.prototype.getComponent=function(){return this.component},_e.prototype.setComponent=function(re){var Ce,le;if(re.name!==this.name)throw Error("Mismatching Component "+re.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=re,this.shouldAutoInitialize()){if(function(_e){return"EAGER"===_e.instantiationMode}(re))try{this.getOrInitializeService({instanceIdentifier:w})}catch(On){}try{for(var pe=(0,O.XA)(this.instancesDeferred.entries()),De=pe.next();!De.done;De=pe.next()){var Re=(0,O.CR)(De.value,2),ee=Re[1],ze=this.normalizeInstanceIdentifier(Re[0]);try{var Ct=this.getOrInitializeService({instanceIdentifier:ze});ee.resolve(Ct)}catch(On){}}}catch(On){Ce={error:On}}finally{try{De&&!De.done&&(le=pe.return)&&le.call(pe)}finally{if(Ce)throw Ce.error}}}},_e.prototype.clearInstance=function(re){void 0===re&&(re=w),this.instancesDeferred.delete(re),this.instancesOptions.delete(re),this.instances.delete(re)},_e.prototype.delete=function(){return(0,O.mG)(this,void 0,void 0,function(){var re;return(0,O.Jh)(this,function(Ce){switch(Ce.label){case 0:return re=Array.from(this.instances.values()),[4,Promise.all((0,O.ev)((0,O.ev)([],(0,O.CR)(re.filter(function(le){return"INTERNAL"in le}).map(function(le){return le.INTERNAL.delete()}))),(0,O.CR)(re.filter(function(le){return"_delete"in le}).map(function(le){return le._delete()}))))];case 1:return Ce.sent(),[2]}})})},_e.prototype.isComponentSet=function(){return null!=this.component},_e.prototype.isInitialized=function(re){return void 0===re&&(re=w),this.instances.has(re)},_e.prototype.getOptions=function(re){return void 0===re&&(re=w),this.instancesOptions.get(re)||{}},_e.prototype.initialize=function(re){var Ce,le;void 0===re&&(re={});var pe=re.options,De=void 0===pe?{}:pe,Re=this.normalizeInstanceIdentifier(re.instanceIdentifier);if(this.isInitialized(Re))throw Error(this.name+"("+Re+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Ye=this.getOrInitializeService({instanceIdentifier:Re,options:De});try{for(var ee=(0,O.XA)(this.instancesDeferred.entries()),ze=ee.next();!ze.done;ze=ee.next()){var Ct=(0,O.CR)(ze.value,2),Nt=Ct[1];Re===this.normalizeInstanceIdentifier(Ct[0])&&Nt.resolve(Ye)}}catch(zt){Ce={error:zt}}finally{try{ze&&!ze.done&&(le=ee.return)&&le.call(ee)}finally{if(Ce)throw Ce.error}}return Ye},_e.prototype.onInit=function(re,Ce){var le,pe=this.normalizeInstanceIdentifier(Ce),De=null!==(le=this.onInitCallbacks.get(pe))&&void 0!==le?le:new Set;De.add(re),this.onInitCallbacks.set(pe,De);var Re=this.instances.get(pe);return Re&&re(Re,pe),function(){De.delete(re)}},_e.prototype.invokeOnInitCallbacks=function(re,Ce){var le,pe,De=this.onInitCallbacks.get(Ce);if(De)try{for(var Re=(0,O.XA)(De),Ye=Re.next();!Ye.done;Ye=Re.next()){var ee=Ye.value;try{ee(re,Ce)}catch(ze){}}}catch(ze){le={error:ze}}finally{try{Ye&&!Ye.done&&(pe=Re.return)&&pe.call(Re)}finally{if(le)throw le.error}}},_e.prototype.getOrInitializeService=function(re){var Ce=re.instanceIdentifier,le=re.options,pe=void 0===le?{}:le,De=this.instances.get(Ce);if(!De&&this.component&&(De=this.component.instanceFactory(this.container,{instanceIdentifier:be(Ce),options:pe}),this.instances.set(Ce,De),this.instancesOptions.set(Ce,pe),this.invokeOnInitCallbacks(De,Ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ce,De)}catch(Re){}return De||null},_e.prototype.normalizeInstanceIdentifier=function(re){return void 0===re&&(re=w),this.component?this.component.multipleInstances?re:w:re},_e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},_e}();function be(_e){return _e===w?void 0:_e}var fe=function(){function _e(re){this.name=re,this.providers=new Map}return _e.prototype.addComponent=function(re){var Ce=this.getProvider(re.name);if(Ce.isComponentSet())throw new Error("Component "+re.name+" has already been registered with "+this.name);Ce.setComponent(re)},_e.prototype.addOrOverwriteComponent=function(re){this.getProvider(re.name).isComponentSet()&&this.providers.delete(re.name),this.addComponent(re)},_e.prototype.getProvider=function(re){if(this.providers.has(re))return this.providers.get(re);var Ce=new Ue(re,this);return this.providers.set(re,Ce),Ce},_e.prototype.getProviders=function(){return Array.from(this.providers.values())},_e}()},9192:(jt,nt,Y)=>{"use strict";var O=Y(9759),c=Y(6034),K=Y(4685),w=Y(4762),Ue=Y(300);jt=Y.hmd(jt);var fe="";function _e(p){fe=p}var p,re=function(){function p(f){this.domStorage_=f,this.prefix_="firebase:"}return p.prototype.set=function(f,v){null==v?this.domStorage_.removeItem(this.prefixedName_(f)):this.domStorage_.setItem(this.prefixedName_(f),(0,K.Pz)(v))},p.prototype.get=function(f){var v=this.domStorage_.getItem(this.prefixedName_(f));return null==v?null:(0,K.cI)(v)},p.prototype.remove=function(f){this.domStorage_.removeItem(this.prefixedName_(f))},p.prototype.prefixedName_=function(f){return this.prefix_+f},p.prototype.toString=function(){return this.domStorage_.toString()},p}(),Ce=function(){function p(){this.cache_={},this.isInMemoryStorage=!0}return p.prototype.set=function(f,v){null==v?delete this.cache_[f]:this.cache_[f]=v},p.prototype.get=function(f){return(0,K.r3)(this.cache_,f)?this.cache_[f]:null},p.prototype.remove=function(f){delete this.cache_[f]},p}(),le=function(p){try{if("undefined"!=typeof window&&void 0!==window[p]){var f=window[p];return f.setItem("firebase:sentinel","cache"),f.removeItem("firebase:sentinel"),new re(f)}}catch(v){}return new Ce},pe=le("localStorage"),De=le("sessionStorage"),Re=new Ue.Yd("@firebase/database"),Ye=(p=1,function(){return p++}),ee=function(p){var f=(0,K.dS)(p),v=new K.gQ;v.update(f);var h=v.digest();return K.US.encodeByteArray(h)},ze=function(){for(var p=[],f=0;f<arguments.length;f++)p[f]=arguments[f];for(var v="",h=0;h<p.length;h++){var g=p[h];Array.isArray(g)||g&&"object"==typeof g&&"number"==typeof g.length?v+=ze.apply(null,g):v+="object"==typeof g?(0,K.Pz)(g):g,v+=" "}return v},Ct=null,On=!0,Nt=function(p,f){(0,K.hu)(!f||!0===p||!1===p,"Can't turn on custom loggers persistently."),!0===p?(Re.logLevel=Ue.in.VERBOSE,Ct=Re.log.bind(Re),f&&De.set("logging_enabled",!0)):"function"==typeof p?Ct=p:(Ct=null,De.remove("logging_enabled"))},at=function(){for(var p=[],f=0;f<arguments.length;f++)p[f]=arguments[f];if(!0===On&&(On=!1,null===Ct&&!0===De.get("logging_enabled")&&Nt(!0)),Ct){var v=ze.apply(null,p);Ct(v)}},zt=function(p){return function(){for(var f=[],v=0;v<arguments.length;v++)f[v]=arguments[v];at.apply(void 0,(0,w.ev)([p],(0,w.CR)(f)))}},It=function(){for(var p=[],f=0;f<arguments.length;f++)p[f]=arguments[f];var v="FIREBASE INTERNAL ERROR: "+ze.apply(void 0,(0,w.ev)([],(0,w.CR)(p)));Re.error(v)},wn=function(){for(var p=[],f=0;f<arguments.length;f++)p[f]=arguments[f];var v="FIREBASE FATAL ERROR: "+ze.apply(void 0,(0,w.ev)([],(0,w.CR)(p)));throw Re.error(v),new Error(v)},Et=function(){for(var p=[],f=0;f<arguments.length;f++)p[f]=arguments[f];var v="FIREBASE WARNING: "+ze.apply(void 0,(0,w.ev)([],(0,w.CR)(p)));Re.warn(v)},rt=function(p){return"number"==typeof p&&(p!=p||p===Number.POSITIVE_INFINITY||p===Number.NEGATIVE_INFINITY)},et="[MIN_NAME]",_t="[MAX_NAME]",st=function(p,f){if(p===f)return 0;if(p===et||f===_t)return-1;if(f===et||p===_t)return 1;var v=Gn(p),h=Gn(f);return null!==v?null!==h?v-h==0?p.length-f.length:v-h:-1:null!==h?1:p<f?-1:1},tn=function(p,f){return p===f?0:p<f?-1:1},an=function(p,f){if(f&&p in f)return f[p];throw new Error("Missing required key ("+p+") in object: "+(0,K.Pz)(f))},Sn=function(p){if("object"!=typeof p||null===p)return(0,K.Pz)(p);var f=[];for(var v in p)f.push(v);f.sort();for(var h="{",g=0;g<f.length;g++)0!==g&&(h+=","),h+=(0,K.Pz)(f[g]),h+=":",h+=Sn(p[f[g]]);return h+"}"},on=function(p,f){var v=p.length;if(v<=f)return[p];for(var h=[],g=0;g<v;g+=f)h.push(p.substring(g,g+f>v?v:g+f));return h};function Bt(p,f){for(var v in p)p.hasOwnProperty(v)&&f(v,p[v])}var kt=function(p){(0,K.hu)(!rt(p),"Invalid JSON number");var g,d,b,S,N,h=1023;0===p?(d=0,b=0,g=1/p==-1/0?1:0):(g=p<0,(p=Math.abs(p))>=Math.pow(2,1-h)?(d=(S=Math.min(Math.floor(Math.log(p)/Math.LN2),h))+h,b=Math.round(p*Math.pow(2,52-S)-Math.pow(2,52))):(d=0,b=Math.round(p/Math.pow(2,-1074))));var Q=[];for(N=52;N;N-=1)Q.push(b%2?1:0),b=Math.floor(b/2);for(N=11;N;N-=1)Q.push(d%2?1:0),d=Math.floor(d/2);Q.push(g?1:0),Q.reverse();var ue=Q.join(""),Ee="";for(N=0;N<64;N+=8){var Ge=parseInt(ue.substr(N,8),2).toString(16);1===Ge.length&&(Ge="0"+Ge),Ee+=Ge}return Ee.toLowerCase()},Cn=new RegExp("^-?(0*)\\d{1,10}$"),ur=-2147483648,zn=2147483647,Gn=function(p){if(Cn.test(p)){var f=Number(p);if(f>=ur&&f<=zn)return f}return null},tr=function(p){try{p()}catch(f){setTimeout(function(){throw Et("Exception was thrown by user callback.",f.stack||""),f},Math.floor(0))}},Mn=function(p,f){var v=setTimeout(p,f);return"object"==typeof v&&v.unref&&v.unref(),v},Oi=function(){function p(f,v){var h=this;this.appName_=f,this.appCheckProvider=v,this.appCheck=null==v?void 0:v.getImmediate({optional:!0}),this.appCheck||null==v||v.get().then(function(g){return h.appCheck=g})}return p.prototype.getToken=function(f){var v=this;return this.appCheck?this.appCheck.getToken(f):new Promise(function(h,g){setTimeout(function(){v.appCheck?v.getToken(f).then(h,g):h(null)},0)})},p.prototype.addTokenChangeListener=function(f){var v;null===(v=this.appCheckProvider)||void 0===v||v.get().then(function(h){return h.addTokenListener(f)})},p.prototype.notifyForInvalidToken=function(){Et('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},p}(),mn=function(){function p(f,v,h){var g=this;this.appName_=f,this.firebaseOptions_=v,this.authProvider_=h,this.auth_=null,this.auth_=h.getImmediate({optional:!0}),this.auth_||h.onInit(function(d){return g.auth_=d})}return p.prototype.getToken=function(f){var v=this;return this.auth_?this.auth_.getToken(f).catch(function(h){return h&&"auth/token-not-initialized"===h.code?(at("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(h)}):new Promise(function(h,g){setTimeout(function(){v.auth_?v.getToken(f).then(h,g):h(null)},0)})},p.prototype.addTokenChangeListener=function(f){this.auth_?this.auth_.addAuthTokenListener(f):this.authProvider_.get().then(function(v){return v.addAuthTokenListener(f)})},p.prototype.removeTokenChangeListener=function(f){this.authProvider_.get().then(function(v){return v.removeAuthTokenListener(f)})},p.prototype.notifyForInvalidToken=function(){var f='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';Et(f+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},p}(),Jt=function(){function p(f){this.accessToken=f}return p.prototype.getToken=function(f){return Promise.resolve({accessToken:this.accessToken})},p.prototype.addTokenChangeListener=function(f){f(this.accessToken)},p.prototype.removeTokenChangeListener=function(f){},p.prototype.notifyForInvalidToken=function(){},p.OWNER="owner",p}(),Kn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Mt="websocket",Pt="long_polling",nn=function(){function p(f,v,h,g,d,b,S){void 0===d&&(d=!1),void 0===b&&(b=""),void 0===S&&(S=!1),this.secure=v,this.namespace=h,this.webSocketOnly=g,this.nodeAdmin=d,this.persistenceKey=b,this.includeNamespaceInQueryParams=S,this._host=f.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pe.get("host:"+f)||this._host}return p.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},p.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(p.prototype,"host",{get:function(){return this._host},set:function(f){f!==this.internalHost&&(this.internalHost=f,this.isCacheableHost()&&pe.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),p.prototype.toString=function(){var f=this.toURLString();return this.persistenceKey&&(f+="<"+this.persistenceKey+">"),f},p.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},p}();function Ne(p,f,v){var h;if((0,K.hu)("string"==typeof f,"typeof type must == string"),(0,K.hu)("object"==typeof v,"typeof params must == object"),f===Mt)h=(p.secure?"wss://":"ws://")+p.internalHost+"/.ws?";else{if(f!==Pt)throw new Error("Unknown connection type: "+f);h=(p.secure?"https://":"http://")+p.internalHost+"/.lp?"}(function(p){return p.host!==p.internalHost||p.isCustomHost()||p.includeNamespaceInQueryParams})(p)&&(v.ns=p.namespace);var g=[];return Bt(v,function(d,b){g.push(d+"="+b)}),h+g.join("&")}var ft=function(){function p(){this.counters_={}}return p.prototype.incrementCounter=function(f,v){void 0===v&&(v=1),(0,K.r3)(this.counters_,f)||(this.counters_[f]=0),this.counters_[f]+=v},p.prototype.get=function(){return(0,K.p$)(this.counters_)},p}(),vt={},Dt={};function Ut(p){var f=p.toString();return vt[f]||(vt[f]=new ft),vt[f]}var fn=function(){function p(f){this.onMessage_=f,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return p.prototype.closeAfter=function(f,v){this.closeAfterResponse=f,this.onClose=v,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},p.prototype.handleResponse=function(f,v){var h=this;this.pendingResponses[f]=v;for(var g=function(){var S=d.pendingResponses[d.currentResponseNum];delete d.pendingResponses[d.currentResponseNum];for(var N=function(ue){S[ue]&&tr(function(){h.onMessage_(S[ue])})},Q=0;Q<S.length;++Q)N(Q);if(d.currentResponseNum===d.closeAfterResponse)return d.onClose&&(d.onClose(),d.onClose=null),"break";d.currentResponseNum++},d=this;this.pendingResponses[this.currentResponseNum]&&"break"!==g(););},p}(),Gi=function(){function p(f,v,h,g,d,b,S){var N=this;this.connId=f,this.repoInfo=v,this.applicationId=h,this.appCheckToken=g,this.authToken=d,this.transportSessionId=b,this.lastSessionId=S,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zt(f),this.stats_=Ut(v),this.urlFn=function(Q){return N.appCheckToken&&(Q.ac=N.appCheckToken),Ne(v,Pt,Q)}}return p.prototype.open=function(f,v){var h=this;this.curSegmentNum=0,this.onDisconnect_=v,this.myPacketOrderer=new fn(f),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){h.log_("Timed out trying to connect."),h.onClosed_(),h.connectTimeoutTimer_=null},Math.floor(3e4)),function(p){if((0,K.Yr)()||"complete"===document.readyState)p();else{var f=!1,v=function(){document.body?f||(f=!0,p()):setTimeout(v,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",v,!1),window.addEventListener("load",v,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&v()}),window.attachEvent("onload",v))}}(function(){if(!h.isClosed_){h.scriptTagHolder=new co(function(){for(var b=[],S=0;S<arguments.length;S++)b[S]=arguments[S];var N=(0,w.CR)(b,5),Q=N[0],ue=N[1],Ee=N[2];if(h.incrementIncomingBytes_(b),h.scriptTagHolder)if(h.connectTimeoutTimer_&&(clearTimeout(h.connectTimeoutTimer_),h.connectTimeoutTimer_=null),h.everConnected_=!0,"start"===Q)h.id=ue,h.password=Ee;else{if("close"!==Q)throw new Error("Unrecognized command received: "+Q);ue?(h.scriptTagHolder.sendNewPolls=!1,h.myPacketOrderer.closeAfter(ue,function(){h.onClosed_()})):h.onClosed_()}},function(){for(var b=[],S=0;S<arguments.length;S++)b[S]=arguments[S];var N=(0,w.CR)(b,2),Q=N[0],ue=N[1];h.incrementIncomingBytes_(b),h.myPacketOrderer.handleResponse(Q,ue)},function(){h.onClosed_()},h.urlFn);var g={start:"t"};g.ser=Math.floor(1e8*Math.random()),h.scriptTagHolder.uniqueCallbackIdentifier&&(g.cb=h.scriptTagHolder.uniqueCallbackIdentifier),g.v="5",h.transportSessionId&&(g.s=h.transportSessionId),h.lastSessionId&&(g.ls=h.lastSessionId),h.applicationId&&(g.p=h.applicationId),h.appCheckToken&&(g.ac=h.appCheckToken),"undefined"!=typeof location&&location.hostname&&Kn.test(location.hostname)&&(g.r="f");var d=h.urlFn(g);h.log_("Connecting via long-poll to "+d),h.scriptTagHolder.addTag(d,function(){})}})},p.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},p.forceAllow=function(){p.forceAllow_=!0},p.forceDisallow=function(){p.forceDisallow_=!0},p.isAvailable=function(){return!((0,K.Yr)()||!p.forceAllow_&&(p.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},p.prototype.markConnectionHealthy=function(){},p.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},p.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},p.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},p.prototype.send=function(f){var v=(0,K.Pz)(f);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);for(var h=(0,K.h$)(v),g=on(h,1840),d=0;d<g.length;d++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,g.length,g[d]),this.curSegmentNum++},p.prototype.addDisconnectPingFrame=function(f,v){if(!(0,K.Yr)()){this.myDisconnFrame=document.createElement("iframe");var h={dframe:"t"};h.id=f,h.pw=v,this.myDisconnFrame.src=this.urlFn(h),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},p.prototype.incrementIncomingBytes_=function(f){var v=(0,K.Pz)(f).length;this.bytesReceived+=v,this.stats_.incrementCounter("bytes_received",v)},p}(),co=function(){function p(f,v,h,g){if(this.onDisconnect=h,this.urlFn=g,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,K.Yr)())this.commandCB=f,this.onMessageCB=v;else{this.uniqueCallbackIdentifier=Ye(),window["pLPCommand"+this.uniqueCallbackIdentifier]=f,window["pRTLPCB"+this.uniqueCallbackIdentifier]=v,this.myIFrame=p.createIFrame_();var d="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(d='<script>document.domain="'+document.domain+'";<\/script>');var S="<html><body>"+d+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(S),this.myIFrame.doc.close()}catch(N){at("frame writing exception"),N.stack&&at(N.stack),at(N)}}}return p.createIFrame_=function(){var f=document.createElement("iframe");if(f.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(f);try{f.contentWindow.document||at("No IE domain setting required")}catch(g){var h=document.domain;f.src="javascript:void((function(){document.open();document.domain='"+h+"';document.close();})())"}return f.contentDocument?f.doc=f.contentDocument:f.contentWindow?f.doc=f.contentWindow.document:f.document&&(f.doc=f.document),f},p.prototype.close=function(){var f=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==f.myIFrame&&(document.body.removeChild(f.myIFrame),f.myIFrame=null)},Math.floor(0)));var v=this.onDisconnect;v&&(this.onDisconnect=null,v())},p.prototype.startLongPoll=function(f,v){for(this.myID=f,this.myPW=v,this.alive=!0;this.newRequest_(););},p.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var f={};f.id=this.myID,f.pw=this.myPW,f.ser=this.currentSerial;for(var v=this.urlFn(f),h="",g=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+h.length<=1870;){var b=this.pendingSegs.shift();h=h+"&seg"+g+"="+b.seg+"&ts"+g+"="+b.ts+"&d"+g+"="+b.d,g++}return this.addLongPollTag_(v+=h,this.currentSerial),!0}return!1},p.prototype.enqueueSegment=function(f,v,h){this.pendingSegs.push({seg:f,ts:v,d:h}),this.alive&&this.newRequest_()},p.prototype.addLongPollTag_=function(f,v){var h=this;this.outstandingRequests.add(v);var g=function(){h.outstandingRequests.delete(v),h.newRequest_()},d=setTimeout(g,Math.floor(25e3));this.addTag(f,function(){clearTimeout(d),g()})},p.prototype.addTag=function(f,v){var h=this;(0,K.Yr)()?this.doNodeLongPoll(f,v):setTimeout(function(){try{if(!h.sendNewPolls)return;var g=h.myIFrame.doc.createElement("script");g.type="text/javascript",g.async=!0,g.src=f,g.onload=g.onreadystatechange=function(){var d=g.readyState;(!d||"loaded"===d||"complete"===d)&&(g.onload=g.onreadystatechange=null,g.parentNode&&g.parentNode.removeChild(g),v())},g.onerror=function(){at("Long-poll script failed to load: "+f),h.sendNewPolls=!1,h.close()},h.myIFrame.doc.body.appendChild(g)}catch(d){}},Math.floor(1))},p}(),cr=null;"undefined"!=typeof MozWebSocket?cr=MozWebSocket:"undefined"!=typeof WebSocket&&(cr=WebSocket);var vn=function(){function p(f,v,h,g,d,b,S){this.connId=f,this.applicationId=h,this.appCheckToken=g,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zt(this.connId),this.stats_=Ut(v),this.connURL=p.connectionURL_(v,b,S,g),this.nodeAdmin=v.nodeAdmin}return p.connectionURL_=function(f,v,h,g){var d={v:"5"};return!(0,K.Yr)()&&"undefined"!=typeof location&&location.hostname&&Kn.test(location.hostname)&&(d.r="f"),v&&(d.s=v),h&&(d.ls=h),g&&(d.ac=g),Ne(f,Mt,d)},p.prototype.open=function(f,v){var h=this;this.onDisconnect=v,this.onMessage=f,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pe.set("previous_websocket_failure",!0);try{if((0,K.Yr)()){var d={headers:{"User-Agent":"Firebase/5/"+fe+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(d.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(d.headers["X-Firebase-AppCheck"]=this.appCheckToken);var b=process.env,S=0===this.connURL.indexOf("wss://")?b.HTTPS_PROXY||b.https_proxy:b.HTTP_PROXY||b.http_proxy;S&&(d.proxy={origin:S}),this.mySock=new cr(this.connURL,[],d)}else this.mySock=new cr(this.connURL,[],d={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(Q){this.log_("Error instantiating WebSocket.");var N=Q.message||Q.data;return N&&this.log_(N),void this.onClosed_()}this.mySock.onopen=function(){h.log_("Websocket connected."),h.everConnected_=!0},this.mySock.onclose=function(){h.log_("Websocket connection was disconnected."),h.mySock=null,h.onClosed_()},this.mySock.onmessage=function(Q){h.handleIncomingFrame(Q)},this.mySock.onerror=function(Q){h.log_("WebSocket error.  Closing connection.");var ue=Q.message||Q.data;ue&&h.log_(ue),h.onClosed_()}},p.prototype.start=function(){},p.forceDisallow=function(){p.forceDisallow_=!0},p.isAvailable=function(){var f=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var h=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);h&&h.length>1&&parseFloat(h[1])<4.4&&(f=!0)}return!f&&null!==cr&&!p.forceDisallow_},p.previouslyFailed=function(){return pe.isInMemoryStorage||!0===pe.get("previous_websocket_failure")},p.prototype.markConnectionHealthy=function(){pe.remove("previous_websocket_failure")},p.prototype.appendFrame_=function(f){if(this.frames.push(f),this.frames.length===this.totalFrames){var v=this.frames.join("");this.frames=null;var h=(0,K.cI)(v);this.onMessage(h)}},p.prototype.handleNewFrameCount_=function(f){this.totalFrames=f,this.frames=[]},p.prototype.extractFrameCount_=function(f){if((0,K.hu)(null===this.frames,"We already have a frame buffer"),f.length<=6){var v=Number(f);if(!isNaN(v))return this.handleNewFrameCount_(v),null}return this.handleNewFrameCount_(1),f},p.prototype.handleIncomingFrame=function(f){if(null!==this.mySock){var v=f.data;if(this.bytesReceived+=v.length,this.stats_.incrementCounter("bytes_received",v.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(v);else{var h=this.extractFrameCount_(v);null!==h&&this.appendFrame_(h)}}},p.prototype.send=function(f){this.resetKeepAlive();var v=(0,K.Pz)(f);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);var h=on(v,16384);h.length>1&&this.sendString_(String(h.length));for(var g=0;g<h.length;g++)this.sendString_(h[g])},p.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},p.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},p.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},p.prototype.resetKeepAlive=function(){var f=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){f.mySock&&f.sendString_("0"),f.resetKeepAlive()},Math.floor(45e3))},p.prototype.sendString_=function(f){try{this.mySock.send(f)}catch(v){this.log_("Exception thrown from WebSocket.send():",v.message||v.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},p.responsesRequiredToBeHealthy=2,p.healthyTimeout=3e4,p}(),Vr=function(){function p(f){this.initTransports_(f)}return Object.defineProperty(p,"ALL_TRANSPORTS",{get:function(){return[Gi,vn]},enumerable:!1,configurable:!0}),p.prototype.initTransports_=function(f){var v,h,g=vn&&vn.isAvailable(),d=g&&!vn.previouslyFailed();if(f.webSocketOnly&&(g||Et("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),d=!0),d)this.transports_=[vn];else{var b=this.transports_=[];try{for(var S=(0,w.XA)(p.ALL_TRANSPORTS),N=S.next();!N.done;N=S.next()){var Q=N.value;Q&&Q.isAvailable()&&b.push(Q)}}catch(ue){v={error:ue}}finally{try{N&&!N.done&&(h=S.return)&&h.call(S)}finally{if(v)throw v.error}}}},p.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},p.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},p}(),Be=function(){function p(f,v,h,g,d,b,S,N,Q,ue){this.id=f,this.repoInfo_=v,this.applicationId_=h,this.appCheckToken_=g,this.authToken_=d,this.onMessage_=b,this.onReady_=S,this.onDisconnect_=N,this.onKill_=Q,this.lastSessionId=ue,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zt("c:"+this.id+":"),this.transportManager_=new Vr(v),this.log_("Connection created"),this.start_()}return p.prototype.start_=function(){var f=this,v=this.transportManager_.initialTransport();this.conn_=new v(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=v.responsesRequiredToBeHealthy||0;var h=this.connReceiver_(this.conn_),g=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){f.conn_&&f.conn_.open(h,g)},Math.floor(0));var d=v.healthyTimeout||0;d>0&&(this.healthyTimeout_=Mn(function(){f.healthyTimeout_=null,f.isHealthy_||(f.conn_&&f.conn_.bytesReceived>102400?(f.log_("Connection exceeded healthy timeout but has received "+f.conn_.bytesReceived+" bytes.  Marking connection healthy."),f.isHealthy_=!0,f.conn_.markConnectionHealthy()):f.conn_&&f.conn_.bytesSent>10240?f.log_("Connection exceeded healthy timeout but has sent "+f.conn_.bytesSent+" bytes.  Leaving connection alive."):(f.log_("Closing unhealthy connection after timeout."),f.close()))},Math.floor(d)))},p.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},p.prototype.disconnReceiver_=function(f){var v=this;return function(h){f===v.conn_?v.onConnectionLost_(h):f===v.secondaryConn_?(v.log_("Secondary connection lost."),v.onSecondaryConnectionLost_()):v.log_("closing an old connection")}},p.prototype.connReceiver_=function(f){var v=this;return function(h){2!==v.state_&&(f===v.rx_?v.onPrimaryMessageReceived_(h):f===v.secondaryConn_?v.onSecondaryMessageReceived_(h):v.log_("message on old connection"))}},p.prototype.sendRequest=function(f){this.sendData_({t:"d",d:f})},p.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},p.prototype.onSecondaryControl_=function(f){if("t"in f){var v=f.t;"a"===v?this.upgradeIfSecondaryHealthy_():"r"===v?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===v&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},p.prototype.onSecondaryMessageReceived_=function(f){var v=an("t",f),h=an("d",f);if("c"===v)this.onSecondaryControl_(h);else{if("d"!==v)throw new Error("Unknown protocol layer: "+v);this.pendingDataMessages.push(h)}},p.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},p.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},p.prototype.onPrimaryMessageReceived_=function(f){var v=an("t",f),h=an("d",f);"c"===v?this.onControl_(h):"d"===v&&this.onDataMessage_(h)},p.prototype.onDataMessage_=function(f){this.onPrimaryResponse_(),this.onMessage_(f)},p.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},p.prototype.onControl_=function(f){var v=an("t",f);if("d"in f){var h=f.d;if("h"===v)this.onHandshake_(h);else if("n"===v){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var g=0;g<this.pendingDataMessages.length;++g)this.onDataMessage_(this.pendingDataMessages[g]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===v?this.onConnectionShutdown_(h):"r"===v?this.onReset_(h):"e"===v?It("Server Error: "+h):"o"===v?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):It("Unknown control packet command: "+v)}},p.prototype.onHandshake_=function(f){var v=f.ts,h=f.v,g=f.h;this.sessionId=f.s,this.repoInfo_.host=g,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,v),"5"!==h&&Et("Protocol version mismatch detected"),this.tryStartUpgrade_())},p.prototype.tryStartUpgrade_=function(){var f=this.transportManager_.upgradeTransport();f&&this.startUpgrade_(f)},p.prototype.startUpgrade_=function(f){var v=this;this.secondaryConn_=new f(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=f.responsesRequiredToBeHealthy||0;var h=this.connReceiver_(this.secondaryConn_),g=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(h,g),Mn(function(){v.secondaryConn_&&(v.log_("Timed out trying to upgrade."),v.secondaryConn_.close())},Math.floor(6e4))},p.prototype.onReset_=function(f){this.log_("Reset packet received.  New host: "+f),this.repoInfo_.host=f,1===this.state_?this.close():(this.closeConnections_(),this.start_())},p.prototype.onConnectionEstablished_=function(f,v){var h=this;this.log_("Realtime connection established."),this.conn_=f,this.state_=1,this.onReady_&&(this.onReady_(v,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Mn(function(){h.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},p.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},p.prototype.onSecondaryConnectionLost_=function(){var f=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===f||this.rx_===f)&&this.close()},p.prototype.onConnectionLost_=function(f){this.conn_=null,f||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pe.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},p.prototype.onConnectionShutdown_=function(f){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(f),this.onKill_=null),this.onDisconnect_=null,this.close()},p.prototype.sendData_=function(f){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(f)},p.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},p.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},p}(),Ae=function(){function p(){}return p.prototype.put=function(f,v,h,g){},p.prototype.merge=function(f,v,h,g){},p.prototype.refreshAuthToken=function(f){},p.prototype.refreshAppCheckToken=function(f){},p.prototype.onDisconnectPut=function(f,v,h){},p.prototype.onDisconnectMerge=function(f,v,h){},p.prototype.onDisconnectCancel=function(f,v){},p.prototype.reportStats=function(f){},p}(),ot=function(){function p(f){this.allowedEvents_=f,this.listeners_={},(0,K.hu)(Array.isArray(f)&&f.length>0,"Requires a non-empty array")}return p.prototype.trigger=function(f){for(var v=[],h=1;h<arguments.length;h++)v[h-1]=arguments[h];if(Array.isArray(this.listeners_[f]))for(var g=(0,w.ev)([],(0,w.CR)(this.listeners_[f])),d=0;d<g.length;d++)g[d].callback.apply(g[d].context,v)},p.prototype.on=function(f,v,h){this.validateEventType_(f),this.listeners_[f]=this.listeners_[f]||[],this.listeners_[f].push({callback:v,context:h});var g=this.getInitialEvent(f);g&&v.apply(h,g)},p.prototype.off=function(f,v,h){this.validateEventType_(f);for(var g=this.listeners_[f]||[],d=0;d<g.length;d++)if(g[d].callback===v&&(!h||h===g[d].context))return void g.splice(d,1)},p.prototype.validateEventType_=function(f){(0,K.hu)(this.allowedEvents_.find(function(v){return v===f}),"Unknown event: "+f)},p}(),St=function(p){function f(){var v=p.call(this,["online"])||this;return v.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,K.uI)()&&(window.addEventListener("online",function(){v.online_||(v.online_=!0,v.trigger("online",!0))},!1),window.addEventListener("offline",function(){v.online_&&(v.online_=!1,v.trigger("online",!1))},!1)),v}return(0,w.ZT)(f,p),f.getInstance=function(){return new f},f.prototype.getInitialEvent=function(v){return(0,K.hu)("online"===v,"Unknown event type: "+v),[this.online_]},f.prototype.currentlyOnline=function(){return this.online_},f}(ot),gn=function(){function p(f,v){if(void 0===v){this.pieces_=f.split("/");for(var h=0,g=0;g<this.pieces_.length;g++)this.pieces_[g].length>0&&(this.pieces_[h]=this.pieces_[g],h++);this.pieces_.length=h,this.pieceNum_=0}else this.pieces_=f,this.pieceNum_=v}return p.prototype.toString=function(){for(var f="",v=this.pieceNum_;v<this.pieces_.length;v++)""!==this.pieces_[v]&&(f+="/"+this.pieces_[v]);return f||"/"},p}();function un(){return new gn("")}function Jn(p){return p.pieceNum_>=p.pieces_.length?null:p.pieces_[p.pieceNum_]}function Li(p){return p.pieces_.length-p.pieceNum_}function gr(p){var f=p.pieceNum_;return f<p.pieces_.length&&f++,new gn(p.pieces_,f)}function ki(p){return p.pieceNum_<p.pieces_.length?p.pieces_[p.pieces_.length-1]:null}function Gr(p,f){return void 0===f&&(f=0),p.pieces_.slice(p.pieceNum_+f)}function Fi(p){if(p.pieceNum_>=p.pieces_.length)return null;for(var f=[],v=p.pieceNum_;v<p.pieces_.length-1;v++)f.push(p.pieces_[v]);return new gn(f,0)}function sr(p,f){for(var v=[],h=p.pieceNum_;h<p.pieces_.length;h++)v.push(p.pieces_[h]);if(f instanceof gn)for(h=f.pieceNum_;h<f.pieces_.length;h++)v.push(f.pieces_[h]);else{var g=f.split("/");for(h=0;h<g.length;h++)g[h].length>0&&v.push(g[h])}return new gn(v,0)}function jn(p){return p.pieceNum_>=p.pieces_.length}function Yr(p,f){var v=Jn(p),h=Jn(f);if(null===v)return f;if(v===h)return Yr(gr(p),gr(f));throw new Error("INTERNAL ERROR: innerPath ("+f+") is not within outerPath ("+p+")")}function Mr(p,f){for(var v=Gr(p,0),h=Gr(f,0),g=0;g<v.length&&g<h.length;g++){var d=st(v[g],h[g]);if(0!==d)return d}return v.length===h.length?0:v.length<h.length?-1:1}function Ui(p,f){if(Li(p)!==Li(f))return!1;for(var v=p.pieceNum_,h=f.pieceNum_;v<=p.pieces_.length;v++,h++)if(p.pieces_[v]!==f.pieces_[h])return!1;return!0}function ri(p,f){var v=p.pieceNum_,h=f.pieceNum_;if(Li(p)>Li(f))return!1;for(;v<p.pieces_.length;){if(p.pieces_[v]!==f.pieces_[h])return!1;++v,++h}return!0}var Vi=function(f,v){this.errorPrefix_=v,this.parts_=Gr(f,0),this.byteLength_=Math.max(1,this.parts_.length);for(var h=0;h<this.parts_.length;h++)this.byteLength_+=(0,K.ug)(this.parts_[h]);Zo(this)};function Zo(p){if(p.byteLength_>768)throw new Error(p.errorPrefix_+"has a key path longer than 768 bytes ("+p.byteLength_+").");if(p.parts_.length>32)throw new Error(p.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Lr(p))}function Lr(p){return 0===p.parts_.length?"":"in property '"+p.parts_.join(".")+"'"}var Ki,ge,is=function(p){function f(){var h,g,v=p.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(g="visibilitychange",h="hidden"):void 0!==document.mozHidden?(g="mozvisibilitychange",h="mozHidden"):void 0!==document.msHidden?(g="msvisibilitychange",h="msHidden"):void 0!==document.webkitHidden&&(g="webkitvisibilitychange",h="webkitHidden")),v.visible_=!0,g&&document.addEventListener(g,function(){var d=!document[h];d!==v.visible_&&(v.visible_=d,v.trigger("visible",d))},!1),v}return(0,w.ZT)(f,p),f.getInstance=function(){return new f},f.prototype.getInitialEvent=function(v){return(0,K.hu)("visible"===v,"Unknown event type: "+v),[this.visible_]},f}(ot),Bi=1e3,ci=function(p){function f(v,h,g,d,b,S,N,Q){var ue=p.call(this)||this;if(ue.repoInfo_=v,ue.applicationId_=h,ue.onDataUpdate_=g,ue.onConnectStatus_=d,ue.onServerInfoUpdate_=b,ue.authTokenProvider_=S,ue.appCheckTokenProvider_=N,ue.authOverride_=Q,ue.id=f.nextPersistentConnectionId_++,ue.log_=zt("p:"+ue.id+":"),ue.interruptReasons_={},ue.listens=new Map,ue.outstandingPuts_=[],ue.outstandingGets_=[],ue.outstandingPutCount_=0,ue.outstandingGetCount_=0,ue.onDisconnectRequestQueue_=[],ue.connected_=!1,ue.reconnectDelay_=Bi,ue.maxReconnectDelay_=3e5,ue.securityDebugCallback_=null,ue.lastSessionId=null,ue.establishConnectionTimer_=null,ue.visible_=!1,ue.requestCBHash_={},ue.requestNumber_=0,ue.realtime_=null,ue.authToken_=null,ue.appCheckToken_=null,ue.forceTokenRefresh_=!1,ue.invalidAuthTokenCount_=0,ue.invalidAppCheckTokenCount_=0,ue.firstConnection_=!0,ue.lastConnectionAttemptTime_=null,ue.lastConnectionEstablishedTime_=null,Q&&!(0,K.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return is.getInstance().on("visible",ue.onVisible_,ue),-1===v.host.indexOf("fblocal")&&St.getInstance().on("online",ue.onOnline_,ue),ue}return(0,w.ZT)(f,p),f.prototype.sendRequest=function(v,h,g){var d=++this.requestNumber_,b={r:d,a:v,b:h};this.log_((0,K.Pz)(b)),(0,K.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(b),g&&(this.requestCBHash_[d]=g)},f.prototype.get=function(v){var h=this;this.initConnection_();var g=new K.BH,d={p:v._path.toString(),q:v._queryObject},b={action:"g",request:d,onComplete:function(N){var Q=N.d;"ok"===N.s?(h.onDataUpdate_(d.p,Q,!1,null),g.resolve(Q)):g.reject(Q)}};this.outstandingGets_.push(b),this.outstandingGetCount_++;var S=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var N=h.outstandingGets_[S];void 0===N||b!==N||(delete h.outstandingGets_[S],h.outstandingGetCount_--,0===h.outstandingGetCount_&&(h.outstandingGets_=[]),h.log_("get "+S+" timed out on connection"),g.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(S),g.promise},f.prototype.listen=function(v,h,g,d){this.initConnection_();var b=v._queryIdentifier,S=v._path.toString();this.log_("Listen called for "+S+" "+b),this.listens.has(S)||this.listens.set(S,new Map),(0,K.hu)(v._queryParams.isDefault()||!v._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,K.hu)(!this.listens.get(S).has(b),"listen() called twice for same path/queryId.");var N={onComplete:d,hashFn:h,query:v,tag:g};this.listens.get(S).set(b,N),this.connected_&&this.sendListen_(N)},f.prototype.sendGet_=function(v){var h=this,g=this.outstandingGets_[v];this.sendRequest("g",g.request,function(d){delete h.outstandingGets_[v],h.outstandingGetCount_--,0===h.outstandingGetCount_&&(h.outstandingGets_=[]),g.onComplete&&g.onComplete(d)})},f.prototype.sendListen_=function(v){var h=this,g=v.query,d=g._path.toString(),b=g._queryIdentifier;this.log_("Listen on "+d+" for "+b);var S={p:d};v.tag&&(S.q=g._queryObject,S.t=v.tag),S.h=v.hashFn(),this.sendRequest("q",S,function(Q){var ue=Q.d,Ee=Q.s;f.warnOnListenWarnings_(ue,g),(h.listens.get(d)&&h.listens.get(d).get(b))===v&&(h.log_("listen response",Q),"ok"!==Ee&&h.removeListen_(d,b),v.onComplete&&v.onComplete(Ee,ue))})},f.warnOnListenWarnings_=function(v,h){if(v&&"object"==typeof v&&(0,K.r3)(v,"w")){var g=(0,K.DV)(v,"w");if(Array.isArray(g)&&~g.indexOf("no_index")){var d='".indexOn": "'+h._queryParams.getIndex().toString()+'"',b=h._path.toString();Et("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+d+" at "+b+" to your security rules for better performance.")}}},f.prototype.refreshAuthToken=function(v){this.authToken_=v,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(v)},f.prototype.reduceReconnectDelayIfAdminCredential_=function(v){(v&&40===v.length||(0,K.GJ)(v))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},f.prototype.refreshAppCheckToken=function(v){this.appCheckToken_=v,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},f.prototype.tryAuth=function(){var v=this;if(this.connected_&&this.authToken_){var h=this.authToken_,g=(0,K.w9)(h)?"auth":"gauth",d={cred:h};null===this.authOverride_?d.noauth=!0:"object"==typeof this.authOverride_&&(d.authvar=this.authOverride_),this.sendRequest(g,d,function(b){var S=b.s,N=b.d||"error";v.authToken_===h&&("ok"===S?v.invalidAuthTokenCount_=0:v.onAuthRevoked_(S,N))})}},f.prototype.tryAppCheck=function(){var v=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(h){var g=h.s,d=h.d||"error";"ok"===g?v.invalidAppCheckTokenCount_=0:v.onAppCheckRevoked_(g,d)})},f.prototype.unlisten=function(v,h){var g=v._path.toString(),d=v._queryIdentifier;this.log_("Unlisten called for "+g+" "+d),(0,K.hu)(v._queryParams.isDefault()||!v._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(g,d)&&this.connected_&&this.sendUnlisten_(g,d,v._queryObject,h)},f.prototype.sendUnlisten_=function(v,h,g,d){this.log_("Unlisten on "+v+" for "+h);var b={p:v};d&&(b.q=g,b.t=d),this.sendRequest("n",b)},f.prototype.onDisconnectPut=function(v,h,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",v,h,g):this.onDisconnectRequestQueue_.push({pathString:v,action:"o",data:h,onComplete:g})},f.prototype.onDisconnectMerge=function(v,h,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",v,h,g):this.onDisconnectRequestQueue_.push({pathString:v,action:"om",data:h,onComplete:g})},f.prototype.onDisconnectCancel=function(v,h){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",v,null,h):this.onDisconnectRequestQueue_.push({pathString:v,action:"oc",data:null,onComplete:h})},f.prototype.sendOnDisconnect_=function(v,h,g,d){var b={p:h,d:g};this.log_("onDisconnect "+v,b),this.sendRequest(v,b,function(S){d&&setTimeout(function(){d(S.s,S.d)},Math.floor(0))})},f.prototype.put=function(v,h,g,d){this.putInternal("p",v,h,g,d)},f.prototype.merge=function(v,h,g,d){this.putInternal("m",v,h,g,d)},f.prototype.putInternal=function(v,h,g,d,b){this.initConnection_();var S={p:h,d:g};void 0!==b&&(S.h=b),this.outstandingPuts_.push({action:v,request:S,onComplete:d}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+h)},f.prototype.sendPut_=function(v){var h=this,g=this.outstandingPuts_[v].action,d=this.outstandingPuts_[v].request,b=this.outstandingPuts_[v].onComplete;this.outstandingPuts_[v].queued=this.connected_,this.sendRequest(g,d,function(S){h.log_(g+" response",S),delete h.outstandingPuts_[v],h.outstandingPutCount_--,0===h.outstandingPutCount_&&(h.outstandingPuts_=[]),b&&b(S.s,S.d)})},f.prototype.reportStats=function(v){var h=this;if(this.connected_){var g={c:v};this.log_("reportStats",g),this.sendRequest("s",g,function(d){"ok"!==d.s&&h.log_("reportStats","Error sending stats: "+d.d)})}},f.prototype.onDataMessage_=function(v){if("r"in v){this.log_("from server: "+(0,K.Pz)(v));var h=v.r,g=this.requestCBHash_[h];g&&(delete this.requestCBHash_[h],g(v.b))}else{if("error"in v)throw"A server-side error has occurred: "+v.error;"a"in v&&this.onDataPush_(v.a,v.b)}},f.prototype.onDataPush_=function(v,h){this.log_("handleServerMessage",v,h),"d"===v?this.onDataUpdate_(h.p,h.d,!1,h.t):"m"===v?this.onDataUpdate_(h.p,h.d,!0,h.t):"c"===v?this.onListenRevoked_(h.p,h.q):"ac"===v?this.onAuthRevoked_(h.s,h.d):"apc"===v?this.onAppCheckRevoked_(h.s,h.d):"sd"===v?this.onSecurityDebugPacket_(h):It("Unrecognized action received from server: "+(0,K.Pz)(v)+"\nAre you using the latest client?")},f.prototype.onReady_=function(v,h){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(v),this.lastSessionId=h,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},f.prototype.scheduleConnect_=function(v){var h=this;(0,K.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){h.establishConnectionTimer_=null,h.establishConnection_()},Math.floor(v))},f.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},f.prototype.onVisible_=function(v){v&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bi,this.realtime_||this.scheduleConnect_(0)),this.visible_=v},f.prototype.onOnline_=function(v){v?(this.log_("Browser went online."),this.reconnectDelay_=Bi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},f.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Bi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var h=(new Date).getTime()-this.lastConnectionAttemptTime_,g=Math.max(0,this.reconnectDelay_-h);g=Math.random()*g,this.log_("Trying to reconnect in "+g+"ms"),this.scheduleConnect_(g),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},f.prototype.establishConnection_=function(){return(0,w.mG)(this,void 0,void 0,function(){var v,h,g,d,b,S,N,Q,Ee,Ge,ht,xt,Dn,bn=this;return(0,w.Jh)(this,function(Yn){switch(Yn.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,v=this.onDataMessage_.bind(this),h=this.onReady_.bind(this),g=this.onRealtimeDisconnect_.bind(this),d=this.id+":"+f.nextConnectionId_++,b=this.lastSessionId,S=!1,N=null,this.realtime_={close:Q=function(){N?N.close():(S=!0,g())},sendRequest:function(Wr){(0,K.hu)(N,"sendRequest call when we're not connected not allowed."),N.sendRequest(Wr)}},Ee=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,Yn.label=1;case 1:return Yn.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(Ee),this.appCheckTokenProvider_.getToken(Ee)])];case 2:return Ge=w.CR.apply(void 0,[Yn.sent(),2]),ht=Ge[0],xt=Ge[1],S?at("getToken() completed but was canceled"):(at("getToken() completed. Creating connection."),this.authToken_=ht&&ht.accessToken,this.appCheckToken_=xt&&xt.token,N=new Be(d,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,v,h,g,function(Wr){Et(Wr+" ("+bn.repoInfo_.toString()+")"),bn.interrupt("server_kill")},b)),[3,4];case 3:return Dn=Yn.sent(),this.log_("Failed to get token: "+Dn),S||(this.repoInfo_.nodeAdmin&&Et(Dn),Q()),[3,4];case 4:return[2]}})})},f.prototype.interrupt=function(v){at("Interrupting connection for reason: "+v),this.interruptReasons_[v]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},f.prototype.resume=function(v){at("Resuming connection for reason: "+v),delete this.interruptReasons_[v],(0,K.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Bi,this.realtime_||this.scheduleConnect_(0))},f.prototype.handleTimestamp_=function(v){var h=v-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:h})},f.prototype.cancelSentTransactions_=function(){for(var v=0;v<this.outstandingPuts_.length;v++){var h=this.outstandingPuts_[v];h&&"h"in h.request&&h.queued&&(h.onComplete&&h.onComplete("disconnect"),delete this.outstandingPuts_[v],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},f.prototype.onListenRevoked_=function(v,h){var g;g=h?h.map(function(b){return Sn(b)}).join("$"):"default";var d=this.removeListen_(v,g);d&&d.onComplete&&d.onComplete("permission_denied")},f.prototype.removeListen_=function(v,h){var d,g=new gn(v).toString();if(this.listens.has(g)){var b=this.listens.get(g);d=b.get(h),b.delete(h),0===b.size&&this.listens.delete(g)}else d=void 0;return d},f.prototype.onAuthRevoked_=function(v,h){at("Auth token revoked: "+v+"/"+h),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===v||"permission_denied"===v)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},f.prototype.onAppCheckRevoked_=function(v,h){at("App check token revoked: "+v+"/"+h),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===v||"permission_denied"===v)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},f.prototype.onSecurityDebugPacket_=function(v){this.securityDebugCallback_?this.securityDebugCallback_(v):"msg"in v&&console.log("FIREBASE: "+v.msg.replace("\n","\nFIREBASE: "))},f.prototype.restoreState_=function(){var v,h,g,d;this.tryAuth(),this.tryAppCheck();try{for(var b=(0,w.XA)(this.listens.values()),S=b.next();!S.done;S=b.next()){var N=S.value;try{for(var Q=(g=void 0,(0,w.XA)(N.values())),ue=Q.next();!ue.done;ue=Q.next())this.sendListen_(ue.value)}catch(xt){g={error:xt}}finally{try{ue&&!ue.done&&(d=Q.return)&&d.call(Q)}finally{if(g)throw g.error}}}}catch(xt){v={error:xt}}finally{try{S&&!S.done&&(h=b.return)&&h.call(b)}finally{if(v)throw v.error}}for(var Ge=0;Ge<this.outstandingPuts_.length;Ge++)this.outstandingPuts_[Ge]&&this.sendPut_(Ge);for(;this.onDisconnectRequestQueue_.length;){var ht=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(ht.action,ht.pathString,ht.data,ht.onComplete)}for(Ge=0;Ge<this.outstandingGets_.length;Ge++)this.outstandingGets_[Ge]&&this.sendGet_(Ge)},f.prototype.sendConnectStats_=function(){var v={},h="js";(0,K.Yr)()&&(h=this.repoInfo_.nodeAdmin?"admin_node":"node"),v["sdk."+h+"."+fe.replace(/\./g,"-")]=1,(0,K.uI)()?v["framework.cordova"]=1:(0,K.b$)()&&(v["framework.reactnative"]=1),this.reportStats(v)},f.prototype.shouldReconnect_=function(){var v=St.getInstance().currentlyOnline();return(0,K.xb)(this.interruptReasons_)&&v},f.nextPersistentConnectionId_=0,f.nextConnectionId_=0,f}(Ae),nr=function(){function p(f,v){this.name=f,this.node=v}return p.Wrap=function(f,v){return new p(f,v)},p}(),Yi=function(){function p(){}return p.prototype.getCompare=function(){return this.compare.bind(this)},p.prototype.indexedValueChanged=function(f,v){var h=new nr(et,f),g=new nr(et,v);return 0!==this.compare(h,g)},p.prototype.minPost=function(){return nr.MIN},p}(),to=function(p){function f(){return null!==p&&p.apply(this,arguments)||this}return(0,w.ZT)(f,p),Object.defineProperty(f,"__EMPTY_NODE",{get:function(){return Ki},set:function(v){Ki=v},enumerable:!1,configurable:!0}),f.prototype.compare=function(v,h){return st(v.name,h.name)},f.prototype.isDefinedOn=function(v){throw(0,K.g5)("KeyIndex.isDefinedOn not expected to be called.")},f.prototype.indexedValueChanged=function(v,h){return!1},f.prototype.minPost=function(){return nr.MIN},f.prototype.maxPost=function(){return new nr(_t,Ki)},f.prototype.makePost=function(v,h){return(0,K.hu)("string"==typeof v,"KeyIndex indexValue must always be a string."),new nr(v,Ki)},f.prototype.toString=function(){return".key"},f}(Yi),xi=new to,no=function(){function p(f,v,h,g,d){void 0===d&&(d=null),this.isReverse_=g,this.resultGenerator_=d,this.nodeStack_=[];for(var b=1;!f.isEmpty();)if(f=f,b=v?h(f.key,v):1,g&&(b*=-1),b<0)f=this.isReverse_?f.left:f.right;else{if(0===b){this.nodeStack_.push(f);break}this.nodeStack_.push(f),f=this.isReverse_?f.right:f.left}}return p.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var v,f=this.nodeStack_.pop();if(v=this.resultGenerator_?this.resultGenerator_(f.key,f.value):{key:f.key,value:f.value},this.isReverse_)for(f=f.left;!f.isEmpty();)this.nodeStack_.push(f),f=f.right;else for(f=f.right;!f.isEmpty();)this.nodeStack_.push(f),f=f.left;return v},p.prototype.hasNext=function(){return this.nodeStack_.length>0},p.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var f=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(f.key,f.value):{key:f.key,value:f.value}},p}(),ii=function(){function p(f,v,h,g,d){this.key=f,this.value=v,this.color=null!=h?h:p.RED,this.left=null!=g?g:ne.EMPTY_NODE,this.right=null!=d?d:ne.EMPTY_NODE}return p.prototype.copy=function(f,v,h,g,d){return new p(null!=f?f:this.key,null!=v?v:this.value,null!=h?h:this.color,null!=g?g:this.left,null!=d?d:this.right)},p.prototype.count=function(){return this.left.count()+1+this.right.count()},p.prototype.isEmpty=function(){return!1},p.prototype.inorderTraversal=function(f){return this.left.inorderTraversal(f)||!!f(this.key,this.value)||this.right.inorderTraversal(f)},p.prototype.reverseTraversal=function(f){return this.right.reverseTraversal(f)||f(this.key,this.value)||this.left.reverseTraversal(f)},p.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},p.prototype.minKey=function(){return this.min_().key},p.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},p.prototype.insert=function(f,v,h){var g=this,d=h(f,g.key);return(g=d<0?g.copy(null,null,null,g.left.insert(f,v,h),null):0===d?g.copy(null,v,null,null,null):g.copy(null,null,null,null,g.right.insert(f,v,h))).fixUp_()},p.prototype.removeMin_=function(){if(this.left.isEmpty())return ne.EMPTY_NODE;var f=this;return!f.left.isRed_()&&!f.left.left.isRed_()&&(f=f.moveRedLeft_()),(f=f.copy(null,null,null,f.left.removeMin_(),null)).fixUp_()},p.prototype.remove=function(f,v){var h,g;if(v(f,(h=this).key)<0)!h.left.isEmpty()&&!h.left.isRed_()&&!h.left.left.isRed_()&&(h=h.moveRedLeft_()),h=h.copy(null,null,null,h.left.remove(f,v),null);else{if(h.left.isRed_()&&(h=h.rotateRight_()),!h.right.isEmpty()&&!h.right.isRed_()&&!h.right.left.isRed_()&&(h=h.moveRedRight_()),0===v(f,h.key)){if(h.right.isEmpty())return ne.EMPTY_NODE;g=h.right.min_(),h=h.copy(g.key,g.value,null,null,h.right.removeMin_())}h=h.copy(null,null,null,null,h.right.remove(f,v))}return h.fixUp_()},p.prototype.isRed_=function(){return this.color},p.prototype.fixUp_=function(){var f=this;return f.right.isRed_()&&!f.left.isRed_()&&(f=f.rotateLeft_()),f.left.isRed_()&&f.left.left.isRed_()&&(f=f.rotateRight_()),f.left.isRed_()&&f.right.isRed_()&&(f=f.colorFlip_()),f},p.prototype.moveRedLeft_=function(){var f=this.colorFlip_();return f.right.left.isRed_()&&(f=(f=(f=f.copy(null,null,null,null,f.right.rotateRight_())).rotateLeft_()).colorFlip_()),f},p.prototype.moveRedRight_=function(){var f=this.colorFlip_();return f.left.left.isRed_()&&(f=(f=f.rotateRight_()).colorFlip_()),f},p.prototype.rotateLeft_=function(){var f=this.copy(null,null,p.RED,null,this.right.left);return this.right.copy(null,null,this.color,f,null)},p.prototype.rotateRight_=function(){var f=this.copy(null,null,p.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,f)},p.prototype.colorFlip_=function(){var f=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,f,v)},p.prototype.checkMaxDepth_=function(){var f=this.check_();return Math.pow(2,f)<=this.count()+1},p.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var f=this.left.check_();if(f!==this.right.check_())throw new Error("Black depths differ");return f+(this.isRed_()?0:1)},p.RED=!0,p.BLACK=!1,p}(),wo=function(){function p(){}return p.prototype.copy=function(f,v,h,g,d){return this},p.prototype.insert=function(f,v,h){return new ii(f,v,null)},p.prototype.remove=function(f,v){return this},p.prototype.count=function(){return 0},p.prototype.isEmpty=function(){return!0},p.prototype.inorderTraversal=function(f){return!1},p.prototype.reverseTraversal=function(f){return!1},p.prototype.minKey=function(){return null},p.prototype.maxKey=function(){return null},p.prototype.check_=function(){return 0},p.prototype.isRed_=function(){return!1},p}(),ne=function(){function p(f,v){void 0===v&&(v=p.EMPTY_NODE),this.comparator_=f,this.root_=v}return p.prototype.insert=function(f,v){return new p(this.comparator_,this.root_.insert(f,v,this.comparator_).copy(null,null,ii.BLACK,null,null))},p.prototype.remove=function(f){return new p(this.comparator_,this.root_.remove(f,this.comparator_).copy(null,null,ii.BLACK,null,null))},p.prototype.get=function(f){for(var v,h=this.root_;!h.isEmpty();){if(0===(v=this.comparator_(f,h.key)))return h.value;v<0?h=h.left:v>0&&(h=h.right)}return null},p.prototype.getPredecessorKey=function(f){for(var v,h=this.root_,g=null;!h.isEmpty();){if(0===(v=this.comparator_(f,h.key))){if(h.left.isEmpty())return g?g.key:null;for(h=h.left;!h.right.isEmpty();)h=h.right;return h.key}v<0?h=h.left:v>0&&(g=h,h=h.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},p.prototype.isEmpty=function(){return this.root_.isEmpty()},p.prototype.count=function(){return this.root_.count()},p.prototype.minKey=function(){return this.root_.minKey()},p.prototype.maxKey=function(){return this.root_.maxKey()},p.prototype.inorderTraversal=function(f){return this.root_.inorderTraversal(f)},p.prototype.reverseTraversal=function(f){return this.root_.reverseTraversal(f)},p.prototype.getIterator=function(f){return new no(this.root_,null,this.comparator_,!1,f)},p.prototype.getIteratorFrom=function(f,v){return new no(this.root_,f,this.comparator_,!1,v)},p.prototype.getReverseIteratorFrom=function(f,v){return new no(this.root_,f,this.comparator_,!0,v)},p.prototype.getReverseIterator=function(f){return new no(this.root_,null,this.comparator_,!0,f)},p.EMPTY_NODE=new wo,p}();function qe(p,f){return st(p.name,f.name)}function H(p,f){return st(p,f)}var vr,Zr,Eo,Z,z,Vt=function(p){return"number"==typeof p?"number:"+kt(p):"string:"+p},$t=function(p){if(p.isLeafNode()){var f=p.val();(0,K.hu)("string"==typeof f||"number"==typeof f||"object"==typeof f&&(0,K.r3)(f,".sv"),"Priority must be a string or number.")}else(0,K.hu)(p===ge||p.isEmpty(),"priority of unexpected type.");(0,K.hu)(p===ge||p.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},lr=function(){function p(f,v){void 0===v&&(v=p.__childrenNodeConstructor.EMPTY_NODE),this.value_=f,this.priorityNode_=v,this.lazyHash_=null,(0,K.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$t(this.priorityNode_)}return Object.defineProperty(p,"__childrenNodeConstructor",{get:function(){return vr},set:function(f){vr=f},enumerable:!1,configurable:!0}),p.prototype.isLeafNode=function(){return!0},p.prototype.getPriority=function(){return this.priorityNode_},p.prototype.updatePriority=function(f){return new p(this.value_,f)},p.prototype.getImmediateChild=function(f){return".priority"===f?this.priorityNode_:p.__childrenNodeConstructor.EMPTY_NODE},p.prototype.getChild=function(f){return jn(f)?this:".priority"===Jn(f)?this.priorityNode_:p.__childrenNodeConstructor.EMPTY_NODE},p.prototype.hasChild=function(){return!1},p.prototype.getPredecessorChildName=function(f,v){return null},p.prototype.updateImmediateChild=function(f,v){return".priority"===f?this.updatePriority(v):v.isEmpty()&&".priority"!==f?this:p.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(f,v).updatePriority(this.priorityNode_)},p.prototype.updateChild=function(f,v){var h=Jn(f);return null===h?v:v.isEmpty()&&".priority"!==h?this:((0,K.hu)(".priority"!==h||1===Li(f),".priority must be the last token in a path"),this.updateImmediateChild(h,p.__childrenNodeConstructor.EMPTY_NODE.updateChild(gr(f),v)))},p.prototype.isEmpty=function(){return!1},p.prototype.numChildren=function(){return 0},p.prototype.forEachChild=function(f,v){return!1},p.prototype.val=function(f){return f&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},p.prototype.hash=function(){if(null===this.lazyHash_){var f="";this.priorityNode_.isEmpty()||(f+="priority:"+Vt(this.priorityNode_.val())+":");var v=typeof this.value_;f+=v+":",f+="number"===v?kt(this.value_):this.value_,this.lazyHash_=ee(f)}return this.lazyHash_},p.prototype.getValue=function(){return this.value_},p.prototype.compareTo=function(f){return f===p.__childrenNodeConstructor.EMPTY_NODE?1:f instanceof p.__childrenNodeConstructor?-1:((0,K.hu)(f.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(f))},p.prototype.compareToLeafNode_=function(f){var v=typeof f.value_,h=typeof this.value_,g=p.VALUE_TYPE_ORDER.indexOf(v),d=p.VALUE_TYPE_ORDER.indexOf(h);return(0,K.hu)(g>=0,"Unknown leaf type: "+v),(0,K.hu)(d>=0,"Unknown leaf type: "+h),g===d?"object"===h?0:this.value_<f.value_?-1:this.value_===f.value_?0:1:d-g},p.prototype.withIndex=function(){return this},p.prototype.isIndexed=function(){return!0},p.prototype.equals=function(f){return f===this||!!f.isLeafNode()&&(this.value_===f.value_&&this.priorityNode_.equals(f.priorityNode_))},p.VALUE_TYPE_ORDER=["object","boolean","number","string"],p}(),hr=new(function(p){function f(){return null!==p&&p.apply(this,arguments)||this}return(0,w.ZT)(f,p),f.prototype.compare=function(v,h){var g=v.node.getPriority(),d=h.node.getPriority(),b=g.compareTo(d);return 0===b?st(v.name,h.name):b},f.prototype.isDefinedOn=function(v){return!v.getPriority().isEmpty()},f.prototype.indexedValueChanged=function(v,h){return!v.getPriority().equals(h.getPriority())},f.prototype.minPost=function(){return nr.MIN},f.prototype.maxPost=function(){return new nr(_t,new lr("[PRIORITY-POST]",Eo))},f.prototype.makePost=function(v,h){var g=Zr(v);return new nr(h,new lr("[PRIORITY-POST]",g))},f.prototype.toString=function(){return".priority"},f}(Yi)),ho=Math.log(2),os=function(){function p(f){this.count=parseInt(Math.log(f+1)/ho,10),this.current_=this.count-1;var g=parseInt(Array(this.count+1).join("1"),2);this.bits_=f+1&g}return p.prototype.nextBitIsOne=function(){var f=!(this.bits_&1<<this.current_);return this.current_--,f},p}(),$=function(p,f,v,h){p.sort(f);var g=function(N,Q){var Ee,Ge,ue=Q-N;if(0===ue)return null;if(1===ue)return Ee=p[N],Ge=v?v(Ee):Ee,new ii(Ge,Ee.node,ii.BLACK,null,null);var ht=parseInt(ue/2,10)+N,xt=g(N,ht),Dn=g(ht+1,Q);return Ee=p[ht],Ge=v?v(Ee):Ee,new ii(Ge,Ee.node,ii.BLACK,xt,Dn)},S=function(N){for(var Q=null,ue=null,Ee=p.length,Ge=function(Yn,Wr){var ts=Ee-Yn,ka=Ee;Ee-=Yn;var gl=g(ts+1,ka),Io=p[ts],Fs=v?v(Io):Io;ht(new ii(Fs,Io.node,Wr,null,gl))},ht=function(Yn){Q?(Q.left=Yn,Q=Yn):(ue=Yn,Q=Yn)},xt=0;xt<N.count;++xt){var Dn=N.nextBitIsOne(),bn=Math.pow(2,N.count-(xt+1));Dn?Ge(bn,ii.BLACK):(Ge(bn,ii.BLACK),Ge(bn,ii.RED))}return ue}(new os(p.length));return new ne(h||f,S)},he={},P=function(){function p(f,v){this.indexes_=f,this.indexSet_=v}return Object.defineProperty(p,"Default",{get:function(){return(0,K.hu)(he&&hr,"ChildrenNode.ts has not been loaded"),Z=Z||new p({".priority":he},{".priority":hr})},enumerable:!1,configurable:!0}),p.prototype.get=function(f){var v=(0,K.DV)(this.indexes_,f);if(!v)throw new Error("No index defined for "+f);return v instanceof ne?v:null},p.prototype.hasIndex=function(f){return(0,K.r3)(this.indexSet_,f.toString())},p.prototype.addIndex=function(f,v){(0,K.hu)(f!==xi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var h=[],g=!1,d=v.getIterator(nr.Wrap),b=d.getNext();b;)g=g||f.isDefinedOn(b.node),h.push(b),b=d.getNext();var S;S=g?$(h,f.getCompare()):he;var N=f.toString(),Q=(0,w.pi)({},this.indexSet_);Q[N]=f;var ue=(0,w.pi)({},this.indexes_);return ue[N]=S,new p(ue,Q)},p.prototype.addToIndexes=function(f,v){var h=this;return new p((0,K.UI)(this.indexes_,function(d,b){var S=(0,K.DV)(h.indexSet_,b);if((0,K.hu)(S,"Missing index implementation for "+b),d===he){if(S.isDefinedOn(f.node)){for(var N=[],Q=v.getIterator(nr.Wrap),ue=Q.getNext();ue;)ue.name!==f.name&&N.push(ue),ue=Q.getNext();return N.push(f),$(N,S.getCompare())}return he}var Ee=v.get(f.name),Ge=d;return Ee&&(Ge=Ge.remove(new nr(f.name,Ee))),Ge.insert(f,f.node)}),this.indexSet_)},p.prototype.removeFromIndexes=function(f,v){return new p((0,K.UI)(this.indexes_,function(g){if(g===he)return g;var d=v.get(f.name);return d?g.remove(new nr(f.name,d)):g}),this.indexSet_)},p}(),F=function(){function p(f,v,h){this.children_=f,this.priorityNode_=v,this.indexMap_=h,this.lazyHash_=null,this.priorityNode_&&$t(this.priorityNode_),this.children_.isEmpty()&&(0,K.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(p,"EMPTY_NODE",{get:function(){return z||(z=new p(new ne(H),null,P.Default))},enumerable:!1,configurable:!0}),p.prototype.isLeafNode=function(){return!1},p.prototype.getPriority=function(){return this.priorityNode_||z},p.prototype.updatePriority=function(f){return this.children_.isEmpty()?this:new p(this.children_,f,this.indexMap_)},p.prototype.getImmediateChild=function(f){if(".priority"===f)return this.getPriority();var v=this.children_.get(f);return null===v?z:v},p.prototype.getChild=function(f){var v=Jn(f);return null===v?this:this.getImmediateChild(v).getChild(gr(f))},p.prototype.hasChild=function(f){return null!==this.children_.get(f)},p.prototype.updateImmediateChild=function(f,v){if((0,K.hu)(v,"We should always be passing snapshot nodes"),".priority"===f)return this.updatePriority(v);var h=new nr(f,v),g=void 0,d=void 0;v.isEmpty()?(g=this.children_.remove(f),d=this.indexMap_.removeFromIndexes(h,this.children_)):(g=this.children_.insert(f,v),d=this.indexMap_.addToIndexes(h,this.children_));var b=g.isEmpty()?z:this.priorityNode_;return new p(g,b,d)},p.prototype.updateChild=function(f,v){var h=Jn(f);if(null===h)return v;(0,K.hu)(".priority"!==Jn(f)||1===Li(f),".priority must be the last token in a path");var g=this.getImmediateChild(h).updateChild(gr(f),v);return this.updateImmediateChild(h,g)},p.prototype.isEmpty=function(){return this.children_.isEmpty()},p.prototype.numChildren=function(){return this.children_.count()},p.prototype.val=function(f){if(this.isEmpty())return null;var v={},h=0,g=0,d=!0;if(this.forEachChild(hr,function(N,Q){v[N]=Q.val(f),h++,d&&p.INTEGER_REGEXP_.test(N)?g=Math.max(g,Number(N)):d=!1}),!f&&d&&g<2*h){var b=[];for(var S in v)b[S]=v[S];return b}return f&&!this.getPriority().isEmpty()&&(v[".priority"]=this.getPriority().val()),v},p.prototype.hash=function(){if(null===this.lazyHash_){var f="";this.getPriority().isEmpty()||(f+="priority:"+Vt(this.getPriority().val())+":"),this.forEachChild(hr,function(v,h){var g=h.hash();""!==g&&(f+=":"+v+":"+g)}),this.lazyHash_=""===f?"":ee(f)}return this.lazyHash_},p.prototype.getPredecessorChildName=function(f,v,h){var g=this.resolveIndex_(h);if(g){var d=g.getPredecessorKey(new nr(f,v));return d?d.name:null}return this.children_.getPredecessorKey(f)},p.prototype.getFirstChildName=function(f){var v=this.resolveIndex_(f);if(v){var h=v.minKey();return h&&h.name}return this.children_.minKey()},p.prototype.getFirstChild=function(f){var v=this.getFirstChildName(f);return v?new nr(v,this.children_.get(v)):null},p.prototype.getLastChildName=function(f){var v=this.resolveIndex_(f);if(v){var h=v.maxKey();return h&&h.name}return this.children_.maxKey()},p.prototype.getLastChild=function(f){var v=this.getLastChildName(f);return v?new nr(v,this.children_.get(v)):null},p.prototype.forEachChild=function(f,v){var h=this.resolveIndex_(f);return h?h.inorderTraversal(function(g){return v(g.name,g.node)}):this.children_.inorderTraversal(v)},p.prototype.getIterator=function(f){return this.getIteratorFrom(f.minPost(),f)},p.prototype.getIteratorFrom=function(f,v){var h=this.resolveIndex_(v);if(h)return h.getIteratorFrom(f,function(b){return b});for(var g=this.children_.getIteratorFrom(f.name,nr.Wrap),d=g.peek();null!=d&&v.compare(d,f)<0;)g.getNext(),d=g.peek();return g},p.prototype.getReverseIterator=function(f){return this.getReverseIteratorFrom(f.maxPost(),f)},p.prototype.getReverseIteratorFrom=function(f,v){var h=this.resolveIndex_(v);if(h)return h.getReverseIteratorFrom(f,function(b){return b});for(var g=this.children_.getReverseIteratorFrom(f.name,nr.Wrap),d=g.peek();null!=d&&v.compare(d,f)>0;)g.getNext(),d=g.peek();return g},p.prototype.compareTo=function(f){return this.isEmpty()?f.isEmpty()?0:-1:f.isLeafNode()||f.isEmpty()?1:f===ye?-1:0},p.prototype.withIndex=function(f){if(f===xi||this.indexMap_.hasIndex(f))return this;var v=this.indexMap_.addIndex(f,this.children_);return new p(this.children_,this.priorityNode_,v)},p.prototype.isIndexed=function(f){return f===xi||this.indexMap_.hasIndex(f)},p.prototype.equals=function(f){if(f===this)return!0;if(f.isLeafNode())return!1;var v=f;if(this.getPriority().equals(v.getPriority())){if(this.children_.count()===v.children_.count()){for(var h=this.getIterator(hr),g=v.getIterator(hr),d=h.getNext(),b=g.getNext();d&&b;){if(d.name!==b.name||!d.node.equals(b.node))return!1;d=h.getNext(),b=g.getNext()}return null===d&&null===b}return!1}return!1},p.prototype.resolveIndex_=function(f){return f===xi?null:this.indexMap_.get(f.toString())},p.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,p}(),ye=new(function(p){function f(){return p.call(this,new ne(H),F.EMPTY_NODE,P.Default)||this}return(0,w.ZT)(f,p),f.prototype.compareTo=function(v){return v===this?0:1},f.prototype.equals=function(v){return v===this},f.prototype.getPriority=function(){return this},f.prototype.getImmediateChild=function(v){return F.EMPTY_NODE},f.prototype.isEmpty=function(){return!1},f}(F));function tt(p,f){if(void 0===f&&(f=null),null===p)return F.EMPTY_NODE;if("object"==typeof p&&".priority"in p&&(f=p[".priority"]),(0,K.hu)(null===f||"string"==typeof f||"number"==typeof f||"object"==typeof f&&".sv"in f,"Invalid priority type found: "+typeof f),"object"==typeof p&&".value"in p&&null!==p[".value"]&&(p=p[".value"]),"object"!=typeof p||".sv"in p)return new lr(p,tt(f));if(p instanceof Array){var N=F.EMPTY_NODE;return Bt(p,function(Q,ue){if((0,K.r3)(p,Q)&&"."!==Q.substring(0,1)){var Ee=tt(ue);(Ee.isLeafNode()||!Ee.isEmpty())&&(N=N.updateImmediateChild(Q,Ee))}}),N.updatePriority(tt(f))}var h=[],g=!1;if(Bt(p,function(Q,ue){if("."!==Q.substring(0,1)){var Ee=tt(ue);Ee.isEmpty()||(g=g||!Ee.getPriority().isEmpty(),h.push(new nr(Q,Ee)))}}),0===h.length)return F.EMPTY_NODE;var b=$(h,qe,function(Q){return Q.name},H);if(g){var S=$(h,hr.getCompare());return new F(b,tt(f),new P({".priority":S},{".priority":hr}))}return new F(b,tt(f),P.Default)}Object.defineProperties(nr,{MIN:{value:new nr(et,F.EMPTY_NODE)},MAX:{value:new nr(_t,ye)}}),to.__EMPTY_NODE=F.EMPTY_NODE,lr.__childrenNodeConstructor=F,function(p){ge=p}(ye),function(p){Eo=p}(ye),function(p){Zr=p}(tt);var j=function(p){function f(v){var h=p.call(this)||this;return h.indexPath_=v,(0,K.hu)(!jn(v)&&".priority"!==Jn(v),"Can't create PathIndex with empty path or .priority key"),h}return(0,w.ZT)(f,p),f.prototype.extractChild=function(v){return v.getChild(this.indexPath_)},f.prototype.isDefinedOn=function(v){return!v.getChild(this.indexPath_).isEmpty()},f.prototype.compare=function(v,h){var g=this.extractChild(v.node),d=this.extractChild(h.node),b=g.compareTo(d);return 0===b?st(v.name,h.name):b},f.prototype.makePost=function(v,h){var g=tt(v),d=F.EMPTY_NODE.updateChild(this.indexPath_,g);return new nr(h,d)},f.prototype.maxPost=function(){var v=F.EMPTY_NODE.updateChild(this.indexPath_,ye);return new nr(_t,v)},f.prototype.toString=function(){return Gr(this.indexPath_,0).join("/")},f}(Yi),L=new(function(p){function f(){return null!==p&&p.apply(this,arguments)||this}return(0,w.ZT)(f,p),f.prototype.compare=function(v,h){var g=v.node.compareTo(h.node);return 0===g?st(v.name,h.name):g},f.prototype.isDefinedOn=function(v){return!0},f.prototype.indexedValueChanged=function(v,h){return!v.equals(h)},f.prototype.minPost=function(){return nr.MIN},f.prototype.maxPost=function(){return nr.MAX},f.prototype.makePost=function(v,h){var g=tt(v);return new nr(h,g)},f.prototype.toString=function(){return".value"},f}(Yi)),se="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fr=function(){var p=0,f=[];return function(v){var h=v===p;p=v;var g,d=new Array(8);for(g=7;g>=0;g--)d[g]=se.charAt(v%64),v=Math.floor(v/64);(0,K.hu)(0===v,"Cannot push at time == 0");var b=d.join("");if(h){for(g=11;g>=0&&63===f[g];g--)f[g]=0;f[g]++}else for(g=0;g<12;g++)f[g]=Math.floor(64*Math.random());for(g=0;g<12;g++)b+=se.charAt(f[g]);return(0,K.hu)(20===b.length,"nextPushId: Length should be 20."),b}}(),qr=function(p){if(p===""+zn)return"-";var f=Gn(p);if(null!=f)return""+(f+1);for(var v=new Array(p.length),h=0;h<v.length;h++)v[h]=p.charAt(h);if(v.length<786)return v.push("-"),v.join("");for(var g=v.length-1;g>=0&&"z"===v[g];)g--;if(-1===g)return _t;var b=se.charAt(se.indexOf(v[g])+1);return v[g]=b,v.slice(0,g+1).join("")},mr=function(p){if(p===""+ur)return et;var f=Gn(p);if(null!=f)return""+(f-1);for(var v=new Array(p.length),h=0;h<v.length;h++)v[h]=p.charAt(h);return"-"===v[v.length-1]?1===v.length?""+zn:(delete v[v.length-1],v.join("")):(v[v.length-1]=se.charAt(se.indexOf(v[v.length-1])-1),v.join("")+"z".repeat(786-v.length))};function zr(p){return{type:"value",snapshotNode:p}}function di(p,f){return{type:"child_added",snapshotNode:f,childName:p}}function Tn(p,f){return{type:"child_removed",snapshotNode:f,childName:p}}function ro(p,f,v){return{type:"child_changed",snapshotNode:f,childName:p,oldSnap:v}}var fo=function(){function p(f){this.index_=f}return p.prototype.updateChild=function(f,v,h,g,d,b){(0,K.hu)(f.isIndexed(this.index_),"A node must be indexed if only a child is updated");var S=f.getImmediateChild(v);return S.getChild(g).equals(h.getChild(g))&&S.isEmpty()===h.isEmpty()||(null!=b&&(h.isEmpty()?f.hasChild(v)?b.trackChildChange(Tn(v,S)):(0,K.hu)(f.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):S.isEmpty()?b.trackChildChange(di(v,h)):b.trackChildChange(ro(v,h,S))),f.isLeafNode()&&h.isEmpty())?f:f.updateImmediateChild(v,h).withIndex(this.index_)},p.prototype.updateFullNode=function(f,v,h){return null!=h&&(f.isLeafNode()||f.forEachChild(hr,function(g,d){v.hasChild(g)||h.trackChildChange(Tn(g,d))}),v.isLeafNode()||v.forEachChild(hr,function(g,d){if(f.hasChild(g)){var b=f.getImmediateChild(g);b.equals(d)||h.trackChildChange(ro(g,d,b))}else h.trackChildChange(di(g,d))})),v.withIndex(this.index_)},p.prototype.updatePriority=function(f,v){return f.isEmpty()?F.EMPTY_NODE:f.updatePriority(v)},p.prototype.filtersNodes=function(){return!1},p.prototype.getIndexedFilter=function(){return this},p.prototype.getIndex=function(){return this.index_},p}(),au=function(){function p(f){this.indexedFilter_=new fo(f.getIndex()),this.index_=f.getIndex(),this.startPost_=p.getStartPost_(f),this.endPost_=p.getEndPost_(f)}return p.prototype.getStartPost=function(){return this.startPost_},p.prototype.getEndPost=function(){return this.endPost_},p.prototype.matches=function(f){return this.index_.compare(this.getStartPost(),f)<=0&&this.index_.compare(f,this.getEndPost())<=0},p.prototype.updateChild=function(f,v,h,g,d,b){return this.matches(new nr(v,h))||(h=F.EMPTY_NODE),this.indexedFilter_.updateChild(f,v,h,g,d,b)},p.prototype.updateFullNode=function(f,v,h){v.isLeafNode()&&(v=F.EMPTY_NODE);var g=v.withIndex(this.index_);g=g.updatePriority(F.EMPTY_NODE);var d=this;return v.forEachChild(hr,function(b,S){d.matches(new nr(b,S))||(g=g.updateImmediateChild(b,F.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(f,g,h)},p.prototype.updatePriority=function(f,v){return f},p.prototype.filtersNodes=function(){return!0},p.prototype.getIndexedFilter=function(){return this.indexedFilter_},p.prototype.getIndex=function(){return this.index_},p.getStartPost_=function(f){if(f.hasStart()){var v=f.getIndexStartName();return f.getIndex().makePost(f.getIndexStartValue(),v)}return f.getIndex().minPost()},p.getEndPost_=function(f){if(f.hasEnd()){var v=f.getIndexEndName();return f.getIndex().makePost(f.getIndexEndValue(),v)}return f.getIndex().maxPost()},p}(),Gu=function(){function p(f){this.rangedFilter_=new au(f),this.index_=f.getIndex(),this.limit_=f.getLimit(),this.reverse_=!f.isViewFromLeft()}return p.prototype.updateChild=function(f,v,h,g,d,b){return this.rangedFilter_.matches(new nr(v,h))||(h=F.EMPTY_NODE),f.getImmediateChild(v).equals(h)?f:f.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(f,v,h,g,d,b):this.fullLimitUpdateChild_(f,v,h,d,b)},p.prototype.updateFullNode=function(f,v,h){var g;if(v.isLeafNode()||v.isEmpty())g=F.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<v.numChildren()&&v.isIndexed(this.index_)){g=F.EMPTY_NODE.withIndex(this.index_);var d=void 0;d=this.reverse_?v.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):v.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var b=0;d.hasNext()&&b<this.limit_;){var S=d.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),S)<=0:this.index_.compare(S,this.rangedFilter_.getEndPost())<=0))break;g=g.updateImmediateChild(S.name,S.node),b++}}else{g=(g=v.withIndex(this.index_)).updatePriority(F.EMPTY_NODE);var Q=void 0,ue=void 0,Ee=void 0;if(d=void 0,this.reverse_){d=g.getReverseIterator(this.index_),Q=this.rangedFilter_.getEndPost(),ue=this.rangedFilter_.getStartPost();var Ge=this.index_.getCompare();Ee=function(bn,Yn){return Ge(Yn,bn)}}else d=g.getIterator(this.index_),Q=this.rangedFilter_.getStartPost(),ue=this.rangedFilter_.getEndPost(),Ee=this.index_.getCompare();b=0;for(var ht=!1;d.hasNext();)S=d.getNext(),!ht&&Ee(Q,S)<=0&&(ht=!0),ht&&b<this.limit_&&Ee(S,ue)<=0?b++:g=g.updateImmediateChild(S.name,F.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(f,g,h)},p.prototype.updatePriority=function(f,v){return f},p.prototype.filtersNodes=function(){return!0},p.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},p.prototype.getIndex=function(){return this.index_},p.prototype.fullLimitUpdateChild_=function(f,v,h,g,d){var b;if(this.reverse_){var S=this.index_.getCompare();b=function(Wr,ts){return S(ts,Wr)}}else b=this.index_.getCompare();var N=f;(0,K.hu)(N.numChildren()===this.limit_,"");var Q=new nr(v,h),ue=this.reverse_?N.getFirstChild(this.index_):N.getLastChild(this.index_),Ee=this.rangedFilter_.matches(Q);if(N.hasChild(v)){for(var Ge=N.getImmediateChild(v),ht=g.getChildAfterChild(this.index_,ue,this.reverse_);null!=ht&&(ht.name===v||N.hasChild(ht.name));)ht=g.getChildAfterChild(this.index_,ht,this.reverse_);var xt=null==ht?1:b(ht,Q);if(Ee&&!h.isEmpty()&&xt>=0)return null!=d&&d.trackChildChange(ro(v,h,Ge)),N.updateImmediateChild(v,h);null!=d&&d.trackChildChange(Tn(v,Ge));var bn=N.updateImmediateChild(v,F.EMPTY_NODE);return null!=ht&&this.rangedFilter_.matches(ht)?(null!=d&&d.trackChildChange(di(ht.name,ht.node)),bn.updateImmediateChild(ht.name,ht.node)):bn}return h.isEmpty()?f:Ee&&b(ue,Q)>=0?(null!=d&&(d.trackChildChange(Tn(ue.name,ue.node)),d.trackChildChange(di(v,h))),N.updateImmediateChild(v,h).updateImmediateChild(ue.name,F.EMPTY_NODE)):f},p}(),uu=function(){function p(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hr}return p.prototype.hasStart=function(){return this.startSet_},p.prototype.hasStartAfter=function(){return this.startAfterSet_},p.prototype.hasEndBefore=function(){return this.endBeforeSet_},p.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},p.prototype.getIndexStartValue=function(){return(0,K.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},p.prototype.getIndexStartName=function(){return(0,K.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:et},p.prototype.hasEnd=function(){return this.endSet_},p.prototype.getIndexEndValue=function(){return(0,K.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},p.prototype.getIndexEndName=function(){return(0,K.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_t},p.prototype.hasLimit=function(){return this.limitSet_},p.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},p.prototype.getLimit=function(){return(0,K.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},p.prototype.getIndex=function(){return this.index_},p.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},p.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===hr},p.prototype.copy=function(){var f=new p;return f.limitSet_=this.limitSet_,f.limit_=this.limit_,f.startSet_=this.startSet_,f.indexStartValue_=this.indexStartValue_,f.startNameSet_=this.startNameSet_,f.indexStartName_=this.indexStartName_,f.endSet_=this.endSet_,f.indexEndValue_=this.indexEndValue_,f.endNameSet_=this.endNameSet_,f.indexEndName_=this.indexEndName_,f.index_=this.index_,f.viewFrom_=this.viewFrom_,f},p}();function _s(p,f,v){var h=p.copy();return h.startSet_=!0,void 0===f&&(f=null),h.indexStartValue_=f,null!=v?(h.startNameSet_=!0,h.indexStartName_=v):(h.startNameSet_=!1,h.indexStartName_=""),h}function Ms(p,f,v){var h=p.copy();return h.endSet_=!0,void 0===f&&(f=null),h.indexEndValue_=f,void 0!==v?(h.endNameSet_=!0,h.indexEndName_=v):(h.endNameSet_=!1,h.indexEndName_=""),h}function zo(p,f){var v=p.copy();return v.index_=f,v}function ie(p){var v,f={};return p.isDefault()||(p.index_===hr?v="$priority":p.index_===L?v="$value":p.index_===xi?v="$key":((0,K.hu)(p.index_ instanceof j,"Unrecognized index type!"),v=p.index_.toString()),f.orderBy=(0,K.Pz)(v),p.startSet_&&(f.startAt=(0,K.Pz)(p.indexStartValue_),p.startNameSet_&&(f.startAt+=","+(0,K.Pz)(p.indexStartName_))),p.endSet_&&(f.endAt=(0,K.Pz)(p.indexEndValue_),p.endNameSet_&&(f.endAt+=","+(0,K.Pz)(p.indexEndName_))),p.limitSet_&&(p.isViewFromLeft()?f.limitToFirst=p.limit_:f.limitToLast=p.limit_)),f}function A(p){var f={};if(p.startSet_&&(f.sp=p.indexStartValue_,p.startNameSet_&&(f.sn=p.indexStartName_)),p.endSet_&&(f.ep=p.indexEndValue_,p.endNameSet_&&(f.en=p.indexEndName_)),p.limitSet_){f.l=p.limit_;var v=p.viewFrom_;""===v&&(v=p.isViewFromLeft()?"l":"r"),f.vf=v}return p.index_!==hr&&(f.i=p.index_.toString()),f}var M=function(p){function f(v,h,g,d){var b=p.call(this)||this;return b.repoInfo_=v,b.onDataUpdate_=h,b.authTokenProvider_=g,b.appCheckTokenProvider_=d,b.log_=zt("p:rest:"),b.listens_={},b}return(0,w.ZT)(f,p),f.prototype.reportStats=function(v){throw new Error("Method not implemented.")},f.getListenId_=function(v,h){return void 0!==h?"tag$"+h:((0,K.hu)(v._queryParams.isDefault(),"should have a tag if it's not a default query."),v._path.toString())},f.prototype.listen=function(v,h,g,d){var b=this,S=v._path.toString();this.log_("Listen called for "+S+" "+v._queryIdentifier);var N=f.getListenId_(v,g),Q={};this.listens_[N]=Q;var ue=ie(v._queryParams);this.restRequest_(S+".json",ue,function(Ee,Ge){var ht=Ge;404===Ee&&(ht=null,Ee=null),null===Ee&&b.onDataUpdate_(S,ht,!1,g),(0,K.DV)(b.listens_,N)===Q&&d(Ee?401===Ee?"permission_denied":"rest_error:"+Ee:"ok",null)})},f.prototype.unlisten=function(v,h){var g=f.getListenId_(v,h);delete this.listens_[g]},f.prototype.get=function(v){var h=this,g=ie(v._queryParams),d=v._path.toString(),b=new K.BH;return this.restRequest_(d+".json",g,function(S,N){var Q=N;404===S&&(Q=null,S=null),null===S?(h.onDataUpdate_(d,Q,!1,null),b.resolve(Q)):b.reject(new Error(Q))}),b.promise},f.prototype.refreshAuthToken=function(v){},f.prototype.restRequest_=function(v,h,g){var d=this;return void 0===h&&(h={}),h.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(b){var S=(0,w.CR)(b,2),N=S[0],Q=S[1];N&&N.accessToken&&(h.auth=N.accessToken),Q&&Q.token&&(h.ac=Q.token);var ue=(d.repoInfo_.secure?"https://":"http://")+d.repoInfo_.host+v+"?ns="+d.repoInfo_.namespace+(0,K.xO)(h);d.log_("Sending REST request for "+ue);var Ee=new XMLHttpRequest;Ee.onreadystatechange=function(){if(g&&4===Ee.readyState){d.log_("REST Response for "+ue+" received. status:",Ee.status,"response:",Ee.responseText);var Ge=null;if(Ee.status>=200&&Ee.status<300){try{Ge=(0,K.cI)(Ee.responseText)}catch(ht){Et("Failed to parse JSON response for "+ue+": "+Ee.responseText)}g(null,Ge)}else 401!==Ee.status&&404!==Ee.status&&Et("Got unsuccessful REST response for "+ue+" Status: "+Ee.status),g(Ee.status);g=null}},Ee.open("GET",ue,!0),Ee.send()})},f}(Ae),V=function(){function p(){this.rootNode_=F.EMPTY_NODE}return p.prototype.getNode=function(f){return this.rootNode_.getChild(f)},p.prototype.updateSnapshot=function(f,v){this.rootNode_=this.rootNode_.updateChild(f,v)},p}();function oe(){return{value:null,children:new Map}}function ve(p,f,v){if(jn(f))p.value=v,p.children.clear();else if(null!==p.value)p.value=p.value.updateChild(f,v);else{var h=Jn(f);p.children.has(h)||p.children.set(h,oe()),ve(p.children.get(h),f=gr(f),v)}}function Oe(p,f){if(jn(f))return p.value=null,p.children.clear(),!0;if(null!==p.value){if(p.value.isLeafNode())return!1;var v=p.value;return p.value=null,v.forEachChild(hr,function(d,b){ve(p,new gn(d),b)}),Oe(p,f)}if(p.children.size>0){var h=Jn(f);return f=gr(f),p.children.has(h)&&Oe(p.children.get(h),f)&&p.children.delete(h),0===p.children.size}return!0}function Pe(p,f,v){null!==p.value?v(f,p.value):function(p,f){p.children.forEach(function(v,h){f(h,v)})}(p,function(h,g){Pe(g,new gn(f.toString()+"/"+h),v)})}var gt=function(){function p(f){this.collection_=f,this.last_=null}return p.prototype.get=function(){var f=this.collection_.get(),v=(0,w.pi)({},f);return this.last_&&Bt(this.last_,function(h,g){v[h]=v[h]-g}),this.last_=f,v},p}(),Ir=function(){function p(f,v){this.server_=v,this.statsToReport_={},this.statsListener_=new gt(f);var h=1e4+2e4*Math.random();Mn(this.reportStats_.bind(this),Math.floor(h))}return p.prototype.reportStats_=function(){var f=this,v=this.statsListener_.get(),h={},g=!1;Bt(v,function(d,b){b>0&&(0,K.r3)(f.statsToReport_,d)&&(h[d]=b,g=!0)}),g&&this.server_.reportStats(h),Mn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},p}(),Nn=(()=>(function(p){p[p.OVERWRITE=0]="OVERWRITE",p[p.MERGE=1]="MERGE",p[p.ACK_USER_WRITE=2]="ACK_USER_WRITE",p[p.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Nn||(Nn={})),Nn))();function Br(p){return{fromUser:!1,fromServer:!0,queryId:p,tagged:!0}}var io=function(){function p(f,v,h){this.path=f,this.affectedTree=v,this.revert=h,this.type=Nn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return p.prototype.operationForChild=function(f){if(jn(this.path)){if(null!=this.affectedTree.value)return(0,K.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var v=this.affectedTree.subtree(new gn(f));return new p(un(),v,this.revert)}return(0,K.hu)(Jn(this.path)===f,"operationForChild called for unrelated child."),new p(gr(this.path),this.affectedTree,this.revert)},p}(),fi=function(){function p(f,v){this.source=f,this.path=v,this.type=Nn.LISTEN_COMPLETE}return p.prototype.operationForChild=function(f){return jn(this.path)?new p(this.source,un()):new p(this.source,gr(this.path))},p}(),Po=function(){function p(f,v,h){this.source=f,this.path=v,this.snap=h,this.type=Nn.OVERWRITE}return p.prototype.operationForChild=function(f){return jn(this.path)?new p(this.source,un(),this.snap.getImmediateChild(f)):new p(this.source,gr(this.path),this.snap)},p}(),To=function(){function p(f,v,h){this.source=f,this.path=v,this.children=h,this.type=Nn.MERGE}return p.prototype.operationForChild=function(f){if(jn(this.path)){var v=this.children.subtree(new gn(f));return v.isEmpty()?null:v.value?new Po(this.source,un(),v.value):new p(this.source,un(),v)}return(0,K.hu)(Jn(this.path)===f,"Can't get a merge for a child not on the path of the operation"),new p(this.source,gr(this.path),this.children)},p.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},p}(),pi=function(){function p(f,v,h){this.node_=f,this.fullyInitialized_=v,this.filtered_=h}return p.prototype.isFullyInitialized=function(){return this.fullyInitialized_},p.prototype.isFiltered=function(){return this.filtered_},p.prototype.isCompleteForPath=function(f){if(jn(f))return this.isFullyInitialized()&&!this.filtered_;var v=Jn(f);return this.isCompleteForChild(v)},p.prototype.isCompleteForChild=function(f){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(f)},p.prototype.getNode=function(){return this.node_},p}(),Ro=function(f){this.query_=f,this.index_=this.query_._queryParams.getIndex()};function ji(p,f,v,h,g,d){var b=h.filter(function(S){return S.type===v});b.sort(function(S,N){return function(p,f,v){if(null==f.childName||null==v.childName)throw(0,K.g5)("Should only compare child_ events.");var h=new nr(f.childName,f.snapshotNode),g=new nr(v.childName,v.snapshotNode);return p.index_.compare(h,g)}(p,S,N)}),b.forEach(function(S){var N=function(p,f,v){return"value"===f.type||"child_removed"===f.type||(f.prevName=v.getPredecessorChildName(f.childName,f.snapshotNode,p.index_)),f}(p,S,d);g.forEach(function(Q){Q.respondsTo(S.type)&&f.push(Q.createEvent(N,p.query_))})})}function gi(p,f){return{eventCache:p,serverCache:f}}function Qi(p,f,v,h){return gi(new pi(f,v,h),p.serverCache)}function yi(p,f,v,h){return gi(p.eventCache,new pi(f,v,h))}function yn(p){return p.eventCache.isFullyInitialized()?p.eventCache.getNode():null}function Pn(p){return p.serverCache.isFullyInitialized()?p.serverCache.getNode():null}var Qn,Tr=function(){function p(f,v){void 0===v&&(Qn||(Qn=new ne(tn)),v=Qn),this.value=f,this.children=v}return p.fromObject=function(f){var v=new p(null);return Bt(f,function(h,g){v=v.set(new gn(h),g)}),v},p.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},p.prototype.findRootMostMatchingPathAndValue=function(f,v){if(null!=this.value&&v(this.value))return{path:un(),value:this.value};if(jn(f))return null;var h=Jn(f),g=this.children.get(h);if(null!==g){var d=g.findRootMostMatchingPathAndValue(gr(f),v);return null!=d?{path:sr(new gn(h),d.path),value:d.value}:null}return null},p.prototype.findRootMostValueAndPath=function(f){return this.findRootMostMatchingPathAndValue(f,function(){return!0})},p.prototype.subtree=function(f){if(jn(f))return this;var v=Jn(f),h=this.children.get(v);return null!==h?h.subtree(gr(f)):new p(null)},p.prototype.set=function(f,v){if(jn(f))return new p(v,this.children);var h=Jn(f),d=(this.children.get(h)||new p(null)).set(gr(f),v),b=this.children.insert(h,d);return new p(this.value,b)},p.prototype.remove=function(f){if(jn(f))return this.children.isEmpty()?new p(null):new p(null,this.children);var v=Jn(f),h=this.children.get(v);if(h){var g=h.remove(gr(f)),d=void 0;return d=g.isEmpty()?this.children.remove(v):this.children.insert(v,g),null===this.value&&d.isEmpty()?new p(null):new p(this.value,d)}return this},p.prototype.get=function(f){if(jn(f))return this.value;var v=Jn(f),h=this.children.get(v);return h?h.get(gr(f)):null},p.prototype.setTree=function(f,v){if(jn(f))return v;var b,h=Jn(f),d=(this.children.get(h)||new p(null)).setTree(gr(f),v);return b=d.isEmpty()?this.children.remove(h):this.children.insert(h,d),new p(this.value,b)},p.prototype.fold=function(f){return this.fold_(un(),f)},p.prototype.fold_=function(f,v){var h={};return this.children.inorderTraversal(function(g,d){h[g]=d.fold_(sr(f,g),v)}),v(f,this.value,h)},p.prototype.findOnPath=function(f,v){return this.findOnPath_(f,un(),v)},p.prototype.findOnPath_=function(f,v,h){var g=!!this.value&&h(v,this.value);if(g)return g;if(jn(f))return null;var d=Jn(f),b=this.children.get(d);return b?b.findOnPath_(gr(f),sr(v,d),h):null},p.prototype.foreachOnPath=function(f,v){return this.foreachOnPath_(f,un(),v)},p.prototype.foreachOnPath_=function(f,v,h){if(jn(f))return this;this.value&&h(v,this.value);var g=Jn(f),d=this.children.get(g);return d?d.foreachOnPath_(gr(f),sr(v,g),h):new p(null)},p.prototype.foreach=function(f){this.foreach_(un(),f)},p.prototype.foreach_=function(f,v){this.children.inorderTraversal(function(h,g){g.foreach_(sr(f,h),v)}),this.value&&v(f,this.value)},p.prototype.foreachChild=function(f){this.children.inorderTraversal(function(v,h){h.value&&f(v,h.value)})},p}(),Ai=function(){function p(f){this.writeTree_=f}return p.empty=function(){return new p(new Tr(null))},p}();function Ei(p,f,v){if(jn(f))return new Ai(new Tr(v));var h=p.writeTree_.findRootMostValueAndPath(f);if(null!=h){var g=h.path,d=h.value,b=Yr(g,f);return d=d.updateChild(b,v),new Ai(p.writeTree_.set(g,d))}var S=new Tr(v),N=p.writeTree_.setTree(f,S);return new Ai(N)}function ao(p,f,v){var h=p;return Bt(v,function(g,d){h=Ei(h,sr(f,g),d)}),h}function ei(p,f){if(jn(f))return Ai.empty();var v=p.writeTree_.setTree(f,new Tr(null));return new Ai(v)}function ta(p,f){return null!=Mi(p,f)}function Mi(p,f){var v=p.writeTree_.findRootMostValueAndPath(f);return null!=v?p.writeTree_.get(v.path).getChild(Yr(v.path,f)):null}function Us(p){var f=[],v=p.writeTree_.value;return null!=v?v.isLeafNode()||v.forEachChild(hr,function(h,g){f.push(new nr(h,g))}):p.writeTree_.children.inorderTraversal(function(h,g){null!=g.value&&f.push(new nr(h,g.value))}),f}function Ji(p,f){if(jn(f))return p;var v=Mi(p,f);return new Ai(null!=v?new Tr(v):p.writeTree_.subtree(f))}function oi(p){return p.writeTree_.isEmpty()}function Os(p,f){return ma(un(),p.writeTree_,f)}function ma(p,f,v){if(null!=f.value)return v.updateChild(p,f.value);var h=null;return f.children.inorderTraversal(function(g,d){".priority"===g?((0,K.hu)(null!==d.value,"Priority writes must always be leaf nodes"),h=d.value):v=ma(sr(p,g),d,v)}),!v.getChild(p).isEmpty()&&null!==h&&(v=v.updateChild(sr(p,".priority"),h)),v}function qi(p,f){return Ga(f,p)}function Zu(p,f){if(p.snap)return ri(p.path,f);for(var v in p.children)if(p.children.hasOwnProperty(v)&&ri(sr(p.path,v),f))return!0;return!1}function qu(p){return p.visible}function Ba(p,f,v){for(var h=Ai.empty(),g=0;g<p.length;++g){var d=p[g];if(f(d)){var b=d.path,S=void 0;if(d.snap)ri(v,b)?h=Ei(h,S=Yr(v,b),d.snap):ri(b,v)&&(S=Yr(b,v),h=Ei(h,un(),d.snap.getChild(S)));else{if(!d.children)throw(0,K.g5)("WriteRecord should have .snap or .children");if(ri(v,b))h=ao(h,S=Yr(v,b),d.children);else if(ri(b,v))if(jn(S=Yr(b,v)))h=ao(h,un(),d.children);else{var N=(0,K.DV)(d.children,Jn(S));if(N){var Q=N.getChild(gr(S));h=Ei(h,un(),Q)}}}}}return h}function Vs(p,f,v,h,g){if(h||g){var N=Ji(p.visibleWrites,f);return!g&&oi(N)?v:g||null!=v||ta(N,un())?Os(Ba(p.allWrites,function(Ge){return(Ge.visible||g)&&(!h||!~h.indexOf(Ge.writeId))&&(ri(Ge.path,f)||ri(f,Ge.path))},f),v||F.EMPTY_NODE):null}var d=Mi(p.visibleWrites,f);if(null!=d)return d;var b=Ji(p.visibleWrites,f);return oi(b)?v:null!=v||ta(b,un())?Os(b,v||F.EMPTY_NODE):null}function mt(p,f,v,h){return Vs(p.writeTree,p.treePath,f,v,h)}function Lt(p,f){return function(p,f,v){var h=F.EMPTY_NODE,g=Mi(p.visibleWrites,f);if(g)return g.isLeafNode()||g.forEachChild(hr,function(S,N){h=h.updateImmediateChild(S,N)}),h;if(v){var d=Ji(p.visibleWrites,f);return v.forEachChild(hr,function(S,N){var Q=Os(Ji(d,new gn(S)),N);h=h.updateImmediateChild(S,Q)}),Us(d).forEach(function(S){h=h.updateImmediateChild(S.name,S.node)}),h}return Us(Ji(p.visibleWrites,f)).forEach(function(S){h=h.updateImmediateChild(S.name,S.node)}),h}(p.writeTree,p.treePath,f)}function ss(p,f,v,h){return function(p,f,v,h,g){(0,K.hu)(h||g,"Either existingEventSnap or existingServerSnap must exist");var d=sr(f,v);if(ta(p.visibleWrites,d))return null;var b=Ji(p.visibleWrites,d);return oi(b)?g.getChild(v):Os(b,g.getChild(v))}(p.writeTree,p.treePath,f,v,h)}function wa(p,f){return function(p,f){return Mi(p.visibleWrites,f)}(p.writeTree,sr(p.treePath,f))}function Pi(p,f,v){return function(p,f,v,h){var g=sr(f,v),d=Mi(p.visibleWrites,g);return null!=d?d:h.isCompleteForChild(v)?Os(Ji(p.visibleWrites,g),h.getNode().getImmediateChild(v)):null}(p.writeTree,p.treePath,f,v)}function ys(p,f){return Ga(sr(p.treePath,f),p.writeTree)}function Ga(p,f){return{treePath:p,writeTree:f}}var Ln=function(){function p(){this.changeMap=new Map}return p.prototype.trackChildChange=function(f){var v=f.type,h=f.childName;(0,K.hu)("child_added"===v||"child_changed"===v||"child_removed"===v,"Only child changes supported for tracking"),(0,K.hu)(".priority"!==h,"Only non-priority child changes can be tracked.");var g=this.changeMap.get(h);if(g){var d=g.type;if("child_added"===v&&"child_removed"===d)this.changeMap.set(h,ro(h,f.snapshotNode,g.snapshotNode));else if("child_removed"===v&&"child_added"===d)this.changeMap.delete(h);else if("child_removed"===v&&"child_changed"===d)this.changeMap.set(h,Tn(h,g.oldSnap));else if("child_changed"===v&&"child_added"===d)this.changeMap.set(h,di(h,f.snapshotNode));else{if("child_changed"!==v||"child_changed"!==d)throw(0,K.g5)("Illegal combination of changes: "+f+" occurred after "+g);this.changeMap.set(h,ro(h,f.snapshotNode,g.oldSnap))}}else this.changeMap.set(h,f)},p.prototype.getChanges=function(){return Array.from(this.changeMap.values())},p}(),sn=new(function(){function p(){}return p.prototype.getCompleteChild=function(f){return null},p.prototype.getChildAfterChild=function(f,v,h){return null},p}()),tc=function(){function p(f,v,h){void 0===h&&(h=null),this.writes_=f,this.viewCache_=v,this.optCompleteServerCache_=h}return p.prototype.getCompleteChild=function(f){var v=this.viewCache_.eventCache;if(v.isCompleteForChild(f))return v.getNode().getImmediateChild(f);var h=null!=this.optCompleteServerCache_?new pi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Pi(this.writes_,f,h)},p.prototype.getChildAfterChild=function(f,v,h){var g=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Pn(this.viewCache_),d=function(p,f,v,h,g,d){return function(p,f,v,h,g,d,b){var S,N=Ji(p.visibleWrites,f),Q=Mi(N,un());if(null!=Q)S=Q;else{if(null==v)return[];S=Os(N,v)}if((S=S.withIndex(b)).isEmpty()||S.isLeafNode())return[];for(var ue=[],Ee=b.getCompare(),Ge=d?S.getReverseIteratorFrom(h,b):S.getIteratorFrom(h,b),ht=Ge.getNext();ht&&ue.length<g;)0!==Ee(ht,h)&&ue.push(ht),ht=Ge.getNext();return ue}(p.writeTree,p.treePath,f,v,h,g,d)}(this.writes_,g,v,1,h,f);return 0===d.length?null:d[0]},p}();function U(p,f,v,h,g,d){var b=f.eventCache;if(null!=wa(h,v))return f;var S=void 0,N=void 0;if(jn(v))if((0,K.hu)(f.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),f.serverCache.isFiltered()){var Q=Pn(f),Ee=Lt(h,Q instanceof F?Q:F.EMPTY_NODE);S=p.filter.updateFullNode(f.eventCache.getNode(),Ee,d)}else{var Ge=mt(h,Pn(f));S=p.filter.updateFullNode(f.eventCache.getNode(),Ge,d)}else{var ht=Jn(v);if(".priority"===ht){(0,K.hu)(1===Li(v),"Can't have a priority with additional path components");var xt=b.getNode(),Dn=ss(h,v,xt,N=f.serverCache.getNode());S=null!=Dn?p.filter.updatePriority(xt,Dn):b.getNode()}else{var bn=gr(v),Yn=void 0;if(b.isCompleteForChild(ht)){N=f.serverCache.getNode();var Wr=ss(h,v,b.getNode(),N);Yn=null!=Wr?b.getNode().getImmediateChild(ht).updateChild(bn,Wr):b.getNode().getImmediateChild(ht)}else Yn=Pi(h,ht,f.serverCache);S=null!=Yn?p.filter.updateChild(b.getNode(),ht,Yn,bn,g,d):b.getNode()}}return Qi(f,S,b.isFullyInitialized()||jn(v),p.filter.filtersNodes())}function x(p,f,v,h,g,d,b,S){var Q,N=f.serverCache,ue=b?p.filter:p.filter.getIndexedFilter();if(jn(v))Q=ue.updateFullNode(N.getNode(),h,null);else if(ue.filtersNodes()&&!N.isFiltered()){var Ee=N.getNode().updateChild(v,h);Q=ue.updateFullNode(N.getNode(),Ee,null)}else{var Ge=Jn(v);if(!N.isCompleteForPath(v)&&Li(v)>1)return f;var ht=gr(v),Dn=N.getNode().getImmediateChild(Ge).updateChild(ht,h);Q=".priority"===Ge?ue.updatePriority(N.getNode(),Dn):ue.updateChild(N.getNode(),Ge,Dn,ht,sn,null)}var bn=yi(f,Q,N.isFullyInitialized()||jn(v),ue.filtersNodes());return U(p,bn,v,g,new tc(g,bn,d),S)}function I(p,f,v,h,g,d,b){var N,Q,S=f.eventCache,ue=new tc(g,f,d);if(jn(v))Q=p.filter.updateFullNode(f.eventCache.getNode(),h,b),N=Qi(f,Q,!0,p.filter.filtersNodes());else{var Ee=Jn(v);if(".priority"===Ee)Q=p.filter.updatePriority(f.eventCache.getNode(),h),N=Qi(f,Q,S.isFullyInitialized(),S.isFiltered());else{var Ge=gr(v),ht=S.getNode().getImmediateChild(Ee),xt=void 0;if(jn(Ge))xt=h;else{var Dn=ue.getCompleteChild(Ee);xt=null!=Dn?".priority"===ki(Ge)&&Dn.getChild(Fi(Ge)).isEmpty()?Dn:Dn.updateChild(Ge,h):F.EMPTY_NODE}N=ht.equals(xt)?f:Qi(f,p.filter.updateChild(S.getNode(),Ee,xt,Ge,ue,b),S.isFullyInitialized(),p.filter.filtersNodes())}}return N}function q(p,f){return p.eventCache.isCompleteForChild(f)}function ce(p,f,v){return v.foreach(function(h,g){f=f.updateChild(h,g)}),f}function Te(p,f,v,h,g,d,b,S){if(f.serverCache.getNode().isEmpty()&&!f.serverCache.isFullyInitialized())return f;var Q,N=f;Q=jn(v)?h:new Tr(null).setTree(v,h);var ue=f.serverCache.getNode();return Q.children.inorderTraversal(function(Ee,Ge){if(ue.hasChild(Ee)){var xt=ce(0,f.serverCache.getNode().getImmediateChild(Ee),Ge);N=x(p,N,new gn(Ee),xt,g,d,b,S)}}),Q.children.inorderTraversal(function(Ee,Ge){var ht=!f.serverCache.isCompleteForChild(Ee)&&void 0===Ge.value;if(!ue.hasChild(Ee)&&!ht){var Dn=ce(0,f.serverCache.getNode().getImmediateChild(Ee),Ge);N=x(p,N,new gn(Ee),Dn,g,d,b,S)}}),N}var ar=function(){function p(f,v){this.query_=f,this.eventRegistrations_=[];var h=this.query_._queryParams,g=new fo(h.getIndex()),d=function(p){return p.loadsAllData()?new fo(p.getIndex()):p.hasLimit()?new Gu(p):new au(p)}(h);this.processor_=function(p){return{filter:p}}(d);var b=v.serverCache,S=v.eventCache,N=g.updateFullNode(F.EMPTY_NODE,b.getNode(),null),Q=d.updateFullNode(F.EMPTY_NODE,S.getNode(),null),ue=new pi(N,b.isFullyInitialized(),g.filtersNodes()),Ee=new pi(Q,S.isFullyInitialized(),d.filtersNodes());this.viewCache_=gi(Ee,ue),this.eventGenerator_=new Ro(this.query_)}return Object.defineProperty(p.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),p}();function Hn(p,f){var v=Pn(p.viewCache_);return v&&(p.query._queryParams.loadsAllData()||!jn(f)&&!v.getImmediateChild(Jn(f)).isEmpty())?v.getChild(f):null}function po(p){return 0===p.eventRegistrations_.length}function go(p,f,v){var h=[];if(v){(0,K.hu)(null==f,"A cancel should cancel all event registrations.");var g=p.query._path;p.eventRegistrations_.forEach(function(N){var Q=N.createCancelEvent(v,g);Q&&h.push(Q)})}if(f){for(var d=[],b=0;b<p.eventRegistrations_.length;++b){var S=p.eventRegistrations_[b];if(S.matches(f)){if(f.hasAnyCallback()){d=d.concat(p.eventRegistrations_.slice(b+1));break}}else d.push(S)}p.eventRegistrations_=d}else p.eventRegistrations_=[];return h}function Bs(p,f,v,h){f.type===Nn.MERGE&&null!==f.source.queryId&&((0,K.hu)(Pn(p.viewCache_),"We should always have a full cache before handling merges"),(0,K.hu)(yn(p.viewCache_),"Missing event cache, even though we have a server cache"));var g=p.viewCache_,d=function(p,f,v,h,g){var b,S,d=new Ln;if(v.type===Nn.OVERWRITE){var N=v;N.source.fromUser?b=I(p,f,N.path,N.snap,h,g,d):((0,K.hu)(N.source.fromServer,"Unknown source."),S=N.source.tagged||f.serverCache.isFiltered()&&!jn(N.path),b=x(p,f,N.path,N.snap,h,g,S,d))}else if(v.type===Nn.MERGE){var Q=v;Q.source.fromUser?b=function(p,f,v,h,g,d,b){var S=f;return h.foreach(function(N,Q){var ue=sr(v,N);q(f,Jn(ue))&&(S=I(p,S,ue,Q,g,d,b))}),h.foreach(function(N,Q){var ue=sr(v,N);q(f,Jn(ue))||(S=I(p,S,ue,Q,g,d,b))}),S}(p,f,Q.path,Q.children,h,g,d):((0,K.hu)(Q.source.fromServer,"Unknown source."),S=Q.source.tagged||f.serverCache.isFiltered(),b=Te(p,f,Q.path,Q.children,h,g,S,d))}else if(v.type===Nn.ACK_USER_WRITE){var ue=v;b=ue.revert?function(p,f,v,h,g,d){var b;if(null!=wa(h,v))return f;var S=new tc(h,f,g),N=f.eventCache.getNode(),Q=void 0;if(jn(v)||".priority"===Jn(v)){var ue=void 0;if(f.serverCache.isFullyInitialized())ue=mt(h,Pn(f));else{var Ee=f.serverCache.getNode();(0,K.hu)(Ee instanceof F,"serverChildren would be complete if leaf node"),ue=Lt(h,Ee)}Q=p.filter.updateFullNode(N,ue=ue,d)}else{var Ge=Jn(v),ht=Pi(h,Ge,f.serverCache);null==ht&&f.serverCache.isCompleteForChild(Ge)&&(ht=N.getImmediateChild(Ge)),(Q=null!=ht?p.filter.updateChild(N,Ge,ht,gr(v),S,d):f.eventCache.getNode().hasChild(Ge)?p.filter.updateChild(N,Ge,F.EMPTY_NODE,gr(v),S,d):N).isEmpty()&&f.serverCache.isFullyInitialized()&&(b=mt(h,Pn(f))).isLeafNode()&&(Q=p.filter.updateFullNode(Q,b,d))}return b=f.serverCache.isFullyInitialized()||null!=wa(h,un()),Qi(f,Q,b,p.filter.filtersNodes())}(p,f,ue.path,h,g,d):function(p,f,v,h,g,d,b){if(null!=wa(g,v))return f;var S=f.serverCache.isFiltered(),N=f.serverCache;if(null!=h.value){if(jn(v)&&N.isFullyInitialized()||N.isCompleteForPath(v))return x(p,f,v,N.getNode().getChild(v),g,d,S,b);if(jn(v)){var Q=new Tr(null);return N.getNode().forEachChild(xi,function(Ee,Ge){Q=Q.set(new gn(Ee),Ge)}),Te(p,f,v,Q,g,d,S,b)}return f}var ue=new Tr(null);return h.foreach(function(Ee,Ge){var ht=sr(v,Ee);N.isCompleteForPath(ht)&&(ue=ue.set(Ee,N.getNode().getChild(ht)))}),Te(p,f,v,ue,g,d,S,b)}(p,f,ue.path,ue.affectedTree,h,g,d)}else{if(v.type!==Nn.LISTEN_COMPLETE)throw(0,K.g5)("Unknown operation type: "+v.type);b=function(p,f,v,h,g){var d=f.serverCache;return U(p,yi(f,d.getNode(),d.isFullyInitialized()||jn(v),d.isFiltered()),v,h,sn,g)}(p,f,v.path,h,d)}var Ee=d.getChanges();return function(p,f,v){var h=f.eventCache;if(h.isFullyInitialized()){var g=h.getNode().isLeafNode()||h.getNode().isEmpty(),d=yn(p);(v.length>0||!p.eventCache.isFullyInitialized()||g&&!h.getNode().equals(d)||!h.getNode().getPriority().equals(d.getPriority()))&&v.push(zr(yn(f)))}}(f,b,Ee),{viewCache:b,changes:Ee}}(p.processor_,g,f,v,h);return function(p,f){(0,K.hu)(f.eventCache.getNode().isIndexed(p.filter.getIndex()),"Event snap not indexed"),(0,K.hu)(f.serverCache.getNode().isIndexed(p.filter.getIndex()),"Server snap not indexed")}(p.processor_,d.viewCache),(0,K.hu)(d.viewCache.serverCache.isFullyInitialized()||!g.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),p.viewCache_=d.viewCache,Yo(p,d.changes,d.viewCache.eventCache.getNode(),null)}function Yo(p,f,v,h){return function(p,f,v,h){var g=[],d=[];return f.forEach(function(b){"child_changed"===b.type&&p.index_.indexedValueChanged(b.oldSnap,b.snapshotNode)&&d.push(function(p,f){return{type:"child_moved",snapshotNode:f,childName:p}}(b.childName,b.snapshotNode))}),ji(p,g,"child_removed",f,h,v),ji(p,g,"child_added",f,h,v),ji(p,g,"child_moved",d,h,v),ji(p,g,"child_changed",f,h,v),ji(p,g,"value",f,h,v),g}(p.eventGenerator_,f,v,h?[h]:p.eventRegistrations_)}var cu,hu,Wn=function(){this.views=new Map};function za(p,f,v,h){var g,d,b=f.source.queryId;if(null!==b){var S=p.views.get(b);return(0,K.hu)(null!=S,"SyncTree gave us an op for an invalid query."),Bs(S,f,v,h)}var N=[];try{for(var Q=(0,w.XA)(p.views.values()),ue=Q.next();!ue.done;ue=Q.next())N=N.concat(Bs(S=ue.value,f,v,h))}catch(Ee){g={error:Ee}}finally{try{ue&&!ue.done&&(d=Q.return)&&d.call(Q)}finally{if(g)throw g.error}}return N}function dd(p,f,v,h,g){var b=p.views.get(f._queryIdentifier);if(!b){var S=mt(v,g?h:null),N=!1;S?N=!0:h instanceof F?(S=Lt(v,h),N=!1):(S=F.EMPTY_NODE,N=!1);var Q=gi(new pi(S,N,!1),new pi(h,g,!1));return new ar(f,Q)}return b}function nc(p){var f,v,h=[];try{for(var g=(0,w.XA)(p.views.values()),d=g.next();!d.done;d=g.next()){var b=d.value;b.query._queryParams.loadsAllData()||h.push(b)}}catch(S){f={error:S}}finally{try{d&&!d.done&&(v=g.return)&&v.call(g)}finally{if(f)throw f.error}}return h}function Ea(p,f){var v,h,g=null;try{for(var d=(0,w.XA)(p.views.values()),b=d.next();!b.done;b=d.next())g=g||Hn(b.value,f)}catch(N){v={error:N}}finally{try{b&&!b.done&&(h=d.return)&&h.call(d)}finally{if(v)throw v.error}}return g}function hd(p,f){return f._queryParams.loadsAllData()?js(p):p.views.get(f._queryIdentifier)}function $u(p,f){return null!=hd(p,f)}function Ta(p){return null!=js(p)}function js(p){var f,v;try{for(var h=(0,w.XA)(p.views.values()),g=h.next();!g.done;g=h.next()){var d=g.value;if(d.query._queryParams.loadsAllData())return d}}catch(b){f={error:b}}finally{try{g&&!g.done&&(v=h.return)&&v.call(h)}finally{if(f)throw f.error}}return null}var Or=1,sh=function(f){this.listenProvider_=f,this.syncPointTree_=new Tr(null),this.pendingWriteTree_={visibleWrites:Ai.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function rc(p,f,v,h,g){return function(p,f,v,h,g){(0,K.hu)(h>p.lastWriteId,"Stacking an older write on top of newer ones"),void 0===g&&(g=!0),p.allWrites.push({path:f,snap:v,writeId:h,visible:g}),g&&(p.visibleWrites=Ei(p.visibleWrites,f,v)),p.lastWriteId=h}(p.pendingWriteTree_,f,v,h,g),g?xs(p,new Po({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},f,v)):[]}function mo(p,f,v){void 0===v&&(v=!1);var h=function(p,f){for(var v=0;v<p.allWrites.length;v++){var h=p.allWrites[v];if(h.writeId===f)return h}return null}(p.pendingWriteTree_,f);if(function(p,f){var v=p.allWrites.findIndex(function(Q){return Q.writeId===f});(0,K.hu)(v>=0,"removeWrite called with nonexistent writeId.");var h=p.allWrites[v];p.allWrites.splice(v,1);for(var g=h.visible,d=!1,b=p.allWrites.length-1;g&&b>=0;){var S=p.allWrites[b];S.visible&&(b>=v&&Zu(S,h.path)?g=!1:ri(h.path,S.path)&&(d=!0)),b--}return!!g&&(d?(function(p){p.visibleWrites=Ba(p.allWrites,qu,un()),p.lastWriteId=p.allWrites.length>0?p.allWrites[p.allWrites.length-1].writeId:-1}(p),!0):(h.snap?p.visibleWrites=ei(p.visibleWrites,h.path):Bt(h.children,function(Q){p.visibleWrites=ei(p.visibleWrites,sr(h.path,Q))}),!0))}(p.pendingWriteTree_,f)){var d=new Tr(null);return null!=h.snap?d=d.set(un(),!0):Bt(h.children,function(b){d=d.set(new gn(b),!0)}),xs(p,new io(h.path,d,v))}return[]}function Gs(p,f,v){return xs(p,new Po({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},f,v))}function Nc(p,f,v,h){var g=f._path,d=p.syncPointTree_.get(g),b=[];if(d&&("default"===f._queryIdentifier||$u(d,f))){var S=function(p,f,v,h){var g,d,b=f._queryIdentifier,S=[],N=[],Q=Ta(p);if("default"===b)try{for(var ue=(0,w.XA)(p.views.entries()),Ee=ue.next();!Ee.done;Ee=ue.next()){var xt,Ge=(0,w.CR)(Ee.value,2),ht=Ge[0];N=N.concat(go(xt=Ge[1],v,h)),po(xt)&&(p.views.delete(ht),xt.query._queryParams.loadsAllData()||S.push(xt.query))}}catch(Dn){g={error:Dn}}finally{try{Ee&&!Ee.done&&(d=ue.return)&&d.call(ue)}finally{if(g)throw g.error}}else(xt=p.views.get(b))&&(N=N.concat(go(xt,v,h)),po(xt)&&(p.views.delete(b),xt.query._queryParams.loadsAllData()||S.push(xt.query)));return Q&&!Ta(p)&&S.push(new((0,K.hu)(cu,"Reference.ts has not been loaded"),cu)(f._repo,f._path)),{removed:S,events:N}}(d,f,v,h);(function(p){return 0===p.views.size})(d)&&(p.syncPointTree_=p.syncPointTree_.remove(g));var N=S.removed;b=S.events;var Q=-1!==N.findIndex(function(Wr){return Wr._queryParams.loadsAllData()}),ue=p.syncPointTree_.findOnPath(g,function(Wr,ts){return Ta(ts)});if(Q&&!ue){var Ee=p.syncPointTree_.subtree(g);if(!Ee.isEmpty())for(var Ge=function(p){return p.fold(function(f,v,h){if(v&&Ta(v))return[js(v)];var d=[];return v&&(d=nc(v)),Bt(h,function(b,S){d=d.concat(S)}),d})}(Ee),ht=0;ht<Ge.length;++ht){var xt=Ge[ht],Dn=xt.query,bn=Lc(p,xt);p.listenProvider_.startListening(Da(Dn),Yu(p,Dn),bn.hashFn,bn.onComplete)}}!ue&&N.length>0&&!h&&(Q?p.listenProvider_.stopListening(Da(f),null):N.forEach(function(Wr){var ts=p.queryToTagMap.get(ic(Wr));p.listenProvider_.stopListening(Da(Wr),ts)})),function(p,f){for(var v=0;v<f.length;++v){var h=f[v];if(!h._queryParams.loadsAllData()){var g=ic(h),d=p.queryToTagMap.get(g);p.queryToTagMap.delete(g),p.tagToQueryMap.delete(d)}}}(p,N)}return b}function ah(p,f,v){var h=f._path,g=null,d=!1;p.syncPointTree_.foreachOnPath(h,function(Dn,bn){var Yn=Yr(Dn,h);g=g||Ea(bn,Yn),d=d||Ta(bn)});var S,b=p.syncPointTree_.get(h);b?(d=d||Ta(b),g=g||Ea(b,un())):(b=new Wn,p.syncPointTree_=p.syncPointTree_.set(h,b)),null!=g?S=!0:(S=!1,g=F.EMPTY_NODE,p.syncPointTree_.subtree(h).foreachChild(function(Dn,bn){var Yn=Ea(bn,un());Yn&&(g=g.updateImmediateChild(Dn,Yn))}));var Q=$u(b,f);if(!Q&&!f._queryParams.loadsAllData()){var ue=ic(f);(0,K.hu)(!p.queryToTagMap.has(ue),"View does not exist, but we have a tag");var Ee=Or++;p.queryToTagMap.set(ue,Ee),p.tagToQueryMap.set(Ee,ue)}var ht=function(p,f,v,h,g,d){var b=dd(p,f,h,g,d);return p.views.has(f._queryIdentifier)||p.views.set(f._queryIdentifier,b),function(p,f){p.eventRegistrations_.push(f)}(b,v),function(p,f){var v=p.viewCache_.eventCache,h=[];return v.getNode().isLeafNode()||v.getNode().forEachChild(hr,function(d,b){h.push(di(d,b))}),v.isFullyInitialized()&&h.push(zr(v.getNode())),Yo(p,h,v.getNode(),f)}(b,v)}(b,f,v,qi(p.pendingWriteTree_,h),g,S);if(!Q&&!d){var xt=hd(b,f);ht=ht.concat(function(p,f,v){var h=f._path,g=Yu(p,f),d=Lc(p,v),b=p.listenProvider_.startListening(Da(f),g,d.hashFn,d.onComplete),S=p.syncPointTree_.subtree(h);if(g)(0,K.hu)(!Ta(S.value),"If we're adding a query, it shouldn't be shadowed");else for(var N=S.fold(function(Ee,Ge,ht){if(!jn(Ee)&&Ge&&Ta(Ge))return[js(Ge).query];var xt=[];return Ge&&(xt=xt.concat(nc(Ge).map(function(Dn){return Dn.query}))),Bt(ht,function(Dn,bn){xt=xt.concat(bn)}),xt}),Q=0;Q<N.length;++Q){var ue=N[Q];p.listenProvider_.stopListening(Da(ue),Yu(p,ue))}return b}(p,f,xt))}return ht}function Ml(p,f,v){var g=p.pendingWriteTree_,d=p.syncPointTree_.findOnPath(f,function(b,S){var Q=Ea(S,Yr(b,f));if(Q)return Q});return Vs(g,f,d,v,!0)}function xs(p,f){return ia(f,p.syncPointTree_,null,qi(p.pendingWriteTree_,un()))}function ia(p,f,v,h){if(jn(p.path))return Wu(p,f,v,h);var g=f.get(un());null==v&&null!=g&&(v=Ea(g,un()));var d=[],b=Jn(p.path),S=p.operationForChild(b),N=f.children.get(b);if(N&&S){var Q=v?v.getImmediateChild(b):null,ue=ys(h,b);d=d.concat(ia(S,N,Q,ue))}return g&&(d=d.concat(za(g,p,h,v))),d}function Wu(p,f,v,h){var g=f.get(un());null==v&&null!=g&&(v=Ea(g,un()));var d=[];return f.children.inorderTraversal(function(b,S){var N=v?v.getImmediateChild(b):null,Q=ys(h,b),ue=p.operationForChild(b);ue&&(d=d.concat(Wu(ue,S,N,Q)))}),g&&(d=d.concat(za(g,p,h,v))),d}function Lc(p,f){var v=f.query,h=Yu(p,v);return{hashFn:function(){return(function(p){return p.viewCache_.serverCache.getNode()}(f)||F.EMPTY_NODE).hash()},onComplete:function(g){if("ok"===g)return h?function(p,f,v){var h=Zs(p,v);if(h){var g=fu(h),d=g.path,b=g.queryId,S=Yr(d,f);return pu(p,d,new fi(Br(b),S))}return[]}(p,v._path,h):function(p,f){return xs(p,new fi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},f))}(p,v._path);var d=function(p,f){var v="Unknown Error";"too_big"===p?v="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===p?v="Client doesn't have permission to access the desired data.":"unavailable"===p&&(v="The service is unavailable");var h=new Error(p+" at "+f._path.toString()+": "+v);return h.code=p.toUpperCase(),h}(g,v);return Nc(p,v,null,d)}}}function Yu(p,f){var v=ic(f);return p.queryToTagMap.get(v)}function ic(p){return p._path.toString()+"$"+p._queryIdentifier}function Zs(p,f){return p.tagToQueryMap.get(f)}function fu(p){var f=p.indexOf("$");return(0,K.hu)(-1!==f&&f<p.length-1,"Bad queryKey."),{queryId:p.substr(f+1),path:new gn(p.substr(0,f))}}function pu(p,f,v){var h=p.syncPointTree_.get(f);return(0,K.hu)(h,"Missing sync point for query tag that we're tracking"),za(h,v,qi(p.pendingWriteTree_,f),null)}function Da(p){return p._queryParams.loadsAllData()&&!p._queryParams.isDefault()?new((0,K.hu)(hu,"Reference.ts has not been loaded"),hu)(p._repo,p._path):p}var Sa=function(){function p(f){this.node_=f}return p.prototype.getImmediateChild=function(f){return new p(this.node_.getImmediateChild(f))},p.prototype.node=function(){return this.node_},p}(),Bo=function(){function p(f,v){this.syncTree_=f,this.path_=v}return p.prototype.getImmediateChild=function(f){var v=sr(this.path_,f);return new p(this.syncTree_,v)},p.prototype.node=function(){return Ml(this.syncTree_,this.path_)},p}(),Il=function(p,f,v){return p&&"object"==typeof p?((0,K.hu)(".sv"in p,"Unexpected leaf node or priority contents"),"string"==typeof p[".sv"]?Bc(p[".sv"],f,v):"object"==typeof p[".sv"]?oc(p[".sv"],f):void(0,K.hu)(!1,"Unexpected server value: "+JSON.stringify(p,null,2))):p},Bc=function(p,f,v){switch(p){case"timestamp":return v.timestamp;default:(0,K.hu)(!1,"Unexpected server value: "+p)}},oc=function(p,f,v){p.hasOwnProperty("increment")||(0,K.hu)(!1,"Unexpected server value: "+JSON.stringify(p,null,2));var h=p.increment;"number"!=typeof h&&(0,K.hu)(!1,"Unexpected increment value: "+h);var g=f.node();if((0,K.hu)(null!=g,"Expected ChildrenNode.EMPTY_NODE for nulls"),!g.isLeafNode())return h;var b=g.getValue();return"number"!=typeof b?h:b+h},Ju=function(p,f,v,h){return Wa(f,new Bo(v,p),h)},Xu=function(p,f,v){return Wa(p,new Sa(f),v)};function Wa(p,f,v){var d,h=p.getPriority().val(),g=Il(h,f.getImmediateChild(".priority"),v);if(p.isLeafNode()){var b=p,S=Il(b.getValue(),f,v);return S!==b.getValue()||g!==b.getPriority().val()?new lr(S,tt(g)):p}var N=p;return d=N,g!==N.getPriority().val()&&(d=d.updatePriority(new lr(g))),N.forEachChild(hr,function(Q,ue){var Ee=Wa(ue,f.getImmediateChild(Q),v);Ee!==ue&&(d=d.updateImmediateChild(Q,Ee))}),d}var Aa=function(f,v,h){void 0===f&&(f=""),void 0===v&&(v=null),void 0===h&&(h={children:{},childCount:0}),this.name=f,this.parent=v,this.node=h};function Ol(p,f){for(var v=f instanceof gn?f:new gn(f),h=p,g=Jn(v);null!==g;){var d=(0,K.DV)(h.node.children,g)||{children:{},childCount:0};h=new Aa(g,h,d),g=Jn(v=gr(v))}return h}function bi(p){return p.node.value}function mu(p,f){p.node.value=f,bu(p)}function sc(p){return p.node.childCount>0}function Ma(p,f){Bt(p.node.children,function(v,h){f(new Aa(v,p,h))})}function vu(p,f,v,h){v&&!h&&f(p),Ma(p,function(g){vu(g,f,!0,h)}),v&&h&&f(p)}function yu(p){return new gn(null===p.parent?p.name:yu(p.parent)+"/"+p.name)}function bu(p){null!==p.parent&&function(p,f,v){var h=function(p){return void 0===bi(p)&&!sc(p)}(v),g=(0,K.r3)(p.node.children,f);h&&g?(delete p.node.children[f],p.node.childCount--,bu(p)):!h&&!g&&(p.node.children[f]=v.node,p.node.childCount++,bu(p))}(p.parent,p.name,p)}var as=/[\[\].#$\/\u0000-\u001F\u007F]/,el=/[\[\].#$\u0000-\u001F\u007F]/,qs=10485760,Ka=function(p){return"string"==typeof p&&0!==p.length&&!as.test(p)},jc=function(p){return"string"==typeof p&&0!==p.length&&!el.test(p)},Ps=function(p){return null===p||"string"==typeof p||"number"==typeof p&&!rt(p)||p&&"object"==typeof p&&(0,K.r3)(p,".sv")},ds=function(p,f,v,h){h&&void 0===f||xl((0,K.gK)(p,"value"),f,v)},xl=function(p,f,v){var h=v instanceof gn?new Vi(v,p):v;if(void 0===f)throw new Error(p+"contains undefined "+Lr(h));if("function"==typeof f)throw new Error(p+"contains a function "+Lr(h)+" with contents = "+f.toString());if(rt(f))throw new Error(p+"contains "+f.toString()+" "+Lr(h));if("string"==typeof f&&f.length>qs/3&&(0,K.ug)(f)>qs)throw new Error(p+"contains a string greater than "+qs+" utf8 bytes "+Lr(h)+" ('"+f.substring(0,50)+"...')");if(f&&"object"==typeof f){var g=!1,d=!1;if(Bt(f,function(b,S){if(".value"===b)g=!0;else if(".priority"!==b&&".sv"!==b&&(d=!0,!Ka(b)))throw new Error(p+" contains an invalid key ("+b+") "+Lr(h)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(p,f){p.parts_.length>0&&(p.byteLength_+=1),p.parts_.push(f),p.byteLength_+=(0,K.ug)(f),Zo(p)})(h,b),xl(p,S,h),function(p){var f=p.parts_.pop();p.byteLength_-=(0,K.ug)(f),p.parts_.length>0&&(p.byteLength_-=1)}(h)}),g&&d)throw new Error(p+' contains ".value" child '+Lr(h)+" in addition to actual children.")}},wu=function(p,f,v,h){if(!h||void 0!==f){var g=(0,K.gK)(p,"values");if(!f||"object"!=typeof f||Array.isArray(f))throw new Error(g+" must be an object containing the children to replace.");var d=[];Bt(f,function(b,S){var N=new gn(b);if(xl(g,S,sr(v,N)),".priority"===ki(N)&&!Ps(S))throw new Error(g+"contains an invalid value for '"+N.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");d.push(N)}),function(p,f){var v,h;for(v=0;v<f.length;v++)for(var g=Gr(h=f[v]),d=0;d<g.length;d++)if((".priority"!==g[d]||d!==g.length-1)&&!Ka(g[d]))throw new Error(p+"contains an invalid key ("+g[d]+") in path "+h.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');f.sort(Mr);var b=null;for(v=0;v<f.length;v++){if(h=f[v],null!==b&&ri(b,h))throw new Error(p+"contains a path "+b.toString()+" that is ancestor of another path "+h.toString());b=h}}(g,d)}},oa=function(p,f,v){if(!v||void 0!==f){if(rt(f))throw new Error((0,K.gK)(p,"priority")+"is "+f.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ps(f))throw new Error((0,K.gK)(p,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},gd=function(p,f,v){if(!v||void 0!==f)switch(f){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,K.gK)(p,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Qa=function(p,f,v,h){if(!(h&&void 0===v||Ka(v)))throw new Error((0,K.gK)(p,f)+'was an invalid key = "'+v+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Cs=function(p,f,v,h){if(!(h&&void 0===v||jc(v)))throw new Error((0,K.gK)(p,f)+'was an invalid path = "'+v+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},zs=function(p,f){if(".info"===Jn(f))throw new Error(p+" failed = Can't modify data under /.info/")},Hc=function(p,f){var v=f.path.toString();if("string"!=typeof f.repoInfo.host||0===f.repoInfo.host.length||!Ka(f.repoInfo.namespace)&&"localhost"!==f.repoInfo.host.split(":")[0]||0!==v.length&&!function(p){return p&&(p=p.replace(/^\/*\.info(\/|$)/,"/")),jc(p)}(v))throw new Error((0,K.gK)(p,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},_o=function(p,f,v,h){if((!h||void 0!==v)&&"boolean"!=typeof v)throw new Error((0,K.gK)(p,f)+"must be a boolean.")},ti=function(){this.eventLists_=[],this.recursionDepth_=0};function sa(p,f){for(var v=null,h=0;h<f.length;h++){var g=f[h],d=g.getPath();null!==v&&!Ui(d,v.path)&&(p.eventLists_.push(v),v=null),null===v&&(v={events:[],path:d}),v.events.push(g)}v&&p.eventLists_.push(v)}function Ja(p,f,v){sa(p,v),Gc(p,function(h){return Ui(h,f)})}function jo(p,f,v){sa(p,v),Gc(p,function(h){return ri(h,f)||ri(f,h)})}function Gc(p,f){p.recursionDepth_++;for(var v=!0,h=0;h<p.eventLists_.length;h++){var g=p.eventLists_[h];g&&(f(g.path)?(Zc(p.eventLists_[h]),p.eventLists_[h]=null):v=!1)}v&&(p.eventLists_=[]),p.recursionDepth_--}function Zc(p){for(var f=0;f<p.events.length;f++){var v=p.events[f];if(null!==v){p.events[f]=null;var h=v.getEventRunner();Ct&&at("event: "+v.toString()),tr(h)}}}var Qo="repo_interrupt",Ia=function(){function p(f,v,h,g){this.repoInfo_=f,this.forceRestClient_=v,this.authTokenProvider_=h,this.appCheckProvider_=g,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ti,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oe(),this.transactionQueueTree_=new Aa,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return p.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},p}();function Tu(p){var v=p.infoData_.getNode(new gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+v}function Du(p){return function(p){return(p=p||{}).timestamp=p.timestamp||(new Date).getTime(),p}({timestamp:Tu(p)})}function Ao(p,f,v,h,g){p.dataUpdateCount++;var d=new gn(f);v=p.interceptServerDataCallback_?p.interceptServerDataCallback_(f,v):v;var b=[];if(g)if(h){var S=(0,K.UI)(v,function(Ge){return tt(Ge)});b=function(p,f,v,h){var g=Zs(p,h);if(g){var d=fu(g),b=d.path,S=d.queryId,N=Yr(b,f),Q=Tr.fromObject(v);return pu(p,b,new To(Br(S),N,Q))}return[]}(p.serverSyncTree_,d,S,g)}else{var N=tt(v);b=function(p,f,v,h){var g=Zs(p,h);if(null!=g){var d=fu(g),b=d.path,S=d.queryId,N=Yr(b,f);return pu(p,b,new Po(Br(S),N,v))}return[]}(p.serverSyncTree_,d,N,g)}else if(h){var Q=(0,K.UI)(v,function(Ge){return tt(Ge)});b=function(p,f,v){var h=Tr.fromObject(v);return xs(p,new To({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},f,h))}(p.serverSyncTree_,d,Q)}else{var ue=tt(v);b=Gs(p.serverSyncTree_,d,ue)}var Ee=d;b.length>0&&(Ee=Su(p,d)),jo(p.eventQueue_,Ee,b)}function ac(p,f){uc(p,"connected",f),!1===f&&function(p){kl(p,"onDisconnectEvents");var f=Du(p),v=oe();Pe(p.onDisconnect_,un(),function(g,d){var b=Ju(g,d,p.serverSyncTree_,f);ve(v,g,b)});var h=[];Pe(v,un(),function(g,d){h=h.concat(Gs(p.serverSyncTree_,g,d));var b=Au(p,g);Su(p,b)}),p.onDisconnect_=oe(),jo(p.eventQueue_,un(),h)}(p)}function uc(p,f,v){var h=new gn("/.info/"+f),g=tt(v);p.infoData_.updateSnapshot(h,g);var d=Gs(p.infoSyncTree_,h,g);jo(p.eventQueue_,h,d)}function Pl(p){return p.nextWriteId_++}function aa(p,f,v,h,g){kl(p,"set",{path:f.toString(),value:v,priority:h});var d=Du(p),b=tt(v,h),S=Ml(p.serverSyncTree_,f),N=Xu(b,S,d),Q=Pl(p),ue=rc(p.serverSyncTree_,f,N,Q,!0);sa(p.eventQueue_,ue),p.server_.put(f.toString(),b.val(!0),function(Ge,ht){var xt="ok"===Ge;xt||Et("set at "+f+" failed: "+Ge);var Dn=mo(p.serverSyncTree_,Q,!xt);jo(p.eventQueue_,f,Dn),Jo(0,g,Ge,ht)});var Ee=Au(p,f);Su(p,Ee),jo(p.eventQueue_,Ee,[])}function vd(p,f,v){p.server_.onDisconnectCancel(f.toString(),function(h,g){"ok"===h&&Oe(p.onDisconnect_,f),Jo(0,v,h,g)})}function lc(p,f,v,h){var g=tt(v);p.server_.onDisconnectPut(f.toString(),g.val(!0),function(d,b){"ok"===d&&ve(p.onDisconnect_,f,g),Jo(0,h,d,b)})}function Rl(p,f,v){var h;h=".info"===Jn(f._path)?Nc(p.infoSyncTree_,f,v):Nc(p.serverSyncTree_,f,v),Ja(p.eventQueue_,f._path,h)}function qc(p){p.persistentConnection_&&p.persistentConnection_.interrupt(Qo)}function kl(p){for(var f=[],v=1;v<arguments.length;v++)f[v-1]=arguments[v];var h="";p.persistentConnection_&&(h=p.persistentConnection_.id+":"),at.apply(void 0,(0,w.ev)([h],(0,w.CR)(f)))}function Jo(p,f,v,h){f&&tr(function(){if("ok"===v)f(null);else{var g=(v||"error").toUpperCase(),d=g;h&&(d+=": "+h);var b=new Error(d);b.code=g,f(b)}})}function ws(p,f,v){return Ml(p.serverSyncTree_,f,v)||F.EMPTY_NODE}function zi(p,f){if(void 0===f&&(f=p.transactionQueueTree_),f||ua(p,f),bi(f)){var v=zc(p,f);(0,K.hu)(v.length>0,"Sending zero length transaction queue"),v.every(function(g){return 0===g.status})&&function(p,f,v){for(var h=v.map(function(Ge){return Ge.currentWriteId}),g=ws(p,f,h),d=g,b=g.hash(),S=0;S<v.length;S++){var N=v[S];(0,K.hu)(0===N.status,"tryToSendTransactionQueue_: items in queue should all be run."),N.status=1,N.retryCount++;var Q=Yr(f,N.path);d=d.updateChild(Q,N.currentOutputSnapshotRaw)}var ue=d.val(!0),Ee=f;p.server_.put(Ee.toString(),ue,function(Ge){kl(p,"transaction put response",{path:Ee.toString(),status:Ge});var ht=[];if("ok"===Ge){for(var xt=[],Dn=function(Yn){v[Yn].status=2,ht=ht.concat(mo(p.serverSyncTree_,v[Yn].currentWriteId)),v[Yn].onComplete&&xt.push(function(){return v[Yn].onComplete(null,!0,v[Yn].currentOutputSnapshotResolved)}),v[Yn].unwatcher()},bn=0;bn<v.length;bn++)Dn(bn);for(ua(p,Ol(p.transactionQueueTree_,f)),zi(p,p.transactionQueueTree_),jo(p.eventQueue_,f,ht),bn=0;bn<xt.length;bn++)tr(xt[bn])}else{if("datastale"===Ge)for(bn=0;bn<v.length;bn++)v[bn].status=3===v[bn].status?4:0;else for(Et("transaction at "+Ee.toString()+" failed: "+Ge),bn=0;bn<v.length;bn++)v[bn].status=4,v[bn].abortReason=Ge;Su(p,f)}},b)}(p,yu(f),v)}else sc(f)&&Ma(f,function(g){zi(p,g)})}function Su(p,f){var v=Oa(p,f),h=yu(v);return function(p,f,v){if(0!==f.length){for(var h=[],g=[],b=f.filter(function(Q){return 0===Q.status}).map(function(Q){return Q.currentWriteId}),S=function(Q){var ht,ue=f[Q],Ee=Yr(v,ue.path),Ge=!1;if((0,K.hu)(null!==Ee,"rerunTransactionsUnderNode_: relativePath should not be null."),4===ue.status)Ge=!0,ht=ue.abortReason,g=g.concat(mo(p.serverSyncTree_,ue.currentWriteId,!0));else if(0===ue.status)if(ue.retryCount>=25)Ge=!0,ht="maxretry",g=g.concat(mo(p.serverSyncTree_,ue.currentWriteId,!0));else{var xt=ws(p,ue.path,b);ue.currentInputSnapshot=xt;var Dn=f[Q].update(xt.val());if(void 0!==Dn){xl("transaction failed: Data returned ",Dn,ue.path);var bn=tt(Dn);"object"==typeof Dn&&null!=Dn&&(0,K.r3)(Dn,".priority")||(bn=bn.updatePriority(xt.getPriority()));var Wr=ue.currentWriteId,ts=Du(p),ka=Xu(bn,xt,ts);ue.currentOutputSnapshotRaw=bn,ue.currentOutputSnapshotResolved=ka,ue.currentWriteId=Pl(p),b.splice(b.indexOf(Wr),1),g=(g=g.concat(rc(p.serverSyncTree_,ue.path,ka,ue.currentWriteId,ue.applyLocally))).concat(mo(p.serverSyncTree_,Wr,!0))}else Ge=!0,ht="nodata",g=g.concat(mo(p.serverSyncTree_,ue.currentWriteId,!0))}jo(p.eventQueue_,v,g),g=[],Ge&&(f[Q].status=2,setTimeout(f[Q].unwatcher,Math.floor(0)),f[Q].onComplete&&h.push("nodata"===ht?function(){return f[Q].onComplete(null,!1,f[Q].currentInputSnapshot)}:function(){return f[Q].onComplete(new Error(ht),!1,null)}))},N=0;N<f.length;N++)S(N);for(ua(p,p.transactionQueueTree_),N=0;N<h.length;N++)tr(h[N]);zi(p,p.transactionQueueTree_)}}(p,zc(p,v),h),h}function Oa(p,f){var v,h=p.transactionQueueTree_;for(v=Jn(f);null!==v&&void 0===bi(h);)h=Ol(h,v),v=Jn(f=gr(f));return h}function zc(p,f){var v=[];return Cd(p,f,v),v.sort(function(h,g){return h.order-g.order}),v}function Cd(p,f,v){var h=bi(f);if(h)for(var g=0;g<h.length;g++)v.push(h[g]);Ma(f,function(d){Cd(p,d,v)})}function ua(p,f){var v=bi(f);if(v){for(var h=0,g=0;g<v.length;g++)2!==v[g].status&&(v[h]=v[g],h++);v.length=h,mu(f,v.length>0?v:void 0)}Ma(f,function(d){ua(p,d)})}function Au(p,f){var v=yu(Oa(p,f)),h=Ol(p.transactionQueueTree_,f);return function(p,f,v){for(var h=p.parent;null!==h;){if(f(h))return!0;h=h.parent}}(h,function(g){ol(p,g)}),ol(p,h),vu(h,function(g){ol(p,g)}),v}function ol(p,f){var v=bi(f);if(v){for(var h=[],g=[],d=-1,b=0;b<v.length;b++)3===v[b].status||(1===v[b].status?((0,K.hu)(d===b-1,"All SENT items should be at beginning of queue."),d=b,v[b].status=3,v[b].abortReason="set"):((0,K.hu)(0===v[b].status,"Unexpected transaction status in abort"),v[b].unwatcher(),g=g.concat(mo(p.serverSyncTree_,v[b].currentWriteId,!0)),v[b].onComplete&&h.push(v[b].onComplete.bind(null,new Error("set"),!1,null))));for(-1===d?mu(f,void 0):v.length=d+1,jo(p.eventQueue_,yu(f),g),b=0;b<h.length;b++)tr(h[b])}}var sl=function(p,f){var v=dc(p),h=v.namespace;return"firebase.com"===v.domain&&wn(v.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!h||"undefined"===h)&&"localhost"!==v.domain&&wn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),v.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Et("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new nn(v.host,v.secure,h,f,"ws"===v.scheme||"wss"===v.scheme,"",h!==v.subdomain),path:new gn(v.pathString)}},dc=function(p){var f="",v="",h="",g="",d="",b=!0,S="https",N=443;if("string"==typeof p){var Q=p.indexOf("//");Q>=0&&(S=p.substring(0,Q-1),p=p.substring(Q+2));var ue=p.indexOf("/");-1===ue&&(ue=p.length);var Ee=p.indexOf("?");-1===Ee&&(Ee=p.length),f=p.substring(0,Math.min(ue,Ee)),ue<Ee&&(g=function(p){for(var f="",v=p.split("/"),h=0;h<v.length;h++)if(v[h].length>0){var g=v[h];try{g=decodeURIComponent(g.replace(/\+/g," "))}catch(d){}f+="/"+g}return f}(p.substring(ue,Ee)));var Ge=function(p){var f,v,h={};"?"===p.charAt(0)&&(p=p.substring(1));try{for(var g=(0,w.XA)(p.split("&")),d=g.next();!d.done;d=g.next()){var b=d.value;if(0!==b.length){var S=b.split("=");2===S.length?h[decodeURIComponent(S[0])]=decodeURIComponent(S[1]):Et("Invalid query segment '"+b+"' in query '"+p+"'")}}}catch(N){f={error:N}}finally{try{d&&!d.done&&(v=g.return)&&v.call(g)}finally{if(f)throw f.error}}return h}(p.substring(Math.min(p.length,Ee)));(Q=f.indexOf(":"))>=0?(b="https"===S||"wss"===S,N=parseInt(f.substring(Q+1),10)):Q=f.length;var ht=f.slice(0,Q);if("localhost"===ht.toLowerCase())v="localhost";else if(ht.split(".").length<=2)v=ht;else{var xt=f.indexOf(".");h=f.substring(0,xt).toLowerCase(),v=f.substring(xt+1),d=h}"ns"in Ge&&(d=Ge.ns)}return{host:f,port:N,domain:v,subdomain:h,secure:b,scheme:S,pathString:g,namespace:d}},hc=function(){function p(f,v,h,g){this.eventType=f,this.eventRegistration=v,this.snapshot=h,this.prevName=g}return p.prototype.getPath=function(){var f=this.snapshot.ref;return"value"===this.eventType?f._path:f.parent._path},p.prototype.getEventType=function(){return this.eventType},p.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},p.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,K.Pz)(this.snapshot.exportVal())},p}(),Wc=function(){function p(f,v,h){this.eventRegistration=f,this.error=v,this.path=h}return p.prototype.getPath=function(){return this.path},p.prototype.getEventType=function(){return"cancel"},p.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},p.prototype.toString=function(){return this.path.toString()+":cancel"},p}(),Yc=function(){function p(f,v){this.snapshotCallback=f,this.cancelCallback=v}return p.prototype.onValue=function(f,v){this.snapshotCallback.call(null,f,v)},p.prototype.onCancel=function(f){return(0,K.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,f)},Object.defineProperty(p.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),p.prototype.matches=function(f){return this.snapshotCallback===f.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===f.snapshotCallback.userCallback&&this.snapshotCallback.context===f.snapshotCallback.context},p}(),fc=function(){function p(f,v){this._repo=f,this._path=v}return p.prototype.cancel=function(){var f=new K.BH;return vd(this._repo,this._path,f.wrapCallback(function(){})),f.promise},p.prototype.remove=function(){zs("OnDisconnect.remove",this._path);var f=new K.BH;return lc(this._repo,this._path,null,f.wrapCallback(function(){})),f.promise},p.prototype.set=function(f){zs("OnDisconnect.set",this._path),ds("OnDisconnect.set",f,this._path,!1);var v=new K.BH;return lc(this._repo,this._path,f,v.wrapCallback(function(){})),v.promise},p.prototype.setWithPriority=function(f,v){zs("OnDisconnect.setWithPriority",this._path),ds("OnDisconnect.setWithPriority",f,this._path,!1),oa("OnDisconnect.setWithPriority",v,!1);var h=new K.BH;return function(p,f,v,h,g){var d=tt(v,h);p.server_.onDisconnectPut(f.toString(),d.val(!0),function(b,S){"ok"===b&&ve(p.onDisconnect_,f,d),Jo(0,g,b,S)})}(this._repo,this._path,f,v,h.wrapCallback(function(){})),h.promise},p.prototype.update=function(f){zs("OnDisconnect.update",this._path),wu("OnDisconnect.update",f,this._path,!1);var v=new K.BH;return function(p,f,v,h){if((0,K.xb)(v))return at("onDisconnect().update() called with empty data.  Don't do anything."),void Jo(0,h,"ok",void 0);p.server_.onDisconnectMerge(f.toString(),v,function(g,d){"ok"===g&&Bt(v,function(b,S){var N=tt(S);ve(p.onDisconnect_,sr(f,b),N)}),Jo(0,h,g,d)})}(this._repo,this._path,f,v.wrapCallback(function(){})),v.promise},p}(),Xo=function(){function p(f,v,h,g){this._repo=f,this._path=v,this._queryParams=h,this._orderByCalled=g}return Object.defineProperty(p.prototype,"key",{get:function(){return jn(this._path)?null:ki(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"ref",{get:function(){return new Kr(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"_queryIdentifier",{get:function(){var f=A(this._queryParams),v=Sn(f);return"{}"===v?"default":v},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"_queryObject",{get:function(){return A(this._queryParams)},enumerable:!1,configurable:!0}),p.prototype.isEqual=function(f){if(!((f=(0,K.m9)(f))instanceof p))return!1;var v=this._repo===f._repo,h=Ui(this._path,f._path);return v&&h&&this._queryIdentifier===f._queryIdentifier},p.prototype.toJSON=function(){return this.toString()},p.prototype.toString=function(){return this._repo.toString()+function(p){for(var f="",v=p.pieceNum_;v<p.pieces_.length;v++)""!==p.pieces_[v]&&(f+="/"+encodeURIComponent(String(p.pieces_[v])));return f||"/"}(this._path)},p}();function pc(p,f){if(!0===p._orderByCalled)throw new Error(f+": You can't combine multiple orderBy calls.")}function la(p){var f=null,v=null;if(p.hasStart()&&(f=p.getIndexStartValue()),p.hasEnd()&&(v=p.getIndexEndValue()),p.getIndex()===xi){var h="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",g="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(p.hasStart()){if(p.getIndexStartName()!==et)throw new Error(h);if("string"!=typeof f)throw new Error(g)}if(p.hasEnd()){if(p.getIndexEndName()!==_t)throw new Error(h);if("string"!=typeof v)throw new Error(g)}}else if(p.getIndex()===hr){if(null!=f&&!Ps(f)||null!=v&&!Ps(v))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,K.hu)(p.getIndex()instanceof j||p.getIndex()===L,"unknown index type."),null!=f&&"object"==typeof f||null!=v&&"object"==typeof v)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Xa(p){if(p.hasStart()&&p.hasEnd()&&p.hasLimit()&&!p.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Kr=function(p){function f(v,h){return p.call(this,v,h,new uu,!1)||this}return(0,w.ZT)(f,p),Object.defineProperty(f.prototype,"parent",{get:function(){var v=Fi(this._path);return null===v?null:new f(this._repo,v)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"root",{get:function(){for(var v=this;null!==v.parent;)v=v.parent;return v},enumerable:!1,configurable:!0}),f}(Xo),Nl=function(){function p(f,v,h){this._node=f,this.ref=v,this._index=h}return Object.defineProperty(p.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),p.prototype.child=function(f){var v=new gn(f),h=$s(this.ref,f);return new p(this._node.getChild(v),h,hr)},p.prototype.exists=function(){return!this._node.isEmpty()},p.prototype.exportVal=function(){return this._node.val(!0)},p.prototype.forEach=function(f){var v=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(g,d){return f(new p(d,$s(v.ref,g),hr))})},p.prototype.hasChild=function(f){var v=new gn(f);return!this._node.getChild(v).isEmpty()},p.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},p.prototype.toJSON=function(){return this.exportVal()},p.prototype.val=function(){return this._node.val()},p}();function wd(p,f){return(p=(0,K.m9)(p))._checkNotDeleted("ref"),void 0!==f?$s(p._root,f):p._root}function gc(p,f){(p=(0,K.m9)(p))._checkNotDeleted("refFromURL");var v=sl(f,p._repo.repoInfo_.nodeAdmin);Hc("refFromURL",v);var h=v.repoInfo;return!p._repo.repoInfo_.isCustomHost()&&h.host!==p._repo.repoInfo_.host&&wn("refFromURL: Host name does not match the current database: (found "+h.host+" but expected "+p._repo.repoInfo_.host+")"),wd(p,v.path.toString())}function $s(p,f){return null===Jn((p=(0,K.m9)(p))._path)?((v=f)&&(v=v.replace(/^\/*\.info(\/|$)/,"/")),Cs("child","path",v,!1)):Cs("child","path",f,!1),new Kr(p._repo,sr(p._path,f));var v}function Ws(p,f){p=(0,K.m9)(p),zs("push",p._path),ds("push",f,p._path,!0);var b,v=Tu(p._repo),h=fr(v),g=$s(p,h),d=$s(p,h);return b=null!=f?mc(d,f).then(function(){return d}):Promise.resolve(d),g.then=b.then.bind(b),g.catch=b.then.bind(b,void 0),g}function Ed(p){return zs("remove",p._path),mc(p,null)}function mc(p,f){p=(0,K.m9)(p),zs("set",p._path),ds("set",f,p._path,!1);var v=new K.BH;return aa(p._repo,p._path,f,null,v.wrapCallback(function(){})),v.promise}function ca(p,f){p=(0,K.m9)(p),zs("setPriority",p._path),oa("setPriority",f,!1);var v=new K.BH;return aa(p._repo,sr(p._path,".priority"),f,null,v.wrapCallback(function(){})),v.promise}function Mu(p,f,v){if(zs("setWithPriority",p._path),ds("setWithPriority",f,p._path,!1),oa("setWithPriority",v,!1),".length"===p.key||".keys"===p.key)throw"setWithPriority failed: "+p.key+" is a read-only object.";var h=new K.BH;return aa(p._repo,p._path,f,v,h.wrapCallback(function(){})),h.promise}function Es(p,f){wu("update",f,p._path,!1);var v=new K.BH;return function(p,f,v,h){kl(p,"update",{path:f.toString(),value:v});var g=!0,d=Du(p),b={};if(Bt(v,function(Q,ue){g=!1,b[Q]=Ju(sr(f,Q),tt(ue),p.serverSyncTree_,d)}),g)at("update() called with empty data.  Don't do anything."),Jo(0,h,"ok",void 0);else{var S=Pl(p),N=function(p,f,v,h){!function(p,f,v,h){(0,K.hu)(h>p.lastWriteId,"Stacking an older merge on top of newer ones"),p.allWrites.push({path:f,children:v,writeId:h,visible:!0}),p.visibleWrites=ao(p.visibleWrites,f,v),p.lastWriteId=h}(p.pendingWriteTree_,f,v,h);var g=Tr.fromObject(v);return xs(p,new To({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},f,g))}(p.serverSyncTree_,f,b,S);sa(p.eventQueue_,N),p.server_.merge(f.toString(),v,function(Q,ue){var Ee="ok"===Q;Ee||Et("update at "+f+" failed: "+Q);var Ge=mo(p.serverSyncTree_,S,!Ee),ht=Ge.length>0?Su(p,f):f;jo(p.eventQueue_,ht,Ge),Jo(0,h,Q,ue)}),Bt(v,function(Q){var ue=Au(p,sr(f,Q));Su(p,ue)}),jo(p.eventQueue_,f,[])}}(p._repo,p._path,f,v.wrapCallback(function(){})),v.promise}function eu(p){return function(p,f){var v=function(p,f){var v=f._path,h=null;p.syncPointTree_.foreachOnPath(v,function(Q,ue){var Ee=Yr(Q,v);h=h||Ea(ue,Ee)});var g=p.syncPointTree_.get(v);g?h=h||Ea(g,un()):(g=new Wn,p.syncPointTree_=p.syncPointTree_.set(v,g));var d=null!=h,b=d?new pi(h,!0,!1):null;return function(p){return yn(p.viewCache_)}(dd(g,f,qi(p.pendingWriteTree_,f._path),d?b.getNode():F.EMPTY_NODE,d))}(p.serverSyncTree_,f);return null!=v?Promise.resolve(v):p.server_.get(f).then(function(h){var g=tt(h).withIndex(f._queryParams.getIndex()),d=Gs(p.serverSyncTree_,f._path,g);return Ja(p.eventQueue_,f._path,d),Promise.resolve(g)},function(h){return kl(p,"get for query "+(0,K.Pz)(f)+" failed: "+h),Promise.reject(new Error(h))})}((p=(0,K.m9)(p))._repo,p).then(function(f){return new Nl(f,new Kr(p._repo,p._path),p._queryParams.getIndex())})}var Ci=function(){function p(f){this.callbackContext=f}return p.prototype.respondsTo=function(f){return"value"===f},p.prototype.createEvent=function(f,v){var h=v._queryParams.getIndex();return new hc("value",this,new Nl(f.snapshotNode,new Kr(v._repo,v._path),h))},p.prototype.getEventRunner=function(f){var v=this;return"cancel"===f.getEventType()?function(){return v.callbackContext.onCancel(f.error)}:function(){return v.callbackContext.onValue(f.snapshot,null)}},p.prototype.createCancelEvent=function(f,v){return this.callbackContext.hasCancelCallback?new Wc(this,f,v):null},p.prototype.matches=function(f){return f instanceof p&&(!f.callbackContext||!this.callbackContext||f.callbackContext.matches(this.callbackContext))},p.prototype.hasAnyCallback=function(){return null!==this.callbackContext},p}(),si=function(){function p(f,v){this.eventType=f,this.callbackContext=v}return p.prototype.respondsTo=function(f){var v="children_added"===f?"child_added":f;return this.eventType===("children_removed"===v?"child_removed":v)},p.prototype.createCancelEvent=function(f,v){return this.callbackContext.hasCancelCallback?new Wc(this,f,v):null},p.prototype.createEvent=function(f,v){(0,K.hu)(null!=f.childName,"Child events should have a childName.");var h=$s(new Kr(v._repo,v._path),f.childName),g=v._queryParams.getIndex();return new hc(f.type,this,new Nl(f.snapshotNode,h,g),f.prevName)},p.prototype.getEventRunner=function(f){var v=this;return"cancel"===f.getEventType()?function(){return v.callbackContext.onCancel(f.error)}:function(){return v.callbackContext.onValue(f.snapshot,f.prevName)}},p.prototype.matches=function(f){return f instanceof p&&this.eventType===f.eventType&&(!this.callbackContext||!f.callbackContext||this.callbackContext.matches(f.callbackContext))},p.prototype.hasAnyCallback=function(){return!!this.callbackContext},p}();function Iu(p,f,v,h,g){var d;if("object"==typeof h&&(d=void 0,g=h),"function"==typeof h&&(d=h),g&&g.onlyOnce){var b=v,S=function(ue,Ee){Rl(p._repo,p,Q),b(ue,Ee)};S.userCallback=v.userCallback,S.context=v.context,v=S}var N=new Yc(v,d||void 0),Q="value"===f?new Ci(N):new si(f,N);return function(p,f,v){var h;h=".info"===Jn(f._path)?ah(p.infoSyncTree_,f,v):ah(p.serverSyncTree_,f,v),Ja(p.eventQueue_,f._path,h)}(p._repo,p,Q),function(){return Rl(p._repo,p,Q)}}function _c(p,f,v,h){return Iu(p,"value",f,v,h)}function $i(p,f,v,h){return Iu(p,"child_added",f,v,h)}function Ti(p,f,v,h){return Iu(p,"child_changed",f,v,h)}function Mo(p,f,v,h){return Iu(p,"child_moved",f,v,h)}function uo(p,f,v,h){return Iu(p,"child_removed",f,v,h)}function hs(p,f,v){var h=null,g=v?new Yc(v):null;"value"===f?h=new Ci(g):f&&(h=new si(f,g)),Rl(p._repo,p,h)}var ko=function(){},Ys=function(p){function f(v,h){var g=p.call(this)||this;return g._value=v,g._key=h,g}return(0,w.ZT)(f,p),f.prototype._apply=function(v){ds("endAt",this._value,v._path,!0);var h=Ms(v._queryParams,this._value,this._key);if(Xa(h),la(h),v._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xo(v._repo,v._path,h,v._orderByCalled)},f}(ko);function al(p,f){return Qa("endAt","key",f,!0),new Ys(p,f)}var Ou=function(p){function f(v,h){var g=p.call(this)||this;return g._value=v,g._key=h,g}return(0,w.ZT)(f,p),f.prototype._apply=function(v){ds("endBefore",this._value,v._path,!1);var h=function(p,f,v){var g;return p.index_===xi?("string"==typeof f&&(f=mr(f)),g=Ms(p,f,v)):g=Ms(p,f,null==v?et:mr(v)),g.endBeforeSet_=!0,g}(v._queryParams,this._value,this._key);if(Xa(h),la(h),v._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xo(v._repo,v._path,h,v._orderByCalled)},f}(ko);function Vh(p,f){return Qa("endBefore","key",f,!0),new Ou(p,f)}var vc=function(p){function f(v,h){var g=p.call(this)||this;return g._value=v,g._key=h,g}return(0,w.ZT)(f,p),f.prototype._apply=function(v){ds("startAt",this._value,v._path,!0);var h=_s(v._queryParams,this._value,this._key);if(Xa(h),la(h),v._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Xo(v._repo,v._path,h,v._orderByCalled)},f}(ko);function Td(p,f){return void 0===p&&(p=null),Qa("startAt","key",f,!0),new vc(p,f)}var es=function(p){function f(v,h){var g=p.call(this)||this;return g._value=v,g._key=h,g}return(0,w.ZT)(f,p),f.prototype._apply=function(v){ds("startAfter",this._value,v._path,!1);var h=function(p,f,v){var h;return p.index_===xi?("string"==typeof f&&(f=qr(f)),h=_s(p,f,v)):h=_s(p,f,null==v?_t:qr(v)),h.startAfterSet_=!0,h}(v._queryParams,this._value,this._key);if(Xa(h),la(h),v._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Xo(v._repo,v._path,h,v._orderByCalled)},f}(ko);function Wt(p,f){return Qa("startAfter","key",f,!0),new es(p,f)}var Kc=function(p){function f(v){var h=p.call(this)||this;return h._limit=v,h}return(0,w.ZT)(f,p),f.prototype._apply=function(v){if(v._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Xo(v._repo,v._path,function(p,f){var v=p.copy();return v.limitSet_=!0,v.limit_=f,v.viewFrom_="l",v}(v._queryParams,this._limit),v._orderByCalled)},f}(ko);function tu(p){if("number"!=typeof p||Math.floor(p)!==p||p<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Kc(p)}var Dd=function(p){function f(v){var h=p.call(this)||this;return h._limit=v,h}return(0,w.ZT)(f,p),f.prototype._apply=function(v){if(v._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Xo(v._repo,v._path,function(p,f){var v=p.copy();return v.limitSet_=!0,v.limit_=f,v.viewFrom_="r",v}(v._queryParams,this._limit),v._orderByCalled)},f}(ko);function Ll(p){if("number"!=typeof p||Math.floor(p)!==p||p<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Dd(p)}var ul=function(p){function f(v){var h=p.call(this)||this;return h._path=v,h}return(0,w.ZT)(f,p),f.prototype._apply=function(v){pc(v,"orderByChild");var h=new gn(this._path);if(jn(h))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var g=new j(h),d=zo(v._queryParams,g);return la(d),new Xo(v._repo,v._path,d,!0)},f}(ko);function Sd(p){if("$key"===p)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===p)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===p)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Cs("orderByChild","path",p,!1),new ul(p)}var Ks=function(p){function f(){return null!==p&&p.apply(this,arguments)||this}return(0,w.ZT)(f,p),f.prototype._apply=function(v){pc(v,"orderByKey");var h=zo(v._queryParams,xi);return la(h),new Xo(v._repo,v._path,h,!0)},f}(ko);function fh(){return new Ks}var Ad=function(p){function f(){return null!==p&&p.apply(this,arguments)||this}return(0,w.ZT)(f,p),f.prototype._apply=function(v){pc(v,"orderByPriority");var h=zo(v._queryParams,hr);return la(h),new Xo(v._repo,v._path,h,!0)},f}(ko);function ll(){return new Ad}var us=function(p){function f(){return null!==p&&p.apply(this,arguments)||this}return(0,w.ZT)(f,p),f.prototype._apply=function(v){pc(v,"orderByValue");var h=zo(v._queryParams,L);return la(h),new Xo(v._repo,v._path,h,!0)},f}(ko);function xu(){return new us}var cl=function(p){function f(v,h){var g=p.call(this)||this;return g._value=v,g._key=h,g}return(0,w.ZT)(f,p),f.prototype._apply=function(v){if(ds("equalTo",this._value,v._path,!1),v._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(v._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ys(this._value,this._key)._apply(new vc(this._value,this._key)._apply(v))},f}(ko);function yc(p,f){return Qa("equalTo","key",f,!0),new cl(p,f)}function Rs(p){for(var f,v,h=[],g=1;g<arguments.length;g++)h[g-1]=arguments[g];var d=(0,K.m9)(p);try{for(var b=(0,w.XA)(h),S=b.next();!S.done;S=b.next()){var N=S.value;d=N._apply(d)}}catch(Q){f={error:Q}}finally{try{S&&!S.done&&(v=b.return)&&v.call(b)}finally{if(f)throw f.error}}return d}(function(p){(0,K.hu)(!cu,"__referenceConstructor has already been defined"),cu=p})(Kr),function(p){(0,K.hu)(!hu,"__referenceConstructor has already been defined"),hu=p}(Kr);var Fo={},dl=!1;function Ru(p,f,v,h,g){var d=h||p.options.databaseURL;void 0===d&&(p.options.projectId||wn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),at("Using default host for project ",p.options.projectId),d=p.options.projectId+"-default-rtdb.firebaseio.com");var N,b=sl(d,g),S=b.repoInfo,Q=void 0;"undefined"!=typeof process&&(Q=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Q?(N=!0,S=(b=sl(d="http://"+Q+"?ns="+S.namespace,g)).repoInfo):N=!b.repoInfo.secure;var ue=g&&N?new Jt(Jt.OWNER):new mn(p.name,p.options,f);Hc("Invalid Firebase Database URL",b),jn(b.path)||wn("Database URL must point to the root of a Firebase Database (not including a child path).");var Ee=function(p,f,v,h){var g=Fo[f.name];g||(Fo[f.name]=g={});var d=g[p.toURLString()];return d&&wn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),d=new Ia(p,dl,v,h),g[p.toURLString()]=d,d}(S,p,ue,new Oi(p.name,v));return new Qc(Ee,p)}var Qc=function(){function p(f,v){this._repoInternal=f,this.app=v,this.type="database",this._instanceStarted=!1}return Object.defineProperty(p.prototype,"_repo",{get:function(){return this._instanceStarted||(function(p,f,v){if(p.stats_=Ut(p.repoInfo_),p.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)p.server_=new M(p.repoInfo_,function(h,g,d,b){Ao(p,h,g,d,b)},p.authTokenProvider_,p.appCheckProvider_),setTimeout(function(){return ac(p,!0)},0);else{if(null!=v){if("object"!=typeof v)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,K.Pz)(v)}catch(h){throw new Error("Invalid authOverride provided: "+h)}}p.persistentConnection_=new ci(p.repoInfo_,f,function(h,g,d,b){Ao(p,h,g,d,b)},function(h){ac(p,h)},function(h){!function(p,f){Bt(f,function(v,h){uc(p,v,h)})}(p,h)},p.authTokenProvider_,p.appCheckProvider_,v),p.server_=p.persistentConnection_}p.authTokenProvider_.addTokenChangeListener(function(h){p.server_.refreshAuthToken(h)}),p.appCheckProvider_.addTokenChangeListener(function(h){p.server_.refreshAppCheckToken(h.token)}),p.statsReporter_=function(p,f){var v=p.toString();return Dt[v]||(Dt[v]=f()),Dt[v]}(p.repoInfo_,function(){return new Ir(p.stats_,p.server_)}),p.infoData_=new V,p.infoSyncTree_=new sh({startListening:function(h,g,d,b){var S=[],N=p.infoData_.getNode(h._path);return N.isEmpty()||(S=Gs(p.infoSyncTree_,h._path,N),setTimeout(function(){b("ok")},0)),S},stopListening:function(){}}),uc(p,"connected",!1),p.serverSyncTree_=new sh({startListening:function(h,g,d,b){return p.server_.listen(h,d,g,function(S,N){var Q=b(S,N);jo(p.eventQueue_,h._path,Q)}),[]},stopListening:function(h,g){p.server_.unlisten(h,g)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Kr(this._repo,un())),this._rootInternal},enumerable:!1,configurable:!0}),p.prototype._delete=function(){return null!==this._rootInternal&&(function(p,f){var v=Fo[f];(!v||v[p.key]!==p)&&wn("Database "+f+"("+p.repoInfo_+") has already been deleted."),qc(p),delete v[p.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},p.prototype._checkNotDeleted=function(f){null===this._rootInternal&&wn("Cannot call "+f+" on a deleted database.")},p}();function ph(p){(p=(0,K.m9)(p))._checkNotDeleted("goOffline"),qc(p._repo)}function Fu(p){(p=(0,K.m9)(p))._checkNotDeleted("goOnline"),function(p){p.persistentConnection_&&p.persistentConnection_.resume(Qo)}(p._repo)}var Qs={".sv":"timestamp"},xd=function(){function p(f,v){this.committed=f,this.snapshot=v}return p.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},p}();function gh(p,f,v){var h;if(p=(0,K.m9)(p),zs("Reference.transaction",p._path),".length"===p.key||".keys"===p.key)throw"Reference.transaction failed: "+p.key+" is a read-only object.";var g=null===(h=null==v?void 0:v.applyLocally)||void 0===h||h,d=new K.BH,S=_c(p,function(){});return function(p,f,v,h,g,d){kl(p,"transaction on "+f);var b={path:f,update:v,onComplete:h,status:null,order:Ye(),applyLocally:d,retryCount:0,unwatcher:g,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},S=ws(p,f,void 0);b.currentInputSnapshot=S;var N=b.update(S.val());if(void 0===N)b.unwatcher(),b.currentOutputSnapshotRaw=null,b.currentOutputSnapshotResolved=null,b.onComplete&&b.onComplete(null,!1,b.currentInputSnapshot);else{xl("transaction failed: Data returned ",N,b.path),b.status=0;var Q=Ol(p.transactionQueueTree_,f),ue=bi(Q)||[];ue.push(b),mu(Q,ue);var Ee=void 0;"object"==typeof N&&null!==N&&(0,K.r3)(N,".priority")?(Ee=(0,K.DV)(N,".priority"),(0,K.hu)(Ps(Ee),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ee=(Ml(p.serverSyncTree_,f)||F.EMPTY_NODE).getPriority().val();var ht=Du(p),xt=tt(N,Ee),Dn=Xu(xt,S,ht);b.currentOutputSnapshotRaw=xt,b.currentOutputSnapshotResolved=Dn,b.currentWriteId=Pl(p);var bn=rc(p.serverSyncTree_,f,Dn,b.currentWriteId,b.applyLocally);jo(p.eventQueue_,f,bn),zi(p,p.transactionQueueTree_)}}(p._repo,p._path,f,function(N,Q,ue){var Ee=null;N?d.reject(N):(Ee=new Nl(ue,new Kr(p._repo,p._path),hr),d.resolve(new xd(Q,Ee)))},S,g),d.promise}var Js=function(){function p(f){this._delegate=f}return p.prototype.cancel=function(f){(0,K.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,K.Wj)("OnDisconnect.cancel","onComplete",f,!0);var v=this._delegate.cancel();return f&&v.then(function(){return f(null)},function(h){return f(h)}),v},p.prototype.remove=function(f){(0,K.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,K.Wj)("OnDisconnect.remove","onComplete",f,!0);var v=this._delegate.remove();return f&&v.then(function(){return f(null)},function(h){return f(h)}),v},p.prototype.set=function(f,v){(0,K.Dv)("OnDisconnect.set",1,2,arguments.length),(0,K.Wj)("OnDisconnect.set","onComplete",v,!0);var h=this._delegate.set(f);return v&&h.then(function(){return v(null)},function(g){return v(g)}),h},p.prototype.setWithPriority=function(f,v,h){(0,K.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,K.Wj)("OnDisconnect.setWithPriority","onComplete",h,!0);var g=this._delegate.setWithPriority(f,v);return h&&g.then(function(){return h(null)},function(d){return h(d)}),g},p.prototype.update=function(f,v){if((0,K.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(f)){for(var h={},g=0;g<f.length;++g)h[""+g]=f[g];f=h,Et("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,K.Wj)("OnDisconnect.update","onComplete",v,!0);var d=this._delegate.update(f);return v&&d.then(function(){return v(null)},function(b){return v(b)}),d},p}(),ks=function(){function p(f,v){this.committed=f,this.snapshot=v}return p.prototype.toJSON=function(){return(0,K.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},p}(),nu=function(){function p(f,v){this._database=f,this._delegate=v}return p.prototype.val=function(){return(0,K.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},p.prototype.exportVal=function(){return(0,K.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},p.prototype.toJSON=function(){return(0,K.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},p.prototype.exists=function(){return(0,K.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},p.prototype.child=function(f){return(0,K.Dv)("DataSnapshot.child",0,1,arguments.length),f=String(f),Cs("DataSnapshot.child","path",f,!1),new p(this._database,this._delegate.child(f))},p.prototype.hasChild=function(f){return(0,K.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Cs("DataSnapshot.hasChild","path",f,!1),this._delegate.hasChild(f)},p.prototype.getPriority=function(){return(0,K.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},p.prototype.forEach=function(f){var v=this;return(0,K.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,K.Wj)("DataSnapshot.forEach","action",f,!1),this._delegate.forEach(function(h){return f(new p(v._database,h))})},p.prototype.hasChildren=function(){return(0,K.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(p.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),p.prototype.numChildren=function(){return(0,K.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},p.prototype.getRef=function(){return(0,K.Dv)("DataSnapshot.ref",0,0,arguments.length),new ru(this._database,this._delegate.ref)},Object.defineProperty(p.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),p}(),Vl=function(){function p(f,v){this.database=f,this._delegate=v}return p.prototype.on=function(f,v,h,g){var b,d=this;(0,K.Dv)("Query.on",2,4,arguments.length),(0,K.Wj)("Query.on","callback",v,!1);var S=p.getCancelAndContextArgs_("Query.on",h,g),N=function(ue,Ee){v.call(S.context,new nu(d.database,ue),Ee)};N.userCallback=v,N.context=S.context;var Q=null===(b=S.cancel)||void 0===b?void 0:b.bind(S.context);switch(f){case"value":return _c(this._delegate,N,Q),v;case"child_added":return $i(this._delegate,N,Q),v;case"child_removed":return uo(this._delegate,N,Q),v;case"child_changed":return Ti(this._delegate,N,Q),v;case"child_moved":return Mo(this._delegate,N,Q),v;default:throw new Error((0,K.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},p.prototype.off=function(f,v,h){if((0,K.Dv)("Query.off",0,3,arguments.length),gd("Query.off",f,!0),(0,K.Wj)("Query.off","callback",v,!0),(0,K.lb)("Query.off","context",h,!0),v){var g=function(){};g.userCallback=v,g.context=h,hs(this._delegate,f,g)}else hs(this._delegate,f)},p.prototype.get=function(){var f=this;return eu(this._delegate).then(function(v){return new nu(f.database,v)})},p.prototype.once=function(f,v,h,g){var d=this;(0,K.Dv)("Query.once",1,4,arguments.length),(0,K.Wj)("Query.once","callback",v,!0);var b=p.getCancelAndContextArgs_("Query.once",h,g),S=new K.BH,N=function(ue,Ee){var Ge=new nu(d.database,ue);v&&v.call(b.context,Ge,Ee),S.resolve(Ge)};N.userCallback=v,N.context=b.context;var Q=function(ue){b.cancel&&b.cancel.call(b.context,ue),S.reject(ue)};switch(f){case"value":_c(this._delegate,N,Q,{onlyOnce:!0});break;case"child_added":$i(this._delegate,N,Q,{onlyOnce:!0});break;case"child_removed":uo(this._delegate,N,Q,{onlyOnce:!0});break;case"child_changed":Ti(this._delegate,N,Q,{onlyOnce:!0});break;case"child_moved":Mo(this._delegate,N,Q,{onlyOnce:!0});break;default:throw new Error((0,K.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return S.promise},p.prototype.limitToFirst=function(f){return(0,K.Dv)("Query.limitToFirst",1,1,arguments.length),new p(this.database,Rs(this._delegate,tu(f)))},p.prototype.limitToLast=function(f){return(0,K.Dv)("Query.limitToLast",1,1,arguments.length),new p(this.database,Rs(this._delegate,Ll(f)))},p.prototype.orderByChild=function(f){return(0,K.Dv)("Query.orderByChild",1,1,arguments.length),new p(this.database,Rs(this._delegate,Sd(f)))},p.prototype.orderByKey=function(){return(0,K.Dv)("Query.orderByKey",0,0,arguments.length),new p(this.database,Rs(this._delegate,fh()))},p.prototype.orderByPriority=function(){return(0,K.Dv)("Query.orderByPriority",0,0,arguments.length),new p(this.database,Rs(this._delegate,ll()))},p.prototype.orderByValue=function(){return(0,K.Dv)("Query.orderByValue",0,0,arguments.length),new p(this.database,Rs(this._delegate,xu()))},p.prototype.startAt=function(f,v){return void 0===f&&(f=null),(0,K.Dv)("Query.startAt",0,2,arguments.length),new p(this.database,Rs(this._delegate,Td(f,v)))},p.prototype.startAfter=function(f,v){return void 0===f&&(f=null),(0,K.Dv)("Query.startAfter",0,2,arguments.length),new p(this.database,Rs(this._delegate,Wt(f,v)))},p.prototype.endAt=function(f,v){return void 0===f&&(f=null),(0,K.Dv)("Query.endAt",0,2,arguments.length),new p(this.database,Rs(this._delegate,al(f,v)))},p.prototype.endBefore=function(f,v){return void 0===f&&(f=null),(0,K.Dv)("Query.endBefore",0,2,arguments.length),new p(this.database,Rs(this._delegate,Vh(f,v)))},p.prototype.equalTo=function(f,v){return(0,K.Dv)("Query.equalTo",1,2,arguments.length),new p(this.database,Rs(this._delegate,yc(f,v)))},p.prototype.toString=function(){return(0,K.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},p.prototype.toJSON=function(){return(0,K.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},p.prototype.isEqual=function(f){if((0,K.Dv)("Query.isEqual",1,1,arguments.length),!(f instanceof p)){var v="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(v)}return this._delegate.isEqual(f._delegate)},p.getCancelAndContextArgs_=function(f,v,h){var g={cancel:void 0,context:void 0};if(v&&h)g.cancel=v,(0,K.Wj)(f,"cancel",g.cancel,!0),g.context=h,(0,K.lb)(f,"context",g.context,!0);else if(v)if("object"==typeof v&&null!==v)g.context=v;else{if("function"!=typeof v)throw new Error((0,K.gK)(f,"cancelOrContext")+" must either be a cancel callback or a context object.");g.cancel=v}return g},Object.defineProperty(p.prototype,"ref",{get:function(){return new ru(this.database,new Kr(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),p}(),ru=function(p){function f(v,h){var g=p.call(this,v,new Xo(h._repo,h._path,new uu,!1))||this;return g.database=v,g._delegate=h,g}return(0,w.ZT)(f,p),f.prototype.getKey=function(){return(0,K.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},f.prototype.child=function(v){return(0,K.Dv)("Reference.child",1,1,arguments.length),"number"==typeof v&&(v=String(v)),new f(this.database,$s(this._delegate,v))},f.prototype.getParent=function(){(0,K.Dv)("Reference.parent",0,0,arguments.length);var v=this._delegate.parent;return v?new f(this.database,v):null},f.prototype.getRoot=function(){return(0,K.Dv)("Reference.root",0,0,arguments.length),new f(this.database,this._delegate.root)},f.prototype.set=function(v,h){(0,K.Dv)("Reference.set",1,2,arguments.length),(0,K.Wj)("Reference.set","onComplete",h,!0);var g=mc(this._delegate,v);return h&&g.then(function(){return h(null)},function(d){return h(d)}),g},f.prototype.update=function(v,h){if((0,K.Dv)("Reference.update",1,2,arguments.length),Array.isArray(v)){for(var g={},d=0;d<v.length;++d)g[""+d]=v[d];v=g,Et("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}zs("Reference.update",this._delegate._path),(0,K.Wj)("Reference.update","onComplete",h,!0);var b=Es(this._delegate,v);return h&&b.then(function(){return h(null)},function(S){return h(S)}),b},f.prototype.setWithPriority=function(v,h,g){(0,K.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,K.Wj)("Reference.setWithPriority","onComplete",g,!0);var d=Mu(this._delegate,v,h);return g&&d.then(function(){return g(null)},function(b){return g(b)}),d},f.prototype.remove=function(v){(0,K.Dv)("Reference.remove",0,1,arguments.length),(0,K.Wj)("Reference.remove","onComplete",v,!0);var h=Ed(this._delegate);return v&&h.then(function(){return v(null)},function(g){return v(g)}),h},f.prototype.transaction=function(v,h,g){var d=this;(0,K.Dv)("Reference.transaction",1,3,arguments.length),(0,K.Wj)("Reference.transaction","transactionUpdate",v,!1),(0,K.Wj)("Reference.transaction","onComplete",h,!0),_o("Reference.transaction","applyLocally",g,!0);var b=gh(this._delegate,v,{applyLocally:g}).then(function(S){return new ks(S.committed,new nu(d.database,S.snapshot))});return h&&b.then(function(S){return h(null,S.committed,S.snapshot)},function(S){return h(S,!1,null)}),b},f.prototype.setPriority=function(v,h){(0,K.Dv)("Reference.setPriority",1,2,arguments.length),(0,K.Wj)("Reference.setPriority","onComplete",h,!0);var g=ca(this._delegate,v);return h&&g.then(function(){return h(null)},function(d){return h(d)}),g},f.prototype.push=function(v,h){var g=this;(0,K.Dv)("Reference.push",0,2,arguments.length),(0,K.Wj)("Reference.push","onComplete",h,!0);var d=Ws(this._delegate,v),b=d.then(function(N){return new f(g.database,N)});h&&b.then(function(){return h(null)},function(N){return h(N)});var S=new f(this.database,d);return S.then=b.then.bind(b),S.catch=b.catch.bind(b,void 0),S},f.prototype.onDisconnect=function(){return zs("Reference.onDisconnect",this._delegate._path),new Js(new fc(this._delegate._repo,this._delegate._path))},Object.defineProperty(f.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),f}(Vl),xa=function(){function p(f,v){var h=this;this._delegate=f,this.app=v,this.INTERNAL={delete:function(){return h._delegate._delete()}}}return p.prototype.useEmulator=function(f,v,h){void 0===h&&(h={}),function(p,f,v,h){void 0===h&&(h={}),(p=(0,K.m9)(p))._checkNotDeleted("useEmulator"),p._instanceStarted&&wn("Cannot call useEmulator() after instance has already been initialized.");var g=p._repoInternal,d=void 0;if(g.repoInfo_.nodeAdmin)h.mockUserToken&&wn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new Jt(Jt.OWNER);else if(h.mockUserToken){var b="string"==typeof h.mockUserToken?h.mockUserToken:(0,K.Sg)(h.mockUserToken,p.app.options.projectId);d=new Jt(b)}!function(p,f,v,h){p.repoInfo_=new nn(f+":"+v,!1,p.repoInfo_.namespace,p.repoInfo_.webSocketOnly,p.repoInfo_.nodeAdmin,p.repoInfo_.persistenceKey,p.repoInfo_.includeNamespaceInQueryParams),h&&(p.authTokenProvider_=h)}(g,f,v,d)}(this._delegate,f,v,h)},p.prototype.ref=function(f){if((0,K.Dv)("database.ref",0,1,arguments.length),f instanceof ru){var v=gc(this._delegate,f.toString());return new ru(this,v)}return v=wd(this._delegate,f),new ru(this,v)},p.prototype.refFromURL=function(f){var v="database.refFromURL";(0,K.Dv)(v,1,1,arguments.length);var h=gc(this._delegate,f);return new ru(this,h)},p.prototype.goOffline=function(){return(0,K.Dv)("database.goOffline",0,0,arguments.length),ph(this._delegate)},p.prototype.goOnline=function(){return(0,K.Dv)("database.goOnline",0,0,arguments.length),Fu(this._delegate)},p.ServerValue={TIMESTAMP:Qs,increment:function(f){return function(p){return{".sv":{increment:p}}}(f)}},p}(),mh=Object.freeze({__proto__:null,forceLongPolling:function(){vn.forceDisallow(),Gi.forceAllow()},forceWebSockets:function(){Gi.forceDisallow()},isWebSocketsAvailable:function(){return vn.isAvailable()},setSecurityDebugCallback:function(p,f){p._delegate._repo.persistentConnection_.securityDebugCallback_=f},stats:function(p,f){!function(p,f){if(void 0===f&&(f=!1),"undefined"!=typeof console){var v;f?(p.statsListener_||(p.statsListener_=new gt(p.stats_)),v=p.statsListener_.get()):v=p.stats_.get();var h=Object.keys(v).reduce(function(g,d){return Math.max(d.length,g)},0);Bt(v,function(g,d){for(var b=g,S=g.length;S<h+2;S++)b+=" ";console.log(b+d)})}}(p._delegate._repo,f)},statsIncrementCounter:function(p,f){!function(p,f){p.stats_.incrementCounter(f),function(p,f){p.statsToReport_[f]=!0}(p.statsReporter_,f)}(p._delegate._repo,f)},dataUpdateCount:function(p){return p._delegate._repo.dataUpdateCount},interceptServerData:function(p,f){return function(p,f){p.interceptServerDataCallback_=f}(p._delegate._repo,f)},initStandalone:function(p){var f=p.app,v=p.url,g=p.customAuthImpl,d=p.namespace,b=p.nodeAdmin,S=void 0!==b&&b;_e(p.version);var N=new c.zt("auth-internal",new c.H0("database-standalone"));return N.setComponent(new c.wA("auth-internal",function(){return g},"PRIVATE")),{instance:new xa(Ru(f,N,void 0,v,S),f),namespace:d}}}),Jc=ci;ci.prototype.simpleListen=function(p,f){this.sendRequest("q",{p},f)},ci.prototype.echo=function(p,f){this.sendRequest("echo",{d:p},f)};var kd=Object.freeze({__proto__:null,DataConnection:Jc,RealTimeConnection:Be,hijackHash:function(p){var f=ci.prototype.put;return ci.prototype.put=function(v,h,g,d){void 0!==d&&(d=p()),f.call(this,v,h,g,d)},function(){ci.prototype.put=f}},ConnectionTarget:nn,queryIdentifier:function(p){return p._delegate._queryIdentifier},forceRestClient:function(p){!function(p){dl=p}(p)}}),Fd=xa.ServerValue;!function(p){_e(p.SDK_VERSION);var f=p.INTERNAL.registerComponent(new c.wA("database",function(v,h){var g=h.instanceIdentifier,d=v.getProvider("app").getImmediate(),b=v.getProvider("auth-internal"),S=v.getProvider("app-check-internal");return new xa(Ru(d,b,S,g),d)},"PUBLIC").setServiceProps({Reference:ru,Query:Vl,Database:xa,DataSnapshot:nu,enableLogging:Nt,INTERNAL:mh,ServerValue:Fd,TEST_ACCESS:kd}).setMultipleInstances(!0));p.registerVersion("@firebase/database","0.11.0"),(0,K.Yr)()&&(jt.exports=f)}(O.Z)},300:(jt,nt,Y)=>{"use strict";function O(){for(var le=0,pe=0,De=arguments.length;pe<De;pe++)le+=arguments[pe].length;var Re=Array(le),Ye=0;for(pe=0;pe<De;pe++)for(var ee=arguments[pe],ze=0,Ct=ee.length;ze<Ct;ze++,Ye++)Re[Ye]=ee[ze];return Re}Y.d(nt,{in:()=>w,Yd:()=>_e,Ub:()=>re,Am:()=>Ce});var c,K=[],w=(()=>{return(le=w||(w={}))[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",w;var le})(),Ue={debug:w.DEBUG,verbose:w.VERBOSE,info:w.INFO,warn:w.WARN,error:w.ERROR,silent:w.SILENT},be=w.INFO,xe=((c={})[w.DEBUG]="log",c[w.VERBOSE]="log",c[w.INFO]="info",c[w.WARN]="warn",c[w.ERROR]="error",c),fe=function(le,pe){for(var De=[],Re=2;Re<arguments.length;Re++)De[Re-2]=arguments[Re];if(!(pe<le.logLevel)){var Ye=(new Date).toISOString(),ee=xe[pe];if(!ee)throw new Error("Attempted to log a message with an invalid logType (value: "+pe+")");console[ee].apply(console,O(["["+Ye+"]  "+le.name+":"],De))}},_e=function(){function le(pe){this.name=pe,this._logLevel=be,this._logHandler=fe,this._userLogHandler=null,K.push(this)}return Object.defineProperty(le.prototype,"logLevel",{get:function(){return this._logLevel},set:function(pe){if(!(pe in w))throw new TypeError('Invalid value "'+pe+'" assigned to `logLevel`');this._logLevel=pe},enumerable:!1,configurable:!0}),le.prototype.setLogLevel=function(pe){this._logLevel="string"==typeof pe?Ue[pe]:pe},Object.defineProperty(le.prototype,"logHandler",{get:function(){return this._logHandler},set:function(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe},enumerable:!1,configurable:!0}),Object.defineProperty(le.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(pe){this._userLogHandler=pe},enumerable:!1,configurable:!0}),le.prototype.debug=function(){for(var pe=[],De=0;De<arguments.length;De++)pe[De]=arguments[De];this._userLogHandler&&this._userLogHandler.apply(this,O([this,w.DEBUG],pe)),this._logHandler.apply(this,O([this,w.DEBUG],pe))},le.prototype.log=function(){for(var pe=[],De=0;De<arguments.length;De++)pe[De]=arguments[De];this._userLogHandler&&this._userLogHandler.apply(this,O([this,w.VERBOSE],pe)),this._logHandler.apply(this,O([this,w.VERBOSE],pe))},le.prototype.info=function(){for(var pe=[],De=0;De<arguments.length;De++)pe[De]=arguments[De];this._userLogHandler&&this._userLogHandler.apply(this,O([this,w.INFO],pe)),this._logHandler.apply(this,O([this,w.INFO],pe))},le.prototype.warn=function(){for(var pe=[],De=0;De<arguments.length;De++)pe[De]=arguments[De];this._userLogHandler&&this._userLogHandler.apply(this,O([this,w.WARN],pe)),this._logHandler.apply(this,O([this,w.WARN],pe))},le.prototype.error=function(){for(var pe=[],De=0;De<arguments.length;De++)pe[De]=arguments[De];this._userLogHandler&&this._userLogHandler.apply(this,O([this,w.ERROR],pe)),this._logHandler.apply(this,O([this,w.ERROR],pe))},le}();function re(le){K.forEach(function(pe){pe.setLogLevel(le)})}function Ce(le,pe){for(var De=function(ze){var Ct=null;pe&&pe.level&&(Ct=Ue[pe.level]),ze.userLogHandler=null===le?null:function(On,Nt){for(var at=[],zt=2;zt<arguments.length;zt++)at[zt-2]=arguments[zt];var It=at.map(function(wn){if(null==wn)return null;if("string"==typeof wn)return wn;if("number"==typeof wn||"boolean"==typeof wn)return wn.toString();if(wn instanceof Error)return wn.message;try{return JSON.stringify(wn)}catch(Et){return null}}).filter(function(wn){return wn}).join(" ");Nt>=(null!=Ct?Ct:On.logLevel)&&le({level:w[Nt].toLowerCase(),message:It,args:at,type:On.name})}},Re=0,Ye=K;Re<Ye.length;Re++)De(Ye[Re])}},4685:(jt,nt,Y)=>{"use strict";Y.d(nt,{BH:()=>De,LL:()=>tn,ZR:()=>st,gQ:()=>Zn,hu:()=>K,g5:()=>w,US:()=>xe,h$:()=>fe,r3:()=>ur,Sg:()=>Re,ne:()=>Un,p$:()=>Ce,ZB:()=>le,gK:()=>He,m9:()=>Gt,z$:()=>Ye,GJ:()=>Cn,jU:()=>Ct,ru:()=>On,d:()=>at,xb:()=>Gn,w1:()=>zt,uI:()=>ee,UG:()=>ze,Yr:()=>wn,b$:()=>Nt,G6:()=>Et,Mn:()=>It,w9:()=>Fn,cI:()=>on,UI:()=>tr,xO:()=>Oi,DV:()=>zn,ug:()=>At,dS:()=>nn,Pz:()=>Bt,Dv:()=>Tt,Wj:()=>Mt,lb:()=>Pt});var O=Y(4762),K=function(Se,Ie){if(!Se)throw w(Ie)},w=function(Se){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Se)},Ue=function(Se){for(var Ie=[],$e=0,Je=0;Je<Se.length;Je++){var Xe=Se.charCodeAt(Je);Xe<128?Ie[$e++]=Xe:Xe<2048?(Ie[$e++]=Xe>>6|192,Ie[$e++]=63&Xe|128):55296==(64512&Xe)&&Je+1<Se.length&&56320==(64512&Se.charCodeAt(Je+1))?(Xe=65536+((1023&Xe)<<10)+(1023&Se.charCodeAt(++Je)),Ie[$e++]=Xe>>18|240,Ie[$e++]=Xe>>12&63|128,Ie[$e++]=Xe>>6&63|128,Ie[$e++]=63&Xe|128):(Ie[$e++]=Xe>>12|224,Ie[$e++]=Xe>>6&63|128,Ie[$e++]=63&Xe|128)}return Ie},xe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(Se,Ie){if(!Array.isArray(Se))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var $e=Ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,Je=[],Xe=0;Xe<Se.length;Xe+=3){var Zt=Se[Xe],_n=Xe+1<Se.length,or=_n?Se[Xe+1]:0,Bn=Xe+2<Se.length,Vn=Bn?Se[Xe+2]:0,Xr=(15&or)<<2|Vn>>6,Dr=63&Vn;Bn||(Dr=64,_n||(Xr=64)),Je.push($e[Zt>>2],$e[(3&Zt)<<4|or>>4],$e[Xr],$e[Dr])}return Je.join("")},encodeString:function(Se,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?btoa(Se):this.encodeByteArray(Ue(Se),Ie)},decodeString:function(Se,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?atob(Se):function(Se){for(var Ie=[],$e=0,Je=0;$e<Se.length;){var Xe=Se[$e++];if(Xe<128)Ie[Je++]=String.fromCharCode(Xe);else if(Xe>191&&Xe<224){var Zt=Se[$e++];Ie[Je++]=String.fromCharCode((31&Xe)<<6|63&Zt)}else if(Xe>239&&Xe<365){var Bn=((7&Xe)<<18|(63&(Zt=Se[$e++]))<<12|(63&(_n=Se[$e++]))<<6|63&Se[$e++])-65536;Ie[Je++]=String.fromCharCode(55296+(Bn>>10)),Ie[Je++]=String.fromCharCode(56320+(1023&Bn))}else{Zt=Se[$e++];var _n=Se[$e++];Ie[Je++]=String.fromCharCode((15&Xe)<<12|(63&Zt)<<6|63&_n)}}return Ie.join("")}(this.decodeStringToByteArray(Se,Ie))},decodeStringToByteArray:function(Se,Ie){this.init_();for(var $e=Ie?this.charToByteMapWebSafe_:this.charToByteMap_,Je=[],Xe=0;Xe<Se.length;){var Zt=$e[Se.charAt(Xe++)],or=Xe<Se.length?$e[Se.charAt(Xe)]:0,Vn=++Xe<Se.length?$e[Se.charAt(Xe)]:64,Hr=++Xe<Se.length?$e[Se.charAt(Xe)]:64;if(++Xe,null==Zt||null==or||null==Vn||null==Hr)throw Error();Je.push(Zt<<2|or>>4),64!==Vn&&(Je.push(or<<4&240|Vn>>2),64!==Hr&&Je.push(Vn<<6&192|Hr))}return Je},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var Se=0;Se<this.ENCODED_VALS.length;Se++)this.byteToCharMap_[Se]=this.ENCODED_VALS.charAt(Se),this.charToByteMap_[this.byteToCharMap_[Se]]=Se,this.byteToCharMapWebSafe_[Se]=this.ENCODED_VALS_WEBSAFE.charAt(Se),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Se]]=Se,Se>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Se)]=Se,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Se)]=Se)}}},fe=function(Se){var Ie=Ue(Se);return xe.encodeByteArray(Ie,!0)},_e=function(Se){return fe(Se).replace(/\./g,"")},re=function(Se){try{return xe.decodeString(Se,!0)}catch(Ie){console.error("base64Decode failed: ",Ie)}return null};function Ce(Se){return le(void 0,Se)}function le(Se,Ie){if(!(Ie instanceof Object))return Ie;switch(Ie.constructor){case Date:return new Date(Ie.getTime());case Object:void 0===Se&&(Se={});break;case Array:Se=[];break;default:return Ie}for(var Je in Ie)!Ie.hasOwnProperty(Je)||!pe(Je)||(Se[Je]=le(Se[Je],Ie[Je]));return Se}function pe(Se){return"__proto__"!==Se}var De=function(){function Se(){var Ie=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function($e,Je){Ie.resolve=$e,Ie.reject=Je})}return Se.prototype.wrapCallback=function(Ie){var $e=this;return function(Je,Xe){Je?$e.reject(Je):$e.resolve(Xe),"function"==typeof Ie&&($e.promise.catch(function(){}),1===Ie.length?Ie(Je):Ie(Je,Xe))}},Se}();function Re(Se,Ie){if(Se.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var Je=Ie||"demo-project",Xe=Se.iat||0,Zt=Se.sub||Se.user_id;if(!Zt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var _n=(0,O.pi)({iss:"https://securetoken.google.com/"+Je,aud:Je,iat:Xe,exp:Xe+3600,auth_time:Xe,sub:Zt,user_id:Zt,firebase:{sign_in_provider:"custom",identities:{}}},Se);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(_n)),""].join(".")}function Ye(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ee(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function ze(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Se){return!1}}function Ct(){return"object"==typeof self&&self.self===self}function On(){var Se="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Se&&void 0!==Se.id}function Nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function at(){return Ye().indexOf("Electron/")>=0}function zt(){var Se=Ye();return Se.indexOf("MSIE ")>=0||Se.indexOf("Trident/")>=0}function It(){return Ye().indexOf("MSAppHost/")>=0}function wn(){return!1}function Et(){return!ze()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var st=function(Se){function Ie($e,Je,Xe){var Zt=Se.call(this,Je)||this;return Zt.code=$e,Zt.customData=Xe,Zt.name="FirebaseError",Object.setPrototypeOf(Zt,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(Zt,tn.prototype.create),Zt}return(0,O.ZT)(Ie,Se),Ie}(Error),tn=function(){function Se(Ie,$e,Je){this.service=Ie,this.serviceName=$e,this.errors=Je}return Se.prototype.create=function(Ie){for(var $e=[],Je=1;Je<arguments.length;Je++)$e[Je-1]=arguments[Je];var Xe=$e[0]||{},Zt=this.service+"/"+Ie,_n=this.errors[Ie],or=_n?an(_n,Xe):"Error",Bn=this.serviceName+": "+or+" ("+Zt+").",Vn=new st(Zt,Bn,Xe);return Vn},Se}();function an(Se,Ie){return Se.replace(Sn,function($e,Je){var Xe=Ie[Je];return null!=Xe?String(Xe):"<"+Je+"?>"})}var Sn=/\{\$([^}]+)}/g;function on(Se){return JSON.parse(Se)}function Bt(Se){return JSON.stringify(Se)}var kt=function(Se){var Ie={},$e={},Je={},Xe="";try{var Zt=Se.split(".");Ie=on(re(Zt[0])||""),$e=on(re(Zt[1])||""),Xe=Zt[2],Je=$e.d||{},delete $e.d}catch(_n){}return{header:Ie,claims:$e,data:Je,signature:Xe}},Fn=function(Se){var $e=kt(Se).claims;return!!$e&&"object"==typeof $e&&$e.hasOwnProperty("iat")},Cn=function(Se){var Ie=kt(Se).claims;return"object"==typeof Ie&&!0===Ie.admin};function ur(Se,Ie){return Object.prototype.hasOwnProperty.call(Se,Ie)}function zn(Se,Ie){if(Object.prototype.hasOwnProperty.call(Se,Ie))return Se[Ie]}function Gn(Se){for(var Ie in Se)if(Object.prototype.hasOwnProperty.call(Se,Ie))return!1;return!0}function tr(Se,Ie,$e){var Je={};for(var Xe in Se)Object.prototype.hasOwnProperty.call(Se,Xe)&&(Je[Xe]=Ie.call($e,Se[Xe],Xe,Se));return Je}function Oi(Se){for(var Ie=[],$e=function(Bn,Vn){Array.isArray(Vn)?Vn.forEach(function(ai){Ie.push(encodeURIComponent(Bn)+"="+encodeURIComponent(ai))}):Ie.push(encodeURIComponent(Bn)+"="+encodeURIComponent(Vn))},Je=0,Xe=Object.entries(Se);Je<Xe.length;Je++){var Zt=Xe[Je];$e(Zt[0],Zt[1])}return Ie.length?"&"+Ie.join("&"):""}var Zn=function(){function Se(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var Ie=1;Ie<this.blockSize;++Ie)this.pad_[Ie]=0;this.reset()}return Se.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Se.prototype.compress_=function(Ie,$e){$e||($e=0);var Je=this.W_;if("string"==typeof Ie)for(var Xe=0;Xe<16;Xe++)Je[Xe]=Ie.charCodeAt($e)<<24|Ie.charCodeAt($e+1)<<16|Ie.charCodeAt($e+2)<<8|Ie.charCodeAt($e+3),$e+=4;else for(Xe=0;Xe<16;Xe++)Je[Xe]=Ie[$e]<<24|Ie[$e+1]<<16|Ie[$e+2]<<8|Ie[$e+3],$e+=4;for(Xe=16;Xe<80;Xe++)Je[Xe]=4294967295&((Zt=Je[Xe-3]^Je[Xe-8]^Je[Xe-14]^Je[Xe-16])<<1|Zt>>>31);var Hr,Xr,_n=this.chain_[0],or=this.chain_[1],Bn=this.chain_[2],Vn=this.chain_[3],ai=this.chain_[4];for(Xe=0;Xe<80;Xe++){Xe<40?Xe<20?(Hr=Vn^or&(Bn^Vn),Xr=1518500249):(Hr=or^Bn^Vn,Xr=1859775393):Xe<60?(Hr=or&Bn|Vn&(or|Bn),Xr=2400959708):(Hr=or^Bn^Vn,Xr=3395469782);var Zt=(_n<<5|_n>>>27)+Hr+ai+Xr+Je[Xe]&4294967295;ai=Vn,Vn=Bn,Bn=4294967295&(or<<30|or>>>2),or=_n,_n=Zt}this.chain_[0]=this.chain_[0]+_n&4294967295,this.chain_[1]=this.chain_[1]+or&4294967295,this.chain_[2]=this.chain_[2]+Bn&4294967295,this.chain_[3]=this.chain_[3]+Vn&4294967295,this.chain_[4]=this.chain_[4]+ai&4294967295},Se.prototype.update=function(Ie,$e){if(null!=Ie){void 0===$e&&($e=Ie.length);for(var Je=$e-this.blockSize,Xe=0,Zt=this.buf_,_n=this.inbuf_;Xe<$e;){if(0===_n)for(;Xe<=Je;)this.compress_(Ie,Xe),Xe+=this.blockSize;if("string"==typeof Ie){for(;Xe<$e;)if(Zt[_n]=Ie.charCodeAt(Xe),++Xe,++_n===this.blockSize){this.compress_(Zt),_n=0;break}}else for(;Xe<$e;)if(Zt[_n]=Ie[Xe],++Xe,++_n===this.blockSize){this.compress_(Zt),_n=0;break}}this.inbuf_=_n,this.total_+=$e}},Se.prototype.digest=function(){var Ie=[],$e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var Je=this.blockSize-1;Je>=56;Je--)this.buf_[Je]=255&$e,$e/=256;this.compress_(this.buf_);var Xe=0;for(Je=0;Je<5;Je++)for(var Zt=24;Zt>=0;Zt-=8)Ie[Xe]=this.chain_[Je]>>Zt&255,++Xe;return Ie},Se}();function Un(Se,Ie){var $e=new Kt(Se,Ie);return $e.subscribe.bind($e)}var Kt=function(){function Se(Ie,$e){var Je=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$e,this.task.then(function(){Ie(Je)}).catch(function(Xe){Je.error(Xe)})}return Se.prototype.next=function(Ie){this.forEachObserver(function($e){$e.next(Ie)})},Se.prototype.error=function(Ie){this.forEachObserver(function($e){$e.error(Ie)}),this.close(Ie)},Se.prototype.complete=function(){this.forEachObserver(function(Ie){Ie.complete()}),this.close()},Se.prototype.subscribe=function(Ie,$e,Je){var Zt,Xe=this;if(void 0===Ie&&void 0===$e&&void 0===Je)throw new Error("Missing Observer.");void 0===(Zt=function(Se,Ie){if("object"!=typeof Se||null===Se)return!1;for(var $e=0,Je=["next","error","complete"];$e<Je.length;$e++){var Xe=Je[$e];if(Xe in Se&&"function"==typeof Se[Xe])return!0}return!1}(Ie)?Ie:{next:Ie,error:$e,complete:Je}).next&&(Zt.next=Kn),void 0===Zt.error&&(Zt.error=Kn),void 0===Zt.complete&&(Zt.complete=Kn);var _n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{Xe.finalError?Zt.error(Xe.finalError):Zt.complete()}catch(or){}}),this.observers.push(Zt),_n},Se.prototype.unsubscribeOne=function(Ie){void 0===this.observers||void 0===this.observers[Ie]||(delete this.observers[Ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Se.prototype.forEachObserver=function(Ie){if(!this.finalized)for(var $e=0;$e<this.observers.length;$e++)this.sendOne($e,Ie)},Se.prototype.sendOne=function(Ie,$e){var Je=this;this.task.then(function(){if(void 0!==Je.observers&&void 0!==Je.observers[Ie])try{$e(Je.observers[Ie])}catch(Xe){"undefined"!=typeof console&&console.error&&console.error(Xe)}})},Se.prototype.close=function(Ie){var $e=this;this.finalized||(this.finalized=!0,void 0!==Ie&&(this.finalError=Ie),this.task.then(function(){$e.observers=void 0,$e.onNoObservers=void 0}))},Se}();function Kn(){}var Tt=function(Se,Ie,$e,Je){var Xe;if(Je<Ie?Xe="at least "+Ie:Je>$e&&(Xe=0===$e?"none":"no more than "+$e),Xe)throw new Error(Se+" failed: Was called with "+Je+(1===Je?" argument.":" arguments.")+" Expects "+Xe+".")};function He(Se,Ie){return Se+" failed: "+Ie+" argument "}function Mt(Se,Ie,$e,Je){if((!Je||$e)&&"function"!=typeof $e)throw new Error(He(Se,Ie)+"must be a valid function.")}function Pt(Se,Ie,$e,Je){if((!Je||$e)&&("object"!=typeof $e||null===$e))throw new Error(He(Se,Ie)+"must be a valid context object.")}var nn=function(Se){for(var Ie=[],$e=0,Je=0;Je<Se.length;Je++){var Xe=Se.charCodeAt(Je);if(Xe>=55296&&Xe<=56319){var Zt=Xe-55296;Je++,K(Je<Se.length,"Surrogate pair missing trail surrogate."),Xe=65536+(Zt<<10)+(Se.charCodeAt(Je)-56320)}Xe<128?Ie[$e++]=Xe:Xe<2048?(Ie[$e++]=Xe>>6|192,Ie[$e++]=63&Xe|128):Xe<65536?(Ie[$e++]=Xe>>12|224,Ie[$e++]=Xe>>6&63|128,Ie[$e++]=63&Xe|128):(Ie[$e++]=Xe>>18|240,Ie[$e++]=Xe>>12&63|128,Ie[$e++]=Xe>>6&63|128,Ie[$e++]=63&Xe|128)}return Ie},At=function(Se){for(var Ie=0,$e=0;$e<Se.length;$e++){var Je=Se.charCodeAt($e);Je<128?Ie++:Je<2048?Ie+=2:Je>=55296&&Je<=56319?(Ie+=4,$e++):Ie+=3}return Ie};function Gt(Se){return Se&&Se._delegate?Se._delegate:Se}},2329:(jt,nt,Y)=>{"use strict";Y.d(nt,{Z:()=>O.Z});var O=Y(9759),K="8.10.0";O.Z.registerVersion("firebase",K,"app"),O.Z.SDK_VERSION=K},6215:(jt,nt,Y)=>{"use strict";Y.d(nt,{X:()=>K});var O=Y(9765),c=Y(7971);class K extends O.xQ{constructor(Ue){super(),this._value=Ue}get value(){return this.getValue()}_subscribe(Ue){const be=super._subscribe(Ue);return be&&!be.closed&&Ue.next(this._value),be}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new c.N;return this._value}next(Ue){super.next(this._value=Ue)}}},7574:(jt,nt,Y)=>{"use strict";Y.d(nt,{y:()=>Ce});var O=Y(7393),K=Y(9181),w=Y(6490),be=Y(6554),xe=Y(4487);var re=Y(2494);let Ce=(()=>{class pe{constructor(Re){this._isScalar=!1,Re&&(this._subscribe=Re)}lift(Re){const Ye=new pe;return Ye.source=this,Ye.operator=Re,Ye}subscribe(Re,Ye,ee){const{operator:ze}=this,Ct=function(pe,De,Re){if(pe){if(pe instanceof O.L)return pe;if(pe[K.b])return pe[K.b]()}return pe||De||Re?new O.L(pe,De,Re):new O.L(w.c)}(Re,Ye,ee);if(Ct.add(ze?ze.call(Ct,this.source):this.source||re.v.useDeprecatedSynchronousErrorHandling&&!Ct.syncErrorThrowable?this._subscribe(Ct):this._trySubscribe(Ct)),re.v.useDeprecatedSynchronousErrorHandling&&Ct.syncErrorThrowable&&(Ct.syncErrorThrowable=!1,Ct.syncErrorThrown))throw Ct.syncErrorValue;return Ct}_trySubscribe(Re){try{return this._subscribe(Re)}catch(Ye){re.v.useDeprecatedSynchronousErrorHandling&&(Re.syncErrorThrown=!0,Re.syncErrorValue=Ye),function(pe){for(;pe;){const{closed:De,destination:Re,isStopped:Ye}=pe;if(De||Ye)return!1;pe=Re&&Re instanceof O.L?Re:null}return!0}(Re)?Re.error(Ye):console.warn(Ye)}}forEach(Re,Ye){return new(Ye=le(Ye))((ee,ze)=>{let Ct;Ct=this.subscribe(On=>{try{Re(On)}catch(Nt){ze(Nt),Ct&&Ct.unsubscribe()}},ze,ee)})}_subscribe(Re){const{source:Ye}=this;return Ye&&Ye.subscribe(Re)}[be.L](){return this}pipe(...Re){return 0===Re.length?this:function(pe){return 0===pe.length?xe.y:1===pe.length?pe[0]:function(Re){return pe.reduce((Ye,ee)=>ee(Ye),Re)}}(Re)(this)}toPromise(Re){return new(Re=le(Re))((Ye,ee)=>{let ze;this.subscribe(Ct=>ze=Ct,Ct=>ee(Ct),()=>Ye(ze))})}}return pe.create=De=>new pe(De),pe})();function le(pe){if(pe||(pe=re.v.Promise||Promise),!pe)throw new Error("no Promise impl found");return pe}},6490:(jt,nt,Y)=>{"use strict";Y.d(nt,{c:()=>K});var O=Y(2494),c=Y(4449);const K={closed:!0,next(w){},error(w){if(O.v.useDeprecatedSynchronousErrorHandling)throw w;(0,c.z)(w)},complete(){}}},5197:(jt,nt,Y)=>{"use strict";Y.d(nt,{L:()=>c});var O=Y(7393);class c extends O.L{notifyNext(w,Ue,be,xe,fe){this.destination.next(Ue)}notifyError(w,Ue){this.destination.error(w)}notifyComplete(w){this.destination.complete()}}},9765:(jt,nt,Y)=>{"use strict";Y.d(nt,{Yc:()=>xe,xQ:()=>fe});var O=Y(7574),c=Y(7393),K=Y(5319),w=Y(7971),Ue=Y(8858),be=Y(9181);class xe extends c.L{constructor(Ce){super(Ce),this.destination=Ce}}let fe=(()=>{class re extends O.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[be.b](){return new xe(this)}lift(le){const pe=new _e(this,this);return pe.operator=le,pe}next(le){if(this.closed)throw new w.N;if(!this.isStopped){const{observers:pe}=this,De=pe.length,Re=pe.slice();for(let Ye=0;Ye<De;Ye++)Re[Ye].next(le)}}error(le){if(this.closed)throw new w.N;this.hasError=!0,this.thrownError=le,this.isStopped=!0;const{observers:pe}=this,De=pe.length,Re=pe.slice();for(let Ye=0;Ye<De;Ye++)Re[Ye].error(le);this.observers.length=0}complete(){if(this.closed)throw new w.N;this.isStopped=!0;const{observers:le}=this,pe=le.length,De=le.slice();for(let Re=0;Re<pe;Re++)De[Re].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(le){if(this.closed)throw new w.N;return super._trySubscribe(le)}_subscribe(le){if(this.closed)throw new w.N;return this.hasError?(le.error(this.thrownError),K.w.EMPTY):this.isStopped?(le.complete(),K.w.EMPTY):(this.observers.push(le),new Ue.W(this,le))}asObservable(){const le=new O.y;return le.source=this,le}}return re.create=(Ce,le)=>new _e(Ce,le),re})();class _e extends fe{constructor(Ce,le){super(),this.destination=Ce,this.source=le}next(Ce){const{destination:le}=this;le&&le.next&&le.next(Ce)}error(Ce){const{destination:le}=this;le&&le.error&&this.destination.error(Ce)}complete(){const{destination:Ce}=this;Ce&&Ce.complete&&this.destination.complete()}_subscribe(Ce){const{source:le}=this;return le?this.source.subscribe(Ce):K.w.EMPTY}}},8858:(jt,nt,Y)=>{"use strict";Y.d(nt,{W:()=>c});var O=Y(5319);class c extends O.w{constructor(w,Ue){super(),this.subject=w,this.subscriber=Ue,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const w=this.subject,Ue=w.observers;if(this.subject=null,!Ue||0===Ue.length||w.isStopped||w.closed)return;const be=Ue.indexOf(this.subscriber);-1!==be&&Ue.splice(be,1)}}},7393:(jt,nt,Y)=>{"use strict";Y.d(nt,{L:()=>xe});var O=Y(9105),c=Y(6490),K=Y(5319),w=Y(9181),Ue=Y(2494),be=Y(4449);class xe extends K.w{constructor(re,Ce,le){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=c.c;break;case 1:if(!re){this.destination=c.c;break}if("object"==typeof re){re instanceof xe?(this.syncErrorThrowable=re.syncErrorThrowable,this.destination=re,re.add(this)):(this.syncErrorThrowable=!0,this.destination=new fe(this,re));break}default:this.syncErrorThrowable=!0,this.destination=new fe(this,re,Ce,le)}}[w.b](){return this}static create(re,Ce,le){const pe=new xe(re,Ce,le);return pe.syncErrorThrowable=!1,pe}next(re){this.isStopped||this._next(re)}error(re){this.isStopped||(this.isStopped=!0,this._error(re))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(re){this.destination.next(re)}_error(re){this.destination.error(re),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:re}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=re,this}}class fe extends xe{constructor(re,Ce,le,pe){super(),this._parentSubscriber=re;let De,Re=this;(0,O.m)(Ce)?De=Ce:Ce&&(De=Ce.next,le=Ce.error,pe=Ce.complete,Ce!==c.c&&(Re=Object.create(Ce),(0,O.m)(Re.unsubscribe)&&this.add(Re.unsubscribe.bind(Re)),Re.unsubscribe=this.unsubscribe.bind(this))),this._context=Re,this._next=De,this._error=le,this._complete=pe}next(re){if(!this.isStopped&&this._next){const{_parentSubscriber:Ce}=this;Ue.v.useDeprecatedSynchronousErrorHandling&&Ce.syncErrorThrowable?this.__tryOrSetError(Ce,this._next,re)&&this.unsubscribe():this.__tryOrUnsub(this._next,re)}}error(re){if(!this.isStopped){const{_parentSubscriber:Ce}=this,{useDeprecatedSynchronousErrorHandling:le}=Ue.v;if(this._error)le&&Ce.syncErrorThrowable?(this.__tryOrSetError(Ce,this._error,re),this.unsubscribe()):(this.__tryOrUnsub(this._error,re),this.unsubscribe());else if(Ce.syncErrorThrowable)le?(Ce.syncErrorValue=re,Ce.syncErrorThrown=!0):(0,be.z)(re),this.unsubscribe();else{if(this.unsubscribe(),le)throw re;(0,be.z)(re)}}}complete(){if(!this.isStopped){const{_parentSubscriber:re}=this;if(this._complete){const Ce=()=>this._complete.call(this._context);Ue.v.useDeprecatedSynchronousErrorHandling&&re.syncErrorThrowable?(this.__tryOrSetError(re,Ce),this.unsubscribe()):(this.__tryOrUnsub(Ce),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(re,Ce){try{re.call(this._context,Ce)}catch(le){if(this.unsubscribe(),Ue.v.useDeprecatedSynchronousErrorHandling)throw le;(0,be.z)(le)}}__tryOrSetError(re,Ce,le){if(!Ue.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Ce.call(this._context,le)}catch(pe){return Ue.v.useDeprecatedSynchronousErrorHandling?(re.syncErrorValue=pe,re.syncErrorThrown=!0,!0):((0,be.z)(pe),!0)}return!1}_unsubscribe(){const{_parentSubscriber:re}=this;this._context=null,this._parentSubscriber=null,re.unsubscribe()}}},5319:(jt,nt,Y)=>{"use strict";Y.d(nt,{w:()=>be});var O=Y(9796),c=Y(1555),K=Y(9105);const Ue=(()=>{function fe(_e){return Error.call(this),this.message=_e?`${_e.length} errors occurred during unsubscription:\n${_e.map((re,Ce)=>`${Ce+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=_e,this}return fe.prototype=Object.create(Error.prototype),fe})();class be{constructor(_e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,_e&&(this._ctorUnsubscribe=!0,this._unsubscribe=_e)}unsubscribe(){let _e;if(this.closed)return;let{_parentOrParents:re,_ctorUnsubscribe:Ce,_unsubscribe:le,_subscriptions:pe}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,re instanceof be)re.remove(this);else if(null!==re)for(let De=0;De<re.length;++De)re[De].remove(this);if((0,K.m)(le)){Ce&&(this._unsubscribe=void 0);try{le.call(this)}catch(De){_e=De instanceof Ue?xe(De.errors):[De]}}if((0,O.k)(pe)){let De=-1,Re=pe.length;for(;++De<Re;){const Ye=pe[De];if((0,c.K)(Ye))try{Ye.unsubscribe()}catch(ee){_e=_e||[],ee instanceof Ue?_e=_e.concat(xe(ee.errors)):_e.push(ee)}}}if(_e)throw new Ue(_e)}add(_e){let re=_e;if(!_e)return be.EMPTY;switch(typeof _e){case"function":re=new be(_e);case"object":if(re===this||re.closed||"function"!=typeof re.unsubscribe)return re;if(this.closed)return re.unsubscribe(),re;if(!(re instanceof be)){const pe=re;re=new be,re._subscriptions=[pe]}break;default:throw new Error("unrecognized teardown "+_e+" added to Subscription.")}let{_parentOrParents:Ce}=re;if(null===Ce)re._parentOrParents=this;else if(Ce instanceof be){if(Ce===this)return re;re._parentOrParents=[Ce,this]}else{if(-1!==Ce.indexOf(this))return re;Ce.push(this)}const le=this._subscriptions;return null===le?this._subscriptions=[re]:le.push(re),re}remove(_e){const re=this._subscriptions;if(re){const Ce=re.indexOf(_e);-1!==Ce&&re.splice(Ce,1)}}}var fe;function xe(fe){return fe.reduce((_e,re)=>_e.concat(re instanceof Ue?re.errors:re),[])}be.EMPTY=((fe=new be).closed=!0,fe)},2494:(jt,nt,Y)=>{"use strict";Y.d(nt,{v:()=>c});let O=!1;const c={Promise:void 0,set useDeprecatedSynchronousErrorHandling(K){if(K){const w=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+w.stack)}else O&&console.log("RxJS: Back to a better error behavior. Thank you. <3");O=K},get useDeprecatedSynchronousErrorHandling(){return O}}},5345:(jt,nt,Y)=>{"use strict";Y.d(nt,{IY:()=>w,Ds:()=>be,ft:()=>fe});var O=Y(7393),c=Y(7574),K=Y(7444);class w extends O.L{constructor(re){super(),this.parent=re}_next(re){this.parent.notifyNext(re)}_error(re){this.parent.notifyError(re),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class be extends O.L{notifyNext(re){this.destination.next(re)}notifyError(re){this.destination.error(re)}notifyComplete(){this.destination.complete()}}function fe(_e,re){if(re.closed)return;if(_e instanceof c.y)return _e.subscribe(re);let Ce;try{Ce=(0,K.s)(_e)(re)}catch(le){re.error(le)}return Ce}},2441:(jt,nt,Y)=>{"use strict";Y.d(nt,{c:()=>Ue,N:()=>be});var O=Y(9765),c=Y(7574),K=Y(5319),w=Y(1307);class Ue extends c.y{constructor(Ce,le){super(),this.source=Ce,this.subjectFactory=le,this._refCount=0,this._isComplete=!1}_subscribe(Ce){return this.getSubject().subscribe(Ce)}getSubject(){const Ce=this._subject;return(!Ce||Ce.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Ce=this._connection;return Ce||(this._isComplete=!1,Ce=this._connection=new K.w,Ce.add(this.source.subscribe(new xe(this.getSubject(),this))),Ce.closed&&(this._connection=null,Ce=K.w.EMPTY)),Ce}refCount(){return(0,w.x)()(this)}}const be=(()=>{const re=Ue.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:re._subscribe},_isComplete:{value:re._isComplete,writable:!0},getSubject:{value:re.getSubject},connect:{value:re.connect},refCount:{value:re.refCount}}})();class xe extends O.Yc{constructor(Ce,le){super(Ce),this.connectable=le}_error(Ce){this._unsubscribe(),super._error(Ce)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Ce=this.connectable;if(Ce){this.connectable=null;const le=Ce._connection;Ce._refCount=0,Ce._subject=null,Ce._connection=null,le&&le.unsubscribe()}}}},8071:(jt,nt,Y)=>{"use strict";Y.d(nt,{z:()=>w});var O=Y(5917),c=Y(3282);function w(...Ue){return(0,c.J)(1)((0,O.of)(...Ue))}},1439:(jt,nt,Y)=>{"use strict";Y.d(nt,{P:()=>w});var O=Y(7574),c=Y(4402),K=Y(9193);function w(Ue){return new O.y(be=>{let xe;try{xe=Ue()}catch(_e){return void be.error(_e)}return(xe?(0,c.D)(xe):(0,K.c)()).subscribe(be)})}},9193:(jt,nt,Y)=>{"use strict";Y.d(nt,{E:()=>c,c:()=>K});var O=Y(7574);const c=new O.y(Ue=>Ue.complete());function K(Ue){return Ue?function(Ue){return new O.y(be=>Ue.schedule(()=>be.complete()))}(Ue):c}},4402:(jt,nt,Y)=>{"use strict";Y.d(nt,{D:()=>Re});var O=Y(7574),c=Y(7444),K=Y(5319),w=Y(6554),xe=Y(4087),fe=Y(377),Ce=Y(4072),le=Y(9489);function Re(Ye,ee){return ee?function(Ye,ee){if(null!=Ye){if(function(Ye){return Ye&&"function"==typeof Ye[w.L]}(Ye))return function(Ye,ee){return new O.y(ze=>{const Ct=new K.w;return Ct.add(ee.schedule(()=>{const On=Ye[w.L]();Ct.add(On.subscribe({next(Nt){Ct.add(ee.schedule(()=>ze.next(Nt)))},error(Nt){Ct.add(ee.schedule(()=>ze.error(Nt)))},complete(){Ct.add(ee.schedule(()=>ze.complete()))}}))})),Ct})}(Ye,ee);if((0,Ce.t)(Ye))return function(Ye,ee){return new O.y(ze=>{const Ct=new K.w;return Ct.add(ee.schedule(()=>Ye.then(On=>{Ct.add(ee.schedule(()=>{ze.next(On),Ct.add(ee.schedule(()=>ze.complete()))}))},On=>{Ct.add(ee.schedule(()=>ze.error(On)))}))),Ct})}(Ye,ee);if((0,le.z)(Ye))return(0,xe.r)(Ye,ee);if(function(Ye){return Ye&&"function"==typeof Ye[fe.hZ]}(Ye)||"string"==typeof Ye)return function(Ye,ee){if(!Ye)throw new Error("Iterable cannot be null");return new O.y(ze=>{const Ct=new K.w;let On;return Ct.add(()=>{On&&"function"==typeof On.return&&On.return()}),Ct.add(ee.schedule(()=>{On=Ye[fe.hZ](),Ct.add(ee.schedule(function(){if(ze.closed)return;let Nt,at;try{const zt=On.next();Nt=zt.value,at=zt.done}catch(zt){return void ze.error(zt)}at?ze.complete():(ze.next(Nt),this.schedule())}))})),Ct})}(Ye,ee)}throw new TypeError((null!==Ye&&typeof Ye||Ye)+" is not observable")}(Ye,ee):Ye instanceof O.y?Ye:new O.y((0,c.s)(Ye))}},6693:(jt,nt,Y)=>{"use strict";Y.d(nt,{n:()=>w});var O=Y(7574),c=Y(5015),K=Y(4087);function w(Ue,be){return be?(0,K.r)(Ue,be):new O.y((0,c.V)(Ue))}},6682:(jt,nt,Y)=>{"use strict";Y.d(nt,{T:()=>Ue});var O=Y(7574),c=Y(4869),K=Y(3282),w=Y(6693);function Ue(...be){let xe=Number.POSITIVE_INFINITY,fe=null,_e=be[be.length-1];return(0,c.K)(_e)?(fe=be.pop(),be.length>1&&"number"==typeof be[be.length-1]&&(xe=be.pop())):"number"==typeof _e&&(xe=be.pop()),null===fe&&1===be.length&&be[0]instanceof O.y?be[0]:(0,K.J)(xe)((0,w.n)(be,fe))}},5917:(jt,nt,Y)=>{"use strict";Y.d(nt,{of:()=>w});var O=Y(4869),c=Y(6693),K=Y(4087);function w(...Ue){let be=Ue[Ue.length-1];return(0,O.K)(be)?(Ue.pop(),(0,K.r)(Ue,be)):(0,c.n)(Ue)}},4612:(jt,nt,Y)=>{"use strict";Y.d(nt,{b:()=>c});var O=Y(9773);function c(K,w){return(0,O.zg)(K,w,1)}},4395:(jt,nt,Y)=>{"use strict";Y.d(nt,{b:()=>K});var O=Y(7393),c=Y(3637);function K(xe,fe=c.P){return _e=>_e.lift(new w(xe,fe))}class w{constructor(fe,_e){this.dueTime=fe,this.scheduler=_e}call(fe,_e){return _e.subscribe(new Ue(fe,this.dueTime,this.scheduler))}}class Ue extends O.L{constructor(fe,_e,re){super(fe),this.dueTime=_e,this.scheduler=re,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(fe){this.clearDebounce(),this.lastValue=fe,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(be,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:fe}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(fe)}}clearDebounce(){const fe=this.debouncedSubscription;null!==fe&&(this.remove(fe),fe.unsubscribe(),this.debouncedSubscription=null)}}function be(xe){xe.debouncedNext()}},5242:(jt,nt,Y)=>{"use strict";Y.d(nt,{d:()=>c});var O=Y(7393);function c(Ue=null){return be=>be.lift(new K(Ue))}class K{constructor(be){this.defaultValue=be}call(be,xe){return xe.subscribe(new w(be,this.defaultValue))}}class w extends O.L{constructor(be,xe){super(be),this.defaultValue=xe,this.isEmpty=!0}_next(be){this.isEmpty=!1,this.destination.next(be)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7519:(jt,nt,Y)=>{"use strict";Y.d(nt,{x:()=>c});var O=Y(7393);function c(Ue,be){return xe=>xe.lift(new K(Ue,be))}class K{constructor(be,xe){this.compare=be,this.keySelector=xe}call(be,xe){return xe.subscribe(new w(be,this.compare,this.keySelector))}}class w extends O.L{constructor(be,xe,fe){super(be),this.keySelector=fe,this.hasKey=!1,"function"==typeof xe&&(this.compare=xe)}compare(be,xe){return be===xe}_next(be){let xe;try{const{keySelector:_e}=this;xe=_e?_e(be):be}catch(_e){return this.destination.error(_e)}let fe=!1;if(this.hasKey)try{const{compare:_e}=this;fe=_e(this.key,xe)}catch(_e){return this.destination.error(_e)}else this.hasKey=!0;fe||(this.key=xe,this.destination.next(be))}}},5435:(jt,nt,Y)=>{"use strict";Y.d(nt,{h:()=>c});var O=Y(7393);function c(Ue,be){return function(fe){return fe.lift(new K(Ue,be))}}class K{constructor(be,xe){this.predicate=be,this.thisArg=xe}call(be,xe){return xe.subscribe(new w(be,this.predicate,this.thisArg))}}class w extends O.L{constructor(be,xe,fe){super(be),this.predicate=xe,this.thisArg=fe,this.count=0}_next(be){let xe;try{xe=this.predicate.call(this.thisArg,be,this.count++)}catch(fe){return void this.destination.error(fe)}xe&&this.destination.next(be)}}},8049:(jt,nt,Y)=>{"use strict";Y.d(nt,{P:()=>xe});var O=Y(3410),c=Y(5435),K=Y(5257),w=Y(5242),Ue=Y(4635),be=Y(4487);function xe(fe,_e){const re=arguments.length>=2;return Ce=>Ce.pipe(fe?(0,c.h)((le,pe)=>fe(le,pe,Ce)):be.y,(0,K.q)(1),re?(0,w.d)(_e):(0,Ue.T)(()=>new O.K))}},8002:(jt,nt,Y)=>{"use strict";Y.d(nt,{U:()=>c});var O=Y(7393);function c(Ue,be){return function(fe){if("function"!=typeof Ue)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return fe.lift(new K(Ue,be))}}class K{constructor(be,xe){this.project=be,this.thisArg=xe}call(be,xe){return xe.subscribe(new w(be,this.project,this.thisArg))}}class w extends O.L{constructor(be,xe,fe){super(be),this.project=xe,this.count=0,this.thisArg=fe||this}_next(be){let xe;try{xe=this.project.call(this.thisArg,be,this.count++)}catch(fe){return void this.destination.error(fe)}this.destination.next(xe)}}},3282:(jt,nt,Y)=>{"use strict";Y.d(nt,{J:()=>K});var O=Y(9773),c=Y(4487);function K(w=Number.POSITIVE_INFINITY){return(0,O.zg)(c.y,w)}},9773:(jt,nt,Y)=>{"use strict";Y.d(nt,{zg:()=>w});var O=Y(8002),c=Y(4402),K=Y(5345);function w(fe,_e,re=Number.POSITIVE_INFINITY){return"function"==typeof _e?Ce=>Ce.pipe(w((le,pe)=>(0,c.D)(fe(le,pe)).pipe((0,O.U)((De,Re)=>_e(le,De,pe,Re))),re)):("number"==typeof _e&&(re=_e),Ce=>Ce.lift(new Ue(fe,re)))}class Ue{constructor(_e,re=Number.POSITIVE_INFINITY){this.project=_e,this.concurrent=re}call(_e,re){return re.subscribe(new be(_e,this.project,this.concurrent))}}class be extends K.Ds{constructor(_e,re,Ce=Number.POSITIVE_INFINITY){super(_e),this.project=re,this.concurrent=Ce,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(_e){this.active<this.concurrent?this._tryNext(_e):this.buffer.push(_e)}_tryNext(_e){let re;const Ce=this.index++;try{re=this.project(_e,Ce)}catch(le){return void this.destination.error(le)}this.active++,this._innerSub(re)}_innerSub(_e){const re=new K.IY(this),Ce=this.destination;Ce.add(re);const le=(0,K.ft)(_e,re);le!==re&&Ce.add(le)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(_e){this.destination.next(_e)}notifyComplete(){const _e=this.buffer;this.active--,_e.length>0?this._next(_e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(jt,nt,Y)=>{"use strict";Y.d(nt,{ht:()=>Ce,QV:()=>_e});var O=Y(7393),c=Y(9193),K=Y(5917),w=Y(7574);class fe{constructor(De,Re,Ye){this.kind=De,this.value=Re,this.error=Ye,this.hasValue="N"===De}observe(De){switch(this.kind){case"N":return De.next&&De.next(this.value);case"E":return De.error&&De.error(this.error);case"C":return De.complete&&De.complete()}}do(De,Re,Ye){switch(this.kind){case"N":return De&&De(this.value);case"E":return Re&&Re(this.error);case"C":return Ye&&Ye()}}accept(De,Re,Ye){return De&&"function"==typeof De.next?this.observe(De):this.do(De,Re,Ye)}toObservable(){switch(this.kind){case"N":return(0,K.of)(this.value);case"E":return pe=this.error,new w.y(Re=>Re.error(pe));case"C":return(0,c.c)()}var pe;throw new Error("unexpected notification kind value")}static createNext(De){return void 0!==De?new fe("N",De):fe.undefinedValueNotification}static createError(De){return new fe("E",void 0,De)}static createComplete(){return fe.completeNotification}}function _e(pe,De=0){return function(Ye){return Ye.lift(new re(pe,De))}}fe.completeNotification=new fe("C"),fe.undefinedValueNotification=new fe("N",void 0);class re{constructor(De,Re=0){this.scheduler=De,this.delay=Re}call(De,Re){return Re.subscribe(new Ce(De,this.scheduler,this.delay))}}class Ce extends O.L{constructor(De,Re,Ye=0){super(De),this.scheduler=Re,this.delay=Ye}static dispatch(De){const{notification:Re,destination:Ye}=De;Re.observe(Ye),this.unsubscribe()}scheduleMessage(De){this.destination.add(this.scheduler.schedule(Ce.dispatch,this.delay,new le(De,this.destination)))}_next(De){this.scheduleMessage(fe.createNext(De))}_error(De){this.scheduleMessage(fe.createError(De)),this.unsubscribe()}_complete(){this.scheduleMessage(fe.createComplete()),this.unsubscribe()}}class le{constructor(De,Re){this.notification=De,this.destination=Re}}},9328:(jt,nt,Y)=>{"use strict";Y.d(nt,{G:()=>c});var O=Y(7393);function c(){return Ue=>Ue.lift(new K)}class K{call(be,xe){return xe.subscribe(new w(be))}}class w extends O.L{constructor(be){super(be),this.hasPrev=!1}_next(be){let xe;this.hasPrev?xe=[this.prev,be]:this.hasPrev=!0,this.prev=be,xe&&this.destination.next(xe)}}},1307:(jt,nt,Y)=>{"use strict";Y.d(nt,{x:()=>c});var O=Y(7393);function c(){return function(be){return be.lift(new K(be))}}class K{constructor(be){this.connectable=be}call(be,xe){const{connectable:fe}=this;fe._refCount++;const _e=new w(be,fe),re=xe.subscribe(_e);return _e.closed||(_e.connection=fe.connect()),re}}class w extends O.L{constructor(be,xe){super(be),this.connectable=xe}_unsubscribe(){const{connectable:be}=this;if(!be)return void(this.connection=null);this.connectable=null;const xe=be._refCount;if(xe<=0)return void(this.connection=null);if(be._refCount=xe-1,xe>1)return void(this.connection=null);const{connection:fe}=this,_e=be._connection;this.connection=null,_e&&(!fe||_e===fe)&&_e.unsubscribe()}}},2145:(jt,nt,Y)=>{"use strict";Y.d(nt,{R:()=>c});var O=Y(7393);function c(Ue,be){let xe=!1;return arguments.length>=2&&(xe=!0),function(_e){return _e.lift(new K(Ue,be,xe))}}class K{constructor(be,xe,fe=!1){this.accumulator=be,this.seed=xe,this.hasSeed=fe}call(be,xe){return xe.subscribe(new w(be,this.accumulator,this.seed,this.hasSeed))}}class w extends O.L{constructor(be,xe,fe,_e){super(be),this.accumulator=xe,this._seed=fe,this.hasSeed=_e,this.index=0}get seed(){return this._seed}set seed(be){this.hasSeed=!0,this._seed=be}_next(be){if(this.hasSeed)return this._tryNext(be);this.seed=be,this.destination.next(be)}_tryNext(be){const xe=this.index++;let fe;try{fe=this.accumulator(this.seed,be,xe)}catch(_e){this.destination.error(_e)}this.seed=fe,this.destination.next(fe)}}},8819:(jt,nt,Y)=>{"use strict";Y.d(nt,{B:()=>xe});var O=Y(2441);var w=Y(1307),Ue=Y(9765);function be(){return new Ue.xQ}function xe(){return fe=>(0,w.x)()(function(fe,_e){return function(Ce){let le;le="function"==typeof fe?fe:function(){return fe};const pe=Object.create(Ce,O.N);return pe.source=Ce,pe.subjectFactory=le,pe}}(be)(fe))}},2066:(jt,nt,Y)=>{"use strict";Y.d(nt,{d:()=>_e});var O=Y(9765),c=Y(7771),K=Y(5319),w=Y(309),Ue=Y(7971),be=Y(8858);class xe extends O.xQ{constructor(le=Number.POSITIVE_INFINITY,pe=Number.POSITIVE_INFINITY,De){super(),this.scheduler=De,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=le<1?1:le,this._windowTime=pe<1?1:pe,pe===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(le){if(!this.isStopped){const pe=this._events;pe.push(le),pe.length>this._bufferSize&&pe.shift()}super.next(le)}nextTimeWindow(le){this.isStopped||(this._events.push(new fe(this._getNow(),le)),this._trimBufferThenGetEvents()),super.next(le)}_subscribe(le){const pe=this._infiniteTimeWindow,De=pe?this._events:this._trimBufferThenGetEvents(),Re=this.scheduler,Ye=De.length;let ee;if(this.closed)throw new Ue.N;if(this.isStopped||this.hasError?ee=K.w.EMPTY:(this.observers.push(le),ee=new be.W(this,le)),Re&&le.add(le=new w.ht(le,Re)),pe)for(let ze=0;ze<Ye&&!le.closed;ze++)le.next(De[ze]);else for(let ze=0;ze<Ye&&!le.closed;ze++)le.next(De[ze].value);return this.hasError?le.error(this.thrownError):this.isStopped&&le.complete(),ee}_getNow(){return(this.scheduler||c.c).now()}_trimBufferThenGetEvents(){const le=this._getNow(),pe=this._bufferSize,De=this._windowTime,Re=this._events,Ye=Re.length;let ee=0;for(;ee<Ye&&!(le-Re[ee].time<De);)ee++;return Ye>pe&&(ee=Math.max(ee,Ye-pe)),ee>0&&Re.splice(0,ee),Re}}class fe{constructor(le,pe){this.time=le,this.value=pe}}function _e(Ce,le,pe){let De;return De=Ce&&"object"==typeof Ce?Ce:{bufferSize:Ce,windowTime:le,refCount:!1,scheduler:pe},Re=>Re.lift(function({bufferSize:Ce=Number.POSITIVE_INFINITY,windowTime:le=Number.POSITIVE_INFINITY,refCount:pe,scheduler:De}){let Re,ee,Ye=0,ze=!1,Ct=!1;return function(Nt){let at;Ye++,!Re||ze?(ze=!1,Re=new xe(Ce,le,De),at=Re.subscribe(this),ee=Nt.subscribe({next(zt){Re.next(zt)},error(zt){ze=!0,Re.error(zt)},complete(){Ct=!0,ee=void 0,Re.complete()}}),Ct&&(ee=void 0)):at=Re.subscribe(this),this.add(()=>{Ye--,at.unsubscribe(),at=void 0,ee&&!Ct&&pe&&0===Ye&&(ee.unsubscribe(),ee=void 0,Re=void 0)})}}(De))}},9761:(jt,nt,Y)=>{"use strict";Y.d(nt,{O:()=>K});var O=Y(8071),c=Y(4869);function K(...w){const Ue=w[w.length-1];return(0,c.K)(Ue)?(w.pop(),be=>(0,O.z)(w,be,Ue)):be=>(0,O.z)(w,be)}},9673:(jt,nt,Y)=>{"use strict";Y.d(nt,{R:()=>Ue});var O=Y(7574),c=Y(4581),K=Y(6561);class w extends O.y{constructor(fe,_e=0,re=c.e){super(),this.source=fe,this.delayTime=_e,this.scheduler=re,(!(0,K.k)(_e)||_e<0)&&(this.delayTime=0),(!re||"function"!=typeof re.schedule)&&(this.scheduler=c.e)}static create(fe,_e=0,re=c.e){return new w(fe,_e,re)}static dispatch(fe){const{source:_e,subscriber:re}=fe;return this.add(_e.subscribe(re))}_subscribe(fe){return this.scheduler.schedule(w.dispatch,this.delayTime,{source:this.source,subscriber:fe})}}function Ue(xe,fe=0){return function(re){return re.lift(new be(xe,fe))}}class be{constructor(fe,_e){this.scheduler=fe,this.delay=_e}call(fe,_e){return new w(_e,this.delay,this.scheduler).subscribe(fe)}}},3190:(jt,nt,Y)=>{"use strict";Y.d(nt,{w:()=>w});var O=Y(8002),c=Y(4402),K=Y(5345);function w(xe,fe){return"function"==typeof fe?_e=>_e.pipe(w((re,Ce)=>(0,c.D)(xe(re,Ce)).pipe((0,O.U)((le,pe)=>fe(re,le,Ce,pe))))):_e=>_e.lift(new Ue(xe))}class Ue{constructor(fe){this.project=fe}call(fe,_e){return _e.subscribe(new be(fe,this.project))}}class be extends K.Ds{constructor(fe,_e){super(fe),this.project=_e,this.index=0}_next(fe){let _e;const re=this.index++;try{_e=this.project(fe,re)}catch(Ce){return void this.destination.error(Ce)}this._innerSub(_e)}_innerSub(fe){const _e=this.innerSubscription;_e&&_e.unsubscribe();const re=new K.IY(this),Ce=this.destination;Ce.add(re),this.innerSubscription=(0,K.ft)(fe,re),this.innerSubscription!==re&&Ce.add(this.innerSubscription)}_complete(){const{innerSubscription:fe}=this;(!fe||fe.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(fe){this.destination.next(fe)}}},5257:(jt,nt,Y)=>{"use strict";Y.d(nt,{q:()=>w});var O=Y(7393),c=Y(7108),K=Y(9193);function w(xe){return fe=>0===xe?(0,K.c)():fe.lift(new Ue(xe))}class Ue{constructor(fe){if(this.total=fe,this.total<0)throw new c.W}call(fe,_e){return _e.subscribe(new be(fe,this.total))}}class be extends O.L{constructor(fe,_e){super(fe),this.total=_e,this.count=0}_next(fe){const _e=this.total,re=++this.count;re<=_e&&(this.destination.next(fe),re===_e&&(this.destination.complete(),this.unsubscribe()))}}},3342:(jt,nt,Y)=>{"use strict";Y.d(nt,{b:()=>w});var O=Y(7393);function c(){}var K=Y(9105);function w(xe,fe,_e){return function(Ce){return Ce.lift(new Ue(xe,fe,_e))}}class Ue{constructor(fe,_e,re){this.nextOrObserver=fe,this.error=_e,this.complete=re}call(fe,_e){return _e.subscribe(new be(fe,this.nextOrObserver,this.error,this.complete))}}class be extends O.L{constructor(fe,_e,re,Ce){super(fe),this._tapNext=c,this._tapError=c,this._tapComplete=c,this._tapError=re||c,this._tapComplete=Ce||c,(0,K.m)(_e)?(this._context=this,this._tapNext=_e):_e&&(this._context=_e,this._tapNext=_e.next||c,this._tapError=_e.error||c,this._tapComplete=_e.complete||c)}_next(fe){try{this._tapNext.call(this._context,fe)}catch(_e){return void this.destination.error(_e)}this.destination.next(fe)}_error(fe){try{this._tapError.call(this._context,fe)}catch(_e){return void this.destination.error(_e)}this.destination.error(fe)}_complete(){try{this._tapComplete.call(this._context)}catch(fe){return void this.destination.error(fe)}return this.destination.complete()}}},4635:(jt,nt,Y)=>{"use strict";Y.d(nt,{T:()=>K});var O=Y(3410),c=Y(7393);function K(xe=be){return fe=>fe.lift(new w(xe))}class w{constructor(fe){this.errorFactory=fe}call(fe,_e){return _e.subscribe(new Ue(fe,this.errorFactory))}}class Ue extends c.L{constructor(fe,_e){super(fe),this.errorFactory=_e,this.hasValue=!1}_next(fe){this.hasValue=!0,this.destination.next(fe)}_complete(){if(this.hasValue)return this.destination.complete();{let fe;try{fe=this.errorFactory()}catch(_e){fe=_e}this.destination.error(fe)}}}function be(){return new O.K}},4087:(jt,nt,Y)=>{"use strict";Y.d(nt,{r:()=>K});var O=Y(7574),c=Y(5319);function K(w,Ue){return new O.y(be=>{const xe=new c.w;let fe=0;return xe.add(Ue.schedule(function(){fe!==w.length?(be.next(w[fe++]),be.closed||xe.add(this.schedule())):be.complete()})),xe})}},6465:(jt,nt,Y)=>{"use strict";Y.d(nt,{o:()=>K});var O=Y(5319);class c extends O.w{constructor(Ue,be){super()}schedule(Ue,be=0){return this}}class K extends c{constructor(Ue,be){super(Ue,be),this.scheduler=Ue,this.work=be,this.pending=!1}schedule(Ue,be=0){if(this.closed)return this;this.state=Ue;const xe=this.id,fe=this.scheduler;return null!=xe&&(this.id=this.recycleAsyncId(fe,xe,be)),this.pending=!0,this.delay=be,this.id=this.id||this.requestAsyncId(fe,this.id,be),this}requestAsyncId(Ue,be,xe=0){return setInterval(Ue.flush.bind(Ue,this),xe)}recycleAsyncId(Ue,be,xe=0){if(null!==xe&&this.delay===xe&&!1===this.pending)return be;clearInterval(be)}execute(Ue,be){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const xe=this._execute(Ue,be);if(xe)return xe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ue,be){let fe,xe=!1;try{this.work(Ue)}catch(_e){xe=!0,fe=!!_e&&_e||new Error(_e)}if(xe)return this.unsubscribe(),fe}_unsubscribe(){const Ue=this.id,be=this.scheduler,xe=be.actions,fe=xe.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==fe&&xe.splice(fe,1),null!=Ue&&(this.id=this.recycleAsyncId(be,Ue,null)),this.delay=null}}},6102:(jt,nt,Y)=>{"use strict";Y.d(nt,{v:()=>c});let O=(()=>{class K{constructor(Ue,be=K.now){this.SchedulerAction=Ue,this.now=be}schedule(Ue,be=0,xe){return new this.SchedulerAction(this,Ue).schedule(xe,be)}}return K.now=()=>Date.now(),K})();class c extends O{constructor(w,Ue=O.now){super(w,()=>c.delegate&&c.delegate!==this?c.delegate.now():Ue()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(w,Ue=0,be){return c.delegate&&c.delegate!==this?c.delegate.schedule(w,Ue,be):super.schedule(w,Ue,be)}flush(w){const{actions:Ue}=this;if(this.active)return void Ue.push(w);let be;this.active=!0;do{if(be=w.execute(w.state,w.delay))break}while(w=Ue.shift());if(this.active=!1,be){for(;w=Ue.shift();)w.unsubscribe();throw be}}}},4581:(jt,nt,Y)=>{"use strict";Y.d(nt,{e:()=>le,E:()=>Ce});let O=1;const c=Promise.resolve(),K={};function w(pe){return pe in K&&(delete K[pe],!0)}const Ue={setImmediate(pe){const De=O++;return K[De]=!0,c.then(()=>w(De)&&pe()),De},clearImmediate(pe){w(pe)}};var xe=Y(6465),_e=Y(6102);const Ce=new class extends _e.v{flush(De){this.active=!0,this.scheduled=void 0;const{actions:Re}=this;let Ye,ee=-1,ze=Re.length;De=De||Re.shift();do{if(Ye=De.execute(De.state,De.delay))break}while(++ee<ze&&(De=Re.shift()));if(this.active=!1,Ye){for(;++ee<ze&&(De=Re.shift());)De.unsubscribe();throw Ye}}}(class extends xe.o{constructor(De,Re){super(De,Re),this.scheduler=De,this.work=Re}requestAsyncId(De,Re,Ye=0){return null!==Ye&&Ye>0?super.requestAsyncId(De,Re,Ye):(De.actions.push(this),De.scheduled||(De.scheduled=Ue.setImmediate(De.flush.bind(De,null))))}recycleAsyncId(De,Re,Ye=0){if(null!==Ye&&Ye>0||null===Ye&&this.delay>0)return super.recycleAsyncId(De,Re,Ye);0===De.actions.length&&(Ue.clearImmediate(Re),De.scheduled=void 0)}}),le=Ce},3637:(jt,nt,Y)=>{"use strict";Y.d(nt,{z:()=>K,P:()=>w});var O=Y(6465);const K=new(Y(6102).v)(O.o),w=K},7771:(jt,nt,Y)=>{"use strict";Y.d(nt,{c:()=>be,N:()=>Ue});var O=Y(6465),K=Y(6102);const Ue=new class extends K.v{}(class extends O.o{constructor(fe,_e){super(fe,_e),this.scheduler=fe,this.work=_e}schedule(fe,_e=0){return _e>0?super.schedule(fe,_e):(this.delay=_e,this.state=fe,this.scheduler.flush(this),this)}execute(fe,_e){return _e>0||this.closed?super.execute(fe,_e):this._execute(fe,_e)}requestAsyncId(fe,_e,re=0){return null!==re&&re>0||null===re&&this.delay>0?super.requestAsyncId(fe,_e,re):fe.flush(this)}}),be=Ue},377:(jt,nt,Y)=>{"use strict";Y.d(nt,{hZ:()=>c});const c="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(jt,nt,Y)=>{"use strict";Y.d(nt,{L:()=>O});const O="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(jt,nt,Y)=>{"use strict";Y.d(nt,{b:()=>O});const O="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(jt,nt,Y)=>{"use strict";Y.d(nt,{W:()=>c});const c=(()=>{function K(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return K.prototype=Object.create(Error.prototype),K})()},3410:(jt,nt,Y)=>{"use strict";Y.d(nt,{K:()=>c});const c=(()=>{function K(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return K.prototype=Object.create(Error.prototype),K})()},7971:(jt,nt,Y)=>{"use strict";Y.d(nt,{N:()=>c});const c=(()=>{function K(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return K.prototype=Object.create(Error.prototype),K})()},4449:(jt,nt,Y)=>{"use strict";function O(c){setTimeout(()=>{throw c},0)}Y.d(nt,{z:()=>O})},4487:(jt,nt,Y)=>{"use strict";function O(c){return c}Y.d(nt,{y:()=>O})},9796:(jt,nt,Y)=>{"use strict";Y.d(nt,{k:()=>O});const O=Array.isArray||(c=>c&&"number"==typeof c.length)},9489:(jt,nt,Y)=>{"use strict";Y.d(nt,{z:()=>O});const O=c=>c&&"number"==typeof c.length&&"function"!=typeof c},9105:(jt,nt,Y)=>{"use strict";function O(c){return"function"==typeof c}Y.d(nt,{m:()=>O})},6561:(jt,nt,Y)=>{"use strict";Y.d(nt,{k:()=>c});var O=Y(9796);function c(K){return!(0,O.k)(K)&&K-parseFloat(K)+1>=0}},1555:(jt,nt,Y)=>{"use strict";function O(c){return null!==c&&"object"==typeof c}Y.d(nt,{K:()=>O})},4072:(jt,nt,Y)=>{"use strict";function O(c){return!!c&&"function"!=typeof c.subscribe&&"function"==typeof c.then}Y.d(nt,{t:()=>O})},4869:(jt,nt,Y)=>{"use strict";function O(c){return c&&"function"==typeof c.schedule}Y.d(nt,{K:()=>O})},7444:(jt,nt,Y)=>{"use strict";Y.d(nt,{s:()=>Ce});var O=Y(5015),c=Y(4449),w=Y(377),be=Y(6554),fe=Y(9489),_e=Y(4072),re=Y(1555);const Ce=le=>{if(le&&"function"==typeof le[be.L])return(le=>pe=>{const De=le[be.L]();if("function"!=typeof De.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return De.subscribe(pe)})(le);if((0,fe.z)(le))return(0,O.V)(le);if((0,_e.t)(le))return(le=>pe=>(le.then(De=>{pe.closed||(pe.next(De),pe.complete())},De=>pe.error(De)).then(null,c.z),pe))(le);if(le&&"function"==typeof le[w.hZ])return(le=>pe=>{const De=le[w.hZ]();for(;;){let Re;try{Re=De.next()}catch(Ye){return pe.error(Ye),pe}if(Re.done){pe.complete();break}if(pe.next(Re.value),pe.closed)break}return"function"==typeof De.return&&pe.add(()=>{De.return&&De.return()}),pe})(le);{const De=`You provided ${(0,re.K)(le)?"an invalid object":`'${le}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(De)}}},5015:(jt,nt,Y)=>{"use strict";Y.d(nt,{V:()=>O});const O=c=>K=>{for(let w=0,Ue=c.length;w<Ue&&!K.closed;w++)K.next(c[w]);K.complete()}},509:(jt,nt,Y)=>{"use strict";Y.d(nt,{D:()=>Ue});var O=Y(7393);class c extends O.L{constructor(xe,fe,_e){super(),this.parent=xe,this.outerValue=fe,this.outerIndex=_e,this.index=0}_next(xe){this.parent.notifyNext(this.outerValue,xe,this.outerIndex,this.index++,this)}_error(xe){this.parent.notifyError(xe,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var K=Y(7444),w=Y(7574);function Ue(be,xe,fe,_e,re=new c(be,fe,_e)){if(!re.closed)return xe instanceof w.y?xe.subscribe(re):(0,K.s)(xe)(re)}},3370:(jt,nt,Y)=>{"use strict";Y.r(nt),Y.d(nt,{ChatModule:()=>v});var O=Y(8583),c=Y(665),K=Y(2340),w=Y(7716),Ue=Y(3210),be=Y(2213);let xe=(()=>{class h{generateId(){let d="";const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",S=b.length;for(var N=0;N<20;N++)d+=b.charAt(Math.floor(Math.random()*S));return d}}return h.\u0275fac=function(d){return new(d||h)},h.\u0275prov=w.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();var fe=Y(1841);function _e(h){return null!=h&&"false"!=`${h}`}function re(h,g=0){return function(h){return!isNaN(parseFloat(h))&&!isNaN(Number(h))}(h)?Number(h):g}function le(h){return Array.isArray(h)?h:[h]}function pe(h){return null==h?"":"string"==typeof h?h:`${h}px`}function De(h){return h instanceof w.SBq?h.nativeElement:h}var Ye=Y(7574),ee=Y(9765),ze=Y(4395);let Ct=(()=>{class h{create(d){return"undefined"==typeof MutationObserver?null:new MutationObserver(d)}}return h.\u0275fac=function(d){return new(d||h)},h.\u0275prov=w.Yz7({factory:function(){return new h},token:h,providedIn:"root"}),h})(),On=(()=>{class h{constructor(d){this._mutationObserverFactory=d,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((d,b)=>this._cleanupObserver(b))}observe(d){const b=De(d);return new Ye.y(S=>{const Q=this._observeElement(b).subscribe(S);return()=>{Q.unsubscribe(),this._unobserveElement(b)}})}_observeElement(d){if(this._observedElements.has(d))this._observedElements.get(d).count++;else{const b=new ee.xQ,S=this._mutationObserverFactory.create(N=>b.next(N));S&&S.observe(d,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(d,{observer:S,stream:b,count:1})}return this._observedElements.get(d).stream}_unobserveElement(d){this._observedElements.has(d)&&(this._observedElements.get(d).count--,this._observedElements.get(d).count||this._cleanupObserver(d))}_cleanupObserver(d){if(this._observedElements.has(d)){const{observer:b,stream:S}=this._observedElements.get(d);b&&b.disconnect(),S.complete(),this._observedElements.delete(d)}}}return h.\u0275fac=function(d){return new(d||h)(w.LFG(Ct))},h.\u0275prov=w.Yz7({factory:function(){return new h(w.LFG(Ct))},token:h,providedIn:"root"}),h})(),Nt=(()=>{class h{constructor(d,b,S){this._contentObserver=d,this._elementRef=b,this._ngZone=S,this.event=new w.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(d){this._disabled=_e(d),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(d){this._debounce=re(d),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const d=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?d.pipe((0,ze.b)(this.debounce)):d).subscribe(this.event)})}_unsubscribe(){var d;null===(d=this._currentSubscription)||void 0===d||d.unsubscribe()}}return h.\u0275fac=function(d){return new(d||h)(w.Y36(On),w.Y36(w.SBq),w.Y36(w.R0b))},h.\u0275dir=w.lG2({type:h,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),h})(),at=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({providers:[Ct]}),h})();var zt=Y(5319),wn=(Y(6215),Y(5917));function ci(h,...g){return g.length?g.some(d=>h[d]):h.altKey||h.shiftKey||h.ctrlKey||h.metaKey}var nr=Y(3342),Yi=Y(5435),Ki=Y(8002),to=Y(5257),xi=Y(7393),ne=Y(7519),qe=Y(5345);function H(h){return g=>g.lift(new ge(h))}class ge{constructor(g){this.notifier=g}call(g,d){const b=new pt(g),S=(0,qe.ft)(this.notifier,new qe.IY(b));return S&&!b.seenValue?(b.add(S),d.subscribe(b)):b}}class pt extends qe.Ds{constructor(g){super(g),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let Vt;try{Vt="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(h){Vt=!1}let wi,ho,J,$t=(()=>{class h{constructor(d){this._platformId=d,this.isBrowser=this._platformId?(0,O.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Vt)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return h.\u0275fac=function(d){return new(d||h)(w.LFG(w.Lbi))},h.\u0275prov=w.Yz7({factory:function(){return new h(w.LFG(w.Lbi))},token:h,providedIn:"root"}),h})(),vr=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({}),h})();function Ur(h){return function(){if(null==wi&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>wi=!0}))}finally{wi=wi||!1}return wi}()?h:!!h.capture}function os(){if(null==ho){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ho=!1,ho;if("scrollBehavior"in document.documentElement.style)ho=!0;else{const h=Element.prototype.scrollTo;ho=!!h&&!/\{\s*\[native code\]\s*\}/.test(h.toString())}}return ho}function F(h){return h.composedPath?h.composedPath()[0]:h.target}function ye(){return void 0!==J.__karma__&&!!J.__karma__||void 0!==J.jasmine&&!!J.jasmine||void 0!==J.jest&&!!J.jest||void 0!==J.Mocha&&!!J.Mocha}J="undefined"!=typeof global?global:"undefined"!=typeof window?window:{};class Tn extends class{constructor(g){this._items=g,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ee.xQ,this._typeaheadSubscription=zt.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=d=>d.disabled,this._pressedLetters=[],this.tabOut=new ee.xQ,this.change=new ee.xQ,g instanceof w.n_E&&g.changes.subscribe(d=>{if(this._activeItem){const S=d.toArray().indexOf(this._activeItem);S>-1&&S!==this._activeItemIndex&&(this._activeItemIndex=S)}})}skipPredicate(g){return this._skipPredicateFn=g,this}withWrap(g=!0){return this._wrap=g,this}withVerticalOrientation(g=!0){return this._vertical=g,this}withHorizontalOrientation(g){return this._horizontal=g,this}withAllowedModifierKeys(g){return this._allowedModifierKeys=g,this}withTypeAhead(g=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,nr.b)(d=>this._pressedLetters.push(d)),(0,ze.b)(g),(0,Yi.h)(()=>this._pressedLetters.length>0),(0,Ki.U)(()=>this._pressedLetters.join(""))).subscribe(d=>{const b=this._getItemsArray();for(let S=1;S<b.length+1;S++){const N=(this._activeItemIndex+S)%b.length,Q=b[N];if(!this._skipPredicateFn(Q)&&0===Q.getLabel().toUpperCase().trim().indexOf(d)){this.setActiveItem(N);break}}this._pressedLetters=[]}),this}withHomeAndEnd(g=!0){return this._homeAndEnd=g,this}setActiveItem(g){const d=this._activeItem;this.updateActiveItem(g),this._activeItem!==d&&this.change.next(this._activeItemIndex)}onKeydown(g){const d=g.keyCode,S=["altKey","ctrlKey","metaKey","shiftKey"].every(N=>!g[N]||this._allowedModifierKeys.indexOf(N)>-1);switch(d){case 9:return void this.tabOut.next();case 40:if(this._vertical&&S){this.setNextItemActive();break}return;case 38:if(this._vertical&&S){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&S){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&S){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&S){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&S){this.setLastItemActive();break}return;default:return void((S||ci(g,"shiftKey"))&&(g.key&&1===g.key.length?this._letterKeyStream.next(g.key.toLocaleUpperCase()):(d>=65&&d<=90||d>=48&&d<=57)&&this._letterKeyStream.next(String.fromCharCode(d))))}this._pressedLetters=[],g.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(g){const d=this._getItemsArray(),b="number"==typeof g?g:d.indexOf(g),S=d[b];this._activeItem=null==S?null:S,this._activeItemIndex=b}_setActiveItemByDelta(g){this._wrap?this._setActiveInWrapMode(g):this._setActiveInDefaultMode(g)}_setActiveInWrapMode(g){const d=this._getItemsArray();for(let b=1;b<=d.length;b++){const S=(this._activeItemIndex+g*b+d.length)%d.length;if(!this._skipPredicateFn(d[S]))return void this.setActiveItem(S)}}_setActiveInDefaultMode(g){this._setActiveItemByIndex(this._activeItemIndex+g,g)}_setActiveItemByIndex(g,d){const b=this._getItemsArray();if(b[g]){for(;this._skipPredicateFn(b[g]);)if(!b[g+=d])return;this.setActiveItem(g)}}_getItemsArray(){return this._items instanceof w.n_E?this._items.toArray():this._items}}{setActiveItem(g){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(g),this.activeItem&&this.activeItem.setActiveStyles()}}"undefined"!=typeof Element&&Element;const fi=new w.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),To=new w.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let pi=(()=>{class h{constructor(d,b,S,N){this._ngZone=b,this._defaultOptions=N,this._document=S,this._liveElement=d||this._createLiveElement()}announce(d,...b){const S=this._defaultOptions;let N,Q;return 1===b.length&&"number"==typeof b[0]?Q=b[0]:[N,Q]=b,this.clear(),clearTimeout(this._previousTimeout),N||(N=S&&S.politeness?S.politeness:"polite"),null==Q&&S&&(Q=S.duration),this._liveElement.setAttribute("aria-live",N),this._ngZone.runOutsideAngular(()=>new Promise(ue=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=d,ue(),"number"==typeof Q&&(this._previousTimeout=setTimeout(()=>this.clear(),Q))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const d="cdk-live-announcer-element",b=this._document.getElementsByClassName(d),S=this._document.createElement("div");for(let N=0;N<b.length;N++)b[N].parentNode.removeChild(b[N]);return S.classList.add(d),S.classList.add("cdk-visually-hidden"),S.setAttribute("aria-atomic","true"),S.setAttribute("aria-live","polite"),this._document.body.appendChild(S),S}}return h.\u0275fac=function(d){return new(d||h)(w.LFG(fi,8),w.LFG(w.R0b),w.LFG(O.K0),w.LFG(To,8))},h.\u0275prov=w.Yz7({factory:function(){return new h(w.LFG(fi,8),w.LFG(w.R0b),w.LFG(O.K0),w.LFG(To,8))},token:h,providedIn:"root"}),h})();const gi="cdk-high-contrast-black-on-white",Qi="cdk-high-contrast-white-on-black",yi="cdk-high-contrast-active";let yn=(()=>{class h{constructor(d,b){this._platform=d,this._document=b}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const d=this._document.createElement("div");d.style.backgroundColor="rgb(1,2,3)",d.style.position="absolute",this._document.body.appendChild(d);const b=this._document.defaultView||window,S=b&&b.getComputedStyle?b.getComputedStyle(d):null,N=(S&&S.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(d),N){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const d=this._document.body.classList;d.remove(yi),d.remove(gi),d.remove(Qi),this._hasCheckedHighContrastMode=!0;const b=this.getHighContrastMode();1===b?(d.add(yi),d.add(gi)):2===b&&(d.add(yi),d.add(Qi))}}}return h.\u0275fac=function(d){return new(d||h)(w.LFG($t),w.LFG(O.K0))},h.\u0275prov=w.Yz7({factory:function(){return new h(w.LFG($t),w.LFG(O.K0))},token:h,providedIn:"root"}),h})();const Qn=new w.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,w.f3M)(O.K0)}});let Tr=(()=>{class h{constructor(d){if(this.value="ltr",this.change=new w.vpe,d){const S=d.documentElement?d.documentElement.dir:null,N=(d.body?d.body.dir:null)||S;this.value="ltr"===N||"rtl"===N?N:"ltr"}}ngOnDestroy(){this.change.complete()}}return h.\u0275fac=function(d){return new(d||h)(w.LFG(Qn,8))},h.\u0275prov=w.Yz7({factory:function(){return new h(w.LFG(Qn,8))},token:h,providedIn:"root"}),h})(),Ei=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({}),h})();const ao=new w.GfV("12.2.11");var ei=Y(6237);function Us(h,g){if(1&h&&w._UZ(0,"mat-pseudo-checkbox",4),2&h){const d=w.oxw();w.Q6J("state",d.selected?"checked":"unchecked")("disabled",d.disabled)}}function Ji(h,g){if(1&h&&(w.TgZ(0,"span",5),w._uU(1),w.qZA()),2&h){const d=w.oxw();w.xp6(1),w.hij("(",d.group.label,")")}}const oi=["*"],_a=new w.GfV("12.2.11"),ya=new w.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Xi,vs=(()=>{class h{constructor(d,b,S){this._hasDoneGlobalChecks=!1,this._document=S,d._applyBodyHighContrastModeCssClasses(),this._sanityChecks=b,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(d){return!(!(0,w.X6Q)()||ye())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[d])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const d=this._document.createElement("div");d.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(d);const b=getComputedStyle(d);b&&"none"!==b.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(d)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&_a.full!==ao.full&&console.warn("The Angular Material version ("+_a.full+") does not match the Angular CDK version ("+ao.full+").\nPlease ensure the versions of these two packages exactly match.")}}return h.\u0275fac=function(d){return new(d||h)(w.LFG(yn),w.LFG(ya,8),w.LFG(O.K0))},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({imports:[[Ei],Ei]}),h})();function Zu(h){return class extends h{constructor(...g){super(...g),this._disabled=!1}get disabled(){return this._disabled}set disabled(g){this._disabled=_e(g)}}}function ba(h,g){return class extends h{constructor(...d){super(...d),this.defaultColor=g,this.color=g}get color(){return this._color}set color(d){const b=d||this.defaultColor;b!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),b&&this._elementRef.nativeElement.classList.add(`mat-${b}`),this._color=b)}}}function qu(h){return class extends h{constructor(...g){super(...g),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(g){this._disableRipple=_e(g)}}}function Ba(h,g=0){return class extends h{constructor(...d){super(...d),this._tabIndex=g,this.defaultTabIndex=g}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(d){this._tabIndex=null!=d?re(d):this.defaultTabIndex}}}function Vs(h){return class extends h{constructor(...g){super(...g),this.stateChanges=new ee.xQ,this.errorState=!1}updateErrorState(){const g=this.errorState,N=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);N!==g&&(this.errorState=N,this.stateChanges.next())}}}try{Xi="undefined"!=typeof Intl}catch(h){Xi=!1}let lu=(()=>{class h{isErrorState(d,b){return!!(d&&d.invalid&&(d.touched||b&&b.submitted))}}return h.\u0275fac=function(d){return new(d||h)},h.\u0275prov=w.Yz7({factory:function(){return new h},token:h,providedIn:"root"}),h})();class x{constructor(g,d,b){this._renderer=g,this.element=d,this.config=b,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const I={enterDuration:225,exitDuration:150},X=Ur({passive:!0}),ce=["mousedown","touchstart"],Te=["mouseup","mouseleave","touchend","touchcancel"];class je{constructor(g,d,b,S){this._target=g,this._ngZone=d,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,S.isBrowser&&(this._containerElement=De(b))}fadeInRipple(g,d,b={}){const S=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),N=Object.assign(Object.assign({},I),b.animation);b.centered&&(g=S.left+S.width/2,d=S.top+S.height/2);const Q=b.radius||function(h,g,d){const b=Math.max(Math.abs(h-d.left),Math.abs(h-d.right)),S=Math.max(Math.abs(g-d.top),Math.abs(g-d.bottom));return Math.sqrt(b*b+S*S)}(g,d,S),ue=g-S.left,Ee=d-S.top,Ge=N.enterDuration,ht=document.createElement("div");ht.classList.add("mat-ripple-element"),ht.style.left=ue-Q+"px",ht.style.top=Ee-Q+"px",ht.style.height=2*Q+"px",ht.style.width=2*Q+"px",null!=b.color&&(ht.style.backgroundColor=b.color),ht.style.transitionDuration=`${Ge}ms`,this._containerElement.appendChild(ht),window.getComputedStyle(ht).getPropertyValue("opacity"),ht.style.transform="scale(1)";const xt=new x(this,ht,b);return xt.state=0,this._activeRipples.add(xt),b.persistent||(this._mostRecentTransientRipple=xt),this._runTimeoutOutsideZone(()=>{const Dn=xt===this._mostRecentTransientRipple;xt.state=1,!b.persistent&&(!Dn||!this._isPointerDown)&&xt.fadeOut()},Ge),xt}fadeOutRipple(g){const d=this._activeRipples.delete(g);if(g===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!d)return;const b=g.element,S=Object.assign(Object.assign({},I),g.config.animation);b.style.transitionDuration=`${S.exitDuration}ms`,b.style.opacity="0",g.state=2,this._runTimeoutOutsideZone(()=>{g.state=3,b.parentNode.removeChild(b)},S.exitDuration)}fadeOutAll(){this._activeRipples.forEach(g=>g.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(g=>{g.config.persistent||g.fadeOut()})}setupTriggerEvents(g){const d=De(g);!d||d===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=d,this._registerEvents(ce))}handleEvent(g){"mousedown"===g.type?this._onMousedown(g):"touchstart"===g.type?this._onTouchStart(g):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Te),this._pointerUpEventsRegistered=!0)}_onMousedown(g){const d=0===(h=g).offsetX&&0===h.offsetY,b=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;var h;!this._target.rippleDisabled&&!d&&!b&&(this._isPointerDown=!0,this.fadeInRipple(g.clientX,g.clientY,this._target.rippleConfig))}_onTouchStart(g){if(!this._target.rippleDisabled&&!function(h){const g=h.touches&&h.touches[0]||h.changedTouches&&h.changedTouches[0];return!(!g||-1!==g.identifier||null!=g.radiusX&&1!==g.radiusX||null!=g.radiusY&&1!==g.radiusY)}(g)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const d=g.changedTouches;for(let b=0;b<d.length;b++)this.fadeInRipple(d[b].clientX,d[b].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(g=>{!g.config.persistent&&(1===g.state||g.config.terminateOnPointerUp&&0===g.state)&&g.fadeOut()}))}_runTimeoutOutsideZone(g,d=0){this._ngZone.runOutsideAngular(()=>setTimeout(g,d))}_registerEvents(g){this._ngZone.runOutsideAngular(()=>{g.forEach(d=>{this._triggerElement.addEventListener(d,this,X)})})}_removeTriggerEvents(){this._triggerElement&&(ce.forEach(g=>{this._triggerElement.removeEventListener(g,this,X)}),this._pointerUpEventsRegistered&&Te.forEach(g=>{this._triggerElement.removeEventListener(g,this,X)}))}}const ar=new w.OlP("mat-ripple-global-options");let qn=(()=>{class h{constructor(d,b,S,N,Q){this._elementRef=d,this._animationMode=Q,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=N||{},this._rippleRenderer=new je(this,b,d,S)}get disabled(){return this._disabled}set disabled(d){d&&this.fadeOutAllNonPersistent(),this._disabled=d,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(d){this._trigger=d,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(d,b=0,S){return"number"==typeof d?this._rippleRenderer.fadeInRipple(d,b,Object.assign(Object.assign({},this.rippleConfig),S)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),d))}}return h.\u0275fac=function(d){return new(d||h)(w.Y36(w.SBq),w.Y36(w.R0b),w.Y36($t),w.Y36(ar,8),w.Y36(ei.Qb,8))},h.\u0275dir=w.lG2({type:h,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(d,b){2&d&&w.ekj("mat-ripple-unbounded",b.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),h})(),xr=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({imports:[[vs,vr],vs]}),h})(),Hn=(()=>{class h{constructor(d){this._animationMode=d,this.state="unchecked",this.disabled=!1}}return h.\u0275fac=function(d){return new(d||h)(w.Y36(ei.Qb,8))},h.\u0275cmp=w.Xpm({type:h,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(d,b){2&d&&w.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===b.state)("mat-pseudo-checkbox-checked","checked"===b.state)("mat-pseudo-checkbox-disabled",b.disabled)("_mat-animation-noopable","NoopAnimations"===b._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(d,b){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),h})(),po=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({imports:[[vs]]}),h})();const Vo=new w.OlP("MAT_OPTION_PARENT_COMPONENT"),go=Zu(class{});let Bs=0,Wo=(()=>{class h extends go{constructor(d){var b;super(),this._labelId="mat-optgroup-label-"+Bs++,this._inert=null!==(b=null==d?void 0:d.inertGroups)&&void 0!==b&&b}}return h.\u0275fac=function(d){return new(d||h)(w.Y36(Vo,8))},h.\u0275dir=w.lG2({type:h,inputs:{label:"label"},features:[w.qOj]}),h})();const Yo=new w.OlP("MatOptgroup");let Wn=0;class Ii{constructor(g,d=!1){this.source=g,this.isUserInput=d}}let ra=(()=>{class h{constructor(d,b,S,N){this._element=d,this._changeDetectorRef=b,this._parent=S,this.group=N,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Wn++,this.onSelectionChange=new w.vpe,this._stateChanges=new ee.xQ}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(d){this._disabled=_e(d)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(d,b){const S=this._getHostElement();"function"==typeof S.focus&&S.focus(b)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(d){(13===d.keyCode||32===d.keyCode)&&!ci(d)&&(this._selectViaInteraction(),d.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const d=this.viewValue;d!==this._mostRecentViewValue&&(this._mostRecentViewValue=d,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(d=!1){this.onSelectionChange.emit(new Ii(this,d))}}return h.\u0275fac=function(d){return new(d||h)(w.Y36(w.SBq),w.Y36(w.sBO),w.Y36(void 0),w.Y36(Wo))},h.\u0275dir=w.lG2({type:h,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),h})(),du=(()=>{class h extends ra{constructor(d,b,S,N){super(d,b,S,N)}}return h.\u0275fac=function(d){return new(d||h)(w.Y36(w.SBq),w.Y36(w.sBO),w.Y36(Vo,8),w.Y36(Yo,8))},h.\u0275cmp=w.Xpm({type:h,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(d,b){1&d&&w.NdJ("click",function(){return b._selectViaInteraction()})("keydown",function(N){return b._handleKeydown(N)}),2&d&&(w.Ikx("id",b.id),w.uIk("tabindex",b._getTabIndex())("aria-selected",b._getAriaSelected())("aria-disabled",b.disabled.toString()),w.ekj("mat-selected",b.selected)("mat-option-multiple",b.multiple)("mat-active",b.active)("mat-option-disabled",b.disabled))},exportAs:["matOption"],features:[w.qOj],ngContentSelectors:oi,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(d,b){1&d&&(w.F$t(),w.YNc(0,Us,1,2,"mat-pseudo-checkbox",0),w.TgZ(1,"span",1),w.Hsn(2),w.qZA(),w.YNc(3,Ji,2,1,"span",2),w._UZ(4,"div",3)),2&d&&(w.Q6J("ngIf",b.multiple),w.xp6(3),w.Q6J("ngIf",b.group&&b.group._inert),w.xp6(1),w.Q6J("matRippleTrigger",b._getHostElement())("matRippleDisabled",b.disabled||b.disableRipple))},directives:[O.O5,qn,Hn],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),h})();function za(h,g,d){if(d.length){let b=g.toArray(),S=d.toArray(),N=0;for(let Q=0;Q<h+1;Q++)b[Q].group&&b[Q].group===S[N]&&N++;return N}return 0}let Fc=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({imports:[[xr,O.ez,vs,po]]}),h})();var zu=Y(6682),nc=Y(9796),Ea=Y(9105);function $u(h,g,d,b){return(0,Ea.m)(d)&&(b=d,d=void 0),b?$u(h,g,d).pipe((0,Ki.U)(S=>(0,nc.k)(S)?b(...S):b(S))):new Ye.y(S=>{Ta(h,g,function(Q){S.next(arguments.length>1?Array.prototype.slice.call(arguments):Q)},S,d)})}function Ta(h,g,d,b,S){let N;if(function(h){return h&&"function"==typeof h.addEventListener&&"function"==typeof h.removeEventListener}(h)){const Q=h;h.addEventListener(g,d,S),N=()=>Q.removeEventListener(g,d,S)}else if(function(h){return h&&"function"==typeof h.on&&"function"==typeof h.off}(h)){const Q=h;h.on(g,d),N=()=>Q.off(g,d)}else if(function(h){return h&&"function"==typeof h.addListener&&"function"==typeof h.removeListener}(h)){const Q=h;h.addListener(g,d),N=()=>Q.removeListener(g,d)}else{if(!h||!h.length)throw new TypeError("Invalid event target");for(let Q=0,ue=h.length;Q<ue;Q++)Ta(h[Q],g,d,b,S)}b.add(N)}var Hs=Y(9761),Or=Y(7238);const sh=["underline"],rc=["connectionContainer"],Ko=["inputContainer"],mo=["label"];function Gs(h,g){1&h&&(w.ynx(0),w.TgZ(1,"div",14),w._UZ(2,"div",15),w._UZ(3,"div",16),w._UZ(4,"div",17),w.qZA(),w.TgZ(5,"div",18),w._UZ(6,"div",15),w._UZ(7,"div",16),w._UZ(8,"div",17),w.qZA(),w.BQk())}function Do(h,g){1&h&&(w.TgZ(0,"div",19),w.Hsn(1,1),w.qZA())}function $a(h,g){if(1&h&&(w.ynx(0),w.Hsn(1,2),w.TgZ(2,"span"),w._uU(3),w.qZA(),w.BQk()),2&h){const d=w.oxw(2);w.xp6(3),w.Oqu(d._control.placeholder)}}function fd(h,g){1&h&&w.Hsn(0,3,["*ngSwitchCase","true"])}function Nc(h,g){1&h&&(w.TgZ(0,"span",23),w._uU(1," *"),w.qZA())}function pd(h,g){if(1&h){const d=w.EpF();w.TgZ(0,"label",20,21),w.NdJ("cdkObserveContent",function(){return w.CHM(d),w.oxw().updateOutlineGap()}),w.YNc(2,$a,4,1,"ng-container",12),w.YNc(3,fd,1,0,"ng-content",12),w.YNc(4,Nc,2,0,"span",22),w.qZA()}if(2&h){const d=w.oxw();w.ekj("mat-empty",d._control.empty&&!d._shouldAlwaysFloat())("mat-form-field-empty",d._control.empty&&!d._shouldAlwaysFloat())("mat-accent","accent"==d.color)("mat-warn","warn"==d.color),w.Q6J("cdkObserveContentDisabled","outline"!=d.appearance)("id",d._labelId)("ngSwitch",d._hasLabel()),w.uIk("for",d._control.id)("aria-owns",d._control.id),w.xp6(2),w.Q6J("ngSwitchCase",!1),w.xp6(1),w.Q6J("ngSwitchCase",!0),w.xp6(1),w.Q6J("ngIf",!d.hideRequiredMarker&&d._control.required&&!d._control.disabled)}}function Lh(h,g){1&h&&(w.TgZ(0,"div",24),w.Hsn(1,4),w.qZA())}function ah(h,g){if(1&h&&(w.TgZ(0,"div",25,26),w._UZ(2,"span",27),w.qZA()),2&h){const d=w.oxw();w.xp6(2),w.ekj("mat-accent","accent"==d.color)("mat-warn","warn"==d.color)}}function Ml(h,g){if(1&h&&(w.TgZ(0,"div"),w.Hsn(1,5),w.qZA()),2&h){const d=w.oxw();w.Q6J("@transitionMessages",d._subscriptAnimationState)}}function bs(h,g){if(1&h&&(w.TgZ(0,"div",31),w._uU(1),w.qZA()),2&h){const d=w.oxw(2);w.Q6J("id",d._hintLabelId),w.xp6(1),w.Oqu(d.hintLabel)}}function xs(h,g){if(1&h&&(w.TgZ(0,"div",28),w.YNc(1,bs,2,2,"div",29),w.Hsn(2,6),w._UZ(3,"div",30),w.Hsn(4,7),w.qZA()),2&h){const d=w.oxw();w.Q6J("@transitionMessages",d._subscriptAnimationState),w.xp6(1),w.Q6J("ngIf",d.hintLabel)}}const ia=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Wu=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Yu=new w.OlP("MatError"),Zs={transitionMessages:(0,Or.X$)("transitionMessages",[(0,Or.SB)("enter",(0,Or.oB)({opacity:1,transform:"translateY(0%)"})),(0,Or.eR)("void => enter",[(0,Or.oB)({opacity:0,transform:"translateY(-5px)"}),(0,Or.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let fu=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275dir=w.lG2({type:h}),h})();const Uc=new w.OlP("MatHint");let Sa=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275dir=w.lG2({type:h,selectors:[["mat-label"]]}),h})(),Bo=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275dir=w.lG2({type:h,selectors:[["mat-placeholder"]]}),h})();const Vc=new w.OlP("MatPrefix"),Bc=new w.OlP("MatSuffix");let Ju=0;const Aa=ba(class{constructor(h){this._elementRef=h}},"primary"),Ol=new w.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),bi=new w.OlP("MatFormField");let mu=(()=>{class h extends Aa{constructor(d,b,S,N,Q,ue,Ee,Ge){super(d),this._changeDetectorRef=b,this._dir=N,this._defaults=Q,this._platform=ue,this._ngZone=Ee,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new ee.xQ,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Ju++,this._labelId="mat-form-field-label-"+Ju++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==Ge,this.appearance=Q&&Q.appearance?Q.appearance:"legacy",this._hideRequiredMarker=!(!Q||null==Q.hideRequiredMarker)&&Q.hideRequiredMarker}get appearance(){return this._appearance}set appearance(d){const b=this._appearance;this._appearance=d||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&b!==d&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(d){this._hideRequiredMarker=_e(d)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(d){this._hintLabel=d,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(d){d!==this._floatLabel&&(this._floatLabel=d||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(d){this._explicitFormFieldControl=d}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const d=this._control;d.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${d.controlType}`),d.stateChanges.pipe((0,Hs.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),d.ngControl&&d.ngControl.valueChanges&&d.ngControl.valueChanges.pipe(H(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(H(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,zu.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,Hs.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,Hs.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(H(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(d){const b=this._control?this._control.ngControl:null;return b&&b[d]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,$u(this._label.nativeElement,"transitionend").pipe((0,to.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let d=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&d.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const b=this._hintChildren?this._hintChildren.find(N=>"start"===N.align):null,S=this._hintChildren?this._hintChildren.find(N=>"end"===N.align):null;b?d.push(b.id):this._hintLabel&&d.push(this._hintLabelId),S&&d.push(S.id)}else this._errorChildren&&d.push(...this._errorChildren.map(b=>b.id));this._control.setDescribedByIds(d)}}_validateControlChild(){}updateOutlineGap(){const d=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&d&&d.children.length&&d.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let b=0,S=0;const N=this._connectionContainerRef.nativeElement,Q=N.querySelectorAll(".mat-form-field-outline-start"),ue=N.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const Ee=N.getBoundingClientRect();if(0===Ee.width&&0===Ee.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const Ge=this._getStartEnd(Ee),ht=d.children,xt=this._getStartEnd(ht[0].getBoundingClientRect());let Dn=0;for(let bn=0;bn<ht.length;bn++)Dn+=ht[bn].offsetWidth;b=Math.abs(xt-Ge)-5,S=Dn>0?.75*Dn+10:0}for(let Ee=0;Ee<Q.length;Ee++)Q[Ee].style.width=`${b}px`;for(let Ee=0;Ee<ue.length;Ee++)ue[Ee].style.width=`${S}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(d){return this._dir&&"rtl"===this._dir.value?d.right:d.left}_isAttachedToDOM(){const d=this._elementRef.nativeElement;if(d.getRootNode){const b=d.getRootNode();return b&&b!==d}return document.documentElement.contains(d)}}return h.\u0275fac=function(d){return new(d||h)(w.Y36(w.SBq),w.Y36(w.sBO),w.Y36(w.SBq),w.Y36(Tr,8),w.Y36(Ol,8),w.Y36($t),w.Y36(w.R0b),w.Y36(ei.Qb,8))},h.\u0275cmp=w.Xpm({type:h,selectors:[["mat-form-field"]],contentQueries:function(d,b,S){if(1&d&&(w.Suo(S,fu,5),w.Suo(S,fu,7),w.Suo(S,Sa,5),w.Suo(S,Sa,7),w.Suo(S,Bo,5),w.Suo(S,Yu,5),w.Suo(S,Uc,5),w.Suo(S,Vc,5),w.Suo(S,Bc,5)),2&d){let N;w.iGM(N=w.CRH())&&(b._controlNonStatic=N.first),w.iGM(N=w.CRH())&&(b._controlStatic=N.first),w.iGM(N=w.CRH())&&(b._labelChildNonStatic=N.first),w.iGM(N=w.CRH())&&(b._labelChildStatic=N.first),w.iGM(N=w.CRH())&&(b._placeholderChild=N.first),w.iGM(N=w.CRH())&&(b._errorChildren=N),w.iGM(N=w.CRH())&&(b._hintChildren=N),w.iGM(N=w.CRH())&&(b._prefixChildren=N),w.iGM(N=w.CRH())&&(b._suffixChildren=N)}},viewQuery:function(d,b){if(1&d&&(w.Gf(sh,5),w.Gf(rc,7),w.Gf(Ko,5),w.Gf(mo,5)),2&d){let S;w.iGM(S=w.CRH())&&(b.underlineRef=S.first),w.iGM(S=w.CRH())&&(b._connectionContainerRef=S.first),w.iGM(S=w.CRH())&&(b._inputContainerRef=S.first),w.iGM(S=w.CRH())&&(b._label=S.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(d,b){2&d&&w.ekj("mat-form-field-appearance-standard","standard"==b.appearance)("mat-form-field-appearance-fill","fill"==b.appearance)("mat-form-field-appearance-outline","outline"==b.appearance)("mat-form-field-appearance-legacy","legacy"==b.appearance)("mat-form-field-invalid",b._control.errorState)("mat-form-field-can-float",b._canLabelFloat())("mat-form-field-should-float",b._shouldLabelFloat())("mat-form-field-has-label",b._hasFloatingLabel())("mat-form-field-hide-placeholder",b._hideControlPlaceholder())("mat-form-field-disabled",b._control.disabled)("mat-form-field-autofilled",b._control.autofilled)("mat-focused",b._control.focused)("ng-untouched",b._shouldForward("untouched"))("ng-touched",b._shouldForward("touched"))("ng-pristine",b._shouldForward("pristine"))("ng-dirty",b._shouldForward("dirty"))("ng-valid",b._shouldForward("valid"))("ng-invalid",b._shouldForward("invalid"))("ng-pending",b._shouldForward("pending"))("_mat-animation-noopable",!b._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[w._Bn([{provide:bi,useExisting:h}]),w.qOj],ngContentSelectors:Wu,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(d,b){1&d&&(w.F$t(ia),w.TgZ(0,"div",0),w.TgZ(1,"div",1,2),w.NdJ("click",function(N){return b._control.onContainerClick&&b._control.onContainerClick(N)}),w.YNc(3,Gs,9,0,"ng-container",3),w.YNc(4,Do,2,0,"div",4),w.TgZ(5,"div",5,6),w.Hsn(7),w.TgZ(8,"span",7),w.YNc(9,pd,5,16,"label",8),w.qZA(),w.qZA(),w.YNc(10,Lh,2,0,"div",9),w.qZA(),w.YNc(11,ah,3,4,"div",10),w.TgZ(12,"div",11),w.YNc(13,Ml,2,1,"div",12),w.YNc(14,xs,5,2,"div",13),w.qZA(),w.qZA()),2&d&&(w.xp6(3),w.Q6J("ngIf","outline"==b.appearance),w.xp6(1),w.Q6J("ngIf",b._prefixChildren.length),w.xp6(5),w.Q6J("ngIf",b._hasFloatingLabel()),w.xp6(1),w.Q6J("ngIf",b._suffixChildren.length),w.xp6(1),w.Q6J("ngIf","outline"!=b.appearance),w.xp6(1),w.Q6J("ngSwitch",b._getDisplayedMessages()),w.xp6(1),w.Q6J("ngSwitchCase","error"),w.xp6(1),w.Q6J("ngSwitchCase","hint"))},directives:[O.O5,O.RF,O.n9,Nt],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Zs.transitionMessages]},changeDetection:0}),h})(),sc=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({imports:[[O.ez,vs,at],vs]}),h})();var _u=Y(6465),vu=Y(6102);new class extends vu.v{flush(g){this.active=!0,this.scheduled=void 0;const{actions:d}=this;let b,S=-1,N=d.length;g=g||d.shift();do{if(b=g.execute(g.state,g.delay))break}while(++S<N&&(g=d.shift()));if(this.active=!1,b){for(;++S<N&&(g=d.shift());)g.unsubscribe();throw b}}}(class extends _u.o{constructor(g,d){super(g,d),this.scheduler=g,this.work=d}requestAsyncId(g,d,b=0){return null!==b&&b>0?super.requestAsyncId(g,d,b):(g.actions.push(this),g.scheduled||(g.scheduled=requestAnimationFrame(()=>g.flush(null))))}recycleAsyncId(g,d,b=0){if(null!==b&&b>0||null===b&&this.delay>0)return super.recycleAsyncId(g,d,b);0===g.actions.length&&(cancelAnimationFrame(d),g.scheduled=void 0)}});Y(4581);var el=Y(3637);class Ka{constructor(g){this.durationSelector=g}call(g,d){return d.subscribe(new jc(g,this.durationSelector))}}class jc extends qe.Ds{constructor(g,d){super(g),this.durationSelector=d,this.hasValue=!1}_next(g){if(this.value=g,this.hasValue=!0,!this.throttled){let d;try{const{durationSelector:S}=this;d=S(g)}catch(S){return this.destination.error(S)}const b=(0,qe.ft)(d,new qe.IY(this));!b||b.closed?this.clearThrottle():this.add(this.throttled=b)}}clearThrottle(){const{value:g,hasValue:d,throttled:b}=this;b&&(this.remove(b),this.throttled=void 0,b.unsubscribe()),d&&(this.value=void 0,this.hasValue=!1,this.destination.next(g))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var So=Y(6561),Ps=Y(4869);function xl(h){const{index:g,period:d,subscriber:b}=h;if(b.next(g),!b.closed){if(-1===d)return b.complete();h.index=g+1,this.schedule(h,d)}}function tl(h,g=el.P){return function(h){return function(d){return d.lift(new Ka(h))}}(()=>function(h=0,g,d){let b=-1;return(0,So.k)(g)?b=Number(g)<1?1:Number(g):(0,Ps.K)(g)&&(d=g),(0,Ps.K)(d)||(d=el.P),new Ye.y(S=>{const N=(0,So.k)(h)?h:+h-d.now();return d.schedule(xl,N,{index:0,period:b,subscriber:S})})}(h,g))}Y(9328);var oa=Y(3190);Y(2066);class _o{constructor(g=!1,d,b=!0){this._multiple=g,this._emitChanges=b,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ee.xQ,d&&d.length&&(g?d.forEach(S=>this._markSelected(S)):this._markSelected(d[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...g){this._verifyValueAssignment(g),g.forEach(d=>this._markSelected(d)),this._emitChangeEvent()}deselect(...g){this._verifyValueAssignment(g),g.forEach(d=>this._unmarkSelected(d)),this._emitChangeEvent()}toggle(g){this.isSelected(g)?this.deselect(g):this.select(g)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(g){return this._selection.has(g)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(g){this._multiple&&this.selected&&this._selected.sort(g)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(g){this.isSelected(g)||(this._multiple||this._unmarkAll(),this._selection.add(g),this._emitChanges&&this._selectedToEmit.push(g))}_unmarkSelected(g){this.isSelected(g)&&(this._selection.delete(g),this._emitChanges&&this._deselectedToEmit.push(g))}_unmarkAll(){this.isEmpty()||this._selection.forEach(g=>this._unmarkSelected(g))}_verifyValueAssignment(g){}}let Tu=(()=>{class h{constructor(d,b,S){this._ngZone=d,this._platform=b,this._scrolled=new ee.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=S}register(d){this.scrollContainers.has(d)||this.scrollContainers.set(d,d.elementScrolled().subscribe(()=>this._scrolled.next(d)))}deregister(d){const b=this.scrollContainers.get(d);b&&(b.unsubscribe(),this.scrollContainers.delete(d))}scrolled(d=20){return this._platform.isBrowser?new Ye.y(b=>{this._globalSubscription||this._addGlobalListener();const S=d>0?this._scrolled.pipe(tl(d)).subscribe(b):this._scrolled.subscribe(b);return this._scrolledCount++,()=>{S.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,wn.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((d,b)=>this.deregister(b)),this._scrolled.complete()}ancestorScrolled(d,b){const S=this.getAncestorScrollContainers(d);return this.scrolled(b).pipe((0,Yi.h)(N=>!N||S.indexOf(N)>-1))}getAncestorScrollContainers(d){const b=[];return this.scrollContainers.forEach((S,N)=>{this._scrollableContainsElement(N,d)&&b.push(N)}),b}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(d,b){let S=De(b),N=d.getElementRef().nativeElement;do{if(S==N)return!0}while(S=S.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>$u(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return h.\u0275fac=function(d){return new(d||h)(w.LFG(w.R0b),w.LFG($t),w.LFG(O.K0,8))},h.\u0275prov=w.Yz7({factory:function(){return new h(w.LFG(w.R0b),w.LFG($t),w.LFG(O.K0,8))},token:h,providedIn:"root"}),h})(),nl=(()=>{class h{constructor(d,b,S){this._platform=d,this._change=new ee.xQ,this._changeListener=N=>{this._change.next(N)},this._document=S,b.runOutsideAngular(()=>{if(d.isBrowser){const N=this._getWindow();N.addEventListener("resize",this._changeListener),N.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const d=this._getWindow();d.removeEventListener("resize",this._changeListener),d.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const d={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),d}getViewportRect(){const d=this.getViewportScrollPosition(),{width:b,height:S}=this.getViewportSize();return{top:d.top,left:d.left,bottom:d.top+S,right:d.left+b,height:S,width:b}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const d=this._document,b=this._getWindow(),S=d.documentElement,N=S.getBoundingClientRect();return{top:-N.top||d.body.scrollTop||b.scrollY||S.scrollTop||0,left:-N.left||d.body.scrollLeft||b.scrollX||S.scrollLeft||0}}change(d=20){return d>0?this._change.pipe(tl(d)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const d=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:d.innerWidth,height:d.innerHeight}:{width:0,height:0}}}return h.\u0275fac=function(d){return new(d||h)(w.LFG($t),w.LFG(w.R0b),w.LFG(O.K0,8))},h.\u0275prov=w.Yz7({factory:function(){return new h(w.LFG($t),w.LFG(w.R0b),w.LFG(O.K0,8))},token:h,providedIn:"root"}),h})(),aa=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({}),h})(),rl=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({imports:[[Ei,vr,aa],Ei,aa]}),h})();class Rl{attach(g){return this._attachedHost=g,g.attach(this)}detach(){let g=this._attachedHost;null!=g&&(this._attachedHost=null,g.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(g){this._attachedHost=g}}class qc extends Rl{constructor(g,d,b,S){super(),this.component=g,this.viewContainerRef=d,this.injector=b,this.componentFactoryResolver=S}}class cc extends Rl{constructor(g,d,b){super(),this.templateRef=g,this.viewContainerRef=d,this.context=b}get origin(){return this.templateRef.elementRef}attach(g,d=this.context){return this.context=d,super.attach(g)}detach(){return this.context=void 0,super.detach()}}class dh extends Rl{constructor(g){super(),this.element=g instanceof w.SBq?g.nativeElement:g}}class Jo extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(g){return g instanceof qc?(this._attachedPortal=g,this.attachComponentPortal(g)):g instanceof cc?(this._attachedPortal=g,this.attachTemplatePortal(g)):this.attachDomPortal&&g instanceof dh?(this._attachedPortal=g,this.attachDomPortal(g)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(g){this._disposeFn=g}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(g,d,b,S,N){super(),this.outletElement=g,this._componentFactoryResolver=d,this._appRef=b,this._defaultInjector=S,this.attachDomPortal=Q=>{const ue=Q.element,Ee=this._document.createComment("dom-portal");ue.parentNode.insertBefore(Ee,ue),this.outletElement.appendChild(ue),this._attachedPortal=Q,super.setDisposeFn(()=>{Ee.parentNode&&Ee.parentNode.replaceChild(ue,Ee)})},this._document=N}attachComponentPortal(g){const b=(g.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(g.component);let S;return g.viewContainerRef?(S=g.viewContainerRef.createComponent(b,g.viewContainerRef.length,g.injector||g.viewContainerRef.injector),this.setDisposeFn(()=>S.destroy())):(S=b.create(g.injector||this._defaultInjector),this._appRef.attachView(S.hostView),this.setDisposeFn(()=>{this._appRef.detachView(S.hostView),S.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(S)),this._attachedPortal=g,S}attachTemplatePortal(g){let d=g.viewContainerRef,b=d.createEmbeddedView(g.templateRef,g.context);return b.rootNodes.forEach(S=>this.outletElement.appendChild(S)),b.detectChanges(),this.setDisposeFn(()=>{let S=d.indexOf(b);-1!==S&&d.remove(S)}),this._attachedPortal=g,b}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(g){return g.hostView.rootNodes[0]}}let il=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({}),h})();class Cd{constructor(g,d){this.predicate=g,this.inclusive=d}call(g,d){return d.subscribe(new ua(g,this.predicate,this.inclusive))}}class ua extends xi.L{constructor(g,d,b){super(g),this.predicate=d,this.inclusive=b,this.index=0}_next(g){const d=this.destination;let b;try{b=this.predicate(g,this.index++)}catch(S){return void d.error(S)}this.nextOrComplete(g,b)}nextOrComplete(g,d){const b=this.destination;Boolean(d)?b.next(g):(this.inclusive&&b.next(g),b.complete())}}const Au=os();class ol{constructor(g,d){this._viewportRuler=g,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=d}attach(){}enable(){if(this._canBeEnabled()){const g=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=g.style.left||"",this._previousHTMLStyles.top=g.style.top||"",g.style.left=pe(-this._previousScrollPosition.left),g.style.top=pe(-this._previousScrollPosition.top),g.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const g=this._document.documentElement,b=g.style,S=this._document.body.style,N=b.scrollBehavior||"",Q=S.scrollBehavior||"";this._isEnabled=!1,b.left=this._previousHTMLStyles.left,b.top=this._previousHTMLStyles.top,g.classList.remove("cdk-global-scrollblock"),Au&&(b.scrollBehavior=S.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Au&&(b.scrollBehavior=N,S.scrollBehavior=Q)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const d=this._document.body,b=this._viewportRuler.getViewportSize();return d.scrollHeight>b.height||d.scrollWidth>b.width}}class $c{constructor(g,d,b,S){this._scrollDispatcher=g,this._ngZone=d,this._viewportRuler=b,this._config=S,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(g){this._overlayRef=g}enable(){if(this._scrollSubscription)return;const g=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=g.subscribe(()=>{const d=this._viewportRuler.getViewportScrollPosition().top;Math.abs(d-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=g.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class sl{enable(){}disable(){}attach(){}}function dc(h,g){return g.some(d=>h.bottom<d.top||h.top>d.bottom||h.right<d.left||h.left>d.right)}function hc(h,g){return g.some(d=>h.top<d.top||h.bottom>d.bottom||h.left<d.left||h.right>d.right)}class Wc{constructor(g,d,b,S){this._scrollDispatcher=g,this._viewportRuler=d,this._ngZone=b,this._config=S,this._scrollSubscription=null}attach(g){this._overlayRef=g}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const d=this._overlayRef.overlayElement.getBoundingClientRect(),{width:b,height:S}=this._viewportRuler.getViewportSize();dc(d,[{width:b,height:S,bottom:S,right:b,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Yc=(()=>{class h{constructor(d,b,S,N){this._scrollDispatcher=d,this._viewportRuler=b,this._ngZone=S,this.noop=()=>new sl,this.close=Q=>new $c(this._scrollDispatcher,this._ngZone,this._viewportRuler,Q),this.block=()=>new ol(this._viewportRuler,this._document),this.reposition=Q=>new Wc(this._scrollDispatcher,this._viewportRuler,this._ngZone,Q),this._document=N}}return h.\u0275fac=function(d){return new(d||h)(w.LFG(Tu),w.LFG(nl),w.LFG(w.R0b),w.LFG(O.K0))},h.\u0275prov=w.Yz7({factory:function(){return new h(w.LFG(Tu),w.LFG(nl),w.LFG(w.R0b),w.LFG(O.K0))},token:h,providedIn:"root"}),h})();class fc{constructor(g){if(this.scrollStrategy=new sl,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,g){const d=Object.keys(g);for(const b of d)void 0!==g[b]&&(this[b]=g[b])}}}class Xo{constructor(g,d,b,S,N){this.offsetX=b,this.offsetY=S,this.panelClass=N,this.originX=g.originX,this.originY=g.originY,this.overlayX=d.overlayX,this.overlayY=d.overlayY}}class la{constructor(g,d){this.connectionPair=g,this.scrollableViewProperties=d}}let Nl=(()=>{class h{constructor(d){this._attachedOverlays=[],this._document=d}ngOnDestroy(){this.detach()}add(d){this.remove(d),this._attachedOverlays.push(d)}remove(d){const b=this._attachedOverlays.indexOf(d);b>-1&&this._attachedOverlays.splice(b,1),0===this._attachedOverlays.length&&this.detach()}}return h.\u0275fac=function(d){return new(d||h)(w.LFG(O.K0))},h.\u0275prov=w.Yz7({factory:function(){return new h(w.LFG(O.K0))},token:h,providedIn:"root"}),h})(),wd=(()=>{class h extends Nl{constructor(d){super(d),this._keydownListener=b=>{const S=this._attachedOverlays;for(let N=S.length-1;N>-1;N--)if(S[N]._keydownEvents.observers.length>0){S[N]._keydownEvents.next(b);break}}}add(d){super.add(d),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return h.\u0275fac=function(d){return new(d||h)(w.LFG(O.K0))},h.\u0275prov=w.Yz7({factory:function(){return new h(w.LFG(O.K0))},token:h,providedIn:"root"}),h})(),gc=(()=>{class h extends Nl{constructor(d,b){super(d),this._platform=b,this._cursorStyleIsSet=!1,this._pointerDownListener=S=>{this._pointerDownEventTarget=F(S)},this._clickListener=S=>{const N=F(S),Q="click"===S.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:N;this._pointerDownEventTarget=null;const ue=this._attachedOverlays.slice();for(let Ee=ue.length-1;Ee>-1;Ee--){const Ge=ue[Ee];if(!(Ge._outsidePointerEvents.observers.length<1)&&Ge.hasAttached()){if(Ge.overlayElement.contains(N)||Ge.overlayElement.contains(Q))break;Ge._outsidePointerEvents.next(S)}}}}add(d){if(super.add(d),!this._isAttached){const b=this._document.body;b.addEventListener("pointerdown",this._pointerDownListener,!0),b.addEventListener("click",this._clickListener,!0),b.addEventListener("auxclick",this._clickListener,!0),b.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=b.style.cursor,b.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const d=this._document.body;d.removeEventListener("pointerdown",this._pointerDownListener,!0),d.removeEventListener("click",this._clickListener,!0),d.removeEventListener("auxclick",this._clickListener,!0),d.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(d.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return h.\u0275fac=function(d){return new(d||h)(w.LFG(O.K0),w.LFG($t))},h.\u0275prov=w.Yz7({factory:function(){return new h(w.LFG(O.K0),w.LFG($t))},token:h,providedIn:"root"}),h})(),$s=(()=>{class h{constructor(d,b){this._platform=b,this._document=d}ngOnDestroy(){const d=this._containerElement;d&&d.parentNode&&d.parentNode.removeChild(d)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const d="cdk-overlay-container";if(this._platform.isBrowser||ye()){const S=this._document.querySelectorAll(`.${d}[platform="server"], .${d}[platform="test"]`);for(let N=0;N<S.length;N++)S[N].parentNode.removeChild(S[N])}const b=this._document.createElement("div");b.classList.add(d),ye()?b.setAttribute("platform","test"):this._platform.isBrowser||b.setAttribute("platform","server"),this._document.body.appendChild(b),this._containerElement=b}}return h.\u0275fac=function(d){return new(d||h)(w.LFG(O.K0),w.LFG($t))},h.\u0275prov=w.Yz7({factory:function(){return new h(w.LFG(O.K0),w.LFG($t))},token:h,providedIn:"root"}),h})();class Ws{constructor(g,d,b,S,N,Q,ue,Ee,Ge){this._portalOutlet=g,this._host=d,this._pane=b,this._config=S,this._ngZone=N,this._keyboardDispatcher=Q,this._document=ue,this._location=Ee,this._outsideClickDispatcher=Ge,this._backdropElement=null,this._backdropClick=new ee.xQ,this._attachments=new ee.xQ,this._detachments=new ee.xQ,this._locationChanges=zt.w.EMPTY,this._backdropClickHandler=ht=>this._backdropClick.next(ht),this._keydownEvents=new ee.xQ,this._outsidePointerEvents=new ee.xQ,S.scrollStrategy&&(this._scrollStrategy=S.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=S.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(g){let d=this._portalOutlet.attach(g);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,to.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),d}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const g=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),g}dispose(){const g=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,g&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(g){g!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=g,this.hasAttached()&&(g.attach(this),this.updatePosition()))}updateSize(g){this._config=Object.assign(Object.assign({},this._config),g),this._updateElementSize()}setDirection(g){this._config=Object.assign(Object.assign({},this._config),{direction:g}),this._updateElementDirection()}addPanelClass(g){this._pane&&this._toggleClasses(this._pane,g,!0)}removePanelClass(g){this._pane&&this._toggleClasses(this._pane,g,!1)}getDirection(){const g=this._config.direction;return g?"string"==typeof g?g:g.value:"ltr"}updateScrollStrategy(g){g!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=g,this.hasAttached()&&(g.attach(this),g.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const g=this._pane.style;g.width=pe(this._config.width),g.height=pe(this._config.height),g.minWidth=pe(this._config.minWidth),g.minHeight=pe(this._config.minHeight),g.maxWidth=pe(this._config.maxWidth),g.maxHeight=pe(this._config.maxHeight)}_togglePointerEvents(g){this._pane.style.pointerEvents=g?"":"none"}_attachBackdrop(){const g="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(g)})}):this._backdropElement.classList.add(g)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const g=this._backdropElement;if(!g)return;let d;const b=()=>{g&&(g.removeEventListener("click",this._backdropClickHandler),g.removeEventListener("transitionend",b),this._disposeBackdrop(g)),this._config.backdropClass&&this._toggleClasses(g,this._config.backdropClass,!1),clearTimeout(d)};g.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{g.addEventListener("transitionend",b)}),g.style.pointerEvents="none",d=this._ngZone.runOutsideAngular(()=>setTimeout(b,500))}_toggleClasses(g,d,b){const S=g.classList;le(d).forEach(N=>{N&&(b?S.add(N):S.remove(N))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const g=this._ngZone.onStable.pipe(H((0,zu.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),g.unsubscribe())})})}_disposeScrollStrategy(){const g=this._scrollStrategy;g&&(g.disable(),g.detach&&g.detach())}_disposeBackdrop(g){g&&(g.parentNode&&g.parentNode.removeChild(g),this._backdropElement===g&&(this._backdropElement=null))}}const Ed="cdk-overlay-connected-position-bounding-box",mc=/([A-Za-z%]+)$/;class ca{constructor(g,d,b,S,N){this._viewportRuler=d,this._document=b,this._platform=S,this._overlayContainer=N,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ee.xQ,this._resizeSubscription=zt.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(g)}get positions(){return this._preferredPositions}attach(g){this._validatePositions(),g.hostElement.classList.add(Ed),this._overlayRef=g,this._boundingBox=g.hostElement,this._pane=g.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const g=this._originRect,d=this._overlayRect,b=this._viewportRect,S=[];let N;for(let Q of this._preferredPositions){let ue=this._getOriginPoint(g,Q),Ee=this._getOverlayPoint(ue,d,Q),Ge=this._getOverlayFit(Ee,d,b,Q);if(Ge.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(Q,ue);this._canFitWithFlexibleDimensions(Ge,Ee,b)?S.push({position:Q,origin:ue,overlayRect:d,boundingBoxRect:this._calculateBoundingBoxRect(ue,Q)}):(!N||N.overlayFit.visibleArea<Ge.visibleArea)&&(N={overlayFit:Ge,overlayPoint:Ee,originPoint:ue,position:Q,overlayRect:d})}if(S.length){let Q=null,ue=-1;for(const Ee of S){const Ge=Ee.boundingBoxRect.width*Ee.boundingBoxRect.height*(Ee.position.weight||1);Ge>ue&&(ue=Ge,Q=Ee)}return this._isPushed=!1,void this._applyPosition(Q.position,Q.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(N.position,N.originPoint);this._applyPosition(N.position,N.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Mu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Ed),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const g=this._lastPosition||this._preferredPositions[0],d=this._getOriginPoint(this._originRect,g);this._applyPosition(g,d)}}withScrollableContainers(g){return this._scrollables=g,this}withPositions(g){return this._preferredPositions=g,-1===g.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(g){return this._viewportMargin=g,this}withFlexibleDimensions(g=!0){return this._hasFlexibleDimensions=g,this}withGrowAfterOpen(g=!0){return this._growAfterOpen=g,this}withPush(g=!0){return this._canPush=g,this}withLockedPosition(g=!0){return this._positionLocked=g,this}setOrigin(g){return this._origin=g,this}withDefaultOffsetX(g){return this._offsetX=g,this}withDefaultOffsetY(g){return this._offsetY=g,this}withTransformOriginOn(g){return this._transformOriginSelector=g,this}_getOriginPoint(g,d){let b,S;if("center"==d.originX)b=g.left+g.width/2;else{const N=this._isRtl()?g.right:g.left,Q=this._isRtl()?g.left:g.right;b="start"==d.originX?N:Q}return S="center"==d.originY?g.top+g.height/2:"top"==d.originY?g.top:g.bottom,{x:b,y:S}}_getOverlayPoint(g,d,b){let S,N;return S="center"==b.overlayX?-d.width/2:"start"===b.overlayX?this._isRtl()?-d.width:0:this._isRtl()?0:-d.width,N="center"==b.overlayY?-d.height/2:"top"==b.overlayY?0:-d.height,{x:g.x+S,y:g.y+N}}_getOverlayFit(g,d,b,S){const N=eu(d);let{x:Q,y:ue}=g,Ee=this._getOffset(S,"x"),Ge=this._getOffset(S,"y");Ee&&(Q+=Ee),Ge&&(ue+=Ge);let Dn=0-ue,bn=ue+N.height-b.height,Yn=this._subtractOverflows(N.width,0-Q,Q+N.width-b.width),Wr=this._subtractOverflows(N.height,Dn,bn),ts=Yn*Wr;return{visibleArea:ts,isCompletelyWithinViewport:N.width*N.height===ts,fitsInViewportVertically:Wr===N.height,fitsInViewportHorizontally:Yn==N.width}}_canFitWithFlexibleDimensions(g,d,b){if(this._hasFlexibleDimensions){const S=b.bottom-d.y,N=b.right-d.x,Q=Es(this._overlayRef.getConfig().minHeight),ue=Es(this._overlayRef.getConfig().minWidth),Ge=g.fitsInViewportHorizontally||null!=ue&&ue<=N;return(g.fitsInViewportVertically||null!=Q&&Q<=S)&&Ge}return!1}_pushOverlayOnScreen(g,d,b){if(this._previousPushAmount&&this._positionLocked)return{x:g.x+this._previousPushAmount.x,y:g.y+this._previousPushAmount.y};const S=eu(d),N=this._viewportRect,Q=Math.max(g.x+S.width-N.width,0),ue=Math.max(g.y+S.height-N.height,0),Ee=Math.max(N.top-b.top-g.y,0),Ge=Math.max(N.left-b.left-g.x,0);let ht=0,xt=0;return ht=S.width<=N.width?Ge||-Q:g.x<this._viewportMargin?N.left-b.left-g.x:0,xt=S.height<=N.height?Ee||-ue:g.y<this._viewportMargin?N.top-b.top-g.y:0,this._previousPushAmount={x:ht,y:xt},{x:g.x+ht,y:g.y+xt}}_applyPosition(g,d){if(this._setTransformOrigin(g),this._setOverlayElementStyles(d,g),this._setBoundingBoxStyles(d,g),g.panelClass&&this._addPanelClasses(g.panelClass),this._lastPosition=g,this._positionChanges.observers.length){const b=this._getScrollVisibility(),S=new la(g,b);this._positionChanges.next(S)}this._isInitialRender=!1}_setTransformOrigin(g){if(!this._transformOriginSelector)return;const d=this._boundingBox.querySelectorAll(this._transformOriginSelector);let b,S=g.overlayY;b="center"===g.overlayX?"center":this._isRtl()?"start"===g.overlayX?"right":"left":"start"===g.overlayX?"left":"right";for(let N=0;N<d.length;N++)d[N].style.transformOrigin=`${b} ${S}`}_calculateBoundingBoxRect(g,d){const b=this._viewportRect,S=this._isRtl();let N,Q,ue,ht,xt,Dn;if("top"===d.overlayY)Q=g.y,N=b.height-Q+this._viewportMargin;else if("bottom"===d.overlayY)ue=b.height-g.y+2*this._viewportMargin,N=b.height-ue+this._viewportMargin;else{const bn=Math.min(b.bottom-g.y+b.top,g.y),Yn=this._lastBoundingBoxSize.height;N=2*bn,Q=g.y-bn,N>Yn&&!this._isInitialRender&&!this._growAfterOpen&&(Q=g.y-Yn/2)}if("end"===d.overlayX&&!S||"start"===d.overlayX&&S)Dn=b.width-g.x+this._viewportMargin,ht=g.x-this._viewportMargin;else if("start"===d.overlayX&&!S||"end"===d.overlayX&&S)xt=g.x,ht=b.right-g.x;else{const bn=Math.min(b.right-g.x+b.left,g.x),Yn=this._lastBoundingBoxSize.width;ht=2*bn,xt=g.x-bn,ht>Yn&&!this._isInitialRender&&!this._growAfterOpen&&(xt=g.x-Yn/2)}return{top:Q,left:xt,bottom:ue,right:Dn,width:ht,height:N}}_setBoundingBoxStyles(g,d){const b=this._calculateBoundingBoxRect(g,d);!this._isInitialRender&&!this._growAfterOpen&&(b.height=Math.min(b.height,this._lastBoundingBoxSize.height),b.width=Math.min(b.width,this._lastBoundingBoxSize.width));const S={};if(this._hasExactPosition())S.top=S.left="0",S.bottom=S.right=S.maxHeight=S.maxWidth="",S.width=S.height="100%";else{const N=this._overlayRef.getConfig().maxHeight,Q=this._overlayRef.getConfig().maxWidth;S.height=pe(b.height),S.top=pe(b.top),S.bottom=pe(b.bottom),S.width=pe(b.width),S.left=pe(b.left),S.right=pe(b.right),S.alignItems="center"===d.overlayX?"center":"end"===d.overlayX?"flex-end":"flex-start",S.justifyContent="center"===d.overlayY?"center":"bottom"===d.overlayY?"flex-end":"flex-start",N&&(S.maxHeight=pe(N)),Q&&(S.maxWidth=pe(Q))}this._lastBoundingBoxSize=b,Mu(this._boundingBox.style,S)}_resetBoundingBoxStyles(){Mu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Mu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(g,d){const b={},S=this._hasExactPosition(),N=this._hasFlexibleDimensions,Q=this._overlayRef.getConfig();if(S){const ht=this._viewportRuler.getViewportScrollPosition();Mu(b,this._getExactOverlayY(d,g,ht)),Mu(b,this._getExactOverlayX(d,g,ht))}else b.position="static";let ue="",Ee=this._getOffset(d,"x"),Ge=this._getOffset(d,"y");Ee&&(ue+=`translateX(${Ee}px) `),Ge&&(ue+=`translateY(${Ge}px)`),b.transform=ue.trim(),Q.maxHeight&&(S?b.maxHeight=pe(Q.maxHeight):N&&(b.maxHeight="")),Q.maxWidth&&(S?b.maxWidth=pe(Q.maxWidth):N&&(b.maxWidth="")),Mu(this._pane.style,b)}_getExactOverlayY(g,d,b){let S={top:"",bottom:""},N=this._getOverlayPoint(d,this._overlayRect,g);this._isPushed&&(N=this._pushOverlayOnScreen(N,this._overlayRect,b));let Q=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return N.y-=Q,"bottom"===g.overlayY?S.bottom=this._document.documentElement.clientHeight-(N.y+this._overlayRect.height)+"px":S.top=pe(N.y),S}_getExactOverlayX(g,d,b){let Q,S={left:"",right:""},N=this._getOverlayPoint(d,this._overlayRect,g);return this._isPushed&&(N=this._pushOverlayOnScreen(N,this._overlayRect,b)),Q=this._isRtl()?"end"===g.overlayX?"left":"right":"end"===g.overlayX?"right":"left","right"===Q?S.right=this._document.documentElement.clientWidth-(N.x+this._overlayRect.width)+"px":S.left=pe(N.x),S}_getScrollVisibility(){const g=this._getOriginRect(),d=this._pane.getBoundingClientRect(),b=this._scrollables.map(S=>S.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:hc(g,b),isOriginOutsideView:dc(g,b),isOverlayClipped:hc(d,b),isOverlayOutsideView:dc(d,b)}}_subtractOverflows(g,...d){return d.reduce((b,S)=>b-Math.max(S,0),g)}_getNarrowedViewportRect(){const g=this._document.documentElement.clientWidth,d=this._document.documentElement.clientHeight,b=this._viewportRuler.getViewportScrollPosition();return{top:b.top+this._viewportMargin,left:b.left+this._viewportMargin,right:b.left+g-this._viewportMargin,bottom:b.top+d-this._viewportMargin,width:g-2*this._viewportMargin,height:d-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(g,d){return"x"===d?null==g.offsetX?this._offsetX:g.offsetX:null==g.offsetY?this._offsetY:g.offsetY}_validatePositions(){}_addPanelClasses(g){this._pane&&le(g).forEach(d=>{""!==d&&-1===this._appliedPanelClasses.indexOf(d)&&(this._appliedPanelClasses.push(d),this._pane.classList.add(d))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(g=>{this._pane.classList.remove(g)}),this._appliedPanelClasses=[])}_getOriginRect(){const g=this._origin;if(g instanceof w.SBq)return g.nativeElement.getBoundingClientRect();if(g instanceof Element)return g.getBoundingClientRect();const d=g.width||0,b=g.height||0;return{top:g.y,bottom:g.y+b,left:g.x,right:g.x+d,height:b,width:d}}}function Mu(h,g){for(let d in g)g.hasOwnProperty(d)&&(h[d]=g[d]);return h}function Es(h){if("number"!=typeof h&&null!=h){const[g,d]=h.split(mc);return d&&"px"!==d?null:parseFloat(g)}return h||null}function eu(h){return{top:Math.floor(h.top),right:Math.floor(h.right),bottom:Math.floor(h.bottom),left:Math.floor(h.left),width:Math.floor(h.width),height:Math.floor(h.height)}}class Ci{constructor(g,d,b,S,N,Q,ue){this._preferredPositions=[],this._positionStrategy=new ca(b,S,N,Q,ue).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(g,d),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(g){this._overlayRef=g,this._positionStrategy.attach(g),this._direction&&(g.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(g){this._positionStrategy.withScrollableContainers(g)}withFallbackPosition(g,d,b,S){const N=new Xo(g,d,b,S);return this._preferredPositions.push(N),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(g){return this._overlayRef?this._overlayRef.setDirection(g):this._direction=g,this}withOffsetX(g){return this._positionStrategy.withDefaultOffsetX(g),this}withOffsetY(g){return this._positionStrategy.withDefaultOffsetY(g),this}withLockedPosition(g){return this._positionStrategy.withLockedPosition(g),this}withPositions(g){return this._preferredPositions=g.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(g){return this._positionStrategy.setOrigin(g),this}}const si="cdk-global-overlay-wrapper";class Iu{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(g){const d=g.getConfig();this._overlayRef=g,this._width&&!d.width&&g.updateSize({width:this._width}),this._height&&!d.height&&g.updateSize({height:this._height}),g.hostElement.classList.add(si),this._isDisposed=!1}top(g=""){return this._bottomOffset="",this._topOffset=g,this._alignItems="flex-start",this}left(g=""){return this._rightOffset="",this._leftOffset=g,this._justifyContent="flex-start",this}bottom(g=""){return this._topOffset="",this._bottomOffset=g,this._alignItems="flex-end",this}right(g=""){return this._leftOffset="",this._rightOffset=g,this._justifyContent="flex-end",this}width(g=""){return this._overlayRef?this._overlayRef.updateSize({width:g}):this._width=g,this}height(g=""){return this._overlayRef?this._overlayRef.updateSize({height:g}):this._height=g,this}centerHorizontally(g=""){return this.left(g),this._justifyContent="center",this}centerVertically(g=""){return this.top(g),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const g=this._overlayRef.overlayElement.style,d=this._overlayRef.hostElement.style,b=this._overlayRef.getConfig(),{width:S,height:N,maxWidth:Q,maxHeight:ue}=b,Ee=!("100%"!==S&&"100vw"!==S||Q&&"100%"!==Q&&"100vw"!==Q),Ge=!("100%"!==N&&"100vh"!==N||ue&&"100%"!==ue&&"100vh"!==ue);g.position=this._cssPosition,g.marginLeft=Ee?"0":this._leftOffset,g.marginTop=Ge?"0":this._topOffset,g.marginBottom=this._bottomOffset,g.marginRight=this._rightOffset,Ee?d.justifyContent="flex-start":"center"===this._justifyContent?d.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?d.justifyContent="flex-end":"flex-end"===this._justifyContent&&(d.justifyContent="flex-start"):d.justifyContent=this._justifyContent,d.alignItems=Ge?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const g=this._overlayRef.overlayElement.style,d=this._overlayRef.hostElement,b=d.style;d.classList.remove(si),b.justifyContent=b.alignItems=g.marginTop=g.marginBottom=g.marginLeft=g.marginRight=g.position="",this._overlayRef=null,this._isDisposed=!0}}let _c=(()=>{class h{constructor(d,b,S,N){this._viewportRuler=d,this._document=b,this._platform=S,this._overlayContainer=N}global(){return new Iu}connectedTo(d,b,S){return new Ci(b,S,d,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(d){return new ca(d,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return h.\u0275fac=function(d){return new(d||h)(w.LFG(nl),w.LFG(O.K0),w.LFG($t),w.LFG($s))},h.\u0275prov=w.Yz7({factory:function(){return new h(w.LFG(nl),w.LFG(O.K0),w.LFG($t),w.LFG($s))},token:h,providedIn:"root"}),h})(),$i=0,Ti=(()=>{class h{constructor(d,b,S,N,Q,ue,Ee,Ge,ht,xt,Dn){this.scrollStrategies=d,this._overlayContainer=b,this._componentFactoryResolver=S,this._positionBuilder=N,this._keyboardDispatcher=Q,this._injector=ue,this._ngZone=Ee,this._document=Ge,this._directionality=ht,this._location=xt,this._outsideClickDispatcher=Dn}create(d){const b=this._createHostElement(),S=this._createPaneElement(b),N=this._createPortalOutlet(S),Q=new fc(d);return Q.direction=Q.direction||this._directionality.value,new Ws(N,b,S,Q,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(d){const b=this._document.createElement("div");return b.id="cdk-overlay-"+$i++,b.classList.add("cdk-overlay-pane"),d.appendChild(b),b}_createHostElement(){const d=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(d),d}_createPortalOutlet(d){return this._appRef||(this._appRef=this._injector.get(w.z2F)),new Jo(d,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return h.\u0275fac=function(d){return new(d||h)(w.LFG(Yc),w.LFG($s),w.LFG(w._Vd),w.LFG(_c),w.LFG(wd),w.LFG(w.zs3),w.LFG(w.R0b),w.LFG(O.K0),w.LFG(Tr),w.LFG(O.Ye),w.LFG(gc))},h.\u0275prov=w.Yz7({token:h,factory:h.\u0275fac}),h})();const Mo=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],uo=new w.OlP("cdk-connected-overlay-scroll-strategy");let hs=(()=>{class h{constructor(d){this.elementRef=d}}return h.\u0275fac=function(d){return new(d||h)(w.Y36(w.SBq))},h.\u0275dir=w.lG2({type:h,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),h})(),ko=(()=>{class h{constructor(d,b,S,N,Q){this._overlay=d,this._dir=Q,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=zt.w.EMPTY,this._attachSubscription=zt.w.EMPTY,this._detachSubscription=zt.w.EMPTY,this._positionSubscription=zt.w.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new w.vpe,this.positionChange=new w.vpe,this.attach=new w.vpe,this.detach=new w.vpe,this.overlayKeydown=new w.vpe,this.overlayOutsideClick=new w.vpe,this._templatePortal=new cc(b,S),this._scrollStrategyFactory=N,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(d){this._offsetX=d,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(d){this._offsetY=d,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(d){this._hasBackdrop=_e(d)}get lockPosition(){return this._lockPosition}set lockPosition(d){this._lockPosition=_e(d)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(d){this._flexibleDimensions=_e(d)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(d){this._growAfterOpen=_e(d)}get push(){return this._push}set push(d){this._push=_e(d)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(d){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),d.origin&&this.open&&this._position.apply()),d.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Mo);const d=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=d.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=d.detachments().subscribe(()=>this.detach.emit()),d.keydownEvents().subscribe(b=>{this.overlayKeydown.next(b),27===b.keyCode&&!this.disableClose&&!ci(b)&&(b.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(b=>{this.overlayOutsideClick.next(b)})}_buildConfig(){const d=this._position=this.positionStrategy||this._createPositionStrategy(),b=new fc({direction:this._dir,positionStrategy:d,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(b.width=this.width),(this.height||0===this.height)&&(b.height=this.height),(this.minWidth||0===this.minWidth)&&(b.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(b.minHeight=this.minHeight),this.backdropClass&&(b.backdropClass=this.backdropClass),this.panelClass&&(b.panelClass=this.panelClass),b}_updatePositionStrategy(d){const b=this.positions.map(S=>({originX:S.originX,originY:S.originY,overlayX:S.overlayX,overlayY:S.overlayY,offsetX:S.offsetX||this.offsetX,offsetY:S.offsetY||this.offsetY,panelClass:S.panelClass||void 0}));return d.setOrigin(this.origin.elementRef).withPositions(b).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const d=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(d),d}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(d=>{this.backdropClick.emit(d)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(h,g=!1){return d=>d.lift(new Cd(h,g))}(()=>this.positionChange.observers.length>0)).subscribe(d=>{this.positionChange.emit(d),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return h.\u0275fac=function(d){return new(d||h)(w.Y36(Ti),w.Y36(w.Rgc),w.Y36(w.s_b),w.Y36(uo),w.Y36(Tr,8))},h.\u0275dir=w.lG2({type:h,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[w.TTD]}),h})();const al={provide:uo,deps:[Ti],useFactory:function(h){return()=>h.scrollStrategies.reposition()}};let Ou=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({providers:[Ti,al],imports:[[Ei,il,rl],rl]}),h})();var vc=Y(1439);const Td=["trigger"],es=["panel"];function Wt(h,g){if(1&h&&(w.TgZ(0,"span",8),w._uU(1),w.qZA()),2&h){const d=w.oxw();w.xp6(1),w.Oqu(d.placeholder)}}function Kc(h,g){if(1&h&&(w.TgZ(0,"span",12),w._uU(1),w.qZA()),2&h){const d=w.oxw(2);w.xp6(1),w.Oqu(d.triggerValue)}}function tu(h,g){1&h&&w.Hsn(0,0,["*ngSwitchCase","true"])}function Dd(h,g){if(1&h&&(w.TgZ(0,"span",9),w.YNc(1,Kc,2,1,"span",10),w.YNc(2,tu,1,0,"ng-content",11),w.qZA()),2&h){const d=w.oxw();w.Q6J("ngSwitch",!!d.customTrigger),w.xp6(2),w.Q6J("ngSwitchCase",!0)}}function Ll(h,g){if(1&h){const d=w.EpF();w.TgZ(0,"div",13),w.TgZ(1,"div",14,15),w.NdJ("@transformPanel.done",function(S){return w.CHM(d),w.oxw()._panelDoneAnimatingStream.next(S.toState)})("keydown",function(S){return w.CHM(d),w.oxw()._handleKeydown(S)}),w.Hsn(3,1),w.qZA(),w.qZA()}if(2&h){const d=w.oxw();w.Q6J("@transformPanelWrap",void 0),w.xp6(1),w.Gre("mat-select-panel ",d._getPanelTheme(),""),w.Udp("transform-origin",d._transformOrigin)("font-size",d._triggerFontSize,"px"),w.Q6J("ngClass",d.panelClass)("@transformPanel",d.multiple?"showing-multiple":"showing"),w.uIk("id",d.id+"-panel")("aria-multiselectable",d.multiple)("aria-label",d.ariaLabel||null)("aria-labelledby",d._getPanelAriaLabelledby())}}const ul=[[["mat-select-trigger"]],"*"],Sd=["mat-select-trigger","*"],Ks={transformPanelWrap:(0,Or.X$)("transformPanelWrap",[(0,Or.eR)("* => void",(0,Or.IO)("@transformPanel",[(0,Or.pV)()],{optional:!0}))]),transformPanel:(0,Or.X$)("transformPanel",[(0,Or.SB)("void",(0,Or.oB)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),(0,Or.SB)("showing",(0,Or.oB)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),(0,Or.SB)("showing-multiple",(0,Or.oB)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),(0,Or.eR)("void => *",(0,Or.jt)("120ms cubic-bezier(0, 0, 0.2, 1)")),(0,Or.eR)("* => void",(0,Or.jt)("100ms 25ms linear",(0,Or.oB)({opacity:0})))])};let us=0;const dl=new w.OlP("mat-select-scroll-strategy"),Ru=new w.OlP("MAT_SELECT_CONFIG"),ku={provide:dl,deps:[Ti],useFactory:function(h){return()=>h.scrollStrategies.reposition()}};class Ul{constructor(g,d){this.source=g,this.value=d}}const hl=qu(Ba(Zu(Vs(class{constructor(h,g,d,b,S){this._elementRef=h,this._defaultErrorStateMatcher=g,this._parentForm=d,this._parentFormGroup=b,this.ngControl=S}})))),Qc=new w.OlP("MatSelectTrigger");let ph=(()=>{class h extends hl{constructor(d,b,S,N,Q,ue,Ee,Ge,ht,xt,Dn,bn,Yn,Wr){var ts,ka,gl;super(Q,N,Ee,Ge,xt),this._viewportRuler=d,this._changeDetectorRef=b,this._ngZone=S,this._dir=ue,this._parentFormField=ht,this._liveAnnouncer=Yn,this._defaultOptions=Wr,this._panelOpen=!1,this._compareWith=(Io,Fs)=>Io===Fs,this._uid="mat-select-"+us++,this._triggerAriaLabelledBy=null,this._destroy=new ee.xQ,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+us++,this._panelDoneAnimatingStream=new ee.xQ,this._overlayPanelClass=(null===(ts=this._defaultOptions)||void 0===ts?void 0:ts.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(gl=null===(ka=this._defaultOptions)||void 0===ka?void 0:ka.disableOptionCentering)&&void 0!==gl&&gl,this.ariaLabel="",this.optionSelectionChanges=(0,vc.P)(()=>{const Io=this.options;return Io?Io.changes.pipe((0,Hs.O)(Io),(0,oa.w)(()=>(0,zu.T)(...Io.map(Fs=>Fs.onSelectionChange)))):this._ngZone.onStable.pipe((0,to.q)(1),(0,oa.w)(()=>this.optionSelectionChanges))}),this.openedChange=new w.vpe,this._openedStream=this.openedChange.pipe((0,Yi.h)(Io=>Io),(0,Ki.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,Yi.h)(Io=>!Io),(0,Ki.U)(()=>{})),this.selectionChange=new w.vpe,this.valueChange=new w.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==Wr?void 0:Wr.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=Wr.typeaheadDebounceInterval),this._scrollStrategyFactory=bn,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(Dn)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(d){this._placeholder=d,this.stateChanges.next()}get required(){return this._required}set required(d){this._required=_e(d),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(d){this._multiple=_e(d)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(d){this._disableOptionCentering=_e(d)}get compareWith(){return this._compareWith}set compareWith(d){this._compareWith=d,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(d){(d!==this._value||this._multiple&&Array.isArray(d))&&(this.options&&this._setSelectionByValue(d),this._value=d)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(d){this._typeaheadDebounceInterval=re(d)}get id(){return this._id}set id(d){this._id=d||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new _o(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,ne.x)(),H(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(H(this._destroy)).subscribe(d=>{d.added.forEach(b=>b.select()),d.removed.forEach(b=>b.deselect())}),this.options.changes.pipe((0,Hs.O)(null),H(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const d=this._getTriggerAriaLabelledby();if(d!==this._triggerAriaLabelledBy){const b=this._elementRef.nativeElement;this._triggerAriaLabelledBy=d,d?b.setAttribute("aria-labelledby",d):b.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(d){d.disabled&&this.stateChanges.next(),d.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(d){this.value=d}registerOnChange(d){this._onChange=d}registerOnTouched(d){this._onTouched=d}setDisabledState(d){this.disabled=d,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var d,b;return this.multiple?(null===(d=this._selectionModel)||void 0===d?void 0:d.selected)||[]:null===(b=this._selectionModel)||void 0===b?void 0:b.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const d=this._selectionModel.selected.map(b=>b.viewValue);return this._isRtl()&&d.reverse(),d.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(d){this.disabled||(this.panelOpen?this._handleOpenKeydown(d):this._handleClosedKeydown(d))}_handleClosedKeydown(d){const b=d.keyCode,S=40===b||38===b||37===b||39===b,N=13===b||32===b,Q=this._keyManager;if(!Q.isTyping()&&N&&!ci(d)||(this.multiple||d.altKey)&&S)d.preventDefault(),this.open();else if(!this.multiple){const ue=this.selected;Q.onKeydown(d);const Ee=this.selected;Ee&&ue!==Ee&&this._liveAnnouncer.announce(Ee.viewValue,1e4)}}_handleOpenKeydown(d){const b=this._keyManager,S=d.keyCode,N=40===S||38===S,Q=b.isTyping();if(N&&d.altKey)d.preventDefault(),this.close();else if(Q||13!==S&&32!==S||!b.activeItem||ci(d))if(!Q&&this._multiple&&65===S&&d.ctrlKey){d.preventDefault();const ue=this.options.some(Ee=>!Ee.disabled&&!Ee.selected);this.options.forEach(Ee=>{Ee.disabled||(ue?Ee.select():Ee.deselect())})}else{const ue=b.activeItemIndex;b.onKeydown(d),this._multiple&&N&&d.shiftKey&&b.activeItem&&b.activeItemIndex!==ue&&b.activeItem._selectViaInteraction()}else d.preventDefault(),b.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,to.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(d){if(this._selectionModel.selected.forEach(b=>b.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&d)Array.isArray(d),d.forEach(b=>this._selectValue(b)),this._sortValues();else{const b=this._selectValue(d);b?this._keyManager.updateActiveItem(b):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(d){const b=this.options.find(S=>{if(this._selectionModel.isSelected(S))return!1;try{return null!=S.value&&this._compareWith(S.value,d)}catch(N){return!1}});return b&&this._selectionModel.select(b),b}_initKeyManager(){this._keyManager=new Tn(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(H(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(H(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const d=(0,zu.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(H(d)).subscribe(b=>{this._onSelect(b.source,b.isUserInput),b.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,zu.T)(...this.options.map(b=>b._stateChanges)).pipe(H(d)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(d,b){const S=this._selectionModel.isSelected(d);null!=d.value||this._multiple?(S!==d.selected&&(d.selected?this._selectionModel.select(d):this._selectionModel.deselect(d)),b&&this._keyManager.setActiveItem(d),this.multiple&&(this._sortValues(),b&&this.focus())):(d.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(d.value)),S!==this._selectionModel.isSelected(d)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const d=this.options.toArray();this._selectionModel.sort((b,S)=>this.sortComparator?this.sortComparator(b,S,d):d.indexOf(b)-d.indexOf(S)),this.stateChanges.next()}}_propagateChanges(d){let b=null;b=this.multiple?this.selected.map(S=>S.value):this.selected?this.selected.value:d,this._value=b,this.valueChange.emit(b),this._onChange(b),this.selectionChange.emit(this._getChangeEvent(b)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var d;return!this._panelOpen&&!this.disabled&&(null===(d=this.options)||void 0===d?void 0:d.length)>0}focus(d){this._elementRef.nativeElement.focus(d)}_getPanelAriaLabelledby(){var d;if(this.ariaLabel)return null;const b=null===(d=this._parentFormField)||void 0===d?void 0:d.getLabelId();return this.ariaLabelledby?(b?b+" ":"")+this.ariaLabelledby:b}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var d;if(this.ariaLabel)return null;const b=null===(d=this._parentFormField)||void 0===d?void 0:d.getLabelId();let S=(b?b+" ":"")+this._valueId;return this.ariaLabelledby&&(S+=" "+this.ariaLabelledby),S}_panelDoneAnimating(d){this.openedChange.emit(d)}setDescribedByIds(d){this._ariaDescribedby=d.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return h.\u0275fac=function(d){return new(d||h)(w.Y36(nl),w.Y36(w.sBO),w.Y36(w.R0b),w.Y36(lu),w.Y36(w.SBq),w.Y36(Tr,8),w.Y36(c.F,8),w.Y36(c.sg,8),w.Y36(bi,8),w.Y36(c.a5,10),w.$8M("tabindex"),w.Y36(dl),w.Y36(pi),w.Y36(Ru,8))},h.\u0275dir=w.lG2({type:h,viewQuery:function(d,b){if(1&d&&(w.Gf(Td,5),w.Gf(es,5),w.Gf(ko,5)),2&d){let S;w.iGM(S=w.CRH())&&(b.trigger=S.first),w.iGM(S=w.CRH())&&(b.panel=S.first),w.iGM(S=w.CRH())&&(b._overlayDir=S.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[w.qOj,w.TTD]}),h})(),Fu=(()=>{class h extends ph{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(d,b,S){const N=this._getItemHeight();return Math.min(Math.max(0,N*d-b+N/2),S)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(H(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,to.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(d){const b=za(d,this.options,this.optionGroups),S=this._getItemHeight();this.panel.nativeElement.scrollTop=0===d&&1===b?0:function(h,g,d,b){return h<d?h:h+g>d+256?Math.max(0,h-256+g):d}((d+b)*S,S,this.panel.nativeElement.scrollTop)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(d){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(d)}_getChangeEvent(d){return new Ul(this,d)}_calculateOverlayOffsetX(){const d=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),b=this._viewportRuler.getViewportSize(),S=this._isRtl(),N=this.multiple?56:32;let Q;if(this.multiple)Q=40;else if(this.disableOptionCentering)Q=16;else{let Ge=this._selectionModel.selected[0]||this.options.first;Q=Ge&&Ge.group?32:16}S||(Q*=-1);const ue=0-(d.left+Q-(S?N:0)),Ee=d.right+Q-b.width+(S?0:N);ue>0?Q+=ue+8:Ee>0&&(Q-=Ee+8),this._overlayDir.offsetX=Math.round(Q),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(d,b,S){const N=this._getItemHeight(),Q=(N-this._triggerRect.height)/2,ue=Math.floor(256/N);let Ee;return this.disableOptionCentering?0:(Ee=0===this._scrollTop?d*N:this._scrollTop===S?(d-(this._getItemCount()-ue))*N+(N-(this._getItemCount()*N-256)%N):b-N/2,Math.round(-1*Ee-Q))}_checkOverlayWithinViewport(d){const b=this._getItemHeight(),S=this._viewportRuler.getViewportSize(),N=this._triggerRect.top-8,Q=S.height-this._triggerRect.bottom-8,ue=Math.abs(this._offsetY),Ge=Math.min(this._getItemCount()*b,256)-ue-this._triggerRect.height;Ge>Q?this._adjustPanelUp(Ge,Q):ue>N?this._adjustPanelDown(ue,N,d):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(d,b){const S=Math.round(d-b);this._scrollTop-=S,this._offsetY-=S,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(d,b,S){const N=Math.round(d-b);if(this._scrollTop+=N,this._offsetY+=N,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=S)return this._scrollTop=S,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const d=this._getItemHeight(),b=this._getItemCount(),S=Math.min(b*d,256),Q=b*d-S;let ue;ue=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),ue+=za(ue,this.options,this.optionGroups);const Ee=S/2;this._scrollTop=this._calculateOverlayScroll(ue,Ee,Q),this._offsetY=this._calculateOverlayOffsetY(ue,Ee,Q),this._checkOverlayWithinViewport(Q)}_getOriginBasedOnOption(){const d=this._getItemHeight(),b=(d-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-b+d/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return h.\u0275fac=function(){let g;return function(b){return(g||(g=w.n5z(h)))(b||h)}}(),h.\u0275cmp=w.Xpm({type:h,selectors:[["mat-select"]],contentQueries:function(d,b,S){if(1&d&&(w.Suo(S,Qc,5),w.Suo(S,du,5),w.Suo(S,Yo,5)),2&d){let N;w.iGM(N=w.CRH())&&(b.customTrigger=N.first),w.iGM(N=w.CRH())&&(b.options=N),w.iGM(N=w.CRH())&&(b.optionGroups=N)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(d,b){1&d&&w.NdJ("keydown",function(N){return b._handleKeydown(N)})("focus",function(){return b._onFocus()})("blur",function(){return b._onBlur()}),2&d&&(w.uIk("id",b.id)("tabindex",b.tabIndex)("aria-controls",b.panelOpen?b.id+"-panel":null)("aria-expanded",b.panelOpen)("aria-label",b.ariaLabel||null)("aria-required",b.required.toString())("aria-disabled",b.disabled.toString())("aria-invalid",b.errorState)("aria-describedby",b._ariaDescribedby||null)("aria-activedescendant",b._getAriaActiveDescendant()),w.ekj("mat-select-disabled",b.disabled)("mat-select-invalid",b.errorState)("mat-select-required",b.required)("mat-select-empty",b.empty)("mat-select-multiple",b.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[w._Bn([{provide:fu,useExisting:h},{provide:Vo,useExisting:h}]),w.qOj],ngContentSelectors:Sd,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(d,b){if(1&d&&(w.F$t(ul),w.TgZ(0,"div",0,1),w.NdJ("click",function(){return b.toggle()}),w.TgZ(3,"div",2),w.YNc(4,Wt,2,1,"span",3),w.YNc(5,Dd,3,2,"span",4),w.qZA(),w.TgZ(6,"div",5),w._UZ(7,"div",6),w.qZA(),w.qZA(),w.YNc(8,Ll,4,14,"ng-template",7),w.NdJ("backdropClick",function(){return b.close()})("attach",function(){return b._onAttached()})("detach",function(){return b.close()})),2&d){const S=w.MAs(1);w.uIk("aria-owns",b.panelOpen?b.id+"-panel":null),w.xp6(3),w.Q6J("ngSwitch",b.empty),w.uIk("id",b._valueId),w.xp6(1),w.Q6J("ngSwitchCase",!0),w.xp6(1),w.Q6J("ngSwitchCase",!1),w.xp6(3),w.Q6J("cdkConnectedOverlayPanelClass",b._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",b._scrollStrategy)("cdkConnectedOverlayOrigin",S)("cdkConnectedOverlayOpen",b.panelOpen)("cdkConnectedOverlayPositions",b._positions)("cdkConnectedOverlayMinWidth",null==b._triggerRect?null:b._triggerRect.width)("cdkConnectedOverlayOffsetY",b._offsetY)}},directives:[hs,O.RF,O.n9,ko,O.ED,O.mk],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[Ks.transformPanelWrap,Ks.transformPanel]},changeDetection:0}),h})(),Qs=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({providers:[ku],imports:[[O.ez,Ou,Fc,vs],aa,sc,Fc,vs]}),h})();var Bh=Y(4552),Od=Y(1437);function xd(h,g){if(1&h&&(w.TgZ(0,"mat-option",18),w.TgZ(1,"div"),w.TgZ(2,"p"),w._uU(3),w.qZA(),w.qZA(),w.qZA()),2&h){const d=g.$implicit;w.Q6J("value",d.key),w.xp6(3),w.Oqu(d.description)}}function gh(h,g){if(1&h){const d=w.EpF();w.TgZ(0,"form",8),w.NdJ("ngSubmit",function(){w.CHM(d);const S=w.oxw(2);return S.submitStartChatForm(S.startChatForm)}),w.TgZ(1,"div",9),w.TgZ(2,"label",10),w._uU(3,"Username"),w.qZA(),w.TgZ(4,"div",11),w._UZ(5,"div",12),w._UZ(6,"input",13),w.qZA(),w.qZA(),w.TgZ(7,"div",14),w.TgZ(8,"mat-form-field"),w.TgZ(9,"mat-select",15),w.YNc(10,xd,4,2,"mat-option",16),w.qZA(),w.qZA(),w.qZA(),w.TgZ(11,"div"),w.TgZ(12,"button",17),w._uU(13," Start chat "),w.qZA(),w.qZA(),w.qZA()}if(2&h){const d=w.oxw(2);w.Q6J("formGroup",d.startChatForm),w.xp6(10),w.Q6J("ngForOf",d.menuOptions),w.xp6(2),w.Q6J("disabled",d.startChatForm.invalid)}}function Js(h,g){1&h&&(w.TgZ(0,"div"),w._uU(1," Your chat will be accepted soon! "),w.qZA())}const ks=function(h,g,d){return{chatId:h,domain:g,client:d}};function nu(h,g){if(1&h&&(w.TgZ(0,"div"),w.TgZ(1,"div",19),w._UZ(2,"app-chat-form-history",20),w.qZA(),w.TgZ(3,"div"),w._UZ(4,"app-chat-form",21),w.qZA(),w.qZA()),2&h){const d=w.oxw(2);w.xp6(2),w.Q6J("chatHistory",d.currentChat[0].chatHistory),w.xp6(2),w.Q6J("userInfo",w.kEZ(2,ks,d.clientChatId,d.clientChatDomain,d.clientUsername))}}function Vl(h,g){if(1&h&&(w.TgZ(0,"div",6),w.YNc(1,gh,14,3,"form",7),w.YNc(2,Js,2,0,"div",4),w.YNc(3,nu,5,6,"div",4),w.qZA()),2&h){const d=w.oxw();w.xp6(1),w.Q6J("ngIf","pending"!==(null==d.currentChat[0]?null:d.currentChat[0].status)&&"active"!==(null==d.currentChat[0]?null:d.currentChat[0].status)),w.xp6(1),w.Q6J("ngIf",d.currentChat.length>0&&"pending"==d.currentChat[0].status),w.xp6(1),w.Q6J("ngIf",d.currentChat.length>0&&"active"==d.currentChat[0].status)}}function ru(h,g){1&h&&(w.TgZ(0,"div"),w._uU(1," Block acc msg "),w.qZA())}function xa(h,g){if(1&h&&(w.TgZ(0,"li"),w._uU(1),w.qZA()),2&h){const d=w.oxw();w.xp6(1),w.Oqu(d.errorOnGetActiveMenuOptions)}}function Pa(h,g){if(1&h&&(w.TgZ(0,"li"),w._uU(1),w.qZA()),2&h){const d=w.oxw();w.xp6(1),w.Oqu(d.erroOnGetDomains)}}function Nu(h,g){if(1&h&&(w.TgZ(0,"li"),w._uU(1),w.qZA()),2&h){const d=w.oxw();w.xp6(1),w.Oqu(d.errorOnGetChat)}}function bc(h,g){if(1&h&&(w.TgZ(0,"li"),w._uU(1),w.qZA()),2&h){const d=w.oxw();w.xp6(1),w.Oqu(d.errorOnAddChat)}}function fl(h,g){if(1&h&&(w.TgZ(0,"li"),w._uU(1),w.qZA()),2&h){const d=w.oxw();w.xp6(1),w.Oqu(d.errorOnGetBlockedUsers)}}function Pd(h,g){if(1&h&&(w.TgZ(0,"li"),w._uU(1),w.qZA()),2&h){const d=w.oxw();w.xp6(1),w.Oqu(d.errorOnGetClientInfo)}}let Bl=(()=>{class h{constructor(d,b,S,N,Q,ue){this._fb=d,this._firestoreCollections=b,this._route=S,this._router=N,this._generateId=Q,this._http=ue,this.currentChat=[],this.clientInformation=[],this.isBlocked=void 0,this.errorOnGetActiveMenuOptions="",this.erroOnGetDomains="",this.errorOnGetChat="",this.errorOnAddChat="",this.errorOnGetBlockedUsers="",this.errorOnGetClientInfo=""}ngOnInit(){this._route.snapshot.queryParams.domain?(this.domain=this._route.snapshot.queryParams.domain,this.clientUsername=JSON.parse(localStorage.getItem("username/"+this.domain)),this.getClientInformation(),this._menuOptionsSubscription=this._firestoreCollections.getActiveMenuOptions().subscribe(d=>{this.menuOptions=d.map(b=>Object.assign({id:b.payload.doc.id},b.payload.doc.data())),this.startChatForm=this._fb.group({username:[this.clientUsername],option:[this.menuOptions[0].key,c.kI.required]}),this.errorOnGetActiveMenuOptions=""},d=>{this.errorOnGetActiveMenuOptions=d.message}),this.clientChatData=JSON.parse(localStorage.getItem("clientChatData/"+this.domain)),this.clientChatData&&(this.clientChatId=this.clientChatData.chatId,this.clientChatDomain=this.clientChatData.chatDomain,this._currentChatSubscription=this._firestoreCollections.getChat(this.clientChatDomain,"activeChats",this.clientChatId).subscribe(d=>{this.currentChat=d.map(b=>Object.assign({},b.payload.doc.data())),0==this.currentChat.length&&(localStorage.removeItem("clientChatData/"+this.domain),this._currentChatSubscription.unsubscribe()),this.errorOnGetChat=""},d=>{this.errorOnGetChat=d.message})),this._domainsSubscription=this._firestoreCollections.getDomains().subscribe(d=>{this.domains=d.map(b=>Object.assign({id:b.payload.doc.id},b.payload.doc.data())),new Promise((b,S)=>{for(let N=0;N<this.domains.length;N++){if(this.domains[N].domain==this.domain)return b();N==this.domains.length-1&&this._router.navigate(["/error"])}}),this.erroOnGetDomains=""},d=>{this.erroOnGetDomains=d.message})):this._router.navigate(["/error"])}ngOnDestroy(){this._menuOptionsSubscription&&this._menuOptionsSubscription.unsubscribe(),this._blockedUsersSubscription&&this._blockedUsersSubscription.unsubscribe(),this._currentChatSubscription&&this._currentChatSubscription.unsubscribe(),this._domainsSubscription&&this._domainsSubscription.unsubscribe()}submitStartChatForm(d){if(d.invalid)return;const b=d.value.username,S=this.clientInformation,N=d.value.option,Q=this.domain,Ee=this._generateId.generateId(),Ge={username:b,clientInformation:S,option:N,domain:Q,status:"pending",id:Ee};this.clientUsername=b,localStorage.setItem("username/"+this.domain,JSON.stringify(this.clientUsername)),this.clientChatDomain=Q,this.clientChatId=Ee,localStorage.setItem("clientChatData/"+this.domain,JSON.stringify({chatDomain:this.clientChatDomain,chatId:this.clientChatId})),this._firestoreCollections.addChat(Ge,"activeChats").then(()=>{this._currentChatSubscription=this._firestoreCollections.getChat(this.clientChatDomain,"activeChats",this.clientChatId).subscribe(xt=>{this.currentChat=xt.map(Dn=>Object.assign({},Dn.payload.doc.data())),this.errorOnGetChat=""},xt=>{this.errorOnGetChat=xt.message}),this.errorOnAddChat=""},xt=>{this.errorOnAddChat=xt.message})}getClientInformation(){this._http.get("https://api.geoapify.com/v1/ipinfo?apiKey="+K.N.geoLocationAPIKey).subscribe(d=>{const b=d.ip;this.clientInformation.push({ip:b,country:d.country.name,city:d.city.name}),this._blockedUsersSubscription=this._firestoreCollections.getBlockedUsersById().subscribe(ue=>{this.blockedUsers=ue.map(Ee=>Object.assign({id:Ee.payload.doc.id},Ee.payload.doc.data())),0==this.blockedUsers.length&&(this.isBlocked=!1),new Promise((Ee,Ge)=>{for(let ht=0;ht<this.blockedUsers.length;ht++)b==this.blockedUsers[ht].ip?(this.isBlocked=!0,Ee()):(ht==this.blockedUsers.length-1||0==this.blockedUsers.length)&&(this.isBlocked=!1,Ee())}),this.errorOnGetBlockedUsers=""},ue=>{this.errorOnGetBlockedUsers=ue.message}),this.errorOnGetClientInfo=""},d=>{this.errorOnGetClientInfo=d})}}return h.\u0275fac=function(d){return new(d||h)(w.Y36(c.qu),w.Y36(Ue.P),w.Y36(be.gz),w.Y36(be.F0),w.Y36(xe),w.Y36(fe.eN))},h.\u0275cmp=w.Xpm({type:h,selectors:[["app-chat"]],decls:13,vars:8,consts:[[1,"client-chat"],[1,"client-chat__header"],[2,"font-size","20px","font-weight","bold","line-height","85px"],["class","client-chat__form",4,"ngIf"],[4,"ngIf"],[1,"error"],[1,"client-chat__form"],["class","sign-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"sign-form",3,"formGroup","ngSubmit"],[1,"sign-form__sign-element"],["for","username"],[1,"name"],[1,"name-img"],["type","text","name","username","formControlName","username","placeholder","Leave blank if you don't have..."],[1,"client-chat__form__select"],["formControlName","option"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn-default",2,"margin-top","20px",3,"disabled"],[3,"value"],[1,"chat-history"],[3,"chatHistory"],[3,"userInfo"]],template:function(d,b){1&d&&(w.TgZ(0,"div",0),w.TgZ(1,"div",1),w.TgZ(2,"p",2),w._uU(3,"LOGO"),w.qZA(),w.qZA(),w.YNc(4,Vl,4,3,"div",3),w.YNc(5,ru,2,0,"div",4),w.TgZ(6,"ul",5),w.YNc(7,xa,2,1,"li",4),w.YNc(8,Pa,2,1,"li",4),w.YNc(9,Nu,2,1,"li",4),w.YNc(10,bc,2,1,"li",4),w.YNc(11,fl,2,1,"li",4),w.YNc(12,Pd,2,1,"li",4),w.qZA(),w.qZA()),2&d&&(w.xp6(4),w.Q6J("ngIf",null!=b.isBlocked&&1!=b.isBlocked),w.xp6(1),w.Q6J("ngIf",null!=b.isBlocked&&0!=b.isBlocked),w.xp6(2),w.Q6J("ngIf",b.errorOnGetActiveMenuOptions),w.xp6(1),w.Q6J("ngIf",b.erroOnGetDomains),w.xp6(1),w.Q6J("ngIf",b.errorOnGetChat),w.xp6(1),w.Q6J("ngIf",b.errorOnAddChat),w.xp6(1),w.Q6J("ngIf",b.errorOnGetBlockedUsers),w.xp6(1),w.Q6J("ngIf",b.errorOnGetClientInfo))},directives:[O.O5,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,mu,Fu,O.sg,du,Bh.q,Od.a],styles:[".sign-form[_ngcontent-%COMP%]{background-color:var(--color2);max-width:767px;padding:20px;margin:0 auto;position:relative}.sign-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.sign-form__sign-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ebc317;text-align:center;font-size:1.3em;padding:5px}.sign-form__sign-element[_ngcontent-%COMP%]{margin:20px 0}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{display:flex}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(user.73c0f083ad3711c1d950.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   .email-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;box-sizing:border-box;background-image:url(email.31cd4a3f10faa4acdb5c.png);padding:10px}.sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .password-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(password.63582da5386052e0358d.png)}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 50px);border:1px solid var(--color8);color:var(--color7);border-radius:0 3px 3px 0;box-sizing:border-box;padding:7px;outline:none;background-color:#ffffff80;filter:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{border:1px solid var(--color8);-webkit-text-fill-color:var(--color7);-webkit-box-shadow:none;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.sign-form__sign-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;color:var(--color7)}.sign-form[_ngcontent-%COMP%]   .hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:10px 0 20px}.sign-form[_ngcontent-%COMP%]{border:1px solid var(--color8);border-radius:5px}.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}@media not all and (pointer: coarse){.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]:hover{background-color:#fbf4d3}}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:49%}.client-chat__header[_ngcontent-%COMP%]{background-color:#ebc317;height:85px}.client-chat__form[_ngcontent-%COMP%]{padding:5px}.client-chat[_ngcontent-%COMP%]   .sign-form[_ngcontent-%COMP%]{border:none;width:100%;box-sizing:border-box;padding:1%}.client-chat[_ngcontent-%COMP%]   .sign-form[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-top:10px}"]}),h})();Y(9193);let Rd=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({imports:[[vr]]}),h})(),p=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({providers:[lu],imports:[[Rd,sc,vs],Rd,sc]}),h})();var f=Y(4466);let v=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=w.oAB({type:h}),h.\u0275inj=w.cJS({imports:[[O.ez,c.UX,c.u5,p,Qs,f.m,be.Bz.forChild([{path:"",component:Bl},{path:"**",redirectTo:""}])]]}),h})()},4693:(jt,nt,Y)=>{"use strict";Y.r(nt),Y.d(nt,{ControlPanelModule:()=>wo});var O=Y(8583),c=Y(7716),K=Y(9447),w=Y(2213);const Ue=function(){return["chats"]},be=function(){return["settings"]};function xe(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",2),c.TgZ(1,"ul",3),c.TgZ(2,"li",4),c._uU(3,"Chats"),c.qZA(),c.TgZ(4,"li",4),c._uU(5,"Settings"),c.qZA(),c.qZA(),c.TgZ(6,"button",5),c.NdJ("click",function(){return c.CHM(H),c.oxw().logout()}),c._uU(7,"Logout"),c.qZA(),c.qZA()}2&ne&&(c.xp6(2),c.Q6J("routerLink",c.DdM(2,Ue)),c.xp6(2),c.Q6J("routerLink",c.DdM(3,be)))}let fe=(()=>{class ne{constructor(H){this._authService=H}ngOnInit(){this._userSubscription=this._authService.user.subscribe(H=>{this.user=H})}ngOnDestroy(){this._userSubscription.unsubscribe()}logout(){this._authService.logout()}}return ne.\u0275fac=function(H){return new(H||ne)(c.Y36(K.e))},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-header"]],decls:2,vars:1,consts:[[1,"container"],["class","header-nav",4,"ngIf"],[1,"header-nav"],[1,"header-nav__links"],["routerLinkActive","header-router-link-active",3,"routerLink"],[1,"header-nav__logout-btn","btn-default","narrow-btn",3,"click"]],template:function(H,ge){1&H&&(c.TgZ(0,"div",0),c.YNc(1,xe,8,4,"div",1),c.qZA()),2&H&&(c.xp6(1),c.Q6J("ngIf",null!=ge.user&&null!=ge.user))},directives:[O.O5,w.Od,w.rH],styles:[".header-nav[_ngcontent-%COMP%]{display:flex;padding-right:10px;justify-content:space-between;align-items:center;border-bottom:1px solid var(--color8);margin-bottom:5px}.header-nav__links[_ngcontent-%COMP%]{display:flex;align-items:center}.header-nav__links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px;list-style:none;margin-right:10px;cursor:pointer;font-size:1.2rem}.header-nav__links[_ngcontent-%COMP%]   .header-router-link-active[_ngcontent-%COMP%]{background-color:#ebc317;color:#fff}.header-nav__logout-btn[_ngcontent-%COMP%]{font-size:1.2rem}"]}),ne})(),_e=(()=>{class ne{constructor(){}ngOnInit(){}}return ne.\u0275fac=function(H){return new(H||ne)},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-control-panel"]],decls:3,vars:0,consts:[[1,"control-panel"]],template:function(H,ge){1&H&&(c.TgZ(0,"div",0),c._UZ(1,"app-header"),c._UZ(2,"router-outlet"),c.qZA())},directives:[fe,w.lC],styles:[""]}),ne})();var re=Y(665);let Ce=(()=>{class ne{constructor(){}}return ne.\u0275fac=function(H){return new(H||ne)},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-loading-spinner"]],decls:14,vars:0,consts:[[1,"loading-spinner"],[1,"loader"]],template:function(H,ge){1&H&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"div"),c._UZ(3,"div"),c._UZ(4,"div"),c._UZ(5,"div"),c._UZ(6,"div"),c._UZ(7,"div"),c._UZ(8,"div"),c._UZ(9,"div"),c._UZ(10,"div"),c._UZ(11,"div"),c._UZ(12,"div"),c._UZ(13,"div"),c.qZA(),c.qZA())},styles:['.loading-spinner[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;left:0px;top:0px;width:100%;height:100%;z-index:499;background-color:var(--color13)}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{display:flex;width:64px;height:64px}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:32px 32px;animation:spin 1.2s linear infinite;-webkit-transform-origin:32px 32px;-webkit-animation:spin 1.2s linear infinite}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:52px;left:30px;width:7px;height:22px;border-radius:20%;background-color:#ebc317}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);-webkit-transform:rotate(0deg);animation-delay:-1.1s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);-webkit-transform:rotate(30deg);animation-delay:-1s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);-webkit-transform:rotate(60deg);animation-delay:-.9s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);-webkit-transform:rotate(90deg);animation-delay:-.8s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);-webkit-transform:rotate(120deg);animation-delay:-.7s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);-webkit-transform:rotate(150deg);animation-delay:-.6s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);-webkit-transform:rotate(180deg);animation-delay:-.5s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);-webkit-transform:rotate(210deg);animation-delay:-.4s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);-webkit-transform:rotate(240deg);animation-delay:-.3s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);-webkit-transform:rotate(270deg);animation-delay:-.2s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);-webkit-transform:rotate(300deg);animation-delay:-.1s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);-webkit-transform:rotate(330deg);animation-delay:0s}@keyframes spin{0%{opacity:1}to{opacity:0}}']}),ne})();function le(ne,qe){1&ne&&c._UZ(0,"app-loading-spinner")}function pe(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," Please enter your email! "),c.qZA())}function De(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," Please enter a valid email! "),c.qZA())}function Re(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," Please enter a passowrd! "),c.qZA())}function Ye(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," The password could not be longer then 30 symbols! "),c.qZA())}function ee(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," The password should be at least 8 symbols! "),c.qZA())}function ze(ne,qe){if(1&ne&&(c.TgZ(0,"li",17),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorAuthMsg)}}function Ct(ne,qe){if(1&ne&&(c.TgZ(0,"li",17),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnGetuserData)}}let On=(()=>{class ne{constructor(H){this._authService=H}ngOnInit(){this.signinForm=new re.cw({email:new re.NI(null,[re.kI.required,re.kI.email]),password:new re.NI(null,[re.kI.required,re.kI.minLength(8),re.kI.maxLength(30)])}),this._errorAuthMsgSubscription=this._authService.errorAuthMsgSubject.subscribe(H=>{this.errorAuthMsg=H}),this._errorOnGetuserDataSubscription=this._authService.errorOnGetuserDataSubject.subscribe(H=>{this.errorOnGetuserData=H}),this._isLoadingSubscription=this._authService.isLoadingSubject.subscribe(H=>{this.isLoading=H})}ngOnDestroy(){this._errorAuthMsgSubscription.unsubscribe(),this._errorOnGetuserDataSubscription.unsubscribe(),this._isLoadingSubscription.unsubscribe(),this._authService.errorAuthMsg="",this._authService.errorAuthMsgSubject.next(this._authService.errorAuthMsg)}onSubmit(H){this._authService.signIn(H.value.email,H.value.password)}}return ne.\u0275fac=function(H){return new(H||ne)(c.Y36(K.e))},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-login"]],decls:33,vars:10,consts:[[1,"container"],[1,"sign-form",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"sign-form__sign-up-header"],[1,"hr-border"],[1,"sign-form__sign-element"],["for","email"],[1,"email"],[1,"email-img"],["type","text","name","email","formControlName","email"],[1,"error"],["for","password"],[1,"password"],[1,"password-img"],["type","password","name","password","formControlName","password"],["type","submit",1,"btn-default",3,"disabled"],["class","error-msg",4,"ngIf"],[1,"error-msg"]],template:function(H,ge){1&H&&(c.TgZ(0,"div"),c.TgZ(1,"div",0),c.TgZ(2,"form",1),c.NdJ("ngSubmit",function(){return ge.onSubmit(ge.signinForm)}),c.YNc(3,le,1,0,"app-loading-spinner",2),c.TgZ(4,"div",3),c.TgZ(5,"h2"),c._uU(6,"Login"),c.qZA(),c.qZA(),c._UZ(7,"hr",4),c.TgZ(8,"div",5),c.TgZ(9,"label",6),c._uU(10,"Email"),c.qZA(),c.TgZ(11,"div",7),c._UZ(12,"div",8),c._UZ(13,"input",9),c.qZA(),c.TgZ(14,"ul",10),c.YNc(15,pe,2,0,"li",2),c.YNc(16,De,2,0,"li",2),c.qZA(),c.qZA(),c.TgZ(17,"div",5),c.TgZ(18,"label",11),c._uU(19,"Password"),c.qZA(),c.TgZ(20,"div",12),c._UZ(21,"div",13),c._UZ(22,"input",14),c.qZA(),c.TgZ(23,"ul",10),c.YNc(24,Re,2,0,"li",2),c.YNc(25,Ye,2,0,"li",2),c.YNc(26,ee,2,0,"li",2),c.qZA(),c.qZA(),c.TgZ(27,"div"),c.TgZ(28,"button",15),c._uU(29,"Login"),c.qZA(),c.TgZ(30,"ul",10),c.YNc(31,ze,2,1,"li",16),c.YNc(32,Ct,2,1,"li",16),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&H&&(c.xp6(2),c.Q6J("formGroup",ge.signinForm),c.xp6(1),c.Q6J("ngIf",ge.isLoading),c.xp6(12),c.Q6J("ngIf",!ge.signinForm.get("email").valid&&!ge.signinForm.get("email").hasError("email")&&ge.signinForm.get("email").touched),c.xp6(1),c.Q6J("ngIf",ge.signinForm.get("email").hasError("email")&&ge.signinForm.get("email").touched),c.xp6(8),c.Q6J("ngIf",!ge.signinForm.get("password").valid&&!ge.signinForm.get("password").hasError("maxlength")&&!ge.signinForm.get("password").hasError("minlength")&&ge.signinForm.get("password").touched),c.xp6(1),c.Q6J("ngIf",ge.signinForm.get("password").hasError("maxlength")&&ge.signinForm.get("password").touched),c.xp6(1),c.Q6J("ngIf",ge.signinForm.get("password").hasError("minlength")&&ge.signinForm.get("password").touched),c.xp6(2),c.Q6J("disabled",!ge.signinForm.valid),c.xp6(3),c.Q6J("ngIf",ge.errorAuthMsg),c.xp6(1),c.Q6J("ngIf",ge.errorOnGetuserData))},directives:[re._Y,re.JL,re.sg,O.O5,re.Fj,re.JJ,re.u,Ce],styles:['@import"https://fonts.googleapis.com/css?family=Rubik&display=swap";.sign-form[_ngcontent-%COMP%]{background-color:var(--color2);max-width:767px;padding:20px;margin:0 auto;position:relative}.sign-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.sign-form__sign-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ebc317;text-align:center;font-size:1.3em;padding:5px}.sign-form__sign-element[_ngcontent-%COMP%]{margin:20px 0}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{display:flex}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(user.73c0f083ad3711c1d950.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   .email-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;box-sizing:border-box;background-image:url(email.31cd4a3f10faa4acdb5c.png);padding:10px}.sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .password-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(password.63582da5386052e0358d.png)}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 50px);border:1px solid var(--color8);color:var(--color7);border-radius:0 3px 3px 0;box-sizing:border-box;padding:7px;outline:none;background-color:#ffffff80;filter:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{border:1px solid var(--color8);-webkit-text-fill-color:var(--color7);-webkit-box-shadow:none;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.sign-form__sign-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;color:var(--color7)}.sign-form[_ngcontent-%COMP%]   .hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:10px 0 20px}.sign-form[_ngcontent-%COMP%]{border:1px solid var(--color8);border-radius:5px}.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}@media not all and (pointer: coarse){.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]:hover{background-color:#fbf4d3}}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:49%}.sign-form[_ngcontent-%COMP%]{margin-top:100px;box-shadow:0 0 10px 1px #000000bf;border-radius:5px}']}),ne})();var Nt=Y(2329),at=Y(3210),zt=Y(4552),It=Y(1437);function wn(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"p"),c.TgZ(2,"span",10),c._uU(3,"user: "),c.qZA(),c._uU(4),c.qZA(),c.TgZ(5,"p"),c.TgZ(6,"span",10),c._uU(7,"option: "),c.qZA(),c._uU(8),c.qZA(),c.TgZ(9,"div"),c.TgZ(10,"button",11),c.NdJ("click",function(){c.CHM(H);const pt=c.oxw().$implicit;return c.oxw(2).acceptChat(pt)}),c._uU(11," Accept "),c.qZA(),c.qZA(),c.qZA()}if(2&ne){const H=c.oxw().$implicit;c.xp6(4),c.Oqu(H.username),c.xp6(4),c.Oqu(H.option)}}function Et(ne,qe){if(1&ne&&(c.TgZ(0,"div"),c.YNc(1,wn,12,2,"div",7),c.qZA()),2&ne){const H=qe.$implicit;c.xp6(1),c.Q6J("ngIf","pending"==H.status)}}function Ke(ne,qe){if(1&ne&&(c.TgZ(0,"div"),c.TgZ(1,"div"),c.TgZ(2,"p",8),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"div",9),c.YNc(5,Et,2,1,"div",4),c.qZA(),c.qZA()),2&ne){const H=qe.$implicit;c.xp6(3),c.hij(" ",H.domainDescription," "),c.xp6(2),c.Q6J("ngForOf",H.chats)}}function rt(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"button",26),c.NdJ("click",function(){return c.CHM(H),c.oxw(5).enableBlockOptio()}),c._uU(1," Block client "),c.qZA()}}function it(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"form",27),c.NdJ("ngSubmit",function(){c.CHM(H);const pt=c.oxw(3).$implicit,Vt=c.oxw(2);return Vt.submitBlockForm(pt,Vt.blockForm)}),c._UZ(1,"textarea",28),c.TgZ(2,"div"),c.TgZ(3,"button",29),c._uU(4," Block "),c.qZA(),c.TgZ(5,"button",30),c.NdJ("click",function(){return c.CHM(H),c.oxw(5).cancelBLokcOption()}),c._uU(6," Close "),c.qZA(),c.qZA(),c.qZA()}if(2&ne){const H=c.oxw(5);c.Q6J("formGroup",H.blockForm),c.xp6(3),c.Q6J("disabled",H.blockForm.invalid)}}function et(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"button",30),c.NdJ("click",function(){return c.CHM(H),c.oxw(5).enableChatPopUp()}),c._uU(1," Close Chat "),c.qZA()}}function _t(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",31),c.TgZ(1,"div",32),c.TgZ(2,"p"),c._uU(3,"\u0410re you sure you want to close this chat?"),c.qZA(),c.TgZ(4,"div",33),c.TgZ(5,"button",34),c.NdJ("click",function(){c.CHM(H);const pt=c.oxw(3).$implicit;return c.oxw(2).closeChat(pt)}),c._uU(6," Yes "),c.qZA(),c.TgZ(7,"button",35),c.NdJ("click",function(){return c.CHM(H),c.oxw(5).disableCloseChatOption()}),c._uU(8," No "),c.qZA(),c.qZA(),c.qZA(),c.qZA()}}const st=function(ne,qe,H){return{chatId:ne,domain:qe,operator:H}};function tn(ne,qe){if(1&ne&&(c.TgZ(0,"div",16),c.TgZ(1,"div"),c.TgZ(2,"div",17),c._UZ(3,"app-chat-form-history",18),c.qZA(),c.TgZ(4,"div"),c._UZ(5,"app-chat-form",19),c.qZA(),c.qZA(),c.TgZ(6,"div",20),c.TgZ(7,"p",2),c._uU(8,"Client's info"),c.qZA(),c.TgZ(9,"div",21),c.TgZ(10,"p"),c.TgZ(11,"span"),c._uU(12,"IP: "),c.qZA(),c._uU(13),c.qZA(),c.TgZ(14,"p"),c.TgZ(15,"span"),c._uU(16,"City: "),c.qZA(),c._uU(17),c.qZA(),c.TgZ(18,"p"),c.TgZ(19,"span"),c._uU(20,"Country: "),c.qZA(),c._uU(21),c.qZA(),c.TgZ(22,"div"),c.YNc(23,rt,2,0,"button",22),c.YNc(24,it,7,2,"form",23),c.qZA(),c.TgZ(25,"div"),c.YNc(26,et,2,0,"button",24),c.YNc(27,_t,9,0,"div",25),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&ne){const H=c.oxw(2).$implicit,ge=c.oxw(2);c.xp6(3),c.Q6J("chatHistory",H.chatHistory),c.xp6(2),c.Q6J("userInfo",c.kEZ(9,st,H.id,H.domain,H.operatorDisplayName)),c.xp6(8),c.Oqu(H.clientInformation[0].ip),c.xp6(4),c.Oqu(H.clientInformation[0].city),c.xp6(4),c.Oqu(H.clientInformation[0].country),c.xp6(2),c.Q6J("ngIf",!ge.isBlockOptionActive),c.xp6(1),c.Q6J("ngIf",ge.isBlockOptionActive),c.xp6(2),c.Q6J("ngIf",!ge.isCloseChatPopUpAcive),c.xp6(1),c.Q6J("ngIf",ge.isCloseChatPopUpAcive)}}const an=function(ne){return{"active-chat":ne}};function Sn(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"div",14),c.NdJ("click",function(){c.CHM(H);const pt=c.oxw().$implicit;return c.oxw(2).setActiveChat(pt.id)}),c.TgZ(2,"p"),c.TgZ(3,"span"),c._uU(4,"user:"),c.qZA(),c._uU(5),c.qZA(),c.TgZ(6,"p"),c.TgZ(7,"span"),c._uU(8,"option:"),c.qZA(),c._uU(9),c.qZA(),c.TgZ(10,"p"),c.TgZ(11,"span"),c._uU(12,"domain:"),c.qZA(),c._uU(13),c.qZA(),c.qZA(),c.YNc(14,tn,28,13,"div",15),c.qZA()}if(2&ne){const H=c.oxw().$implicit,ge=c.oxw(2);c.xp6(1),c.Q6J("ngClass",c.VKq(5,an,H.id==ge.activeChat)),c.xp6(4),c.hij(" ",H.username,""),c.xp6(4),c.hij(" ",H.option,""),c.xp6(4),c.hij(" ",H.domain,""),c.xp6(1),c.Q6J("ngIf",H.id==ge.activeChat)}}function on(ne,qe){if(1&ne&&(c.TgZ(0,"div"),c.YNc(1,Sn,15,7,"div",12),c.qZA()),2&ne){const H=qe.$implicit,ge=c.oxw(2);c.xp6(1),c.Q6J("ngIf","active"==H.status&&H.operatorEmail==(null==ge.user?null:ge.user.email))}}function Bt(ne,qe){if(1&ne&&(c.TgZ(0,"div"),c.YNc(1,on,2,1,"div",4),c.qZA()),2&ne){const H=qe.$implicit;c.xp6(1),c.Q6J("ngForOf",H.chats)}}function kt(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnaAcceptChat)}}function Qt(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnBlockUser)}}function Ht(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnGetChats)}}function Fn(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnAddChat)}}function Cn(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnDeleteChat)}}let ur=(()=>{class ne{constructor(H,ge,pt){this._authService=H,this._firestoreCollections=ge,this._fb=pt,this.activeChats=[],this.chatPopUp=!1,this.isBlockOptionActive=!1,this.isCloseChatPopUpAcive=!1,this.errorOnaAcceptChat="",this.errorOnBlockUser="",this.errorOnGetChats="",this.errorOnAddChat="",this.errorOnDeleteChat=""}ngOnInit(){this.activeChat=JSON.parse(localStorage.getItem("operator/activeChat")),new Promise((H,ge)=>{this._userSubscription=this._authService.user.subscribe(pt=>{this.user=pt,null!=this.user&&H()})}).then(()=>{for(const H of this.user.domains)H.checked&&this.activeChats.push({domainDescription:H.description,fsCollection:H.domain,chatsSubscription:""});for(let H=0;H<this.activeChats.length;H++)this.activeChats[H].chatsSubscription=this._firestoreCollections.getChats(this.activeChats[H].fsCollection,"activeChats").subscribe(Vt=>{this.activeChats[H].chats=Vt.map($t=>Object.assign({},$t.payload.doc.data())),this.errorOnGetChats=""},Vt=>{this.errorOnGetChats=Vt.message})}),this.blockForm=this._fb.group({reason:[null,re.kI.required]})}ngOnDestroy(){this._userSubscription.unsubscribe();for(const H of this.activeChats)H.chatsSubscription.unsubscribe()}acceptChat(H){this._firestoreCollections.acceptPendingChat(H,{operatorDisplayName:this.user.name,operatorEmail:this.user.email}).then(()=>{this.setActiveChat(H.id),this.errorOnaAcceptChat=""},$t=>{this.errorOnaAcceptChat=$t.message})}setActiveChat(H){this.activeChat=H,localStorage.setItem("operator/activeChat",JSON.stringify(this.activeChat)),this.blockForm.reset()}submitBlockForm(H,ge){if(ge.invalid)return;const pt=H.username,Vt=H.clientInformation[0].ip,$t=ge.value.reason,vr=this.user.email,lr=Nt.Z.firestore.Timestamp.now();this._firestoreCollections.blockUserByIp({username:pt,ip:Vt,reason:$t,operator:vr,date:lr}).then(()=>{this.cancelBLokcOption(),this.closeChat(H),this.errorOnBlockUser=""},Eo=>{this.errorOnBlockUser=Eo.message})}enableBlockOptio(){this.isBlockOptionActive=!0}cancelBLokcOption(){this.blockForm.reset(),this.isBlockOptionActive=!1}enableChatPopUp(){this.isCloseChatPopUpAcive=!0}closeChat(H){this._firestoreCollections.addChat(H,"finishedChats").then(()=>{this._firestoreCollections.deleteChat(H.domain,H.id).then(()=>{this.disableCloseChatOption();for(const ge of this.activeChats)for(const pt of ge.chats)pt.id&&(localStorage.setItem("operator/activeChat",JSON.stringify(pt.id)),this.activeChat=JSON.parse(localStorage.getItem("operator/activeChat")));this.errorOnDeleteChat=""},ge=>{this.errorOnDeleteChat=ge.message}),this.errorOnAddChat=""},ge=>{this.errorOnAddChat=ge.message})}disableCloseChatOption(){this.isCloseChatPopUpAcive=!1}}return ne.\u0275fac=function(H){return new(H||ne)(c.Y36(K.e),c.Y36(at.P),c.Y36(re.qu))},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-chats"]],decls:17,vars:7,consts:[[1,"chats"],[1,"chats__pending"],[1,"chats__title"],[1,"chats__pending__container"],[4,"ngFor","ngForOf"],[1,"chats__chats"],[1,"error"],[4,"ngIf"],[1,"chats__pending__container__pending-chat__domain"],[1,"chats__pending__container__pending-chat"],[1,"client-info"],["type","button",1,"btn-default","narrow-btn",2,"margin","5px 0 15px 0",3,"click"],["class","chats__chats__nav",4,"ngIf"],[1,"chats__chats__nav"],[1,"chats__chats__nav__chat-info",3,"ngClass","click"],["class","chats__chats__content",4,"ngIf"],[1,"chats__chats__content"],[1,"chats__chats__content__chat-history"],[3,"chatHistory"],[3,"userInfo"],[1,"chats__chats__content__clint-info-container"],[1,"chats__chats__content__clint-info-container__clint-info"],["class","btn-default narrow-btn","style","margin: 10px 0;","type","button",3,"click",4,"ngIf"],["style","margin: 10px 0;",3,"formGroup","ngSubmit",4,"ngIf"],["class","btn-default narrow-btn","type","button",3,"click",4,"ngIf"],["class","fixed-pop-up-container",4,"ngIf"],["type","button",1,"btn-default","narrow-btn",2,"margin","10px 0",3,"click"],[2,"margin","10px 0",3,"formGroup","ngSubmit"],["formControlName","reason","placeholder","Blocking reason..."],["type","submit",1,"btn-default","narrow-btn",2,"margin-right","10px",3,"disabled"],["type","button",1,"btn-default","narrow-btn",3,"click"],[1,"fixed-pop-up-container"],[1,"pop-up-body"],[1,"pop-up-buttons"],[1,"btn-default","narrow-btn",2,"margin-right","10px",3,"click"],[1,"btn-default","narrow-btn",3,"click"]],template:function(H,ge){1&H&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"p",2),c._uU(3,"Pending chats"),c.qZA(),c.TgZ(4,"div",3),c.YNc(5,Ke,6,2,"div",4),c.qZA(),c.qZA(),c.TgZ(6,"div",5),c.TgZ(7,"p",2),c._uU(8,"Chats"),c.qZA(),c.TgZ(9,"div"),c.YNc(10,Bt,2,1,"div",4),c.qZA(),c.TgZ(11,"ul",6),c.YNc(12,kt,2,1,"li",7),c.YNc(13,Qt,2,1,"li",7),c.YNc(14,Ht,2,1,"li",7),c.YNc(15,Fn,2,1,"li",7),c.YNc(16,Cn,2,1,"li",7),c.qZA(),c.qZA(),c.qZA()),2&H&&(c.xp6(5),c.Q6J("ngForOf",ge.activeChats),c.xp6(5),c.Q6J("ngForOf",ge.activeChats),c.xp6(2),c.Q6J("ngIf",ge.errorOnaAcceptChat),c.xp6(1),c.Q6J("ngIf",ge.errorOnBlockUser),c.xp6(1),c.Q6J("ngIf",ge.errorOnGetChats),c.xp6(1),c.Q6J("ngIf",ge.errorOnAddChat),c.xp6(1),c.Q6J("ngIf",ge.errorOnDeleteChat))},directives:[O.sg,O.O5,O.mk,zt.q,It.a,re._Y,re.JL,re.sg,re.Fj,re.JJ,re.u],styles:[".chats[_ngcontent-%COMP%]{display:flex;align-items:flex-start;height:calc(100vh - 48px)}.chats__pending[_ngcontent-%COMP%]{width:250px;height:100%;border-right:1px solid var(--color8)}.chats__pending__container[_ngcontent-%COMP%]{height:calc(100% - 30px);overflow:scroll;scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.chats__pending__container[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.chats__pending__container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.chats__pending__container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.chats__pending__container[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.chats__pending__container[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.chats__pending__container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.chats__pending__container[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.chats__pending__container__pending-chat[_ngcontent-%COMP%]{height:300px;overflow:scroll;scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.chats__pending__container__pending-chat[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.chats__pending__container__pending-chat[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.chats__pending__container__pending-chat[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.chats__pending__container__pending-chat[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.chats__pending__container__pending-chat[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.chats__pending__container__pending-chat[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.chats__pending__container__pending-chat[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.chats__pending__container__pending-chat__domain[_ngcontent-%COMP%]{background-color:#fbf4d3;border-top-right-radius:10px;border-bottom-right-radius:10px}.chats__pending__container__pending-chat[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]{display:inline-block;width:53px}.chats__chats[_ngcontent-%COMP%]{width:calc(100% - 250px);position:relative;height:100%;overflow:scroll;scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.chats__chats[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.chats__chats[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.chats__chats[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.chats__chats[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.chats__chats[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.chats__chats[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.chats__chats[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.chats__chats__content[_ngcontent-%COMP%]{position:absolute;display:flex;top:29px;left:260px;width:calc(100% - 260px)}.chats__chats__content__chat-history[_ngcontent-%COMP%]{width:700px}.chats__chats__content__clint-info-container[_ngcontent-%COMP%]{width:100%;min-width:220px}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]{padding:5px 0 5px 10px}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:64px}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:100px}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{outline-color:#ebc317;background-color:var(--color12);border:1px solid var(--color9);border-radius:3px;padding:10px;resize:none;width:100%;height:70px;box-sizing:border-box;color:var(--color7);scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#b53636}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#b53636}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:-moz-placeholder{color:#b53636}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-moz-placeholder{color:#b53636}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:-ms-input-placeholder{color:#b53636}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.chats__chats__nav[_ngcontent-%COMP%]{width:250px}.chats__chats__nav__chat-info[_ngcontent-%COMP%]{padding:5px;cursor:pointer}.chats__chats__nav__chat-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:56px}.chats__chats__nav[_ngcontent-%COMP%]   .active-chat[_ngcontent-%COMP%]{background-color:#ebc317;color:#fff;border-top-right-radius:20px;border-bottom-right-radius:20px}.chats__title[_ngcontent-%COMP%], .chats__pending__container__pending-chat__domain[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:bold;padding:5px 0 5px 10px;border-bottom:1px solid var(--color8)}"]}),ne})();var zn=Y(4466);let Gn=(()=>{class ne{constructor(){this.defaultRoles=[{name:"Users",value:"users",route:"users",checked:!1},{name:"Register",value:"register",route:"register",checked:!1},{name:"Blocked Users",value:"blockedUsers",route:"blocked-users",checked:!0},{name:"Account Settings",value:"accountSettings",route:"account-settings",checked:!0},{name:"Domain Options",value:"domainOptions",route:"domain-options",checked:!1},{name:"Reports",value:"reports",route:"reports",checked:!1}]}}return ne.\u0275fac=function(H){return new(H||ne)},ne.\u0275prov=c.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})();function tr(ne,qe){1&ne&&c._UZ(0,"app-loading-spinner")}function An(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," Please enter your name! "),c.qZA())}function Mn(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," The name could not be longer then 10 characters! "),c.qZA())}function Oi(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," The name should be at least 3 characters! "),c.qZA())}function mn(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," Please enter your email! "),c.qZA())}function Jt(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," Please enter a valid email! "),c.qZA())}function Zn(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," Please enter a passowrd! "),c.qZA())}function Un(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," The password could not be longer then 20 symbols! "),c.qZA())}function Kt(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," The password should be at least 8 symbols! "),c.qZA())}function pr(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," The passwords do not match! "),c.qZA())}function jr(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",27),c.TgZ(1,"label"),c._uU(2),c.qZA(),c.TgZ(3,"input",28),c.NdJ("change",function(pt){const $t=c.CHM(H).index;return c.oxw().onRoleChange(pt,$t)}),c.qZA(),c.qZA()}if(2&ne){const H=qe.$implicit;c.xp6(2),c.hij(" ",H.name," "),c.xp6(1),c.Q6J("value",H.value),c.uIk("checked",H.checked?"checked":null)("name",H.name)("data-route",H.route)("data-checked",H.checked)}}function Kn(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",27),c.TgZ(1,"label"),c._uU(2),c.qZA(),c.TgZ(3,"input",29),c.NdJ("change",function(pt){const $t=c.CHM(H).index;return c.oxw().onDomainChange(pt,$t)}),c.qZA(),c.qZA()}if(2&ne){const H=qe.$implicit;c.xp6(2),c.hij(" ",H.description," "),c.xp6(1),c.Q6J("value",H.domain)("name",H.description)}}function Tt(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorAuthMsg)}}function He(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnSetUserData)}}function Ve(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",30),c.TgZ(1,"div",31),c.TgZ(2,"p"),c._uU(3,"The registration has been created."),c.qZA(),c.TgZ(4,"div",32),c.TgZ(5,"button",33),c.NdJ("click",function(){return c.CHM(H),c.oxw().resetForm()}),c._uU(6,"Close"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}}const Mt=function(ne){return{invalid:ne}};let Pt=(()=>{class ne{constructor(H,ge,pt,Vt){this._formBuilder=H,this._authService=ge,this._roleService=pt,this._firestoreCollections=Vt,this.roles=this._roleService.defaultRoles,this.finishedReg=!1}ngOnInit(){this.signupForm=this._formBuilder.group({name:[null,[re.kI.required,re.kI.minLength(3),re.kI.maxLength(10)]],email:[null,[re.kI.required,re.kI.email]],password:[null,[re.kI.required,re.kI.minLength(8),re.kI.maxLength(20)]],confirmPass:[null,[re.kI.required]],roles:this._formBuilder.array([]),domains:this._formBuilder.array([])},{validator:this.confirmPasswordMatcher("password","confirmPass")}),this.rolesArray=this.signupForm.get("roles"),this.domainsArray=this.signupForm.get("domains"),new Promise((H,ge)=>{this._domainsSubscription=this._firestoreCollections.getDomains().subscribe(pt=>{this.domains=pt.map(Vt=>Object.assign({id:Vt.payload.doc.id},Vt.payload.doc.data())),null!=this.domains&&H()},pt=>{})}).then(()=>{for(const H of this.domains)this.domainsArray.push(new re.NI({checked:!1,description:H.description,domain:H.domain}))});for(const H of this.roles)this.rolesArray.push(new re.NI({name:H.name,value:H.value,route:H.route,checked:H.checked}));this._errorAuthMsgSubscription=this._authService.errorAuthMsgSubject.subscribe(H=>{this.errorAuthMsg=H}),this._errorOnSetUserDataSubscription=this._authService.errorOnSetUserDataSubject.subscribe(H=>{this.errorOnSetUserData=H}),this._isLoadingSubscription=this._authService.isLoadingSubject.subscribe(H=>{this.isLoading=H}),this._finishedRegSubscription=this._authService.finishedRegSubject.subscribe(H=>{this.finishedReg=H})}ngOnDestroy(){this._errorAuthMsgSubscription.unsubscribe(),this._errorOnSetUserDataSubscription.unsubscribe(),this._isLoadingSubscription.unsubscribe(),this._domainsSubscription.unsubscribe(),this._finishedRegSubscription.unsubscribe(),this._authService.errorAuthMsg="",this._authService.errorAuthMsgSubject.next(this._authService.errorAuthMsg)}confirmPasswordMatcher(H,ge){return pt=>{const $t=pt.controls[ge];$t.setErrors(pt.controls[H].value!==$t.value?{mustMatch:!0}:null)}}onRoleChange(H,ge){this.rolesArray.value[ge].checked=!!H.target.checked}onDomainChange(H,ge){this.domainsArray.value[ge].checked=!!H.target.checked}onSubmit(H){H.invalid||this._authService.signUp({name:H.value.name,email:H.value.email,password:H.value.password,roles:H.value.roles,domains:H.value.domains,active:!0})}resetForm(){this.signupForm.reset(),this._authService.finishedReg=!1,this._authService.finishedRegSubject.next(this._authService.finishedReg)}}return ne.\u0275fac=function(H){return new(H||ne)(c.Y36(re.qu),c.Y36(K.e),c.Y36(Gn),c.Y36(at.P))},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-register"]],decls:67,vars:20,consts:[[1,"container"],[1,"sign-form",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"sign-form__sign-up-header"],[1,"hr-border"],[1,"sign-form__sign-element"],["for","name"],[1,"name"],[1,"name-img"],["type","text","name","name","formControlName","name"],[1,"error"],["for","email"],[1,"email"],[1,"email-img"],["type","text","name","email","formControlName","email"],["for","password"],[1,"password"],[1,"password-img"],["type","password","name","password","formControlName","password"],["for","confirmPass"],["type","password","name","confirmPass","formControlName","confirmPass",3,"ngClass"],[1,"sign-form__sign-element","options"],[1,"sign-form__sign-element__option-containter"],["class","sign-form__sign-element__option-containter__option",4,"ngFor","ngForOf"],[1,"sign-form__sign-form-btn"],["type","submit",1,"btn-default",3,"disabled"],["class","fixed-pop-up-container",4,"ngIf"],[1,"sign-form__sign-element__option-containter__option"],["type","checkbox",3,"value","change"],["type","checkbox",3,"value","name","change"],[1,"fixed-pop-up-container"],[1,"pop-up-body"],[1,"pop-up-buttons"],["type","button",1,"btn-default","narrow-btn",3,"click"]],template:function(H,ge){1&H&&(c.TgZ(0,"div"),c.TgZ(1,"div",0),c.TgZ(2,"form",1),c.NdJ("ngSubmit",function(){return ge.onSubmit(ge.signupForm)}),c.YNc(3,tr,1,0,"app-loading-spinner",2),c.TgZ(4,"div",3),c.TgZ(5,"h2"),c._uU(6,"Create user"),c.qZA(),c.qZA(),c._UZ(7,"hr",4),c.TgZ(8,"div",5),c.TgZ(9,"label",6),c._uU(10,"Display Name (visible to the client)"),c.qZA(),c.TgZ(11,"div",7),c._UZ(12,"div",8),c._UZ(13,"input",9),c.qZA(),c.TgZ(14,"ul",10),c.YNc(15,An,2,0,"li",2),c.YNc(16,Mn,2,0,"li",2),c.YNc(17,Oi,2,0,"li",2),c.qZA(),c.qZA(),c.TgZ(18,"div",5),c.TgZ(19,"label",11),c._uU(20,"Email"),c.qZA(),c.TgZ(21,"div",12),c._UZ(22,"div",13),c._UZ(23,"input",14),c.qZA(),c.TgZ(24,"ul",10),c.YNc(25,mn,2,0,"li",2),c.YNc(26,Jt,2,0,"li",2),c.qZA(),c.qZA(),c.TgZ(27,"div",5),c.TgZ(28,"label",15),c._uU(29,"Password"),c.qZA(),c.TgZ(30,"div",16),c._UZ(31,"div",17),c._UZ(32,"input",18),c.qZA(),c.TgZ(33,"ul",10),c.YNc(34,Zn,2,0,"li",2),c.YNc(35,Un,2,0,"li",2),c.YNc(36,Kt,2,0,"li",2),c.qZA(),c.qZA(),c.TgZ(37,"div",5),c.TgZ(38,"label",19),c._uU(39,"Confirm Password"),c.qZA(),c.TgZ(40,"div",16),c._UZ(41,"div",17),c._UZ(42,"input",20),c.qZA(),c.TgZ(43,"ul",10),c.YNc(44,pr,2,0,"li",2),c.qZA(),c.qZA(),c.TgZ(45,"div",21),c.TgZ(46,"div"),c.TgZ(47,"div",3),c.TgZ(48,"h2"),c._uU(49,"Roles"),c.qZA(),c.qZA(),c._UZ(50,"hr",4),c.TgZ(51,"div",22),c.YNc(52,jr,4,6,"div",23),c.qZA(),c.qZA(),c.TgZ(53,"div"),c.TgZ(54,"div",3),c.TgZ(55,"h2"),c._uU(56,"Domains"),c.qZA(),c.qZA(),c._UZ(57,"hr",4),c.TgZ(58,"div",22),c.YNc(59,Kn,4,3,"div",23),c.qZA(),c.qZA(),c.qZA(),c.TgZ(60,"div",24),c.TgZ(61,"button",25),c._uU(62,"Create user"),c.qZA(),c.TgZ(63,"ul",10),c.YNc(64,Tt,2,1,"li",2),c.YNc(65,He,2,1,"li",2),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(66,Ve,7,0,"div",26),c.qZA()),2&H&&(c.xp6(2),c.Q6J("formGroup",ge.signupForm),c.xp6(1),c.Q6J("ngIf",ge.isLoading),c.xp6(12),c.Q6J("ngIf",!ge.signupForm.get("name").valid&&!ge.signupForm.get("name").hasError("maxlength")&&!ge.signupForm.get("name").hasError("minlength")&&ge.signupForm.get("name").touched),c.xp6(1),c.Q6J("ngIf",ge.signupForm.get("name").hasError("maxlength")&&ge.signupForm.get("name").touched),c.xp6(1),c.Q6J("ngIf",ge.signupForm.get("name").hasError("minlength")&&ge.signupForm.get("name").touched),c.xp6(8),c.Q6J("ngIf",!ge.signupForm.get("email").valid&&!ge.signupForm.get("email").hasError("email")&&ge.signupForm.get("email").touched),c.xp6(1),c.Q6J("ngIf",ge.signupForm.get("email").hasError("email")&&ge.signupForm.get("email").touched),c.xp6(8),c.Q6J("ngIf",!ge.signupForm.get("password").valid&&!ge.signupForm.get("password").hasError("maxlength")&&!ge.signupForm.get("password").hasError("minlength")&&ge.signupForm.get("password").touched),c.xp6(1),c.Q6J("ngIf",ge.signupForm.get("password").hasError("maxlength")&&ge.signupForm.get("password").touched),c.xp6(1),c.Q6J("ngIf",ge.signupForm.get("password").hasError("minlength")&&ge.signupForm.get("password").touched),c.xp6(6),c.Q6J("ngClass",c.VKq(18,Mt,!ge.signupForm.get("confirmPass").valid&&ge.signupForm.get("confirmPass").dirty)),c.xp6(2),c.Q6J("ngIf",!ge.signupForm.get("confirmPass").valid&&ge.signupForm.get("confirmPass").dirty),c.xp6(8),c.Q6J("ngForOf",ge.roles),c.xp6(7),c.Q6J("ngForOf",ge.domains),c.xp6(2),c.Q6J("disabled",!ge.signupForm.valid),c.xp6(3),c.Q6J("ngIf",ge.errorAuthMsg),c.xp6(1),c.Q6J("ngIf",ge.errorOnSetUserData),c.xp6(1),c.Q6J("ngIf",ge.finishedReg))},directives:[re._Y,re.JL,re.sg,O.O5,re.Fj,re.JJ,re.u,O.mk,O.sg,Ce],styles:['@import"https://fonts.googleapis.com/css?family=Rubik&display=swap";.sign-form[_ngcontent-%COMP%]{background-color:var(--color2);max-width:767px;padding:20px;margin:0 auto;position:relative}.sign-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.sign-form__sign-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ebc317;text-align:center;font-size:1.3em;padding:5px}.sign-form__sign-element[_ngcontent-%COMP%]{margin:20px 0}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{display:flex}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(user.73c0f083ad3711c1d950.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   .email-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;box-sizing:border-box;background-image:url(email.31cd4a3f10faa4acdb5c.png);padding:10px}.sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .password-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(password.63582da5386052e0358d.png)}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 50px);border:1px solid var(--color8);color:var(--color7);border-radius:0 3px 3px 0;box-sizing:border-box;padding:7px;outline:none;background-color:#ffffff80;filter:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{border:1px solid var(--color8);-webkit-text-fill-color:var(--color7);-webkit-box-shadow:none;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.sign-form__sign-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;color:var(--color7)}.sign-form[_ngcontent-%COMP%]   .hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:10px 0 20px}.sign-form[_ngcontent-%COMP%]{border:1px solid var(--color8);border-radius:5px}.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}@media not all and (pointer: coarse){.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]:hover{background-color:#fbf4d3}}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:49%}.sign-form[_ngcontent-%COMP%]{min-width:400px}']}),ne})();var nn=Y(9829);let At=(()=>{class ne{constructor(H,ge){this._router=H,this._firebaseAuth=ge}canActivate(H,ge){const{autenticationRequired:pt,autenticationFailureRedirectUrl:Vt}=H.data;return new Promise((vr,lr)=>{this.userSubscription=this._firebaseAuth.authState.subscribe(Zr=>pt&&Zr||!pt&&!Zr?(this.userSubscription.unsubscribe(),vr(!0)):(this.userSubscription.unsubscribe(),this._router.navigate([Vt])))})}}return ne.\u0275fac=function(H){return new(H||ne)(c.LFG(w.F0),c.LFG(nn.zQ))},ne.\u0275prov=c.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})();function Ne(ne,qe){if(1&ne&&(c.TgZ(0,"p"),c._uU(1),c.qZA()),2&ne){const H=c.oxw().$implicit;c.xp6(1),c.hij(" ",H.name," ")}}const ft=function(ne){return[ne]};function vt(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"li",5),c.NdJ("click",function(){const Vt=c.CHM(H).$implicit;return c.oxw().setActiveRoute(Vt.route)}),c.YNc(1,Ne,2,1,"p",6),c.qZA()}if(2&ne){const H=qe.$implicit;c.Q6J("routerLink",c.VKq(2,ft,H.route)),c.xp6(1),c.Q6J("ngIf",H.checked)}}let Dt=(()=>{class ne{constructor(H,ge){this._authService=H,this._router=ge,this.user=void 0}ngOnInit(){this.userSubscirption=this._authService.user.subscribe(H=>{if(this.user=H,null!=this.user){const ge=JSON.parse(localStorage.getItem("operator/activeRoute"));ge?new Promise((pt,Vt)=>{for(let $t=0;$t<this.user.roles.length;$t++){if(ge==this.user.roles[$t].route&&this.user.roles[$t].checked)return void this._router.navigate(["/control-panel/settings/"+ge]);$t==this.user.roles.length-1&&pt()}}).then(()=>{this.setRoute()}):this.setRoute()}})}ngOnDestroy(){this.userSubscirption.unsubscribe()}setRoute(){for(const H of this.user.roles)if(H.checked)return this._router.navigate(["/control-panel/settings/"+H.route]),void localStorage.setItem("operator/activeRoute",JSON.stringify(H.route))}setActiveRoute(H){localStorage.setItem("operator/activeRoute",JSON.stringify(H))}}return ne.\u0275fac=function(H){return new(H||ne)(c.Y36(K.e),c.Y36(w.F0))},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-settings"]],decls:7,vars:1,consts:[[1,"container"],[1,"settings"],[1,"settings__nav"],["routerLinkActive","settings-link-active",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"settings__options"],["routerLinkActive","settings-link-active",3,"routerLink","click"],[4,"ngIf"]],template:function(H,ge){1&H&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"ul"),c.YNc(4,vt,2,4,"li",3),c.qZA(),c.qZA(),c.TgZ(5,"div",4),c._UZ(6,"router-outlet"),c.qZA(),c.qZA(),c.qZA()),2&H&&(c.xp6(4),c.Q6J("ngForOf",null==ge.user?null:ge.user.roles))},directives:[O.sg,w.lC,w.Od,w.rH,O.O5],styles:[".settings[_ngcontent-%COMP%]{display:flex;align-items:flex-start;height:calc(100vh - 48px)}.settings__nav[_ngcontent-%COMP%]{width:170px;height:100%;box-sizing:border-box;border-right:1px solid var(--color8);padding-right:10px;overflow:scroll;scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.settings__nav[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.settings__nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.settings__nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.settings__nav[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.settings__nav[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.settings__nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.settings__nav[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.settings__nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;cursor:pointer;padding:5px 0 5px 10px;border-top-right-radius:10px;border-bottom-right-radius:10px}.settings__nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem}.settings__nav[_ngcontent-%COMP%]   .settings-link-active[_ngcontent-%COMP%]{background-color:#ebc317;color:#fff}.settings__options[_ngcontent-%COMP%]{width:calc(100% - 170px);height:100%;padding:5px 10px 20px;box-sizing:border-box;overflow:scroll;scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.settings__options[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.settings__options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.settings__options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.settings__options[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.settings__options[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.settings__options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.settings__options[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}"]}),ne})();const Ut=function(){return["active"]},cn=function(){return["inactive"]};let fn=(()=>{class ne{constructor(){}ngOnInit(){}}return ne.\u0275fac=function(H){return new(H||ne)},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-users"]],decls:8,vars:4,consts:[[1,"container"],[1,"sub-nav"],["routerLinkActive","router-link-active",3,"routerLink"]],template:function(H,ge){1&H&&(c.TgZ(0,"div",0),c.TgZ(1,"div"),c.TgZ(2,"ul",1),c.TgZ(3,"li",2),c._uU(4,"Active Accounts"),c.qZA(),c.TgZ(5,"li",2),c._uU(6,"Inactive Accounts"),c.qZA(),c.qZA(),c.qZA(),c._UZ(7,"router-outlet"),c.qZA()),2&H&&(c.xp6(3),c.Q6J("routerLink",c.DdM(2,Ut)),c.xp6(2),c.Q6J("routerLink",c.DdM(3,cn)))},directives:[w.Od,w.rH,w.lC],styles:[""]}),ne})();const Gt=function(){return["change-password"]},Se=function(){return["change-theme"]};let Ie=(()=>{class ne{constructor(){}ngOnInit(){}}return ne.\u0275fac=function(H){return new(H||ne)},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-account-settings"]],decls:9,vars:4,consts:[[1,"container"],[1,"sub-nav"],["routerLinkActive","router-link-active",3,"routerLink"]],template:function(H,ge){1&H&&(c.TgZ(0,"div",0),c.TgZ(1,"div"),c.TgZ(2,"ul",1),c.TgZ(3,"li",2),c._uU(4," Change Password "),c.qZA(),c.TgZ(5,"li",2),c._uU(6," Change Theme "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div"),c._UZ(8,"router-outlet"),c.qZA(),c.qZA()),2&H&&(c.xp6(3),c.Q6J("routerLink",c.DdM(2,Gt)),c.xp6(2),c.Q6J("routerLink",c.DdM(3,Se)))},directives:[w.Od,w.rH,w.lC],styles:[""]}),ne})();function $e(ne,qe){1&ne&&c._UZ(0,"app-loading-spinner")}function Je(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"button",7),c.NdJ("click",function(){return c.CHM(H),c.oxw().onShowDomainForm()}),c._uU(1," Add domain "),c.qZA()}}function Xe(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1,"\u0410llowed characters: a-z"),c.qZA())}function Zt(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"form",8),c.NdJ("ngSubmit",function(){c.CHM(H);const pt=c.oxw();return pt.submitDomainForm(pt.addDomainForm)}),c.TgZ(1,"div",9),c._UZ(2,"input",10),c._UZ(3,"input",11),c.qZA(),c.TgZ(4,"ul",6),c.YNc(5,Xe,2,0,"li",0),c.qZA(),c.TgZ(6,"div",12),c.TgZ(7,"button",13),c._uU(8,"Add"),c.qZA(),c.TgZ(9,"button",14),c.NdJ("click",function(){return c.CHM(H),c.oxw().onResetDomainForm()}),c._uU(10,"Cancel"),c.qZA(),c.qZA(),c.qZA()}if(2&ne){const H=c.oxw();c.Q6J("formGroup",H.addDomainForm),c.xp6(5),c.Q6J("ngIf",H.addDomainForm.get("domain").hasError("pattern")),c.xp6(2),c.Q6J("disabled",H.addDomainForm.invalid)}}function _n(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c.TgZ(6,"button",15),c.NdJ("click",function(){const Vt=c.CHM(H).$implicit;return c.oxw().deleteDomainPopUpFun(Vt)}),c._uU(7,"Delete"),c.qZA(),c.qZA(),c.qZA()}if(2&ne){const H=qe.$implicit;c.xp6(2),c.Oqu(H.domain),c.xp6(2),c.Oqu(H.description)}}function or(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",16),c.TgZ(1,"div",17),c.TgZ(2,"p"),c._uU(3),c.qZA(),c.TgZ(4,"div",18),c.TgZ(5,"button",19),c.NdJ("click",function(){return c.CHM(H),c.oxw().deleteDomain()}),c._uU(6,"Yes"),c.qZA(),c.TgZ(7,"button",15),c.NdJ("click",function(){return c.CHM(H),c.oxw().cancelPopUpFun()}),c._uU(8,"No"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&ne){const H=c.oxw();c.xp6(3),c.hij("\u0410re you sure you want to delete domain ",H.currentDomain.description,"?")}}function Bn(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnGetUsers)}}function Vn(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnGetDomains)}}function ai(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnAddDomain)}}function Hr(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnSetDomain)}}function Xr(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnDeleteDomain)}}function Dr(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnDeleteDomainItem)}}let Ri=(()=>{class ne{constructor(H,ge){this._fb=H,this._firestoreCollections=ge,this.deleteDomainPopUp=!1,this.showDomainForm=!1,this.isLoading=!1,this.errorOnGetUsers="",this.errorOnGetDomains="",this.errorOnAddDomain="",this.errorOnSetDomain="",this.errorOnDeleteDomain="",this.errorOnDeleteDomainItem=""}ngOnInit(){this.addDomainForm=this._fb.group({domain:[null,[re.kI.required,re.kI.pattern("^[a-z]*$")]],description:[null,re.kI.required]}),this._usersSubscription=this._firestoreCollections.getUsers().subscribe(H=>{this.users=H.map(ge=>Object.assign({id:ge.payload.doc.id},ge.payload.doc.data())),this.errorOnGetUsers=""},H=>{this.errorOnGetUsers=H.message}),this._domainsSubscription=this._firestoreCollections.getDomains().subscribe(H=>{this.domains=H.map(ge=>Object.assign({id:ge.payload.doc.id},ge.payload.doc.data())),this.errorOnGetDomains=""},H=>{this.errorOnGetDomains=H.message})}ngOnDestroy(){this._domainsSubscription.unsubscribe(),this._usersSubscription.unsubscribe()}onShowDomainForm(){this.showDomainForm=!0}onResetDomainForm(){this.showDomainForm=!1,this.addDomainForm.reset()}submitDomainForm(H){if(H.invalid)return;this.isLoading=!0;const ge=H.value.domain,pt=H.value.description,vr={domain:ge,description:pt,checked:!1};this._firestoreCollections.addDomain({domain:ge,description:pt}).then(()=>{for(const lr of this.users)this._firestoreCollections.setDomain(lr.uid,vr).then(()=>{this.onResetDomainForm(),this.errorOnSetDomain="",this.isLoading=!1},Zr=>{this.errorOnSetDomain=Zr.message,this.isLoading=!1});H.reset(),this.errorOnAddDomain="",this.isLoading=!1},lr=>{this.errorOnAddDomain=lr.message,this.isLoading=!1})}deleteDomain(){this._firestoreCollections.deleteDomain(this.currentDomain.id).then(()=>{const H=this.currentDomain.description,ge=this.currentDomain.domain;for(const pt of this.users)this.deleteDomainItem(pt.uid,{checked:!0,description:H,domain:ge});for(const pt of this.users)this.deleteDomainItem(pt.uid,{checked:!1,description:H,domain:ge});this.cancelPopUpFun(),this.errorOnDeleteDomain=""},H=>{this.errorOnDeleteDomain=H.message})}deleteDomainPopUpFun(H){this.deleteDomainPopUp=!0,this.currentDomain=H}cancelPopUpFun(){this.deleteDomainPopUp=!1,this.currentDomain=void 0}deleteDomainItem(H,ge){this._firestoreCollections.deleteDomainItem(H,ge).then(()=>{this.errorOnDeleteDomainItem=""},pt=>{this.errorOnDeleteDomainItem=pt.message})}}return ne.\u0275fac=function(H){return new(H||ne)(c.Y36(re.qu),c.Y36(at.P))},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-allowed-domains"]],decls:22,vars:11,consts:[[4,"ngIf"],["style","margin-bottom: 10px;","type","button","class","btn-default narrow-btn",3,"click",4,"ngIf"],["class","domain-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["class","fixed-pop-up-container",4,"ngIf"],[1,"error"],["type","button",1,"btn-default","narrow-btn",2,"margin-bottom","10px",3,"click"],[1,"domain-form",3,"formGroup","ngSubmit"],[1,"domain-form__inputs"],["type","text","formControlName","domain","placeholder","Link parameter..."],["type","text","formControlName","description","placeholder","Description..."],[1,"domain-form__buttons"],["type","submit",1,"btn-default","narrow-btn",2,"margin-right","10px",3,"disabled"],["type","button",1,"btn-default","narrow-btn",3,"click"],[1,"btn-default","narrow-btn",3,"click"],[1,"fixed-pop-up-container"],[1,"pop-up-body"],[1,"pop-up-buttons"],[1,"btn-default","narrow-btn",2,"margin-right","10px",3,"click"]],template:function(H,ge){1&H&&(c.TgZ(0,"div"),c.YNc(1,$e,1,0,"app-loading-spinner",0),c.TgZ(2,"div"),c.YNc(3,Je,2,0,"button",1),c.YNc(4,Zt,11,3,"form",2),c.qZA(),c.TgZ(5,"div"),c.TgZ(6,"table",3),c.TgZ(7,"tr"),c.TgZ(8,"th"),c._uU(9,"Link parameter"),c.qZA(),c.TgZ(10,"th"),c._uU(11,"Description"),c.qZA(),c._UZ(12,"th"),c.qZA(),c.YNc(13,_n,8,2,"tr",4),c.qZA(),c.qZA(),c.YNc(14,or,9,1,"div",5),c.TgZ(15,"ul",6),c.YNc(16,Bn,2,1,"li",0),c.YNc(17,Vn,2,1,"li",0),c.YNc(18,ai,2,1,"li",0),c.YNc(19,Hr,2,1,"li",0),c.YNc(20,Xr,2,1,"li",0),c.YNc(21,Dr,2,1,"li",0),c.qZA(),c.qZA()),2&H&&(c.xp6(1),c.Q6J("ngIf",ge.isLoading),c.xp6(2),c.Q6J("ngIf",!ge.showDomainForm),c.xp6(1),c.Q6J("ngIf",ge.showDomainForm),c.xp6(9),c.Q6J("ngForOf",ge.domains),c.xp6(1),c.Q6J("ngIf",ge.deleteDomainPopUp),c.xp6(2),c.Q6J("ngIf",ge.errorOnGetUsers),c.xp6(1),c.Q6J("ngIf",ge.errorOnGetDomains),c.xp6(1),c.Q6J("ngIf",ge.errorOnAddDomain),c.xp6(1),c.Q6J("ngIf",ge.errorOnSetDomain),c.xp6(1),c.Q6J("ngIf",ge.errorOnDeleteDomain),c.xp6(1),c.Q6J("ngIf",ge.errorOnDeleteDomainItem))},directives:[O.O5,O.sg,Ce,re._Y,re.JL,re.sg,re.Fj,re.JJ,re.u],styles:[".domain-form[_ngcontent-%COMP%]{margin-bottom:10px}.domain-form__inputs[_ngcontent-%COMP%]{width:440px}.domain-form__inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:5px;border:1px solid var(--color8);outline:none;padding:5px;width:200px}.domain-form__inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.domain-form__buttons[_ngcontent-%COMP%]{margin-top:10px}.domain-form__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:65px!important}"]}),ne})(),No=(()=>{class ne{transform(H,ge){return H?ge?(ge=ge.toLowerCase(),H.filter(pt=>JSON.stringify(pt.name).toLocaleLowerCase().includes(ge)||JSON.stringify(pt.email).toLocaleLowerCase().includes(ge))):H:null}}return ne.\u0275fac=function(H){return new(H||ne)},ne.\u0275pipe=c.Yjl({name:"searchPipe",type:ne,pure:!0}),ne})();function Gi(ne,qe){1&ne&&c._UZ(0,"app-loading-spinner")}function co(ne,qe){if(1&ne&&(c.TgZ(0,"div",20),c.TgZ(1,"label"),c._uU(2),c.qZA(),c._UZ(3,"input",21),c.qZA()),2&ne){const H=qe.$implicit;c.xp6(2),c.hij(" ",H.name," "),c.xp6(1),c.uIk("checked",H.checked?"checked":null)}}function rs(ne,qe){if(1&ne&&(c.TgZ(0,"div",22),c.TgZ(1,"label"),c._uU(2),c.qZA(),c._UZ(3,"input",23),c.qZA()),2&ne){const H=qe.$implicit;c.xp6(2),c.hij(" ",H.description," "),c.xp6(1),c.Q6J("checked",H.checked?"checked":null)}}function Nr(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"button",10),c.NdJ("click",function(){c.CHM(H);const pt=c.oxw().$implicit;return c.oxw(2).changeAccountActivity(pt.uid,!0)}),c._uU(1," Activate "),c.qZA()}}function cr(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"button",10),c.NdJ("click",function(){c.CHM(H);const pt=c.oxw().$implicit;return c.oxw(2).changeAccountActivity(pt.uid,!1)}),c._uU(1," Deactivate "),c.qZA()}}function vn(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c.TgZ(2,"div",9),c.TgZ(3,"button",10),c.NdJ("click",function(){const Vt=c.CHM(H).$implicit;return c.oxw(2).editUser(Vt)}),c._uU(4,"Edit"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(5,"td"),c.TgZ(6,"div",11),c._uU(7),c.qZA(),c.qZA(),c.TgZ(8,"td"),c.TgZ(9,"div",12),c._uU(10),c.qZA(),c.qZA(),c.TgZ(11,"td"),c.TgZ(12,"div",13),c.YNc(13,co,4,2,"div",14),c.qZA(),c.qZA(),c.TgZ(14,"td"),c.TgZ(15,"div",15),c.YNc(16,rs,4,2,"div",16),c.qZA(),c.qZA(),c.TgZ(17,"td"),c.TgZ(18,"div",17),c.TgZ(19,"button",18),c.NdJ("click",function(){const Vt=c.CHM(H).$implicit;return c.oxw(2).resetPassword(Vt.email)}),c._uU(20," Reset pass "),c.qZA(),c.YNc(21,Nr,2,0,"button",19),c.YNc(22,cr,2,0,"button",19),c.TgZ(23,"button",10),c.NdJ("click",function(){const Vt=c.CHM(H).$implicit;return c.oxw(2).getUserLogins(Vt.uid)}),c._uU(24," Logins "),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&ne){const H=qe.$implicit,ge=c.oxw(2);c.xp6(7),c.hij(" ",H.email," "),c.xp6(3),c.hij(" ",H.name," "),c.xp6(3),c.Q6J("ngForOf",H.roles),c.xp6(3),c.Q6J("ngForOf",H.domains),c.xp6(3),c.Q6J("disabled",ge.disabledResetPasswordButton&&ge.currentResetEmail==H.email),c.xp6(2),c.Q6J("ngIf",!H.active),c.xp6(1),c.Q6J("ngIf",H.active)}}function Vr(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"div",4),c._UZ(2,"div",5),c.TgZ(3,"input",6),c.NdJ("ngModelChange",function(pt){return c.CHM(H),c.oxw().searchParams=pt}),c.qZA(),c.qZA(),c.TgZ(4,"table",7),c.TgZ(5,"tr"),c._UZ(6,"th"),c.TgZ(7,"th"),c._uU(8,"Email Address"),c.qZA(),c.TgZ(9,"th"),c._uU(10,"Display Name"),c.qZA(),c.TgZ(11,"th"),c._uU(12,"Roles"),c.qZA(),c.TgZ(13,"th"),c._uU(14,"Domains"),c.qZA(),c._UZ(15,"th"),c.qZA(),c.YNc(16,vn,25,7,"tr",8),c.ALo(17,"searchPipe"),c.qZA(),c.qZA()}if(2&ne){const H=c.oxw();c.xp6(3),c.Q6J("ngModel",H.searchParams),c.xp6(13),c.Q6J("ngForOf",c.xi3(17,2,H.users,H.searchParams))}}function oo(ne,qe){1&ne&&(c.TgZ(0,"p"),c._uU(1," \u0422here are currently no users added. "),c.qZA())}function Sr(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",24),c.TgZ(1,"div",25),c.TgZ(2,"p"),c._uU(3," Reset password email was successfully sent to "),c.TgZ(4,"span",26),c._uU(5),c.qZA(),c._uU(6,"! "),c.qZA(),c.TgZ(7,"div",27),c.TgZ(8,"button",10),c.NdJ("click",function(){return c.CHM(H),c.oxw().closeResetPasswordPopUp()}),c._uU(9,"Close"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&ne){const H=c.oxw();c.xp6(5),c.Oqu(H.currentResetEmail)}}function Xt(ne,qe){if(1&ne&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.ALo(3,"date"),c.ALo(4,"date"),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.qZA()),2&ne){const H=qe.$implicit;c.xp6(2),c.AsE("",c.xi3(3,5,H.date.toDate(),"dd.MM.yyyy")," at ",c.xi3(4,8,H.date.toDate(),"HH:mm"),""),c.xp6(4),c.Oqu(H.ip),c.xp6(2),c.Oqu(H.country),c.xp6(2),c.Oqu(H.city)}}function ln(ne,qe){if(1&ne&&(c.TgZ(0,"table",7),c.TgZ(1,"tr"),c.TgZ(2,"th"),c._uU(3,"Time"),c.qZA(),c.TgZ(4,"th"),c._uU(5,"IP"),c.qZA(),c.TgZ(6,"th"),c._uU(7,"Country"),c.qZA(),c.TgZ(8,"th"),c._uU(9,"City"),c.qZA(),c.qZA(),c.YNc(10,Xt,11,11,"tr",8),c.qZA()),2&ne){const H=c.oxw(2);c.xp6(10),c.Q6J("ngForOf",null==H.loginHistory[0]?null:H.loginHistory[0].loginHistory)}}function In(ne,qe){1&ne&&(c.TgZ(0,"p"),c._uU(1," \u0422he current user still has no logins. "),c.qZA())}function Qr(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",24),c.TgZ(1,"div",28),c.TgZ(2,"div",29),c.TgZ(3,"button",30),c.NdJ("click",function(){return c.CHM(H),c.oxw().closeLogins()}),c._uU(4,"Close"),c.qZA(),c.qZA(),c.YNc(5,ln,11,1,"table",31),c.YNc(6,In,2,0,"p",1),c.qZA(),c.qZA()}if(2&ne){const H=c.oxw();c.xp6(5),c.Q6J("ngIf",(null==H.loginHistory[0]?null:H.loginHistory[0].loginHistory.length)>0),c.xp6(1),c.Q6J("ngIf",0==(null==H.loginHistory[0]?null:H.loginHistory[0].loginHistory.length))}}function Si(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," Please enter your name! "),c.qZA())}function Ar(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," The name could not be longer then 10 characters! "),c.qZA())}function ni(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," The name should be at least 3 characters! "),c.qZA())}function Er(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",44),c.TgZ(1,"label"),c._uU(2),c.qZA(),c.TgZ(3,"input",45),c.NdJ("change",function(pt){const $t=c.CHM(H).index;return c.oxw(2).onRoleChange(pt,$t)}),c.qZA(),c.qZA()}if(2&ne){const H=qe.$implicit;c.xp6(2),c.hij(" ",H.name," "),c.xp6(1),c.Q6J("checked",H.checked?"checked":null)}}function bo(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",44),c.TgZ(1,"label"),c._uU(2),c.qZA(),c.TgZ(3,"input",45),c.NdJ("change",function(pt){const $t=c.CHM(H).index;return c.oxw(2).onDomainChange(pt,$t)}),c.qZA(),c.qZA()}if(2&ne){const H=qe.$implicit;c.xp6(2),c.hij(" ",H.description," "),c.xp6(1),c.Q6J("checked",H.checked?"checked":null)}}function so(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",24),c.TgZ(1,"div",25),c.TgZ(2,"form",32),c.NdJ("ngSubmit",function(){return c.CHM(H),c.oxw().submitEditUserForm()}),c.TgZ(3,"div",33),c.TgZ(4,"h2"),c._uU(5,"Change User"),c.qZA(),c.qZA(),c.TgZ(6,"div",34),c.TgZ(7,"label",35),c._uU(8,"Display Name (visible to the client)"),c.qZA(),c.TgZ(9,"div",36),c._UZ(10,"div",37),c._UZ(11,"input",38),c.qZA(),c.TgZ(12,"ul",3),c.YNc(13,Si,2,0,"li",1),c.YNc(14,Ar,2,0,"li",1),c.YNc(15,ni,2,0,"li",1),c.qZA(),c.qZA(),c.TgZ(16,"div",39),c.TgZ(17,"div"),c.TgZ(18,"div",33),c.TgZ(19,"h2"),c._uU(20,"Roles"),c.qZA(),c.qZA(),c._UZ(21,"hr",40),c.TgZ(22,"div",41),c.YNc(23,Er,4,2,"div",42),c.qZA(),c.qZA(),c.TgZ(24,"div"),c.TgZ(25,"div",33),c.TgZ(26,"h2"),c._uU(27,"Domains"),c.qZA(),c.qZA(),c._UZ(28,"hr",40),c.TgZ(29,"div",41),c.YNc(30,bo,4,2,"div",42),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"div"),c.TgZ(32,"button",43),c._uU(33,"Apply"),c.qZA(),c.TgZ(34,"button",10),c.NdJ("click",function(){return c.CHM(H),c.oxw().resetEditUserForm()}),c._uU(35,"Cancel"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&ne){const H=c.oxw();c.xp6(2),c.Q6J("formGroup",H.editUserForm),c.xp6(11),c.Q6J("ngIf",!H.editUserForm.get("name").valid&&!H.editUserForm.get("name").hasError("maxlength")&&!H.editUserForm.get("name").hasError("minlength")&&H.editUserForm.get("name").touched),c.xp6(1),c.Q6J("ngIf",H.editUserForm.get("name").hasError("maxlength")&&H.editUserForm.get("name").touched),c.xp6(1),c.Q6J("ngIf",H.editUserForm.get("name").hasError("minlength")&&H.editUserForm.get("name").touched),c.xp6(8),c.Q6J("ngForOf",H.currentUser.roles),c.xp6(7),c.Q6J("ngForOf",H.currentUser.domains)}}function xn(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnSetUserData)}}function Qe(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnGetUserLogins)}}function Be(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnUpdateUserActivity)}}function Ae(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorMsgOnResetPassword)}}let ot=(()=>{class ne{constructor(H,ge,pt){this._firestoreCollections=H,this._firebaseAuth=ge,this._fb=pt,this.users=[],this.resetPasswordPopUp=!1,this.disabledResetPasswordButton=!1,this.loginHistory=[],this.isLoading=!1,this.errorOnSetUserData="",this.errorOnGetUserLogins="",this.errorOnUpdateUserActivity="",this.errorMsgOnResetPassword=""}editUser(H){this.currentUser=H,this.editUserForm=this._fb.group({name:[H.name,[re.kI.required,re.kI.minLength(3),re.kI.maxLength(10)]],roles:this._fb.array([]),domains:this._fb.array([])});const ge=this.editUserForm.get("roles"),pt=this.editUserForm.get("domains");for(const Vt of H.roles)ge.push(new re.NI({checked:Vt.checked,name:Vt.name,route:Vt.route,value:Vt.value}));for(const Vt of H.domains)pt.push(new re.NI({checked:Vt.checked,description:Vt.description,domain:Vt.domain}))}submitEditUserForm(){this.editUserForm.invalid||this._firestoreCollections.setUserData({name:this.editUserForm.value.name,email:this.currentUser.email,active:this.currentUser.active,roles:this.editUserForm.value.roles,domains:this.editUserForm.value.domains,uid:this.currentUser.uid},!1).then(()=>{this.editUserForm.reset(),this.currentUser=void 0,this.errorOnSetUserData=""},Zr=>{this.errorOnSetUserData=Zr.message})}resetEditUserForm(){this.currentUser=void 0,this.editUserForm.reset()}onRoleChange(H,ge){this.editUserForm.value.roles[ge].checked=!!H.target.checked}onDomainChange(H,ge){this.editUserForm.value.domains[ge].checked=!!H.target.checked}getUserLogins(H){this._loginHistorySubscription=this._firestoreCollections.getUserLogins(H).subscribe(ge=>{this.loginHistory=ge.map(pt=>Object.assign({id:pt.payload.doc.id},pt.payload.doc.data())),this.errorOnGetUserLogins=""},ge=>{this.errorOnGetUserLogins=ge.message})}closeLogins(){this.loginHistory=[],this._loginHistorySubscription.unsubscribe()}changeAccountActivity(H,ge){this._firestoreCollections.updateUserActivity({userId:H,parameter:ge}).then(()=>{this.errorOnUpdateUserActivity=""},vr=>{this.errorOnUpdateUserActivity=vr.message})}closeResetPasswordPopUp(){this.resetPasswordPopUp=!1,this.disabledResetPasswordButton=!1,this.currentResetEmail=""}resetPassword(H){this.isLoading=!0,this.disabledResetPasswordButton=!0,this.currentResetEmail=H,this._firebaseAuth.sendPasswordResetEmail(this.currentResetEmail).then(()=>{this.resetPasswordPopUp=!0,this.errorMsgOnResetPassword="",this.isLoading=!1},ge=>{this.errorMsgOnResetPassword=ge.message,this.disabledResetPasswordButton=!1,this.isLoading=!1})}}return ne.\u0275fac=function(H){return new(H||ne)(c.Y36(at.P),c.Y36(nn.zQ),c.Y36(re.qu))},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-users-template"]],inputs:{users:"users"},decls:12,vars:10,consts:[[1,"users-container"],[4,"ngIf"],["class","fixed-pop-up-container",4,"ngIf"],[1,"error"],[1,"search-field"],[1,"search-field__icon"],["type","text","placeholder","Search by email or display name...",1,"search-field__input",3,"ngModel","ngModelChange"],[1,"table"],[4,"ngFor","ngForOf"],[1,"table__edit"],["type","button",1,"btn-default","narrow-btn",3,"click"],[1,"table__email"],[1,"table__name"],[1,"table__option","table__roles"],["class","table__roles__role",4,"ngFor","ngForOf"],[1,"table__option","table__domains"],["class","table__domains__domain",4,"ngFor","ngForOf"],[1,"table__buttons"],["type","button",1,"btn-default","narrow-btn",3,"disabled","click"],["class","btn-default narrow-btn","type","button",3,"click",4,"ngIf"],[1,"table__roles__role"],["disabled","","type","checkbox"],[1,"table__domains__domain"],["type","checkbox","disabled","",3,"checked"],[1,"fixed-pop-up-container"],[1,"pop-up-body"],[2,"font-weight","bold"],[1,"pop-up-buttons"],[1,"pop-up-body","login-history"],[1,"login-history__close-btn"],[1,"btn-default","narrow-btn",3,"click"],["class","table",4,"ngIf"],[1,"sign-form","edit-user-form",3,"formGroup","ngSubmit"],[1,"sign-form__sign-up-header"],[1,"sign-form__sign-element"],["for","name"],[1,"name"],[1,"name-img"],["type","text","name","name","formControlName","name"],[1,"sign-form__sign-element","options"],[1,"hr-border"],[1,"sign-form__sign-element__option-containter"],["class","sign-form__sign-element__option-containter__option",4,"ngFor","ngForOf"],["type","submit",1,"btn-default","narrow-btn",2,"margin-right","10px"],[1,"sign-form__sign-element__option-containter__option"],["type","checkbox",3,"checked","change"]],template:function(H,ge){1&H&&(c.TgZ(0,"div",0),c.YNc(1,Gi,1,0,"app-loading-spinner",1),c.YNc(2,Vr,18,5,"div",1),c.YNc(3,oo,2,0,"p",1),c.YNc(4,Sr,10,1,"div",2),c.YNc(5,Qr,7,2,"div",2),c.YNc(6,so,36,6,"div",2),c.TgZ(7,"ul",3),c.YNc(8,xn,2,1,"li",1),c.YNc(9,Qe,2,1,"li",1),c.YNc(10,Be,2,1,"li",1),c.YNc(11,Ae,2,1,"li",1),c.qZA(),c.qZA()),2&H&&(c.xp6(1),c.Q6J("ngIf",ge.isLoading),c.xp6(1),c.Q6J("ngIf",(null==ge.users?null:ge.users.length)>0),c.xp6(1),c.Q6J("ngIf",0==(null==ge.users?null:ge.users.length)),c.xp6(1),c.Q6J("ngIf",ge.resetPasswordPopUp),c.xp6(1),c.Q6J("ngIf",null==ge.loginHistory[0]?null:ge.loginHistory[0].loginHistory),c.xp6(1),c.Q6J("ngIf",ge.currentUser),c.xp6(2),c.Q6J("ngIf",ge.errorOnSetUserData),c.xp6(1),c.Q6J("ngIf",ge.errorOnGetUserLogins),c.xp6(1),c.Q6J("ngIf",ge.errorOnUpdateUserActivity),c.xp6(1),c.Q6J("ngIf",ge.errorMsgOnResetPassword))},directives:[O.O5,Ce,re.Fj,re.JJ,re.On,O.sg,re._Y,re.JL,re.sg,re.u],pipes:[No,O.uU],styles:[".sign-form[_ngcontent-%COMP%]{background-color:var(--color2);max-width:767px;padding:20px;margin:0 auto;position:relative}.sign-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.sign-form__sign-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ebc317;text-align:center;font-size:1.3em;padding:5px}.sign-form__sign-element[_ngcontent-%COMP%]{margin:20px 0}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{display:flex}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(user.73c0f083ad3711c1d950.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   .email-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;box-sizing:border-box;background-image:url(email.31cd4a3f10faa4acdb5c.png);padding:10px}.sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .password-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(password.63582da5386052e0358d.png)}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 50px);border:1px solid var(--color8);color:var(--color7);border-radius:0 3px 3px 0;box-sizing:border-box;padding:7px;outline:none;background-color:#ffffff80;filter:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{border:1px solid var(--color8);-webkit-text-fill-color:var(--color7);-webkit-box-shadow:none;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.sign-form__sign-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;color:var(--color7)}.sign-form[_ngcontent-%COMP%]   .hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:10px 0 20px}.sign-form[_ngcontent-%COMP%]{border:1px solid var(--color8);border-radius:5px}.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}@media not all and (pointer: coarse){.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]:hover{background-color:#fbf4d3}}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:49%}.users-container[_ngcontent-%COMP%]{position:relative}.search-field[_ngcontent-%COMP%]{margin:20px 0;width:400px;display:flex}.search-field__icon[_ngcontent-%COMP%]{width:31px;height:31px;background-color:#ebc317;background-image:url(search-icon.1f18176a687ce3124477.png);background-size:70% 70%;background-position:center;background-repeat:no-repeat;border-top-left-radius:5px;border-bottom-left-radius:5px}.search-field__input[_ngcontent-%COMP%]{border:1px solid var(--color8);outline:none;padding:5px;font-size:1.1rem;border-top-right-radius:5px;border-bottom-right-radius:5px;width:calc(100% - 31px)}.login-history[_ngcontent-%COMP%]{width:50%;height:500px;overflow:scroll;scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.login-history[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.login-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.login-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.login-history[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.login-history[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.login-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.login-history[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.login-history__close-btn[_ngcontent-%COMP%]{text-align:right}.edit-user-form[_ngcontent-%COMP%]{width:500px;border:none;text-align:left}.table__option[_ngcontent-%COMP%]{display:flex;align-items:center}.table__option[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:last-child){margin-right:15px}.table__edit[_ngcontent-%COMP%]{width:43px;text-align:center}.table__email[_ngcontent-%COMP%]{width:220px}.table__name[_ngcontent-%COMP%]{width:115px}.table__roles[_ngcontent-%COMP%]{width:470px;flex-wrap:wrap}.table__roles[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:140px;display:flex;justify-content:space-between;align-items:center}@media not all and (pointer: coarse){.table__roles__role[_ngcontent-%COMP%]:hover{background-color:#fbf4d3}}.table__domains[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.table__domains__domain[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:5px}@media not all and (pointer: coarse){.table__domains__domain[_ngcontent-%COMP%]:hover{background-color:#fbf4d3}}.table__buttons[_ngcontent-%COMP%]{width:265px;text-align:center}.table__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:5px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:20px}"]}),ne})(),St=(()=>{class ne{constructor(H){this._firestoreCollections=H}ngOnInit(){this._activeUsersSubscription=this._firestoreCollections.getUserData("active",!0).subscribe(H=>{this.activeUsers=H.map(ge=>Object.assign({id:ge.payload.doc.id},ge.payload.doc.data()))},H=>{})}ngOnDestroy(){this._activeUsersSubscription.unsubscribe()}}return ne.\u0275fac=function(H){return new(H||ne)(c.Y36(at.P))},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-active-acounts"]],decls:1,vars:1,consts:[[3,"users"]],template:function(H,ge){1&H&&c._UZ(0,"app-users-template",0),2&H&&c.Q6J("users",ge.activeUsers)},directives:[ot],styles:[""]}),ne})(),pn=(()=>{class ne{constructor(H){this._firestoreCollections=H}ngOnInit(){this._inactiveUsersSubscription=this._firestoreCollections.getUserData("active",!1).subscribe(H=>{this.inactiveUsers=H.map(ge=>Object.assign({id:ge.payload.doc.id},ge.payload.doc.data()))},H=>{})}ngOnDestroy(){this._inactiveUsersSubscription.unsubscribe()}}return ne.\u0275fac=function(H){return new(H||ne)(c.Y36(at.P))},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-inactive-acounts"]],decls:1,vars:1,consts:[[3,"users"]],template:function(H,ge){1&H&&c._UZ(0,"app-users-template",0),2&H&&c.Q6J("users",ge.inactiveUsers)},directives:[ot],styles:[""]}),ne})(),kn=(()=>{class ne{constructor(H,ge){this._router=H,this._authService=ge}canActivate(H,ge){const{role:pt,autenticationFailureRedirectUrl:Vt}=H.data;return new Promise(($t,vr)=>{this.userSubscription=this._authService.user.subscribe(lr=>{if(null!=lr){for(let Zr of lr.roles)if(pt==Zr.value&&Zr.checked)return void 0!==this.userSubscription&&this.userSubscription.unsubscribe(),$t(!0);return this.userSubscription.unsubscribe(),this._router.navigate([Vt])}null==lr&&this.userSubscription&&this.userSubscription.unsubscribe()})})}}return ne.\u0275fac=function(H){return new(H||ne)(c.LFG(w.F0),c.LFG(K.e))},ne.\u0275prov=c.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})();function gn(ne,qe){1&ne&&c._UZ(0,"app-loading-spinner")}function un(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," Please enter a passowrd! "),c.qZA())}function Jn(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," The password could not be longer then 20 symbols! "),c.qZA())}function Li(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," The password should be at least 8 symbols! "),c.qZA())}function gr(ne,qe){1&ne&&(c.TgZ(0,"li"),c._uU(1," The passwords do not match! "),c.qZA())}function ki(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",12),c.TgZ(1,"div",13),c.TgZ(2,"p"),c._uU(3,"Your password has been successfully changed!"),c.qZA(),c.TgZ(4,"div",14),c.TgZ(5,"button",15),c.NdJ("click",function(){return c.CHM(H),c.oxw().closePasswordChangePopUp()}),c._uU(6,"Close"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}}function eo(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",12),c.TgZ(1,"div",13),c.TgZ(2,"p"),c._uU(3),c.qZA(),c.TgZ(4,"div",14),c.TgZ(5,"button",16),c.NdJ("click",function(){return c.CHM(H),c.oxw().logout()}),c._uU(6,"Logout"),c.qZA(),c.TgZ(7,"button",17),c.NdJ("click",function(){return c.CHM(H),c.oxw().stayLogged()}),c._uU(8,"Change later"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&ne){const H=c.oxw();c.xp6(3),c.Oqu(H.errorOnChangePassword)}}const Gr=function(ne){return{invalid:ne}};let Fi=(()=>{class ne{constructor(H,ge,pt){this._fb=H,this._firebaseAuth=ge,this._authService=pt,this.changePasswordPopUp=!1,this.changePasswordLogoutPopUp=!1,this.errorOnChangePassword="",this.isLoading=!1}ngOnInit(){this.changePasswordFrom=this._fb.group({password:[null,[re.kI.required,re.kI.minLength(8),re.kI.maxLength(20)]],confirmPass:[null,[re.kI.required]]},{validator:this.confirmPasswordMatcher("password","confirmPass")})}confirmPasswordMatcher(H,ge){return pt=>{const $t=pt.controls[ge];$t.setErrors(pt.controls[H].value!==$t.value?{mustMatch:!0}:null)}}changePassword(H){if(H.invalid)return;this.isLoading=!0;const ge=H.value.password;this._firebaseAuth.currentUser.then(pt=>{null==pt||pt.updatePassword(ge).then(()=>{this.changePasswordPopUp=!0,H.reset(),this.errorOnChangePassword="",this.isLoading=!1},Vt=>{this.changePasswordLogoutPopUp=!0,this.errorOnChangePassword=Vt.message,this.isLoading=!1})})}closePasswordChangePopUp(){this.changePasswordPopUp=!1}logout(){this._authService.logout()}stayLogged(){this.changePasswordLogoutPopUp=!1,this.errorOnChangePassword="",this.changePasswordFrom.reset()}}return ne.\u0275fac=function(H){return new(H||ne)(c.Y36(re.qu),c.Y36(nn.zQ),c.Y36(K.e))},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-change-password"]],decls:26,vars:12,consts:[[4,"ngIf"],[1,"sign-form","change-password-form",3,"formGroup","ngSubmit"],[1,"sign-form__sign-element"],["for","password"],[1,"password"],[1,"password-img"],["type","password","name","password","formControlName","password"],[1,"error"],["for","confirmPass"],["type","password","name","confirmPass","formControlName","confirmPass",3,"ngClass"],["type","submit",1,"btn-default","narrow-btn",3,"disabled"],["class","fixed-pop-up-container",4,"ngIf"],[1,"fixed-pop-up-container"],[1,"pop-up-body"],[1,"pop-up-buttons"],["type","button",1,"btn-default","narrow-btn",3,"click"],[1,"btn-default","narrow-btn",2,"margin-right","10px",3,"click"],[1,"btn-default","narrow-btn",3,"click"]],template:function(H,ge){1&H&&(c.TgZ(0,"div"),c.YNc(1,gn,1,0,"app-loading-spinner",0),c.TgZ(2,"form",1),c.NdJ("ngSubmit",function(){return ge.changePassword(ge.changePasswordFrom)}),c.TgZ(3,"div",2),c.TgZ(4,"label",3),c._uU(5,"Password"),c.qZA(),c.TgZ(6,"div",4),c._UZ(7,"div",5),c._UZ(8,"input",6),c.qZA(),c.TgZ(9,"ul",7),c.YNc(10,un,2,0,"li",0),c.YNc(11,Jn,2,0,"li",0),c.YNc(12,Li,2,0,"li",0),c.qZA(),c.qZA(),c.TgZ(13,"div",2),c.TgZ(14,"label",8),c._uU(15,"Confirm Password"),c.qZA(),c.TgZ(16,"div",4),c._UZ(17,"div",5),c._UZ(18,"input",9),c.qZA(),c.TgZ(19,"ul",7),c.YNc(20,gr,2,0,"li",0),c.qZA(),c.qZA(),c.TgZ(21,"div"),c.TgZ(22,"button",10),c._uU(23,"Change Password"),c.qZA(),c.qZA(),c.qZA(),c.YNc(24,ki,7,0,"div",11),c.YNc(25,eo,9,1,"div",11),c.qZA()),2&H&&(c.xp6(1),c.Q6J("ngIf",ge.isLoading),c.xp6(1),c.Q6J("formGroup",ge.changePasswordFrom),c.xp6(8),c.Q6J("ngIf",!ge.changePasswordFrom.get("password").valid&&!ge.changePasswordFrom.get("password").hasError("maxlength")&&!ge.changePasswordFrom.get("password").hasError("minlength")&&ge.changePasswordFrom.get("password").touched),c.xp6(1),c.Q6J("ngIf",ge.changePasswordFrom.get("password").hasError("maxlength")&&ge.changePasswordFrom.get("password").touched),c.xp6(1),c.Q6J("ngIf",ge.changePasswordFrom.get("password").hasError("minlength")&&ge.changePasswordFrom.get("password").touched),c.xp6(6),c.Q6J("ngClass",c.VKq(10,Gr,!ge.changePasswordFrom.get("confirmPass").valid&&ge.changePasswordFrom.get("confirmPass").dirty)),c.xp6(2),c.Q6J("ngIf",!ge.changePasswordFrom.get("confirmPass").valid&&ge.changePasswordFrom.get("confirmPass").dirty),c.xp6(2),c.Q6J("disabled",ge.changePasswordFrom.invalid),c.xp6(2),c.Q6J("ngIf",ge.changePasswordPopUp),c.xp6(1),c.Q6J("ngIf",ge.changePasswordLogoutPopUp))},directives:[O.O5,re._Y,re.JL,re.sg,re.Fj,re.JJ,re.u,O.mk,Ce],styles:[".sign-form[_ngcontent-%COMP%]{background-color:var(--color2);max-width:767px;padding:20px;margin:0 auto;position:relative}.sign-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.sign-form__sign-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ebc317;text-align:center;font-size:1.3em;padding:5px}.sign-form__sign-element[_ngcontent-%COMP%]{margin:20px 0}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{display:flex}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(user.73c0f083ad3711c1d950.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   .email-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;box-sizing:border-box;background-image:url(email.31cd4a3f10faa4acdb5c.png);padding:10px}.sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .password-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(password.63582da5386052e0358d.png)}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 50px);border:1px solid var(--color8);color:var(--color7);border-radius:0 3px 3px 0;box-sizing:border-box;padding:7px;outline:none;background-color:#ffffff80;filter:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{border:1px solid var(--color8);-webkit-text-fill-color:var(--color7);-webkit-box-shadow:none;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.sign-form__sign-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;color:var(--color7)}.sign-form[_ngcontent-%COMP%]   .hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:10px 0 20px}.sign-form[_ngcontent-%COMP%]{border:1px solid var(--color8);border-radius:5px}.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}@media not all and (pointer: coarse){.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]:hover{background-color:#fbf4d3}}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:49%}.change-password-form[_ngcontent-%COMP%]{width:400px;border:none;margin:0;padding:0}"]}),ne})(),sr=(()=>{class ne{constructor(){}ngOnInit(){}}return ne.\u0275fac=function(H){return new(H||ne)},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-change-theme"]],decls:2,vars:0,template:function(H,ge){1&H&&(c.TgZ(0,"p"),c._uU(1,"This option will be available soon."),c.qZA())},styles:[""]}),ne})();const jn=function(){return["allowed-domains"]},Yr=function(){return["chat-menu-options"]};let Mr=(()=>{class ne{constructor(){}ngOnInit(){}}return ne.\u0275fac=function(H){return new(H||ne)},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-domain-options"]],decls:8,vars:4,consts:[[1,"sub-nav"],["routerLinkActive","router-link-active",3,"routerLink"]],template:function(H,ge){1&H&&(c.TgZ(0,"div"),c.TgZ(1,"div"),c.TgZ(2,"ul",0),c.TgZ(3,"li",1),c._uU(4,"Allowed Domains"),c.qZA(),c.TgZ(5,"li",1),c._uU(6,"Chat Menu Options"),c.qZA(),c.qZA(),c.qZA(),c._UZ(7,"router-outlet"),c.qZA()),2&H&&(c.xp6(3),c.Q6J("routerLink",c.DdM(2,jn)),c.xp6(2),c.Q6J("routerLink",c.DdM(3,Yr)))},directives:[w.Od,w.rH,w.lC],styles:[""]}),ne})();function Ui(ne,qe){1&ne&&c._UZ(0,"app-loading-spinner")}function ri(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"button",8),c.NdJ("click",function(){return c.CHM(H),c.oxw().activateMenuOptionForm()}),c._uU(1," Add menu option "),c.qZA()}}function Vi(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"form",9),c.NdJ("ngSubmit",function(){c.CHM(H);const pt=c.oxw();return pt.isInEditMenuEditOptionMode?pt.submitmenuEditOptionsForm():pt.submitMenuOptionsForm(pt.menuOptionsForm)}),c.TgZ(1,"div",10),c.TgZ(2,"label",11),c._uU(3,"Active"),c.qZA(),c._UZ(4,"input",12),c.qZA(),c.TgZ(5,"div",13),c.TgZ(6,"label",14),c._uU(7,"Key"),c.qZA(),c._UZ(8,"input",15),c.qZA(),c.TgZ(9,"div",13),c.TgZ(10,"label",16),c._uU(11,"Description"),c.qZA(),c._UZ(12,"input",17),c.qZA(),c.TgZ(13,"div",18),c.TgZ(14,"button",19),c._uU(15),c.qZA(),c.TgZ(16,"button",20),c.NdJ("click",function(){return c.CHM(H),c.oxw().clearMenuOptionForm()}),c._uU(17," Cancel "),c.qZA(),c.qZA(),c.qZA()}if(2&ne){const H=c.oxw();c.Q6J("formGroup",H.menuOptionsForm),c.xp6(14),c.Q6J("disabled",H.menuOptionsForm.invalid),c.xp6(1),c.hij(" ",H.isInEditMenuEditOptionMode?"Change":"Add"," ")}}function Zi(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c.TgZ(2,"label",21),c._uU(3,"Active"),c.qZA(),c._UZ(4,"input",22),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c.TgZ(10,"button",23),c.NdJ("click",function(){const Vt=c.CHM(H).$implicit;return c.oxw().editOption(Vt)}),c._uU(11,"Edit"),c.qZA(),c.TgZ(12,"button",24),c.NdJ("click",function(){const Vt=c.CHM(H).$implicit;return c.oxw().deleteMenuOptionPopUp(Vt)}),c._uU(13,"Delete"),c.qZA(),c.qZA(),c.qZA()}if(2&ne){const H=qe.$implicit;c.xp6(4),c.Q6J("checked",H.active?"checked":null),c.xp6(2),c.Oqu(H.description),c.xp6(2),c.Oqu(H.key)}}function ui(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div",25),c.TgZ(1,"div",26),c.TgZ(2,"p"),c._uU(3),c.qZA(),c.TgZ(4,"div",27),c.TgZ(5,"button",28),c.NdJ("click",function(){return c.CHM(H),c.oxw().deleteMenuOption()}),c._uU(6,"OK"),c.qZA(),c.TgZ(7,"button",28),c.NdJ("click",function(){return c.CHM(H),c.oxw().clearMenuOptionForm()}),c._uU(8,"Cancel"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&ne){const H=c.oxw();c.xp6(3),c.hij("Menu ",H.currentOption.description," will be deleted!")}}function Zo(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.erroOnGetMenuOptions)}}function Lr(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnAddMenuOption)}}function is(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnDeleteMenuOption)}}function Bi(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnAddMenuOptionItem)}}function Oo(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.erroOnEditMenuOption)}}const Co=function(ne){return{"fixed-pop-up-container":ne}},qo=function(ne){return{"pop-up-body":ne}};let gs=(()=>{class ne{constructor(H,ge){this._fb=H,this._firestoreCollectionService=ge,this.ismenuOptionsFormActive=!1,this.isInEditMenuEditOptionMode=!1,this.isLoading=!1,this.isDeleteMenuOptionPopUpActive=!1,this.erroOnGetMenuOptions="",this.errorOnAddMenuOption="",this.errorOnDeleteMenuOption="",this.errorOnAddMenuOptionItem="",this.erroOnEditMenuOption=""}ngOnInit(){this.menuOptionsForm=this._fb.group({key:[null,[re.kI.required]],description:[null,re.kI.required],active:[!0]}),this._menuOptionsSubscription=this._firestoreCollectionService.getMenuOptions().subscribe(H=>{this.menuOptions=H.map(ge=>Object.assign({id:ge.payload.doc.id},ge.payload.doc.data())),this.erroOnGetMenuOptions=""},H=>{this.erroOnGetMenuOptions=H.message})}ngOnDestroy(){this._menuOptionsSubscription.unsubscribe()}activateMenuOptionForm(){this.ismenuOptionsFormActive=!0}clearMenuOptionForm(){this.ismenuOptionsFormActive=!1,this.currentOption=void 0,this.isDeleteMenuOptionPopUpActive=!1,this.isInEditMenuEditOptionMode=!1,this.menuEditedImage=void 0,this.menuOptionsForm.reset()}submitMenuOptionsForm(H){if(!H.invalid)return this.isLoading=!0,this._firestoreCollectionService.addMenuOptionItem({key:H.value.key,description:H.value.description,active:H.value.active}).then(()=>{this.clearMenuOptionForm(),this.ismenuOptionsFormActive=!1,this.errorOnAddMenuOption="",this.isLoading=!1},vr=>{this.errorOnAddMenuOption=vr.message,this.isLoading=!1})}deleteMenuOptionPopUp(H){this.currentOption=H,this.isDeleteMenuOptionPopUpActive=!0}deleteMenuOption(){this._firestoreCollectionService.deleteMenuOptionItem(this.currentOption).then(()=>{this.clearMenuOptionForm(),this.errorOnDeleteMenuOption=""},H=>{this.errorOnDeleteMenuOption=H.message})}editOption(H){this.ismenuOptionsFormActive=!0,this.isInEditMenuEditOptionMode=!0,this.currentOption=H,this.menuOptionsForm.controls.key.setValue(H.key),this.menuOptionsForm.controls.description.setValue(H.description),this.menuOptionsForm.controls.active.setValue(H.active)}submitmenuEditOptionsForm(){this._firestoreCollectionService.editMenuOptionItem({key:this.menuOptionsForm.value.key,description:this.menuOptionsForm.value.description,active:this.menuOptionsForm.value.active,id:this.currentOption.id}).then(()=>{this.clearMenuOptionForm(),this.errorOnAddMenuOptionItem=""},vr=>{this.errorOnAddMenuOptionItem=vr.message})}}return ne.\u0275fac=function(H){return new(H||ne)(c.Y36(re.qu),c.Y36(at.P))},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-chat-menu-options"]],decls:25,vars:16,consts:[[4,"ngIf"],["style","margin-bottom: 10px;","class","btn-default narrow-btn","type","button",3,"click",4,"ngIf"],[3,"ngClass"],["class","menu-option-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["class","fixed-pop-up-container",4,"ngIf"],[1,"error"],["type","button",1,"btn-default","narrow-btn",2,"margin-bottom","10px",3,"click"],[1,"menu-option-form",3,"formGroup","ngSubmit"],[1,"menu-option-form__item","active"],["for","active"],["type","checkbox","name","active","formControlName","active"],[1,"menu-option-form__item","input-option"],["for","key"],["type","text","name","key","formControlName","key"],["for","description"],["type","text","name","description","formControlName","description"],[1,"menu-option-form__buttons"],["type","submit",1,"btn-default","narrow-btn",3,"disabled"],["type","button",1,"btn-default","narrow-btn",3,"click"],[2,"margin-right","5px"],["type","checkbox","disabled","",3,"checked"],["type","button",1,"btn-default","narrow-btn",2,"margin-right","10px","min-width","65px",3,"click"],["type","button",1,"btn-default","narrow-btn",2,"min-width","65px",3,"click"],[1,"fixed-pop-up-container"],[1,"pop-up-body"],[1,"pop-up-buttons"],["type","button",1,"btn-default","narrow-btn",2,"margin-right","10px",3,"click"]],template:function(H,ge){1&H&&(c.TgZ(0,"div"),c.YNc(1,Ui,1,0,"app-loading-spinner",0),c.YNc(2,ri,2,0,"button",1),c.TgZ(3,"div"),c.TgZ(4,"div",2),c.TgZ(5,"div",2),c.YNc(6,Vi,18,3,"form",3),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div"),c.TgZ(8,"table",4),c.TgZ(9,"tr"),c.TgZ(10,"th"),c._uU(11,"Activity"),c.qZA(),c.TgZ(12,"th"),c._uU(13,"Description"),c.qZA(),c.TgZ(14,"th"),c._uU(15,"Key"),c.qZA(),c._UZ(16,"th"),c.qZA(),c.YNc(17,Zi,14,3,"tr",5),c.qZA(),c.qZA(),c.YNc(18,ui,9,1,"div",6),c.TgZ(19,"ul",7),c.YNc(20,Zo,2,1,"li",0),c.YNc(21,Lr,2,1,"li",0),c.YNc(22,is,2,1,"li",0),c.YNc(23,Bi,2,1,"li",0),c.YNc(24,Oo,2,1,"li",0),c.qZA(),c.qZA()),2&H&&(c.xp6(1),c.Q6J("ngIf",ge.isLoading),c.xp6(1),c.Q6J("ngIf",!ge.ismenuOptionsFormActive),c.xp6(2),c.Q6J("ngClass",c.VKq(12,Co,ge.isInEditMenuEditOptionMode)),c.xp6(1),c.Q6J("ngClass",c.VKq(14,qo,ge.isInEditMenuEditOptionMode)),c.xp6(1),c.Q6J("ngIf",ge.ismenuOptionsFormActive),c.xp6(11),c.Q6J("ngForOf",ge.menuOptions),c.xp6(1),c.Q6J("ngIf",ge.isDeleteMenuOptionPopUpActive),c.xp6(2),c.Q6J("ngIf",ge.erroOnGetMenuOptions),c.xp6(1),c.Q6J("ngIf",ge.errorOnAddMenuOption),c.xp6(1),c.Q6J("ngIf",ge.errorOnDeleteMenuOption),c.xp6(1),c.Q6J("ngIf",ge.errorOnAddMenuOptionItem),c.xp6(1),c.Q6J("ngIf",ge.erroOnEditMenuOption))},directives:[O.O5,O.mk,O.sg,Ce,re._Y,re.JL,re.sg,re.Wl,re.JJ,re.u,re.Fj],styles:[".menu-option-form[_ngcontent-%COMP%]{width:400px}.menu-option-form__item[_ngcontent-%COMP%]{margin-top:10px}.menu-option-form__buttons[_ngcontent-%COMP%]{margin-top:10px}.menu-option-form__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:65px!important}.menu-option-form__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.menu-option-form[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.menu-option-form[_ngcontent-%COMP%]   .input-option[_ngcontent-%COMP%]{display:flex;flex-direction:column}.menu-option-form[_ngcontent-%COMP%]   .input-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid var(--color8);border-radius:3px;padding:5px;outline:none}.menu-option-form[_ngcontent-%COMP%]   .img-upload[_ngcontent-%COMP%]{text-align:center}.pop-up-body[_ngcontent-%COMP%]{text-align:left}"]}),ne})();function Lo(ne,qe){1&ne&&c._UZ(0,"app-loading-spinner")}function xo(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){return c.CHM(H),c.oxw().enableAddBlockMode()}),c._uU(1," Block User "),c.qZA()}}function li(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"form",6),c.NdJ("ngSubmit",function(){c.CHM(H);const pt=c.oxw();return pt.submitAddUserForBlockForm(pt.addUserForBlockForm)}),c.TgZ(2,"div",7),c._UZ(3,"input",8),c._UZ(4,"input",9),c._UZ(5,"input",10),c.qZA(),c.TgZ(6,"div"),c.TgZ(7,"button",11),c._uU(8,"Submit"),c.qZA(),c.TgZ(9,"button",5),c.NdJ("click",function(){return c.CHM(H),c.oxw().resetAddUserForBlockForm()}),c._uU(10,"Cancel"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&ne){const H=c.oxw();c.xp6(1),c.Q6J("formGroup",H.addUserForBlockForm),c.xp6(6),c.Q6J("disabled",H.addUserForBlockForm.invalid)}}function ci(ne,qe){if(1&ne){const H=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c.TgZ(2,"button",5),c.NdJ("click",function(){const Vt=c.CHM(H).$implicit;return c.oxw(2).unblockUser(Vt.id)}),c._uU(3,"Unblock"),c.qZA(),c.qZA(),c.TgZ(4,"td"),c._uU(5),c.qZA(),c.TgZ(6,"td"),c._uU(7),c.qZA(),c.TgZ(8,"td"),c._uU(9),c.qZA(),c.TgZ(10,"td"),c._uU(11),c.qZA(),c.TgZ(12,"td"),c._uU(13),c.ALo(14,"date"),c.ALo(15,"date"),c.qZA(),c.qZA()}if(2&ne){const H=qe.$implicit;c.xp6(5),c.Oqu(H.username),c.xp6(2),c.Oqu(H.ip),c.xp6(2),c.Oqu(H.reason),c.xp6(2),c.Oqu(H.operator),c.xp6(2),c.AsE("",c.xi3(14,6,H.date.toDate(),"dd.MM.yyyy")," at ",c.xi3(15,9,H.date.toDate(),"HH:mm"),"")}}function nr(ne,qe){if(1&ne&&(c.TgZ(0,"table",12),c.TgZ(1,"tr"),c._UZ(2,"th"),c.TgZ(3,"th"),c._uU(4,"Username"),c.qZA(),c.TgZ(5,"th"),c._uU(6,"IP"),c.qZA(),c.TgZ(7,"th"),c._uU(8,"Reason"),c.qZA(),c.TgZ(9,"th"),c._uU(10,"Blocked by"),c.qZA(),c.TgZ(11,"th"),c._uU(12,"Time of block"),c.qZA(),c.qZA(),c.YNc(13,ci,16,12,"tr",13),c.qZA()),2&ne){const H=c.oxw();c.xp6(13),c.Q6J("ngForOf",H.blockedUsers)}}function Yi(ne,qe){1&ne&&(c.TgZ(0,"p"),c._uU(1,"\u0422here are currently no blocked users."),c.qZA())}function Ki(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnGetBlockedUsers)}}function to(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnDeleteBlockedUsers)}}function xi(ne,qe){if(1&ne&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ne){const H=c.oxw();c.xp6(1),c.Oqu(H.errorOnBlockUser)}}let no=(()=>{class ne{constructor(H,ge,pt){this._fireStoreCollections=H,this._fb=ge,this._authService=pt,this.blockedUsers=[],this.isInBlockMode=!1,this.errorOnGetBlockedUsers="",this.errorOnDeleteBlockedUsers="",this.errorOnBlockUser="",this.isLoading=!1}ngOnInit(){this._blockedUsersSubscription=this._fireStoreCollections.getBlockedUsersById().subscribe(H=>{this.blockedUsers=H.map(ge=>Object.assign({id:ge.payload.doc.id},ge.payload.doc.data())),this.errorOnGetBlockedUsers=""},H=>{this.errorOnGetBlockedUsers=H.message}),this._userSubscription=this._authService.user.subscribe(H=>{this.user=H}),this.addUserForBlockForm=this._fb.group({username:[null,re.kI.required],ip:[null,re.kI.required],reason:[null,re.kI.required],operator:[]})}ngOnDestroy(){this._blockedUsersSubscription.unsubscribe(),this._userSubscription.unsubscribe()}unblockUser(H){this._fireStoreCollections.deleteBlockedUser(H).then(()=>{this.errorOnDeleteBlockedUsers=""},ge=>{this.errorOnDeleteBlockedUsers=ge.message})}enableAddBlockMode(){this.isInBlockMode=!0}resetAddUserForBlockForm(){this.isInBlockMode=!1,this.addUserForBlockForm.reset()}submitAddUserForBlockForm(H){if(H.invalid)return;this.isLoading=!0;const ge=H.value.username,pt=H.value.ip,Vt=H.value.reason,$t=this.user.email,vr=Nt.Z.firestore.Timestamp.now();this._fireStoreCollections.blockUserByIp({username:ge,ip:pt,reason:Vt,operator:$t,date:vr}).then(()=>{this.resetAddUserForBlockForm(),this.isLoading=!1,this.errorOnBlockUser=""},Zr=>{this.errorOnBlockUser=Zr.message,this.isLoading=!1})}}return ne.\u0275fac=function(H){return new(H||ne)(c.Y36(at.P),c.Y36(re.qu),c.Y36(K.e))},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-blocked-users"]],decls:12,vars:8,consts:[[4,"ngIf"],[1,"block-form-container"],["class","btn-default narrow-btn","type","button",3,"click",4,"ngIf"],["class","table",4,"ngIf"],[1,"error"],["type","button",1,"btn-default","narrow-btn",3,"click"],[1,"block-user-form",3,"formGroup","ngSubmit"],[1,"block-user-form__inputs"],["type","text","formControlName","username","placeholder","Username..."],["type","text","formControlName","ip","placeholder","IP..."],["type","text","formControlName","reason","placeholder","Reason..."],["type","submit",1,"btn-default","narrow-btn",2,"margin-right","10px",3,"disabled"],[1,"table"],[4,"ngFor","ngForOf"]],template:function(H,ge){1&H&&(c.TgZ(0,"div"),c.YNc(1,Lo,1,0,"app-loading-spinner",0),c.TgZ(2,"div",1),c.TgZ(3,"div"),c.YNc(4,xo,2,0,"button",2),c.qZA(),c.YNc(5,li,11,2,"div",0),c.qZA(),c.YNc(6,nr,14,1,"table",3),c.YNc(7,Yi,2,0,"p",0),c.TgZ(8,"ul",4),c.YNc(9,Ki,2,1,"li",0),c.YNc(10,to,2,1,"li",0),c.YNc(11,xi,2,1,"li",0),c.qZA(),c.qZA()),2&H&&(c.xp6(1),c.Q6J("ngIf",ge.isLoading),c.xp6(3),c.Q6J("ngIf",!ge.isInBlockMode),c.xp6(1),c.Q6J("ngIf",ge.isInBlockMode),c.xp6(1),c.Q6J("ngIf",ge.blockedUsers.length>0),c.xp6(1),c.Q6J("ngIf",0==ge.blockedUsers.length),c.xp6(2),c.Q6J("ngIf",ge.errorOnGetBlockedUsers),c.xp6(1),c.Q6J("ngIf",ge.errorOnDeleteBlockedUsers),c.xp6(1),c.Q6J("ngIf",ge.errorOnBlockUser))},directives:[O.O5,Ce,re._Y,re.JL,re.sg,re.Fj,re.JJ,re.u,O.sg],pipes:[O.uU],styles:[".block-form-container[_ngcontent-%COMP%]{margin-bottom:20px}.block-user-form__inputs[_ngcontent-%COMP%]{margin-bottom:10px;width:670px}.block-user-form__inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:5px;border:1px solid var(--color8);outline:none;padding:5px;width:200px}.block-user-form__inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.table[_ngcontent-%COMP%]{width:770px}"]}),ne})(),ii=(()=>{class ne{constructor(){}ngOnInit(){}}return ne.\u0275fac=function(H){return new(H||ne)},ne.\u0275cmp=c.Xpm({type:ne,selectors:[["app-reports"]],decls:2,vars:0,template:function(H,ge){1&H&&(c.TgZ(0,"p"),c._uU(1,"This option will be available soon."),c.qZA())},styles:[""]}),ne})(),wo=(()=>{class ne{}return ne.\u0275fac=function(H){return new(H||ne)},ne.\u0275mod=c.oAB({type:ne}),ne.\u0275inj=c.cJS({imports:[[O.ez,re.UX,zn.m,re.u5,w.Bz.forChild([{path:"",component:_e,children:[{path:"login",component:On,canActivate:[At],data:{autenticationRequired:!1,autenticationFailureRedirectUrl:"/control-panel/chats"}},{path:"chats",component:ur,canActivate:[At],data:{autenticationRequired:!0,autenticationFailureRedirectUrl:"/control-panel/login"}},{path:"settings",component:Dt,children:[{path:"users",component:fn,children:[{path:"active",component:St},{path:"inactive",component:pn},{path:"",redirectTo:"active",pathMatch:"full"}],canActivate:[kn],data:{role:"users",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"register",component:Pt,canActivate:[kn],data:{role:"register",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"account-settings",component:Ie,children:[{path:"change-password",component:Fi},{path:"change-theme",component:sr},{path:"",redirectTo:"change-password",pathMatch:"full"}],canActivate:[kn],data:{role:"accountSettings",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"domain-options",component:Mr,children:[{path:"allowed-domains",component:Ri},{path:"chat-menu-options",component:gs},{path:"",redirectTo:"allowed-domains",pathMatch:"full"}],canActivate:[kn],data:{role:"domainOptions",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"blocked-users",component:no,canActivate:[kn],data:{role:"blockedUsers",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"reports",component:ii,canActivate:[kn],data:{role:"reports",autenticationFailureRedirectUrl:"/control-panel/settings"}}],canActivate:[At],data:{autenticationRequired:!0,autenticationFailureRedirectUrl:"/control-panel/login"}},{path:"**",redirectTo:"chats"}]}])]]}),ne})()},7236:(jt,nt,Y)=>{"use strict";Y.r(nt),Y.d(nt,{ErrorModule:()=>Ue});var O=Y(8583),c=Y(7716);let K=(()=>{class be{constructor(){}ngOnInit(){}}return be.\u0275fac=function(fe){return new(fe||be)},be.\u0275cmp=c.Xpm({type:be,selectors:[["app-error"]],decls:2,vars:0,template:function(fe,_e){1&fe&&(c.TgZ(0,"p"),c._uU(1,"error works!"),c.qZA())},styles:[""]}),be})();var w=Y(2213);let Ue=(()=>{class be{}return be.\u0275fac=function(fe){return new(fe||be)},be.\u0275mod=c.oAB({type:be}),be.\u0275inj=c.cJS({imports:[[O.ez,w.Bz.forChild([{path:"",component:K}])]]}),be})()},4552:(jt,nt,Y)=>{"use strict";Y.d(nt,{q:()=>_e});var O=Y(7716),c=Y(8583);const K=["chatHistoryContainer"];function w(re,Ce){if(1&re&&(O.TgZ(0,"p"),O._uU(1),O.qZA()),2&re){const le=O.oxw().$implicit;O.xp6(1),O.Oqu(le.client)}}function Ue(re,Ce){if(1&re&&(O.TgZ(0,"p"),O._uU(1),O.qZA()),2&re){const le=O.oxw().$implicit;O.xp6(1),O.Oqu(le.operator)}}const be=function(re,Ce){return{"client-container":re,"operator-container":Ce}},xe=function(re,Ce){return{client:re,operator:Ce}};function fe(re,Ce){if(1&re&&(O.TgZ(0,"div"),O.TgZ(1,"div",3),O.TgZ(2,"div",4),O.TgZ(3,"div",5),O.YNc(4,w,2,1,"p",6),O.YNc(5,Ue,2,1,"p",6),O.TgZ(6,"p"),O._uU(7),O.ALo(8,"date"),O.qZA(),O.qZA(),O.TgZ(9,"p"),O._uU(10),O.qZA(),O.qZA(),O.qZA(),O.qZA()),2&re){const le=Ce.$implicit;O.xp6(1),O.Q6J("ngClass",O.WLB(9,be,le.client,le.operator)),O.xp6(1),O.Q6J("ngClass",O.WLB(12,xe,le.client,le.operator)),O.xp6(2),O.Q6J("ngIf",le.client),O.xp6(1),O.Q6J("ngIf",le.operator),O.xp6(2),O.Oqu(O.xi3(8,6,le.time.toDate(),"HH:mm")),O.xp6(3),O.Oqu(le.message)}}let _e=(()=>{class re{constructor(){this.chatHistory=[],this.vh=.01*window.innerHeight}ngOnInit(){document.documentElement.style.setProperty("--vh",`${this.vh}px`),console.log(this.vh)}ngAfterViewChecked(){this.chatHistoryContainer.nativeElement.scrollTop=this.chatHistoryContainer.nativeElement.scrollHeight}}return re.\u0275fac=function(le){return new(le||re)},re.\u0275cmp=O.Xpm({type:re,selectors:[["app-chat-form-history"]],viewQuery:function(le,pe){if(1&le&&O.Gf(K,5),2&le){let De;O.iGM(De=O.CRH())&&(pe.chatHistoryContainer=De.first)}},inputs:{chatHistory:"chatHistory"},decls:3,vars:1,consts:[[1,"chat-history"],["chatHistoryContainer",""],[4,"ngFor","ngForOf"],[1,"chat-history__buble-container",3,"ngClass"],[1,"chat-history__buble-container__buble",3,"ngClass"],[1,"chat-history__buble-container__buble__header"],[4,"ngIf"]],template:function(le,pe){1&le&&(O.TgZ(0,"div",0,1),O.YNc(2,fe,11,15,"div",2),O.qZA()),2&le&&(O.xp6(2),O.Q6J("ngForOf",pe.chatHistory))},directives:[c.sg,c.mk,c.O5],pipes:[c.uU],styles:[".chat-history[_ngcontent-%COMP%]{height:calc(var(--vh, 1vh) * 100 - 200px);border:1px solid var(--color8);margin-bottom:10px;padding:3px 3px 0;overflow:scroll;scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.chat-history__buble-container[_ngcontent-%COMP%]{display:flex}.chat-history__buble-container__buble[_ngcontent-%COMP%]{border-radius:10px;border:1px solid var(--color8);padding:5px;min-width:40%;max-width:70%;margin-bottom:5px}.chat-history__buble-container__buble__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;font-weight:bold}"]}),re})()},1437:(jt,nt,Y)=>{"use strict";Y.d(nt,{a:()=>fe});var O=Y(665),c=Y(2329),K=Y(7716),w=Y(3210),Ue=Y(8583);const be=["textarea"];function xe(_e,re){if(1&_e&&(K.TgZ(0,"li"),K._uU(1),K.qZA()),2&_e){const Ce=K.oxw();K.xp6(1),K.Oqu(Ce.errorOnAddMessage)}}let fe=(()=>{class _e{constructor(Ce,le){this._firestoreCollections=Ce,this._fb=le,this.errorOnAddMessage=""}ngOnInit(){this.chatForm=this._fb.group({message:[null,[O.kI.required]]})}ngAfterViewInit(){this.textarea.nativeElement.focus()}submitChatForm(Ce){if(Ce.invalid)return;let le;const pe=this.userInfo.chatId,De=this.userInfo.domain;le=null!=this.userInfo.client?{chatId:pe,domain:De,client:this.userInfo.client}:{chatId:pe,domain:De,operator:this.userInfo.operator};const Re=Ce.value.message.trim(),Ye=c.Z.firestore.Timestamp.now();this._firestoreCollections.addMessage(le,{message:Re,time:Ye}).then(()=>{Ce.reset(),this.errorOnAddMessage=""},ze=>{this.errorOnAddMessage=ze.message})}submitOnEnter(Ce,le){var pe;13===Ce.keyCode&&""!=(null===(pe=le.value.message)||void 0===pe?void 0:pe.trim())&&this.submitChatForm(le)}}return _e.\u0275fac=function(Ce){return new(Ce||_e)(K.Y36(w.P),K.Y36(O.qu))},_e.\u0275cmp=K.Xpm({type:_e,selectors:[["app-chat-form"]],viewQuery:function(Ce,le){if(1&Ce&&K.Gf(be,5),2&Ce){let pe;K.iGM(pe=K.CRH())&&(le.textarea=pe.first)}},inputs:{userInfo:"userInfo"},decls:6,vars:2,consts:[[1,"chat-form",3,"formGroup","ngSubmit","keydown"],["formControlName","message",1,"chat-form__message"],["textarea",""],["type","submit",1,"chat-form__submit-btn"],[1,"error"],[4,"ngIf"]],template:function(Ce,le){1&Ce&&(K.TgZ(0,"form",0),K.NdJ("ngSubmit",function(){return le.submitChatForm(le.chatForm)})("keydown",function(De){return le.submitOnEnter(De,le.chatForm)}),K._UZ(1,"textarea",1,2),K._UZ(3,"button",3),K.qZA(),K.TgZ(4,"ul",4),K.YNc(5,xe,2,1,"li",5),K.qZA()),2&Ce&&(K.Q6J("formGroup",le.chatForm),K.xp6(5),K.Q6J("ngIf",le.errorOnAddMessage))},directives:[O._Y,O.JL,O.sg,O.Fj,O.JJ,O.u,Ue.O5],styles:[".chat-form[_ngcontent-%COMP%]{display:flex;align-items:center}.chat-form__message[_ngcontent-%COMP%]{outline-color:#ebc317;background-color:var(--color12);border:1px solid var(--color9);border-radius:3px;padding:10px;resize:none;width:100%;height:70px;box-sizing:border-box;color:var(--color7);scrollbar-color:var(--color14) transparent;scrollbar-width:thin;margin-right:10px}.chat-form__message[_ngcontent-%COMP%]::placeholder{color:#b53636}.chat-form__message[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#b53636}.chat-form__message[_ngcontent-%COMP%]:-moz-placeholder{color:#b53636}.chat-form__message[_ngcontent-%COMP%]::-moz-placeholder{color:#b53636}.chat-form__message[_ngcontent-%COMP%]:-ms-input-placeholder{color:#b53636}.chat-form__message[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.chat-form__message[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.chat-form__message[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.chat-form__message[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.chat-form__message[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.chat-form__message[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.chat-form__message[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.chat-form__submit-btn[_ngcontent-%COMP%]{cursor:pointer;border:1px solid #999;outline:none;-webkit-user-select:none;user-select:none;padding:10px;border-radius:50%;width:35px;height:35px;background-color:#ebc317;background-image:url(arrow.29eac2d1e142a30ed882.png);background-size:80%;background-repeat:no-repeat;background-position:center}"]}),_e})()},9447:(jt,nt,Y)=>{"use strict";Y.d(nt,{e:()=>le});var O=Y(6215),c=Y(2329),K=Y(2340);class Ue{constructor(De,Re,Ye,ee,ze){this.ip=De,this.country=Re,this.city=Ye,this.uid=ee,this.date=ze}}var xe=Y(7716),fe=Y(2213),_e=Y(9829),re=Y(3210),Ce=Y(1841);let le=(()=>{class pe{constructor(Re,Ye,ee,ze){this._router=Re,this._firebaseAuth=Ye,this._firestoreCollections=ee,this._http=ze,this.user=new O.X(void 0),this.userLocation=new Ue("","","","",null),this.setIP=!1,this.errorAuthMsg="",this.errorAuthMsgSubject=new O.X(this.errorAuthMsg),this.errorOnGetuserData="",this.errorOnGetuserDataSubject=new O.X(this.errorOnGetuserData),this.errorOnSetUserData="",this.errorOnSetUserDataSubject=new O.X(this.errorOnSetUserData),this.isLoading=!1,this.isLoadingSubject=new O.X(this.isLoading),this.finishedReg=!1,this.finishedRegSubject=new O.X(this.finishedReg),this.secondaryApp=c.Z.initializeApp(K.N.firebaseConfig,"Secondary")}signUp(Re){this.enableLoadingSpinner(),this.finishedReg=!1,this.finishedRegSubject.next(this.finishedReg),this.secondaryApp.auth().createUserWithEmailAndPassword(Re.email,Re.password).then(Ye=>{Re.uid=Ye.user.uid,this._firestoreCollections.setUserData(Re,!0).then(()=>{this.secondaryApp.auth().signOut(),this.errorOnSetUserData="",this.errorOnSetUserDataSubject.next(this.errorOnSetUserData)},ee=>{this.errorOnSetUserData=ee.message,this.errorOnSetUserDataSubject.next(this.errorOnSetUserData)}),this.errorAuthMsg="",this.errorAuthMsgSubject.next(this.errorAuthMsg),this.finishedReg=!0,this.finishedRegSubject.next(this.finishedReg),this.disableLoadingSpinner()},Ye=>{this.errorAuthHandler(Ye),this.disableLoadingSpinner()})}signIn(Re,Ye){this.enableLoadingSpinner(),this._firebaseAuth.signInWithEmailAndPassword(Re,Ye).then(()=>{this.setIP=!0,this.subscribeForDbCollectionUser(Re),this.errorAuthMsg="",this.errorAuthMsgSubject.next(this.errorAuthMsg),this.disableLoadingSpinner()},ee=>{this.errorAuthHandler(ee),this.disableLoadingSpinner()})}logout(){this._firebaseAuth.signOut().then(()=>{this.userDbSubscription.unsubscribe(),this.user.next(null),this._router.navigate(["/control-panel/login"])})}autoLogin(){this._firebaseAuth.authState.subscribe(Re=>{Re&&!this.userDbSubscription?this.subscribeForDbCollectionUser(Re.email):this.user.next(null)})}subscribeForDbCollectionUser(Re){this.userDbSubscription=this._firestoreCollections.getUserData("email",Re).subscribe(Ye=>{var ee;const ze=Ye.map(Ct=>Object.assign({},Ct.payload.doc.data()));this.user.next(ze[0]),this.userLocation.uid=null===(ee=ze[0])||void 0===ee?void 0:ee.uid,ze[0].active||this.logout(),this.setIP&&(this.setIP=!1,this.setUserIP(),this._router.navigate(["/control-panel/chats"])),this.errorOnGetuserData="",this.errorOnGetuserDataSubject.next(this.errorOnGetuserData)},Ye=>{this.errorOnGetuserData=Ye.message,this.errorOnGetuserDataSubject.next(this.errorOnGetuserData)})}setUserIP(){this._userLocationSubscription=this._http.get("https://api.geoapify.com/v1/ipinfo?apiKey="+K.N.geoLocationAPIKey).subscribe(Re=>{this.userLocation.country=Re.country.name,this.userLocation.city=Re.city.name,this.userLocation.ip=Re.ip,this.userLocation.date=c.Z.firestore.Timestamp.now(),this._firestoreCollections.setUserIPAddress(this.userLocation).then(()=>{this._userLocationSubscription.unsubscribe()},Ye=>{this._userLocationSubscription.unsubscribe()})})}errorAuthHandler(Re){switch(Re.code){case"auth/email-already-in-use":this.errorAuthMsg="Already has a registration with this email!",this.errorAuthMsgSubject.next(this.errorAuthMsg);break;case"auth/user-not-found":this.errorAuthMsg="Wrong email!",this.errorAuthMsgSubject.next(this.errorAuthMsg);break;case"auth/wrong-password":this.errorAuthMsg="Wrong password!",this.errorAuthMsgSubject.next(this.errorAuthMsg);break;default:this.errorAuthMsg="Unknown Error",this.errorAuthMsgSubject.next(this.errorAuthMsg)}}enableLoadingSpinner(){this.isLoading=!0,this.isLoadingSubject.next(this.isLoading)}disableLoadingSpinner(){this.isLoading=!1,this.isLoadingSubject.next(this.isLoading)}}return pe.\u0275fac=function(Re){return new(Re||pe)(xe.LFG(fe.F0),xe.LFG(_e.zQ),xe.LFG(re.P),xe.LFG(Ce.eN))},pe.\u0275prov=xe.Yz7({token:pe,factory:pe.\u0275fac,providedIn:"root"}),pe})()},3210:(jt,nt,Y)=>{"use strict";Y.d(nt,{P:()=>Sy});var O=Y(2329),c=Y(7716),K=Y(3637),w=Y(7574),Ue=Y(4402),be=Y(5917),xe=Y(9761),fe=Y(9328),_e=Y(8002),re=Y(2145),Ce=Y(7519),le=Y(5435),pe=Y(309),De=Y(57),Re=Y(8583),Ye=Y(9759),ee=Y(4762),ze=Y(4685),Ct=Y(300),On=function(o,t){return(On=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var _ in l)Object.prototype.hasOwnProperty.call(l,_)&&(s[_]=l[_])})(o,t)};function at(o){var t="function"==typeof Symbol&&Symbol.iterator,s=t&&o[t],l=0;if(s)return s.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&l>=o.length&&(o=void 0),{value:o&&o[l++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var It,zt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wn=wn||{},Et=zt||self;function Ke(){}function rt(o){var t=typeof o;return"array"==(t="object"!=t?t:o?Array.isArray(o)?"array":t:"null")||"object"==t&&"number"==typeof o.length}function it(o){var t=typeof o;return"object"==t&&null!=o||"function"==t}var _t="closure_uid_"+(1e9*Math.random()>>>0),st=0;function tn(o,t,s){return o.call.apply(o.bind,arguments)}function an(o,t,s){if(!o)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var _=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_,l),o.apply(t,_)}}return function(){return o.apply(t,arguments)}}function Sn(o,t,s){return(Sn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tn:an).apply(null,arguments)}function on(o,t){var s=Array.prototype.slice.call(arguments,1);return function(){var l=s.slice();return l.push.apply(l,arguments),o.apply(this,l)}}function Bt(o,t){function s(){}s.prototype=t.prototype,o.Z=t.prototype,o.prototype=new s,o.prototype.constructor=o,o.Vb=function(l,_,C){for(var D=Array(arguments.length-2),R=2;R<arguments.length;R++)D[R-2]=arguments[R];return t.prototype[_].apply(l,D)}}function kt(){this.s=this.s,this.o=this.o}var Ht={};kt.prototype.s=!1,kt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var o=function(o){return Object.prototype.hasOwnProperty.call(o,_t)&&o[_t]||(o[_t]=++st)}(this);delete Ht[o]}},kt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Fn=Array.prototype.indexOf?function(o,t){return Array.prototype.indexOf.call(o,t,void 0)}:function(o,t){if("string"==typeof o)return"string"!=typeof t||1!=t.length?-1:o.indexOf(t,0);for(var s=0;s<o.length;s++)if(s in o&&o[s]===t)return s;return-1},Cn=Array.prototype.forEach?function(o,t,s){Array.prototype.forEach.call(o,t,s)}:function(o,t,s){for(var l=o.length,_="string"==typeof o?o.split(""):o,C=0;C<l;C++)C in _&&t.call(s,_[C],C,o)};function zn(o){return Array.prototype.concat.apply([],arguments)}function Gn(o){var t=o.length;if(0<t){for(var s=Array(t),l=0;l<t;l++)s[l]=o[l];return s}return[]}function tr(o){return/^[\s\xa0]*$/.test(o)}var mn,An=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]};function Mn(o,t){return-1!=o.indexOf(t)}function Oi(o,t){return o<t?-1:o>t?1:0}e:{var Jt=Et.navigator;if(Jt){var Zn=Jt.userAgent;if(Zn){mn=Zn;break e}}mn=""}function Un(o,t,s){for(var l in o)t.call(s,o[l],l,o)}function Kt(o){var t={};for(var s in o)t[s]=o[s];return t}var pr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jr(o,t){for(var s,l,_=1;_<arguments.length;_++){for(s in l=arguments[_])o[s]=l[s];for(var C=0;C<pr.length;C++)s=pr[C],Object.prototype.hasOwnProperty.call(l,s)&&(o[s]=l[s])}}function Kn(o){return Kn[" "](o),o}Kn[" "]=Ke;var ft,o,He=Mn(mn,"Opera"),Ve=Mn(mn,"Trident")||Mn(mn,"MSIE"),Mt=Mn(mn,"Edge"),Pt=Mt||Ve,nn=Mn(mn,"Gecko")&&!(Mn(mn.toLowerCase(),"webkit")&&!Mn(mn,"Edge"))&&!(Mn(mn,"Trident")||Mn(mn,"MSIE"))&&!Mn(mn,"Edge"),At=Mn(mn.toLowerCase(),"webkit")&&!Mn(mn,"Edge");function Ne(){var o=Et.document;return o?o.documentMode:void 0}e:{var vt="",Dt=(o=mn,nn?/rv:([^\);]+)(\)|;)/.exec(o):Mt?/Edge\/([\d\.]+)/.exec(o):Ve?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o):At?/WebKit\/(\S+)/.exec(o):He?/(?:Version)[ \/]?(\S+)/.exec(o):void 0);if(Dt&&(vt=Dt?Dt[1]:""),Ve){var Ut=Ne();if(null!=Ut&&Ut>parseFloat(vt)){ft=String(Ut);break e}}ft=vt}var cn={};function fn(){return t=cn,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var o=0,t=An(String(ft)).split("."),s=An("9").split("."),l=Math.max(t.length,s.length),_=0;0==o&&_<l;_++){var C=t[_]||"",D=s[_]||"";do{if(C=/(\d*)(\D*)(.*)/.exec(C)||["","","",""],D=/(\d*)(\D*)(.*)/.exec(D)||["","","",""],0==C[0].length&&0==D[0].length)break;o=Oi(0==C[1].length?0:parseInt(C[1],10),0==D[1].length?0:parseInt(D[1],10))||Oi(0==C[2].length,0==D[2].length)||Oi(C[2],D[2]),C=C[3],D=D[3]}while(0==o)}return 0<=o}();var t}var Ie=Et.document&&Ve&&(Ne()||parseInt(ft,10))||void 0,$e=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var o=!1,t=Object.defineProperty({},"passive",{get:function(){o=!0}});try{Et.addEventListener("test",Ke,t),Et.removeEventListener("test",Ke,t)}catch(s){}return o}();function Je(o,t){this.type=o,this.g=this.target=t,this.defaultPrevented=!1}function Xe(o,t){if(Je.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var s=this.type=o.type,l=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=t,t=o.relatedTarget){if(nn){e:{try{Kn(t.nodeName);var _=!0;break e}catch(C){}_=!1}_||(t=null)}}else"mouseover"==s?t=o.fromElement:"mouseout"==s&&(t=o.toElement);this.relatedTarget=t,l?(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0):(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType="string"==typeof o.pointerType?o.pointerType:Zt[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Xe.Z.h.call(this)}}Je.prototype.h=function(){this.defaultPrevented=!0},Bt(Xe,Je);var Zt={2:"touch",3:"pen",4:"mouse"};Xe.prototype.h=function(){Xe.Z.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var _n="closure_listenable_"+(1e6*Math.random()|0),or=0;function Bn(o,t,s,l,_){this.listener=o,this.proxy=null,this.src=t,this.type=s,this.capture=!!l,this.ia=_,this.key=++or,this.ca=this.fa=!1}function Vn(o){o.ca=!0,o.listener=null,o.proxy=null,o.src=null,o.ia=null}function ai(o){this.src=o,this.g={},this.h=0}function Hr(o,t){var s=t.type;if(s in o.g){var C,l=o.g[s],_=Fn(l,t);(C=0<=_)&&Array.prototype.splice.call(l,_,1),C&&(Vn(t),0==o.g[s].length&&(delete o.g[s],o.h--))}}function Xr(o,t,s,l){for(var _=0;_<o.length;++_){var C=o[_];if(!C.ca&&C.listener==t&&C.capture==!!s&&C.ia==l)return _}return-1}ai.prototype.add=function(o,t,s,l,_){var C=o.toString();(o=this.g[C])||(o=this.g[C]=[],this.h++);var D=Xr(o,t,l,_);return-1<D?(t=o[D],s||(t.fa=!1)):((t=new Bn(t,this.src,C,!!l,_)).fa=s,o.push(t)),t};var Dr="closure_lm_"+(1e6*Math.random()|0),Ri={};function No(o,t,s,l,_){if(l&&l.once)return rs(o,t,s,l,_);if(Array.isArray(t)){for(var C=0;C<t.length;C++)No(o,t[C],s,l,_);return null}return s=Xt(s),o&&o[_n]?o.N(t,s,it(l)?!!l.capture:!!l,_):Gi(o,t,s,!1,l,_)}function Gi(o,t,s,l,_,C){if(!t)throw Error("Invalid event type");var D=it(_)?!!_.capture:!!_,R=oo(o);if(R||(o[Dr]=R=new ai(o)),(s=R.add(t,s,l,D,C)).proxy)return s;if(l=function(){var t=Vr;return function o(s){return t.call(o.src,o.listener,s)}}(),s.proxy=l,l.src=o,l.listener=s,o.addEventListener)$e||(_=D),void 0===_&&(_=!1),o.addEventListener(t.toString(),l,_);else if(o.attachEvent)o.attachEvent(vn(t.toString()),l);else{if(!o.addListener||!o.removeListener)throw Error("addEventListener and attachEvent are unavailable.");o.addListener(l)}return s}function rs(o,t,s,l,_){if(Array.isArray(t)){for(var C=0;C<t.length;C++)rs(o,t[C],s,l,_);return null}return s=Xt(s),o&&o[_n]?o.O(t,s,it(l)?!!l.capture:!!l,_):Gi(o,t,s,!0,l,_)}function Nr(o,t,s,l,_){if(Array.isArray(t))for(var C=0;C<t.length;C++)Nr(o,t[C],s,l,_);else l=it(l)?!!l.capture:!!l,s=Xt(s),o&&o[_n]?(o=o.i,(t=String(t).toString())in o.g&&-1<(s=Xr(C=o.g[t],s,l,_))&&(Vn(C[s]),Array.prototype.splice.call(C,s,1),0==C.length&&(delete o.g[t],o.h--))):o&&(o=oo(o))&&(t=o.g[t.toString()],o=-1,t&&(o=Xr(t,s,l,_)),(s=-1<o?t[o]:null)&&cr(s))}function cr(o){if("number"!=typeof o&&o&&!o.ca){var t=o.src;if(t&&t[_n])Hr(t.i,o);else{var s=o.type,l=o.proxy;t.removeEventListener?t.removeEventListener(s,l,o.capture):t.detachEvent?t.detachEvent(vn(s),l):t.addListener&&t.removeListener&&t.removeListener(l),(s=oo(t))?(Hr(s,o),0==s.h&&(s.src=null,t[Dr]=null)):Vn(o)}}}function vn(o){return o in Ri?Ri[o]:Ri[o]="on"+o}function Vr(o,t){if(o.ca)o=!0;else{t=new Xe(t,this);var s=o.listener,l=o.ia||o.src;o.fa&&cr(o),o=s.call(l,t)}return o}function oo(o){return(o=o[Dr])instanceof ai?o:null}var Sr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xt(o){return"function"==typeof o?o:(o[Sr]||(o[Sr]=function(t){return o.handleEvent(t)}),o[Sr])}function ln(){kt.call(this),this.i=new ai(this),this.P=this,this.I=null}function In(o,t){var s,l=o.I;if(l)for(s=[];l;l=l.I)s.push(l);if(o=o.P,l=t.type||t,"string"==typeof t)t=new Je(t,o);else if(t instanceof Je)t.target=t.target||o;else{var _=t;jr(t=new Je(l,o),_)}if(_=!0,s)for(var C=s.length-1;0<=C;C--){var D=t.g=s[C];_=Qr(D,l,!0,t)&&_}if(_=Qr(D=t.g=o,l,!0,t)&&_,_=Qr(D,l,!1,t)&&_,s)for(C=0;C<s.length;C++)_=Qr(D=t.g=s[C],l,!1,t)&&_}function Qr(o,t,s,l){if(!(t=o.i.g[String(t)]))return!0;t=t.concat();for(var _=!0,C=0;C<t.length;++C){var D=t[C];if(D&&!D.ca&&D.capture==s){var R=D.listener,W=D.ia||D.src;D.fa&&Hr(o.i,D),_=!1!==R.call(W,l)&&_}}return _&&!l.defaultPrevented}Bt(ln,kt),ln.prototype[_n]=!0,ln.prototype.removeEventListener=function(o,t,s,l){Nr(this,o,t,s,l)},ln.prototype.M=function(){if(ln.Z.M.call(this),this.i){var t,o=this.i;for(t in o.g){for(var s=o.g[t],l=0;l<s.length;l++)Vn(s[l]);delete o.g[t],o.h--}}this.I=null},ln.prototype.N=function(o,t,s,l){return this.i.add(String(o),t,!1,s,l)},ln.prototype.O=function(o,t,s,l){return this.i.add(String(o),t,!0,s,l)};var Si=Et.JSON.stringify;function Ar(){var o=ot,t=null;return o.g&&(t=o.g,o.g=o.g.next,o.g||(o.h=null),t.next=null),t}var Qe,ni=function(){function o(){this.h=this.g=null}return o.prototype.add=function(t,s){var l=Er.get();l.set(t,s),this.h?this.h.next=l:this.g=l,this.h=l},o}(),Er=new(function(){function o(t,s){this.i=t,this.j=s,this.h=0,this.g=null}return o.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},o}())(function(){return new bo},function(o){return o.reset()}),bo=function(){function o(){this.next=this.g=this.h=null}return o.prototype.set=function(t,s){this.h=t,this.g=s,this.next=null},o.prototype.reset=function(){this.next=this.g=this.h=null},o}();function so(o){Et.setTimeout(function(){throw o},0)}function xn(o,t){Qe||function(){var o=Et.Promise.resolve(void 0);Qe=function(){o.then(St)}}(),Ae||(Qe(),Ae=!0),ot.add(o,t)}var Ae=!1,ot=new ni;function St(){for(var o;o=Ar();){try{o.h.call(o.g)}catch(s){so(s)}var t=Er;t.j(o),100>t.h&&(t.h++,o.next=t.g,t.g=o)}Ae=!1}function pn(o,t){ln.call(this),this.h=o||1,this.g=t||Et,this.j=Sn(this.kb,this),this.l=Date.now()}function kn(o){o.da=!1,o.S&&(o.g.clearTimeout(o.S),o.S=null)}function gn(o,t,s){if("function"==typeof o)s&&(o=Sn(o,s));else{if(!o||"function"!=typeof o.handleEvent)throw Error("Invalid listener argument");o=Sn(o.handleEvent,o)}return 2147483647<Number(t)?-1:Et.setTimeout(o,t||0)}function un(o){o.g=gn(function(){o.g=null,o.i&&(o.i=!1,un(o))},o.j);var t=o.h;o.h=null,o.m.apply(null,t)}Bt(pn,ln),(It=pn.prototype).da=!1,It.S=null,It.kb=function(){if(this.da){var o=Date.now()-this.l;0<o&&o<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-o):(this.S&&(this.g.clearTimeout(this.S),this.S=null),In(this,"tick"),this.da&&(kn(this),this.start()))}},It.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},It.M=function(){pn.Z.M.call(this),kn(this),delete this.g};var Jn=function(o){function t(s,l){var _=o.call(this)||this;return _.m=s,_.j=l,_.h=null,_.i=!1,_.g=null,_}return function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=o}On(o,t),o.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}(t,o),t.prototype.l=function(s){this.h=arguments,this.g?this.i=!0:un(this)},t.prototype.M=function(){o.prototype.M.call(this),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(kt);function Li(o){kt.call(this),this.h=o,this.g={}}Bt(Li,kt);var gr=[];function ki(o,t,s,l){Array.isArray(s)||(s&&(gr[0]=s.toString()),s=gr);for(var _=0;_<s.length;_++){var C=No(t,s[_],l||o.handleEvent,!1,o.h||o);if(!C)break;o.g[C.key]=C}}function eo(o){Un(o.g,function(t,s){this.g.hasOwnProperty(s)&&cr(t)},o),o.g={}}function Gr(){this.g=!0}function jn(o,t,s,l){o.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(o,t){if(!o.g)return t;if(!t)return null;try{var s=JSON.parse(t);if(s)for(o=0;o<s.length;o++)if(Array.isArray(s[o])){var l=s[o];if(!(2>l.length)){var _=l[1];if(Array.isArray(_)&&!(1>_.length)){var C=_[0];if("noop"!=C&&"stop"!=C&&"close"!=C)for(var D=1;D<_.length;D++)_[D]=""}}}return Si(s)}catch(R){return t}}(o,s)+(l?" "+l:"")})}Li.prototype.M=function(){Li.Z.M.call(this),eo(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gr.prototype.Aa=function(){this.g=!1},Gr.prototype.info=function(){};var Ui={},ri=null;function Vi(){return ri=ri||new ln}function Zi(o){Je.call(this,Ui.Ma,o)}function ui(o){var t=Vi();In(t,new Zi(t,o))}function Zo(o,t){Je.call(this,Ui.STAT_EVENT,o),this.stat=t}function Lr(o){var t=Vi();In(t,new Zo(t,o))}function is(o,t){Je.call(this,Ui.Na,o),this.size=t}function Bi(o,t){if("function"!=typeof o)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){o()},t)}Ui.Ma="serverreachability",Bt(Zi,Je),Ui.STAT_EVENT="statevent",Bt(Zo,Je),Ui.Na="timingevent",Bt(is,Je);var Oo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Co={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function qo(){}function Lo(){}qo.prototype.h=null;var nr,xo={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function li(){Je.call(this,"d")}function ci(){Je.call(this,"c")}function Yi(){}function Ki(o,t,s,l){this.l=o,this.j=t,this.m=s,this.X=l||1,this.V=new Li(this),this.P=xi,this.W=new pn(o=Pt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new to}function to(){this.i=null,this.g="",this.h=!1}Bt(li,Je),Bt(ci,Je),Bt(Yi,qo),Yi.prototype.g=function(){return new XMLHttpRequest},Yi.prototype.i=function(){return{}},nr=new Yi;var xi=45e3,no={},ii={};function wo(o,t,s){o.K=1,o.v=ye(Z(t)),o.s=s,o.U=!0,ne(o,null)}function ne(o,t){o.F=Date.now(),pt(o),o.A=Z(o.v);var s=o.A,l=o.X;Array.isArray(l)||(l=[String(l)]),Tn(s.h,"t",l),o.C=0,s=o.l.H,o.h=new to,o.g=oi(o.l,s?t:null,!o.s),0<o.O&&(o.L=new Jn(Sn(o.Ia,o,o.g),o.O)),ki(o.V,o.g,"readystatechange",o.gb),t=o.H?Kt(o.H):{},o.s?(o.u||(o.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.s,t)):(o.u="GET",o.g.ea(o.A,o.u,null,t)),ui(1),function(o,t,s,l,_,C){o.info(function(){if(o.g)if(C)for(var D="",R=C.split("&"),W=0;W<R.length;W++){var ae=R[W].split("=");if(1<ae.length){var de=ae[0];ae=ae[1];var Me=de.split("_");D=2<=Me.length&&"type"==Me[1]?D+(de+"=")+ae+"&":D+(de+"=redacted&")}}else D=null;else D=C;return"XMLHTTP REQ ("+l+") [attempt "+_+"]: "+t+"\n"+s+"\n"+D})}(o.j,o.u,o.A,o.m,o.X,o.s)}function qe(o){return!!o.g&&"GET"==o.u&&2!=o.K&&o.l.Ba}function H(o,t,s){for(var _,l=!0;!o.I&&o.C<s.length;){if((_=ge(o,s))==ii){4==t&&(o.o=4,Lr(14),l=!1),jn(o.j,o.m,null,"[Incomplete Response]");break}if(_==no){o.o=4,Lr(15),jn(o.j,o.m,s,"[Invalid Chunk]"),l=!1;break}jn(o.j,o.m,_,null),Zr(o,_)}qe(o)&&_!=ii&&_!=no&&(o.h.g="",o.C=0),4!=t||0!=s.length||o.h.h||(o.o=1,Lr(16),l=!1),o.i=o.i&&l,l?0<s.length&&!o.aa&&(o.aa=!0,(t=o.l).g==o&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+s.length),Ai(t),t.L=!0,Lr(11))):(jn(o.j,o.m,s,"[Invalid Chunked Response]"),lr(o),vr(o))}function ge(o,t){var s=o.C,l=t.indexOf("\n",s);return-1==l?ii:(s=Number(t.substring(s,l)),isNaN(s)?no:(l+=1)+s>t.length?ii:(t=t.substr(l,s),o.C=l+s,t))}function pt(o){o.Y=Date.now()+o.P,Vt(o,o.P)}function Vt(o,t){if(null!=o.B)throw Error("WatchDog timer not null");o.B=Bi(Sn(o.eb,o),t)}function $t(o){o.B&&(Et.clearTimeout(o.B),o.B=null)}function vr(o){0==o.l.G||o.I||ei(o.l,o)}function lr(o){$t(o);var t=o.L;t&&"function"==typeof t.na&&t.na(),o.L=null,kn(o.W),eo(o.V),o.g&&(t=o.g,o.g=null,t.abort(),t.na())}function Zr(o,t){try{var s=o.l;if(0!=s.G&&(s.g==o||Ft(s.i,o)))if(s.I=o.N,!o.J&&Ft(s.i,o)&&3==s.G){try{var l=s.Ca.g.parse(t)}catch(en){l=null}if(Array.isArray(l)&&3==l.length){var _=l;if(0==_[0])e:if(s.u)s.ta=_[1],0<s.ta-s.U&&37500>_[2]&&s.N&&0==s.A&&!s.v&&(s.v=Bi(Sn(s.ab,s),6e3));else{if(s.g){if(!(s.g.F+3e3<o.F))break e;ao(s),pa(s)}Tr(s),Lr(18)}if(1>=Va(s.i)&&s.ka){try{s.ka()}catch(en){}s.ka=void 0}}else Mi(s,11)}else if((o.J||s.g==o)&&ao(s),!tr(t))for(_=s.Ca.g.parse(t),t=0;t<_.length;t++){var C=_[t];if(s.U=C[0],C=C[1],2==s.G)if("c"==C[0]){s.J=C[1],s.la=C[2];var D=C[3];null!=D&&(s.ma=D,s.h.info("VER="+s.ma));var R=C[4];null!=R&&(s.za=R,s.h.info("SVER="+s.za));var W=C[5];null!=W&&"number"==typeof W&&0<W&&(s.K=l=1.5*W,s.h.info("backChannelRequestTimeoutMs_="+l)),l=s;var ae=o.g;if(ae){var de=ae.g?ae.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(de){var Me=l.i;!Me.g&&(Mn(de,"spdy")||Mn(de,"quic")||Mn(de,"h2"))&&(Me.j=Me.l,Me.g=new Set,Me.h&&(br(Me,Me.h),Me.h=null))}if(l.D){var Le=ae.g?ae.g.getResponseHeader("X-HTTP-Session-Id"):null;Le&&(l.sa=Le,J(l.F,l.D,Le))}}s.G=3,s.j&&s.j.xa(),s.$&&(s.O=Date.now()-o.F,s.h.info("Handshake RTT: "+s.O+"ms"));var ct=o;if((l=s).oa=Ji(l,l.H?l.la:null,l.W),ct.J){_s(l.i,ct);var lt=ct,wt=l.K;wt&&lt.setTimeout(wt),lt.B&&($t(lt),pt(lt)),l.g=ct}else Rr(l);0<s.l.length&&Qi(s)}else"stop"!=C[0]&&"close"!=C[0]||Mi(s,7);else 3==s.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Mi(s,7):ji(s):"noop"!=C[0]&&s.j&&s.j.wa(C),s.A=0)}ui(4)}catch(en){}}function wi(o,t){if(o.forEach&&"function"==typeof o.forEach)o.forEach(t,void 0);else if(rt(o)||"string"==typeof o)Cn(o,t,void 0);else{if(o.T&&"function"==typeof o.T)var s=o.T();else if(o.R&&"function"==typeof o.R)s=void 0;else if(rt(o)||"string"==typeof o){s=[];for(var l=o.length,_=0;_<l;_++)s.push(_)}else for(_ in s=[],l=0,o)s[l++]=_;_=(l=function(o){if(o.R&&"function"==typeof o.R)return o.R();if("string"==typeof o)return o.split("");if(rt(o)){for(var t=[],s=o.length,l=0;l<s;l++)t.push(o[l]);return t}for(l in t=[],s=0,o)t[s++]=o[l];return t}(o)).length;for(var C=0;C<_;C++)t.call(void 0,l[C],s&&s[C],o)}}function Uo(o,t){this.h={},this.g=[],this.i=0;var s=arguments.length;if(1<s){if(s%2)throw Error("Uneven number of arguments");for(var l=0;l<s;l+=2)this.set(arguments[l],arguments[l+1])}else if(o)if(o instanceof Uo)for(s=o.T(),l=0;l<s.length;l++)this.set(s[l],o.get(s[l]));else for(l in o)this.set(l,o[l])}function Ur(o){if(o.i!=o.g.length){for(var t=0,s=0;t<o.g.length;){var l=o.g[t];hr(o.h,l)&&(o.g[s++]=l),t++}o.g.length=s}if(o.i!=o.g.length){var _={};for(s=t=0;t<o.g.length;)hr(_,l=o.g[t])||(o.g[s++]=l,_[l]=1),t++;o.g.length=s}}function hr(o,t){return Object.prototype.hasOwnProperty.call(o,t)}(It=Ki.prototype).setTimeout=function(o){this.P=o},It.gb=function(o){o=o.target;var t=this.L;t&&3==fi(o)?t.l():this.Ia(o)},It.Ia=function(o){try{if(o==this.g)e:{var t=fi(this.g),s=this.g.Da(),l=this.g.ba();if(!(3>t)&&(3!=t||Pt||this.g&&(this.h.h||this.g.ga()||Po(this.g)))){this.I||4!=t||7==s||ui(8==s||0>=l?3:2),$t(this);var _=this.g.ba();this.N=_;t:if(qe(this)){var C=Po(this.g);o="";var D=C.length,R=4==fi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){lr(this),vr(this);var W="";break t}this.h.i=new Et.TextDecoder}for(s=0;s<D;s++)this.h.h=!0,o+=this.h.i.decode(C[s],{stream:R&&s==D-1});C.splice(0,D),this.h.g+=o,this.C=0,W=this.h.g}else W=this.g.ga();if(this.i=200==_,function(o,t,s,l,_,C,D){o.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+_+"]: "+t+"\n"+s+"\n"+C+" "+D})}(this.j,this.u,this.A,this.m,this.X,t,_),this.i){if(this.$&&!this.J){t:{if(this.g){var ae,de=this.g;if((ae=de.g?de.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tr(ae)){var Me=ae;break t}}Me=null}if(!(_=Me)){this.i=!1,this.o=3,Lr(12),lr(this),vr(this);break e}jn(this.j,this.m,_,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Zr(this,_)}this.U?(H(this,t,W),Pt&&this.i&&3==t&&(ki(this.V,this.W,"tick",this.fb),this.W.start())):(jn(this.j,this.m,W,null),Zr(this,W)),4==t&&lr(this),this.i&&!this.I&&(4==t?ei(this.l,this):(this.i=!1,pt(this)))}else 400==_&&0<W.indexOf("Unknown SID")?(this.o=3,Lr(12)):(this.o=0,Lr(13)),lr(this),vr(this)}}}catch(Le){}},It.fb=function(){if(this.g){var o=fi(this.g),t=this.g.ga();this.C<t.length&&($t(this),H(this,o,t),this.i&&4!=o&&pt(this))}},It.cancel=function(){this.I=!0,lr(this)},It.eb=function(){this.B=null;var o=Date.now();0<=o-this.Y?(function(o,t){o.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(ui(3),Lr(17)),lr(this),this.o=2,vr(this)):Vt(this,this.Y-o)},(It=Uo.prototype).R=function(){Ur(this);for(var o=[],t=0;t<this.g.length;t++)o.push(this.h[this.g[t]]);return o},It.T=function(){return Ur(this),this.g.concat()},It.get=function(o,t){return hr(this.h,o)?this.h[o]:t},It.set=function(o,t){hr(this.h,o)||(this.i++,this.g.push(o)),this.h[o]=t},It.forEach=function(o,t){for(var s=this.T(),l=0;l<s.length;l++){var _=s[l],C=this.get(_);o.call(t,C,_,this)}};var ho=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $(o,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,o instanceof $){this.g=void 0!==t?t:o.g,he(this,o.j),this.s=o.s,P(this,o.i),z(this,o.m),this.l=o.l,t=o.h;var s=new qr;s.i=t.i,t.g&&(s.g=new Uo(t.g),s.h=t.h),F(this,s),this.o=o.o}else o&&(s=String(o).match(ho))?(this.g=!!t,he(this,s[1]||"",!0),this.s=j(s[2]||""),P(this,s[3]||"",!0),z(this,s[4]),this.l=j(s[5]||"",!0),F(this,s[6]||"",!0),this.o=j(s[7]||"")):(this.g=!!t,this.h=new qr(null,this.g))}function Z(o){return new $(o)}function he(o,t,s){o.j=s?j(t,!0):t,o.j&&(o.j=o.j.replace(/:$/,""))}function P(o,t,s){o.i=s?j(t,!0):t}function z(o,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);o.m=t}else o.m=null}function F(o,t,s){t instanceof qr?(o.h=t,function(o,t){t&&!o.j&&(mr(o),o.i=null,o.g.forEach(function(s,l){var _=l.toLowerCase();l!=_&&(zr(this,l),Tn(this,_,s))},o)),o.j=t}(o.h,o.g)):(s||(t=B(t,En)),o.h=new qr(t,o.g))}function J(o,t,s){o.h.set(t,s)}function ye(o){return J(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function j(o,t){return o?t?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function B(o,t,s){return"string"==typeof o?(o=encodeURI(o).replace(t,L),s&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function L(o){return"%"+((o=o.charCodeAt(0))>>4&15).toString(16)+(15&o).toString(16)}$.prototype.toString=function(){var o=[],t=this.j;t&&o.push(B(t,se,!0),":");var s=this.i;return(s||"file"==t)&&(o.push("//"),(t=this.s)&&o.push(B(t,se,!0),"@"),o.push(encodeURIComponent(String(s)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(s=this.m)&&o.push(":",String(s))),(s=this.l)&&(this.i&&"/"!=s.charAt(0)&&o.push("/"),o.push(B(s,"/"==s.charAt(0)?Ot:Ze,!0))),(s=this.h.toString())&&o.push("?",s),(s=this.o)&&o.push("#",B(s,fr)),o.join("")};var se=/[#\/\?@]/g,Ze=/[#\?:]/g,Ot=/[#\?]/g,En=/[#\?@]/g,fr=/#/g;function qr(o,t){this.h=this.g=null,this.i=o||null,this.j=!!t}function mr(o){o.g||(o.g=new Uo,o.h=0,o.i&&function(o,t){if(o){o=o.split("&");for(var s=0;s<o.length;s++){var l=o[s].indexOf("="),_=null;if(0<=l){var C=o[s].substring(0,l);_=o[s].substring(l+1)}else C=o[s];t(C,_?decodeURIComponent(_.replace(/\+/g," ")):"")}}}(o.i,function(t,s){o.add(decodeURIComponent(t.replace(/\+/g," ")),s)}))}function zr(o,t){mr(o),t=ro(o,t),hr(o.g.h,t)&&(o.i=null,o.h-=o.g.get(t).length,hr((o=o.g).h,t)&&(delete o.h[t],o.i--,o.g.length>2*o.i&&Ur(o)))}function di(o,t){return mr(o),t=ro(o,t),hr(o.g.h,t)}function Tn(o,t,s){zr(o,t),0<s.length&&(o.i=null,o.g.set(ro(o,t),Gn(s)),o.h+=s.length)}function ro(o,t){return t=String(t),o.j&&(t=t.toLowerCase()),t}(It=qr.prototype).add=function(o,t){mr(this),this.i=null,o=ro(this,o);var s=this.g.get(o);return s||this.g.set(o,s=[]),s.push(t),this.h+=1,this},It.forEach=function(o,t){mr(this),this.g.forEach(function(s,l){Cn(s,function(_){o.call(t,_,l,this)},this)},this)},It.T=function(){mr(this);for(var o=this.g.R(),t=this.g.T(),s=[],l=0;l<t.length;l++)for(var _=o[l],C=0;C<_.length;C++)s.push(t[l]);return s},It.R=function(o){mr(this);var t=[];if("string"==typeof o)di(this,o)&&(t=zn(t,this.g.get(ro(this,o))));else{o=this.g.R();for(var s=0;s<o.length;s++)t=zn(t,o[s])}return t},It.set=function(o,t){return mr(this),this.i=null,di(this,o=ro(this,o))&&(this.h-=this.g.get(o).length),this.g.set(o,[t]),this.h+=1,this},It.get=function(o,t){return o&&0<(o=this.R(o)).length?String(o[0]):t},It.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var o=[],t=this.g.T(),s=0;s<t.length;s++){var l=t[s],_=encodeURIComponent(String(l));l=this.R(l);for(var C=0;C<l.length;C++){var D=_;""!==l[C]&&(D+="="+encodeURIComponent(String(l[C]))),o.push(D)}}return this.i=o.join("&")};var fo=function(t,s){this.h=t,this.g=s};function au(o){this.l=o||Gu,o=Et.PerformanceNavigationTiming?0<(o=Et.performance.getEntriesByType("navigation")).length&&("hq"==o[0].nextHopProtocol||"h2"==o[0].nextHopProtocol):!!(Et.g&&Et.g.Ea&&Et.g.Ea()&&Et.g.Ea().Zb),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Gu=10;function uu(o){return!!o.h||!!o.g&&o.g.size>=o.j}function Va(o){return o.h?1:o.g?o.g.size:0}function Ft(o,t){return o.h?o.h==t:!!o.g&&o.g.has(t)}function br(o,t){o.g?o.g.add(t):o.h=t}function _s(o,t){o.h&&o.h==t?o.h=null:o.g&&o.g.has(t)&&o.g.delete(t)}function Ni(o){var t,s;if(null!=o.h)return o.i.concat(o.h.D);if(null!=o.g&&0!==o.g.size){var l=o.i;try{for(var _=at(o.g.values()),C=_.next();!C.done;C=_.next())l=l.concat(C.value.D)}catch(R){t={error:R}}finally{try{C&&!C.done&&(s=_.return)&&s.call(_)}finally{if(t)throw t.error}}return l}return Gn(o.i)}function Ms(){}function Is(){this.g=new Ms}function zo(o,t,s){var l=s||"";try{wi(o,function(_,C){var D=_;it(_)&&(D=Si(_)),t.push(l+C+"="+encodeURIComponent(D))})}catch(_){throw t.push(l+"type="+encodeURIComponent("_badmap")),_}}function A(o,t,s,l,_){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,_(l)}catch(C){}}function M(o){this.l=o.$b||null,this.j=o.ib||!1}function V(o,t){ln.call(this),this.D=o,this.u=t,this.m=void 0,this.readyState=oe,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}au.prototype.cancel=function(){var o,t;if(this.i=Ni(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var s=at(this.g.values()),l=s.next();!l.done;l=s.next())l.value.cancel()}catch(C){o={error:C}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(o)throw o.error}}this.g.clear()}},Ms.prototype.stringify=function(o){return Et.JSON.stringify(o,void 0)},Ms.prototype.parse=function(o){return Et.JSON.parse(o,void 0)},Bt(M,qo),M.prototype.g=function(){return new V(this.l,this.j)},M.prototype.i=function(o){return function(){return o}}({}),Bt(V,ln);var oe=0;function ve(o){o.j.read().then(o.Sa.bind(o)).catch(o.ha.bind(o))}function Oe(o){o.readyState=4,o.l=null,o.j=null,o.A=null,Pe(o)}function Pe(o){o.onreadystatechange&&o.onreadystatechange.call(o)}(It=V.prototype).open=function(o,t){if(this.readyState!=oe)throw this.abort(),Error("Error reopening a connection");this.C=o,this.B=t,this.readyState=1,Pe(this)},It.send=function(o){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};o&&(t.body=o),(this.D||Et).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},It.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Oe(this)),this.readyState=oe},It.Va=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Pe(this)),this.g&&(this.readyState=3,Pe(this),this.g)))if("arraybuffer"===this.responseType)o.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Et.ReadableStream&&"body"in o){if(this.j=o.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ve(this)}else o.text().then(this.Ua.bind(this),this.ha.bind(this))},It.Sa=function(o){if(this.g){if(this.u&&o.value)this.response.push(o.value);else if(!this.u){var t=o.value?o.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!o.done}))&&(this.response=this.responseText+=t)}o.done?Oe(this):Pe(this),3==this.readyState&&ve(this)}},It.Ua=function(o){this.g&&(this.response=this.responseText=o,Oe(this))},It.Ta=function(o){this.g&&(this.response=o,Oe(this))},It.ha=function(){this.g&&Oe(this)},It.setRequestHeader=function(o,t){this.v.append(o,t)},It.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},It.getAllResponseHeaders=function(){if(!this.h)return"";for(var o=[],t=this.h.entries(),s=t.next();!s.done;)o.push((s=s.value)[0]+": "+s[1]),s=t.next();return o.join("\r\n")},Object.defineProperty(V.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(o){this.m=o?"include":"same-origin"}});var ut=Et.JSON.parse;function gt(o){ln.call(this),this.headers=new Uo,this.u=o||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qt,this.K=this.L=!1}Bt(gt,ln);var qt="",Rn=/^https?$/i,dr=["POST","PUT"];function $n(o){return"content-type"==o.toLowerCase()}function Nn(o,t){o.h=!1,o.g&&(o.l=!0,o.g.abort(),o.l=!1),o.j=t,o.m=5,yr(o),Br(o)}function yr(o){o.D||(o.D=!0,In(o,"complete"),In(o,"error"))}function hi(o){if(o.h&&void 0!==wn&&(!o.C[1]||4!=fi(o)||2!=o.ba()))if(o.v&&4==fi(o))gn(o.Fa,0,o);else if(In(o,"readystatechange"),4==fi(o)){o.h=!1;try{var l,t=o.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break e;default:s=!1}if(!(l=s)){var _;if(_=0===t){var C=String(o.H).match(ho)[1]||null;if(!C&&Et.self&&Et.self.location){var D=Et.self.location.protocol;C=D.substr(0,D.length-1)}_=!Rn.test(C?C.toLowerCase():"")}l=_}if(l)In(o,"complete"),In(o,"success");else{o.m=6;try{var R=2<fi(o)?o.g.statusText:""}catch(W){R=""}o.j=R+" ["+o.ba()+"]",yr(o)}}finally{Br(o)}}}function Br(o,t){if(o.g){io(o);var s=o.g,l=o.C[0]?Ke:null;o.g=null,o.C=null,t||In(o,"ready");try{s.onreadystatechange=l}catch(_){}}}function io(o){o.g&&o.K&&(o.g.ontimeout=null),o.A&&(Et.clearTimeout(o.A),o.A=null)}function fi(o){return o.g?o.g.readyState:0}function Po(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.J){case qt:case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch(t){return null}}function pi(o,t,s){e:{for(l in s){var l=!1;break e}l=!0}l||(s=function(o){var t="";return Un(o,function(s,l){t+=l,t+=":",t+=s,t+="\r\n"}),t}(s),"string"==typeof o?null!=s&&encodeURIComponent(String(s)):J(o,t,s))}function Ro(o,t,s){return s&&s.internalChannelParams&&s.internalChannelParams[o]||t}function $o(o){this.za=0,this.l=[],this.h=new Gr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ro("failFast",!1,o),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ro("baseRetryDelayMs",5e3,o),this.$a=Ro("retryDelaySeedMs",1e4,o),this.Ya=Ro("forwardChannelMaxRetries",2,o),this.ra=Ro("forwardChannelRequestTimeoutMs",2e4,o),this.qa=o&&o.xmlHttpFactory||void 0,this.Ba=o&&o.Yb||!1,this.K=void 0,this.H=o&&o.supportsCrossDomainXhr||!1,this.J="",this.i=new au(o&&o.concurrentRequestLimit),this.Ca=new Is,this.ja=o&&o.fastHandshake||!1,this.Ra=o&&o.Wb||!1,o&&o.Aa&&this.h.Aa(),o&&o.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&o&&o.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!o||!1!==o.Xb}function ji(o){if(ga(o),3==o.G){var t=o.V++,s=Z(o.F);J(s,"SID",o.J),J(s,"RID",t),J(s,"TYPE","terminate"),Pn(o,s),(t=new Ki(o,o.h,t,void 0)).K=2,t.v=ye(Z(s)),s=!1,Et.navigator&&Et.navigator.sendBeacon&&(s=Et.navigator.sendBeacon(t.v.toString(),"")),!s&&Et.Image&&((new Image).src=t.v,s=!0),s||(t.g=oi(t.l,null),t.g.ea(t.v)),t.F=Date.now(),pt(t)}Us(o)}function pa(o){o.g&&(Ai(o),o.g.cancel(),o.g=null)}function ga(o){pa(o),o.u&&(Et.clearTimeout(o.u),o.u=null),ao(o),o.i.cancel(),o.m&&("number"==typeof o.m&&Et.clearTimeout(o.m),o.m=null)}function gi(o,t){o.l.push(new fo(o.Za++,t)),3==o.G&&Qi(o)}function Qi(o){uu(o.i)||o.m||(o.m=!0,xn(o.Ha,o),o.C=0)}function yn(o,t){var s;s=t?t.m:o.V++;var l=Z(o.F);J(l,"SID",o.J),J(l,"RID",s),J(l,"AID",o.U),Pn(o,l),o.o&&o.s&&pi(l,o.o,o.s),s=new Ki(o,o.h,s,o.C+1),null===o.o&&(s.H=o.s),t&&(o.l=t.D.concat(o.l)),t=Qn(o,s,1e3),s.setTimeout(Math.round(.5*o.ra)+Math.round(.5*o.ra*Math.random())),br(o.i,s),wo(s,l,t)}function Pn(o,t){o.j&&wi({},function(s,l){J(t,l,s)})}function Qn(o,t,s){s=Math.min(o.l.length,s);var l=o.j?Sn(o.j.Oa,o.j,o):null;e:for(var _=o.l,C=-1;;){var D=["count="+s];-1==C?0<s?D.push("ofs="+(C=_[0].h)):C=0:D.push("ofs="+C);for(var R=!0,W=0;W<s;W++){var ae=_[W].h,de=_[W].g;if(0>(ae-=C))C=Math.max(0,_[W].h-100),R=!1;else try{zo(de,D,"req"+ae+"_")}catch(Me){l&&l(de)}}if(R){l=D.join("&");break e}}return o=o.l.splice(0,s),t.D=o,l}function Rr(o){o.g||o.u||(o.Y=1,xn(o.Ga,o),o.A=0)}function Tr(o){return!(o.g||o.u||3<=o.A||(o.Y++,o.u=Bi(Sn(o.Ga,o),ta(o,o.A)),o.A++,0))}function Ai(o){null!=o.B&&(Et.clearTimeout(o.B),o.B=null)}function Ei(o){o.g=new Ki(o,o.h,"rpc",o.Y),null===o.o&&(o.g.H=o.s),o.g.O=0;var t=Z(o.oa);J(t,"RID","rpc"),J(t,"SID",o.J),J(t,"CI",o.N?"0":"1"),J(t,"AID",o.U),Pn(o,t),J(t,"TYPE","xmlhttp"),o.o&&o.s&&pi(t,o.o,o.s),o.K&&o.g.setTimeout(o.K);var s=o.g;o=o.la,s.K=1,s.v=ye(Z(t)),s.s=null,s.U=!0,ne(s,o)}function ao(o){null!=o.v&&(Et.clearTimeout(o.v),o.v=null)}function ei(o,t){var s=null;if(o.g==t){ao(o),Ai(o),o.g=null;var l=2}else{if(!Ft(o.i,t))return;s=t.D,_s(o.i,t),l=1}if(o.I=t.N,0!=o.G)if(t.i)if(1==l){s=t.s?t.s.length:0,t=Date.now()-t.F;var _=o.C;In(l=Vi(),new is(l,s,t,_)),Qi(o)}else Rr(o);else if(3==(_=t.o)||0==_&&0<o.I||!(1==l&&function(o,t){return!(Va(o.i)>=o.i.j-(o.m?1:0)||(o.m?(o.l=t.D.concat(o.l),0):1==o.G||2==o.G||o.C>=(o.Xa?0:o.Ya)||(o.m=Bi(Sn(o.Ha,o,t),ta(o,o.C)),o.C++,0)))}(o,t)||2==l&&Tr(o)))switch(s&&0<s.length&&(t=o.i,t.i=t.i.concat(s)),_){case 1:Mi(o,5);break;case 4:Mi(o,10);break;case 3:Mi(o,6);break;default:Mi(o,2)}}function ta(o,t){var s=o.Pa+Math.floor(Math.random()*o.$a);return o.j||(s*=2),s*t}function Mi(o,t){if(o.h.info("Error code "+t),2==t){var s=null;o.j&&(s=null);var l=Sn(o.jb,o);s||(s=new $("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||he(s,"https"),ye(s)),function(o,t){var s=new Gr;if(Et.Image){var l=new Image;l.onload=on(A,s,l,"TestLoadImage: loaded",!0,t),l.onerror=on(A,s,l,"TestLoadImage: error",!1,t),l.onabort=on(A,s,l,"TestLoadImage: abort",!1,t),l.ontimeout=on(A,s,l,"TestLoadImage: timeout",!1,t),Et.setTimeout(function(){l.ontimeout&&l.ontimeout()},1e4),l.src=o}else t(!1)}(s.toString(),l)}else Lr(2);o.G=0,o.j&&o.j.va(t),Us(o),ga(o)}function Us(o){o.G=0,o.I=-1,o.j&&((0!=Ni(o.i).length||0!=o.l.length)&&(o.i.i.length=0,Gn(o.l),o.l.length=0),o.j.ua())}function Ji(o,t,s){var l=function(o){return o instanceof $?Z(o):new $(o,void 0)}(s);if(""!=l.i)t&&P(l,t+"."+l.i),z(l,l.m);else{var _=Et.location;l=function(o,t,s,l){var _=new $(null,void 0);return o&&he(_,o),t&&P(_,t),s&&z(_,s),l&&(_.l=l),_}(_.protocol,t?t+"."+_.hostname:_.hostname,+_.port,s)}return o.aa&&Un(o.aa,function(C,D){J(l,D,C)}),s=o.sa,(t=o.D)&&s&&J(l,t,s),J(l,"VER",o.ma),Pn(o,l),l}function oi(o,t,s){if(t&&!o.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new gt(s&&o.Ba&&!o.qa?new M({ib:!0}):o.qa)).L=o.H,t}function Os(){}function ma(){if(Ve&&!(10<=Number(Ie)))throw Error("Environmental error: no available transport.")}function qi(o,t){ln.call(this),this.g=new $o(t),this.l=o,this.h=t&&t.messageUrlParams||null,o=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.s=o,o=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(o?o["X-WebChannel-Content-Type"]=t.messageContentType:o={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(o?o["X-WebChannel-Client-Profile"]=t.ya:o={"X-WebChannel-Client-Profile":t.ya}),this.g.P=o,(o=t&&t.httpHeadersOverwriteParam)&&!tr(o)&&(this.g.o=o),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!tr(t)&&(this.g.D=t,null!==(o=this.h)&&t in o&&t in(o=this.h)&&delete o[t]),this.j=new ya(this)}function _a(o){li.call(this);var t=o.__sm__;if(t){e:{for(var s in t){o=s;break e}o=void 0}(this.i=o)&&(o=this.i,t=null!==t&&o in t?t[o]:void 0),this.data=t}else this.data=o}function va(){ci.call(this),this.status=1}function ya(o){this.g=o}(It=gt.prototype).ea=function(o,t,s,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+o);t=t?t.toUpperCase():"GET",this.H=o,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nr.g(),this.C=function(o){return o.h||(o.h=o.i())}(this.u?this.u:nr),this.g.onreadystatechange=Sn(this.Fa,this);try{this.F=!0,this.g.open(t,String(o),!0),this.F=!1}catch(C){return void Nn(this,C)}o=s||"";var _=new Uo(this.headers);l&&wi(l,function(C,D){_.set(D,C)}),l=function(o){e:{for(var t=$n,s=o.length,l="string"==typeof o?o.split(""):o,_=0;_<s;_++)if(_ in l&&t.call(void 0,l[_],_,o)){t=_;break e}t=-1}return 0>t?null:"string"==typeof o?o.charAt(t):o[t]}(_.T()),s=Et.FormData&&o instanceof Et.FormData,!(0<=Fn(dr,t))||l||s||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),_.forEach(function(C,D){this.g.setRequestHeader(D,C)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{io(this),0<this.B&&((this.K=function(o){return Ve&&fn()&&"number"==typeof o.timeout&&void 0!==o.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Sn(this.pa,this)):this.A=gn(this.pa,this.B,this)),this.v=!0,this.g.send(o),this.v=!1}catch(C){Nn(this,C)}},It.pa=function(){void 0!==wn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,In(this,"timeout"),this.abort(8))},It.abort=function(o){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=o||7,In(this,"complete"),In(this,"abort"),Br(this))},It.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Br(this,!0)),gt.Z.M.call(this)},It.Fa=function(){this.s||(this.F||this.v||this.l?hi(this):this.cb())},It.cb=function(){hi(this)},It.ba=function(){try{return 2<fi(this)?this.g.status:-1}catch(o){return-1}},It.ga=function(){try{return this.g?this.g.responseText:""}catch(o){return""}},It.Qa=function(o){if(this.g){var t=this.g.responseText;return o&&0==t.indexOf(o)&&(t=t.substring(o.length)),ut(t)}},It.Da=function(){return this.m},It.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(It=$o.prototype).ma=8,It.G=1,It.hb=function(o){try{this.h.info("Origin Trials invoked: "+o)}catch(t){}},It.Ha=function(o){if(this.m)if(this.m=null,1==this.G){if(!o){this.V=Math.floor(1e5*Math.random()),o=this.V++;var t=new Ki(this,this.h,o,void 0),s=this.s;if(this.P&&(s?jr(s=Kt(s),this.P):s=this.P),null===this.o&&(t.H=s),this.ja)e:{for(var l=0,_=0;_<this.l.length;_++){var C=this.l[_];if(void 0===(C="__data__"in C.g&&"string"==typeof(C=C.g.__data__)?C.length:void 0))break;if(4096<(l+=C)){l=_;break e}if(4096===l||_===this.l.length-1){l=_+1;break e}}l=1e3}else l=1e3;l=Qn(this,t,l),J(_=Z(this.F),"RID",o),J(_,"CVER",22),this.D&&J(_,"X-HTTP-Session-Id",this.D),Pn(this,_),this.o&&s&&pi(_,this.o,s),br(this.i,t),this.Ra&&J(_,"TYPE","init"),this.ja?(J(_,"$req",l),J(_,"SID","null"),t.$=!0,wo(t,_,null)):wo(t,_,l),this.G=2}}else 3==this.G&&(o?yn(this,o):0==this.l.length||uu(this.i)||yn(this))},It.Ga=function(){if(this.u=null,Ei(this),this.$&&!(this.L||null==this.g||0>=this.O)){var o=2*this.O;this.h.info("BP detection timer enabled: "+o),this.B=Bi(Sn(this.bb,this),o)}},It.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Lr(10),pa(this),Ei(this))},It.ab=function(){null!=this.v&&(this.v=null,pa(this),Tr(this),Lr(19))},It.jb=function(o){o?(this.h.info("Successfully pinged google.com"),Lr(2)):(this.h.info("Failed to ping google.com"),Lr(1))},(It=Os.prototype).xa=function(){},It.wa=function(){},It.va=function(){},It.ua=function(){},It.Oa=function(){},ma.prototype.g=function(o,t){return new qi(o,t)},Bt(qi,ln),qi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var o=this.g,t=this.l,s=this.h||void 0;o.Wa&&(o.h.info("Origin Trials enabled."),xn(Sn(o.hb,o,t))),Lr(0),o.W=t,o.aa=s||{},o.N=o.X,o.F=Ji(o,null,o.W),Qi(o)},qi.prototype.close=function(){ji(this.g)},qi.prototype.u=function(o){if("string"==typeof o){var t={};t.__data__=o,gi(this.g,t)}else this.v?((t={}).__data__=Si(o),gi(this.g,t)):gi(this.g,o)},qi.prototype.M=function(){this.g.j=null,delete this.j,ji(this.g),delete this.g,qi.Z.M.call(this)},Bt(_a,li),Bt(va,ci),Bt(ya,Os),ya.prototype.xa=function(){In(this.g,"a")},ya.prototype.wa=function(o){In(this.g,new _a(o))},ya.prototype.va=function(o){In(this.g,new va(o))},ya.prototype.ua=function(){In(this.g,"b")},ma.prototype.createWebChannel=ma.prototype.g,qi.prototype.send=qi.prototype.u,qi.prototype.open=qi.prototype.m,qi.prototype.close=qi.prototype.close,Oo.NO_ERROR=0,Oo.TIMEOUT=8,Oo.HTTP_ERROR=6,Co.COMPLETE="complete",Lo.EventType=xo,xo.OPEN="a",xo.CLOSE="b",xo.ERROR="c",xo.MESSAGE="d",ln.prototype.listen=ln.prototype.N,gt.prototype.listenOnce=gt.prototype.O,gt.prototype.getLastError=gt.prototype.La,gt.prototype.getLastErrorCode=gt.prototype.Da,gt.prototype.getStatus=gt.prototype.ba,gt.prototype.getResponseJson=gt.prototype.Qa,gt.prototype.getResponseText=gt.prototype.ga,gt.prototype.send=gt.prototype.ea;var ba=Oo,qu=Co,Ba=Ui,Vs_PROXY=10,Vs_NOPROXY=11,Al=M,na=Lo,ja=gt,Xi=function(){function o(t,s){var l=this;this.previousValue=t,s&&(s.sequenceNumberHandler=function(_){return l.t(_)},this.i=function(_){return s.writeSequenceNumber(_)})}return o.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},o.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},o}();Xi.o=-1;var mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Lt=function(o){function t(s,l){var _=this;return(_=o.call(this,l)||this).code=s,_.message=l,_.name="FirebaseError",_.toString=function(){return _.name+": [code="+_.code+"]: "+_.message},_}return(0,ee.ZT)(t,o),t}(Error),ss=new Ct.Yd("@firebase/firestore");function wa(){return ss.logLevel}function rn(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(ss.logLevel<=Ct.in.DEBUG){var l=t.map(Ga);ss.debug.apply(ss,(0,ee.ev)(["Firestore (8.10.0): "+o],l))}}function Pi(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(ss.logLevel<=Ct.in.ERROR){var l=t.map(Ga);ss.error.apply(ss,(0,ee.ev)(["Firestore (8.10.0): "+o],l))}}function ys(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(ss.logLevel<=Ct.in.WARN){var l=t.map(Ga);ss.warn.apply(ss,(0,ee.ev)(["Firestore (8.10.0): "+o],l))}}function Ga(o){if("string"==typeof o)return o;try{return JSON.stringify(o)}catch(s){return o}}function Ln(o){void 0===o&&(o="Unexpected state");var t="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+o;throw Pi(t),new Error(t)}function Xn(o,t){o||Ln()}function sn(o,t){return o}function tc(o){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),s=new Uint8Array(o);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(s);else for(var l=0;l<o;l++)s[l]=Math.floor(256*Math.random());return s}var lu=function(){function o(){}return o.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/t.length)*t.length,l="";l.length<20;)for(var _=tc(40),C=0;C<_.length;++C)l.length<20&&_[C]<s&&(l+=t.charAt(_[C]%t.length));return l},o}();function kr(o,t){return o<t?-1:o>t?1:0}function Za(o,t,s){return o.length===t.length&&o.every(function(l,_){return s(l,t[_])})}function qa(o){return o+"\0"}var U=function(){function o(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new Lt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Lt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<-62135596800)throw new Lt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Lt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return o.now=function(){return o.fromMillis(Date.now())},o.fromDate=function(t){return o.fromMillis(t.getTime())},o.fromMillis=function(t){var s=Math.floor(t/1e3);return new o(s,Math.floor(1e6*(t-1e3*s)))},o.prototype.toDate=function(){return new Date(this.toMillis())},o.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},o.prototype._compareTo=function(t){return this.seconds===t.seconds?kr(this.nanoseconds,t.nanoseconds):kr(this.seconds,t.seconds)},o.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},o.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},o.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},o.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},o}(),x=function(){function o(t){this.timestamp=t}return o.fromTimestamp=function(t){return new o(t)},o.min=function(){return new o(new U(0,0))},o.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},o.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},o.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},o.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},o.prototype.toTimestamp=function(){return this.timestamp},o}();function I(o){var t=0;for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&t++;return t}function q(o,t){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&t(s,o[s])}function X(o){for(var t in o)if(Object.prototype.hasOwnProperty.call(o,t))return!1;return!0}var ce=function(){function o(t,s,l){void 0===s?s=0:s>t.length&&Ln(),void 0===l?l=t.length-s:l>t.length-s&&Ln(),this.segments=t,this.offset=s,this.len=l}return Object.defineProperty(o.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return 0===o.comparator(this,t)},o.prototype.child=function(t){var s=this.segments.slice(this.offset,this.limit());return t instanceof o?t.forEach(function(l){s.push(l)}):s.push(t),this.construct(s)},o.prototype.limit=function(){return this.offset+this.length},o.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},o.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},o.prototype.firstSegment=function(){return this.segments[this.offset]},o.prototype.lastSegment=function(){return this.get(this.length-1)},o.prototype.get=function(t){return this.segments[this.offset+t]},o.prototype.isEmpty=function(){return 0===this.length},o.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0},o.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0},o.prototype.forEach=function(t){for(var s=this.offset,l=this.limit();s<l;s++)t(this.segments[s])},o.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},o.comparator=function(t,s){for(var l=Math.min(t.length,s.length),_=0;_<l;_++){var C=t.get(_),D=s.get(_);if(C<D)return-1;if(C>D)return 1}return t.length<s.length?-1:t.length>s.length?1:0},o}(),Te=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ee.ZT)(t,o),t.prototype.construct=function(s,l,_){return new t(s,l,_)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];for(var _=[],C=0,D=s;C<D.length;C++){var R=D[C];if(R.indexOf("//")>=0)throw new Lt(mt.INVALID_ARGUMENT,"Invalid segment ("+R+"). Paths must not contain // in them.");_.push.apply(_,R.split("/").filter(function(W){return W.length>0}))}return new t(_)},t.emptyPath=function(){return new t([])},t}(ce),je=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bt=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ee.ZT)(t,o),t.prototype.construct=function(s,l,_){return new t(s,l,_)},t.isValidIdentifier=function(s){return je.test(s)},t.prototype.canonicalString=function(){return this.toArray().map(function(s){return s=s.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(s)||(s="`"+s+"`"),s}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(s){for(var l=[],_="",C=0,D=function(){if(0===_.length)throw new Lt(mt.INVALID_ARGUMENT,"Invalid field path ("+s+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");l.push(_),_=""},R=!1;C<s.length;){var W=s[C];if("\\"===W){if(C+1===s.length)throw new Lt(mt.INVALID_ARGUMENT,"Path has trailing escape character: "+s);var ae=s[C+1];if("\\"!==ae&&"."!==ae&&"`"!==ae)throw new Lt(mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+s);_+=ae,C+=2}else"`"===W?(R=!R,C++):"."!==W||R?(_+=W,C++):(D(),C++)}if(D(),R)throw new Lt(mt.INVALID_ARGUMENT,"Unterminated ` in path: "+s);return new t(l)},t.emptyPath=function(){return new t([])},t}(ce),dn=function(){function o(t){this.fields=t,t.sort(bt.comparator)}return o.prototype.covers=function(t){for(var s=0,l=this.fields;s<l.length;s++)if(l[s].isPrefixOf(t))return!0;return!1},o.prototype.isEqual=function(t){return Za(this.fields,t.fields,function(s,l){return s.isEqual(l)})},o}(),ar=function(){function o(t){this.binaryString=t}return o.fromBase64String=function(t){return new o(atob(t))},o.fromUint8Array=function(t){return new o(function(s){for(var l="",_=0;_<s.length;++_)l+=String.fromCharCode(s[_]);return l}(t))},o.prototype.toBase64=function(){return btoa(this.binaryString)},o.prototype.toUint8Array=function(){return function(t){for(var s=new Uint8Array(t.length),l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s}(this.binaryString)},o.prototype.approximateByteSize=function(){return 2*this.binaryString.length},o.prototype.compareTo=function(t){return kr(this.binaryString,t.binaryString)},o.prototype.isEqual=function(t){return this.binaryString===t.binaryString},o}();ar.EMPTY_BYTE_STRING=new ar("");var qn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(o){if(Xn(!!o),"string"==typeof o){var t=0,s=qn.exec(o);if(Xn(!!s),s[1]){var l=s[1];l=(l+"000000000").substr(0,9),t=Number(l)}var _=new Date(o);return{seconds:Math.floor(_.getTime()/1e3),nanos:t}}return{seconds:Hn(o.seconds),nanos:Hn(o.nanos)}}function Hn(o){return"number"==typeof o?o:"string"==typeof o?Number(o):0}function po(o){return"string"==typeof o?ar.fromBase64String(o):ar.fromUint8Array(o)}function Vo(o){var t,s;return"server_timestamp"===(null===(s=((null===(t=null==o?void 0:o.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===s?void 0:s.stringValue)}function go(o){var t=o.mapValue.fields.__previous_value__;return Vo(t)?go(t):t}function Bs(o){var t=xr(o.mapValue.fields.__local_write_time__.timestampValue);return new U(t.seconds,t.nanos)}function Wo(o){return null==o}function Yo(o){return 0===o&&1/o==-1/0}function cu(o){return"number"==typeof o&&Number.isInteger(o)&&!Yo(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER}var Wn=function(){function o(t){this.path=t}return o.fromPath=function(t){return new o(Te.fromString(t))},o.fromName=function(t){return new o(Te.fromString(t).popFirst(5))},o.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},o.prototype.isEqual=function(t){return null!==t&&0===Te.comparator(this.path,t.path)},o.prototype.toString=function(){return this.path.toString()},o.comparator=function(t,s){return Te.comparator(t.path,s.path)},o.isDocumentKey=function(t){return t.length%2==0},o.fromSegments=function(t){return new o(new Te(t.slice()))},o}();function Ii(o){return"nullValue"in o?0:"booleanValue"in o?1:"integerValue"in o||"doubleValue"in o?2:"timestampValue"in o?3:"stringValue"in o?5:"bytesValue"in o?6:"referenceValue"in o?7:"geoPointValue"in o?8:"arrayValue"in o?9:"mapValue"in o?Vo(o)?4:10:Ln()}function ra(o,t){var _,s=Ii(o);if(s!==Ii(t))return!1;switch(s){case 0:return!0;case 1:return o.booleanValue===t.booleanValue;case 4:return Bs(o).isEqual(Bs(t));case 3:return function(l,_){if("string"==typeof l.timestampValue&&"string"==typeof _.timestampValue&&l.timestampValue.length===_.timestampValue.length)return l.timestampValue===_.timestampValue;var C=xr(l.timestampValue),D=xr(_.timestampValue);return C.seconds===D.seconds&&C.nanos===D.nanos}(o,t);case 5:return o.stringValue===t.stringValue;case 6:return _=t,po(o.bytesValue).isEqual(po(_.bytesValue));case 7:return o.referenceValue===t.referenceValue;case 8:return function(l,_){return Hn(l.geoPointValue.latitude)===Hn(_.geoPointValue.latitude)&&Hn(l.geoPointValue.longitude)===Hn(_.geoPointValue.longitude)}(o,t);case 2:return function(l,_){if("integerValue"in l&&"integerValue"in _)return Hn(l.integerValue)===Hn(_.integerValue);if("doubleValue"in l&&"doubleValue"in _){var C=Hn(l.doubleValue),D=Hn(_.doubleValue);return C===D?Yo(C)===Yo(D):isNaN(C)&&isNaN(D)}return!1}(o,t);case 9:return Za(o.arrayValue.values||[],t.arrayValue.values||[],ra);case 10:return function(l,_){var C=l.mapValue.fields||{},D=_.mapValue.fields||{};if(I(C)!==I(D))return!1;for(var R in C)if(C.hasOwnProperty(R)&&(void 0===D[R]||!ra(C[R],D[R])))return!1;return!0}(o,t);default:return Ln()}}function du(o,t){return void 0!==(o.values||[]).find(function(s){return ra(s,t)})}function za(o,t){var _,C,D,R,s=Ii(o),l=Ii(t);if(s!==l)return kr(s,l);switch(s){case 0:return 0;case 1:return kr(o.booleanValue,t.booleanValue);case 2:return C=t,(D=Hn((_=o).integerValue||_.doubleValue))<(R=Hn(C.integerValue||C.doubleValue))?-1:D>R?1:D===R?0:isNaN(D)?isNaN(R)?0:-1:1;case 3:return dd(o.timestampValue,t.timestampValue);case 4:return dd(Bs(o),Bs(t));case 5:return kr(o.stringValue,t.stringValue);case 6:return function(_,C){var D=po(_),R=po(C);return D.compareTo(R)}(o.bytesValue,t.bytesValue);case 7:return function(_,C){for(var D=_.split("/"),R=C.split("/"),W=0;W<D.length&&W<R.length;W++){var ae=kr(D[W],R[W]);if(0!==ae)return ae}return kr(D.length,R.length)}(o.referenceValue,t.referenceValue);case 8:return function(_,C){var D=kr(Hn(_.latitude),Hn(C.latitude));return 0!==D?D:kr(Hn(_.longitude),Hn(C.longitude))}(o.geoPointValue,t.geoPointValue);case 9:return function(_,C){for(var D=_.values||[],R=C.values||[],W=0;W<D.length&&W<R.length;++W){var ae=za(D[W],R[W]);if(ae)return ae}return kr(D.length,R.length)}(o.arrayValue,t.arrayValue);case 10:return function(_,C){var D=_.fields||{},R=Object.keys(D),W=C.fields||{},ae=Object.keys(W);R.sort(),ae.sort();for(var de=0;de<R.length&&de<ae.length;++de){var Me=kr(R[de],ae[de]);if(0!==Me)return Me;var Le=za(D[R[de]],W[ae[de]]);if(0!==Le)return Le}return kr(R.length,ae.length)}(o.mapValue,t.mapValue);default:throw Ln()}}function dd(o,t){if("string"==typeof o&&"string"==typeof t&&o.length===t.length)return kr(o,t);var s=xr(o),l=xr(t),_=kr(s.seconds,l.seconds);return 0!==_?_:kr(s.nanos,l.nanos)}function Fc(o){return zu(o)}function zu(o){return"nullValue"in o?"null":"booleanValue"in o?""+o.booleanValue:"integerValue"in o?""+o.integerValue:"doubleValue"in o?""+o.doubleValue:"timestampValue"in o?"time("+(_=xr(o.timestampValue)).seconds+","+_.nanos+")":"stringValue"in o?o.stringValue:"bytesValue"in o?po(o.bytesValue).toBase64():"referenceValue"in o?Wn.fromName(o.referenceValue).toString():"geoPointValue"in o?"geo("+(t=o.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in o?function(l){for(var _="[",C=!0,D=0,R=l.values||[];D<R.length;D++)C?C=!1:_+=",",_+=zu(R[D]);return _+"]"}(o.arrayValue):"mapValue"in o?function(l){for(var _="{",C=!0,D=0,R=Object.keys(l.fields||{}).sort();D<R.length;D++){var W=R[D];C?C=!1:_+=",",_+=W+":"+zu(l.fields[W])}return _+"}"}(o.mapValue):Ln();var _,t}function nc(o,t){return{referenceValue:"projects/"+o.projectId+"/databases/"+o.database+"/documents/"+t.path.canonicalString()}}function Ea(o){return!!o&&"integerValue"in o}function hd(o){return!!o&&"arrayValue"in o}function $u(o){return!!o&&"nullValue"in o}function Ta(o){return!!o&&"doubleValue"in o&&isNaN(Number(o.doubleValue))}function js(o){return!!o&&"mapValue"in o}function hu(o){if(o.geoPointValue)return{geoPointValue:Object.assign({},o.geoPointValue)};if(o.timestampValue&&"object"==typeof o.timestampValue)return{timestampValue:Object.assign({},o.timestampValue)};if(o.mapValue){var t={mapValue:{fields:{}}};return q(o.mapValue.fields,function(_,C){return t.mapValue.fields[_]=hu(C)}),t}if(o.arrayValue){for(var s={arrayValue:{values:[]}},l=0;l<(o.arrayValue.values||[]).length;++l)s.arrayValue.values[l]=hu(o.arrayValue.values[l]);return s}return Object.assign({},o)}var mi=function(){function o(t){this.value=t}return o.empty=function(){return new o({mapValue:{}})},o.prototype.field=function(t){if(t.isEmpty())return this.value;for(var s=this.value,l=0;l<t.length-1;++l)if(!js(s=(s.mapValue.fields||{})[t.get(l)]))return null;return(s=(s.mapValue.fields||{})[t.lastSegment()])||null},o.prototype.set=function(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=hu(s)},o.prototype.setAll=function(t){var s=this,l=bt.emptyPath(),_={},C=[];t.forEach(function(R,W){if(!l.isImmediateParentOf(W)){var ae=s.getFieldsMap(l);s.applyChanges(ae,_,C),_={},C=[],l=W.popLast()}R?_[W.lastSegment()]=hu(R):C.push(W.lastSegment())});var D=this.getFieldsMap(l);this.applyChanges(D,_,C)},o.prototype.delete=function(t){var s=this.field(t.popLast());js(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]},o.prototype.isEqual=function(t){return ra(this.value,t.value)},o.prototype.getFieldsMap=function(t){var s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(var l=0;l<t.length;++l){var _=s.mapValue.fields[t.get(l)];js(_)&&_.mapValue.fields||(_={mapValue:{fields:{}}},s.mapValue.fields[t.get(l)]=_),s=_}return s.mapValue.fields},o.prototype.applyChanges=function(t,s,l){q(s,function(R,W){return t[R]=W});for(var _=0,C=l;_<C.length;_++)delete t[C[_]]},o.prototype.clone=function(){return new o(hu(this.value))},o}();function Hs(o){var t=[];return q(o.fields,function(s,l){var _=new bt([s]);if(js(l)){var C=Hs(l.mapValue).fields;if(0===C.length)t.push(_);else for(var D=0,R=C;D<R.length;D++)t.push(_.child(R[D]))}else t.push(_)}),new dn(t)}var Or=function(){function o(t,s,l,_,C){this.key=t,this.documentType=s,this.version=l,this.data=_,this.documentState=C}return o.newInvalidDocument=function(t){return new o(t,0,x.min(),mi.empty(),0)},o.newFoundDocument=function(t,s,l){return new o(t,1,s,l,0)},o.newNoDocument=function(t,s){return new o(t,2,s,mi.empty(),0)},o.newUnknownDocument=function(t,s){return new o(t,3,s,mi.empty(),2)},o.prototype.convertToFoundDocument=function(t,s){return this.version=t,this.documentType=1,this.data=s,this.documentState=0,this},o.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=mi.empty(),this.documentState=0,this},o.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=mi.empty(),this.documentState=2,this},o.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},o.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(o.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),o.prototype.isValidDocument=function(){return 0!==this.documentType},o.prototype.isFoundDocument=function(){return 1===this.documentType},o.prototype.isNoDocument=function(){return 2===this.documentType},o.prototype.isUnknownDocument=function(){return 3===this.documentType},o.prototype.isEqual=function(t){return t instanceof o&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},o.prototype.clone=function(){return new o(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},o.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},o}(),sh=function(o,t,s,l,_,C,D){void 0===t&&(t=null),void 0===s&&(s=[]),void 0===l&&(l=[]),void 0===_&&(_=null),void 0===C&&(C=null),void 0===D&&(D=null),this.path=o,this.collectionGroup=t,this.orderBy=s,this.filters=l,this.limit=_,this.startAt=C,this.endAt=D,this.h=null};function rc(o,t,s,l,_,C,D){return void 0===t&&(t=null),void 0===s&&(s=[]),void 0===l&&(l=[]),void 0===_&&(_=null),void 0===C&&(C=null),void 0===D&&(D=null),new sh(o,t,s,l,_,C,D)}function Ko(o){var t=sn(o);if(null===t.h){var s=t.path.canonicalString();null!==t.collectionGroup&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map(function(l){return(_=l).field.canonicalString()+_.op.toString()+Fc(_.value);var _}).join(","),s+="|ob:",s+=t.orderBy.map(function(l){return(_=l).field.canonicalString()+_.dir;var _}).join(","),Wo(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=ia(t.startAt)),t.endAt&&(s+="|ub:",s+=ia(t.endAt)),t.h=s}return t.h}function mo(o,t){if(o.limit!==t.limit||o.orderBy.length!==t.orderBy.length)return!1;for(var s=0;s<o.orderBy.length;s++)if(!Lc(o.orderBy[s],t.orderBy[s]))return!1;if(o.filters.length!==t.filters.length)return!1;for(var l=0;l<o.filters.length;l++)if((_=o.filters[l]).op!==(C=t.filters[l]).op||!_.field.isEqual(C.field)||!ra(_.value,C.value))return!1;var _,C;return o.collectionGroup===t.collectionGroup&&!!o.path.isEqual(t.path)&&!!ic(o.startAt,t.startAt)&&ic(o.endAt,t.endAt)}function Gs(o){return Wn.isDocumentKey(o.path)&&null===o.collectionGroup&&0===o.filters.length}var Do=function(o){function t(s,l,_){var C=this;return(C=o.call(this)||this).field=s,C.op=l,C.value=_,C}return(0,ee.ZT)(t,o),t.create=function(s,l,_){return s.isKeyField()?"in"===l||"not-in"===l?this.l(s,l,_):new $a(s,l,_):"array-contains"===l?new Lh(s,_):"in"===l?new ah(s,_):"not-in"===l?new Ml(s,_):"array-contains-any"===l?new bs(s,_):new t(s,l,_)},t.l=function(s,l,_){return"in"===l?new fd(s,_):new Nc(s,_)},t.prototype.matches=function(s){var l=s.data.field(this.field);return"!="===this.op?null!==l&&this.m(za(l,this.value)):null!==l&&Ii(this.value)===Ii(l)&&this.m(za(l,this.value))},t.prototype.m=function(s){switch(this.op){case"<":return s<0;case"<=":return s<=0;case"==":return 0===s;case"!=":return 0!==s;case">":return s>0;case">=":return s>=0;default:return Ln()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),$a=function(o){function t(s,l,_){var C=this;return(C=o.call(this,s,l,_)||this).key=Wn.fromName(_.referenceValue),C}return(0,ee.ZT)(t,o),t.prototype.matches=function(s){var l=Wn.comparator(s.key,this.key);return this.m(l)},t}(Do),fd=function(o){function t(s,l){var _=this;return(_=o.call(this,s,"in",l)||this).keys=pd(0,l),_}return(0,ee.ZT)(t,o),t.prototype.matches=function(s){return this.keys.some(function(l){return l.isEqual(s.key)})},t}(Do),Nc=function(o){function t(s,l){var _=this;return(_=o.call(this,s,"not-in",l)||this).keys=pd(0,l),_}return(0,ee.ZT)(t,o),t.prototype.matches=function(s){return!this.keys.some(function(l){return l.isEqual(s.key)})},t}(Do);function pd(o,t){var s;return((null===(s=t.arrayValue)||void 0===s?void 0:s.values)||[]).map(function(l){return Wn.fromName(l.referenceValue)})}var Lh=function(o){function t(s,l){return o.call(this,s,"array-contains",l)||this}return(0,ee.ZT)(t,o),t.prototype.matches=function(s){var l=s.data.field(this.field);return hd(l)&&du(l.arrayValue,this.value)},t}(Do),ah=function(o){function t(s,l){return o.call(this,s,"in",l)||this}return(0,ee.ZT)(t,o),t.prototype.matches=function(s){var l=s.data.field(this.field);return null!==l&&du(this.value.arrayValue,l)},t}(Do),Ml=function(o){function t(s,l){return o.call(this,s,"not-in",l)||this}return(0,ee.ZT)(t,o),t.prototype.matches=function(s){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var l=s.data.field(this.field);return null!==l&&!du(this.value.arrayValue,l)},t}(Do),bs=function(o){function t(s,l){return o.call(this,s,"array-contains-any",l)||this}return(0,ee.ZT)(t,o),t.prototype.matches=function(s){var l=this,_=s.data.field(this.field);return!(!hd(_)||!_.arrayValue.values)&&_.arrayValue.values.some(function(C){return du(l.value.arrayValue,C)})},t}(Do),xs=function(o,t){this.position=o,this.before=t};function ia(o){return(o.before?"b":"a")+":"+o.position.map(function(t){return Fc(t)}).join(",")}var Wu=function(o,t){void 0===t&&(t="asc"),this.field=o,this.dir=t};function Lc(o,t){return o.dir===t.dir&&o.field.isEqual(t.field)}function Yu(o,t,s){for(var l=0,_=0;_<o.position.length;_++){var C=t[_],D=o.position[_];if(l=C.field.isKeyField()?Wn.comparator(Wn.fromName(D.referenceValue),s.key):za(D,s.data.field(C.field)),"desc"===C.dir&&(l*=-1),0!==l)break}return o.before?l<=0:l<0}function ic(o,t){if(null===o)return null===t;if(null===t||o.before!==t.before||o.position.length!==t.position.length)return!1;for(var s=0;s<o.position.length;s++)if(!ra(o.position[s],t.position[s]))return!1;return!0}var Zs=function(o,t,s,l,_,C,D,R){void 0===t&&(t=null),void 0===s&&(s=[]),void 0===l&&(l=[]),void 0===_&&(_=null),void 0===C&&(C="F"),void 0===D&&(D=null),void 0===R&&(R=null),this.path=o,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=l,this.limit=_,this.limitType=C,this.startAt=D,this.endAt=R,this.p=null,this.T=null};function fu(o,t,s,l,_,C,D,R){return new Zs(o,t,s,l,_,C,D,R)}function pu(o){return new Zs(o)}function gu(o){return!Wo(o.limit)&&"F"===o.limitType}function Da(o){return!Wo(o.limit)&&"L"===o.limitType}function Ku(o){return o.explicitOrderBy.length>0?o.explicitOrderBy[0].field:null}function Uc(o){for(var t=0,s=o.filters;t<s.length;t++){var l=s[t];if(l.g())return l.field}return null}function Qu(o){return null!==o.collectionGroup}function Sa(o){var t=sn(o);if(null===t.p){t.p=[];var s=Uc(t),l=Ku(t);if(null!==s&&null===l)s.isKeyField()||t.p.push(new Wu(s)),t.p.push(new Wu(bt.keyField(),"asc"));else{for(var _=!1,C=0,D=t.explicitOrderBy;C<D.length;C++){var R=D[C];t.p.push(R),R.field.isKeyField()&&(_=!0)}if(!_){var W=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Wu(bt.keyField(),W))}}}return t.p}function Bo(o){var t=sn(o);if(!t.T)if("F"===t.limitType)t.T=rc(t.path,t.collectionGroup,Sa(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var s=[],l=0,_=Sa(t);l<_.length;l++){var C=_[l];s.push(new Wu(C.field,"desc"===C.dir?"asc":"desc"))}var R=t.endAt?new xs(t.endAt.position,!t.endAt.before):null,W=t.startAt?new xs(t.startAt.position,!t.startAt.before):null;t.T=rc(t.path,t.collectionGroup,s,t.filters,t.limit,R,W)}return t.T}function Vc(o,t,s){return new Zs(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),t,s,o.startAt,o.endAt)}function Il(o,t){return mo(Bo(o),Bo(t))&&o.limitType===t.limitType}function Bc(o){return Ko(Bo(o))+"|lt:"+o.limitType}function oc(o){return"Query(target="+(s=(t=Bo(o)).path.canonicalString(),null!==t.collectionGroup&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=", filters: ["+t.filters.map(function(l){return(_=l).field.canonicalString()+" "+_.op+" "+Fc(_.value);var _}).join(", ")+"]"),Wo(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=", orderBy: ["+t.orderBy.map(function(l){return(_=l).field.canonicalString()+" ("+_.dir+")";var _}).join(", ")+"]"),t.startAt&&(s+=", startAt: "+ia(t.startAt)),t.endAt&&(s+=", endAt: "+ia(t.endAt)),"Target("+s+"); limitType=")+o.limitType+")";var t,s}function Ju(o,t){return t.isFoundDocument()&&(_=(l=t).key.path,null!==(s=o).collectionGroup?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(_):Wn.isDocumentKey(s.path)?s.path.isEqual(_):s.path.isImmediateParentOf(_))&&function(s,l){for(var _=0,C=s.explicitOrderBy;_<C.length;_++){var D=C[_];if(!D.field.isKeyField()&&null===l.data.field(D.field))return!1}return!0}(o,t)&&function(s,l){for(var _=0,C=s.filters;_<C.length;_++)if(!C[_].matches(l))return!1;return!0}(o,t)&&function(s,l){return!(s.startAt&&!Yu(s.startAt,Sa(s),l)||s.endAt&&Yu(s.endAt,Sa(s),l))}(o,t);var s,l,_}function Xu(o){return function(t,s){for(var l=!1,_=0,C=Sa(o);_<C.length;_++){var D=C[_],R=Wa(D,t,s);if(0!==R)return R;l=l||D.field.isKeyField()}return 0}}function Wa(o,t,s){var _,D,R,W,l=o.field.isKeyField()?Wn.comparator(t.key,s.key):(D=s,R=t.data.field(_=o.field),W=D.data.field(_),null!==R&&null!==W?za(R,W):Ln());switch(o.dir){case"asc":return l;case"desc":return-1*l;default:return Ln()}}function Aa(o,t){if(o.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yo(t)?"-0":t}}function Ol(o){return{integerValue:""+o}}function bi(o,t){return cu(t)?Ol(t):Aa(o,t)}var mu=function(){this._=void 0};function sc(o,t,s){return o instanceof vu?(C={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(l=s).seconds,nanos:l.nanoseconds}}}},(_=t)&&(C.fields.__previous_value__=_),{mapValue:C}):o instanceof Ya?yu(o,t):o instanceof bu?Cu(o,t):function(l,_){var C=Ma(l,_),D=el(C)+el(l.A);return Ea(C)&&Ea(l.A)?Ol(D):Aa(l.R,D)}(o,t);var l,_,C}function _u(o,t,s){return o instanceof Ya?yu(o,t):o instanceof bu?Cu(o,t):s}function Ma(o,t){return o instanceof as?Ea(s=t)||(l=s)&&"doubleValue"in l?t:{integerValue:0}:null;var l,s}var vu=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ee.ZT)(t,o),t}(mu),Ya=function(o){function t(s){var l=this;return(l=o.call(this)||this).elements=s,l}return(0,ee.ZT)(t,o),t}(mu);function yu(o,t){for(var s=qs(t),l=function(D){s.some(function(R){return ra(R,D)})||s.push(D)},_=0,C=o.elements;_<C.length;_++)l(C[_]);return{arrayValue:{values:s}}}var bu=function(o){function t(s){var l=this;return(l=o.call(this)||this).elements=s,l}return(0,ee.ZT)(t,o),t}(mu);function Cu(o,t){for(var s=qs(t),l=function(D){s=s.filter(function(R){return!ra(R,D)})},_=0,C=o.elements;_<C.length;_++)l(C[_]);return{arrayValue:{values:s}}}var as=function(o){function t(s,l){var _=this;return(_=o.call(this)||this).R=s,_.A=l,_}return(0,ee.ZT)(t,o),t}(mu);function el(o){return Hn(o.integerValue||o.doubleValue)}function qs(o){return hd(o)&&o.arrayValue.values?o.arrayValue.values.slice():[]}var Ka=function(o,t){this.field=o,this.transform=t},jc=function(o,t){this.version=o,this.transformResults=t},So=function(){function o(t,s){this.updateTime=t,this.exists=s}return o.none=function(){return new o},o.exists=function(t){return new o(void 0,t)},o.updateTime=function(t){return new o(t)},Object.defineProperty(o.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},o}();function Ps(o,t){return void 0!==o.updateTime?t.isFoundDocument()&&t.version.isEqual(o.updateTime):void 0===o.exists||o.exists===t.isFoundDocument()}var ds=function(){};function xl(o,t,s){var l,_,C,D,R;o instanceof Qa?(_=t,C=s,D=(l=o).value.clone(),R=zs(l.fieldTransforms,_,C.transformResults),D.setAll(R),_.convertToFoundDocument(C.version,D).setHasCommittedMutations()):o instanceof Cs?function(l,_,C){if(Ps(l.precondition,_)){var D=zs(l.fieldTransforms,_,C.transformResults),R=_.data;R.setAll(md(l)),R.setAll(D),_.convertToFoundDocument(C.version,R).setHasCommittedMutations()}else _.convertToUnknownDocument(C.version)}(o,t,s):function(l,_,C){_.convertToNoDocument(C.version).setHasCommittedMutations()}(0,t,s)}function tl(o,t,s){var _;o instanceof Qa?function(l,_,C){if(Ps(l.precondition,_)){var D=l.value.clone(),R=Hc(l.fieldTransforms,C,_);D.setAll(R),_.convertToFoundDocument(gd(_),D).setHasLocalMutations()}}(o,t,s):o instanceof Cs?function(l,_,C){if(Ps(l.precondition,_)){var D=Hc(l.fieldTransforms,C,_),R=_.data;R.setAll(md(l)),R.setAll(D),_.convertToFoundDocument(gd(_),R).setHasLocalMutations()}}(o,t,s):Ps(o.precondition,_=t)&&_.convertToNoDocument(x.min())}function wu(o,t){for(var s=null,l=0,_=o.fieldTransforms;l<_.length;l++){var C=_[l],D=t.data.field(C.field),R=Ma(C.transform,D||null);null!=R&&(null==s&&(s=mi.empty()),s.set(C.field,R))}return s||null}function oa(o,t){return o.type===t.type&&!!o.key.isEqual(t.key)&&!!o.precondition.isEqual(t.precondition)&&(l=t.fieldTransforms,!!(void 0===(s=o.fieldTransforms)&&void 0===l||s&&l&&Za(s,l,function(_,C){return(D=_).field.isEqual((R=C).field)&&(ae=R.transform,(W=D.transform)instanceof Ya&&ae instanceof Ya||W instanceof bu&&ae instanceof bu?Za(W.elements,ae.elements,ra):W instanceof as&&ae instanceof as?ra(W.A,ae.A):W instanceof vu&&ae instanceof vu);var D,R,W,ae})))&&(0===o.type?o.value.isEqual(t.value):1!==o.type||o.data.isEqual(t.data)&&o.fieldMask.isEqual(t.fieldMask));var s,l}function gd(o){return o.isFoundDocument()?o.version:x.min()}var Qa=function(o){function t(s,l,_,C){void 0===C&&(C=[]);var D=this;return(D=o.call(this)||this).key=s,D.value=l,D.precondition=_,D.fieldTransforms=C,D.type=0,D}return(0,ee.ZT)(t,o),t}(ds),Cs=function(o){function t(s,l,_,C,D){void 0===D&&(D=[]);var R=this;return(R=o.call(this)||this).key=s,R.data=l,R.fieldMask=_,R.precondition=C,R.fieldTransforms=D,R.type=1,R}return(0,ee.ZT)(t,o),t}(ds);function md(o){var t=new Map;return o.fieldMask.fields.forEach(function(s){if(!s.isEmpty()){var l=o.data.field(s);t.set(s,l)}}),t}function zs(o,t,s){var l=new Map;Xn(o.length===s.length);for(var _=0;_<s.length;_++){var C=o[_],D=C.transform,R=t.data.field(C.field);l.set(C.field,_u(D,R,s[_]))}return l}function Hc(o,t,s){for(var l=new Map,_=0,C=o;_<C.length;_++){var D=C[_],R=D.transform,W=s.data.field(D.field);l.set(D.field,sc(R,W,t))}return l}var _o,ti,sa=function(o){function t(s,l){var _=this;return(_=o.call(this)||this).key=s,_.precondition=l,_.type=2,_.fieldTransforms=[],_}return(0,ee.ZT)(t,o),t}(ds),Ja=function(o){function t(s,l){var _=this;return(_=o.call(this)||this).key=s,_.precondition=l,_.type=3,_.fieldTransforms=[],_}return(0,ee.ZT)(t,o),t}(ds),jo=function(o){this.count=o};function Gc(o){switch(o){case mt.OK:return Ln();case mt.CANCELLED:case mt.UNKNOWN:case mt.DEADLINE_EXCEEDED:case mt.RESOURCE_EXHAUSTED:case mt.INTERNAL:case mt.UNAVAILABLE:case mt.UNAUTHENTICATED:return!1;case mt.INVALID_ARGUMENT:case mt.NOT_FOUND:case mt.ALREADY_EXISTS:case mt.PERMISSION_DENIED:case mt.FAILED_PRECONDITION:case mt.ABORTED:case mt.OUT_OF_RANGE:case mt.UNIMPLEMENTED:case mt.DATA_LOSS:return!0;default:return Ln()}}function Zc(o){if(void 0===o)return Pi("GRPC error has no .code"),mt.UNKNOWN;switch(o){case _o.OK:return mt.OK;case _o.CANCELLED:return mt.CANCELLED;case _o.UNKNOWN:return mt.UNKNOWN;case _o.DEADLINE_EXCEEDED:return mt.DEADLINE_EXCEEDED;case _o.RESOURCE_EXHAUSTED:return mt.RESOURCE_EXHAUSTED;case _o.INTERNAL:return mt.INTERNAL;case _o.UNAVAILABLE:return mt.UNAVAILABLE;case _o.UNAUTHENTICATED:return mt.UNAUTHENTICATED;case _o.INVALID_ARGUMENT:return mt.INVALID_ARGUMENT;case _o.NOT_FOUND:return mt.NOT_FOUND;case _o.ALREADY_EXISTS:return mt.ALREADY_EXISTS;case _o.PERMISSION_DENIED:return mt.PERMISSION_DENIED;case _o.FAILED_PRECONDITION:return mt.FAILED_PRECONDITION;case _o.ABORTED:return mt.ABORTED;case _o.OUT_OF_RANGE:return mt.OUT_OF_RANGE;case _o.UNIMPLEMENTED:return mt.UNIMPLEMENTED;case _o.DATA_LOSS:return mt.DATA_LOSS;default:return Ln()}}(ti=_o||(_o={}))[ti.OK=0]="OK",ti[ti.CANCELLED=1]="CANCELLED",ti[ti.UNKNOWN=2]="UNKNOWN",ti[ti.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ti[ti.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ti[ti.NOT_FOUND=5]="NOT_FOUND",ti[ti.ALREADY_EXISTS=6]="ALREADY_EXISTS",ti[ti.PERMISSION_DENIED=7]="PERMISSION_DENIED",ti[ti.UNAUTHENTICATED=16]="UNAUTHENTICATED",ti[ti.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ti[ti.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ti[ti.ABORTED=10]="ABORTED",ti[ti.OUT_OF_RANGE=11]="OUT_OF_RANGE",ti[ti.UNIMPLEMENTED=12]="UNIMPLEMENTED",ti[ti.INTERNAL=13]="INTERNAL",ti[ti.UNAVAILABLE=14]="UNAVAILABLE",ti[ti.DATA_LOSS=15]="DATA_LOSS";var Qo=function(){function o(t,s){this.comparator=t,this.root=s||Ia.EMPTY}return o.prototype.insert=function(t,s){return new o(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,Ia.BLACK,null,null))},o.prototype.remove=function(t){return new o(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ia.BLACK,null,null))},o.prototype.get=function(t){for(var s=this.root;!s.isEmpty();){var l=this.comparator(t,s.key);if(0===l)return s.value;l<0?s=s.left:l>0&&(s=s.right)}return null},o.prototype.indexOf=function(t){for(var s=0,l=this.root;!l.isEmpty();){var _=this.comparator(t,l.key);if(0===_)return s+l.left.size;_<0?l=l.left:(s+=l.left.size+1,l=l.right)}return-1},o.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(o.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),o.prototype.minKey=function(){return this.root.minKey()},o.prototype.maxKey=function(){return this.root.maxKey()},o.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},o.prototype.forEach=function(t){this.inorderTraversal(function(s,l){return t(s,l),!1})},o.prototype.toString=function(){var t=[];return this.inorderTraversal(function(s,l){return t.push(s+":"+l),!1}),"{"+t.join(", ")+"}"},o.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},o.prototype.getIterator=function(){return new Eu(this.root,null,this.comparator,!1)},o.prototype.getIteratorFrom=function(t){return new Eu(this.root,t,this.comparator,!1)},o.prototype.getReverseIterator=function(){return new Eu(this.root,null,this.comparator,!0)},o.prototype.getReverseIteratorFrom=function(t){return new Eu(this.root,t,this.comparator,!0)},o}(),Eu=function(){function o(t,s,l,_){this.isReverse=_,this.nodeStack=[];for(var C=1;!t.isEmpty();)if(C=s?l(t.key,s):1,_&&(C*=-1),C<0)t=this.isReverse?t.left:t.right;else{if(0===C){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return o.prototype.getNext=function(){var t=this.nodeStack.pop(),s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s},o.prototype.hasNext=function(){return this.nodeStack.length>0},o.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},o}(),Ia=function(){function o(t,s,l,_,C){this.key=t,this.value=s,this.color=null!=l?l:o.RED,this.left=null!=_?_:o.EMPTY,this.right=null!=C?C:o.EMPTY,this.size=this.left.size+1+this.right.size}return o.prototype.copy=function(t,s,l,_,C){return new o(null!=t?t:this.key,null!=s?s:this.value,null!=l?l:this.color,null!=_?_:this.left,null!=C?C:this.right)},o.prototype.isEmpty=function(){return!1},o.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},o.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},o.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},o.prototype.minKey=function(){return this.min().key},o.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},o.prototype.insert=function(t,s,l){var _=this,C=l(t,_.key);return(_=C<0?_.copy(null,null,null,_.left.insert(t,s,l),null):0===C?_.copy(null,s,null,null,null):_.copy(null,null,null,null,_.right.insert(t,s,l))).fixUp()},o.prototype.removeMin=function(){if(this.left.isEmpty())return o.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},o.prototype.remove=function(t,s){var l,_=this;if(s(t,_.key)<0)_.left.isEmpty()||_.left.isRed()||_.left.left.isRed()||(_=_.moveRedLeft()),_=_.copy(null,null,null,_.left.remove(t,s),null);else{if(_.left.isRed()&&(_=_.rotateRight()),_.right.isEmpty()||_.right.isRed()||_.right.left.isRed()||(_=_.moveRedRight()),0===s(t,_.key)){if(_.right.isEmpty())return o.EMPTY;l=_.right.min(),_=_.copy(l.key,l.value,null,null,_.right.removeMin())}_=_.copy(null,null,null,null,_.right.remove(t,s))}return _.fixUp()},o.prototype.isRed=function(){return this.color},o.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},o.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},o.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},o.prototype.rotateLeft=function(){var t=this.copy(null,null,o.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},o.prototype.rotateRight=function(){var t=this.copy(null,null,o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},o.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)},o.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},o.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ln();var t=this.left.check();if(t!==this.right.check())throw Ln();return t+(this.isRed()?0:1)},o}();Ia.EMPTY=null,Ia.RED=!0,Ia.BLACK=!1,Ia.EMPTY=new(function(){function o(){this.size=0}return Object.defineProperty(o.prototype,"key",{get:function(){throw Ln()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"value",{get:function(){throw Ln()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"color",{get:function(){throw Ln()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"left",{get:function(){throw Ln()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"right",{get:function(){throw Ln()},enumerable:!1,configurable:!0}),o.prototype.copy=function(t,s,l,_,C){return this},o.prototype.insert=function(t,s,l){return new Ia(t,s)},o.prototype.remove=function(t,s){return this},o.prototype.isEmpty=function(){return!0},o.prototype.inorderTraversal=function(t){return!1},o.prototype.reverseTraversal=function(t){return!1},o.prototype.minKey=function(){return null},o.prototype.maxKey=function(){return null},o.prototype.isRed=function(){return!1},o.prototype.checkMaxDepth=function(){return!0},o.prototype.check=function(){return 0},o}());var vo=function(){function o(t){this.comparator=t,this.data=new Qo(this.comparator)}return o.prototype.has=function(t){return null!==this.data.get(t)},o.prototype.first=function(){return this.data.minKey()},o.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(o.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),o.prototype.indexOf=function(t){return this.data.indexOf(t)},o.prototype.forEach=function(t){this.data.inorderTraversal(function(s,l){return t(s),!1})},o.prototype.forEachInRange=function(t,s){for(var l=this.data.getIteratorFrom(t[0]);l.hasNext();){var _=l.getNext();if(this.comparator(_.key,t[1])>=0)return;s(_.key)}},o.prototype.forEachWhile=function(t,s){var l;for(l=void 0!==s?this.data.getIteratorFrom(s):this.data.getIterator();l.hasNext();)if(!t(l.getNext().key))return},o.prototype.firstAfterOrEqual=function(t){var s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null},o.prototype.getIterator=function(){return new Tu(this.data.getIterator())},o.prototype.getIteratorFrom=function(t){return new Tu(this.data.getIteratorFrom(t))},o.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},o.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},o.prototype.isEmpty=function(){return this.data.isEmpty()},o.prototype.unionWith=function(t){var s=this;return s.size<t.size&&(s=t,t=this),t.forEach(function(l){s=s.add(l)}),s},o.prototype.isEqual=function(t){if(!(t instanceof o)||this.size!==t.size)return!1;for(var s=this.data.getIterator(),l=t.data.getIterator();s.hasNext();){var _=s.getNext().key,C=l.getNext().key;if(0!==this.comparator(_,C))return!1}return!0},o.prototype.toArray=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},o.prototype.toString=function(){var t=[];return this.forEach(function(s){return t.push(s)}),"SortedSet("+t.toString()+")"},o.prototype.copy=function(t){var s=new o(this.comparator);return s.data=t,s},o}(),Tu=function(){function o(t){this.iter=t}return o.prototype.getNext=function(){return this.iter.getNext().key},o.prototype.hasNext=function(){return this.iter.hasNext()},o}(),Du=new Qo(Wn.comparator);function Ao(){return Du}var nl=new Qo(Wn.comparator);function ac(){return nl}var uh=new Qo(Wn.comparator);function uc(){return uh}var Pl=new vo(Wn.comparator);function $r(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];for(var s=Pl,l=0,_=o;l<_.length;l++){var C=_[l];s=s.add(C)}return s}var aa=new vo(kr);function rl(){return aa}var _d=function(){function o(t,s,l,_,C){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=l,this.documentUpdates=_,this.resolvedLimboDocuments=C}return o.createSynthesizedRemoteEventForCurrentChange=function(t,s){var l=new Map;return l.set(t,vd.createSynthesizedTargetChangeForCurrentChange(t,s)),new o(x.min(),l,rl(),Ao(),$r())},o}(),vd=function(){function o(t,s,l,_,C){this.resumeToken=t,this.current=s,this.addedDocuments=l,this.modifiedDocuments=_,this.removedDocuments=C}return o.createSynthesizedTargetChangeForCurrentChange=function(t,s){return new o(ar.EMPTY_BYTE_STRING,s,$r(),$r(),$r())},o}(),lc=function(o,t,s,l){this.v=o,this.removedTargetIds=t,this.key=s,this.P=l},lh=function(o,t){this.targetId=o,this.V=t},ch=function(o,t,s,l){void 0===s&&(s=ar.EMPTY_BYTE_STRING),void 0===l&&(l=null),this.state=o,this.targetIds=t,this.resumeToken=s,this.cause=l},yd=function(){function o(){this.S=0,this.D=cc(),this.C=ar.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(o.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),o.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},o.prototype.M=function(){var t=$r(),s=$r(),l=$r();return this.D.forEach(function(_,C){switch(C){case 0:t=t.add(_);break;case 2:s=s.add(_);break;case 1:l=l.add(_);break;default:Ln()}}),new vd(this.C,this.N,t,s,l)},o.prototype.L=function(){this.k=!1,this.D=cc()},o.prototype.B=function(t,s){this.k=!0,this.D=this.D.insert(t,s)},o.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},o.prototype.U=function(){this.S+=1},o.prototype.K=function(){this.S-=1},o.prototype.j=function(){this.k=!0,this.N=!0},o}(),Rl=function(){function o(t){this.W=t,this.G=new Map,this.H=Ao(),this.J=qc(),this.Y=new vo(kr)}return o.prototype.X=function(t){for(var s=0,l=t.v;s<l.length;s++){var _=l[s];t.P&&t.P.isFoundDocument()?this.Z(_,t.P):this.tt(_,t.key,t.P)}for(var C=0,D=t.removedTargetIds;C<D.length;C++)this.tt(_=D[C],t.key,t.P)},o.prototype.et=function(t){var s=this;this.forEachTarget(t,function(l){var _=s.nt(l);switch(t.state){case 0:s.st(l)&&_.O(t.resumeToken);break;case 1:_.K(),_.F||_.L(),_.O(t.resumeToken);break;case 2:_.K(),_.F||s.removeTarget(l);break;case 3:s.st(l)&&(_.j(),_.O(t.resumeToken));break;case 4:s.st(l)&&(s.it(l),_.O(t.resumeToken));break;default:Ln()}})},o.prototype.forEachTarget=function(t,s){var l=this;t.targetIds.length>0?t.targetIds.forEach(s):this.G.forEach(function(_,C){l.st(C)&&s(C)})},o.prototype.rt=function(t){var s=t.targetId,l=t.V.count,_=this.ot(s);if(_){var C=_.target;if(Gs(C))if(0===l){var D=new Wn(C.path);this.tt(s,D,Or.newNoDocument(D,x.min()))}else Xn(1===l);else this.ct(s)!==l&&(this.it(s),this.Y=this.Y.add(s))}},o.prototype.ut=function(t){var s=this,l=new Map;this.G.forEach(function(D,R){var W=s.ot(R);if(W){if(D.current&&Gs(W.target)){var ae=new Wn(W.target.path);null!==s.H.get(ae)||s.at(R,ae)||s.tt(R,ae,Or.newNoDocument(ae,t))}D.$&&(l.set(R,D.M()),D.L())}});var _=$r();this.J.forEach(function(D,R){var W=!0;R.forEachWhile(function(ae){var de=s.ot(ae);return!de||2===de.purpose||(W=!1,!1)}),W&&(_=_.add(D))});var C=new _d(t,l,this.Y,this.H,_);return this.H=Ao(),this.J=qc(),this.Y=new vo(kr),C},o.prototype.Z=function(t,s){if(this.st(t)){var l=this.at(t,s.key)?2:0;this.nt(t).B(s.key,l),this.H=this.H.insert(s.key,s),this.J=this.J.insert(s.key,this.ht(s.key).add(t))}},o.prototype.tt=function(t,s,l){if(this.st(t)){var _=this.nt(t);this.at(t,s)?_.B(s,1):_.q(s),this.J=this.J.insert(s,this.ht(s).delete(t)),l&&(this.H=this.H.insert(s,l))}},o.prototype.removeTarget=function(t){this.G.delete(t)},o.prototype.ct=function(t){var s=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size},o.prototype.U=function(t){this.nt(t).U()},o.prototype.nt=function(t){var s=this.G.get(t);return s||(s=new yd,this.G.set(t,s)),s},o.prototype.ht=function(t){var s=this.J.get(t);return s||(s=new vo(kr),this.J=this.J.insert(t,s)),s},o.prototype.st=function(t){var s=null!==this.ot(t);return s||rn("WatchChangeAggregator","Detected inactive target",t),s},o.prototype.ot=function(t){var s=this.G.get(t);return s&&s.F?null:this.W.lt(t)},o.prototype.it=function(t){var s=this;this.G.set(t,new yd),this.W.getRemoteKeysForTarget(t).forEach(function(l){s.tt(t,l,null)})},o.prototype.at=function(t,s){return this.W.getRemoteKeysForTarget(t).has(s)},o}();function qc(){return new Qo(Wn.comparator)}function cc(){return new Qo(Wn.comparator)}var dh={asc:"ASCENDING",desc:"DESCENDING"},hh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kl=function(o,t){this.databaseId=o,this.I=t};function Jo(o,t){return o.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function bd(o,t){return o.I?t.toBase64():t.toUint8Array()}function ws(o,t){return Jo(o,t.toTimestamp())}function zi(o){return Xn(!!o),x.fromTimestamp((s=xr(o),new U(s.seconds,s.nanos)));var s}function Fl(o,t){return(s=o,new Te(["projects",s.projectId,"databases",s.database])).child("documents").child(t).canonicalString();var s}function Su(o){var t=Te.fromString(o);return Xn($s(t)),t}function il(o,t){return Fl(o.databaseId,t.path)}function Oa(o,t){var s=Su(t);if(s.get(1)!==o.databaseId.projectId)throw new Lt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+o.databaseId.projectId);if(s.get(3)!==o.databaseId.database)throw new Lt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+o.databaseId.database);return new Wn(Au(s))}function zc(o,t){return Fl(o.databaseId,t)}function Cd(o){var t=Su(o);return 4===t.length?Te.emptyPath():Au(t)}function ua(o){return new Te(["projects",o.databaseId.projectId,"databases",o.databaseId.database]).canonicalString()}function Au(o){return Xn(o.length>4&&"documents"===o.get(4)),o.popFirst(5)}function ol(o,t,s){return{name:il(o,t),fields:s.value.mapValue.fields}}function Uh(o,t,s){var l=Oa(o,t.name),_=zi(t.updateTime),C=new mi({mapValue:{fields:t.fields}}),D=Or.newFoundDocument(l,_,C);return s&&D.setHasCommittedMutations(),s?D.setHasCommittedMutations():D}function $c(o,t){var s,_;if(t instanceof Qa)s={update:ol(o,t.key,t.value)};else if(t instanceof sa)s={delete:il(o,t.key)};else if(t instanceof Cs)s={update:ol(o,t.key,t.data),updateMask:gc(t.fieldMask)};else{if(!(t instanceof Ja))return Ln();s={verify:il(o,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map(function(l){return function(_,C){var D=C.transform;if(D instanceof vu)return{fieldPath:C.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(D instanceof Ya)return{fieldPath:C.field.canonicalString(),appendMissingElements:{values:D.elements}};if(D instanceof bu)return{fieldPath:C.field.canonicalString(),removeAllFromArray:{values:D.elements}};if(D instanceof as)return{fieldPath:C.field.canonicalString(),increment:D.A};throw Ln()}(0,l)})),t.precondition.isNone||(s.currentDocument=void 0!==(_=t.precondition).updateTime?{updateTime:ws(o,_.updateTime)}:void 0!==_.exists?{exists:_.exists}:Ln()),s}function sl(o,t){var ae,s=t.currentDocument?void 0!==(ae=t.currentDocument).updateTime?So.updateTime(zi(ae.updateTime)):void 0!==ae.exists?So.exists(ae.exists):So.none():So.none(),l=t.updateTransforms?t.updateTransforms.map(function(ae){return function(de,Me){var Le=null;"setToServerValue"in Me?(Xn("REQUEST_TIME"===Me.setToServerValue),Le=new vu):"appendMissingElements"in Me?Le=new Ya(Me.appendMissingElements.values||[]):"removeAllFromArray"in Me?Le=new bu(Me.removeAllFromArray.values||[]):"increment"in Me?Le=new as(de,Me.increment):Ln();var wt=bt.fromServerFormat(Me.fieldPath);return new Ka(wt,Le)}(o,ae)}):[];if(t.update){var _=Oa(o,t.update.name),C=new mi({mapValue:{fields:t.update.fields}});if(t.updateMask){var D=function(ae){return new dn((ae.fieldPaths||[]).map(function(Me){return bt.fromServerFormat(Me)}))}(t.updateMask);return new Cs(_,C,D,s,l)}return new Qa(_,C,s,l)}if(t.delete){var R=Oa(o,t.delete);return new sa(R,s)}if(t.verify){var W=Oa(o,t.verify);return new Ja(W,s)}return Ln()}function dc(o,t){return{documents:[zc(o,t.path)]}}function hc(o,t){var s={structuredQuery:{}},l=t.path;null!==t.collectionGroup?(s.parent=zc(o,l),s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s.parent=zc(o,l.popLast()),s.structuredQuery.from=[{collectionId:l.lastSegment()}]);var _=function(R){if(0!==R.length){var W=R.map(function(ae){return function(de){if("=="===de.op){if(Ta(de.value))return{unaryFilter:{field:Xa(de.field),op:"IS_NAN"}};if($u(de.value))return{unaryFilter:{field:Xa(de.field),op:"IS_NULL"}}}else if("!="===de.op){if(Ta(de.value))return{unaryFilter:{field:Xa(de.field),op:"IS_NOT_NAN"}};if($u(de.value))return{unaryFilter:{field:Xa(de.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(de.field),op:la(de.op),value:de.value}}}(ae)});return 1===W.length?W[0]:{compositeFilter:{op:"AND",filters:W}}}}(t.filters);_&&(s.structuredQuery.where=_);var C=function(R){if(0!==R.length)return R.map(function(W){return{field:Xa((ae=W).field),direction:pc(ae.dir)};var ae})}(t.orderBy);C&&(s.structuredQuery.orderBy=C);var W,D=(W=t.limit,o.I||Wo(W)?W:{value:W});return null!==D&&(s.structuredQuery.limit=D),t.startAt&&(s.structuredQuery.startAt=fc(t.startAt)),t.endAt&&(s.structuredQuery.endAt=fc(t.endAt)),s}function Wc(o){var t=Cd(o.parent),s=o.structuredQuery,l=s.from?s.from.length:0,_=null;if(l>0){Xn(1===l);var C=s.from[0];C.allDescendants?_=C.collectionId:t=t.child(C.collectionId)}var D=[];s.where&&(D=Yc(s.where));var R=[];s.orderBy&&(R=s.orderBy.map(function(Me){return new Wu(Kr((Le=Me).field),function(ct){switch(ct){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Le.direction));var Le}));var Me,Le,W=null;s.limit&&(W=Wo(Le="object"==typeof(Me=s.limit)?Me.value:Me)?null:Le);var ae=null;s.startAt&&(ae=Xo(s.startAt));var de=null;return s.endAt&&(de=Xo(s.endAt)),fu(t,_,R,D,W,"F",ae,de)}function Yc(o){return o?void 0!==o.unaryFilter?[wd(o)]:void 0!==o.fieldFilter?[Nl(o)]:void 0!==o.compositeFilter?o.compositeFilter.filters.map(function(t){return Yc(t)}).reduce(function(t,s){return t.concat(s)}):Ln():[]}function fc(o){return{before:o.before,values:o.position}}function Xo(o){return new xs(o.values||[],!!o.before)}function pc(o){return dh[o]}function la(o){return hh[o]}function Xa(o){return{fieldPath:o.canonicalString()}}function Kr(o){return bt.fromServerFormat(o.fieldPath)}function Nl(o){return Do.create(Kr(o.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ln()}}(o.fieldFilter.op),o.fieldFilter.value)}function wd(o){switch(o.unaryFilter.op){case"IS_NAN":var t=Kr(o.unaryFilter.field);return Do.create(t,"==",{doubleValue:NaN});case"IS_NULL":var s=Kr(o.unaryFilter.field);return Do.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var l=Kr(o.unaryFilter.field);return Do.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var _=Kr(o.unaryFilter.field);return Do.create(_,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ln()}}function gc(o){var t=[];return o.fields.forEach(function(s){return t.push(s.canonicalString())}),{fieldPaths:t}}function $s(o){return o.length>=4&&"projects"===o.get(0)&&"databases"===o.get(2)}function Ws(o){for(var t="",s=0;s<o.length;s++)t.length>0&&(t=mc(t)),t=Ed(o.get(s),t);return mc(t)}function Ed(o,t){for(var s=t,l=o.length,_=0;_<l;_++){var C=o.charAt(_);switch(C){case"\0":s+="\x01\x10";break;case"\x01":s+="\x01\x11";break;default:s+=C}}return s}function mc(o){return o+"\x01\x01"}function ca(o){var t=o.length;if(Xn(t>=2),2===t)return Xn("\x01"===o.charAt(0)&&"\x01"===o.charAt(1)),Te.emptyPath();for(var s=t-2,l=[],_="",C=0;C<t;){var D=o.indexOf("\x01",C);switch((D<0||D>s)&&Ln(),o.charAt(D+1)){case"\x01":var R=o.substring(C,D),W=void 0;0===_.length?W=R:(W=_+=R,_=""),l.push(W);break;case"\x10":_+=o.substring(C,D),_+="\0";break;case"\x11":_+=o.substring(C,D+1);break;default:Ln()}C=D+2}return new Te(l)}var Mu=function(o,t){this.seconds=o,this.nanoseconds=t},Es=function(o,t,s){this.ownerId=o,this.allowTabSynchronization=t,this.leaseTimestampMs=s};Es.store="owner",Es.key="owner";var eu=function(o,t,s){this.userId=o,this.lastAcknowledgedBatchId=t,this.lastStreamToken=s};eu.store="mutationQueues",eu.keyPath="userId";var Ci=function(o,t,s,l,_){this.userId=o,this.batchId=t,this.localWriteTimeMs=s,this.baseMutations=l,this.mutations=_};Ci.store="mutations",Ci.keyPath="batchId",Ci.userMutationsIndex="userMutationsIndex",Ci.userMutationsKeyPath=["userId","batchId"];var si=function(){function o(){}return o.prefixForUser=function(t){return[t]},o.prefixForPath=function(t,s){return[t,Ws(s)]},o.key=function(t,s,l){return[t,Ws(s),l]},o}();si.store="documentMutations",si.PLACEHOLDER=new si;var Iu=function(o,t){this.path=o,this.readTime=t},_c=function(o,t){this.path=o,this.version=t},$i=function(o,t,s,l,_,C){this.unknownDocument=o,this.noDocument=t,this.document=s,this.hasCommittedMutations=l,this.readTime=_,this.parentPath=C};$i.store="remoteDocuments",$i.readTimeIndex="readTimeIndex",$i.readTimeIndexPath="readTime",$i.collectionReadTimeIndex="collectionReadTimeIndex",$i.collectionReadTimeIndexPath=["parentPath","readTime"];var Ti=function(o){this.byteSize=o};Ti.store="remoteDocumentGlobal",Ti.key="remoteDocumentGlobalKey";var Mo=function(o,t,s,l,_,C,D){this.targetId=o,this.canonicalId=t,this.readTime=s,this.resumeToken=l,this.lastListenSequenceNumber=_,this.lastLimboFreeSnapshotVersion=C,this.query=D};Mo.store="targets",Mo.keyPath="targetId",Mo.queryTargetsIndexName="queryTargetsIndex",Mo.queryTargetsKeyPath=["canonicalId","targetId"];var uo=function(o,t,s){this.targetId=o,this.path=t,this.sequenceNumber=s};uo.store="targetDocuments",uo.keyPath=["targetId","path"],uo.documentTargetsIndex="documentTargetsIndex",uo.documentTargetsKeyPath=["path","targetId"];var hs=function(o,t,s,l){this.highestTargetId=o,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=s,this.targetCount=l};hs.key="targetGlobalKey",hs.store="targetGlobal";var ko=function(o,t){this.collectionId=o,this.parent=t};ko.store="collectionParents",ko.keyPath=["collectionId","parent"];var Ys=function(o,t,s,l){this.clientId=o,this.updateTimeMs=t,this.networkEnabled=s,this.inForeground=l};Ys.store="clientMetadata",Ys.keyPath="clientId";var al=function(o,t,s){this.bundleId=o,this.createTime=t,this.version=s};al.store="bundles",al.keyPath="bundleId";var Ou=function(o,t,s){this.name=o,this.readTime=t,this.bundledQuery=s};Ou.store="namedQueries",Ou.keyPath="name";var Vh=(0,ee.ev)((0,ee.ev)([],(0,ee.ev)((0,ee.ev)([],(0,ee.ev)((0,ee.ev)([],(0,ee.ev)((0,ee.ev)([],[eu.store,Ci.store,si.store,$i.store,Mo.store,Es.store,hs.store,uo.store]),[Ys.store])),[Ti.store])),[ko.store])),[al.store,Ou.store]),vc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Td=function(){function o(){this.onCommittedListeners=[]}return o.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},o.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},o}(),es=function(){var o=this;this.promise=new Promise(function(t,s){o.resolve=t,o.reject=s})},Wt=function(){function o(t){var s=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(l){s.isDone=!0,s.result=l,s.nextCallback&&s.nextCallback(l)},function(l){s.isDone=!0,s.error=l,s.catchCallback&&s.catchCallback(l)})}return o.prototype.catch=function(t){return this.next(void 0,t)},o.prototype.next=function(t,s){var l=this;return this.callbackAttached&&Ln(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new o(function(_,C){l.nextCallback=function(D){l.wrapSuccess(t,D).next(_,C)},l.catchCallback=function(D){l.wrapFailure(s,D).next(_,C)}})},o.prototype.toPromise=function(){var t=this;return new Promise(function(s,l){t.next(s,l)})},o.prototype.wrapUserFunction=function(t){try{var s=t();return s instanceof o?s:o.resolve(s)}catch(l){return o.reject(l)}},o.prototype.wrapSuccess=function(t,s){return t?this.wrapUserFunction(function(){return t(s)}):o.resolve(s)},o.prototype.wrapFailure=function(t,s){return t?this.wrapUserFunction(function(){return t(s)}):o.reject(s)},o.resolve=function(t){return new o(function(s,l){s(t)})},o.reject=function(t){return new o(function(s,l){l(t)})},o.waitFor=function(t){return new o(function(s,l){var _=0,C=0,D=!1;t.forEach(function(R){++_,R.next(function(){++C,D&&C===_&&s()},function(W){return l(W)})}),D=!0,C===_&&s()})},o.or=function(t){for(var s=o.resolve(!1),l=function(D){s=s.next(function(R){return R?o.resolve(R):D()})},_=0,C=t;_<C.length;_++)l(C[_]);return s},o.forEach=function(t,s){var l=this,_=[];return t.forEach(function(C,D){_.push(s.call(l,C,D))}),this.waitFor(_)},o}(),Kc=function(){function o(t,s){var l=this;this.action=t,this.transaction=s,this.aborted=!1,this.ft=new es,this.transaction.oncomplete=function(){l.ft.resolve()},this.transaction.onabort=function(){s.error?l.ft.reject(new Ll(t,s.error)):l.ft.resolve()},this.transaction.onerror=function(_){var C=Ad(_.target.error);l.ft.reject(new Ll(t,C))}}return o.open=function(t,s,l,_){try{return new o(s,t.transaction(_,l))}catch(C){throw new Ll(s,C)}},Object.defineProperty(o.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),o.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(rn("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},o.prototype.store=function(t){var s=this.transaction.objectStore(t);return new Sd(s)},o}(),tu=function(){function o(t,s,l){this.name=t,this.version=s,this.wt=l,12.2===o._t((0,ze.z$)())&&Pi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return o.delete=function(t){return rn("SimpleDb","Removing database:",t),Ks(window.indexedDB.deleteDatabase(t)).toPromise()},o.yt=function(){if("undefined"==typeof indexedDB)return!1;if(o.gt())return!0;var t=(0,ze.z$)(),s=o._t(t),l=0<s&&s<10,_=o.Et(t),C=0<_&&_<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||l||C)},o.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},o.It=function(t,s){return t.store(s)},o._t=function(t){var s=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),l=s?s[1].split("_").slice(0,2).join("."):"-1";return Number(l)},o.Et=function(t){var s=t.match(/Android ([\d.]+)/i),l=s?s[1].split(".").slice(0,2).join("."):"-1";return Number(l)},o.prototype.At=function(t){return(0,ee.mG)(this,void 0,void 0,function(){var s,l=this;return(0,ee.Jh)(this,function(_){switch(_.label){case 0:return this.db?[3,2]:(rn("SimpleDb","Opening database:",this.name),s=this,[4,new Promise(function(C,D){var R=indexedDB.open(l.name,l.version);R.onsuccess=function(W){C(W.target.result)},R.onblocked=function(){D(new Ll(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},R.onerror=function(W){var ae=W.target.error;D("VersionError"===ae.name?new Lt(mt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ll(t,ae))},R.onupgradeneeded=function(W){rn("SimpleDb",'Database "'+l.name+'" requires upgrade from version:',W.oldVersion),l.wt.Rt(W.target.result,R.transaction,W.oldVersion,l.version).next(function(){rn("SimpleDb","Database upgrade to version "+l.version+" complete")})}})]);case 1:s.db=_.sent(),_.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(C){return l.bt(C)}),this.db)]}})})},o.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(s){return t(s)})},o.prototype.runTransaction=function(t,s,l,_){return(0,ee.mG)(this,void 0,void 0,function(){var C,D,R,W,ae;return(0,ee.Jh)(this,function(de){switch(de.label){case 0:C="readonly"===s,D=0,R=function(){var Me,Le,ct,lt,wt;return(0,ee.Jh)(this,function(en){switch(en.label){case 0:++D,en.label=1;case 1:return en.trys.push([1,4,,5]),[4,W.At(t)];case 2:return W.db=en.sent(),Me=Kc.open(W.db,t,C?"readonly":"readwrite",l),Le=_(Me).catch(function(hn){return Me.abort(hn),Wt.reject(hn)}).toPromise(),ct={},Le.catch(function(){}),[4,Me.dt];case 3:return[2,(ct.value=(en.sent(),Le),ct)];case 4:return rn("SimpleDb","Transaction failed with error:",(lt=en.sent()).message,"Retrying:",wt="FirebaseError"!==lt.name&&D<3),W.close(),wt?[3,5]:[2,{value:Promise.reject(lt)}];case 5:return[2]}})},W=this,de.label=1;case 1:return[5,R()];case 2:if("object"==typeof(ae=de.sent()))return[2,ae.value];de.label=3;case 3:return[3,1];case 4:return[2]}})})},o.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},o}(),Dd=function(){function o(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(o.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),o.prototype.done=function(){this.Vt=!0},o.prototype.Ct=function(t){this.St=t},o.prototype.delete=function(){return Ks(this.Pt.delete())},o}(),Ll=function(o){function t(s,l){var _=this;return(_=o.call(this,mt.UNAVAILABLE,"IndexedDB transaction '"+s+"' failed: "+l)||this).name="IndexedDbTransactionError",_}return(0,ee.ZT)(t,o),t}(Lt);function ul(o){return"IndexedDbTransactionError"===o.name}var Sd=function(){function o(t){this.store=t}return o.prototype.put=function(t,s){var l;return void 0!==s?(rn("SimpleDb","PUT",this.store.name,t,s),l=this.store.put(s,t)):(rn("SimpleDb","PUT",this.store.name,"<auto-key>",t),l=this.store.put(t)),Ks(l)},o.prototype.add=function(t){return rn("SimpleDb","ADD",this.store.name,t,t),Ks(this.store.add(t))},o.prototype.get=function(t){var s=this;return Ks(this.store.get(t)).next(function(l){return void 0===l&&(l=null),rn("SimpleDb","GET",s.store.name,t,l),l})},o.prototype.delete=function(t){return rn("SimpleDb","DELETE",this.store.name,t),Ks(this.store.delete(t))},o.prototype.count=function(){return rn("SimpleDb","COUNT",this.store.name),Ks(this.store.count())},o.prototype.Nt=function(t,s){var l=this.cursor(this.options(t,s)),_=[];return this.xt(l,function(C,D){_.push(D)}).next(function(){return _})},o.prototype.kt=function(t,s){rn("SimpleDb","DELETE ALL",this.store.name);var l=this.options(t,s);l.Ft=!1;var _=this.cursor(l);return this.xt(_,function(C,D,R){return R.delete()})},o.prototype.$t=function(t,s){var l;s?l=t:(l={},s=t);var _=this.cursor(l);return this.xt(_,s)},o.prototype.Ot=function(t){var s=this.cursor({});return new Wt(function(l,_){s.onerror=function(C){var D=Ad(C.target.error);_(D)},s.onsuccess=function(C){var D=C.target.result;D?t(D.primaryKey,D.value).next(function(R){R?D.continue():l()}):l()}})},o.prototype.xt=function(t,s){var l=[];return new Wt(function(_,C){t.onerror=function(D){C(D.target.error)},t.onsuccess=function(D){var R=D.target.result;if(R){var W=new Dd(R),ae=s(R.primaryKey,R.value,W);if(ae instanceof Wt){var de=ae.catch(function(Me){return W.done(),Wt.reject(Me)});l.push(de)}W.isDone?_():null===W.Dt?R.continue():R.continue(W.Dt)}else _()}}).next(function(){return Wt.waitFor(l)})},o.prototype.options=function(t,s){var l;return void 0!==t&&("string"==typeof t?l=t:s=t),{index:l,range:s}},o.prototype.cursor=function(t){var s="next";if(t.reverse&&(s="prev"),t.index){var l=this.store.index(t.index);return t.Ft?l.openKeyCursor(t.range,s):l.openCursor(t.range,s)}return this.store.openCursor(t.range,s)},o}();function Ks(o){return new Wt(function(t,s){o.onsuccess=function(l){t(l.target.result)},o.onerror=function(l){var _=Ad(l.target.error);s(_)}})}var fh=!1;function Ad(o){var t=tu._t((0,ze.z$)());if(t>=12.2&&t<13){var s="An internal error was encountered in the Indexed Database server";if(o.message.indexOf(s)>=0){var l=new Lt("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+s+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return fh||(fh=!0,setTimeout(function(){throw l},0)),l}}return o}var ll=function(o){function t(s,l){var _=this;return(_=o.call(this)||this).Mt=s,_.currentSequenceNumber=l,_}return(0,ee.ZT)(t,o),t}(Td);function us(o,t){var s=sn(o);return tu.It(s.Mt,t)}var xu=function(){function o(t,s,l,_){this.batchId=t,this.localWriteTime=s,this.baseMutations=l,this.mutations=_}return o.prototype.applyToRemoteDocument=function(t,s){for(var l=s.mutationResults,_=0;_<this.mutations.length;_++){var C=this.mutations[_];C.key.isEqual(t.key)&&xl(C,t,l[_])}},o.prototype.applyToLocalView=function(t){for(var s=0,l=this.baseMutations;s<l.length;s++)(D=l[s]).key.isEqual(t.key)&&tl(D,t,this.localWriteTime);for(var _=0,C=this.mutations;_<C.length;_++){var D;(D=C[_]).key.isEqual(t.key)&&tl(D,t,this.localWriteTime)}},o.prototype.applyToLocalDocumentSet=function(t){var s=this;this.mutations.forEach(function(l){var _=t.get(l.key),C=_;s.applyToLocalView(C),_.isValidDocument()||C.convertToNoDocument(x.min())})},o.prototype.keys=function(){return this.mutations.reduce(function(t,s){return t.add(s.key)},$r())},o.prototype.isEqual=function(t){return this.batchId===t.batchId&&Za(this.mutations,t.mutations,function(s,l){return oa(s,l)})&&Za(this.baseMutations,t.baseMutations,function(s,l){return oa(s,l)})},o}(),cl=function(){function o(t,s,l,_){this.batch=t,this.commitVersion=s,this.mutationResults=l,this.docVersions=_}return o.from=function(t,s,l){Xn(t.mutations.length===l.length);for(var _=uc(),C=t.mutations,D=0;D<C.length;D++)_=_.insert(C[D].key,l[D].version);return new o(t,s,l,_)},o}(),yc=function(){function o(t,s,l,_,C,D,R){void 0===C&&(C=x.min()),void 0===D&&(D=x.min()),void 0===R&&(R=ar.EMPTY_BYTE_STRING),this.target=t,this.targetId=s,this.purpose=l,this.sequenceNumber=_,this.snapshotVersion=C,this.lastLimboFreeSnapshotVersion=D,this.resumeToken=R}return o.prototype.withSequenceNumber=function(t){return new o(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},o.prototype.withResumeToken=function(t,s){return new o(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t)},o.prototype.withLastLimboFreeSnapshotVersion=function(t){return new o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},o}(),Rs=function(o){this.Lt=o};function Pu(o,t){if(t.document)return Uh(o.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var s=Wn.fromSegments(t.noDocument.path),l=ku(t.noDocument.readTime),_=Or.newNoDocument(s,l);return t.hasCommittedMutations?_.setHasCommittedMutations():_}if(t.unknownDocument){var C=Wn.fromSegments(t.unknownDocument.path);return l=ku(t.unknownDocument.version),Or.newUnknownDocument(C,l)}return Ln()}function Fo(o,t,s){var Me,Le,l=dl(s),_=t.key.path.popLast().toArray();if(t.isFoundDocument()){var C={name:il(Me=o.Lt,(Le=t).key),fields:Le.data.value.mapValue.fields,updateTime:Jo(Me,Le.version.toTimestamp())},D=t.hasCommittedMutations;return new $i(null,null,C,D,l,_)}if(t.isNoDocument()){var R=t.key.path.toArray(),W=Ru(t.version);return D=t.hasCommittedMutations,new $i(null,new Iu(R,W),null,D,l,_)}if(t.isUnknownDocument()){var ae=t.key.path.toArray(),de=Ru(t.version);return new $i(new _c(ae,de),null,null,!0,l,_)}return Ln()}function dl(o){var t=o.toTimestamp();return[t.seconds,t.nanoseconds]}function Md(o){var t=new U(o[0],o[1]);return x.fromTimestamp(t)}function Ru(o){var t=o.toTimestamp();return new Mu(t.seconds,t.nanoseconds)}function ku(o){var t=new U(o.seconds,o.nanoseconds);return x.fromTimestamp(t)}function Ul(o,t){for(var s=(t.baseMutations||[]).map(function(W){return sl(o.Lt,W)}),l=0;l<t.mutations.length-1;++l)l+1<t.mutations.length&&void 0!==t.mutations[l+1].transform&&(t.mutations[l].updateTransforms=t.mutations[l+1].transform.fieldTransforms,t.mutations.splice(l+1,1),++l);var D=t.mutations.map(function(W){return sl(o.Lt,W)}),R=U.fromMillis(t.localWriteTimeMs);return new xu(t.batchId,R,s,D)}function hl(o){var t,s,l=ku(o.readTime),_=void 0!==o.lastLimboFreeSnapshotVersion?ku(o.lastLimboFreeSnapshotVersion):x.min();return void 0!==o.query.documents?(Xn(1===(s=o.query).documents.length),t=Bo(pu(Cd(s.documents[0])))):t=Bo(Wc(o.query)),new yc(t,o.targetId,0,o.lastListenSequenceNumber,l,_,ar.fromBase64String(o.resumeToken))}function Qc(o,t){var s,l=Ru(t.snapshotVersion),_=Ru(t.lastLimboFreeSnapshotVersion);s=Gs(t.target)?dc(o.Lt,t.target):hc(o.Lt,t.target);var C=t.resumeToken.toBase64();return new Mo(t.targetId,Ko(t.target),l,C,t.sequenceNumber,_,s)}function Id(o){var t=Wc({parent:o.parent,structuredQuery:o.structuredQuery});return"LAST"===o.limitType?Vc(t,t.limit,"L"):t}var ph=function(){function o(){}return o.prototype.getBundleMetadata=function(t,s){return Fu(t).get(s).next(function(l){if(l)return{id:(_=l).bundleId,createTime:ku(_.createTime),version:_.version};var _})},o.prototype.saveBundleMetadata=function(t,s){return Fu(t).put({bundleId:(l=s).id,createTime:Ru(zi(l.createTime)),version:l.version});var l},o.prototype.getNamedQuery=function(t,s){return Qs(t).get(s).next(function(l){if(l)return{name:(_=l).name,query:Id(_.bundledQuery),readTime:ku(_.readTime)};var _})},o.prototype.saveNamedQuery=function(t,s){return Qs(t).put({name:(l=s).name,readTime:Ru(zi(l.readTime)),bundledQuery:l.bundledQuery});var l},o}();function Fu(o){return us(o,al.store)}function Qs(o){return us(o,Ou.store)}var Bh=function(){function o(){this.Bt=new Od}return o.prototype.addToCollectionParentIndex=function(t,s){return this.Bt.add(s),Wt.resolve()},o.prototype.getCollectionParents=function(t,s){return Wt.resolve(this.Bt.getEntries(s))},o}(),Od=function(){function o(){this.index={}}return o.prototype.add=function(t){var s=t.lastSegment(),l=t.popLast(),_=this.index[s]||new vo(Te.comparator),C=!_.has(l);return this.index[s]=_.add(l),C},o.prototype.has=function(t){var s=t.lastSegment(),l=t.popLast(),_=this.index[s];return _&&_.has(l)},o.prototype.getEntries=function(t){return(this.index[t]||new vo(Te.comparator)).toArray()},o}(),xd=function(){function o(){this.qt=new Od}return o.prototype.addToCollectionParentIndex=function(t,s){var l=this;if(!this.qt.has(s)){var _=s.lastSegment(),C=s.popLast();t.addOnCommittedListener(function(){l.qt.add(s)});var D={collectionId:_,parent:Ws(C)};return gh(t).put(D)}return Wt.resolve()},o.prototype.getCollectionParents=function(t,s){var l=[],_=IDBKeyRange.bound([s,""],[qa(s),""],!1,!0);return gh(t).Nt(_).next(function(C){for(var D=0,R=C;D<R.length;D++){var W=R[D];if(W.collectionId!==s)break;l.push(ca(W.parent))}return l})},o}();function gh(o){return us(o,ko.store)}var Js={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ks=function(){function o(t,s,l){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=l}return o.withCacheSize=function(t){return new o(t,o.DEFAULT_COLLECTION_PERCENTILE,o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},o}();function nu(o,t,s){var l=o.store(Ci.store),_=o.store(si.store),C=[],D=IDBKeyRange.only(s.batchId),R=0,W=l.$t({range:D},function(lt,wt,en){return R++,en.delete()});C.push(W.next(function(){Xn(1===R)}));for(var ae=[],de=0,Me=s.mutations;de<Me.length;de++){var Le=Me[de],ct=si.key(t,Le.key.path,s.batchId);C.push(_.delete(ct)),ae.push(Le.key)}return Wt.waitFor(C).next(function(){return ae})}function Vl(o){if(!o)return 0;var t;if(o.document)t=o.document;else if(o.unknownDocument)t=o.unknownDocument;else{if(!o.noDocument)throw Ln();t=o.noDocument}return JSON.stringify(t).length}ks.DEFAULT_COLLECTION_PERCENTILE=10,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ks.DEFAULT=new ks(41943040,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ks.DISABLED=new ks(-1,0,0);var ru=function(){function o(t,s,l,_){this.userId=t,this.R=s,this.Ut=l,this.referenceDelegate=_,this.Kt={}}return o.Qt=function(t,s,l,_){return Xn(""!==t.uid),new o(t.isAuthenticated()?t.uid:"",s,l,_)},o.prototype.checkEmpty=function(t){var s=!0,l=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pa(t).$t({index:Ci.userMutationsIndex,range:l},function(_,C,D){s=!1,D.done()}).next(function(){return s})},o.prototype.addMutationBatch=function(t,s,l,_){var C=this,D=Nu(t),R=Pa(t);return R.add({}).next(function(W){Xn("number"==typeof W);for(var ae=new xu(W,s,l,_),de=function(hn,rr,ir){var Jr=ir.baseMutations.map(function(Hi){return $c(hn.Lt,Hi)}),_i=ir.mutations.map(function(Hi){return $c(hn.Lt,Hi)});return new Ci(rr,ir.batchId,ir.localWriteTime.toMillis(),Jr,_i)}(C.R,C.userId,ae),Me=[],Le=new vo(function(hn,rr){return kr(hn.canonicalString(),rr.canonicalString())}),ct=0,lt=_;ct<lt.length;ct++){var wt=lt[ct],en=si.key(C.userId,wt.key.path,W);Le=Le.add(wt.key.path.popLast()),Me.push(R.put(de)),Me.push(D.put(en,si.PLACEHOLDER))}return Le.forEach(function(hn){Me.push(C.Ut.addToCollectionParentIndex(t,hn))}),t.addOnCommittedListener(function(){C.Kt[W]=ae.keys()}),Wt.waitFor(Me).next(function(){return ae})})},o.prototype.lookupMutationBatch=function(t,s){var l=this;return Pa(t).get(s).next(function(_){return _?(Xn(_.userId===l.userId),Ul(l.R,_)):null})},o.prototype.jt=function(t,s){var l=this;return this.Kt[s]?Wt.resolve(this.Kt[s]):this.lookupMutationBatch(t,s).next(function(_){if(_){var C=_.keys();return l.Kt[s]=C,C}return null})},o.prototype.getNextMutationBatchAfterBatchId=function(t,s){var l=this,_=s+1,C=IDBKeyRange.lowerBound([this.userId,_]),D=null;return Pa(t).$t({index:Ci.userMutationsIndex,range:C},function(R,W,ae){W.userId===l.userId&&(Xn(W.batchId>=_),D=Ul(l.R,W)),ae.done()}).next(function(){return D})},o.prototype.getHighestUnacknowledgedBatchId=function(t){var s=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),l=-1;return Pa(t).$t({index:Ci.userMutationsIndex,range:s,reverse:!0},function(_,C,D){l=C.batchId,D.done()}).next(function(){return l})},o.prototype.getAllMutationBatches=function(t){var s=this,l=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pa(t).Nt(Ci.userMutationsIndex,l).next(function(_){return _.map(function(C){return Ul(s.R,C)})})},o.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,s){var l=this,_=si.prefixForPath(this.userId,s.path),C=IDBKeyRange.lowerBound(_),D=[];return Nu(t).$t({range:C},function(R,W,ae){var de=R[0],Le=R[2],ct=ca(R[1]);if(de===l.userId&&s.path.isEqual(ct))return Pa(t).get(Le).next(function(lt){if(!lt)throw Ln();Xn(lt.userId===l.userId),D.push(Ul(l.R,lt))});ae.done()}).next(function(){return D})},o.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,s){var l=this,_=new vo(kr),C=[];return s.forEach(function(D){var R=si.prefixForPath(l.userId,D.path),W=IDBKeyRange.lowerBound(R),ae=Nu(t).$t({range:W},function(de,Me,Le){var ct=de[0],wt=de[2],en=ca(de[1]);ct===l.userId&&D.path.isEqual(en)?_=_.add(wt):Le.done()});C.push(ae)}),Wt.waitFor(C).next(function(){return l.Wt(t,_)})},o.prototype.getAllMutationBatchesAffectingQuery=function(t,s){var l=this,_=s.path,C=_.length+1,D=si.prefixForPath(this.userId,_),R=IDBKeyRange.lowerBound(D),W=new vo(kr);return Nu(t).$t({range:R},function(ae,de,Me){var Le=ae[0],lt=ae[2],wt=ca(ae[1]);Le===l.userId&&_.isPrefixOf(wt)?wt.length===C&&(W=W.add(lt)):Me.done()}).next(function(){return l.Wt(t,W)})},o.prototype.Wt=function(t,s){var l=this,_=[],C=[];return s.forEach(function(D){C.push(Pa(t).get(D).next(function(R){if(null===R)throw Ln();Xn(R.userId===l.userId),_.push(Ul(l.R,R))}))}),Wt.waitFor(C).next(function(){return _})},o.prototype.removeMutationBatch=function(t,s){var l=this;return nu(t.Mt,this.userId,s).next(function(_){return t.addOnCommittedListener(function(){l.Gt(s.batchId)}),Wt.forEach(_,function(C){return l.referenceDelegate.markPotentiallyOrphaned(t,C)})})},o.prototype.Gt=function(t){delete this.Kt[t]},o.prototype.performConsistencyCheck=function(t){var s=this;return this.checkEmpty(t).next(function(l){if(!l)return Wt.resolve();var _=IDBKeyRange.lowerBound(si.prefixForUser(s.userId)),C=[];return Nu(t).$t({range:_},function(D,R,W){if(D[0]===s.userId){var ae=ca(D[1]);C.push(ae)}else W.done()}).next(function(){Xn(0===C.length)})})},o.prototype.containsKey=function(t,s){return xa(t,this.userId,s)},o.prototype.zt=function(t){var s=this;return bc(t).get(this.userId).next(function(l){return l||new eu(s.userId,-1,"")})},o}();function xa(o,t,s){var l=si.prefixForPath(t,s.path),_=l[1],C=IDBKeyRange.lowerBound(l),D=!1;return Nu(o).$t({range:C,Ft:!0},function(R,W,ae){R[0]===t&&R[1]===_&&(D=!0),ae.done()}).next(function(){return D})}function Pa(o){return us(o,Ci.store)}function Nu(o){return us(o,si.store)}function bc(o){return us(o,eu.store)}var fl=function(){function o(t){this.Ht=t}return o.prototype.next=function(){return this.Ht+=2,this.Ht},o.Jt=function(){return new o(0)},o.Yt=function(){return new o(-1)},o}(),Pd=function(){function o(t,s){this.referenceDelegate=t,this.R=s}return o.prototype.allocateTargetId=function(t){var s=this;return this.Xt(t).next(function(l){var _=new fl(l.highestTargetId);return l.highestTargetId=_.next(),s.Zt(t,l).next(function(){return l.highestTargetId})})},o.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(s){return x.fromTimestamp(new U(s.lastRemoteSnapshotVersion.seconds,s.lastRemoteSnapshotVersion.nanoseconds))})},o.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(s){return s.highestListenSequenceNumber})},o.prototype.setTargetsMetadata=function(t,s,l){var _=this;return this.Xt(t).next(function(C){return C.highestListenSequenceNumber=s,l&&(C.lastRemoteSnapshotVersion=l.toTimestamp()),s>C.highestListenSequenceNumber&&(C.highestListenSequenceNumber=s),_.Zt(t,C)})},o.prototype.addTargetData=function(t,s){var l=this;return this.te(t,s).next(function(){return l.Xt(t).next(function(_){return _.targetCount+=1,l.ee(s,_),l.Zt(t,_)})})},o.prototype.updateTargetData=function(t,s){return this.te(t,s)},o.prototype.removeTargetData=function(t,s){var l=this;return this.removeMatchingKeysForTargetId(t,s.targetId).next(function(){return Bl(t).delete(s.targetId)}).next(function(){return l.Xt(t)}).next(function(_){return Xn(_.targetCount>0),_.targetCount-=1,l.Zt(t,_)})},o.prototype.removeTargets=function(t,s,l){var _=this,C=0,D=[];return Bl(t).$t(function(R,W){var ae=hl(W);ae.sequenceNumber<=s&&null===l.get(ae.targetId)&&(C++,D.push(_.removeTargetData(t,ae)))}).next(function(){return Wt.waitFor(D)}).next(function(){return C})},o.prototype.forEachTarget=function(t,s){return Bl(t).$t(function(l,_){var C=hl(_);s(C)})},o.prototype.Xt=function(t){return Lu(t).get(hs.key).next(function(s){return Xn(null!==s),s})},o.prototype.Zt=function(t,s){return Lu(t).put(hs.key,s)},o.prototype.te=function(t,s){return Bl(t).put(Qc(this.R,s))},o.prototype.ee=function(t,s){var l=!1;return t.targetId>s.highestTargetId&&(s.highestTargetId=t.targetId,l=!0),t.sequenceNumber>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t.sequenceNumber,l=!0),l},o.prototype.getTargetCount=function(t){return this.Xt(t).next(function(s){return s.targetCount})},o.prototype.getTargetData=function(t,s){var l=Ko(s),_=IDBKeyRange.bound([l,Number.NEGATIVE_INFINITY],[l,Number.POSITIVE_INFINITY]),C=null;return Bl(t).$t({range:_,index:Mo.queryTargetsIndexName},function(D,R,W){var ae=hl(R);mo(s,ae.target)&&(C=ae,W.done())}).next(function(){return C})},o.prototype.addMatchingKeys=function(t,s,l){var _=this,C=[],D=Xs(t);return s.forEach(function(R){var W=Ws(R.path);C.push(D.put(new uo(l,W))),C.push(_.referenceDelegate.addReference(t,l,R))}),Wt.waitFor(C)},o.prototype.removeMatchingKeys=function(t,s,l){var _=this,C=Xs(t);return Wt.forEach(s,function(D){var R=Ws(D.path);return Wt.waitFor([C.delete([l,R]),_.referenceDelegate.removeReference(t,l,D)])})},o.prototype.removeMatchingKeysForTargetId=function(t,s){var l=Xs(t),_=IDBKeyRange.bound([s],[s+1],!1,!0);return l.delete(_)},o.prototype.getMatchingKeysForTargetId=function(t,s){var l=IDBKeyRange.bound([s],[s+1],!1,!0),_=Xs(t),C=$r();return _.$t({range:l,Ft:!0},function(D,R,W){var ae=ca(D[1]),de=new Wn(ae);C=C.add(de)}).next(function(){return C})},o.prototype.containsKey=function(t,s){var l=Ws(s.path),_=IDBKeyRange.bound([l],[qa(l)],!1,!0),C=0;return Xs(t).$t({index:uo.documentTargetsIndex,Ft:!0,range:_},function(D,R,W){0!==D[0]&&(C++,W.done())}).next(function(){return C>0})},o.prototype.lt=function(t,s){return Bl(t).get(s).next(function(l){return l?hl(l):null})},o}();function Bl(o){return us(o,Mo.store)}function Lu(o){return us(o,hs.store)}function Xs(o){return us(o,uo.store)}function Ra(o){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(t){if(o.code!==mt.FAILED_PRECONDITION||o.message!==vc)throw o;return rn("LocalStore","Unexpectedly lost primary lease"),[2]})})}function mh(o,t){var l=o[1],C=t[1],D=kr(o[0],t[0]);return 0===D?kr(l,C):D}var Jc=function(){function o(t){this.ne=t,this.buffer=new vo(mh),this.se=0}return o.prototype.ie=function(){return++this.se},o.prototype.re=function(t){var s=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(s);else{var l=this.buffer.last();mh(s,l)<0&&(this.buffer=this.buffer.delete(l).add(s))}},Object.defineProperty(o.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),o}(),Rd=function(){function o(t,s){this.garbageCollector=t,this.asyncQueue=s,this.oe=!1,this.ce=null}return o.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},o.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(o.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),o.prototype.ue=function(t){var s=this,l=this.oe?3e5:6e4;rn("LruGarbageCollector","Garbage collection scheduled in "+l+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",l,function(){return(0,ee.mG)(s,void 0,void 0,function(){var _;return(0,ee.Jh)(this,function(C){switch(C.label){case 0:this.ce=null,this.oe=!0,C.label=1;case 1:return C.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return C.sent(),[3,7];case 3:return ul(_=C.sent())?(rn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",_),[3,6]):[3,4];case 4:return[4,Ra(_)];case 5:C.sent(),C.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return C.sent(),[2]}})})})},o}(),jh=function(){function o(t,s){this.ae=t,this.params=s}return o.prototype.calculateTargetCount=function(t,s){return this.ae.he(t).next(function(l){return Math.floor(s/100*l)})},o.prototype.nthSequenceNumber=function(t,s){var l=this;if(0===s)return Wt.resolve(Xi.o);var _=new Jc(s);return this.ae.forEachTarget(t,function(C){return _.re(C.sequenceNumber)}).next(function(){return l.ae.le(t,function(C){return _.re(C)})}).next(function(){return _.maxValue})},o.prototype.removeTargets=function(t,s,l){return this.ae.removeTargets(t,s,l)},o.prototype.removeOrphanedDocuments=function(t,s){return this.ae.removeOrphanedDocuments(t,s)},o.prototype.collect=function(t,s){var l=this;return-1===this.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector","Garbage collection skipped; disabled"),Wt.resolve(Js)):this.getCacheSize(t).next(function(_){return _<l.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector","Garbage collection skipped; Cache size "+_+" is lower than threshold "+l.params.cacheSizeCollectionThreshold),Js):l.fe(t,s)})},o.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},o.prototype.fe=function(t,s){var l,_,C,D,R,W,ae,de=this,Me=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(Le){return Le>de.params.maximumSequenceNumbersToCollect?(rn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+de.params.maximumSequenceNumbersToCollect+" from "+Le),_=de.params.maximumSequenceNumbersToCollect):_=Le,D=Date.now(),de.nthSequenceNumber(t,_)}).next(function(Le){return l=Le,R=Date.now(),de.removeTargets(t,l,s)}).next(function(Le){return C=Le,W=Date.now(),de.removeOrphanedDocuments(t,l)}).next(function(Le){return ae=Date.now(),wa()<=Ct.in.DEBUG&&rn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(D-Me)+"ms\n\tDetermined least recently used "+_+" in "+(R-D)+"ms\n\tRemoved "+C+" targets in "+(W-R)+"ms\n\tRemoved "+Le+" documents in "+(ae-W)+"ms\nTotal Duration: "+(ae-Me)+"ms"),Wt.resolve({didRun:!0,sequenceNumbersCollected:_,targetsRemoved:C,documentsRemoved:Le})})},o}(),Hh=function(){function o(t,s){this.db=t,this.garbageCollector=new jh(this,s)}return o.prototype.he=function(t){var s=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(l){return s.next(function(_){return l+_})})},o.prototype.de=function(t){var s=0;return this.le(t,function(l){s++}).next(function(){return s})},o.prototype.forEachTarget=function(t,s){return this.db.getTargetCache().forEachTarget(t,s)},o.prototype.le=function(t,s){return this.we(t,function(l,_){return s(_)})},o.prototype.addReference=function(t,s,l){return Cc(t,l)},o.prototype.removeReference=function(t,s,l){return Cc(t,l)},o.prototype.removeTargets=function(t,s,l){return this.db.getTargetCache().removeTargets(t,s,l)},o.prototype.markPotentiallyOrphaned=function(t,s){return Cc(t,s)},o.prototype._e=function(t,s){return _=s,C=!1,bc(l=t).Ot(function(D){return xa(l,D,_).next(function(R){return R&&(C=!0),Wt.resolve(!R)})}).next(function(){return C});var l,_,C},o.prototype.removeOrphanedDocuments=function(t,s){var l=this,_=this.db.getRemoteDocumentCache().newChangeBuffer(),C=[],D=0;return this.we(t,function(R,W){if(W<=s){var ae=l._e(t,R).next(function(de){if(!de)return D++,_.getEntry(t,R).next(function(){return _.removeEntry(R),Xs(t).delete([0,Ws(R.path)])})});C.push(ae)}}).next(function(){return Wt.waitFor(C)}).next(function(){return _.apply(t)}).next(function(){return D})},o.prototype.removeTarget=function(t,s){var l=s.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,l)},o.prototype.updateLimboDocument=function(t,s){return Cc(t,s)},o.prototype.we=function(t,s){var l,_=Xs(t),C=Xi.o;return _.$t({index:uo.documentTargetsIndex},function(D,R){var ae=R.path,de=R.sequenceNumber;0===D[0]?(C!==Xi.o&&s(new Wn(ca(l)),C),C=de,l=ae):C=Xi.o}).next(function(){C!==Xi.o&&s(new Wn(ca(l)),C)})},o.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},o}();function Cc(o,t){return Xs(o).put((l=o.currentSequenceNumber,new uo(0,Ws(t.path),l)));var l}var pl=function(){function o(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={}}return o.prototype.get=function(t){var s=this.mapKeyFn(t),l=this.inner[s];if(void 0!==l)for(var _=0,C=l;_<C.length;_++){var D=C[_],W=D[1];if(this.equalsFn(D[0],t))return W}},o.prototype.has=function(t){return void 0!==this.get(t)},o.prototype.set=function(t,s){var l=this.mapKeyFn(t),_=this.inner[l];if(void 0!==_){for(var C=0;C<_.length;C++)if(this.equalsFn(_[C][0],t))return void(_[C]=[t,s]);_.push([t,s])}else this.inner[l]=[[t,s]]},o.prototype.delete=function(t){var s=this.mapKeyFn(t),l=this.inner[s];if(void 0===l)return!1;for(var _=0;_<l.length;_++)if(this.equalsFn(l[_][0],t))return 1===l.length?delete this.inner[s]:l.splice(_,1),!0;return!1},o.prototype.forEach=function(t){q(this.inner,function(s,l){for(var _=0,C=l;_<C.length;_++){var D=C[_];t(D[0],D[1])}})},o.prototype.isEmpty=function(){return X(this.inner)},o}(),kd=function(){function o(){this.changes=new pl(function(t){return t.toString()},function(t,s){return t.isEqual(s)}),this.changesApplied=!1}return o.prototype.getReadTime=function(t){var s=this.changes.get(t);return s?s.readTime:x.min()},o.prototype.addEntry=function(t,s){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:s})},o.prototype.removeEntry=function(t,s){void 0===s&&(s=null),this.assertNotApplied(),this.changes.set(t,{document:Or.newInvalidDocument(t),readTime:s})},o.prototype.getEntry=function(t,s){this.assertNotApplied();var l=this.changes.get(s);return void 0!==l?Wt.resolve(l.document):this.getFromCache(t,s)},o.prototype.getEntries=function(t,s){return this.getAllFromCache(t,s)},o.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},o.prototype.assertNotApplied=function(){},o}(),Fd=function(){function o(t,s){this.R=t,this.Ut=s}return o.prototype.addEntry=function(t,s,l){return f(t).put(v(s),l)},o.prototype.removeEntry=function(t,s){var l=f(t),_=v(s);return l.delete(_)},o.prototype.updateMetadata=function(t,s){var l=this;return this.getMetadata(t).next(function(_){return _.byteSize+=s,l.me(t,_)})},o.prototype.getEntry=function(t,s){var l=this;return f(t).get(v(s)).next(function(_){return l.ye(s,_)})},o.prototype.ge=function(t,s){var l=this;return f(t).get(v(s)).next(function(_){return{document:l.ye(s,_),size:Vl(_)}})},o.prototype.getEntries=function(t,s){var l=this,_=Ao();return this.pe(t,s,function(C,D){var R=l.ye(C,D);_=_.insert(C,R)}).next(function(){return _})},o.prototype.Ee=function(t,s){var l=this,_=Ao(),C=new Qo(Wn.comparator);return this.pe(t,s,function(D,R){var W=l.ye(D,R);_=_.insert(D,W),C=C.insert(D,Vl(R))}).next(function(){return{documents:_,Te:C}})},o.prototype.pe=function(t,s,l){if(s.isEmpty())return Wt.resolve();var _=IDBKeyRange.bound(s.first().path.toArray(),s.last().path.toArray()),C=s.getIterator(),D=C.getNext();return f(t).$t({range:_},function(R,W,ae){for(var de=Wn.fromSegments(R);D&&Wn.comparator(D,de)<0;)l(D,null),D=C.getNext();D&&D.isEqual(de)&&(l(D,W),D=C.hasNext()?C.getNext():null),D?ae.Ct(D.path.toArray()):ae.done()}).next(function(){for(;D;)l(D,null),D=C.hasNext()?C.getNext():null})},o.prototype.getDocumentsMatchingQuery=function(t,s,l){var _=this,C=Ao(),D=s.path.length+1,R={};if(l.isEqual(x.min())){var W=s.path.toArray();R.range=IDBKeyRange.lowerBound(W)}else{var ae=s.path.toArray(),de=dl(l);R.range=IDBKeyRange.lowerBound([ae,de],!0),R.index=$i.collectionReadTimeIndex}return f(t).$t(R,function(Me,Le,ct){if(Me.length===D){var lt=Pu(_.R,Le);s.path.isPrefixOf(lt.key.path)?Ju(s,lt)&&(C=C.insert(lt.key,lt)):ct.done()}}).next(function(){return C})},o.prototype.newChangeBuffer=function(t){return new Nd(this,!!t&&t.trackRemovals)},o.prototype.getSize=function(t){return this.getMetadata(t).next(function(s){return s.byteSize})},o.prototype.getMetadata=function(t){return p(t).get(Ti.key).next(function(s){return Xn(!!s),s})},o.prototype.me=function(t,s){return p(t).put(Ti.key,s)},o.prototype.ye=function(t,s){if(s){var l=Pu(this.R,s);if(!l.isNoDocument()||!l.version.isEqual(x.min()))return l}return Or.newInvalidDocument(t)},o}(),Nd=function(o){function t(s,l){var _=this;return(_=o.call(this)||this).Ie=s,_.trackRemovals=l,_.Ae=new pl(function(C){return C.toString()},function(C,D){return C.isEqual(D)}),_}return(0,ee.ZT)(t,o),t.prototype.applyChanges=function(s){var l=this,_=[],C=0,D=new vo(function(R,W){return kr(R.canonicalString(),W.canonicalString())});return this.changes.forEach(function(R,W){var ae=l.Ae.get(R);if(W.document.isValidDocument()){var de=Fo(l.Ie.R,W.document,l.getReadTime(R));D=D.add(R.path.popLast());var Me=Vl(de);C+=Me-ae,_.push(l.Ie.addEntry(s,R,de))}else if(C-=ae,l.trackRemovals){var Le=Fo(l.Ie.R,Or.newNoDocument(R,x.min()),l.getReadTime(R));_.push(l.Ie.addEntry(s,R,Le))}else _.push(l.Ie.removeEntry(s,R))}),D.forEach(function(R){_.push(l.Ie.Ut.addToCollectionParentIndex(s,R))}),_.push(this.Ie.updateMetadata(s,C)),Wt.waitFor(_)},t.prototype.getFromCache=function(s,l){var _=this;return this.Ie.ge(s,l).next(function(C){return _.Ae.set(l,C.size),C.document})},t.prototype.getAllFromCache=function(s,l){var _=this;return this.Ie.Ee(s,l).next(function(C){var D=C.documents;return C.Te.forEach(function(R,W){_.Ae.set(R,W)}),D})},t}(kd);function p(o){return us(o,Ti.store)}function f(o){return us(o,$i.store)}function v(o){return o.path.toArray()}var h=function(){function o(t){this.R=t}return o.prototype.Rt=function(t,s,l,_){var C=this;Xn(l<_&&l>=0&&_<=11);var W,D=new Kc("createOrUpgrade",s);l<1&&_>=1&&(t.createObjectStore(Es.store),(W=t).createObjectStore(eu.store,{keyPath:eu.keyPath}),W.createObjectStore(Ci.store,{keyPath:Ci.keyPath,autoIncrement:!0}).createIndex(Ci.userMutationsIndex,Ci.userMutationsKeyPath,{unique:!0}),W.createObjectStore(si.store),g(t),function(W){W.createObjectStore($i.store)}(t));var R=Wt.resolve();return l<3&&_>=3&&(0!==l&&(function(W){W.deleteObjectStore(uo.store),W.deleteObjectStore(Mo.store),W.deleteObjectStore(hs.store)}(t),g(t)),R=R.next(function(){return function(W){var ae=W.store(hs.store),de=new hs(0,0,x.min().toTimestamp(),0);return ae.put(hs.key,de)}(D)})),l<4&&_>=4&&(0!==l&&(R=R.next(function(){return function(W,ae){return ae.store(Ci.store).Nt().next(function(de){W.deleteObjectStore(Ci.store),W.createObjectStore(Ci.store,{keyPath:Ci.keyPath,autoIncrement:!0}).createIndex(Ci.userMutationsIndex,Ci.userMutationsKeyPath,{unique:!0});var Me=ae.store(Ci.store),Le=de.map(function(ct){return Me.put(ct)});return Wt.waitFor(Le)})}(t,D)})),R=R.next(function(){!function(W){W.createObjectStore(Ys.store,{keyPath:Ys.keyPath})}(t)})),l<5&&_>=5&&(R=R.next(function(){return C.Re(D)})),l<6&&_>=6&&(R=R.next(function(){return function(W){W.createObjectStore(Ti.store)}(t),C.be(D)})),l<7&&_>=7&&(R=R.next(function(){return C.ve(D)})),l<8&&_>=8&&(R=R.next(function(){return C.Pe(t,D)})),l<9&&_>=9&&(R=R.next(function(){(function(W){W.objectStoreNames.contains("remoteDocumentChanges")&&W.deleteObjectStore("remoteDocumentChanges")})(t),function(W){var ae=W.objectStore($i.store);ae.createIndex($i.readTimeIndex,$i.readTimeIndexPath,{unique:!1}),ae.createIndex($i.collectionReadTimeIndex,$i.collectionReadTimeIndexPath,{unique:!1})}(s)})),l<10&&_>=10&&(R=R.next(function(){return C.Ve(D)})),l<11&&_>=11&&(R=R.next(function(){(function(W){W.createObjectStore(al.store,{keyPath:al.keyPath})})(t),function(W){W.createObjectStore(Ou.store,{keyPath:Ou.keyPath})}(t)})),R},o.prototype.be=function(t){var s=0;return t.store($i.store).$t(function(l,_){s+=Vl(_)}).next(function(){var l=new Ti(s);return t.store(Ti.store).put(Ti.key,l)})},o.prototype.Re=function(t){var s=this,l=t.store(eu.store),_=t.store(Ci.store);return l.Nt().next(function(C){return Wt.forEach(C,function(D){var R=IDBKeyRange.bound([D.userId,-1],[D.userId,D.lastAcknowledgedBatchId]);return _.Nt(Ci.userMutationsIndex,R).next(function(W){return Wt.forEach(W,function(ae){Xn(ae.userId===D.userId);var de=Ul(s.R,ae);return nu(t,D.userId,de).next(function(){})})})})})},o.prototype.ve=function(t){var s=t.store(uo.store),l=t.store($i.store);return t.store(hs.store).get(hs.key).next(function(_){var C=[];return l.$t(function(D,R){var W=new Te(D),ae=[0,Ws(W)];C.push(s.get(ae).next(function(de){return de?Wt.resolve():s.put(new uo(0,Ws(W),_.highestListenSequenceNumber))}))}).next(function(){return Wt.waitFor(C)})})},o.prototype.Pe=function(t,s){t.createObjectStore(ko.store,{keyPath:ko.keyPath});var l=s.store(ko.store),_=new Od,C=function(D){if(_.add(D)){var R=D.lastSegment(),W=D.popLast();return l.put({collectionId:R,parent:Ws(W)})}};return s.store($i.store).$t({Ft:!0},function(D,R){var W=new Te(D);return C(W.popLast())}).next(function(){return s.store(si.store).$t({Ft:!0},function(D,R){var ae=ca(D[1]);return C(ae.popLast())})})},o.prototype.Ve=function(t){var s=this,l=t.store(Mo.store);return l.$t(function(_,C){var D=hl(C),R=Qc(s.R,D);return l.put(R)})},o}();function g(o){o.createObjectStore(uo.store,{keyPath:uo.keyPath}).createIndex(uo.documentTargetsIndex,uo.documentTargetsKeyPath,{unique:!0}),o.createObjectStore(Mo.store,{keyPath:Mo.keyPath}).createIndex(Mo.queryTargetsIndexName,Mo.queryTargetsKeyPath,{unique:!0}),o.createObjectStore(hs.store)}var d="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",b=function(){function o(t,s,l,_,C,D,R,W,ae,de){if(this.allowTabSynchronization=t,this.persistenceKey=s,this.clientId=l,this.Se=C,this.window=D,this.document=R,this.De=ae,this.Ce=de,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(Me){return Promise.resolve()},!o.yt())throw new Lt(mt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hh(this,_),this.Le=s+"main",this.R=new Rs(W),this.Be=new tu(this.Le,11,new h(this.R)),this.qe=new Pd(this.referenceDelegate,this.R),this.Ut=new xd,this.Ue=new Fd(this.R,this.Ut),this.Ke=new ph,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===de&&Pi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return o.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Lt(mt.FAILED_PRECONDITION,d);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(s){return t.qe.getHighestSequenceNumber(s)})}).then(function(s){t.Ne=new Xi(s,t.De)}).then(function(){t.xe=!0}).catch(function(s){return t.Be&&t.Be.close(),Promise.reject(s)})},o.prototype.He=function(t){var s=this;return this.Me=function(l){return(0,ee.mG)(s,void 0,void 0,function(){return(0,ee.Jh)(this,function(_){return this.started?[2,t(l)]:[2]})})},t(this.isPrimary)},o.prototype.setDatabaseDeletedListener=function(t){var s=this;this.Be.vt(function(l){return(0,ee.mG)(s,void 0,void 0,function(){return(0,ee.Jh)(this,function(_){switch(_.label){case 0:return null===l.newVersion?[4,t()]:[3,2];case 1:_.sent(),_.label=2;case 2:return[2]}})})})},o.prototype.setNetworkEnabled=function(t){var s=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,ee.mG)(s,void 0,void 0,function(){return(0,ee.Jh)(this,function(l){switch(l.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})}))},o.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(s){return N(s).put(new Ys(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(s).next(function(l){l||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(s)}).next(function(l){return t.isPrimary&&!l?t.Xe(s).next(function(){return!1}):!!l&&t.Ze(s).next(function(){return!0})})}).catch(function(s){if(ul(s))return rn("IndexedDbPersistence","Failed to extend owner lease: ",s),t.isPrimary;if(!t.allowTabSynchronization)throw s;return rn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",s),!1}).then(function(s){t.isPrimary!==s&&t.Se.enqueueRetryable(function(){return t.Me(s)}),t.isPrimary=s})},o.prototype.Je=function(t){var s=this;return S(t).get(Es.key).next(function(l){return Wt.resolve(s.tn(l))})},o.prototype.en=function(t){return N(t).delete(this.clientId)},o.prototype.nn=function(){return(0,ee.mG)(this,void 0,void 0,function(){var t,s,l,C=this;return(0,ee.Jh)(this,function(D){switch(D.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(R){var W=us(R,Ys.store);return W.Nt().next(function(ae){var de=C.rn(ae,18e5),Me=ae.filter(function(Le){return-1===de.indexOf(Le)});return Wt.forEach(Me,function(Le){return W.delete(Le.clientId)}).next(function(){return Me})})}).catch(function(){return[]})]);case 1:if(t=D.sent(),this.Qe)for(s=0,l=t;s<l.length;s++)this.Qe.removeItem(this.on(l[s].clientId));D.label=2;case 2:return[2]}})})},o.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},o.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},o.prototype.Ye=function(t){var s=this;return this.Ce?Wt.resolve(!0):S(t).get(Es.key).next(function(l){if(null!==l&&s.sn(l.leaseTimestampMs,5e3)&&!s.cn(l.ownerId)){if(s.tn(l)&&s.networkEnabled)return!0;if(!s.tn(l)){if(!l.allowTabSynchronization)throw new Lt(mt.FAILED_PRECONDITION,d);return!1}}return!(!s.networkEnabled||!s.inForeground)||N(t).Nt().next(function(_){return void 0===s.rn(_,5e3).find(function(C){return!(s.clientId===C.clientId||!(!s.networkEnabled&&C.networkEnabled||!s.inForeground&&C.inForeground&&s.networkEnabled===C.networkEnabled))})})}).next(function(l){return s.isPrimary!==l&&rn("IndexedDbPersistence","Client "+(l?"is":"is not")+" eligible for a primary lease."),l})},o.prototype.shutdown=function(){return(0,ee.mG)(this,void 0,void 0,function(){var t=this;return(0,ee.Jh)(this,function(s){switch(s.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Es.store,Ys.store],function(l){var _=new ll(l,Xi.o);return t.Xe(_).next(function(){return t.en(_)})})];case 1:return s.sent(),this.Be.close(),this.ln(),[2]}})})},o.prototype.rn=function(t,s){var l=this;return t.filter(function(_){return l.sn(_.updateTimeMs,s)&&!l.cn(_.clientId)})},o.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(s){return N(s).Nt().next(function(l){return t.rn(l,18e5).map(function(_){return _.clientId})})})},Object.defineProperty(o.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),o.prototype.getMutationQueue=function(t){return ru.Qt(t,this.R,this.Ut,this.referenceDelegate)},o.prototype.getTargetCache=function(){return this.qe},o.prototype.getRemoteDocumentCache=function(){return this.Ue},o.prototype.getIndexManager=function(){return this.Ut},o.prototype.getBundleCache=function(){return this.Ke},o.prototype.runTransaction=function(t,s,l){var C,_=this;return rn("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===s?"readonly":"readwrite",Vh,function(R){return C=new ll(R,_.Ne?_.Ne.next():Xi.o),"readwrite-primary"===s?_.Je(C).next(function(W){return!!W||_.Ye(C)}).next(function(W){if(!W)throw Pi("Failed to obtain primary lease for action '"+t+"'."),_.isPrimary=!1,_.Se.enqueueRetryable(function(){return _.Me(!1)}),new Lt(mt.FAILED_PRECONDITION,vc);return l(C)}).next(function(W){return _.Ze(C).next(function(){return W})}):_.dn(C).next(function(){return l(C)})}).then(function(R){return C.raiseOnCommittedEvent(),R})},o.prototype.dn=function(t){var s=this;return S(t).get(Es.key).next(function(l){if(null!==l&&s.sn(l.leaseTimestampMs,5e3)&&!s.cn(l.ownerId)&&!s.tn(l)&&!(s.Ce||s.allowTabSynchronization&&l.allowTabSynchronization))throw new Lt(mt.FAILED_PRECONDITION,d)})},o.prototype.Ze=function(t){var s=new Es(this.clientId,this.allowTabSynchronization,Date.now());return S(t).put(Es.key,s)},o.yt=function(){return tu.yt()},o.prototype.Xe=function(t){var s=this,l=S(t);return l.get(Es.key).next(function(_){return s.tn(_)?(rn("IndexedDbPersistence","Releasing primary lease."),l.delete(Es.key)):Wt.resolve()})},o.prototype.sn=function(t,s){var l=Date.now();return!(t<l-s||t>l&&(Pi("Detected an update time that is in the future: "+t+" > "+l),1))},o.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},o.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},o.prototype.Ge=function(){var t,s=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){s.un(),(0,ze.G6)()&&navigator.appVersion.match("Version/14")&&s.Se.enterRestrictedMode(!0),s.Se.enqueueAndForget(function(){return s.shutdown()})},this.window.addEventListener("pagehide",this.ke))},o.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},o.prototype.cn=function(t){var s;try{var l=null!==(null===(s=this.Qe)||void 0===s?void 0:s.getItem(this.on(t)));return rn("IndexedDbPersistence","Client '"+t+"' "+(l?"is":"is not")+" zombied in LocalStorage"),l}catch(_){return Pi("IndexedDbPersistence","Failed to get zombied client id.",_),!1}},o.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Pi("Failed to set zombie client id.",t)}},o.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},o.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},o}();function S(o){return us(o,Es.store)}function N(o){return us(o,Ys.store)}function Q(o,t){var s=o.projectId;return o.isDefaultDatabase||(s+="."+o.database),"firestore/"+t+"/"+s+"/"}var ue=function(o,t){this.progress=o,this.wn=t},Ee=function(){function o(t,s,l){this.Ue=t,this._n=s,this.Ut=l}return o.prototype.mn=function(t,s){var l=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,s).next(function(_){return l.yn(t,s,_)})},o.prototype.yn=function(t,s,l){return this.Ue.getEntry(t,s).next(function(_){for(var C=0,D=l;C<D.length;C++)D[C].applyToLocalView(_);return _})},o.prototype.gn=function(t,s){t.forEach(function(l,_){for(var C=0,D=s;C<D.length;C++)D[C].applyToLocalView(_)})},o.prototype.pn=function(t,s){var l=this;return this.Ue.getEntries(t,s).next(function(_){return l.En(t,_).next(function(){return _})})},o.prototype.En=function(t,s){var l=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,s).next(function(_){return l.gn(s,_)})},o.prototype.getDocumentsMatchingQuery=function(t,s,l){return Wn.isDocumentKey((_=s).path)&&null===_.collectionGroup&&0===_.filters.length?this.Tn(t,s.path):Qu(s)?this.In(t,s,l):this.An(t,s,l);var _},o.prototype.Tn=function(t,s){return this.mn(t,new Wn(s)).next(function(l){var _=ac();return l.isFoundDocument()&&(_=_.insert(l.key,l)),_})},o.prototype.In=function(t,s,l){var _=this,C=s.collectionGroup,D=ac();return this.Ut.getCollectionParents(t,C).next(function(R){return Wt.forEach(R,function(W){var de,Me,ae=(de=s,Me=W.child(C),new Zs(Me,null,de.explicitOrderBy.slice(),de.filters.slice(),de.limit,de.limitType,de.startAt,de.endAt));return _.An(t,ae,l).next(function(de){de.forEach(function(Me,Le){D=D.insert(Me,Le)})})}).next(function(){return D})})},o.prototype.An=function(t,s,l){var _,C,D=this;return this.Ue.getDocumentsMatchingQuery(t,s,l).next(function(R){return _=R,D._n.getAllMutationBatchesAffectingQuery(t,s)}).next(function(R){return D.Rn(t,C=R,_).next(function(W){_=W;for(var ae=0,de=C;ae<de.length;ae++)for(var Me=de[ae],Le=0,ct=Me.mutations;Le<ct.length;Le++){var lt=ct[Le],wt=lt.key,en=_.get(wt);null==en&&(en=Or.newInvalidDocument(wt),_=_.insert(wt,en)),tl(lt,en,Me.localWriteTime),en.isFoundDocument()||(_=_.remove(wt))}})}).next(function(){return _.forEach(function(R,W){Ju(s,W)||(_=_.remove(R))}),_})},o.prototype.Rn=function(t,s,l){for(var _=$r(),C=0,D=s;C<D.length;C++)for(var R=0,W=D[C].mutations;R<W.length;R++){var ae=W[R];ae instanceof Cs&&null===l.get(ae.key)&&(_=_.add(ae.key))}var de=l;return this.Ue.getEntries(t,_).next(function(Me){return Me.forEach(function(Le,ct){ct.isFoundDocument()&&(de=de.insert(Le,ct))}),de})},o}(),Ge=function(){function o(t,s,l,_){this.targetId=t,this.fromCache=s,this.bn=l,this.vn=_}return o.Pn=function(t,s){for(var l=$r(),_=$r(),C=0,D=s.docChanges;C<D.length;C++){var R=D[C];switch(R.type){case 0:l=l.add(R.doc.key);break;case 1:_=_.add(R.doc.key)}}return new o(t,s.fromCache,l,_)},o}(),ht=function(){function o(){}return o.prototype.Vn=function(t){this.Sn=t},o.prototype.getDocumentsMatchingQuery=function(t,s,l,_){var D,C=this;return 0===(D=s).filters.length&&null===D.limit&&null==D.startAt&&null==D.endAt&&(0===D.explicitOrderBy.length||1===D.explicitOrderBy.length&&D.explicitOrderBy[0].field.isKeyField())||l.isEqual(x.min())?this.Dn(t,s):this.Sn.pn(t,_).next(function(D){var R=C.Cn(s,D);return(gu(s)||Da(s))&&C.Nn(s.limitType,R,_,l)?C.Dn(t,s):(wa()<=Ct.in.DEBUG&&rn("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),oc(s)),C.Sn.getDocumentsMatchingQuery(t,s,l).next(function(W){return R.forEach(function(ae){W=W.insert(ae.key,ae)}),W}))})},o.prototype.Cn=function(t,s){var l=new vo(Xu(t));return s.forEach(function(_,C){Ju(t,C)&&(l=l.add(C))}),l},o.prototype.Nn=function(t,s,l,_){if(l.size!==s.size)return!0;var C="F"===t?s.last():s.first();return!!C&&(C.hasPendingWrites||C.version.compareTo(_)>0)},o.prototype.Dn=function(t,s){return wa()<=Ct.in.DEBUG&&rn("QueryEngine","Using full collection scan to execute query:",oc(s)),this.Sn.getDocumentsMatchingQuery(t,s,x.min())},o}(),xt=function(){function o(t,s,l,_){this.persistence=t,this.xn=s,this.R=_,this.kn=new Qo(kr),this.Fn=new pl(function(C){return Ko(C)},mo),this.$n=x.min(),this._n=t.getMutationQueue(l),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Ee(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return o.prototype.collectGarbage=function(t){var s=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(l){return t.collect(l,s.kn)})},o}();function Dn(o,t,s,l){return new xt(o,t,s,l)}function bn(o,t){return(0,ee.mG)(this,void 0,void 0,function(){var s,l,_,C;return(0,ee.Jh)(this,function(D){switch(D.label){case 0:return s=sn(o),l=s._n,_=s.Mn,[4,s.persistence.runTransaction("Handle user change","readonly",function(R){var W;return s._n.getAllMutationBatches(R).next(function(ae){return W=ae,l=s.persistence.getMutationQueue(t),_=new Ee(s.On,l,s.persistence.getIndexManager()),l.getAllMutationBatches(R)}).next(function(ae){for(var de=[],Me=[],Le=$r(),ct=0,lt=W;ct<lt.length;ct++){var wt=lt[ct];de.push(wt.batchId);for(var en=0,hn=wt.mutations;en<hn.length;en++)Le=Le.add(hn[en].key)}for(var ir=0,Jr=ae;ir<Jr.length;ir++){var _i=Jr[ir];Me.push(_i.batchId);for(var Hi=0,Ds=_i.mutations;Hi<Ds.length;Hi++)Le=Le.add(Ds[Hi].key)}return _.pn(R,Le).next(function(Oh){return{Ln:Oh,removedBatchIds:de,addedBatchIds:Me}})})})];case 1:return C=D.sent(),[2,(s._n=l,s.Mn=_,s.xn.Vn(s.Mn),C)]}})})}function Yn(o,t){var s=sn(o);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(l){var D,R,W,ae,de,Me,Le,_=t.batch.keys(),C=s.On.newChangeBuffer({trackRemovals:!0});return(D=s,R=l,W=t,ae=C,de=W.batch,Me=de.keys(),Le=Wt.resolve(),Me.forEach(function(ct){Le=Le.next(function(){return ae.getEntry(R,ct)}).next(function(lt){var wt=W.docVersions.get(ct);Xn(null!==wt),lt.version.compareTo(wt)<0&&(de.applyToRemoteDocument(lt,W),lt.isValidDocument()&&ae.addEntry(lt,W.commitVersion))})}),Le.next(function(){return D._n.removeMutationBatch(R,de)})).next(function(){return C.apply(l)}).next(function(){return s._n.performConsistencyCheck(l)}).next(function(){return s.Mn.pn(l,_)})})}function Wr(o){var t=sn(o);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(s){return t.qe.getLastRemoteSnapshotVersion(s)})}function ts(o,t){var s=sn(o),l=t.snapshotVersion,_=s.kn;return s.persistence.runTransaction("Apply remote event","readwrite-primary",function(C){var D=s.On.newChangeBuffer({trackRemovals:!0});_=s.kn;var R=[];t.targetChanges.forEach(function(de,Me){var wt,en,hn,Le=_.get(Me);if(Le){R.push(s.qe.removeMatchingKeys(C,de.removedDocuments,Me).next(function(){return s.qe.addMatchingKeys(C,de.addedDocuments,Me)}));var ct=de.resumeToken;if(ct.approximateByteSize()>0){var lt=Le.withResumeToken(ct,l).withSequenceNumber(C.currentSequenceNumber);_=_.insert(Me,lt),wt=Le,hn=de,Xn((en=lt).resumeToken.approximateByteSize()>0),(0===wt.resumeToken.approximateByteSize()||en.snapshotVersion.toMicroseconds()-wt.snapshotVersion.toMicroseconds()>=3e8||hn.addedDocuments.size+hn.modifiedDocuments.size+hn.removedDocuments.size>0)&&R.push(s.qe.updateTargetData(C,lt))}}});var W=Ao();if(t.documentUpdates.forEach(function(de,Me){t.resolvedLimboDocuments.has(de)&&R.push(s.persistence.referenceDelegate.updateLimboDocument(C,de))}),R.push(ka(C,D,t.documentUpdates,l,void 0).next(function(de){W=de})),!l.isEqual(x.min())){var ae=s.qe.getLastRemoteSnapshotVersion(C).next(function(de){return s.qe.setTargetsMetadata(C,C.currentSequenceNumber,l)});R.push(ae)}return Wt.waitFor(R).next(function(){return D.apply(C)}).next(function(){return s.Mn.En(C,W)}).next(function(){return W})}).then(function(C){return s.kn=_,C})}function ka(o,t,s,l,_){var C=$r();return s.forEach(function(D){return C=C.add(D)}),t.getEntries(o,C).next(function(D){var R=Ao();return s.forEach(function(W,ae){var de=D.get(W),Me=(null==_?void 0:_.get(W))||l;ae.isNoDocument()&&ae.version.isEqual(x.min())?(t.removeEntry(W,Me),R=R.insert(W,ae)):!de.isValidDocument()||ae.version.compareTo(de.version)>0||0===ae.version.compareTo(de.version)&&de.hasPendingWrites?(t.addEntry(ae,Me),R=R.insert(W,ae)):rn("LocalStore","Ignoring outdated watch update for ",W,". Current version:",de.version," Watch version:",ae.version)}),R})}function gl(o,t){var s=sn(o);return s.persistence.runTransaction("Get next mutation batch","readonly",function(l){return void 0===t&&(t=-1),s._n.getNextMutationBatchAfterBatchId(l,t)})}function Io(o,t){var s=sn(o);return s.persistence.runTransaction("Allocate target","readwrite",function(l){var _;return s.qe.getTargetData(l,t).next(function(C){return C?Wt.resolve(_=C):s.qe.allocateTargetId(l).next(function(D){return _=new yc(t,D,0,l.currentSequenceNumber),s.qe.addTargetData(l,_).next(function(){return _})})})}).then(function(l){var _=s.kn.get(l.targetId);return(null===_||l.snapshotVersion.compareTo(_.snapshotVersion)>0)&&(s.kn=s.kn.insert(l.targetId,l),s.Fn.set(t,l.targetId)),l})}function Fs(o,t,s){return(0,ee.mG)(this,void 0,void 0,function(){var l,_,C,D;return(0,ee.Jh)(this,function(R){switch(R.label){case 0:l=sn(o),_=l.kn.get(t),C=s?"readwrite":"readwrite-primary",R.label=1;case 1:return R.trys.push([1,4,,5]),s?[3,3]:[4,l.persistence.runTransaction("Release target",C,function(W){return l.persistence.referenceDelegate.removeTarget(W,_)})];case 2:R.sent(),R.label=3;case 3:return[3,5];case 4:if(!ul(D=R.sent()))throw D;return rn("LocalStore","Failed to update sequence numbers for target "+t+": "+D),[3,5];case 5:return l.kn=l.kn.remove(t),l.Fn.delete(_.target),[2]}})})}function Gh(o,t,s){var l=sn(o),_=x.min(),C=$r();return l.persistence.runTransaction("Execute query","readonly",function(D){return(R=l,W=D,ae=Bo(t),de=sn(R),Me=de.Fn.get(ae),void 0!==Me?Wt.resolve(de.kn.get(Me)):de.qe.getTargetData(W,ae)).next(function(R){if(R)return _=R.lastLimboFreeSnapshotVersion,l.qe.getMatchingKeysForTargetId(D,R.targetId).next(function(W){C=W})}).next(function(){return l.xn.getDocumentsMatchingQuery(D,t,s?_:x.min(),s?C:$r())}).next(function(R){return{documents:R,Bn:C}});var R,W,ae,de,Me})}function Nf(o,t){var s=sn(o),l=sn(s.qe),_=s.kn.get(t);return _?Promise.resolve(_.target):s.persistence.runTransaction("Get target data","readonly",function(C){return l.lt(C,t).next(function(D){return D?D.target:null})})}function ig(o){var t=sn(o);return t.persistence.runTransaction("Get new document changes","readonly",function(s){return _=s,C=t.$n,D=sn(t.On),R=Ao(),W=dl(C),ae=f(_),de=IDBKeyRange.lowerBound(W,!0),ae.$t({index:$i.readTimeIndex,range:de},function(Me,Le){var ct=Pu(D.R,Le);R=R.insert(ct.key,ct),W=Le.readTime}).next(function(){return{wn:R,readTime:Md(W)}});var _,C,D,R,W,ae,de}).then(function(s){var l=s.wn;return t.$n=s.readTime,l})}function t_(o){return(0,ee.mG)(this,void 0,void 0,function(){var t;return(0,ee.Jh)(this,function(s){return[2,(t=sn(o)).persistence.runTransaction("Synchronize last document change read time","readonly",function(l){return C=f(l),D=x.min(),C.$t({index:$i.readTimeIndex,reverse:!0},function(R,W,ae){W.readTime&&(D=Md(W.readTime)),ae.done()}).next(function(){return D});var C,D}).then(function(l){t.$n=l})]})})}function og(o,t,s,l){return(0,ee.mG)(this,void 0,void 0,function(){var _,C,D,R,W,ae,de,Me,Le,ct;return(0,ee.Jh)(this,function(lt){switch(lt.label){case 0:for(_=sn(o),C=$r(),D=Ao(),R=uc(),W=0,ae=s;W<ae.length;W++)Me=t.qn((de=ae[W]).metadata.name),de.document&&(C=C.add(Me)),D=D.insert(Me,t.Un(de)),R=R.insert(Me,t.Kn(de.metadata.readTime));return Le=_.On.newChangeBuffer({trackRemovals:!0}),[4,Io(_,(wt=l,Bo(pu(Te.fromString("__bundle__/docs/"+wt)))))];case 1:return ct=lt.sent(),[2,_.persistence.runTransaction("Apply bundle documents","readwrite",function(wt){return ka(wt,Le,D,x.min(),R).next(function(en){return Le.apply(wt),en}).next(function(en){return _.qe.removeMatchingKeysForTargetId(wt,ct.targetId).next(function(){return _.qe.addMatchingKeys(wt,C,ct.targetId)}).next(function(){return _.Mn.En(wt,en)}).next(function(){return en})})})]}var wt})})}function Lf(o,t,s){return void 0===s&&(s=$r()),(0,ee.mG)(this,void 0,void 0,function(){var l,_;return(0,ee.Jh)(this,function(C){switch(C.label){case 0:return[4,Io(o,Bo(Id(t.bundledQuery)))];case 1:return l=C.sent(),[2,(_=sn(o)).persistence.runTransaction("Save named query","readwrite",function(D){var R=zi(t.readTime);if(l.snapshotVersion.compareTo(R)>=0)return _.Ke.saveNamedQuery(D,t);var W=l.withResumeToken(ar.EMPTY_BYTE_STRING,R);return _.kn=_.kn.insert(W.targetId,W),_.qe.updateTargetData(D,W).next(function(){return _.qe.removeMatchingKeysForTargetId(D,l.targetId)}).next(function(){return _.qe.addMatchingKeys(D,s,l.targetId)}).next(function(){return _.Ke.saveNamedQuery(D,t)})})]}})})}var sg=function(){function o(t){this.R=t,this.Qn=new Map,this.jn=new Map}return o.prototype.getBundleMetadata=function(t,s){return Wt.resolve(this.Qn.get(s))},o.prototype.saveBundleMetadata=function(t,s){var l;return this.Qn.set(s.id,{id:(l=s).id,version:l.version,createTime:zi(l.createTime)}),Wt.resolve()},o.prototype.getNamedQuery=function(t,s){return Wt.resolve(this.jn.get(s))},o.prototype.saveNamedQuery=function(t,s){return this.jn.set(s.name,{name:(l=s).name,query:Id(l.bundledQuery),readTime:zi(l.readTime)}),Wt.resolve();var l},o}(),ag=function(){function o(){this.Wn=new vo(ls.Gn),this.zn=new vo(ls.Hn)}return o.prototype.isEmpty=function(){return this.Wn.isEmpty()},o.prototype.addReference=function(t,s){var l=new ls(t,s);this.Wn=this.Wn.add(l),this.zn=this.zn.add(l)},o.prototype.Jn=function(t,s){var l=this;t.forEach(function(_){return l.addReference(_,s)})},o.prototype.removeReference=function(t,s){this.Yn(new ls(t,s))},o.prototype.Xn=function(t,s){var l=this;t.forEach(function(_){return l.removeReference(_,s)})},o.prototype.Zn=function(t){var s=this,l=new Wn(new Te([])),_=new ls(l,t),C=new ls(l,t+1),D=[];return this.zn.forEachInRange([_,C],function(R){s.Yn(R),D.push(R.key)}),D},o.prototype.ts=function(){var t=this;this.Wn.forEach(function(s){return t.Yn(s)})},o.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},o.prototype.es=function(t){var s=new Wn(new Te([])),l=new ls(s,t),_=new ls(s,t+1),C=$r();return this.zn.forEachInRange([l,_],function(D){C=C.add(D.key)}),C},o.prototype.containsKey=function(t){var s=new ls(t,0),l=this.Wn.firstAfterOrEqual(s);return null!==l&&t.isEqual(l.key)},o}(),ls=function(){function o(t,s){this.key=t,this.ns=s}return o.Gn=function(t,s){return Wn.comparator(t.key,s.key)||kr(t.ns,s.ns)},o.Hn=function(t,s){return kr(t.ns,s.ns)||Wn.comparator(t.key,s.key)},o}(),n_=function(){function o(t,s){this.Ut=t,this.referenceDelegate=s,this._n=[],this.ss=1,this.rs=new vo(ls.Gn)}return o.prototype.checkEmpty=function(t){return Wt.resolve(0===this._n.length)},o.prototype.addMutationBatch=function(t,s,l,_){var C=this.ss;this.ss++;var D=new xu(C,s,l,_);this._n.push(D);for(var R=0,W=_;R<W.length;R++){var ae=W[R];this.rs=this.rs.add(new ls(ae.key,C)),this.Ut.addToCollectionParentIndex(t,ae.key.path.popLast())}return Wt.resolve(D)},o.prototype.lookupMutationBatch=function(t,s){return Wt.resolve(this.os(s))},o.prototype.getNextMutationBatchAfterBatchId=function(t,s){var _=this.cs(s+1),C=_<0?0:_;return Wt.resolve(this._n.length>C?this._n[C]:null)},o.prototype.getHighestUnacknowledgedBatchId=function(){return Wt.resolve(0===this._n.length?-1:this.ss-1)},o.prototype.getAllMutationBatches=function(t){return Wt.resolve(this._n.slice())},o.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,s){var l=this,_=new ls(s,0),C=new ls(s,Number.POSITIVE_INFINITY),D=[];return this.rs.forEachInRange([_,C],function(R){var W=l.os(R.ns);D.push(W)}),Wt.resolve(D)},o.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,s){var l=this,_=new vo(kr);return s.forEach(function(C){var D=new ls(C,0),R=new ls(C,Number.POSITIVE_INFINITY);l.rs.forEachInRange([D,R],function(W){_=_.add(W.ns)})}),Wt.resolve(this.us(_))},o.prototype.getAllMutationBatchesAffectingQuery=function(t,s){var l=s.path,_=l.length+1,C=l;Wn.isDocumentKey(C)||(C=C.child(""));var D=new ls(new Wn(C),0),R=new vo(kr);return this.rs.forEachWhile(function(W){var ae=W.key.path;return!!l.isPrefixOf(ae)&&(ae.length===_&&(R=R.add(W.ns)),!0)},D),Wt.resolve(this.us(R))},o.prototype.us=function(t){var s=this,l=[];return t.forEach(function(_){var C=s.os(_);null!==C&&l.push(C)}),l},o.prototype.removeMutationBatch=function(t,s){var l=this;Xn(0===this.hs(s.batchId,"removed")),this._n.shift();var _=this.rs;return Wt.forEach(s.mutations,function(C){var D=new ls(C.key,s.batchId);return _=_.delete(D),l.referenceDelegate.markPotentiallyOrphaned(t,C.key)}).next(function(){l.rs=_})},o.prototype.Gt=function(t){},o.prototype.containsKey=function(t,s){var l=new ls(s,0),_=this.rs.firstAfterOrEqual(l);return Wt.resolve(s.isEqual(_&&_.key))},o.prototype.performConsistencyCheck=function(t){return Wt.resolve()},o.prototype.hs=function(t,s){return this.cs(t)},o.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},o.prototype.os=function(t){var s=this.cs(t);return s<0||s>=this._n.length?null:this._n[s]},o}(),ug=function(){function o(t,s){this.Ut=t,this.ls=s,this.docs=new Qo(Wn.comparator),this.size=0}return o.prototype.addEntry=function(t,s,l){var _=s.key,C=this.docs.get(_),D=C?C.size:0,R=this.ls(s);return this.docs=this.docs.insert(_,{document:s.clone(),size:R,readTime:l}),this.size+=R-D,this.Ut.addToCollectionParentIndex(t,_.path.popLast())},o.prototype.removeEntry=function(t){var s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)},o.prototype.getEntry=function(t,s){var l=this.docs.get(s);return Wt.resolve(l?l.document.clone():Or.newInvalidDocument(s))},o.prototype.getEntries=function(t,s){var l=this,_=Ao();return s.forEach(function(C){var D=l.docs.get(C);_=_.insert(C,D?D.document.clone():Or.newInvalidDocument(C))}),Wt.resolve(_)},o.prototype.getDocumentsMatchingQuery=function(t,s,l){for(var _=Ao(),C=new Wn(s.path.child("")),D=this.docs.getIteratorFrom(C);D.hasNext();){var R=D.getNext(),ae=R.value,de=ae.document,Me=ae.readTime;if(!s.path.isPrefixOf(R.key.path))break;Me.compareTo(l)<=0||Ju(s,de)&&(_=_.insert(de.key,de.clone()))}return Wt.resolve(_)},o.prototype.fs=function(t,s){return Wt.forEach(this.docs,function(l){return s(l)})},o.prototype.newChangeBuffer=function(t){return new r_(this)},o.prototype.getSize=function(t){return Wt.resolve(this.size)},o}(),r_=function(o){function t(s){var l=this;return(l=o.call(this)||this).Ie=s,l}return(0,ee.ZT)(t,o),t.prototype.applyChanges=function(s){var l=this,_=[];return this.changes.forEach(function(C,D){D.document.isValidDocument()?_.push(l.Ie.addEntry(s,D.document,l.getReadTime(C))):l.Ie.removeEntry(C)}),Wt.waitFor(_)},t.prototype.getFromCache=function(s,l){return this.Ie.getEntry(s,l)},t.prototype.getAllFromCache=function(s,l){return this.Ie.getEntries(s,l)},t}(kd),i_=function(){function o(t){this.persistence=t,this.ds=new pl(function(s){return Ko(s)},mo),this.lastRemoteSnapshotVersion=x.min(),this.highestTargetId=0,this.ws=0,this._s=new ag,this.targetCount=0,this.ys=fl.Jt()}return o.prototype.forEachTarget=function(t,s){return this.ds.forEach(function(l,_){return s(_)}),Wt.resolve()},o.prototype.getLastRemoteSnapshotVersion=function(t){return Wt.resolve(this.lastRemoteSnapshotVersion)},o.prototype.getHighestSequenceNumber=function(t){return Wt.resolve(this.ws)},o.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Wt.resolve(this.highestTargetId)},o.prototype.setTargetsMetadata=function(t,s,l){return l&&(this.lastRemoteSnapshotVersion=l),s>this.ws&&(this.ws=s),Wt.resolve()},o.prototype.te=function(t){this.ds.set(t.target,t);var s=t.targetId;s>this.highestTargetId&&(this.ys=new fl(s),this.highestTargetId=s),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},o.prototype.addTargetData=function(t,s){return this.te(s),this.targetCount+=1,Wt.resolve()},o.prototype.updateTargetData=function(t,s){return this.te(s),Wt.resolve()},o.prototype.removeTargetData=function(t,s){return this.ds.delete(s.target),this._s.Zn(s.targetId),this.targetCount-=1,Wt.resolve()},o.prototype.removeTargets=function(t,s,l){var _=this,C=0,D=[];return this.ds.forEach(function(R,W){W.sequenceNumber<=s&&null===l.get(W.targetId)&&(_.ds.delete(R),D.push(_.removeMatchingKeysForTargetId(t,W.targetId)),C++)}),Wt.waitFor(D).next(function(){return C})},o.prototype.getTargetCount=function(t){return Wt.resolve(this.targetCount)},o.prototype.getTargetData=function(t,s){var l=this.ds.get(s)||null;return Wt.resolve(l)},o.prototype.addMatchingKeys=function(t,s,l){return this._s.Jn(s,l),Wt.resolve()},o.prototype.removeMatchingKeys=function(t,s,l){this._s.Xn(s,l);var _=this.persistence.referenceDelegate,C=[];return _&&s.forEach(function(D){C.push(_.markPotentiallyOrphaned(t,D))}),Wt.waitFor(C)},o.prototype.removeMatchingKeysForTargetId=function(t,s){return this._s.Zn(s),Wt.resolve()},o.prototype.getMatchingKeysForTargetId=function(t,s){var l=this._s.es(s);return Wt.resolve(l)},o.prototype.containsKey=function(t,s){return Wt.resolve(this._s.containsKey(s))},o}(),Uu=function(){function o(t,s){var l=this;this.gs={},this.Ne=new Xi(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new i_(this),this.Ut=new Bh,this.Ue=new ug(this.Ut,function(D){return l.referenceDelegate.ps(D)}),this.R=new Rs(s),this.Ke=new sg(this.R)}return o.prototype.start=function(){return Promise.resolve()},o.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(o.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),o.prototype.setDatabaseDeletedListener=function(){},o.prototype.setNetworkEnabled=function(){},o.prototype.getIndexManager=function(){return this.Ut},o.prototype.getMutationQueue=function(t){var s=this.gs[t.toKey()];return s||(s=new n_(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=s),s},o.prototype.getTargetCache=function(){return this.qe},o.prototype.getRemoteDocumentCache=function(){return this.Ue},o.prototype.getBundleCache=function(){return this.Ke},o.prototype.runTransaction=function(t,s,l){var _=this;rn("MemoryPersistence","Starting transaction:",t);var C=new o_(this.Ne.next());return this.referenceDelegate.Es(),l(C).next(function(D){return _.referenceDelegate.Ts(C).next(function(){return D})}).toPromise().then(function(D){return C.raiseOnCommittedEvent(),D})},o.prototype.Is=function(t,s){return Wt.or(Object.values(this.gs).map(function(l){return function(){return l.containsKey(t,s)}}))},o}(),o_=function(o){function t(s){var l=this;return(l=o.call(this)||this).currentSequenceNumber=s,l}return(0,ee.ZT)(t,o),t}(Td),lg=function(){function o(t){this.persistence=t,this.As=new ag,this.Rs=null}return o.bs=function(t){return new o(t)},Object.defineProperty(o.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Ln()},enumerable:!1,configurable:!0}),o.prototype.addReference=function(t,s,l){return this.As.addReference(l,s),this.vs.delete(l.toString()),Wt.resolve()},o.prototype.removeReference=function(t,s,l){return this.As.removeReference(l,s),this.vs.add(l.toString()),Wt.resolve()},o.prototype.markPotentiallyOrphaned=function(t,s){return this.vs.add(s.toString()),Wt.resolve()},o.prototype.removeTarget=function(t,s){var l=this;this.As.Zn(s.targetId).forEach(function(C){return l.vs.add(C.toString())});var _=this.persistence.getTargetCache();return _.getMatchingKeysForTargetId(t,s.targetId).next(function(C){C.forEach(function(D){return l.vs.add(D.toString())})}).next(function(){return _.removeTargetData(t,s)})},o.prototype.Es=function(){this.Rs=new Set},o.prototype.Ts=function(t){var s=this,l=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wt.forEach(this.vs,function(_){var C=Wn.fromPath(_);return s.Ps(t,C).next(function(D){D||l.removeEntry(C)})}).next(function(){return s.Rs=null,l.apply(t)})},o.prototype.updateLimboDocument=function(t,s){var l=this;return this.Ps(t,s).next(function(_){_?l.vs.delete(s.toString()):l.vs.add(s.toString())})},o.prototype.ps=function(t){return 0},o.prototype.Ps=function(t,s){var l=this;return Wt.or([function(){return Wt.resolve(l.As.containsKey(s))},function(){return l.persistence.getTargetCache().containsKey(t,s)},function(){return l.persistence.Is(t,s)}])},o}(),Ts=function(){function o(t){this.uid=t}return o.prototype.isAuthenticated=function(){return null!=this.uid},o.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},o.prototype.isEqual=function(t){return t.uid===this.uid},o}();function cg(o,t){return"firestore_clients_"+o+"_"+t}function dg(o,t,s){var l="firestore_mutations_"+o+"_"+s;return t.isAuthenticated()&&(l+="_"+t.uid),l}function Uf(o,t){return"firestore_targets_"+o+"_"+t}Ts.UNAUTHENTICATED=new Ts(null),Ts.GOOGLE_CREDENTIALS=new Ts("google-credentials-uid"),Ts.FIRST_PARTY=new Ts("first-party-uid"),Ts.MOCK_USER=new Ts("mock-user");var Vf=function(){function o(t,s,l,_){this.user=t,this.batchId=s,this.state=l,this.error=_}return o.Vs=function(t,s,l){var _,C=JSON.parse(l),D="object"==typeof C&&-1!==["pending","acknowledged","rejected"].indexOf(C.state)&&(void 0===C.error||"object"==typeof C.error);return D&&C.error&&(D="string"==typeof C.error.message&&"string"==typeof C.error.code)&&(_=new Lt(C.error.code,C.error.message)),D?new o(t,s,C.state,_):(Pi("SharedClientState","Failed to parse mutation state for ID '"+s+"': "+l),null)},o.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},o}(),Bf=function(){function o(t,s,l){this.targetId=t,this.state=s,this.error=l}return o.Vs=function(t,s){var l,_=JSON.parse(s),C="object"==typeof _&&-1!==["not-current","current","rejected"].indexOf(_.state)&&(void 0===_.error||"object"==typeof _.error);return C&&_.error&&(C="string"==typeof _.error.message&&"string"==typeof _.error.code)&&(l=new Lt(_.error.code,_.error.message)),C?new o(t,_.state,l):(Pi("SharedClientState","Failed to parse target state for ID '"+t+"': "+s),null)},o.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},o}(),hg=function(){function o(t,s){this.clientId=t,this.activeTargetIds=s}return o.Vs=function(t,s){for(var l=JSON.parse(s),_="object"==typeof l&&l.activeTargetIds instanceof Array,C=rl(),D=0;_&&D<l.activeTargetIds.length;++D)_=cu(l.activeTargetIds[D]),C=C.add(l.activeTargetIds[D]);return _?new o(t,C):(Pi("SharedClientState","Failed to parse client data for instance '"+t+"': "+s),null)},o}(),s_=function(){function o(t,s){this.clientId=t,this.onlineState=s}return o.Vs=function(t){var s=JSON.parse(t);return"object"==typeof s&&-1!==["Unknown","Online","Offline"].indexOf(s.onlineState)&&"string"==typeof s.clientId?new o(s.clientId,s.onlineState):(Pi("SharedClientState","Failed to parse online state: "+t),null)},o}(),Cr=function(){function o(){this.activeTargetIds=rl()}return o.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},o.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},o.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},o}(),Zh=function(){function o(t,s,l,_,C){this.window=t,this.Se=s,this.persistenceKey=l,this.Ns=_,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Qo(kr),this.started=!1,this.$s=[];var D=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=C,this.Os=cg(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new Cr),this.Ls=new RegExp("^firestore_clients_"+D+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+D+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+D+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(R){return"firestore_bundle_loaded_"+R}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return o.yt=function(t){return!(!t||!t.localStorage)},o.prototype.start=function(){return(0,ee.mG)(this,void 0,void 0,function(){var t,s,l,_,C,D,R,W,ae,de,Le=this;return(0,ee.Jh)(this,function(ct){switch(ct.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=ct.sent(),s=0,l=t;s<l.length;s++)(_=l[s])!==this.Ns&&(C=this.getItem(cg(this.persistenceKey,_)))&&(D=hg.Vs(_,C))&&(this.Fs=this.Fs.insert(D.clientId,D));for(this.Qs(),(R=this.storage.getItem(this.Us))&&(W=this.js(R))&&this.Ws(W),ae=0,de=this.$s;ae<de.length;ae++)this.ks(de[ae]);return this.$s=[],this.window.addEventListener("pagehide",function(){return Le.shutdown()}),this.started=!0,[2]}})})},o.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},o.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},o.prototype.isActiveQueryTarget=function(t){var s=!1;return this.Fs.forEach(function(l,_){_.activeTargetIds.has(t)&&(s=!0)}),s},o.prototype.addPendingMutation=function(t){this.zs(t,"pending")},o.prototype.updateMutationState=function(t,s,l){this.zs(t,s,l),this.Hs(t)},o.prototype.addLocalQueryTarget=function(t){var s="not-current";if(this.isActiveQueryTarget(t)){var l=this.storage.getItem(Uf(this.persistenceKey,t));if(l){var _=Bf.Vs(t,l);_&&(s=_.state)}}return this.Js.Ds(t),this.Qs(),s},o.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},o.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},o.prototype.clearQueryState=function(t){this.removeItem(Uf(this.persistenceKey,t))},o.prototype.updateQueryState=function(t,s,l){this.Ys(t,s,l)},o.prototype.handleUserChange=function(t,s,l){var _=this;s.forEach(function(C){_.Hs(C)}),this.currentUser=t,l.forEach(function(C){_.addPendingMutation(C)})},o.prototype.setOnlineState=function(t){this.Xs(t)},o.prototype.notifyBundleLoaded=function(){this.Zs()},o.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},o.prototype.getItem=function(t){var s=this.storage.getItem(t);return rn("SharedClientState","READ",t,s),s},o.prototype.setItem=function(t,s){rn("SharedClientState","SET",t,s),this.storage.setItem(t,s)},o.prototype.removeItem=function(t){rn("SharedClientState","REMOVE",t),this.storage.removeItem(t)},o.prototype.ks=function(t){var s=this,l=t;if(l.storageArea===this.storage){if(rn("SharedClientState","EVENT",l.key,l.newValue),l.key===this.Os)return void Pi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,ee.mG)(s,void 0,void 0,function(){var _,C,D,R,W,ae;return(0,ee.Jh)(this,function(de){if(this.started){if(null!==l.key)if(this.Ls.test(l.key)){if(null==l.newValue)return _=this.ti(l.key),[2,this.ei(_,null)];if(C=this.ni(l.key,l.newValue))return[2,this.ei(C.clientId,C)]}else if(this.Bs.test(l.key)){if(null!==l.newValue&&(D=this.si(l.key,l.newValue)))return[2,this.ii(D)]}else if(this.qs.test(l.key)){if(null!==l.newValue&&(R=this.ri(l.key,l.newValue)))return[2,this.oi(R)]}else if(l.key===this.Us){if(null!==l.newValue&&(W=this.js(l.newValue)))return[2,this.Ws(W)]}else if(l.key===this.Ms)(ae=function(Me){var Le=Xi.o;if(null!=Me)try{var ct=JSON.parse(Me);Xn("number"==typeof ct),Le=ct}catch(lt){Pi("SharedClientState","Failed to read sequence number from WebStorage",lt)}return Le}(l.newValue))!==Xi.o&&this.sequenceNumberHandler(ae);else if(l.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(l);return[2]})})})}},Object.defineProperty(o.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),o.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},o.prototype.zs=function(t,s,l){var _=new Vf(this.currentUser,t,s,l),C=dg(this.persistenceKey,this.currentUser,t);this.setItem(C,_.Ss())},o.prototype.Hs=function(t){var s=dg(this.persistenceKey,this.currentUser,t);this.removeItem(s)},o.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},o.prototype.Ys=function(t,s,l){var _=Uf(this.persistenceKey,t),C=new Bf(t,s,l);this.setItem(_,C.Ss())},o.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},o.prototype.ti=function(t){var s=this.Ls.exec(t);return s?s[1]:null},o.prototype.ni=function(t,s){var l=this.ti(t);return hg.Vs(l,s)},o.prototype.si=function(t,s){var l=this.Bs.exec(t),_=Number(l[1]);return Vf.Vs(new Ts(void 0!==l[2]?l[2]:null),_,s)},o.prototype.ri=function(t,s){var l=this.qs.exec(t),_=Number(l[1]);return Bf.Vs(_,s)},o.prototype.js=function(t){return s_.Vs(t)},o.prototype.ii=function(t){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(s){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(rn("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},o.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},o.prototype.ei=function(t,s){var l=this,_=s?this.Fs.insert(t,s):this.Fs.remove(t),C=this.Gs(this.Fs),D=this.Gs(_),R=[],W=[];return D.forEach(function(ae){C.has(ae)||R.push(ae)}),C.forEach(function(ae){D.has(ae)||W.push(ae)}),this.syncEngine.hi(R,W).then(function(){l.Fs=_})},o.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},o.prototype.Gs=function(t){var s=rl();return t.forEach(function(l,_){s=s.unionWith(_.activeTargetIds)}),s},o}(),jf=function(){function o(){this.li=new Cr,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return o.prototype.addPendingMutation=function(t){},o.prototype.updateMutationState=function(t,s,l){},o.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},o.prototype.updateQueryState=function(t,s,l){this.fi[t]=s},o.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},o.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},o.prototype.clearQueryState=function(t){delete this.fi[t]},o.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},o.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},o.prototype.start=function(){return this.li=new Cr,Promise.resolve()},o.prototype.handleUserChange=function(t,s,l){},o.prototype.setOnlineState=function(t){},o.prototype.shutdown=function(){},o.prototype.writeSequenceNumber=function(t){},o.prototype.notifyBundleLoaded=function(){},o}(),qh=function(){function o(){}return o.prototype.di=function(t){},o.prototype.shutdown=function(){},o}(),iu=function(){function o(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return o.prototype.di=function(t){this.gi.push(t)},o.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},o.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},o.prototype._i=function(){rn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,s=this.gi;t<s.length;t++)(0,s[t])(0)},o.prototype.yi=function(){rn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,s=this.gi;t<s.length;t++)(0,s[t])(1)},o.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},o}(),fg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},a_=function(){function o(t){this.Ei=t.Ei,this.Ti=t.Ti}return o.prototype.Ii=function(t){this.Ai=t},o.prototype.Ri=function(t){this.bi=t},o.prototype.onMessage=function(t){this.vi=t},o.prototype.close=function(){this.Ti()},o.prototype.send=function(t){this.Ei(t)},o.prototype.Pi=function(){this.Ai()},o.prototype.Vi=function(t){this.bi(t)},o.prototype.Si=function(t){this.vi(t)},o}(),Hf=function(o){function t(s){var l=this;return(l=o.call(this,s)||this).forceLongPolling=s.forceLongPolling,l.autoDetectLongPolling=s.autoDetectLongPolling,l.useFetchStreams=s.useFetchStreams,l}return(0,ee.ZT)(t,o),t.prototype.Fi=function(s,l,_,C){return new Promise(function(D,R){var W=new ja;W.listenOnce(qu.COMPLETE,function(){try{switch(W.getLastErrorCode()){case ba.NO_ERROR:var de=W.getResponseJson();rn("Connection","XHR received:",JSON.stringify(de)),D(de);break;case ba.TIMEOUT:rn("Connection",'RPC "'+s+'" timed out'),R(new Lt(mt.DEADLINE_EXCEEDED,"Request time out"));break;case ba.HTTP_ERROR:var Me=W.getStatus();if(rn("Connection",'RPC "'+s+'" failed with status:',Me,"response text:",W.getResponseText()),Me>0){var Le=W.getResponseJson().error;if(Le&&Le.status&&Le.message){var ct=(wt=Le.status.toLowerCase().replace(/_/g,"-"),Object.values(mt).indexOf(wt)>=0?wt:mt.UNKNOWN);R(new Lt(ct,Le.message))}else R(new Lt(mt.UNKNOWN,"Server responded with status "+W.getStatus()))}else R(new Lt(mt.UNAVAILABLE,"Connection failed."));break;default:Ln()}}finally{rn("Connection",'RPC "'+s+'" completed.')}var wt});var ae=JSON.stringify(C);W.send(l,"POST",ae,_,15)})},t.prototype.Oi=function(s,l){var _=[this.Di,"/","google.firestore.v1.Firestore","/",s,"/channel"],C=new ma,D=Vi(),R={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(R.xmlHttpFactory=new Al({})),this.ki(R.initMessageHeaders,l),(0,ze.uI)()||(0,ze.b$)()||(0,ze.d)()||(0,ze.w1)()||(0,ze.Mn)()||(0,ze.ru)()||(R.httpHeadersOverwriteParam="$httpHeaders");var W=_.join("");rn("Connection","Creating WebChannel: "+W,R);var ae=C.createWebChannel(W,R),de=!1,Me=!1,Le=new a_({Ei:function(lt){Me?rn("Connection","Not sending because WebChannel is closed:",lt):(de||(rn("Connection","Opening WebChannel transport."),ae.open(),de=!0),rn("Connection","WebChannel sending:",lt),ae.send(lt))},Ti:function(){return ae.close()}}),ct=function(lt,wt,en){lt.listen(wt,function(hn){try{en(hn)}catch(rr){setTimeout(function(){throw rr},0)}})};return ct(ae,na.EventType.OPEN,function(){Me||rn("Connection","WebChannel transport opened.")}),ct(ae,na.EventType.CLOSE,function(){Me||(Me=!0,rn("Connection","WebChannel transport closed"),Le.Vi())}),ct(ae,na.EventType.ERROR,function(lt){Me||(Me=!0,ys("Connection","WebChannel transport errored:",lt),Le.Vi(new Lt(mt.UNAVAILABLE,"The operation could not be completed")))}),ct(ae,na.EventType.MESSAGE,function(lt){var wt;if(!Me){var en=lt.data[0];Xn(!!en);var rr=en.error||(null===(wt=en[0])||void 0===wt?void 0:wt.error);if(rr){rn("Connection","WebChannel received error:",rr);var ir=rr.status,Jr=function(Hi){var Ds=_o[Hi];if(void 0!==Ds)return Zc(Ds)}(ir),_i=rr.message;void 0===Jr&&(Jr=mt.INTERNAL,_i="Unknown error status: "+ir+" with message "+rr.message),Me=!0,Le.Vi(new Lt(Jr,_i)),ae.close()}else rn("Connection","WebChannel received:",en),Le.Si(en)}}),ct(D,Ba.STAT_EVENT,function(lt){lt.stat===Vs_PROXY?rn("Connection","Detected buffering proxy"):lt.stat===Vs_NOPROXY&&rn("Connection","Detected no buffering proxy")}),setTimeout(function(){Le.Pi()},0),Le},t}(function(){function o(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return o.prototype.Ni=function(t,s,l,_){var C=this.xi(t,s);rn("RestConnection","Sending: ",C,l);var D={};return this.ki(D,_),this.Fi(t,C,D,l).then(function(R){return rn("RestConnection","Received: ",R),R},function(R){throw ys("RestConnection",t+" failed with error: ",R,"url: ",C,"request:",l),R})},o.prototype.$i=function(t,s,l,_){return this.Ni(t,s,l,_)},o.prototype.ki=function(t,s){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s)for(var l in s.authHeaders)s.authHeaders.hasOwnProperty(l)&&(t[l]=s.authHeaders[l])},o.prototype.xi=function(t,s){return this.Di+"/v1/"+s+":"+fg[t]},o}());function ml(){return"undefined"!=typeof window?window:null}function Ld(){return"undefined"!=typeof document?document:null}function Ud(o){return new kl(o,!0)}var _h=function(){function o(t,s,l,_,C){void 0===l&&(l=1e3),void 0===_&&(_=1.5),void 0===C&&(C=6e4),this.Se=t,this.timerId=s,this.Mi=l,this.Li=_,this.Bi=C,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return o.prototype.reset=function(){this.qi=0},o.prototype.Qi=function(){this.qi=this.Bi},o.prototype.ji=function(t){var s=this;this.cancel();var l=Math.floor(this.qi+this.Wi()),_=Math.max(0,Date.now()-this.Ki),C=Math.max(0,l-_);C>0&&rn("ExponentialBackoff","Backing off for "+C+" ms (base delay: "+this.qi+" ms, delay with jitter: "+l+" ms, last attempt: "+_+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,C,function(){return s.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},o.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},o.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},o.prototype.Wi=function(){return(Math.random()-.5)*this.qi},o}(),u_=function(){function o(t,s,l,_,C,D){this.Se=t,this.zi=l,this.Hi=_,this.Ji=C,this.listener=D,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new _h(t,s)}return o.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},o.prototype.er=function(){return 2===this.state},o.prototype.start=function(){3!==this.state?this.auth():this.nr()},o.prototype.stop=function(){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},o.prototype.sr=function(){this.state=0,this.Zi.reset()},o.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},o.prototype.cr=function(t){this.ur(),this.stream.send(t)},o.prototype.rr=function(){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},o.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},o.prototype.close=function(t,s){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(l){switch(l.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():s&&s.code===mt.RESOURCE_EXHAUSTED?(Pi(s.toString()),Pi("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):s&&s.code===mt.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(s)];case 1:return l.sent(),[2]}})})},o.prototype.ar=function(){},o.prototype.auth=function(){var t=this;this.state=1;var s=this.hr(this.Yi),l=this.Yi;this.Ji.getToken().then(function(_){t.Yi===l&&t.lr(_)},function(_){s(function(){var C=new Lt(mt.UNKNOWN,"Fetching auth token failed: "+_.message);return t.dr(C)})})},o.prototype.lr=function(t){var s=this,l=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){l(function(){return s.state=2,s.listener.Ii()})}),this.stream.Ri(function(_){l(function(){return s.dr(_)})}),this.stream.onMessage(function(_){l(function(){return s.onMessage(_)})})},o.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,ee.mG)(t,void 0,void 0,function(){return(0,ee.Jh)(this,function(s){return this.state=0,this.start(),[2]})})})},o.prototype.dr=function(t){return rn("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},o.prototype.hr=function(t){var s=this;return function(l){s.Se.enqueueAndForget(function(){return s.Yi===t?l():(rn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},o}(),pg=function(o){function t(s,l,_,C,D){var R=this;return(R=o.call(this,s,"listen_stream_connection_backoff","listen_stream_idle",l,_,D)||this).R=C,R}return(0,ee.ZT)(t,o),t.prototype.wr=function(s){return this.Hi.Oi("Listen",s)},t.prototype.onMessage=function(s){this.Zi.reset();var l=function(C,D){var R,en;if("targetChange"in D){var W="NO_CHANGE"===(en=D.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===en?1:"REMOVE"===en?2:"CURRENT"===en?3:"RESET"===en?4:Ln(),ae=D.targetChange.targetIds||[],de=function(en,hn){return en.I?(Xn(void 0===hn||"string"==typeof hn),ar.fromBase64String(hn||"")):(Xn(void 0===hn||hn instanceof Uint8Array),ar.fromUint8Array(hn||new Uint8Array))}(C,D.targetChange.resumeToken),Me=(Le=D.targetChange.cause)&&function(en){var hn=void 0===en.code?mt.UNKNOWN:Zc(en.code);return new Lt(hn,en.message||"")}(Le);R=new ch(W,ae,de,Me||null)}else if("documentChange"in D){ae=Oa(C,(W=D.documentChange).document.name),de=zi(W.document.updateTime);var Le=new mi({mapValue:{fields:W.document.fields}}),ct=(Me=Or.newFoundDocument(ae,de,Le),W.targetIds||[]);R=new lc(ct,W.removedTargetIds||[],Me.key,Me)}else if("documentDelete"in D)ae=Oa(C,(W=D.documentDelete).document),de=W.readTime?zi(W.readTime):x.min(),Le=Or.newNoDocument(ae,de),R=new lc([],Me=W.removedTargetIds||[],Le.key,Le);else if("documentRemove"in D)ae=Oa(C,(W=D.documentRemove).document),R=new lc([],de=W.removedTargetIds||[],ae,null);else{if(!("filter"in D))return Ln();var wt=D.filter;ae=new jo(W=wt.count||0),R=new lh(de=wt.targetId,ae)}return R}(this.R,s),_=function(C){if(!("targetChange"in C))return x.min();var D=C.targetChange;return D.targetIds&&D.targetIds.length?x.min():D.readTime?zi(D.readTime):x.min()}(s);return this.listener._r(l,_)},t.prototype.mr=function(s){var C,D,R,W,l={};l.database=ua(this.R),l.addTarget=(C=this.R,(R=Gs(W=(D=s).target)?{documents:dc(C,W)}:{query:hc(C,W)}).targetId=D.targetId,D.resumeToken.approximateByteSize()>0?R.resumeToken=bd(C,D.resumeToken):D.snapshotVersion.compareTo(x.min())>0&&(R.readTime=Jo(C,D.snapshotVersion.toTimestamp())),R);var _=function(C,D){var R=function(W,ae){switch(ae){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ln()}}(0,D.purpose);return null==R?null:{"goog-listen-tags":R}}(0,s);_&&(l.labels=_),this.cr(l)},t.prototype.yr=function(s){var l={};l.database=ua(this.R),l.removeTarget=s,this.cr(l)},t}(u_),fy=function(o){function t(s,l,_,C,D){var R=this;return(R=o.call(this,s,"write_stream_connection_backoff","write_stream_idle",l,_,D)||this).R=C,R.gr=!1,R}return(0,ee.ZT)(t,o),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,o.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(s){return this.Hi.Oi("Write",s)},t.prototype.onMessage=function(s){if(Xn(!!s.streamToken),this.lastStreamToken=s.streamToken,this.gr){this.Zi.reset();var l=(D=s.commitTime,(C=s.writeResults)&&C.length>0?(Xn(void 0!==D),C.map(function(R){return ae=D,(de=zi((W=R).updateTime?W.updateTime:ae)).isEqual(x.min())&&(de=zi(ae)),new jc(de,W.transformResults||[]);var W,ae,de})):[]),_=zi(s.commitTime);return this.listener.Tr(_,l)}var C,D;return Xn(!s.writeResults||0===s.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var s={};s.database=ua(this.R),this.cr(s)},t.prototype.Er=function(s){var l=this,_={streamToken:this.lastStreamToken,writes:s.map(function(C){return $c(l.R,C)})};this.cr(_)},t}(u_),jl=function(o){function t(s,l,_){var C=this;return(C=o.call(this)||this).credentials=s,C.Hi=l,C.R=_,C.Rr=!1,C}return(0,ee.ZT)(t,o),t.prototype.br=function(){if(this.Rr)throw new Lt(mt.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(s,l,_){var C=this;return this.br(),this.credentials.getToken().then(function(D){return C.Hi.Ni(s,l,_,D)}).catch(function(D){throw"FirebaseError"===D.name?(D.code===mt.UNAUTHENTICATED&&C.credentials.invalidateToken(),D):new Lt(mt.UNKNOWN,D.toString())})},t.prototype.$i=function(s,l,_){var C=this;return this.br(),this.credentials.getToken().then(function(D){return C.Hi.$i(s,l,_,D)}).catch(function(D){throw"FirebaseError"===D.name?(D.code===mt.UNAUTHENTICATED&&C.credentials.invalidateToken(),D):new Lt(mt.UNKNOWN,D.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),zh=function(){function o(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return o.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},o.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},o.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},o.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},o.prototype.Cr=function(t){var s="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Pi(s),this.Vr=!1):rn("OnlineStateTracker",s)},o.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},o}(),$h=function(o,t,s,l,_){var C=this;this.localStore=o,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=_,this.Lr.di(function(D){s.enqueueAndForget(function(){return(0,ee.mG)(C,void 0,void 0,function(){return(0,ee.Jh)(this,function(R){switch(R.label){case 0:return Hl(this)?(rn("RemoteStore","Restarting streams for network reachability change."),[4,function(W){return(0,ee.mG)(this,void 0,void 0,function(){var ae;return(0,ee.Jh)(this,function(de){switch(de.label){case 0:return(ae=sn(W)).Or.add(4),[4,vh(ae)];case 1:return de.sent(),ae.Br.set("Unknown"),ae.Or.delete(4),[4,Xc(ae)];case 2:return de.sent(),[2]}})})}(this)]):[3,2];case 1:R.sent(),R.label=2;case 2:return[2]}})})})}),this.Br=new zh(s,l)};function Xc(o){return(0,ee.mG)(this,void 0,void 0,function(){var t,s;return(0,ee.Jh)(this,function(l){switch(l.label){case 0:if(!Hl(o))return[3,4];t=0,s=o.Mr,l.label=1;case 1:return t<s.length?[4,(0,s[t])(!0)]:[3,4];case 2:l.sent(),l.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function vh(o){return(0,ee.mG)(this,void 0,void 0,function(){var t,s;return(0,ee.Jh)(this,function(l){switch(l.label){case 0:t=0,s=o.Mr,l.label=1;case 1:return t<s.length?[4,(0,s[t])(!1)]:[3,4];case 2:l.sent(),l.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Wh(o,t){var s=sn(o);s.$r.has(t.targetId)||(s.$r.set(t.targetId,t),Yh(s)?_g(s):wc(s).er()&&gg(s,t))}function Vd(o,t){var s=sn(o),l=wc(s);s.$r.delete(t),l.er()&&mg(s,t),0===s.$r.size&&(l.er()?l.ir():Hl(s)&&s.Br.set("Unknown"))}function gg(o,t){o.qr.U(t.targetId),wc(o).mr(t)}function mg(o,t){o.qr.U(t),wc(o).yr(t)}function _g(o){o.qr=new Rl({getRemoteKeysForTarget:function(t){return o.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return o.$r.get(t)||null}}),wc(o).start(),o.Br.Sr()}function Yh(o){return Hl(o)&&!wc(o).tr()&&o.$r.size>0}function Hl(o){return 0===sn(o).Or.size}function vg(o){o.qr=void 0}function Gf(o){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(t){return o.$r.forEach(function(s,l){gg(o,s)}),[2]})})}function py(o,t){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(s){return vg(o),Yh(o)?(o.Br.Nr(t),_g(o)):o.Br.set("Unknown"),[2]})})}function gy(o,t,s){return(0,ee.mG)(this,void 0,void 0,function(){var l,_,C;return(0,ee.Jh)(this,function(D){switch(D.label){case 0:if(o.Br.set("Online"),!(t instanceof ch&&2===t.state&&t.cause))return[3,6];D.label=1;case 1:return D.trys.push([1,3,,5]),[4,function(R,W){return(0,ee.mG)(this,void 0,void 0,function(){var ae,de,Me,Le;return(0,ee.Jh)(this,function(ct){switch(ct.label){case 0:ae=W.cause,de=0,Me=W.targetIds,ct.label=1;case 1:return de<Me.length?R.$r.has(Le=Me[de])?[4,R.remoteSyncer.rejectListen(Le,ae)]:[3,3]:[3,5];case 2:ct.sent(),R.$r.delete(Le),R.qr.removeTarget(Le),ct.label=3;case 3:ct.label=4;case 4:return de++,[3,1];case 5:return[2]}})})}(o,t)];case 2:return D.sent(),[3,5];case 3:return l=D.sent(),rn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),l),[4,Zf(o,l)];case 4:return D.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof lc?o.qr.X(t):t instanceof lh?o.qr.rt(t):o.qr.et(t),s.isEqual(x.min()))return[3,13];D.label=7;case 7:return D.trys.push([7,11,,13]),[4,Wr(o.localStore)];case 8:return _=D.sent(),s.compareTo(_)>=0?[4,(R=o,W=s,ae=R.qr.ut(W),ae.targetChanges.forEach(function(de,Me){if(de.resumeToken.approximateByteSize()>0){var Le=R.$r.get(Me);Le&&R.$r.set(Me,Le.withResumeToken(de.resumeToken,W))}}),ae.targetMismatches.forEach(function(de){var Me=R.$r.get(de);if(Me){R.$r.set(de,Me.withResumeToken(ar.EMPTY_BYTE_STRING,Me.snapshotVersion)),mg(R,de);var Le=new yc(Me.target,de,1,Me.sequenceNumber);gg(R,Le)}}),R.remoteSyncer.applyRemoteEvent(ae))]:[3,10];case 9:D.sent(),D.label=10;case 10:return[3,13];case 11:return rn("RemoteStore","Failed to raise snapshot:",C=D.sent()),[4,Zf(o,C)];case 12:return D.sent(),[3,13];case 13:return[2]}var R,W,ae})})}function Zf(o,t,s){return(0,ee.mG)(this,void 0,void 0,function(){var l=this;return(0,ee.Jh)(this,function(_){switch(_.label){case 0:if(!ul(t))throw t;return o.Or.add(1),[4,vh(o)];case 1:return _.sent(),o.Br.set("Offline"),s||(s=function(){return Wr(o.localStore)}),o.asyncQueue.enqueueRetryable(function(){return(0,ee.mG)(l,void 0,void 0,function(){return(0,ee.Jh)(this,function(C){switch(C.label){case 0:return rn("RemoteStore","Retrying IndexedDB access"),[4,s()];case 1:return C.sent(),o.Or.delete(1),[4,Xc(o)];case 2:return C.sent(),[2]}})})}),[2]}})})}function l_(o,t){return t().catch(function(s){return Zf(o,s,t)})}function yh(o){return(0,ee.mG)(this,void 0,void 0,function(){var t,s,l,_,C;return(0,ee.Jh)(this,function(D){switch(D.label){case 0:t=sn(o),s=Ec(t),l=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,D.label=1;case 1:if(!(Hl(R=t)&&R.Fr.length<10))return[3,7];D.label=2;case 2:return D.trys.push([2,4,,6]),[4,gl(t.localStore,l)];case 3:return null===(_=D.sent())?(0===t.Fr.length&&s.ir(),[3,7]):(l=_.batchId,function(R,W){R.Fr.push(W);var ae=Ec(R);ae.er()&&ae.pr&&ae.Er(W.mutations)}(t,_),[3,6]);case 4:return C=D.sent(),[4,Zf(t,C)];case 5:return D.sent(),[3,6];case 6:return[3,1];case 7:return c_(t)&&d_(t),[2]}var R})})}function c_(o){return Hl(o)&&!Ec(o).tr()&&o.Fr.length>0}function d_(o){Ec(o).start()}function my(o){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(t){return Ec(o).Ar(),[2]})})}function _y(o){return(0,ee.mG)(this,void 0,void 0,function(){var t,s,l;return(0,ee.Jh)(this,function(C){for(t=Ec(o),s=0,l=o.Fr;s<l.length;s++)t.Er(l[s].mutations);return[2]})})}function vy(o,t,s){return(0,ee.mG)(this,void 0,void 0,function(){var l,_;return(0,ee.Jh)(this,function(C){switch(C.label){case 0:return l=o.Fr.shift(),_=cl.from(l,t,s),[4,l_(o,function(){return o.remoteSyncer.applySuccessfulWrite(_)})];case 1:return C.sent(),[4,yh(o)];case 2:return C.sent(),[2]}})})}function yy(o,t){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(s){switch(s.label){case 0:return t&&Ec(o).pr?[4,function(l,_){return(0,ee.mG)(this,void 0,void 0,function(){var C,D;return(0,ee.Jh)(this,function(R){switch(R.label){case 0:return Gc(D=_.code)&&D!==mt.ABORTED?(C=l.Fr.shift(),Ec(l).sr(),[4,l_(l,function(){return l.remoteSyncer.rejectFailedWrite(C.batchId,_)})]):[3,3];case 1:return R.sent(),[4,yh(l)];case 2:R.sent(),R.label=3;case 3:return[2]}})})}(o,t)]:[3,2];case 1:s.sent(),s.label=2;case 2:return c_(o)&&d_(o),[2]}})})}function _l(o,t){return(0,ee.mG)(this,void 0,void 0,function(){var s;return(0,ee.Jh)(this,function(l){switch(l.label){case 0:return s=sn(o),t?(s.Or.delete(2),[4,Xc(s)]):[3,2];case 1:return l.sent(),[3,5];case 2:return t?[3,4]:(s.Or.add(2),[4,vh(s)]);case 3:l.sent(),s.Br.set("Unknown"),l.label=4;case 4:l.label=5;case 5:return[2]}})})}function wc(o){var s,l,_,C,t=this;return o.Ur||(o.Ur=(s=o.datastore,l=o.asyncQueue,_={Ii:Gf.bind(null,o),Ri:py.bind(null,o),_r:gy.bind(null,o)},(C=sn(s)).br(),new pg(l,C.Hi,C.credentials,C.R,_)),o.Mr.push(function(s){return(0,ee.mG)(t,void 0,void 0,function(){return(0,ee.Jh)(this,function(l){switch(l.label){case 0:return s?(o.Ur.sr(),Yh(o)?_g(o):o.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,o.Ur.stop()];case 2:l.sent(),vg(o),l.label=3;case 3:return[2]}})})})),o.Ur}function Ec(o){var s,l,_,C,t=this;return o.Kr||(o.Kr=(s=o.datastore,l=o.asyncQueue,_={Ii:my.bind(null,o),Ri:yy.bind(null,o),Ir:_y.bind(null,o),Tr:vy.bind(null,o)},(C=sn(s)).br(),new fy(l,C.Hi,C.credentials,C.R,_)),o.Mr.push(function(s){return(0,ee.mG)(t,void 0,void 0,function(){return(0,ee.Jh)(this,function(l){switch(l.label){case 0:return s?(o.Kr.sr(),[4,yh(o)]):[3,2];case 1:return l.sent(),[3,4];case 2:return[4,o.Kr.stop()];case 3:l.sent(),o.Fr.length>0&&(rn("RemoteStore","Stopping write stream with "+o.Fr.length+" pending writes"),o.Fr=[]),l.label=4;case 4:return[2]}})})})),o.Kr}var yg=function(){function o(t,s,l,_,C){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=l,this.op=_,this.removalCallback=C,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(D){})}return o.createAndSchedule=function(t,s,l,_,C){var D=new o(t,s,Date.now()+l,_,C);return D.start(l),D},o.prototype.start=function(t){var s=this;this.timerHandle=setTimeout(function(){return s.handleDelayElapsed()},t)},o.prototype.skipDelay=function(){return this.handleDelayElapsed()},o.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lt(mt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},o.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(s){return t.deferred.resolve(s)})):Promise.resolve()})},o.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},o}();function Tc(o,t){if(Pi("AsyncQueue",t+": "+o),ul(o))return new Lt(mt.UNAVAILABLE,t+": "+o);throw o}var qf=function(){function o(t){this.comparator=t?function(s,l){return t(s,l)||Wn.comparator(s.key,l.key)}:function(s,l){return Wn.comparator(s.key,l.key)},this.keyedMap=ac(),this.sortedSet=new Qo(this.comparator)}return o.emptySet=function(t){return new o(t.comparator)},o.prototype.has=function(t){return null!=this.keyedMap.get(t)},o.prototype.get=function(t){return this.keyedMap.get(t)},o.prototype.first=function(){return this.sortedSet.minKey()},o.prototype.last=function(){return this.sortedSet.maxKey()},o.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},o.prototype.indexOf=function(t){var s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1},Object.defineProperty(o.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),o.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(s,l){return t(s),!1})},o.prototype.add=function(t){var s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))},o.prototype.delete=function(t){var s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this},o.prototype.isEqual=function(t){if(!(t instanceof o)||this.size!==t.size)return!1;for(var s=this.sortedSet.getIterator(),l=t.sortedSet.getIterator();s.hasNext();){var _=s.getNext().key,C=l.getNext().key;if(!_.isEqual(C))return!1}return!0},o.prototype.toString=function(){var t=[];return this.forEach(function(s){t.push(s.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},o.prototype.copy=function(t,s){var l=new o;return l.comparator=this.comparator,l.keyedMap=t,l.sortedSet=s,l},o}(),Kh=function(){function o(){this.Qr=new Qo(Wn.comparator)}return o.prototype.track=function(t){var s=t.doc.key,l=this.Qr.get(s);l?0!==t.type&&3===l.type?this.Qr=this.Qr.insert(s,t):3===t.type&&1!==l.type?this.Qr=this.Qr.insert(s,{type:l.type,doc:t.doc}):2===t.type&&2===l.type?this.Qr=this.Qr.insert(s,{type:2,doc:t.doc}):2===t.type&&0===l.type?this.Qr=this.Qr.insert(s,{type:0,doc:t.doc}):1===t.type&&0===l.type?this.Qr=this.Qr.remove(s):1===t.type&&2===l.type?this.Qr=this.Qr.insert(s,{type:1,doc:l.doc}):0===t.type&&1===l.type?this.Qr=this.Qr.insert(s,{type:2,doc:t.doc}):Ln():this.Qr=this.Qr.insert(s,t)},o.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(s,l){t.push(l)}),t},o}(),Qh=function(){function o(t,s,l,_,C,D,R,W){this.query=t,this.docs=s,this.oldDocs=l,this.docChanges=_,this.mutatedKeys=C,this.fromCache=D,this.syncStateChanged=R,this.excludesMetadataChanges=W}return o.fromInitialDocuments=function(t,s,l,_){var C=[];return s.forEach(function(D){C.push({type:0,doc:D})}),new o(t,s,qf.emptySet(s),C,l,_,!0,!1)},Object.defineProperty(o.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Il(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var s=this.docChanges,l=t.docChanges;if(s.length!==l.length)return!1;for(var _=0;_<s.length;_++)if(s[_].type!==l[_].type||!s[_].doc.isEqual(l[_].doc))return!1;return!0},o}(),Dc=function(){this.Wr=void 0,this.listeners=[]},bg=function(){this.queries=new pl(function(o){return Bc(o)},Il),this.onlineState="Unknown",this.Gr=new Set};function zf(o,t){return(0,ee.mG)(this,void 0,void 0,function(){var s,l,_,C,D,R,W;return(0,ee.Jh)(this,function(ae){switch(ae.label){case 0:if(s=sn(o),_=!1,(C=s.queries.get(l=t.query))||(_=!0,C=new Dc),!_)return[3,4];ae.label=1;case 1:return ae.trys.push([1,3,,4]),D=C,[4,s.onListen(l)];case 2:return D.Wr=ae.sent(),[3,4];case 3:return R=ae.sent(),W=Tc(R,"Initialization of query '"+oc(t.query)+"' failed"),[2,void t.onError(W)];case 4:return s.queries.set(l,C),C.listeners.push(t),t.zr(s.onlineState),C.Wr&&t.Hr(C.Wr)&&Jh(s),[2]}})})}function Cg(o,t){return(0,ee.mG)(this,void 0,void 0,function(){var s,l,_,C,D;return(0,ee.Jh)(this,function(R){return s=sn(o),_=!1,(C=s.queries.get(l=t.query))&&(D=C.listeners.indexOf(t))>=0&&(C.listeners.splice(D,1),_=0===C.listeners.length),_?[2,(s.queries.delete(l),s.onUnlisten(l))]:[2]})})}function $f(o,t){for(var s=sn(o),l=!1,_=0,C=t;_<C.length;_++){var D=C[_],W=s.queries.get(D.query);if(W){for(var ae=0,de=W.listeners;ae<de.length;ae++)de[ae].Hr(D)&&(l=!0);W.Wr=D}}l&&Jh(s)}function h_(o,t,s){var l=sn(o),_=l.queries.get(t);if(_)for(var C=0,D=_.listeners;C<D.length;C++)D[C].onError(s);l.queries.delete(t)}function Jh(o){o.Gr.forEach(function(t){t.next()})}var Wf=function(){function o(t,s,l){this.query=t,this.Jr=s,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=l||{}}return o.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var s=[],l=0,_=t.docChanges;l<_.length;l++){var C=_[l];3!==C.type&&s.push(C)}t=new Qh(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var D=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),D=!0):this.eo(t,this.onlineState)&&(this.no(t),D=!0),this.Xr=t,D},o.prototype.onError=function(t){this.Jr.error(t)},o.prototype.zr=function(t){this.onlineState=t;var s=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),s=!0),s},o.prototype.eo=function(t,s){return!t.fromCache||!(this.options.so&&"Offline"!==s||t.docs.isEmpty()&&"Offline"!==s)},o.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},o.prototype.no=function(t){t=Qh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},o}(),f_=function(){function o(t,s){this.payload=t,this.byteLength=s}return o.prototype.io=function(){return"metadata"in this.payload},o}(),Bd=function(){function o(t){this.R=t}return o.prototype.qn=function(t){return Oa(this.R,t)},o.prototype.Un=function(t){return t.metadata.exists?Uh(this.R,t.document,!1):Or.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},o.prototype.Kn=function(t){return zi(t)},o}();!function(){function o(t,s,l){this.ro=t,this.localStore=s,this.R=l,this.queries=[],this.documents=[],this.progress=function(o){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:o.totalDocuments,totalBytes:o.totalBytes}}(t)}o.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var s=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++s):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++s),s!==this.progress.documentsLoaded?(this.progress.documentsLoaded=s,Object.assign({},this.progress)):null},o.prototype.co=function(t){for(var s=new Map,l=new Bd(this.R),_=0,C=t;_<C.length;_++){var D=C[_];if(D.metadata.queries)for(var R=l.qn(D.metadata.name),W=0,ae=D.metadata.queries;W<ae.length;W++){var de=ae[W],Me=(s.get(de)||$r()).add(R);s.set(de,Me)}}return s},o.prototype.complete=function(){return(0,ee.mG)(this,void 0,void 0,function(){var t,s,l,_,C;return(0,ee.Jh)(this,function(D){switch(D.label){case 0:return[4,og(this.localStore,new Bd(this.R),this.documents,this.ro.id)];case 1:t=D.sent(),s=this.co(this.documents),l=0,_=this.queries,D.label=2;case 2:return l<_.length?[4,Lf(this.localStore,C=_[l],s.get(C.name))]:[3,5];case 3:D.sent(),D.label=4;case 4:return l++,[3,2];case 5:return[2,(this.progress.taskState="Success",new ue(Object.assign({},this.progress),t))]}})})}}();var ed=function(o){this.key=o},Hd=function(o){this.key=o},td=function(){function o(t,s){this.query=t,this.uo=s,this.ao=null,this.current=!1,this.ho=$r(),this.mutatedKeys=$r(),this.lo=Xu(t),this.fo=new qf(this.lo)}return Object.defineProperty(o.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),o.prototype._o=function(t,s){var l=this,_=s?s.mo:new Kh,C=s?s.fo:this.fo,D=s?s.mutatedKeys:this.mutatedKeys,R=C,W=!1,ae=gu(this.query)&&C.size===this.query.limit?C.last():null,de=Da(this.query)&&C.size===this.query.limit?C.first():null;if(t.inorderTraversal(function(Le,ct){var lt=C.get(Le),wt=Ju(l.query,ct)?ct:null,en=!!lt&&l.mutatedKeys.has(lt.key),hn=!!wt&&(wt.hasLocalMutations||l.mutatedKeys.has(wt.key)&&wt.hasCommittedMutations),rr=!1;lt&&wt?lt.data.isEqual(wt.data)?en!==hn&&(_.track({type:3,doc:wt}),rr=!0):l.yo(lt,wt)||(_.track({type:2,doc:wt}),rr=!0,(ae&&l.lo(wt,ae)>0||de&&l.lo(wt,de)<0)&&(W=!0)):!lt&&wt?(_.track({type:0,doc:wt}),rr=!0):lt&&!wt&&(_.track({type:1,doc:lt}),rr=!0,(ae||de)&&(W=!0)),rr&&(wt?(R=R.add(wt),D=hn?D.add(Le):D.delete(Le)):(R=R.delete(Le),D=D.delete(Le)))}),gu(this.query)||Da(this.query))for(;R.size>this.query.limit;){var Me=gu(this.query)?R.last():R.first();R=R.delete(Me.key),D=D.delete(Me.key),_.track({type:1,doc:Me})}return{fo:R,mo:_,Nn:W,mutatedKeys:D}},o.prototype.yo=function(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations},o.prototype.applyChanges=function(t,s,l){var _=this,C=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var D=t.mo.jr();D.sort(function(de,Me){return ct=Me.type,(lt=function(wt){switch(wt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ln()}})(de.type)-lt(ct)||_.lo(de.doc,Me.doc);var ct,lt}),this.po(l);var R=s?this.Eo():[],W=0===this.ho.size&&this.current?1:0,ae=W!==this.ao;return this.ao=W,0!==D.length||ae?{snapshot:new Qh(this.query,t.fo,C,D,t.mutatedKeys,0===W,ae,!1),To:R}:{To:R}},o.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Kh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},o.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},o.prototype.po=function(t){var s=this;t&&(t.addedDocuments.forEach(function(l){return s.uo=s.uo.add(l)}),t.modifiedDocuments.forEach(function(l){}),t.removedDocuments.forEach(function(l){return s.uo=s.uo.delete(l)}),this.current=t.current)},o.prototype.Eo=function(){var t=this;if(!this.current)return[];var s=this.ho;this.ho=$r(),this.fo.forEach(function(_){t.Io(_.key)&&(t.ho=t.ho.add(_.key))});var l=[];return s.forEach(function(_){t.ho.has(_)||l.push(new Hd(_))}),this.ho.forEach(function(_){s.has(_)||l.push(new ed(_))}),l},o.prototype.Ao=function(t){this.uo=t.Bn,this.ho=$r();var s=this._o(t.documents);return this.applyChanges(s,!0)},o.prototype.Ro=function(){return Qh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},o}(),p_=function(o,t,s){this.query=o,this.targetId=t,this.view=s},wg=function(o){this.key=o,this.bo=!1},Eg=function(){function o(t,s,l,_,C,D){this.localStore=t,this.remoteStore=s,this.eventManager=l,this.sharedClientState=_,this.currentUser=C,this.maxConcurrentLimboResolutions=D,this.vo={},this.Po=new pl(function(R){return Bc(R)},Il),this.Vo=new Map,this.So=new Set,this.Do=new Qo(Wn.comparator),this.Co=new Map,this.No=new ag,this.xo={},this.ko=new Map,this.Fo=fl.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(o.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),o}();function Yf(o,t){return(0,ee.mG)(this,void 0,void 0,function(){var s,_,C,D,R;return(0,ee.Jh)(this,function(W){switch(W.label){case 0:return s=ep(o),(C=s.Po.get(t))?(s.sharedClientState.addLocalQueryTarget(C.targetId),_=C.view.Ro(),[3,4]):[3,1];case 1:return[4,Io(s.localStore,Bo(t))];case 2:return D=W.sent(),R=s.sharedClientState.addLocalQueryTarget(D.targetId),[4,bh(s,t,D.targetId,"current"===R)];case 3:_=W.sent(),s.isPrimaryClient&&Wh(s.remoteStore,D),W.label=4;case 4:return[2,_]}})})}function bh(o,t,s,l){return(0,ee.mG)(this,void 0,void 0,function(){var _,C,D,R,W,ae;return(0,ee.Jh)(this,function(de){switch(de.label){case 0:return o.Oo=function(Me,Le,ct){return function(lt,wt,en,hn){return(0,ee.mG)(this,void 0,void 0,function(){var rr,ir,Jr;return(0,ee.Jh)(this,function(_i){switch(_i.label){case 0:return(rr=wt.view._o(en)).Nn?[4,Gh(lt.localStore,wt.query,!1).then(function(Hi){return wt.view._o(Hi.documents,rr)})]:[3,2];case 1:rr=_i.sent(),_i.label=2;case 2:return ir=hn&&hn.targetChanges.get(wt.targetId),Jr=wt.view.applyChanges(rr,lt.isPrimaryClient,ir),[2,(Jf(lt,wt.targetId,Jr.To),Jr.snapshot)]}})})}(o,Me,Le,ct)},[4,Gh(o.localStore,t,!0)];case 1:return _=de.sent(),C=new td(t,_.Bn),D=C._o(_.documents),R=vd.createSynthesizedTargetChangeForCurrentChange(s,l&&"Offline"!==o.onlineState),W=C.applyChanges(D,o.isPrimaryClient,R),Jf(o,s,W.To),ae=new p_(t,s,C),[2,(o.Po.set(t,ae),o.Vo.has(s)?o.Vo.get(s).push(t):o.Vo.set(s,[t]),W.snapshot)]}})})}function Tg(o,t){return(0,ee.mG)(this,void 0,void 0,function(){var s,l,_;return(0,ee.Jh)(this,function(C){switch(C.label){case 0:return s=sn(o),l=s.Po.get(t),(_=s.Vo.get(l.targetId)).length>1?[2,(s.Vo.set(l.targetId,_.filter(function(D){return!Il(D,t)})),void s.Po.delete(t))]:s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)?[3,2]:[4,Fs(s.localStore,l.targetId,!1).then(function(){s.sharedClientState.clearQueryState(l.targetId),Vd(s.remoteStore,l.targetId),Gd(s,l.targetId)}).catch(Ra)]):[3,3];case 1:C.sent(),C.label=2;case 2:return[3,5];case 3:return Gd(s,l.targetId),[4,Fs(s.localStore,l.targetId,!0)];case 4:C.sent(),C.label=5;case 5:return[2]}})})}function ef(o,t,s){return(0,ee.mG)(this,void 0,void 0,function(){var l,_,C,D;return(0,ee.Jh)(this,function(R){switch(R.label){case 0:l=tp(o),R.label=1;case 1:return R.trys.push([1,5,,6]),[4,(W=l.localStore,ae=t,Me=sn(W),Le=U.now(),ct=ae.reduce(function(lt,wt){return lt.add(wt.key)},$r()),Me.persistence.runTransaction("Locally write mutations","readwrite",function(lt){return Me.Mn.pn(lt,ct).next(function(wt){de=wt;for(var en=[],hn=0,rr=ae;hn<rr.length;hn++){var ir=rr[hn],Jr=wu(ir,de.get(ir.key));null!=Jr&&en.push(new Cs(ir.key,Jr,Hs(Jr.value.mapValue),So.exists(!0)))}return Me._n.addMutationBatch(lt,Le,en,ae)})}).then(function(lt){return lt.applyToLocalDocumentSet(de),{batchId:lt.batchId,changes:de}}))];case 2:return _=R.sent(),l.sharedClientState.addPendingMutation(_.batchId),function(W,ae,de){var Me=W.xo[W.currentUser.toKey()];Me||(Me=new Qo(kr)),Me=Me.insert(ae,de),W.xo[W.currentUser.toKey()]=Me}(l,_.batchId,s),[4,Sc(l,_.changes)];case 3:return R.sent(),[4,yh(l.remoteStore)];case 4:return R.sent(),[3,6];case 5:return C=R.sent(),D=Tc(C,"Failed to persist write"),s.reject(D),[3,6];case 6:return[2]}var W,ae,de,Me,Le,ct})})}function Dg(o,t){return(0,ee.mG)(this,void 0,void 0,function(){var s,l;return(0,ee.Jh)(this,function(_){switch(_.label){case 0:s=sn(o),_.label=1;case 1:return _.trys.push([1,4,,6]),[4,ts(s.localStore,t)];case 2:return l=_.sent(),t.targetChanges.forEach(function(C,D){var R=s.Co.get(D);R&&(Xn(C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size<=1),C.addedDocuments.size>0?R.bo=!0:C.modifiedDocuments.size>0?Xn(R.bo):C.removedDocuments.size>0&&(Xn(R.bo),R.bo=!1))}),[4,Sc(s,l,t)];case 3:return _.sent(),[3,6];case 4:return[4,Ra(_.sent())];case 5:return _.sent(),[3,6];case 6:return[2]}})})}function Kf(o,t,s){var l=sn(o);if(l.isPrimaryClient&&0===s||!l.isPrimaryClient&&1===s){var _=[];l.Po.forEach(function(C,D){var R=D.view.zr(t);R.snapshot&&_.push(R.snapshot)}),function(C,D){var R=sn(C);R.onlineState=D;var W=!1;R.queries.forEach(function(ae,de){for(var Me=0,Le=de.listeners;Me<Le.length;Me++)Le[Me].zr(D)&&(W=!0)}),W&&Jh(R)}(l.eventManager,t),_.length&&l.vo._r(_),l.onlineState=t,l.isPrimaryClient&&l.sharedClientState.setOnlineState(t)}}function by(o,t,s){return(0,ee.mG)(this,void 0,void 0,function(){var l,_,C,D,R,W;return(0,ee.Jh)(this,function(ae){switch(ae.label){case 0:return(l=sn(o)).sharedClientState.updateQueryState(t,"rejected",s),_=l.Co.get(t),(C=_&&_.key)?(D=(D=new Qo(Wn.comparator)).insert(C,Or.newNoDocument(C,x.min())),R=$r().add(C),W=new _d(x.min(),new Map,new vo(kr),D,R),[4,Dg(l,W)]):[3,2];case 1:return ae.sent(),l.Do=l.Do.remove(C),l.Co.delete(t),Mg(l),[3,4];case 2:return[4,Fs(l.localStore,t,!1).then(function(){return Gd(l,t,s)}).catch(Ra)];case 3:ae.sent(),ae.label=4;case 4:return[2]}})})}function Sg(o,t){return(0,ee.mG)(this,void 0,void 0,function(){var s,l,_;return(0,ee.Jh)(this,function(C){switch(C.label){case 0:s=sn(o),l=t.batch.batchId,C.label=1;case 1:return C.trys.push([1,4,,6]),[4,Yn(s.localStore,t)];case 2:return _=C.sent(),Qf(s,l,null),tf(s,l),s.sharedClientState.updateMutationState(l,"acknowledged"),[4,Sc(s,_)];case 3:return C.sent(),[3,6];case 4:return[4,Ra(C.sent())];case 5:return C.sent(),[3,6];case 6:return[2]}})})}function Ag(o,t,s){return(0,ee.mG)(this,void 0,void 0,function(){var l,_;return(0,ee.Jh)(this,function(C){switch(C.label){case 0:l=sn(o),C.label=1;case 1:return C.trys.push([1,4,,6]),[4,(D=l.localStore,R=t,W=sn(D),W.persistence.runTransaction("Reject batch","readwrite-primary",function(ae){var de;return W._n.lookupMutationBatch(ae,R).next(function(Me){return Xn(null!==Me),de=Me.keys(),W._n.removeMutationBatch(ae,Me)}).next(function(){return W._n.performConsistencyCheck(ae)}).next(function(){return W.Mn.pn(ae,de)})}))];case 2:return _=C.sent(),Qf(l,t,s),tf(l,t),l.sharedClientState.updateMutationState(t,"rejected",s),[4,Sc(l,_)];case 3:return C.sent(),[3,6];case 4:return[4,Ra(C.sent())];case 5:return C.sent(),[3,6];case 6:return[2]}var D,R,W})})}function g_(o,t){return(0,ee.mG)(this,void 0,void 0,function(){var s,l,_,C,D;return(0,ee.Jh)(this,function(R){switch(R.label){case 0:Hl((s=sn(o)).remoteStore)||rn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),R.label=1;case 1:return R.trys.push([1,3,,4]),[4,(W=s.localStore,ae=sn(W),ae.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(de){return ae._n.getHighestUnacknowledgedBatchId(de)}))];case 2:return-1===(l=R.sent())?[2,void t.resolve()]:((_=s.ko.get(l)||[]).push(t),s.ko.set(l,_),[3,4]);case 3:return C=R.sent(),D=Tc(C,"Initialization of waitForPendingWrites() operation failed"),t.reject(D),[3,4];case 4:return[2]}var W,ae})})}function tf(o,t){(o.ko.get(t)||[]).forEach(function(s){s.resolve()}),o.ko.delete(t)}function Qf(o,t,s){var l=sn(o),_=l.xo[l.currentUser.toKey()];if(_){var C=_.get(t);C&&(s?C.reject(s):C.resolve(),_=_.remove(t)),l.xo[l.currentUser.toKey()]=_}}function Gd(o,t,s){void 0===s&&(s=null),o.sharedClientState.removeLocalQueryTarget(t);for(var l=0,_=o.Vo.get(t);l<_.length;l++){var C=_[l];o.Po.delete(C),s&&o.vo.Mo(C,s)}o.Vo.delete(t),o.isPrimaryClient&&o.No.Zn(t).forEach(function(D){o.No.containsKey(D)||da(o,D)})}function da(o,t){o.So.delete(t.path.canonicalString());var s=o.Do.get(t);null!==s&&(Vd(o.remoteStore,s),o.Do=o.Do.remove(t),o.Co.delete(s),Mg(o))}function Jf(o,t,s){for(var l=0,_=s;l<_.length;l++){var C=_[l];C instanceof ed?(o.No.addReference(C.key,t),m_(o,C)):C instanceof Hd?(rn("SyncEngine","Document no longer in limbo: "+C.key),o.No.removeReference(C.key,t),o.No.containsKey(C.key)||da(o,C.key)):Ln()}}function m_(o,t){var s=t.key,l=s.path.canonicalString();o.Do.get(s)||o.So.has(l)||(rn("SyncEngine","New document in limbo: "+s),o.So.add(l),Mg(o))}function Mg(o){for(;o.So.size>0&&o.Do.size<o.maxConcurrentLimboResolutions;){var t=o.So.values().next().value;o.So.delete(t);var s=new Wn(Te.fromString(t)),l=o.Fo.next();o.Co.set(l,new wg(s)),o.Do=o.Do.insert(s,l),Wh(o.remoteStore,new yc(Bo(pu(s.path)),l,2,Xi.o))}}function Sc(o,t,s){return(0,ee.mG)(this,void 0,void 0,function(){var l,_,C,D;return(0,ee.Jh)(this,function(R){switch(R.label){case 0:return l=sn(o),_=[],C=[],D=[],l.Po.isEmpty()?[3,3]:(l.Po.forEach(function(W,ae){D.push(l.Oo(ae,t,s).then(function(de){if(de){l.isPrimaryClient&&l.sharedClientState.updateQueryState(ae.targetId,de.fromCache?"not-current":"current"),_.push(de);var Me=Ge.Pn(ae.targetId,de);C.push(Me)}}))}),[4,Promise.all(D)]);case 1:return R.sent(),l.vo._r(_),[4,function(W,ae){return(0,ee.mG)(this,void 0,void 0,function(){var de,Me,Le,ct,lt,wt,en,rr;return(0,ee.Jh)(this,function(ir){switch(ir.label){case 0:de=sn(W),ir.label=1;case 1:return ir.trys.push([1,3,,4]),[4,de.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(Jr){return Wt.forEach(ae,function(_i){return Wt.forEach(_i.bn,function(Hi){return de.persistence.referenceDelegate.addReference(Jr,_i.targetId,Hi)}).next(function(){return Wt.forEach(_i.vn,function(Hi){return de.persistence.referenceDelegate.removeReference(Jr,_i.targetId,Hi)})})})})];case 2:return ir.sent(),[3,4];case 3:if(!ul(Me=ir.sent()))throw Me;return rn("LocalStore","Failed to update sequence numbers: "+Me),[3,4];case 4:for(Le=0,ct=ae;Le<ct.length;Le++)wt=(lt=ct[Le]).targetId,lt.fromCache||(en=de.kn.get(wt),rr=en.withLastLimboFreeSnapshotVersion(en.snapshotVersion),de.kn=de.kn.insert(wt,rr));return[2]}})})}(l.localStore,C)];case 2:R.sent(),R.label=3;case 3:return[2]}})})}function Ig(o,t){return(0,ee.mG)(this,void 0,void 0,function(){var s,l;return(0,ee.Jh)(this,function(_){switch(_.label){case 0:return(s=sn(o)).currentUser.isEqual(t)?[3,3]:(rn("SyncEngine","User change. New user:",t.toKey()),[4,bn(s.localStore,t)]);case 1:return l=_.sent(),s.currentUser=t,(C=s).ko.forEach(function(R){R.forEach(function(W){W.reject(new Lt(mt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),C.ko.clear(),s.sharedClientState.handleUserChange(t,l.removedBatchIds,l.addedBatchIds),[4,Sc(s,l.Ln)];case 2:_.sent(),_.label=3;case 3:return[2]}var C})})}function Cy(o,t){var s=sn(o),l=s.Co.get(t);if(l&&l.bo)return $r().add(l.key);var _=$r(),C=s.Vo.get(t);if(!C)return _;for(var D=0,R=C;D<R.length;D++){var ae=s.Po.get(R[D]);_=_.unionWith(ae.view.wo)}return _}function __(o,t){return(0,ee.mG)(this,void 0,void 0,function(){var s,l,_;return(0,ee.Jh)(this,function(C){switch(C.label){case 0:return[4,Gh((s=sn(o)).localStore,t.query,!0)];case 1:return l=C.sent(),_=t.view.Ao(l),[2,(s.isPrimaryClient&&Jf(s,t.targetId,_.To),_)]}})})}function Xf(o){return(0,ee.mG)(this,void 0,void 0,function(){var t;return(0,ee.Jh)(this,function(s){return[2,ig((t=sn(o)).localStore).then(function(l){return Sc(t,l)})]})})}function Og(o,t,s,l){return(0,ee.mG)(this,void 0,void 0,function(){var _,C;return(0,ee.Jh)(this,function(D){switch(D.label){case 0:return[4,(R=(_=sn(o)).localStore,W=t,ae=sn(R),de=sn(ae._n),ae.persistence.runTransaction("Lookup mutation documents","readonly",function(Me){return de.jt(Me,W).next(function(Le){return Le?ae.Mn.pn(Me,Le):Wt.resolve(null)})}))];case 1:return null===(C=D.sent())?[3,6]:"pending"!==s?[3,3]:[4,yh(_.remoteStore)];case 2:return D.sent(),[3,4];case 3:"acknowledged"===s||"rejected"===s?(Qf(_,t,l||null),tf(_,t),function(R,W){sn(sn(R)._n).Gt(W)}(_.localStore,t)):Ln(),D.label=4;case 4:return[4,Sc(_,C)];case 5:return D.sent(),[3,7];case 6:rn("SyncEngine","Cannot apply mutation batch with id: "+t),D.label=7;case 7:return[2]}var R,W,ae,de})})}function v_(o,t){return(0,ee.mG)(this,void 0,void 0,function(){var s,l,_,C,D,W,ae;return(0,ee.Jh)(this,function(de){switch(de.label){case 0:return ep(s=sn(o)),tp(s),!0!==t||!0===s.$o?[3,3]:(l=s.sharedClientState.getAllActiveQueryTargets(),[4,xg(s,l.toArray())]);case 1:return _=de.sent(),s.$o=!0,[4,_l(s.remoteStore,!0)];case 2:for(de.sent(),C=0,D=_;C<D.length;C++)Wh(s.remoteStore,D[C]);return[3,7];case 3:return!1!==t||!1===s.$o?[3,7]:(W=[],ae=Promise.resolve(),s.Vo.forEach(function(Me,Le){s.sharedClientState.isLocalQueryTarget(Le)?W.push(Le):ae=ae.then(function(){return Gd(s,Le),Fs(s.localStore,Le,!0)}),Vd(s.remoteStore,Le)}),[4,ae]);case 4:return de.sent(),[4,xg(s,W)];case 5:return de.sent(),(Le=sn(s)).Co.forEach(function(ct,lt){Vd(Le.remoteStore,lt)}),Le.No.ts(),Le.Co=new Map,Le.Do=new Qo(Wn.comparator),s.$o=!1,[4,_l(s.remoteStore,!1)];case 6:de.sent(),de.label=7;case 7:return[2]}var Le})})}function xg(o,t,s){return(0,ee.mG)(this,void 0,void 0,function(){var l,_,C,D,R,W,ae,de,Me,Le,lt,wt,en;return(0,ee.Jh)(this,function(hn){switch(hn.label){case 0:l=sn(o),_=[],C=[],D=0,R=t,hn.label=1;case 1:return D<R.length?(ae=void 0,(de=l.Vo.get(W=R[D]))&&0!==de.length?[4,Io(l.localStore,Bo(de[0]))]:[3,7]):[3,13];case 2:ae=hn.sent(),Me=0,Le=de,hn.label=3;case 3:return Me<Le.length?(lt=l.Po.get(Le[Me]),[4,__(l,lt)]):[3,6];case 4:(wt=hn.sent()).snapshot&&C.push(wt.snapshot),hn.label=5;case 5:return Me++,[3,3];case 6:return[3,11];case 7:return[4,Nf(l.localStore,W)];case 8:return en=hn.sent(),[4,Io(l.localStore,en)];case 9:return ae=hn.sent(),[4,bh(l,Pg(en),W,!1)];case 10:hn.sent(),hn.label=11;case 11:_.push(ae),hn.label=12;case 12:return D++,[3,1];case 13:return[2,(l.vo._r(C),_)]}})})}function Pg(o){return fu(o.path,o.collectionGroup,o.orderBy,o.filters,o.limit,"F",o.startAt,o.endAt)}function Rg(o){var t=sn(o);return sn(sn(t.localStore).persistence).fn()}function y_(o,t,s,l){return(0,ee.mG)(this,void 0,void 0,function(){var _,C,D;return(0,ee.Jh)(this,function(R){switch(R.label){case 0:return(_=sn(o)).$o?(rn("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!_.Vo.has(t))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ig(_.localStore)];case 3:return C=R.sent(),D=_d.createSynthesizedRemoteEventForCurrentChange(t,"current"===s),[4,Sc(_,C,D)];case 4:return R.sent(),[3,8];case 5:return[4,Fs(_.localStore,t,!0)];case 6:return R.sent(),Gd(_,t,l),[3,8];case 7:Ln(),R.label=8;case 8:return[2]}})})}function kg(o,t,s){return(0,ee.mG)(this,void 0,void 0,function(){var l,_,C,D,R,W,ae,de,Me;return(0,ee.Jh)(this,function(ct){switch(ct.label){case 0:if(!(l=ep(o)).$o)return[3,10];_=0,C=t,ct.label=1;case 1:return _<C.length?l.Vo.has(D=C[_])?(rn("SyncEngine","Adding an already active target "+D),[3,5]):[4,Nf(l.localStore,D)]:[3,6];case 2:return R=ct.sent(),[4,Io(l.localStore,R)];case 3:return W=ct.sent(),[4,bh(l,Pg(R),W.targetId,!1)];case 4:ct.sent(),Wh(l.remoteStore,W),ct.label=5;case 5:return _++,[3,1];case 6:ae=function(lt){return(0,ee.Jh)(this,function(wt){switch(wt.label){case 0:return l.Vo.has(lt)?[4,Fs(l.localStore,lt,!1).then(function(){Vd(l.remoteStore,lt),Gd(l,lt)}).catch(Ra)]:[3,2];case 1:wt.sent(),wt.label=2;case 2:return[2]}})},de=0,Me=s,ct.label=7;case 7:return de<Me.length?[5,ae(Me[de])]:[3,10];case 8:ct.sent(),ct.label=9;case 9:return de++,[3,7];case 10:return[2]}})})}function ep(o){var t=sn(o);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=by.bind(null,t),t.vo._r=$f.bind(null,t.eventManager),t.vo.Mo=h_.bind(null,t.eventManager),t}function tp(o){var t=sn(o);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Sg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ag.bind(null,t),t}var np=function(){function o(){this.synchronizeTabs=!1}return o.prototype.initialize=function(t){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(s){switch(s.label){case 0:return this.R=Ud(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return s.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},o.prototype.Uo=function(t){return null},o.prototype.Ko=function(t){return Dn(this.persistence,new ht,t.initialUser,this.R)},o.prototype.qo=function(t){return new Uu(lg.bs,this.R)},o.prototype.Bo=function(t){return new jf},o.prototype.terminate=function(){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},o}(),Ng=function(o){function t(s,l,_){var C=this;return(C=o.call(this)||this).Qo=s,C.cacheSizeBytes=l,C.forceOwnership=_,C.synchronizeTabs=!1,C}return(0,ee.ZT)(t,o),t.prototype.initialize=function(s){return(0,ee.mG)(this,void 0,void 0,function(){var l=this;return(0,ee.Jh)(this,function(_){switch(_.label){case 0:return[4,o.prototype.initialize.call(this,s)];case 1:return _.sent(),[4,t_(this.localStore)];case 2:return _.sent(),[4,this.Qo.initialize(this,s)];case 3:return _.sent(),[4,tp(this.Qo.syncEngine)];case 4:return _.sent(),[4,yh(this.Qo.remoteStore)];case 5:return _.sent(),[4,this.persistence.He(function(){return l.gcScheduler&&!l.gcScheduler.started&&l.gcScheduler.start(l.localStore),Promise.resolve()})];case 6:return _.sent(),[2]}})})},t.prototype.Ko=function(s){return Dn(this.persistence,new ht,s.initialUser,this.R)},t.prototype.Uo=function(s){return new Rd(this.persistence.referenceDelegate.garbageCollector,s.asyncQueue)},t.prototype.qo=function(s){var l=Q(s.databaseInfo.databaseId,s.databaseInfo.persistenceKey),_=void 0!==this.cacheSizeBytes?ks.withCacheSize(this.cacheSizeBytes):ks.DEFAULT;return new b(this.synchronizeTabs,l,s.clientId,_,s.asyncQueue,ml(),Ld(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(s){return new jf},t}(np),vl=function(o){function t(s,l){var _=this;return(_=o.call(this,s,l,!1)||this).Qo=s,_.cacheSizeBytes=l,_.synchronizeTabs=!0,_}return(0,ee.ZT)(t,o),t.prototype.initialize=function(s){return(0,ee.mG)(this,void 0,void 0,function(){var l,_=this;return(0,ee.Jh)(this,function(C){switch(C.label){case 0:return[4,o.prototype.initialize.call(this,s)];case 1:return C.sent(),l=this.Qo.syncEngine,this.sharedClientState instanceof Zh?(this.sharedClientState.syncEngine={ui:Og.bind(null,l),ai:y_.bind(null,l),hi:kg.bind(null,l),fn:Rg.bind(null,l),ci:Xf.bind(null,l)},[4,this.sharedClientState.start()]):[3,3];case 2:C.sent(),C.label=3;case 3:return[4,this.persistence.He(function(D){return(0,ee.mG)(_,void 0,void 0,function(){return(0,ee.Jh)(this,function(R){switch(R.label){case 0:return[4,v_(this.Qo.syncEngine,D)];case 1:return R.sent(),this.gcScheduler&&(D&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):D||this.gcScheduler.stop()),[2]}})})})];case 4:return C.sent(),[2]}})})},t.prototype.Bo=function(s){var l=ml();if(!Zh.yt(l))throw new Lt(mt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var _=Q(s.databaseInfo.databaseId,s.databaseInfo.persistenceKey);return new Zh(l,s.asyncQueue,_,s.clientId,s.initialUser)},t}(Ng),Ch=function(){function o(){}return o.prototype.initialize=function(t,s){return(0,ee.mG)(this,void 0,void 0,function(){var l=this;return(0,ee.Jh)(this,function(_){switch(_.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(C){return Kf(l.syncEngine,C,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ig.bind(null,this.syncEngine),[4,_l(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:_.sent(),_.label=2;case 2:return[2]}})})},o.prototype.createEventManager=function(t){return new bg},o.prototype.createDatastore=function(t){var l=Ud(t.databaseInfo.databaseId),_=new Hf(t.databaseInfo);return new jl(t.credentials,_,l)},o.prototype.createRemoteStore=function(t){var s,l,_,C,D,R=this;return s=this.localStore,l=this.datastore,_=t.asyncQueue,C=function(W){return Kf(R.syncEngine,W,0)},D=iu.yt()?new iu:new qh,new $h(s,l,_,C,D)},o.prototype.createSyncEngine=function(t,s){return ae=s,de=new Eg(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions),ae&&(de.$o=!0),de;var ae,de},o.prototype.terminate=function(){return function(t){return(0,ee.mG)(this,void 0,void 0,function(){var s;return(0,ee.Jh)(this,function(l){switch(l.label){case 0:return s=sn(t),rn("RemoteStore","RemoteStore shutting down."),s.Or.add(5),[4,vh(s)];case 1:return l.sent(),s.Lr.shutdown(),s.Br.set("Unknown"),[2]}})})}(this.remoteStore)},o}(),nf=function(){function o(t){this.observer=t,this.muted=!1}return o.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},o.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},o.prototype.Wo=function(){this.muted=!0},o.prototype.jo=function(t,s){var l=this;this.muted||setTimeout(function(){l.muted||t(s)},0)},o}(),Ug=(function(){function o(t,s){var l=this;this.Go=t,this.R=s,this.metadata=new es,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(_){_&&_.io()?l.metadata.resolve(_.payload.metadata):l.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==_?void 0:_.payload)))},function(_){return l.metadata.reject(_)})}o.prototype.close=function(){return this.Go.cancel()},o.prototype.getMetadata=function(){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(t){return[2,this.metadata.promise]})})},o.prototype.Lo=function(){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},o.prototype.Ho=function(){return(0,ee.mG)(this,void 0,void 0,function(){var t,s,l,_;return(0,ee.Jh)(this,function(C){switch(C.label){case 0:return[4,this.Jo()];case 1:return null===(t=C.sent())?[2,null]:(s=this.zo.decode(t),l=Number(s),isNaN(l)&&this.Yo("length string ("+s+") is not valid number"),[4,this.Xo(l)]);case 2:return _=C.sent(),[2,new f_(JSON.parse(_),t.length+l)]}})})},o.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},o.prototype.Jo=function(){return(0,ee.mG)(this,void 0,void 0,function(){var t,s;return(0,ee.Jh)(this,function(l){switch(l.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(l.sent())return[3,3];l.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),s=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),s)])}})})},o.prototype.Xo=function(t){return(0,ee.mG)(this,void 0,void 0,function(){var s;return(0,ee.Jh)(this,function(l){switch(l.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:l.sent()&&this.Yo("Reached the end of bundle when more is expected."),l.label=2;case 2:return[3,0];case 3:return s=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),s)]}})})},o.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},o.prototype.tc=function(){return(0,ee.mG)(this,void 0,void 0,function(){var t,s;return(0,ee.Jh)(this,function(l){switch(l.label){case 0:return[4,this.Go.read()];case 1:return(t=l.sent()).done||((s=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),s.set(t.value,this.buffer.length),this.buffer=s),[2,t.done]}})})}}(),function(){function o(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return o.prototype.lookup=function(t){return(0,ee.mG)(this,void 0,void 0,function(){var s,l=this;return(0,ee.Jh)(this,function(_){switch(_.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Lt(mt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(C,D){return(0,ee.mG)(this,void 0,void 0,function(){var R,W,ae,de,Me,Le;return(0,ee.Jh)(this,function(ct){switch(ct.label){case 0:return R=sn(C),W=ua(R.R)+"/documents",ae={documents:D.map(function(lt){return il(R.R,lt)})},[4,R.$i("BatchGetDocuments",W,ae)];case 1:return de=ct.sent(),Me=new Map,de.forEach(function(lt){var en,hn,wt=(en=R.R,"found"in(hn=lt)?function(rr,ir){Xn(!!ir.found);var Jr=Oa(rr,ir.found.name),_i=zi(ir.found.updateTime),Hi=new mi({mapValue:{fields:ir.found.fields}});return Or.newFoundDocument(Jr,_i,Hi)}(en,hn):"missing"in hn?function(rr,ir){Xn(!!ir.missing),Xn(!!ir.readTime);var Jr=Oa(rr,ir.missing),_i=zi(ir.readTime);return Or.newNoDocument(Jr,_i)}(en,hn):Ln());Me.set(wt.key.toString(),wt)}),Le=[],[2,(D.forEach(function(lt){var wt=Me.get(lt.toString());Xn(!!wt),Le.push(wt)}),Le)]}})})}(this.datastore,t)];case 1:return[2,((s=_.sent()).forEach(function(C){return l.recordVersion(C)}),s)]}})})},o.prototype.set=function(t,s){this.write(s.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},o.prototype.update=function(t,s){try{this.write(s.toMutation(t,this.preconditionForUpdate(t)))}catch(l){this.lastWriteError=l}this.writtenDocs.add(t.toString())},o.prototype.delete=function(t){this.write(new sa(t,this.precondition(t))),this.writtenDocs.add(t.toString())},o.prototype.commit=function(){return(0,ee.mG)(this,void 0,void 0,function(){var t,s=this;return(0,ee.Jh)(this,function(l){switch(l.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(_){t.delete(_.key.toString())}),t.forEach(function(_,C){var D=Wn.fromPath(C);s.mutations.push(new Ja(D,s.precondition(D)))}),[4,function(_,C){return(0,ee.mG)(this,void 0,void 0,function(){var D,R,W;return(0,ee.Jh)(this,function(ae){switch(ae.label){case 0:return D=sn(_),R=ua(D.R)+"/documents",W={writes:C.map(function(de){return $c(D.R,de)})},[4,D.Ni("Commit",R,W)];case 1:return ae.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return l.sent(),this.committed=!0,[2]}})})},o.prototype.recordVersion=function(t){var s;if(t.isFoundDocument())s=t.version;else{if(!t.isNoDocument())throw Ln();s=x.min()}var l=this.readVersions.get(t.key.toString());if(l){if(!s.isEqual(l))throw new Lt(mt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),s)},o.prototype.precondition=function(t){var s=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&s?So.updateTime(s):So.none()},o.prototype.preconditionForUpdate=function(t){var s=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&s){if(s.isEqual(x.min()))throw new Lt(mt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return So.updateTime(s)}return So.exists(!0)},o.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},o.prototype.ensureCommitNotCalled=function(){},o}()),b_=function(){function o(t,s,l,_){this.asyncQueue=t,this.datastore=s,this.updateFunction=l,this.deferred=_,this.ec=5,this.Zi=new _h(this.asyncQueue,"transaction_retry")}return o.prototype.run=function(){this.ec-=1,this.nc()},o.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,ee.mG)(t,void 0,void 0,function(){var s,l,_=this;return(0,ee.Jh)(this,function(C){return s=new Ug(this.datastore),(l=this.sc(s))&&l.then(function(D){_.asyncQueue.enqueueAndForget(function(){return s.commit().then(function(){_.deferred.resolve(D)}).catch(function(R){_.ic(R)})})}).catch(function(D){_.ic(D)}),[2]})})})},o.prototype.sc=function(t){try{var s=this.updateFunction(t);return!Wo(s)&&s.catch&&s.then?s:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(l){return this.deferred.reject(l),null}},o.prototype.ic=function(t){var s=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return s.nc(),Promise.resolve()})):this.deferred.reject(t)},o.prototype.rc=function(t){if("FirebaseError"===t.name){var s=t.code;return"aborted"===s||"failed-precondition"===s||!Gc(s)}return!1},o}(),C_=function(){function o(t,s,l){var _=this;this.credentials=t,this.asyncQueue=s,this.databaseInfo=l,this.user=Ts.UNAUTHENTICATED,this.clientId=lu.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(s,function(C){return(0,ee.mG)(_,void 0,void 0,function(){return(0,ee.Jh)(this,function(D){switch(D.label){case 0:return rn("FirestoreClient","Received user=",C.uid),[4,this.credentialListener(C)];case 1:return D.sent(),this.user=C,[2]}})})})}return o.prototype.getConfiguration=function(){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},o.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},o.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Lt(mt.FAILED_PRECONDITION,"The client has already been terminated.")},o.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var s=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,ee.mG)(t,void 0,void 0,function(){var l,_;return(0,ee.Jh)(this,function(C){switch(C.label){case 0:return C.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:C.sent(),C.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:C.sent(),C.label=4;case 4:return this.credentials.removeChangeListener(),s.resolve(),[3,6];case 5:return l=C.sent(),_=Tc(l,"Failed to shutdown persistence"),s.reject(_),[3,6];case 6:return[2]}})})}),s.promise},o}();function Vg(o,t){return(0,ee.mG)(this,void 0,void 0,function(){var s,l,_=this;return(0,ee.Jh)(this,function(C){switch(C.label){case 0:return o.asyncQueue.verifyOperationInProgress(),rn("FirestoreClient","Initializing OfflineComponentProvider"),[4,o.getConfiguration()];case 1:return s=C.sent(),[4,t.initialize(s)];case 2:return C.sent(),l=s.initialUser,o.setCredentialChangeListener(function(D){return(0,ee.mG)(_,void 0,void 0,function(){return(0,ee.Jh)(this,function(R){switch(R.label){case 0:return l.isEqual(D)?[3,2]:[4,bn(t.localStore,D)];case 1:R.sent(),l=D,R.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return o.terminate()}),o.offlineComponents=t,[2]}})})}function rf(o,t){return(0,ee.mG)(this,void 0,void 0,function(){var s,l;return(0,ee.Jh)(this,function(_){switch(_.label){case 0:return o.asyncQueue.verifyOperationInProgress(),[4,rp(o)];case 1:return s=_.sent(),rn("FirestoreClient","Initializing OnlineComponentProvider"),[4,o.getConfiguration()];case 2:return l=_.sent(),[4,t.initialize(s,l)];case 3:return _.sent(),o.setCredentialChangeListener(function(C){return function(D,R){return(0,ee.mG)(this,void 0,void 0,function(){var W,ae;return(0,ee.Jh)(this,function(de){switch(de.label){case 0:return(W=sn(D)).asyncQueue.verifyOperationInProgress(),rn("RemoteStore","RemoteStore received new credentials"),ae=Hl(W),W.Or.add(3),[4,vh(W)];case 1:return de.sent(),ae&&W.Br.set("Unknown"),[4,W.remoteSyncer.handleCredentialChange(R)];case 2:return de.sent(),W.Or.delete(3),[4,Xc(W)];case 3:return de.sent(),[2]}})})}(t.remoteStore,C)}),o.onlineComponents=t,[2]}})})}function rp(o){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(t){switch(t.label){case 0:return o.offlineComponents?[3,2]:(rn("FirestoreClient","Using default OfflineComponentProvider"),[4,Vg(o,new np)]);case 1:t.sent(),t.label=2;case 2:return[2,o.offlineComponents]}})})}function of(o){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(t){switch(t.label){case 0:return o.onlineComponents?[3,2]:(rn("FirestoreClient","Using default OnlineComponentProvider"),[4,rf(o,new Ch)]);case 1:t.sent(),t.label=2;case 2:return[2,o.onlineComponents]}})})}function wh(o){return rp(o).then(function(t){return t.persistence})}function Eh(o){return rp(o).then(function(t){return t.localStore})}function Bg(o){return of(o).then(function(t){return t.remoteStore})}function Th(o){return of(o).then(function(t){return t.syncEngine})}function Ac(o){return(0,ee.mG)(this,void 0,void 0,function(){var t,s;return(0,ee.Jh)(this,function(l){switch(l.label){case 0:return[4,of(o)];case 1:return t=l.sent(),[2,((s=t.eventManager).onListen=Yf.bind(null,t.syncEngine),s.onUnlisten=Tg.bind(null,t.syncEngine),s)]}})})}function ip(o,t,s){var l=this;void 0===s&&(s={});var _=new es;return o.asyncQueue.enqueueAndForget(function(){return(0,ee.mG)(l,void 0,void 0,function(){var C;return(0,ee.Jh)(this,function(D){switch(D.label){case 0:return C=function(R,W,ae,de,Me){var Le=new nf({next:function(lt){W.enqueueAndForget(function(){return Cg(R,ct)});var wt=lt.docs.has(ae);!wt&&lt.fromCache?Me.reject(new Lt(mt.UNAVAILABLE,"Failed to get document because the client is offline.")):wt&&lt.fromCache&&de&&"server"===de.source?Me.reject(new Lt(mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Me.resolve(lt)},error:function(lt){return Me.reject(lt)}}),ct=new Wf(pu(ae.path),Le,{includeMetadataChanges:!0,so:!0});return zf(R,ct)},[4,Ac(o)];case 1:return[2,C.apply(void 0,[D.sent(),o.asyncQueue,t,s,_])]}})})}),_.promise}function jg(o,t,s){var l=this;void 0===s&&(s={});var _=new es;return o.asyncQueue.enqueueAndForget(function(){return(0,ee.mG)(l,void 0,void 0,function(){var C;return(0,ee.Jh)(this,function(D){switch(D.label){case 0:return C=function(R,W,ae,de,Me){var Le=new nf({next:function(lt){W.enqueueAndForget(function(){return Cg(R,ct)}),lt.fromCache&&"server"===de.source?Me.reject(new Lt(mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Me.resolve(lt)},error:function(lt){return Me.reject(lt)}}),ct=new Wf(ae,Le,{includeMetadataChanges:!0,so:!0});return zf(R,ct)},[4,Ac(o)];case 1:return[2,C.apply(void 0,[D.sent(),o.asyncQueue,t,s,_])]}})})}),_.promise}var w_=function(o,t,s,l,_,C,D,R){this.databaseId=o,this.appId=t,this.persistenceKey=s,this.host=l,this.ssl=_,this.forceLongPolling=C,this.autoDetectLongPolling=D,this.useFetchStreams=R},Zd=function(){function o(t,s){this.projectId=t,this.database=s||"(default)"}return Object.defineProperty(o.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return t instanceof o&&t.projectId===this.projectId&&t.database===this.database},o}(),E_=new Map,Hg=function(o,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+o},op=function(){function o(){this.changeListener=null}return o.prototype.getToken=function(){return Promise.resolve(null)},o.prototype.invalidateToken=function(){},o.prototype.setChangeListener=function(t,s){this.changeListener=s,t.enqueueRetryable(function(){return s(Ts.UNAUTHENTICATED)})},o.prototype.removeChangeListener=function(){this.changeListener=null},o}(),Gg=function(){function o(t){this.token=t,this.changeListener=null}return o.prototype.getToken=function(){return Promise.resolve(this.token)},o.prototype.invalidateToken=function(){},o.prototype.setChangeListener=function(t,s){var l=this;this.changeListener=s,t.enqueueRetryable(function(){return s(l.token.user)})},o.prototype.removeChangeListener=function(){this.changeListener=null},o}(),Zg=function(){function o(t){var s=this;this.currentUser=Ts.UNAUTHENTICATED,this.oc=new es,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){s.cc++,s.currentUser=s.ac(),s.oc.resolve(),s.changeListener&&s.asyncQueue.enqueueRetryable(function(){return s.changeListener(s.currentUser)})};var l=function(_){rn("FirebaseCredentialsProvider","Auth detected"),s.auth=_,s.auth.addAuthTokenListener(s.uc)};t.onInit(function(_){return l(_)}),setTimeout(function(){if(!s.auth){var _=t.getImmediate({optional:!0});_?l(_):(rn("FirebaseCredentialsProvider","Auth not yet detected"),s.oc.resolve())}},0)}return o.prototype.getToken=function(){var t=this,s=this.cc,l=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(l).then(function(_){return t.cc!==s?(rn("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):_?(Xn("string"==typeof _.accessToken),new Hg(_.accessToken,t.currentUser)):null}):Promise.resolve(null)},o.prototype.invalidateToken=function(){this.forceRefresh=!0},o.prototype.setChangeListener=function(t,s){var l=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,ee.mG)(l,void 0,void 0,function(){return(0,ee.Jh)(this,function(_){switch(_.label){case 0:return[4,this.oc.promise];case 1:return _.sent(),[4,s(this.currentUser)];case 2:return _.sent(),this.changeListener=s,[2]}})})})},o.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},o.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Xn(null===t||"string"==typeof t),new Ts(t)},o}(),qg=function(){function o(t,s,l){this.hc=t,this.lc=s,this.fc=l,this.type="FirstParty",this.user=Ts.FIRST_PARTY}return Object.defineProperty(o.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},s=this.hc.auth.getAuthHeaderValueForFirstParty([]);return s&&(t.Authorization=s),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),o}(),zg=function(){function o(t,s,l){this.hc=t,this.lc=s,this.fc=l}return o.prototype.getToken=function(){return Promise.resolve(new qg(this.hc,this.lc,this.fc))},o.prototype.setChangeListener=function(t,s){t.enqueueRetryable(function(){return s(Ts.FIRST_PARTY)})},o.prototype.removeChangeListener=function(){},o.prototype.invalidateToken=function(){},o}();function Vu(o,t,s){if(!s)throw new Lt(mt.INVALID_ARGUMENT,"Function "+o+"() cannot be called with an empty "+t+".")}function qd(o,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Lt(mt.INVALID_ARGUMENT,"Invalid options passed to function "+o+'(): You cannot specify both "merge" and "mergeFields".');return t}function $g(o,t,s,l){if(!0===t&&!0===l)throw new Lt(mt.INVALID_ARGUMENT,o+" and "+s+" cannot be used together.")}function Wg(o){if(!Wn.isDocumentKey(o))throw new Lt(mt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+o+" has "+o.length+".")}function T_(o){if(Wn.isDocumentKey(o))throw new Lt(mt.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+o+" has "+o.length+".")}function Gl(o){if(void 0===o)return"undefined";if(null===o)return"null";if("string"==typeof o)return o.length>20&&(o=o.substring(0,20)+"..."),JSON.stringify(o);if("number"==typeof o||"boolean"==typeof o)return""+o;if("object"==typeof o){if(o instanceof Array)return"an array";var t=function(s){if(s.constructor){var l=/function\s+([^\s(]+)\s*\(/.exec(s.constructor.toString());if(l&&l.length>1)return l[1]}return null}(o);return t?"a custom "+t+" object":"an object"}return"function"==typeof o?"a function":Ln()}function Di(o,t){if("_delegate"in o&&(o=o._delegate),!(o instanceof t)){if(t.name===o.constructor.name)throw new Lt(mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var s=Gl(o);throw new Lt(mt.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+s)}return o}function zd(o,t){if(t<=0)throw new Lt(mt.INVALID_ARGUMENT,"Function "+o+"() requires a positive number, but it was: "+t+".")}var $d=function(){function o(t){var s;if(void 0===t.host){if(void 0!==t.ssl)throw new Lt(mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(s=t.ssl)||void 0===s||s;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Lt(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,$g("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return o.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},o}(),Dh=function(){function o(t,s){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $d({}),this._settingsFrozen=!1,t instanceof Zd?(this._databaseId=t,this._credentials=new op):(this._app=t,this._databaseId=function(l){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Lt(mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zd(l.options.projectId)}(t),this._credentials=new Zg(s))}return Object.defineProperty(o.prototype,"app",{get:function(){if(!this._app)throw new Lt(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),o.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Lt(mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $d(t),void 0!==t.credentials&&(this._credentials=function(s){if(!s)return new op;switch(s.type){case"gapi":var l=s.client;return Xn(!("object"!=typeof l||null===l||!l.auth||!l.auth.getAuthHeaderValueForFirstParty)),new zg(l,s.sessionIndex||"0",s.iamToken||null);case"provider":return s.client;default:throw new Lt(mt.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},o.prototype._getSettings=function(){return this._settings},o.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},o.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},o.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},o.prototype._terminate=function(){return(s=E_.get(this))&&(rn("ComponentProvider","Removing Datastore"),E_.delete(this),s.terminate()),Promise.resolve();var s},o}(),lo=function(){function o(t,s,l){this.converter=s,this._key=l,this.type="document",this.firestore=t}return Object.defineProperty(o.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"parent",{get:function(){return new Mc(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),o.prototype.withConverter=function(t){return new o(this.firestore,t,this._key)},o}(),ea=function(){function o(t,s,l){this.converter=s,this._query=l,this.type="query",this.firestore=t}return o.prototype.withConverter=function(t){return new o(this.firestore,t,this._query)},o}(),Mc=function(o){function t(s,l,_){var C=this;return(C=o.call(this,s,l,pu(_))||this)._path=_,C.type="collection",C}return(0,ee.ZT)(t,o),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var s=this._path.popLast();return s.isEmpty()?null:new lo(this.firestore,null,new Wn(s))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(s){return new t(this.firestore,s,this._path)},t}(ea);function sp(o,t){for(var s,l=[],_=2;_<arguments.length;_++)l[_-2]=arguments[_];if(o=(0,ze.m9)(o),Vu("collection","path",t),o instanceof Dh)return T_(s=Te.fromString.apply(Te,(0,ee.ev)([t],l))),new Mc(o,null,s);if(!(o instanceof lo||o instanceof Mc))throw new Lt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return T_(s=Te.fromString.apply(Te,(0,ee.ev)([o.path],l)).child(Te.fromString(t))),new Mc(o.firestore,null,s)}function sf(o,t){for(var s,l=[],_=2;_<arguments.length;_++)l[_-2]=arguments[_];if(o=(0,ze.m9)(o),1===arguments.length&&(t=lu.u()),Vu("doc","path",t),o instanceof Dh)return Wg(s=Te.fromString.apply(Te,(0,ee.ev)([t],l))),new lo(o,null,new Wn(s));if(!(o instanceof lo||o instanceof Mc))throw new Lt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Wg(s=o._path.child(Te.fromString.apply(Te,(0,ee.ev)([t],l)))),new lo(o.firestore,o instanceof Mc?o.converter:null,new Wn(s))}function af(o,t){return o=(0,ze.m9)(o),t=(0,ze.m9)(t),(o instanceof lo||o instanceof Mc)&&(t instanceof lo||t instanceof Mc)&&o.firestore===t.firestore&&o.path===t.path&&o.converter===t.converter}function Yg(o,t){return o=(0,ze.m9)(o),t=(0,ze.m9)(t),o instanceof ea&&t instanceof ea&&o.firestore===t.firestore&&Il(o._query,t._query)&&o.converter===t.converter}var D_=function(){function o(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new _h(this,"async_queue_retry"),this.Ic=function(){var l=Ld();l&&rn("AsyncQueue","Visibility state changed to "+l.visibilityState),t.Zi.Gi()};var s=Ld();s&&"function"==typeof s.addEventListener&&s.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(o.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),o.prototype.enqueueAndForget=function(t){this.enqueue(t)},o.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},o.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var s=Ld();s&&"function"==typeof s.removeEventListener&&s.removeEventListener("visibilitychange",this.Ic)}},o.prototype.enqueue=function(t){var s=this;if(this.Ac(),this._c)return new Promise(function(){});var l=new es;return this.Rc(function(){return s._c&&s.Ec?Promise.resolve():(t().then(l.resolve,l.reject),l.promise)}).then(function(){return l.promise})},o.prototype.enqueueRetryable=function(t){var s=this;this.enqueueAndForget(function(){return s.wc.push(t),s.bc()})},o.prototype.bc=function(){return(0,ee.mG)(this,void 0,void 0,function(){var t,s=this;return(0,ee.Jh)(this,function(l){switch(l.label){case 0:if(0===this.wc.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return l.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ul(t=l.sent()))throw t;return rn("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return s.bc()}),l.label=5;case 5:return[2]}})})},o.prototype.Rc=function(t){var s=this,l=this.dc.then(function(){return s.gc=!0,t().catch(function(_){throw s.yc=_,s.gc=!1,Pi("INTERNAL UNHANDLED ERROR: ",(D=(C=_).message||"",C.stack&&(D=C.stack.includes(C.message)?C.stack:C.message+"\n"+C.stack),D)),_;var C,D}).then(function(_){return s.gc=!1,_})});return this.dc=l,l},o.prototype.enqueueAfterDelay=function(t,s,l){var _=this;this.Ac(),this.Tc.indexOf(t)>-1&&(s=0);var C=yg.createAndSchedule(this,t,s,l,function(D){return _.vc(D)});return this.mc.push(C),C},o.prototype.Ac=function(){this.yc&&Ln()},o.prototype.verifyOperationInProgress=function(){},o.prototype.Pc=function(){return(0,ee.mG)(this,void 0,void 0,function(){var t;return(0,ee.Jh)(this,function(s){switch(s.label){case 0:return[4,t=this.dc];case 1:s.sent(),s.label=2;case 2:if(t!==this.dc)return[3,0];s.label=3;case 3:return[2]}})})},o.prototype.Vc=function(t){for(var s=0,l=this.mc;s<l.length;s++)if(l[s].timerId===t)return!0;return!1},o.prototype.Sc=function(t){var s=this;return this.Pc().then(function(){s.mc.sort(function(D,R){return D.targetTimeMs-R.targetTimeMs});for(var l=0,_=s.mc;l<_.length;l++){var C=_[l];if(C.skipDelay(),"all"!==t&&C.timerId===t)break}return s.Pc()})},o.prototype.Dc=function(t){this.Tc.push(t)},o.prototype.vc=function(t){var s=this.mc.indexOf(t);this.mc.splice(s,1)},o}();function nd(o){return function(t,s){if("object"!=typeof t||null===t)return!1;for(var l=t,_=0,C=["next","error","complete"];_<C.length;_++){var D=C[_];if(D in l&&"function"==typeof l[D])return!0}return!1}(o)}!function(){function o(){this._progressObserver={},this._taskCompletionResolver=new es,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}o.prototype.onProgress=function(t,s,l){this._progressObserver={next:t,error:s,complete:l}},o.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},o.prototype.then=function(t,s){return this._taskCompletionResolver.promise.then(t,s)},o.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},o.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},o.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Ho=function(o){function t(s,l){var _=this;return(_=o.call(this,s,l)||this).type="firestore",_._queue=new D_,_._persistenceKey="name"in s?s.name:"[DEFAULT]",_}return(0,ee.ZT)(t,o),t.prototype._terminate=function(){return this._firestoreClient||rd(this),this._firestoreClient.terminate()},t}(Dh);function fs(o){return o._firestoreClient||rd(o),o._firestoreClient.verifyNotTerminated(),o._firestoreClient}function rd(o){var t,C,R,s=o._freezeSettings(),l=(C=(null===(t=o._app)||void 0===t?void 0:t.options.appId)||"",new w_(o._databaseId,C,o._persistenceKey,(R=s).host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,R.useFetchStreams));o._firestoreClient=new C_(o._credentials,o._queue,l)}function Qg(o,t,s){var l=this,_=new es;return o.asyncQueue.enqueue(function(){return(0,ee.mG)(l,void 0,void 0,function(){var C;return(0,ee.Jh)(this,function(D){switch(D.label){case 0:return D.trys.push([0,3,,4]),[4,Vg(o,s)];case 1:return D.sent(),[4,rf(o,t)];case 2:return D.sent(),_.resolve(),[3,4];case 3:if(!("FirebaseError"===(R=C=D.sent()).name?R.code===mt.FAILED_PRECONDITION||R.code===mt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&R instanceof DOMException)||22===R.code||20===R.code||11===R.code))throw C;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+C),_.reject(C),[3,4];case 4:return[2]}var R})})}).then(function(){return _.promise})}function Jg(o){if(o._initialized||o._terminated)throw new Lt(mt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var yl=function(){function o(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];for(var l=0;l<t.length;++l)if(0===t[l].length)throw new Lt(mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(t)}return o.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},o}(),id=function(){function o(t){this._byteString=t}return o.fromBase64String=function(t){try{return new o(ar.fromBase64String(t))}catch(s){throw new Lt(mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}},o.fromUint8Array=function(t){return new o(ar.fromUint8Array(t))},o.prototype.toBase64=function(){return this._byteString.toBase64()},o.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},o.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},o.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},o}(),Yd=function(o){this._methodName=o},uf=function(){function o(t,s){if(!isFinite(t)||t<-90||t>90)throw new Lt(mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new Lt(mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}return Object.defineProperty(o.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},o.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},o.prototype._compareTo=function(t){return kr(this._lat,t._lat)||kr(this._long,t._long)},o}(),Xg=/^__.*__$/,yo=function(){function o(t,s,l){this.data=t,this.fieldMask=s,this.fieldTransforms=l}return o.prototype.toMutation=function(t,s){return null!==this.fieldMask?new Cs(t,this.data,this.fieldMask,s,this.fieldTransforms):new Qa(t,this.data,s,this.fieldTransforms)},o}(),lf=function(){function o(t,s,l){this.data=t,this.fieldMask=s,this.fieldTransforms=l}return o.prototype.toMutation=function(t,s){return new Cs(t,this.data,this.fieldMask,s,this.fieldTransforms)},o}();function S_(o){switch(o){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ln()}}var bl=function(){function o(t,s,l,_,C,D){this.settings=t,this.databaseId=s,this.R=l,this.ignoreUndefinedProperties=_,void 0===C&&this.Cc(),this.fieldTransforms=C||[],this.fieldMask=D||[]}return Object.defineProperty(o.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),o.prototype.xc=function(t){return new o(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},o.prototype.kc=function(t){var s,l=null===(s=this.path)||void 0===s?void 0:s.child(t),_=this.xc({path:l,Fc:!1});return _.$c(t),_},o.prototype.Oc=function(t){var s,l=null===(s=this.path)||void 0===s?void 0:s.child(t),_=this.xc({path:l,Fc:!1});return _.Cc(),_},o.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},o.prototype.Lc=function(t){return hf(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},o.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(s){return t.isPrefixOf(s)})||void 0!==this.fieldTransforms.find(function(s){return t.isPrefixOf(s.field)})},o.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},o.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(S_(this.Nc)&&Xg.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},o}(),ap=function(){function o(t,s,l){this.databaseId=t,this.ignoreUndefinedProperties=s,this.R=l||Ud(t)}return o.prototype.Uc=function(t,s,l,_){return void 0===_&&(_=!1),new bl({Nc:t,methodName:s,qc:l,path:bt.emptyPath(),Fc:!1,Bc:_},this.databaseId,this.R,this.ignoreUndefinedProperties)},o}();function Zl(o){var t=o._freezeSettings(),s=Ud(o._databaseId);return new ap(o._databaseId,!!t.ignoreUndefinedProperties,s)}function up(o,t,s,l,_,C){void 0===C&&(C={});var D=o.Uc(C.merge||C.mergeFields?2:0,t,s,_);cf("Data must be an object, but it was:",D,l);var R,W,ae=hp(l,D);if(C.merge)R=new dn(D.fieldMask),W=D.fieldTransforms;else if(C.mergeFields){for(var de=[],Me=0,Le=C.mergeFields;Me<Le.length;Me++){var ct=df(t,Le[Me],s);if(!D.contains(ct))throw new Lt(mt.INVALID_ARGUMENT,"Field '"+ct+"' is specified in your field mask but missing from your input data.");om(de,ct)||de.push(ct)}R=new dn(de),W=D.fieldTransforms.filter(function(lt){return R.covers(lt.field)})}else R=null,W=D.fieldTransforms;return new yo(new mi(ae),R,W)}var lp=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ee.ZT)(t,o),t.prototype._toFieldTransform=function(s){if(2!==s.Nc)throw s.Lc(1===s.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return s.fieldMask.push(s.path),null},t.prototype.isEqual=function(s){return s instanceof t},t}(Yd);function em(o,t,s){return new bl({Nc:3,qc:t.settings.qc,methodName:o._methodName,Fc:s},t.databaseId,t.R,t.ignoreUndefinedProperties)}var tm=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ee.ZT)(t,o),t.prototype._toFieldTransform=function(s){return new Ka(s.path,new vu)},t.prototype.isEqual=function(s){return s instanceof t},t}(Yd),nm=function(o){function t(s,l){var _=this;return(_=o.call(this,s)||this).Kc=l,_}return(0,ee.ZT)(t,o),t.prototype._toFieldTransform=function(s){var l=em(this,s,!0),_=this.Kc.map(function(D){return ql(D,l)}),C=new Ya(_);return new Ka(s.path,C)},t.prototype.isEqual=function(s){return this===s},t}(Yd),rm=function(o){function t(s,l){var _=this;return(_=o.call(this,s)||this).Kc=l,_}return(0,ee.ZT)(t,o),t.prototype._toFieldTransform=function(s){var l=em(this,s,!0),_=this.Kc.map(function(D){return ql(D,l)}),C=new bu(_);return new Ka(s.path,C)},t.prototype.isEqual=function(s){return this===s},t}(Yd),im=function(o){function t(s,l){var _=this;return(_=o.call(this,s)||this).Qc=l,_}return(0,ee.ZT)(t,o),t.prototype._toFieldTransform=function(s){var l=new as(s.R,bi(s.R,this.Qc));return new Ka(s.path,l)},t.prototype.isEqual=function(s){return this===s},t}(Yd);function cp(o,t,s,l){var _=o.Uc(1,t,s);cf("Data must be an object, but it was:",_,l);var C=[],D=mi.empty();q(l,function(W,ae){var de=pp(t,W,s);ae=(0,ze.m9)(ae);var Me=_.Oc(de);if(ae instanceof lp)C.push(de);else{var Le=ql(ae,Me);null!=Le&&(C.push(de),D.set(de,Le))}});var R=new dn(C);return new lf(D,R,_.fieldTransforms)}function dp(o,t,s,l,_,C){var D=o.Uc(1,t,s),R=[df(t,l,s)],W=[_];if(C.length%2!=0)throw new Lt(mt.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var ae=0;ae<C.length;ae+=2)R.push(df(t,C[ae])),W.push(C[ae+1]);for(var de=[],Me=mi.empty(),Le=R.length-1;Le>=0;--Le)if(!om(de,R[Le])){var ct=R[Le],lt=W[Le];lt=(0,ze.m9)(lt);var wt=D.Oc(ct);if(lt instanceof lp)de.push(ct);else{var en=ql(lt,wt);null!=en&&(de.push(ct),Me.set(ct,en))}}var hn=new dn(de);return new lf(Me,hn,D.fieldTransforms)}function Kd(o,t,s,l){return void 0===l&&(l=!1),ql(s,o.Uc(l?4:3,t))}function ql(o,t){if(fp(o=(0,ze.m9)(o)))return cf("Unsupported field value:",t,o),hp(o,t);if(o instanceof Yd)return function(s,l){if(!S_(l.Nc))throw l.Lc(s._methodName+"() can only be used with update() and set()");if(!l.path)throw l.Lc(s._methodName+"() is not currently supported inside arrays");var _=s._toFieldTransform(l);_&&l.fieldTransforms.push(_)}(o,t),null;if(void 0===o&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),o instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(s,l){for(var _=[],C=0,D=0,R=s;D<R.length;D++){var W=ql(R[D],l.Mc(C));null==W&&(W={nullValue:"NULL_VALUE"}),_.push(W),C++}return{arrayValue:{values:_}}}(o,t)}return function(s,l){if(null===(s=(0,ze.m9)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return bi(l.R,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){var _=U.fromDate(s);return{timestampValue:Jo(l.R,_)}}if(s instanceof U)return _=new U(s.seconds,1e3*Math.floor(s.nanoseconds/1e3)),{timestampValue:Jo(l.R,_)};if(s instanceof uf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof id)return{bytesValue:bd(l.R,s._byteString)};if(s instanceof lo){var C=s.firestore._databaseId;if(!C.isEqual(_=l.databaseId))throw l.Lc("Document reference is for database "+C.projectId+"/"+C.database+" but should be for database "+_.projectId+"/"+_.database);return{referenceValue:Fl(s.firestore._databaseId||l.databaseId,s._key.path)}}throw l.Lc("Unsupported field value: "+Gl(s))}(o,t)}function hp(o,t){var s={};return X(o)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):q(o,function(l,_){var C=ql(_,t.kc(l));null!=C&&(s[l]=C)}),{mapValue:{fields:s}}}function fp(o){return!("object"!=typeof o||null===o||o instanceof Array||o instanceof Date||o instanceof U||o instanceof uf||o instanceof id||o instanceof lo||o instanceof Yd)}function cf(o,t,s){if(!fp(s)||"object"!=typeof(_=s)||null===_||Object.getPrototypeOf(_)!==Object.prototype&&null!==Object.getPrototypeOf(_)){var l=Gl(s);throw t.Lc("an object"===l?o+" a custom object":o+" "+l)}var _}function df(o,t,s){if((t=(0,ze.m9)(t))instanceof yl)return t._internalPath;if("string"==typeof t)return pp(o,t);throw hf("Field path arguments must be of type string or FieldPath.",o,!1,void 0,s)}var A_=new RegExp("[~\\*/\\[\\]]");function pp(o,t,s){if(t.search(A_)>=0)throw hf("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",o,!1,void 0,s);try{return(new(yl.bind.apply(yl,(0,ee.ev)([void 0],t.split(".")))))._internalPath}catch(l){throw hf("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",o,!1,void 0,s)}}function hf(o,t,s,l,_){var C=l&&!l.isEmpty(),D=void 0!==_,R="Function "+t+"() called with invalid data";s&&(R+=" (via `toFirestore()`)");var W="";return(C||D)&&(W+=" (found",C&&(W+=" in field "+l),D&&(W+=" in document "+_),W+=")"),new Lt(mt.INVALID_ARGUMENT,(R+=". ")+o+W)}function om(o,t){return o.some(function(s){return s.isEqual(t)})}var Qd=function(){function o(t,s,l,_,C){this._firestore=t,this._userDataWriter=s,this._key=l,this._document=_,this._converter=C}return Object.defineProperty(o.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ref",{get:function(){return new lo(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),o.prototype.exists=function(){return null!==this._document},o.prototype.data=function(){if(this._document){if(this._converter){var t=new Ey(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},o.prototype.get=function(t){if(this._document){var s=this._document.data.field(Sh("DocumentSnapshot.get",t));if(null!==s)return this._userDataWriter.convertValue(s)}},o}(),Ey=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ee.ZT)(t,o),t.prototype.data=function(){return o.prototype.data.call(this)},t}(Qd);function Sh(o,t){return"string"==typeof t?pp(o,t):t instanceof yl?t._internalPath:t._delegate._internalPath}var od=function(){function o(t,s){this.hasPendingWrites=t,this.fromCache=s}return o.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},o}(),zl=function(o){function t(s,l,_,C,D,R){var W=this;return(W=o.call(this,s,l,_,C,R)||this)._firestore=s,W._firestoreImpl=s,W.metadata=D,W}return(0,ee.ZT)(t,o),t.prototype.exists=function(){return o.prototype.exists.call(this)},t.prototype.data=function(s){if(void 0===s&&(s={}),this._document){if(this._converter){var l=new ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(l,s)}return this._userDataWriter.convertValue(this._document.data.value,s.serverTimestamps)}},t.prototype.get=function(s,l){if(void 0===l&&(l={}),this._document){var _=this._document.data.field(Sh("DocumentSnapshot.get",s));if(null!==_)return this._userDataWriter.convertValue(_,l.serverTimestamps)}},t}(Qd),ff=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ee.ZT)(t,o),t.prototype.data=function(s){return void 0===s&&(s={}),o.prototype.data.call(this,s)},t}(zl),sd=function(){function o(t,s,l,_){this._firestore=t,this._userDataWriter=s,this._snapshot=_,this.metadata=new od(_.hasPendingWrites,_.fromCache),this.query=l}return Object.defineProperty(o.prototype,"docs",{get:function(){var t=[];return this.forEach(function(s){return t.push(s)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),o.prototype.forEach=function(t,s){var l=this;this._snapshot.docs.forEach(function(_){t.call(s,new ff(l._firestore,l._userDataWriter,_.key,_,new od(l._snapshot.mutatedKeys.has(_.key),l._snapshot.fromCache),l.query.converter))})},o.prototype.docChanges=function(t){void 0===t&&(t={});var s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Lt(mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(l,_){if(l._snapshot.oldDocs.isEmpty()){var C=0;return l._snapshot.docChanges.map(function(R){return{type:"added",doc:new ff(l._firestore,l._userDataWriter,R.doc.key,R.doc,new od(l._snapshot.mutatedKeys.has(R.doc.key),l._snapshot.fromCache),l.query.converter),oldIndex:-1,newIndex:C++}})}var D=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(function(R){return _||3!==R.type}).map(function(R){var W=new ff(l._firestore,l._userDataWriter,R.doc.key,R.doc,new od(l._snapshot.mutatedKeys.has(R.doc.key),l._snapshot.fromCache),l.query.converter),ae=-1,de=-1;return 0!==R.type&&(ae=D.indexOf(R.doc.key),D=D.delete(R.doc.key)),1!==R.type&&(de=(D=D.add(R.doc)).indexOf(R.doc.key)),{type:gp(R.type),doc:W,oldIndex:ae,newIndex:de}})}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges},o}();function gp(o){switch(o){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ln()}}function sm(o,t){return o instanceof zl&&t instanceof zl?o._firestore===t._firestore&&o._key.isEqual(t._key)&&(null===o._document?null===t._document:o._document.isEqual(t._document))&&o._converter===t._converter:o instanceof sd&&t instanceof sd&&o._firestore===t._firestore&&Yg(o.query,t.query)&&o.metadata.isEqual(t.metadata)&&o._snapshot.isEqual(t._snapshot)}function mp(o){if(Da(o)&&0===o.explicitOrderBy.length)throw new Lt(mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Jd=function(){};function ad(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];for(var l=0,_=t;l<_.length;l++){var C=_[l];o=C._apply(o)}return o}var Bu=function(o){function t(s,l,_){var C=this;return(C=o.call(this)||this).jc=s,C.Wc=l,C.Gc=_,C.type="where",C}return(0,ee.ZT)(t,o),t.prototype._apply=function(s){var C,R,l=Zl(s.firestore),_=function(C,D,R,W,ae,de,Me){var Le;if(ae.isKeyField()){if("array-contains"===de||"array-contains-any"===de)throw new Lt(mt.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+de+"' queries on FieldPath.documentId().");if("in"===de||"not-in"===de){am(Me,de);for(var ct=[],lt=0,wt=Me;lt<wt.length;lt++)ct.push(yp(W,C,wt[lt]));Le={arrayValue:{values:ct}}}else Le=yp(W,C,Me)}else"in"!==de&&"not-in"!==de&&"array-contains-any"!==de||am(Me,de),Le=Kd(R,"where",Me,"in"===de||"not-in"===de);var hn=Do.create(ae,de,Le);return function(rr,ir){if(ir.g()){var Jr=Uc(rr);if(null!==Jr&&!Jr.isEqual(ir.field))throw new Lt(mt.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+Jr.toString()+"' and '"+ir.field.toString()+"'");var _i=Ku(rr);null!==_i&&O_(0,ir.field,_i)}var Hi=function(Ds,Ip){for(var Oh=0,Em=Ds.filters;Oh<Em.length;Oh++){var Op=Em[Oh];if(Ip.indexOf(Op.op)>=0)return Op.op}return null}(rr,function(Ds){switch(Ds){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ir.op));if(null!==Hi)throw new Lt(mt.INVALID_ARGUMENT,Hi===ir.op?"Invalid query. You cannot use more than one '"+ir.op.toString()+"' filter.":"Invalid query. You cannot use '"+ir.op.toString()+"' filters with '"+Hi.toString()+"' filters.")}(C,hn),hn}(s._query,0,l,s.firestore._databaseId,this.jc,this.Wc,this.Gc);return new ea(s.firestore,s.converter,(R=(C=s._query).filters.concat([_]),new Zs(C.path,C.collectionGroup,C.explicitOrderBy.slice(),R,C.limit,C.limitType,C.startAt,C.endAt)))},t}(Jd),Ty=function(o){function t(s,l){var _=this;return(_=o.call(this)||this).jc=s,_.zc=l,_.type="orderBy",_}return(0,ee.ZT)(t,o),t.prototype._apply=function(s){var _,D,l=function(_,C,D){if(null!==_.startAt)throw new Lt(mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==_.endAt)throw new Lt(mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var R=new Wu(C,D);return function(W,ae){if(null===Ku(W)){var de=Uc(W);null!==de&&O_(0,de,ae.field)}}(_,R),R}(s._query,this.jc,this.zc);return new ea(s.firestore,s.converter,(D=(_=s._query).explicitOrderBy.concat([l]),new Zs(_.path,_.collectionGroup,D,_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)))},t}(Jd),M_=function(o){function t(s,l,_){var C=this;return(C=o.call(this)||this).type=s,C.Hc=l,C.Jc=_,C}return(0,ee.ZT)(t,o),t.prototype._apply=function(s){return new ea(s.firestore,s.converter,Vc(s._query,this.Hc,this.Jc))},t}(Jd),I_=function(o){function t(s,l,_){var C=this;return(C=o.call(this)||this).type=s,C.Yc=l,C.Xc=_,C}return(0,ee.ZT)(t,o),t.prototype._apply=function(s){var _,C,l=vp(s,this.type,this.Yc,this.Xc);return new ea(s.firestore,s.converter,(C=l,new Zs((_=s._query).path,_.collectionGroup,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,C,_.endAt)))},t}(Jd),_p=function(o){function t(s,l,_){var C=this;return(C=o.call(this)||this).type=s,C.Yc=l,C.Xc=_,C}return(0,ee.ZT)(t,o),t.prototype._apply=function(s){var _,C,l=vp(s,this.type,this.Yc,this.Xc);return new ea(s.firestore,s.converter,(C=l,new Zs((_=s._query).path,_.collectionGroup,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,C)))},t}(Jd);function vp(o,t,s,l){if(s[0]=(0,ze.m9)(s[0]),s[0]instanceof Qd)return function(C,D,R,W,ae){if(!W)throw new Lt(mt.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+R+"().");for(var de=[],Me=0,Le=Sa(C);Me<Le.length;Me++){var ct=Le[Me];if(ct.field.isKeyField())de.push(nc(D,W.key));else{var lt=W.data.field(ct.field);if(Vo(lt))throw new Lt(mt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ct.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===lt){var wt=ct.field.canonicalString();throw new Lt(mt.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+wt+"' (used as the orderBy) does not exist.")}de.push(lt)}}return new xs(de,ae)}(o._query,o.firestore._databaseId,t,s[0]._document,l);var _=Zl(o.firestore);return function(C,D,R,W,ae,de){var Me=C.explicitOrderBy;if(ae.length>Me.length)throw new Lt(mt.INVALID_ARGUMENT,"Too many arguments provided to "+W+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var Le=[],ct=0;ct<ae.length;ct++){var lt=ae[ct];if(Me[ct].field.isKeyField()){if("string"!=typeof lt)throw new Lt(mt.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+W+"(), but got a "+typeof lt);if(!Qu(C)&&-1!==lt.indexOf("/"))throw new Lt(mt.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+W+"() must be a plain document ID, but '"+lt+"' contains a slash.");var wt=C.path.child(Te.fromString(lt));if(!Wn.isDocumentKey(wt))throw new Lt(mt.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+W+"() must result in a valid document path, but '"+wt+"' is not because it contains an odd number of segments.");var en=new Wn(wt);Le.push(nc(D,en))}else{var hn=Kd(R,W,lt);Le.push(hn)}}return new xs(Le,de)}(o._query,o.firestore._databaseId,_,t,s,l)}function yp(o,t,s){if("string"==typeof(s=(0,ze.m9)(s))){if(""===s)throw new Lt(mt.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qu(t)&&-1!==s.indexOf("/"))throw new Lt(mt.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+s+"' contains a '/' character.");var l=t.path.child(Te.fromString(s));if(!Wn.isDocumentKey(l))throw new Lt(mt.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+l+"' is not because it has an odd number of segments ("+l.length+").");return nc(o,new Wn(l))}if(s instanceof lo)return nc(o,s._key);throw new Lt(mt.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Gl(s)+".")}function am(o,t){if(!Array.isArray(o)||0===o.length)throw new Lt(mt.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(o.length>10)throw new Lt(mt.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function O_(o,t,s){if(!s.isEqual(t))throw new Lt(mt.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+s.toString()+"' instead.")}var pf=function(){function o(){}return o.prototype.convertValue=function(t,s){switch(void 0===s&&(s="none"),Ii(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Hn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes(po(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 10:return this.convertObject(t.mapValue,s);default:throw Ln()}},o.prototype.convertObject=function(t,s){var l=this,_={};return q(t.fields,function(C,D){_[C]=l.convertValue(D,s)}),_},o.prototype.convertGeoPoint=function(t){return new uf(Hn(t.latitude),Hn(t.longitude))},o.prototype.convertArray=function(t,s){var l=this;return(t.values||[]).map(function(_){return l.convertValue(_,s)})},o.prototype.convertServerTimestamp=function(t,s){switch(s){case"previous":var l=go(t);return null==l?null:this.convertValue(l,s);case"estimate":return this.convertTimestamp(Bs(t));default:return null}},o.prototype.convertTimestamp=function(t){var s=xr(t);return new U(s.seconds,s.nanos)},o.prototype.convertDocumentKey=function(t,s){var l=Te.fromString(t);Xn($s(l));var _=new Zd(l.get(1),l.get(3)),C=new Wn(l.popFirst(5));return _.isEqual(s)||Pi("Document "+C+" contains a document reference within a different database ("+_.projectId+"/"+_.database+") which is not supported. It will be treated as a reference in the current database ("+s.projectId+"/"+s.database+") instead."),C},o}();function Xd(o,t,s){return o?s&&(s.merge||s.mergeFields)?o.toFirestore(t,s):o.toFirestore(t):t}var x_=function(o){function t(s){var l=this;return(l=o.call(this)||this).firestore=s,l}return(0,ee.ZT)(t,o),t.prototype.convertBytes=function(s){return new id(s)},t.prototype.convertReference=function(s){var l=this.convertDocumentKey(s,this.firestore._databaseId);return new lo(this.firestore,null,l)},t}(pf),bp=function(){function o(t,s){this._firestore=t,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Zl(t)}return o.prototype.set=function(t,s,l){this._verifyNotCommitted();var _=Ic(t,this._firestore),C=Xd(_.converter,s,l),D=up(this._dataReader,"WriteBatch.set",_._key,C,null!==_.converter,l);return this._mutations.push(D.toMutation(_._key,So.none())),this},o.prototype.update=function(t,s,l){for(var _=[],C=3;C<arguments.length;C++)_[C-3]=arguments[C];this._verifyNotCommitted();var D,R=Ic(t,this._firestore);return D="string"==typeof(s=(0,ze.m9)(s))||s instanceof yl?dp(this._dataReader,"WriteBatch.update",R._key,s,l,_):cp(this._dataReader,"WriteBatch.update",R._key,s),this._mutations.push(D.toMutation(R._key,So.exists(!0))),this},o.prototype.delete=function(t){this._verifyNotCommitted();var s=Ic(t,this._firestore);return this._mutations=this._mutations.concat(new sa(s._key,So.none())),this},o.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},o.prototype._verifyNotCommitted=function(){if(this._committed)throw new Lt(mt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},o}();function Ic(o,t){if((o=(0,ze.m9)(o)).firestore!==t)throw new Lt(mt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return o}var ud=function(o){function t(s){var l=this;return(l=o.call(this)||this).firestore=s,l}return(0,ee.ZT)(t,o),t.prototype.convertBytes=function(s){return new id(s)},t.prototype.convertReference=function(s){var l=this.convertDocumentKey(s,this.firestore._databaseId);return new lo(this.firestore,null,l)},t}(pf);function um(o,t,s){for(var l=[],_=3;_<arguments.length;_++)l[_-3]=arguments[_];o=Di(o,lo);var C=Di(o.firestore,Ho),D=Zl(C);return Ah(C,[("string"==typeof(t=(0,ze.m9)(t))||t instanceof yl?dp(D,"updateDoc",o._key,t,s,l):cp(D,"updateDoc",o._key,t)).toMutation(o._key,So.exists(!0))])}function lm(o){for(var t,s,l,_=[],C=1;C<arguments.length;C++)_[C-1]=arguments[C];o=(0,ze.m9)(o);var D={includeMetadataChanges:!1},R=0;"object"!=typeof _[R]||nd(_[R])||(D=_[R],R++);var W,ae,de,Me={includeMetadataChanges:D.includeMetadataChanges};if(nd(_[R])){var Le=_[R];_[R]=null===(t=Le.next)||void 0===t?void 0:t.bind(Le),_[R+1]=null===(s=Le.error)||void 0===s?void 0:s.bind(Le),_[R+2]=null===(l=Le.complete)||void 0===l?void 0:l.bind(Le)}if(o instanceof lo)ae=Di(o.firestore,Ho),de=pu(o._key.path),W={next:function(wt){_[R]&&_[R](Cp(ae,o,wt))},error:_[R+1],complete:_[R+2]};else{var ct=Di(o,ea);ae=Di(ct.firestore,Ho),de=ct._query;var lt=new ud(ae);W={next:function(wt){_[R]&&_[R](new sd(ae,lt,ct,wt))},error:_[R+1],complete:_[R+2]},mp(o._query)}return function(wt,en,hn,rr){var ir=this,Jr=new nf(rr),_i=new Wf(en,Jr,hn);return wt.asyncQueue.enqueueAndForget(function(){return(0,ee.mG)(ir,void 0,void 0,function(){var Hi;return(0,ee.Jh)(this,function(Ds){switch(Ds.label){case 0:return Hi=zf,[4,Ac(wt)];case 1:return[2,Hi.apply(void 0,[Ds.sent(),_i])]}})})}),function(){Jr.Wo(),wt.asyncQueue.enqueueAndForget(function(){return(0,ee.mG)(ir,void 0,void 0,function(){var Hi;return(0,ee.Jh)(this,function(Ds){switch(Ds.label){case 0:return Hi=Cg,[4,Ac(wt)];case 1:return[2,Hi.apply(void 0,[Ds.sent(),_i])]}})})})}}(fs(ae),de,Me,W)}function Ah(o,t){return function(s,l){var _=this,C=new es;return s.asyncQueue.enqueueAndForget(function(){return(0,ee.mG)(_,void 0,void 0,function(){var D;return(0,ee.Jh)(this,function(R){switch(R.label){case 0:return D=ef,[4,Th(s)];case 1:return[2,D.apply(void 0,[R.sent(),l,C])]}})})}),C.promise}(fs(o),t)}function Cp(o,t,s){var l=s.docs.get(t._key),_=new ud(o);return new zl(o,_,t._key,l,new od(s.hasPendingWrites,s.fromCache),t.converter)}var gf=function(o){function t(s,l){var _=this;return(_=o.call(this,s,l)||this)._firestore=s,_}return(0,ee.ZT)(t,o),t.prototype.get=function(s){var l=this,_=Ic(s,this._firestore),C=new ud(this._firestore);return o.prototype.get.call(this,s).then(function(D){return new zl(l._firestore,C,_._key,D._document,new od(!1,!1),_.converter)})},t}(function(){function o(t,s){this._firestore=t,this._transaction=s,this._dataReader=Zl(t)}return o.prototype.get=function(t){var s=this,l=Ic(t,this._firestore),_=new x_(this._firestore);return this._transaction.lookup([l._key]).then(function(C){if(!C||1!==C.length)return Ln();var D=C[0];if(D.isFoundDocument())return new Qd(s._firestore,_,D.key,D,l.converter);if(D.isNoDocument())return new Qd(s._firestore,_,l._key,null,l.converter);throw Ln()})},o.prototype.set=function(t,s,l){var _=Ic(t,this._firestore),C=Xd(_.converter,s,l),D=up(this._dataReader,"Transaction.set",_._key,C,null!==_.converter,l);return this._transaction.set(_._key,D),this},o.prototype.update=function(t,s,l){for(var _=[],C=3;C<arguments.length;C++)_[C-3]=arguments[C];var D,R=Ic(t,this._firestore);return D="string"==typeof(s=(0,ze.m9)(s))||s instanceof yl?dp(this._dataReader,"Transaction.update",R._key,s,l,_):cp(this._dataReader,"Transaction.update",R._key,s),this._transaction.update(R._key,D),this},o.prototype.delete=function(t){var s=Ic(t,this._firestore);return this._transaction.delete(s._key),this},o}());function ld(){if("undefined"==typeof Uint8Array)throw new Lt(mt.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function wp(){if("undefined"==typeof atob)throw new Lt(mt.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ou=function(){function o(t){this._delegate=t}return o.fromBase64String=function(t){return wp(),new o(id.fromBase64String(t))},o.fromUint8Array=function(t){return ld(),new o(id.fromUint8Array(t))},o.prototype.toBase64=function(){return wp(),this._delegate.toBase64()},o.prototype.toUint8Array=function(){return ld(),this._delegate.toUint8Array()},o.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},o.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},o}(),Mh=function(){function o(){}return o.prototype.enableIndexedDbPersistence=function(t,s){return function(l,_){Jg(l=Di(l,Ho));var C=fs(l),D=l._freezeSettings(),R=new Ch;return Qg(C,R,new Ng(R,D.cacheSizeBytes,null==_?void 0:_.forceOwnership))}(t._delegate,{forceOwnership:s})},o.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(s){Jg(s=Di(s,Ho));var l=fs(s),_=s._freezeSettings(),C=new Ch;return Qg(l,C,new vl(C,_.cacheSizeBytes))}(t._delegate)},o.prototype.clearIndexedDbPersistence=function(t){return function(s){var l=this;if(s._initialized&&!s._terminated)throw new Lt(mt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var _=new es;return s._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,ee.mG)(l,void 0,void 0,function(){var C;return(0,ee.Jh)(this,function(D){switch(D.label){case 0:return D.trys.push([0,2,,3]),[4,function(R){return(0,ee.mG)(this,void 0,void 0,function(){return(0,ee.Jh)(this,function(ae){switch(ae.label){case 0:return tu.yt()?[4,tu.delete(R+"main")]:[2,Promise.resolve()];case 1:return ae.sent(),[2]}})})}(Q(s._databaseId,s._persistenceKey))];case 1:return D.sent(),_.resolve(),[3,3];case 2:return C=D.sent(),_.reject(C),[3,3];case 3:return[2]}})})}),_.promise}(t._delegate)},o}(),cm=function(){function o(t,s,l){var _=this;this._delegate=s,this.Zc=l,this.INTERNAL={delete:function(){return _.terminate()}},t instanceof Zd||(this.tu=t)}return Object.defineProperty(o.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),o.prototype.settings=function(t){var s=this._delegate._getSettings();t.merge||s.host===t.host||ys("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},s),t)).merge,this._delegate._setSettings(t)},o.prototype.useEmulator=function(t,s,l){void 0===l&&(l={}),function(_,C,D,R){var W;void 0===R&&(R={});var ae=(_=Di(_,Dh))._getSettings();if("firestore.googleapis.com"!==ae.host&&ae.host!==C&&ys("Host has been set in both settings() and useEmulator(), emulator host will be used"),_._setSettings(Object.assign(Object.assign({},ae),{host:C+":"+D,ssl:!1})),R.mockUserToken){var de,Me;if("string"==typeof R.mockUserToken)de=R.mockUserToken,Me=Ts.MOCK_USER;else{de=(0,ze.Sg)(R.mockUserToken,null===(W=_._app)||void 0===W?void 0:W.options.projectId);var Le=R.mockUserToken.sub||R.mockUserToken.user_id;if(!Le)throw new Lt(mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");Me=new Ts(Le)}_._credentials=new Gg(new Hg(de,Me))}}(this._delegate,t,s,l)},o.prototype.enableNetwork=function(){return function(t){var s=this;return t.asyncQueue.enqueue(function(){return(0,ee.mG)(s,void 0,void 0,function(){var l,_;return(0,ee.Jh)(this,function(C){switch(C.label){case 0:return[4,wh(t)];case 1:return l=C.sent(),[4,Bg(t)];case 2:return _=C.sent(),[2,(l.setNetworkEnabled(!0),D=_,R=sn(D),R.Or.delete(0),Xc(R))]}var D,R})})})}(fs(Di(this._delegate,Ho)))},o.prototype.disableNetwork=function(){return function(t){var s=this;return t.asyncQueue.enqueue(function(){return(0,ee.mG)(s,void 0,void 0,function(){var l,_;return(0,ee.Jh)(this,function(C){switch(C.label){case 0:return[4,wh(t)];case 1:return l=C.sent(),[4,Bg(t)];case 2:return _=C.sent(),[2,(l.setNetworkEnabled(!1),function(D){return(0,ee.mG)(this,void 0,void 0,function(){var R;return(0,ee.Jh)(this,function(W){switch(W.label){case 0:return(R=sn(D)).Or.add(0),[4,vh(R)];case 1:return W.sent(),R.Br.set("Offline"),[2]}})})}(_))]}})})})}(fs(Di(this._delegate,Ho)))},o.prototype.enablePersistence=function(t){var s=!1,l=!1;return t&&$g("synchronizeTabs",s=!!t.synchronizeTabs,"experimentalForceOwningTab",l=!!t.experimentalForceOwningTab),s?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,l)},o.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},o.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},o.prototype.waitForPendingWrites=function(){return function(t){var s=this,l=new es;return t.asyncQueue.enqueueAndForget(function(){return(0,ee.mG)(s,void 0,void 0,function(){var _;return(0,ee.Jh)(this,function(C){switch(C.label){case 0:return _=g_,[4,Th(t)];case 1:return[2,_.apply(void 0,[C.sent(),l])]}})})}),l.promise}(fs(Di(this._delegate,Ho)))},o.prototype.onSnapshotsInSync=function(t){return l=t,function(_,C){var D=this,R=new nf(C);return _.asyncQueue.enqueueAndForget(function(){return(0,ee.mG)(D,void 0,void 0,function(){var W;return(0,ee.Jh)(this,function(ae){switch(ae.label){case 0:return W=function(de,Me){sn(de).Gr.add(Me),Me.next()},[4,Ac(_)];case 1:return[2,W.apply(void 0,[ae.sent(),R])]}})})}),function(){R.Wo(),_.asyncQueue.enqueueAndForget(function(){return(0,ee.mG)(D,void 0,void 0,function(){var W;return(0,ee.Jh)(this,function(ae){switch(ae.label){case 0:return W=function(de,Me){sn(de).Gr.delete(Me)},[4,Ac(_)];case 1:return[2,W.apply(void 0,[ae.sent(),R])]}})})})}}(fs(Di(this._delegate,Ho)),nd(l)?l:{next:l});var l},Object.defineProperty(o.prototype,"app",{get:function(){if(!this.tu)throw new Lt(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),o.prototype.collection=function(t){try{return new $l(this,sp(this._delegate,t))}catch(s){throw ps(s,"collection()","Firestore.collection()")}},o.prototype.doc=function(t){try{return new Fa(this,sf(this._delegate,t))}catch(s){throw ps(s,"doc()","Firestore.doc()")}},o.prototype.collectionGroup=function(t){try{return new El(this,function(s,l){if(s=Di(s,Dh),Vu("collectionGroup","collection id",l),l.indexOf("/")>=0)throw new Lt(mt.INVALID_ARGUMENT,"Invalid collection ID '"+l+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ea(s,null,(_=l,new Zs(Te.emptyPath(),_)));var _}(this._delegate,t))}catch(s){throw ps(s,"collectionGroup()","Firestore.collectionGroup()")}},o.prototype.runTransaction=function(t){var l,s=this;return function(C,D){var R=this,W=new es;return C.asyncQueue.enqueueAndForget(function(){return(0,ee.mG)(R,void 0,void 0,function(){var ae;return(0,ee.Jh)(this,function(de){switch(de.label){case 0:return[4,(Me=C,of(Me).then(function(Le){return Le.datastore}))];case 1:return ae=de.sent(),new b_(C.asyncQueue,ae,D,W).run(),[2]}var Me})})}),W.promise}(fs(l=this._delegate),function(C){return function(l){return t(new ju(s,l))}(new gf(l,C))})},o.prototype.batch=function(){var t=this;return fs(this._delegate),new eh(new bp(this._delegate,function(s){return Ah(t._delegate,s)}))},o.prototype.loadBundle=function(t){throw new Lt(mt.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},o.prototype.namedQuery=function(t){throw new Lt(mt.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},o}(),mf=function(o){function t(s){var l=this;return(l=o.call(this)||this).firestore=s,l}return(0,ee.ZT)(t,o),t.prototype.convertBytes=function(s){return new ou(new id(s))},t.prototype.convertReference=function(s){var l=this.convertDocumentKey(s,this.firestore._databaseId);return Fa.eu(l,this.firestore,null)},t}(pf),ju=function(){function o(t,s){this._firestore=t,this._delegate=s,this._userDataWriter=new mf(t)}return o.prototype.get=function(t){var s=this,l=su(t);return this._delegate.get(l).then(function(_){return new Cl(s._firestore,new zl(s._firestore._delegate,s._userDataWriter,_._key,_._document,_.metadata,l.converter))})},o.prototype.set=function(t,s,l){var _=su(t);return l?(qd("Transaction.set",l),this._delegate.set(_,s,l)):this._delegate.set(_,s),this},o.prototype.update=function(t,s,l){for(var _,C=[],D=3;D<arguments.length;D++)C[D-3]=arguments[D];var R=su(t);return 2===arguments.length?this._delegate.update(R,s):(_=this._delegate).update.apply(_,(0,ee.ev)([R,s,l],C)),this},o.prototype.delete=function(t){var s=su(t);return this._delegate.delete(s),this},o}(),eh=function(){function o(t){this._delegate=t}return o.prototype.set=function(t,s,l){var _=su(t);return l?(qd("WriteBatch.set",l),this._delegate.set(_,s,l)):this._delegate.set(_,s),this},o.prototype.update=function(t,s,l){for(var _,C=[],D=3;D<arguments.length;D++)C[D-3]=arguments[D];var R=su(t);return 2===arguments.length?this._delegate.update(R,s):(_=this._delegate).update.apply(_,(0,ee.ev)([R,s,l],C)),this},o.prototype.delete=function(t){var s=su(t);return this._delegate.delete(s),this},o.prototype.commit=function(){return this._delegate.commit()},o}(),cs=function(){function o(t,s,l){this._firestore=t,this._userDataWriter=s,this._delegate=l}return o.prototype.fromFirestore=function(t,s){var l=new ff(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new wl(this._firestore,l),null!=s?s:{})},o.prototype.toFirestore=function(t,s){return s?this._delegate.toFirestore(t,s):this._delegate.toFirestore(t)},o.nu=function(t,s){var l=o.su,_=l.get(t);_||(_=new WeakMap,l.set(t,_));var C=_.get(s);return C||(C=new o(t,new mf(t),s),_.set(s,C)),C},o}();cs.su=new WeakMap;var Fa=function(){function o(t,s){this.firestore=t,this._delegate=s,this._userDataWriter=new mf(t)}return o.iu=function(t,s,l){if(t.length%2!=0)throw new Lt(mt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new o(s,new lo(s._delegate,l,new Wn(t)))},o.eu=function(t,s,l){return new o(s,new lo(s._delegate,l,t))},Object.defineProperty(o.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"parent",{get:function(){return new $l(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),o.prototype.collection=function(t){try{return new $l(this.firestore,sp(this._delegate,t))}catch(s){throw ps(s,"collection()","DocumentReference.collection()")}},o.prototype.isEqual=function(t){return(t=(0,ze.m9)(t))instanceof lo&&af(this._delegate,t)},o.prototype.set=function(t,s){s=qd("DocumentReference.set",s);try{return function(l,_,C){l=Di(l,lo);var D=Di(l.firestore,Ho),R=Xd(l.converter,_,C);return Ah(D,[up(Zl(D),"setDoc",l._key,R,null!==l.converter,C).toMutation(l._key,So.none())])}(this._delegate,t,s)}catch(l){throw ps(l,"setDoc()","DocumentReference.set()")}},o.prototype.update=function(t,s){for(var l=[],_=2;_<arguments.length;_++)l[_-2]=arguments[_];try{return 1===arguments.length?um(this._delegate,t):um.apply(void 0,(0,ee.ev)([this._delegate,t,s],l))}catch(C){throw ps(C,"updateDoc()","DocumentReference.update()")}},o.prototype.delete=function(){return Ah(Di((t=this._delegate).firestore,Ho),[new sa(t._key,So.none())]);var t},o.prototype.onSnapshot=function(){for(var t=this,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var _=Na(s),C=_f(s,function(D){return new Cl(t.firestore,new zl(t.firestore._delegate,t._userDataWriter,D._key,D._document,D.metadata,t._delegate.converter))});return lm(this._delegate,_,C)},o.prototype.get=function(t){var s=this;return("cache"===(null==t?void 0:t.source)?function(l){l=Di(l,lo);var _=Di(l.firestore,Ho),C=fs(_),D=new ud(_);return function(R,W){var ae=this,de=new es;return R.asyncQueue.enqueueAndForget(function(){return(0,ee.mG)(ae,void 0,void 0,function(){var Me;return(0,ee.Jh)(this,function(Le){switch(Le.label){case 0:return Me=function(ct,lt,wt){return(0,ee.mG)(this,void 0,void 0,function(){var en,hn;return(0,ee.Jh)(this,function(rr){switch(rr.label){case 0:return rr.trys.push([0,2,,3]),[4,(ir=ct,Jr=lt,_i=sn(ir),_i.persistence.runTransaction("read document","readonly",function(Hi){return _i.Mn.mn(Hi,Jr)}))];case 1:return(hn=rr.sent()).isFoundDocument()?wt.resolve(hn):hn.isNoDocument()?wt.resolve(null):wt.reject(new Lt(mt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return en=rr.sent(),hn=Tc(en,"Failed to get document '"+lt+" from cache"),wt.reject(hn),[3,3];case 3:return[2]}var ir,Jr,_i})})},[4,Eh(R)];case 1:return[2,Me.apply(void 0,[Le.sent(),W,de])]}})})}),de.promise}(C,l._key).then(function(R){return new zl(_,D,l._key,R,new od(null!==R&&R.hasLocalMutations,!0),l.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(l){l=Di(l,lo);var _=Di(l.firestore,Ho);return ip(fs(_),l._key,{source:"server"}).then(function(C){return Cp(_,l,C)})}(this._delegate):function(l){l=Di(l,lo);var _=Di(l.firestore,Ho);return ip(fs(_),l._key).then(function(C){return Cp(_,l,C)})}(this._delegate)).then(function(l){return new Cl(s.firestore,new zl(s.firestore._delegate,s._userDataWriter,l._key,l._document,l.metadata,s._delegate.converter))})},o.prototype.withConverter=function(t){return new o(this.firestore,this._delegate.withConverter(t?cs.nu(this.firestore,t):null))},o}();function ps(o,t,s){return o.message=o.message.replace(t,s),o}function Na(o){for(var t=0,s=o;t<s.length;t++){var l=s[t];if("object"==typeof l&&!nd(l))return l}return{}}function _f(o,t){var s,l,_;return{next:function(C){_.next&&_.next(t(C))},error:null===(s=(_=nd(o[0])?o[0]:nd(o[1])?o[1]:"function"==typeof o[0]?{next:o[0],error:o[1],complete:o[2]}:{next:o[1],error:o[2],complete:o[3]}).error)||void 0===s?void 0:s.bind(_),complete:null===(l=_.complete)||void 0===l?void 0:l.bind(_)}}var Cl=function(){function o(t,s){this._firestore=t,this._delegate=s}return Object.defineProperty(o.prototype,"ref",{get:function(){return new Fa(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),o.prototype.data=function(t){return this._delegate.data(t)},o.prototype.get=function(t,s){return this._delegate.get(t,s)},o.prototype.isEqual=function(t){return sm(this._delegate,t._delegate)},o}(),wl=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ee.ZT)(t,o),t.prototype.data=function(s){return this._delegate.data(s)},t}(Cl),El=function(){function o(t,s){this.firestore=t,this._delegate=s,this._userDataWriter=new mf(t)}return o.prototype.where=function(t,s,l){try{return new o(this.firestore,ad(this._delegate,(D=l,R=s,W=Sh("where",_=t),new Bu(W,R,D))))}catch(_){throw ps(_,/(orderBy|where)\(\)/,"Query.$1()")}var _,D,R,W},o.prototype.orderBy=function(t,s){try{return new o(this.firestore,ad(this._delegate,function(l,_){void 0===_&&(_="asc");var C=_,D=Sh("orderBy",l);return new Ty(D,C)}(t,s)))}catch(l){throw ps(l,/(orderBy|where)\(\)/,"Query.$1()")}},o.prototype.limit=function(t){try{return new o(this.firestore,ad(this._delegate,(zd("limit",s=t),new M_("limit",s,"F"))))}catch(s){throw ps(s,"limit()","Query.limit()")}var s},o.prototype.limitToLast=function(t){try{return new o(this.firestore,ad(this._delegate,(zd("limitToLast",s=t),new M_("limitToLast",s,"L"))))}catch(s){throw ps(s,"limitToLast()","Query.limitToLast()")}var s},o.prototype.startAt=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,ad(this._delegate,function(){for(var l=[],_=0;_<arguments.length;_++)l[_]=arguments[_];return new I_("startAt",l,!0)}.apply(void 0,t)))}catch(l){throw ps(l,"startAt()","Query.startAt()")}},o.prototype.startAfter=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,ad(this._delegate,function(){for(var l=[],_=0;_<arguments.length;_++)l[_]=arguments[_];return new I_("startAfter",l,!1)}.apply(void 0,t)))}catch(l){throw ps(l,"startAfter()","Query.startAfter()")}},o.prototype.endBefore=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,ad(this._delegate,function(){for(var l=[],_=0;_<arguments.length;_++)l[_]=arguments[_];return new _p("endBefore",l,!0)}.apply(void 0,t)))}catch(l){throw ps(l,"endBefore()","Query.endBefore()")}},o.prototype.endAt=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,ad(this._delegate,function(){for(var l=[],_=0;_<arguments.length;_++)l[_]=arguments[_];return new _p("endAt",l,!1)}.apply(void 0,t)))}catch(l){throw ps(l,"endAt()","Query.endAt()")}},o.prototype.isEqual=function(t){return Yg(this._delegate,t._delegate)},o.prototype.get=function(t){var s=this;return("cache"===(null==t?void 0:t.source)?function(l){l=Di(l,ea);var _=Di(l.firestore,Ho),C=fs(_),D=new ud(_);return function(R,W){var ae=this,de=new es;return R.asyncQueue.enqueueAndForget(function(){return(0,ee.mG)(ae,void 0,void 0,function(){var Me;return(0,ee.Jh)(this,function(Le){switch(Le.label){case 0:return Me=function(ct,lt,wt){return(0,ee.mG)(this,void 0,void 0,function(){var en,hn,rr,ir,Jr;return(0,ee.Jh)(this,function(_i){switch(_i.label){case 0:return _i.trys.push([0,2,,3]),[4,Gh(ct,lt,!0)];case 1:return Jr=_i.sent(),en=new td(lt,Jr.Bn),hn=en._o(Jr.documents),rr=en.applyChanges(hn,!1),wt.resolve(rr.snapshot),[3,3];case 2:return ir=_i.sent(),Jr=Tc(ir,"Failed to execute query '"+lt+" against cache"),wt.reject(Jr),[3,3];case 3:return[2]}})})},[4,Eh(R)];case 1:return[2,Me.apply(void 0,[Le.sent(),W,de])]}})})}),de.promise}(C,l._query).then(function(R){return new sd(_,D,l,R)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(l){l=Di(l,ea);var _=Di(l.firestore,Ho),C=fs(_),D=new ud(_);return jg(C,l._query,{source:"server"}).then(function(R){return new sd(_,D,l,R)})}(this._delegate):function(l){l=Di(l,ea);var _=Di(l.firestore,Ho),C=fs(_),D=new ud(_);return mp(l._query),jg(C,l._query).then(function(R){return new sd(_,D,l,R)})}(this._delegate)).then(function(l){return new Oc(s.firestore,new sd(s.firestore._delegate,s._userDataWriter,s._delegate,l._snapshot))})},o.prototype.onSnapshot=function(){for(var t=this,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var _=Na(s),C=_f(s,function(D){return new Oc(t.firestore,new sd(t.firestore._delegate,t._userDataWriter,t._delegate,D._snapshot))});return lm(this._delegate,_,C)},o.prototype.withConverter=function(t){return new o(this.firestore,this._delegate.withConverter(t?cs.nu(this.firestore,t):null))},o}(),th=function(){function o(t,s){this._firestore=t,this._delegate=s}return Object.defineProperty(o.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"doc",{get:function(){return new wl(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),o}(),Oc=function(){function o(t,s){this._firestore=t,this._delegate=s}return Object.defineProperty(o.prototype,"query",{get:function(){return new El(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(s){return new wl(t._firestore,s)})},enumerable:!1,configurable:!0}),o.prototype.docChanges=function(t){var s=this;return this._delegate.docChanges(t).map(function(l){return new th(s._firestore,l)})},o.prototype.forEach=function(t,s){var l=this;this._delegate.forEach(function(_){t.call(s,new wl(l._firestore,_))})},o.prototype.isEqual=function(t){return sm(this._delegate,t._delegate)},o}(),$l=function(o){function t(s,l){var _=this;return(_=o.call(this,s,l)||this).firestore=s,_._delegate=l,_}return(0,ee.ZT)(t,o),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var s=this._delegate.parent;return s?new Fa(this.firestore,s):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(s){try{return new Fa(this.firestore,void 0===s?sf(this._delegate):sf(this._delegate,s))}catch(l){throw ps(l,"doc()","CollectionReference.doc()")}},t.prototype.add=function(s){var _,C,D,R,W,l=this;return(_=this._delegate,C=s,D=Di(_.firestore,Ho),R=sf(_),W=Xd(_.converter,C),Ah(D,[up(Zl(_.firestore),"addDoc",R._key,W,null!==_.converter,{}).toMutation(R._key,So.exists(!1))]).then(function(){return R})).then(function(_){return new Fa(l.firestore,_)})},t.prototype.isEqual=function(s){return af(this._delegate,s._delegate)},t.prototype.withConverter=function(s){return new t(this.firestore,this._delegate.withConverter(s?cs.nu(this.firestore,s):null))},t}(El);function su(o){return Di(o,lo)}var nh=function(){function o(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];this._delegate=new(yl.bind.apply(yl,(0,ee.ev)([void 0],t)))}return o.documentId=function(){return new o(bt.keyField().canonicalString())},o.prototype.isEqual=function(t){return(t=(0,ze.m9)(t))instanceof yl&&this._delegate._internalPath.isEqual(t._internalPath)},o}(),rh=function(){function o(t){this._delegate=t}return o.serverTimestamp=function(){var t=new tm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new o(t)},o.delete=function(){var t=new lp("deleteField");return t._methodName="FieldValue.delete",new o(t)},o.arrayUnion=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l=function(){for(var _=[],C=0;C<arguments.length;C++)_[C]=arguments[C];return new nm("arrayUnion",_)}.apply(void 0,t);return l._methodName="FieldValue.arrayUnion",new o(l)},o.arrayRemove=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l=function(){for(var _=[],C=0;C<arguments.length;C++)_[C]=arguments[C];return new rm("arrayRemove",_)}.apply(void 0,t);return l._methodName="FieldValue.arrayRemove",new o(l)},o.increment=function(t){var s=new im("increment",t);return s._methodName="FieldValue.increment",new o(s)},o.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},o}(),dm=Y(6034),hm={Firestore:cm,GeoPoint:uf,Timestamp:U,Blob:ou,Transaction:ju,WriteBatch:eh,DocumentReference:Fa,DocumentSnapshot:Cl,Query:El,QueryDocumentSnapshot:wl,QuerySnapshot:Oc,CollectionReference:$l,FieldPath:nh,FieldValue:rh,setLogLevel:function(o){ss.setLogLevel(o)},CACHE_SIZE_UNLIMITED:-1};!function(o){o.INTERNAL.registerComponent(new dm.wA("firestore",function(l){return t=l.getProvider("app").getImmediate(),s=l.getProvider("auth-internal"),new cm(t,new Ho(t,s),new Mh);var t,s},"PUBLIC").setServiceProps(Object.assign({},hm))),o.registerVersion("@firebase/firestore","2.4.0")}(Ye.Z);var Tp=Y(9829);function Dp(o,t){return function(o,t=K.z){return new w.y(s=>{let l;return null!=t?t.schedule(()=>{l=o.onSnapshot({includeMetadataChanges:!0},s)}):l=o.onSnapshot({includeMetadataChanges:!0},s),()=>{null!=l&&l()}})}(o,t)}function Sp(o,t){return Dp(o,t).pipe((0,_e.U)(s=>({payload:s,type:"query"})))}function Ih(o,t){return Sp(o,t).pipe((0,xe.O)(void 0),(0,fe.G)(),(0,_e.U)(([s,l])=>{const _=l.payload.docChanges(),C=_.map(D=>({type:D.type,payload:D}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(l.payload.metadata)&&l.payload.docs.forEach((D,R)=>{const W=_.find(de=>de.doc.ref.isEqual(D.ref)),ae=null==s?void 0:s.payload.docs.find(de=>de.ref.isEqual(D.ref));W&&JSON.stringify(W.doc.metadata)===JSON.stringify(D.metadata)||!W&&ae&&JSON.stringify(ae.metadata)===JSON.stringify(D.metadata)||C.push({type:"modified",payload:{oldIndex:R,newIndex:R,type:"modified",doc:D}})}),C}))}function mm(o,t,s){return Ih(o,s).pipe((0,re.R)((l,_)=>function(o,t,s){return t.forEach(l=>{s.indexOf(l.type)>-1&&(o=function(o,t){switch(t.type){case"added":if(!o[t.newIndex]||!o[t.newIndex].doc.ref.isEqual(t.doc.ref))return vf(o,t.newIndex,0,t);break;case"modified":if(null==o[t.oldIndex]||o[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const s=o.slice();return s.splice(t.oldIndex,1),s.splice(t.newIndex,0,t),s}return vf(o,t.newIndex,1,t)}break;case"removed":if(o[t.oldIndex]&&o[t.oldIndex].doc.ref.isEqual(t.doc.ref))return vf(o,t.oldIndex,1)}return o}(o,l))}),o}(l,_.map(C=>C.payload),t),[]),(0,Ce.x)(),(0,_e.U)(l=>l.map(_=>({type:_.type,payload:_}))))}function vf(o,t,s,...l){const _=o.slice();return _.splice(t,s,...l),_}function F_(o){return(!o||0===o.length)&&(o=["added","removed","modified"]),o}class vm{constructor(t,s,l){this.ref=t,this.query=s,this.afs=l}stateChanges(t){let s=Ih(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(s=s.pipe((0,_e.U)(l=>l.filter(_=>t.indexOf(_.type)>-1)))),s.pipe((0,xe.O)(void 0),(0,fe.G)(),(0,le.h)(([l,_])=>_.length>0||!l),(0,_e.U)(([l,_])=>_),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe((0,re.R)((s,l)=>[...s,...l],[]))}snapshotChanges(t){const s=F_(t);return mm(this.query,s,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Sp(this.query,this.afs.schedulers.outsideAngular).pipe((0,_e.U)(s=>s.payload.docs.map(l=>t.idField?Object.assign(Object.assign({},l.data()),{[t.idField]:l.id}):l.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Ue.D)(this.query.get(t)).pipe((0,pe.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Ap(this.ref.doc(t),this.afs)}}class Ap{constructor(t,s){this.ref=t,this.afs=s}set(t,s){return this.ref.set(t,s)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,s){const l=this.ref.collection(t),{ref:_,query:C}=Cm(l,s);return new vm(_,C,this.afs)}snapshotChanges(){return function(o,t){return Dp(o,t).pipe((0,xe.O)(void 0),(0,fe.G)(),(0,_e.U)(([s,l])=>l.exists?(null==s?void 0:s.exists)?{payload:l,type:"modified"}:{payload:l,type:"added"}:{payload:l,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,_e.U)(({payload:s})=>t.idField?Object.assign(Object.assign({},s.data()),{[t.idField]:s.id}):s.data()))}get(t){return(0,Ue.D)(this.ref.get(t)).pipe((0,pe.QV)(this.afs.schedulers.insideAngular))}}class N_{constructor(t,s){this.query=t,this.afs=s}stateChanges(t){return t&&0!==t.length?Ih(this.query,this.afs.schedulers.outsideAngular).pipe((0,_e.U)(s=>s.filter(l=>t.indexOf(l.type)>-1)),(0,le.h)(s=>s.length>0),this.afs.keepUnstableUntilFirst):Ih(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe((0,re.R)((s,l)=>[...s,...l],[]))}snapshotChanges(t){const s=F_(t);return mm(this.query,s,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Sp(this.query,this.afs.schedulers.outsideAngular).pipe((0,_e.U)(l=>l.payload.docs.map(_=>t.idField?Object.assign({[t.idField]:_.id},_.data()):_.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Ue.D)(this.query.get(t)).pipe((0,pe.QV)(this.afs.schedulers.insideAngular))}}const Mp=new c.OlP("angularfire2.enableFirestorePersistence"),ym=new c.OlP("angularfire2.firestore.persistenceSettings"),bm=new c.OlP("angularfire2.firestore.settings"),L_=new c.OlP("angularfire2.firestore.use-emulator");function Cm(o,t=(s=>s)){return{query:t(o),ref:o}}let wm=(()=>{class o{constructor(s,l,_,C,D,R,W,ae,de){this.schedulers=new De.HU(R),this.keepUnstableUntilFirst=(0,De.ss)(this.schedulers);const Me=(0,De.on)(s,R,l);!O.Z.auth&&de&&(0,De.yq)();const Le=ae;[this.firestore,this.persistenceEnabled$]=(0,De.sI)(`${Me.name}.firestore`,"AngularFirestore",Me,()=>{const ct=R.runOutsideAngular(()=>Me.firestore());if(C&&ct.settings(C),Le&&ct.useEmulator(...Le),_&&!(0,Re.PM)(D)){const lt=()=>{try{return(0,Ue.D)(ct.enablePersistence(W||void 0).then(()=>!0,()=>!1))}catch(wt){return"undefined"!=typeof console&&console.warn(wt),(0,be.of)(!1)}};return[ct,R.runOutsideAngular(lt)]}return[ct,(0,be.of)(!1)]},[C,Le,_])}collection(s,l){let _;_="string"==typeof s?this.firestore.collection(s):s;const{ref:C,query:D}=Cm(_,l),R=this.schedulers.ngZone.run(()=>C);return new vm(R,D,this)}collectionGroup(s,l){const _=l||(D=>D),C=this.firestore.collectionGroup(s);return new N_(_(C),this)}doc(s){let l;l="string"==typeof s?this.firestore.doc(s):s;const _=this.schedulers.ngZone.run(()=>l);return new Ap(_,this)}createId(){return this.firestore.collection("_").doc().id}}return o.\u0275fac=function(s){return new(s||o)(c.LFG(De.Dh),c.LFG(De.xv,8),c.LFG(Mp,8),c.LFG(bm,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(ym,8),c.LFG(L_,8),c.LFG(Tp.Qv,8))},o.\u0275prov=c.Yz7({factory:function(){return new o(c.LFG(De.Dh),c.LFG(De.xv,8),c.LFG(Mp,8),c.LFG(bm,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(ym,8),c.LFG(L_,8),c.LFG(Tp.Qv,8))},token:o,providedIn:"any"}),o})();var Dy=Y(9351);let Sy=(()=>{class o{constructor(s,l){this._firestore=s,this._storage=l}setUserData(s,l){const _=this._firestore.collection("users").doc(s.uid);return _.set({name:s.name,email:s.email,active:s.active,roles:s.roles,domains:s.domains,uid:s.uid}).then(()=>{if(l)return _.collection("loginHistory").doc(s.uid).set({loginHistory:[]})})}getUserData(s,l){return this._firestore.collection("users",_=>_.where(s,"==",l)).snapshotChanges()}getUsers(){return this._firestore.collection("users").snapshotChanges()}setUserIPAddress(s){return this._firestore.collection("users").doc(s.uid).collection("loginHistory").doc(s.uid).update({loginHistory:O.Z.firestore.FieldValue.arrayUnion({date:s.date,ip:s.ip,country:s.country,city:s.city})})}updateUserActivity(s){return this._firestore.collection("users").doc(s.userId).update({active:s.parameter})}getUserLogins(s){return this._firestore.collection("users").doc(s).collection("loginHistory").snapshotChanges()}setDomain(s,l){return this._firestore.collection("users").doc(s).update({domains:O.Z.firestore.FieldValue.arrayUnion({domain:l.domain,description:l.description,checked:l.checked})})}deleteDomain(s){return this._firestore.collection("domains").doc(s).delete()}deleteDomainItem(s,l){return this._firestore.collection("users").doc(s).update({domains:O.Z.firestore.FieldValue.arrayRemove(l)})}addDomain(s){return this._firestore.collection("domains").add(s)}getDomains(){return this._firestore.collection("domains").snapshotChanges()}setUserDomain(s){return this._firestore.collection("users").doc(s.uid).set({name:s.name,email:s.email,active:s.active,roles:s.roles,domains:s.domains,uid:s.uid})}addMenuOptionItem(s){return this._firestore.collection("menuOptions").add(s)}deleteMenuOptionItem(s){return this._firestore.collection("menuOptions").doc(s.id).delete()}editMenuOptionItem(s){return this._firestore.collection("menuOptions").doc(s.id).update({key:s.key,description:s.description,active:s.active})}editMenuOptioImage(s,l){return this._firestore.collection("menuOptions").doc(s).update({img:l})}getMenuOptions(){return this._firestore.collection("menuOptions").snapshotChanges()}getActiveMenuOptions(){return this._firestore.collection("menuOptions",s=>s.where("active","==",!0)).snapshotChanges()}deleteItemFromFireStorage(s){return this._storage.storage.refFromURL(s).delete()}addChat(s,l){return this._firestore.collection(s.domain).doc(l).collection(l).doc(s.id).set(s)}deleteChat(s,l){return this._firestore.collection(s).doc("activeChats").collection("activeChats").doc(l).delete()}getChat(s,l,_){return this._firestore.collection(s).doc(l).collection(l,C=>C.where("id","==",_)).snapshotChanges()}getChats(s,l){return this._firestore.collection(s).doc(l).collection(l).snapshotChanges()}acceptPendingChat(s,l){return this._firestore.collection(s.domain).doc("activeChats").collection("activeChats").doc(s.id).update({status:"active",operatorDisplayName:l.operatorDisplayName,operatorEmail:l.operatorEmail})}getCurrentChats(s,l){return this._firestore.collection(s).doc(l).collection(l,_=>_.where("status","==","pending")).snapshotChanges()}addMessage(s,l){return null!=s.client?this._firestore.collection(s.domain).doc("activeChats").collection("activeChats").doc(s.chatId).update({chatHistory:O.Z.firestore.FieldValue.arrayUnion({client:s.client,message:l.message,time:l.time})}):this._firestore.collection(s.domain).doc("activeChats").collection("activeChats").doc(s.chatId).update({chatHistory:O.Z.firestore.FieldValue.arrayUnion({operator:s.operator,message:l.message,time:l.time})})}blockUserByIp(s){return this._firestore.collection("blockedUsers").add(s)}getBlockedUsersById(){return this._firestore.collection("blockedUsers").snapshotChanges()}deleteBlockedUser(s){return this._firestore.collection("blockedUsers").doc(s).delete()}}return o.\u0275fac=function(s){return new(s||o)(c.LFG(wm),c.LFG(Dy.Q1))},o.\u0275prov=c.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},4466:(jt,nt,Y)=>{"use strict";Y.d(nt,{m:()=>Ue});var O=Y(8583),c=Y(2213),K=Y(665),w=Y(7716);let Ue=(()=>{class be{}return be.\u0275fac=function(fe){return new(fe||be)},be.\u0275mod=w.oAB({type:be}),be.\u0275inj=w.cJS({imports:[[O.ez,c.Bz,K.UX]]}),be})()},2340:(jt,nt,Y)=>{"use strict";Y.d(nt,{N:()=>O});const O={production:!0,firebaseConfig:{apiKey:"AIzaSyAXek0gZLsyXTReB0Fyd9-OVHf1VMjT6fE",authDomain:"live-chat-dcb29.firebaseapp.com",projectId:"live-chat-dcb29",storageBucket:"live-chat-dcb29.appspot.com",messagingSenderId:"30670541766",appId:"1:30670541766:web:2e599941fa52d3985358c7"},geoLocationAPIKey:"a77ee739ab87419193811644c63fda5a"}},9014:(jt,nt,Y)=>{"use strict";var O=Y(9075),c=Y(7716),K=Y(57),w=Y(3637),Ue=Y(7574),be=Y(5917),xe=Y(6682),fe=Y(8002),_e=Y(8819),re=Y(3190),Ce=Y(2145),le=Y(7519),pe=Y(5197),De=Y(509);class Ye{constructor(ft,vt){this.observables=ft,this.project=vt}call(ft,vt){return vt.subscribe(new ee(ft,this.observables,this.project))}}class ee extends pe.L{constructor(ft,vt,Dt){super(ft),this.observables=vt,this.project=Dt,this.toRespond=[];const Ut=vt.length;this.values=new Array(Ut);for(let cn=0;cn<Ut;cn++)this.toRespond.push(cn);for(let cn=0;cn<Ut;cn++)this.add((0,De.D)(this,vt[cn],void 0,cn))}notifyNext(ft,vt,Dt){this.values[Dt]=vt;const Ut=this.toRespond;if(Ut.length>0){const cn=Ut.indexOf(Dt);-1!==cn&&Ut.splice(cn,1)}}notifyComplete(){}_next(ft){if(0===this.toRespond.length){const vt=[ft,...this.values];this.project?this._tryProject(vt):this.destination.next(vt)}}_tryProject(ft){let vt;try{vt=this.project.apply(this,ft)}catch(Dt){return void this.destination.error(Dt)}this.destination.next(vt)}}var ze=Y(7393);class On{constructor(ft){this.predicate=ft}call(ft,vt){return vt.subscribe(new Nt(ft,this.predicate))}}class Nt extends ze.L{constructor(ft,vt){super(ft),this.predicate=vt,this.skipping=!0,this.index=0}_next(ft){const vt=this.destination;this.skipping&&this.tryCallPredicate(ft),this.skipping||vt.next(ft)}tryCallPredicate(ft){try{const vt=this.predicate(ft,this.index++);this.skipping=Boolean(vt)}catch(vt){this.destination.error(vt)}}}Y(9192);var zt=Y(9829),It=Y(2329);function Ke(Ne){return null==Ne}function rt(Ne){return"function"==typeof Ne.set}function it(Ne,ft){return rt(ft)?ft:Ne.ref(ft)}function et(Ne,ft){if(function(Ne){return"string"==typeof Ne}(Ne))return ft.stringCase();if(rt(Ne))return ft.firebaseCase();if(function(Ne){return"function"==typeof Ne.exportVal}(Ne))return ft.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof Ne)}function _t(Ne,ft,vt="on",Dt=w.z){return new Ue.y(Ut=>{let cn=null;return cn=Ne[vt](ft,(fn,Gt)=>{Dt.schedule(()=>{Ut.next({snapshot:fn,prevKey:Gt})}),"once"===vt&&Dt.schedule(()=>Ut.complete())},fn=>{Dt.schedule(()=>Ut.error(fn))}),"on"===vt?{unsubscribe(){null!=cn&&Ne.off(ft,cn)}}:{unsubscribe(){}}}).pipe((0,fe.U)(Ut=>{const{snapshot:cn,prevKey:fn}=Ut;let Gt=null;return cn.exists()&&(Gt=cn.key),{type:ft,payload:cn,prevKey:fn,key:Gt}}),(0,_e.B)())}function tn(Ne,ft){const vt=Ne.length;for(let Dt=0;Dt<vt;Dt++)if(Ne[Dt].payload.key===ft)return Dt;return-1}function Sn(Ne,ft){const{payload:vt,prevKey:Dt,key:Ut}=ft,cn=tn(Ne,Ut),fn=function(Ne,ft){if(Ke(ft))return 0;{const vt=tn(Ne,ft);return-1===vt?Ne.length:vt+1}}(Ne,Dt);switch(ft.type){case"value":if(ft.payload&&ft.payload.exists()){let Gt=null;ft.payload.forEach(Se=>{const Ie={payload:Se,type:"value",prevKey:Gt,key:Se.key};return Gt=Se.key,Ne=[...Ne,Ie],!1})}return Ne;case"child_added":if(cn>-1){const Gt=Ne[cn-1];(Gt&&Gt.key||null)!==Dt&&(Ne=Ne.filter(Se=>Se.payload.key!==vt.key)).splice(fn,0,ft)}else{if(null==Dt)return[ft,...Ne];(Ne=Ne.slice()).splice(fn,0,ft)}return Ne;case"child_removed":return Ne.filter(Gt=>Gt.payload.key!==vt.key);case"child_changed":return Ne.map(Gt=>Gt.payload.key===Ut?ft:Gt);case"child_moved":if(cn>-1){const Gt=Ne.splice(cn,1)[0];return(Ne=Ne.slice()).splice(fn,0,Gt),Ne}return Ne;default:return Ne}}function on(Ne){return(Ke(Ne)||0===Ne.length)&&(Ne=["child_added","child_removed","child_changed","child_moved"]),Ne}function Bt(Ne,ft,vt){return function(Ne,ft,vt){return _t(Ne,"value","once",vt).pipe((0,re.w)(Dt=>{const Ut=[(0,be.of)(Dt)];return ft.forEach(cn=>Ut.push(_t(Ne,cn,"on",vt))),(0,xe.T)(...Ut).pipe((0,Ce.R)(Sn,[]))}),(0,le.x)())}(Ne,ft=on(ft),vt)}function kt(Ne,ft,vt){const Dt=(ft=on(ft)).map(Ut=>_t(Ne,Ut,"on",vt));return(0,xe.T)(...Dt)}function Cn(Ne,ft){return function(Dt,Ut){return et(Dt,{stringCase:()=>Ne.child(Dt)[ft](Ut),firebaseCase:()=>Dt[ft](Ut),snapshotCase:()=>Dt.ref[ft](Ut)})}}function ur(Ne){return function(vt){return vt?et(vt,{stringCase:()=>Ne.child(vt).remove(),firebaseCase:()=>vt.remove(),snapshotCase:()=>vt.ref.remove()}):Ne.remove()}}function Gn(Ne,ft){return function(){return _t(Ne,"value","on",ft)}}const An=new c.OlP("angularfire2.realtimeDatabaseURL"),Mn=new c.OlP("angularfire2.database.use-emulator");let Oi=(()=>{class Ne{constructor(vt,Dt,Ut,cn,fn,Gt,Se){this.schedulers=new K.HU(fn),this.keepUnstableUntilFirst=(0,K.ss)(this.schedulers);const Ie=Gt,$e=(0,K.on)(vt,fn,Dt);!It.Z.auth&&Se&&(0,K.yq)(),this.database=(0,K.sI)(`${$e.name}.database.${Ut}`,"AngularFireDatabase",$e,()=>{const Je=fn.runOutsideAngular(()=>$e.database(Ut||void 0));return Ie&&Je.useEmulator(...Ie),Je},[Ie])}list(vt,Dt){const Ut=this.schedulers.ngZone.runOutsideAngular(()=>it(this.database,vt));let cn=Ut;return Dt&&(cn=Dt(Ut)),function(Ne,ft){const vt=ft.schedulers.outsideAngular,Dt=ft.schedulers.ngZone.run(()=>Ne.ref);return{query:Ne,update:Cn(Dt,"update"),set:Cn(Dt,"set"),push:Ut=>Dt.push(Ut),remove:ur(Dt),snapshotChanges:Ut=>Bt(Ne,Ut,vt).pipe(ft.keepUnstableUntilFirst),stateChanges:Ut=>kt(Ne,Ut,vt).pipe(ft.keepUnstableUntilFirst),auditTrail:Ut=>function(Ne,ft,vt){return function(Ne,ft,vt){return function(Ne,ft){return _t(Ne,"value","on",ft).pipe((0,fe.U)(vt=>{let Dt;return vt.payload.forEach(Ut=>(Dt=Ut.key,!1)),{data:vt,lastKeyToLoad:Dt}}))}(Ne,vt).pipe(function(...Ne){return ft=>{let vt;return"function"==typeof Ne[Ne.length-1]&&(vt=Ne.pop()),ft.lift(new Ye(Ne,vt))}}(ft),(0,fe.U)(([Ut,cn])=>{const fn=Ut.lastKeyToLoad,Gt=cn.map(Se=>Se.key);return{actions:cn,lastKeyToLoad:fn,loadedKeys:Gt}}),function(Ne){return ft=>ft.lift(new On(Ne))}(Ut=>-1===Ut.loadedKeys.indexOf(Ut.lastKeyToLoad)),(0,fe.U)(Ut=>Ut.actions))}(Ne,kt(Ne,ft).pipe((0,Ce.R)((Ut,cn)=>[...Ut,cn],[])),vt)}(Ne,Ut,vt).pipe(ft.keepUnstableUntilFirst),valueChanges:(Ut,cn)=>Bt(Ne,Ut,vt).pipe((0,fe.U)(Gt=>Gt.map(Se=>cn&&cn.idField?Object.assign(Object.assign({},Se.payload.val()),{[cn.idField]:Se.key}):Se.payload.val())),ft.keepUnstableUntilFirst)}}(cn,this)}object(vt){return function(Ne,ft){return{query:Ne,snapshotChanges:()=>Gn(Ne,ft.schedulers.outsideAngular)().pipe(ft.keepUnstableUntilFirst),update:vt=>Ne.ref.update(vt),set:vt=>Ne.ref.set(vt),remove:()=>Ne.ref.remove(),valueChanges:()=>Gn(Ne,ft.schedulers.outsideAngular)().pipe(ft.keepUnstableUntilFirst,(0,fe.U)(Dt=>Dt.payload.exists()?Dt.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>it(this.database,vt)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return Ne.\u0275fac=function(vt){return new(vt||Ne)(c.LFG(K.Dh),c.LFG(K.xv,8),c.LFG(An,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Mn,8),c.LFG(zt.Qv,8))},Ne.\u0275prov=c.Yz7({factory:function(){return new Ne(c.LFG(K.Dh),c.LFG(K.xv,8),c.LFG(An,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Mn,8),c.LFG(zt.Qv,8))},token:Ne,providedIn:"any"}),Ne})(),mn=(()=>{class Ne{}return Ne.\u0275fac=function(vt){return new(vt||Ne)},Ne.\u0275mod=c.oAB({type:Ne}),Ne.\u0275inj=c.cJS({providers:[Oi]}),Ne})();var Jt=Y(9351),Zn=Y(1841),Un=Y(2213);const Kt=[{path:"",redirectTo:"chat",pathMatch:"full"},{path:"chat",loadChildren:()=>Promise.resolve().then(Y.bind(Y,3370)).then(Ne=>Ne.ChatModule)},{path:"control-panel",loadChildren:()=>Promise.resolve().then(Y.bind(Y,4693)).then(Ne=>Ne.ControlPanelModule)},{path:"error",loadChildren:()=>Promise.resolve().then(Y.bind(Y,7236)).then(Ne=>Ne.ErrorModule)},{path:"**",redirectTo:"chat"}];let pr=(()=>{class Ne{}return Ne.\u0275fac=function(vt){return new(vt||Ne)},Ne.\u0275mod=c.oAB({type:Ne}),Ne.\u0275inj=c.cJS({imports:[[Un.Bz.forRoot(Kt,{preloadingStrategy:Un.wm})],Un.Bz]}),Ne})();var jr=Y(9447);let Kn=(()=>{class Ne{getCurrentTheme(){const vt=JSON.parse(localStorage.getItem("theme"));vt?(document.documentElement.classList.remove("theme-light","theme-dark"),document.documentElement.classList.add(vt),this.darkMode="theme-light"!=vt):(localStorage.setItem("theme",JSON.stringify("theme-light")),document.documentElement.classList.add("theme-light"),this.darkMode=!1)}setLight(){localStorage.setItem("theme",JSON.stringify("theme-light")),this.getCurrentTheme()}setDark(){localStorage.setItem("theme",JSON.stringify("theme-dark")),this.getCurrentTheme()}}return Ne.\u0275fac=function(vt){return new(vt||Ne)},Ne.\u0275prov=c.Yz7({token:Ne,factory:Ne.\u0275fac,providedIn:"root"}),Ne})(),Tt=(()=>{class Ne{constructor(vt,Dt){this._authservice=vt,this._themeService=Dt}ngOnInit(){this._authservice.autoLogin(),this._themeService.getCurrentTheme()}}return Ne.\u0275fac=function(vt){return new(vt||Ne)(c.Y36(jr.e),c.Y36(Kn))},Ne.\u0275cmp=c.Xpm({type:Ne,selectors:[["app-root"]],decls:1,vars:0,template:function(vt,Dt){1&vt&&c._UZ(0,"router-outlet")},directives:[Un.lC],styles:[""]}),Ne})();var He=Y(2340),Ve=Y(3370),Mt=Y(4693),Pt=Y(7236),nn=Y(6237);let At=(()=>{class Ne{}return Ne.\u0275fac=function(vt){return new(vt||Ne)},Ne.\u0275mod=c.oAB({type:Ne,bootstrap:[Tt]}),Ne.\u0275inj=c.cJS({providers:[],imports:[[O.b2,pr,Ve.ChatModule,Mt.ControlPanelModule,Pt.ErrorModule,Zn.JF,K.hO.initializeApp(He.N.firebaseConfig),mn,Jt.TE,nn.PW]]}),Ne})();He.N.production&&(0,c.G48)(),O.q6().bootstrapModule(At).catch(Ne=>console.error(Ne))},4762:(jt,nt,Y)=>{"use strict";Y.d(nt,{ZT:()=>c,pi:()=>K,mG:()=>fe,Jh:()=>_e,XA:()=>le,CR:()=>pe,ev:()=>Ye});var O=function(Ke,rt){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,et){it.__proto__=et}||function(it,et){for(var _t in et)Object.prototype.hasOwnProperty.call(et,_t)&&(it[_t]=et[_t])})(Ke,rt)};function c(Ke,rt){if("function"!=typeof rt&&null!==rt)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");function it(){this.constructor=Ke}O(Ke,rt),Ke.prototype=null===rt?Object.create(rt):(it.prototype=rt.prototype,new it)}var K=function(){return(K=Object.assign||function(rt){for(var it,et=1,_t=arguments.length;et<_t;et++)for(var st in it=arguments[et])Object.prototype.hasOwnProperty.call(it,st)&&(rt[st]=it[st]);return rt}).apply(this,arguments)};function fe(Ke,rt,it,et){return new(it||(it=Promise))(function(st,tn){function an(Bt){try{on(et.next(Bt))}catch(kt){tn(kt)}}function Sn(Bt){try{on(et.throw(Bt))}catch(kt){tn(kt)}}function on(Bt){Bt.done?st(Bt.value):function(st){return st instanceof it?st:new it(function(tn){tn(st)})}(Bt.value).then(an,Sn)}on((et=et.apply(Ke,rt||[])).next())})}function _e(Ke,rt){var et,_t,st,tn,it={label:0,sent:function(){if(1&st[0])throw st[1];return st[1]},trys:[],ops:[]};return tn={next:an(0),throw:an(1),return:an(2)},"function"==typeof Symbol&&(tn[Symbol.iterator]=function(){return this}),tn;function an(on){return function(Bt){return function(on){if(et)throw new TypeError("Generator is already executing.");for(;it;)try{if(et=1,_t&&(st=2&on[0]?_t.return:on[0]?_t.throw||((st=_t.return)&&st.call(_t),0):_t.next)&&!(st=st.call(_t,on[1])).done)return st;switch(_t=0,st&&(on=[2&on[0],st.value]),on[0]){case 0:case 1:st=on;break;case 4:return it.label++,{value:on[1],done:!1};case 5:it.label++,_t=on[1],on=[0];continue;case 7:on=it.ops.pop(),it.trys.pop();continue;default:if(!(st=(st=it.trys).length>0&&st[st.length-1])&&(6===on[0]||2===on[0])){it=0;continue}if(3===on[0]&&(!st||on[1]>st[0]&&on[1]<st[3])){it.label=on[1];break}if(6===on[0]&&it.label<st[1]){it.label=st[1],st=on;break}if(st&&it.label<st[2]){it.label=st[2],it.ops.push(on);break}st[2]&&it.ops.pop(),it.trys.pop();continue}on=rt.call(Ke,it)}catch(Bt){on=[6,Bt],_t=0}finally{et=st=0}if(5&on[0])throw on[1];return{value:on[0]?on[1]:void 0,done:!0}}([on,Bt])}}}function le(Ke){var rt="function"==typeof Symbol&&Symbol.iterator,it=rt&&Ke[rt],et=0;if(it)return it.call(Ke);if(Ke&&"number"==typeof Ke.length)return{next:function(){return Ke&&et>=Ke.length&&(Ke=void 0),{value:Ke&&Ke[et++],done:!Ke}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(Ke,rt){var it="function"==typeof Symbol&&Ke[Symbol.iterator];if(!it)return Ke;var _t,tn,et=it.call(Ke),st=[];try{for(;(void 0===rt||rt-- >0)&&!(_t=et.next()).done;)st.push(_t.value)}catch(an){tn={error:an}}finally{try{_t&&!_t.done&&(it=et.return)&&it.call(et)}finally{if(tn)throw tn.error}}return st}function Ye(Ke,rt,it){if(it||2===arguments.length)for(var st,et=0,_t=rt.length;et<_t;et++)(st||!(et in rt))&&(st||(st=Array.prototype.slice.call(rt,0,et)),st[et]=rt[et]);return Ke.concat(st||Array.prototype.slice.call(rt))}}},jt=>{jt(jt.s=9014)}]);