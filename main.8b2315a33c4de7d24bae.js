(self.webpackChunklive_chat=self.webpackChunklive_chat||[]).push([[179],{8255:Ht=>{function it(K){return Promise.resolve().then(()=>{var P=new Error("Cannot find module '"+K+"'");throw P.code="MODULE_NOT_FOUND",P})}it.keys=()=>[],it.resolve=it,it.id=8255,Ht.exports=it},7238:(Ht,it,K)=>{"use strict";K.d(it,{l3:()=>J,_j:()=>P,LC:()=>g,ZN:()=>Ke,jt:()=>Ve,pV:()=>Ee,IO:()=>Ue,vP:()=>Ne,SB:()=>be,oB:()=>he,eR:()=>Ae,X$:()=>C,ZE:()=>At,k1:()=>On});class P{}class g{}const J="*";function C(Lt,ct){return{type:7,name:Lt,definitions:ct,options:{}}}function Ve(Lt,ct=null){return{type:4,styles:ct,timings:Lt}}function Ne(Lt,ct=null){return{type:2,steps:Lt,options:ct}}function he(Lt){return{type:6,styles:Lt,offset:null}}function be(Lt,ct,$t){return{type:0,name:Lt,styles:ct,options:$t}}function Ae(Lt,ct,$t=null){return{type:1,expr:Lt,animation:ct,options:$t}}function Ee(Lt=null){return{type:9,options:Lt}}function Ue(Lt,ct,$t=null){return{type:11,selector:Lt,animation:ct,options:$t}}function ne(Lt){Promise.resolve(null).then(Lt)}class Ke{constructor(ct=0,$t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ct+$t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ct=>ct()),this._onDoneFns=[])}onStart(ct){this._onStartFns.push(ct)}onDone(ct){this._onDoneFns.push(ct)}onDestroy(ct){this._onDestroyFns.push(ct)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ne(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ct=>ct()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ct=>ct()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(ct){this._position=this.totalTime?ct*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ct){const $t="start"==ct?this._onStartFns:this._onDoneFns;$t.forEach(Rt=>Rt()),$t.length=0}}class At{constructor(ct){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ct;let $t=0,Rt=0,En=0;const Dt=this.players.length;0==Dt?ne(()=>this._onFinish()):this.players.forEach(Je=>{Je.onDone(()=>{++$t==Dt&&this._onFinish()}),Je.onDestroy(()=>{++Rt==Dt&&this._onDestroy()}),Je.onStart(()=>{++En==Dt&&this._onStart()})}),this.totalTime=this.players.reduce((Je,ot)=>Math.max(Je,ot.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ct=>ct()),this._onDoneFns=[])}init(){this.players.forEach(ct=>ct.init())}onStart(ct){this._onStartFns.push(ct)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ct=>ct()),this._onStartFns=[])}onDone(ct){this._onDoneFns.push(ct)}onDestroy(ct){this._onDestroyFns.push(ct)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ct=>ct.play())}pause(){this.players.forEach(ct=>ct.pause())}restart(){this.players.forEach(ct=>ct.restart())}finish(){this._onFinish(),this.players.forEach(ct=>ct.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ct=>ct.destroy()),this._onDestroyFns.forEach(ct=>ct()),this._onDestroyFns=[])}reset(){this.players.forEach(ct=>ct.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ct){const $t=ct*this.totalTime;this.players.forEach(Rt=>{const En=Rt.totalTime?Math.min(1,$t/Rt.totalTime):1;Rt.setPosition(En)})}getPosition(){const ct=this.players.reduce(($t,Rt)=>null===$t||Rt.totalTime>$t.totalTime?Rt:$t,null);return null!=ct?ct.getPosition():0}beforeDestroy(){this.players.forEach(ct=>{ct.beforeDestroy&&ct.beforeDestroy()})}triggerCallback(ct){const $t="start"==ct?this._onStartFns:this._onDoneFns;$t.forEach(Rt=>Rt()),$t.length=0}}const On="!"},8583:(Ht,it,K)=>{"use strict";K.d(it,{mr:()=>At,Ov:()=>zo,ez:()=>wo,K0:()=>Ne,uU:()=>qo,Do:()=>Lt,V_:()=>se,Ye:()=>ct,S$:()=>ne,mk:()=>rn,sg:()=>cn,O5:()=>gr,RF:()=>Ui,n9:()=>ar,ED:()=>Hn,b0:()=>On,lw:()=>he,EM:()=>cr,JF:()=>pe,NF:()=>fo,PM:()=>Lo,w_:()=>we,bD:()=>Do,q:()=>J,Mx:()=>yt,HT:()=>Ve});var P=K(7716);let g=null;function J(){return g}function Ve(x){g||(g=x)}class we{}const Ne=new P.OlP("DocumentToken");let he=(()=>{class x{historyGo(k){throw new Error("Not implemented")}}return x.\u0275fac=function(k){return new(k||x)},x.\u0275prov=(0,P.Yz7)({factory:be,token:x,providedIn:"platform"}),x})();function be(){return(0,P.LFG)(Ae)}const se=new P.OlP("Location Initialized");let Ae=(()=>{class x extends he{constructor(k){super(),this._doc=k,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return J().getBaseHref(this._doc)}onPopState(k){const ee=J().getGlobalEventTarget(this._doc,"window");return ee.addEventListener("popstate",k,!1),()=>ee.removeEventListener("popstate",k)}onHashChange(k){const ee=J().getGlobalEventTarget(this._doc,"window");return ee.addEventListener("hashchange",k,!1),()=>ee.removeEventListener("hashchange",k)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(k){this.location.pathname=k}pushState(k,ee,De){ge()?this._history.pushState(k,ee,De):this.location.hash=De}replaceState(k,ee,De){ge()?this._history.replaceState(k,ee,De):this.location.hash=De}forward(){this._history.forward()}back(){this._history.back()}historyGo(k=0){this._history.go(k)}getState(){return this._history.state}}return x.\u0275fac=function(k){return new(k||x)(P.LFG(Ne))},x.\u0275prov=(0,P.Yz7)({factory:Ee,token:x,providedIn:"platform"}),x})();function ge(){return!!window.history.pushState}function Ee(){return new Ae((0,P.LFG)(Ne))}function Oe(x,$){if(0==x.length)return $;if(0==$.length)return x;let k=0;return x.endsWith("/")&&k++,$.startsWith("/")&&k++,2==k?x+$.substring(1):1==k?x+$:x+"/"+$}function Ue(x){const $=x.match(/#|\?|$/),k=$&&$.index||x.length;return x.slice(0,k-("/"===x[k-1]?1:0))+x.slice(k)}function Xe(x){return x&&"?"!==x[0]?"?"+x:x}let ne=(()=>{class x{historyGo(k){throw new Error("Not implemented")}}return x.\u0275fac=function(k){return new(k||x)},x.\u0275prov=(0,P.Yz7)({factory:Ke,token:x,providedIn:"root"}),x})();function Ke(x){const $=(0,P.LFG)(Ne).location;return new On((0,P.LFG)(he),$&&$.origin||"")}const At=new P.OlP("appBaseHref");let On=(()=>{class x extends ne{constructor(k,ee){if(super(),this._platformLocation=k,this._removeListenerFns=[],null==ee&&(ee=this._platformLocation.getBaseHrefFromDOM()),null==ee)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ee}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}prepareExternalUrl(k){return Oe(this._baseHref,k)}path(k=!1){const ee=this._platformLocation.pathname+Xe(this._platformLocation.search),De=this._platformLocation.hash;return De&&k?`${ee}${De}`:ee}pushState(k,ee,De,je){const rt=this.prepareExternalUrl(De+Xe(je));this._platformLocation.pushState(k,ee,rt)}replaceState(k,ee,De,je){const rt=this.prepareExternalUrl(De+Xe(je));this._platformLocation.replaceState(k,ee,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(k=0){var ee,De;null===(De=(ee=this._platformLocation).historyGo)||void 0===De||De.call(ee,k)}}return x.\u0275fac=function(k){return new(k||x)(P.LFG(he),P.LFG(At,8))},x.\u0275prov=P.Yz7({token:x,factory:x.\u0275fac}),x})(),Lt=(()=>{class x extends ne{constructor(k,ee){super(),this._platformLocation=k,this._baseHref="",this._removeListenerFns=[],null!=ee&&(this._baseHref=ee)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}path(k=!1){let ee=this._platformLocation.hash;return null==ee&&(ee="#"),ee.length>0?ee.substring(1):ee}prepareExternalUrl(k){const ee=Oe(this._baseHref,k);return ee.length>0?"#"+ee:ee}pushState(k,ee,De,je){let rt=this.prepareExternalUrl(De+Xe(je));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.pushState(k,ee,rt)}replaceState(k,ee,De,je){let rt=this.prepareExternalUrl(De+Xe(je));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.replaceState(k,ee,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(k=0){var ee,De;null===(De=(ee=this._platformLocation).historyGo)||void 0===De||De.call(ee,k)}}return x.\u0275fac=function(k){return new(k||x)(P.LFG(he),P.LFG(At,8))},x.\u0275prov=P.Yz7({token:x,factory:x.\u0275fac}),x})(),ct=(()=>{class x{constructor(k,ee){this._subject=new P.vpe,this._urlChangeListeners=[],this._platformStrategy=k;const De=this._platformStrategy.getBaseHref();this._platformLocation=ee,this._baseHref=Ue(En(De)),this._platformStrategy.onPopState(je=>{this._subject.emit({url:this.path(!0),pop:!0,state:je.state,type:je.type})})}path(k=!1){return this.normalize(this._platformStrategy.path(k))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(k,ee=""){return this.path()==this.normalize(k+Xe(ee))}normalize(k){return x.stripTrailingSlash(function(x,$){return x&&$.startsWith(x)?$.substring(x.length):$}(this._baseHref,En(k)))}prepareExternalUrl(k){return k&&"/"!==k[0]&&(k="/"+k),this._platformStrategy.prepareExternalUrl(k)}go(k,ee="",De=null){this._platformStrategy.pushState(De,"",k,ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Xe(ee)),De)}replaceState(k,ee="",De=null){this._platformStrategy.replaceState(De,"",k,ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Xe(ee)),De)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(k=0){var ee,De;null===(De=(ee=this._platformStrategy).historyGo)||void 0===De||De.call(ee,k)}onUrlChange(k){this._urlChangeListeners.push(k),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ee=>{this._notifyUrlChangeListeners(ee.url,ee.state)}))}_notifyUrlChangeListeners(k="",ee){this._urlChangeListeners.forEach(De=>De(k,ee))}subscribe(k,ee,De){return this._subject.subscribe({next:k,error:ee,complete:De})}}return x.\u0275fac=function(k){return new(k||x)(P.LFG(ne),P.LFG(he))},x.normalizeQueryParams=Xe,x.joinWithSlash=Oe,x.stripTrailingSlash=Ue,x.\u0275prov=(0,P.Yz7)({factory:$t,token:x,providedIn:"root"}),x})();function $t(){return new ct((0,P.LFG)(ne),(0,P.LFG)(he))}function En(x){return x.replace(/\/index.html$/,"")}var ot=(()=>((ot=ot||{})[ot.Zero=0]="Zero",ot[ot.One=1]="One",ot[ot.Two=2]="Two",ot[ot.Few=3]="Few",ot[ot.Many=4]="Many",ot[ot.Other=5]="Other",ot))(),st=(()=>((st=st||{})[st.Format=0]="Format",st[st.Standalone=1]="Standalone",st))(),nt=(()=>((nt=nt||{})[nt.Narrow=0]="Narrow",nt[nt.Abbreviated=1]="Abbreviated",nt[nt.Wide=2]="Wide",nt[nt.Short=3]="Short",nt))(),vt=(()=>((vt=vt||{})[vt.Short=0]="Short",vt[vt.Medium=1]="Medium",vt[vt.Long=2]="Long",vt[vt.Full=3]="Full",vt))(),at=(()=>((at=at||{})[at.Decimal=0]="Decimal",at[at.Group=1]="Group",at[at.List=2]="List",at[at.PercentSign=3]="PercentSign",at[at.PlusSign=4]="PlusSign",at[at.MinusSign=5]="MinusSign",at[at.Exponential=6]="Exponential",at[at.SuperscriptingExponent=7]="SuperscriptingExponent",at[at.PerMille=8]="PerMille",at[at.Infinity=9]="Infinity",at[at.NaN=10]="NaN",at[at.TimeSeparator=11]="TimeSeparator",at[at.CurrencyDecimal=12]="CurrencyDecimal",at[at.CurrencyGroup=13]="CurrencyGroup",at))();function Fn(x,$){return hr((0,P.cg1)(x)[P.wAp.DateFormat],$)}function Cn(x,$){return hr((0,P.cg1)(x)[P.wAp.TimeFormat],$)}function sr(x,$){return hr((0,P.cg1)(x)[P.wAp.DateTimeFormat],$)}function zn(x,$){const k=(0,P.cg1)(x),ee=k[P.wAp.NumberSymbols][$];if(void 0===ee){if($===at.CurrencyDecimal)return k[P.wAp.NumberSymbols][at.Decimal];if($===at.CurrencyGroup)return k[P.wAp.NumberSymbols][at.Group]}return ee}const gn=P.kL8;function Yt(x){if(!x[P.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${x[P.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function hr(x,$){for(let k=$;k>-1;k--)if(void 0!==x[k])return x[k];throw new Error("Locale data API: locale data undefined")}function Br(x){const[$,k]=x.split(":");return{hours:+$,minutes:+k}}const ze=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Mt={},Pt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var an=(()=>((an=an||{})[an.Short=0]="Short",an[an.ShortGMT=1]="ShortGMT",an[an.Long=2]="Long",an[an.Extended=3]="Extended",an))(),Ot=(()=>((Ot=Ot||{})[Ot.FullYear=0]="FullYear",Ot[Ot.Month=1]="Month",Ot[Ot.Date=2]="Date",Ot[Ot.Hours=3]="Hours",Ot[Ot.Minutes=4]="Minutes",Ot[Ot.Seconds=5]="Seconds",Ot[Ot.FractionalSeconds=6]="FractionalSeconds",Ot[Ot.Day=7]="Day",Ot))(),He=(()=>((He=He||{})[He.DayPeriods=0]="DayPeriods",He[He.Days=1]="Days",He[He.Months=2]="Months",He[He.Eras=3]="Eras",He))();function pt(x,$,k,ee){let De=function(x){if(uo(x))return x;if("number"==typeof x&&!isNaN(x))return new Date(x);if("string"==typeof x){if(x=x.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(x)){const[De,je=1,rt=1]=x.split("-").map(H=>+H);return bt(De,je-1,rt)}const k=parseFloat(x);if(!isNaN(x-k))return new Date(k);let ee;if(ee=x.match(ze))return function(x){const $=new Date(0);let k=0,ee=0;const De=x[8]?$.setUTCFullYear:$.setFullYear,je=x[8]?$.setUTCHours:$.setHours;x[9]&&(k=Number(x[9]+x[10]),ee=Number(x[9]+x[11])),De.call($,Number(x[1]),Number(x[2])-1,Number(x[3]));const rt=Number(x[4]||0)-k,H=Number(x[5]||0)-ee,j=Number(x[6]||0),V=Math.floor(1e3*parseFloat("0."+(x[7]||0)));return je.call($,rt,H,j,V),$}(ee)}const $=new Date(x);if(!uo($))throw new Error(`Unable to convert "${x}" into a date`);return $}(x);$=St(k,$)||$;let H,rt=[];for(;$;){if(H=Pt.exec($),!H){rt.push($);break}{rt=rt.concat(H.slice(1));const ue=rt.pop();if(!ue)break;$=ue}}let j=De.getTimezoneOffset();ee&&(j=Kr(ee,j),De=function(x,$,k){const De=x.getTimezoneOffset();return function(x,$){return(x=new Date(x.getTime())).setMinutes(x.getMinutes()+$),x}(x,-1*(Kr($,De)-De))}(De,ee));let V="";return rt.forEach(ue=>{const We=function(x){if(ii[x])return ii[x];let $;switch(x){case"G":case"GG":case"GGG":$=Pe(He.Eras,nt.Abbreviated);break;case"GGGG":$=Pe(He.Eras,nt.Wide);break;case"GGGGG":$=Pe(He.Eras,nt.Narrow);break;case"y":$=qt(Ot.FullYear,1,0,!1,!0);break;case"yy":$=qt(Ot.FullYear,2,0,!0,!0);break;case"yyy":$=qt(Ot.FullYear,3,0,!1,!0);break;case"yyyy":$=qt(Ot.FullYear,4,0,!1,!0);break;case"Y":$=Ln(1);break;case"YY":$=Ln(2,!0);break;case"YYY":$=Ln(3);break;case"YYYY":$=Ln(4);break;case"M":case"L":$=qt(Ot.Month,1,1);break;case"MM":case"LL":$=qt(Ot.Month,2,1);break;case"MMM":$=Pe(He.Months,nt.Abbreviated);break;case"MMMM":$=Pe(He.Months,nt.Wide);break;case"MMMMM":$=Pe(He.Months,nt.Narrow);break;case"LLL":$=Pe(He.Months,nt.Abbreviated,st.Standalone);break;case"LLLL":$=Pe(He.Months,nt.Wide,st.Standalone);break;case"LLLLL":$=Pe(He.Months,nt.Narrow,st.Standalone);break;case"w":$=Pn(1);break;case"ww":$=Pn(2);break;case"W":$=Pn(1,!0);break;case"d":$=qt(Ot.Date,1);break;case"dd":$=qt(Ot.Date,2);break;case"c":case"cc":$=qt(Ot.Day,1);break;case"ccc":$=Pe(He.Days,nt.Abbreviated,st.Standalone);break;case"cccc":$=Pe(He.Days,nt.Wide,st.Standalone);break;case"ccccc":$=Pe(He.Days,nt.Narrow,st.Standalone);break;case"cccccc":$=Pe(He.Days,nt.Short,st.Standalone);break;case"E":case"EE":case"EEE":$=Pe(He.Days,nt.Abbreviated);break;case"EEEE":$=Pe(He.Days,nt.Wide);break;case"EEEEE":$=Pe(He.Days,nt.Narrow);break;case"EEEEEE":$=Pe(He.Days,nt.Short);break;case"a":case"aa":case"aaa":$=Pe(He.DayPeriods,nt.Abbreviated);break;case"aaaa":$=Pe(He.DayPeriods,nt.Wide);break;case"aaaaa":$=Pe(He.DayPeriods,nt.Narrow);break;case"b":case"bb":case"bbb":$=Pe(He.DayPeriods,nt.Abbreviated,st.Standalone,!0);break;case"bbbb":$=Pe(He.DayPeriods,nt.Wide,st.Standalone,!0);break;case"bbbbb":$=Pe(He.DayPeriods,nt.Narrow,st.Standalone,!0);break;case"B":case"BB":case"BBB":$=Pe(He.DayPeriods,nt.Abbreviated,st.Format,!0);break;case"BBBB":$=Pe(He.DayPeriods,nt.Wide,st.Format,!0);break;case"BBBBB":$=Pe(He.DayPeriods,nt.Narrow,st.Format,!0);break;case"h":$=qt(Ot.Hours,1,-12);break;case"hh":$=qt(Ot.Hours,2,-12);break;case"H":$=qt(Ot.Hours,1);break;case"HH":$=qt(Ot.Hours,2);break;case"m":$=qt(Ot.Minutes,1);break;case"mm":$=qt(Ot.Minutes,2);break;case"s":$=qt(Ot.Seconds,1);break;case"ss":$=qt(Ot.Seconds,2);break;case"S":$=qt(Ot.FractionalSeconds,1);break;case"SS":$=qt(Ot.FractionalSeconds,2);break;case"SSS":$=qt(Ot.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":$=et(an.Short);break;case"ZZZZZ":$=et(an.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":$=et(an.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":$=et(an.Long);break;default:return null}return ii[x]=$,$}(ue);V+=We?We(De,k,j):"''"===ue?"'":ue.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),V}function bt(x,$,k){const ee=new Date(0);return ee.setFullYear(x,$,k),ee.setHours(0,0,0),ee}function St(x,$){const k=function(x){return(0,P.cg1)(x)[P.wAp.LocaleId]}(x);if(Mt[k]=Mt[k]||{},Mt[k][$])return Mt[k][$];let ee="";switch($){case"shortDate":ee=Fn(x,vt.Short);break;case"mediumDate":ee=Fn(x,vt.Medium);break;case"longDate":ee=Fn(x,vt.Long);break;case"fullDate":ee=Fn(x,vt.Full);break;case"shortTime":ee=Cn(x,vt.Short);break;case"mediumTime":ee=Cn(x,vt.Medium);break;case"longTime":ee=Cn(x,vt.Long);break;case"fullTime":ee=Cn(x,vt.Full);break;case"short":const De=St(x,"shortTime"),je=St(x,"shortDate");ee=Ut(sr(x,vt.Short),[De,je]);break;case"medium":const rt=St(x,"mediumTime"),H=St(x,"mediumDate");ee=Ut(sr(x,vt.Medium),[rt,H]);break;case"long":const j=St(x,"longTime"),V=St(x,"longDate");ee=Ut(sr(x,vt.Long),[j,V]);break;case"full":const ue=St(x,"fullTime"),We=St(x,"fullDate");ee=Ut(sr(x,vt.Full),[ue,We])}return ee&&(Mt[k][$]=ee),ee}function Ut(x,$){return $&&(x=x.replace(/\{([^}]+)}/g,function(k,ee){return null!=$&&ee in $?$[ee]:k})),x}function hn(x,$,k="-",ee,De){let je="";(x<0||De&&x<=0)&&(De?x=1-x:(x=-x,je=k));let rt=String(x);for(;rt.length<$;)rt="0"+rt;return ee&&(rt=rt.substr(rt.length-$)),je+rt}function qt(x,$,k=0,ee=!1,De=!1){return function(je,rt){let H=function(x,$){switch(x){case Ot.FullYear:return $.getFullYear();case Ot.Month:return $.getMonth();case Ot.Date:return $.getDate();case Ot.Hours:return $.getHours();case Ot.Minutes:return $.getMinutes();case Ot.Seconds:return $.getSeconds();case Ot.FractionalSeconds:return $.getMilliseconds();case Ot.Day:return $.getDay();default:throw new Error(`Unknown DateType value "${x}".`)}}(x,je);if((k>0||H>-k)&&(H+=k),x===Ot.Hours)0===H&&-12===k&&(H=12);else if(x===Ot.FractionalSeconds)return function(x,$){return hn(x,3).substr(0,$)}(H,$);const j=zn(rt,at.MinusSign);return hn(H,$,j,ee,De)}}function Pe(x,$,k=st.Format,ee=!1){return function(De,je){return function(x,$,k,ee,De,je){switch(k){case He.Months:return function(x,$,k){const ee=(0,P.cg1)(x),je=hr([ee[P.wAp.MonthsFormat],ee[P.wAp.MonthsStandalone]],$);return hr(je,k)}($,De,ee)[x.getMonth()];case He.Days:return function(x,$,k){const ee=(0,P.cg1)(x),je=hr([ee[P.wAp.DaysFormat],ee[P.wAp.DaysStandalone]],$);return hr(je,k)}($,De,ee)[x.getDay()];case He.DayPeriods:const rt=x.getHours(),H=x.getMinutes();if(je){const V=function(x){const $=(0,P.cg1)(x);return Yt($),($[P.wAp.ExtraData][2]||[]).map(ee=>"string"==typeof ee?Br(ee):[Br(ee[0]),Br(ee[1])])}($),ue=function(x,$,k){const ee=(0,P.cg1)(x);Yt(ee);const je=hr([ee[P.wAp.ExtraData][0],ee[P.wAp.ExtraData][1]],$)||[];return hr(je,k)||[]}($,De,ee),We=V.findIndex(xt=>{if(Array.isArray(xt)){const[wn,dr]=xt,Gr=rt>=wn.hours&&H>=wn.minutes,fr=rt<dr.hours||rt===dr.hours&&H<dr.minutes;if(wn.hours<dr.hours){if(Gr&&fr)return!0}else if(Gr||fr)return!0}else if(xt.hours===rt&&xt.minutes===H)return!0;return!1});if(-1!==We)return ue[We]}return function(x,$,k){const ee=(0,P.cg1)(x),je=hr([ee[P.wAp.DayPeriodsFormat],ee[P.wAp.DayPeriodsStandalone]],$);return hr(je,k)}($,De,ee)[rt<12?0:1];case He.Eras:return function(x,$){return hr((0,P.cg1)(x)[P.wAp.Eras],$)}($,ee)[x.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${k}`)}}(De,je,x,$,k,ee)}}function et(x){return function($,k,ee){const De=-1*ee,je=zn(k,at.MinusSign),rt=De>0?Math.floor(De/60):Math.ceil(De/60);switch(x){case an.Short:return(De>=0?"+":"")+hn(rt,2,je)+hn(Math.abs(De%60),2,je);case an.ShortGMT:return"GMT"+(De>=0?"+":"")+hn(rt,1,je);case an.Long:return"GMT"+(De>=0?"+":"")+hn(rt,2,je)+":"+hn(Math.abs(De%60),2,je);case an.Extended:return 0===ee?"Z":(De>=0?"+":"")+hn(rt,2,je)+":"+hn(Math.abs(De%60),2,je);default:throw new Error(`Unknown zone width "${x}"`)}}}function rr(x){return bt(x.getFullYear(),x.getMonth(),x.getDate()+(4-x.getDay()))}function Pn(x,$=!1){return function(k,ee){let De;if($){const je=new Date(k.getFullYear(),k.getMonth(),1).getDay()-1,rt=k.getDate();De=1+Math.floor((rt+je)/7)}else{const je=rr(k),rt=function(x){const $=bt(x,0,1).getDay();return bt(x,0,1+($<=4?4:11)-$)}(je.getFullYear()),H=je.getTime()-rt.getTime();De=1+Math.round(H/6048e5)}return hn(De,x,zn(ee,at.MinusSign))}}function Ln(x,$=!1){return function(k,ee){return hn(rr(k).getFullYear(),x,zn(ee,at.MinusSign),$)}}const ii={};function Kr(x,$){x=x.replace(/:/g,"");const k=Date.parse("Jan 01, 1970 00:00:00 "+x)/6e4;return isNaN(k)?$:k}function uo(x){return x instanceof Date&&!isNaN(x.valueOf())}class ie{}let ye=(()=>{class x extends ie{constructor(k){super(),this.locale=k}getPluralCategory(k,ee){switch(gn(ee||this.locale)(k)){case ot.Zero:return"zero";case ot.One:return"one";case ot.Two:return"two";case ot.Few:return"few";case ot.Many:return"many";default:return"other"}}}return x.\u0275fac=function(k){return new(k||x)(P.LFG(P.soG))},x.\u0275prov=P.Yz7({token:x,factory:x.\u0275fac}),x})();function yt(x,$){$=encodeURIComponent($);for(const k of x.split(";")){const ee=k.indexOf("="),[De,je]=-1==ee?[k,""]:[k.slice(0,ee),k.slice(ee+1)];if(De.trim()===$)return decodeURIComponent(je)}return null}let rn=(()=>{class x{constructor(k,ee,De,je){this._iterableDiffers=k,this._keyValueDiffers=ee,this._ngEl=De,this._renderer=je,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(k){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof k?k.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(k){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof k?k.split(/\s+/):k,this._rawClass&&((0,P.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const k=this._iterableDiffer.diff(this._rawClass);k&&this._applyIterableChanges(k)}else if(this._keyValueDiffer){const k=this._keyValueDiffer.diff(this._rawClass);k&&this._applyKeyValueChanges(k)}}_applyKeyValueChanges(k){k.forEachAddedItem(ee=>this._toggleClass(ee.key,ee.currentValue)),k.forEachChangedItem(ee=>this._toggleClass(ee.key,ee.currentValue)),k.forEachRemovedItem(ee=>{ee.previousValue&&this._toggleClass(ee.key,!1)})}_applyIterableChanges(k){k.forEachAddedItem(ee=>{if("string"!=typeof ee.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,P.AaK)(ee.item)}`);this._toggleClass(ee.item,!0)}),k.forEachRemovedItem(ee=>this._toggleClass(ee.item,!1))}_applyClasses(k){k&&(Array.isArray(k)||k instanceof Set?k.forEach(ee=>this._toggleClass(ee,!0)):Object.keys(k).forEach(ee=>this._toggleClass(ee,!!k[ee])))}_removeClasses(k){k&&(Array.isArray(k)||k instanceof Set?k.forEach(ee=>this._toggleClass(ee,!1)):Object.keys(k).forEach(ee=>this._toggleClass(ee,!1)))}_toggleClass(k,ee){(k=k.trim())&&k.split(/\s+/g).forEach(De=>{ee?this._renderer.addClass(this._ngEl.nativeElement,De):this._renderer.removeClass(this._ngEl.nativeElement,De)})}}return x.\u0275fac=function(k){return new(k||x)(P.Y36(P.ZZ4),P.Y36(P.aQg),P.Y36(P.SBq),P.Y36(P.Qsj))},x.\u0275dir=P.lG2({type:x,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),x})();class vn{constructor($,k,ee,De){this.$implicit=$,this.ngForOf=k,this.index=ee,this.count=De}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cn=(()=>{class x{constructor(k,ee,De){this._viewContainer=k,this._template=ee,this._differs=De,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(k){this._ngForOf=k,this._ngForOfDirty=!0}set ngForTrackBy(k){this._trackByFn=k}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(k){k&&(this._template=k)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const k=this._ngForOf;if(!this._differ&&k)try{this._differ=this._differs.find(k).create(this.ngForTrackBy)}catch(ee){throw new Error(`Cannot find a differ supporting object '${k}' of type '${function(x){return x.name||typeof x}(k)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const k=this._differ.diff(this._ngForOf);k&&this._applyChanges(k)}}_applyChanges(k){const ee=[];k.forEachOperation((De,je,rt)=>{if(null==De.previousIndex){const H=this._viewContainer.createEmbeddedView(this._template,new vn(null,this._ngForOf,-1,-1),null===rt?void 0:rt),j=new er(De,H);ee.push(j)}else if(null==rt)this._viewContainer.remove(null===je?void 0:je);else if(null!==je){const H=this._viewContainer.get(je);this._viewContainer.move(H,rt);const j=new er(De,H);ee.push(j)}});for(let De=0;De<ee.length;De++)this._perViewChange(ee[De].view,ee[De].record);for(let De=0,je=this._viewContainer.length;De<je;De++){const rt=this._viewContainer.get(De);rt.context.index=De,rt.context.count=je,rt.context.ngForOf=this._ngForOf}k.forEachIdentityChange(De=>{this._viewContainer.get(De.currentIndex).context.$implicit=De.item})}_perViewChange(k,ee){k.context.$implicit=ee.item}static ngTemplateContextGuard(k,ee){return!0}}return x.\u0275fac=function(k){return new(k||x)(P.Y36(P.s_b),P.Y36(P.Rgc),P.Y36(P.ZZ4))},x.\u0275dir=P.lG2({type:x,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),x})();class er{constructor($,k){this.record=$,this.view=k}}let gr=(()=>{class x{constructor(k,ee){this._viewContainer=k,this._context=new Vi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ee}set ngIf(k){this._context.$implicit=this._context.ngIf=k,this._updateView()}set ngIfThen(k){lo("ngIfThen",k),this._thenTemplateRef=k,this._thenViewRef=null,this._updateView()}set ngIfElse(k){lo("ngIfElse",k),this._elseTemplateRef=k,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(k,ee){return!0}}return x.\u0275fac=function(k){return new(k||x)(P.Y36(P.s_b),P.Y36(P.Rgc))},x.\u0275dir=P.lG2({type:x,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),x})();class Vi{constructor(){this.$implicit=null,this.ngIf=null}}function lo(x,$){if($&&!$.createEmbeddedView)throw new Error(`${x} must be a TemplateRef, but received '${(0,P.AaK)($)}'.`)}class Wr{constructor($,k){this._viewContainerRef=$,this._templateRef=k,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState($){$&&!this._created?this.create():!$&&this._created&&this.destroy()}}let Ui=(()=>{class x{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(k){this._ngSwitch=k,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(k){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(k)}_matchCase(k){const ee=k==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ee,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ee}_updateDefaultCases(k){if(this._defaultViews&&k!==this._defaultUsed){this._defaultUsed=k;for(let ee=0;ee<this._defaultViews.length;ee++)this._defaultViews[ee].enforceState(k)}}}return x.\u0275fac=function(k){return new(k||x)},x.\u0275dir=P.lG2({type:x,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),x})(),ar=(()=>{class x{constructor(k,ee,De){this.ngSwitch=De,De._addCase(),this._view=new Wr(k,ee)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return x.\u0275fac=function(k){return new(k||x)(P.Y36(P.s_b),P.Y36(P.Rgc),P.Y36(Ui,9))},x.\u0275dir=P.lG2({type:x,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),x})(),Hn=(()=>{class x{constructor(k,ee,De){De._addDefault(new Wr(k,ee))}}return x.\u0275fac=function(k){return new(k||x)(P.Y36(P.s_b),P.Y36(P.Rgc),P.Y36(Ui,9))},x.\u0275dir=P.lG2({type:x,selectors:[["","ngSwitchDefault",""]]}),x})();function yi(x,$){return Error(`InvalidPipeArgument: '${$}' for pipe '${(0,P.AaK)(x)}'`)}class ds{createSubscription($,k){return $.subscribe({next:k,error:ee=>{throw ee}})}dispose($){$.unsubscribe()}onDestroy($){$.unsubscribe()}}class Hr{createSubscription($,k){return $.then(k,ee=>{throw ee})}dispose($){}onDestroy($){}}const _s=new Hr,$i=new ds;let zo=(()=>{class x{constructor(k){this._ref=k,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(k){return this._obj?k!==this._obj?(this._dispose(),this.transform(k)):this._latestValue:(k&&this._subscribe(k),this._latestValue)}_subscribe(k){this._obj=k,this._strategy=this._selectStrategy(k),this._subscription=this._strategy.createSubscription(k,ee=>this._updateLatestValue(k,ee))}_selectStrategy(k){if((0,P.QGY)(k))return _s;if((0,P.F4k)(k))return $i;throw yi(x,k)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(k,ee){k===this._obj&&(this._latestValue=ee,this._ref.markForCheck())}}return x.\u0275fac=function(k){return new(k||x)(P.Y36(P.sBO,16))},x.\u0275pipe=P.Yjl({name:"async",type:x,pure:!1}),x})(),qo=(()=>{class x{constructor(k){this.locale=k}transform(k,ee="mediumDate",De,je){if(null==k||""===k||k!=k)return null;try{return pt(k,ee,je||this.locale,De)}catch(rt){throw yi(x,rt.message)}}}return x.\u0275fac=function(k){return new(k||x)(P.Y36(P.soG,16))},x.\u0275pipe=P.Yjl({name:"date",type:x,pure:!0}),x})(),wo=(()=>{class x{}return x.\u0275fac=function(k){return new(k||x)},x.\u0275mod=P.oAB({type:x}),x.\u0275inj=P.cJS({providers:[{provide:ie,useClass:ye}]}),x})();const Do="browser";function fo(x){return x===Do}function Lo(x){return"server"===x}let cr=(()=>{class x{}return x.\u0275prov=(0,P.Yz7)({token:x,providedIn:"root",factory:()=>new po((0,P.LFG)(Ne),window)}),x})();class po{constructor($,k){this.document=$,this.window=k,this.offset=()=>[0,0]}setOffset($){this.offset=Array.isArray($)?()=>$:$}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition($){this.supportsScrolling()&&this.window.scrollTo($[0],$[1])}scrollToAnchor($){if(!this.supportsScrolling())return;const k=function(x,$){const k=x.getElementById($)||x.getElementsByName($)[0];if(k)return k;if("function"==typeof x.createTreeWalker&&x.body&&(x.body.createShadowRoot||x.body.attachShadow)){const ee=x.createTreeWalker(x.body,NodeFilter.SHOW_ELEMENT);let De=ee.currentNode;for(;De;){const je=De.shadowRoot;if(je){const rt=je.getElementById($)||je.querySelector(`[name="${$}"]`);if(rt)return rt}De=ee.nextNode()}}return null}(this.document,$);k&&(this.scrollToElement(k),this.attemptFocus(k))}setHistoryScrollRestoration($){if(this.supportScrollRestoration()){const k=this.window.history;k&&k.scrollRestoration&&(k.scrollRestoration=$)}}scrollToElement($){const k=$.getBoundingClientRect(),ee=k.left+this.window.pageXOffset,De=k.top+this.window.pageYOffset,je=this.offset();this.window.scrollTo(ee-je[0],De-je[1])}attemptFocus($){return $.focus(),this.document.activeElement===$}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const $=os(this.window.history)||os(Object.getPrototypeOf(this.window.history));return!(!$||!$.writable&&!$.set)}catch($){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch($){return!1}}}function os(x){return Object.getOwnPropertyDescriptor(x,"scrollRestoration")}class pe{}},1841:(Ht,it,K)=>{"use strict";K.d(it,{eN:()=>at,JF:()=>hr});var P=K(8583),g=K(7716),J=K(5917),C=K(7574),Ve=K(4612),we=K(5435),Ne=K(8002);class he{}class be{}class se{constructor($e){this.normalizedNames=new Map,this.lazyUpdate=null,$e?this.lazyInit="string"==typeof $e?()=>{this.headers=new Map,$e.split("\n").forEach(ze=>{const Mt=ze.indexOf(":");if(Mt>0){const Pt=ze.slice(0,Mt),an=Pt.toLowerCase(),Ot=ze.slice(Mt+1).trim();this.maybeSetNormalizedName(Pt,an),this.headers.has(an)?this.headers.get(an).push(Ot):this.headers.set(an,[Ot])}})}:()=>{this.headers=new Map,Object.keys($e).forEach(ze=>{let Mt=$e[ze];const Pt=ze.toLowerCase();"string"==typeof Mt&&(Mt=[Mt]),Mt.length>0&&(this.headers.set(Pt,Mt),this.maybeSetNormalizedName(ze,Pt))})}:this.headers=new Map}has($e){return this.init(),this.headers.has($e.toLowerCase())}get($e){this.init();const ze=this.headers.get($e.toLowerCase());return ze&&ze.length>0?ze[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll($e){return this.init(),this.headers.get($e.toLowerCase())||null}append($e,ze){return this.clone({name:$e,value:ze,op:"a"})}set($e,ze){return this.clone({name:$e,value:ze,op:"s"})}delete($e,ze){return this.clone({name:$e,value:ze,op:"d"})}maybeSetNormalizedName($e,ze){this.normalizedNames.has(ze)||this.normalizedNames.set(ze,$e)}init(){this.lazyInit&&(this.lazyInit instanceof se?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach($e=>this.applyUpdate($e)),this.lazyUpdate=null))}copyFrom($e){$e.init(),Array.from($e.headers.keys()).forEach(ze=>{this.headers.set(ze,$e.headers.get(ze)),this.normalizedNames.set(ze,$e.normalizedNames.get(ze))})}clone($e){const ze=new se;return ze.lazyInit=this.lazyInit&&this.lazyInit instanceof se?this.lazyInit:this,ze.lazyUpdate=(this.lazyUpdate||[]).concat([$e]),ze}applyUpdate($e){const ze=$e.name.toLowerCase();switch($e.op){case"a":case"s":let Mt=$e.value;if("string"==typeof Mt&&(Mt=[Mt]),0===Mt.length)return;this.maybeSetNormalizedName($e.name,ze);const Pt=("a"===$e.op?this.headers.get(ze):void 0)||[];Pt.push(...Mt),this.headers.set(ze,Pt);break;case"d":const an=$e.value;if(an){let Ot=this.headers.get(ze);if(!Ot)return;Ot=Ot.filter(He=>-1===an.indexOf(He)),0===Ot.length?(this.headers.delete(ze),this.normalizedNames.delete(ze)):this.headers.set(ze,Ot)}else this.headers.delete(ze),this.normalizedNames.delete(ze)}}forEach($e){this.init(),Array.from(this.normalizedNames.keys()).forEach(ze=>$e(this.normalizedNames.get(ze),this.headers.get(ze)))}}class Ae{encodeKey($e){return Ue($e)}encodeValue($e){return Ue($e)}decodeKey($e){return decodeURIComponent($e)}decodeValue($e){return decodeURIComponent($e)}}const Ee=/%(\d[a-f0-9])/gi,Oe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Ue(Tt){return encodeURIComponent(Tt).replace(Ee,($e,ze)=>{var Mt;return null!==(Mt=Oe[ze])&&void 0!==Mt?Mt:$e})}function Xe(Tt){return`${Tt}`}class ne{constructor($e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=$e.encoder||new Ae,$e.fromString){if($e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(Tt,$e){const ze=new Map;return Tt.length>0&&Tt.replace(/^\?/,"").split("&").forEach(Pt=>{const an=Pt.indexOf("="),[Ot,He]=-1==an?[$e.decodeKey(Pt),""]:[$e.decodeKey(Pt.slice(0,an)),$e.decodeValue(Pt.slice(an+1))],pt=ze.get(Ot)||[];pt.push(He),ze.set(Ot,pt)}),ze}($e.fromString,this.encoder)}else $e.fromObject?(this.map=new Map,Object.keys($e.fromObject).forEach(ze=>{const Mt=$e.fromObject[ze];this.map.set(ze,Array.isArray(Mt)?Mt:[Mt])})):this.map=null}has($e){return this.init(),this.map.has($e)}get($e){this.init();const ze=this.map.get($e);return ze?ze[0]:null}getAll($e){return this.init(),this.map.get($e)||null}keys(){return this.init(),Array.from(this.map.keys())}append($e,ze){return this.clone({param:$e,value:ze,op:"a"})}appendAll($e){const ze=[];return Object.keys($e).forEach(Mt=>{const Pt=$e[Mt];Array.isArray(Pt)?Pt.forEach(an=>{ze.push({param:Mt,value:an,op:"a"})}):ze.push({param:Mt,value:Pt,op:"a"})}),this.clone(ze)}set($e,ze){return this.clone({param:$e,value:ze,op:"s"})}delete($e,ze){return this.clone({param:$e,value:ze,op:"d"})}toString(){return this.init(),this.keys().map($e=>{const ze=this.encoder.encodeKey($e);return this.map.get($e).map(Mt=>ze+"="+this.encoder.encodeValue(Mt)).join("&")}).filter($e=>""!==$e).join("&")}clone($e){const ze=new ne({encoder:this.encoder});return ze.cloneFrom=this.cloneFrom||this,ze.updates=(this.updates||[]).concat($e),ze}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach($e=>this.map.set($e,this.cloneFrom.map.get($e))),this.updates.forEach($e=>{switch($e.op){case"a":case"s":const ze=("a"===$e.op?this.map.get($e.param):void 0)||[];ze.push(Xe($e.value)),this.map.set($e.param,ze);break;case"d":if(void 0===$e.value){this.map.delete($e.param);break}{let Mt=this.map.get($e.param)||[];const Pt=Mt.indexOf(Xe($e.value));-1!==Pt&&Mt.splice(Pt,1),Mt.length>0?this.map.set($e.param,Mt):this.map.delete($e.param)}}}),this.cloneFrom=this.updates=null)}}class At{constructor(){this.map=new Map}set($e,ze){return this.map.set($e,ze),this}get($e){return this.map.has($e)||this.map.set($e,$e.defaultValue()),this.map.get($e)}delete($e){return this.map.delete($e),this}keys(){return this.map.keys()}}function Lt(Tt){return"undefined"!=typeof ArrayBuffer&&Tt instanceof ArrayBuffer}function ct(Tt){return"undefined"!=typeof Blob&&Tt instanceof Blob}function $t(Tt){return"undefined"!=typeof FormData&&Tt instanceof FormData}class En{constructor($e,ze,Mt,Pt){let an;if(this.url=ze,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=$e.toUpperCase(),function(Tt){switch(Tt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Pt?(this.body=void 0!==Mt?Mt:null,an=Pt):an=Mt,an&&(this.reportProgress=!!an.reportProgress,this.withCredentials=!!an.withCredentials,an.responseType&&(this.responseType=an.responseType),an.headers&&(this.headers=an.headers),an.context&&(this.context=an.context),an.params&&(this.params=an.params)),this.headers||(this.headers=new se),this.context||(this.context=new At),this.params){const Ot=this.params.toString();if(0===Ot.length)this.urlWithParams=ze;else{const He=ze.indexOf("?");this.urlWithParams=ze+(-1===He?"?":He<ze.length-1?"&":"")+Ot}}else this.params=new ne,this.urlWithParams=ze}serializeBody(){return null===this.body?null:Lt(this.body)||ct(this.body)||$t(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof ne?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||$t(this.body)?null:ct(this.body)?this.body.type||null:Lt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ne?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone($e={}){var ze;const Mt=$e.method||this.method,Pt=$e.url||this.url,an=$e.responseType||this.responseType,Ot=void 0!==$e.body?$e.body:this.body,He=void 0!==$e.withCredentials?$e.withCredentials:this.withCredentials,pt=void 0!==$e.reportProgress?$e.reportProgress:this.reportProgress;let bt=$e.headers||this.headers,St=$e.params||this.params;const Ut=null!==(ze=$e.context)&&void 0!==ze?ze:this.context;return void 0!==$e.setHeaders&&(bt=Object.keys($e.setHeaders).reduce((hn,mn)=>hn.set(mn,$e.setHeaders[mn]),bt)),$e.setParams&&(St=Object.keys($e.setParams).reduce((hn,mn)=>hn.set(mn,$e.setParams[mn]),St)),new En(Mt,Pt,Ot,{params:St,headers:bt,context:Ut,reportProgress:pt,responseType:an,withCredentials:He})}}var Dt=(()=>((Dt=Dt||{})[Dt.Sent=0]="Sent",Dt[Dt.UploadProgress=1]="UploadProgress",Dt[Dt.ResponseHeader=2]="ResponseHeader",Dt[Dt.DownloadProgress=3]="DownloadProgress",Dt[Dt.Response=4]="Response",Dt[Dt.User=5]="User",Dt))();class Je{constructor($e,ze=200,Mt="OK"){this.headers=$e.headers||new se,this.status=void 0!==$e.status?$e.status:ze,this.statusText=$e.statusText||Mt,this.url=$e.url||null,this.ok=this.status>=200&&this.status<300}}class ot extends Je{constructor($e={}){super($e),this.type=Dt.ResponseHeader}clone($e={}){return new ot({headers:$e.headers||this.headers,status:void 0!==$e.status?$e.status:this.status,statusText:$e.statusText||this.statusText,url:$e.url||this.url||void 0})}}class st extends Je{constructor($e={}){super($e),this.type=Dt.Response,this.body=void 0!==$e.body?$e.body:null}clone($e={}){return new st({body:void 0!==$e.body?$e.body:this.body,headers:$e.headers||this.headers,status:void 0!==$e.status?$e.status:this.status,statusText:$e.statusText||this.statusText,url:$e.url||this.url||void 0})}}class nt extends Je{constructor($e){super($e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${$e.url||"(unknown url)"}`:`Http failure response for ${$e.url||"(unknown url)"}: ${$e.status} ${$e.statusText}`,this.error=$e.error||null}}function vt(Tt,$e){return{body:$e,headers:Tt.headers,context:Tt.context,observe:Tt.observe,params:Tt.params,reportProgress:Tt.reportProgress,responseType:Tt.responseType,withCredentials:Tt.withCredentials}}let at=(()=>{class Tt{constructor(ze){this.handler=ze}request(ze,Mt,Pt={}){let an;if(ze instanceof En)an=ze;else{let pt,bt;pt=Pt.headers instanceof se?Pt.headers:new se(Pt.headers),Pt.params&&(bt=Pt.params instanceof ne?Pt.params:new ne({fromObject:Pt.params})),an=new En(ze,Mt,void 0!==Pt.body?Pt.body:null,{headers:pt,context:Pt.context,params:bt,reportProgress:Pt.reportProgress,responseType:Pt.responseType||"json",withCredentials:Pt.withCredentials})}const Ot=(0,J.of)(an).pipe((0,Ve.b)(pt=>this.handler.handle(pt)));if(ze instanceof En||"events"===Pt.observe)return Ot;const He=Ot.pipe((0,we.h)(pt=>pt instanceof st));switch(Pt.observe||"body"){case"body":switch(an.responseType){case"arraybuffer":return He.pipe((0,Ne.U)(pt=>{if(null!==pt.body&&!(pt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return pt.body}));case"blob":return He.pipe((0,Ne.U)(pt=>{if(null!==pt.body&&!(pt.body instanceof Blob))throw new Error("Response is not a Blob.");return pt.body}));case"text":return He.pipe((0,Ne.U)(pt=>{if(null!==pt.body&&"string"!=typeof pt.body)throw new Error("Response is not a string.");return pt.body}));case"json":default:return He.pipe((0,Ne.U)(pt=>pt.body))}case"response":return He;default:throw new Error(`Unreachable: unhandled observe type ${Pt.observe}}`)}}delete(ze,Mt={}){return this.request("DELETE",ze,Mt)}get(ze,Mt={}){return this.request("GET",ze,Mt)}head(ze,Mt={}){return this.request("HEAD",ze,Mt)}jsonp(ze,Mt){return this.request("JSONP",ze,{params:(new ne).append(Mt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ze,Mt={}){return this.request("OPTIONS",ze,Mt)}patch(ze,Mt,Pt={}){return this.request("PATCH",ze,vt(Pt,Mt))}post(ze,Mt,Pt={}){return this.request("POST",ze,vt(Pt,Mt))}put(ze,Mt,Pt={}){return this.request("PUT",ze,vt(Pt,Mt))}}return Tt.\u0275fac=function(ze){return new(ze||Tt)(g.LFG(he))},Tt.\u0275prov=g.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})();class tn{constructor($e,ze){this.next=$e,this.interceptor=ze}handle($e){return this.interceptor.intercept($e,this.next)}}const ln=new g.OlP("HTTP_INTERCEPTORS");let Tn=(()=>{class Tt{intercept(ze,Mt){return Mt.handle(ze)}}return Tt.\u0275fac=function(ze){return new(ze||Tt)},Tt.\u0275prov=g.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})();const sr=/^\)\]\}',?\n/;let Bn=(()=>{class Tt{constructor(ze){this.xhrFactory=ze}handle(ze){if("JSONP"===ze.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new C.y(Mt=>{const Pt=this.xhrFactory.build();if(Pt.open(ze.method,ze.urlWithParams),ze.withCredentials&&(Pt.withCredentials=!0),ze.headers.forEach((mn,qt)=>Pt.setRequestHeader(mn,qt.join(","))),ze.headers.has("Accept")||Pt.setRequestHeader("Accept","application/json, text/plain, */*"),!ze.headers.has("Content-Type")){const mn=ze.detectContentTypeHeader();null!==mn&&Pt.setRequestHeader("Content-Type",mn)}if(ze.responseType){const mn=ze.responseType.toLowerCase();Pt.responseType="json"!==mn?mn:"text"}const an=ze.serializeBody();let Ot=null;const He=()=>{if(null!==Ot)return Ot;const mn=1223===Pt.status?204:Pt.status,qt=Pt.statusText||"OK",Re=new se(Pt.getAllResponseHeaders()),Pe=function(Tt){return"responseURL"in Tt&&Tt.responseURL?Tt.responseURL:/^X-Request-URL:/m.test(Tt.getAllResponseHeaders())?Tt.getResponseHeader("X-Request-URL"):null}(Pt)||ze.url;return Ot=new ot({headers:Re,status:mn,statusText:qt,url:Pe}),Ot},pt=()=>{let{headers:mn,status:qt,statusText:Re,url:Pe}=He(),Ye=null;204!==qt&&(Ye=void 0===Pt.response?Pt.responseText:Pt.response),0===qt&&(qt=Ye?200:0);let et=qt>=200&&qt<300;if("json"===ze.responseType&&"string"==typeof Ye){const tt=Ye;Ye=Ye.replace(sr,"");try{Ye=""!==Ye?JSON.parse(Ye):null}catch(zt){Ye=tt,et&&(et=!1,Ye={error:zt,text:Ye})}}et?(Mt.next(new st({body:Ye,headers:mn,status:qt,statusText:Re,url:Pe||void 0})),Mt.complete()):Mt.error(new nt({error:Ye,headers:mn,status:qt,statusText:Re,url:Pe||void 0}))},bt=mn=>{const{url:qt}=He(),Re=new nt({error:mn,status:Pt.status||0,statusText:Pt.statusText||"Unknown Error",url:qt||void 0});Mt.error(Re)};let St=!1;const Ut=mn=>{St||(Mt.next(He()),St=!0);let qt={type:Dt.DownloadProgress,loaded:mn.loaded};mn.lengthComputable&&(qt.total=mn.total),"text"===ze.responseType&&!!Pt.responseText&&(qt.partialText=Pt.responseText),Mt.next(qt)},hn=mn=>{let qt={type:Dt.UploadProgress,loaded:mn.loaded};mn.lengthComputable&&(qt.total=mn.total),Mt.next(qt)};return Pt.addEventListener("load",pt),Pt.addEventListener("error",bt),Pt.addEventListener("timeout",bt),Pt.addEventListener("abort",bt),ze.reportProgress&&(Pt.addEventListener("progress",Ut),null!==an&&Pt.upload&&Pt.upload.addEventListener("progress",hn)),Pt.send(an),Mt.next({type:Dt.Sent}),()=>{Pt.removeEventListener("error",bt),Pt.removeEventListener("abort",bt),Pt.removeEventListener("load",pt),Pt.removeEventListener("timeout",bt),ze.reportProgress&&(Pt.removeEventListener("progress",Ut),null!==an&&Pt.upload&&Pt.upload.removeEventListener("progress",hn)),Pt.readyState!==Pt.DONE&&Pt.abort()}})}}return Tt.\u0275fac=function(ze){return new(ze||Tt)(g.LFG(P.JF))},Tt.\u0275prov=g.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})();const Xn=new g.OlP("XSRF_COOKIE_NAME"),Sn=new g.OlP("XSRF_HEADER_NAME");class An{}let Oi=(()=>{class Tt{constructor(ze,Mt,Pt){this.doc=ze,this.platform=Mt,this.cookieName=Pt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ze=this.doc.cookie||"";return ze!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,P.Mx)(ze,this.cookieName),this.lastCookieString=ze),this.lastToken}}return Tt.\u0275fac=function(ze){return new(ze||Tt)(g.LFG(P.K0),g.LFG(g.Lbi),g.LFG(Xn))},Tt.\u0275prov=g.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})(),gn=(()=>{class Tt{constructor(ze,Mt){this.tokenService=ze,this.headerName=Mt}intercept(ze,Mt){const Pt=ze.url.toLowerCase();if("GET"===ze.method||"HEAD"===ze.method||Pt.startsWith("http://")||Pt.startsWith("https://"))return Mt.handle(ze);const an=this.tokenService.getToken();return null!==an&&!ze.headers.has(this.headerName)&&(ze=ze.clone({headers:ze.headers.set(this.headerName,an)})),Mt.handle(ze)}}return Tt.\u0275fac=function(ze){return new(ze||Tt)(g.LFG(An),g.LFG(Sn))},Tt.\u0275prov=g.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})(),Yt=(()=>{class Tt{constructor(ze,Mt){this.backend=ze,this.injector=Mt,this.chain=null}handle(ze){if(null===this.chain){const Mt=this.injector.get(ln,[]);this.chain=Mt.reduceRight((Pt,an)=>new tn(Pt,an),this.backend)}return this.chain.handle(ze)}}return Tt.\u0275fac=function(ze){return new(ze||Tt)(g.LFG(be),g.LFG(g.zs3))},Tt.\u0275prov=g.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})(),Qt=(()=>{class Tt{static disable(){return{ngModule:Tt,providers:[{provide:gn,useClass:Tn}]}}static withOptions(ze={}){return{ngModule:Tt,providers:[ze.cookieName?{provide:Xn,useValue:ze.cookieName}:[],ze.headerName?{provide:Sn,useValue:ze.headerName}:[]]}}}return Tt.\u0275fac=function(ze){return new(ze||Tt)},Tt.\u0275mod=g.oAB({type:Tt}),Tt.\u0275inj=g.cJS({providers:[gn,{provide:ln,useExisting:gn,multi:!0},{provide:An,useClass:Oi},{provide:Xn,useValue:"XSRF-TOKEN"},{provide:Sn,useValue:"X-XSRF-TOKEN"}]}),Tt})(),hr=(()=>{class Tt{}return Tt.\u0275fac=function(ze){return new(ze||Tt)},Tt.\u0275mod=g.oAB({type:Tt}),Tt.\u0275inj=g.cJS({providers:[at,{provide:he,useClass:Yt},Bn,{provide:be,useExisting:Bn}],imports:[[Qt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Tt})()},7716:(Ht,it,K)=>{"use strict";K.d(it,{deG:()=>ia,tb:()=>DC,AFp:()=>CC,ip1:()=>Uy,CZH:()=>Of,hGG:()=>xA,z2F:()=>Jp,sBO:()=>ED,Sil:()=>Qp,_Vd:()=>Ef,EJc:()=>SC,SBq:()=>Nc,qLn:()=>fl,vpe:()=>kc,gxx:()=>ql,tBr:()=>Tu,XFs:()=>Qt,OlP:()=>Mi,zs3:()=>Co,ZZ4:()=>Pm,aQg:()=>Fm,soG:()=>zm,YKP:()=>d0,v3s:()=>dA,h0i:()=>Fh,PXZ:()=>oA,R0b:()=>Zu,FiY:()=>as,Lbi:()=>wC,g9A:()=>EC,n_E:()=>Yp,Qsj:()=>aD,FYo:()=>xm,JOm:()=>ea,Tiy:()=>hy,q3G:()=>Zr,tp0:()=>$s,EAV:()=>gA,Rgc:()=>Vp,dDg:()=>OC,DyG:()=>zs,q4F:()=>fy,GfV:()=>r0,s_b:()=>Lm,ifc:()=>Ot,eFA:()=>NC,G48:()=>JS,Gpc:()=>Ae,f3M:()=>uc,X6Q:()=>Zy,_c5:()=>TA,VLi:()=>QS,c2e:()=>TC,zSh:()=>qd,wAp:()=>pr,vHH:()=>Ue,EiD:()=>mc,mCW:()=>Jo,qzn:()=>ua,JVY:()=>yd,pB0:()=>lh,eBb:()=>dc,L6k:()=>vd,LAX:()=>uh,cg1:()=>ry,Tjo:()=>wA,kL8:()=>Tb,yhl:()=>al,dqk:()=>Ut,sIi:()=>Oh,CqO:()=>$_,QGY:()=>Z_,F4k:()=>Rv,RDi:()=>Y,AaK:()=>he,z3N:()=>qr,qOj:()=>Jd,TTD:()=>wo,_Bn:()=>Jb,xp6:()=>zh,uIk:()=>_f,Gre:()=>pb,ekj:()=>J_,Suo:()=>X0,Xpm:()=>Ln,lG2:()=>uo,Yz7:()=>Cn,cJS:()=>zn,oAB:()=>xi,Yjl:()=>ns,Y36:()=>Rp,_UZ:()=>Mv,BQk:()=>q_,ynx:()=>z_,qZA:()=>G_,TgZ:()=>H_,EpF:()=>Ov,n5z:()=>Et,Ikx:()=>ny,LFG:()=>mi,$8M:()=>ir,NdJ:()=>W_,CRH:()=>eC,oxw:()=>Nv,ALo:()=>$0,xi3:()=>W0,Hsn:()=>Lv,F$t:()=>kv,Q6J:()=>B_,DdM:()=>U0,VKq:()=>B0,kEZ:()=>j0,iGM:()=>Q0,MAs:()=>_m,CHM:()=>vs,LSH:()=>_c,kYT:()=>Fo,Udp:()=>Q_,YNc:()=>Rh,_uU:()=>sb,Oqu:()=>ey,hij:()=>Tm,AsE:()=>ty,Gf:()=>J0});var P=K(9765),g=K(5319),J=K(7574),C=K(6682),Ve=K(8819);function we(e){for(let i in e)if(e[i]===we)return i;throw Error("Could not find renamed property on target object.")}function Ne(e,i){for(const a in i)i.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(e[a]=i[a])}function he(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(he).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const i=e.toString();if(null==i)return""+i;const a=i.indexOf("\n");return-1===a?i:i.substring(0,a)}function be(e,i){return null==e||""===e?null===i?"":i:null==i||""===i?e:e+" "+i}const se=we({__forward_ref__:we});function Ae(e){return e.__forward_ref__=Ae,e.toString=function(){return he(this())},e}function ge(e){return Ee(e)?e():e}function Ee(e){return"function"==typeof e&&e.hasOwnProperty(se)&&e.__forward_ref__===Ae}class Ue extends Error{constructor(i,a){super(function(e,i){return`${e?`NG0${e}: `:""}${i}`}(i,a)),this.code=i}}function Ke(e){return"string"==typeof e?e:null==e?"":String(e)}function At(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Ke(e)}function $t(e,i){const a=i?` in ${i}`:"";throw new Ue("201",`No provider for ${At(e)} found${a}`)}function jt(e,i){null==e&&function(e,i,a,u){throw new Error(`ASSERTION ERROR: ${e}`+(null==u?"":` [Expected=> ${a} ${u} ${i} <=Actual]`))}(i,e,null,"!=")}function Cn(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function zn(e){return{providers:e.providers||[],imports:e.imports||[]}}function Bn(e){return Xn(e,gn)||Xn(e,jn)}function Xn(e,i){return e.hasOwnProperty(i)?e[i]:null}function Oi(e){return e&&(e.hasOwnProperty(Yt)||e.hasOwnProperty(Vn))?e[Yt]:null}const gn=we({\u0275prov:we}),Yt=we({\u0275inj:we}),jn=we({ngInjectableDef:we}),Vn=we({ngInjectorDef:we});var Qt=(()=>((Qt=Qt||{})[Qt.Default=0]="Default",Qt[Qt.Host=1]="Host",Qt[Qt.Self=2]="Self",Qt[Qt.SkipSelf=4]="SkipSelf",Qt[Qt.Optional=8]="Optional",Qt))();let hr;function $n(e){const i=hr;return hr=e,i}function Tt(e,i,a){const u=Bn(e);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&Qt.Optional?null:void 0!==i?i:void $t(he(e),"Injector")}function ze(e){return{toString:e}.toString()}var Mt=(()=>((Mt=Mt||{})[Mt.OnPush=0]="OnPush",Mt[Mt.Default=1]="Default",Mt))(),Ot=(()=>((Ot=Ot||{})[Ot.Emulated=0]="Emulated",Ot[Ot.None=2]="None",Ot[Ot.ShadowDom=3]="ShadowDom",Ot))();const He="undefined"!=typeof globalThis&&globalThis,pt="undefined"!=typeof window&&window,bt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ut=He||"undefined"!=typeof global&&global||pt||bt,qt={},Re=[],Pe=we({\u0275cmp:we}),Ye=we({\u0275dir:we}),et=we({\u0275pipe:we}),tt=we({\u0275mod:we}),zt=we({\u0275loc:we}),_n=we({\u0275fac:we}),rr=we({__NG_ELEMENT_ID__:we});let Pn=0;function Ln(e){return ze(()=>{const a={},u={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Mt.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Re,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Ot.Emulated,id:"c",styles:e.styles||Re,_:null,setInput:null,schemas:e.schemas||null,tView:null},h=e.directives,_=e.features,b=e.pipes;return u.id+=Pn++,u.inputs=Li(e.inputs,a),u.outputs=Li(e.outputs),_&&_.forEach(T=>T(u)),u.directiveDefs=h?()=>("function"==typeof h?h():h).map(jr):null,u.pipeDefs=b?()=>("function"==typeof b?b():b).map(Kr):null,u})}function jr(e){return Nr(e)||function(e){return e[Ye]||null}(e)}function Kr(e){return function(e){return e[et]||null}(e)}const wr={};function xi(e){return ze(()=>{const i={type:e.type,bootstrap:e.bootstrap||Re,declarations:e.declarations||Re,imports:e.imports||Re,exports:e.exports||Re,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(wr[e.id]=e.type),i})}function Fo(e,i){return ze(()=>{const a=Vr(e,!0);a.declarations=i.declarations||Re,a.imports=i.imports||Re,a.exports=i.exports||Re})}function Li(e,i){if(null==e)return qt;const a={};for(const u in e)if(e.hasOwnProperty(u)){let h=e[u],_=h;Array.isArray(h)&&(_=h[1],h=h[0]),a[h]=u,i&&(i[h]=_)}return a}const uo=Ln;function ns(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function Nr(e){return e[Pe]||null}function Vr(e,i){const a=e[tt]||null;if(!a&&!0===i)throw new Error(`Type ${he(e)} does not have '\u0275mod' property.`);return a}const X=11;function Qr(e){return Array.isArray(e)&&"object"==typeof e[1]}function Or(e){return Array.isArray(e)&&!0===e[1]}function qi(e){return 0!=(8&e.flags)}function fi(e){return 2==(2&e.flags)}function Zi(e){return 1==(1&e.flags)}function Qi(e){return null!==e.template}function yi(e){return 0!=(512&e[2])}function kr(e,i){return e.hasOwnProperty(_n)?e[_n]:null}class is{constructor(i,a,u){this.previousValue=i,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function wo(){return Do}function Do(e){return e.type.prototype.ngOnChanges&&(e.setInput=ro),Rr}function Rr(){const e=fo(this),i=null==e?void 0:e.current;if(i){const a=e.previous;if(a===qt)e.previous=i;else for(let u in i)a[u]=i[u];e.current=null,this.ngOnChanges(i)}}function ro(e,i,a,u){const h=fo(e)||function(e,i){return e[ti]=i}(e,{previous:qt,current:null}),_=h.current||(h.current={}),b=h.previous,T=this.declaredInputs[a],N=b[T];_[T]=new is(N&&N.currentValue,i,b===qt),e[u]=i}wo.ngInherit=!0;const ti="__ngSimpleChanges__";function fo(e){return e[ti]||null}let os;function Y(e){os=e}function x(e){return!!e.listen}const k={createRenderer:(e,i)=>void 0!==os?os:"undefined"!=typeof document?document:void 0};function De(e){for(;Array.isArray(e);)e=e[0];return e}function H(e,i){return De(i[e])}function j(e,i){return De(i[e.index])}function ue(e,i){return e.data[i]}function We(e,i){return e[i]}function xt(e,i){const a=i[e];return Qr(a)?a:a[0]}function wn(e){return 4==(4&e[2])}function dr(e){return 128==(128&e[2])}function fr(e,i){return null==i?null:e[i]}function zr(e){e[18]=0}function oi(e,i){e[5]+=i;let a=e,u=e[3];for(;null!==u&&(1===i&&1===a[5]||-1===i&&0===a[5]);)u[5]+=i,a=u,u=u[3]}const Dn={lFrame:ui(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $u(){return Dn.bindingsEnabled}function kt(){return Dn.lFrame.lView}function _r(){return Dn.lFrame.tView}function vs(e){return Dn.lFrame.contextLView=e,e[8]}function Pi(){let e=Os();for(;null!==e&&64===e.type;)e=e.parent;return e}function Os(){return Dn.lFrame.currentTNode}function Zo(e,i){const a=Dn.lFrame;a.currentTNode=e,a.isParent=i}function oe(){return Dn.lFrame.isParent}function A(){Dn.lFrame.isParent=!1}function ae(){return Dn.isInCheckNoChangesMode}function Ce(e){Dn.isInCheckNoChangesMode=e}function Fe(){const e=Dn.lFrame;let i=e.bindingRootIndex;return-1===i&&(i=e.bindingRootIndex=e.tView.bindingStartIndex),i}function Le(){return Dn.lFrame.bindingIndex}function mt(){return Dn.lFrame.bindingIndex++}function Zt(e){const i=Dn.lFrame,a=i.bindingIndex;return i.bindingIndex=i.bindingIndex+e,a}function Sr(e,i){const a=Dn.lFrame;a.bindingIndex=a.bindingRootIndex=e,Nn(i)}function Nn(e){Dn.lFrame.currentDirectiveIndex=e}function si(){return Dn.lFrame.currentQueryIndex}function Ur(e){Dn.lFrame.currentQueryIndex=e}function Xi(e){const i=e[1];return 2===i.type?i.declTNode:1===i.type?e[6]:null}function ai(e,i,a){if(a&Qt.SkipSelf){let h=i,_=e;for(;!(h=h.parent,null!==h||a&Qt.Host||(h=Xi(_),null===h||(_=_[15],10&h.type))););if(null===h)return!1;i=h,e=_}const u=Dn.lFrame=To();return u.currentTNode=i,u.lView=e,!0}function Oo(e){const i=To(),a=e[1];Dn.lFrame=i,i.currentTNode=a.firstChild,i.lView=e,i.tView=a,i.contextLView=e,i.bindingIndex=a.bindingStartIndex,i.inI18n=!1}function To(){const e=Dn.lFrame,i=null===e?null:e.child;return null===i?ui(e):i}function ui(e){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=i),i}function Ro(){const e=Dn.lFrame;return Dn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const $o=Ro;function Ni(){const e=Ro();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function li(){return Dn.lFrame.selectedIndex}function Wi(e){Dn.lFrame.selectedIndex=e}function gi(){const e=Dn.lFrame;return ue(e.tView,e.selectedIndex)}function wi(e,i){for(let a=i.directiveStart,u=i.directiveEnd;a<u;a++){const _=e.data[a].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:T,ngAfterViewInit:N,ngAfterViewChecked:z,ngOnDestroy:re}=_;b&&(e.contentHooks||(e.contentHooks=[])).push(-a,b),T&&((e.contentHooks||(e.contentHooks=[])).push(a,T),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(a,T)),N&&(e.viewHooks||(e.viewHooks=[])).push(-a,N),z&&((e.viewHooks||(e.viewHooks=[])).push(a,z),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(a,z)),null!=re&&(e.destroyHooks||(e.destroyHooks=[])).push(a,re)}}function io(e,i,a){Ii(e,i,3,a)}function Jr(e,i,a,u){(3&e[2])===a&&Ii(e,i,a,u)}function na(e,i){let a=e[2];(3&a)===i&&(a&=2047,a+=1,e[2]=a)}function Ii(e,i,a,u){const _=null!=u?u:-1,b=i.length-1;let T=0;for(let N=void 0!==u?65535&e[18]:0;N<b;N++)if("number"==typeof i[N+1]){if(T=i[N],null!=u&&T>=u)break}else i[N]<0&&(e[18]+=65536),(T<_||-1==_)&&(Bs(e,a,i,N),e[18]=(4294901760&e[18])+N+2),N++}function Bs(e,i,a,u){const h=a[u]<0,_=a[u+1],T=e[h?-a[u]:a[u]];if(h){if(e[2]>>11<e[18]>>16&&(3&e[2])===i){e[2]+=2048;try{_.call(T)}finally{}}}else try{_.call(T)}finally{}}class ni{constructor(i,a,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function Da(e,i,a){const u=x(e);let h=0;for(;h<a.length;){const _=a[h];if("number"==typeof _){if(0!==_)break;h++;const b=a[h++],T=a[h++],N=a[h++];u?e.setAttribute(i,T,N,b):i.setAttributeNS(b,T,N)}else{const b=_,T=a[++h];hu(b)?u&&e.setProperty(i,b,T):u?e.setAttribute(i,b,T):i.setAttribute(b,T),h++}}return h}function Yu(e){return 3===e||4===e||6===e}function hu(e){return 64===e.charCodeAt(0)}function js(e,i){if(null!==i&&0!==i.length)if(null===e||0===e.length)e=i.slice();else{let a=-1;for(let u=0;u<i.length;u++){const h=i[u];"number"==typeof h?a=h:0===a||Ml(e,a,h,null,-1===a||2===a?i[++u]:null)}}return e}function Ml(e,i,a,u,h){let _=0,b=e.length;if(-1===i)b=-1;else for(;_<e.length;){const T=e[_++];if("number"==typeof T){if(T===i){b=-1;break}if(T>i){b=_-1;break}}}for(;_<e.length;){const T=e[_];if("number"==typeof T)break;if(T===a){if(null===u)return void(null!==h&&(e[_+1]=h));if(u===e[_+1])return void(e[_+2]=h)}_++,null!==u&&_++,null!==h&&_++}-1!==b&&(e.splice(b,0,i),_=b+1),e.splice(_++,0,a),null!==u&&e.splice(_++,0,u),null!==h&&e.splice(_++,0,h)}function ra(e){return-1!==e}function ja(e){return 32767&e}function Ha(e,i){let a=function(e){return e>>16}(e),u=i;for(;a>0;)u=u[15],a--;return u}let Ki=!0;function _t(e){const i=Ki;return Ki=e,i}let nn=0;function Cs(e,i){const a=kn(e,i);if(-1!==a)return a;const u=i[1];u.firstCreatePass&&(e.injectorIndex=i.length,Ga(u.data,e),Ga(i,null),Ga(u.blueprint,null));const h=Kn(e,i),_=e.injectorIndex;if(ra(h)){const b=ja(h),T=Ha(h,i),N=T[1].data;for(let z=0;z<8;z++)i[_+z]=T[b+z]|N[b+z]}return i[_+8]=h,_}function Ga(e,i){e.push(0,0,0,0,0,0,0,0,i)}function kn(e,i){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===i[e.injectorIndex+8]?-1:e.injectorIndex}function Kn(e,i){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let a=0,u=null,h=i;for(;null!==h;){const _=h[1],b=_.type;if(u=2===b?_.declTNode:1===b?h[6]:null,null===u)return-1;if(a++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function un(e,i,a){!function(e,i,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(rr)&&(u=a[rr]),null==u&&(u=a[rr]=nn++);const h=255&u;i.data[e+(h>>5)]|=1<<h}(e,i,a)}function fu(e,i,a){if(a&Qt.Optional)return e;$t(i,"NodeInjector")}function Pr(e,i,a,u){if(a&Qt.Optional&&void 0===u&&(u=null),0==(a&(Qt.Self|Qt.Host))){const h=e[9],_=$n(void 0);try{return h?h.get(i,u,a&Qt.Optional):Tt(i,u,a&Qt.Optional)}finally{$n(_)}}return fu(u,i,a)}function za(e,i,a,u=Qt.Default,h){if(null!==e){const _=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const i=e.hasOwnProperty(rr)?e[rr]:void 0;return"number"==typeof i?i>=0?255&i:U:i}(a);if("function"==typeof _){if(!ai(i,e,u))return u&Qt.Host?fu(h,a,u):Pr(i,a,u,h);try{const b=_(u);if(null!=b||u&Qt.Optional)return b;$t(a)}finally{$o()}}else if("number"==typeof _){let b=null,T=kn(e,i),N=-1,z=u&Qt.Host?i[16][6]:null;for((-1===T||u&Qt.SkipSelf)&&(N=-1===T?Kn(e,i):i[T+8],-1!==N&&Ie(u,!1)?(b=i[1],T=ja(N),i=Ha(N,i)):T=-1);-1!==T;){const re=i[1];if(de(_,T,re.data)){const me=R(T,i,a,b,u,z);if(me!==qa)return me}N=i[T+8],-1!==N&&Ie(u,i[1].data[T+8]===z)&&de(_,T,i)?(b=re,T=ja(N),i=Ha(N,i)):T=-1}}}return Pr(i,a,u,h)}const qa={};function U(){return new Ze(Pi(),kt())}function R(e,i,a,u,h,_){const b=i[1],T=b.data[e+8],re=O(T,b,a,null==u?fi(T)&&Ki:u!=b&&0!=(3&T.type),h&Qt.Host&&_===T);return null!==re?Z(i,b,re,T):qa}function O(e,i,a,u,h){const _=e.providerIndexes,b=i.data,T=1048575&_,N=e.directiveStart,re=_>>20,Se=h?T+re:e.directiveEnd;for(let Be=u?T:T+re;Be<Se;Be++){const Qe=b[Be];if(Be<N&&a===Qe||Be>=N&&Qe.type===a)return Be}if(h){const Be=b[N];if(Be&&Qi(Be)&&Be.type===a)return N}return null}function Z(e,i,a,u){let h=e[a];const _=i.data;if(function(e){return e instanceof ni}(h)){const b=h;b.resolving&&function(e,i){throw new Ue("200",`Circular dependency in DI detected for ${e}`)}(At(_[a]));const T=_t(b.canSeeViewProviders);b.resolving=!0;const N=b.injectImpl?$n(b.injectImpl):null;ai(e,u,Qt.Default);try{h=e[a]=b.factory(void 0,_,e,u),i.firstCreatePass&&a>=u.directiveStart&&function(e,i,a){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:_}=i.type.prototype;if(u){const b=Do(i);(a.preOrderHooks||(a.preOrderHooks=[])).push(e,b),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(e,b)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-e,h),_&&((a.preOrderHooks||(a.preOrderHooks=[])).push(e,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(e,_))}(a,_[a],i)}finally{null!==N&&$n(N),_t(T),b.resolving=!1,$o()}}return h}function de(e,i,a){return!!(a[i+(e>>5)]&1<<e)}function Ie(e,i){return!(e&Qt.Self||e&Qt.Host&&i)}class Ze{constructor(i,a){this._tNode=i,this._lView=a}get(i,a){return za(this._tNode,this._lView,i,void 0,a)}}function Et(e){return ze(()=>{const i=e.prototype.constructor,a=i[_n]||fn(i),u=Object.prototype;let h=Object.getPrototypeOf(e.prototype).constructor;for(;h&&h!==u;){const _=h[_n]||fn(h);if(_&&_!==a)return _;h=Object.getPrototypeOf(h)}return _=>new _})}function fn(e){return Ee(e)?()=>{const i=fn(ge(e));return i&&i()}:kr(e)}function ir(e){return function(e,i){if("class"===i)return e.classes;if("style"===i)return e.styles;const a=e.attrs;if(a){const u=a.length;let h=0;for(;h<u;){const _=a[h];if(Yu(_))break;if(0===_)h+=2;else if("number"==typeof _)for(h++;h<u&&"string"==typeof a[h];)h++;else{if(_===i)return a[h+1];h+=2}}}return null}(Pi(),e)}const Ir="__parameters__";function _o(e,i,a){return ze(()=>{const u=function(e){return function(...a){if(e){const u=e(...a);for(const h in u)this[h]=u[h]}}}(i);function h(..._){if(this instanceof h)return u.apply(this,_),this;const b=new h(..._);return T.annotation=b,T;function T(N,z,re){const me=N.hasOwnProperty(Ir)?N[Ir]:Object.defineProperty(N,Ir,{value:[]})[Ir];for(;me.length<=re;)me.push(null);return(me[re]=me[re]||[]).push(b),N}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=e,h.annotationCls=h,h})}class Mi{constructor(i,a){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Cn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ia=new Mi("AnalyzeForEntryComponents"),zs=Function;function Ko(e,i){void 0===i&&(i=e);for(let a=0;a<e.length;a++){let u=e[a];Array.isArray(u)?(i===e&&(i=e.slice(0,a)),Ko(u,i)):i!==e&&i.push(u)}return i}function yo(e,i){e.forEach(a=>Array.isArray(a)?yo(a,i):i(a))}function qs(e,i,a){i>=e.length?e.push(a):e.splice(i,0,a)}function So(e,i){return i>=e.length-1?e.pop():e.splice(i,1)[0]}function $a(e,i){const a=[];for(let u=0;u<e;u++)a.push(i);return a}function Es(e,i,a){let u=oa(e,i);return u>=0?e[1|u]=a:(u=~u,function(e,i,a,u){let h=e.length;if(h==i)e.push(a,u);else if(1===h)e.push(u,e[0]),e[0]=a;else{for(h--,e.push(e[h-1],e[h]);h>i;)e[h]=e[h-2],h--;e[i]=a,e[i+1]=u}}(e,u,i,a)),u}function Ps(e,i){const a=oa(e,i);if(a>=0)return e[1|a]}function oa(e,i){return function(e,i,a){let u=0,h=e.length>>a;for(;h!==u;){const _=u+(h-u>>1),b=e[_<<a];if(i===b)return _<<a;b>i?h=_:u=_+1}return~(h<<a)}(e,i,1)}const tl={},Oa="__NG_DI_FLAG__",Bo="ngTempTokenPath",Rl=/\n/gm,ac="__source",rl=we({provide:String,useValue:we});let Wa;function Ra(e){const i=Wa;return Wa=e,i}function xl(e,i=Qt.Default){if(void 0===Wa)throw new Error("inject() must be called from an injection context");return null===Wa?Tt(e,void 0,i):Wa.get(e,i&Qt.Optional?null:void 0,i)}function mi(e,i=Qt.Default){return(hr||xl)(ge(e),i)}const uc=mi;function Cu(e){const i=[];for(let a=0;a<e.length;a++){const u=ge(e[a]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let h,_=Qt.Default;for(let b=0;b<u.length;b++){const T=u[b],N=Eu(T);"number"==typeof N?-1===N?h=T.token:_|=N:h=T}i.push(mi(h,_))}else i.push(mi(u))}return i}function xa(e,i){return e[Oa]=i,e.prototype[Oa]=i,e}function Eu(e){return e[Oa]}function Ya(e,i,a,u){const h=e[Bo];throw i[ac]&&h.unshift(i[ac]),e.message=function(e,i,a,u=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let h=he(i);if(Array.isArray(i))h=i.map(he).join(" -> ");else if("object"==typeof i){let _=[];for(let b in i)if(i.hasOwnProperty(b)){let T=i[b];_.push(b+":"+("string"==typeof T?JSON.stringify(T):he(T)))}h=`{${_.join(", ")}}`}return`${a}${u?"("+u+")":""}[${h}]: ${e.replace(Rl,"\n  ")}`}("\n"+e.message,h,a,u),e.ngTokenPath=h,e[Bo]=null,e}const Tu=xa(_o("Inject",e=>({token:e})),-1),as=xa(_o("Optional"),8),$s=xa(_o("SkipSelf"),4);let aa;function jo(e){var i;return(null===(i=function(){if(void 0===aa&&(aa=null,Ut.trustedTypes))try{aa=Ut.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return aa}())||void 0===i?void 0:i.createHTML(e))||e}class Io{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class sl extends Io{getTypeName(){return"HTML"}}class lc extends Io{getTypeName(){return"Style"}}class ah extends Io{getTypeName(){return"Script"}}class cc extends Io{getTypeName(){return"URL"}}class Fl extends Io{getTypeName(){return"ResourceURL"}}function qr(e){return e instanceof Io?e.changingThisBreaksApplicationSecurity:e}function ua(e,i){const a=al(e);if(null!=a&&a!==i){if("ResourceURL"===a&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===i}function al(e){return e instanceof Io&&e.getTypeName()||null}function yd(e){return new sl(e)}function vd(e){return new lc(e)}function dc(e){return new ah(e)}function uh(e){return new cc(e)}function lh(e){return new Fl(e)}class Nl{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const a=(new window.DOMParser).parseFromString(jo(i),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(i):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class $c{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const u=this.inertDocument.createElement("body");a.appendChild(u)}}getInertBodyElement(i){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=jo(i),a;const u=this.inertDocument.createElement("body");return u.innerHTML=jo(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const a=i.attributes;for(let h=a.length-1;0<h;h--){const b=a.item(h).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&i.removeAttribute(b)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const ch=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,kl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Jo(e){return(e=String(e)).match(ch)||e.match(kl)?e:"unsafe:"+e}function Ds(e){const i={};for(const a of e.split(","))i[a]=!0;return i}function ji(...e){const i={};for(const a of e)for(const u in a)a.hasOwnProperty(u)&&(i[u]=!0);return i}const Ll=Ds("area,br,col,hr,img,wbr"),Ou=Ds("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ul=Ds("rp,rt"),la=ji(Ll,ji(Ou,Ds("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ji(ul,Ds("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ji(ul,Ou)),Ru=Ds("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ll=Ds("srcset"),cl=ji(Ru,ll,Ds("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ds("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),fc=Ds("script,style,template");class pc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let a=i.firstChild,u=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?u=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,u&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let h=this.checkClobberedElement(a,a.nextSibling);if(h){a=h;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(i){const a=i.nodeName.toLowerCase();if(!la.hasOwnProperty(a))return this.sanitizedSomething=!0,!fc.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const u=i.attributes;for(let h=0;h<u.length;h++){const _=u.item(h),b=_.name,T=b.toLowerCase();if(!cl.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let N=_.value;Ru[T]&&(N=Jo(N)),ll[T]&&(e=N,N=(e=String(e)).split(",").map(i=>Jo(i.trim())).join(", ")),this.buf.push(" ",b,'="',gc(N),'"')}var e;return this.buf.push(">"),!0}endElement(i){const a=i.nodeName.toLowerCase();la.hasOwnProperty(a)&&!Ll.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(i){this.buf.push(gc(i))}checkClobberedElement(i,a){if(a&&(i.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return a}}const Kc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qc=/([^\#-~ |!])/g;function gc(e){return e.replace(/&/g,"&amp;").replace(Kc,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(Qc,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Xo;function mc(e,i){let a=null;try{Xo=Xo||function(e){const i=new $c(e);return function(){try{return!!(new window.DOMParser).parseFromString(jo(""),"text/html")}catch(e){return!1}}()?new Nl(i):i}(e);let u=i?String(i):"";a=Xo.getInertBodyElement(u);let h=5,_=u;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,u=_,_=a.innerHTML,a=Xo.getInertBodyElement(u)}while(u!==_);return jo((new pc).sanitizeChildren(ca(a)||a))}finally{if(a){const u=ca(a)||a;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function ca(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Zr=(()=>((Zr=Zr||{})[Zr.NONE=0]="NONE",Zr[Zr.HTML=1]="HTML",Zr[Zr.STYLE=2]="STYLE",Zr[Zr.SCRIPT=3]="SCRIPT",Zr[Zr.URL=4]="URL",Zr[Zr.RESOURCE_URL=5]="RESOURCE_URL",Zr))();function _c(e){const i=function(){const e=kt();return e&&e[12]}();return i?i.sanitize(Zr.URL,e)||"":ua(e,"URL")?qr(e):Jo(Ke(e))}const Hi="__ngContext__";function Di(e,i){e[Hi]=i}function oo(e){const i=function(e){return e[Hi]||null}(e);return i?Array.isArray(i)?i:i.lView:null}function Js(e){return e.ngOriginalError}function Id(e,...i){e.error(...i)}class fl{constructor(){this._console=console}handleError(i){const a=this._findOriginalError(i),u=this._findContext(i),h=(e=i)&&e.ngErrorLogger||Id;var e;h(this._console,"ERROR",i),a&&h(this._console,"ORIGINAL ERROR",a),u&&h(this._console,"ERROR CONTEXT",u)}_findContext(i){return i?i.ngDebugContext||this._findContext(Js(i)):null}_findOriginalError(i){let a=i&&Js(i);for(;a&&Js(a);)a=Js(a);return a||null}}const ml=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ut))();function Xs(e){return e instanceof Function?e():e}var ea=(()=>((ea=ea||{})[ea.Important=1]="Important",ea[ea.DashCase=2]="DashCase",ea))();function nu(e,i){return undefined(e,i)}function ha(e){const i=e[3];return Or(i)?i[3]:i}function Ec(e){return gh(e[13])}function Bu(e){return gh(e[4])}function gh(e){for(;null!==e&&!Or(e);)e=e[4];return e}function ju(e,i,a,u,h){if(null!=u){let _,b=!1;Or(u)?_=u:Qr(u)&&(b=!0,u=u[0]);const T=De(u);0===e&&null!==a?null==h?ce(i,a,T):W(i,a,T,h||null,!0):1===e&&null!==a?W(i,a,T,h||null,!0):2===e?function(e,i,a){const u=ke(e,i);u&&function(e,i,a,u){x(e)?e.removeChild(i,a,u):i.removeChild(a)}(e,u,i,a)}(i,T,b):3===e&&i.destroyNode(T),null!=_&&function(e,i,a,u,h){const _=a[7];_!==De(a)&&ju(i,e,u,_,h);for(let T=10;T<a.length;T++){const N=a[T];su(N[1],N,e,i,u,_)}}(i,e,_,a,h)}}function Fd(e,i,a){return x(e)?e.createElement(i,a):null===a?e.createElement(i):e.createElementNS(a,i)}function w(e,i){const a=e[9],u=a.indexOf(i),h=i[3];1024&i[2]&&(i[2]&=-1025,oi(h,-1)),a.splice(u,1)}function G(e,i){if(e.length<=10)return;const a=10+i,u=e[a];if(u){const h=u[17];null!==h&&h!==e&&w(h,u),i>0&&(e[a-1][4]=u[4]);const _=So(e,10+i);!function(e,i){su(e,i,i[X],2,null,null),i[0]=null,i[6]=null}(u[1],u);const b=_[19];null!==b&&b.detachView(_[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function c(e,i){if(!(256&i[2])){const a=i[X];x(a)&&a.destroyNode&&su(e,i,a,3,null,null),function(e){let i=e[13];if(!i)return d(e[1],e);for(;i;){let a=null;if(Qr(i))a=i[13];else{const u=i[10];u&&(a=u)}if(!a){for(;i&&!i[4]&&i!==e;)Qr(i)&&d(i[1],i),i=i[3];null===i&&(i=e),Qr(i)&&d(i[1],i),a=i&&i[4]}i=a}}(i)}}function d(e,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(e,i){let a;if(null!=e&&null!=(a=e.destroyHooks))for(let u=0;u<a.length;u+=2){const h=i[a[u]];if(!(h instanceof ni)){const _=a[u+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const T=h[_[b]],N=_[b+1];try{N.call(T)}finally{}}else try{_.call(h)}finally{}}}}(e,i),function(e,i){const a=e.cleanup,u=i[7];let h=-1;if(null!==a)for(let _=0;_<a.length-1;_+=2)if("string"==typeof a[_]){const b=a[_+1],T="function"==typeof b?b(i):De(i[b]),N=u[h=a[_+2]],z=a[_+3];"boolean"==typeof z?T.removeEventListener(a[_],N,z):z>=0?u[h=z]():u[h=-z].unsubscribe(),_+=2}else{const b=u[h=a[_+1]];a[_].call(b)}if(null!==u){for(let _=h+1;_<u.length;_++)u[_]();i[7]=null}}(e,i),1===i[1].type&&x(i[X])&&i[X].destroy();const a=i[17];if(null!==a&&Or(i[3])){a!==i[3]&&w(a,i);const u=i[19];null!==u&&u.detachView(e)}}}function D(e,i,a){return function(e,i,a){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return a[0];if(2&u.flags){const h=e.data[u.directiveStart].encapsulation;if(h===Ot.None||h===Ot.Emulated)return null}return j(u,a)}(e,i.parent,a)}function W(e,i,a,u,h){x(e)?e.insertBefore(i,a,u,h):i.insertBefore(a,u,h)}function ce(e,i,a){x(e)?e.appendChild(i,a):i.appendChild(a)}function ve(e,i,a,u,h){null!==u?W(e,i,a,u,h):ce(e,i,a)}function ke(e,i){return x(e)?e.parentNode(i):i.parentNode}function It(e,i,a){return on(e,i,a)}let on=function(e,i,a){return 40&e.type?j(e,a):null};function Er(e,i,a,u){const h=D(e,u,i),_=i[X],T=It(u.parent||i[6],u,i);if(null!=h)if(Array.isArray(a))for(let N=0;N<a.length;N++)ve(_,h,a[N],T,!1);else ve(_,h,a,T,!1)}function so(e,i){if(null!==i){const a=i.type;if(3&a)return j(i,e);if(4&a)return Hl(-1,e[i.index]);if(8&a){const u=i.child;if(null!==u)return so(e,u);{const h=e[i.index];return Or(h)?Hl(-1,h):De(h)}}if(32&a)return nu(i,e)()||De(e[i.index]);{const u=Na(e,i);return null!==u?Array.isArray(u)?u[0]:so(ha(e[16]),u):so(e,i.next)}}return null}function Na(e,i){return null!==i?e[16][6].projection[i.projection]:null}function Hl(e,i){const a=10+e+1;if(a<i.length){const u=i[a],h=u[1].firstChild;if(null!==h)return so(u,h)}return i[7]}function ou(e,i,a,u,h,_,b){for(;null!=a;){const T=u[a.index],N=a.type;if(b&&0===i&&(T&&Di(De(T),u),a.flags|=4),64!=(64&a.flags))if(8&N)ou(e,i,a.child,u,h,_,!1),ju(i,e,h,T,_);else if(32&N){const z=nu(a,u);let re;for(;re=z();)ju(i,e,h,re,_);ju(i,e,h,T,_)}else 16&N?kf(e,i,u,a,h,_):ju(i,e,h,T,_);a=b?a.projectionNext:a.next}}function su(e,i,a,u,h,_){ou(a,u,e.firstChild,i,h,_,!1)}function kf(e,i,a,u,h,_){const b=a[16],N=b[6].projection[u.projection];if(Array.isArray(N))for(let z=0;z<N.length;z++)ju(i,e,h,N[z],_);else ou(e,i,N,b[3],h,_,!0)}function og(e,i,a){x(e)?e.setAttribute(i,"style",a):i.style.cssText=a}function Lf(e,i,a){x(e)?""===a?e.removeAttribute(i,"class"):e.setAttribute(i,"class",a):i.className=a}function sg(e,i,a){let u=e.length;for(;;){const h=e.indexOf(i,a);if(-1===h)return h;if(0===h||e.charCodeAt(h-1)<=32){const _=i.length;if(h+_===u||e.charCodeAt(h+_)<=32)return h}a=h+1}}const ls="ng-template";function n_(e,i,a){let u=0;for(;u<e.length;){let h=e[u++];if(a&&"class"===h){if(h=e[u],-1!==sg(h.toLowerCase(),i,0))return!0}else if(1===h){for(;u<e.length&&"string"==typeof(h=e[u++]);)if(h.toLowerCase()===i)return!0;return!1}}return!1}function ug(e){return 4===e.type&&e.value!==ls}function r_(e,i,a){return i===(4!==e.type||a?e.value:ls)}function i_(e,i,a){let u=4;const h=e.attrs||[],_=function(e){for(let i=0;i<e.length;i++)if(Yu(e[i]))return i;return e.length}(h);let b=!1;for(let T=0;T<i.length;T++){const N=i[T];if("number"!=typeof N){if(!b)if(4&u){if(u=2|1&u,""!==N&&!r_(e,N,a)||""===N&&1===i.length){if(Hu(u))return!1;b=!0}}else{const z=8&u?N:i[++T];if(8&u&&null!==e.attrs){if(!n_(e.attrs,z,a)){if(Hu(u))return!1;b=!0}continue}const me=o_(8&u?"class":N,h,ug(e),a);if(-1===me){if(Hu(u))return!1;b=!0;continue}if(""!==z){let Se;Se=me>_?"":h[me+1].toLowerCase();const Be=8&u?Se:null;if(Be&&-1!==sg(Be,z,0)||2&u&&z!==Se){if(Hu(u))return!1;b=!0}}}}else{if(!b&&!Hu(u)&&!Hu(N))return!1;if(b&&Hu(N))continue;b=!1,u=N|1&u}}return Hu(u)||b}function Hu(e){return 0==(1&e)}function o_(e,i,a,u){if(null===i)return-1;let h=0;if(u||!a){let _=!1;for(;h<i.length;){const b=i[h];if(b===e)return h;if(3===b||6===b)_=!0;else{if(1===b||2===b){let T=i[++h];for(;"string"==typeof T;)T=i[++h];continue}if(4===b)break;if(0===b){h+=4;continue}}h+=_?1:2}return-1}return function(e,i){let a=e.indexOf(4);if(a>-1)for(a++;a<e.length;){const u=e[a];if("number"==typeof u)return-1;if(u===i)return a;a++}return-1}(i,e)}function lg(e,i,a=!1){for(let u=0;u<i.length;u++)if(i_(e,i[u],a))return!0;return!1}function Vf(e,i){e:for(let a=0;a<i.length;a++){const u=i[a];if(e.length===u.length){for(let h=0;h<e.length;h++)if(e[h]!==u[h])continue e;return!0}}return!1}function Uf(e,i){return e?":not("+i.trim()+")":i}function Bf(e){let i=e[0],a=1,u=2,h="",_=!1;for(;a<e.length;){let b=e[a];if("string"==typeof b)if(2&u){const T=e[++a];h+="["+b+(T.length>0?'="'+T+'"':"")+"]"}else 8&u?h+="."+b:4&u&&(h+=" "+b);else""!==h&&!Hu(b)&&(i+=Uf(_,h),h=""),u=b,_=_||!Hu(u);a++}return""!==h&&(i+=Uf(_,h)),i}const yr={};function zh(e){jf(_r(),kt(),li()+e,ae())}function jf(e,i,a,u){if(!u)if(3==(3&i[2])){const _=e.preOrderCheckHooks;null!==_&&io(i,_,a)}else{const _=e.preOrderHooks;null!==_&&Jr(i,_,0,a)}Wi(a)}function qh(e,i){return e<<17|i<<2}function au(e){return e>>17&32767}function Hf(e){return 2|e}function yl(e){return(131068&e)>>2}function kd(e,i){return-131069&e|i<<2}function vh(e){return 1|e}function Jh(e,i){const a=e.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const h=a[u],_=a[u+1];if(-1!==_){const b=e.data[_];Ur(h),b.contentQueries(2,i[_],_)}}}function Ud(e,i,a,u,h,_,b,T,N,z){const re=i.blueprint.slice();return re[0]=h,re[2]=140|u,zr(re),re[3]=re[15]=e,re[8]=a,re[10]=b||e&&e[10],re[X]=T||e&&e[X],re[12]=N||e&&e[12]||null,re[9]=z||e&&e[9]||null,re[6]=_,re[16]=2==i.type?e[16]:re,re}function Bd(e,i,a,u,h){let _=e.data[i];if(null===_)_=function(e,i,a,u,h){const _=Os(),b=oe(),N=e.data[i]=function(e,i,a,u,h,_){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,a,i,u,h);return null===e.firstChild&&(e.firstChild=N),null!==_&&(b?null==_.child&&null!==N.parent&&(_.child=N):null===_.next&&(_.next=N)),N}(e,i,a,u,h),Dn.lFrame.inI18n&&(_.flags|=64);else if(64&_.type){_.type=a,_.value=u,_.attrs=h;const b=function(){const e=Dn.lFrame,i=e.currentTNode;return e.isParent?i:i.parent}();_.injectorIndex=null===b?-1:b.injectorIndex}return Zo(_,!0),_}function td(e,i,a,u){if(0===a)return-1;const h=i.length;for(let _=0;_<a;_++)i.push(u),e.blueprint.push(u),e.data.push(null);return h}function jd(e,i,a){Oo(i);try{const u=e.viewQuery;null!==u&&Gd(1,u,a);const h=e.template;null!==h&&Eg(e,i,h,1,a),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Jh(e,i),e.staticViewQueries&&Gd(2,e.viewQuery,a);const _=e.components;null!==_&&function(e,i){for(let a=0;a<i.length;a++)rp(e,i[a])}(i,_)}catch(u){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),u}finally{i[2]&=-5,Ni()}}function nd(e,i,a,u){const h=i[2];if(256==(256&h))return;Oo(i);const _=ae();try{zr(i),function(e){Dn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==a&&Eg(e,i,a,2,u);const b=3==(3&h);if(!_)if(b){const z=e.preOrderCheckHooks;null!==z&&io(i,z,null)}else{const z=e.preOrderHooks;null!==z&&Jr(i,z,0,null),na(i,0)}if(function(e){for(let i=Ec(e);null!==i;i=Bu(i)){if(!i[2])continue;const a=i[9];for(let u=0;u<a.length;u++){const h=a[u],_=h[3];0==(1024&h[2])&&oi(_,1),h[2]|=1024}}}(i),function(e){for(let i=Ec(e);null!==i;i=Bu(i))for(let a=10;a<i.length;a++){const u=i[a],h=u[1];dr(u)&&nd(h,u,h.template,u[8])}}(i),null!==e.contentQueries&&Jh(e,i),!_)if(b){const z=e.contentCheckHooks;null!==z&&io(i,z)}else{const z=e.contentHooks;null!==z&&Jr(i,z,1),na(i,1)}!function(e,i){const a=e.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const h=a[u];if(h<0)Wi(~h);else{const _=h,b=a[++u],T=a[++u];Sr(b,_),T(2,i[_])}}}finally{Wi(-1)}}(e,i);const T=e.components;null!==T&&function(e,i){for(let a=0;a<i.length;a++)Ug(e,i[a])}(i,T);const N=e.viewQuery;if(null!==N&&Gd(2,N,u),!_)if(b){const z=e.viewCheckHooks;null!==z&&io(i,z)}else{const z=e.viewHooks;null!==z&&Jr(i,z,2),na(i,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),_||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,oi(i[3],-1))}finally{Ni()}}function p_(e,i,a,u){const h=i[10],_=!ae(),b=wn(i);try{_&&!b&&h.begin&&h.begin(),b&&jd(e,i,u),nd(e,i,a,u)}finally{_&&!b&&h.end&&h.end()}}function Eg(e,i,a,u,h){const _=li(),b=2&u;try{Wi(-1),b&&i.length>20&&jf(e,i,20,ae()),a(u,h)}finally{Wi(_)}}function wg(e,i,a){if(qi(i)){const h=i.directiveEnd;for(let _=i.directiveStart;_<h;_++){const b=e.data[_];b.contentQueries&&b.contentQueries(1,a[_],_)}}}function Yf(e,i,a){!$u()||(function(e,i,a,u){const h=a.directiveStart,_=a.directiveEnd;e.firstCreatePass||Cs(a,i),Di(u,i);const b=a.initialInputs;for(let T=h;T<_;T++){const N=e.data[T],z=Qi(N);z&&kg(i,a,N);const re=Z(i,e,T,a);Di(re,i),null!==b&&Lg(0,T-h,re,N,0,b),z&&(xt(a.index,i)[8]=re)}}(e,i,a,j(a,i)),128==(128&a.flags)&&function(e,i,a){const u=a.directiveStart,h=a.directiveEnd,b=a.index,T=Dn.lFrame.currentDirectiveIndex;try{Wi(b);for(let N=u;N<h;N++){const z=e.data[N],re=i[N];Nn(N),(null!==z.hostBindings||0!==z.hostVars||null!==z.hostAttrs)&&Pg(z,re)}}finally{Wi(-1),Nn(T)}}(e,i,a))}function Eh(e,i,a=j){const u=i.localNames;if(null!==u){let h=i.index+1;for(let _=0;_<u.length;_+=2){const b=u[_+1],T=-1===b?a(i,e):e[b];e[h++]=T}}}function Dg(e){const i=e.tView;return null===i||i.incompleteFirstPass?e.tView=ef(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):i}function ef(e,i,a,u,h,_,b,T,N,z){const re=20+u,me=re+h,Se=function(e,i){const a=[];for(let u=0;u<i;u++)a.push(u<e?null:yr);return a}(re,me),Be="function"==typeof z?z():z;return Se[1]={type:e,blueprint:Se,template:a,queries:null,viewQuery:T,declTNode:i,data:Se.slice().fill(null,re),bindingStartIndex:re,expandoStartIndex:me,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:N,consts:Be,incompleteFirstPass:!1}}function Ag(e,i,a,u){const h=op(i);null===a?h.push(u):(h.push(a),e.firstCreatePass&&Gg(e).push(u,h.length-1))}function tf(e,i,a){for(let u in e)if(e.hasOwnProperty(u)){const h=e[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(i,h):a[u]=[i,h]}return a}function ga(e,i,a,u,h,_,b,T){const N=j(i,a);let re,z=i.inputs;!T&&null!=z&&(re=z[u])?(Zg(e,a,re,u,h),fi(i)&&function(e,i){const a=xt(i,e);16&a[2]||(a[2]|=64)}(a,i.index)):3&i.type&&(u=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(u),h=null!=b?b(h,i.value||"",u):h,x(_)?_.setProperty(N,u,h):hu(u)||(N.setProperty?N.setProperty(u,h):N[u]=h))}function Xf(e,i,a,u){let h=!1;if($u()){const _=function(e,i,a){const u=e.directiveRegistry;let h=null;if(u)for(let _=0;_<u.length;_++){const b=u[_];lg(a,b.selectors,!1)&&(h||(h=[]),un(Cs(a,i),e,b.type),Qi(b)?(Fg(e,a),h.unshift(b)):h.push(b))}return h}(e,i,a),b=null===u?null:{"":-1};if(null!==_){h=!0,Ng(a,e.data.length,_.length);for(let re=0;re<_.length;re++){const me=_[re];me.providersResolver&&me.providersResolver(me)}let T=!1,N=!1,z=td(e,i,_.length,null);for(let re=0;re<_.length;re++){const me=_[re];a.mergedAttrs=js(a.mergedAttrs,me.hostAttrs),np(e,a,i,z,me),tp(z,me,b),null!==me.contentQueries&&(a.flags|=8),(null!==me.hostBindings||null!==me.hostAttrs||0!==me.hostVars)&&(a.flags|=128);const Se=me.type.prototype;!T&&(Se.ngOnChanges||Se.ngOnInit||Se.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(a.index),T=!0),!N&&(Se.ngOnChanges||Se.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(a.index),N=!0),z++}!function(e,i){const u=i.directiveEnd,h=e.data,_=i.attrs,b=[];let T=null,N=null;for(let z=i.directiveStart;z<u;z++){const re=h[z],me=re.inputs,Se=null===_||ug(i)?null:nf(me,_);b.push(Se),T=tf(me,z,T),N=tf(re.outputs,z,N)}null!==T&&(T.hasOwnProperty("class")&&(i.flags|=16),T.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=b,i.inputs=T,i.outputs=N}(e,a)}b&&function(e,i,a){if(i){const u=e.localNames=[];for(let h=0;h<i.length;h+=2){const _=a[i[h+1]];if(null==_)throw new Ue("301",`Export of name '${i[h+1]}' not found!`);u.push(i[h],_)}}}(a,u,b)}return a.mergedAttrs=js(a.mergedAttrs,a.attrs),h}function Og(e,i,a,u,h,_){const b=_.hostBindings;if(b){let T=e.hostBindingOpCodes;null===T&&(T=e.hostBindingOpCodes=[]);const N=~i.index;(function(e){let i=e.length;for(;i>0;){const a=e[--i];if("number"==typeof a&&a<0)return a}return 0})(T)!=N&&T.push(N),T.push(u,h,b)}}function Pg(e,i){null!==e.hostBindings&&e.hostBindings(1,i)}function Fg(e,i){i.flags|=2,(e.components||(e.components=[])).push(i.index)}function tp(e,i,a){if(a){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)a[i.exportAs[u]]=e;Qi(i)&&(a[""]=e)}}function Ng(e,i,a){e.flags|=1,e.directiveStart=i,e.directiveEnd=i+a,e.providerIndexes=i}function np(e,i,a,u,h){e.data[u]=h;const _=h.factory||(h.factory=kr(h.type)),b=new ni(_,Qi(h),null);e.blueprint[u]=b,a[u]=b,Og(e,i,0,u,td(e,a,h.hostVars,yr),h)}function kg(e,i,a){const u=j(i,e),h=Dg(a),_=e[10],b=Dh(e,Ud(e,h,null,a.onPush?64:16,u,i,_,_.createRenderer(u,a),null,null));e[i.index]=b}function bl(e,i,a,u,h,_){const b=j(e,i);!function(e,i,a,u,h,_,b){if(null==_)x(e)?e.removeAttribute(i,h,a):i.removeAttribute(h);else{const T=null==b?Ke(_):b(_,u||"",h);x(e)?e.setAttribute(i,h,T,a):a?i.setAttributeNS(a,h,T):i.setAttribute(h,T)}}(i[X],b,_,e.value,a,u,h)}function Lg(e,i,a,u,h,_){const b=_[i];if(null!==b){const T=u.setInput;for(let N=0;N<b.length;){const z=b[N++],re=b[N++],me=b[N++];null!==T?u.setInput(a,me,z,re):a[re]=me}}}function nf(e,i){let a=null,u=0;for(;u<i.length;){const h=i[u];if(0!==h)if(5!==h){if("number"==typeof h)break;e.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,e[h],i[u+1])),u+=2}else u+=2;else u+=4}return a}function Vg(e,i,a,u){return new Array(e,!0,!1,i,null,0,u,a,null,null)}function Ug(e,i){const a=xt(i,e);if(dr(a)){const u=a[1];80&a[2]?nd(u,a,u.template,a[8]):a[5]>0&&rf(a)}}function rf(e){for(let u=Ec(e);null!==u;u=Bu(u))for(let h=10;h<u.length;h++){const _=u[h];if(1024&_[2]){const b=_[1];nd(b,_,b.template,_[8])}else _[5]>0&&rf(_)}const a=e[1].components;if(null!==a)for(let u=0;u<a.length;u++){const h=xt(a[u],e);dr(h)&&h[5]>0&&rf(h)}}function rp(e,i){const a=xt(i,e),u=a[1];(function(e,i){for(let a=i.length;a<e.blueprint.length;a++)i.push(e.blueprint[a])})(u,a),jd(u,a,a[8])}function Dh(e,i){return e[13]?e[14][4]=i:e[13]=i,e[14]=i,i}function Th(e){for(;e;){e[2]|=64;const i=ha(e);if(yi(e)&&!i)return e;e=i}return null}function Mc(e,i,a){const u=i[10];u.begin&&u.begin();try{nd(e,i,e.template,a)}catch(h){throw qg(i,h),h}finally{u.end&&u.end()}}function ip(e){!function(e){for(let i=0;i<e.components.length;i++){const a=e.components[i],u=oo(a),h=u[1];p_(h,u,h.template,a)}}(e[8])}function Gd(e,i,a){Ur(0),i(e,a)}const Hg=(()=>Promise.resolve(null))();function op(e){return e[7]||(e[7]=[])}function Gg(e){return e.cleanup||(e.cleanup=[])}function qg(e,i){const a=e[9],u=a?a.get(fl,null):null;u&&u.handleError(i)}function Zg(e,i,a,u,h){for(let _=0;_<a.length;){const b=a[_++],T=a[_++],N=i[b],z=e.data[b];null!==z.setInput?z.setInput(N,h,u,T):N[T]=h}}function Gu(e,i,a){const u=H(i,e);!function(e,i,a){x(e)?e.setValue(i,a):i.textContent=a}(e[X],u,a)}function zd(e,i,a){let u=a?e.styles:null,h=a?e.classes:null,_=0;if(null!==i)for(let b=0;b<i.length;b++){const T=i[b];"number"==typeof T?_=T:1==_?h=be(h,T):2==_&&(u=be(u,T+": "+i[++b]+";"))}a?e.styles=u:e.stylesWithoutHost=u,a?e.classes=h:e.classesWithoutHost=h}const ql=new Mi("INJECTOR",-1);class Ti{get(i,a=tl){if(a===tl){const u=new Error(`NullInjectorError: No provider for ${he(i)}!`);throw u.name="NullInjectorError",u}return a}}const qd=new Mi("Set Injector scope."),Zd={},Ah={};let ao;function ta(){return void 0===ao&&(ao=new Ti),ao}function sp(e,i=null,a=null,u){return new sf(e,a,i||ta(),u)}class sf{constructor(i,a,u,h=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];a&&yo(a,T=>this.processProvider(T,i,a)),yo([i],T=>this.processInjectorType(T,[],_)),this.records.set(ql,$d(void 0,this));const b=this.records.get(qd);this.scope=null!=b?b.value:null,this.source=h||("object"==typeof i?null:he(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,a=tl,u=Qt.Default){this.assertNotDestroyed();const h=Ra(this),_=$n(void 0);try{if(!(u&Qt.SkipSelf)){let T=this.records.get(i);if(void 0===T){const N=("function"==typeof(e=i)||"object"==typeof e&&e instanceof Mi)&&Bn(i);T=N&&this.injectableDefInScope(N)?$d(af(i),Zd):null,this.records.set(i,T)}if(null!=T)return this.hydrate(i,T)}return(u&Qt.Self?ta():this.parent).get(i,a=u&Qt.Optional&&a===tl?null:a)}catch(b){if("NullInjectorError"===b.name){if((b[Bo]=b[Bo]||[]).unshift(he(i)),h)throw b;return Ya(b,i,"R3InjectorError",this.source)}throw b}finally{$n(_),Ra(h)}var e}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,h)=>i.push(he(h))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,a,u){if(!(i=ge(i)))return!1;let h=Oi(i);const _=null==h&&i.ngModule||void 0,b=void 0===_?i:_,T=-1!==u.indexOf(b);if(void 0!==_&&(h=Oi(_)),null==h)return!1;if(null!=h.imports&&!T){let re;u.push(b);try{yo(h.imports,me=>{this.processInjectorType(me,a,u)&&(void 0===re&&(re=[]),re.push(me))})}finally{}if(void 0!==re)for(let me=0;me<re.length;me++){const{ngModule:Se,providers:Be}=re[me];yo(Be,Qe=>this.processProvider(Qe,Se,Be||Re))}}this.injectorDefTypes.add(b);const N=kr(b)||(()=>new b);this.records.set(b,$d(N,Zd));const z=h.providers;if(null!=z&&!T){const re=i;yo(z,me=>this.processProvider(me,re,z))}return void 0!==_&&void 0!==i.providers}processProvider(i,a,u){let h=id(i=ge(i))?i:ge(i&&i.provide);const _=Kg(e=i)?$d(void 0,e.useValue):$d(rd(e),Zd);var e;if(id(i)||!0!==i.multi)this.records.get(h);else{let b=this.records.get(h);b||(b=$d(void 0,Zd,!0),b.factory=()=>Cu(b.multi),this.records.set(h,b)),h=i,b.multi.push(i)}this.records.set(h,_)}hydrate(i,a){return a.value===Zd&&(a.value=Ah,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(e=a.value)&&"object"==typeof e&&"function"==typeof e.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var e}injectableDefInScope(i){if(!i.providedIn)return!1;const a=ge(i.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function af(e){const i=Bn(e),a=null!==i?i.factory:kr(e);if(null!==a)return a;if(e instanceof Mi)throw new Error(`Token ${he(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const i=e.length;if(i>0){const u=$a(i,"?");throw new Error(`Can't resolve all parameters for ${he(e)}: (${u.join(", ")}).`)}const a=function(e){const i=e&&(e[gn]||e[jn]);if(i){const a=function(e){if(e.hasOwnProperty("name"))return e.name;const i=(""+e).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),i}return null}(e);return null!==a?()=>a.factory(e):()=>new e}(e);throw new Error("unreachable")}function rd(e,i,a){let u;if(id(e)){const h=ge(e);return kr(h)||af(h)}if(Kg(e))u=()=>ge(e.useValue);else if(function(e){return!(!e||!e.useFactory)}(e))u=()=>e.useFactory(...Cu(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))u=()=>mi(ge(e.useExisting));else{const h=ge(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return kr(h)||af(h);u=()=>new h(...Cu(e.deps))}return u}function $d(e,i,a=!1){return{factory:e,value:i,multi:a?[]:void 0}}function Kg(e){return null!==e&&"object"==typeof e&&rl in e}function id(e){return"function"==typeof e}const Xg=function(e,i,a){return function(e,i=null,a=null,u){const h=sp(e,i,a,u);return h._resolveInjectorDefTypes(),h}({name:a},i,e,a)};let Co=(()=>{class e{static create(a,u){return Array.isArray(a)?Xg(a,u,""):Xg(a.providers,a.parent,a.name||"")}}return e.THROW_IF_NOT_FOUND=tl,e.NULL=new Ti,e.\u0275prov=Cn({token:e,providedIn:"any",factory:()=>mi(ql)}),e.__NG_ELEMENT_ID__=-1,e})();function am(e,i){wi(oo(e)[1],Pi())}function Jd(e){let i=function(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),a=!0;const u=[e];for(;i;){let h;if(Qi(e))h=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Error("Directives cannot inherit Components");h=i.\u0275dir}if(h){if(a){u.push(h);const b=e;b.inputs=bp(e.inputs),b.declaredInputs=bp(e.declaredInputs),b.outputs=bp(e.outputs);const T=h.hostBindings;T&&um(e,T);const N=h.viewQuery,z=h.contentQueries;if(N&&Rc(e,N),z&&ld(e,z),Ne(e.inputs,h.inputs),Ne(e.declaredInputs,h.declaredInputs),Ne(e.outputs,h.outputs),Qi(h)&&h.data.animation){const re=e.data;re.animation=(re.animation||[]).concat(h.data.animation)}}const _=h.features;if(_)for(let b=0;b<_.length;b++){const T=_[b];T&&T.ngInherit&&T(e),T===Jd&&(a=!1)}}i=Object.getPrototypeOf(i)}!function(e){let i=0,a=null;for(let u=e.length-1;u>=0;u--){const h=e[u];h.hostVars=i+=h.hostVars,h.hostAttrs=js(h.hostAttrs,a=js(a,h.hostAttrs))}}(u)}function bp(e){return e===qt?{}:e===Re?[]:e}function Rc(e,i){const a=e.viewQuery;e.viewQuery=a?(u,h)=>{i(u,h),a(u,h)}:i}function ld(e,i){const a=e.contentQueries;e.contentQueries=a?(u,h,_)=>{i(u,h,_),a(u,h,_)}:i}function um(e,i){const a=e.hostBindings;e.hostBindings=a?(u,h)=>{i(u,h),a(u,h)}:i}let gf=null;function cd(){if(!gf){const e=Ut.Symbol;if(e&&e.iterator)gf=e.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<i.length;++a){const u=i[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(gf=u)}}}return gf}class uu{constructor(i){this.wrapped=i}static wrap(i){return new uu(i)}static unwrap(i){return uu.isWrapped(i)?i.wrapped:i}static isWrapped(i){return i instanceof uu}}function Oh(e){return!!wp(e)&&(Array.isArray(e)||!(e instanceof Map)&&cd()in e)}function wp(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function qu(e,i,a){return e[i]=a}function cs(e,i,a){return!Object.is(e[i],a)&&(e[i]=a,!0)}function ka(e,i,a,u){const h=cs(e,i,a);return cs(e,i+1,u)||h}function _f(e,i,a,u){const h=kt();return cs(h,mt(),i)&&(_r(),bl(gi(),h,e,i,a,u)),_f}function Dl(e,i,a,u){return cs(e,mt(),a)?i+Ke(a)+u:yr}function Rh(e,i,a,u,h,_,b,T){const N=kt(),z=_r(),re=e+20,me=z.firstCreatePass?function(e,i,a,u,h,_,b,T,N){const z=i.consts,re=Bd(i,e,4,b||null,fr(z,T));Xf(i,a,re,fr(z,N)),wi(i,re);const me=re.tViews=ef(2,re,u,h,_,i.directiveRegistry,i.pipeRegistry,null,i.schemas,z);return null!==i.queries&&(i.queries.template(i,re),me.queries=i.queries.embeddedTView(re)),re}(re,z,N,i,a,u,h,_,b):z.data[re];Zo(me,!1);const Se=N[X].createComment("");Er(z,N,Se,me),Di(Se,N),Dh(N,N[re]=Vg(Se,N,Se,me)),Zi(me)&&Yf(z,N,me),null!=b&&Eh(N,me,T)}function _m(e){return We(Dn.lFrame.contextLView,20+e)}function Rp(e,i=Qt.Default){const a=kt();return null===a?mi(e,i):za(Pi(),a,ge(e),i)}function B_(e,i,a){const u=kt();return cs(u,mt(),i)&&ga(_r(),gi(),u,e,i,u[X],a,!1),B_}function j_(e,i,a,u,h){const b=h?"class":"style";Zg(e,a,i.inputs[b],b,u)}function H_(e,i,a,u){const h=kt(),_=_r(),b=20+e,T=h[X],N=h[b]=Fd(T,i,Dn.lFrame.currentNamespace),z=_.firstCreatePass?function(e,i,a,u,h,_,b){const T=i.consts,z=Bd(i,e,2,h,fr(T,_));return Xf(i,a,z,fr(T,b)),null!==z.attrs&&zd(z,z.attrs,!1),null!==z.mergedAttrs&&zd(z,z.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,z),z}(b,_,h,0,i,a,u):_.data[b];Zo(z,!0);const re=z.mergedAttrs;null!==re&&Da(T,N,re);const me=z.classes;null!==me&&Lf(T,N,me);const Se=z.styles;null!==Se&&og(T,N,Se),64!=(64&z.flags)&&Er(_,h,N,z),0===Dn.lFrame.elementDepthCount&&Di(N,h),Dn.lFrame.elementDepthCount++,Zi(z)&&(Yf(_,h,z),wg(_,z,h)),null!==u&&Eh(h,z)}function G_(){let e=Pi();oe()?A():(e=e.parent,Zo(e,!1));const i=e;Dn.lFrame.elementDepthCount--;const a=_r();a.firstCreatePass&&(wi(a,e),qi(e)&&a.queries.elementEnd(e)),null!=i.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(i)&&j_(a,i,kt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(i)&&j_(a,i,kt(),i.stylesWithoutHost,!1)}function Mv(e,i,a,u){H_(e,i,a,u),G_()}function z_(e,i,a){const u=kt(),h=_r(),_=e+20,b=h.firstCreatePass?function(e,i,a,u,h){const _=i.consts,b=fr(_,u),T=Bd(i,e,8,"ng-container",b);return null!==b&&zd(T,b,!0),Xf(i,a,T,fr(_,h)),null!==i.queries&&i.queries.elementStart(i,T),T}(_,h,u,i,a):h.data[_];Zo(b,!0);const T=u[_]=u[X].createComment("");Er(h,u,T,b),Di(T,u),Zi(b)&&(Yf(h,u,b),wg(h,b,u)),null!=a&&Eh(u,b)}function q_(){let e=Pi();const i=_r();oe()?A():(e=e.parent,Zo(e,!1)),i.firstCreatePass&&(wi(i,e),qi(e)&&i.queries.elementEnd(e))}function Ov(){return kt()}function Z_(e){return!!e&&"function"==typeof e.then}function Rv(e){return!!e&&"function"==typeof e.subscribe}const $_=Rv;function W_(e,i,a,u){const h=kt(),_=_r(),b=Pi();return function(e,i,a,u,h,_,b,T){const N=Zi(u),re=e.firstCreatePass&&Gg(e),me=i[8],Se=op(i);let Be=!0;if(3&u.type||T){const ft=j(u,i),Kt=T?T(ft):ft,Ft=Se.length,Jn=T?vr=>T(De(vr[u.index])):u.index;if(x(a)){let vr=null;if(!T&&N&&(vr=function(e,i,a,u){const h=e.cleanup;if(null!=h)for(let _=0;_<h.length-1;_+=2){const b=h[_];if(b===a&&h[_+1]===u){const T=i[7],N=h[_+2];return T.length>N?T[N]:null}"string"==typeof b&&(_+=2)}return null}(e,i,h,u.index)),null!==vr)(vr.__ngLastListenerFn__||vr).__ngNextListenerFn__=_,vr.__ngLastListenerFn__=_,Be=!1;else{_=Y_(u,i,me,_,!1);const hi=a.listen(Kt,h,_);Se.push(_,hi),re&&re.push(h,Jn,Ft,Ft+1)}}else _=Y_(u,i,me,_,!0),Kt.addEventListener(h,_,b),Se.push(_),re&&re.push(h,Jn,Ft,b)}else _=Y_(u,i,me,_,!1);const Qe=u.outputs;let Ct;if(Be&&null!==Qe&&(Ct=Qe[h])){const ft=Ct.length;if(ft)for(let Kt=0;Kt<ft;Kt+=2){const Ms=i[Ct[Kt]][Ct[Kt+1]].subscribe(_),Il=Se.length;Se.push(_,Ms),re&&re.push(h,u.index,Il,-(Il+1))}}}(_,h,h[X],b,e,i,!!a,u),W_}function Fv(e,i,a,u){try{return!1!==a(u)}catch(h){return qg(e,h),!1}}function Y_(e,i,a,u,h){return function _(b){if(b===Function)return u;const T=2&e.flags?xt(e.index,i):i;0==(32&i[2])&&Th(T);let N=Fv(i,0,u,b),z=_.__ngNextListenerFn__;for(;z;)N=Fv(i,0,z,b)&&N,z=z.__ngNextListenerFn__;return h&&!1===N&&(b.preventDefault(),b.returnValue=!1),N}}function Nv(e=1){return function(e){return(Dn.lFrame.contextLView=function(e,i){for(;e>0;)i=i[15],e--;return i}(e,Dn.lFrame.contextLView))[8]}(e)}function bE(e,i){let a=null;const u=function(e){const i=e.attrs;if(null!=i){const a=i.indexOf(5);if(0==(1&a))return i[a+1]}return null}(e);for(let h=0;h<i.length;h++){const _=i[h];if("*"!==_){if(null===u?lg(e,_,!0):Vf(u,_))return h}else a=h}return a}function kv(e){const i=kt()[16][6];if(!i.projection){const u=i.projection=$a(e?e.length:1,null),h=u.slice();let _=i.child;for(;null!==_;){const b=e?bE(_,e):0;null!==b&&(h[b]?h[b].projectionNext=_:u[b]=_,h[b]=_),_=_.next}}}function Lv(e,i=0,a){const u=kt(),h=_r(),_=Bd(h,20+e,16,null,a||null);null===_.projection&&(_.projection=i),A(),64!=(64&_.flags)&&function(e,i,a){kf(i[X],0,i,a,D(e,a,i),It(a.parent||i[6],a,i))}(h,u,_)}function $v(e,i,a,u,h){const _=e[a+1],b=null===i;let T=u?au(_):yl(_),N=!1;for(;0!==T&&(!1===N||b);){const re=e[T+1];wE(e[T],i)&&(N=!0,e[T+1]=u?vh(re):Hf(re)),T=u?au(re):yl(re)}N&&(e[a+1]=u?Hf(_):vh(_))}function wE(e,i){return null===e||null==i||(Array.isArray(e)?e[1]:e)===i||!(!Array.isArray(e)||"string"!=typeof i)&&oa(e,i)>=0}const Is={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Wv(e){return e.substring(Is.key,Is.keyEnd)}function Yv(e,i){const a=Is.textEnd;return a===i?-1:(i=Is.keyEnd=function(e,i,a){for(;i<a&&e.charCodeAt(i)>32;)i++;return i}(e,Is.key=i,a),vf(e,i,a))}function vf(e,i,a){for(;i<a&&e.charCodeAt(i)<=32;)i++;return i}function Q_(e,i,a){return Kl(e,i,a,!1),Q_}function J_(e,i){return Kl(e,i,null,!0),J_}function Fc(e,i){for(let a=function(e){return function(e){Is.key=0,Is.keyEnd=0,Is.value=0,Is.valueEnd=0,Is.textEnd=e.length}(e),Yv(e,vf(e,0,Is.textEnd))}(i);a>=0;a=Yv(i,a))Es(e,Wv(i),!0)}function Kl(e,i,a,u){const h=kt(),_=_r(),b=Zt(2);_.firstUpdatePass&&tb(_,e,b,u),i!==yr&&cs(h,b,i)&&rb(_,_.data[li()],h,h[X],e,h[b+1]=function(e,i){return null==e||("string"==typeof i?e+=i:"object"==typeof e&&(e=he(qr(e)))),e}(i,a),u,b)}function eb(e,i){return i>=e.expandoStartIndex}function tb(e,i,a,u){const h=e.data;if(null===h[a+1]){const _=h[li()],b=eb(e,a);ob(_,u)&&null===i&&!b&&(i=!1),i=function(e,i,a,u){const h=function(e){const i=Dn.lFrame.currentDirectiveIndex;return-1===i?null:e[i]}(e);let _=u?i.residualClasses:i.residualStyles;if(null===h)0===(u?i.classBindings:i.styleBindings)&&(a=xp(a=X_(null,e,i,a,u),i.attrs,u),_=null);else{const b=i.directiveStylingLast;if(-1===b||e[b]!==h)if(a=X_(h,e,i,a,u),null===_){let N=function(e,i,a){const u=a?i.classBindings:i.styleBindings;if(0!==yl(u))return e[au(u)]}(e,i,u);void 0!==N&&Array.isArray(N)&&(N=X_(null,e,i,N[1],u),N=xp(N,i.attrs,u),function(e,i,a,u){e[au(a?i.classBindings:i.styleBindings)]=u}(e,i,u,N))}else _=function(e,i,a){let u;const h=i.directiveEnd;for(let _=1+i.directiveStylingLast;_<h;_++)u=xp(u,e[_].hostAttrs,a);return xp(u,i.attrs,a)}(e,i,u)}return void 0!==_&&(u?i.residualClasses=_:i.residualStyles=_),a}(h,_,i,u),function(e,i,a,u,h,_){let b=_?i.classBindings:i.styleBindings,T=au(b),N=yl(b);e[u]=a;let re,z=!1;if(Array.isArray(a)){const me=a;re=me[1],(null===re||oa(me,re)>0)&&(z=!0)}else re=a;if(h)if(0!==N){const Se=au(e[T+1]);e[u+1]=qh(Se,T),0!==Se&&(e[Se+1]=kd(e[Se+1],u)),e[T+1]=function(e,i){return 131071&e|i<<17}(e[T+1],u)}else e[u+1]=qh(T,0),0!==T&&(e[T+1]=kd(e[T+1],u)),T=u;else e[u+1]=qh(N,0),0===T?T=u:e[N+1]=kd(e[N+1],u),N=u;z&&(e[u+1]=Hf(e[u+1])),$v(e,re,u,!0),$v(e,re,u,!1),function(e,i,a,u,h){const _=h?e.residualClasses:e.residualStyles;null!=_&&"string"==typeof i&&oa(_,i)>=0&&(a[u+1]=vh(a[u+1]))}(i,re,e,u,_),b=qh(T,N),_?i.classBindings=b:i.styleBindings=b}(h,_,i,a,b,u)}}function X_(e,i,a,u,h){let _=null;const b=a.directiveEnd;let T=a.directiveStylingLast;for(-1===T?T=a.directiveStart:T++;T<b&&(_=i[T],u=xp(u,_.hostAttrs,h),_!==e);)T++;return null!==e&&(a.directiveStylingLast=T),u}function xp(e,i,a){const u=a?1:2;let h=-1;if(null!==i)for(let _=0;_<i.length;_++){const b=i[_];"number"==typeof b?h=b:h===u&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Es(e,b,!!a||i[++_]))}return void 0===e?null:e}function rb(e,i,a,u,h,_,b,T){if(!(3&i.type))return;const N=e.data,z=N[T+1];Dm(function(e){return 1==(1&e)}(z)?ib(N,i,a,h,yl(z),b):void 0)||(Dm(_)||function(e){return 2==(2&e)}(z)&&(_=ib(N,null,a,h,T,b)),function(e,i,a,u,h){const _=x(e);if(i)h?_?e.addClass(a,u):a.classList.add(u):_?e.removeClass(a,u):a.classList.remove(u);else{let b=-1===u.indexOf("-")?void 0:ea.DashCase;if(null==h)_?e.removeStyle(a,u,b):a.style.removeProperty(u);else{const T="string"==typeof h&&h.endsWith("!important");T&&(h=h.slice(0,-10),b|=ea.Important),_?e.setStyle(a,u,h,b):a.style.setProperty(u,h,T?"important":"")}}}(u,b,H(li(),a),h,_))}function ib(e,i,a,u,h,_){const b=null===i;let T;for(;h>0;){const N=e[h],z=Array.isArray(N),re=z?N[1]:N,me=null===re;let Se=a[h+1];Se===yr&&(Se=me?Re:void 0);let Be=me?Ps(Se,u):re===u?Se:void 0;if(z&&!Dm(Be)&&(Be=Ps(N,u)),Dm(Be)&&(T=Be,b))return T;const Qe=e[h+1];h=b?au(Qe):yl(Qe)}if(null!==i){let N=_?i.residualClasses:i.residualStyles;null!=N&&(T=Ps(N,u))}return T}function Dm(e){return void 0!==e}function ob(e,i){return 0!=(e.flags&(i?16:32))}function sb(e,i=""){const a=kt(),u=_r(),h=e+20,_=u.firstCreatePass?Bd(u,h,1,i,null):u.data[h],b=a[h]=function(e,i){return x(e)?e.createText(i):e.createTextNode(i)}(a[X],i);Er(u,a,b,_),Zo(_,!1)}function ey(e){return Tm("",e,""),ey}function Tm(e,i,a){const u=kt(),h=Dl(u,e,i,a);return h!==yr&&Gu(u,li(),h),Tm}function ty(e,i,a,u,h){const _=kt(),b=function(e,i,a,u,h,_){const T=ka(e,Le(),a,h);return Zt(2),T?i+Ke(a)+u+Ke(h)+_:yr}(_,e,i,a,u,h);return b!==yr&&Gu(_,li(),b),ty}function pb(e,i,a){!function(e,i,a,u){const h=_r(),_=Zt(2);h.firstUpdatePass&&tb(h,null,_,u);const b=kt();if(a!==yr&&cs(b,_,a)){const T=h.data[li()];if(ob(T,u)&&!eb(h,_)){let N=u?T.classesWithoutHost:T.stylesWithoutHost;null!==N&&(a=be(N,a||"")),j_(h,T,b,a,u)}else!function(e,i,a,u,h,_,b,T){h===yr&&(h=Re);let N=0,z=0,re=0<h.length?h[0]:null,me=0<_.length?_[0]:null;for(;null!==re||null!==me;){const Se=N<h.length?h[N+1]:void 0,Be=z<_.length?_[z+1]:void 0;let Ct,Qe=null;re===me?(N+=2,z+=2,Se!==Be&&(Qe=me,Ct=Be)):null===me||null!==re&&re<me?(N+=2,Qe=re):(z+=2,Qe=me,Ct=Be),null!==Qe&&rb(e,i,a,u,Qe,Ct,b,T),re=N<h.length?h[N]:null,me=z<_.length?_[z]:null}}(h,T,b,b[X],b[_+1],b[_+1]=function(e,i,a){if(null==a||""===a)return Re;const u=[],h=qr(a);if(Array.isArray(h))for(let _=0;_<h.length;_++)e(u,h[_],!0);else if("object"==typeof h)for(const _ in h)h.hasOwnProperty(_)&&e(u,_,h[_]);else"string"==typeof h&&i(u,h);return u}(e,i,a),u,_)}}(Es,Fc,Dl(kt(),e,i,a),!0)}function ny(e,i,a){const u=kt();return cs(u,mt(),i)&&ga(_r(),gi(),u,e,i,u[X],a,!0),ny}const Ph=void 0;var rw=["en",[["a","p"],["AM","PM"],Ph],[["AM","PM"],Ph,Ph],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ph,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ph,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ph,"{1} 'at' {0}",Ph],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const i=Math.floor(Math.abs(e)),a=e.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===a?1:5}];let bf={};function ry(e){const i=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let a=Sb(i);if(a)return a;const u=i.split("-")[0];if(a=Sb(u),a)return a;if("en"===u)return rw;throw new Error(`Missing locale data for the locale "${e}".`)}function Tb(e){return ry(e)[pr.PluralCase]}function Sb(e){return e in bf||(bf[e]=Ut.ng&&Ut.ng.common&&Ut.ng.common.locales&&Ut.ng.common.locales[e]),bf[e]}var pr=(()=>((pr=pr||{})[pr.LocaleId=0]="LocaleId",pr[pr.DayPeriodsFormat=1]="DayPeriodsFormat",pr[pr.DayPeriodsStandalone=2]="DayPeriodsStandalone",pr[pr.DaysFormat=3]="DaysFormat",pr[pr.DaysStandalone=4]="DaysStandalone",pr[pr.MonthsFormat=5]="MonthsFormat",pr[pr.MonthsStandalone=6]="MonthsStandalone",pr[pr.Eras=7]="Eras",pr[pr.FirstDayOfWeek=8]="FirstDayOfWeek",pr[pr.WeekendRange=9]="WeekendRange",pr[pr.DateFormat=10]="DateFormat",pr[pr.TimeFormat=11]="TimeFormat",pr[pr.DateTimeFormat=12]="DateTimeFormat",pr[pr.NumberSymbols=13]="NumberSymbols",pr[pr.NumberFormats=14]="NumberFormats",pr[pr.CurrencyCode=15]="CurrencyCode",pr[pr.CurrencySymbol=16]="CurrencySymbol",pr[pr.CurrencyName=17]="CurrencyName",pr[pr.Currencies=18]="Currencies",pr[pr.Directionality=19]="Directionality",pr[pr.PluralCase=20]="PluralCase",pr[pr.ExtraData=21]="ExtraData",pr))();const Sm="en-US";let Ab=Sm;function iy(e){jt(e,"Expected localeId to be defined"),"string"==typeof e&&(Ab=e.toLowerCase().replace(/_/g,"-"))}function ay(e,i,a,u,h){if(e=ge(e),Array.isArray(e))for(let _=0;_<e.length;_++)ay(e[_],i,a,u,h);else{const _=_r(),b=kt();let T=id(e)?e:ge(e.provide),N=rd(e);const z=Pi(),re=1048575&z.providerIndexes,me=z.directiveStart,Se=z.providerIndexes>>20;if(id(e)||!e.multi){const Be=new ni(N,h,Rp),Qe=ly(T,i,h?re:re+Se,me);-1===Qe?(un(Cs(z,b),_,T),uy(_,e,i.length),i.push(T),z.directiveStart++,z.directiveEnd++,h&&(z.providerIndexes+=1048576),a.push(Be),b.push(Be)):(a[Qe]=Be,b[Qe]=Be)}else{const Be=ly(T,i,re+Se,me),Qe=ly(T,i,re,re+Se),Ct=Be>=0&&a[Be],ft=Qe>=0&&a[Qe];if(h&&!ft||!h&&!Ct){un(Cs(z,b),_,T);const Kt=function(e,i,a,u,h){const _=new ni(e,a,Rp);return _.multi=[],_.index=i,_.componentProviders=0,Qb(_,h,u&&!a),_}(h?eD:Xw,a.length,h,u,N);!h&&ft&&(a[Qe].providerFactory=Kt),uy(_,e,i.length,0),i.push(T),z.directiveStart++,z.directiveEnd++,h&&(z.providerIndexes+=1048576),a.push(Kt),b.push(Kt)}else uy(_,e,Be>-1?Be:Qe,Qb(a[h?Qe:Be],N,!h&&u));!h&&u&&ft&&a[Qe].componentProviders++}}}function uy(e,i,a,u){const h=id(i);if(h||function(e){return!!e.useClass}(i)){const b=(i.useClass||i).prototype.ngOnDestroy;if(b){const T=e.destroyHooks||(e.destroyHooks=[]);if(!h&&i.multi){const N=T.indexOf(a);-1===N?T.push(a,[u,b]):T[N+1].push(u,b)}else T.push(a,b)}}}function Qb(e,i,a){return a&&e.componentProviders++,e.multi.push(i)-1}function ly(e,i,a,u){for(let h=a;h<u;h++)if(i[h]===e)return h;return-1}function Xw(e,i,a,u){return cy(this.multi,[])}function eD(e,i,a,u){const h=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,T=Z(a,a[1],this.providerFactory.index,u);_=T.slice(0,b),cy(h,_);for(let N=b;N<T.length;N++)_.push(T[N])}else _=[],cy(h,_);return _}function cy(e,i){for(let a=0;a<e.length;a++)i.push((0,e[a])());return i}function Jb(e,i=[]){return a=>{a.providersResolver=(u,h)=>function(e,i,a){const u=_r();if(u.firstCreatePass){const h=Qi(e);ay(a,u.data,u.blueprint,h,!0),ay(i,u.data,u.blueprint,h,!1)}}(u,h?h(e):e,i)}}class Xb{}const t0="ngComponent";class rD{resolveComponentFactory(i){throw function(e){const i=Error(`No component factory found for ${he(e)}. Did you add it to @NgModule.entryComponents?`);return i[t0]=e,i}(i)}}let Ef=(()=>{class e{}return e.NULL=new rD,e})();function Rm(...e){}function wf(e,i){return new Nc(j(e,i))}const sD=function(){return wf(Pi(),kt())};let Nc=(()=>{class e{constructor(a){this.nativeElement=a}}return e.__NG_ELEMENT_ID__=sD,e})();function n0(e){return e instanceof Nc?e.nativeElement:e}class xm{}let aD=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>lD(),e})();const lD=function(){const e=kt(),a=xt(Pi().index,e);return function(e){return e[X]}(Qr(a)?a:e)};let hy=(()=>{class e{}return e.\u0275prov=Cn({token:e,providedIn:"root",factory:()=>null}),e})();class r0{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const fy=new r0("12.2.9");class o0{constructor(){}supports(i){return Oh(i)}create(i){return new fD(i)}}const hD=(e,i)=>i;class fD{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||hD}forEachItem(i){let a;for(a=this._itHead;null!==a;a=a._next)i(a)}forEachOperation(i){let a=this._itHead,u=this._removalsHead,h=0,_=null;for(;a||u;){const b=!u||a&&a.currentIndex<a0(u,h,_)?a:u,T=a0(b,h,_),N=b.currentIndex;if(b===u)h--,u=u._nextRemoved;else if(a=a._next,null==b.previousIndex)h++;else{_||(_=[]);const z=T-h,re=N-h;if(z!=re){for(let Se=0;Se<z;Se++){const Be=Se<_.length?_[Se]:_[Se]=0,Qe=Be+Se;re<=Qe&&Qe<z&&(_[Se]=Be+1)}_[b.previousIndex]=re-z}}T!==N&&i(b,T,N)}}forEachPreviousItem(i){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)i(a)}forEachAddedItem(i){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)i(a)}forEachMovedItem(i){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)i(a)}forEachRemovedItem(i){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)i(a)}forEachIdentityChange(i){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)i(a)}diff(i){if(null==i&&(i=[]),!Oh(i))throw new Error(`Error trying to diff '${he(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let h,_,b,a=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let T=0;T<this.length;T++)_=i[T],b=this._trackByFn(T,_),null!==a&&Object.is(a.trackById,b)?(u&&(a=this._verifyReinsertion(a,_,b,T)),Object.is(a.item,_)||this._addIdentityChange(a,_)):(a=this._mismatch(a,_,b,T),u=!0),a=a._next}else h=0,function(e,i){if(Array.isArray(e))for(let a=0;a<e.length;a++)i(e[a]);else{const a=e[cd()]();let u;for(;!(u=a.next()).done;)i(u.value)}}(i,T=>{b=this._trackByFn(h,T),null!==a&&Object.is(a.trackById,b)?(u&&(a=this._verifyReinsertion(a,T,b,h)),Object.is(a.item,T)||this._addIdentityChange(a,T)):(a=this._mismatch(a,T,b,h),u=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,a,u,h){let _;return null===i?_=this._itTail:(_=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,a)||this._addIdentityChange(i,a),this._reinsertAfter(i,_,h)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(i.item,a)||this._addIdentityChange(i,a),this._moveAfter(i,_,h)):i=this._addAfter(new pD(a,u),_,h),i}_verifyReinsertion(i,a,u,h){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==_?i=this._reinsertAfter(_,i._prev,h):i.currentIndex!=h&&(i.currentIndex=h,this._addToMoves(i,h)),i}_truncate(i){for(;null!==i;){const a=i._next;this._addToRemovals(this._unlink(i)),i=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const h=i._prevRemoved,_=i._nextRemoved;return null===h?this._removalsHead=_:h._nextRemoved=_,null===_?this._removalsTail=h:_._prevRemoved=h,this._insertAfter(i,a,u),this._addToMoves(i,u),i}_moveAfter(i,a,u){return this._unlink(i),this._insertAfter(i,a,u),this._addToMoves(i,u),i}_addAfter(i,a,u){return this._insertAfter(i,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,a,u){const h=null===a?this._itHead:a._next;return i._next=h,i._prev=a,null===h?this._itTail=i:h._prev=i,null===a?this._itHead=i:a._next=i,null===this._linkedRecords&&(this._linkedRecords=new s0),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const a=i._prev,u=i._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,i}_addToMoves(i,a){return i.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new s0),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,a){return i.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class pD{constructor(i,a){this.item=i,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gD{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const a=i._prevDup,u=i._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class s0{constructor(){this.map=new Map}put(i){const a=i.trackById;let u=this.map.get(a);u||(u=new gD,this.map.set(a,u)),u.add(i)}get(i,a){const h=this.map.get(i);return h?h.get(i,a):null}remove(i){const a=i.trackById;return this.map.get(a).remove(i)&&this.map.delete(a),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function a0(e,i,a){const u=e.previousIndex;if(null===u)return u;let h=0;return a&&u<a.length&&(h=a[u]),u+i+h}class u0{constructor(){}supports(i){return i instanceof Map||wp(i)}create(){return new mD}}class mD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let a;for(a=this._mapHead;null!==a;a=a._next)i(a)}forEachPreviousItem(i){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)i(a)}forEachChangedItem(i){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)i(a)}forEachAddedItem(i){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)i(a)}forEachRemovedItem(i){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)i(a)}diff(i){if(i){if(!(i instanceof Map||wp(i)))throw new Error(`Error trying to diff '${he(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const _=this._getOrCreateRecordForKey(h,u);a=this._insertBeforeOrAppend(a,_)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,a){if(i){const u=i._prev;return a._next=i,a._prev=u,i._prev=a,u&&(u._next=a),i===this._mapHead&&(this._mapHead=a),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(i,a){if(this._records.has(i)){const h=this._records.get(i);this._maybeAddToChanges(h,a);const _=h._prev,b=h._next;return _&&(_._next=b),b&&(b._prev=_),h._next=null,h._prev=null,h}const u=new _D(i);return this._records.set(i,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,a){Object.is(a,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=a,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,a){i instanceof Map?i.forEach(a):Object.keys(i).forEach(u=>a(i[u],u))}}class _D{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function l0(){return new Pm([new o0])}let Pm=(()=>{class e{constructor(a){this.factories=a}static create(a,u){if(null!=u){const h=u.factories.slice();a=a.concat(h)}return new e(a)}static extend(a){return{provide:e,useFactory:u=>e.create(a,u||l0()),deps:[[e,new $s,new as]]}}find(a){const u=this.factories.find(h=>h.supports(a));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(e){return e.name||typeof e}(a)}'`)}}return e.\u0275prov=Cn({token:e,providedIn:"root",factory:l0}),e})();function c0(){return new Fm([new u0])}let Fm=(()=>{class e{constructor(a){this.factories=a}static create(a,u){if(u){const h=u.factories.slice();a=a.concat(h)}return new e(a)}static extend(a){return{provide:e,useFactory:u=>e.create(a,u||c0()),deps:[[e,new $s,new as]]}}find(a){const u=this.factories.find(h=>h.supports(a));if(u)return u;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return e.\u0275prov=Cn({token:e,providedIn:"root",factory:c0}),e})();function Nm(e,i,a,u,h=!1){for(;null!==a;){const _=i[a.index];if(null!==_&&u.push(De(_)),Or(_))for(let T=10;T<_.length;T++){const N=_[T],z=N[1].firstChild;null!==z&&Nm(N[1],N,z,u)}const b=a.type;if(8&b)Nm(e,i,a.child,u);else if(32&b){const T=nu(a,i);let N;for(;N=T();)u.push(N)}else if(16&b){const T=Na(i,a);if(Array.isArray(T))u.push(...T);else{const N=ha(i[16]);Nm(N[1],N,T,u,!0)}}a=h?a.projectionNext:a.next}return u}class Lp{constructor(i,a){this._lView=i,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,a=i[1];return Nm(a,i,a.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Or(i)){const a=i[8],u=a?a.indexOf(this):-1;u>-1&&(G(i,u),So(a,u))}this._attachedToViewContainer=!1}c(this._lView[1],this._lView)}onDestroy(i){Ag(this._lView[1],this._lView,null,i)}markForCheck(){Th(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Mc(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,i,a){Ce(!0);try{Mc(e,i,a)}finally{Ce(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,su(this._lView[1],i=this._lView,i[X],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class vD extends Lp{constructor(i){super(i),this._view=i}detectChanges(){ip(this._view)}checkNoChanges(){!function(e){Ce(!0);try{ip(e)}finally{Ce(!1)}}(this._view)}get context(){return null}}const CD=function(e){return function(e,i,a){if(fi(e)&&!a){const u=xt(e.index,i);return new Lp(u,u)}return 47&e.type?new Lp(i[16],i):null}(Pi(),kt(),16==(16&e))};let ED=(()=>{class e{}return e.__NG_ELEMENT_ID__=CD,e})();const TD=[new u0],AD=new Pm([new o0]),ID=new Fm(TD),OD=function(){return km(Pi(),kt())};let Vp=(()=>{class e{}return e.__NG_ELEMENT_ID__=OD,e})();const RD=Vp,xD=class extends RD{constructor(i,a,u){super(),this._declarationLView=i,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(i){const a=this._declarationTContainer.tViews,u=Ud(this._declarationLView,a,i,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(u[19]=_.createEmbeddedView(a)),jd(a,u,i),new Lp(u)}};function km(e,i){return 4&e.type?new xD(i,e,wf(e,i)):null}class Fh{}class d0{}const ND=function(){return p0(Pi(),kt())};let Lm=(()=>{class e{}return e.__NG_ELEMENT_ID__=ND,e})();const LD=Lm,h0=class extends LD{constructor(i,a,u){super(),this._lContainer=i,this._hostTNode=a,this._hostLView=u}get element(){return wf(this._hostTNode,this._hostLView)}get injector(){return new Ze(this._hostTNode,this._hostLView)}get parentInjector(){const i=Kn(this._hostTNode,this._hostLView);if(ra(i)){const a=Ha(i,this._hostLView),u=ja(i);return new Ze(a[1].data[u+8],a)}return new Ze(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const a=f0(this._lContainer);return null!==a&&a[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,a,u){const h=i.createEmbeddedView(a||{});return this.insert(h,u),h}createComponent(i,a,u,h,_){const b=u||this.parentInjector;if(!_&&null==i.ngModule&&b){const N=b.get(Fh,null);N&&(_=N)}const T=i.create(b,h,void 0,_);return this.insert(T.hostView,a),T}insert(i,a){const u=i._lView,h=u[1];if(Or(u[3])){const re=this.indexOf(i);if(-1!==re)this.detach(re);else{const me=u[3],Se=new h0(me,me[6],me[3]);Se.detach(Se.indexOf(i))}}const _=this._adjustIndex(a),b=this._lContainer;!function(e,i,a,u){const h=10+u,_=a.length;u>0&&(a[h-1][4]=i),u<_-10?(i[4]=a[h],qs(a,10+u,i)):(a.push(i),i[4]=null),i[3]=a;const b=i[17];null!==b&&a!==b&&function(e,i){const a=e[9];i[16]!==i[3][3][16]&&(e[2]=!0),null===a?e[9]=[i]:a.push(i)}(b,i);const T=i[19];null!==T&&T.insertView(e),i[2]|=128}(h,u,b,_);const T=Hl(_,b),N=u[X],z=ke(N,b[7]);return null!==z&&function(e,i,a,u,h,_){u[0]=h,u[6]=i,su(e,u,a,1,h,_)}(h,b[6],N,u,z,T),i.attachToViewContainerRef(),qs(py(b),_,i),i}move(i,a){return this.insert(i,a)}indexOf(i){const a=f0(this._lContainer);return null!==a?a.indexOf(i):-1}remove(i){const a=this._adjustIndex(i,-1),u=G(this._lContainer,a);u&&(So(py(this._lContainer),a),c(u[1],u))}detach(i){const a=this._adjustIndex(i,-1),u=G(this._lContainer,a);return u&&null!=So(py(this._lContainer),a)?new Lp(u):null}_adjustIndex(i,a=0){return null==i?this.length+a:i}};function f0(e){return e[8]}function py(e){return e[8]||(e[8]=[])}function p0(e,i){let a;const u=i[e.index];if(Or(u))a=u;else{let h;if(8&e.type)h=De(u);else{const _=i[X];h=_.createComment("");const b=j(e,i);W(_,ke(_,b),h,function(e,i){return x(e)?e.nextSibling(i):i.nextSibling}(_,b),!1)}i[e.index]=a=Vg(u,i,h,e),Dh(i,a)}return new h0(a,e,i)}const Af={};class F0 extends Ef{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const a=Nr(i);return new k0(a,this.ngModule)}}function N0(e){const i=[];for(let a in e)e.hasOwnProperty(a)&&i.push({propName:e[a],templateName:a});return i}const PT=new Mi("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ml});class k0 extends Xb{constructor(i,a){super(),this.componentDef=i,this.ngModule=a,this.componentType=i.type,this.selector=i.selectors.map(Bf).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return N0(this.componentDef.inputs)}get outputs(){return N0(this.componentDef.outputs)}create(i,a,u,h){const _=(h=h||this.ngModule)?function(e,i){return{get:(a,u,h)=>{const _=e.get(a,Af,h);return _!==Af||u===Af?_:i.get(a,u,h)}}}(i,h.injector):i,b=_.get(xm,k),T=_.get(hy,null),N=b.createRenderer(null,this.componentDef),z=this.componentDef.selectors[0][0]||"div",re=u?function(e,i,a){if(x(e))return e.selectRootElement(i,a===Ot.ShadowDom);let u="string"==typeof i?e.querySelector(i):i;return u.textContent="",u}(N,u,this.componentDef.encapsulation):Fd(b.createRenderer(null,this.componentDef),z,function(e){const i=e.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(z)),me=this.componentDef.onPush?576:528,Se=function(e,i){return{components:[],scheduler:e||ml,clean:Hg,playerHandler:i||null,flags:0}}(),Be=ef(0,null,null,1,0,null,null,null,null,null),Qe=Ud(null,Be,Se,me,null,null,b,N,T,_);let Ct,ft;Oo(Qe);try{const Kt=function(e,i,a,u,h,_){const b=a[1];a[20]=e;const N=Bd(b,20,2,"#host",null),z=N.mergedAttrs=i.hostAttrs;null!==z&&(zd(N,z,!0),null!==e&&(Da(h,e,z),null!==N.classes&&Lf(h,e,N.classes),null!==N.styles&&og(h,e,N.styles)));const re=u.createRenderer(e,i),me=Ud(a,Dg(i),null,i.onPush?64:16,a[20],N,u,re,_||null,null);return b.firstCreatePass&&(un(Cs(N,a),b,i.type),Fg(b,N),Ng(N,a.length,1)),Dh(a,me),a[20]=me}(re,this.componentDef,Qe,b,N);if(re)if(u)Da(N,re,["ng-version",fy.full]);else{const{attrs:Ft,classes:Jn}=function(e){const i=[],a=[];let u=1,h=2;for(;u<e.length;){let _=e[u];if("string"==typeof _)2===h?""!==_&&i.push(_,e[++u]):8===h&&a.push(_);else{if(!Hu(h))break;h=_}u++}return{attrs:i,classes:a}}(this.componentDef.selectors[0]);Ft&&Da(N,re,Ft),Jn&&Jn.length>0&&Lf(N,re,Jn.join(" "))}if(ft=ue(Be,20),void 0!==a){const Ft=ft.projection=[];for(let Jn=0;Jn<this.ngContentSelectors.length;Jn++){const vr=a[Jn];Ft.push(null!=vr?Array.from(vr):null)}}Ct=function(e,i,a,u,h){const _=a[1],b=function(e,i,a){const u=Pi();e.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),np(e,u,i,td(e,i,1,null),a));const h=Z(i,e,u.directiveStart,u);Di(h,i);const _=j(u,i);return _&&Di(_,i),h}(_,a,i);if(u.components.push(b),e[8]=b,h&&h.forEach(N=>N(b,i)),i.contentQueries){const N=Pi();i.contentQueries(1,b,N.directiveStart)}const T=Pi();return!_.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Wi(T.index),Og(a[1],T,0,T.directiveStart,T.directiveEnd,i),Pg(i,b)),b}(Kt,this.componentDef,Qe,Se,[am]),jd(Be,Qe,null)}finally{Ni()}return new kT(this.componentType,Ct,wf(ft,Qe),Qe,ft)}}class kT extends class{}{constructor(i,a,u,h,_){super(),this.location=u,this._rootLView=h,this._tNode=_,this.instance=a,this.hostView=this.changeDetectorRef=new vD(h),this.componentType=i}get injector(){return new Ze(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const If=new Map;class UT extends Fh{constructor(i,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new F0(this);const u=Vr(i),h=i[zt]||null;h&&iy(h),this._bootstrapComponents=Xs(u.bootstrap),this._r3Injector=sp(i,a,[{provide:Fh,useValue:this},{provide:Ef,useValue:this.componentFactoryResolver}],he(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,a=Co.THROW_IF_NOT_FOUND,u=Qt.Default){return i===Co||i===Fh||i===ql?this:this._r3Injector.get(i,a,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Ay extends d0{constructor(i){super(),this.moduleType=i,null!==Vr(i)&&function(e){const i=new Set;!function a(u){const h=Vr(u,!0),_=h.id;null!==_&&(function(e,i,a){if(i&&i!==a)throw new Error(`Duplicate module registered for ${e} - ${he(i)} vs ${he(i.name)}`)}(_,If.get(_),u),If.set(_,u));const b=Xs(h.imports);for(const T of b)i.has(T)||(i.add(T),a(T))}(e)}(i)}create(i){return new UT(this.moduleType,i)}}function U0(e,i,a){const u=Fe()+e,h=kt();return h[u]===yr?qu(h,u,a?i.call(a):i()):function(e,i){return e[i]}(h,u)}function B0(e,i,a,u){return function(e,i,a,u,h,_){const b=i+a;return cs(e,b,h)?qu(e,b+1,_?u.call(_,h):u(h)):Zp(e,b+1)}(kt(),Fe(),e,i,a,u)}function j0(e,i,a,u,h,_){return function(e,i,a,u,h,_,b,T){const N=i+a;return function(e,i,a,u,h){const _=ka(e,i,a,u);return cs(e,i+2,h)||_}(e,N,h,_,b)?qu(e,N+3,T?u.call(T,h,_,b):u(h,_,b)):Zp(e,N+3)}(kt(),Fe(),e,i,a,u,h,_)}function Zp(e,i){const a=e[i];return a===yr?void 0:a}function $0(e,i){const a=_r();let u;const h=e+20;a.firstCreatePass?(u=function(e,i){if(i)for(let a=i.length-1;a>=0;a--){const u=i[a];if(e===u.name)return u}throw new Ue("302",`The pipe '${e}' could not be found!`)}(i,a.pipeRegistry),a.data[h]=u,u.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,u.onDestroy)):u=a.data[h];const _=u.factory||(u.factory=kr(u.type)),b=$n(Rp);try{const T=_t(!1),N=_();return _t(T),function(e,i,a,u){a>=e.data.length&&(e.data[a]=null,e.blueprint[a]=null),i[a]=u}(a,kt(),h,N),N}finally{$n(b)}}function W0(e,i,a,u){const h=e+20,_=kt(),b=We(_,h);return function(e,i){uu.isWrapped(i)&&(i=uu.unwrap(i),e[Le()]=yr);return i}(_,function(e,i){return e[1].data[i].pure}(_,h)?function(e,i,a,u,h,_,b){const T=i+a;return ka(e,T,h,_)?qu(e,T+2,b?u.call(b,h,_):u(h,_)):Zp(e,T+2)}(_,Fe(),i,b.transform,a,u,b):b.transform(a,u))}function Iy(e){return i=>{setTimeout(e,void 0,i)}}const kc=class extends P.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,a,u){var h,_,b;let T=i,N=a||(()=>null),z=u;if(i&&"object"==typeof i){const me=i;T=null===(h=me.next)||void 0===h?void 0:h.bind(me),N=null===(_=me.error)||void 0===_?void 0:_.bind(me),z=null===(b=me.complete)||void 0===b?void 0:b.bind(me)}this.__isAsync&&(N=Iy(N),T&&(T=Iy(T)),z&&(z=Iy(z)));const re=super.subscribe({next:T,error:N,complete:z});return i instanceof g.w&&i.add(re),re}};function XT(){return this._results[cd()]()}class Yp{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=cd(),u=Yp.prototype;u[a]||(u[a]=XT)}get changes(){return this._changes||(this._changes=new kc)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,a){return this._results.reduce(i,a)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,a){const u=this;u.dirty=!1;const h=Ko(i);(this._changesDetected=!function(e,i,a){if(e.length!==i.length)return!1;for(let u=0;u<e.length;u++){let h=e[u],_=i[u];if(a&&(h=a(h),_=a(_)),_!==h)return!1}return!0}(u._results,h,a))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class My{constructor(i){this.queryList=i,this.matches=null}clone(){return new My(this.queryList)}setDirty(){this.queryList.setDirty()}}class Oy{constructor(i=[]){this.queries=i}createEmbeddedView(i){const a=i.queries;if(null!==a){const u=null!==i.contentQueries?i.contentQueries[0]:a.length,h=[];for(let _=0;_<u;_++){const b=a.getByIndex(_);h.push(this.queries[b.indexInDeclarationView].clone())}return new Oy(h)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let a=0;a<this.queries.length;a++)null!==rC(i,a).matches&&this.queries[a].setDirty()}}class Y0{constructor(i,a,u=null){this.predicate=i,this.flags=a,this.read=u}}class Ry{constructor(i=[]){this.queries=i}elementStart(i,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,a)}elementEnd(i){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(i)}embeddedTView(i){let a=null;for(let u=0;u<this.length;u++){const h=null!==a?a.length:0,_=this.getByIndex(u).embeddedTView(i,h);_&&(_.indexInDeclarationView=u,null!==a?a.push(_):a=[_])}return null!==a?new Ry(a):null}template(i,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,a)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class xy{constructor(i,a=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(i,a){this.isApplyingToNode(a)&&this.matchTNode(i,a)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,a){this.elementStart(i,a)}embeddedTView(i,a){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,a),new xy(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const _=u[h];this.matchTNodeWithReadOption(i,a,nS(a,_)),this.matchTNodeWithReadOption(i,a,O(a,i,_,!1,!1))}else u===Vp?4&a.type&&this.matchTNodeWithReadOption(i,a,-1):this.matchTNodeWithReadOption(i,a,O(a,i,u,!1,!1))}matchTNodeWithReadOption(i,a,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===Nc||h===Lm||h===Vp&&4&a.type)this.addMatch(a.index,-2);else{const _=O(a,i,h,!1,!1);null!==_&&this.addMatch(a.index,_)}else this.addMatch(a.index,u)}}addMatch(i,a){null===this.matches?this.matches=[i,a]:this.matches.push(i,a)}}function nS(e,i){const a=e.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===i)return a[u+1];return null}function iS(e,i,a,u){return-1===a?function(e,i){return 11&e.type?wf(e,i):4&e.type?km(e,i):null}(i,e):-2===a?function(e,i,a){return a===Nc?wf(i,e):a===Vp?km(i,e):a===Lm?p0(i,e):void 0}(e,i,u):Z(e,e[1],a,i)}function K0(e,i,a,u){const h=i[19].queries[u];if(null===h.matches){const _=e.data,b=a.matches,T=[];for(let N=0;N<b.length;N+=2){const z=b[N];T.push(z<0?null:iS(i,_[z],b[N+1],a.metadata.read))}h.matches=T}return h.matches}function Py(e,i,a,u){const h=e.queries.getByIndex(a),_=h.matches;if(null!==_){const b=K0(e,i,h,a);for(let T=0;T<_.length;T+=2){const N=_[T];if(N>0)u.push(b[T/2]);else{const z=_[T+1],re=i[-N];for(let me=10;me<re.length;me++){const Se=re[me];Se[17]===Se[3]&&Py(Se[1],Se,z,u)}if(null!==re[9]){const me=re[9];for(let Se=0;Se<me.length;Se++){const Be=me[Se];Py(Be[1],Be,z,u)}}}}}return u}function Q0(e){const i=kt(),a=_r(),u=si();Ur(u+1);const h=rC(a,u);if(e.dirty&&wn(i)===(2==(2&h.metadata.flags))){if(null===h.matches)e.reset([]);else{const _=h.crossesNgTemplate?Py(a,i,u,[]):K0(a,i,h,u);e.reset(_,n0),e.notifyOnChanges()}return!0}return!1}function J0(e,i,a){const u=_r();u.firstCreatePass&&(nC(u,new Y0(e,i,a),-1),2==(2&i)&&(u.staticViewQueries=!0)),tC(u,kt(),i)}function X0(e,i,a,u){const h=_r();if(h.firstCreatePass){const _=Pi();nC(h,new Y0(i,a,u),_.index),function(e,i){const a=e.contentQueries||(e.contentQueries=[]);i!==(a.length?a[a.length-1]:-1)&&a.push(e.queries.length-1,i)}(h,e),2==(2&a)&&(h.staticContentQueries=!0)}tC(h,kt(),a)}function eC(){return e=kt(),i=si(),e[19].queries[i].queryList;var e,i}function tC(e,i,a){const u=new Yp(4==(4&a));Ag(e,i,u,u.destroy),null===i[19]&&(i[19]=new Oy),i[19].queries.push(new My(u))}function nC(e,i,a){null===e.queries&&(e.queries=new Ry),e.queries.track(new xy(i,a))}function rC(e,i){return e.queries.getByIndex(i)}const Uy=new Mi("Application Initializer");let Of=(()=>{class e{constructor(a){this.appInits=a,this.resolve=Rm,this.reject=Rm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const _=this.appInits[h]();if(Z_(_))a.push(_);else if($_(_)){const b=new Promise((T,N)=>{_.subscribe({complete:T,error:N})});a.push(b)}}Promise.all(a).then(()=>{u()}).catch(h=>{this.reject(h)}),0===a.length&&u(),this.initialized=!0}}return e.\u0275fac=function(a){return new(a||e)(mi(Uy,8))},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})();const CC=new Mi("AppId"),NS={provide:CC,useFactory:function(){return`${By()}${By()}${By()}`},deps:[]};function By(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const EC=new Mi("Platform Initializer"),wC=new Mi("Platform ID"),DC=new Mi("appBootstrapListener");let TC=(()=>{class e{log(a){console.log(a)}warn(a){console.warn(a)}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})();const zm=new Mi("LocaleId"),SC=new Mi("DefaultCurrencyCode");class LS{constructor(i,a){this.ngModuleFactory=i,this.componentFactories=a}}const jy=function(e){return new Ay(e)},VS=jy,US=function(e){return Promise.resolve(jy(e))},AC=function(e){const i=jy(e),u=Xs(Vr(e).declarations).reduce((h,_)=>{const b=Nr(_);return b&&h.push(new k0(b)),h},[]);return new LS(i,u)},BS=AC,jS=function(e){return Promise.resolve(AC(e))};let Qp=(()=>{class e{constructor(){this.compileModuleSync=VS,this.compileModuleAsync=US,this.compileModuleAndAllComponentsSync=BS,this.compileModuleAndAllComponentsAsync=jS}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})();const zS=(()=>Promise.resolve(0))();function Hy(e){"undefined"==typeof Zone?zS.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Zu{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kc(!1),this.onMicrotaskEmpty=new kc(!1),this.onStable=new kc(!1),this.onError=new kc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&a,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let e=Ut.requestAnimationFrame,i=Ut.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&i){const a=e[Zone.__symbol__("OriginalDelegate")];a&&(e=a);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(e){const i=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ut,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,zy(e),e.isCheckStableRunning=!0,Gy(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),zy(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,h,_,b,T)=>{try{return IC(e),a.invokeTask(h,_,b,T)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||e.shouldCoalesceRunChangeDetection)&&i(),MC(e)}},onInvoke:(a,u,h,_,b,T,N)=>{try{return IC(e),a.invoke(h,_,b,T,N)}finally{e.shouldCoalesceRunChangeDetection&&i(),MC(e)}},onHasTask:(a,u,h,_)=>{a.hasTask(h,_),u===h&&("microTask"==_.change?(e._hasPendingMicrotasks=_.microTask,zy(e),Gy(e)):"macroTask"==_.change&&(e.hasPendingMacrotasks=_.macroTask))},onHandleError:(a,u,h,_)=>(a.handleError(h,_),e.runOutsideAngular(()=>e.onError.emit(_)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Zu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,a,u){return this._inner.run(i,a,u)}runTask(i,a,u,h){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+h,i,ZS,Rm,Rm);try{return _.runTask(b,a,u)}finally{_.cancelTask(b)}}runGuarded(i,a,u){return this._inner.runGuarded(i,a,u)}runOutsideAngular(i){return this._outer.run(i)}}const ZS={};function Gy(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function zy(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function IC(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function MC(e){e._nesting--,Gy(e)}class YS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kc,this.onMicrotaskEmpty=new kc,this.onStable=new kc,this.onError=new kc}run(i,a,u){return i.apply(a,u)}runGuarded(i,a,u){return i.apply(a,u)}runOutsideAngular(i){return i()}runTask(i,a,u,h){return i.apply(a,u)}}let OC=(()=>{class e{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zu.assertNotInAngularZone(),Hy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hy(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,h){let _=-1;u&&u>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:_,updateCb:h})}whenStable(a,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,h){return[]}}return e.\u0275fac=function(a){return new(a||e)(mi(Zu))},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})(),RC=(()=>{class e{constructor(){this._applications=new Map,qy.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return qy.findTestabilityInTree(this,a,u)}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})();class KS{addToWindow(i){}findTestabilityInTree(i,a,u){return null}}function QS(e){qy=e}let qy=new KS,xC=!0,PC=!1;function Zy(){return PC=!0,xC}function JS(){if(PC)throw new Error("Cannot enable prod mode after platform setup.");xC=!1}let ec;const FC=new Mi("AllowMultipleToken");class oA{constructor(i,a){this.name=i,this.token=a}}function NC(e,i,a=[]){const u=`Platform: ${i}`,h=new Mi(u);return(_=[])=>{let b=kC();if(!b||b.injector.get(FC,!1))if(e)e(a.concat(_).concat({provide:h,useValue:!0}));else{const T=a.concat(_).concat({provide:h,useValue:!0},{provide:qd,useValue:"platform"});!function(e){if(ec&&!ec.destroyed&&!ec.injector.get(FC,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ec=e.get(LC);const i=e.get(EC,null);i&&i.forEach(a=>a())}(Co.create({providers:T,name:u}))}return function(e){const i=kC();if(!i)throw new Error("No platform exists!");if(!i.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(h)}}function kC(){return ec&&!ec.destroyed?ec:null}let LC=(()=>{class e{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const T=function(e,i){let a;return a="noop"===e?new YS:("zone.js"===e?void 0:e)||new Zu({enableLongStackTrace:Zy(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),N=[{provide:Zu,useValue:T}];return T.run(()=>{const z=Co.create({providers:N,parent:this.injector,name:a.moduleType.name}),re=a.create(z),me=re.injector.get(fl,null);if(!me)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return T.runOutsideAngular(()=>{const Se=T.onError.subscribe({next:Be=>{me.handleError(Be)}});re.onDestroy(()=>{$y(this._modules,re),Se.unsubscribe()})}),function(e,i,a){try{const u=a();return Z_(u)?u.catch(h=>{throw i.runOutsideAngular(()=>e.handleError(h)),h}):u}catch(u){throw i.runOutsideAngular(()=>e.handleError(u)),u}}(me,T,()=>{const Se=re.injector.get(Of);return Se.runInitializers(),Se.donePromise.then(()=>(iy(re.injector.get(zm,Sm)||Sm),this._moduleDoBootstrap(re),re))})})}bootstrapModule(a,u=[]){const h=VC({},u);return function(e,i,a){const u=new Ay(a);return Promise.resolve(u)}(0,0,a).then(_=>this.bootstrapModuleFactory(_,h))}_moduleDoBootstrap(a){const u=a.injector.get(Jp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${he(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(a){return new(a||e)(mi(Co))},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})();function VC(e,i){return Array.isArray(i)?i.reduce(VC,e):Object.assign(Object.assign({},e),i)}let Jp=(()=>{class e{constructor(a,u,h,_,b){this._zone=a,this._injector=u,this._exceptionHandler=h,this._componentFactoryResolver=_,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const T=new J.y(z=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{z.next(this._stable),z.complete()})}),N=new J.y(z=>{let re;this._zone.runOutsideAngular(()=>{re=this._zone.onStable.subscribe(()=>{Zu.assertNotInAngularZone(),Hy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,z.next(!0))})})});const me=this._zone.onUnstable.subscribe(()=>{Zu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{z.next(!1)}))});return()=>{re.unsubscribe(),me.unsubscribe()}});this.isStable=(0,C.T)(T,N.pipe((0,Ve.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=a instanceof Xb?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(h.componentType);const _=function(e){return e.isBoundToModule}(h)?void 0:this._injector.get(Fh),T=h.create(Co.NULL,[],u||h.selector,_),N=T.location.nativeElement,z=T.injector.get(OC,null),re=z&&T.injector.get(RC);return z&&re&&re.registerApplication(N,z),T.onDestroy(()=>{this.detachView(T.hostView),$y(this.components,T),re&&re.unregisterApplication(N)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;$y(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(DC,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(a){return new(a||e)(mi(Zu),mi(Co),mi(fl),mi(Ef),mi(Of))},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})();function $y(e,i){const a=e.indexOf(i);a>-1&&e.splice(a,1)}class dA{}class fA{}const pA={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let gA=(()=>{class e{constructor(a,u){this._compiler=a,this._config=u||pA}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[u,h]=a.split("#");return void 0===h&&(h="default"),K(8255)(u).then(_=>_[h]).then(_=>HC(_,u,h)).then(_=>this._compiler.compileModuleAsync(_))}loadFactory(a){let[u,h]=a.split("#"),_="NgFactory";return void 0===h&&(h="default",_=""),K(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(b=>b[h+_]).then(b=>HC(b,u,h))}}return e.\u0275fac=function(a){return new(a||e)(mi(Qp),mi(fA,8))},e.\u0275prov=Cn({token:e,factory:e.\u0275fac}),e})();function HC(e,i,a){if(!e)throw new Error(`Cannot find '${a}' in '${i}'`);return e}const wA=function(e){return null},TA=NC(null,"core",[{provide:wC,useValue:"unknown"},{provide:LC,deps:[Co]},{provide:RC,deps:[]},{provide:TC,deps:[]}]),OA=[{provide:Jp,useClass:Jp,deps:[Zu,Co,fl,Ef,Of]},{provide:PT,deps:[Zu],useFactory:function(e){let i=[];return e.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(a){i.push(a)}}},{provide:Of,useClass:Of,deps:[[new as,Uy]]},{provide:Qp,useClass:Qp,deps:[]},NS,{provide:Pm,useFactory:function(){return AD},deps:[]},{provide:Fm,useFactory:function(){return ID},deps:[]},{provide:zm,useFactory:function(e){return iy(e=e||"undefined"!=typeof $localize&&$localize.locale||Sm),e},deps:[[new Tu(zm),new as,new $s]]},{provide:SC,useValue:"USD"}];let xA=(()=>{class e{constructor(a){}}return e.\u0275fac=function(a){return new(a||e)(mi(Jp))},e.\u0275mod=xi({type:e}),e.\u0275inj=zn({providers:OA}),e})()},9829:(Ht,it,K)=>{"use strict";K.d(it,{zQ:()=>Rt,Qv:()=>Ke});var P=K(7716),g=K(9765),J=K(5917),C=K(7574),Ve=K(4402),we=K(6682),Ne=K(3190);function he(Dt,Je){return Je?(0,Ne.w)(()=>Dt,Je):(0,Ne.w)(()=>Dt)}var be=K(309),se=K(8002),Ae=K(2066),ge=K(8049),Ee=K(9673),Oe=K(5435),Ue=K(57),Xe=K(8583);const Ke=new P.OlP("angularfire2.auth.use-emulator"),At=new P.OlP("angularfire2.auth.settings"),On=new P.OlP("angularfire2.auth.tenant-id"),Lt=new P.OlP("angularfire2.auth.langugage-code"),ct=new P.OlP("angularfire2.auth.use-device-language"),$t=new P.OlP("angularfire.auth.persistence");let Rt=(()=>{class Dt{constructor(ot,st,nt,vt,at,tn,ln,Tn,sn,jt){const Nt=new Ue.HU(vt),Jt=(0,Ue.ss)(Nt),Gt=new g.xQ,Fn=(0,J.of)(void 0).pipe((0,be.QV)(Nt.outsideAngular),(0,Ne.w)(()=>vt.runOutsideAngular(()=>K.e(336).then(K.bind(K,1336)))),(0,se.U)(()=>(0,Ue.on)(ot,vt,st)),(0,se.U)(Cn=>vt.runOutsideAngular(()=>{const sr=at,zn=tn;return(0,Ue.sI)(`${Cn.name}.auth`,"AngularFireAuth",Cn,()=>{const Bn=vt.runOutsideAngular(()=>Cn.auth());if(sr&&Bn.useEmulator(`http://${sr.join(":")}`),ln&&(Bn.tenantId=ln),Bn.languageCode=Tn,sn&&Bn.useDeviceLanguage(),zn)for(const[Xn,Sn]of Object.entries(zn))Bn.settings[Xn]=Sn;return jt&&Bn.setPersistence(jt),Bn},[sr,ln,Tn,sn,zn,jt])})),(0,Ae.d)({bufferSize:1,refCount:!1}));if((0,Xe.PM)(nt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,J.of)(null);else{Fn.pipe((0,ge.P)()).subscribe();const sr=Fn.pipe((0,Ne.w)(Sn=>Sn.getRedirectResult().then(An=>An,()=>null)),Jt,(0,Ae.d)({bufferSize:1,refCount:!1})),zn=Sn=>new C.y(An=>({unsubscribe:vt.runOutsideAngular(()=>Sn(An))})),Bn=Fn.pipe((0,Ne.w)(Sn=>zn(Sn.onAuthStateChanged.bind(Sn)))),Xn=Fn.pipe((0,Ne.w)(Sn=>zn(Sn.onIdTokenChanged.bind(Sn))));this.authState=sr.pipe(he(Bn),(0,Ee.R)(Nt.outsideAngular),(0,be.QV)(Nt.insideAngular)),this.user=sr.pipe(he(Xn),(0,Ee.R)(Nt.outsideAngular),(0,be.QV)(Nt.insideAngular)),this.idToken=this.user.pipe((0,Ne.w)(Sn=>Sn?(0,Ve.D)(Sn.getIdToken()):(0,J.of)(null))),this.idTokenResult=this.user.pipe((0,Ne.w)(Sn=>Sn?(0,Ve.D)(Sn.getIdTokenResult()):(0,J.of)(null))),this.credential=(0,we.T)(sr,Gt,this.authState.pipe((0,Oe.h)(Sn=>!Sn))).pipe((0,se.U)(Sn=>(null==Sn?void 0:Sn.user)?Sn:null),(0,Ee.R)(Nt.outsideAngular),(0,be.QV)(Nt.insideAngular))}return(0,Ue.pX)(this,Fn,vt,{spy:{apply:(Cn,sr,zn)=>{(Cn.startsWith("signIn")||Cn.startsWith("createUser"))&&zn.then(Bn=>Gt.next(Bn))}}})}}return Dt.\u0275fac=function(ot){return new(ot||Dt)(P.LFG(Ue.Dh),P.LFG(Ue.xv,8),P.LFG(P.Lbi),P.LFG(P.R0b),P.LFG(Ke,8),P.LFG(At,8),P.LFG(On,8),P.LFG(Lt,8),P.LFG(ct,8),P.LFG($t,8))},Dt.\u0275prov=P.Yz7({factory:function(){return new Dt(P.LFG(Ue.Dh),P.LFG(Ue.xv,8),P.LFG(P.Lbi),P.LFG(P.R0b),P.LFG(Ke,8),P.LFG(At,8),P.LFG(On,8),P.LFG(Lt,8),P.LFG(ct,8),P.LFG($t,8))},token:Dt,providedIn:"any"}),Dt})()},9351:(Ht,it,K)=>{"use strict";K.d(it,{Q1:()=>Lr,TE:()=>os});var P=K(7574),g=K(5917),J=K(4402),C=K(4395),Ve=K(8002),we=K(309),Ne=K(3190),he=K(7716),be=K(57),se=K(9759),Ae=K(4762),ge=K(4685),Ee=K(6034),Oe="firebasestorage.googleapis.com",Ue="storageBucket",Ke=function(Y){function q(pe,x){var $=Y.call(this,At(pe),"Firebase Storage: "+x+" ("+At(pe)+")")||this;return $.customData={serverResponse:null},$._baseMessage=$.message,Object.setPrototypeOf($,q.prototype),$}return(0,Ae.ZT)(q,Y),q.prototype._codeEquals=function(pe){return At(pe)===this.code},Object.defineProperty(q.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(pe){this.customData.serverResponse=pe,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),q}(ge.ZR);function At(Y){return"storage/"+Y}function On(){return new Ke("unknown","An unknown error occurred, please check the error payload for server response.")}function Je(){return new Ke("canceled","User canceled the upload/download.")}function vt(){return new Ke("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ln(Y){return new Ke("invalid-argument",Y)}function Tn(){return new Ke("app-deleted","The Firebase app was deleted.")}function sn(Y){return new Ke("invalid-root-operation","The operation '"+Y+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jt(Y,q){return new Ke("invalid-format","String does not match format '"+Y+"': "+q)}function Nt(Y){throw new Ke("internal-error","Internal error: "+Y)}var Gt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Fn=function(q,pe){this.data=q,this.contentType=pe||null};function Cn(Y,q){switch(Y){case Gt.RAW:return new Fn(sr(q));case Gt.BASE64:case Gt.BASE64URL:return new Fn(Bn(Y,q));case Gt.DATA_URL:return new Fn(function(Y){var q=new Xn(Y);return q.base64?Bn(Gt.BASE64,q.rest):function(Y){var q;try{q=decodeURIComponent(Y)}catch(pe){throw jt(Gt.DATA_URL,"Malformed data URL.")}return sr(q)}(q.rest)}(q),function(Y){return new Xn(Y).contentType}(q))}throw On()}function sr(Y){for(var q=[],pe=0;pe<Y.length;pe++){var x=Y.charCodeAt(pe);if(x<=127)q.push(x);else if(x<=2047)q.push(192|x>>6,128|63&x);else if(55296==(64512&x))if(pe<Y.length-1&&56320==(64512&Y.charCodeAt(pe+1))){var k=x,ee=Y.charCodeAt(++pe);q.push(240|(x=65536|(1023&k)<<10|1023&ee)>>18,128|x>>12&63,128|x>>6&63,128|63&x)}else q.push(239,191,189);else 56320==(64512&x)?q.push(239,191,189):q.push(224|x>>12,128|x>>6&63,128|63&x)}return new Uint8Array(q)}function Bn(Y,q){switch(Y){case Gt.BASE64:var pe=-1!==q.indexOf("-"),x=-1!==q.indexOf("_");if(pe||x)throw jt(Y,"Invalid character '"+(pe?"-":"_")+"' found: is it base64url encoded?");break;case Gt.BASE64URL:var k=-1!==q.indexOf("+"),ee=-1!==q.indexOf("/");if(k||ee)throw jt(Y,"Invalid character '"+(k?"+":"/")+"' found: is it base64 encoded?");q=q.replace(/-/g,"+").replace(/_/g,"/")}var De;try{De=function(Y){return atob(Y)}(q)}catch(H){throw jt(Y,"Invalid character found")}for(var je=new Uint8Array(De.length),rt=0;rt<De.length;rt++)je[rt]=De.charCodeAt(rt);return je}var Xn=function(q){this.base64=!1,this.contentType=null;var pe=q.match(/^data:([^,]+)?,/);if(null===pe)throw jt(Gt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var x=pe[1]||null;null!=x&&(this.base64=function(Y,q){return Y.length>=q.length&&Y.substring(Y.length-q.length)===q}(x,";base64"),this.contentType=this.base64?x.substring(0,x.length-";base64".length):x),this.rest=q.substring(q.indexOf(",")+1)},Yt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function jn(Y){switch(Y){case"running":case"pausing":case"canceling":return Yt.RUNNING;case"paused":return Yt.PAUSED;case"success":return Yt.SUCCESS;case"canceled":return Yt.CANCELED;case"error":default:return Yt.ERROR}}var Vn=(()=>{return(Y=Vn||(Vn={}))[Y.NO_ERROR=0]="NO_ERROR",Y[Y.NETWORK_ERROR=1]="NETWORK_ERROR",Y[Y.ABORT=2]="ABORT",Vn;var Y})(),Qt=function(){function Y(){var q=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Vn.NO_ERROR,this.sendPromise_=new Promise(function(pe){q.xhr_.addEventListener("abort",function(){q.errorCode_=Vn.ABORT,pe()}),q.xhr_.addEventListener("error",function(){q.errorCode_=Vn.NETWORK_ERROR,pe()}),q.xhr_.addEventListener("load",function(){pe()})})}return Y.prototype.send=function(q,pe,x,$){if(this.sent_)throw Nt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(pe,q,!0),void 0!==$)for(var k in $)$.hasOwnProperty(k)&&this.xhr_.setRequestHeader(k,$[k].toString());return void 0!==x?this.xhr_.send(x):this.xhr_.send(),this.sendPromise_},Y.prototype.getErrorCode=function(){if(!this.sent_)throw Nt("cannot .getErrorCode() before sending");return this.errorCode_},Y.prototype.getStatus=function(){if(!this.sent_)throw Nt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(q){return-1}},Y.prototype.getResponseText=function(){if(!this.sent_)throw Nt("cannot .getResponseText() before sending");return this.xhr_.responseText},Y.prototype.abort=function(){this.xhr_.abort()},Y.prototype.getResponseHeader=function(q){return this.xhr_.getResponseHeader(q)},Y.prototype.addUploadProgressListener=function(q){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",q)},Y.prototype.removeUploadProgressListener=function(q){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",q)},Y}(),Br=function(){function Y(){}return Y.prototype.createConnection=function(){return new Qt},Y}(),$n=function(){function Y(q,pe){this.bucket=q,this.path_=pe}return Object.defineProperty(Y.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),Y.prototype.fullServerUrl=function(){var q=encodeURIComponent;return"/b/"+q(this.bucket)+"/o/"+q(this.path)},Y.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},Y.makeFromBucketSpec=function(q,pe){var x;try{x=Y.makeFromUrl(q,pe)}catch($){return new Y(q,"")}if(""===x.path)return x;throw function(Y){return new Ke("invalid-default-bucket","Invalid default bucket '"+Y+"'.")}(q)},Y.makeFromUrl=function(q,pe){var x=null,$="([A-Za-z0-9.\\-_]+)",De=new RegExp("^gs://"+$+"(/(.*))?$","i");function rt(go){go.path_=decodeURIComponent(go.path)}for(var j=pe.replace(/[.]/g,"\\."),fr=[{regex:De,indices:{bucket:1,path:3},postModify:function(go){"/"===go.path.charAt(go.path.length-1)&&(go.path_=go.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+j+"/v[A-Za-z0-9_]+/b/"+$+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:rt},{regex:new RegExp("^https?://"+(pe===Oe?"(?:storage.googleapis.com|storage.cloud.google.com)":pe)+"/"+$+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:rt}],zr=0;zr<fr.length;zr++){var oi=fr[zr],Dn=oi.regex.exec(q);if(Dn){var ys=Dn[oi.indices.path];ys||(ys=""),x=new Y(Dn[oi.indices.bucket],ys),oi.postModify(x);break}}if(null==x)throw function(Y){return new Ke("invalid-url","Invalid URL '"+Y+"'.")}(q);return x},Y}(),Tt=function(){function Y(q){this.promise_=Promise.reject(q)}return Y.prototype.getPromise=function(){return this.promise_},Y.prototype.cancel=function(q){},Y}();function Ot(Y){return"string"==typeof Y||Y instanceof String}function He(Y){return pt()&&Y instanceof Blob}function pt(){return"undefined"!=typeof Blob}function bt(Y,q,pe,x){if(x<q)throw ln("Invalid value for '"+Y+"'. Expected "+q+" or greater.");if(x>pe)throw ln("Invalid value for '"+Y+"'. Expected "+pe+" or less.")}function St(Y,q){var pe=q.match(/^(\w+):\/\/.+/),$=q;return null==(null==pe?void 0:pe[1])&&($="https://"+q),$+"/v0"+Y}function Ut(Y){var q=encodeURIComponent,pe="?";for(var x in Y)Y.hasOwnProperty(x)&&(pe=pe+(q(x)+"=")+q(Y[x])+"&");return pe.slice(0,-1)}var hn=function(){function Y(q,pe,x,$,k,ee,De,je,rt,H,j){var V=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=q,this.method_=pe,this.headers_=x,this.body_=$,this.successCodes_=k.slice(),this.additionalRetryCodes_=ee.slice(),this.callback_=De,this.errorCallback_=je,this.progressCallback_=H,this.timeout_=rt,this.pool_=j,this.promise_=new Promise(function(ue,We){V.resolve_=ue,V.reject_=We,V.start_()})}return Y.prototype.start_=function(){var q=this;function x($,k){var ee=q.resolve_,De=q.reject_,je=k.connection;if(k.wasSuccessCode)try{var rt=q.callback_(je,je.getResponseText());!function(Y){return void 0!==Y}(rt)?ee():ee(rt)}catch(j){De(j)}else if(null!==je)(H=On()).serverResponse=je.getResponseText(),De(q.errorCallback_?q.errorCallback_(je,H):H);else if(k.canceled)De(H=q.appDelete_?Tn():Je());else{var H;De(H=new Ke("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}}this.canceled_?x(0,new mn(!1,null,!0)):this.backoffId_=function(Y,q,pe){var x=1,$=null,k=!1,ee=0;function De(){return 2===ee}var je=!1;function rt(){for(var We=[],xt=0;xt<arguments.length;xt++)We[xt]=arguments[xt];je||(je=!0,q.apply(null,We))}function H(We){$=setTimeout(function(){$=null,Y(j,De())},We)}function j(We){for(var xt=[],wn=1;wn<arguments.length;wn++)xt[wn-1]=arguments[wn];if(!je){if(We)return void rt.call.apply(rt,(0,Ae.ev)([null,We],xt));var Gr;if(De()||k)return void rt.call.apply(rt,(0,Ae.ev)([null,We],xt));x<64&&(x*=2),1===ee?(ee=2,Gr=0):Gr=1e3*(x+Math.random()),H(Gr)}}var V=!1;function ue(We){V||(V=!0,!je&&(null!==$?(We||(ee=2),clearTimeout($),H(0)):We||(ee=1)))}return H(0),setTimeout(function(){k=!0,ue(!0)},pe),ue}(function($,k){if(k)$(!1,new mn(!1,null,!0));else{var ee=q.pool_.createConnection();q.pendingConnection_=ee,null!==q.progressCallback_&&ee.addUploadProgressListener(De),ee.send(q.url_,q.method_,q.body_,q.headers_).then(function(){null!==q.progressCallback_&&ee.removeUploadProgressListener(De),q.pendingConnection_=null;var je=ee.getErrorCode()===Vn.NO_ERROR,rt=ee.getStatus();if(je&&!q.isRetryStatusCode_(rt)){var j=-1!==q.successCodes_.indexOf(rt);$(!0,new mn(j,ee))}else{var H=ee.getErrorCode()===Vn.ABORT;$(!1,new mn(!1,null,H))}})}function De(je){null!==q.progressCallback_&&q.progressCallback_(je.loaded,je.lengthComputable?je.total:-1)}},x,this.timeout_)},Y.prototype.getPromise=function(){return this.promise_},Y.prototype.cancel=function(q){this.canceled_=!0,this.appDelete_=q||!1,null!==this.backoffId_&&function(Y){Y(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},Y.prototype.isRetryStatusCode_=function(q){var pe=q>=500&&q<600,$=-1!==[408,429].indexOf(q),k=-1!==this.additionalRetryCodes_.indexOf(q);return pe||$||k},Y}(),mn=function(q,pe,x){this.wasSuccessCode=q,this.connection=pe,this.canceled=!!x};function tt(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function zt(){for(var Y=[],q=0;q<arguments.length;q++)Y[q]=arguments[q];var pe=tt();if(void 0!==pe){for(var x=new pe,$=0;$<Y.length;$++)x.append(Y[$]);return x.getBlob()}if(pt())return new Blob(Y);throw new Ke("unsupported-environment","This browser doesn't seem to support creating Blobs")}var rr=function(){function Y(q,pe){var x=0,$="";He(q)?(this.data_=q,x=q.size,$=q.type):q instanceof ArrayBuffer?(pe?this.data_=new Uint8Array(q):(this.data_=new Uint8Array(q.byteLength),this.data_.set(new Uint8Array(q))),x=this.data_.length):q instanceof Uint8Array&&(pe?this.data_=q:(this.data_=new Uint8Array(q.length),this.data_.set(q)),x=q.length),this.size_=x,this.type_=$}return Y.prototype.size=function(){return this.size_},Y.prototype.type=function(){return this.type_},Y.prototype.slice=function(q,pe){if(He(this.data_)){var $=function(Y,q,pe){return Y.webkitSlice?Y.webkitSlice(q,pe):Y.mozSlice?Y.mozSlice(q,pe):Y.slice?Y.slice(q,pe):null}(this.data_,q,pe);return null===$?null:new Y($)}return new Y(new Uint8Array(this.data_.buffer,q,pe-q),!0)},Y.getBlob=function(){for(var q=[],pe=0;pe<arguments.length;pe++)q[pe]=arguments[pe];if(pt()){var x=q.map(function(je){return je instanceof Y?je.data_:je});return new Y(zt.apply(null,x))}var $=q.map(function(je){return Ot(je)?Cn(Gt.RAW,je).data:je.data_}),k=0;$.forEach(function(je){k+=je.byteLength});var ee=new Uint8Array(k),De=0;return $.forEach(function(je){for(var rt=0;rt<je.length;rt++)ee[De++]=je[rt]}),new Y(ee,!0)},Y.prototype.uploadData=function(){return this.data_},Y}();function Pn(Y){var q;try{q=JSON.parse(Y)}catch(pe){return null}return function(Y){return"object"==typeof Y&&!Array.isArray(Y)}(q)?q:null}function jr(Y){var q=Y.lastIndexOf("/",Y.length-2);return-1===q?Y:Y.slice(q+1)}function Kr(Y,q){return q}var wr=function(q,pe,x,$){this.server=q,this.local=pe||q,this.writable=!!x,this.xform=$||Kr},xi=null;function Li(){if(xi)return xi;var Y=[];Y.push(new wr("bucket")),Y.push(new wr("generation")),Y.push(new wr("metageneration")),Y.push(new wr("name","fullPath",!0));var pe=new wr("name");pe.xform=function(k,ee){return function(Y){return!Ot(Y)||Y.length<2?Y:jr(Y)}(ee)},Y.push(pe);var $=new wr("size");return $.xform=function(k,ee){return void 0!==ee?Number(ee):ee},Y.push($),Y.push(new wr("timeCreated")),Y.push(new wr("updated")),Y.push(new wr("md5Hash",null,!0)),Y.push(new wr("cacheControl",null,!0)),Y.push(new wr("contentDisposition",null,!0)),Y.push(new wr("contentEncoding",null,!0)),Y.push(new wr("contentLanguage",null,!0)),Y.push(new wr("contentType",null,!0)),Y.push(new wr("metadata","customMetadata",!0)),xi=Y}function Nr(Y,q,pe){var x=Pn(q);return null===x?null:function(Y,q,pe){for(var x={type:"file"},$=pe.length,k=0;k<$;k++){var ee=pe[k];x[ee.local]=ee.xform(x,q[ee.server])}return function(Y,q){Object.defineProperty(Y,"ref",{get:function(){var k=new $n(Y.bucket,Y.fullPath);return q._makeStorageReference(k)}})}(x,Y),x}(Y,x,pe)}function yn(Y,q){for(var pe={},x=q.length,$=0;$<x;$++){var k=q[$];k.writable&&(pe[k.server]=Y[k.local])}return JSON.stringify(pe)}var Vr="prefixes";var dn=function(q,pe,x,$){this.url=q,this.method=pe,this.handler=x,this.timeout=$,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function In(Y){if(!Y)throw On()}function $r(Y,q){return function(x,$){var k=Nr(Y,$,q);return In(null!==k),k}}function ei(Y){return function(pe,x){var $;return($=401===pe.getStatus()?pe.getResponseText().includes("Firebase App Check token is invalid")?new Ke("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Ke("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===pe.getStatus()?function(Y){return new Ke("quota-exceeded","Quota for bucket '"+Y+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(Y.bucket):403===pe.getStatus()?function(Y){return new Ke("unauthorized","User does not have permission to access '"+Y+"'.")}(Y.path):x).serverResponse=x.serverResponse,$}}function br(Y){var q=ei(Y);return function(x,$){var k=q(x,$);return 404===x.getStatus()&&(k=function(Y){return new Ke("object-not-found","Object '"+Y+"' does not exist.")}(Y.path)),k.serverResponse=$.serverResponse,k}}function Te(Y,q,pe){var $=St(q.fullServerUrl(),Y.host),ee=Y.maxOperationRetryTime,De=new dn($,"GET",$r(Y,pe),ee);return De.errorHandler=br(q),De}function gt(Y,q,pe,x,$){var k={};k.prefix=q.isRoot?"":q.path+"/",pe&&pe.length>0&&(k.delimiter=pe),x&&(k.pageToken=x),$&&(k.maxResults=$);var De=St(q.bucketOnlyServerUrl(),Y.host),rt=Y.maxOperationRetryTime,H=new dn(De,"GET",function(Y,q){return function(x,$){var k=function(Y,q,pe){var x=Pn(pe);return null===x?null:function(Y,q,pe){var x={prefixes:[],items:[],nextPageToken:pe.nextPageToken};if(pe[Vr])for(var $=0,k=pe[Vr];$<k.length;$++){var De=k[$].replace(/\/$/,""),je=Y._makeStorageReference(new $n(q,De));x.prefixes.push(je)}if(pe.items)for(var rt=0,H=pe.items;rt<H.length;rt++)je=Y._makeStorageReference(new $n(q,H[rt].name)),x.items.push(je);return x}(Y,q,x)}(Y,q,$);return In(null!==k),k}}(Y,q.bucket),rt);return H.urlParams=k,H.errorHandler=ei(q),H}function qe(Y,q,pe){var x=Object.assign({},pe);return x.fullPath=Y.path,x.size=q.size(),x.contentType||(x.contentType=function(Y,q){return q&&q.type()||"application/octet-stream"}(0,q)),x}var rn=function(q,pe,x,$){this.current=q,this.total=pe,this.finalized=!!x,this.metadata=$||null};function Mn(Y,q){var pe=null;try{pe=Y.getResponseHeader("X-Goog-Upload-Status")}catch($){In(!1)}return In(!!pe&&-1!==(q||["active"]).indexOf(pe)),pe}var gr=function(q,pe,x){if(function(Y){return"function"==typeof Y}(q)||null!=pe||null!=x)this.next=q,this.error=pe,this.complete=x;else{var k=q;this.next=k.next,this.error=k.error,this.complete=k.complete}};function Vi(Y){return function(){for(var q=[],pe=0;pe<arguments.length;pe++)q[pe]=arguments[pe];Promise.resolve().then(function(){return Y.apply(void 0,q)})}}var lo=function(){function Y(q,pe,x){var $=this;void 0===x&&(x=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=q,this._blob=pe,this._metadata=x,this._mappings=Li(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(k){$._request=void 0,$._chunkMultiplier=1,k._codeEquals("canceled")?($._needToFetchStatus=!0,$.completeTransitions_()):($._error=k,$._transition("error"))},this._metadataErrorHandler=function(k){$._request=void 0,k._codeEquals("canceled")?$.completeTransitions_():($._error=k,$._transition("error"))},this._promise=new Promise(function(k,ee){$._resolve=k,$._reject=ee,$._start()}),this._promise.then(null,function(){})}return Y.prototype._makeProgressCallback=function(){var q=this,pe=this._transferred;return function(x){return q._updateProgress(pe+x)}},Y.prototype._shouldDoResumable=function(q){return q.size()>262144},Y.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},Y.prototype._resolveToken=function(q){var pe=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(x){var $=x[0],k=x[1];switch(pe._state){case"running":q($,k);break;case"canceling":pe._transition("canceled");break;case"pausing":pe._transition("paused")}})},Y.prototype._createResumable=function(){var q=this;this._resolveToken(function(pe,x){var $=function(Y,q,pe,x,$){var k=q.bucketOnlyServerUrl(),ee=qe(q,x,$),De={name:ee.fullPath},je=St(k,Y.host),H={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+x.size(),"X-Goog-Upload-Header-Content-Type":ee.contentType,"Content-Type":"application/json; charset=utf-8"},j=yn(ee,pe),We=new dn(je,"POST",function(xt){var wn;Mn(xt);try{wn=xt.getResponseHeader("X-Goog-Upload-URL")}catch(dr){In(!1)}return In(Ot(wn)),wn},Y.maxUploadRetryTime);return We.urlParams=De,We.headers=H,We.body=j,We.errorHandler=ei(q),We}(q._ref.storage,q._ref._location,q._mappings,q._blob,q._metadata),k=q._ref.storage._makeRequest($,pe,x);q._request=k,k.getPromise().then(function(ee){q._request=void 0,q._uploadUrl=ee,q._needToFetchStatus=!1,q.completeTransitions_()},q._errorHandler)})},Y.prototype._fetchStatus=function(){var q=this,pe=this._uploadUrl;this._resolveToken(function(x,$){var k=function(Y,q,pe,x){var je=new dn(pe,"POST",function(rt){var H=Mn(rt,["active","final"]),j=null;try{j=rt.getResponseHeader("X-Goog-Upload-Size-Received")}catch(ue){In(!1)}j||In(!1);var V=Number(j);return In(!isNaN(V)),new rn(V,x.size(),"final"===H)},Y.maxUploadRetryTime);return je.headers={"X-Goog-Upload-Command":"query"},je.errorHandler=ei(q),je}(q._ref.storage,q._ref._location,pe,q._blob),ee=q._ref.storage._makeRequest(k,x,$);q._request=ee,ee.getPromise().then(function(De){De=De,q._request=void 0,q._updateProgress(De.current),q._needToFetchStatus=!1,De.finalized&&(q._needToFetchMetadata=!0),q.completeTransitions_()},q._errorHandler)})},Y.prototype._continueUpload=function(){var q=this,pe=262144*this._chunkMultiplier,x=new rn(this._transferred,this._blob.size()),$=this._uploadUrl;this._resolveToken(function(k,ee){var De;try{De=function(Y,q,pe,x,$,k,ee,De){var je=new rn(0,0);if(ee?(je.current=ee.current,je.total=ee.total):(je.current=0,je.total=x.size()),x.size()!==je.total)throw new Ke("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var rt=je.total-je.current,H=rt;$>0&&(H=Math.min(H,$));var j=je.current,We={"X-Goog-Upload-Command":H===rt?"upload, finalize":"upload","X-Goog-Upload-Offset":""+je.current},xt=x.slice(j,j+H);if(null===xt)throw vt();var fr=new dn(pe,"POST",function(zr,oi){var go,Dn=Mn(zr,["active","final"]),Ji=je.current+H,ys=x.size();return go="final"===Dn?$r(q,k)(zr,oi):null,new rn(Ji,ys,"final"===Dn,go)},q.maxUploadRetryTime);return fr.headers=We,fr.body=xt.uploadData(),fr.progressCallback=De||null,fr.errorHandler=ei(Y),fr}(q._ref._location,q._ref.storage,$,q._blob,pe,q._mappings,x,q._makeProgressCallback())}catch(rt){return q._error=rt,void q._transition("error")}var je=q._ref.storage._makeRequest(De,k,ee);q._request=je,je.getPromise().then(function(rt){q._increaseMultiplier(),q._request=void 0,q._updateProgress(rt.current),rt.finalized?(q._metadata=rt.metadata,q._transition("success")):q.completeTransitions_()},q._errorHandler)})},Y.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},Y.prototype._fetchMetadata=function(){var q=this;this._resolveToken(function(pe,x){var $=Te(q._ref.storage,q._ref._location,q._mappings),k=q._ref.storage._makeRequest($,pe,x);q._request=k,k.getPromise().then(function(ee){q._request=void 0,q._metadata=ee,q._transition("success")},q._metadataErrorHandler)})},Y.prototype._oneShotUpload=function(){var q=this;this._resolveToken(function(pe,x){var $=function(Y,q,pe,x,$){var k=q.bucketOnlyServerUrl(),ee={"X-Goog-Upload-Protocol":"multipart"},je=function(){for(var fr="",zr=0;zr<2;zr++)fr+=Math.random().toString().slice(2);return fr}();ee["Content-Type"]="multipart/related; boundary="+je;var rt=qe(q,x,$),H=yn(rt,pe),ue=rr.getBlob("--"+je+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+H+"\r\n--"+je+"\r\nContent-Type: "+rt.contentType+"\r\n\r\n",x,"\r\n--"+je+"--");if(null===ue)throw vt();var We={name:rt.fullPath},xt=St(k,Y.host),dr=Y.maxUploadRetryTime,Gr=new dn(xt,"POST",$r(Y,pe),dr);return Gr.urlParams=We,Gr.headers=ee,Gr.body=ue.uploadData(),Gr.errorHandler=ei(q),Gr}(q._ref.storage,q._ref._location,q._mappings,q._blob,q._metadata),k=q._ref.storage._makeRequest($,pe,x);q._request=k,k.getPromise().then(function(ee){q._request=void 0,q._metadata=ee,q._updateProgress(q._blob.size()),q._transition("success")},q._errorHandler)})},Y.prototype._updateProgress=function(q){var pe=this._transferred;this._transferred=q,this._transferred!==pe&&this._notifyObservers()},Y.prototype._transition=function(q){if(this._state!==q)switch(q){case"canceling":case"pausing":this._state=q,void 0!==this._request&&this._request.cancel();break;case"running":var pe="paused"===this._state;this._state=q,pe&&(this._notifyObservers(),this._start());break;case"paused":this._state=q,this._notifyObservers();break;case"canceled":this._error=Je(),this._state=q,this._notifyObservers();break;case"error":case"success":this._state=q,this._notifyObservers()}},Y.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(Y.prototype,"snapshot",{get:function(){var q=jn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:q,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),Y.prototype.on=function(q,pe,x,$){var k=this,ee=new gr(pe,x,$);return this._addObserver(ee),function(){k._removeObserver(ee)}},Y.prototype.then=function(q,pe){return this._promise.then(q,pe)},Y.prototype.catch=function(q){return this.then(null,q)},Y.prototype._addObserver=function(q){this._observers.push(q),this._notifyObserver(q)},Y.prototype._removeObserver=function(q){var pe=this._observers.indexOf(q);-1!==pe&&this._observers.splice(pe,1)},Y.prototype._notifyObservers=function(){var q=this;this._finishPromise(),this._observers.slice().forEach(function(x){q._notifyObserver(x)})},Y.prototype._finishPromise=function(){if(void 0!==this._resolve){var q=!0;switch(jn(this._state)){case Yt.SUCCESS:Vi(this._resolve.bind(null,this.snapshot))();break;case Yt.CANCELED:case Yt.ERROR:Vi(this._reject.bind(null,this._error))();break;default:q=!1}q&&(this._resolve=void 0,this._reject=void 0)}},Y.prototype._notifyObserver=function(q){switch(jn(this._state)){case Yt.RUNNING:case Yt.PAUSED:q.next&&Vi(q.next.bind(q,this.snapshot))();break;case Yt.SUCCESS:q.complete&&Vi(q.complete.bind(q))();break;case Yt.CANCELED:case Yt.ERROR:q.error&&Vi(q.error.bind(q,this._error))();break;default:q.error&&Vi(q.error.bind(q,this._error))()}},Y.prototype.resume=function(){var q="paused"===this._state||"pausing"===this._state;return q&&this._transition("running"),q},Y.prototype.pause=function(){var q="running"===this._state;return q&&this._transition("pausing"),q},Y.prototype.cancel=function(){var q="running"===this._state||"pausing"===this._state;return q&&this._transition("canceling"),q},Y}(),Wr=function(){function Y(q,pe){this._service=q,this._location=pe instanceof $n?pe:$n.makeFromUrl(pe,q.host)}return Y.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},Y.prototype._newRef=function(q,pe){return new Y(q,pe)},Object.defineProperty(Y.prototype,"root",{get:function(){var q=new $n(this._location.bucket,"");return this._newRef(this._service,q)},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"name",{get:function(){return jr(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"parent",{get:function(){var q=function(Y){if(0===Y.length)return null;var q=Y.lastIndexOf("/");return-1===q?"":Y.slice(0,q)}(this._location.path);if(null===q)return null;var pe=new $n(this._location.bucket,q);return new Y(this._service,pe)},enumerable:!1,configurable:!0}),Y.prototype._throwIfRoot=function(q){if(""===this._location.path)throw sn(q)},Y}();function ar(Y){var q={prefixes:[],items:[]};return Hn(Y,q).then(function(){return q})}function Hn(Y,q,pe){return(0,Ae.mG)(this,void 0,void 0,function(){var $,k,ee;return(0,Ae.Jh)(this,function(De){switch(De.label){case 0:return[4,Qr(Y,{pageToken:pe})];case 1:return $=De.sent(),(k=q.prefixes).push.apply(k,$.prefixes),(ee=q.items).push.apply(ee,$.items),null==$.nextPageToken?[3,3]:[4,Hn(Y,q,$.nextPageToken)];case 2:De.sent(),De.label=3;case 3:return[2]}})})}function Qr(Y,q){return(0,Ae.mG)(this,void 0,void 0,function(){var pe,x;return(0,Ae.Jh)(this,function($){switch($.label){case 0:return null!=q&&"number"==typeof q.maxResults&&bt("options.maxResults",1,1e3,q.maxResults),x=gt(Y.storage,Y._location,"/",(pe=q||{}).pageToken,pe.maxResults),[4,Y.storage.makeRequestWithTokens(x)];case 1:return[2,$.sent().getPromise()]}})})}function fi(Y){return(0,Ae.mG)(this,void 0,void 0,function(){var q;return(0,Ae.Jh)(this,function(pe){switch(pe.label){case 0:return Y._throwIfRoot("getDownloadURL"),q=function(Y,q,pe){var $=St(q.fullServerUrl(),Y.host),ee=Y.maxOperationRetryTime,De=new dn($,"GET",function(Y,q){return function(x,$){var k=Nr(Y,$,q);return In(null!==k),function(Y,q,pe){var x=Pn(q);if(null===x||!Ot(x.downloadTokens))return null;var $=x.downloadTokens;if(0===$.length)return null;var k=encodeURIComponent;return $.split(",").map(function(je){var H=Y.fullPath;return St("/b/"+k(Y.bucket)+"/o/"+k(H),pe)+Ut({alt:"media",token:je})})[0]}(k,$,Y.host)}}(Y,pe),ee);return De.errorHandler=br(q),De}(Y.storage,Y._location,Li()),[4,Y.storage.makeRequestWithTokens(q)];case 1:return[2,pe.sent().getPromise().then(function(x){if(null===x)throw new Ke("no-download-url","The given file does not have any download URLs.");return x})]}})})}function Qi(Y,q){var pe=function(Y,q){var pe=q.split("/").filter(function(x){return x.length>0}).join("/");return 0===Y.length?pe:Y+"/"+pe}(Y._location.path,q),x=new $n(Y._location.bucket,pe);return new Wr(Y.storage,x)}function yi(Y){return/^[A-Za-z]+:\/\//.test(Y)}function Hr(Y,q){if(Y instanceof No){var pe=Y;if(null==pe._bucket)throw new Ke("no-default-bucket","No default bucket found. Did you set the '"+Ue+"' property when initializing the app?");var x=new Wr(pe,pe._bucket);return null!=q?Hr(x,q):x}return void 0!==q?Qi(Y,q):Y}function _s(Y,q){if(q&&yi(q)){if(Y instanceof No)return function(Y,q){return new Wr(Y,q)}(Y,q);throw ln("To use ref(service, url), the first argument must be a Storage instance.")}return Hr(Y,q)}function $i(Y,q){var pe=null==q?void 0:q[Ue];return null==pe?null:$n.makeFromBucketSpec(pe,Y)}var No=function(){function Y(q,pe,x,$,k,ee){this.app=q,this._authProvider=pe,this._appCheckProvider=x,this._pool=$,this._url=k,this._firebaseVersion=ee,this._bucket=null,this._host=Oe,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=k?$n.makeFromBucketSpec(k,this._host):$i(this._host,this.app.options)}return Object.defineProperty(Y.prototype,"host",{get:function(){return this._host},set:function(q){this._host=q,this._bucket=null!=this._url?$n.makeFromBucketSpec(this._url,q):$i(q,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(q){bt("time",0,Number.POSITIVE_INFINITY,q),this._maxUploadRetryTime=q},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(q){bt("time",0,Number.POSITIVE_INFINITY,q),this._maxOperationRetryTime=q},enumerable:!1,configurable:!0}),Y.prototype._getAuthToken=function(){return(0,Ae.mG)(this,void 0,void 0,function(){var q,pe;return(0,Ae.Jh)(this,function(x){switch(x.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(q=this._authProvider.getImmediate({optional:!0}))?[4,q.getToken()]:[3,2];case 1:if(null!==(pe=x.sent()))return[2,pe.accessToken];x.label=2;case 2:return[2,null]}})})},Y.prototype._getAppCheckToken=function(){return(0,Ae.mG)(this,void 0,void 0,function(){var q;return(0,Ae.Jh)(this,function(x){switch(x.label){case 0:return(q=this._appCheckProvider.getImmediate({optional:!0}))?[4,q.getToken()]:[3,2];case 1:return[2,x.sent().token];case 2:return[2,null]}})})},Y.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(q){return q.cancel()}),this._requests.clear()),Promise.resolve()},Y.prototype._makeStorageReference=function(q){return new Wr(this,q)},Y.prototype._makeRequest=function(q,pe,x){var $=this;if(this._deleted)return new Tt(Tn());var k=function(Y,q,pe,x,$,k){var ee=Ut(Y.urlParams),De=Y.url+ee,je=Object.assign({},Y.headers);return function(Y,q){q&&(Y["X-Firebase-GMPID"]=q)}(je,q),function(Y,q){null!==q&&q.length>0&&(Y.Authorization="Firebase "+q)}(je,pe),function(Y,q){Y["X-Firebase-Storage-Version"]="webjs/"+(null!=q?q:"AppManager")}(je,k),function(Y,q){null!==q&&(Y["X-Firebase-AppCheck"]=q)}(je,x),new hn(De,Y.method,je,Y.body,Y.successCodes,Y.additionalRetryCodes,Y.handler,Y.errorHandler,Y.timeout,Y.progressCallback,$)}(q,this._appId,pe,x,this._pool,this._firebaseVersion);return this._requests.add(k),k.getPromise().then(function(){return $._requests.delete(k)},function(){return $._requests.delete(k)}),k},Y.prototype.makeRequestWithTokens=function(q){return(0,Ae.mG)(this,void 0,void 0,function(){var pe;return(0,Ae.Jh)(this,function(k){switch(k.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return pe=k.sent(),[2,this._makeRequest(q,pe[0],pe[1])]}})})},Y}();function to(Y,q){return _s(Y=(0,ge.m9)(Y),q)}var Y,q,Fi=function(){function Y(q,pe,x){this._delegate=q,this.task=pe,this.ref=x}return Object.defineProperty(Y.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),Y}(),ho=function(){function Y(q,pe){this._delegate=q,this._ref=pe,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(Y.prototype,"snapshot",{get:function(){return new Fi(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),Y.prototype.then=function(q,pe){var x=this;return this._delegate.then(function($){if(q)return q(new Fi($,x,x._ref))},pe)},Y.prototype.on=function(q,pe,x,$){var k=this,ee=void 0;return pe&&(ee="function"==typeof pe?function(De){return pe(new Fi(De,k,k._ref))}:{next:pe.next?function(De){return pe.next(new Fi(De,k,k._ref))}:void 0,complete:pe.complete||void 0,error:pe.error||void 0}),this._delegate.on(q,ee,x||void 0,$||void 0)},Y}(),pi=function(){function Y(q,pe){this._delegate=q,this._service=pe}return Object.defineProperty(Y.prototype,"prefixes",{get:function(){var q=this;return this._delegate.prefixes.map(function(pe){return new ko(pe,q._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"items",{get:function(){var q=this;return this._delegate.items.map(function(pe){return new ko(pe,q._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),Y}(),ko=function(){function Y(q,pe){this._delegate=q,this.storage=pe}return Object.defineProperty(Y.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),Y.prototype.toString=function(){return this._delegate.toString()},Y.prototype.child=function(q){return new Y(function(Y,q){return Qi(Y,q)}(this._delegate,q),this.storage)},Object.defineProperty(Y.prototype,"root",{get:function(){return new Y(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"parent",{get:function(){var q=this._delegate.parent;return null==q?null:new Y(q,this.storage)},enumerable:!1,configurable:!0}),Y.prototype.put=function(q,pe){return this._throwIfRoot("put"),new ho(function(Y,q,pe){return function(Y,q,pe){return Y._throwIfRoot("uploadBytesResumable"),new lo(Y,new rr(q),pe)}(Y=(0,ge.m9)(Y),q,pe)}(this._delegate,q,pe),this)},Y.prototype.putString=function(q,pe,x){void 0===pe&&(pe=Gt.RAW),this._throwIfRoot("putString");var $=Cn(pe,q),k=(0,Ae.pi)({},x);return null==k.contentType&&null!=$.contentType&&(k.contentType=$.contentType),new ho(new lo(this._delegate,new rr($.data,!0),k),this)},Y.prototype.listAll=function(){var q=this;return function(Y){return ar(Y=(0,ge.m9)(Y))}(this._delegate).then(function(pe){return new pi(pe,q.storage)})},Y.prototype.list=function(q){var pe=this;return function(Y,q){return Qr(Y=(0,ge.m9)(Y),q)}(this._delegate,q||void 0).then(function(x){return new pi(x,pe.storage)})},Y.prototype.getMetadata=function(){return function(Y){return function(Y){return(0,Ae.mG)(this,void 0,void 0,function(){var q;return(0,Ae.Jh)(this,function(pe){switch(pe.label){case 0:return Y._throwIfRoot("getMetadata"),q=Te(Y.storage,Y._location,Li()),[4,Y.storage.makeRequestWithTokens(q)];case 1:return[2,pe.sent().getPromise()]}})})}(Y=(0,ge.m9)(Y))}(this._delegate)},Y.prototype.updateMetadata=function(q){return function(Y,q){return function(Y,q){return(0,Ae.mG)(this,void 0,void 0,function(){var pe;return(0,Ae.Jh)(this,function(x){switch(x.label){case 0:return Y._throwIfRoot("updateMetadata"),pe=function(Y,q,pe,x){var k=St(q.fullServerUrl(),Y.host),De=yn(pe,x),rt=Y.maxOperationRetryTime,H=new dn(k,"PATCH",$r(Y,x),rt);return H.headers={"Content-Type":"application/json; charset=utf-8"},H.body=De,H.errorHandler=br(q),H}(Y.storage,Y._location,q,Li()),[4,Y.storage.makeRequestWithTokens(pe)];case 1:return[2,x.sent().getPromise()]}})})}(Y=(0,ge.m9)(Y),q)}(this._delegate,q)},Y.prototype.getDownloadURL=function(){return function(Y){return fi(Y=(0,ge.m9)(Y))}(this._delegate)},Y.prototype.delete=function(){return this._throwIfRoot("delete"),function(Y){return function(Y){return(0,Ae.mG)(this,void 0,void 0,function(){var q;return(0,Ae.Jh)(this,function(pe){switch(pe.label){case 0:return Y._throwIfRoot("deleteObject"),q=function(Y,q){var x=St(q.fullServerUrl(),Y.host),De=new dn(x,"DELETE",function(je,rt){},Y.maxOperationRetryTime);return De.successCodes=[200,204],De.errorHandler=br(q),De}(Y.storage,Y._location),[4,Y.storage.makeRequestWithTokens(q)];case 1:return[2,pe.sent().getPromise()]}})})}(Y=(0,ge.m9)(Y))}(this._delegate)},Y.prototype._throwIfRoot=function(q){if(""===this._delegate._location.path)throw sn(q)},Y}(),Ci=function(){function Y(q,pe){this.app=q,this._delegate=pe}return Object.defineProperty(Y.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),Y.prototype.ref=function(q){if(yi(q))throw ln("ref() expected a child path but got a URL, use refFromURL instead.");return new ko(to(this._delegate,q),this)},Y.prototype.refFromURL=function(q){if(!yi(q))throw ln("refFromURL() expected a full URL but got a child path, use ref() instead.");try{$n.makeFromUrl(q,this._delegate.host)}catch(pe){throw ln("refFromUrl() expected a valid full URL but got an invalid one.")}return new ko(to(this._delegate,q),this)},Y.prototype.setMaxUploadRetryTime=function(q){this._delegate.maxUploadRetryTime=q},Y.prototype.setMaxOperationRetryTime=function(q){this._delegate.maxOperationRetryTime=q},Y.prototype.useEmulator=function(q,pe,x){void 0===x&&(x={}),function(Y,q,pe,x){void 0===x&&(x={}),function(Y,q,pe,x){void 0===x&&(x={}),Y.host="http://"+q+":"+pe;var $=x.mockUserToken;$&&(Y._overrideAuthToken="string"==typeof $?$:(0,ge.Sg)($,Y.app.options.projectId))}(Y,q,pe,x)}(this._delegate,q,pe,x)},Y}();function ti(Y){const q=function(Y){return new P.y(q=>{const pe=ee=>q.next(ee);pe(Y.snapshot);const k=Y.on("state_changed",pe);return Y.then(ee=>{pe(ee),q.complete()},ee=>{pe(Y.snapshot),(ee=>{q.error(ee)})(ee)}),function(){k()}}).pipe((0,C.b)(0))}(Y);return{task:Y,then:Y.then.bind(Y),catch:Y.catch.bind(Y),pause:Y.pause.bind(Y),cancel:Y.cancel.bind(Y),resume:Y.resume.bind(Y),snapshotChanges:()=>q,percentageChanges:()=>q.pipe((0,Ve.U)(pe=>pe.bytesTransferred/pe.totalBytes*100))}}function fo(Y,q,pe){return{getDownloadURL:()=>(0,g.of)(void 0).pipe((0,we.QV)(q.outsideAngular),(0,Ne.w)(()=>Y.getDownloadURL()),pe),getMetadata:()=>(0,g.of)(void 0).pipe((0,we.QV)(q.outsideAngular),(0,Ne.w)(()=>Y.getMetadata()),pe),delete:()=>(0,J.D)(Y.delete()),child:x=>fo(Y.child(x),q,pe),updateMetadata:x=>(0,J.D)(Y.updateMetadata(x)),put:(x,$)=>ti(Y.put(x,$)),putString:(x,$,k)=>ti(Y.putString(x,$,k)),listAll:()=>(0,J.D)(Y.listAll())}}q={TaskState:Yt,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:Gt,Storage:No,Reference:ko},(Y=se.Z).INTERNAL.registerComponent(new Ee.wA("storage",function(Y,q){var pe=q.instanceIdentifier,x=Y.getProvider("app").getImmediate(),$=Y.getProvider("auth-internal"),k=Y.getProvider("app-check-internal");return new Ci(x,new No(x,$,k,new Br,pe,se.Z.SDK_VERSION))},"PUBLIC").setServiceProps(q).setMultipleInstances(!0)),Y.registerVersion("@firebase/storage","0.7.0"),K(8583);const Lo=new he.OlP("angularfire2.storageBucket"),Ei=new he.OlP("angularfire2.storage.maxUploadRetryTime"),Vo=new he.OlP("angularfire2.storage.maxOperationRetryTime");let Lr=(()=>{class Y{constructor(pe,x,$,k,ee,De,je){this.schedulers=new be.HU(ee),this.keepUnstableUntilFirst=(0,be.ss)(this.schedulers);const rt=(0,be.on)(pe,ee,x);this.storage=(0,be.sI)(`${rt.name}.storage.${$}`,"AngularFireStorage",rt,()=>{const H=ee.runOutsideAngular(()=>rt.storage($||void 0));return De&&H.setMaxUploadRetryTime(De),je&&H.setMaxOperationRetryTime(je),H},[De,je])}ref(pe){return fo(this.storage.ref(pe),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(pe){return fo(this.storage.refFromURL(pe),this.schedulers,this.keepUnstableUntilFirst)}upload(pe,x,$){return fo(this.storage.ref(pe),this.schedulers,this.keepUnstableUntilFirst).put(x,$)}}return Y.\u0275fac=function(pe){return new(pe||Y)(he.LFG(be.Dh),he.LFG(be.xv,8),he.LFG(Lo,8),he.LFG(he.Lbi),he.LFG(he.R0b),he.LFG(Ei,8),he.LFG(Vo,8))},Y.\u0275prov=he.Yz7({factory:function(){return new Y(he.LFG(be.Dh),he.LFG(be.xv,8),he.LFG(Lo,8),he.LFG(he.Lbi),he.LFG(he.R0b),he.LFG(Ei,8),he.LFG(Vo,8))},token:Y,providedIn:"any"}),Y})(),po=(()=>{class Y{}return Y.\u0275fac=function(pe){return new(pe||Y)},Y.\u0275mod=he.oAB({type:Y}),Y.\u0275inj=he.cJS({}),Y})(),os=(()=>{class Y{}return Y.\u0275fac=function(pe){return new(pe||Y)},Y.\u0275mod=he.oAB({type:Y}),Y.\u0275inj=he.cJS({providers:[Lr],imports:[po]}),Y})()},57:(Ht,it,K)=>{"use strict";K.d(it,{hO:()=>Dt,xv:()=>ne,Dh:()=>Xe,HU:()=>Ae,GT:()=>Ue,sI:()=>Rt,on:()=>On,ss:()=>ge,pX:()=>Oe,yq:()=>Lt});var P=K(7771),g=K(3637),J=K(3342),C=K(9673),Ve=K(309),we=K(7716),Ne=K(2329);function he(){}Ht=K.hmd(Ht);class be{constructor(ot,st=P.N){this.zone=ot,this.delegate=st}now(){return this.delegate.now()}schedule(ot,st,nt){const vt=this.zone;return this.delegate.schedule(function(tn){vt.runGuarded(()=>{ot.apply(this,[tn])})},st,nt)}}class se{constructor(ot){this.zone=ot,this.task=null}call(ot,st){const nt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",he,{},he,he)),st.pipe((0,J.b)({next:nt,complete:nt,error:nt})).subscribe(ot).add(nt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class Ae{constructor(ot){this.ngZone=ot,this.outsideAngular=ot.runOutsideAngular(()=>new be(Zone.current)),this.insideAngular=ot.run(()=>new be(Zone.current,g.z))}}function ge(Je){return function(st){return(st=st.lift(new se(Je.ngZone))).pipe((0,C.R)(Je.outsideAngular),(0,Ve.QV)(Je.insideAngular))}}const Ee=["ngOnDestroy"],Oe=(Je,ot,st,nt={})=>new Proxy(Je,{get:(vt,at)=>st.runOutsideAngular(()=>{var tn;if(Je[at])return(null===(tn=null==nt?void 0:nt.spy)||void 0===tn?void 0:tn.get)&&nt.spy.get(at,Je[at]),Je[at];if(Ee.indexOf(at)>-1)return()=>{};const ln=ot.toPromise().then(Tn=>{const sn=Tn&&Tn[at];return"function"==typeof sn?sn.bind(Tn):sn&&sn.then?sn.then(jt=>st.run(()=>jt)):st.run(()=>sn)});return new Proxy(()=>{},{get:(Tn,sn)=>ln[sn],apply:(Tn,sn,jt)=>ln.then(Nt=>{var Jt;const Gt=Nt&&Nt(...jt);return(null===(Jt=null==nt?void 0:nt.spy)||void 0===Jt?void 0:Jt.apply)&&nt.spy.apply(at,jt,Gt),Gt})})})}),Ue=(Je,ot)=>{ot.forEach(st=>{Object.getOwnPropertyNames(st.prototype||st).forEach(nt=>{Object.defineProperty(Je.prototype,nt,Object.getOwnPropertyDescriptor(st.prototype||st,nt))})})},Xe=new we.OlP("angularfire2.app.options"),ne=new we.OlP("angularfire2.app.nameOrConfig"),At=new we.GfV("6.1.5");function On(Je,ot,st){const vt="object"==typeof st&&st||{};vt.name=vt.name||"string"==typeof st&&st||"[DEFAULT]";const tn=Ne.Z.apps.filter(ln=>ln&&ln.name===vt.name)[0]||ot.runOutsideAngular(()=>Ne.Z.initializeApp(Je,vt));try{JSON.stringify(Je)!==JSON.stringify(tn.options)&&ct("error",`${tn.name} Firebase App already initialized with different options${Ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ln){}return tn}const Lt=()=>{ct("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},ct=(Je,...ot)=>{(0,we.X6Q)()&&"undefined"!=typeof console&&console[Je](...ot)};function Rt(Je,ot,st,nt,vt){const[at,...tn]=globalThis.\u0275AngularfireInstanceCache.get(Je)||[];if(at){try{vt.some((ln,Tn)=>{const sn=tn[Tn];return ln&&"object"==typeof ln?JSON.stringify(ln)!==JSON.stringify(sn):ln!==sn})&&ct("error",`${ot} was already initialized on the ${st.name} Firebase App instance with different settings.${Ht.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(ln){}return at}{const ln=nt();return globalThis.\u0275AngularfireInstanceCache.set(Je,[ln,...vt]),ln}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const En={provide:class{},useFactory:On,deps:[Xe,we.R0b,[new we.FiY,ne]]};let Dt=(()=>{class Je{constructor(st){Ne.Z.registerVersion("angularfire",At.full,st.toString()),Ne.Z.registerVersion("angular",we.q4F.full)}static initializeApp(st,nt){return{ngModule:Je,providers:[{provide:Xe,useValue:st},{provide:ne,useValue:nt}]}}}return Je.\u0275fac=function(st){return new(st||Je)(we.LFG(we.Lbi))},Je.\u0275mod=we.oAB({type:Je}),Je.\u0275inj=we.cJS({providers:[En]}),Je})()},665:(Ht,it,K)=>{"use strict";K.d(it,{Wl:()=>Oe,Fj:()=>Ke,qu:()=>je,NI:()=>Tr,u:()=>rs,cw:()=>ei,sg:()=>Hr,u5:()=>k,a5:()=>Vn,JJ:()=>$n,JL:()=>Tt,F:()=>ie,On:()=>gr,UX:()=>ee,kI:()=>Rt,_Y:()=>Vi});var P=K(7716),g=K(8583),J=K(7574),C=K(9796),Ve=K(8002),we=K(1555),Ne=K(4402);function be(H,j){return new J.y(V=>{const ue=H.length;if(0===ue)return void V.complete();const We=new Array(ue);let xt=0,wn=0;for(let dr=0;dr<ue;dr++){const Gr=(0,Ne.D)(H[dr]);let fr=!1;V.add(Gr.subscribe({next:zr=>{fr||(fr=!0,wn++),We[dr]=zr},error:zr=>V.error(zr),complete:()=>{xt++,(xt===ue||!fr)&&(wn===ue&&V.next(j?j.reduce((zr,oi,Dn)=>(zr[oi]=We[Dn],zr),{}):We),V.complete())}}))}})}let se=(()=>{class H{constructor(V,ue){this._renderer=V,this._elementRef=ue,this.onChange=We=>{},this.onTouched=()=>{}}setProperty(V,ue){this._renderer.setProperty(this._elementRef.nativeElement,V,ue)}registerOnTouched(V){this.onTouched=V}registerOnChange(V){this.onChange=V}setDisabledState(V){this.setProperty("disabled",V)}}return H.\u0275fac=function(V){return new(V||H)(P.Y36(P.Qsj),P.Y36(P.SBq))},H.\u0275dir=P.lG2({type:H}),H})(),Ae=(()=>{class H extends se{}return H.\u0275fac=function(){let j;return function(ue){return(j||(j=P.n5z(H)))(ue||H)}}(),H.\u0275dir=P.lG2({type:H,features:[P.qOj]}),H})();const ge=new P.OlP("NgValueAccessor"),Ee={provide:ge,useExisting:(0,P.Gpc)(()=>Oe),multi:!0};let Oe=(()=>{class H extends Ae{writeValue(V){this.setProperty("checked",V)}}return H.\u0275fac=function(){let j;return function(ue){return(j||(j=P.n5z(H)))(ue||H)}}(),H.\u0275dir=P.lG2({type:H,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(V,ue){1&V&&P.NdJ("change",function(xt){return ue.onChange(xt.target.checked)})("blur",function(){return ue.onTouched()})},features:[P._Bn([Ee]),P.qOj]}),H})();const Ue={provide:ge,useExisting:(0,P.Gpc)(()=>Ke),multi:!0},ne=new P.OlP("CompositionEventMode");let Ke=(()=>{class H extends se{constructor(V,ue,We){super(V,ue),this._compositionMode=We,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const H=(0,g.q)()?(0,g.q)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(V){this.setProperty("value",null==V?"":V)}_handleInput(V){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(V)}_compositionStart(){this._composing=!0}_compositionEnd(V){this._composing=!1,this._compositionMode&&this.onChange(V)}}return H.\u0275fac=function(V){return new(V||H)(P.Y36(P.Qsj),P.Y36(P.SBq),P.Y36(ne,8))},H.\u0275dir=P.lG2({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(V,ue){1&V&&P.NdJ("input",function(xt){return ue._handleInput(xt.target.value)})("blur",function(){return ue.onTouched()})("compositionstart",function(){return ue._compositionStart()})("compositionend",function(xt){return ue._compositionEnd(xt.target.value)})},features:[P._Bn([Ue]),P.qOj]}),H})();function At(H){return null==H||0===H.length}function On(H){return null!=H&&"number"==typeof H.length}const Lt=new P.OlP("NgValidators"),ct=new P.OlP("NgAsyncValidators"),$t=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Rt{static min(j){return H=j,j=>{if(At(j.value)||At(H))return null;const V=parseFloat(j.value);return!isNaN(V)&&V<H?{min:{min:H,actual:j.value}}:null};var H}static max(j){return H=j,j=>{if(At(j.value)||At(H))return null;const V=parseFloat(j.value);return!isNaN(V)&&V>H?{max:{max:H,actual:j.value}}:null};var H}static required(j){return At(j.value)?{required:!0}:null}static requiredTrue(j){return!0===j.value?null:{required:!0}}static email(j){return At((H=j).value)||$t.test(H.value)?null:{email:!0};var H}static minLength(j){return H=j,j=>At(j.value)||!On(j.value)?null:j.value.length<H?{minlength:{requiredLength:H,actualLength:j.value.length}}:null;var H}static maxLength(j){return H=j,j=>On(j.value)&&j.value.length>H?{maxlength:{requiredLength:H,actualLength:j.value.length}}:null;var H}static pattern(j){return function(H){if(!H)return tn;let j,V;return"string"==typeof H?(V="","^"!==H.charAt(0)&&(V+="^"),V+=H,"$"!==H.charAt(H.length-1)&&(V+="$"),j=new RegExp(V)):(V=H.toString(),j=H),ue=>{if(At(ue.value))return null;const We=ue.value;return j.test(We)?null:{pattern:{requiredPattern:V,actualValue:We}}}}(j)}static nullValidator(j){return null}static compose(j){return Gt(j)}static composeAsync(j){return Cn(j)}}function tn(H){return null}function ln(H){return null!=H}function Tn(H){const j=(0,P.QGY)(H)?(0,Ne.D)(H):H;return(0,P.CqO)(j),j}function sn(H){let j={};return H.forEach(V=>{j=null!=V?Object.assign(Object.assign({},j),V):j}),0===Object.keys(j).length?null:j}function jt(H,j){return j.map(V=>V(H))}function Jt(H){return H.map(j=>function(H){return!H.validate}(j)?j:V=>j.validate(V))}function Gt(H){if(!H)return null;const j=H.filter(ln);return 0==j.length?null:function(V){return sn(jt(V,j))}}function Fn(H){return null!=H?Gt(Jt(H)):null}function Cn(H){if(!H)return null;const j=H.filter(ln);return 0==j.length?null:function(V){return function(...H){if(1===H.length){const j=H[0];if((0,C.k)(j))return be(j,null);if((0,we.K)(j)&&Object.getPrototypeOf(j)===Object.prototype){const V=Object.keys(j);return be(V.map(ue=>j[ue]),V)}}if("function"==typeof H[H.length-1]){const j=H.pop();return be(H=1===H.length&&(0,C.k)(H[0])?H[0]:H,null).pipe((0,Ve.U)(V=>j(...V)))}return be(H,null)}(jt(V,j).map(Tn)).pipe((0,Ve.U)(sn))}}function sr(H){return null!=H?Cn(Jt(H)):null}function zn(H,j){return null===H?[j]:Array.isArray(H)?[...H,j]:[H,j]}function Bn(H){return H._rawValidators}function Xn(H){return H._rawAsyncValidators}function Sn(H){return H?Array.isArray(H)?H:[H]:[]}function An(H,j){return Array.isArray(H)?H.includes(j):H===j}function Oi(H,j){const V=Sn(j);return Sn(H).forEach(We=>{An(V,We)||V.push(We)}),V}function gn(H,j){return Sn(j).filter(V=>!An(H,V))}let Yt=(()=>{class H{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(V){this._rawValidators=V||[],this._composedValidatorFn=Fn(this._rawValidators)}_setAsyncValidators(V){this._rawAsyncValidators=V||[],this._composedAsyncValidatorFn=sr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(V){this._onDestroyCallbacks.push(V)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(V=>V()),this._onDestroyCallbacks=[]}reset(V){this.control&&this.control.reset(V)}hasError(V,ue){return!!this.control&&this.control.hasError(V,ue)}getError(V,ue){return this.control?this.control.getError(V,ue):null}}return H.\u0275fac=function(V){return new(V||H)},H.\u0275dir=P.lG2({type:H}),H})(),jn=(()=>{class H extends Yt{get formDirective(){return null}get path(){return null}}return H.\u0275fac=function(){let j;return function(ue){return(j||(j=P.n5z(H)))(ue||H)}}(),H.\u0275dir=P.lG2({type:H,features:[P.qOj]}),H})();class Vn extends Yt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Qt{constructor(j){this._cd=j}is(j){var V,ue,We;return"submitted"===j?!!(null===(V=this._cd)||void 0===V?void 0:V.submitted):!!(null===(We=null===(ue=this._cd)||void 0===ue?void 0:ue.control)||void 0===We?void 0:We[j])}}let $n=(()=>{class H extends Qt{constructor(V){super(V)}}return H.\u0275fac=function(V){return new(V||H)(P.Y36(Vn,2))},H.\u0275dir=P.lG2({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(V,ue){2&V&&P.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))},features:[P.qOj]}),H})(),Tt=(()=>{class H extends Qt{constructor(V){super(V)}}return H.\u0275fac=function(V){return new(V||H)(P.Y36(jn,10))},H.\u0275dir=P.lG2({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(V,ue){2&V&&P.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))("ng-submitted",ue.is("submitted"))},features:[P.qOj]}),H})();function mn(H,j){return[...j.path,H]}function qt(H,j){et(H,j),j.valueAccessor.writeValue(H.value),function(H,j){j.valueAccessor.registerOnChange(V=>{H._pendingValue=V,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&rr(H,j)})}(H,j),function(H,j){const V=(ue,We)=>{j.valueAccessor.writeValue(ue),We&&j.viewToModelUpdate(ue)};H.registerOnChange(V),j._registerOnDestroy(()=>{H._unregisterOnChange(V)})}(H,j),function(H,j){j.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&rr(H,j),"submit"!==H.updateOn&&H.markAsTouched()})}(H,j),function(H,j){if(j.valueAccessor.setDisabledState){const V=ue=>{j.valueAccessor.setDisabledState(ue)};H.registerOnDisabledChange(V),j._registerOnDestroy(()=>{H._unregisterOnDisabledChange(V)})}}(H,j)}function Re(H,j,V=!0){const ue=()=>{};j.valueAccessor&&(j.valueAccessor.registerOnChange(ue),j.valueAccessor.registerOnTouched(ue)),tt(H,j),H&&(j._invokeOnDestroyCallbacks(),H._registerOnCollectionChange(()=>{}))}function Pe(H,j){H.forEach(V=>{V.registerOnValidatorChange&&V.registerOnValidatorChange(j)})}function et(H,j){const V=Bn(H);null!==j.validator?H.setValidators(zn(V,j.validator)):"function"==typeof V&&H.setValidators([V]);const ue=Xn(H);null!==j.asyncValidator?H.setAsyncValidators(zn(ue,j.asyncValidator)):"function"==typeof ue&&H.setAsyncValidators([ue]);const We=()=>H.updateValueAndValidity();Pe(j._rawValidators,We),Pe(j._rawAsyncValidators,We)}function tt(H,j){let V=!1;if(null!==H){if(null!==j.validator){const We=Bn(H);if(Array.isArray(We)&&We.length>0){const xt=We.filter(wn=>wn!==j.validator);xt.length!==We.length&&(V=!0,H.setValidators(xt))}}if(null!==j.asyncValidator){const We=Xn(H);if(Array.isArray(We)&&We.length>0){const xt=We.filter(wn=>wn!==j.asyncValidator);xt.length!==We.length&&(V=!0,H.setAsyncValidators(xt))}}}const ue=()=>{};return Pe(j._rawValidators,ue),Pe(j._rawAsyncValidators,ue),V}function rr(H,j){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),j.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}function Ln(H,j){et(H,j)}function wr(H,j){if(!H.hasOwnProperty("model"))return!1;const V=H.model;return!!V.isFirstChange()||!Object.is(j,V.currentValue)}function Fo(H,j){H._syncPendingControls(),j.forEach(V=>{const ue=V.control;"submit"===ue.updateOn&&ue._pendingChange&&(V.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}function Li(H,j){if(!j)return null;let V,ue,We;return Array.isArray(j),j.forEach(xt=>{xt.constructor===Ke?V=xt:function(H){return Object.getPrototypeOf(H.constructor)===Ae}(xt)?ue=xt:We=xt}),We||ue||V||null}function uo(H,j){const V=H.indexOf(j);V>-1&&H.splice(V,1)}const Nr="VALID",ur="INVALID",yn="PENDING",Vr="DISABLED";function Dr(H){return($r(H)?H.validators:H)||null}function Xt(H){return Array.isArray(H)?Fn(H):H||null}function dn(H,j){return($r(j)?j.asyncValidators:H)||null}function In(H){return Array.isArray(H)?sr(H):H||null}function $r(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}class Si{constructor(j,V){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=j,this._rawAsyncValidators=V,this._composedValidatorFn=Xt(this._rawValidators),this._composedAsyncValidatorFn=In(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(j){this._rawValidators=this._composedValidatorFn=j}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(j){this._rawAsyncValidators=this._composedAsyncValidatorFn=j}get parent(){return this._parent}get valid(){return this.status===Nr}get invalid(){return this.status===ur}get pending(){return this.status==yn}get disabled(){return this.status===Vr}get enabled(){return this.status!==Vr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(j){this._rawValidators=j,this._composedValidatorFn=Xt(j)}setAsyncValidators(j){this._rawAsyncValidators=j,this._composedAsyncValidatorFn=In(j)}addValidators(j){this.setValidators(Oi(j,this._rawValidators))}addAsyncValidators(j){this.setAsyncValidators(Oi(j,this._rawAsyncValidators))}removeValidators(j){this.setValidators(gn(j,this._rawValidators))}removeAsyncValidators(j){this.setAsyncValidators(gn(j,this._rawAsyncValidators))}hasValidator(j){return An(this._rawValidators,j)}hasAsyncValidator(j){return An(this._rawAsyncValidators,j)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(j={}){this.touched=!0,this._parent&&!j.onlySelf&&this._parent.markAsTouched(j)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(j=>j.markAllAsTouched())}markAsUntouched(j={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(V=>{V.markAsUntouched({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}markAsDirty(j={}){this.pristine=!1,this._parent&&!j.onlySelf&&this._parent.markAsDirty(j)}markAsPristine(j={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(V=>{V.markAsPristine({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}markAsPending(j={}){this.status=yn,!1!==j.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!j.onlySelf&&this._parent.markAsPending(j)}disable(j={}){const V=this._parentMarkedDirty(j.onlySelf);this.status=Vr,this.errors=null,this._forEachChild(ue=>{ue.disable(Object.assign(Object.assign({},j),{onlySelf:!0}))}),this._updateValue(),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},j),{skipPristineCheck:V})),this._onDisabledChange.forEach(ue=>ue(!0))}enable(j={}){const V=this._parentMarkedDirty(j.onlySelf);this.status=Nr,this._forEachChild(ue=>{ue.enable(Object.assign(Object.assign({},j),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},j),{skipPristineCheck:V})),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors(j){this._parent&&!j.onlySelf&&(this._parent.updateValueAndValidity(j),j.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(j){this._parent=j}updateValueAndValidity(j={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nr||this.status===yn)&&this._runAsyncValidator(j.emitEvent)),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!j.onlySelf&&this._parent.updateValueAndValidity(j)}_updateTreeValidity(j={emitEvent:!0}){this._forEachChild(V=>V._updateTreeValidity(j)),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vr:Nr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(j){if(this.asyncValidator){this.status=yn,this._hasOwnPendingAsyncValidator=!0;const V=Tn(this.asyncValidator(this));this._asyncValidationSubscription=V.subscribe(ue=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ue,{emitEvent:j})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(j,V={}){this.errors=j,this._updateControlsErrors(!1!==V.emitEvent)}get(j){return function(H,j,V){if(null==j||(Array.isArray(j)||(j=j.split(".")),Array.isArray(j)&&0===j.length))return null;let ue=H;return j.forEach(We=>{ue=ue instanceof ei?ue.controls.hasOwnProperty(We)?ue.controls[We]:null:ue instanceof br&&ue.at(We)||null}),ue}(this,j)}getError(j,V){const ue=V?this.get(V):this;return ue&&ue.errors?ue.errors[j]:null}hasError(j,V){return!!this.getError(j,V)}get root(){let j=this;for(;j._parent;)j=j._parent;return j}_updateControlsErrors(j){this.status=this._calculateStatus(),j&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(j)}_initObservables(){this.valueChanges=new P.vpe,this.statusChanges=new P.vpe}_calculateStatus(){return this._allControlsDisabled()?Vr:this.errors?ur:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yn)?yn:this._anyControlsHaveStatus(ur)?ur:Nr}_anyControlsHaveStatus(j){return this._anyControls(V=>V.status===j)}_anyControlsDirty(){return this._anyControls(j=>j.dirty)}_anyControlsTouched(){return this._anyControls(j=>j.touched)}_updatePristine(j={}){this.pristine=!this._anyControlsDirty(),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}_updateTouched(j={}){this.touched=this._anyControlsTouched(),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}_isBoxedValue(j){return"object"==typeof j&&null!==j&&2===Object.keys(j).length&&"value"in j&&"disabled"in j}_registerOnCollectionChange(j){this._onCollectionChange=j}_setUpdateStrategy(j){$r(j)&&null!=j.updateOn&&(this._updateOn=j.updateOn)}_parentMarkedDirty(j){return!j&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Tr extends Si{constructor(j=null,V,ue){super(Dr(V),dn(ue,V)),this._onChange=[],this._applyFormState(j),this._setUpdateStrategy(V),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(j,V={}){this.value=this._pendingValue=j,this._onChange.length&&!1!==V.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==V.emitViewToModelChange)),this.updateValueAndValidity(V)}patchValue(j,V={}){this.setValue(j,V)}reset(j=null,V={}){this._applyFormState(j),this.markAsPristine(V),this.markAsUntouched(V),this.setValue(this.value,V),this._pendingChange=!1}_updateValue(){}_anyControls(j){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(j){this._onChange.push(j)}_unregisterOnChange(j){uo(this._onChange,j)}registerOnDisabledChange(j){this._onDisabledChange.push(j)}_unregisterOnDisabledChange(j){uo(this._onDisabledChange,j)}_forEachChild(j){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(j){this._isBoxedValue(j)?(this.value=this._pendingValue=j.value,j.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=j}}class ei extends Si{constructor(j,V,ue){super(Dr(V),dn(ue,V)),this.controls=j,this._initObservables(),this._setUpdateStrategy(V),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(j,V){return this.controls[j]?this.controls[j]:(this.controls[j]=V,V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange),V)}addControl(j,V,ue={}){this.registerControl(j,V),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl(j,V={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],this.updateValueAndValidity({emitEvent:V.emitEvent}),this._onCollectionChange()}setControl(j,V,ue={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],V&&this.registerControl(j,V),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains(j){return this.controls.hasOwnProperty(j)&&this.controls[j].enabled}setValue(j,V={}){this._checkAllValuesPresent(j),Object.keys(j).forEach(ue=>{this._throwIfControlMissing(ue),this.controls[ue].setValue(j[ue],{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V)}patchValue(j,V={}){null!=j&&(Object.keys(j).forEach(ue=>{this.controls[ue]&&this.controls[ue].patchValue(j[ue],{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V))}reset(j={},V={}){this._forEachChild((ue,We)=>{ue.reset(j[We],{onlySelf:!0,emitEvent:V.emitEvent})}),this._updatePristine(V),this._updateTouched(V),this.updateValueAndValidity(V)}getRawValue(){return this._reduceChildren({},(j,V,ue)=>(j[ue]=V instanceof Tr?V.value:V.getRawValue(),j))}_syncPendingControls(){let j=this._reduceChildren(!1,(V,ue)=>!!ue._syncPendingControls()||V);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_throwIfControlMissing(j){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[j])throw new Error(`Cannot find form control with name: ${j}.`)}_forEachChild(j){Object.keys(this.controls).forEach(V=>{const ue=this.controls[V];ue&&j(ue,V)})}_setUpControls(){this._forEachChild(j=>{j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(j){for(const V of Object.keys(this.controls)){const ue=this.controls[V];if(this.contains(V)&&j(ue))return!0}return!1}_reduceValue(){return this._reduceChildren({},(j,V,ue)=>((V.enabled||this.disabled)&&(j[ue]=V.value),j))}_reduceChildren(j,V){let ue=j;return this._forEachChild((We,xt)=>{ue=V(ue,We,xt)}),ue}_allControlsDisabled(){for(const j of Object.keys(this.controls))if(this.controls[j].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(j){this._forEachChild((V,ue)=>{if(void 0===j[ue])throw new Error(`Must supply a value for form control with name: '${ue}'.`)})}}class br extends Si{constructor(j,V,ue){super(Dr(V),dn(ue,V)),this.controls=j,this._initObservables(),this._setUpdateStrategy(V),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(j){return this.controls[j]}push(j,V={}){this.controls.push(j),this._registerControl(j),this.updateValueAndValidity({emitEvent:V.emitEvent}),this._onCollectionChange()}insert(j,V,ue={}){this.controls.splice(j,0,V),this._registerControl(V),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt(j,V={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),this.controls.splice(j,1),this.updateValueAndValidity({emitEvent:V.emitEvent})}setControl(j,V,ue={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),this.controls.splice(j,1),V&&(this.controls.splice(j,0,V),this._registerControl(V)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(j,V={}){this._checkAllValuesPresent(j),j.forEach((ue,We)=>{this._throwIfControlMissing(We),this.at(We).setValue(ue,{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V)}patchValue(j,V={}){null!=j&&(j.forEach((ue,We)=>{this.at(We)&&this.at(We).patchValue(ue,{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V))}reset(j=[],V={}){this._forEachChild((ue,We)=>{ue.reset(j[We],{onlySelf:!0,emitEvent:V.emitEvent})}),this._updatePristine(V),this._updateTouched(V),this.updateValueAndValidity(V)}getRawValue(){return this.controls.map(j=>j instanceof Tr?j.value:j.getRawValue())}clear(j={}){this.controls.length<1||(this._forEachChild(V=>V._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:j.emitEvent}))}_syncPendingControls(){let j=this.controls.reduce((V,ue)=>!!ue._syncPendingControls()||V,!1);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_throwIfControlMissing(j){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(j))throw new Error(`Cannot find form control at index ${j}`)}_forEachChild(j){this.controls.forEach((V,ue)=>{j(V,ue)})}_updateValue(){this.value=this.controls.filter(j=>j.enabled||this.disabled).map(j=>j.value)}_anyControls(j){return this.controls.some(V=>V.enabled&&j(V))}_setUpControls(){this._forEachChild(j=>this._registerControl(j))}_checkAllValuesPresent(j){this._forEachChild((V,ue)=>{if(void 0===j[ue])throw new Error(`Must supply a value for form control at index: ${ue}.`)})}_allControlsDisabled(){for(const j of this.controls)if(j.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(j){j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)}}const Te={provide:jn,useExisting:(0,P.Gpc)(()=>ie)},X=(()=>Promise.resolve(null))();let ie=(()=>{class H extends jn{constructor(V,ue){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new P.vpe,this.form=new ei({},Fn(V),sr(ue))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(V){X.then(()=>{const ue=this._findContainer(V.path);V.control=ue.registerControl(V.name,V.control),qt(V.control,V),V.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(V)})}getControl(V){return this.form.get(V.path)}removeControl(V){X.then(()=>{const ue=this._findContainer(V.path);ue&&ue.removeControl(V.name),uo(this._directives,V)})}addFormGroup(V){X.then(()=>{const ue=this._findContainer(V.path),We=new ei({});Ln(We,V),ue.registerControl(V.name,We),We.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(V){X.then(()=>{const ue=this._findContainer(V.path);ue&&ue.removeControl(V.name)})}getFormGroup(V){return this.form.get(V.path)}updateModel(V,ue){X.then(()=>{this.form.get(V.path).setValue(ue)})}setValue(V){this.control.setValue(V)}onSubmit(V){return this.submitted=!0,Fo(this.form,this._directives),this.ngSubmit.emit(V),!1}onReset(){this.resetForm()}resetForm(V){this.form.reset(V),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(V){return V.pop(),V.length?this.form.get(V):this.form}}return H.\u0275fac=function(V){return new(V||H)(P.Y36(Lt,10),P.Y36(ct,10))},H.\u0275dir=P.lG2({type:H,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(V,ue){1&V&&P.NdJ("submit",function(xt){return ue.onSubmit(xt)})("reset",function(){return ue.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[P._Bn([Te]),P.qOj]}),H})();const cn={provide:Vn,useExisting:(0,P.Gpc)(()=>gr)},zi=(()=>Promise.resolve(null))();let gr=(()=>{class H extends Vn{constructor(V,ue,We,xt){super(),this.control=new Tr,this._registered=!1,this.update=new P.vpe,this._parent=V,this._setValidators(ue),this._setAsyncValidators(We),this.valueAccessor=Li(0,xt)}ngOnChanges(V){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in V&&this._updateDisabled(V),wr(V,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?mn(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(V){this.viewModel=V,this.update.emit(V)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(V){zi.then(()=>{this.control.setValue(V,{emitViewToModelChange:!1})})}_updateDisabled(V){const ue=V.isDisabled.currentValue,We=""===ue||ue&&"false"!==ue;zi.then(()=>{We&&!this.control.disabled?this.control.disable():!We&&this.control.disabled&&this.control.enable()})}}return H.\u0275fac=function(V){return new(V||H)(P.Y36(jn,9),P.Y36(Lt,10),P.Y36(ct,10),P.Y36(ge,10))},H.\u0275dir=P.lG2({type:H,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[P._Bn([cn]),P.qOj,P.TTD]}),H})(),Vi=(()=>{class H{}return H.\u0275fac=function(V){return new(V||H)},H.\u0275dir=P.lG2({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),H})(),Hn=(()=>{class H{}return H.\u0275fac=function(V){return new(V||H)},H.\u0275mod=P.oAB({type:H}),H.\u0275inj=P.cJS({}),H})();const Zi=new P.OlP("NgModelWithFormControlWarning"),ds={provide:jn,useExisting:(0,P.Gpc)(()=>Hr)};let Hr=(()=>{class H extends jn{constructor(V,ue){super(),this.validators=V,this.asyncValidators=ue,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new P.vpe,this._setValidators(V),this._setAsyncValidators(ue)}ngOnChanges(V){this._checkFormPresent(),V.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(tt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(V){const ue=this.form.get(V.path);return qt(ue,V),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(V),ue}getControl(V){return this.form.get(V.path)}removeControl(V){Re(V.control||null,V,!1),uo(this.directives,V)}addFormGroup(V){this._setUpFormContainer(V)}removeFormGroup(V){this._cleanUpFormContainer(V)}getFormGroup(V){return this.form.get(V.path)}addFormArray(V){this._setUpFormContainer(V)}removeFormArray(V){this._cleanUpFormContainer(V)}getFormArray(V){return this.form.get(V.path)}updateModel(V,ue){this.form.get(V.path).setValue(ue)}onSubmit(V){return this.submitted=!0,Fo(this.form,this.directives),this.ngSubmit.emit(V),!1}onReset(){this.resetForm()}resetForm(V){this.form.reset(V),this.submitted=!1}_updateDomValue(){this.directives.forEach(V=>{const ue=V.control,We=this.form.get(V.path);ue!==We&&(Re(ue||null,V),We instanceof Tr&&(qt(We,V),V.control=We))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(V){const ue=this.form.get(V.path);Ln(ue,V),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(V){if(this.form){const ue=this.form.get(V.path);ue&&function(H,j){return tt(H,j)}(ue,V)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){et(this.form,this),this._oldForm&&tt(this._oldForm,this)}_checkFormPresent(){}}return H.\u0275fac=function(V){return new(V||H)(P.Y36(Lt,10),P.Y36(ct,10))},H.\u0275dir=P.lG2({type:H,selectors:[["","formGroup",""]],hostBindings:function(V,ue){1&V&&P.NdJ("submit",function(xt){return ue.onSubmit(xt)})("reset",function(){return ue.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[P._Bn([ds]),P.qOj,P.TTD]}),H})();const Us={provide:Vn,useExisting:(0,P.Gpc)(()=>rs)};let rs=(()=>{class H extends Vn{constructor(V,ue,We,xt,wn){super(),this._ngModelWarningConfig=wn,this._added=!1,this.update=new P.vpe,this._ngModelWarningSent=!1,this._parent=V,this._setValidators(ue),this._setAsyncValidators(We),this.valueAccessor=Li(0,xt)}set isDisabled(V){}ngOnChanges(V){this._added||this._setUpControl(),wr(V,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(V){this.viewModel=V,this.update.emit(V)}get path(){return mn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return H.\u0275fac=function(V){return new(V||H)(P.Y36(jn,13),P.Y36(Lt,10),P.Y36(ct,10),P.Y36(ge,10),P.Y36(Zi,8))},H.\u0275dir=P.lG2({type:H,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[P._Bn([Us]),P.qOj,P.TTD]}),H._ngModelWarningSentOnce=!1,H})(),$=(()=>{class H{}return H.\u0275fac=function(V){return new(V||H)},H.\u0275mod=P.oAB({type:H}),H.\u0275inj=P.cJS({imports:[[Hn]]}),H})(),k=(()=>{class H{}return H.\u0275fac=function(V){return new(V||H)},H.\u0275mod=P.oAB({type:H}),H.\u0275inj=P.cJS({imports:[$]}),H})(),ee=(()=>{class H{static withConfig(V){return{ngModule:H,providers:[{provide:Zi,useValue:V.warnOnNgModelWithFormControl}]}}}return H.\u0275fac=function(V){return new(V||H)},H.\u0275mod=P.oAB({type:H}),H.\u0275inj=P.cJS({imports:[$]}),H})(),je=(()=>{class H{group(V,ue=null){const We=this._reduceControls(V);let dr,xt=null,wn=null;return null!=ue&&(function(H){return void 0!==H.asyncValidators||void 0!==H.validators||void 0!==H.updateOn}(ue)?(xt=null!=ue.validators?ue.validators:null,wn=null!=ue.asyncValidators?ue.asyncValidators:null,dr=null!=ue.updateOn?ue.updateOn:void 0):(xt=null!=ue.validator?ue.validator:null,wn=null!=ue.asyncValidator?ue.asyncValidator:null)),new ei(We,{asyncValidators:wn,updateOn:dr,validators:xt})}control(V,ue,We){return new Tr(V,ue,We)}array(V,ue,We){const xt=V.map(wn=>this._createControl(wn));return new br(xt,ue,We)}_reduceControls(V){const ue={};return Object.keys(V).forEach(We=>{ue[We]=this._createControl(V[We])}),ue}_createControl(V){return V instanceof Tr||V instanceof ei||V instanceof br?V:Array.isArray(V)?this.control(V[0],V.length>1?V[1]:null,V.length>2?V[2]:null):this.control(V)}}return H.\u0275fac=function(V){return new(V||H)},H.\u0275prov=(0,P.Yz7)({factory:function(){return new H},token:H,providedIn:ee}),H})()},6237:(Ht,it,K)=>{"use strict";K.d(it,{Qb:()=>_r,PW:()=>Rs});var P=K(7716),g=K(9075),J=K(7238);function C(){return"undefined"!=typeof window&&void 0!==window.document}function Ve(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function we(oe){switch(oe.length){case 0:return new J.ZN;case 1:return oe[0];default:return new J.ZE(oe)}}function Ne(oe,A,M,B,ae={},Ce={}){const Fe=[],Le=[];let ut=-1,mt=null;if(B.forEach(Zt=>{const xn=Zt.offset,lr=xn==ut,Sr=lr&&mt||{};Object.keys(Zt).forEach(qn=>{let Nn=qn,mr=Zt[qn];if("offset"!==qn)switch(Nn=A.normalizePropertyName(Nn,Fe),mr){case J.k1:mr=ae[qn];break;case J.l3:mr=Ce[qn];break;default:mr=A.normalizeStyleValue(qn,Nn,mr,Fe)}Sr[Nn]=mr}),lr||Le.push(Sr),mt=Sr,ut=xn}),Fe.length){const Zt="\n - ";throw new Error(`Unable to animate due to the following errors:${Zt}${Fe.join(Zt)}`)}return Le}function he(oe,A,M,B){switch(A){case"start":oe.onStart(()=>B(M&&be(M,"start",oe)));break;case"done":oe.onDone(()=>B(M&&be(M,"done",oe)));break;case"destroy":oe.onDestroy(()=>B(M&&be(M,"destroy",oe)))}}function be(oe,A,M){const B=M.totalTime,Ce=se(oe.element,oe.triggerName,oe.fromState,oe.toState,A||oe.phaseName,null==B?oe.totalTime:B,!!M.disabled),Fe=oe._data;return null!=Fe&&(Ce._data=Fe),Ce}function se(oe,A,M,B,ae="",Ce=0,Fe){return{element:oe,triggerName:A,fromState:M,toState:B,phaseName:ae,totalTime:Ce,disabled:!!Fe}}function Ae(oe,A,M){let B;return oe instanceof Map?(B=oe.get(A),B||oe.set(A,B=M)):(B=oe[A],B||(B=oe[A]=M)),B}function ge(oe){const A=oe.indexOf(":");return[oe.substring(1,A),oe.substr(A+1)]}let Ee=(oe,A)=>!1,Ue=(oe,A)=>!1,ne=(oe,A,M)=>[];const At=Ve();(At||"undefined"!=typeof Element)&&(Ee=C()?(oe,A)=>{for(;A&&A!==document.documentElement;){if(A===oe)return!0;A=A.parentNode||A.host}return!1}:(oe,A)=>oe.contains(A),Ue=(()=>{if(At||Element.prototype.matches)return(oe,A)=>oe.matches(A);{const oe=Element.prototype,A=oe.matchesSelector||oe.mozMatchesSelector||oe.msMatchesSelector||oe.oMatchesSelector||oe.webkitMatchesSelector;return A?(M,B)=>A.apply(M,[B]):Ue}})(),ne=(oe,A,M)=>{let B=[];if(M){const ae=oe.querySelectorAll(A);for(let Ce=0;Ce<ae.length;Ce++)B.push(ae[Ce])}else{const ae=oe.querySelector(A);ae&&B.push(ae)}return B});let Lt=null,ct=!1;function $t(oe){Lt||(Lt=("undefined"!=typeof document?document.body:null)||{},ct=!!Lt.style&&"WebkitAppearance"in Lt.style);let A=!0;return Lt.style&&!function(oe){return"ebkit"==oe.substring(1,6)}(oe)&&(A=oe in Lt.style,!A&&ct&&(A="Webkit"+oe.charAt(0).toUpperCase()+oe.substr(1)in Lt.style)),A}const En=Ue,Dt=Ee,Je=ne;function ot(oe){const A={};return Object.keys(oe).forEach(M=>{const B=M.replace(/([a-z])([A-Z])/g,"$1-$2");A[B]=oe[M]}),A}let st=(()=>{class oe{validateStyleProperty(M){return $t(M)}matchesElement(M,B){return En(M,B)}containsElement(M,B){return Dt(M,B)}query(M,B,ae){return Je(M,B,ae)}computeStyle(M,B,ae){return ae||""}animate(M,B,ae,Ce,Fe,Le=[],ut){return new J.ZN(ae,Ce)}}return oe.\u0275fac=function(M){return new(M||oe)},oe.\u0275prov=P.Yz7({token:oe,factory:oe.\u0275fac}),oe})(),nt=(()=>{class oe{}return oe.NOOP=new st,oe})();const ln="ng-enter",Tn="ng-leave",Nt="ng-trigger",Jt=".ng-trigger",Gt="ng-animating",Fn=".ng-animating";function Cn(oe){if("number"==typeof oe)return oe;const A=oe.match(/^(-?[\.\d]+)(m?s)/);return!A||A.length<2?0:sr(parseFloat(A[1]),A[2])}function sr(oe,A){switch(A){case"s":return 1e3*oe;default:return oe}}function zn(oe,A,M){return oe.hasOwnProperty("duration")?oe:function(oe,A,M){let ae,Ce=0,Fe="";if("string"==typeof oe){const Le=oe.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Le)return A.push(`The provided timing value "${oe}" is invalid.`),{duration:0,delay:0,easing:""};ae=sr(parseFloat(Le[1]),Le[2]);const ut=Le[3];null!=ut&&(Ce=sr(parseFloat(ut),Le[4]));const mt=Le[5];mt&&(Fe=mt)}else ae=oe;if(!M){let Le=!1,ut=A.length;ae<0&&(A.push("Duration values below 0 are not allowed for this animation step."),Le=!0),Ce<0&&(A.push("Delay values below 0 are not allowed for this animation step."),Le=!0),Le&&A.splice(ut,0,`The provided timing value "${oe}" is invalid.`)}return{duration:ae,delay:Ce,easing:Fe}}(oe,A,M)}function Xn(oe,A={}){return Object.keys(oe).forEach(M=>{A[M]=oe[M]}),A}function An(oe,A,M={}){if(A)for(let B in oe)M[B]=oe[B];else Xn(oe,M);return M}function Oi(oe,A,M){return M?A+":"+M+";":""}function gn(oe){let A="";for(let M=0;M<oe.style.length;M++){const B=oe.style.item(M);A+=Oi(0,B,oe.style.getPropertyValue(B))}for(const M in oe.style)oe.style.hasOwnProperty(M)&&!M.startsWith("_")&&(A+=Oi(0,Mt(M),oe.style[M]));oe.setAttribute("style",A)}function Yt(oe,A,M){oe.style&&(Object.keys(A).forEach(B=>{const ae=ze(B);M&&!M.hasOwnProperty(B)&&(M[B]=oe.style[ae]),oe.style[ae]=A[B]}),Ve()&&gn(oe))}function jn(oe,A){oe.style&&(Object.keys(A).forEach(M=>{const B=ze(M);oe.style[B]=""}),Ve()&&gn(oe))}function Vn(oe){return Array.isArray(oe)?1==oe.length?oe[0]:(0,J.vP)(oe):oe}const hr=new RegExp("{{\\s*(.+?)\\s*}}","g");function Br(oe){let A=[];if("string"==typeof oe){let M;for(;M=hr.exec(oe);)A.push(M[1]);hr.lastIndex=0}return A}function $n(oe,A,M){const B=oe.toString(),ae=B.replace(hr,(Ce,Fe)=>{let Le=A[Fe];return A.hasOwnProperty(Fe)||(M.push(`Please provide a value for the animation param ${Fe}`),Le=""),Le.toString()});return ae==B?oe:ae}function Tt(oe){const A=[];let M=oe.next();for(;!M.done;)A.push(M.value),M=oe.next();return A}const $e=/-+([a-z0-9])/g;function ze(oe){return oe.replace($e,(...A)=>A[1].toUpperCase())}function Mt(oe){return oe.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Pt(oe,A){return 0===oe||0===A}function an(oe,A,M){const B=Object.keys(M);if(B.length&&A.length){let Ce=A[0],Fe=[];if(B.forEach(Le=>{Ce.hasOwnProperty(Le)||Fe.push(Le),Ce[Le]=M[Le]}),Fe.length)for(var ae=1;ae<A.length;ae++){let Le=A[ae];Fe.forEach(function(ut){Le[ut]=He(oe,ut)})}}return A}function Ot(oe,A,M){switch(A.type){case 7:return oe.visitTrigger(A,M);case 0:return oe.visitState(A,M);case 1:return oe.visitTransition(A,M);case 2:return oe.visitSequence(A,M);case 3:return oe.visitGroup(A,M);case 4:return oe.visitAnimate(A,M);case 5:return oe.visitKeyframes(A,M);case 6:return oe.visitStyle(A,M);case 8:return oe.visitReference(A,M);case 9:return oe.visitAnimateChild(A,M);case 10:return oe.visitAnimateRef(A,M);case 11:return oe.visitQuery(A,M);case 12:return oe.visitStagger(A,M);default:throw new Error(`Unable to resolve animation metadata node #${A.type}`)}}function He(oe,A){return window.getComputedStyle(oe)[A]}function bt(oe,A){const M=[];return"string"==typeof oe?oe.split(/\s*,\s*/).forEach(B=>function(oe,A,M){if(":"==oe[0]){const ut=function(oe,A){switch(oe){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(M,B)=>parseFloat(B)>parseFloat(M);case":decrement":return(M,B)=>parseFloat(B)<parseFloat(M);default:return A.push(`The transition alias value "${oe}" is not supported`),"* => *"}}(oe,M);if("function"==typeof ut)return void A.push(ut);oe=ut}const B=oe.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==B||B.length<4)return M.push(`The provided transition expression "${oe}" is not supported`),A;const ae=B[1],Ce=B[2],Fe=B[3];A.push(qt(ae,Fe));"<"==Ce[0]&&!("*"==ae&&"*"==Fe)&&A.push(qt(Fe,ae))}(B,M,A)):M.push(oe),M}const hn=new Set(["true","1"]),mn=new Set(["false","0"]);function qt(oe,A){const M=hn.has(oe)||mn.has(oe),B=hn.has(A)||mn.has(A);return(ae,Ce)=>{let Fe="*"==oe||oe==ae,Le="*"==A||A==Ce;return!Fe&&M&&"boolean"==typeof ae&&(Fe=ae?hn.has(oe):mn.has(oe)),!Le&&B&&"boolean"==typeof Ce&&(Le=Ce?hn.has(A):mn.has(A)),Fe&&Le}}const Pe=new RegExp("s*:selfs*,?","g");function Ye(oe,A,M){return new tt(oe).build(A,M)}class tt{constructor(A){this._driver=A}build(A,M){const B=new rr(M);return this._resetContextStyleTimingState(B),Ot(this,Vn(A),B)}_resetContextStyleTimingState(A){A.currentQuerySelector="",A.collectedStyles={},A.collectedStyles[""]={},A.currentTime=0}visitTrigger(A,M){let B=M.queryCount=0,ae=M.depCount=0;const Ce=[],Fe=[];return"@"==A.name.charAt(0)&&M.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),A.definitions.forEach(Le=>{if(this._resetContextStyleTimingState(M),0==Le.type){const ut=Le,mt=ut.name;mt.toString().split(/\s*,\s*/).forEach(Zt=>{ut.name=Zt,Ce.push(this.visitState(ut,M))}),ut.name=mt}else if(1==Le.type){const ut=this.visitTransition(Le,M);B+=ut.queryCount,ae+=ut.depCount,Fe.push(ut)}else M.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:A.name,states:Ce,transitions:Fe,queryCount:B,depCount:ae,options:null}}visitState(A,M){const B=this.visitStyle(A.styles,M),ae=A.options&&A.options.params||null;if(B.containsDynamicStyles){const Ce=new Set,Fe=ae||{};if(B.styles.forEach(Le=>{if(Ln(Le)){const ut=Le;Object.keys(ut).forEach(mt=>{Br(ut[mt]).forEach(Zt=>{Fe.hasOwnProperty(Zt)||Ce.add(Zt)})})}}),Ce.size){const Le=Tt(Ce.values());M.errors.push(`state("${A.name}", ...) must define default values for all the following style substitutions: ${Le.join(", ")}`)}}return{type:0,name:A.name,style:B,options:ae?{params:ae}:null}}visitTransition(A,M){M.queryCount=0,M.depCount=0;const B=Ot(this,Vn(A.animation),M);return{type:1,matchers:bt(A.expr,M.errors),animation:B,queryCount:M.queryCount,depCount:M.depCount,options:jr(A.options)}}visitSequence(A,M){return{type:2,steps:A.steps.map(B=>Ot(this,B,M)),options:jr(A.options)}}visitGroup(A,M){const B=M.currentTime;let ae=0;const Ce=A.steps.map(Fe=>{M.currentTime=B;const Le=Ot(this,Fe,M);return ae=Math.max(ae,M.currentTime),Le});return M.currentTime=ae,{type:3,steps:Ce,options:jr(A.options)}}visitAnimate(A,M){const B=function(oe,A){let M=null;if(oe.hasOwnProperty("duration"))M=oe;else if("number"==typeof oe)return Kr(zn(oe,A).duration,0,"");const B=oe;if(B.split(/\s+/).some(Ce=>"{"==Ce.charAt(0)&&"{"==Ce.charAt(1))){const Ce=Kr(0,0,"");return Ce.dynamic=!0,Ce.strValue=B,Ce}return M=M||zn(B,A),Kr(M.duration,M.delay,M.easing)}(A.timings,M.errors);M.currentAnimateTimings=B;let ae,Ce=A.styles?A.styles:(0,J.oB)({});if(5==Ce.type)ae=this.visitKeyframes(Ce,M);else{let Fe=A.styles,Le=!1;if(!Fe){Le=!0;const mt={};B.easing&&(mt.easing=B.easing),Fe=(0,J.oB)(mt)}M.currentTime+=B.duration+B.delay;const ut=this.visitStyle(Fe,M);ut.isEmptyStep=Le,ae=ut}return M.currentAnimateTimings=null,{type:4,timings:B,style:ae,options:null}}visitStyle(A,M){const B=this._makeStyleAst(A,M);return this._validateStyleAst(B,M),B}_makeStyleAst(A,M){const B=[];Array.isArray(A.styles)?A.styles.forEach(Fe=>{"string"==typeof Fe?Fe==J.l3?B.push(Fe):M.errors.push(`The provided style string value ${Fe} is not allowed.`):B.push(Fe)}):B.push(A.styles);let ae=!1,Ce=null;return B.forEach(Fe=>{if(Ln(Fe)){const Le=Fe,ut=Le.easing;if(ut&&(Ce=ut,delete Le.easing),!ae)for(let mt in Le)if(Le[mt].toString().indexOf("{{")>=0){ae=!0;break}}}),{type:6,styles:B,easing:Ce,offset:A.offset,containsDynamicStyles:ae,options:null}}_validateStyleAst(A,M){const B=M.currentAnimateTimings;let ae=M.currentTime,Ce=M.currentTime;B&&Ce>0&&(Ce-=B.duration+B.delay),A.styles.forEach(Fe=>{"string"!=typeof Fe&&Object.keys(Fe).forEach(Le=>{if(!this._driver.validateStyleProperty(Le))return void M.errors.push(`The provided animation property "${Le}" is not a supported CSS property for animations`);const ut=M.collectedStyles[M.currentQuerySelector],mt=ut[Le];let Zt=!0;mt&&(Ce!=ae&&Ce>=mt.startTime&&ae<=mt.endTime&&(M.errors.push(`The CSS property "${Le}" that exists between the times of "${mt.startTime}ms" and "${mt.endTime}ms" is also being animated in a parallel animation between the times of "${Ce}ms" and "${ae}ms"`),Zt=!1),Ce=mt.startTime),Zt&&(ut[Le]={startTime:Ce,endTime:ae}),M.options&&function(oe,A,M){const B=A.params||{},ae=Br(oe);ae.length&&ae.forEach(Ce=>{B.hasOwnProperty(Ce)||M.push(`Unable to resolve the local animation param ${Ce} in the given list of values`)})}(Fe[Le],M.options,M.errors)})})}visitKeyframes(A,M){const B={type:5,styles:[],options:null};if(!M.currentAnimateTimings)return M.errors.push("keyframes() must be placed inside of a call to animate()"),B;let Ce=0;const Fe=[];let Le=!1,ut=!1,mt=0;const Zt=A.steps.map(si=>{const Ur=this._makeStyleAst(si,M);let Xi=null!=Ur.offset?Ur.offset:function(oe){if("string"==typeof oe)return null;let A=null;if(Array.isArray(oe))oe.forEach(M=>{if(Ln(M)&&M.hasOwnProperty("offset")){const B=M;A=parseFloat(B.offset),delete B.offset}});else if(Ln(oe)&&oe.hasOwnProperty("offset")){const M=oe;A=parseFloat(M.offset),delete M.offset}return A}(Ur.styles),ai=0;return null!=Xi&&(Ce++,ai=Ur.offset=Xi),ut=ut||ai<0||ai>1,Le=Le||ai<mt,mt=ai,Fe.push(ai),Ur});ut&&M.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),Le&&M.errors.push("Please ensure that all keyframe offsets are in order");const xn=A.steps.length;let lr=0;Ce>0&&Ce<xn?M.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==Ce&&(lr=1/(xn-1));const Sr=xn-1,qn=M.currentTime,Nn=M.currentAnimateTimings,mr=Nn.duration;return Zt.forEach((si,Ur)=>{const Xi=lr>0?Ur==Sr?1:lr*Ur:Fe[Ur],ai=Xi*mr;M.currentTime=qn+Nn.delay+ai,Nn.duration=ai,this._validateStyleAst(si,M),si.offset=Xi,B.styles.push(si)}),B}visitReference(A,M){return{type:8,animation:Ot(this,Vn(A.animation),M),options:jr(A.options)}}visitAnimateChild(A,M){return M.depCount++,{type:9,options:jr(A.options)}}visitAnimateRef(A,M){return{type:10,animation:this.visitReference(A.animation,M),options:jr(A.options)}}visitQuery(A,M){const B=M.currentQuerySelector,ae=A.options||{};M.queryCount++,M.currentQuery=A;const[Ce,Fe]=function(oe){const A=!!oe.split(/\s*,\s*/).find(M=>":self"==M);return A&&(oe=oe.replace(Pe,"")),[oe=oe.replace(/@\*/g,Jt).replace(/@\w+/g,M=>Jt+"-"+M.substr(1)).replace(/:animating/g,Fn),A]}(A.selector);M.currentQuerySelector=B.length?B+" "+Ce:Ce,Ae(M.collectedStyles,M.currentQuerySelector,{});const Le=Ot(this,Vn(A.animation),M);return M.currentQuery=null,M.currentQuerySelector=B,{type:11,selector:Ce,limit:ae.limit||0,optional:!!ae.optional,includeSelf:Fe,animation:Le,originalSelector:A.selector,options:jr(A.options)}}visitStagger(A,M){M.currentQuery||M.errors.push("stagger() can only be used inside of query()");const B="full"===A.timings?{duration:0,delay:0,easing:"full"}:zn(A.timings,M.errors,!0);return{type:12,animation:Ot(this,Vn(A.animation),M),timings:B,options:null}}}class rr{constructor(A){this.errors=A,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Ln(oe){return!Array.isArray(oe)&&"object"==typeof oe}function jr(oe){return oe?(oe=Xn(oe)).params&&(oe.params=function(oe){return oe?Xn(oe):null}(oe.params)):oe={},oe}function Kr(oe,A,M){return{duration:oe,delay:A,easing:M}}function wr(oe,A,M,B,ae,Ce,Fe=null,Le=!1){return{type:1,element:oe,keyframes:A,preStyleProps:M,postStyleProps:B,duration:ae,delay:Ce,totalTime:ae+Ce,easing:Fe,subTimeline:Le}}class xi{constructor(){this._map=new Map}consume(A){let M=this._map.get(A);return M?this._map.delete(A):M=[],M}append(A,M){let B=this._map.get(A);B||this._map.set(A,B=[]),B.push(...M)}has(A){return this._map.has(A)}clear(){this._map.clear()}}const uo=new RegExp(":enter","g"),Nr=new RegExp(":leave","g");function ur(oe,A,M,B,ae,Ce={},Fe={},Le,ut,mt=[]){return(new yn).buildKeyframes(oe,A,M,B,ae,Ce,Fe,Le,ut,mt)}class yn{buildKeyframes(A,M,B,ae,Ce,Fe,Le,ut,mt,Zt=[]){mt=mt||new xi;const xn=new eo(A,M,mt,ae,Ce,Zt,[]);xn.options=ut,xn.currentTimeline.setStyles([Fe],null,xn.errors,ut),Ot(this,B,xn);const lr=xn.timelines.filter(Sr=>Sr.containsAnimation());if(lr.length&&Object.keys(Le).length){const Sr=lr[lr.length-1];Sr.allowOnlyTimelineStyles()||Sr.setStyles([Le],null,xn.errors,ut)}return lr.length?lr.map(Sr=>Sr.buildKeyframes()):[wr(M,[],[],[],0,0,"",!1)]}visitTrigger(A,M){}visitState(A,M){}visitTransition(A,M){}visitAnimateChild(A,M){const B=M.subInstructions.consume(M.element);if(B){const ae=M.createSubContext(A.options),Ce=M.currentTimeline.currentTime,Fe=this._visitSubInstructions(B,ae,ae.options);Ce!=Fe&&M.transformIntoNewTimeline(Fe)}M.previousNode=A}visitAnimateRef(A,M){const B=M.createSubContext(A.options);B.transformIntoNewTimeline(),this.visitReference(A.animation,B),M.transformIntoNewTimeline(B.currentTimeline.currentTime),M.previousNode=A}_visitSubInstructions(A,M,B){let Ce=M.currentTimeline.currentTime;const Fe=null!=B.duration?Cn(B.duration):null,Le=null!=B.delay?Cn(B.delay):null;return 0!==Fe&&A.forEach(ut=>{const mt=M.appendInstructionToTimeline(ut,Fe,Le);Ce=Math.max(Ce,mt.duration+mt.delay)}),Ce}visitReference(A,M){M.updateOptions(A.options,!0),Ot(this,A.animation,M),M.previousNode=A}visitSequence(A,M){const B=M.subContextCount;let ae=M;const Ce=A.options;if(Ce&&(Ce.params||Ce.delay)&&(ae=M.createSubContext(Ce),ae.transformIntoNewTimeline(),null!=Ce.delay)){6==ae.previousNode.type&&(ae.currentTimeline.snapshotCurrentStyles(),ae.previousNode=Vr);const Fe=Cn(Ce.delay);ae.delayNextStep(Fe)}A.steps.length&&(A.steps.forEach(Fe=>Ot(this,Fe,ae)),ae.currentTimeline.applyStylesToKeyframe(),ae.subContextCount>B&&ae.transformIntoNewTimeline()),M.previousNode=A}visitGroup(A,M){const B=[];let ae=M.currentTimeline.currentTime;const Ce=A.options&&A.options.delay?Cn(A.options.delay):0;A.steps.forEach(Fe=>{const Le=M.createSubContext(A.options);Ce&&Le.delayNextStep(Ce),Ot(this,Fe,Le),ae=Math.max(ae,Le.currentTimeline.currentTime),B.push(Le.currentTimeline)}),B.forEach(Fe=>M.currentTimeline.mergeTimelineCollectedStyles(Fe)),M.transformIntoNewTimeline(ae),M.previousNode=A}_visitTiming(A,M){if(A.dynamic){const B=A.strValue;return zn(M.params?$n(B,M.params,M.errors):B,M.errors)}return{duration:A.duration,delay:A.delay,easing:A.easing}}visitAnimate(A,M){const B=M.currentAnimateTimings=this._visitTiming(A.timings,M),ae=M.currentTimeline;B.delay&&(M.incrementTime(B.delay),ae.snapshotCurrentStyles());const Ce=A.style;5==Ce.type?this.visitKeyframes(Ce,M):(M.incrementTime(B.duration),this.visitStyle(Ce,M),ae.applyStylesToKeyframe()),M.currentAnimateTimings=null,M.previousNode=A}visitStyle(A,M){const B=M.currentTimeline,ae=M.currentAnimateTimings;!ae&&B.getCurrentStyleProperties().length&&B.forwardFrame();const Ce=ae&&ae.easing||A.easing;A.isEmptyStep?B.applyEmptyStep(Ce):B.setStyles(A.styles,Ce,M.errors,M.options),M.previousNode=A}visitKeyframes(A,M){const B=M.currentAnimateTimings,ae=M.currentTimeline.duration,Ce=B.duration,Le=M.createSubContext().currentTimeline;Le.easing=B.easing,A.styles.forEach(ut=>{Le.forwardTime((ut.offset||0)*Ce),Le.setStyles(ut.styles,ut.easing,M.errors,M.options),Le.applyStylesToKeyframe()}),M.currentTimeline.mergeTimelineCollectedStyles(Le),M.transformIntoNewTimeline(ae+Ce),M.previousNode=A}visitQuery(A,M){const B=M.currentTimeline.currentTime,ae=A.options||{},Ce=ae.delay?Cn(ae.delay):0;Ce&&(6===M.previousNode.type||0==B&&M.currentTimeline.getCurrentStyleProperties().length)&&(M.currentTimeline.snapshotCurrentStyles(),M.previousNode=Vr);let Fe=B;const Le=M.invokeQuery(A.selector,A.originalSelector,A.limit,A.includeSelf,!!ae.optional,M.errors);M.currentQueryTotal=Le.length;let ut=null;Le.forEach((mt,Zt)=>{M.currentQueryIndex=Zt;const xn=M.createSubContext(A.options,mt);Ce&&xn.delayNextStep(Ce),mt===M.element&&(ut=xn.currentTimeline),Ot(this,A.animation,xn),xn.currentTimeline.applyStylesToKeyframe(),Fe=Math.max(Fe,xn.currentTimeline.currentTime)}),M.currentQueryIndex=0,M.currentQueryTotal=0,M.transformIntoNewTimeline(Fe),ut&&(M.currentTimeline.mergeTimelineCollectedStyles(ut),M.currentTimeline.snapshotCurrentStyles()),M.previousNode=A}visitStagger(A,M){const B=M.parentContext,ae=M.currentTimeline,Ce=A.timings,Fe=Math.abs(Ce.duration),Le=Fe*(M.currentQueryTotal-1);let ut=Fe*M.currentQueryIndex;switch(Ce.duration<0?"reverse":Ce.easing){case"reverse":ut=Le-ut;break;case"full":ut=B.currentStaggerTime}const Zt=M.currentTimeline;ut&&Zt.delayNextStep(ut);const xn=Zt.currentTime;Ot(this,A.animation,M),M.previousNode=A,B.currentStaggerTime=ae.currentTime-xn+(ae.startTime-B.currentTimeline.startTime)}}const Vr={};class eo{constructor(A,M,B,ae,Ce,Fe,Le,ut){this._driver=A,this.element=M,this.subInstructions=B,this._enterClassName=ae,this._leaveClassName=Ce,this.errors=Fe,this.timelines=Le,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Vr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ut||new Dr(this._driver,M,0),Le.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(A,M){if(!A)return;const B=A;let ae=this.options;null!=B.duration&&(ae.duration=Cn(B.duration)),null!=B.delay&&(ae.delay=Cn(B.delay));const Ce=B.params;if(Ce){let Fe=ae.params;Fe||(Fe=this.options.params={}),Object.keys(Ce).forEach(Le=>{(!M||!Fe.hasOwnProperty(Le))&&(Fe[Le]=$n(Ce[Le],Fe,this.errors))})}}_copyOptions(){const A={};if(this.options){const M=this.options.params;if(M){const B=A.params={};Object.keys(M).forEach(ae=>{B[ae]=M[ae]})}}return A}createSubContext(A=null,M,B){const ae=M||this.element,Ce=new eo(this._driver,ae,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(ae,B||0));return Ce.previousNode=this.previousNode,Ce.currentAnimateTimings=this.currentAnimateTimings,Ce.options=this._copyOptions(),Ce.updateOptions(A),Ce.currentQueryIndex=this.currentQueryIndex,Ce.currentQueryTotal=this.currentQueryTotal,Ce.parentContext=this,this.subContextCount++,Ce}transformIntoNewTimeline(A){return this.previousNode=Vr,this.currentTimeline=this.currentTimeline.fork(this.element,A),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(A,M,B){const ae={duration:null!=M?M:A.duration,delay:this.currentTimeline.currentTime+(null!=B?B:0)+A.delay,easing:""},Ce=new Xt(this._driver,A.element,A.keyframes,A.preStyleProps,A.postStyleProps,ae,A.stretchStartingKeyframe);return this.timelines.push(Ce),ae}incrementTime(A){this.currentTimeline.forwardTime(this.currentTimeline.duration+A)}delayNextStep(A){A>0&&this.currentTimeline.delayNextStep(A)}invokeQuery(A,M,B,ae,Ce,Fe){let Le=[];if(ae&&Le.push(this.element),A.length>0){A=(A=A.replace(uo,"."+this._enterClassName)).replace(Nr,"."+this._leaveClassName);let mt=this._driver.query(this.element,A,1!=B);0!==B&&(mt=B<0?mt.slice(mt.length+B,mt.length):mt.slice(0,B)),Le.push(...mt)}return!Ce&&0==Le.length&&Fe.push(`\`query("${M}")\` returned zero elements. (Use \`query("${M}", { optional: true })\` if you wish to allow this.)`),Le}}class Dr{constructor(A,M,B,ae){this._driver=A,this.element=M,this.startTime=B,this._elementTimelineStylesLookup=ae,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(M),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(M,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(A){const M=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||M?(this.forwardTime(this.currentTime+A),M&&this.snapshotCurrentStyles()):this.startTime+=A}fork(A,M){return this.applyStylesToKeyframe(),new Dr(this._driver,A,M||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(A){this.applyStylesToKeyframe(),this.duration=A,this._loadKeyframe()}_updateStyle(A,M){this._localTimelineStyles[A]=M,this._globalTimelineStyles[A]=M,this._styleSummary[A]={time:this.currentTime,value:M}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(A){A&&(this._previousKeyframe.easing=A),Object.keys(this._globalTimelineStyles).forEach(M=>{this._backFill[M]=this._globalTimelineStyles[M]||J.l3,this._currentKeyframe[M]=J.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(A,M,B,ae){M&&(this._previousKeyframe.easing=M);const Ce=ae&&ae.params||{},Fe=function(oe,A){const M={};let B;return oe.forEach(ae=>{"*"===ae?(B=B||Object.keys(A),B.forEach(Ce=>{M[Ce]=J.l3})):An(ae,!1,M)}),M}(A,this._globalTimelineStyles);Object.keys(Fe).forEach(Le=>{const ut=$n(Fe[Le],Ce,B);this._pendingStyles[Le]=ut,this._localTimelineStyles.hasOwnProperty(Le)||(this._backFill[Le]=this._globalTimelineStyles.hasOwnProperty(Le)?this._globalTimelineStyles[Le]:J.l3),this._updateStyle(Le,ut)})}applyStylesToKeyframe(){const A=this._pendingStyles,M=Object.keys(A);0!=M.length&&(this._pendingStyles={},M.forEach(B=>{this._currentKeyframe[B]=A[B]}),Object.keys(this._localTimelineStyles).forEach(B=>{this._currentKeyframe.hasOwnProperty(B)||(this._currentKeyframe[B]=this._localTimelineStyles[B])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(A=>{const M=this._localTimelineStyles[A];this._pendingStyles[A]=M,this._updateStyle(A,M)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const A=[];for(let M in this._currentKeyframe)A.push(M);return A}mergeTimelineCollectedStyles(A){Object.keys(A._styleSummary).forEach(M=>{const B=this._styleSummary[M],ae=A._styleSummary[M];(!B||ae.time>B.time)&&this._updateStyle(M,ae.value)})}buildKeyframes(){this.applyStylesToKeyframe();const A=new Set,M=new Set,B=1===this._keyframes.size&&0===this.duration;let ae=[];this._keyframes.forEach((Le,ut)=>{const mt=An(Le,!0);Object.keys(mt).forEach(Zt=>{const xn=mt[Zt];xn==J.k1?A.add(Zt):xn==J.l3&&M.add(Zt)}),B||(mt.offset=ut/this.duration),ae.push(mt)});const Ce=A.size?Tt(A.values()):[],Fe=M.size?Tt(M.values()):[];if(B){const Le=ae[0],ut=Xn(Le);Le.offset=0,ut.offset=1,ae=[Le,ut]}return wr(this.element,ae,Ce,Fe,this.duration,this.startTime,this.easing,!1)}}class Xt extends Dr{constructor(A,M,B,ae,Ce,Fe,Le=!1){super(A,M,Fe.delay),this.keyframes=B,this.preStyleProps=ae,this.postStyleProps=Ce,this._stretchStartingKeyframe=Le,this.timings={duration:Fe.duration,delay:Fe.delay,easing:Fe.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let A=this.keyframes,{delay:M,duration:B,easing:ae}=this.timings;if(this._stretchStartingKeyframe&&M){const Ce=[],Fe=B+M,Le=M/Fe,ut=An(A[0],!1);ut.offset=0,Ce.push(ut);const mt=An(A[0],!1);mt.offset=dn(Le),Ce.push(mt);const Zt=A.length-1;for(let xn=1;xn<=Zt;xn++){let lr=An(A[xn],!1);lr.offset=dn((M+lr.offset*B)/Fe),Ce.push(lr)}B=Fe,M=0,ae="",A=Ce}return wr(this.element,A,this.preStyleProps,this.postStyleProps,B,M,ae,!0)}}function dn(oe,A=3){const M=Math.pow(10,A-1);return Math.round(oe*M)/M}class Si{}class ei extends Si{normalizePropertyName(A,M){return ze(A)}normalizeStyleValue(A,M,B,ae){let Ce="";const Fe=B.toString().trim();if(Te[M]&&0!==B&&"0"!==B)if("number"==typeof B)Ce="px";else{const Le=B.match(/^[+-]?[\d\.]+([a-z]*)$/);Le&&0==Le[1].length&&ae.push(`Please provide a CSS unit value for ${A}:${B}`)}return Fe+Ce}}const Te=(()=>function(oe){const A={};return oe.forEach(M=>A[M]=!0),A}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function X(oe,A,M,B,ae,Ce,Fe,Le,ut,mt,Zt,xn,lr){return{type:0,element:oe,triggerName:A,isRemovalTransition:ae,fromState:M,fromStyles:Ce,toState:B,toStyles:Fe,timelines:Le,queriedElements:ut,preStyleProps:mt,postStyleProps:Zt,totalTime:xn,errors:lr}}const ie={};class _e{constructor(A,M,B){this._triggerName=A,this.ast=M,this._stateStyles=B}match(A,M,B,ae){return function(oe,A,M,B,ae){return oe.some(Ce=>Ce(A,M,B,ae))}(this.ast.matchers,A,M,B,ae)}buildStyles(A,M,B){const ae=this._stateStyles["*"],Ce=this._stateStyles[A],Fe=ae?ae.buildStyles(M,B):{};return Ce?Ce.buildStyles(M,B):Fe}build(A,M,B,ae,Ce,Fe,Le,ut,mt,Zt){const xn=[],lr=this.ast.options&&this.ast.options.params||ie,qn=this.buildStyles(B,Le&&Le.params||ie,xn),Nn=ut&&ut.params||ie,mr=this.buildStyles(ae,Nn,xn),si=new Set,Ur=new Map,Xi=new Map,ai="void"===ae,Oo={params:Object.assign(Object.assign({},lr),Nn)},To=Zt?[]:ur(A,M,this.ast.animation,Ce,Fe,qn,mr,Oo,mt,xn);let ui=0;if(To.forEach($o=>{ui=Math.max($o.duration+$o.delay,ui)}),xn.length)return X(M,this._triggerName,B,ae,ai,qn,mr,[],[],Ur,Xi,ui,xn);To.forEach($o=>{const Ni=$o.element,ya=Ae(Ur,Ni,{});$o.preStyleProps.forEach(li=>ya[li]=!0);const va=Ae(Xi,Ni,{});$o.postStyleProps.forEach(li=>va[li]=!0),Ni!==M&&si.add(Ni)});const Ro=Tt(si.values());return X(M,this._triggerName,B,ae,ai,qn,mr,To,Ro,Ur,Xi,ui)}}class qe{constructor(A,M,B){this.styles=A,this.defaultParams=M,this.normalizer=B}buildStyles(A,M){const B={},ae=Xn(this.defaultParams);return Object.keys(A).forEach(Ce=>{const Fe=A[Ce];null!=Fe&&(ae[Ce]=Fe)}),this.styles.styles.forEach(Ce=>{if("string"!=typeof Ce){const Fe=Ce;Object.keys(Fe).forEach(Le=>{let ut=Fe[Le];ut.length>1&&(ut=$n(ut,ae,M));const mt=this.normalizer.normalizePropertyName(Le,M);ut=this.normalizer.normalizeStyleValue(Le,mt,ut,M),B[mt]=ut})}}),B}}class rn{constructor(A,M,B){this.name=A,this.ast=M,this._normalizer=B,this.transitionFactories=[],this.states={},M.states.forEach(ae=>{this.states[ae.name]=new qe(ae.style,ae.options&&ae.options.params||{},B)}),vn(this.states,"true","1"),vn(this.states,"false","0"),M.transitions.forEach(ae=>{this.transitionFactories.push(new _e(A,ae,this.states))}),this.fallbackTransition=function(oe,A,M){return new _e(oe,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Fe,Le)=>!0],options:null,queryCount:0,depCount:0},A)}(A,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(A,M,B,ae){return this.transitionFactories.find(Fe=>Fe.match(A,M,B,ae))||null}matchStyles(A,M,B){return this.fallbackTransition.buildStyles(A,M,B)}}function vn(oe,A,M){oe.hasOwnProperty(A)?oe.hasOwnProperty(M)||(oe[M]=oe[A]):oe.hasOwnProperty(M)&&(oe[A]=oe[M])}const cn=new xi;class er{constructor(A,M,B){this.bodyNode=A,this._driver=M,this._normalizer=B,this._animations={},this._playersById={},this.players=[]}register(A,M){const B=[],ae=Ye(this._driver,M,B);if(B.length)throw new Error(`Unable to build the animation due to the following errors: ${B.join("\n")}`);this._animations[A]=ae}_buildPlayer(A,M,B){const ae=A.element,Ce=Ne(0,this._normalizer,0,A.keyframes,M,B);return this._driver.animate(ae,Ce,A.duration,A.delay,A.easing,[],!0)}create(A,M,B={}){const ae=[],Ce=this._animations[A];let Fe;const Le=new Map;if(Ce?(Fe=ur(this._driver,M,Ce,ln,Tn,{},{},B,cn,ae),Fe.forEach(Zt=>{const xn=Ae(Le,Zt.element,{});Zt.postStyleProps.forEach(lr=>xn[lr]=null)})):(ae.push("The requested animation doesn't exist or has already been destroyed"),Fe=[]),ae.length)throw new Error(`Unable to create the animation due to the following errors: ${ae.join("\n")}`);Le.forEach((Zt,xn)=>{Object.keys(Zt).forEach(lr=>{Zt[lr]=this._driver.computeStyle(xn,lr,J.l3)})});const mt=we(Fe.map(Zt=>{const xn=Le.get(Zt.element);return this._buildPlayer(Zt,{},xn)}));return this._playersById[A]=mt,mt.onDestroy(()=>this.destroy(A)),this.players.push(mt),mt}destroy(A){const M=this._getPlayer(A);M.destroy(),delete this._playersById[A];const B=this.players.indexOf(M);B>=0&&this.players.splice(B,1)}_getPlayer(A){const M=this._playersById[A];if(!M)throw new Error(`Unable to find the timeline player referenced by ${A}`);return M}listen(A,M,B,ae){const Ce=se(M,"","","");return he(this._getPlayer(A),B,Ce,ae),()=>{}}command(A,M,B,ae){if("register"==B)return void this.register(A,ae[0]);if("create"==B)return void this.create(A,M,ae[0]||{});const Ce=this._getPlayer(A);switch(B){case"play":Ce.play();break;case"pause":Ce.pause();break;case"reset":Ce.reset();break;case"restart":Ce.restart();break;case"finish":Ce.finish();break;case"init":Ce.init();break;case"setPosition":Ce.setPosition(parseFloat(ae[0]));break;case"destroy":this.destroy(A)}}}const zi="ng-animate-queued",Vi="ng-animate-disabled",lo=".ng-animate-disabled",ar=[],Hn={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Qr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Or="__ng_removed";class qi{constructor(A,M=""){this.namespaceId=M;const B=A&&A.hasOwnProperty("value");if(this.value=null!=(oe=B?A.value:A)?oe:null,B){const Ce=Xn(A);delete Ce.value,this.options=Ce}else this.options={};var oe;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(A){const M=A.params;if(M){const B=this.options.params;Object.keys(M).forEach(ae=>{null==B[ae]&&(B[ae]=M[ae])})}}}const fi="void",Zi=new qi(fi);class Qi{constructor(A,M,B){this.id=A,this.hostElement=M,this._engine=B,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+A,vi(M,this._hostClassName)}listen(A,M,B,ae){if(!this._triggers.hasOwnProperty(M))throw new Error(`Unable to listen on the animation trigger event "${B}" because the animation trigger "${M}" doesn't exist!`);if(null==B||0==B.length)throw new Error(`Unable to listen on the animation trigger "${M}" because the provided event is undefined!`);if("start"!=(oe=B)&&"done"!=oe)throw new Error(`The provided animation trigger event "${B}" for the animation trigger "${M}" is not supported!`);var oe;const Ce=Ae(this._elementListeners,A,[]),Fe={name:M,phase:B,callback:ae};Ce.push(Fe);const Le=Ae(this._engine.statesByElement,A,{});return Le.hasOwnProperty(M)||(vi(A,Nt),vi(A,Nt+"-"+M),Le[M]=Zi),()=>{this._engine.afterFlush(()=>{const ut=Ce.indexOf(Fe);ut>=0&&Ce.splice(ut,1),this._triggers[M]||delete Le[M]})}}register(A,M){return!this._triggers[A]&&(this._triggers[A]=M,!0)}_getTrigger(A){const M=this._triggers[A];if(!M)throw new Error(`The provided animation trigger "${A}" has not been registered!`);return M}trigger(A,M,B,ae=!0){const Ce=this._getTrigger(M),Fe=new ds(this.id,M,A);let Le=this._engine.statesByElement.get(A);Le||(vi(A,Nt),vi(A,Nt+"-"+M),this._engine.statesByElement.set(A,Le={}));let ut=Le[M];const mt=new qi(B,this.id);if(!(B&&B.hasOwnProperty("value"))&&ut&&mt.absorbOptions(ut.options),Le[M]=mt,ut||(ut=Zi),mt.value!==fi&&ut.value===mt.value){if(!function(oe,A){const M=Object.keys(oe),B=Object.keys(A);if(M.length!=B.length)return!1;for(let ae=0;ae<M.length;ae++){const Ce=M[ae];if(!A.hasOwnProperty(Ce)||oe[Ce]!==A[Ce])return!1}return!0}(ut.params,mt.params)){const Nn=[],mr=Ce.matchStyles(ut.value,ut.params,Nn),si=Ce.matchStyles(mt.value,mt.params,Nn);Nn.length?this._engine.reportError(Nn):this._engine.afterFlush(()=>{jn(A,mr),Yt(A,si)})}return}const lr=Ae(this._engine.playersByElement,A,[]);lr.forEach(Nn=>{Nn.namespaceId==this.id&&Nn.triggerName==M&&Nn.queued&&Nn.destroy()});let Sr=Ce.matchTransition(ut.value,mt.value,A,mt.params),qn=!1;if(!Sr){if(!ae)return;Sr=Ce.fallbackTransition,qn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:A,triggerName:M,transition:Sr,fromState:ut,toState:mt,player:Fe,isFallbackTransition:qn}),qn||(vi(A,zi),Fe.onStart(()=>{bi(A,zi)})),Fe.onDone(()=>{let Nn=this.players.indexOf(Fe);Nn>=0&&this.players.splice(Nn,1);const mr=this._engine.playersByElement.get(A);if(mr){let si=mr.indexOf(Fe);si>=0&&mr.splice(si,1)}}),this.players.push(Fe),lr.push(Fe),Fe}deregister(A){delete this._triggers[A],this._engine.statesByElement.forEach((M,B)=>{delete M[A]}),this._elementListeners.forEach((M,B)=>{this._elementListeners.set(B,M.filter(ae=>ae.name!=A))})}clearElementCache(A){this._engine.statesByElement.delete(A),this._elementListeners.delete(A);const M=this._engine.playersByElement.get(A);M&&(M.forEach(B=>B.destroy()),this._engine.playersByElement.delete(A))}_signalRemovalForInnerTriggers(A,M){const B=this._engine.driver.query(A,Jt,!0);B.forEach(ae=>{if(ae[Or])return;const Ce=this._engine.fetchNamespacesByElement(ae);Ce.size?Ce.forEach(Fe=>Fe.triggerLeaveAnimation(ae,M,!1,!0)):this.clearElementCache(ae)}),this._engine.afterFlushAnimationsDone(()=>B.forEach(ae=>this.clearElementCache(ae)))}triggerLeaveAnimation(A,M,B,ae){const Ce=this._engine.statesByElement.get(A);if(Ce){const Fe=[];if(Object.keys(Ce).forEach(Le=>{if(this._triggers[Le]){const ut=this.trigger(A,Le,fi,ae);ut&&Fe.push(ut)}}),Fe.length)return this._engine.markElementAsRemoved(this.id,A,!0,M),B&&we(Fe).onDone(()=>this._engine.processLeaveNode(A)),!0}return!1}prepareLeaveAnimationListeners(A){const M=this._elementListeners.get(A),B=this._engine.statesByElement.get(A);if(M&&B){const ae=new Set;M.forEach(Ce=>{const Fe=Ce.name;if(ae.has(Fe))return;ae.add(Fe);const ut=this._triggers[Fe].fallbackTransition,mt=B[Fe]||Zi,Zt=new qi(fi),xn=new ds(this.id,Fe,A);this._engine.totalQueuedPlayers++,this._queue.push({element:A,triggerName:Fe,transition:ut,fromState:mt,toState:Zt,player:xn,isFallbackTransition:!0})})}}removeNode(A,M){const B=this._engine;if(A.childElementCount&&this._signalRemovalForInnerTriggers(A,M),this.triggerLeaveAnimation(A,M,!0))return;let ae=!1;if(B.totalAnimations){const Ce=B.players.length?B.playersByQueriedElement.get(A):[];if(Ce&&Ce.length)ae=!0;else{let Fe=A;for(;Fe=Fe.parentNode;)if(B.statesByElement.get(Fe)){ae=!0;break}}}if(this.prepareLeaveAnimationListeners(A),ae)B.markElementAsRemoved(this.id,A,!1,M);else{const Ce=A[Or];(!Ce||Ce===Hn)&&(B.afterFlush(()=>this.clearElementCache(A)),B.destroyInnerAnimations(A),B._onRemovalComplete(A,M))}}insertNode(A,M){vi(A,this._hostClassName)}drainQueuedTransitions(A){const M=[];return this._queue.forEach(B=>{const ae=B.player;if(ae.destroyed)return;const Ce=B.element,Fe=this._elementListeners.get(Ce);Fe&&Fe.forEach(Le=>{if(Le.name==B.triggerName){const ut=se(Ce,B.triggerName,B.fromState.value,B.toState.value);ut._data=A,he(B.player,Le.phase,ut,Le.callback)}}),ae.markedForDestroy?this._engine.afterFlush(()=>{ae.destroy()}):M.push(B)}),this._queue=[],M.sort((B,ae)=>{const Ce=B.transition.ast.depCount,Fe=ae.transition.ast.depCount;return 0==Ce||0==Fe?Ce-Fe:this._engine.driver.containsElement(B.element,ae.element)?1:-1})}destroy(A){this.players.forEach(M=>M.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,A)}elementContainsData(A){let M=!1;return this._elementListeners.has(A)&&(M=!0),M=!!this._queue.find(B=>B.element===A)||M,M}}class yi{constructor(A,M,B){this.bodyNode=A,this.driver=M,this._normalizer=B,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(ae,Ce)=>{}}_onRemovalComplete(A,M){this.onRemovalComplete(A,M)}get queuedPlayers(){const A=[];return this._namespaceList.forEach(M=>{M.players.forEach(B=>{B.queued&&A.push(B)})}),A}createNamespace(A,M){const B=new Qi(A,M,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,M)?this._balanceNamespaceList(B,M):(this.newHostElements.set(M,B),this.collectEnterElement(M)),this._namespaceLookup[A]=B}_balanceNamespaceList(A,M){const B=this._namespaceList.length-1;if(B>=0){let ae=!1;for(let Ce=B;Ce>=0;Ce--)if(this.driver.containsElement(this._namespaceList[Ce].hostElement,M)){this._namespaceList.splice(Ce+1,0,A),ae=!0;break}ae||this._namespaceList.splice(0,0,A)}else this._namespaceList.push(A);return this.namespacesByHostElement.set(M,A),A}register(A,M){let B=this._namespaceLookup[A];return B||(B=this.createNamespace(A,M)),B}registerTrigger(A,M,B){let ae=this._namespaceLookup[A];ae&&ae.register(M,B)&&this.totalAnimations++}destroy(A,M){if(!A)return;const B=this._fetchNamespace(A);this.afterFlush(()=>{this.namespacesByHostElement.delete(B.hostElement),delete this._namespaceLookup[A];const ae=this._namespaceList.indexOf(B);ae>=0&&this._namespaceList.splice(ae,1)}),this.afterFlushAnimationsDone(()=>B.destroy(M))}_fetchNamespace(A){return this._namespaceLookup[A]}fetchNamespacesByElement(A){const M=new Set,B=this.statesByElement.get(A);if(B){const ae=Object.keys(B);for(let Ce=0;Ce<ae.length;Ce++){const Fe=B[ae[Ce]].namespaceId;if(Fe){const Le=this._fetchNamespace(Fe);Le&&M.add(Le)}}}return M}trigger(A,M,B,ae){if($i(M)){const Ce=this._fetchNamespace(A);if(Ce)return Ce.trigger(M,B,ae),!0}return!1}insertNode(A,M,B,ae){if(!$i(M))return;const Ce=M[Or];if(Ce&&Ce.setForRemoval){Ce.setForRemoval=!1,Ce.setForMove=!0;const Fe=this.collectedLeaveElements.indexOf(M);Fe>=0&&this.collectedLeaveElements.splice(Fe,1)}if(A){const Fe=this._fetchNamespace(A);Fe&&Fe.insertNode(M,B)}ae&&this.collectEnterElement(M)}collectEnterElement(A){this.collectedEnterElements.push(A)}markElementAsDisabled(A,M){M?this.disabledNodes.has(A)||(this.disabledNodes.add(A),vi(A,Vi)):this.disabledNodes.has(A)&&(this.disabledNodes.delete(A),bi(A,Vi))}removeNode(A,M,B,ae){if($i(M)){const Ce=A?this._fetchNamespace(A):null;if(Ce?Ce.removeNode(M,ae):this.markElementAsRemoved(A,M,!1,ae),B){const Fe=this.namespacesByHostElement.get(M);Fe&&Fe.id!==A&&Fe.removeNode(M,ae)}}else this._onRemovalComplete(M,ae)}markElementAsRemoved(A,M,B,ae){this.collectedLeaveElements.push(M),M[Or]={namespaceId:A,setForRemoval:ae,hasAnimation:B,removedBeforeQueried:!1}}listen(A,M,B,ae,Ce){return $i(M)?this._fetchNamespace(A).listen(M,B,ae,Ce):()=>{}}_buildInstruction(A,M,B,ae,Ce){return A.transition.build(this.driver,A.element,A.fromState.value,A.toState.value,B,ae,A.fromState.options,A.toState.options,M,Ce)}destroyInnerAnimations(A){let M=this.driver.query(A,Jt,!0);M.forEach(B=>this.destroyActiveAnimationsForElement(B)),0!=this.playersByQueriedElement.size&&(M=this.driver.query(A,Fn,!0),M.forEach(B=>this.finishActiveQueriedAnimationOnElement(B)))}destroyActiveAnimationsForElement(A){const M=this.playersByElement.get(A);M&&M.forEach(B=>{B.queued?B.markedForDestroy=!0:B.destroy()})}finishActiveQueriedAnimationOnElement(A){const M=this.playersByQueriedElement.get(A);M&&M.forEach(B=>B.finish())}whenRenderingDone(){return new Promise(A=>{if(this.players.length)return we(this.players).onDone(()=>A());A()})}processLeaveNode(A){const M=A[Or];if(M&&M.setForRemoval){if(A[Or]=Hn,M.namespaceId){this.destroyInnerAnimations(A);const B=this._fetchNamespace(M.namespaceId);B&&B.clearElementCache(A)}this._onRemovalComplete(A,M.setForRemoval)}this.driver.matchesElement(A,lo)&&this.markElementAsDisabled(A,!1),this.driver.query(A,lo,!0).forEach(B=>{this.markElementAsDisabled(B,!1)})}flush(A=-1){let M=[];if(this.newHostElements.size&&(this.newHostElements.forEach((B,ae)=>this._balanceNamespaceList(B,ae)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let B=0;B<this.collectedEnterElements.length;B++)vi(this.collectedEnterElements[B],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const B=[];try{M=this._flushAnimations(B,A)}finally{for(let ae=0;ae<B.length;ae++)B[ae]()}}else for(let B=0;B<this.collectedLeaveElements.length;B++)this.processLeaveNode(this.collectedLeaveElements[B]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(B=>B()),this._flushFns=[],this._whenQuietFns.length){const B=this._whenQuietFns;this._whenQuietFns=[],M.length?we(M).onDone(()=>{B.forEach(ae=>ae())}):B.forEach(ae=>ae())}}reportError(A){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${A.join("\n")}`)}_flushAnimations(A,M){const B=new xi,ae=[],Ce=new Map,Fe=[],Le=new Map,ut=new Map,mt=new Map,Zt=new Set;this.disabledNodes.forEach(bn=>{Zt.add(bn);const Rn=this.driver.query(bn,".ng-animate-queued",!0);for(let Wn=0;Wn<Rn.length;Wn++)Zt.add(Rn[Wn])});const xn=this.bodyNode,lr=Array.from(this.statesByElement.keys()),Sr=Us(lr,this.collectedEnterElements),qn=new Map;let Nn=0;Sr.forEach((bn,Rn)=>{const Wn=ln+Nn++;qn.set(Rn,Wn),bn.forEach(xr=>vi(xr,Wn))});const mr=[],si=new Set,Ur=new Set;for(let bn=0;bn<this.collectedLeaveElements.length;bn++){const Rn=this.collectedLeaveElements[bn],Wn=Rn[Or];Wn&&Wn.setForRemoval&&(mr.push(Rn),si.add(Rn),Wn.hasAnimation?this.driver.query(Rn,".ng-star-inserted",!0).forEach(xr=>si.add(xr)):Ur.add(Rn))}const Xi=new Map,ai=Us(lr,Array.from(si));ai.forEach((bn,Rn)=>{const Wn=Tn+Nn++;Xi.set(Rn,Wn),bn.forEach(xr=>vi(xr,Wn))}),A.push(()=>{Sr.forEach((bn,Rn)=>{const Wn=qn.get(Rn);bn.forEach(xr=>bi(xr,Wn))}),ai.forEach((bn,Rn)=>{const Wn=Xi.get(Rn);bn.forEach(xr=>bi(xr,Wn))}),mr.forEach(bn=>{this.processLeaveNode(bn)})});const Oo=[],To=[];for(let bn=this._namespaceList.length-1;bn>=0;bn--)this._namespaceList[bn].drainQueuedTransitions(M).forEach(Wn=>{const xr=Wn.player,Cr=Wn.element;if(Oo.push(xr),this.collectedEnterElements.length){const Ii=Cr[Or];if(Ii&&Ii.setForMove)return void xr.destroy()}const Ai=!xn||!this.driver.containsElement(xn,Cr),wi=Xi.get(Cr),io=qn.get(Cr),Jr=this._buildInstruction(Wn,B,io,wi,Ai);if(Jr.errors&&Jr.errors.length)To.push(Jr);else{if(Ai)return xr.onStart(()=>jn(Cr,Jr.fromStyles)),xr.onDestroy(()=>Yt(Cr,Jr.toStyles)),void ae.push(xr);if(Wn.isFallbackTransition)return xr.onStart(()=>jn(Cr,Jr.fromStyles)),xr.onDestroy(()=>Yt(Cr,Jr.toStyles)),void ae.push(xr);Jr.timelines.forEach(Ii=>Ii.stretchStartingKeyframe=!0),B.append(Cr,Jr.timelines),Fe.push({instruction:Jr,player:xr,element:Cr}),Jr.queriedElements.forEach(Ii=>Ae(Le,Ii,[]).push(xr)),Jr.preStyleProps.forEach((Ii,Bs)=>{const Yi=Object.keys(Ii);if(Yi.length){let ni=ut.get(Bs);ni||ut.set(Bs,ni=new Set),Yi.forEach(xs=>ni.add(xs))}}),Jr.postStyleProps.forEach((Ii,Bs)=>{const Yi=Object.keys(Ii);let ni=mt.get(Bs);ni||mt.set(Bs,ni=new Set),Yi.forEach(xs=>ni.add(xs))})}});if(To.length){const bn=[];To.forEach(Rn=>{bn.push(`@${Rn.triggerName} has failed due to:\n`),Rn.errors.forEach(Wn=>bn.push(`- ${Wn}\n`))}),Oo.forEach(Rn=>Rn.destroy()),this.reportError(bn)}const ui=new Map,Ro=new Map;Fe.forEach(bn=>{const Rn=bn.element;B.has(Rn)&&(Ro.set(Rn,Rn),this._beforeAnimationBuild(bn.player.namespaceId,bn.instruction,ui))}),ae.forEach(bn=>{const Rn=bn.element;this._getPreviousPlayers(Rn,!1,bn.namespaceId,bn.triggerName,null).forEach(xr=>{Ae(ui,Rn,[]).push(xr),xr.destroy()})});const $o=mr.filter(bn=>Fi(bn,ut,mt)),Ni=new Map;hs(Ni,this.driver,Ur,mt,J.l3).forEach(bn=>{Fi(bn,ut,mt)&&$o.push(bn)});const va=new Map;Sr.forEach((bn,Rn)=>{hs(va,this.driver,new Set(bn),ut,J.k1)}),$o.forEach(bn=>{const Rn=Ni.get(bn),Wn=va.get(bn);Ni.set(bn,Object.assign(Object.assign({},Rn),Wn))});const li=[],Wi=[],gi={};Fe.forEach(bn=>{const{element:Rn,player:Wn,instruction:xr}=bn;if(B.has(Rn)){if(Zt.has(Rn))return Wn.onDestroy(()=>Yt(Rn,xr.toStyles)),Wn.disabled=!0,Wn.overrideTotalTime(xr.totalTime),void ae.push(Wn);let Cr=gi;if(Ro.size>1){let wi=Rn;const io=[];for(;wi=wi.parentNode;){const Jr=Ro.get(wi);if(Jr){Cr=Jr;break}io.push(wi)}io.forEach(Jr=>Ro.set(Jr,Cr))}const Ai=this._buildAnimation(Wn.namespaceId,xr,ui,Ce,va,Ni);if(Wn.setRealPlayer(Ai),Cr===gi)li.push(Wn);else{const wi=this.playersByElement.get(Cr);wi&&wi.length&&(Wn.parentPlayer=we(wi)),ae.push(Wn)}}else jn(Rn,xr.fromStyles),Wn.onDestroy(()=>Yt(Rn,xr.toStyles)),Wi.push(Wn),Zt.has(Rn)&&ae.push(Wn)}),Wi.forEach(bn=>{const Rn=Ce.get(bn.element);if(Rn&&Rn.length){const Wn=we(Rn);bn.setRealPlayer(Wn)}}),ae.forEach(bn=>{bn.parentPlayer?bn.syncPlayerEvents(bn.parentPlayer):bn.destroy()});for(let bn=0;bn<mr.length;bn++){const Rn=mr[bn],Wn=Rn[Or];if(bi(Rn,Tn),Wn&&Wn.hasAnimation)continue;let xr=[];if(Le.size){let Ai=Le.get(Rn);Ai&&Ai.length&&xr.push(...Ai);let wi=this.driver.query(Rn,Fn,!0);for(let io=0;io<wi.length;io++){let Jr=Le.get(wi[io]);Jr&&Jr.length&&xr.push(...Jr)}}const Cr=xr.filter(Ai=>!Ai.destroyed);Cr.length?or(this,Rn,Cr):this.processLeaveNode(Rn)}return mr.length=0,li.forEach(bn=>{this.players.push(bn),bn.onDone(()=>{bn.destroy();const Rn=this.players.indexOf(bn);this.players.splice(Rn,1)}),bn.play()}),li}elementContainsData(A,M){let B=!1;const ae=M[Or];return ae&&ae.setForRemoval&&(B=!0),this.playersByElement.has(M)&&(B=!0),this.playersByQueriedElement.has(M)&&(B=!0),this.statesByElement.has(M)&&(B=!0),this._fetchNamespace(A).elementContainsData(M)||B}afterFlush(A){this._flushFns.push(A)}afterFlushAnimationsDone(A){this._whenQuietFns.push(A)}_getPreviousPlayers(A,M,B,ae,Ce){let Fe=[];if(M){const Le=this.playersByQueriedElement.get(A);Le&&(Fe=Le)}else{const Le=this.playersByElement.get(A);if(Le){const ut=!Ce||Ce==fi;Le.forEach(mt=>{mt.queued||!ut&&mt.triggerName!=ae||Fe.push(mt)})}}return(B||ae)&&(Fe=Fe.filter(Le=>!(B&&B!=Le.namespaceId||ae&&ae!=Le.triggerName))),Fe}_beforeAnimationBuild(A,M,B){const Ce=M.element,Fe=M.isRemovalTransition?void 0:A,Le=M.isRemovalTransition?void 0:M.triggerName;for(const ut of M.timelines){const mt=ut.element,Zt=mt!==Ce,xn=Ae(B,mt,[]);this._getPreviousPlayers(mt,Zt,Fe,Le,M.toState).forEach(Sr=>{const qn=Sr.getRealPlayer();qn.beforeDestroy&&qn.beforeDestroy(),Sr.destroy(),xn.push(Sr)})}jn(Ce,M.fromStyles)}_buildAnimation(A,M,B,ae,Ce,Fe){const Le=M.triggerName,ut=M.element,mt=[],Zt=new Set,xn=new Set,lr=M.timelines.map(qn=>{const Nn=qn.element;Zt.add(Nn);const mr=Nn[Or];if(mr&&mr.removedBeforeQueried)return new J.ZN(qn.duration,qn.delay);const si=Nn!==ut,Ur=function(oe){const A=[];return no(oe,A),A}((B.get(Nn)||ar).map(ui=>ui.getRealPlayer())).filter(ui=>!!ui.element&&ui.element===Nn),Xi=Ce.get(Nn),ai=Fe.get(Nn),Oo=Ne(0,this._normalizer,0,qn.keyframes,Xi,ai),To=this._buildPlayer(qn,Oo,Ur);if(qn.subTimeline&&ae&&xn.add(Nn),si){const ui=new ds(A,Le,Nn);ui.setRealPlayer(To),mt.push(ui)}return To});mt.forEach(qn=>{Ae(this.playersByQueriedElement,qn.element,[]).push(qn),qn.onDone(()=>function(oe,A,M){let B;if(oe instanceof Map){if(B=oe.get(A),B){if(B.length){const ae=B.indexOf(M);B.splice(ae,1)}0==B.length&&oe.delete(A)}}else if(B=oe[A],B){if(B.length){const ae=B.indexOf(M);B.splice(ae,1)}0==B.length&&delete oe[A]}return B}(this.playersByQueriedElement,qn.element,qn))}),Zt.forEach(qn=>vi(qn,Gt));const Sr=we(lr);return Sr.onDestroy(()=>{Zt.forEach(qn=>bi(qn,Gt)),Yt(ut,M.toStyles)}),xn.forEach(qn=>{Ae(ae,qn,[]).push(Sr)}),Sr}_buildPlayer(A,M,B){return M.length>0?this.driver.animate(A.element,M,A.duration,A.delay,A.easing,B):new J.ZN(A.duration,A.delay)}}class ds{constructor(A,M,B){this.namespaceId=A,this.triggerName=M,this.element=B,this._player=new J.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(A){this._containsRealPlayer||(this._player=A,Object.keys(this._queuedCallbacks).forEach(M=>{this._queuedCallbacks[M].forEach(B=>he(A,M,void 0,B))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(A.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(A){this.totalTime=A}syncPlayerEvents(A){const M=this._player;M.triggerCallback&&A.onStart(()=>M.triggerCallback("start")),A.onDone(()=>this.finish()),A.onDestroy(()=>this.destroy())}_queueEvent(A,M){Ae(this._queuedCallbacks,A,[]).push(M)}onDone(A){this.queued&&this._queueEvent("done",A),this._player.onDone(A)}onStart(A){this.queued&&this._queueEvent("start",A),this._player.onStart(A)}onDestroy(A){this.queued&&this._queueEvent("destroy",A),this._player.onDestroy(A)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(A){this.queued||this._player.setPosition(A)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(A){const M=this._player;M.triggerCallback&&M.triggerCallback(A)}}function $i(oe){return oe&&1===oe.nodeType}function No(oe,A){const M=oe.style.display;return oe.style.display=null!=A?A:"none",M}function hs(oe,A,M,B,ae){const Ce=[];M.forEach(ut=>Ce.push(No(ut)));const Fe=[];B.forEach((ut,mt)=>{const Zt={};ut.forEach(xn=>{const lr=Zt[xn]=A.computeStyle(mt,xn,ae);(!lr||0==lr.length)&&(mt[Or]=Qr,Fe.push(mt))}),oe.set(mt,Zt)});let Le=0;return M.forEach(ut=>No(ut,Ce[Le++])),Fe}function Us(oe,A){const M=new Map;if(oe.forEach(Le=>M.set(Le,[])),0==A.length)return M;const ae=new Set(A),Ce=new Map;function Fe(Le){if(!Le)return 1;let ut=Ce.get(Le);if(ut)return ut;const mt=Le.parentNode;return ut=M.has(mt)?mt:ae.has(mt)?1:Fe(mt),Ce.set(Le,ut),ut}return A.forEach(Le=>{const ut=Fe(Le);1!==ut&&M.get(ut).push(Le)}),M}const rs="$$classes";function vi(oe,A){if(oe.classList)oe.classList.add(A);else{let M=oe[rs];M||(M=oe[rs]={}),M[A]=!0}}function bi(oe,A){if(oe.classList)oe.classList.remove(A);else{let M=oe[rs];M&&delete M[A]}}function or(oe,A,M){we(M).onDone(()=>oe.processLeaveNode(A))}function no(oe,A){for(let M=0;M<oe.length;M++){const B=oe[M];B instanceof J.ZE?no(B.players,A):A.push(B)}}function Fi(oe,A,M){const B=M.get(oe);if(!B)return!1;let ae=A.get(oe);return ae?B.forEach(Ce=>ae.add(Ce)):A.set(oe,B),M.delete(oe),!0}class ho{constructor(A,M,B){this.bodyNode=A,this._driver=M,this._normalizer=B,this._triggerCache={},this.onRemovalComplete=(ae,Ce)=>{},this._transitionEngine=new yi(A,M,B),this._timelineEngine=new er(A,M,B),this._transitionEngine.onRemovalComplete=(ae,Ce)=>this.onRemovalComplete(ae,Ce)}registerTrigger(A,M,B,ae,Ce){const Fe=A+"-"+ae;let Le=this._triggerCache[Fe];if(!Le){const ut=[],mt=Ye(this._driver,Ce,ut);if(ut.length)throw new Error(`The animation trigger "${ae}" has failed to build due to the following errors:\n - ${ut.join("\n - ")}`);Le=function(oe,A,M){return new rn(oe,A,M)}(ae,mt,this._normalizer),this._triggerCache[Fe]=Le}this._transitionEngine.registerTrigger(M,ae,Le)}register(A,M){this._transitionEngine.register(A,M)}destroy(A,M){this._transitionEngine.destroy(A,M)}onInsert(A,M,B,ae){this._transitionEngine.insertNode(A,M,B,ae)}onRemove(A,M,B,ae){this._transitionEngine.removeNode(A,M,ae||!1,B)}disableAnimations(A,M){this._transitionEngine.markElementAsDisabled(A,M)}process(A,M,B,ae){if("@"==B.charAt(0)){const[Ce,Fe]=ge(B);this._timelineEngine.command(Ce,M,Fe,ae)}else this._transitionEngine.trigger(A,M,B,ae)}listen(A,M,B,ae,Ce){if("@"==B.charAt(0)){const[Fe,Le]=ge(B);return this._timelineEngine.listen(Fe,M,Le,Ce)}return this._transitionEngine.listen(A,M,B,ae,Ce)}flush(A=-1){this._transitionEngine.flush(A)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function pi(oe,A){let M=null,B=null;return Array.isArray(A)&&A.length?(M=Ci(A[0]),A.length>1&&(B=Ci(A[A.length-1]))):A&&(M=Ci(A)),M||B?new ko(oe,M,B):null}let ko=(()=>{class oe{constructor(M,B,ae){this._element=M,this._startStyles=B,this._endStyles=ae,this._state=0;let Ce=oe.initialStylesByElement.get(M);Ce||oe.initialStylesByElement.set(M,Ce={}),this._initialStyles=Ce}start(){this._state<1&&(this._startStyles&&Yt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Yt(this._element,this._initialStyles),this._endStyles&&(Yt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(oe.initialStylesByElement.delete(this._element),this._startStyles&&(jn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(jn(this._element,this._endStyles),this._endStyles=null),Yt(this._element,this._initialStyles),this._state=3)}}return oe.initialStylesByElement=new WeakMap,oe})();function Ci(oe){let A=null;const M=Object.keys(oe);for(let B=0;B<M.length;B++){const ae=M[B];Eo(ae)&&(A=A||{},A[ae]=oe[ae])}return A}function Eo(oe){return"display"===oe||"position"===oe}const is="animation",wo="animationend";class Rr{constructor(A,M,B,ae,Ce,Fe,Le){this._element=A,this._name=M,this._duration=B,this._delay=ae,this._easing=Ce,this._fillMode=Fe,this._onDoneFn=Le,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=ut=>this._handleCallback(ut)}apply(){(function(oe,A){const M=cr(oe,"").trim();let B=0;M.length&&(function(oe,A){let M=0;for(let B=0;B<oe.length;B++)","===oe.charAt(B)&&M++;return M}(M)+1,A=`${M}, ${A}`),Lr(oe,"",A)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Vo(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){ro(this._element,this._name,"paused")}resume(){ro(this._element,this._name,"running")}setPosition(A){const M=Lo(this._element,this._name);this._position=A*this._duration,Lr(this._element,"Delay",`-${this._position}ms`,M)}getPosition(){return this._position}_handleCallback(A){const M=A._ngTestManualTimestamp||Date.now(),B=1e3*parseFloat(A.elapsedTime.toFixed(3));A.animationName==this._name&&Math.max(M-this._startTime,0)>=this._delay&&B>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Vo(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(oe,A){const B=cr(oe,"").split(","),ae=Ei(B,A);ae>=0&&(B.splice(ae,1),Lr(oe,"",B.join(",")))}(this._element,this._name))}}function ro(oe,A,M){Lr(oe,"PlayState",M,Lo(oe,A))}function Lo(oe,A){const M=cr(oe,"");return M.indexOf(",")>0?Ei(M.split(","),A):Ei([M],A)}function Ei(oe,A){for(let M=0;M<oe.length;M++)if(oe[M].indexOf(A)>=0)return M;return-1}function Vo(oe,A,M){M?oe.removeEventListener(wo,A):oe.addEventListener(wo,A)}function Lr(oe,A,M,B){const ae=is+A;if(null!=B){const Ce=oe.style[ae];if(Ce.length){const Fe=Ce.split(",");Fe[B]=M,M=Fe.join(",")}}oe.style[ae]=M}function cr(oe,A){return oe.style[is+A]||""}class q{constructor(A,M,B,ae,Ce,Fe,Le,ut){this.element=A,this.keyframes=M,this.animationName=B,this._duration=ae,this._delay=Ce,this._finalStyles=Le,this._specialStyles=ut,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Fe||"linear",this.totalTime=ae+Ce,this._buildStyler()}onStart(A){this._onStartFns.push(A)}onDone(A){this._onDoneFns.push(A)}onDestroy(A){this._onDestroyFns.push(A)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(A=>A()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(A=>A()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(A=>A()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(A){this._styler.setPosition(A)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Rr(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(A){const M="start"==A?this._onStartFns:this._onDoneFns;M.forEach(B=>B()),M.length=0}beforeDestroy(){this.init();const A={};if(this.hasStarted()){const M=this._state>=3;Object.keys(this._finalStyles).forEach(B=>{"offset"!=B&&(A[B]=M?this._finalStyles[B]:He(this.element,B))})}this.currentSnapshot=A}}class pe extends J.ZN{constructor(A,M){super(),this.element=A,this._startingStyles={},this.__initialized=!1,this._styles=ot(M)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(A=>{this._startingStyles[A]=this.element.style[A]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(A=>this.element.style.setProperty(A,this._styles[A])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(A=>{const M=this._startingStyles[A];M?this.element.style.setProperty(A,M):this.element.style.removeProperty(A)}),this._startingStyles=null,super.destroy())}}class k{constructor(){this._count=0}validateStyleProperty(A){return $t(A)}matchesElement(A,M){return En(A,M)}containsElement(A,M){return Dt(A,M)}query(A,M,B){return Je(A,M,B)}computeStyle(A,M,B){return window.getComputedStyle(A)[M]}buildKeyframeElement(A,M,B){B=B.map(Le=>ot(Le));let ae=`@keyframes ${M} {\n`,Ce="";B.forEach(Le=>{Ce=" ";const ut=parseFloat(Le.offset);ae+=`${Ce}${100*ut}% {\n`,Ce+=" ",Object.keys(Le).forEach(mt=>{const Zt=Le[mt];switch(mt){case"offset":return;case"easing":return void(Zt&&(ae+=`${Ce}animation-timing-function: ${Zt};\n`));default:return void(ae+=`${Ce}${mt}: ${Zt};\n`)}}),ae+=`${Ce}}\n`}),ae+="}\n";const Fe=document.createElement("style");return Fe.textContent=ae,Fe}animate(A,M,B,ae,Ce,Fe=[],Le){const ut=Fe.filter(mr=>mr instanceof q),mt={};Pt(B,ae)&&ut.forEach(mr=>{let si=mr.currentSnapshot;Object.keys(si).forEach(Ur=>mt[Ur]=si[Ur])});const Zt=function(oe){let A={};return oe&&(Array.isArray(oe)?oe:[oe]).forEach(B=>{Object.keys(B).forEach(ae=>{"offset"==ae||"easing"==ae||(A[ae]=B[ae])})}),A}(M=an(A,M,mt));if(0==B)return new pe(A,Zt);const xn="gen_css_kf_"+this._count++,lr=this.buildKeyframeElement(A,xn,M);(function(oe){var A;const M=null===(A=oe.getRootNode)||void 0===A?void 0:A.call(oe);return"undefined"!=typeof ShadowRoot&&M instanceof ShadowRoot?M:document.head})(A).appendChild(lr);const qn=pi(A,M),Nn=new q(A,M,xn,B,ae,Ce,Zt,qn);return Nn.onDestroy(()=>{var oe;(oe=lr).parentNode.removeChild(oe)}),Nn}}class j{constructor(A,M,B,ae){this.element=A,this.keyframes=M,this.options=B,this._specialStyles=ae,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=B.duration,this._delay=B.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(A=>A()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const A=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,A,this.options),this._finalKeyframe=A.length?A[A.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(A,M,B){return A.animate(M,B)}onStart(A){this._onStartFns.push(A)}onDone(A){this._onDoneFns.push(A)}onDestroy(A){this._onDestroyFns.push(A)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(A=>A()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(A=>A()),this._onDestroyFns=[])}setPosition(A){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=A*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const A={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(M=>{"offset"!=M&&(A[M]=this._finished?this._finalKeyframe[M]:He(this.element,M))}),this.currentSnapshot=A}triggerCallback(A){const M="start"==A?this._onStartFns:this._onDoneFns;M.forEach(B=>B()),M.length=0}}class V{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(We().toString()),this._cssKeyframesDriver=new k}validateStyleProperty(A){return $t(A)}matchesElement(A,M){return En(A,M)}containsElement(A,M){return Dt(A,M)}query(A,M,B){return Je(A,M,B)}computeStyle(A,M,B){return window.getComputedStyle(A)[M]}overrideWebAnimationsSupport(A){this._isNativeImpl=A}animate(A,M,B,ae,Ce,Fe=[],Le){if(!Le&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(A,M,B,ae,Ce,Fe);const Zt={duration:B,delay:ae,fill:0==ae?"both":"forwards"};Ce&&(Zt.easing=Ce);const xn={},lr=Fe.filter(qn=>qn instanceof j);Pt(B,ae)&&lr.forEach(qn=>{let Nn=qn.currentSnapshot;Object.keys(Nn).forEach(mr=>xn[mr]=Nn[mr])});const Sr=pi(A,M=an(A,M=M.map(qn=>An(qn,!1)),xn));return new j(A,M,Zt,Sr)}}function We(){return C()&&Element.prototype.animate||{}}var xt=K(8583);let wn=(()=>{class oe extends J._j{constructor(M,B){super(),this._nextAnimationId=0,this._renderer=M.createRenderer(B.body,{id:"0",encapsulation:P.ifc.None,styles:[],data:{animation:[]}})}build(M){const B=this._nextAnimationId.toString();this._nextAnimationId++;const ae=Array.isArray(M)?(0,J.vP)(M):M;return fr(this._renderer,null,B,"register",[ae]),new dr(B,this._renderer)}}return oe.\u0275fac=function(M){return new(M||oe)(P.LFG(P.FYo),P.LFG(xt.K0))},oe.\u0275prov=P.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class dr extends J.LC{constructor(A,M){super(),this._id=A,this._renderer=M}create(A,M){return new Gr(this._id,A,M||{},this._renderer)}}class Gr{constructor(A,M,B,ae){this.id=A,this.element=M,this._renderer=ae,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",B)}_listen(A,M){return this._renderer.listen(this.element,`@@${this.id}:${A}`,M)}_command(A,...M){return fr(this._renderer,this.element,this.id,A,M)}onDone(A){this._listen("done",A)}onStart(A){this._listen("start",A)}onDestroy(A){this._listen("destroy",A)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(A){this._command("setPosition",A)}getPosition(){var A,M;return null!==(M=null===(A=this._renderer.engine.players[+this.id])||void 0===A?void 0:A.getPosition())&&void 0!==M?M:0}}function fr(oe,A,M,B,ae){return oe.setProperty(A,`@@${M}:${B}`,ae)}const oi="@.disabled";let Dn=(()=>{class oe{constructor(M,B,ae){this.delegate=M,this.engine=B,this._zone=ae,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),B.onRemovalComplete=(Ce,Fe)=>{Fe&&Fe.parentNode(Ce)&&Fe.removeChild(Ce.parentNode,Ce)}}createRenderer(M,B){const Ce=this.delegate.createRenderer(M,B);if(!(M&&B&&B.data&&B.data.animation)){let Zt=this._rendererCache.get(Ce);return Zt||(Zt=new Ji("",Ce,this.engine),this._rendererCache.set(Ce,Zt)),Zt}const Fe=B.id,Le=B.id+"-"+this._currentId;this._currentId++,this.engine.register(Le,M);const ut=Zt=>{Array.isArray(Zt)?Zt.forEach(ut):this.engine.registerTrigger(Fe,Le,M,Zt.name,Zt)};return B.data.animation.forEach(ut),new ys(this,Le,Ce,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(M,B,ae){M>=0&&M<this._microtaskId?this._zone.run(()=>B(ae)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Ce=>{const[Fe,Le]=Ce;Fe(Le)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([B,ae]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return oe.\u0275fac=function(M){return new(M||oe)(P.LFG(P.FYo),P.LFG(ho),P.LFG(P.R0b))},oe.\u0275prov=P.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class Ji{constructor(A,M,B){this.namespaceId=A,this.delegate=M,this.engine=B,this.destroyNode=this.delegate.destroyNode?ae=>M.destroyNode(ae):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(A,M){return this.delegate.createElement(A,M)}createComment(A){return this.delegate.createComment(A)}createText(A){return this.delegate.createText(A)}appendChild(A,M){this.delegate.appendChild(A,M),this.engine.onInsert(this.namespaceId,M,A,!1)}insertBefore(A,M,B,ae=!0){this.delegate.insertBefore(A,M,B),this.engine.onInsert(this.namespaceId,M,A,ae)}removeChild(A,M,B){this.engine.onRemove(this.namespaceId,M,this.delegate,B)}selectRootElement(A,M){return this.delegate.selectRootElement(A,M)}parentNode(A){return this.delegate.parentNode(A)}nextSibling(A){return this.delegate.nextSibling(A)}setAttribute(A,M,B,ae){this.delegate.setAttribute(A,M,B,ae)}removeAttribute(A,M,B){this.delegate.removeAttribute(A,M,B)}addClass(A,M){this.delegate.addClass(A,M)}removeClass(A,M){this.delegate.removeClass(A,M)}setStyle(A,M,B,ae){this.delegate.setStyle(A,M,B,ae)}removeStyle(A,M,B){this.delegate.removeStyle(A,M,B)}setProperty(A,M,B){"@"==M.charAt(0)&&M==oi?this.disableAnimations(A,!!B):this.delegate.setProperty(A,M,B)}setValue(A,M){this.delegate.setValue(A,M)}listen(A,M,B){return this.delegate.listen(A,M,B)}disableAnimations(A,M){this.engine.disableAnimations(A,M)}}class ys extends Ji{constructor(A,M,B,ae){super(M,B,ae),this.factory=A,this.namespaceId=M}setProperty(A,M,B){"@"==M.charAt(0)?"."==M.charAt(1)&&M==oi?this.disableAnimations(A,B=void 0===B||!!B):this.engine.process(this.namespaceId,A,M.substr(1),B):this.delegate.setProperty(A,M,B)}listen(A,M,B){if("@"==M.charAt(0)){const ae=function(oe){switch(oe){case"body":return document.body;case"document":return document;case"window":return window;default:return oe}}(A);let Ce=M.substr(1),Fe="";return"@"!=Ce.charAt(0)&&([Ce,Fe]=function(oe){const A=oe.indexOf(".");return[oe.substring(0,A),oe.substr(A+1)]}(Ce)),this.engine.listen(this.namespaceId,ae,Ce,Fe,Le=>{this.factory.scheduleListenerCallback(Le._data||-1,B,Le)})}return this.delegate.listen(A,M,B)}}let $u=(()=>{class oe extends ho{constructor(M,B,ae){super(M.body,B,ae)}ngOnDestroy(){this.flush()}}return oe.\u0275fac=function(M){return new(M||oe)(P.LFG(xt.K0),P.LFG(nt),P.LFG(Si))},oe.\u0275prov=P.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const _r=new P.OlP("AnimationModuleType"),vs=[{provide:J._j,useClass:wn},{provide:Si,useFactory:function(){return new ei}},{provide:ho,useClass:$u},{provide:P.FYo,useFactory:function(oe,A,M){return new Dn(oe,A,M)},deps:[g.se,ho,P.R0b]}],Pi=[{provide:nt,useFactory:function(){return"function"==typeof We()?new V:new k}},{provide:_r,useValue:"BrowserAnimations"},...vs],Os=[{provide:nt,useClass:st},{provide:_r,useValue:"NoopAnimations"},...vs];let Rs=(()=>{class oe{static withConfig(M){return{ngModule:oe,providers:M.disableAnimations?Os:Pi}}}return oe.\u0275fac=function(M){return new(M||oe)},oe.\u0275mod=P.oAB({type:oe}),oe.\u0275inj=P.cJS({providers:Pi,imports:[g.b2]}),oe})()},9075:(Ht,it,K)=>{"use strict";K.d(it,{b2:()=>xi,q6:()=>Kr,se:()=>Xn});var P=K(8583),g=K(7716);class J extends P.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class C extends J{static makeCurrent(){(0,P.HT)(new C)}onAndCancel(_e,ye,qe){return _e.addEventListener(ye,qe,!1),()=>{_e.removeEventListener(ye,qe,!1)}}dispatchEvent(_e,ye){_e.dispatchEvent(ye)}remove(_e){_e.parentNode&&_e.parentNode.removeChild(_e)}createElement(_e,ye){return(ye=ye||this.getDefaultDocument()).createElement(_e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(_e){return _e.nodeType===Node.ELEMENT_NODE}isShadowRoot(_e){return _e instanceof DocumentFragment}getGlobalEventTarget(_e,ye){return"window"===ye?window:"document"===ye?_e:"body"===ye?_e.body:null}getBaseHref(_e){const ye=(Ve=Ve||document.querySelector("base"),Ve?Ve.getAttribute("href"):null);return null==ye?null:function(ie){Ne=Ne||document.createElement("a"),Ne.setAttribute("href",ie);const _e=Ne.pathname;return"/"===_e.charAt(0)?_e:`/${_e}`}(ye)}resetBaseElement(){Ve=null}getUserAgent(){return window.navigator.userAgent}getCookie(_e){return(0,P.Mx)(document.cookie,_e)}}let Ne,Ve=null;const be=new g.OlP("TRANSITION_ID"),Ae=[{provide:g.ip1,useFactory:function(ie,_e,ye){return()=>{ye.get(g.CZH).donePromise.then(()=>{const qe=(0,P.q)(),yt=_e.querySelectorAll(`style[ng-transition="${ie}"]`);for(let rn=0;rn<yt.length;rn++)qe.remove(yt[rn])})}},deps:[be,P.K0,g.zs3],multi:!0}];class ge{static init(){(0,g.VLi)(new ge)}addToWindow(_e){g.dqk.getAngularTestability=(qe,yt=!0)=>{const rn=_e.findTestabilityInTree(qe,yt);if(null==rn)throw new Error("Could not find testability for element.");return rn},g.dqk.getAllAngularTestabilities=()=>_e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>_e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(qe=>{const yt=g.dqk.getAllAngularTestabilities();let rn=yt.length,Mn=!1;const vn=function(cn){Mn=Mn||cn,rn--,0==rn&&qe(Mn)};yt.forEach(function(cn){cn.whenStable(vn)})})}findTestabilityInTree(_e,ye,qe){if(null==ye)return null;const yt=_e.getTestability(ye);return null!=yt?yt:qe?(0,P.q)().isShadowRoot(ye)?this.findTestabilityInTree(_e,ye.host,!0):this.findTestabilityInTree(_e,ye.parentElement,!0):null}}let Ee=(()=>{class ie{build(){return new XMLHttpRequest}}return ie.\u0275fac=function(ye){return new(ye||ie)},ie.\u0275prov=g.Yz7({token:ie,factory:ie.\u0275fac}),ie})();const st=new g.OlP("EventManagerPlugins");let nt=(()=>{class ie{constructor(ye,qe){this._zone=qe,this._eventNameToPlugin=new Map,ye.forEach(yt=>yt.manager=this),this._plugins=ye.slice().reverse()}addEventListener(ye,qe,yt){return this._findPluginFor(qe).addEventListener(ye,qe,yt)}addGlobalEventListener(ye,qe,yt){return this._findPluginFor(qe).addGlobalEventListener(ye,qe,yt)}getZone(){return this._zone}_findPluginFor(ye){const qe=this._eventNameToPlugin.get(ye);if(qe)return qe;const yt=this._plugins;for(let rn=0;rn<yt.length;rn++){const Mn=yt[rn];if(Mn.supports(ye))return this._eventNameToPlugin.set(ye,Mn),Mn}throw new Error(`No event manager plugin found for event ${ye}`)}}return ie.\u0275fac=function(ye){return new(ye||ie)(g.LFG(st),g.LFG(g.R0b))},ie.\u0275prov=g.Yz7({token:ie,factory:ie.\u0275fac}),ie})();class vt{constructor(_e){this._doc=_e}addGlobalEventListener(_e,ye,qe){const yt=(0,P.q)().getGlobalEventTarget(this._doc,_e);if(!yt)throw new Error(`Unsupported event target ${yt} for event ${ye}`);return this.addEventListener(yt,ye,qe)}}let at=(()=>{class ie{constructor(){this._stylesSet=new Set}addStyles(ye){const qe=new Set;ye.forEach(yt=>{this._stylesSet.has(yt)||(this._stylesSet.add(yt),qe.add(yt))}),this.onStylesAdded(qe)}onStylesAdded(ye){}getAllStyles(){return Array.from(this._stylesSet)}}return ie.\u0275fac=function(ye){return new(ye||ie)},ie.\u0275prov=g.Yz7({token:ie,factory:ie.\u0275fac}),ie})(),tn=(()=>{class ie extends at{constructor(ye){super(),this._doc=ye,this._hostNodes=new Map,this._hostNodes.set(ye.head,[])}_addStylesToHost(ye,qe,yt){ye.forEach(rn=>{const Mn=this._doc.createElement("style");Mn.textContent=rn,yt.push(qe.appendChild(Mn))})}addHost(ye){const qe=[];this._addStylesToHost(this._stylesSet,ye,qe),this._hostNodes.set(ye,qe)}removeHost(ye){const qe=this._hostNodes.get(ye);qe&&qe.forEach(ln),this._hostNodes.delete(ye)}onStylesAdded(ye){this._hostNodes.forEach((qe,yt)=>{this._addStylesToHost(ye,yt,qe)})}ngOnDestroy(){this._hostNodes.forEach(ye=>ye.forEach(ln))}}return ie.\u0275fac=function(ye){return new(ye||ie)(g.LFG(P.K0))},ie.\u0275prov=g.Yz7({token:ie,factory:ie.\u0275fac}),ie})();function ln(ie){(0,P.q)().remove(ie)}const Tn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},sn=/%COMP%/g;function sr(ie,_e,ye){for(let qe=0;qe<_e.length;qe++){let yt=_e[qe];Array.isArray(yt)?sr(ie,yt,ye):(yt=yt.replace(sn,ie),ye.push(yt))}return ye}function zn(ie){return _e=>{if("__ngUnwrap__"===_e)return ie;!1===ie(_e)&&(_e.preventDefault(),_e.returnValue=!1)}}let Xn=(()=>{class ie{constructor(ye,qe,yt){this.eventManager=ye,this.sharedStylesHost=qe,this.appId=yt,this.rendererByCompId=new Map,this.defaultRenderer=new Sn(ye)}createRenderer(ye,qe){if(!ye||!qe)return this.defaultRenderer;switch(qe.encapsulation){case g.ifc.Emulated:{let yt=this.rendererByCompId.get(qe.id);return yt||(yt=new Yt(this.eventManager,this.sharedStylesHost,qe,this.appId),this.rendererByCompId.set(qe.id,yt)),yt.applyToHost(ye),yt}case 1:case g.ifc.ShadowDom:return new jn(this.eventManager,this.sharedStylesHost,ye,qe);default:if(!this.rendererByCompId.has(qe.id)){const yt=sr(qe.id,qe.styles,[]);this.sharedStylesHost.addStyles(yt),this.rendererByCompId.set(qe.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ie.\u0275fac=function(ye){return new(ye||ie)(g.LFG(nt),g.LFG(tn),g.LFG(g.AFp))},ie.\u0275prov=g.Yz7({token:ie,factory:ie.\u0275fac}),ie})();class Sn{constructor(_e){this.eventManager=_e,this.data=Object.create(null)}destroy(){}createElement(_e,ye){return ye?document.createElementNS(Tn[ye]||ye,_e):document.createElement(_e)}createComment(_e){return document.createComment(_e)}createText(_e){return document.createTextNode(_e)}appendChild(_e,ye){_e.appendChild(ye)}insertBefore(_e,ye,qe){_e&&_e.insertBefore(ye,qe)}removeChild(_e,ye){_e&&_e.removeChild(ye)}selectRootElement(_e,ye){let qe="string"==typeof _e?document.querySelector(_e):_e;if(!qe)throw new Error(`The selector "${_e}" did not match any elements`);return ye||(qe.textContent=""),qe}parentNode(_e){return _e.parentNode}nextSibling(_e){return _e.nextSibling}setAttribute(_e,ye,qe,yt){if(yt){ye=yt+":"+ye;const rn=Tn[yt];rn?_e.setAttributeNS(rn,ye,qe):_e.setAttribute(ye,qe)}else _e.setAttribute(ye,qe)}removeAttribute(_e,ye,qe){if(qe){const yt=Tn[qe];yt?_e.removeAttributeNS(yt,ye):_e.removeAttribute(`${qe}:${ye}`)}else _e.removeAttribute(ye)}addClass(_e,ye){_e.classList.add(ye)}removeClass(_e,ye){_e.classList.remove(ye)}setStyle(_e,ye,qe,yt){yt&(g.JOm.DashCase|g.JOm.Important)?_e.style.setProperty(ye,qe,yt&g.JOm.Important?"important":""):_e.style[ye]=qe}removeStyle(_e,ye,qe){qe&g.JOm.DashCase?_e.style.removeProperty(ye):_e.style[ye]=""}setProperty(_e,ye,qe){_e[ye]=qe}setValue(_e,ye){_e.nodeValue=ye}listen(_e,ye,qe){return"string"==typeof _e?this.eventManager.addGlobalEventListener(_e,ye,zn(qe)):this.eventManager.addEventListener(_e,ye,zn(qe))}}class Yt extends Sn{constructor(_e,ye,qe,yt){super(_e),this.component=qe;const rn=sr(yt+"-"+qe.id,qe.styles,[]);ye.addStyles(rn),this.contentAttr="_ngcontent-%COMP%".replace(sn,yt+"-"+qe.id),this.hostAttr="_nghost-%COMP%".replace(sn,yt+"-"+qe.id)}applyToHost(_e){super.setAttribute(_e,this.hostAttr,"")}createElement(_e,ye){const qe=super.createElement(_e,ye);return super.setAttribute(qe,this.contentAttr,""),qe}}class jn extends Sn{constructor(_e,ye,qe,yt){super(_e),this.sharedStylesHost=ye,this.hostEl=qe,this.shadowRoot=qe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const rn=sr(yt.id,yt.styles,[]);for(let Mn=0;Mn<rn.length;Mn++){const vn=document.createElement("style");vn.textContent=rn[Mn],this.shadowRoot.appendChild(vn)}}nodeOrShadowRoot(_e){return _e===this.hostEl?this.shadowRoot:_e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(_e,ye){return super.appendChild(this.nodeOrShadowRoot(_e),ye)}insertBefore(_e,ye,qe){return super.insertBefore(this.nodeOrShadowRoot(_e),ye,qe)}removeChild(_e,ye){return super.removeChild(this.nodeOrShadowRoot(_e),ye)}parentNode(_e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(_e)))}}let Vn=(()=>{class ie extends vt{constructor(ye){super(ye)}supports(ye){return!0}addEventListener(ye,qe,yt){return ye.addEventListener(qe,yt,!1),()=>this.removeEventListener(ye,qe,yt)}removeEventListener(ye,qe,yt){return ye.removeEventListener(qe,yt)}}return ie.\u0275fac=function(ye){return new(ye||ie)(g.LFG(P.K0))},ie.\u0275prov=g.Yz7({token:ie,factory:ie.\u0275fac}),ie})();const an=["alt","control","meta","shift"],He={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mn={alt:ie=>ie.altKey,control:ie=>ie.ctrlKey,meta:ie=>ie.metaKey,shift:ie=>ie.shiftKey};let qt=(()=>{class ie extends vt{constructor(ye){super(ye)}supports(ye){return null!=ie.parseEventName(ye)}addEventListener(ye,qe,yt){const rn=ie.parseEventName(qe),Mn=ie.eventCallback(rn.fullKey,yt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,P.q)().onAndCancel(ye,rn.domEventName,Mn))}static parseEventName(ye){const qe=ye.toLowerCase().split("."),yt=qe.shift();if(0===qe.length||"keydown"!==yt&&"keyup"!==yt)return null;const rn=ie._normalizeKey(qe.pop());let Mn="";if(an.forEach(cn=>{const er=qe.indexOf(cn);er>-1&&(qe.splice(er,1),Mn+=cn+".")}),Mn+=rn,0!=qe.length||0===rn.length)return null;const vn={};return vn.domEventName=yt,vn.fullKey=Mn,vn}static getEventFullKey(ye){let qe="",yt=function(ie){let _e=ie.key;if(null==_e){if(_e=ie.keyIdentifier,null==_e)return"Unidentified";_e.startsWith("U+")&&(_e=String.fromCharCode(parseInt(_e.substring(2),16)),3===ie.location&&pt.hasOwnProperty(_e)&&(_e=pt[_e]))}return He[_e]||_e}(ye);return yt=yt.toLowerCase()," "===yt?yt="space":"."===yt&&(yt="dot"),an.forEach(rn=>{rn!=yt&&mn[rn](ye)&&(qe+=rn+".")}),qe+=yt,qe}static eventCallback(ye,qe,yt){return rn=>{ie.getEventFullKey(rn)===ye&&yt.runGuarded(()=>qe(rn))}}static _normalizeKey(ye){switch(ye){case"esc":return"escape";default:return ye}}}return ie.\u0275fac=function(ye){return new(ye||ie)(g.LFG(P.K0))},ie.\u0275prov=g.Yz7({token:ie,factory:ie.\u0275fac}),ie})();const Kr=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:P.bD},{provide:g.g9A,useValue:function(){C.makeCurrent(),ge.init()},multi:!0},{provide:P.K0,useFactory:function(){return(0,g.RDi)(document),document},deps:[]}]),wr=[[],{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function(){return new g.qLn},deps:[]},{provide:st,useClass:Vn,multi:!0,deps:[P.K0,g.R0b,g.Lbi]},{provide:st,useClass:qt,multi:!0,deps:[P.K0]},[],{provide:Xn,useClass:Xn,deps:[nt,tn,g.AFp]},{provide:g.FYo,useExisting:Xn},{provide:at,useExisting:tn},{provide:tn,useClass:tn,deps:[P.K0]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:nt,useClass:nt,deps:[st,g.R0b]},{provide:P.JF,useClass:Ee,deps:[]},[]];let xi=(()=>{class ie{constructor(ye){if(ye)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(ye){return{ngModule:ie,providers:[{provide:g.AFp,useValue:ye.appId},{provide:be,useExisting:g.AFp},Ae]}}}return ie.\u0275fac=function(ye){return new(ye||ie)(g.LFG(ie,12))},ie.\u0275mod=g.oAB({type:ie}),ie.\u0275inj=g.cJS({providers:wr,imports:[P.ez,g.hGG]}),ie})();"undefined"!=typeof window&&window},2213:(Ht,it,K)=>{"use strict";K.d(it,{gz:()=>Or,F0:()=>ni,rH:()=>Bi,Od:()=>wa,Bz:()=>ss,lC:()=>Wu});var P=K(8583),g=K(7716),J=K(4869),C=K(9796),Ve=K(5197),we=K(509),Ne=K(6693);const he={};class se{constructor(R){this.resultSelector=R}call(R,O){return O.subscribe(new Ae(R,this.resultSelector))}}class Ae extends Ve.L{constructor(R,O){super(R),this.resultSelector=O,this.active=0,this.values=[],this.observables=[]}_next(R){this.values.push(he),this.observables.push(R)}_complete(){const R=this.observables,O=R.length;if(0===O)this.destination.complete();else{this.active=O,this.toRespond=O;for(let Z=0;Z<O;Z++)this.add((0,we.D)(this,R[Z],void 0,Z))}}notifyComplete(R){0==(this.active-=1)&&this.destination.complete()}notifyNext(R,O,Z){const te=this.values,Ie=this.toRespond?te[Z]===he?--this.toRespond:this.toRespond:0;te[Z]=O,0===Ie&&(this.resultSelector?this._tryResultSelector(te):this.destination.next(te.slice()))}_tryResultSelector(R){let O;try{O=this.resultSelector.apply(this,R)}catch(Z){return void this.destination.error(Z)}this.destination.next(O)}}var ge=K(4402),Ee=K(5917),Oe=K(6215),Ue=K(7574),Xe=K(3410),ne=K(8071),Ke=K(1439),At=K(9193),On=K(2441),Lt=K(9765),ct=K(5345);function $t(U){return function(O){const Z=new Rt(U),te=O.lift(Z);return Z.caught=te}}class Rt{constructor(R){this.selector=R}call(R,O){return O.subscribe(new En(R,this.selector,this.caught))}}class En extends ct.Ds{constructor(R,O,Z){super(R),this.selector=O,this.caught=Z}error(R){if(!this.isStopped){let O;try{O=this.selector(R,this.caught)}catch(de){return void super.error(de)}this._unsubscribeAndRecycle();const Z=new ct.IY(this);this.add(Z);const te=(0,ct.ft)(O,Z);te!==Z&&this.add(te)}}}var Dt=K(5435),Je=K(7393),ot=K(7108);function st(U){return function(O){return 0===U?(0,At.c)():O.lift(new nt(U))}}class nt{constructor(R){if(this.total=R,this.total<0)throw new ot.W}call(R,O){return O.subscribe(new vt(R,this.total))}}class vt extends Je.L{constructor(R,O){super(R),this.total=O,this.ring=new Array,this.count=0}_next(R){const O=this.ring,Z=this.total,te=this.count++;O.length<Z?O.push(R):O[te%Z]=R}_complete(){const R=this.destination;let O=this.count;if(O>0){const Z=this.count>=this.total?this.total:this.count,te=this.ring;for(let de=0;de<Z;de++){const Ie=O++%Z;R.next(te[Ie])}}R.complete()}}var at=K(4635),tn=K(5242),ln=K(4487),sn=K(5319);class Nt{constructor(R){this.callback=R}call(R,O){return O.subscribe(new Jt(R,this.callback))}}class Jt extends Je.L{constructor(R,O){super(R),this.add(new sn.w(O))}}var Gt=K(8002),Fn=K(3190),Cn=K(5257),sr=K(9761),zn=K(2145),Bn=K(4612),Xn=K(8049),Sn=K(9773),An=K(3342),Oi=K(1307),gn=K(3282);class Yt{constructor(R,O){this.id=R,this.url=O}}class jn extends Yt{constructor(R,O,Z="imperative",te=null){super(R,O),this.navigationTrigger=Z,this.restoredState=te}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Vn extends Yt{constructor(R,O,Z){super(R,O),this.urlAfterRedirects=Z}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qt extends Yt{constructor(R,O,Z){super(R,O),this.reason=Z}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class hr extends Yt{constructor(R,O,Z){super(R,O),this.error=Z}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Br extends Yt{constructor(R,O,Z,te){super(R,O),this.urlAfterRedirects=Z,this.state=te}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $n extends Yt{constructor(R,O,Z,te){super(R,O),this.urlAfterRedirects=Z,this.state=te}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tt extends Yt{constructor(R,O,Z,te,de){super(R,O),this.urlAfterRedirects=Z,this.state=te,this.shouldActivate=de}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $e extends Yt{constructor(R,O,Z,te){super(R,O),this.urlAfterRedirects=Z,this.state=te}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ze extends Yt{constructor(R,O,Z,te){super(R,O),this.urlAfterRedirects=Z,this.state=te}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mt{constructor(R){this.route=R}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pt{constructor(R){this.route=R}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class an{constructor(R){this.snapshot=R}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ot{constructor(R){this.snapshot=R}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class He{constructor(R){this.snapshot=R}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pt{constructor(R){this.snapshot=R}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bt{constructor(R,O,Z){this.routerEvent=R,this.position=O,this.anchor=Z}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const St="primary";class Ut{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const O=this.params[R];return Array.isArray(O)?O[0]:O}return null}getAll(R){if(this.has(R)){const O=this.params[R];return Array.isArray(O)?O:[O]}return[]}get keys(){return Object.keys(this.params)}}function hn(U){return new Ut(U)}const mn="ngNavigationCancelingError";function qt(U){const R=Error("NavigationCancelingError: "+U);return R[mn]=!0,R}function Pe(U,R,O){const Z=O.path.split("/");if(Z.length>U.length||"full"===O.pathMatch&&(R.hasChildren()||Z.length<U.length))return null;const te={};for(let de=0;de<Z.length;de++){const Ie=Z[de],Ze=U[de];if(Ie.startsWith(":"))te[Ie.substring(1)]=Ze;else if(Ie!==Ze.path)return null}return{consumed:U.slice(0,Z.length),posParams:te}}function et(U,R){const O=U?Object.keys(U):void 0,Z=R?Object.keys(R):void 0;if(!O||!Z||O.length!=Z.length)return!1;let te;for(let de=0;de<O.length;de++)if(te=O[de],!tt(U[te],R[te]))return!1;return!0}function tt(U,R){if(Array.isArray(U)&&Array.isArray(R)){if(U.length!==R.length)return!1;const O=[...U].sort(),Z=[...R].sort();return O.every((te,de)=>Z[de]===te)}return U===R}function zt(U){return Array.prototype.concat.apply([],U)}function _n(U){return U.length>0?U[U.length-1]:null}function Pn(U,R){for(const O in U)U.hasOwnProperty(O)&&R(U[O],O)}function Ln(U){return(0,g.CqO)(U)?U:(0,g.QGY)(U)?(0,ge.D)(Promise.resolve(U)):(0,Ee.of)(U)}const jr={exact:function Fo(U,R,O){if(!Dr(U.segments,R.segments)||!Nr(U.segments,R.segments,O)||U.numberOfChildren!==R.numberOfChildren)return!1;for(const Z in R.children)if(!U.children[Z]||!Fo(U.children[Z],R.children[Z],O))return!1;return!0},subset:uo},Kr={exact:function(U,R){return et(U,R)},subset:function(U,R){return Object.keys(R).length<=Object.keys(U).length&&Object.keys(R).every(O=>tt(U[O],R[O]))},ignored:()=>!0};function wr(U,R,O){return jr[O.paths](U.root,R.root,O.matrixParams)&&Kr[O.queryParams](U.queryParams,R.queryParams)&&!("exact"===O.fragment&&U.fragment!==R.fragment)}function uo(U,R,O){return ns(U,R,R.segments,O)}function ns(U,R,O,Z){if(U.segments.length>O.length){const te=U.segments.slice(0,O.length);return!(!Dr(te,O)||R.hasChildren()||!Nr(te,O,Z))}if(U.segments.length===O.length){if(!Dr(U.segments,O)||!Nr(U.segments,O,Z))return!1;for(const te in R.children)if(!U.children[te]||!uo(U.children[te],R.children[te],Z))return!1;return!0}{const te=O.slice(0,U.segments.length),de=O.slice(U.segments.length);return!!(Dr(U.segments,te)&&Nr(U.segments,te,Z)&&U.children[St])&&ns(U.children[St],R,de,Z)}}function Nr(U,R,O){return R.every((Z,te)=>Kr[O](U[te].parameters,Z.parameters))}class ur{constructor(R,O,Z){this.root=R,this.queryParams=O,this.fragment=Z}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hn(this.queryParams)),this._queryParamMap}toString(){return $r.serialize(this)}}class yn{constructor(R,O){this.segments=R,this.children=O,this.parent=null,Pn(O,(Z,te)=>Z.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Si(this)}}class Vr{constructor(R,O){this.path=R,this.parameters=O}get parameterMap(){return this._parameterMap||(this._parameterMap=hn(this.parameters)),this._parameterMap}toString(){return _e(this)}}function Dr(U,R){return U.length===R.length&&U.every((O,Z)=>O.path===R[Z].path)}class dn{}class In{parse(R){const O=new zi(R);return new ur(O.parseRootSegment(),O.parseQueryParams(),O.parseFragment())}serialize(R){var U;return`${`/${Tr(R.root,!0)}`}${function(U){const R=Object.keys(U).map(O=>{const Z=U[O];return Array.isArray(Z)?Z.map(te=>`${br(O)}=${br(te)}`).join("&"):`${br(O)}=${br(Z)}`}).filter(O=>!!O);return R.length?`?${R.join("&")}`:""}(R.queryParams)}${"string"==typeof R.fragment?`#${U=R.fragment,encodeURI(U)}`:""}`}}const $r=new In;function Si(U){return U.segments.map(R=>_e(R)).join("/")}function Tr(U,R){if(!U.hasChildren())return Si(U);if(R){const O=U.children[St]?Tr(U.children[St],!1):"",Z=[];return Pn(U.children,(te,de)=>{de!==St&&Z.push(`${de}:${Tr(te,!1)}`)}),Z.length>0?`${O}(${Z.join("//")})`:O}{const O=function(U,R){let O=[];return Pn(U.children,(Z,te)=>{te===St&&(O=O.concat(R(Z,te)))}),Pn(U.children,(Z,te)=>{te!==St&&(O=O.concat(R(Z,te)))}),O}(U,(Z,te)=>te===St?[Tr(U.children[St],!1)]:[`${te}:${Tr(Z,!1)}`]);return 1===Object.keys(U.children).length&&null!=U.children[St]?`${Si(U)}/${O[0]}`:`${Si(U)}/(${O.join("//")})`}}function ei(U){return encodeURIComponent(U).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function br(U){return ei(U).replace(/%3B/gi,";")}function gt(U){return ei(U).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function X(U){return decodeURIComponent(U)}function ie(U){return X(U.replace(/\+/g,"%20"))}function _e(U){return`${gt(U.path)}${function(U){return Object.keys(U).map(R=>`;${gt(R)}=${gt(U[R])}`).join("")}(U.parameters)}`}const yt=/^[^\/()?;=#]+/;function rn(U){const R=U.match(yt);return R?R[0]:""}const Mn=/^[^=?&#]+/,cn=/^[^?&#]+/;class zi{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yn([],{}):new yn([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let O={};this.peekStartsWith("/(")&&(this.capture("/"),O=this.parseParens(!0));let Z={};return this.peekStartsWith("(")&&(Z=this.parseParens(!1)),(R.length>0||Object.keys(O).length>0)&&(Z[St]=new yn(R,O)),Z}parseSegment(){const R=rn(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(R),new Vr(X(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const O=rn(this.remaining);if(!O)return;this.capture(O);let Z="";if(this.consumeOptional("=")){const te=rn(this.remaining);te&&(Z=te,this.capture(Z))}R[X(O)]=X(Z)}parseQueryParam(R){const O=function(U){const R=U.match(Mn);return R?R[0]:""}(this.remaining);if(!O)return;this.capture(O);let Z="";if(this.consumeOptional("=")){const Ie=function(U){const R=U.match(cn);return R?R[0]:""}(this.remaining);Ie&&(Z=Ie,this.capture(Z))}const te=ie(O),de=ie(Z);if(R.hasOwnProperty(te)){let Ie=R[te];Array.isArray(Ie)||(Ie=[Ie],R[te]=Ie),Ie.push(de)}else R[te]=de}parseParens(R){const O={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Z=rn(this.remaining),te=this.remaining[Z.length];if("/"!==te&&")"!==te&&";"!==te)throw new Error(`Cannot parse url '${this.url}'`);let de;Z.indexOf(":")>-1?(de=Z.substr(0,Z.indexOf(":")),this.capture(de),this.capture(":")):R&&(de=St);const Ie=this.parseChildren();O[de]=1===Object.keys(Ie).length?Ie[St]:new yn([],Ie),this.consumeOptional("//")}return O}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new Error(`Expected "${R}".`)}}class gr{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const O=this.pathFromRoot(R);return O.length>1?O[O.length-2]:null}children(R){const O=Vi(R,this._root);return O?O.children.map(Z=>Z.value):[]}firstChild(R){const O=Vi(R,this._root);return O&&O.children.length>0?O.children[0].value:null}siblings(R){const O=lo(R,this._root);return O.length<2?[]:O[O.length-2].children.map(te=>te.value).filter(te=>te!==R)}pathFromRoot(R){return lo(R,this._root).map(O=>O.value)}}function Vi(U,R){if(U===R.value)return R;for(const O of R.children){const Z=Vi(U,O);if(Z)return Z}return null}function lo(U,R){if(U===R.value)return[R];for(const O of R.children){const Z=lo(U,O);if(Z.length)return Z.unshift(R),Z}return[]}class Wr{constructor(R,O){this.value=R,this.children=O}toString(){return`TreeNode(${this.value})`}}function Ui(U){const R={};return U&&U.children.forEach(O=>R[O.value.outlet]=O),R}class ar extends gr{constructor(R,O){super(R),this.snapshot=O,yi(this,R)}toString(){return this.snapshot.toString()}}function Hn(U,R){const O=function(U,R){const Ie=new Zi([],{},{},"",{},St,R,null,U.root,-1,{});return new Qi("",new Wr(Ie,[]))}(U,R),Z=new Oe.X([new Vr("",{})]),te=new Oe.X({}),de=new Oe.X({}),Ie=new Oe.X({}),Ze=new Oe.X(""),Et=new Or(Z,te,Ie,Ze,de,St,R,O.root);return Et.snapshot=O.root,new ar(new Wr(Et,[]),O)}class Or{constructor(R,O,Z,te,de,Ie,Ze,Et){this.url=R,this.params=O,this.queryParams=Z,this.fragment=te,this.data=de,this.outlet=Ie,this.component=Ze,this._futureSnapshot=Et}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Gt.U)(R=>hn(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Gt.U)(R=>hn(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qi(U,R="emptyOnly"){const O=U.pathFromRoot;let Z=0;if("always"!==R)for(Z=O.length-1;Z>=1;){const te=O[Z],de=O[Z-1];if(te.routeConfig&&""===te.routeConfig.path)Z--;else{if(de.component)break;Z--}}return function(U){return U.reduce((R,O)=>({params:Object.assign(Object.assign({},R.params),O.params),data:Object.assign(Object.assign({},R.data),O.data),resolve:Object.assign(Object.assign({},R.resolve),O._resolvedData)}),{params:{},data:{},resolve:{}})}(O.slice(Z))}class Zi{constructor(R,O,Z,te,de,Ie,Ze,Et,fn,ir,Gn){this.url=R,this.params=O,this.queryParams=Z,this.fragment=te,this.data=de,this.outlet=Ie,this.component=Ze,this.routeConfig=Et,this._urlSegment=fn,this._lastPathIndex=ir,this._resolve=Gn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Z=>Z.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Qi extends gr{constructor(R,O){super(O),this.url=R,yi(this,O)}toString(){return ds(this._root)}}function yi(U,R){R.value._routerState=U,R.children.forEach(O=>yi(U,O))}function ds(U){const R=U.children.length>0?` { ${U.children.map(ds).join(", ")} } `:"";return`${U.value}${R}`}function Hr(U){if(U.snapshot){const R=U.snapshot,O=U._futureSnapshot;U.snapshot=O,et(R.queryParams,O.queryParams)||U.queryParams.next(O.queryParams),R.fragment!==O.fragment&&U.fragment.next(O.fragment),et(R.params,O.params)||U.params.next(O.params),function(U,R){if(U.length!==R.length)return!1;for(let O=0;O<U.length;++O)if(!et(U[O],R[O]))return!1;return!0}(R.url,O.url)||U.url.next(O.url),et(R.data,O.data)||U.data.next(O.data)}else U.snapshot=U._futureSnapshot,U.data.next(U._futureSnapshot.data)}function _s(U,R){return et(U.params,R.params)&&function(U,R){return Dr(U,R)&&U.every((O,Z)=>et(O.parameters,R[Z].parameters))}(U.url,R.url)&&!(!U.parent!=!R.parent)&&(!U.parent||_s(U.parent,R.parent))}function zo(U,R,O){if(O&&U.shouldReuseRoute(R.value,O.value.snapshot)){const Z=O.value;Z._futureSnapshot=R.value;const te=function(U,R,O){return R.children.map(Z=>{for(const te of O.children)if(U.shouldReuseRoute(Z.value,te.value.snapshot))return zo(U,Z,te);return zo(U,Z)})}(U,R,O);return new Wr(Z,te)}{if(U.shouldAttach(R.value)){const de=U.retrieve(R.value);if(null!==de){const Ie=de.route;return No(R,Ie),Ie}}const Z=function(U){return new Or(new Oe.X(U.url),new Oe.X(U.params),new Oe.X(U.queryParams),new Oe.X(U.fragment),new Oe.X(U.data),U.outlet,U.component,U)}(R.value),te=R.children.map(de=>zo(U,de));return new Wr(Z,te)}}function No(U,R){if(U.value.routeConfig!==R.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(U.children.length!==R.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");R.value._futureSnapshot=U.value;for(let O=0;O<U.children.length;++O)No(U.children[O],R.children[O])}function qo(U){return"object"==typeof U&&null!=U&&!U.outlets&&!U.segmentPath}function vi(U){return"object"==typeof U&&null!=U&&U.outlets}function bi(U,R,O,Z,te){let de={};return Z&&Pn(Z,(Ie,Ze)=>{de[Ze]=Array.isArray(Ie)?Ie.map(Et=>`${Et}`):`${Ie}`}),new ur(O.root===U?R:or(O.root,U,R),de,te)}function or(U,R,O){const Z={};return Pn(U.children,(te,de)=>{Z[de]=te===R?O:or(te,R,O)}),new yn(U.segments,Z)}class to{constructor(R,O,Z){if(this.isAbsolute=R,this.numberOfDoubleDots=O,this.commands=Z,R&&Z.length>0&&qo(Z[0]))throw new Error("Root segment cannot have matrix parameters");const te=Z.find(vi);if(te&&te!==_n(Z))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class co{constructor(R,O,Z){this.segmentGroup=R,this.processChildren=O,this.index=Z}}function ko(U,R,O){if(U||(U=new yn([],{})),0===U.segments.length&&U.hasChildren())return Ci(U,R,O);const Z=function(U,R,O){let Z=0,te=R;const de={match:!1,pathIndex:0,commandIndex:0};for(;te<U.segments.length;){if(Z>=O.length)return de;const Ie=U.segments[te],Ze=O[Z];if(vi(Ze))break;const Et=`${Ze}`,fn=Z<O.length-1?O[Z+1]:null;if(te>0&&void 0===Et)break;if(Et&&fn&&"object"==typeof fn&&void 0===fn.outlets){if(!Do(Et,fn,Ie))return de;Z+=2}else{if(!Do(Et,{},Ie))return de;Z++}te++}return{match:!0,pathIndex:te,commandIndex:Z}}(U,R,O),te=O.slice(Z.commandIndex);if(Z.match&&Z.pathIndex<U.segments.length){const de=new yn(U.segments.slice(0,Z.pathIndex),{});return de.children[St]=new yn(U.segments.slice(Z.pathIndex),U.children),Ci(de,0,te)}return Z.match&&0===te.length?new yn(U.segments,{}):Z.match&&!U.hasChildren()?kr(U,R,O):Z.match?Ci(U,0,te):kr(U,R,O)}function Ci(U,R,O){if(0===O.length)return new yn(U.segments,{});{const Z=function(U){return vi(U[0])?U[0].outlets:{[St]:U}}(O),te={};return Pn(Z,(de,Ie)=>{"string"==typeof de&&(de=[de]),null!==de&&(te[Ie]=ko(U.children[Ie],R,de))}),Pn(U.children,(de,Ie)=>{void 0===Z[Ie]&&(te[Ie]=de)}),new yn(U.segments,te)}}function kr(U,R,O){const Z=U.segments.slice(0,R);let te=0;for(;te<O.length;){const de=O[te];if(vi(de)){const Et=is(de.outlets);return new yn(Z,Et)}if(0===te&&qo(O[0])){Z.push(new Vr(U.segments[R].path,wo(O[0]))),te++;continue}const Ie=vi(de)?de.outlets[St]:`${de}`,Ze=te<O.length-1?O[te+1]:null;Ie&&Ze&&qo(Ze)?(Z.push(new Vr(Ie,wo(Ze))),te+=2):(Z.push(new Vr(Ie,{})),te++)}return new yn(Z,{})}function is(U){const R={};return Pn(U,(O,Z)=>{"string"==typeof O&&(O=[O]),null!==O&&(R[Z]=kr(new yn([],{}),0,O))}),R}function wo(U){const R={};return Pn(U,(O,Z)=>R[Z]=`${O}`),R}function Do(U,R,O){return U==O.path&&et(R,O.parameters)}class ro{constructor(R,O,Z,te){this.routeReuseStrategy=R,this.futureState=O,this.currState=Z,this.forwardEvent=te}activate(R){const O=this.futureState._root,Z=this.currState?this.currState._root:null;this.deactivateChildRoutes(O,Z,R),Hr(this.futureState.root),this.activateChildRoutes(O,Z,R)}deactivateChildRoutes(R,O,Z){const te=Ui(O);R.children.forEach(de=>{const Ie=de.value.outlet;this.deactivateRoutes(de,te[Ie],Z),delete te[Ie]}),Pn(te,(de,Ie)=>{this.deactivateRouteAndItsChildren(de,Z)})}deactivateRoutes(R,O,Z){const te=R.value,de=O?O.value:null;if(te===de)if(te.component){const Ie=Z.getContext(te.outlet);Ie&&this.deactivateChildRoutes(R,O,Ie.children)}else this.deactivateChildRoutes(R,O,Z);else de&&this.deactivateRouteAndItsChildren(O,Z)}deactivateRouteAndItsChildren(R,O){this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,O):this.deactivateRouteAndOutlet(R,O)}detachAndStoreRouteSubtree(R,O){const Z=O.getContext(R.value.outlet);if(Z&&Z.outlet){const te=Z.outlet.detach(),de=Z.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:te,route:R,contexts:de})}}deactivateRouteAndOutlet(R,O){const Z=O.getContext(R.value.outlet),te=Z&&R.value.component?Z.children:O,de=Ui(R);for(const Ie of Object.keys(de))this.deactivateRouteAndItsChildren(de[Ie],te);Z&&Z.outlet&&(Z.outlet.deactivate(),Z.children.onOutletDeactivated(),Z.attachRef=null,Z.resolver=null,Z.route=null)}activateChildRoutes(R,O,Z){const te=Ui(O);R.children.forEach(de=>{this.activateRoutes(de,te[de.value.outlet],Z),this.forwardEvent(new pt(de.value.snapshot))}),R.children.length&&this.forwardEvent(new Ot(R.value.snapshot))}activateRoutes(R,O,Z){const te=R.value,de=O?O.value:null;if(Hr(te),te===de)if(te.component){const Ie=Z.getOrCreateContext(te.outlet);this.activateChildRoutes(R,O,Ie.children)}else this.activateChildRoutes(R,O,Z);else if(te.component){const Ie=Z.getOrCreateContext(te.outlet);if(this.routeReuseStrategy.shouldAttach(te.snapshot)){const Ze=this.routeReuseStrategy.retrieve(te.snapshot);this.routeReuseStrategy.store(te.snapshot,null),Ie.children.onOutletReAttached(Ze.contexts),Ie.attachRef=Ze.componentRef,Ie.route=Ze.route.value,Ie.outlet&&Ie.outlet.attach(Ze.componentRef,Ze.route.value),ti(Ze.route)}else{const Ze=function(U){for(let R=U.parent;R;R=R.parent){const O=R.routeConfig;if(O&&O._loadedConfig)return O._loadedConfig;if(O&&O.component)return null}return null}(te.snapshot),Et=Ze?Ze.module.componentFactoryResolver:null;Ie.attachRef=null,Ie.route=te,Ie.resolver=Et,Ie.outlet&&Ie.outlet.activateWith(te,Et),this.activateChildRoutes(R,null,Ie.children)}}else this.activateChildRoutes(R,null,Z)}}function ti(U){Hr(U.value),U.children.forEach(ti)}class Lo{constructor(R,O){this.routes=R,this.module=O}}function Ei(U){return"function"==typeof U}function Lr(U){return U instanceof ur}const q=Symbol("INITIAL_VALUE");function pe(){return(0,Fn.w)(U=>function(...U){let R,O;return(0,J.K)(U[U.length-1])&&(O=U.pop()),"function"==typeof U[U.length-1]&&(R=U.pop()),1===U.length&&(0,C.k)(U[0])&&(U=U[0]),(0,Ne.n)(U,O).lift(new se(R))}(U.map(R=>R.pipe((0,Cn.q)(1),(0,sr.O)(q)))).pipe((0,zn.R)((R,O)=>{let Z=!1;return O.reduce((te,de,Ie)=>te!==q?te:(de===q&&(Z=!0),Z||!1!==de&&Ie!==O.length-1&&!Lr(de)?te:de),R)},q),(0,Dt.h)(R=>R!==q),(0,Gt.U)(R=>Lr(R)?R:!0===R),(0,Cn.q)(1)))}let x=(()=>{class U{}return U.\u0275fac=function(O){return new(O||U)},U.\u0275cmp=g.Xpm({type:U,selectors:[["ng-component"]],decls:1,vars:0,template:function(O,Z){1&O&&g._UZ(0,"router-outlet")},directives:function(){return[Wu]},encapsulation:2}),U})();function $(U,R=""){for(let O=0;O<U.length;O++){const Z=U[O];k(Z,ee(R,Z))}}function k(U,R){U.children&&$(U.children,R)}function ee(U,R){return R?U||R.path?U&&!R.path?`${U}/`:!U&&R.path?R.path:`${U}/${R.path}`:"":U}function De(U){const R=U.children&&U.children.map(De),O=R?Object.assign(Object.assign({},U),{children:R}):Object.assign({},U);return!O.component&&(R||O.loadChildren)&&O.outlet&&O.outlet!==St&&(O.component=x),O}function je(U){return U.outlet||St}function rt(U,R){const O=U.filter(Z=>je(Z)===R);return O.push(...U.filter(Z=>je(Z)!==R)),O}const H={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function j(U,R,O){var Z;if(""===R.path)return"full"===R.pathMatch&&(U.hasChildren()||O.length>0)?Object.assign({},H):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const de=(R.matcher||Pe)(O,U,R);if(!de)return Object.assign({},H);const Ie={};Pn(de.posParams,(Et,fn)=>{Ie[fn]=Et.path});const Ze=de.consumed.length>0?Object.assign(Object.assign({},Ie),de.consumed[de.consumed.length-1].parameters):Ie;return{matched:!0,consumedSegments:de.consumed,lastChild:de.consumed.length,parameters:Ze,positionalParamSegments:null!==(Z=de.posParams)&&void 0!==Z?Z:{}}}function V(U,R,O,Z,te="corrected"){if(O.length>0&&function(U,R,O){return O.some(Z=>dr(U,R,Z)&&je(Z)!==St)}(U,O,Z)){const Ie=new yn(R,function(U,R,O,Z){const te={};te[St]=Z,Z._sourceSegment=U,Z._segmentIndexShift=R.length;for(const de of O)if(""===de.path&&je(de)!==St){const Ie=new yn([],{});Ie._sourceSegment=U,Ie._segmentIndexShift=R.length,te[je(de)]=Ie}return te}(U,R,Z,new yn(O,U.children)));return Ie._sourceSegment=U,Ie._segmentIndexShift=R.length,{segmentGroup:Ie,slicedSegments:[]}}if(0===O.length&&function(U,R,O){return O.some(Z=>dr(U,R,Z))}(U,O,Z)){const Ie=new yn(U.segments,function(U,R,O,Z,te,de){const Ie={};for(const Ze of Z)if(dr(U,O,Ze)&&!te[je(Ze)]){const Et=new yn([],{});Et._sourceSegment=U,Et._segmentIndexShift="legacy"===de?U.segments.length:R.length,Ie[je(Ze)]=Et}return Object.assign(Object.assign({},te),Ie)}(U,R,O,Z,U.children,te));return Ie._sourceSegment=U,Ie._segmentIndexShift=R.length,{segmentGroup:Ie,slicedSegments:O}}const de=new yn(U.segments,U.children);return de._sourceSegment=U,de._segmentIndexShift=R.length,{segmentGroup:de,slicedSegments:O}}function dr(U,R,O){return(!(U.hasChildren()||R.length>0)||"full"!==O.pathMatch)&&""===O.path}function Gr(U,R,O,Z){return!!(je(U)===Z||Z!==St&&dr(R,O,U))&&("**"===U.path||j(R,U,O).matched)}function fr(U,R,O){return 0===R.length&&!U.children[O]}class zr{constructor(R){this.segmentGroup=R||null}}class oi{constructor(R){this.urlTree=R}}function Dn(U){return new Ue.y(R=>R.error(new zr(U)))}function Ji(U){return new Ue.y(R=>R.error(new oi(U)))}function ys(U){return new Ue.y(R=>R.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${U}'`)))}class $u{constructor(R,O,Z,te,de){this.configLoader=O,this.urlSerializer=Z,this.urlTree=te,this.config=de,this.allowRedirects=!0,this.ngModule=R.get(g.h0i)}apply(){const R=V(this.urlTree.root,[],[],this.config).segmentGroup,O=new yn(R.segments,R.children);return this.expandSegmentGroup(this.ngModule,this.config,O,St).pipe((0,Gt.U)(de=>this.createUrlTree(Ba(de),this.urlTree.queryParams,this.urlTree.fragment))).pipe($t(de=>{if(de instanceof oi)return this.allowRedirects=!1,this.match(de.urlTree);throw de instanceof zr?this.noMatchError(de):de}))}match(R){return this.expandSegmentGroup(this.ngModule,this.config,R.root,St).pipe((0,Gt.U)(te=>this.createUrlTree(Ba(te),R.queryParams,R.fragment))).pipe($t(te=>{throw te instanceof zr?this.noMatchError(te):te}))}noMatchError(R){return new Error(`Cannot match any routes. URL Segment: '${R.segmentGroup}'`)}createUrlTree(R,O,Z){const te=R.segments.length>0?new yn([],{[St]:R}):R;return new ur(te,O,Z)}expandSegmentGroup(R,O,Z,te){return 0===Z.segments.length&&Z.hasChildren()?this.expandChildren(R,O,Z).pipe((0,Gt.U)(de=>new yn([],de))):this.expandSegment(R,Z,O,Z.segments,te,!0)}expandChildren(R,O,Z){const te=[];for(const de of Object.keys(Z.children))"primary"===de?te.unshift(de):te.push(de);return(0,ge.D)(te).pipe((0,Bn.b)(de=>{const Ie=Z.children[de],Ze=rt(O,de);return this.expandSegmentGroup(R,Ze,Ie,de).pipe((0,Gt.U)(Et=>({segment:Et,outlet:de})))}),(0,zn.R)((de,Ie)=>(de[Ie.outlet]=Ie.segment,de),{}),function(U,R){const O=arguments.length>=2;return Z=>Z.pipe(U?(0,Dt.h)((te,de)=>U(te,de,Z)):ln.y,st(1),O?(0,tn.d)(R):(0,at.T)(()=>new Xe.K))}())}expandSegment(R,O,Z,te,de,Ie){return(0,ge.D)(Z).pipe((0,Bn.b)(Ze=>this.expandSegmentAgainstRoute(R,O,Z,Ze,te,de,Ie).pipe($t(fn=>{if(fn instanceof zr)return(0,Ee.of)(null);throw fn}))),(0,Xn.P)(Ze=>!!Ze),$t((Ze,Et)=>{if(Ze instanceof Xe.K||"EmptyError"===Ze.name){if(fr(O,te,de))return(0,Ee.of)(new yn([],{}));throw new zr(O)}throw Ze}))}expandSegmentAgainstRoute(R,O,Z,te,de,Ie,Ze){return Gr(te,O,de,Ie)?void 0===te.redirectTo?this.matchSegmentAgainstRoute(R,O,te,de,Ie):Ze&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,O,Z,te,de,Ie):Dn(O):Dn(O)}expandSegmentAgainstRouteUsingRedirect(R,O,Z,te,de,Ie){return"**"===te.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,Z,te,Ie):this.expandRegularSegmentAgainstRouteUsingRedirect(R,O,Z,te,de,Ie)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,O,Z,te){const de=this.applyRedirectCommands([],Z.redirectTo,{});return Z.redirectTo.startsWith("/")?Ji(de):this.lineralizeSegments(Z,de).pipe((0,Sn.zg)(Ie=>{const Ze=new yn(Ie,{});return this.expandSegment(R,Ze,O,Ie,te,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,O,Z,te,de,Ie){const{matched:Ze,consumedSegments:Et,lastChild:fn,positionalParamSegments:ir}=j(O,te,de);if(!Ze)return Dn(O);const Gn=this.applyRedirectCommands(Et,te.redirectTo,ir);return te.redirectTo.startsWith("/")?Ji(Gn):this.lineralizeSegments(te,Gn).pipe((0,Sn.zg)(Ir=>this.expandSegment(R,O,Z,Ir.concat(de.slice(fn)),Ie,!1)))}matchSegmentAgainstRoute(R,O,Z,te,de){if("**"===Z.path)return Z.loadChildren?(Z._loadedConfig?(0,Ee.of)(Z._loadedConfig):this.configLoader.load(R.injector,Z)).pipe((0,Gt.U)(Ir=>(Z._loadedConfig=Ir,new yn(te,{})))):(0,Ee.of)(new yn(te,{}));const{matched:Ie,consumedSegments:Ze,lastChild:Et}=j(O,Z,te);if(!Ie)return Dn(O);const fn=te.slice(Et);return this.getChildConfig(R,Z,te).pipe((0,Sn.zg)(Gn=>{const Ir=Gn.module,Un=Gn.routes,{segmentGroup:mo,slicedSegments:Uo}=V(O,Ze,fn,Un),_o=new yn(mo.segments,mo.children);if(0===Uo.length&&_o.hasChildren())return this.expandChildren(Ir,Un,_o).pipe((0,Gt.U)(pu=>new yn(Ze,pu)));if(0===Un.length&&0===Uo.length)return(0,Ee.of)(new yn(Ze,{}));const Hs=je(Z)===de;return this.expandSegment(Ir,_o,Un,Uo,Hs?St:de,!0).pipe((0,Gt.U)(Yo=>new yn(Ze.concat(Yo.segments),Yo.children)))}))}getChildConfig(R,O,Z){return O.children?(0,Ee.of)(new Lo(O.children,R)):O.loadChildren?void 0!==O._loadedConfig?(0,Ee.of)(O._loadedConfig):this.runCanLoadGuards(R.injector,O,Z).pipe((0,Sn.zg)(te=>{return te?this.configLoader.load(R.injector,O).pipe((0,Gt.U)(de=>(O._loadedConfig=de,de))):(U=O,new Ue.y(R=>R.error(qt(`Cannot load children because the guard of the route "path: '${U.path}'" returned false`))));var U})):(0,Ee.of)(new Lo([],R))}runCanLoadGuards(R,O,Z){const te=O.canLoad;if(!te||0===te.length)return(0,Ee.of)(!0);const de=te.map(Ie=>{const Ze=R.get(Ie);let Et;if((U=Ze)&&Ei(U.canLoad))Et=Ze.canLoad(O,Z);else{if(!Ei(Ze))throw new Error("Invalid CanLoad guard");Et=Ze(O,Z)}var U;return Ln(Et)});return(0,Ee.of)(de).pipe(pe(),(0,An.b)(Ie=>{if(!Lr(Ie))return;const Ze=qt(`Redirecting to "${this.urlSerializer.serialize(Ie)}"`);throw Ze.url=Ie,Ze}),(0,Gt.U)(Ie=>!0===Ie))}lineralizeSegments(R,O){let Z=[],te=O.root;for(;;){if(Z=Z.concat(te.segments),0===te.numberOfChildren)return(0,Ee.of)(Z);if(te.numberOfChildren>1||!te.children[St])return ys(R.redirectTo);te=te.children[St]}}applyRedirectCommands(R,O,Z){return this.applyRedirectCreatreUrlTree(O,this.urlSerializer.parse(O),R,Z)}applyRedirectCreatreUrlTree(R,O,Z,te){const de=this.createSegmentGroup(R,O.root,Z,te);return new ur(de,this.createQueryParams(O.queryParams,this.urlTree.queryParams),O.fragment)}createQueryParams(R,O){const Z={};return Pn(R,(te,de)=>{if("string"==typeof te&&te.startsWith(":")){const Ze=te.substring(1);Z[de]=O[Ze]}else Z[de]=te}),Z}createSegmentGroup(R,O,Z,te){const de=this.createSegments(R,O.segments,Z,te);let Ie={};return Pn(O.children,(Ze,Et)=>{Ie[Et]=this.createSegmentGroup(R,Ze,Z,te)}),new yn(de,Ie)}createSegments(R,O,Z,te){return O.map(de=>de.path.startsWith(":")?this.findPosParam(R,de,te):this.findOrReturn(de,Z))}findPosParam(R,O,Z){const te=Z[O.path.substring(1)];if(!te)throw new Error(`Cannot redirect to '${R}'. Cannot find '${O.path}'.`);return te}findOrReturn(R,O){let Z=0;for(const te of O){if(te.path===R.path)return O.splice(Z),te;Z++}return R}}function Ba(U){const R={};for(const Z of Object.keys(U.children)){const de=Ba(U.children[Z]);(de.segments.length>0||de.hasChildren())&&(R[Z]=de)}return function(U){if(1===U.numberOfChildren&&U.children[St]){const R=U.children[St];return new yn(U.segments.concat(R.segments),R.children)}return U}(new yn(U.segments,R))}class _r{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class vs{constructor(R,O){this.component=R,this.route=O}}function Pi(U,R,O){const Z=U._root;return oe(Z,R?R._root:null,O,[Z.value])}function Rs(U,R,O){const Z=function(U){if(!U)return null;for(let R=U.parent;R;R=R.parent){const O=R.routeConfig;if(O&&O._loadedConfig)return O._loadedConfig}return null}(R);return(Z?Z.module.injector:O).get(U)}function oe(U,R,O,Z,te={canDeactivateChecks:[],canActivateChecks:[]}){const de=Ui(R);return U.children.forEach(Ie=>{(function(U,R,O,Z,te={canDeactivateChecks:[],canActivateChecks:[]}){const de=U.value,Ie=R?R.value:null,Ze=O?O.getContext(U.value.outlet):null;if(Ie&&de.routeConfig===Ie.routeConfig){const Et=function(U,R,O){if("function"==typeof O)return O(U,R);switch(O){case"pathParamsChange":return!Dr(U.url,R.url);case"pathParamsOrQueryParamsChange":return!Dr(U.url,R.url)||!et(U.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_s(U,R)||!et(U.queryParams,R.queryParams);case"paramsChange":default:return!_s(U,R)}}(Ie,de,de.routeConfig.runGuardsAndResolvers);Et?te.canActivateChecks.push(new _r(Z)):(de.data=Ie.data,de._resolvedData=Ie._resolvedData),oe(U,R,de.component?Ze?Ze.children:null:O,Z,te),Et&&Ze&&Ze.outlet&&Ze.outlet.isActivated&&te.canDeactivateChecks.push(new vs(Ze.outlet.component,Ie))}else Ie&&B(R,Ze,te),te.canActivateChecks.push(new _r(Z)),oe(U,null,de.component?Ze?Ze.children:null:O,Z,te)})(Ie,de[Ie.value.outlet],O,Z.concat([Ie.value]),te),delete de[Ie.value.outlet]}),Pn(de,(Ie,Ze)=>B(Ie,O.getContext(Ze),te)),te}function B(U,R,O){const Z=Ui(U),te=U.value;Pn(Z,(de,Ie)=>{B(de,te.component?R?R.children.getContext(Ie):null:R,O)}),O.canDeactivateChecks.push(new vs(te.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,te))}class lr{}function Sr(U){return new Ue.y(R=>R.error(U))}class Nn{constructor(R,O,Z,te,de,Ie){this.rootComponentType=R,this.config=O,this.urlTree=Z,this.url=te,this.paramsInheritanceStrategy=de,this.relativeLinkResolution=Ie}recognize(){const R=V(this.urlTree.root,[],[],this.config.filter(Ie=>void 0===Ie.redirectTo),this.relativeLinkResolution).segmentGroup,O=this.processSegmentGroup(this.config,R,St);if(null===O)return null;const Z=new Zi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},St,this.rootComponentType,null,this.urlTree.root,-1,{}),te=new Wr(Z,O),de=new Qi(this.url,te);return this.inheritParamsAndData(de._root),de}inheritParamsAndData(R){const O=R.value,Z=qi(O,this.paramsInheritanceStrategy);O.params=Object.freeze(Z.params),O.data=Object.freeze(Z.data),R.children.forEach(te=>this.inheritParamsAndData(te))}processSegmentGroup(R,O,Z){return 0===O.segments.length&&O.hasChildren()?this.processChildren(R,O):this.processSegment(R,O,O.segments,Z)}processChildren(R,O){const Z=[];for(const de of Object.keys(O.children)){const Ie=O.children[de],Ze=rt(R,de),Et=this.processSegmentGroup(Ze,Ie,de);if(null===Et)return null;Z.push(...Et)}const te=Xi(Z);return te.sort((R,O)=>R.value.outlet===St?-1:O.value.outlet===St?1:R.value.outlet.localeCompare(O.value.outlet)),te}processSegment(R,O,Z,te){for(const de of R){const Ie=this.processSegmentAgainstRoute(de,O,Z,te);if(null!==Ie)return Ie}return fr(O,Z,te)?[]:null}processSegmentAgainstRoute(R,O,Z,te){if(R.redirectTo||!Gr(R,O,Z,te))return null;let de,Ie=[],Ze=[];if("**"===R.path){const Un=Z.length>0?_n(Z).parameters:{};de=new Zi(Z,Un,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ui(R),je(R),R.component,R,Oo(O),To(O)+Z.length,Ro(R))}else{const Un=j(O,R,Z);if(!Un.matched)return null;Ie=Un.consumedSegments,Ze=Z.slice(Un.lastChild),de=new Zi(Ie,Un.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ui(R),je(R),R.component,R,Oo(O),To(O)+Ie.length,Ro(R))}const Et=(U=R).children?U.children:U.loadChildren?U._loadedConfig.routes:[],{segmentGroup:fn,slicedSegments:ir}=V(O,Ie,Ze,Et.filter(Un=>void 0===Un.redirectTo),this.relativeLinkResolution);var U;if(0===ir.length&&fn.hasChildren()){const Un=this.processChildren(Et,fn);return null===Un?null:[new Wr(de,Un)]}if(0===Et.length&&0===ir.length)return[new Wr(de,[])];const Gn=je(R)===te,Ir=this.processSegment(Et,fn,ir,Gn?St:te);return null===Ir?null:[new Wr(de,Ir)]}}function Ur(U){const R=U.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function Xi(U){const R=[],O=new Set;for(const Z of U){if(!Ur(Z)){R.push(Z);continue}const te=R.find(de=>Z.value.routeConfig===de.value.routeConfig);void 0!==te?(te.children.push(...Z.children),O.add(te)):R.push(Z)}for(const Z of O){const te=Xi(Z.children);R.push(new Wr(Z.value,te))}return R.filter(Z=>!O.has(Z))}function Oo(U){let R=U;for(;R._sourceSegment;)R=R._sourceSegment;return R}function To(U){let R=U,O=R._segmentIndexShift?R._segmentIndexShift:0;for(;R._sourceSegment;)R=R._sourceSegment,O+=R._segmentIndexShift?R._segmentIndexShift:0;return O-1}function ui(U){return U.data||{}}function Ro(U){return U.resolve||{}}function Wi(U){return(0,Fn.w)(R=>{const O=U(R);return O?(0,ge.D)(O).pipe((0,Gt.U)(()=>R)):(0,Ee.of)(R)})}class Rn extends class{shouldDetach(R){return!1}store(R,O){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,O){return R.routeConfig===O.routeConfig}}{}const Wn=new g.OlP("ROUTES");class xr{constructor(R,O,Z,te){this.loader=R,this.compiler=O,this.onLoadStartListener=Z,this.onLoadEndListener=te}load(R,O){if(O._loader$)return O._loader$;this.onLoadStartListener&&this.onLoadStartListener(O);const te=this.loadModuleFactory(O.loadChildren).pipe((0,Gt.U)(de=>{this.onLoadEndListener&&this.onLoadEndListener(O);const Ie=de.create(R);return new Lo(zt(Ie.injector.get(Wn,void 0,g.XFs.Self|g.XFs.Optional)).map(De),Ie)}),$t(de=>{throw O._loader$=void 0,de}));return O._loader$=new On.c(te,()=>new Lt.xQ).pipe((0,Oi.x)()),O._loader$}loadModuleFactory(R){return"string"==typeof R?(0,ge.D)(this.loader.load(R)):Ln(R()).pipe((0,Sn.zg)(O=>O instanceof g.YKP?(0,Ee.of)(O):(0,ge.D)(this.compiler.compileModuleAsync(O))))}}class Cr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ai,this.attachRef=null}}class Ai{constructor(){this.contexts=new Map}onChildOutletCreated(R,O){const Z=this.getOrCreateContext(R);Z.outlet=O,this.contexts.set(R,Z)}onChildOutletDestroyed(R){const O=this.getContext(R);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const R=this.contexts;return this.contexts=new Map,R}onOutletReAttached(R){this.contexts=R}getOrCreateContext(R){let O=this.getContext(R);return O||(O=new Cr,this.contexts.set(R,O)),O}getContext(R){return this.contexts.get(R)||null}}class io{shouldProcessUrl(R){return!0}extract(R){return R}merge(R,O){return R}}function Jr(U){throw U}function na(U,R,O){return R.parse("/")}function Ii(U,R){return(0,Ee.of)(null)}const Bs={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Yi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ni=(()=>{class U{constructor(O,Z,te,de,Ie,Ze,Et,fn){this.rootComponentType=O,this.urlSerializer=Z,this.rootContexts=te,this.location=de,this.config=fn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Lt.xQ,this.errorHandler=Jr,this.malformedUriErrorHandler=na,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ii,afterPreactivation:Ii},this.urlHandlingStrategy=new io,this.routeReuseStrategy=new Rn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ie.get(g.h0i),this.console=Ie.get(g.c2e);const Ir=Ie.get(g.R0b);this.isNgZoneEnabled=Ir instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(fn),this.currentUrlTree=new ur(new yn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new xr(Ze,Et,Un=>this.triggerEvent(new Mt(Un)),Un=>this.triggerEvent(new Pt(Un))),this.routerState=Hn(this.currentUrlTree,this.rootComponentType),this.transitions=new Oe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var O;return null===(O=this.location.getState())||void 0===O?void 0:O.\u0275routerPageId}setupNavigations(O){const Z=this.events;return O.pipe((0,Dt.h)(te=>0!==te.id),(0,Gt.U)(te=>Object.assign(Object.assign({},te),{extractedUrl:this.urlHandlingStrategy.extract(te.rawUrl)})),(0,Fn.w)(te=>{let de=!1,Ie=!1;return(0,Ee.of)(te).pipe((0,An.b)(Ze=>{this.currentNavigation={id:Ze.id,initialUrl:Ze.currentRawUrl,extractedUrl:Ze.extractedUrl,trigger:Ze.source,extras:Ze.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Fn.w)(Ze=>{const Et=this.browserUrlTree.toString(),fn=!this.navigated||Ze.extractedUrl.toString()!==Et||Et!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||fn)&&this.urlHandlingStrategy.shouldProcessUrl(Ze.rawUrl))return ba(Ze.source)&&(this.browserUrlTree=Ze.extractedUrl),(0,Ee.of)(Ze).pipe((0,Fn.w)(Gn=>{const Ir=this.transitions.getValue();return Z.next(new jn(Gn.id,this.serializeUrl(Gn.extractedUrl),Gn.source,Gn.restoredState)),Ir!==this.transitions.getValue()?At.E:Promise.resolve(Gn)}),function(U,R,O,Z){return(0,Fn.w)(te=>function(U,R,O,Z,te){return new $u(U,R,O,Z,te).apply()}(U,R,O,te.extractedUrl,Z).pipe((0,Gt.U)(de=>Object.assign(Object.assign({},te),{urlAfterRedirects:de}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,An.b)(Gn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Gn.urlAfterRedirects})}),function(U,R,O,Z,te){return(0,Sn.zg)(de=>function(U,R,O,Z,te="emptyOnly",de="legacy"){try{const Ie=new Nn(U,R,O,Z,te,de).recognize();return null===Ie?Sr(new lr):(0,Ee.of)(Ie)}catch(Ie){return Sr(Ie)}}(U,R,de.urlAfterRedirects,O(de.urlAfterRedirects),Z,te).pipe((0,Gt.U)(Ie=>Object.assign(Object.assign({},de),{targetSnapshot:Ie}))))}(this.rootComponentType,this.config,Gn=>this.serializeUrl(Gn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,An.b)(Gn=>{"eager"===this.urlUpdateStrategy&&(Gn.extras.skipLocationChange||this.setBrowserUrl(Gn.urlAfterRedirects,Gn),this.browserUrlTree=Gn.urlAfterRedirects);const Ir=new Br(Gn.id,this.serializeUrl(Gn.extractedUrl),this.serializeUrl(Gn.urlAfterRedirects),Gn.targetSnapshot);Z.next(Ir)}));if(fn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ir,extractedUrl:Un,source:mo,restoredState:Uo,extras:_o}=Ze,Hs=new jn(Ir,this.serializeUrl(Un),mo,Uo);Z.next(Hs);const Wo=Hn(Un,this.rootComponentType).snapshot;return(0,Ee.of)(Object.assign(Object.assign({},Ze),{targetSnapshot:Wo,urlAfterRedirects:Un,extras:Object.assign(Object.assign({},_o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ze.rawUrl,this.browserUrlTree=Ze.urlAfterRedirects,Ze.resolve(null),At.E}),Wi(Ze=>{const{targetSnapshot:Et,id:fn,extractedUrl:ir,rawUrl:Gn,extras:{skipLocationChange:Ir,replaceUrl:Un}}=Ze;return this.hooks.beforePreactivation(Et,{navigationId:fn,appliedUrlTree:ir,rawUrlTree:Gn,skipLocationChange:!!Ir,replaceUrl:!!Un})}),(0,An.b)(Ze=>{const Et=new $n(Ze.id,this.serializeUrl(Ze.extractedUrl),this.serializeUrl(Ze.urlAfterRedirects),Ze.targetSnapshot);this.triggerEvent(Et)}),(0,Gt.U)(Ze=>Object.assign(Object.assign({},Ze),{guards:Pi(Ze.targetSnapshot,Ze.currentSnapshot,this.rootContexts)})),function(U,R){return(0,Sn.zg)(O=>{const{targetSnapshot:Z,currentSnapshot:te,guards:{canActivateChecks:de,canDeactivateChecks:Ie}}=O;return 0===Ie.length&&0===de.length?(0,Ee.of)(Object.assign(Object.assign({},O),{guardsResult:!0})):function(U,R,O,Z){return(0,ge.D)(U).pipe((0,Sn.zg)(te=>function(U,R,O,Z,te){const de=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!de||0===de.length)return(0,Ee.of)(!0);const Ie=de.map(Ze=>{const Et=Rs(Ze,R,te);let fn;if(function(U){return U&&Ei(U.canDeactivate)}(Et))fn=Ln(Et.canDeactivate(U,R,O,Z));else{if(!Ei(Et))throw new Error("Invalid CanDeactivate guard");fn=Ln(Et(U,R,O,Z))}return fn.pipe((0,Xn.P)())});return(0,Ee.of)(Ie).pipe(pe())}(te.component,te.route,O,R,Z)),(0,Xn.P)(te=>!0!==te,!0))}(Ie,Z,te,U).pipe((0,Sn.zg)(Ze=>Ze&&function(U){return"boolean"==typeof U}(Ze)?function(U,R,O,Z){return(0,ge.D)(R).pipe((0,Bn.b)(te=>(0,ne.z)(function(U,R){return null!==U&&R&&R(new an(U)),(0,Ee.of)(!0)}(te.route.parent,Z),function(U,R){return null!==U&&R&&R(new He(U)),(0,Ee.of)(!0)}(te.route,Z),function(U,R,O){const Z=R[R.length-1],de=R.slice(0,R.length-1).reverse().map(Ie=>function(U){const R=U.routeConfig?U.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:U,guards:R}:null}(Ie)).filter(Ie=>null!==Ie).map(Ie=>(0,Ke.P)(()=>{const Ze=Ie.guards.map(Et=>{const fn=Rs(Et,Ie.node,O);let ir;if(function(U){return U&&Ei(U.canActivateChild)}(fn))ir=Ln(fn.canActivateChild(Z,U));else{if(!Ei(fn))throw new Error("Invalid CanActivateChild guard");ir=Ln(fn(Z,U))}return ir.pipe((0,Xn.P)())});return(0,Ee.of)(Ze).pipe(pe())}));return(0,Ee.of)(de).pipe(pe())}(U,te.path,O),function(U,R,O){const Z=R.routeConfig?R.routeConfig.canActivate:null;if(!Z||0===Z.length)return(0,Ee.of)(!0);const te=Z.map(de=>(0,Ke.P)(()=>{const Ie=Rs(de,R,O);let Ze;if(function(U){return U&&Ei(U.canActivate)}(Ie))Ze=Ln(Ie.canActivate(R,U));else{if(!Ei(Ie))throw new Error("Invalid CanActivate guard");Ze=Ln(Ie(R,U))}return Ze.pipe((0,Xn.P)())}));return(0,Ee.of)(te).pipe(pe())}(U,te.route,O))),(0,Xn.P)(te=>!0!==te,!0))}(Z,de,U,R):(0,Ee.of)(Ze)),(0,Gt.U)(Ze=>Object.assign(Object.assign({},O),{guardsResult:Ze})))})}(this.ngModule.injector,Ze=>this.triggerEvent(Ze)),(0,An.b)(Ze=>{if(Lr(Ze.guardsResult)){const fn=qt(`Redirecting to "${this.serializeUrl(Ze.guardsResult)}"`);throw fn.url=Ze.guardsResult,fn}const Et=new Tt(Ze.id,this.serializeUrl(Ze.extractedUrl),this.serializeUrl(Ze.urlAfterRedirects),Ze.targetSnapshot,!!Ze.guardsResult);this.triggerEvent(Et)}),(0,Dt.h)(Ze=>!!Ze.guardsResult||(this.restoreHistory(Ze),this.cancelNavigationTransition(Ze,""),!1)),Wi(Ze=>{if(Ze.guards.canActivateChecks.length)return(0,Ee.of)(Ze).pipe((0,An.b)(Et=>{const fn=new $e(Et.id,this.serializeUrl(Et.extractedUrl),this.serializeUrl(Et.urlAfterRedirects),Et.targetSnapshot);this.triggerEvent(fn)}),(0,Fn.w)(Et=>{let fn=!1;return(0,Ee.of)(Et).pipe(function(U,R){return(0,Sn.zg)(O=>{const{targetSnapshot:Z,guards:{canActivateChecks:te}}=O;if(!te.length)return(0,Ee.of)(O);let de=0;return(0,ge.D)(te).pipe((0,Bn.b)(Ie=>function(U,R,O,Z){return function(U,R,O,Z){const te=Object.keys(U);if(0===te.length)return(0,Ee.of)({});const de={};return(0,ge.D)(te).pipe((0,Sn.zg)(Ie=>function(U,R,O,Z){const te=Rs(U,R,Z);return Ln(te.resolve?te.resolve(R,O):te(R,O))}(U[Ie],R,O,Z).pipe((0,An.b)(Ze=>{de[Ie]=Ze}))),st(1),(0,Sn.zg)(()=>Object.keys(de).length===te.length?(0,Ee.of)(de):At.E))}(U._resolve,U,R,Z).pipe((0,Gt.U)(de=>(U._resolvedData=de,U.data=Object.assign(Object.assign({},U.data),qi(U,O).resolve),null)))}(Ie.route,Z,U,R)),(0,An.b)(()=>de++),st(1),(0,Sn.zg)(Ie=>de===te.length?(0,Ee.of)(O):At.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,An.b)({next:()=>fn=!0,complete:()=>{fn||(this.restoreHistory(Et),this.cancelNavigationTransition(Et,"At least one route resolver didn't emit any value."))}}))}),(0,An.b)(Et=>{const fn=new ze(Et.id,this.serializeUrl(Et.extractedUrl),this.serializeUrl(Et.urlAfterRedirects),Et.targetSnapshot);this.triggerEvent(fn)}))}),Wi(Ze=>{const{targetSnapshot:Et,id:fn,extractedUrl:ir,rawUrl:Gn,extras:{skipLocationChange:Ir,replaceUrl:Un}}=Ze;return this.hooks.afterPreactivation(Et,{navigationId:fn,appliedUrlTree:ir,rawUrlTree:Gn,skipLocationChange:!!Ir,replaceUrl:!!Un})}),(0,Gt.U)(Ze=>{const Et=function(U,R,O){const Z=zo(U,R._root,O?O._root:void 0);return new ar(Z,R)}(this.routeReuseStrategy,Ze.targetSnapshot,Ze.currentRouterState);return Object.assign(Object.assign({},Ze),{targetRouterState:Et})}),(0,An.b)(Ze=>{this.currentUrlTree=Ze.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ze.urlAfterRedirects,Ze.rawUrl),this.routerState=Ze.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ze.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ze),this.browserUrlTree=Ze.urlAfterRedirects)}),((U,R,O)=>(0,Gt.U)(Z=>(new ro(R,Z.targetRouterState,Z.currentRouterState,O).activate(U),Z)))(this.rootContexts,this.routeReuseStrategy,Ze=>this.triggerEvent(Ze)),(0,An.b)({next(){de=!0},complete(){de=!0}}),function(U){return R=>R.lift(new Nt(U))}(()=>{if(!de&&!Ie){const Ze=`Navigation ID ${te.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(te),this.cancelNavigationTransition(te,Ze)):this.cancelNavigationTransition(te,Ze)}this.currentNavigation=null}),$t(Ze=>{if(Ie=!0,function(U){return U&&U[mn]}(Ze)){const Et=Lr(Ze.url);Et||(this.navigated=!0,this.restoreHistory(te,!0));const fn=new Qt(te.id,this.serializeUrl(te.extractedUrl),Ze.message);Z.next(fn),Et?setTimeout(()=>{const ir=this.urlHandlingStrategy.merge(Ze.url,this.rawUrlTree),Gn={skipLocationChange:te.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ba(te.source)};this.scheduleNavigation(ir,"imperative",null,Gn,{resolve:te.resolve,reject:te.reject,promise:te.promise})},0):te.resolve(!1)}else{this.restoreHistory(te,!0);const Et=new hr(te.id,this.serializeUrl(te.extractedUrl),Ze);Z.next(Et);try{te.resolve(this.errorHandler(Ze))}catch(fn){te.reject(fn)}}return At.E}))}))}resetRootComponentType(O){this.rootComponentType=O,this.routerState.root.component=this.rootComponentType}getTransition(){const O=this.transitions.value;return O.urlAfterRedirects=this.browserUrlTree,O}setTransition(O){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),O))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(O=>{const Z=this.extractLocationChangeInfoFromEvent(O);this.shouldScheduleNavigation(this.lastLocationChangeInfo,Z)&&setTimeout(()=>{const{source:te,state:de,urlTree:Ie}=Z,Ze={replaceUrl:!0};if(de){const Et=Object.assign({},de);delete Et.navigationId,delete Et.\u0275routerPageId,0!==Object.keys(Et).length&&(Ze.state=Et)}this.scheduleNavigation(Ie,te,de,Ze)},0),this.lastLocationChangeInfo=Z}))}extractLocationChangeInfoFromEvent(O){var Z;return{source:"popstate"===O.type?"popstate":"hashchange",urlTree:this.parseUrl(O.url),state:(null===(Z=O.state)||void 0===Z?void 0:Z.navigationId)?O.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(O,Z){if(!O)return!0;const te=Z.urlTree.toString()===O.urlTree.toString();return Z.transitionId!==O.transitionId||!te||!("hashchange"===Z.source&&"popstate"===O.source||"popstate"===Z.source&&"hashchange"===O.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(O){this.events.next(O)}resetConfig(O){$(O),this.config=O.map(De),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(O,Z={}){const{relativeTo:te,queryParams:de,fragment:Ie,queryParamsHandling:Ze,preserveFragment:Et}=Z,fn=te||this.routerState.root,ir=Et?this.currentUrlTree.fragment:Ie;let Gn=null;switch(Ze){case"merge":Gn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),de);break;case"preserve":Gn=this.currentUrlTree.queryParams;break;default:Gn=de||null}return null!==Gn&&(Gn=this.removeEmptyProps(Gn)),function(U,R,O,Z,te){if(0===O.length)return bi(R.root,R.root,R,Z,te);const de=function(U){if("string"==typeof U[0]&&1===U.length&&"/"===U[0])return new to(!0,0,U);let R=0,O=!1;const Z=U.reduce((te,de,Ie)=>{if("object"==typeof de&&null!=de){if(de.outlets){const Ze={};return Pn(de.outlets,(Et,fn)=>{Ze[fn]="string"==typeof Et?Et.split("/"):Et}),[...te,{outlets:Ze}]}if(de.segmentPath)return[...te,de.segmentPath]}return"string"!=typeof de?[...te,de]:0===Ie?(de.split("/").forEach((Ze,Et)=>{0==Et&&"."===Ze||(0==Et&&""===Ze?O=!0:".."===Ze?R++:""!=Ze&&te.push(Ze))}),te):[...te,de]},[]);return new to(O,R,Z)}(O);if(de.toRoot())return bi(R.root,new yn([],{}),R,Z,te);const Ie=function(U,R,O){if(U.isAbsolute)return new co(R.root,!0,0);if(-1===O.snapshot._lastPathIndex){const de=O.snapshot._urlSegment;return new co(de,de===R.root,0)}const Z=qo(U.commands[0])?0:1;return function(U,R,O){let Z=U,te=R,de=O;for(;de>te;){if(de-=te,Z=Z.parent,!Z)throw new Error("Invalid number of '../'");te=Z.segments.length}return new co(Z,!1,te-de)}(O.snapshot._urlSegment,O.snapshot._lastPathIndex+Z,U.numberOfDoubleDots)}(de,R,U),Ze=Ie.processChildren?Ci(Ie.segmentGroup,Ie.index,de.commands):ko(Ie.segmentGroup,Ie.index,de.commands);return bi(Ie.segmentGroup,Ze,R,Z,te)}(fn,this.currentUrlTree,O,Gn,null!=ir?ir:null)}navigateByUrl(O,Z={skipLocationChange:!1}){const te=Lr(O)?O:this.parseUrl(O),de=this.urlHandlingStrategy.merge(te,this.rawUrlTree);return this.scheduleNavigation(de,"imperative",null,Z)}navigate(O,Z={skipLocationChange:!1}){return function(U){for(let R=0;R<U.length;R++){const O=U[R];if(null==O)throw new Error(`The requested path contains ${O} segment at index ${R}`)}}(O),this.navigateByUrl(this.createUrlTree(O,Z),Z)}serializeUrl(O){return this.urlSerializer.serialize(O)}parseUrl(O){let Z;try{Z=this.urlSerializer.parse(O)}catch(te){Z=this.malformedUriErrorHandler(te,this.urlSerializer,O)}return Z}isActive(O,Z){let te;if(te=!0===Z?Object.assign({},Bs):!1===Z?Object.assign({},Yi):Z,Lr(O))return wr(this.currentUrlTree,O,te);const de=this.parseUrl(O);return wr(this.currentUrlTree,de,te)}removeEmptyProps(O){return Object.keys(O).reduce((Z,te)=>{const de=O[te];return null!=de&&(Z[te]=de),Z},{})}processNavigations(){this.navigations.subscribe(O=>{this.navigated=!0,this.lastSuccessfulId=O.id,this.currentPageId=O.targetPageId,this.events.next(new Vn(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,O.resolve(!0)},O=>{this.console.warn(`Unhandled Navigation Error: ${O}`)})}scheduleNavigation(O,Z,te,de,Ie){var Ze,Et;if(this.disposed)return Promise.resolve(!1);const fn=this.getTransition(),ir=ba(Z)&&fn&&!ba(fn.source),Un=(this.lastSuccessfulId===fn.id||this.currentNavigation?fn.rawUrl:fn.urlAfterRedirects).toString()===O.toString();if(ir&&Un)return Promise.resolve(!0);let mo,Uo,_o;Ie?(mo=Ie.resolve,Uo=Ie.reject,_o=Ie.promise):_o=new Promise((Yo,pu)=>{mo=Yo,Uo=pu});const Hs=++this.navigationId;let Wo;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(te=this.location.getState()),Wo=te&&te.\u0275routerPageId?te.\u0275routerPageId:de.replaceUrl||de.skipLocationChange?null!==(Ze=this.browserPageId)&&void 0!==Ze?Ze:0:(null!==(Et=this.browserPageId)&&void 0!==Et?Et:0)+1):Wo=0,this.setTransition({id:Hs,targetPageId:Wo,source:Z,restoredState:te,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:O,extras:de,resolve:mo,reject:Uo,promise:_o,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_o.catch(Yo=>Promise.reject(Yo))}setBrowserUrl(O,Z){const te=this.urlSerializer.serialize(O),de=Object.assign(Object.assign({},Z.extras.state),this.generateNgRouterState(Z.id,Z.targetPageId));this.location.isCurrentPathEqualTo(te)||Z.extras.replaceUrl?this.location.replaceState(te,"",de):this.location.go(te,"",de)}restoreHistory(O,Z=!1){var te,de;if("computed"===this.canceledNavigationResolution){const Ie=this.currentPageId-O.targetPageId;"popstate"!==O.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(te=this.currentNavigation)||void 0===te?void 0:te.finalUrl)||0===Ie?this.currentUrlTree===(null===(de=this.currentNavigation)||void 0===de?void 0:de.finalUrl)&&0===Ie&&(this.resetState(O),this.browserUrlTree=O.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ie)}else"replace"===this.canceledNavigationResolution&&(Z&&this.resetState(O),this.resetUrlToCurrentUrlTree())}resetState(O){this.routerState=O.currentRouterState,this.currentUrlTree=O.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,O.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(O,Z){const te=new Qt(O.id,this.serializeUrl(O.extractedUrl),Z);this.triggerEvent(te),O.resolve(!1)}generateNgRouterState(O,Z){return"computed"===this.canceledNavigationResolution?{navigationId:O,\u0275routerPageId:Z}:{navigationId:O}}}return U.\u0275fac=function(O){return new(O||U)(g.LFG(g.DyG),g.LFG(dn),g.LFG(Ai),g.LFG(P.Ye),g.LFG(g.zs3),g.LFG(g.v3s),g.LFG(g.Sil),g.LFG(void 0))},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac}),U})();function ba(U){return"imperative"!==U}let Bi=(()=>{class U{constructor(O,Z,te,de,Ie){this.router=O,this.route=Z,this.commands=[],this.onChanges=new Lt.xQ,null==te&&de.setAttribute(Ie.nativeElement,"tabindex","0")}ngOnChanges(O){this.onChanges.next(this)}set routerLink(O){this.commands=null!=O?Array.isArray(O)?O:[O]:[]}onClick(){const O={skipLocationChange:Ea(this.skipLocationChange),replaceUrl:Ea(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,O),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ea(this.preserveFragment)})}}return U.\u0275fac=function(O){return new(O||U)(g.Y36(ni),g.Y36(Or),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},U.\u0275dir=g.lG2({type:U,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(O,Z){1&O&&g.NdJ("click",function(){return Z.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[g.TTD]}),U})(),Ca=(()=>{class U{constructor(O,Z,te){this.router=O,this.route=Z,this.locationStrategy=te,this.commands=[],this.onChanges=new Lt.xQ,this.subscription=O.events.subscribe(de=>{de instanceof Vn&&this.updateTargetUrlAndHref()})}set routerLink(O){this.commands=null!=O?Array.isArray(O)?O:[O]:[]}ngOnChanges(O){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(O,Z,te,de,Ie){if(0!==O||Z||te||de||Ie||"string"==typeof this.target&&"_self"!=this.target)return!0;const Ze={skipLocationChange:Ea(this.skipLocationChange),replaceUrl:Ea(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Ze),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ea(this.preserveFragment)})}}return U.\u0275fac=function(O){return new(O||U)(g.Y36(ni),g.Y36(Or),g.Y36(P.S$))},U.\u0275dir=g.lG2({type:U,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(O,Z){1&O&&g.NdJ("click",function(de){return Z.onClick(de.button,de.ctrlKey,de.shiftKey,de.altKey,de.metaKey)}),2&O&&(g.Ikx("href",Z.href,g.LSH),g.uIk("target",Z.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[g.TTD]}),U})();function Ea(U){return""===U||!!U}let wa=(()=>{class U{constructor(O,Z,te,de,Ie,Ze){this.router=O,this.element=Z,this.renderer=te,this.cdr=de,this.link=Ie,this.linkWithHref=Ze,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=O.events.subscribe(Et=>{Et instanceof Vn&&this.update()})}ngAfterContentInit(){(0,Ee.of)(this.links.changes,this.linksWithHrefs.changes,(0,Ee.of)(null)).pipe((0,gn.J)()).subscribe(O=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var O;null===(O=this.linkInputChangesSubscription)||void 0===O||O.unsubscribe();const Z=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(te=>!!te).map(te=>te.onChanges);this.linkInputChangesSubscription=(0,ge.D)(Z).pipe((0,gn.J)()).subscribe(te=>{this.isActive!==this.isLinkActive(this.router)(te)&&this.update()})}set routerLinkActive(O){const Z=Array.isArray(O)?O:O.split(" ");this.classes=Z.filter(te=>!!te)}ngOnChanges(O){this.update()}ngOnDestroy(){var O;this.routerEventsSubscription.unsubscribe(),null===(O=this.linkInputChangesSubscription)||void 0===O||O.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const O=this.hasActiveLinks();this.isActive!==O&&(this.isActive=O,this.cdr.markForCheck(),this.classes.forEach(Z=>{O?this.renderer.addClass(this.element.nativeElement,Z):this.renderer.removeClass(this.element.nativeElement,Z)}))})}isLinkActive(O){const Z=function(U){return!!U.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return te=>O.isActive(te.urlTree,Z)}hasActiveLinks(){const O=this.isLinkActive(this.router);return this.link&&O(this.link)||this.linkWithHref&&O(this.linkWithHref)||this.links.some(O)||this.linksWithHrefs.some(O)}}return U.\u0275fac=function(O){return new(O||U)(g.Y36(ni),g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(g.sBO),g.Y36(Bi,8),g.Y36(Ca,8))},U.\u0275dir=g.lG2({type:U,selectors:[["","routerLinkActive",""]],contentQueries:function(O,Z,te){if(1&O&&(g.Suo(te,Bi,5),g.Suo(te,Ca,5)),2&O){let de;g.iGM(de=g.CRH())&&(Z.links=de),g.iGM(de=g.CRH())&&(Z.linksWithHrefs=de)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[g.TTD]}),U})(),Wu=(()=>{class U{constructor(O,Z,te,de,Ie){this.parentContexts=O,this.location=Z,this.resolver=te,this.changeDetector=Ie,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.name=de||St,O.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const O=this.parentContexts.getContext(this.name);O&&O.route&&(O.attachRef?this.attach(O.attachRef,O.route):this.activateWith(O.route,O.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const O=this.activated;return this.activated=null,this._activatedRoute=null,O}attach(O,Z){this.activated=O,this._activatedRoute=Z,this.location.insert(O.hostView)}deactivate(){if(this.activated){const O=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(O)}}activateWith(O,Z){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=O;const Ie=(Z=Z||this.resolver).resolveComponentFactory(O._futureSnapshot.routeConfig.component),Ze=this.parentContexts.getOrCreateContext(this.name).children,Et=new Da(O,Ze,this.location.injector);this.activated=this.location.createComponent(Ie,this.location.length,Et),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return U.\u0275fac=function(O){return new(O||U)(g.Y36(Ai),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},U.\u0275dir=g.lG2({type:U,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),U})();class Da{constructor(R,O,Z){this.route=R,this.childContexts=O,this.parent=Z}get(R,O){return R===Or?this.route:R===Ai?this.childContexts:this.parent.get(R,O)}}class Yu{}class js{preload(R,O){return(0,Ee.of)(null)}}let Ml=(()=>{class U{constructor(O,Z,te,de,Ie){this.router=O,this.injector=de,this.preloadingStrategy=Ie,this.loader=new xr(Z,te,fn=>O.triggerEvent(new Mt(fn)),fn=>O.triggerEvent(new Pt(fn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Dt.h)(O=>O instanceof Vn),(0,Bn.b)(()=>this.preload())).subscribe(()=>{})}preload(){const O=this.injector.get(g.h0i);return this.processRoutes(O,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(O,Z){const te=[];for(const de of Z)if(de.loadChildren&&!de.canLoad&&de._loadedConfig){const Ie=de._loadedConfig;te.push(this.processRoutes(Ie.module,Ie.routes))}else de.loadChildren&&!de.canLoad?te.push(this.preloadConfig(O,de)):de.children&&te.push(this.processRoutes(O,de.children));return(0,ge.D)(te).pipe((0,gn.J)(),(0,Gt.U)(de=>{}))}preloadConfig(O,Z){return this.preloadingStrategy.preload(Z,()=>(Z._loadedConfig?(0,Ee.of)(Z._loadedConfig):this.loader.load(O.injector,Z)).pipe((0,Sn.zg)(de=>(Z._loadedConfig=de,this.processRoutes(de.module,de.routes)))))}}return U.\u0275fac=function(O){return new(O||U)(g.LFG(ni),g.LFG(g.v3s),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(Yu))},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac}),U})(),ra=(()=>{class U{constructor(O,Z,te={}){this.router=O,this.viewportScroller=Z,this.options=te,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},te.scrollPositionRestoration=te.scrollPositionRestoration||"disabled",te.anchorScrolling=te.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(O=>{O instanceof jn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=O.navigationTrigger,this.restoredId=O.restoredState?O.restoredState.navigationId:0):O instanceof Vn&&(this.lastId=O.id,this.scheduleScrollEvent(O,this.router.parseUrl(O.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(O=>{O instanceof bt&&(O.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(O.position):O.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(O.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(O,Z){this.router.triggerEvent(new bt(O,"popstate"===this.lastSource?this.store[this.restoredId]:null,Z))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return U.\u0275fac=function(O){return new(O||U)(g.LFG(ni),g.LFG(P.EM),g.LFG(void 0))},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac}),U})();const Ta=new g.OlP("ROUTER_CONFIGURATION"),Ha=new g.OlP("ROUTER_FORROOT_GUARD"),_t=[P.Ye,{provide:dn,useClass:In},{provide:ni,useFactory:function(U,R,O,Z,te,de,Ie,Ze={},Et,fn){const ir=new ni(null,U,R,O,Z,te,de,zt(Ie));return Et&&(ir.urlHandlingStrategy=Et),fn&&(ir.routeReuseStrategy=fn),function(U,R){U.errorHandler&&(R.errorHandler=U.errorHandler),U.malformedUriErrorHandler&&(R.malformedUriErrorHandler=U.malformedUriErrorHandler),U.onSameUrlNavigation&&(R.onSameUrlNavigation=U.onSameUrlNavigation),U.paramsInheritanceStrategy&&(R.paramsInheritanceStrategy=U.paramsInheritanceStrategy),U.relativeLinkResolution&&(R.relativeLinkResolution=U.relativeLinkResolution),U.urlUpdateStrategy&&(R.urlUpdateStrategy=U.urlUpdateStrategy)}(Ze,ir),Ze.enableTracing&&ir.events.subscribe(Gn=>{var Ir,Un;null===(Ir=console.group)||void 0===Ir||Ir.call(console,`Router Event: ${Gn.constructor.name}`),console.log(Gn.toString()),console.log(Gn),null===(Un=console.groupEnd)||void 0===Un||Un.call(console)}),ir},deps:[dn,Ai,P.Ye,g.zs3,g.v3s,g.Sil,Wn,Ta,[class{},new g.FiY],[class{},new g.FiY]]},Ai,{provide:Or,useFactory:function(U){return U.routerState.root},deps:[ni]},{provide:g.v3s,useClass:g.EAV},Ml,js,class{preload(R,O){return O().pipe($t(()=>(0,Ee.of)(null)))}},{provide:Ta,useValue:{enableTracing:!1}}];function Vt(){return new g.PXZ("Router",ni)}let ss=(()=>{class U{constructor(O,Z){}static forRoot(O,Z){return{ngModule:U,providers:[_t,Cs(O),{provide:Ha,useFactory:Ri,deps:[[ni,new g.FiY,new g.tp0]]},{provide:Ta,useValue:Z||{}},{provide:P.S$,useFactory:nn,deps:[P.lw,[new g.tBr(P.mr),new g.FiY],Ta]},{provide:ra,useFactory:Sa,deps:[ni,P.EM,Ta]},{provide:Yu,useExisting:Z&&Z.preloadingStrategy?Z.preloadingStrategy:js},{provide:g.PXZ,multi:!0,useFactory:Vt},[un,{provide:g.ip1,multi:!0,useFactory:rc,deps:[un]},{provide:Pr,useFactory:fu,deps:[un]},{provide:g.tb,multi:!0,useExisting:Pr}]]}}static forChild(O){return{ngModule:U,providers:[Cs(O)]}}}return U.\u0275fac=function(O){return new(O||U)(g.LFG(Ha,8),g.LFG(ni,8))},U.\u0275mod=g.oAB({type:U}),U.\u0275inj=g.cJS({}),U})();function Sa(U,R,O){return O.scrollOffset&&R.setOffset(O.scrollOffset),new ra(U,R,O)}function nn(U,R,O={}){return O.useHash?new P.Do(U,R):new P.b0(U,R)}function Ri(U){return"guarded"}function Cs(U){return[{provide:g.deG,multi:!0,useValue:U},{provide:Wn,multi:!0,useValue:U}]}let un=(()=>{class U{constructor(O){this.injector=O,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Lt.xQ}appInitializer(){return this.injector.get(P.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let Z=null;const te=new Promise(Ze=>Z=Ze),de=this.injector.get(ni),Ie=this.injector.get(Ta);return"disabled"===Ie.initialNavigation?(de.setUpLocationChangeListener(),Z(!0)):"enabled"===Ie.initialNavigation||"enabledBlocking"===Ie.initialNavigation?(de.hooks.afterPreactivation=()=>this.initNavigation?(0,Ee.of)(null):(this.initNavigation=!0,Z(!0),this.resultOfPreactivationDone),de.initialNavigation()):Z(!0),te})}bootstrapListener(O){const Z=this.injector.get(Ta),te=this.injector.get(Ml),de=this.injector.get(ra),Ie=this.injector.get(ni),Ze=this.injector.get(g.z2F);O===Ze.components[0]&&(("enabledNonBlocking"===Z.initialNavigation||void 0===Z.initialNavigation)&&Ie.initialNavigation(),te.setUpPreloading(),de.init(),Ie.resetRootComponentType(Ze.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return U.\u0275fac=function(O){return new(O||U)(g.LFG(g.zs3))},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac}),U})();function rc(U){return U.appInitializer.bind(U)}function fu(U){return U.bootstrapListener.bind(U)}const Pr=new g.OlP("Router Initializer")},9759:(Ht,it,K)=>{"use strict";K.d(it,{Z:()=>jt});var Ve,ct,P=K(4762),g=K(4685),J=K(6034),C=K(300),we=((Ve={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ve["bad-app-name"]="Illegal App name: '{$appName}",Ve["duplicate-app"]="Firebase App named '{$appName}' already exists",Ve["app-deleted"]="Firebase App named '{$appName}' already deleted",Ve["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ve["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ve),Ne=new g.LL("app","Firebase",we),he="@firebase/app",$t="[DEFAULT]",Rt=((ct={})[he]="fire-core",ct["@firebase/analytics"]="fire-analytics",ct["@firebase/app-check"]="fire-app-check",ct["@firebase/auth"]="fire-auth",ct["@firebase/database"]="fire-rtdb",ct["@firebase/functions"]="fire-fn",ct["@firebase/installations"]="fire-iid",ct["@firebase/messaging"]="fire-fcm",ct["@firebase/performance"]="fire-perf",ct["@firebase/remote-config"]="fire-rc",ct["@firebase/storage"]="fire-gcs",ct["@firebase/firestore"]="fire-fst",ct["fire-js"]="fire-js",ct["firebase-wrapper"]="fire-js-all",ct),En=new C.Yd("@firebase/app"),Dt=function(){function Nt(Jt,Gt,Fn){var Cn=this;this.firebase_=Fn,this.isDeleted_=!1,this.name_=Gt.name,this.automaticDataCollectionEnabled_=Gt.automaticDataCollectionEnabled||!1,this.options_=(0,g.p$)(Jt),this.container=new J.H0(Gt.name),this._addComponent(new J.wA("app",function(){return Cn},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(sr){return Cn._addComponent(sr)})}return Object.defineProperty(Nt.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(Jt){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=Jt},enumerable:!1,configurable:!0}),Object.defineProperty(Nt.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Nt.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Nt.prototype.delete=function(){var Jt=this;return new Promise(function(Gt){Jt.checkDestroyed_(),Gt()}).then(function(){return Jt.firebase_.INTERNAL.removeApp(Jt.name_),Promise.all(Jt.container.getProviders().map(function(Gt){return Gt.delete()}))}).then(function(){Jt.isDeleted_=!0})},Nt.prototype._getService=function(Jt,Gt){var Fn;void 0===Gt&&(Gt=$t),this.checkDestroyed_();var Cn=this.container.getProvider(Jt);return!Cn.isInitialized()&&"EXPLICIT"===(null===(Fn=Cn.getComponent())||void 0===Fn?void 0:Fn.instantiationMode)&&Cn.initialize(),Cn.getImmediate({identifier:Gt})},Nt.prototype._removeServiceInstance=function(Jt,Gt){void 0===Gt&&(Gt=$t),this.container.getProvider(Jt).clearInstance(Gt)},Nt.prototype._addComponent=function(Jt){try{this.container.addComponent(Jt)}catch(Gt){En.debug("Component "+Jt.name+" failed to register with FirebaseApp "+this.name,Gt)}},Nt.prototype._addOrOverwriteComponent=function(Jt){this.container.addOrOverwriteComponent(Jt)},Nt.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Nt.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ne.create("app-deleted",{appName:this.name_})},Nt}();Dt.prototype.name&&Dt.prototype.options||Dt.prototype.delete||console.log("dc");var nt=function st(){var Nt=function(Nt){var Jt={},Gt=new Map,Fn={__esModule:!0,initializeApp:function(gn,Yt){void 0===Yt&&(Yt={}),("object"!=typeof Yt||null===Yt)&&(Yt={name:Yt});var Vn=Yt;void 0===Vn.name&&(Vn.name=$t);var Qt=Vn.name;if("string"!=typeof Qt||!Qt)throw Ne.create("bad-app-name",{appName:String(Qt)});if((0,g.r3)(Jt,Qt))throw Ne.create("duplicate-app",{appName:Qt});var hr=new Nt(gn,Vn,Fn);return Jt[Qt]=hr,hr},app:sr,registerVersion:function(gn,Yt,jn){var Vn,Qt=null!==(Vn=Rt[gn])&&void 0!==Vn?Vn:gn;jn&&(Qt+="-"+jn);var hr=Qt.match(/\s|\//),Br=Yt.match(/\s|\//);if(hr||Br){var $n=['Unable to register library "'+Qt+'" with version "'+Yt+'":'];return hr&&$n.push('library name "'+Qt+'" contains illegal characters (whitespace or "/")'),hr&&Br&&$n.push("and"),Br&&$n.push('version name "'+Yt+'" contains illegal characters (whitespace or "/")'),void En.warn($n.join(" "))}Xn(new J.wA(Qt+"-version",function(){return{library:Qt,version:Yt}},"VERSION"))},setLogLevel:C.Ub,onLog:function(gn,Yt){if(null!==gn&&"function"!=typeof gn)throw Ne.create("invalid-log-argument");(0,C.Am)(gn,Yt)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:Xn,removeApp:function(gn){delete Jt[gn]},components:Gt,useAsService:function(gn,Yt){return"serverAuth"===Yt?null:Yt}}};function sr(gn){if(!(0,g.r3)(Jt,gn=gn||$t))throw Ne.create("no-app",{appName:gn});return Jt[gn]}function Xn(gn){var Yt=gn.name;if(Gt.has(Yt))return En.debug("There were multiple attempts to register component "+Yt+"."),"PUBLIC"===gn.type?Fn[Yt]:null;if(Gt.set(Yt,gn),"PUBLIC"===gn.type){var jn=function(Br){if(void 0===Br&&(Br=sr()),"function"!=typeof Br[Yt])throw Ne.create("invalid-app-argument",{appName:Yt});return Br[Yt]()};void 0!==gn.serviceProps&&(0,g.ZB)(jn,gn.serviceProps),Fn[Yt]=jn,Nt.prototype[Yt]=function(){for(var Br=[],$n=0;$n<arguments.length;$n++)Br[$n]=arguments[$n];return this._getService.bind(this,Yt).apply(this,gn.multipleInstances?Br:[])}}for(var Vn=0,Qt=Object.keys(Jt);Vn<Qt.length;Vn++)Jt[Qt[Vn]]._addComponent(gn);return"PUBLIC"===gn.type?Fn[Yt]:null}return Fn.default=Fn,Object.defineProperty(Fn,"apps",{get:function(){return Object.keys(Jt).map(function(gn){return Jt[gn]})}}),sr.App=Nt,Fn}(Dt);return Nt.INTERNAL=(0,P.pi)((0,P.pi)({},Nt.INTERNAL),{createFirebaseNamespace:st,extendNamespace:function(Gt){(0,g.ZB)(Nt,Gt)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Nt}(),vt=function(){function Nt(Jt){this.container=Jt}return Nt.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(Gt){if(function(Nt){var Jt=Nt.getComponent();return"VERSION"===(null==Jt?void 0:Jt.type)}(Gt)){var Fn=Gt.getImmediate();return Fn.library+"/"+Fn.version}return null}).filter(function(Gt){return Gt}).join(" ")},Nt}();if((0,g.jU)()&&void 0!==self.firebase){En.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ln=self.firebase.SDK_VERSION;ln&&ln.indexOf("LITE")>=0&&En.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Tn=nt.initializeApp;nt.initializeApp=function(){for(var Nt=[],Jt=0;Jt<arguments.length;Jt++)Nt[Jt]=arguments[Jt];return(0,g.UG)()&&En.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Tn.apply(void 0,Nt)};var Nt,sn=nt;(Nt=sn).INTERNAL.registerComponent(new J.wA("platform-logger",function(Gt){return new vt(Gt)},"PRIVATE")),Nt.registerVersion(he,"0.6.30",undefined),Nt.registerVersion("fire-js","");const jt=sn},6034:(Ht,it,K)=>{"use strict";K.d(it,{wA:()=>J,H0:()=>he,zt:()=>Ve});var P=K(4762),g=K(4685),J=function(){function be(se,Ae,ge){this.name=se,this.instanceFactory=Ae,this.type=ge,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return be.prototype.setInstantiationMode=function(se){return this.instantiationMode=se,this},be.prototype.setMultipleInstances=function(se){return this.multipleInstances=se,this},be.prototype.setServiceProps=function(se){return this.serviceProps=se,this},be.prototype.setInstanceCreatedCallback=function(se){return this.onInstanceCreated=se,this},be}(),C="[DEFAULT]",Ve=function(){function be(se,Ae){this.name=se,this.container=Ae,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return be.prototype.get=function(se){var Ae=this.normalizeInstanceIdentifier(se);if(!this.instancesDeferred.has(Ae)){var ge=new g.BH;if(this.instancesDeferred.set(Ae,ge),this.isInitialized(Ae)||this.shouldAutoInitialize())try{var Ee=this.getOrInitializeService({instanceIdentifier:Ae});Ee&&ge.resolve(Ee)}catch(Oe){}}return this.instancesDeferred.get(Ae).promise},be.prototype.getImmediate=function(se){var Ae,ge=this.normalizeInstanceIdentifier(null==se?void 0:se.identifier),Ee=null!==(Ae=null==se?void 0:se.optional)&&void 0!==Ae&&Ae;if(!this.isInitialized(ge)&&!this.shouldAutoInitialize()){if(Ee)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:ge})}catch(Oe){if(Ee)return null;throw Oe}},be.prototype.getComponent=function(){return this.component},be.prototype.setComponent=function(se){var Ae,ge;if(se.name!==this.name)throw Error("Mismatching Component "+se.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=se,this.shouldAutoInitialize()){if(function(be){return"EAGER"===be.instantiationMode}(se))try{this.getOrInitializeService({instanceIdentifier:C})}catch(On){}try{for(var Ee=(0,P.XA)(this.instancesDeferred.entries()),Oe=Ee.next();!Oe.done;Oe=Ee.next()){var Ue=(0,P.CR)(Oe.value,2),ne=Ue[1],Ke=this.normalizeInstanceIdentifier(Ue[0]);try{var At=this.getOrInitializeService({instanceIdentifier:Ke});ne.resolve(At)}catch(On){}}}catch(On){Ae={error:On}}finally{try{Oe&&!Oe.done&&(ge=Ee.return)&&ge.call(Ee)}finally{if(Ae)throw Ae.error}}}},be.prototype.clearInstance=function(se){void 0===se&&(se=C),this.instancesDeferred.delete(se),this.instancesOptions.delete(se),this.instances.delete(se)},be.prototype.delete=function(){return(0,P.mG)(this,void 0,void 0,function(){var se;return(0,P.Jh)(this,function(Ae){switch(Ae.label){case 0:return se=Array.from(this.instances.values()),[4,Promise.all((0,P.ev)((0,P.ev)([],(0,P.CR)(se.filter(function(ge){return"INTERNAL"in ge}).map(function(ge){return ge.INTERNAL.delete()}))),(0,P.CR)(se.filter(function(ge){return"_delete"in ge}).map(function(ge){return ge._delete()}))))];case 1:return Ae.sent(),[2]}})})},be.prototype.isComponentSet=function(){return null!=this.component},be.prototype.isInitialized=function(se){return void 0===se&&(se=C),this.instances.has(se)},be.prototype.getOptions=function(se){return void 0===se&&(se=C),this.instancesOptions.get(se)||{}},be.prototype.initialize=function(se){var Ae,ge;void 0===se&&(se={});var Ee=se.options,Oe=void 0===Ee?{}:Ee,Ue=this.normalizeInstanceIdentifier(se.instanceIdentifier);if(this.isInitialized(Ue))throw Error(this.name+"("+Ue+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Xe=this.getOrInitializeService({instanceIdentifier:Ue,options:Oe});try{for(var ne=(0,P.XA)(this.instancesDeferred.entries()),Ke=ne.next();!Ke.done;Ke=ne.next()){var At=(0,P.CR)(Ke.value,2),Lt=At[1];Ue===this.normalizeInstanceIdentifier(At[0])&&Lt.resolve(Xe)}}catch($t){Ae={error:$t}}finally{try{Ke&&!Ke.done&&(ge=ne.return)&&ge.call(ne)}finally{if(Ae)throw Ae.error}}return Xe},be.prototype.onInit=function(se,Ae){var ge,Ee=this.normalizeInstanceIdentifier(Ae),Oe=null!==(ge=this.onInitCallbacks.get(Ee))&&void 0!==ge?ge:new Set;Oe.add(se),this.onInitCallbacks.set(Ee,Oe);var Ue=this.instances.get(Ee);return Ue&&se(Ue,Ee),function(){Oe.delete(se)}},be.prototype.invokeOnInitCallbacks=function(se,Ae){var ge,Ee,Oe=this.onInitCallbacks.get(Ae);if(Oe)try{for(var Ue=(0,P.XA)(Oe),Xe=Ue.next();!Xe.done;Xe=Ue.next()){var ne=Xe.value;try{ne(se,Ae)}catch(Ke){}}}catch(Ke){ge={error:Ke}}finally{try{Xe&&!Xe.done&&(Ee=Ue.return)&&Ee.call(Ue)}finally{if(ge)throw ge.error}}},be.prototype.getOrInitializeService=function(se){var Ae=se.instanceIdentifier,ge=se.options,Ee=void 0===ge?{}:ge,Oe=this.instances.get(Ae);if(!Oe&&this.component&&(Oe=this.component.instanceFactory(this.container,{instanceIdentifier:we(Ae),options:Ee}),this.instances.set(Ae,Oe),this.instancesOptions.set(Ae,Ee),this.invokeOnInitCallbacks(Oe,Ae),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ae,Oe)}catch(Ue){}return Oe||null},be.prototype.normalizeInstanceIdentifier=function(se){return void 0===se&&(se=C),this.component?this.component.multipleInstances?se:C:se},be.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},be}();function we(be){return be===C?void 0:be}var he=function(){function be(se){this.name=se,this.providers=new Map}return be.prototype.addComponent=function(se){var Ae=this.getProvider(se.name);if(Ae.isComponentSet())throw new Error("Component "+se.name+" has already been registered with "+this.name);Ae.setComponent(se)},be.prototype.addOrOverwriteComponent=function(se){this.getProvider(se.name).isComponentSet()&&this.providers.delete(se.name),this.addComponent(se)},be.prototype.getProvider=function(se){if(this.providers.has(se))return this.providers.get(se);var Ae=new Ve(se,this);return this.providers.set(se,Ae),Ae},be.prototype.getProviders=function(){return Array.from(this.providers.values())},be}()},9192:(Ht,it,K)=>{"use strict";var P=K(9759),g=K(6034),J=K(4685),C=K(4762),Ve=K(300);Ht=K.hmd(Ht);var he="";function be(c){he=c}var c,se=function(){function c(d){this.domStorage_=d,this.prefix_="firebase:"}return c.prototype.set=function(d,f){null==f?this.domStorage_.removeItem(this.prefixedName_(d)):this.domStorage_.setItem(this.prefixedName_(d),(0,J.Pz)(f))},c.prototype.get=function(d){var f=this.domStorage_.getItem(this.prefixedName_(d));return null==f?null:(0,J.cI)(f)},c.prototype.remove=function(d){this.domStorage_.removeItem(this.prefixedName_(d))},c.prototype.prefixedName_=function(d){return this.prefix_+d},c.prototype.toString=function(){return this.domStorage_.toString()},c}(),Ae=function(){function c(){this.cache_={},this.isInMemoryStorage=!0}return c.prototype.set=function(d,f){null==f?delete this.cache_[d]:this.cache_[d]=f},c.prototype.get=function(d){return(0,J.r3)(this.cache_,d)?this.cache_[d]:null},c.prototype.remove=function(d){delete this.cache_[d]},c}(),ge=function(c){try{if("undefined"!=typeof window&&void 0!==window[c]){var d=window[c];return d.setItem("firebase:sentinel","cache"),d.removeItem("firebase:sentinel"),new se(d)}}catch(f){}return new Ae},Ee=ge("localStorage"),Oe=ge("sessionStorage"),Ue=new Ve.Yd("@firebase/database"),Xe=(c=1,function(){return c++}),ne=function(c){var d=(0,J.dS)(c),f=new J.gQ;f.update(d);var y=f.digest();return J.US.encodeByteArray(y)},Ke=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];for(var f="",y=0;y<c.length;y++){var D=c[y];Array.isArray(D)||D&&"object"==typeof D&&"number"==typeof D.length?f+=Ke.apply(null,D):f+="object"==typeof D?(0,J.Pz)(D):D,f+=" "}return f},At=null,On=!0,Lt=function(c,d){(0,J.hu)(!d||!0===c||!1===c,"Can't turn on custom loggers persistently."),!0===c?(Ue.logLevel=Ve.in.VERBOSE,At=Ue.log.bind(Ue),d&&Oe.set("logging_enabled",!0)):"function"==typeof c?At=c:(At=null,Oe.remove("logging_enabled"))},ct=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];if(!0===On&&(On=!1,null===At&&!0===Oe.get("logging_enabled")&&Lt(!0)),At){var f=Ke.apply(null,c);At(f)}},$t=function(c){return function(){for(var d=[],f=0;f<arguments.length;f++)d[f]=arguments[f];ct.apply(void 0,(0,C.ev)([c],(0,C.CR)(d)))}},Rt=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var f="FIREBASE INTERNAL ERROR: "+Ke.apply(void 0,(0,C.ev)([],(0,C.CR)(c)));Ue.error(f)},En=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var f="FIREBASE FATAL ERROR: "+Ke.apply(void 0,(0,C.ev)([],(0,C.CR)(c)));throw Ue.error(f),new Error(f)},Dt=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var f="FIREBASE WARNING: "+Ke.apply(void 0,(0,C.ev)([],(0,C.CR)(c)));Ue.warn(f)},ot=function(c){return"number"==typeof c&&(c!=c||c===Number.POSITIVE_INFINITY||c===Number.NEGATIVE_INFINITY)},nt="[MIN_NAME]",vt="[MAX_NAME]",at=function(c,d){if(c===d)return 0;if(c===nt||d===vt)return-1;if(d===nt||c===vt)return 1;var f=Bn(c),y=Bn(d);return null!==f?null!==y?f-y==0?c.length-d.length:f-y:-1:null!==y?1:c<d?-1:1},tn=function(c,d){return c===d?0:c<d?-1:1},ln=function(c,d){if(d&&c in d)return d[c];throw new Error("Missing required key ("+c+") in object: "+(0,J.Pz)(d))},Tn=function(c){if("object"!=typeof c||null===c)return(0,J.Pz)(c);var d=[];for(var f in c)d.push(f);d.sort();for(var y="{",D=0;D<d.length;D++)0!==D&&(y+=","),y+=(0,J.Pz)(d[D]),y+=":",y+=Tn(c[d[D]]);return y+"}"},sn=function(c,d){var f=c.length;if(f<=d)return[c];for(var y=[],D=0;D<f;D+=d)y.push(c.substring(D,D+d>f?f:D+d));return y};function jt(c,d){for(var f in c)c.hasOwnProperty(f)&&d(f,c[f])}var Nt=function(c){(0,J.hu)(!ot(c),"Invalid JSON number");var D,L,W,ce,ve,y=1023;0===c?(L=0,W=0,D=1/c==-1/0?1:0):(D=c<0,(c=Math.abs(c))>=Math.pow(2,1-y)?(L=(ce=Math.min(Math.floor(Math.log(c)/Math.LN2),y))+y,W=Math.round(c*Math.pow(2,52-ce)-Math.pow(2,52))):(L=0,W=Math.round(c/Math.pow(2,-1074))));var Me=[];for(ve=52;ve;ve-=1)Me.push(W%2?1:0),W=Math.floor(W/2);for(ve=11;ve;ve-=1)Me.push(L%2?1:0),L=Math.floor(L/2);Me.push(D?1:0),Me.reverse();var ke=Me.join(""),dt="";for(ve=0;ve<64;ve+=8){var It=parseInt(ke.substr(ve,8),2).toString(16);1===It.length&&(It="0"+It),dt+=It}return dt.toLowerCase()},Cn=new RegExp("^-?(0*)\\d{1,10}$"),sr=-2147483648,zn=2147483647,Bn=function(c){if(Cn.test(c)){var d=Number(c);if(d>=sr&&d<=zn)return d}return null},Xn=function(c){try{c()}catch(d){setTimeout(function(){throw Dt("Exception was thrown by user callback.",d.stack||""),d},Math.floor(0))}},An=function(c,d){var f=setTimeout(c,d);return"object"==typeof f&&f.unref&&f.unref(),f},Oi=function(){function c(d,f){var y=this;this.appName_=d,this.appCheckProvider=f,this.appCheck=null==f?void 0:f.getImmediate({optional:!0}),this.appCheck||null==f||f.get().then(function(D){return y.appCheck=D})}return c.prototype.getToken=function(d){var f=this;return this.appCheck?this.appCheck.getToken(d):new Promise(function(y,D){setTimeout(function(){f.appCheck?f.getToken(d).then(y,D):y(null)},0)})},c.prototype.addTokenChangeListener=function(d){var f;null===(f=this.appCheckProvider)||void 0===f||f.get().then(function(y){return y.addTokenListener(d)})},c.prototype.notifyForInvalidToken=function(){Dt('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},c}(),gn=function(){function c(d,f,y){var D=this;this.appName_=d,this.firebaseOptions_=f,this.authProvider_=y,this.auth_=null,this.auth_=y.getImmediate({optional:!0}),this.auth_||y.onInit(function(L){return D.auth_=L})}return c.prototype.getToken=function(d){var f=this;return this.auth_?this.auth_.getToken(d).catch(function(y){return y&&"auth/token-not-initialized"===y.code?(ct("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(y)}):new Promise(function(y,D){setTimeout(function(){f.auth_?f.getToken(d).then(y,D):y(null)},0)})},c.prototype.addTokenChangeListener=function(d){this.auth_?this.auth_.addAuthTokenListener(d):this.authProvider_.get().then(function(f){return f.addAuthTokenListener(d)})},c.prototype.removeTokenChangeListener=function(d){this.authProvider_.get().then(function(f){return f.removeAuthTokenListener(d)})},c.prototype.notifyForInvalidToken=function(){var d='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';Dt(d+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},c}(),Yt=function(){function c(d){this.accessToken=d}return c.prototype.getToken=function(d){return Promise.resolve({accessToken:this.accessToken})},c.prototype.addTokenChangeListener=function(d){d(this.accessToken)},c.prototype.removeTokenChangeListener=function(d){},c.prototype.notifyForInvalidToken=function(){},c.OWNER="owner",c}(),$n=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Mt="websocket",Pt="long_polling",an=function(){function c(d,f,y,D,L,W,ce){void 0===L&&(L=!1),void 0===W&&(W=""),void 0===ce&&(ce=!1),this.secure=f,this.namespace=y,this.webSocketOnly=D,this.nodeAdmin=L,this.persistenceKey=W,this.includeNamespaceInQueryParams=ce,this._host=d.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ee.get("host:"+d)||this._host}return c.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},c.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(c.prototype,"host",{get:function(){return this._host},set:function(d){d!==this.internalHost&&(this.internalHost=d,this.isCacheableHost()&&Ee.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),c.prototype.toString=function(){var d=this.toURLString();return this.persistenceKey&&(d+="<"+this.persistenceKey+">"),d},c.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},c}();function He(c,d,f){var y;if((0,J.hu)("string"==typeof d,"typeof type must == string"),(0,J.hu)("object"==typeof f,"typeof params must == object"),d===Mt)y=(c.secure?"wss://":"ws://")+c.internalHost+"/.ws?";else{if(d!==Pt)throw new Error("Unknown connection type: "+d);y=(c.secure?"https://":"http://")+c.internalHost+"/.lp?"}(function(c){return c.host!==c.internalHost||c.isCustomHost()||c.includeNamespaceInQueryParams})(c)&&(f.ns=c.namespace);var D=[];return jt(f,function(L,W){D.push(L+"="+W)}),y+D.join("&")}var pt=function(){function c(){this.counters_={}}return c.prototype.incrementCounter=function(d,f){void 0===f&&(f=1),(0,J.r3)(this.counters_,d)||(this.counters_[d]=0),this.counters_[d]+=f},c.prototype.get=function(){return(0,J.p$)(this.counters_)},c}(),bt={},St={};function Ut(c){var d=c.toString();return bt[d]||(bt[d]=new pt),bt[d]}var mn=function(){function c(d){this.onMessage_=d,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return c.prototype.closeAfter=function(d,f){this.closeAfterResponse=d,this.onClose=f,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},c.prototype.handleResponse=function(d,f){var y=this;this.pendingResponses[d]=f;for(var D=function(){var ce=L.pendingResponses[L.currentResponseNum];delete L.pendingResponses[L.currentResponseNum];for(var ve=function(ke){ce[ke]&&Xn(function(){y.onMessage_(ce[ke])})},Me=0;Me<ce.length;++Me)ve(Me);if(L.currentResponseNum===L.closeAfterResponse)return L.onClose&&(L.onClose(),L.onClose=null),"break";L.currentResponseNum++},L=this;this.pendingResponses[this.currentResponseNum]&&"break"!==D(););},c}(),Li=function(){function c(d,f,y,D,L,W,ce){var ve=this;this.connId=d,this.repoInfo=f,this.applicationId=y,this.appCheckToken=D,this.authToken=L,this.transportSessionId=W,this.lastSessionId=ce,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$t(d),this.stats_=Ut(f),this.urlFn=function(Me){return ve.appCheckToken&&(Me.ac=ve.appCheckToken),He(f,Pt,Me)}}return c.prototype.open=function(d,f){var y=this;this.curSegmentNum=0,this.onDisconnect_=f,this.myPacketOrderer=new mn(d),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){y.log_("Timed out trying to connect."),y.onClosed_(),y.connectTimeoutTimer_=null},Math.floor(3e4)),function(c){if((0,J.Yr)()||"complete"===document.readyState)c();else{var d=!1,f=function(){document.body?d||(d=!0,c()):setTimeout(f,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&f()}),window.attachEvent("onload",f))}}(function(){if(!y.isClosed_){y.scriptTagHolder=new uo(function(){for(var W=[],ce=0;ce<arguments.length;ce++)W[ce]=arguments[ce];var ve=(0,C.CR)(W,5),Me=ve[0],ke=ve[1],dt=ve[2];if(y.incrementIncomingBytes_(W),y.scriptTagHolder)if(y.connectTimeoutTimer_&&(clearTimeout(y.connectTimeoutTimer_),y.connectTimeoutTimer_=null),y.everConnected_=!0,"start"===Me)y.id=ke,y.password=dt;else{if("close"!==Me)throw new Error("Unrecognized command received: "+Me);ke?(y.scriptTagHolder.sendNewPolls=!1,y.myPacketOrderer.closeAfter(ke,function(){y.onClosed_()})):y.onClosed_()}},function(){for(var W=[],ce=0;ce<arguments.length;ce++)W[ce]=arguments[ce];var ve=(0,C.CR)(W,2),Me=ve[0],ke=ve[1];y.incrementIncomingBytes_(W),y.myPacketOrderer.handleResponse(Me,ke)},function(){y.onClosed_()},y.urlFn);var D={start:"t"};D.ser=Math.floor(1e8*Math.random()),y.scriptTagHolder.uniqueCallbackIdentifier&&(D.cb=y.scriptTagHolder.uniqueCallbackIdentifier),D.v="5",y.transportSessionId&&(D.s=y.transportSessionId),y.lastSessionId&&(D.ls=y.lastSessionId),y.applicationId&&(D.p=y.applicationId),y.appCheckToken&&(D.ac=y.appCheckToken),"undefined"!=typeof location&&location.hostname&&$n.test(location.hostname)&&(D.r="f");var L=y.urlFn(D);y.log_("Connecting via long-poll to "+L),y.scriptTagHolder.addTag(L,function(){})}})},c.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},c.forceAllow=function(){c.forceAllow_=!0},c.forceDisallow=function(){c.forceDisallow_=!0},c.isAvailable=function(){return!((0,J.Yr)()||!c.forceAllow_&&(c.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},c.prototype.markConnectionHealthy=function(){},c.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},c.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},c.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},c.prototype.send=function(d){var f=(0,J.Pz)(d);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);for(var y=(0,J.h$)(f),D=sn(y,1840),L=0;L<D.length;L++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,D.length,D[L]),this.curSegmentNum++},c.prototype.addDisconnectPingFrame=function(d,f){if(!(0,J.Yr)()){this.myDisconnFrame=document.createElement("iframe");var y={dframe:"t"};y.id=d,y.pw=f,this.myDisconnFrame.src=this.urlFn(y),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},c.prototype.incrementIncomingBytes_=function(d){var f=(0,J.Pz)(d).length;this.bytesReceived+=f,this.stats_.incrementCounter("bytes_received",f)},c}(),uo=function(){function c(d,f,y,D){if(this.onDisconnect=y,this.urlFn=D,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,J.Yr)())this.commandCB=d,this.onMessageCB=f;else{this.uniqueCallbackIdentifier=Xe(),window["pLPCommand"+this.uniqueCallbackIdentifier]=d,window["pRTLPCB"+this.uniqueCallbackIdentifier]=f,this.myIFrame=c.createIFrame_();var L="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(L='<script>document.domain="'+document.domain+'";<\/script>');var ce="<html><body>"+L+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(ce),this.myIFrame.doc.close()}catch(ve){ct("frame writing exception"),ve.stack&&ct(ve.stack),ct(ve)}}}return c.createIFrame_=function(){var d=document.createElement("iframe");if(d.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(d);try{d.contentWindow.document||ct("No IE domain setting required")}catch(D){var y=document.domain;d.src="javascript:void((function(){document.open();document.domain='"+y+"';document.close();})())"}return d.contentDocument?d.doc=d.contentDocument:d.contentWindow?d.doc=d.contentWindow.document:d.document&&(d.doc=d.document),d},c.prototype.close=function(){var d=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==d.myIFrame&&(document.body.removeChild(d.myIFrame),d.myIFrame=null)},Math.floor(0)));var f=this.onDisconnect;f&&(this.onDisconnect=null,f())},c.prototype.startLongPoll=function(d,f){for(this.myID=d,this.myPW=f,this.alive=!0;this.newRequest_(););},c.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var d={};d.id=this.myID,d.pw=this.myPW,d.ser=this.currentSerial;for(var f=this.urlFn(d),y="",D=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+y.length<=1870;){var W=this.pendingSegs.shift();y=y+"&seg"+D+"="+W.seg+"&ts"+D+"="+W.ts+"&d"+D+"="+W.d,D++}return this.addLongPollTag_(f+=y,this.currentSerial),!0}return!1},c.prototype.enqueueSegment=function(d,f,y){this.pendingSegs.push({seg:d,ts:f,d:y}),this.alive&&this.newRequest_()},c.prototype.addLongPollTag_=function(d,f){var y=this;this.outstandingRequests.add(f);var D=function(){y.outstandingRequests.delete(f),y.newRequest_()},L=setTimeout(D,Math.floor(25e3));this.addTag(d,function(){clearTimeout(L),D()})},c.prototype.addTag=function(d,f){var y=this;(0,J.Yr)()?this.doNodeLongPoll(d,f):setTimeout(function(){try{if(!y.sendNewPolls)return;var D=y.myIFrame.doc.createElement("script");D.type="text/javascript",D.async=!0,D.src=d,D.onload=D.onreadystatechange=function(){var L=D.readyState;(!L||"loaded"===L||"complete"===L)&&(D.onload=D.onreadystatechange=null,D.parentNode&&D.parentNode.removeChild(D),f())},D.onerror=function(){ct("Long-poll script failed to load: "+d),y.sendNewPolls=!1,y.close()},y.myIFrame.doc.body.appendChild(D)}catch(L){}},Math.floor(1))},c}(),ur=null;"undefined"!=typeof MozWebSocket?ur=MozWebSocket:"undefined"!=typeof WebSocket&&(ur=WebSocket);var yn=function(){function c(d,f,y,D,L,W,ce){this.connId=d,this.applicationId=y,this.appCheckToken=D,this.authToken=L,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$t(this.connId),this.stats_=Ut(f),this.connURL=c.connectionURL_(f,W,ce,D),this.nodeAdmin=f.nodeAdmin}return c.connectionURL_=function(d,f,y,D){var L={v:"5"};return!(0,J.Yr)()&&"undefined"!=typeof location&&location.hostname&&$n.test(location.hostname)&&(L.r="f"),f&&(L.s=f),y&&(L.ls=y),D&&(L.ac=D),He(d,Mt,L)},c.prototype.open=function(d,f){var y=this;this.onDisconnect=f,this.onMessage=d,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ee.set("previous_websocket_failure",!0);try{if((0,J.Yr)()){var L={headers:{"User-Agent":"Firebase/5/"+he+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(L.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(L.headers["X-Firebase-AppCheck"]=this.appCheckToken);var W=process.env,ce=0===this.connURL.indexOf("wss://")?W.HTTPS_PROXY||W.https_proxy:W.HTTP_PROXY||W.http_proxy;ce&&(L.proxy={origin:ce}),this.mySock=new ur(this.connURL,[],L)}else this.mySock=new ur(this.connURL,[],L={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(Me){this.log_("Error instantiating WebSocket.");var ve=Me.message||Me.data;return ve&&this.log_(ve),void this.onClosed_()}this.mySock.onopen=function(){y.log_("Websocket connected."),y.everConnected_=!0},this.mySock.onclose=function(){y.log_("Websocket connection was disconnected."),y.mySock=null,y.onClosed_()},this.mySock.onmessage=function(Me){y.handleIncomingFrame(Me)},this.mySock.onerror=function(Me){y.log_("WebSocket error.  Closing connection.");var ke=Me.message||Me.data;ke&&y.log_(ke),y.onClosed_()}},c.prototype.start=function(){},c.forceDisallow=function(){c.forceDisallow_=!0},c.isAvailable=function(){var d=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var y=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);y&&y.length>1&&parseFloat(y[1])<4.4&&(d=!0)}return!d&&null!==ur&&!c.forceDisallow_},c.previouslyFailed=function(){return Ee.isInMemoryStorage||!0===Ee.get("previous_websocket_failure")},c.prototype.markConnectionHealthy=function(){Ee.remove("previous_websocket_failure")},c.prototype.appendFrame_=function(d){if(this.frames.push(d),this.frames.length===this.totalFrames){var f=this.frames.join("");this.frames=null;var y=(0,J.cI)(f);this.onMessage(y)}},c.prototype.handleNewFrameCount_=function(d){this.totalFrames=d,this.frames=[]},c.prototype.extractFrameCount_=function(d){if((0,J.hu)(null===this.frames,"We already have a frame buffer"),d.length<=6){var f=Number(d);if(!isNaN(f))return this.handleNewFrameCount_(f),null}return this.handleNewFrameCount_(1),d},c.prototype.handleIncomingFrame=function(d){if(null!==this.mySock){var f=d.data;if(this.bytesReceived+=f.length,this.stats_.incrementCounter("bytes_received",f.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(f);else{var y=this.extractFrameCount_(f);null!==y&&this.appendFrame_(y)}}},c.prototype.send=function(d){this.resetKeepAlive();var f=(0,J.Pz)(d);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);var y=sn(f,16384);y.length>1&&this.sendString_(String(y.length));for(var D=0;D<y.length;D++)this.sendString_(y[D])},c.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},c.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},c.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},c.prototype.resetKeepAlive=function(){var d=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){d.mySock&&d.sendString_("0"),d.resetKeepAlive()},Math.floor(45e3))},c.prototype.sendString_=function(d){try{this.mySock.send(d)}catch(f){this.log_("Exception thrown from WebSocket.send():",f.message||f.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},c.responsesRequiredToBeHealthy=2,c.healthyTimeout=3e4,c}(),Vr=function(){function c(d){this.initTransports_(d)}return Object.defineProperty(c,"ALL_TRANSPORTS",{get:function(){return[Li,yn]},enumerable:!1,configurable:!0}),c.prototype.initTransports_=function(d){var f,y,D=yn&&yn.isAvailable(),L=D&&!yn.previouslyFailed();if(d.webSocketOnly&&(D||Dt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),L=!0),L)this.transports_=[yn];else{var W=this.transports_=[];try{for(var ce=(0,C.XA)(c.ALL_TRANSPORTS),ve=ce.next();!ve.done;ve=ce.next()){var Me=ve.value;Me&&Me.isAvailable()&&W.push(Me)}}catch(ke){f={error:ke}}finally{try{ve&&!ve.done&&(y=ce.return)&&y.call(ce)}finally{if(f)throw f.error}}}},c.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},c.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},c}(),_e=function(){function c(d,f,y,D,L,W,ce,ve,Me,ke){this.id=d,this.repoInfo_=f,this.applicationId_=y,this.appCheckToken_=D,this.authToken_=L,this.onMessage_=W,this.onReady_=ce,this.onDisconnect_=ve,this.onKill_=Me,this.lastSessionId=ke,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$t("c:"+this.id+":"),this.transportManager_=new Vr(f),this.log_("Connection created"),this.start_()}return c.prototype.start_=function(){var d=this,f=this.transportManager_.initialTransport();this.conn_=new f(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=f.responsesRequiredToBeHealthy||0;var y=this.connReceiver_(this.conn_),D=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){d.conn_&&d.conn_.open(y,D)},Math.floor(0));var L=f.healthyTimeout||0;L>0&&(this.healthyTimeout_=An(function(){d.healthyTimeout_=null,d.isHealthy_||(d.conn_&&d.conn_.bytesReceived>102400?(d.log_("Connection exceeded healthy timeout but has received "+d.conn_.bytesReceived+" bytes.  Marking connection healthy."),d.isHealthy_=!0,d.conn_.markConnectionHealthy()):d.conn_&&d.conn_.bytesSent>10240?d.log_("Connection exceeded healthy timeout but has sent "+d.conn_.bytesSent+" bytes.  Leaving connection alive."):(d.log_("Closing unhealthy connection after timeout."),d.close()))},Math.floor(L)))},c.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},c.prototype.disconnReceiver_=function(d){var f=this;return function(y){d===f.conn_?f.onConnectionLost_(y):d===f.secondaryConn_?(f.log_("Secondary connection lost."),f.onSecondaryConnectionLost_()):f.log_("closing an old connection")}},c.prototype.connReceiver_=function(d){var f=this;return function(y){2!==f.state_&&(d===f.rx_?f.onPrimaryMessageReceived_(y):d===f.secondaryConn_?f.onSecondaryMessageReceived_(y):f.log_("message on old connection"))}},c.prototype.sendRequest=function(d){this.sendData_({t:"d",d})},c.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},c.prototype.onSecondaryControl_=function(d){if("t"in d){var f=d.t;"a"===f?this.upgradeIfSecondaryHealthy_():"r"===f?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===f&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},c.prototype.onSecondaryMessageReceived_=function(d){var f=ln("t",d),y=ln("d",d);if("c"===f)this.onSecondaryControl_(y);else{if("d"!==f)throw new Error("Unknown protocol layer: "+f);this.pendingDataMessages.push(y)}},c.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},c.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},c.prototype.onPrimaryMessageReceived_=function(d){var f=ln("t",d),y=ln("d",d);"c"===f?this.onControl_(y):"d"===f&&this.onDataMessage_(y)},c.prototype.onDataMessage_=function(d){this.onPrimaryResponse_(),this.onMessage_(d)},c.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},c.prototype.onControl_=function(d){var f=ln("t",d);if("d"in d){var y=d.d;if("h"===f)this.onHandshake_(y);else if("n"===f){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var D=0;D<this.pendingDataMessages.length;++D)this.onDataMessage_(this.pendingDataMessages[D]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===f?this.onConnectionShutdown_(y):"r"===f?this.onReset_(y):"e"===f?Rt("Server Error: "+y):"o"===f?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Rt("Unknown control packet command: "+f)}},c.prototype.onHandshake_=function(d){var f=d.ts,y=d.v,D=d.h;this.sessionId=d.s,this.repoInfo_.host=D,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,f),"5"!==y&&Dt("Protocol version mismatch detected"),this.tryStartUpgrade_())},c.prototype.tryStartUpgrade_=function(){var d=this.transportManager_.upgradeTransport();d&&this.startUpgrade_(d)},c.prototype.startUpgrade_=function(d){var f=this;this.secondaryConn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;var y=this.connReceiver_(this.secondaryConn_),D=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(y,D),An(function(){f.secondaryConn_&&(f.log_("Timed out trying to upgrade."),f.secondaryConn_.close())},Math.floor(6e4))},c.prototype.onReset_=function(d){this.log_("Reset packet received.  New host: "+d),this.repoInfo_.host=d,1===this.state_?this.close():(this.closeConnections_(),this.start_())},c.prototype.onConnectionEstablished_=function(d,f){var y=this;this.log_("Realtime connection established."),this.conn_=d,this.state_=1,this.onReady_&&(this.onReady_(f,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):An(function(){y.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},c.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},c.prototype.onSecondaryConnectionLost_=function(){var d=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===d||this.rx_===d)&&this.close()},c.prototype.onConnectionLost_=function(d){this.conn_=null,d||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ee.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},c.prototype.onConnectionShutdown_=function(d){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(d),this.onKill_=null),this.onDisconnect_=null,this.close()},c.prototype.sendData_=function(d){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(d)},c.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},c.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},c}(),ye=function(){function c(){}return c.prototype.put=function(d,f,y,D){},c.prototype.merge=function(d,f,y,D){},c.prototype.refreshAuthToken=function(d){},c.prototype.refreshAppCheckToken=function(d){},c.prototype.onDisconnectPut=function(d,f,y){},c.prototype.onDisconnectMerge=function(d,f,y){},c.prototype.onDisconnectCancel=function(d,f){},c.prototype.reportStats=function(d){},c}(),qe=function(){function c(d){this.allowedEvents_=d,this.listeners_={},(0,J.hu)(Array.isArray(d)&&d.length>0,"Requires a non-empty array")}return c.prototype.trigger=function(d){for(var f=[],y=1;y<arguments.length;y++)f[y-1]=arguments[y];if(Array.isArray(this.listeners_[d]))for(var D=(0,C.ev)([],(0,C.CR)(this.listeners_[d])),L=0;L<D.length;L++)D[L].callback.apply(D[L].context,f)},c.prototype.on=function(d,f,y){this.validateEventType_(d),this.listeners_[d]=this.listeners_[d]||[],this.listeners_[d].push({callback:f,context:y});var D=this.getInitialEvent(d);D&&f.apply(y,D)},c.prototype.off=function(d,f,y){this.validateEventType_(d);for(var D=this.listeners_[d]||[],L=0;L<D.length;L++)if(D[L].callback===f&&(!y||y===D[L].context))return void D.splice(L,1)},c.prototype.validateEventType_=function(d){(0,J.hu)(this.allowedEvents_.find(function(f){return f===d}),"Unknown event: "+d)},c}(),yt=function(c){function d(){var f=c.call(this,["online"])||this;return f.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,J.uI)()&&(window.addEventListener("online",function(){f.online_||(f.online_=!0,f.trigger("online",!0))},!1),window.addEventListener("offline",function(){f.online_&&(f.online_=!1,f.trigger("online",!1))},!1)),f}return(0,C.ZT)(d,c),d.getInstance=function(){return new d},d.prototype.getInitialEvent=function(f){return(0,J.hu)("online"===f,"Unknown event type: "+f),[this.online_]},d.prototype.currentlyOnline=function(){return this.online_},d}(qe),vn=function(){function c(d,f){if(void 0===f){this.pieces_=d.split("/");for(var y=0,D=0;D<this.pieces_.length;D++)this.pieces_[D].length>0&&(this.pieces_[y]=this.pieces_[D],y++);this.pieces_.length=y,this.pieceNum_=0}else this.pieces_=d,this.pieceNum_=f}return c.prototype.toString=function(){for(var d="",f=this.pieceNum_;f<this.pieces_.length;f++)""!==this.pieces_[f]&&(d+="/"+this.pieces_[f]);return d||"/"},c}();function cn(){return new vn("")}function er(c){return c.pieceNum_>=c.pieces_.length?null:c.pieces_[c.pieceNum_]}function zi(c){return c.pieces_.length-c.pieceNum_}function gr(c){var d=c.pieceNum_;return d<c.pieces_.length&&d++,new vn(c.pieces_,d)}function Vi(c){return c.pieceNum_<c.pieces_.length?c.pieces_[c.pieces_.length-1]:null}function Wr(c,d){return void 0===d&&(d=0),c.pieces_.slice(c.pieceNum_+d)}function Ui(c){if(c.pieceNum_>=c.pieces_.length)return null;for(var d=[],f=c.pieceNum_;f<c.pieces_.length-1;f++)d.push(c.pieces_[f]);return new vn(d,0)}function ar(c,d){for(var f=[],y=c.pieceNum_;y<c.pieces_.length;y++)f.push(c.pieces_[y]);if(d instanceof vn)for(y=d.pieceNum_;y<d.pieces_.length;y++)f.push(d.pieces_[y]);else{var D=d.split("/");for(y=0;y<D.length;y++)D[y].length>0&&f.push(D[y])}return new vn(f,0)}function Hn(c){return c.pieceNum_>=c.pieces_.length}function Qr(c,d){var f=er(c),y=er(d);if(null===f)return d;if(f===y)return Qr(gr(c),gr(d));throw new Error("INTERNAL ERROR: innerPath ("+d+") is not within outerPath ("+c+")")}function Or(c,d){for(var f=Wr(c,0),y=Wr(d,0),D=0;D<f.length&&D<y.length;D++){var L=at(f[D],y[D]);if(0!==L)return L}return f.length===y.length?0:f.length<y.length?-1:1}function qi(c,d){if(zi(c)!==zi(d))return!1;for(var f=c.pieceNum_,y=d.pieceNum_;f<=c.pieces_.length;f++,y++)if(c.pieces_[f]!==d.pieces_[y])return!1;return!0}function fi(c,d){var f=c.pieceNum_,y=d.pieceNum_;if(zi(c)>zi(d))return!1;for(;f<c.pieces_.length;){if(c.pieces_[f]!==d.pieces_[y])return!1;++f,++y}return!0}var Zi=function(d,f){this.errorPrefix_=f,this.parts_=Wr(d,0),this.byteLength_=Math.max(1,this.parts_.length);for(var y=0;y<this.parts_.length;y++)this.byteLength_+=(0,J.ug)(this.parts_[y]);ds(this)};function ds(c){if(c.byteLength_>768)throw new Error(c.errorPrefix_+"has a key path longer than 768 bytes ("+c.byteLength_+").");if(c.parts_.length>32)throw new Error(c.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Hr(c))}function Hr(c){return 0===c.parts_.length?"":"in property '"+c.parts_.join(".")+"'"}var no,is,_s=function(c){function d(){var y,D,f=c.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(D="visibilitychange",y="hidden"):void 0!==document.mozHidden?(D="mozvisibilitychange",y="mozHidden"):void 0!==document.msHidden?(D="msvisibilitychange",y="msHidden"):void 0!==document.webkitHidden&&(D="webkitvisibilitychange",y="webkitHidden")),f.visible_=!0,D&&document.addEventListener(D,function(){var L=!document[y];L!==f.visible_&&(f.visible_=L,f.trigger("visible",L))},!1),f}return(0,C.ZT)(d,c),d.getInstance=function(){return new d},d.prototype.getInitialEvent=function(f){return(0,J.hu)("visible"===f,"Unknown event type: "+f),[this.visible_]},d}(qe),$i=1e3,bi=function(c){function d(f,y,D,L,W,ce,ve,Me){var ke=c.call(this)||this;if(ke.repoInfo_=f,ke.applicationId_=y,ke.onDataUpdate_=D,ke.onConnectStatus_=L,ke.onServerInfoUpdate_=W,ke.authTokenProvider_=ce,ke.appCheckTokenProvider_=ve,ke.authOverride_=Me,ke.id=d.nextPersistentConnectionId_++,ke.log_=$t("p:"+ke.id+":"),ke.interruptReasons_={},ke.listens=new Map,ke.outstandingPuts_=[],ke.outstandingGets_=[],ke.outstandingPutCount_=0,ke.outstandingGetCount_=0,ke.onDisconnectRequestQueue_=[],ke.connected_=!1,ke.reconnectDelay_=$i,ke.maxReconnectDelay_=3e5,ke.securityDebugCallback_=null,ke.lastSessionId=null,ke.establishConnectionTimer_=null,ke.visible_=!1,ke.requestCBHash_={},ke.requestNumber_=0,ke.realtime_=null,ke.authToken_=null,ke.appCheckToken_=null,ke.forceTokenRefresh_=!1,ke.invalidAuthTokenCount_=0,ke.invalidAppCheckTokenCount_=0,ke.firstConnection_=!0,ke.lastConnectionAttemptTime_=null,ke.lastConnectionEstablishedTime_=null,Me&&!(0,J.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return _s.getInstance().on("visible",ke.onVisible_,ke),-1===f.host.indexOf("fblocal")&&yt.getInstance().on("online",ke.onOnline_,ke),ke}return(0,C.ZT)(d,c),d.prototype.sendRequest=function(f,y,D){var L=++this.requestNumber_,W={r:L,a:f,b:y};this.log_((0,J.Pz)(W)),(0,J.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(W),D&&(this.requestCBHash_[L]=D)},d.prototype.get=function(f){var y=this;this.initConnection_();var D=new J.BH,L={p:f._path.toString(),q:f._queryObject},W={action:"g",request:L,onComplete:function(ve){var Me=ve.d;"ok"===ve.s?(y.onDataUpdate_(L.p,Me,!1,null),D.resolve(Me)):D.reject(Me)}};this.outstandingGets_.push(W),this.outstandingGetCount_++;var ce=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var ve=y.outstandingGets_[ce];void 0===ve||W!==ve||(delete y.outstandingGets_[ce],y.outstandingGetCount_--,0===y.outstandingGetCount_&&(y.outstandingGets_=[]),y.log_("get "+ce+" timed out on connection"),D.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(ce),D.promise},d.prototype.listen=function(f,y,D,L){this.initConnection_();var W=f._queryIdentifier,ce=f._path.toString();this.log_("Listen called for "+ce+" "+W),this.listens.has(ce)||this.listens.set(ce,new Map),(0,J.hu)(f._queryParams.isDefault()||!f._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,J.hu)(!this.listens.get(ce).has(W),"listen() called twice for same path/queryId.");var ve={onComplete:L,hashFn:y,query:f,tag:D};this.listens.get(ce).set(W,ve),this.connected_&&this.sendListen_(ve)},d.prototype.sendGet_=function(f){var y=this,D=this.outstandingGets_[f];this.sendRequest("g",D.request,function(L){delete y.outstandingGets_[f],y.outstandingGetCount_--,0===y.outstandingGetCount_&&(y.outstandingGets_=[]),D.onComplete&&D.onComplete(L)})},d.prototype.sendListen_=function(f){var y=this,D=f.query,L=D._path.toString(),W=D._queryIdentifier;this.log_("Listen on "+L+" for "+W);var ce={p:L};f.tag&&(ce.q=D._queryObject,ce.t=f.tag),ce.h=f.hashFn(),this.sendRequest("q",ce,function(Me){var ke=Me.d,dt=Me.s;d.warnOnListenWarnings_(ke,D),(y.listens.get(L)&&y.listens.get(L).get(W))===f&&(y.log_("listen response",Me),"ok"!==dt&&y.removeListen_(L,W),f.onComplete&&f.onComplete(dt,ke))})},d.warnOnListenWarnings_=function(f,y){if(f&&"object"==typeof f&&(0,J.r3)(f,"w")){var D=(0,J.DV)(f,"w");if(Array.isArray(D)&&~D.indexOf("no_index")){var L='".indexOn": "'+y._queryParams.getIndex().toString()+'"',W=y._path.toString();Dt("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+L+" at "+W+" to your security rules for better performance.")}}},d.prototype.refreshAuthToken=function(f){this.authToken_=f,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(f)},d.prototype.reduceReconnectDelayIfAdminCredential_=function(f){(f&&40===f.length||(0,J.GJ)(f))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},d.prototype.refreshAppCheckToken=function(f){this.appCheckToken_=f,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},d.prototype.tryAuth=function(){var f=this;if(this.connected_&&this.authToken_){var y=this.authToken_,D=(0,J.w9)(y)?"auth":"gauth",L={cred:y};null===this.authOverride_?L.noauth=!0:"object"==typeof this.authOverride_&&(L.authvar=this.authOverride_),this.sendRequest(D,L,function(W){var ce=W.s,ve=W.d||"error";f.authToken_===y&&("ok"===ce?f.invalidAuthTokenCount_=0:f.onAuthRevoked_(ce,ve))})}},d.prototype.tryAppCheck=function(){var f=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(y){var D=y.s,L=y.d||"error";"ok"===D?f.invalidAppCheckTokenCount_=0:f.onAppCheckRevoked_(D,L)})},d.prototype.unlisten=function(f,y){var D=f._path.toString(),L=f._queryIdentifier;this.log_("Unlisten called for "+D+" "+L),(0,J.hu)(f._queryParams.isDefault()||!f._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(D,L)&&this.connected_&&this.sendUnlisten_(D,L,f._queryObject,y)},d.prototype.sendUnlisten_=function(f,y,D,L){this.log_("Unlisten on "+f+" for "+y);var W={p:f};L&&(W.q=D,W.t=L),this.sendRequest("n",W)},d.prototype.onDisconnectPut=function(f,y,D){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",f,y,D):this.onDisconnectRequestQueue_.push({pathString:f,action:"o",data:y,onComplete:D})},d.prototype.onDisconnectMerge=function(f,y,D){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",f,y,D):this.onDisconnectRequestQueue_.push({pathString:f,action:"om",data:y,onComplete:D})},d.prototype.onDisconnectCancel=function(f,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",f,null,y):this.onDisconnectRequestQueue_.push({pathString:f,action:"oc",data:null,onComplete:y})},d.prototype.sendOnDisconnect_=function(f,y,D,L){var W={p:y,d:D};this.log_("onDisconnect "+f,W),this.sendRequest(f,W,function(ce){L&&setTimeout(function(){L(ce.s,ce.d)},Math.floor(0))})},d.prototype.put=function(f,y,D,L){this.putInternal("p",f,y,D,L)},d.prototype.merge=function(f,y,D,L){this.putInternal("m",f,y,D,L)},d.prototype.putInternal=function(f,y,D,L,W){this.initConnection_();var ce={p:y,d:D};void 0!==W&&(ce.h=W),this.outstandingPuts_.push({action:f,request:ce,onComplete:L}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+y)},d.prototype.sendPut_=function(f){var y=this,D=this.outstandingPuts_[f].action,L=this.outstandingPuts_[f].request,W=this.outstandingPuts_[f].onComplete;this.outstandingPuts_[f].queued=this.connected_,this.sendRequest(D,L,function(ce){y.log_(D+" response",ce),delete y.outstandingPuts_[f],y.outstandingPutCount_--,0===y.outstandingPutCount_&&(y.outstandingPuts_=[]),W&&W(ce.s,ce.d)})},d.prototype.reportStats=function(f){var y=this;if(this.connected_){var D={c:f};this.log_("reportStats",D),this.sendRequest("s",D,function(L){"ok"!==L.s&&y.log_("reportStats","Error sending stats: "+L.d)})}},d.prototype.onDataMessage_=function(f){if("r"in f){this.log_("from server: "+(0,J.Pz)(f));var y=f.r,D=this.requestCBHash_[y];D&&(delete this.requestCBHash_[y],D(f.b))}else{if("error"in f)throw"A server-side error has occurred: "+f.error;"a"in f&&this.onDataPush_(f.a,f.b)}},d.prototype.onDataPush_=function(f,y){this.log_("handleServerMessage",f,y),"d"===f?this.onDataUpdate_(y.p,y.d,!1,y.t):"m"===f?this.onDataUpdate_(y.p,y.d,!0,y.t):"c"===f?this.onListenRevoked_(y.p,y.q):"ac"===f?this.onAuthRevoked_(y.s,y.d):"apc"===f?this.onAppCheckRevoked_(y.s,y.d):"sd"===f?this.onSecurityDebugPacket_(y):Rt("Unrecognized action received from server: "+(0,J.Pz)(f)+"\nAre you using the latest client?")},d.prototype.onReady_=function(f,y){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(f),this.lastSessionId=y,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},d.prototype.scheduleConnect_=function(f){var y=this;(0,J.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){y.establishConnectionTimer_=null,y.establishConnection_()},Math.floor(f))},d.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},d.prototype.onVisible_=function(f){f&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$i,this.realtime_||this.scheduleConnect_(0)),this.visible_=f},d.prototype.onOnline_=function(f){f?(this.log_("Browser went online."),this.reconnectDelay_=$i,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},d.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=$i),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var y=(new Date).getTime()-this.lastConnectionAttemptTime_,D=Math.max(0,this.reconnectDelay_-y);D=Math.random()*D,this.log_("Trying to reconnect in "+D+"ms"),this.scheduleConnect_(D),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},d.prototype.establishConnection_=function(){return(0,C.mG)(this,void 0,void 0,function(){var f,y,D,L,W,ce,ve,Me,dt,It,Bt,on,Qn,Yn=this;return(0,C.Jh)(this,function(Er){switch(Er.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,f=this.onDataMessage_.bind(this),y=this.onReady_.bind(this),D=this.onRealtimeDisconnect_.bind(this),L=this.id+":"+d.nextConnectionId_++,W=this.lastSessionId,ce=!1,ve=null,this.realtime_={close:Me=function(){ve?ve.close():(ce=!0,D())},sendRequest:function(so){(0,J.hu)(ve,"sendRequest call when we're not connected not allowed."),ve.sendRequest(so)}},dt=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,Er.label=1;case 1:return Er.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(dt),this.appCheckTokenProvider_.getToken(dt)])];case 2:return It=C.CR.apply(void 0,[Er.sent(),2]),Bt=It[0],on=It[1],ce?ct("getToken() completed but was canceled"):(ct("getToken() completed. Creating connection."),this.authToken_=Bt&&Bt.accessToken,this.appCheckToken_=on&&on.token,ve=new _e(L,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,f,y,D,function(so){Dt(so+" ("+Yn.repoInfo_.toString()+")"),Yn.interrupt("server_kill")},W)),[3,4];case 3:return Qn=Er.sent(),this.log_("Failed to get token: "+Qn),ce||(this.repoInfo_.nodeAdmin&&Dt(Qn),Me()),[3,4];case 4:return[2]}})})},d.prototype.interrupt=function(f){ct("Interrupting connection for reason: "+f),this.interruptReasons_[f]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},d.prototype.resume=function(f){ct("Resuming connection for reason: "+f),delete this.interruptReasons_[f],(0,J.xb)(this.interruptReasons_)&&(this.reconnectDelay_=$i,this.realtime_||this.scheduleConnect_(0))},d.prototype.handleTimestamp_=function(f){var y=f-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:y})},d.prototype.cancelSentTransactions_=function(){for(var f=0;f<this.outstandingPuts_.length;f++){var y=this.outstandingPuts_[f];y&&"h"in y.request&&y.queued&&(y.onComplete&&y.onComplete("disconnect"),delete this.outstandingPuts_[f],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},d.prototype.onListenRevoked_=function(f,y){var D;D=y?y.map(function(W){return Tn(W)}).join("$"):"default";var L=this.removeListen_(f,D);L&&L.onComplete&&L.onComplete("permission_denied")},d.prototype.removeListen_=function(f,y){var L,D=new vn(f).toString();if(this.listens.has(D)){var W=this.listens.get(D);L=W.get(y),W.delete(y),0===W.size&&this.listens.delete(D)}else L=void 0;return L},d.prototype.onAuthRevoked_=function(f,y){ct("Auth token revoked: "+f+"/"+y),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===f||"permission_denied"===f)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},d.prototype.onAppCheckRevoked_=function(f,y){ct("App check token revoked: "+f+"/"+y),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===f||"permission_denied"===f)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},d.prototype.onSecurityDebugPacket_=function(f){this.securityDebugCallback_?this.securityDebugCallback_(f):"msg"in f&&console.log("FIREBASE: "+f.msg.replace("\n","\nFIREBASE: "))},d.prototype.restoreState_=function(){var f,y,D,L;this.tryAuth(),this.tryAppCheck();try{for(var W=(0,C.XA)(this.listens.values()),ce=W.next();!ce.done;ce=W.next()){var ve=ce.value;try{for(var Me=(D=void 0,(0,C.XA)(ve.values())),ke=Me.next();!ke.done;ke=Me.next())this.sendListen_(ke.value)}catch(on){D={error:on}}finally{try{ke&&!ke.done&&(L=Me.return)&&L.call(Me)}finally{if(D)throw D.error}}}}catch(on){f={error:on}}finally{try{ce&&!ce.done&&(y=W.return)&&y.call(W)}finally{if(f)throw f.error}}for(var It=0;It<this.outstandingPuts_.length;It++)this.outstandingPuts_[It]&&this.sendPut_(It);for(;this.onDisconnectRequestQueue_.length;){var Bt=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(Bt.action,Bt.pathString,Bt.data,Bt.onComplete)}for(It=0;It<this.outstandingGets_.length;It++)this.outstandingGets_[It]&&this.sendGet_(It)},d.prototype.sendConnectStats_=function(){var f={},y="js";(0,J.Yr)()&&(y=this.repoInfo_.nodeAdmin?"admin_node":"node"),f["sdk."+y+"."+he.replace(/\./g,"-")]=1,(0,J.uI)()?f["framework.cordova"]=1:(0,J.b$)()&&(f["framework.reactnative"]=1),this.reportStats(f)},d.prototype.shouldReconnect_=function(){var f=yt.getInstance().currentlyOnline();return(0,J.xb)(this.interruptReasons_)&&f},d.nextPersistentConnectionId_=0,d.nextConnectionId_=0,d}(ye),or=function(){function c(d,f){this.name=d,this.node=f}return c.Wrap=function(d,f){return new c(d,f)},c}(),to=function(){function c(){}return c.prototype.getCompare=function(){return this.compare.bind(this)},c.prototype.indexedValueChanged=function(d,f){var y=new or(nt,d),D=new or(nt,f);return 0!==this.compare(y,D)},c.prototype.minPost=function(){return or.MIN},c}(),co=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return(0,C.ZT)(d,c),Object.defineProperty(d,"__EMPTY_NODE",{get:function(){return no},set:function(f){no=f},enumerable:!1,configurable:!0}),d.prototype.compare=function(f,y){return at(f.name,y.name)},d.prototype.isDefinedOn=function(f){throw(0,J.g5)("KeyIndex.isDefinedOn not expected to be called.")},d.prototype.indexedValueChanged=function(f,y){return!1},d.prototype.minPost=function(){return or.MIN},d.prototype.maxPost=function(){return new or(vt,no)},d.prototype.makePost=function(f,y){return(0,J.hu)("string"==typeof f,"KeyIndex indexValue must always be a string."),new or(f,no)},d.prototype.toString=function(){return".key"},d}(to),Fi=new co,ho=function(){function c(d,f,y,D,L){void 0===L&&(L=null),this.isReverse_=D,this.resultGenerator_=L,this.nodeStack_=[];for(var W=1;!d.isEmpty();)if(d=d,W=f?y(d.key,f):1,D&&(W*=-1),W<0)d=this.isReverse_?d.left:d.right;else{if(0===W){this.nodeStack_.push(d);break}this.nodeStack_.push(d),d=this.isReverse_?d.right:d.left}}return c.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var f,d=this.nodeStack_.pop();if(f=this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value},this.isReverse_)for(d=d.left;!d.isEmpty();)this.nodeStack_.push(d),d=d.right;else for(d=d.right;!d.isEmpty();)this.nodeStack_.push(d),d=d.left;return f},c.prototype.hasNext=function(){return this.nodeStack_.length>0},c.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var d=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value}},c}(),pi=function(){function c(d,f,y,D,L){this.key=d,this.value=f,this.color=null!=y?y:c.RED,this.left=null!=D?D:Ci.EMPTY_NODE,this.right=null!=L?L:Ci.EMPTY_NODE}return c.prototype.copy=function(d,f,y,D,L){return new c(null!=d?d:this.key,null!=f?f:this.value,null!=y?y:this.color,null!=D?D:this.left,null!=L?L:this.right)},c.prototype.count=function(){return this.left.count()+1+this.right.count()},c.prototype.isEmpty=function(){return!1},c.prototype.inorderTraversal=function(d){return this.left.inorderTraversal(d)||!!d(this.key,this.value)||this.right.inorderTraversal(d)},c.prototype.reverseTraversal=function(d){return this.right.reverseTraversal(d)||d(this.key,this.value)||this.left.reverseTraversal(d)},c.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},c.prototype.minKey=function(){return this.min_().key},c.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},c.prototype.insert=function(d,f,y){var D=this,L=y(d,D.key);return(D=L<0?D.copy(null,null,null,D.left.insert(d,f,y),null):0===L?D.copy(null,f,null,null,null):D.copy(null,null,null,null,D.right.insert(d,f,y))).fixUp_()},c.prototype.removeMin_=function(){if(this.left.isEmpty())return Ci.EMPTY_NODE;var d=this;return!d.left.isRed_()&&!d.left.left.isRed_()&&(d=d.moveRedLeft_()),(d=d.copy(null,null,null,d.left.removeMin_(),null)).fixUp_()},c.prototype.remove=function(d,f){var y,D;if(f(d,(y=this).key)<0)!y.left.isEmpty()&&!y.left.isRed_()&&!y.left.left.isRed_()&&(y=y.moveRedLeft_()),y=y.copy(null,null,null,y.left.remove(d,f),null);else{if(y.left.isRed_()&&(y=y.rotateRight_()),!y.right.isEmpty()&&!y.right.isRed_()&&!y.right.left.isRed_()&&(y=y.moveRedRight_()),0===f(d,y.key)){if(y.right.isEmpty())return Ci.EMPTY_NODE;D=y.right.min_(),y=y.copy(D.key,D.value,null,null,y.right.removeMin_())}y=y.copy(null,null,null,null,y.right.remove(d,f))}return y.fixUp_()},c.prototype.isRed_=function(){return this.color},c.prototype.fixUp_=function(){var d=this;return d.right.isRed_()&&!d.left.isRed_()&&(d=d.rotateLeft_()),d.left.isRed_()&&d.left.left.isRed_()&&(d=d.rotateRight_()),d.left.isRed_()&&d.right.isRed_()&&(d=d.colorFlip_()),d},c.prototype.moveRedLeft_=function(){var d=this.colorFlip_();return d.right.left.isRed_()&&(d=(d=(d=d.copy(null,null,null,null,d.right.rotateRight_())).rotateLeft_()).colorFlip_()),d},c.prototype.moveRedRight_=function(){var d=this.colorFlip_();return d.left.left.isRed_()&&(d=(d=d.rotateRight_()).colorFlip_()),d},c.prototype.rotateLeft_=function(){var d=this.copy(null,null,c.RED,null,this.right.left);return this.right.copy(null,null,this.color,d,null)},c.prototype.rotateRight_=function(){var d=this.copy(null,null,c.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,d)},c.prototype.colorFlip_=function(){var d=this.left.copy(null,null,!this.left.color,null,null),f=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,d,f)},c.prototype.checkMaxDepth_=function(){var d=this.check_();return Math.pow(2,d)<=this.count()+1},c.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var d=this.left.check_();if(d!==this.right.check_())throw new Error("Black depths differ");return d+(this.isRed_()?0:1)},c.RED=!0,c.BLACK=!1,c}(),ko=function(){function c(){}return c.prototype.copy=function(d,f,y,D,L){return this},c.prototype.insert=function(d,f,y){return new pi(d,f,null)},c.prototype.remove=function(d,f){return this},c.prototype.count=function(){return 0},c.prototype.isEmpty=function(){return!0},c.prototype.inorderTraversal=function(d){return!1},c.prototype.reverseTraversal=function(d){return!1},c.prototype.minKey=function(){return null},c.prototype.maxKey=function(){return null},c.prototype.check_=function(){return 0},c.prototype.isRed_=function(){return!1},c}(),Ci=function(){function c(d,f){void 0===f&&(f=c.EMPTY_NODE),this.comparator_=d,this.root_=f}return c.prototype.insert=function(d,f){return new c(this.comparator_,this.root_.insert(d,f,this.comparator_).copy(null,null,pi.BLACK,null,null))},c.prototype.remove=function(d){return new c(this.comparator_,this.root_.remove(d,this.comparator_).copy(null,null,pi.BLACK,null,null))},c.prototype.get=function(d){for(var f,y=this.root_;!y.isEmpty();){if(0===(f=this.comparator_(d,y.key)))return y.value;f<0?y=y.left:f>0&&(y=y.right)}return null},c.prototype.getPredecessorKey=function(d){for(var f,y=this.root_,D=null;!y.isEmpty();){if(0===(f=this.comparator_(d,y.key))){if(y.left.isEmpty())return D?D.key:null;for(y=y.left;!y.right.isEmpty();)y=y.right;return y.key}f<0?y=y.left:f>0&&(D=y,y=y.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},c.prototype.isEmpty=function(){return this.root_.isEmpty()},c.prototype.count=function(){return this.root_.count()},c.prototype.minKey=function(){return this.root_.minKey()},c.prototype.maxKey=function(){return this.root_.maxKey()},c.prototype.inorderTraversal=function(d){return this.root_.inorderTraversal(d)},c.prototype.reverseTraversal=function(d){return this.root_.reverseTraversal(d)},c.prototype.getIterator=function(d){return new ho(this.root_,null,this.comparator_,!1,d)},c.prototype.getIteratorFrom=function(d,f){return new ho(this.root_,d,this.comparator_,!1,f)},c.prototype.getReverseIteratorFrom=function(d,f){return new ho(this.root_,d,this.comparator_,!0,f)},c.prototype.getReverseIterator=function(d){return new ho(this.root_,null,this.comparator_,!0,d)},c.EMPTY_NODE=new ko,c}();function Eo(c,d){return at(c.name,d.name)}function kr(c,d){return at(c,d)}var ro,fo,Lo,q,$,Do=function(c){return"number"==typeof c?"number:"+Nt(c):"string:"+c},Rr=function(c){if(c.isLeafNode()){var d=c.val();(0,J.hu)("string"==typeof d||"number"==typeof d||"object"==typeof d&&(0,J.r3)(d,".sv"),"Priority must be a string or number.")}else(0,J.hu)(c===is||c.isEmpty(),"priority of unexpected type.");(0,J.hu)(c===is||c.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ti=function(){function c(d,f){void 0===f&&(f=c.__childrenNodeConstructor.EMPTY_NODE),this.value_=d,this.priorityNode_=f,this.lazyHash_=null,(0,J.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Rr(this.priorityNode_)}return Object.defineProperty(c,"__childrenNodeConstructor",{get:function(){return ro},set:function(d){ro=d},enumerable:!1,configurable:!0}),c.prototype.isLeafNode=function(){return!0},c.prototype.getPriority=function(){return this.priorityNode_},c.prototype.updatePriority=function(d){return new c(this.value_,d)},c.prototype.getImmediateChild=function(d){return".priority"===d?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE},c.prototype.getChild=function(d){return Hn(d)?this:".priority"===er(d)?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE},c.prototype.hasChild=function(){return!1},c.prototype.getPredecessorChildName=function(d,f){return null},c.prototype.updateImmediateChild=function(d,f){return".priority"===d?this.updatePriority(f):f.isEmpty()&&".priority"!==d?this:c.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(d,f).updatePriority(this.priorityNode_)},c.prototype.updateChild=function(d,f){var y=er(d);return null===y?f:f.isEmpty()&&".priority"!==y?this:((0,J.hu)(".priority"!==y||1===zi(d),".priority must be the last token in a path"),this.updateImmediateChild(y,c.__childrenNodeConstructor.EMPTY_NODE.updateChild(gr(d),f)))},c.prototype.isEmpty=function(){return!1},c.prototype.numChildren=function(){return 0},c.prototype.forEachChild=function(d,f){return!1},c.prototype.val=function(d){return d&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},c.prototype.hash=function(){if(null===this.lazyHash_){var d="";this.priorityNode_.isEmpty()||(d+="priority:"+Do(this.priorityNode_.val())+":");var f=typeof this.value_;d+=f+":",d+="number"===f?Nt(this.value_):this.value_,this.lazyHash_=ne(d)}return this.lazyHash_},c.prototype.getValue=function(){return this.value_},c.prototype.compareTo=function(d){return d===c.__childrenNodeConstructor.EMPTY_NODE?1:d instanceof c.__childrenNodeConstructor?-1:((0,J.hu)(d.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(d))},c.prototype.compareToLeafNode_=function(d){var f=typeof d.value_,y=typeof this.value_,D=c.VALUE_TYPE_ORDER.indexOf(f),L=c.VALUE_TYPE_ORDER.indexOf(y);return(0,J.hu)(D>=0,"Unknown leaf type: "+f),(0,J.hu)(L>=0,"Unknown leaf type: "+y),D===L?"object"===y?0:this.value_<d.value_?-1:this.value_===d.value_?0:1:L-D},c.prototype.withIndex=function(){return this},c.prototype.isIndexed=function(){return!0},c.prototype.equals=function(d){return d===this||!!d.isLeafNode()&&(this.value_===d.value_&&this.priorityNode_.equals(d.priorityNode_))},c.VALUE_TYPE_ORDER=["object","boolean","number","string"],c}(),cr=new(function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return(0,C.ZT)(d,c),d.prototype.compare=function(f,y){var D=f.node.getPriority(),L=y.node.getPriority(),W=D.compareTo(L);return 0===W?at(f.name,y.name):W},d.prototype.isDefinedOn=function(f){return!f.getPriority().isEmpty()},d.prototype.indexedValueChanged=function(f,y){return!f.getPriority().equals(y.getPriority())},d.prototype.minPost=function(){return or.MIN},d.prototype.maxPost=function(){return new or(vt,new ti("[PRIORITY-POST]",Lo))},d.prototype.makePost=function(f,y){var D=fo(f);return new or(y,new ti("[PRIORITY-POST]",D))},d.prototype.toString=function(){return".priority"},d}(to)),po=Math.log(2),os=function(){function c(d){this.count=parseInt(Math.log(d+1)/po,10),this.current_=this.count-1;var D=parseInt(Array(this.count+1).join("1"),2);this.bits_=d+1&D}return c.prototype.nextBitIsOne=function(){var d=!(this.bits_&1<<this.current_);return this.current_--,d},c}(),Y=function(c,d,f,y){c.sort(d);var D=function(ve,Me){var dt,It,ke=Me-ve;if(0===ke)return null;if(1===ke)return dt=c[ve],It=f?f(dt):dt,new pi(It,dt.node,pi.BLACK,null,null);var Bt=parseInt(ke/2,10)+ve,on=D(ve,Bt),Qn=D(Bt+1,Me);return dt=c[Bt],It=f?f(dt):dt,new pi(It,dt.node,pi.BLACK,on,Qn)},ce=function(ve){for(var Me=null,ke=null,dt=c.length,It=function(Er,so){var Na=dt-Er,Hl=dt;dt-=Er;var Nd=D(Na+1,Hl),ou=c[Na],su=f?f(ou):ou;Bt(new pi(su,ou.node,so,null,Nd))},Bt=function(Er){Me?(Me.left=Er,Me=Er):(ke=Er,Me=Er)},on=0;on<ve.count;++on){var Qn=ve.nextBitIsOne(),Yn=Math.pow(2,ve.count-(on+1));Qn?It(Yn,pi.BLACK):(It(Yn,pi.BLACK),It(Yn,pi.RED))}return ke}(new os(c.length));return new Ci(y||d,ce)},pe={},x=function(){function c(d,f){this.indexes_=d,this.indexSet_=f}return Object.defineProperty(c,"Default",{get:function(){return(0,J.hu)(pe&&cr,"ChildrenNode.ts has not been loaded"),q=q||new c({".priority":pe},{".priority":cr})},enumerable:!1,configurable:!0}),c.prototype.get=function(d){var f=(0,J.DV)(this.indexes_,d);if(!f)throw new Error("No index defined for "+d);return f instanceof Ci?f:null},c.prototype.hasIndex=function(d){return(0,J.r3)(this.indexSet_,d.toString())},c.prototype.addIndex=function(d,f){(0,J.hu)(d!==Fi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var y=[],D=!1,L=f.getIterator(or.Wrap),W=L.getNext();W;)D=D||d.isDefinedOn(W.node),y.push(W),W=L.getNext();var ce;ce=D?Y(y,d.getCompare()):pe;var ve=d.toString(),Me=(0,C.pi)({},this.indexSet_);Me[ve]=d;var ke=(0,C.pi)({},this.indexes_);return ke[ve]=ce,new c(ke,Me)},c.prototype.addToIndexes=function(d,f){var y=this;return new c((0,J.UI)(this.indexes_,function(L,W){var ce=(0,J.DV)(y.indexSet_,W);if((0,J.hu)(ce,"Missing index implementation for "+W),L===pe){if(ce.isDefinedOn(d.node)){for(var ve=[],Me=f.getIterator(or.Wrap),ke=Me.getNext();ke;)ke.name!==d.name&&ve.push(ke),ke=Me.getNext();return ve.push(d),Y(ve,ce.getCompare())}return pe}var dt=f.get(d.name),It=L;return dt&&(It=It.remove(new or(d.name,dt))),It.insert(d,d.node)}),this.indexSet_)},c.prototype.removeFromIndexes=function(d,f){return new c((0,J.UI)(this.indexes_,function(D){if(D===pe)return D;var L=f.get(d.name);return L?D.remove(new or(d.name,L)):D}),this.indexSet_)},c}(),k=function(){function c(d,f,y){this.children_=d,this.priorityNode_=f,this.indexMap_=y,this.lazyHash_=null,this.priorityNode_&&Rr(this.priorityNode_),this.children_.isEmpty()&&(0,J.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(c,"EMPTY_NODE",{get:function(){return $||($=new c(new Ci(kr),null,x.Default))},enumerable:!1,configurable:!0}),c.prototype.isLeafNode=function(){return!1},c.prototype.getPriority=function(){return this.priorityNode_||$},c.prototype.updatePriority=function(d){return this.children_.isEmpty()?this:new c(this.children_,d,this.indexMap_)},c.prototype.getImmediateChild=function(d){if(".priority"===d)return this.getPriority();var f=this.children_.get(d);return null===f?$:f},c.prototype.getChild=function(d){var f=er(d);return null===f?this:this.getImmediateChild(f).getChild(gr(d))},c.prototype.hasChild=function(d){return null!==this.children_.get(d)},c.prototype.updateImmediateChild=function(d,f){if((0,J.hu)(f,"We should always be passing snapshot nodes"),".priority"===d)return this.updatePriority(f);var y=new or(d,f),D=void 0,L=void 0;f.isEmpty()?(D=this.children_.remove(d),L=this.indexMap_.removeFromIndexes(y,this.children_)):(D=this.children_.insert(d,f),L=this.indexMap_.addToIndexes(y,this.children_));var W=D.isEmpty()?$:this.priorityNode_;return new c(D,W,L)},c.prototype.updateChild=function(d,f){var y=er(d);if(null===y)return f;(0,J.hu)(".priority"!==er(d)||1===zi(d),".priority must be the last token in a path");var D=this.getImmediateChild(y).updateChild(gr(d),f);return this.updateImmediateChild(y,D)},c.prototype.isEmpty=function(){return this.children_.isEmpty()},c.prototype.numChildren=function(){return this.children_.count()},c.prototype.val=function(d){if(this.isEmpty())return null;var f={},y=0,D=0,L=!0;if(this.forEachChild(cr,function(ve,Me){f[ve]=Me.val(d),y++,L&&c.INTEGER_REGEXP_.test(ve)?D=Math.max(D,Number(ve)):L=!1}),!d&&L&&D<2*y){var W=[];for(var ce in f)W[ce]=f[ce];return W}return d&&!this.getPriority().isEmpty()&&(f[".priority"]=this.getPriority().val()),f},c.prototype.hash=function(){if(null===this.lazyHash_){var d="";this.getPriority().isEmpty()||(d+="priority:"+Do(this.getPriority().val())+":"),this.forEachChild(cr,function(f,y){var D=y.hash();""!==D&&(d+=":"+f+":"+D)}),this.lazyHash_=""===d?"":ne(d)}return this.lazyHash_},c.prototype.getPredecessorChildName=function(d,f,y){var D=this.resolveIndex_(y);if(D){var L=D.getPredecessorKey(new or(d,f));return L?L.name:null}return this.children_.getPredecessorKey(d)},c.prototype.getFirstChildName=function(d){var f=this.resolveIndex_(d);if(f){var y=f.minKey();return y&&y.name}return this.children_.minKey()},c.prototype.getFirstChild=function(d){var f=this.getFirstChildName(d);return f?new or(f,this.children_.get(f)):null},c.prototype.getLastChildName=function(d){var f=this.resolveIndex_(d);if(f){var y=f.maxKey();return y&&y.name}return this.children_.maxKey()},c.prototype.getLastChild=function(d){var f=this.getLastChildName(d);return f?new or(f,this.children_.get(f)):null},c.prototype.forEachChild=function(d,f){var y=this.resolveIndex_(d);return y?y.inorderTraversal(function(D){return f(D.name,D.node)}):this.children_.inorderTraversal(f)},c.prototype.getIterator=function(d){return this.getIteratorFrom(d.minPost(),d)},c.prototype.getIteratorFrom=function(d,f){var y=this.resolveIndex_(f);if(y)return y.getIteratorFrom(d,function(W){return W});for(var D=this.children_.getIteratorFrom(d.name,or.Wrap),L=D.peek();null!=L&&f.compare(L,d)<0;)D.getNext(),L=D.peek();return D},c.prototype.getReverseIterator=function(d){return this.getReverseIteratorFrom(d.maxPost(),d)},c.prototype.getReverseIteratorFrom=function(d,f){var y=this.resolveIndex_(f);if(y)return y.getReverseIteratorFrom(d,function(W){return W});for(var D=this.children_.getReverseIteratorFrom(d.name,or.Wrap),L=D.peek();null!=L&&f.compare(L,d)>0;)D.getNext(),L=D.peek();return D},c.prototype.compareTo=function(d){return this.isEmpty()?d.isEmpty()?0:-1:d.isLeafNode()||d.isEmpty()?1:d===De?-1:0},c.prototype.withIndex=function(d){if(d===Fi||this.indexMap_.hasIndex(d))return this;var f=this.indexMap_.addIndex(d,this.children_);return new c(this.children_,this.priorityNode_,f)},c.prototype.isIndexed=function(d){return d===Fi||this.indexMap_.hasIndex(d)},c.prototype.equals=function(d){if(d===this)return!0;if(d.isLeafNode())return!1;var f=d;if(this.getPriority().equals(f.getPriority())){if(this.children_.count()===f.children_.count()){for(var y=this.getIterator(cr),D=f.getIterator(cr),L=y.getNext(),W=D.getNext();L&&W;){if(L.name!==W.name||!L.node.equals(W.node))return!1;L=y.getNext(),W=D.getNext()}return null===L&&null===W}return!1}return!1},c.prototype.resolveIndex_=function(d){return d===Fi?null:this.indexMap_.get(d.toString())},c.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,c}(),De=new(function(c){function d(){return c.call(this,new Ci(kr),k.EMPTY_NODE,x.Default)||this}return(0,C.ZT)(d,c),d.prototype.compareTo=function(f){return f===this?0:1},d.prototype.equals=function(f){return f===this},d.prototype.getPriority=function(){return this},d.prototype.getImmediateChild=function(f){return k.EMPTY_NODE},d.prototype.isEmpty=function(){return!1},d}(k));function rt(c,d){if(void 0===d&&(d=null),null===c)return k.EMPTY_NODE;if("object"==typeof c&&".priority"in c&&(d=c[".priority"]),(0,J.hu)(null===d||"string"==typeof d||"number"==typeof d||"object"==typeof d&&".sv"in d,"Invalid priority type found: "+typeof d),"object"==typeof c&&".value"in c&&null!==c[".value"]&&(c=c[".value"]),"object"!=typeof c||".sv"in c)return new ti(c,rt(d));if(c instanceof Array){var ve=k.EMPTY_NODE;return jt(c,function(Me,ke){if((0,J.r3)(c,Me)&&"."!==Me.substring(0,1)){var dt=rt(ke);(dt.isLeafNode()||!dt.isEmpty())&&(ve=ve.updateImmediateChild(Me,dt))}}),ve.updatePriority(rt(d))}var y=[],D=!1;if(jt(c,function(Me,ke){if("."!==Me.substring(0,1)){var dt=rt(ke);dt.isEmpty()||(D=D||!dt.getPriority().isEmpty(),y.push(new or(Me,dt)))}}),0===y.length)return k.EMPTY_NODE;var W=Y(y,Eo,function(Me){return Me.name},kr);if(D){var ce=Y(y,cr.getCompare());return new k(W,rt(d),new x({".priority":ce},{".priority":cr}))}return new k(W,rt(d),x.Default)}Object.defineProperties(or,{MIN:{value:new or(nt,k.EMPTY_NODE)},MAX:{value:new or(vt,De)}}),co.__EMPTY_NODE=k.EMPTY_NODE,ti.__childrenNodeConstructor=k,function(c){is=c}(De),function(c){Lo=c}(De),function(c){fo=c}(rt);var H=function(c){function d(f){var y=c.call(this)||this;return y.indexPath_=f,(0,J.hu)(!Hn(f)&&".priority"!==er(f),"Can't create PathIndex with empty path or .priority key"),y}return(0,C.ZT)(d,c),d.prototype.extractChild=function(f){return f.getChild(this.indexPath_)},d.prototype.isDefinedOn=function(f){return!f.getChild(this.indexPath_).isEmpty()},d.prototype.compare=function(f,y){var D=this.extractChild(f.node),L=this.extractChild(y.node),W=D.compareTo(L);return 0===W?at(f.name,y.name):W},d.prototype.makePost=function(f,y){var D=rt(f),L=k.EMPTY_NODE.updateChild(this.indexPath_,D);return new or(y,L)},d.prototype.maxPost=function(){var f=k.EMPTY_NODE.updateChild(this.indexPath_,De);return new or(vt,f)},d.prototype.toString=function(){return Wr(this.indexPath_,0).join("/")},d}(to),V=new(function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return(0,C.ZT)(d,c),d.prototype.compare=function(f,y){var D=f.node.compareTo(y.node);return 0===D?at(f.name,y.name):D},d.prototype.isDefinedOn=function(f){return!0},d.prototype.indexedValueChanged=function(f,y){return!f.equals(y)},d.prototype.minPost=function(){return or.MIN},d.prototype.maxPost=function(){return or.MAX},d.prototype.makePost=function(f,y){var D=rt(f);return new or(y,D)},d.prototype.toString=function(){return".value"},d}(to)),ue="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",dr=function(){var c=0,d=[];return function(f){var y=f===c;c=f;var D,L=new Array(8);for(D=7;D>=0;D--)L[D]=ue.charAt(f%64),f=Math.floor(f/64);(0,J.hu)(0===f,"Cannot push at time == 0");var W=L.join("");if(y){for(D=11;D>=0&&63===d[D];D--)d[D]=0;d[D]++}else for(D=0;D<12;D++)d[D]=Math.floor(64*Math.random());for(D=0;D<12;D++)W+=ue.charAt(d[D]);return(0,J.hu)(20===W.length,"nextPushId: Length should be 20."),W}}(),Gr=function(c){if(c===""+zn)return"-";var d=Bn(c);if(null!=d)return""+(d+1);for(var f=new Array(c.length),y=0;y<f.length;y++)f[y]=c.charAt(y);if(f.length<786)return f.push("-"),f.join("");for(var D=f.length-1;D>=0&&"z"===f[D];)D--;if(-1===D)return vt;var W=ue.charAt(ue.indexOf(f[D])+1);return f[D]=W,f.slice(0,D+1).join("")},fr=function(c){if(c===""+sr)return nt;var d=Bn(c);if(null!=d)return""+(d-1);for(var f=new Array(c.length),y=0;y<f.length;y++)f[y]=c.charAt(y);return"-"===f[f.length-1]?1===f.length?""+zn:(delete f[f.length-1],f.join("")):(f[f.length-1]=ue.charAt(ue.indexOf(f[f.length-1])-1),f.join("")+"z".repeat(786-f.length))};function zr(c){return{type:"value",snapshotNode:c}}function oi(c,d){return{type:"child_added",snapshotNode:d,childName:c}}function Dn(c,d){return{type:"child_removed",snapshotNode:d,childName:c}}function Ji(c,d,f){return{type:"child_changed",snapshotNode:d,childName:c,oldSnap:f}}var go=function(){function c(d){this.index_=d}return c.prototype.updateChild=function(d,f,y,D,L,W){(0,J.hu)(d.isIndexed(this.index_),"A node must be indexed if only a child is updated");var ce=d.getImmediateChild(f);return ce.getChild(D).equals(y.getChild(D))&&ce.isEmpty()===y.isEmpty()||(null!=W&&(y.isEmpty()?d.hasChild(f)?W.trackChildChange(Dn(f,ce)):(0,J.hu)(d.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ce.isEmpty()?W.trackChildChange(oi(f,y)):W.trackChildChange(Ji(f,y,ce))),d.isLeafNode()&&y.isEmpty())?d:d.updateImmediateChild(f,y).withIndex(this.index_)},c.prototype.updateFullNode=function(d,f,y){return null!=y&&(d.isLeafNode()||d.forEachChild(cr,function(D,L){f.hasChild(D)||y.trackChildChange(Dn(D,L))}),f.isLeafNode()||f.forEachChild(cr,function(D,L){if(d.hasChild(D)){var W=d.getImmediateChild(D);W.equals(L)||y.trackChildChange(Ji(D,L,W))}else y.trackChildChange(oi(D,L))})),f.withIndex(this.index_)},c.prototype.updatePriority=function(d,f){return d.isEmpty()?k.EMPTY_NODE:d.updatePriority(f)},c.prototype.filtersNodes=function(){return!1},c.prototype.getIndexedFilter=function(){return this},c.prototype.getIndex=function(){return this.index_},c}(),cu=function(){function c(d){this.indexedFilter_=new go(d.getIndex()),this.index_=d.getIndex(),this.startPost_=c.getStartPost_(d),this.endPost_=c.getEndPost_(d)}return c.prototype.getStartPost=function(){return this.startPost_},c.prototype.getEndPost=function(){return this.endPost_},c.prototype.matches=function(d){return this.index_.compare(this.getStartPost(),d)<=0&&this.index_.compare(d,this.getEndPost())<=0},c.prototype.updateChild=function(d,f,y,D,L,W){return this.matches(new or(f,y))||(y=k.EMPTY_NODE),this.indexedFilter_.updateChild(d,f,y,D,L,W)},c.prototype.updateFullNode=function(d,f,y){f.isLeafNode()&&(f=k.EMPTY_NODE);var D=f.withIndex(this.index_);D=D.updatePriority(k.EMPTY_NODE);var L=this;return f.forEachChild(cr,function(W,ce){L.matches(new or(W,ce))||(D=D.updateImmediateChild(W,k.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(d,D,y)},c.prototype.updatePriority=function(d,f){return d},c.prototype.filtersNodes=function(){return!0},c.prototype.getIndexedFilter=function(){return this.indexedFilter_},c.prototype.getIndex=function(){return this.index_},c.getStartPost_=function(d){if(d.hasStart()){var f=d.getIndexStartName();return d.getIndex().makePost(d.getIndexStartValue(),f)}return d.getIndex().minPost()},c.getEndPost_=function(d){if(d.hasEnd()){var f=d.getIndexEndName();return d.getIndex().makePost(d.getIndexEndValue(),f)}return d.getIndex().maxPost()},c}(),$u=function(){function c(d){this.rangedFilter_=new cu(d),this.index_=d.getIndex(),this.limit_=d.getLimit(),this.reverse_=!d.isViewFromLeft()}return c.prototype.updateChild=function(d,f,y,D,L,W){return this.rangedFilter_.matches(new or(f,y))||(y=k.EMPTY_NODE),d.getImmediateChild(f).equals(y)?d:d.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(d,f,y,D,L,W):this.fullLimitUpdateChild_(d,f,y,L,W)},c.prototype.updateFullNode=function(d,f,y){var D;if(f.isLeafNode()||f.isEmpty())D=k.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<f.numChildren()&&f.isIndexed(this.index_)){D=k.EMPTY_NODE.withIndex(this.index_);var L=void 0;L=this.reverse_?f.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):f.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var W=0;L.hasNext()&&W<this.limit_;){var ce=L.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),ce)<=0:this.index_.compare(ce,this.rangedFilter_.getEndPost())<=0))break;D=D.updateImmediateChild(ce.name,ce.node),W++}}else{D=(D=f.withIndex(this.index_)).updatePriority(k.EMPTY_NODE);var Me=void 0,ke=void 0,dt=void 0;if(L=void 0,this.reverse_){L=D.getReverseIterator(this.index_),Me=this.rangedFilter_.getEndPost(),ke=this.rangedFilter_.getStartPost();var It=this.index_.getCompare();dt=function(Yn,Er){return It(Er,Yn)}}else L=D.getIterator(this.index_),Me=this.rangedFilter_.getStartPost(),ke=this.rangedFilter_.getEndPost(),dt=this.index_.getCompare();W=0;for(var Bt=!1;L.hasNext();)ce=L.getNext(),!Bt&&dt(Me,ce)<=0&&(Bt=!0),Bt&&W<this.limit_&&dt(ce,ke)<=0?W++:D=D.updateImmediateChild(ce.name,k.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(d,D,y)},c.prototype.updatePriority=function(d,f){return d},c.prototype.filtersNodes=function(){return!0},c.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},c.prototype.getIndex=function(){return this.index_},c.prototype.fullLimitUpdateChild_=function(d,f,y,D,L){var W;if(this.reverse_){var ce=this.index_.getCompare();W=function(so,Na){return ce(Na,so)}}else W=this.index_.getCompare();var ve=d;(0,J.hu)(ve.numChildren()===this.limit_,"");var Me=new or(f,y),ke=this.reverse_?ve.getFirstChild(this.index_):ve.getLastChild(this.index_),dt=this.rangedFilter_.matches(Me);if(ve.hasChild(f)){for(var It=ve.getImmediateChild(f),Bt=D.getChildAfterChild(this.index_,ke,this.reverse_);null!=Bt&&(Bt.name===f||ve.hasChild(Bt.name));)Bt=D.getChildAfterChild(this.index_,Bt,this.reverse_);var on=null==Bt?1:W(Bt,Me);if(dt&&!y.isEmpty()&&on>=0)return null!=L&&L.trackChildChange(Ji(f,y,It)),ve.updateImmediateChild(f,y);null!=L&&L.trackChildChange(Dn(f,It));var Yn=ve.updateImmediateChild(f,k.EMPTY_NODE);return null!=Bt&&this.rangedFilter_.matches(Bt)?(null!=L&&L.trackChildChange(oi(Bt.name,Bt.node)),Yn.updateImmediateChild(Bt.name,Bt.node)):Yn}return y.isEmpty()?d:dt&&W(ke,Me)>=0?(null!=L&&(L.trackChildChange(Dn(ke.name,ke.node)),L.trackChildChange(oi(f,y))),ve.updateImmediateChild(f,y).updateImmediateChild(ke.name,k.EMPTY_NODE)):d},c}(),du=function(){function c(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cr}return c.prototype.hasStart=function(){return this.startSet_},c.prototype.hasStartAfter=function(){return this.startAfterSet_},c.prototype.hasEndBefore=function(){return this.endBeforeSet_},c.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},c.prototype.getIndexStartValue=function(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},c.prototype.getIndexStartName=function(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:nt},c.prototype.hasEnd=function(){return this.endSet_},c.prototype.getIndexEndValue=function(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},c.prototype.getIndexEndName=function(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vt},c.prototype.hasLimit=function(){return this.limitSet_},c.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},c.prototype.getLimit=function(){return(0,J.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},c.prototype.getIndex=function(){return this.index_},c.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},c.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===cr},c.prototype.copy=function(){var d=new c;return d.limitSet_=this.limitSet_,d.limit_=this.limit_,d.startSet_=this.startSet_,d.indexStartValue_=this.indexStartValue_,d.startNameSet_=this.startNameSet_,d.indexStartName_=this.indexStartName_,d.endSet_=this.endSet_,d.indexEndValue_=this.indexEndValue_,d.endNameSet_=this.endNameSet_,d.indexEndName_=this.indexEndName_,d.index_=this.index_,d.viewFrom_=this.viewFrom_,d},c}();function vs(c,d,f){var y=c.copy();return y.startSet_=!0,void 0===d&&(d=null),y.indexStartValue_=d,null!=f?(y.startNameSet_=!0,y.indexStartName_=f):(y.startNameSet_=!1,y.indexStartName_=""),y}function Os(c,d,f){var y=c.copy();return y.endSet_=!0,void 0===d&&(d=null),y.indexEndValue_=d,void 0!==f?(y.endNameSet_=!0,y.indexEndName_=f):(y.endNameSet_=!1,y.indexEndName_=""),y}function Zo(c,d){var f=c.copy();return f.index_=d,f}function oe(c){var f,d={};return c.isDefault()||(c.index_===cr?f="$priority":c.index_===V?f="$value":c.index_===Fi?f="$key":((0,J.hu)(c.index_ instanceof H,"Unrecognized index type!"),f=c.index_.toString()),d.orderBy=(0,J.Pz)(f),c.startSet_&&(d.startAt=(0,J.Pz)(c.indexStartValue_),c.startNameSet_&&(d.startAt+=","+(0,J.Pz)(c.indexStartName_))),c.endSet_&&(d.endAt=(0,J.Pz)(c.indexEndValue_),c.endNameSet_&&(d.endAt+=","+(0,J.Pz)(c.indexEndName_))),c.limitSet_&&(c.isViewFromLeft()?d.limitToFirst=c.limit_:d.limitToLast=c.limit_)),d}function A(c){var d={};if(c.startSet_&&(d.sp=c.indexStartValue_,c.startNameSet_&&(d.sn=c.indexStartName_)),c.endSet_&&(d.ep=c.indexEndValue_,c.endNameSet_&&(d.en=c.indexEndName_)),c.limitSet_){d.l=c.limit_;var f=c.viewFrom_;""===f&&(f=c.isViewFromLeft()?"l":"r"),d.vf=f}return c.index_!==cr&&(d.i=c.index_.toString()),d}var M=function(c){function d(f,y,D,L){var W=c.call(this)||this;return W.repoInfo_=f,W.onDataUpdate_=y,W.authTokenProvider_=D,W.appCheckTokenProvider_=L,W.log_=$t("p:rest:"),W.listens_={},W}return(0,C.ZT)(d,c),d.prototype.reportStats=function(f){throw new Error("Method not implemented.")},d.getListenId_=function(f,y){return void 0!==y?"tag$"+y:((0,J.hu)(f._queryParams.isDefault(),"should have a tag if it's not a default query."),f._path.toString())},d.prototype.listen=function(f,y,D,L){var W=this,ce=f._path.toString();this.log_("Listen called for "+ce+" "+f._queryIdentifier);var ve=d.getListenId_(f,D),Me={};this.listens_[ve]=Me;var ke=oe(f._queryParams);this.restRequest_(ce+".json",ke,function(dt,It){var Bt=It;404===dt&&(Bt=null,dt=null),null===dt&&W.onDataUpdate_(ce,Bt,!1,D),(0,J.DV)(W.listens_,ve)===Me&&L(dt?401===dt?"permission_denied":"rest_error:"+dt:"ok",null)})},d.prototype.unlisten=function(f,y){var D=d.getListenId_(f,y);delete this.listens_[D]},d.prototype.get=function(f){var y=this,D=oe(f._queryParams),L=f._path.toString(),W=new J.BH;return this.restRequest_(L+".json",D,function(ce,ve){var Me=ve;404===ce&&(Me=null,ce=null),null===ce?(y.onDataUpdate_(L,Me,!1,null),W.resolve(Me)):W.reject(new Error(Me))}),W.promise},d.prototype.refreshAuthToken=function(f){},d.prototype.restRequest_=function(f,y,D){var L=this;return void 0===y&&(y={}),y.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(W){var ce=(0,C.CR)(W,2),ve=ce[0],Me=ce[1];ve&&ve.accessToken&&(y.auth=ve.accessToken),Me&&Me.token&&(y.ac=Me.token);var ke=(L.repoInfo_.secure?"https://":"http://")+L.repoInfo_.host+f+"?ns="+L.repoInfo_.namespace+(0,J.xO)(y);L.log_("Sending REST request for "+ke);var dt=new XMLHttpRequest;dt.onreadystatechange=function(){if(D&&4===dt.readyState){L.log_("REST Response for "+ke+" received. status:",dt.status,"response:",dt.responseText);var It=null;if(dt.status>=200&&dt.status<300){try{It=(0,J.cI)(dt.responseText)}catch(Bt){Dt("Failed to parse JSON response for "+ke+": "+dt.responseText)}D(null,It)}else 401!==dt.status&&404!==dt.status&&Dt("Got unsuccessful REST response for "+ke+" Status: "+dt.status),D(dt.status);D=null}},dt.open("GET",ke,!0),dt.send()})},d}(ye),B=function(){function c(){this.rootNode_=k.EMPTY_NODE}return c.prototype.getNode=function(d){return this.rootNode_.getChild(d)},c.prototype.updateSnapshot=function(d,f){this.rootNode_=this.rootNode_.updateChild(d,f)},c}();function ae(){return{value:null,children:new Map}}function Ce(c,d,f){if(Hn(d))c.value=f,c.children.clear();else if(null!==c.value)c.value=c.value.updateChild(d,f);else{var y=er(d);c.children.has(y)||c.children.set(y,ae()),Ce(c.children.get(y),d=gr(d),f)}}function Fe(c,d){if(Hn(d))return c.value=null,c.children.clear(),!0;if(null!==c.value){if(c.value.isLeafNode())return!1;var f=c.value;return c.value=null,f.forEachChild(cr,function(L,W){Ce(c,new vn(L),W)}),Fe(c,d)}if(c.children.size>0){var y=er(d);return d=gr(d),c.children.has(y)&&Fe(c.children.get(y),d)&&c.children.delete(y),0===c.children.size}return!0}function Le(c,d,f){null!==c.value?f(d,c.value):function(c,d){c.children.forEach(function(f,y){d(y,f)})}(c,function(y,D){Le(D,new vn(d.toString()+"/"+y),f)})}var mt=function(){function c(d){this.collection_=d,this.last_=null}return c.prototype.get=function(){var d=this.collection_.get(),f=(0,C.pi)({},d);return this.last_&&jt(this.last_,function(y,D){f[y]=f[y]-D}),this.last_=d,f},c}(),Sr=function(){function c(d,f){this.server_=f,this.statsToReport_={},this.statsListener_=new mt(d);var y=1e4+2e4*Math.random();An(this.reportStats_.bind(this),Math.floor(y))}return c.prototype.reportStats_=function(){var d=this,f=this.statsListener_.get(),y={},D=!1;jt(f,function(L,W){W>0&&(0,J.r3)(d.statsToReport_,L)&&(y[L]=W,D=!0)}),D&&this.server_.reportStats(y),An(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},c}(),Nn=(()=>(function(c){c[c.OVERWRITE=0]="OVERWRITE",c[c.MERGE=1]="MERGE",c[c.ACK_USER_WRITE=2]="ACK_USER_WRITE",c[c.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Nn||(Nn={})),Nn))();function Ur(c){return{fromUser:!1,fromServer:!0,queryId:c,tagged:!0}}var Xi=function(){function c(d,f,y){this.path=d,this.affectedTree=f,this.revert=y,this.type=Nn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return c.prototype.operationForChild=function(d){if(Hn(this.path)){if(null!=this.affectedTree.value)return(0,J.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var f=this.affectedTree.subtree(new vn(d));return new c(cn(),f,this.revert)}return(0,J.hu)(er(this.path)===d,"operationForChild called for unrelated child."),new c(gr(this.path),this.affectedTree,this.revert)},c}(),ai=function(){function c(d,f){this.source=d,this.path=f,this.type=Nn.LISTEN_COMPLETE}return c.prototype.operationForChild=function(d){return Hn(this.path)?new c(this.source,cn()):new c(this.source,gr(this.path))},c}(),Oo=function(){function c(d,f,y){this.source=d,this.path=f,this.snap=y,this.type=Nn.OVERWRITE}return c.prototype.operationForChild=function(d){return Hn(this.path)?new c(this.source,cn(),this.snap.getImmediateChild(d)):new c(this.source,gr(this.path),this.snap)},c}(),To=function(){function c(d,f,y){this.source=d,this.path=f,this.children=y,this.type=Nn.MERGE}return c.prototype.operationForChild=function(d){if(Hn(this.path)){var f=this.children.subtree(new vn(d));return f.isEmpty()?null:f.value?new Oo(this.source,cn(),f.value):new c(this.source,cn(),f)}return(0,J.hu)(er(this.path)===d,"Can't get a merge for a child not on the path of the operation"),new c(this.source,gr(this.path),this.children)},c.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},c}(),ui=function(){function c(d,f,y){this.node_=d,this.fullyInitialized_=f,this.filtered_=y}return c.prototype.isFullyInitialized=function(){return this.fullyInitialized_},c.prototype.isFiltered=function(){return this.filtered_},c.prototype.isCompleteForPath=function(d){if(Hn(d))return this.isFullyInitialized()&&!this.filtered_;var f=er(d);return this.isCompleteForChild(f)},c.prototype.isCompleteForChild=function(d){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(d)},c.prototype.getNode=function(){return this.node_},c}(),Ro=function(d){this.query_=d,this.index_=this.query_._queryParams.getIndex()};function Ni(c,d,f,y,D,L){var W=y.filter(function(ce){return ce.type===f});W.sort(function(ce,ve){return function(c,d,f){if(null==d.childName||null==f.childName)throw(0,J.g5)("Should only compare child_ events.");var y=new or(d.childName,d.snapshotNode),D=new or(f.childName,f.snapshotNode);return c.index_.compare(y,D)}(c,ce,ve)}),W.forEach(function(ce){var ve=function(c,d,f){return"value"===d.type||"child_removed"===d.type||(d.prevName=f.getPredecessorChildName(d.childName,d.snapshotNode,c.index_)),d}(c,ce,L);D.forEach(function(Me){Me.respondsTo(ce.type)&&d.push(Me.createEvent(ve,c.query_))})})}function li(c,d){return{eventCache:c,serverCache:d}}function Wi(c,d,f,y){return li(new ui(d,f,y),c.serverCache)}function gi(c,d,f,y){return li(c.eventCache,new ui(d,f,y))}function bn(c){return c.eventCache.isFullyInitialized()?c.eventCache.getNode():null}function Rn(c){return c.serverCache.isFullyInitialized()?c.serverCache.getNode():null}var Wn,Cr=function(){function c(d,f){void 0===f&&(Wn||(Wn=new Ci(tn)),f=Wn),this.value=d,this.children=f}return c.fromObject=function(d){var f=new c(null);return jt(d,function(y,D){f=f.set(new vn(y),D)}),f},c.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},c.prototype.findRootMostMatchingPathAndValue=function(d,f){if(null!=this.value&&f(this.value))return{path:cn(),value:this.value};if(Hn(d))return null;var y=er(d),D=this.children.get(y);if(null!==D){var L=D.findRootMostMatchingPathAndValue(gr(d),f);return null!=L?{path:ar(new vn(y),L.path),value:L.value}:null}return null},c.prototype.findRootMostValueAndPath=function(d){return this.findRootMostMatchingPathAndValue(d,function(){return!0})},c.prototype.subtree=function(d){if(Hn(d))return this;var f=er(d),y=this.children.get(f);return null!==y?y.subtree(gr(d)):new c(null)},c.prototype.set=function(d,f){if(Hn(d))return new c(f,this.children);var y=er(d),L=(this.children.get(y)||new c(null)).set(gr(d),f),W=this.children.insert(y,L);return new c(this.value,W)},c.prototype.remove=function(d){if(Hn(d))return this.children.isEmpty()?new c(null):new c(null,this.children);var f=er(d),y=this.children.get(f);if(y){var D=y.remove(gr(d)),L=void 0;return L=D.isEmpty()?this.children.remove(f):this.children.insert(f,D),null===this.value&&L.isEmpty()?new c(null):new c(this.value,L)}return this},c.prototype.get=function(d){if(Hn(d))return this.value;var f=er(d),y=this.children.get(f);return y?y.get(gr(d)):null},c.prototype.setTree=function(d,f){if(Hn(d))return f;var W,y=er(d),L=(this.children.get(y)||new c(null)).setTree(gr(d),f);return W=L.isEmpty()?this.children.remove(y):this.children.insert(y,L),new c(this.value,W)},c.prototype.fold=function(d){return this.fold_(cn(),d)},c.prototype.fold_=function(d,f){var y={};return this.children.inorderTraversal(function(D,L){y[D]=L.fold_(ar(d,D),f)}),f(d,this.value,y)},c.prototype.findOnPath=function(d,f){return this.findOnPath_(d,cn(),f)},c.prototype.findOnPath_=function(d,f,y){var D=!!this.value&&y(f,this.value);if(D)return D;if(Hn(d))return null;var L=er(d),W=this.children.get(L);return W?W.findOnPath_(gr(d),ar(f,L),y):null},c.prototype.foreachOnPath=function(d,f){return this.foreachOnPath_(d,cn(),f)},c.prototype.foreachOnPath_=function(d,f,y){if(Hn(d))return this;this.value&&y(f,this.value);var D=er(d),L=this.children.get(D);return L?L.foreachOnPath_(gr(d),ar(f,D),y):new c(null)},c.prototype.foreach=function(d){this.foreach_(cn(),d)},c.prototype.foreach_=function(d,f){this.children.inorderTraversal(function(y,D){D.foreach_(ar(d,y),f)}),this.value&&f(d,this.value)},c.prototype.foreachChild=function(d){this.children.inorderTraversal(function(f,y){y.value&&d(f,y.value)})},c}(),Ai=function(){function c(d){this.writeTree_=d}return c.empty=function(){return new c(new Cr(null))},c}();function wi(c,d,f){if(Hn(d))return new Ai(new Cr(f));var y=c.writeTree_.findRootMostValueAndPath(d);if(null!=y){var D=y.path,L=y.value,W=Qr(D,d);return L=L.updateChild(W,f),new Ai(c.writeTree_.set(D,L))}var ce=new Cr(f),ve=c.writeTree_.setTree(d,ce);return new Ai(ve)}function io(c,d,f){var y=c;return jt(f,function(D,L){y=wi(y,ar(d,D),L)}),y}function Jr(c,d){if(Hn(d))return Ai.empty();var f=c.writeTree_.setTree(d,new Cr(null));return new Ai(f)}function na(c,d){return null!=Ii(c,d)}function Ii(c,d){var f=c.writeTree_.findRootMostValueAndPath(d);return null!=f?c.writeTree_.get(f.path).getChild(Qr(f.path,d)):null}function Bs(c){var d=[],f=c.writeTree_.value;return null!=f?f.isLeafNode()||f.forEachChild(cr,function(y,D){d.push(new or(y,D))}):c.writeTree_.children.inorderTraversal(function(y,D){null!=D.value&&d.push(new or(y,D.value))}),d}function Yi(c,d){if(Hn(d))return c;var f=Ii(c,d);return new Ai(null!=f?new Cr(f):c.writeTree_.subtree(d))}function ni(c){return c.writeTree_.isEmpty()}function xs(c,d){return ba(cn(),c.writeTree_,d)}function ba(c,d,f){if(null!=d.value)return f.updateChild(c,d.value);var y=null;return d.children.inorderTraversal(function(D,L){".priority"===D?((0,J.hu)(null!==L.value,"Priority writes must always be leaf nodes"),y=L.value):f=ba(ar(c,D),L,f)}),!f.getChild(c).isEmpty()&&null!==y&&(f=f.updateChild(ar(c,".priority"),y)),f}function Bi(c,d){return Ga(d,c)}function Wu(c,d){if(c.snap)return fi(c.path,d);for(var f in c.children)if(c.children.hasOwnProperty(f)&&fi(ar(c.path,f),d))return!0;return!1}function Yu(c){return c.visible}function hu(c,d,f){for(var y=Ai.empty(),D=0;D<c.length;++D){var L=c[D];if(d(L)){var W=L.path,ce=void 0;if(L.snap)fi(f,W)?y=wi(y,ce=Qr(f,W),L.snap):fi(W,f)&&(ce=Qr(W,f),y=wi(y,cn(),L.snap.getChild(ce)));else{if(!L.children)throw(0,J.g5)("WriteRecord should have .snap or .children");if(fi(f,W))y=io(y,ce=Qr(f,W),L.children);else if(fi(W,f))if(Hn(ce=Qr(W,f)))y=io(y,cn(),L.children);else{var ve=(0,J.DV)(L.children,er(ce));if(ve){var Me=ve.getChild(gr(ce));y=wi(y,cn(),Me)}}}}}return y}function js(c,d,f,y,D){if(y||D){var ve=Yi(c.visibleWrites,d);return!D&&ni(ve)?f:D||null!=f||na(ve,cn())?xs(hu(c.allWrites,function(It){return(It.visible||D)&&(!y||!~y.indexOf(It.writeId))&&(fi(It.path,d)||fi(d,It.path))},d),f||k.EMPTY_NODE):null}var L=Ii(c.visibleWrites,d);if(null!=L)return L;var W=Yi(c.visibleWrites,d);return ni(W)?f:null!=f||na(W,cn())?xs(W,f||k.EMPTY_NODE):null}function _t(c,d,f,y){return js(c.writeTree,c.treePath,d,f,y)}function Vt(c,d){return function(c,d,f){var y=k.EMPTY_NODE,D=Ii(c.visibleWrites,d);if(D)return D.isLeafNode()||D.forEachChild(cr,function(ce,ve){y=y.updateImmediateChild(ce,ve)}),y;if(f){var L=Yi(c.visibleWrites,d);return f.forEachChild(cr,function(ce,ve){var Me=xs(Yi(L,new vn(ce)),ve);y=y.updateImmediateChild(ce,Me)}),Bs(L).forEach(function(ce){y=y.updateImmediateChild(ce.name,ce.node)}),y}return Bs(Yi(c.visibleWrites,d)).forEach(function(ce){y=y.updateImmediateChild(ce.name,ce.node)}),y}(c.writeTree,c.treePath,d)}function ss(c,d,f,y){return function(c,d,f,y,D){(0,J.hu)(y||D,"Either existingEventSnap or existingServerSnap must exist");var L=ar(d,f);if(na(c.visibleWrites,L))return null;var W=Yi(c.visibleWrites,L);return ni(W)?D.getChild(f):xs(W,D.getChild(f))}(c.writeTree,c.treePath,d,f,y)}function Sa(c,d){return function(c,d){return Ii(c.visibleWrites,d)}(c.writeTree,ar(c.treePath,d))}function Ri(c,d,f){return function(c,d,f,y){var D=ar(d,f),L=Ii(c.visibleWrites,D);return null!=L?L:y.isCompleteForChild(f)?xs(Yi(c.visibleWrites,D),y.getNode().getImmediateChild(f)):null}(c.writeTree,c.treePath,d,f)}function Cs(c,d){return Ga(ar(c.treePath,d),c.writeTree)}function Ga(c,d){return{treePath:c,writeTree:d}}var kn=function(){function c(){this.changeMap=new Map}return c.prototype.trackChildChange=function(d){var f=d.type,y=d.childName;(0,J.hu)("child_added"===f||"child_changed"===f||"child_removed"===f,"Only child changes supported for tracking"),(0,J.hu)(".priority"!==y,"Only non-priority child changes can be tracked.");var D=this.changeMap.get(y);if(D){var L=D.type;if("child_added"===f&&"child_removed"===L)this.changeMap.set(y,Ji(y,d.snapshotNode,D.snapshotNode));else if("child_removed"===f&&"child_added"===L)this.changeMap.delete(y);else if("child_removed"===f&&"child_changed"===L)this.changeMap.set(y,Dn(y,D.oldSnap));else if("child_changed"===f&&"child_added"===L)this.changeMap.set(y,oi(y,d.snapshotNode));else{if("child_changed"!==f||"child_changed"!==L)throw(0,J.g5)("Illegal combination of changes: "+d+" occurred after "+D);this.changeMap.set(y,Ji(y,d.snapshotNode,D.oldSnap))}}else this.changeMap.set(y,d)},c.prototype.getChanges=function(){return Array.from(this.changeMap.values())},c}(),un=new(function(){function c(){}return c.prototype.getCompleteChild=function(d){return null},c.prototype.getChildAfterChild=function(d,f,y){return null},c}()),rc=function(){function c(d,f,y){void 0===y&&(y=null),this.writes_=d,this.viewCache_=f,this.optCompleteServerCache_=y}return c.prototype.getCompleteChild=function(d){var f=this.viewCache_.eventCache;if(f.isCompleteForChild(d))return f.getNode().getImmediateChild(d);var y=null!=this.optCompleteServerCache_?new ui(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ri(this.writes_,d,y)},c.prototype.getChildAfterChild=function(d,f,y){var D=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Rn(this.viewCache_),L=function(c,d,f,y,D,L){return function(c,d,f,y,D,L,W){var ce,ve=Yi(c.visibleWrites,d),Me=Ii(ve,cn());if(null!=Me)ce=Me;else{if(null==f)return[];ce=xs(ve,f)}if((ce=ce.withIndex(W)).isEmpty()||ce.isLeafNode())return[];for(var ke=[],dt=W.getCompare(),It=L?ce.getReverseIteratorFrom(y,W):ce.getIteratorFrom(y,W),Bt=It.getNext();Bt&&ke.length<D;)0!==dt(Bt,y)&&ke.push(Bt),Bt=It.getNext();return ke}(c.writeTree,c.treePath,d,f,y,D,L)}(this.writes_,D,f,1,y,d);return 0===L.length?null:L[0]},c}();function U(c,d,f,y,D,L){var W=d.eventCache;if(null!=Sa(y,f))return d;var ce=void 0,ve=void 0;if(Hn(f))if((0,J.hu)(d.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),d.serverCache.isFiltered()){var Me=Rn(d),dt=Vt(y,Me instanceof k?Me:k.EMPTY_NODE);ce=c.filter.updateFullNode(d.eventCache.getNode(),dt,L)}else{var It=_t(y,Rn(d));ce=c.filter.updateFullNode(d.eventCache.getNode(),It,L)}else{var Bt=er(f);if(".priority"===Bt){(0,J.hu)(1===zi(f),"Can't have a priority with additional path components");var on=W.getNode(),Qn=ss(y,f,on,ve=d.serverCache.getNode());ce=null!=Qn?c.filter.updatePriority(on,Qn):W.getNode()}else{var Yn=gr(f),Er=void 0;if(W.isCompleteForChild(Bt)){ve=d.serverCache.getNode();var so=ss(y,f,W.getNode(),ve);Er=null!=so?W.getNode().getImmediateChild(Bt).updateChild(Yn,so):W.getNode().getImmediateChild(Bt)}else Er=Ri(y,Bt,d.serverCache);ce=null!=Er?c.filter.updateChild(W.getNode(),Bt,Er,Yn,D,L):W.getNode()}}return Wi(d,ce,W.isFullyInitialized()||Hn(f),c.filter.filtersNodes())}function R(c,d,f,y,D,L,W,ce){var Me,ve=d.serverCache,ke=W?c.filter:c.filter.getIndexedFilter();if(Hn(f))Me=ke.updateFullNode(ve.getNode(),y,null);else if(ke.filtersNodes()&&!ve.isFiltered()){var dt=ve.getNode().updateChild(f,y);Me=ke.updateFullNode(ve.getNode(),dt,null)}else{var It=er(f);if(!ve.isCompleteForPath(f)&&zi(f)>1)return d;var Bt=gr(f),Qn=ve.getNode().getImmediateChild(It).updateChild(Bt,y);Me=".priority"===It?ke.updatePriority(ve.getNode(),Qn):ke.updateChild(ve.getNode(),It,Qn,Bt,un,null)}var Yn=gi(d,Me,ve.isFullyInitialized()||Hn(f),ke.filtersNodes());return U(c,Yn,f,D,new rc(D,Yn,L),ce)}function O(c,d,f,y,D,L,W){var ve,Me,ce=d.eventCache,ke=new rc(D,d,L);if(Hn(f))Me=c.filter.updateFullNode(d.eventCache.getNode(),y,W),ve=Wi(d,Me,!0,c.filter.filtersNodes());else{var dt=er(f);if(".priority"===dt)Me=c.filter.updatePriority(d.eventCache.getNode(),y),ve=Wi(d,Me,ce.isFullyInitialized(),ce.isFiltered());else{var It=gr(f),Bt=ce.getNode().getImmediateChild(dt),on=void 0;if(Hn(It))on=y;else{var Qn=ke.getCompleteChild(dt);on=null!=Qn?".priority"===Vi(It)&&Qn.getChild(Ui(It)).isEmpty()?Qn:Qn.updateChild(It,y):k.EMPTY_NODE}ve=Bt.equals(on)?d:Wi(d,c.filter.updateChild(ce.getNode(),dt,on,It,ke,W),ce.isFullyInitialized(),c.filter.filtersNodes())}}return ve}function Z(c,d){return c.eventCache.isCompleteForChild(d)}function de(c,d,f){return f.foreach(function(y,D){d=d.updateChild(y,D)}),d}function Ie(c,d,f,y,D,L,W,ce){if(d.serverCache.getNode().isEmpty()&&!d.serverCache.isFullyInitialized())return d;var Me,ve=d;Me=Hn(f)?y:new Cr(null).setTree(f,y);var ke=d.serverCache.getNode();return Me.children.inorderTraversal(function(dt,It){if(ke.hasChild(dt)){var on=de(0,d.serverCache.getNode().getImmediateChild(dt),It);ve=R(c,ve,new vn(dt),on,D,L,W,ce)}}),Me.children.inorderTraversal(function(dt,It){var Bt=!d.serverCache.isCompleteForChild(dt)&&void 0===It.value;if(!ke.hasChild(dt)&&!Bt){var Qn=de(0,d.serverCache.getNode().getImmediateChild(dt),It);ve=R(c,ve,new vn(dt),Qn,D,L,W,ce)}}),ve}var ir=function(){function c(d,f){this.query_=d,this.eventRegistrations_=[];var y=this.query_._queryParams,D=new go(y.getIndex()),L=function(c){return c.loadsAllData()?new go(c.getIndex()):c.hasLimit()?new $u(c):new cu(c)}(y);this.processor_=function(c){return{filter:c}}(L);var W=f.serverCache,ce=f.eventCache,ve=D.updateFullNode(k.EMPTY_NODE,W.getNode(),null),Me=L.updateFullNode(k.EMPTY_NODE,ce.getNode(),null),ke=new ui(ve,W.isFullyInitialized(),D.filtersNodes()),dt=new ui(Me,ce.isFullyInitialized(),L.filtersNodes());this.viewCache_=li(dt,ke),this.eventGenerator_=new Ro(this.query_)}return Object.defineProperty(c.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),c}();function Un(c,d){var f=Rn(c.viewCache_);return f&&(c.query._queryParams.loadsAllData()||!Hn(d)&&!f.getImmediateChild(er(d)).isEmpty())?f.getChild(d):null}function mo(c){return 0===c.eventRegistrations_.length}function _o(c,d,f){var y=[];if(f){(0,J.hu)(null==d,"A cancel should cancel all event registrations.");var D=c.query._path;c.eventRegistrations_.forEach(function(ve){var Me=ve.createCancelEvent(f,D);Me&&y.push(Me)})}if(d){for(var L=[],W=0;W<c.eventRegistrations_.length;++W){var ce=c.eventRegistrations_[W];if(ce.matches(d)){if(d.hasAnyCallback()){L=L.concat(c.eventRegistrations_.slice(W+1));break}}else L.push(ce)}c.eventRegistrations_=L}else c.eventRegistrations_=[];return y}function Hs(c,d,f,y){d.type===Nn.MERGE&&null!==d.source.queryId&&((0,J.hu)(Rn(c.viewCache_),"We should always have a full cache before handling merges"),(0,J.hu)(bn(c.viewCache_),"Missing event cache, even though we have a server cache"));var D=c.viewCache_,L=function(c,d,f,y,D){var W,ce,L=new kn;if(f.type===Nn.OVERWRITE){var ve=f;ve.source.fromUser?W=O(c,d,ve.path,ve.snap,y,D,L):((0,J.hu)(ve.source.fromServer,"Unknown source."),ce=ve.source.tagged||d.serverCache.isFiltered()&&!Hn(ve.path),W=R(c,d,ve.path,ve.snap,y,D,ce,L))}else if(f.type===Nn.MERGE){var Me=f;Me.source.fromUser?W=function(c,d,f,y,D,L,W){var ce=d;return y.foreach(function(ve,Me){var ke=ar(f,ve);Z(d,er(ke))&&(ce=O(c,ce,ke,Me,D,L,W))}),y.foreach(function(ve,Me){var ke=ar(f,ve);Z(d,er(ke))||(ce=O(c,ce,ke,Me,D,L,W))}),ce}(c,d,Me.path,Me.children,y,D,L):((0,J.hu)(Me.source.fromServer,"Unknown source."),ce=Me.source.tagged||d.serverCache.isFiltered(),W=Ie(c,d,Me.path,Me.children,y,D,ce,L))}else if(f.type===Nn.ACK_USER_WRITE){var ke=f;W=ke.revert?function(c,d,f,y,D,L){var W;if(null!=Sa(y,f))return d;var ce=new rc(y,d,D),ve=d.eventCache.getNode(),Me=void 0;if(Hn(f)||".priority"===er(f)){var ke=void 0;if(d.serverCache.isFullyInitialized())ke=_t(y,Rn(d));else{var dt=d.serverCache.getNode();(0,J.hu)(dt instanceof k,"serverChildren would be complete if leaf node"),ke=Vt(y,dt)}Me=c.filter.updateFullNode(ve,ke=ke,L)}else{var It=er(f),Bt=Ri(y,It,d.serverCache);null==Bt&&d.serverCache.isCompleteForChild(It)&&(Bt=ve.getImmediateChild(It)),(Me=null!=Bt?c.filter.updateChild(ve,It,Bt,gr(f),ce,L):d.eventCache.getNode().hasChild(It)?c.filter.updateChild(ve,It,k.EMPTY_NODE,gr(f),ce,L):ve).isEmpty()&&d.serverCache.isFullyInitialized()&&(W=_t(y,Rn(d))).isLeafNode()&&(Me=c.filter.updateFullNode(Me,W,L))}return W=d.serverCache.isFullyInitialized()||null!=Sa(y,cn()),Wi(d,Me,W,c.filter.filtersNodes())}(c,d,ke.path,y,D,L):function(c,d,f,y,D,L,W){if(null!=Sa(D,f))return d;var ce=d.serverCache.isFiltered(),ve=d.serverCache;if(null!=y.value){if(Hn(f)&&ve.isFullyInitialized()||ve.isCompleteForPath(f))return R(c,d,f,ve.getNode().getChild(f),D,L,ce,W);if(Hn(f)){var Me=new Cr(null);return ve.getNode().forEachChild(Fi,function(dt,It){Me=Me.set(new vn(dt),It)}),Ie(c,d,f,Me,D,L,ce,W)}return d}var ke=new Cr(null);return y.foreach(function(dt,It){var Bt=ar(f,dt);ve.isCompleteForPath(Bt)&&(ke=ke.set(dt,ve.getNode().getChild(Bt)))}),Ie(c,d,f,ke,D,L,ce,W)}(c,d,ke.path,ke.affectedTree,y,D,L)}else{if(f.type!==Nn.LISTEN_COMPLETE)throw(0,J.g5)("Unknown operation type: "+f.type);W=function(c,d,f,y,D){var L=d.serverCache;return U(c,gi(d,L.getNode(),L.isFullyInitialized()||Hn(f),L.isFiltered()),f,y,un,D)}(c,d,f.path,y,L)}var dt=L.getChanges();return function(c,d,f){var y=d.eventCache;if(y.isFullyInitialized()){var D=y.getNode().isLeafNode()||y.getNode().isEmpty(),L=bn(c);(f.length>0||!c.eventCache.isFullyInitialized()||D&&!y.getNode().equals(L)||!y.getNode().getPriority().equals(L.getPriority()))&&f.push(zr(bn(d)))}}(d,W,dt),{viewCache:W,changes:dt}}(c.processor_,D,d,f,y);return function(c,d){(0,J.hu)(d.eventCache.getNode().isIndexed(c.filter.getIndex()),"Event snap not indexed"),(0,J.hu)(d.serverCache.getNode().isIndexed(c.filter.getIndex()),"Server snap not indexed")}(c.processor_,L.viewCache),(0,J.hu)(L.viewCache.serverCache.isFullyInitialized()||!D.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),c.viewCache_=L.viewCache,Yo(c,L.changes,L.viewCache.eventCache.getNode(),null)}function Yo(c,d,f,y){return function(c,d,f,y){var D=[],L=[];return d.forEach(function(W){"child_changed"===W.type&&c.index_.indexedValueChanged(W.oldSnap,W.snapshotNode)&&L.push(function(c,d){return{type:"child_moved",snapshotNode:d,childName:c}}(W.childName,W.snapshotNode))}),Ni(c,D,"child_removed",d,y,f),Ni(c,D,"child_added",d,y,f),Ni(c,D,"child_moved",L,y,f),Ni(c,D,"child_changed",d,y,f),Ni(c,D,"value",d,y,f),D}(c.eventGenerator_,d,f,y?[y]:c.eventRegistrations_)}var pu,mu,Zn=function(){this.views=new Map};function Za(c,d,f,y){var D,L,W=d.source.queryId;if(null!==W){var ce=c.views.get(W);return(0,J.hu)(null!=ce,"SyncTree gave us an op for an invalid query."),Hs(ce,d,f,y)}var ve=[];try{for(var Me=(0,C.XA)(c.views.values()),ke=Me.next();!ke.done;ke=Me.next())ve=ve.concat(Hs(ce=ke.value,d,f,y))}catch(dt){D={error:dt}}finally{try{ke&&!ke.done&&(L=Me.return)&&L.call(Me)}finally{if(D)throw D.error}}return ve}function hd(c,d,f,y,D){var W=c.views.get(d._queryIdentifier);if(!W){var ce=_t(f,D?y:null),ve=!1;ce?ve=!0:y instanceof k?(ce=Vt(f,y),ve=!1):(ce=k.EMPTY_NODE,ve=!1);var Me=li(new ui(ce,ve,!1),new ui(y,D,!1));return new ir(d,Me)}return W}function ic(c){var d,f,y=[];try{for(var D=(0,C.XA)(c.views.values()),L=D.next();!L.done;L=D.next()){var W=L.value;W.query._queryParams.loadsAllData()||y.push(W)}}catch(ce){d={error:ce}}finally{try{L&&!L.done&&(f=D.return)&&f.call(D)}finally{if(d)throw d.error}}return y}function Aa(c,d){var f,y,D=null;try{for(var L=(0,C.XA)(c.views.values()),W=L.next();!W.done;W=L.next())D=D||Un(W.value,d)}catch(ve){f={error:ve}}finally{try{W&&!W.done&&(y=L.return)&&y.call(L)}finally{if(f)throw f.error}}return D}function fd(c,d){return d._queryParams.loadsAllData()?Gs(c):c.views.get(d._queryIdentifier)}function Qu(c,d){return null!=fd(c,d)}function Ia(c){return null!=Gs(c)}function Gs(c){var d,f;try{for(var y=(0,C.XA)(c.views.values()),D=y.next();!D.done;D=y.next()){var L=D.value;if(L.query._queryParams.loadsAllData())return L}}catch(W){d={error:W}}finally{try{D&&!D.done&&(f=y.return)&&f.call(y)}finally{if(d)throw d.error}}return null}var Ar=1,oh=function(d){this.listenProvider_=d,this.syncPointTree_=new Cr(null),this.pendingWriteTree_={visibleWrites:Ai.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function oc(c,d,f,y,D){return function(c,d,f,y,D){(0,J.hu)(y>c.lastWriteId,"Stacking an older write on top of newer ones"),void 0===D&&(D=!0),c.allWrites.push({path:d,snap:f,writeId:y,visible:D}),D&&(c.visibleWrites=wi(c.visibleWrites,d,f)),c.lastWriteId=y}(c.pendingWriteTree_,d,f,y,D),D?Ps(c,new Oo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},d,f)):[]}function yo(c,d,f){void 0===f&&(f=!1);var y=function(c,d){for(var f=0;f<c.allWrites.length;f++){var y=c.allWrites[f];if(y.writeId===d)return y}return null}(c.pendingWriteTree_,d);if(function(c,d){var f=c.allWrites.findIndex(function(Me){return Me.writeId===d});(0,J.hu)(f>=0,"removeWrite called with nonexistent writeId.");var y=c.allWrites[f];c.allWrites.splice(f,1);for(var D=y.visible,L=!1,W=c.allWrites.length-1;D&&W>=0;){var ce=c.allWrites[W];ce.visible&&(W>=f&&Wu(ce,y.path)?D=!1:fi(y.path,ce.path)&&(L=!0)),W--}return!!D&&(L?(function(c){c.visibleWrites=hu(c.allWrites,Yu,cn()),c.lastWriteId=c.allWrites.length>0?c.allWrites[c.allWrites.length-1].writeId:-1}(c),!0):(y.snap?c.visibleWrites=Jr(c.visibleWrites,y.path):jt(y.children,function(Me){c.visibleWrites=Jr(c.visibleWrites,ar(y.path,Me))}),!0))}(c.pendingWriteTree_,d)){var L=new Cr(null);return null!=y.snap?L=L.set(cn(),!0):jt(y.children,function(W){L=L.set(new vn(W),!0)}),Ps(c,new Xi(y.path,L,f))}return[]}function qs(c,d,f){return Ps(c,new Oo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,f))}function Vc(c,d,f,y){var D=d._path,L=c.syncPointTree_.get(D),W=[];if(L&&("default"===d._queryIdentifier||Qu(L,d))){var ce=function(c,d,f,y){var D,L,W=d._queryIdentifier,ce=[],ve=[],Me=Ia(c);if("default"===W)try{for(var ke=(0,C.XA)(c.views.entries()),dt=ke.next();!dt.done;dt=ke.next()){var on,It=(0,C.CR)(dt.value,2),Bt=It[0];ve=ve.concat(_o(on=It[1],f,y)),mo(on)&&(c.views.delete(Bt),on.query._queryParams.loadsAllData()||ce.push(on.query))}}catch(Qn){D={error:Qn}}finally{try{dt&&!dt.done&&(L=ke.return)&&L.call(ke)}finally{if(D)throw D.error}}else(on=c.views.get(W))&&(ve=ve.concat(_o(on,f,y)),mo(on)&&(c.views.delete(W),on.query._queryParams.loadsAllData()||ce.push(on.query)));return Me&&!Ia(c)&&ce.push(new((0,J.hu)(pu,"Reference.ts has not been loaded"),pu)(d._repo,d._path)),{removed:ce,events:ve}}(L,d,f,y);(function(c){return 0===c.views.size})(L)&&(c.syncPointTree_=c.syncPointTree_.remove(D));var ve=ce.removed;W=ce.events;var Me=-1!==ve.findIndex(function(so){return so._queryParams.loadsAllData()}),ke=c.syncPointTree_.findOnPath(D,function(so,Na){return Ia(Na)});if(Me&&!ke){var dt=c.syncPointTree_.subtree(D);if(!dt.isEmpty())for(var It=function(c){return c.fold(function(d,f,y){if(f&&Ia(f))return[Gs(f)];var L=[];return f&&(L=ic(f)),jt(y,function(W,ce){L=L.concat(ce)}),L})}(dt),Bt=0;Bt<It.length;++Bt){var on=It[Bt],Qn=on.query,Yn=Uc(c,on);c.listenProvider_.startListening(Ma(Qn),Xu(c,Qn),Yn.hashFn,Yn.onComplete)}}!ke&&ve.length>0&&!y&&(Me?c.listenProvider_.stopListening(Ma(d),null):ve.forEach(function(so){var Na=c.queryToTagMap.get(sc(so));c.listenProvider_.stopListening(Ma(so),Na)})),function(c,d){for(var f=0;f<d.length;++f){var y=d[f];if(!y._queryParams.loadsAllData()){var D=sc(y),L=c.queryToTagMap.get(D);c.queryToTagMap.delete(D),c.tagToQueryMap.delete(L)}}}(c,ve)}return W}function sh(c,d,f){var y=d._path,D=null,L=!1;c.syncPointTree_.foreachOnPath(y,function(Qn,Yn){var Er=Qr(Qn,y);D=D||Aa(Yn,Er),L=L||Ia(Yn)});var ce,W=c.syncPointTree_.get(y);W?(L=L||Ia(W),D=D||Aa(W,cn())):(W=new Zn,c.syncPointTree_=c.syncPointTree_.set(y,W)),null!=D?ce=!0:(ce=!1,D=k.EMPTY_NODE,c.syncPointTree_.subtree(y).foreachChild(function(Qn,Yn){var Er=Aa(Yn,cn());Er&&(D=D.updateImmediateChild(Qn,Er))}));var Me=Qu(W,d);if(!Me&&!d._queryParams.loadsAllData()){var ke=sc(d);(0,J.hu)(!c.queryToTagMap.has(ke),"View does not exist, but we have a tag");var dt=Ar++;c.queryToTagMap.set(ke,dt),c.tagToQueryMap.set(dt,ke)}var Bt=function(c,d,f,y,D,L){var W=hd(c,d,y,D,L);return c.views.has(d._queryIdentifier)||c.views.set(d._queryIdentifier,W),function(c,d){c.eventRegistrations_.push(d)}(W,f),function(c,d){var f=c.viewCache_.eventCache,y=[];return f.getNode().isLeafNode()||f.getNode().forEachChild(cr,function(L,W){y.push(oi(L,W))}),f.isFullyInitialized()&&y.push(zr(f.getNode())),Yo(c,y,f.getNode(),d)}(W,f)}(W,d,f,Bi(c.pendingWriteTree_,y),D,ce);if(!Me&&!L){var on=fd(W,d);Bt=Bt.concat(function(c,d,f){var y=d._path,D=Xu(c,d),L=Uc(c,f),W=c.listenProvider_.startListening(Ma(d),D,L.hashFn,L.onComplete),ce=c.syncPointTree_.subtree(y);if(D)(0,J.hu)(!Ia(ce.value),"If we're adding a query, it shouldn't be shadowed");else for(var ve=ce.fold(function(dt,It,Bt){if(!Hn(dt)&&It&&Ia(It))return[Gs(It).query];var on=[];return It&&(on=on.concat(ic(It).map(function(Qn){return Qn.query}))),jt(Bt,function(Qn,Yn){on=on.concat(Yn)}),on}),Me=0;Me<ve.length;++Me){var ke=ve[Me];c.listenProvider_.stopListening(Ma(ke),Xu(c,ke))}return W}(c,d,on))}return Bt}function Ol(c,d,f){var D=c.pendingWriteTree_,L=c.syncPointTree_.findOnPath(d,function(W,ce){var Me=Aa(ce,Qr(W,d));if(Me)return Me});return js(D,d,L,f,!0)}function Ps(c,d){return oa(d,c.syncPointTree_,null,Bi(c.pendingWriteTree_,cn()))}function oa(c,d,f,y){if(Hn(c.path))return Ju(c,d,f,y);var D=d.get(cn());null==f&&null!=D&&(f=Aa(D,cn()));var L=[],W=er(c.path),ce=c.operationForChild(W),ve=d.children.get(W);if(ve&&ce){var Me=f?f.getImmediateChild(W):null,ke=Cs(y,W);L=L.concat(oa(ce,ve,Me,ke))}return D&&(L=L.concat(Za(D,c,y,f))),L}function Ju(c,d,f,y){var D=d.get(cn());null==f&&null!=D&&(f=Aa(D,cn()));var L=[];return d.children.inorderTraversal(function(W,ce){var ve=f?f.getImmediateChild(W):null,Me=Cs(y,W),ke=c.operationForChild(W);ke&&(L=L.concat(Ju(ke,ce,ve,Me)))}),D&&(L=L.concat(Za(D,c,y,f))),L}function Uc(c,d){var f=d.query,y=Xu(c,f);return{hashFn:function(){return(function(c){return c.viewCache_.serverCache.getNode()}(d)||k.EMPTY_NODE).hash()},onComplete:function(D){if("ok"===D)return y?function(c,d,f){var y=Zs(c,f);if(y){var D=_u(y),L=D.path,W=D.queryId,ce=Qr(L,d);return yu(c,L,new ai(Ur(W),ce))}return[]}(c,f._path,y):function(c,d){return Ps(c,new ai({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d))}(c,f._path);var L=function(c,d){var f="Unknown Error";"too_big"===c?f="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===c?f="Client doesn't have permission to access the desired data.":"unavailable"===c&&(f="The service is unavailable");var y=new Error(c+" at "+d._path.toString()+": "+f);return y.code=c.toUpperCase(),y}(D,f);return Vc(c,f,null,L)}}}function Xu(c,d){var f=sc(d);return c.queryToTagMap.get(f)}function sc(c){return c._path.toString()+"$"+c._queryIdentifier}function Zs(c,d){return c.tagToQueryMap.get(d)}function _u(c){var d=c.indexOf("$");return(0,J.hu)(-1!==d&&d<c.length-1,"Bad queryKey."),{queryId:c.substr(d+1),path:new vn(c.substr(0,d))}}function yu(c,d,f){var y=c.syncPointTree_.get(d);return(0,J.hu)(y,"Missing sync point for query tag that we're tracking"),Za(y,f,Bi(c.pendingWriteTree_,d),null)}function Ma(c){return c._queryParams.loadsAllData()&&!c._queryParams.isDefault()?new((0,J.hu)(mu,"Reference.ts has not been loaded"),mu)(c._repo,c._path):c}var Oa=function(){function c(d){this.node_=d}return c.prototype.getImmediateChild=function(d){return new c(this.node_.getImmediateChild(d))},c.prototype.node=function(){return this.node_},c}(),Bo=function(){function c(d,f){this.syncTree_=d,this.path_=f}return c.prototype.getImmediateChild=function(d){var f=ar(this.path_,d);return new c(this.syncTree_,f)},c.prototype.node=function(){return Ol(this.syncTree_,this.path_)},c}(),Rl=function(c,d,f){return c&&"object"==typeof c?((0,J.hu)(".sv"in c,"Unexpected leaf node or priority contents"),"string"==typeof c[".sv"]?Hc(c[".sv"],d,f):"object"==typeof c[".sv"]?ac(c[".sv"],d):void(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2))):c},Hc=function(c,d,f){switch(c){case"timestamp":return f.timestamp;default:(0,J.hu)(!1,"Unexpected server value: "+c)}},ac=function(c,d,f){c.hasOwnProperty("increment")||(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2));var y=c.increment;"number"!=typeof y&&(0,J.hu)(!1,"Unexpected increment value: "+y);var D=d.node();if((0,J.hu)(null!=D,"Expected ChildrenNode.EMPTY_NODE for nulls"),!D.isLeafNode())return y;var W=D.getValue();return"number"!=typeof W?y:W+y},nl=function(c,d,f,y){return Wa(d,new Bo(f,c),y)},rl=function(c,d,f){return Wa(c,new Oa(d),f)};function Wa(c,d,f){var L,y=c.getPriority().val(),D=Rl(y,d.getImmediateChild(".priority"),f);if(c.isLeafNode()){var W=c,ce=Rl(W.getValue(),d,f);return ce!==W.getValue()||D!==W.getPriority().val()?new ti(ce,rt(D)):c}var ve=c;return L=ve,D!==ve.getPriority().val()&&(L=L.updatePriority(new ti(D))),ve.forEachChild(cr,function(Me,ke){var dt=Wa(ke,d.getImmediateChild(Me),f);dt!==ke&&(L=L.updateImmediateChild(Me,dt))}),L}var Ra=function(d,f,y){void 0===d&&(d=""),void 0===f&&(f=null),void 0===y&&(y={children:{},childCount:0}),this.name=d,this.parent=f,this.node=y};function xl(c,d){for(var f=d instanceof vn?d:new vn(d),y=c,D=er(f);null!==D;){var L=(0,J.DV)(y.node.children,D)||{children:{},childCount:0};y=new Ra(D,y,L),D=er(f=gr(f))}return y}function mi(c){return c.node.value}function bu(c,d){c.node.value=d,Du(c)}function uc(c){return c.node.childCount>0}function xa(c,d){jt(c.node.children,function(f,y){d(new Ra(f,c,y))})}function Eu(c,d,f,y){f&&!y&&d(c),xa(c,function(D){Eu(D,d,!0,y)}),f&&y&&d(c)}function wu(c){return new vn(null===c.parent?c.name:wu(c.parent)+"/"+c.name)}function Du(c){null!==c.parent&&function(c,d,f){var y=function(c){return void 0===mi(c)&&!uc(c)}(f),D=(0,J.r3)(c.node.children,d);y&&D?(delete c.node.children[d],c.node.childCount--,Du(c)):!y&&!D&&(c.node.children[d]=f.node,c.node.childCount++,Du(c))}(c.parent,c.name,c)}var as=/[\[\].#$\/\u0000-\u001F\u007F]/,il=/[\[\].#$\u0000-\u001F\u007F]/,$s=10485760,Ka=function(c){return"string"==typeof c&&0!==c.length&&!as.test(c)},Gc=function(c){return"string"==typeof c&&0!==c.length&&!il.test(c)},Fs=function(c){return null===c||"string"==typeof c||"number"==typeof c&&!ot(c)||c&&"object"==typeof c&&(0,J.r3)(c,".sv")},fs=function(c,d,f,y){y&&void 0===d||Pl((0,J.gK)(c,"value"),d,f)},Pl=function(c,d,f){var y=f instanceof vn?new Zi(f,c):f;if(void 0===d)throw new Error(c+"contains undefined "+Hr(y));if("function"==typeof d)throw new Error(c+"contains a function "+Hr(y)+" with contents = "+d.toString());if(ot(d))throw new Error(c+"contains "+d.toString()+" "+Hr(y));if("string"==typeof d&&d.length>$s/3&&(0,J.ug)(d)>$s)throw new Error(c+"contains a string greater than "+$s+" utf8 bytes "+Hr(y)+" ('"+d.substring(0,50)+"...')");if(d&&"object"==typeof d){var D=!1,L=!1;if(jt(d,function(W,ce){if(".value"===W)D=!0;else if(".priority"!==W&&".sv"!==W&&(L=!0,!Ka(W)))throw new Error(c+" contains an invalid key ("+W+") "+Hr(y)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(c,d){c.parts_.length>0&&(c.byteLength_+=1),c.parts_.push(d),c.byteLength_+=(0,J.ug)(d),ds(c)})(y,W),Pl(c,ce,y),function(c){var d=c.parts_.pop();c.byteLength_-=(0,J.ug)(d),c.parts_.length>0&&(c.byteLength_-=1)}(y)}),D&&L)throw new Error(c+' contains ".value" child '+Hr(y)+" in addition to actual children.")}},Su=function(c,d,f,y){if(!y||void 0!==d){var D=(0,J.gK)(c,"values");if(!d||"object"!=typeof d||Array.isArray(d))throw new Error(D+" must be an object containing the children to replace.");var L=[];jt(d,function(W,ce){var ve=new vn(W);if(Pl(D,ce,ar(f,ve)),".priority"===Vi(ve)&&!Fs(ce))throw new Error(D+"contains an invalid value for '"+ve.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");L.push(ve)}),function(c,d){var f,y;for(f=0;f<d.length;f++)for(var D=Wr(y=d[f]),L=0;L<D.length;L++)if((".priority"!==D[L]||L!==D.length-1)&&!Ka(D[L]))throw new Error(c+"contains an invalid key ("+D[L]+") in path "+y.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');d.sort(Or);var W=null;for(f=0;f<d.length;f++){if(y=d[f],null!==W&&fi(W,y))throw new Error(c+"contains a path "+W.toString()+" that is ancestor of another path "+y.toString());W=y}}(D,L)}},sa=function(c,d,f){if(!f||void 0!==d){if(ot(d))throw new Error((0,J.gK)(c,"priority")+"is "+d.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Fs(d))throw new Error((0,J.gK)(c,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},md=function(c,d,f){if(!f||void 0!==d)switch(d){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,J.gK)(c,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Qa=function(c,d,f,y){if(!(y&&void 0===f||Ka(f)))throw new Error((0,J.gK)(c,d)+'was an invalid key = "'+f+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ws=function(c,d,f,y){if(!(y&&void 0===f||Gc(f)))throw new Error((0,J.gK)(c,d)+'was an invalid path = "'+f+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ws=function(c,d){if(".info"===er(d))throw new Error(c+" failed = Can't modify data under /.info/")},zc=function(c,d){var f=d.path.toString();if("string"!=typeof d.repoInfo.host||0===d.repoInfo.host.length||!Ka(d.repoInfo.namespace)&&"localhost"!==d.repoInfo.host.split(":")[0]||0!==f.length&&!function(c){return c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Gc(c)}(f))throw new Error((0,J.gK)(c,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},vo=function(c,d,f,y){if((!y||void 0!==f)&&"boolean"!=typeof f)throw new Error((0,J.gK)(c,d)+"must be a boolean.")},Xr=function(){this.eventLists_=[],this.recursionDepth_=0};function aa(c,d){for(var f=null,y=0;y<d.length;y++){var D=d[y],L=D.getPath();null!==f&&!qi(L,f.path)&&(c.eventLists_.push(f),f=null),null===f&&(f={events:[],path:L}),f.events.push(D)}f&&c.eventLists_.push(f)}function Ja(c,d,f){aa(c,f),qc(c,function(y){return qi(y,d)})}function jo(c,d,f){aa(c,f),qc(c,function(y){return fi(y,d)||fi(d,y)})}function qc(c,d){c.recursionDepth_++;for(var f=!0,y=0;y<c.eventLists_.length;y++){var D=c.eventLists_[y];D&&(d(D.path)?(Zc(c.eventLists_[y]),c.eventLists_[y]=null):f=!1)}f&&(c.eventLists_=[]),c.recursionDepth_--}function Zc(c){for(var d=0;d<c.events.length;d++){var f=c.events[d];if(null!==f){c.events[d]=null;var y=f.getEventRunner();At&&ct("event: "+f.toString()),Xn(y)}}}var Qo="repo_interrupt",Pa=function(){function c(d,f,y,D){this.repoInfo_=d,this.forceRestClient_=f,this.authTokenProvider_=y,this.appCheckProvider_=D,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Xr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ae(),this.transactionQueueTree_=new Ra,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return c.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},c}();function Iu(c){var f=c.infoData_.getNode(new vn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+f}function Mu(c){return function(c){return(c=c||{}).timestamp=c.timestamp||(new Date).getTime(),c}({timestamp:Iu(c)})}function Io(c,d,f,y,D){c.dataUpdateCount++;var L=new vn(d);f=c.interceptServerDataCallback_?c.interceptServerDataCallback_(d,f):f;var W=[];if(D)if(y){var ce=(0,J.UI)(f,function(It){return rt(It)});W=function(c,d,f,y){var D=Zs(c,y);if(D){var L=_u(D),W=L.path,ce=L.queryId,ve=Qr(W,d),Me=Cr.fromObject(f);return yu(c,W,new To(Ur(ce),ve,Me))}return[]}(c.serverSyncTree_,L,ce,D)}else{var ve=rt(f);W=function(c,d,f,y){var D=Zs(c,y);if(null!=D){var L=_u(D),W=L.path,ce=L.queryId,ve=Qr(W,d);return yu(c,W,new Oo(Ur(ce),ve,f))}return[]}(c.serverSyncTree_,L,ve,D)}else if(y){var Me=(0,J.UI)(f,function(It){return rt(It)});W=function(c,d,f){var y=Cr.fromObject(f);return Ps(c,new To({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,y))}(c.serverSyncTree_,L,Me)}else{var ke=rt(f);W=qs(c.serverSyncTree_,L,ke)}var dt=L;W.length>0&&(dt=Ou(c,L)),jo(c.eventQueue_,dt,W)}function lc(c,d){cc(c,"connected",d),!1===d&&function(c){kl(c,"onDisconnectEvents");var d=Mu(c),f=ae();Le(c.onDisconnect_,cn(),function(D,L){var W=nl(D,L,c.serverSyncTree_,d);Ce(f,D,W)});var y=[];Le(f,cn(),function(D,L){y=y.concat(qs(c.serverSyncTree_,D,L));var W=Ru(c,D);Ou(c,W)}),c.onDisconnect_=ae(),jo(c.eventQueue_,cn(),y)}(c)}function cc(c,d,f){var y=new vn("/.info/"+d),D=rt(f);c.infoData_.updateSnapshot(y,D);var L=qs(c.infoSyncTree_,y,D);jo(c.eventQueue_,y,L)}function Fl(c){return c.nextWriteId_++}function ua(c,d,f,y,D){kl(c,"set",{path:d.toString(),value:f,priority:y});var L=Mu(c),W=rt(f,y),ce=Ol(c.serverSyncTree_,d),ve=rl(W,ce,L),Me=Fl(c),ke=oc(c.serverSyncTree_,d,ve,Me,!0);aa(c.eventQueue_,ke),c.server_.put(d.toString(),W.val(!0),function(It,Bt){var on="ok"===It;on||Dt("set at "+d+" failed: "+It);var Qn=yo(c.serverSyncTree_,Me,!on);jo(c.eventQueue_,d,Qn),Jo(0,D,It,Bt)});var dt=Ru(c,d);Ou(c,dt),jo(c.eventQueue_,dt,[])}function vd(c,d,f){c.server_.onDisconnectCancel(d.toString(),function(y,D){"ok"===y&&Fe(c.onDisconnect_,d),Jo(0,f,y,D)})}function dc(c,d,f,y){var D=rt(f);c.server_.onDisconnectPut(d.toString(),D.val(!0),function(L,W){"ok"===L&&Ce(c.onDisconnect_,d,D),Jo(0,y,L,W)})}function Nl(c,d,f){var y;y=".info"===er(d._path)?Vc(c.infoSyncTree_,d,f):Vc(c.serverSyncTree_,d,f),Ja(c.eventQueue_,d._path,y)}function $c(c){c.persistentConnection_&&c.persistentConnection_.interrupt(Qo)}function kl(c){for(var d=[],f=1;f<arguments.length;f++)d[f-1]=arguments[f];var y="";c.persistentConnection_&&(y=c.persistentConnection_.id+":"),ct.apply(void 0,(0,C.ev)([y],(0,C.CR)(d)))}function Jo(c,d,f,y){d&&Xn(function(){if("ok"===f)d(null);else{var D=(f||"error").toUpperCase(),L=D;y&&(L+=": "+y);var W=new Error(L);W.code=D,d(W)}})}function Ds(c,d,f){return Ol(c.serverSyncTree_,d,f)||k.EMPTY_NODE}function ji(c,d){if(void 0===d&&(d=c.transactionQueueTree_),d||la(c,d),mi(d)){var f=Wc(c,d);(0,J.hu)(f.length>0,"Sending zero length transaction queue"),f.every(function(D){return 0===D.status})&&function(c,d,f){for(var y=f.map(function(It){return It.currentWriteId}),D=Ds(c,d,y),L=D,W=D.hash(),ce=0;ce<f.length;ce++){var ve=f[ce];(0,J.hu)(0===ve.status,"tryToSendTransactionQueue_: items in queue should all be run."),ve.status=1,ve.retryCount++;var Me=Qr(d,ve.path);L=L.updateChild(Me,ve.currentOutputSnapshotRaw)}var ke=L.val(!0),dt=d;c.server_.put(dt.toString(),ke,function(It){kl(c,"transaction put response",{path:dt.toString(),status:It});var Bt=[];if("ok"===It){for(var on=[],Qn=function(Er){f[Er].status=2,Bt=Bt.concat(yo(c.serverSyncTree_,f[Er].currentWriteId)),f[Er].onComplete&&on.push(function(){return f[Er].onComplete(null,!0,f[Er].currentOutputSnapshotResolved)}),f[Er].unwatcher()},Yn=0;Yn<f.length;Yn++)Qn(Yn);for(la(c,xl(c.transactionQueueTree_,d)),ji(c,c.transactionQueueTree_),jo(c.eventQueue_,d,Bt),Yn=0;Yn<on.length;Yn++)Xn(on[Yn])}else{if("datastale"===It)for(Yn=0;Yn<f.length;Yn++)f[Yn].status=3===f[Yn].status?4:0;else for(Dt("transaction at "+dt.toString()+" failed: "+It),Yn=0;Yn<f.length;Yn++)f[Yn].status=4,f[Yn].abortReason=It;Ou(c,d)}},W)}(c,wu(d),f)}else uc(d)&&xa(d,function(D){ji(c,D)})}function Ou(c,d){var f=Fa(c,d),y=wu(f);return function(c,d,f){if(0!==d.length){for(var y=[],D=[],W=d.filter(function(Me){return 0===Me.status}).map(function(Me){return Me.currentWriteId}),ce=function(Me){var Bt,ke=d[Me],dt=Qr(f,ke.path),It=!1;if((0,J.hu)(null!==dt,"rerunTransactionsUnderNode_: relativePath should not be null."),4===ke.status)It=!0,Bt=ke.abortReason,D=D.concat(yo(c.serverSyncTree_,ke.currentWriteId,!0));else if(0===ke.status)if(ke.retryCount>=25)It=!0,Bt="maxretry",D=D.concat(yo(c.serverSyncTree_,ke.currentWriteId,!0));else{var on=Ds(c,ke.path,W);ke.currentInputSnapshot=on;var Qn=d[Me].update(on.val());if(void 0!==Qn){Pl("transaction failed: Data returned ",Qn,ke.path);var Yn=rt(Qn);"object"==typeof Qn&&null!=Qn&&(0,J.r3)(Qn,".priority")||(Yn=Yn.updatePriority(on.getPriority()));var so=ke.currentWriteId,Na=Mu(c),Hl=rl(Yn,on,Na);ke.currentOutputSnapshotRaw=Yn,ke.currentOutputSnapshotResolved=Hl,ke.currentWriteId=Fl(c),W.splice(W.indexOf(so),1),D=(D=D.concat(oc(c.serverSyncTree_,ke.path,Hl,ke.currentWriteId,ke.applyLocally))).concat(yo(c.serverSyncTree_,so,!0))}else It=!0,Bt="nodata",D=D.concat(yo(c.serverSyncTree_,ke.currentWriteId,!0))}jo(c.eventQueue_,f,D),D=[],It&&(d[Me].status=2,setTimeout(d[Me].unwatcher,Math.floor(0)),d[Me].onComplete&&y.push("nodata"===Bt?function(){return d[Me].onComplete(null,!1,d[Me].currentInputSnapshot)}:function(){return d[Me].onComplete(new Error(Bt),!1,null)}))},ve=0;ve<d.length;ve++)ce(ve);for(la(c,c.transactionQueueTree_),ve=0;ve<y.length;ve++)Xn(y[ve]);ji(c,c.transactionQueueTree_)}}(c,Wc(c,f),y),y}function Fa(c,d){var f,y=c.transactionQueueTree_;for(f=er(d);null!==f&&void 0===mi(y);)y=xl(y,f),f=er(d=gr(d));return y}function Wc(c,d){var f=[];return Ed(c,d,f),f.sort(function(y,D){return y.order-D.order}),f}function Ed(c,d,f){var y=mi(d);if(y)for(var D=0;D<y.length;D++)f.push(y[D]);xa(d,function(L){Ed(c,L,f)})}function la(c,d){var f=mi(d);if(f){for(var y=0,D=0;D<f.length;D++)2!==f[D].status&&(f[y]=f[D],y++);f.length=y,bu(d,f.length>0?f:void 0)}xa(d,function(L){la(c,L)})}function Ru(c,d){var f=wu(Fa(c,d)),y=xl(c.transactionQueueTree_,d);return function(c,d,f){for(var y=c.parent;null!==y;){if(d(y))return!0;y=y.parent}}(y,function(D){ll(c,D)}),ll(c,y),Eu(y,function(D){ll(c,D)}),f}function ll(c,d){var f=mi(d);if(f){for(var y=[],D=[],L=-1,W=0;W<f.length;W++)3===f[W].status||(1===f[W].status?((0,J.hu)(L===W-1,"All SENT items should be at beginning of queue."),L=W,f[W].status=3,f[W].abortReason="set"):((0,J.hu)(0===f[W].status,"Unexpected transaction status in abort"),f[W].unwatcher(),D=D.concat(yo(c.serverSyncTree_,f[W].currentWriteId,!0)),f[W].onComplete&&y.push(f[W].onComplete.bind(null,new Error("set"),!1,null))));for(-1===L?bu(d,void 0):f.length=L+1,jo(c.eventQueue_,wu(d),D),W=0;W<y.length;W++)Xn(y[W])}}var cl=function(c,d){var f=fc(c),y=f.namespace;return"firebase.com"===f.domain&&En(f.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!y||"undefined"===y)&&"localhost"!==f.domain&&En("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),f.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Dt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new an(f.host,f.secure,y,d,"ws"===f.scheme||"wss"===f.scheme,"",y!==f.subdomain),path:new vn(f.pathString)}},fc=function(c){var d="",f="",y="",D="",L="",W=!0,ce="https",ve=443;if("string"==typeof c){var Me=c.indexOf("//");Me>=0&&(ce=c.substring(0,Me-1),c=c.substring(Me+2));var ke=c.indexOf("/");-1===ke&&(ke=c.length);var dt=c.indexOf("?");-1===dt&&(dt=c.length),d=c.substring(0,Math.min(ke,dt)),ke<dt&&(D=function(c){for(var d="",f=c.split("/"),y=0;y<f.length;y++)if(f[y].length>0){var D=f[y];try{D=decodeURIComponent(D.replace(/\+/g," "))}catch(L){}d+="/"+D}return d}(c.substring(ke,dt)));var It=function(c){var d,f,y={};"?"===c.charAt(0)&&(c=c.substring(1));try{for(var D=(0,C.XA)(c.split("&")),L=D.next();!L.done;L=D.next()){var W=L.value;if(0!==W.length){var ce=W.split("=");2===ce.length?y[decodeURIComponent(ce[0])]=decodeURIComponent(ce[1]):Dt("Invalid query segment '"+W+"' in query '"+c+"'")}}}catch(ve){d={error:ve}}finally{try{L&&!L.done&&(f=D.return)&&f.call(D)}finally{if(d)throw d.error}}return y}(c.substring(Math.min(c.length,dt)));(Me=d.indexOf(":"))>=0?(W="https"===ce||"wss"===ce,ve=parseInt(d.substring(Me+1),10)):Me=d.length;var Bt=d.slice(0,Me);if("localhost"===Bt.toLowerCase())f="localhost";else if(Bt.split(".").length<=2)f=Bt;else{var on=d.indexOf(".");y=d.substring(0,on).toLowerCase(),f=d.substring(on+1),L=y}"ns"in It&&(L=It.ns)}return{host:d,port:ve,domain:f,subdomain:y,secure:W,scheme:ce,pathString:D,namespace:L}},pc=function(){function c(d,f,y,D){this.eventType=d,this.eventRegistration=f,this.snapshot=y,this.prevName=D}return c.prototype.getPath=function(){var d=this.snapshot.ref;return"value"===this.eventType?d._path:d.parent._path},c.prototype.getEventType=function(){return this.eventType},c.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},c.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,J.Pz)(this.snapshot.exportVal())},c}(),Kc=function(){function c(d,f,y){this.eventRegistration=d,this.error=f,this.path=y}return c.prototype.getPath=function(){return this.path},c.prototype.getEventType=function(){return"cancel"},c.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},c.prototype.toString=function(){return this.path.toString()+":cancel"},c}(),Qc=function(){function c(d,f){this.snapshotCallback=d,this.cancelCallback=f}return c.prototype.onValue=function(d,f){this.snapshotCallback.call(null,d,f)},c.prototype.onCancel=function(d){return(0,J.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,d)},Object.defineProperty(c.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),c.prototype.matches=function(d){return this.snapshotCallback===d.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===d.snapshotCallback.userCallback&&this.snapshotCallback.context===d.snapshotCallback.context},c}(),gc=function(){function c(d,f){this._repo=d,this._path=f}return c.prototype.cancel=function(){var d=new J.BH;return vd(this._repo,this._path,d.wrapCallback(function(){})),d.promise},c.prototype.remove=function(){Ws("OnDisconnect.remove",this._path);var d=new J.BH;return dc(this._repo,this._path,null,d.wrapCallback(function(){})),d.promise},c.prototype.set=function(d){Ws("OnDisconnect.set",this._path),fs("OnDisconnect.set",d,this._path,!1);var f=new J.BH;return dc(this._repo,this._path,d,f.wrapCallback(function(){})),f.promise},c.prototype.setWithPriority=function(d,f){Ws("OnDisconnect.setWithPriority",this._path),fs("OnDisconnect.setWithPriority",d,this._path,!1),sa("OnDisconnect.setWithPriority",f,!1);var y=new J.BH;return function(c,d,f,y,D){var L=rt(f,y);c.server_.onDisconnectPut(d.toString(),L.val(!0),function(W,ce){"ok"===W&&Ce(c.onDisconnect_,d,L),Jo(0,D,W,ce)})}(this._repo,this._path,d,f,y.wrapCallback(function(){})),y.promise},c.prototype.update=function(d){Ws("OnDisconnect.update",this._path),Su("OnDisconnect.update",d,this._path,!1);var f=new J.BH;return function(c,d,f,y){if((0,J.xb)(f))return ct("onDisconnect().update() called with empty data.  Don't do anything."),void Jo(0,y,"ok",void 0);c.server_.onDisconnectMerge(d.toString(),f,function(D,L){"ok"===D&&jt(f,function(W,ce){var ve=rt(ce);Ce(c.onDisconnect_,ar(d,W),ve)}),Jo(0,y,D,L)})}(this._repo,this._path,d,f.wrapCallback(function(){})),f.promise},c}(),Xo=function(){function c(d,f,y,D){this._repo=d,this._path=f,this._queryParams=y,this._orderByCalled=D}return Object.defineProperty(c.prototype,"key",{get:function(){return Hn(this._path)?null:Vi(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"ref",{get:function(){return new Zr(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"_queryIdentifier",{get:function(){var d=A(this._queryParams),f=Tn(d);return"{}"===f?"default":f},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"_queryObject",{get:function(){return A(this._queryParams)},enumerable:!1,configurable:!0}),c.prototype.isEqual=function(d){if(!((d=(0,J.m9)(d))instanceof c))return!1;var f=this._repo===d._repo,y=qi(this._path,d._path);return f&&y&&this._queryIdentifier===d._queryIdentifier},c.prototype.toJSON=function(){return this.toString()},c.prototype.toString=function(){return this._repo.toString()+function(c){for(var d="",f=c.pieceNum_;f<c.pieces_.length;f++)""!==c.pieces_[f]&&(d+="/"+encodeURIComponent(String(c.pieces_[f])));return d||"/"}(this._path)},c}();function mc(c,d){if(!0===c._orderByCalled)throw new Error(d+": You can't combine multiple orderBy calls.")}function ca(c){var d=null,f=null;if(c.hasStart()&&(d=c.getIndexStartValue()),c.hasEnd()&&(f=c.getIndexEndValue()),c.getIndex()===Fi){var y="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",D="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(c.hasStart()){if(c.getIndexStartName()!==nt)throw new Error(y);if("string"!=typeof d)throw new Error(D)}if(c.hasEnd()){if(c.getIndexEndName()!==vt)throw new Error(y);if("string"!=typeof f)throw new Error(D)}}else if(c.getIndex()===cr){if(null!=d&&!Fs(d)||null!=f&&!Fs(f))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,J.hu)(c.getIndex()instanceof H||c.getIndex()===V,"unknown index type."),null!=d&&"object"==typeof d||null!=f&&"object"==typeof f)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Xa(c){if(c.hasStart()&&c.hasEnd()&&c.hasLimit()&&!c.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Zr=function(c){function d(f,y){return c.call(this,f,y,new du,!1)||this}return(0,C.ZT)(d,c),Object.defineProperty(d.prototype,"parent",{get:function(){var f=Ui(this._path);return null===f?null:new d(this._repo,f)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"root",{get:function(){for(var f=this;null!==f.parent;)f=f.parent;return f},enumerable:!1,configurable:!0}),d}(Xo),Vl=function(){function c(d,f,y){this._node=d,this.ref=f,this._index=y}return Object.defineProperty(c.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),c.prototype.child=function(d){var f=new vn(d),y=Ys(this.ref,d);return new c(this._node.getChild(f),y,cr)},c.prototype.exists=function(){return!this._node.isEmpty()},c.prototype.exportVal=function(){return this._node.val(!0)},c.prototype.forEach=function(d){var f=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(D,L){return d(new c(L,Ys(f.ref,D),cr))})},c.prototype.hasChild=function(d){var f=new vn(d);return!this._node.getChild(f).isEmpty()},c.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},c.prototype.toJSON=function(){return this.exportVal()},c.prototype.val=function(){return this._node.val()},c}();function wd(c,d){return(c=(0,J.m9)(c))._checkNotDeleted("ref"),void 0!==d?Ys(c._root,d):c._root}function _c(c,d){(c=(0,J.m9)(c))._checkNotDeleted("refFromURL");var f=cl(d,c._repo.repoInfo_.nodeAdmin);zc("refFromURL",f);var y=f.repoInfo;return!c._repo.repoInfo_.isCustomHost()&&y.host!==c._repo.repoInfo_.host&&En("refFromURL: Host name does not match the current database: (found "+y.host+" but expected "+c._repo.repoInfo_.host+")"),wd(c,f.path.toString())}function Ys(c,d){return null===er((c=(0,J.m9)(c))._path)?((f=d)&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),ws("child","path",f,!1)):ws("child","path",d,!1),new Zr(c._repo,ar(c._path,d));var f}function Ks(c,d){c=(0,J.m9)(c),Ws("push",c._path),fs("push",d,c._path,!0);var W,f=Iu(c._repo),y=dr(f),D=Ys(c,y),L=Ys(c,y);return W=null!=d?yc(L,d).then(function(){return L}):Promise.resolve(L),D.then=W.then.bind(W),D.catch=W.then.bind(W,void 0),D}function Dd(c){return Ws("remove",c._path),yc(c,null)}function yc(c,d){c=(0,J.m9)(c),Ws("set",c._path),fs("set",d,c._path,!1);var f=new J.BH;return ua(c._repo,c._path,d,null,f.wrapCallback(function(){})),f.promise}function da(c,d){c=(0,J.m9)(c),Ws("setPriority",c._path),sa("setPriority",d,!1);var f=new J.BH;return ua(c._repo,ar(c._path,".priority"),d,null,f.wrapCallback(function(){})),f.promise}function xu(c,d,f){if(Ws("setWithPriority",c._path),fs("setWithPriority",d,c._path,!1),sa("setWithPriority",f,!1),".length"===c.key||".keys"===c.key)throw"setWithPriority failed: "+c.key+" is a read-only object.";var y=new J.BH;return ua(c._repo,c._path,d,f,y.wrapCallback(function(){})),y.promise}function Ts(c,d){Su("update",d,c._path,!1);var f=new J.BH;return function(c,d,f,y){kl(c,"update",{path:d.toString(),value:f});var D=!0,L=Mu(c),W={};if(jt(f,function(Me,ke){D=!1,W[Me]=nl(ar(d,Me),rt(ke),c.serverSyncTree_,L)}),D)ct("update() called with empty data.  Don't do anything."),Jo(0,y,"ok",void 0);else{var ce=Fl(c),ve=function(c,d,f,y){!function(c,d,f,y){(0,J.hu)(y>c.lastWriteId,"Stacking an older merge on top of newer ones"),c.allWrites.push({path:d,children:f,writeId:y,visible:!0}),c.visibleWrites=io(c.visibleWrites,d,f),c.lastWriteId=y}(c.pendingWriteTree_,d,f,y);var D=Cr.fromObject(f);return Ps(c,new To({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},d,D))}(c.serverSyncTree_,d,W,ce);aa(c.eventQueue_,ve),c.server_.merge(d.toString(),f,function(Me,ke){var dt="ok"===Me;dt||Dt("update at "+d+" failed: "+Me);var It=yo(c.serverSyncTree_,ce,!dt),Bt=It.length>0?Ou(c,d):d;jo(c.eventQueue_,Bt,It),Jo(0,y,Me,ke)}),jt(f,function(Me){var ke=Ru(c,ar(d,Me));Ou(c,ke)}),jo(c.eventQueue_,d,[])}}(c._repo,c._path,d,f.wrapCallback(function(){})),f.promise}function eu(c){return function(c,d){var f=function(c,d){var f=d._path,y=null;c.syncPointTree_.foreachOnPath(f,function(Me,ke){var dt=Qr(Me,f);y=y||Aa(ke,dt)});var D=c.syncPointTree_.get(f);D?y=y||Aa(D,cn()):(D=new Zn,c.syncPointTree_=c.syncPointTree_.set(f,D));var L=null!=y,W=L?new ui(y,!0,!1):null;return function(c){return bn(c.viewCache_)}(hd(D,d,Bi(c.pendingWriteTree_,d._path),L?W.getNode():k.EMPTY_NODE,L))}(c.serverSyncTree_,d);return null!=f?Promise.resolve(f):c.server_.get(d).then(function(y){var D=rt(y).withIndex(d._queryParams.getIndex()),L=qs(c.serverSyncTree_,d._path,D);return Ja(c.eventQueue_,d._path,L),Promise.resolve(D)},function(y){return kl(c,"get for query "+(0,J.Pz)(d)+" failed: "+y),Promise.reject(new Error(y))})}((c=(0,J.m9)(c))._repo,c).then(function(d){return new Vl(d,new Zr(c._repo,c._path),c._queryParams.getIndex())})}var _i=function(){function c(d){this.callbackContext=d}return c.prototype.respondsTo=function(d){return"value"===d},c.prototype.createEvent=function(d,f){var y=f._queryParams.getIndex();return new pc("value",this,new Vl(d.snapshotNode,new Zr(f._repo,f._path),y))},c.prototype.getEventRunner=function(d){var f=this;return"cancel"===d.getEventType()?function(){return f.callbackContext.onCancel(d.error)}:function(){return f.callbackContext.onValue(d.snapshot,null)}},c.prototype.createCancelEvent=function(d,f){return this.callbackContext.hasCancelCallback?new Kc(this,d,f):null},c.prototype.matches=function(d){return d instanceof c&&(!d.callbackContext||!this.callbackContext||d.callbackContext.matches(this.callbackContext))},c.prototype.hasAnyCallback=function(){return null!==this.callbackContext},c}(),ri=function(){function c(d,f){this.eventType=d,this.callbackContext=f}return c.prototype.respondsTo=function(d){var f="children_added"===d?"child_added":d;return this.eventType===("children_removed"===f?"child_removed":f)},c.prototype.createCancelEvent=function(d,f){return this.callbackContext.hasCancelCallback?new Kc(this,d,f):null},c.prototype.createEvent=function(d,f){(0,J.hu)(null!=d.childName,"Child events should have a childName.");var y=Ys(new Zr(f._repo,f._path),d.childName),D=f._queryParams.getIndex();return new pc(d.type,this,new Vl(d.snapshotNode,y,D),d.prevName)},c.prototype.getEventRunner=function(d){var f=this;return"cancel"===d.getEventType()?function(){return f.callbackContext.onCancel(d.error)}:function(){return f.callbackContext.onValue(d.snapshot,d.prevName)}},c.prototype.matches=function(d){return d instanceof c&&this.eventType===d.eventType&&(!this.callbackContext||!d.callbackContext||this.callbackContext.matches(d.callbackContext))},c.prototype.hasAnyCallback=function(){return!!this.callbackContext},c}();function Pu(c,d,f,y,D){var L;if("object"==typeof y&&(L=void 0,D=y),"function"==typeof y&&(L=y),D&&D.onlyOnce){var W=f,ce=function(ke,dt){Nl(c._repo,c,Me),W(ke,dt)};ce.userCallback=f.userCallback,ce.context=f.context,f=ce}var ve=new Qc(f,L||void 0),Me="value"===d?new _i(ve):new ri(d,ve);return function(c,d,f){var y;y=".info"===er(d._path)?sh(c.infoSyncTree_,d,f):sh(c.serverSyncTree_,d,f),Ja(c.eventQueue_,d._path,y)}(c._repo,c,Me),function(){return Nl(c._repo,c,Me)}}function vc(c,d,f,y){return Pu(c,"value",d,f,y)}function Hi(c,d,f,y){return Pu(c,"child_added",d,f,y)}function Di(c,d,f,y){return Pu(c,"child_changed",d,f,y)}function Mo(c,d,f,y){return Pu(c,"child_moved",d,f,y)}function oo(c,d,f,y){return Pu(c,"child_removed",d,f,y)}function ps(c,d,f){var y=null,D=f?new Qc(f):null;"value"===d?y=new _i(D):d&&(y=new ri(d,D)),Nl(c._repo,c,y)}var xo=function(){},Qs=function(c){function d(f,y){var D=c.call(this)||this;return D._value=f,D._key=y,D}return(0,C.ZT)(d,c),d.prototype._apply=function(f){fs("endAt",this._value,f._path,!0);var y=Os(f._queryParams,this._value,this._key);if(Xa(y),ca(y),f._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xo(f._repo,f._path,y,f._orderByCalled)},d}(xo);function dl(c,d){return Qa("endAt","key",d,!0),new Qs(c,d)}var Fu=function(c){function d(f,y){var D=c.call(this)||this;return D._value=f,D._key=y,D}return(0,C.ZT)(d,c),d.prototype._apply=function(f){fs("endBefore",this._value,f._path,!1);var y=function(c,d,f){var D;return c.index_===Fi?("string"==typeof d&&(d=fr(d)),D=Os(c,d,f)):D=Os(c,d,null==f?nt:fr(f)),D.endBeforeSet_=!0,D}(f._queryParams,this._value,this._key);if(Xa(y),ca(y),f._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xo(f._repo,f._path,y,f._orderByCalled)},d}(xo);function jh(c,d){return Qa("endBefore","key",d,!0),new Fu(c,d)}var bc=function(c){function d(f,y){var D=c.call(this)||this;return D._value=f,D._key=y,D}return(0,C.ZT)(d,c),d.prototype._apply=function(f){fs("startAt",this._value,f._path,!0);var y=vs(f._queryParams,this._value,this._key);if(Xa(y),ca(y),f._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Xo(f._repo,f._path,y,f._orderByCalled)},d}(xo);function Td(c,d){return void 0===c&&(c=null),Qa("startAt","key",d,!0),new bc(c,d)}var es=function(c){function d(f,y){var D=c.call(this)||this;return D._value=f,D._key=y,D}return(0,C.ZT)(d,c),d.prototype._apply=function(f){fs("startAfter",this._value,f._path,!1);var y=function(c,d,f){var y;return c.index_===Fi?("string"==typeof d&&(d=Gr(d)),y=vs(c,d,f)):y=vs(c,d,null==f?vt:Gr(f)),y.startAfterSet_=!0,y}(f._queryParams,this._value,this._key);if(Xa(y),ca(y),f._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Xo(f._repo,f._path,y,f._orderByCalled)},d}(xo);function Wt(c,d){return Qa("startAfter","key",d,!0),new es(c,d)}var Jc=function(c){function d(f){var y=c.call(this)||this;return y._limit=f,y}return(0,C.ZT)(d,c),d.prototype._apply=function(f){if(f._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Xo(f._repo,f._path,function(c,d){var f=c.copy();return f.limitSet_=!0,f.limit_=d,f.viewFrom_="l",f}(f._queryParams,this._limit),f._orderByCalled)},d}(xo);function tu(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Jc(c)}var Sd=function(c){function d(f){var y=c.call(this)||this;return y._limit=f,y}return(0,C.ZT)(d,c),d.prototype._apply=function(f){if(f._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Xo(f._repo,f._path,function(c,d){var f=c.copy();return f.limitSet_=!0,f.limit_=d,f.viewFrom_="r",f}(f._queryParams,this._limit),f._orderByCalled)},d}(xo);function Ul(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Sd(c)}var hl=function(c){function d(f){var y=c.call(this)||this;return y._path=f,y}return(0,C.ZT)(d,c),d.prototype._apply=function(f){mc(f,"orderByChild");var y=new vn(this._path);if(Hn(y))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var D=new H(y),L=Zo(f._queryParams,D);return ca(L),new Xo(f._repo,f._path,L,!0)},d}(xo);function Ad(c){if("$key"===c)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===c)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===c)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ws("orderByChild","path",c,!1),new hl(c)}var Js=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return(0,C.ZT)(d,c),d.prototype._apply=function(f){mc(f,"orderByKey");var y=Zo(f._queryParams,Fi);return ca(y),new Xo(f._repo,f._path,y,!0)},d}(xo);function hh(){return new Js}var Id=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return(0,C.ZT)(d,c),d.prototype._apply=function(f){mc(f,"orderByPriority");var y=Zo(f._queryParams,cr);return ca(y),new Xo(f._repo,f._path,y,!0)},d}(xo);function fl(){return new Id}var us=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return(0,C.ZT)(d,c),d.prototype._apply=function(f){mc(f,"orderByValue");var y=Zo(f._queryParams,V);return ca(y),new Xo(f._repo,f._path,y,!0)},d}(xo);function Nu(){return new us}var pl=function(c){function d(f,y){var D=c.call(this)||this;return D._value=f,D._key=y,D}return(0,C.ZT)(d,c),d.prototype._apply=function(f){if(fs("equalTo",this._value,f._path,!1),f._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(f._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Qs(this._value,this._key)._apply(new bc(this._value,this._key)._apply(f))},d}(xo);function Cc(c,d){return Qa("equalTo","key",d,!0),new pl(c,d)}function Ns(c){for(var d,f,y=[],D=1;D<arguments.length;D++)y[D-1]=arguments[D];var L=(0,J.m9)(c);try{for(var W=(0,C.XA)(y),ce=W.next();!ce.done;ce=W.next()){var ve=ce.value;L=ve._apply(L)}}catch(Me){d={error:Me}}finally{try{ce&&!ce.done&&(f=W.return)&&f.call(W)}finally{if(d)throw d.error}}return L}(function(c){(0,J.hu)(!pu,"__referenceConstructor has already been defined"),pu=c})(Zr),function(c){(0,J.hu)(!mu,"__referenceConstructor has already been defined"),mu=c}(Zr);var Po={},gl=!1;function Lu(c,d,f,y,D){var L=y||c.options.databaseURL;void 0===L&&(c.options.projectId||En("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ct("Using default host for project ",c.options.projectId),L=c.options.projectId+"-default-rtdb.firebaseio.com");var ve,W=cl(L,D),ce=W.repoInfo,Me=void 0;"undefined"!=typeof process&&(Me=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Me?(ve=!0,ce=(W=cl(L="http://"+Me+"?ns="+ce.namespace,D)).repoInfo):ve=!W.repoInfo.secure;var ke=D&&ve?new Yt(Yt.OWNER):new gn(c.name,c.options,d);zc("Invalid Firebase Database URL",W),Hn(W.path)||En("Database URL must point to the root of a Firebase Database (not including a child path).");var dt=function(c,d,f,y){var D=Po[d.name];D||(Po[d.name]=D={});var L=D[c.toURLString()];return L&&En("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),L=new Pa(c,gl,f,y),D[c.toURLString()]=L,L}(ce,c,ke,new Oi(c.name,f));return new Xc(dt,c)}var Xc=function(){function c(d,f){this._repoInternal=d,this.app=f,this.type="database",this._instanceStarted=!1}return Object.defineProperty(c.prototype,"_repo",{get:function(){return this._instanceStarted||(function(c,d,f){if(c.stats_=Ut(c.repoInfo_),c.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)c.server_=new M(c.repoInfo_,function(y,D,L,W){Io(c,y,D,L,W)},c.authTokenProvider_,c.appCheckProvider_),setTimeout(function(){return lc(c,!0)},0);else{if(null!=f){if("object"!=typeof f)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,J.Pz)(f)}catch(y){throw new Error("Invalid authOverride provided: "+y)}}c.persistentConnection_=new bi(c.repoInfo_,d,function(y,D,L,W){Io(c,y,D,L,W)},function(y){lc(c,y)},function(y){!function(c,d){jt(d,function(f,y){cc(c,f,y)})}(c,y)},c.authTokenProvider_,c.appCheckProvider_,f),c.server_=c.persistentConnection_}c.authTokenProvider_.addTokenChangeListener(function(y){c.server_.refreshAuthToken(y)}),c.appCheckProvider_.addTokenChangeListener(function(y){c.server_.refreshAppCheckToken(y.token)}),c.statsReporter_=function(c,d){var f=c.toString();return St[f]||(St[f]=d()),St[f]}(c.repoInfo_,function(){return new Sr(c.stats_,c.server_)}),c.infoData_=new B,c.infoSyncTree_=new oh({startListening:function(y,D,L,W){var ce=[],ve=c.infoData_.getNode(y._path);return ve.isEmpty()||(ce=qs(c.infoSyncTree_,y._path,ve),setTimeout(function(){W("ok")},0)),ce},stopListening:function(){}}),cc(c,"connected",!1),c.serverSyncTree_=new oh({startListening:function(y,D,L,W){return c.server_.listen(y,L,D,function(ce,ve){var Me=W(ce,ve);jo(c.eventQueue_,y._path,Me)}),[]},stopListening:function(y,D){c.server_.unlisten(y,D)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Zr(this._repo,cn())),this._rootInternal},enumerable:!1,configurable:!0}),c.prototype._delete=function(){return null!==this._rootInternal&&(function(c,d){var f=Po[d];(!f||f[c.key]!==c)&&En("Database "+d+"("+c.repoInfo_+") has already been deleted."),$c(c),delete f[c.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},c.prototype._checkNotDeleted=function(d){null===this._rootInternal&&En("Cannot call "+d+" on a deleted database.")},c}();function fh(c){(c=(0,J.m9)(c))._checkNotDeleted("goOffline"),$c(c._repo)}function Uu(c){(c=(0,J.m9)(c))._checkNotDeleted("goOnline"),function(c){c.persistentConnection_&&c.persistentConnection_.resume(Qo)}(c._repo)}var Xs={".sv":"timestamp"},xd=function(){function c(d,f){this.committed=d,this.snapshot=f}return c.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},c}();function ph(c,d,f){var y;if(c=(0,J.m9)(c),Ws("Reference.transaction",c._path),".length"===c.key||".keys"===c.key)throw"Reference.transaction failed: "+c.key+" is a read-only object.";var D=null===(y=null==f?void 0:f.applyLocally)||void 0===y||y,L=new J.BH,ce=vc(c,function(){});return function(c,d,f,y,D,L){kl(c,"transaction on "+d);var W={path:d,update:f,onComplete:y,status:null,order:Xe(),applyLocally:L,retryCount:0,unwatcher:D,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ce=Ds(c,d,void 0);W.currentInputSnapshot=ce;var ve=W.update(ce.val());if(void 0===ve)W.unwatcher(),W.currentOutputSnapshotRaw=null,W.currentOutputSnapshotResolved=null,W.onComplete&&W.onComplete(null,!1,W.currentInputSnapshot);else{Pl("transaction failed: Data returned ",ve,W.path),W.status=0;var Me=xl(c.transactionQueueTree_,d),ke=mi(Me)||[];ke.push(W),bu(Me,ke);var dt=void 0;"object"==typeof ve&&null!==ve&&(0,J.r3)(ve,".priority")?(dt=(0,J.DV)(ve,".priority"),(0,J.hu)(Fs(dt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):dt=(Ol(c.serverSyncTree_,d)||k.EMPTY_NODE).getPriority().val();var Bt=Mu(c),on=rt(ve,dt),Qn=rl(on,ce,Bt);W.currentOutputSnapshotRaw=on,W.currentOutputSnapshotResolved=Qn,W.currentWriteId=Fl(c);var Yn=oc(c.serverSyncTree_,d,Qn,W.currentWriteId,W.applyLocally);jo(c.eventQueue_,d,Yn),ji(c,c.transactionQueueTree_)}}(c._repo,c._path,d,function(ve,Me,ke){var dt=null;ve?L.reject(ve):(dt=new Vl(ke,new Zr(c._repo,c._path),cr),L.resolve(new xd(Me,dt)))},ce,D),L.promise}var ea=function(){function c(d){this._delegate=d}return c.prototype.cancel=function(d){(0,J.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,J.Wj)("OnDisconnect.cancel","onComplete",d,!0);var f=this._delegate.cancel();return d&&f.then(function(){return d(null)},function(y){return d(y)}),f},c.prototype.remove=function(d){(0,J.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,J.Wj)("OnDisconnect.remove","onComplete",d,!0);var f=this._delegate.remove();return d&&f.then(function(){return d(null)},function(y){return d(y)}),f},c.prototype.set=function(d,f){(0,J.Dv)("OnDisconnect.set",1,2,arguments.length),(0,J.Wj)("OnDisconnect.set","onComplete",f,!0);var y=this._delegate.set(d);return f&&y.then(function(){return f(null)},function(D){return f(D)}),y},c.prototype.setWithPriority=function(d,f,y){(0,J.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,J.Wj)("OnDisconnect.setWithPriority","onComplete",y,!0);var D=this._delegate.setWithPriority(d,f);return y&&D.then(function(){return y(null)},function(L){return y(L)}),D},c.prototype.update=function(d,f){if((0,J.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(d)){for(var y={},D=0;D<d.length;++D)y[""+D]=d[D];d=y,Dt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,J.Wj)("OnDisconnect.update","onComplete",f,!0);var L=this._delegate.update(d);return f&&L.then(function(){return f(null)},function(W){return f(W)}),L},c}(),ks=function(){function c(d,f){this.committed=d,this.snapshot=f}return c.prototype.toJSON=function(){return(0,J.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},c}(),nu=function(){function c(d,f){this._database=d,this._delegate=f}return c.prototype.val=function(){return(0,J.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},c.prototype.exportVal=function(){return(0,J.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},c.prototype.toJSON=function(){return(0,J.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},c.prototype.exists=function(){return(0,J.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},c.prototype.child=function(d){return(0,J.Dv)("DataSnapshot.child",0,1,arguments.length),d=String(d),ws("DataSnapshot.child","path",d,!1),new c(this._database,this._delegate.child(d))},c.prototype.hasChild=function(d){return(0,J.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ws("DataSnapshot.hasChild","path",d,!1),this._delegate.hasChild(d)},c.prototype.getPriority=function(){return(0,J.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},c.prototype.forEach=function(d){var f=this;return(0,J.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,J.Wj)("DataSnapshot.forEach","action",d,!1),this._delegate.forEach(function(y){return d(new c(f._database,y))})},c.prototype.hasChildren=function(){return(0,J.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(c.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),c.prototype.numChildren=function(){return(0,J.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},c.prototype.getRef=function(){return(0,J.Dv)("DataSnapshot.ref",0,0,arguments.length),new ru(this._database,this._delegate.ref)},Object.defineProperty(c.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),c}(),jl=function(){function c(d,f){this.database=d,this._delegate=f}return c.prototype.on=function(d,f,y,D){var W,L=this;(0,J.Dv)("Query.on",2,4,arguments.length),(0,J.Wj)("Query.on","callback",f,!1);var ce=c.getCancelAndContextArgs_("Query.on",y,D),ve=function(ke,dt){f.call(ce.context,new nu(L.database,ke),dt)};ve.userCallback=f,ve.context=ce.context;var Me=null===(W=ce.cancel)||void 0===W?void 0:W.bind(ce.context);switch(d){case"value":return vc(this._delegate,ve,Me),f;case"child_added":return Hi(this._delegate,ve,Me),f;case"child_removed":return oo(this._delegate,ve,Me),f;case"child_changed":return Di(this._delegate,ve,Me),f;case"child_moved":return Mo(this._delegate,ve,Me),f;default:throw new Error((0,J.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},c.prototype.off=function(d,f,y){if((0,J.Dv)("Query.off",0,3,arguments.length),md("Query.off",d,!0),(0,J.Wj)("Query.off","callback",f,!0),(0,J.lb)("Query.off","context",y,!0),f){var D=function(){};D.userCallback=f,D.context=y,ps(this._delegate,d,D)}else ps(this._delegate,d)},c.prototype.get=function(){var d=this;return eu(this._delegate).then(function(f){return new nu(d.database,f)})},c.prototype.once=function(d,f,y,D){var L=this;(0,J.Dv)("Query.once",1,4,arguments.length),(0,J.Wj)("Query.once","callback",f,!0);var W=c.getCancelAndContextArgs_("Query.once",y,D),ce=new J.BH,ve=function(ke,dt){var It=new nu(L.database,ke);f&&f.call(W.context,It,dt),ce.resolve(It)};ve.userCallback=f,ve.context=W.context;var Me=function(ke){W.cancel&&W.cancel.call(W.context,ke),ce.reject(ke)};switch(d){case"value":vc(this._delegate,ve,Me,{onlyOnce:!0});break;case"child_added":Hi(this._delegate,ve,Me,{onlyOnce:!0});break;case"child_removed":oo(this._delegate,ve,Me,{onlyOnce:!0});break;case"child_changed":Di(this._delegate,ve,Me,{onlyOnce:!0});break;case"child_moved":Mo(this._delegate,ve,Me,{onlyOnce:!0});break;default:throw new Error((0,J.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return ce.promise},c.prototype.limitToFirst=function(d){return(0,J.Dv)("Query.limitToFirst",1,1,arguments.length),new c(this.database,Ns(this._delegate,tu(d)))},c.prototype.limitToLast=function(d){return(0,J.Dv)("Query.limitToLast",1,1,arguments.length),new c(this.database,Ns(this._delegate,Ul(d)))},c.prototype.orderByChild=function(d){return(0,J.Dv)("Query.orderByChild",1,1,arguments.length),new c(this.database,Ns(this._delegate,Ad(d)))},c.prototype.orderByKey=function(){return(0,J.Dv)("Query.orderByKey",0,0,arguments.length),new c(this.database,Ns(this._delegate,hh()))},c.prototype.orderByPriority=function(){return(0,J.Dv)("Query.orderByPriority",0,0,arguments.length),new c(this.database,Ns(this._delegate,fl()))},c.prototype.orderByValue=function(){return(0,J.Dv)("Query.orderByValue",0,0,arguments.length),new c(this.database,Ns(this._delegate,Nu()))},c.prototype.startAt=function(d,f){return void 0===d&&(d=null),(0,J.Dv)("Query.startAt",0,2,arguments.length),new c(this.database,Ns(this._delegate,Td(d,f)))},c.prototype.startAfter=function(d,f){return void 0===d&&(d=null),(0,J.Dv)("Query.startAfter",0,2,arguments.length),new c(this.database,Ns(this._delegate,Wt(d,f)))},c.prototype.endAt=function(d,f){return void 0===d&&(d=null),(0,J.Dv)("Query.endAt",0,2,arguments.length),new c(this.database,Ns(this._delegate,dl(d,f)))},c.prototype.endBefore=function(d,f){return void 0===d&&(d=null),(0,J.Dv)("Query.endBefore",0,2,arguments.length),new c(this.database,Ns(this._delegate,jh(d,f)))},c.prototype.equalTo=function(d,f){return(0,J.Dv)("Query.equalTo",1,2,arguments.length),new c(this.database,Ns(this._delegate,Cc(d,f)))},c.prototype.toString=function(){return(0,J.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},c.prototype.toJSON=function(){return(0,J.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},c.prototype.isEqual=function(d){if((0,J.Dv)("Query.isEqual",1,1,arguments.length),!(d instanceof c)){var f="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(f)}return this._delegate.isEqual(d._delegate)},c.getCancelAndContextArgs_=function(d,f,y){var D={cancel:void 0,context:void 0};if(f&&y)D.cancel=f,(0,J.Wj)(d,"cancel",D.cancel,!0),D.context=y,(0,J.lb)(d,"context",D.context,!0);else if(f)if("object"==typeof f&&null!==f)D.context=f;else{if("function"!=typeof f)throw new Error((0,J.gK)(d,"cancelOrContext")+" must either be a cancel callback or a context object.");D.cancel=f}return D},Object.defineProperty(c.prototype,"ref",{get:function(){return new ru(this.database,new Zr(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),c}(),ru=function(c){function d(f,y){var D=c.call(this,f,new Xo(y._repo,y._path,new du,!1))||this;return D.database=f,D._delegate=y,D}return(0,C.ZT)(d,c),d.prototype.getKey=function(){return(0,J.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},d.prototype.child=function(f){return(0,J.Dv)("Reference.child",1,1,arguments.length),"number"==typeof f&&(f=String(f)),new d(this.database,Ys(this._delegate,f))},d.prototype.getParent=function(){(0,J.Dv)("Reference.parent",0,0,arguments.length);var f=this._delegate.parent;return f?new d(this.database,f):null},d.prototype.getRoot=function(){return(0,J.Dv)("Reference.root",0,0,arguments.length),new d(this.database,this._delegate.root)},d.prototype.set=function(f,y){(0,J.Dv)("Reference.set",1,2,arguments.length),(0,J.Wj)("Reference.set","onComplete",y,!0);var D=yc(this._delegate,f);return y&&D.then(function(){return y(null)},function(L){return y(L)}),D},d.prototype.update=function(f,y){if((0,J.Dv)("Reference.update",1,2,arguments.length),Array.isArray(f)){for(var D={},L=0;L<f.length;++L)D[""+L]=f[L];f=D,Dt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ws("Reference.update",this._delegate._path),(0,J.Wj)("Reference.update","onComplete",y,!0);var W=Ts(this._delegate,f);return y&&W.then(function(){return y(null)},function(ce){return y(ce)}),W},d.prototype.setWithPriority=function(f,y,D){(0,J.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,J.Wj)("Reference.setWithPriority","onComplete",D,!0);var L=xu(this._delegate,f,y);return D&&L.then(function(){return D(null)},function(W){return D(W)}),L},d.prototype.remove=function(f){(0,J.Dv)("Reference.remove",0,1,arguments.length),(0,J.Wj)("Reference.remove","onComplete",f,!0);var y=Dd(this._delegate);return f&&y.then(function(){return f(null)},function(D){return f(D)}),y},d.prototype.transaction=function(f,y,D){var L=this;(0,J.Dv)("Reference.transaction",1,3,arguments.length),(0,J.Wj)("Reference.transaction","transactionUpdate",f,!1),(0,J.Wj)("Reference.transaction","onComplete",y,!0),vo("Reference.transaction","applyLocally",D,!0);var W=ph(this._delegate,f,{applyLocally:D}).then(function(ce){return new ks(ce.committed,new nu(L.database,ce.snapshot))});return y&&W.then(function(ce){return y(null,ce.committed,ce.snapshot)},function(ce){return y(ce,!1,null)}),W},d.prototype.setPriority=function(f,y){(0,J.Dv)("Reference.setPriority",1,2,arguments.length),(0,J.Wj)("Reference.setPriority","onComplete",y,!0);var D=da(this._delegate,f);return y&&D.then(function(){return y(null)},function(L){return y(L)}),D},d.prototype.push=function(f,y){var D=this;(0,J.Dv)("Reference.push",0,2,arguments.length),(0,J.Wj)("Reference.push","onComplete",y,!0);var L=Ks(this._delegate,f),W=L.then(function(ve){return new d(D.database,ve)});y&&W.then(function(){return y(null)},function(ve){return y(ve)});var ce=new d(this.database,L);return ce.then=W.then.bind(W),ce.catch=W.catch.bind(W,void 0),ce},d.prototype.onDisconnect=function(){return Ws("Reference.onDisconnect",this._delegate._path),new ea(new gc(this._delegate._repo,this._delegate._path))},Object.defineProperty(d.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),d}(jl),ha=function(){function c(d,f){var y=this;this._delegate=d,this.app=f,this.INTERNAL={delete:function(){return y._delegate._delete()}}}return c.prototype.useEmulator=function(d,f,y){void 0===y&&(y={}),function(c,d,f,y){void 0===y&&(y={}),(c=(0,J.m9)(c))._checkNotDeleted("useEmulator"),c._instanceStarted&&En("Cannot call useEmulator() after instance has already been initialized.");var D=c._repoInternal,L=void 0;if(D.repoInfo_.nodeAdmin)y.mockUserToken&&En('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),L=new Yt(Yt.OWNER);else if(y.mockUserToken){var W="string"==typeof y.mockUserToken?y.mockUserToken:(0,J.Sg)(y.mockUserToken,c.app.options.projectId);L=new Yt(W)}!function(c,d,f,y){c.repoInfo_=new an(d+":"+f,!1,c.repoInfo_.namespace,c.repoInfo_.webSocketOnly,c.repoInfo_.nodeAdmin,c.repoInfo_.persistenceKey,c.repoInfo_.includeNamespaceInQueryParams),y&&(c.authTokenProvider_=y)}(D,d,f,L)}(this._delegate,d,f,y)},c.prototype.ref=function(d){if((0,J.Dv)("database.ref",0,1,arguments.length),d instanceof ru){var f=_c(this._delegate,d.toString());return new ru(this,f)}return f=wd(this._delegate,d),new ru(this,f)},c.prototype.refFromURL=function(d){var f="database.refFromURL";(0,J.Dv)(f,1,1,arguments.length);var y=_c(this._delegate,d);return new ru(this,y)},c.prototype.goOffline=function(){return(0,J.Dv)("database.goOffline",0,0,arguments.length),fh(this._delegate)},c.prototype.goOnline=function(){return(0,J.Dv)("database.goOnline",0,0,arguments.length),Uu(this._delegate)},c.ServerValue={TIMESTAMP:Xs,increment:function(d){return function(c){return{".sv":{increment:c}}}(d)}},c}(),Pd=Object.freeze({__proto__:null,forceLongPolling:function(){yn.forceDisallow(),Li.forceAllow()},forceWebSockets:function(){Li.forceDisallow()},isWebSocketsAvailable:function(){return yn.isAvailable()},setSecurityDebugCallback:function(c,d){c._delegate._repo.persistentConnection_.securityDebugCallback_=d},stats:function(c,d){!function(c,d){if(void 0===d&&(d=!1),"undefined"!=typeof console){var f;d?(c.statsListener_||(c.statsListener_=new mt(c.stats_)),f=c.statsListener_.get()):f=c.stats_.get();var y=Object.keys(f).reduce(function(D,L){return Math.max(L.length,D)},0);jt(f,function(D,L){for(var W=D,ce=D.length;ce<y+2;ce++)W+=" ";console.log(W+L)})}}(c._delegate._repo,d)},statsIncrementCounter:function(c,d){!function(c,d){c.stats_.incrementCounter(d),function(c,d){c.statsToReport_[d]=!0}(c.statsReporter_,d)}(c._delegate._repo,d)},dataUpdateCount:function(c){return c._delegate._repo.dataUpdateCount},interceptServerData:function(c,d){return function(c,d){c.interceptServerDataCallback_=d}(c._delegate._repo,d)},initStandalone:function(c){var d=c.app,f=c.url,D=c.customAuthImpl,L=c.namespace,W=c.nodeAdmin,ce=void 0!==W&&W;be(c.version);var ve=new g.zt("auth-internal",new g.H0("database-standalone"));return ve.setComponent(new g.wA("auth-internal",function(){return D},"PRIVATE")),{instance:new ha(Lu(d,ve,void 0,f,ce),d),namespace:L}}}),Fd=bi;bi.prototype.simpleListen=function(c,d){this.sendRequest("q",{p:c},d)},bi.prototype.echo=function(c,d){this.sendRequest("echo",{d:c},d)};var m=Object.freeze({__proto__:null,DataConnection:Fd,RealTimeConnection:_e,hijackHash:function(c){var d=bi.prototype.put;return bi.prototype.put=function(f,y,D,L){void 0!==L&&(L=c()),d.call(this,f,y,D,L)},function(){bi.prototype.put=d}},ConnectionTarget:an,queryIdentifier:function(c){return c._delegate._queryIdentifier},forceRestClient:function(c){!function(c){gl=c}(c)}}),w=ha.ServerValue;!function(c){be(c.SDK_VERSION);var d=c.INTERNAL.registerComponent(new g.wA("database",function(f,y){var D=y.instanceIdentifier,L=f.getProvider("app").getImmediate(),W=f.getProvider("auth-internal"),ce=f.getProvider("app-check-internal");return new ha(Lu(L,W,ce,D),L)},"PUBLIC").setServiceProps({Reference:ru,Query:jl,Database:ha,DataSnapshot:nu,enableLogging:Lt,INTERNAL:Pd,ServerValue:w,TEST_ACCESS:m}).setMultipleInstances(!0));c.registerVersion("@firebase/database","0.11.0"),(0,J.Yr)()&&(Ht.exports=d)}(P.Z)},300:(Ht,it,K)=>{"use strict";function P(){for(var ge=0,Ee=0,Oe=arguments.length;Ee<Oe;Ee++)ge+=arguments[Ee].length;var Ue=Array(ge),Xe=0;for(Ee=0;Ee<Oe;Ee++)for(var ne=arguments[Ee],Ke=0,At=ne.length;Ke<At;Ke++,Xe++)Ue[Xe]=ne[Ke];return Ue}K.d(it,{in:()=>C,Yd:()=>be,Ub:()=>se,Am:()=>Ae});var g,J=[],C=(()=>{return(ge=C||(C={}))[ge.DEBUG=0]="DEBUG",ge[ge.VERBOSE=1]="VERBOSE",ge[ge.INFO=2]="INFO",ge[ge.WARN=3]="WARN",ge[ge.ERROR=4]="ERROR",ge[ge.SILENT=5]="SILENT",C;var ge})(),Ve={debug:C.DEBUG,verbose:C.VERBOSE,info:C.INFO,warn:C.WARN,error:C.ERROR,silent:C.SILENT},we=C.INFO,Ne=((g={})[C.DEBUG]="log",g[C.VERBOSE]="log",g[C.INFO]="info",g[C.WARN]="warn",g[C.ERROR]="error",g),he=function(ge,Ee){for(var Oe=[],Ue=2;Ue<arguments.length;Ue++)Oe[Ue-2]=arguments[Ue];if(!(Ee<ge.logLevel)){var Xe=(new Date).toISOString(),ne=Ne[Ee];if(!ne)throw new Error("Attempted to log a message with an invalid logType (value: "+Ee+")");console[ne].apply(console,P(["["+Xe+"]  "+ge.name+":"],Oe))}},be=function(){function ge(Ee){this.name=Ee,this._logLevel=we,this._logHandler=he,this._userLogHandler=null,J.push(this)}return Object.defineProperty(ge.prototype,"logLevel",{get:function(){return this._logLevel},set:function(Ee){if(!(Ee in C))throw new TypeError('Invalid value "'+Ee+'" assigned to `logLevel`');this._logLevel=Ee},enumerable:!1,configurable:!0}),ge.prototype.setLogLevel=function(Ee){this._logLevel="string"==typeof Ee?Ve[Ee]:Ee},Object.defineProperty(ge.prototype,"logHandler",{get:function(){return this._logHandler},set:function(Ee){if("function"!=typeof Ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ee},enumerable:!1,configurable:!0}),Object.defineProperty(ge.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(Ee){this._userLogHandler=Ee},enumerable:!1,configurable:!0}),ge.prototype.debug=function(){for(var Ee=[],Oe=0;Oe<arguments.length;Oe++)Ee[Oe]=arguments[Oe];this._userLogHandler&&this._userLogHandler.apply(this,P([this,C.DEBUG],Ee)),this._logHandler.apply(this,P([this,C.DEBUG],Ee))},ge.prototype.log=function(){for(var Ee=[],Oe=0;Oe<arguments.length;Oe++)Ee[Oe]=arguments[Oe];this._userLogHandler&&this._userLogHandler.apply(this,P([this,C.VERBOSE],Ee)),this._logHandler.apply(this,P([this,C.VERBOSE],Ee))},ge.prototype.info=function(){for(var Ee=[],Oe=0;Oe<arguments.length;Oe++)Ee[Oe]=arguments[Oe];this._userLogHandler&&this._userLogHandler.apply(this,P([this,C.INFO],Ee)),this._logHandler.apply(this,P([this,C.INFO],Ee))},ge.prototype.warn=function(){for(var Ee=[],Oe=0;Oe<arguments.length;Oe++)Ee[Oe]=arguments[Oe];this._userLogHandler&&this._userLogHandler.apply(this,P([this,C.WARN],Ee)),this._logHandler.apply(this,P([this,C.WARN],Ee))},ge.prototype.error=function(){for(var Ee=[],Oe=0;Oe<arguments.length;Oe++)Ee[Oe]=arguments[Oe];this._userLogHandler&&this._userLogHandler.apply(this,P([this,C.ERROR],Ee)),this._logHandler.apply(this,P([this,C.ERROR],Ee))},ge}();function se(ge){J.forEach(function(Ee){Ee.setLogLevel(ge)})}function Ae(ge,Ee){for(var Oe=function(Ke){var At=null;Ee&&Ee.level&&(At=Ve[Ee.level]),Ke.userLogHandler=null===ge?null:function(On,Lt){for(var ct=[],$t=2;$t<arguments.length;$t++)ct[$t-2]=arguments[$t];var Rt=ct.map(function(En){if(null==En)return null;if("string"==typeof En)return En;if("number"==typeof En||"boolean"==typeof En)return En.toString();if(En instanceof Error)return En.message;try{return JSON.stringify(En)}catch(Dt){return null}}).filter(function(En){return En}).join(" ");Lt>=(null!=At?At:On.logLevel)&&ge({level:C[Lt].toLowerCase(),message:Rt,args:ct,type:On.name})}},Ue=0,Xe=J;Ue<Xe.length;Ue++)Oe(Xe[Ue])}},4685:(Ht,it,K)=>{"use strict";K.d(it,{BH:()=>Oe,LL:()=>tn,ZR:()=>at,gQ:()=>jn,hu:()=>J,g5:()=>C,US:()=>Ne,h$:()=>he,r3:()=>sr,Sg:()=>Ue,ne:()=>Vn,p$:()=>Ae,ZB:()=>ge,gK:()=>$e,m9:()=>qt,z$:()=>Xe,GJ:()=>Cn,jU:()=>At,ru:()=>On,d:()=>ct,xb:()=>Bn,w1:()=>$t,uI:()=>ne,UG:()=>Ke,Yr:()=>En,b$:()=>Lt,G6:()=>Dt,Mn:()=>Rt,w9:()=>Fn,cI:()=>sn,UI:()=>Xn,xO:()=>Oi,DV:()=>zn,ug:()=>Ot,dS:()=>an,Pz:()=>jt,Dv:()=>Tt,Wj:()=>Mt,lb:()=>Pt});var P=K(4762),J=function(Re,Pe){if(!Re)throw C(Pe)},C=function(Re){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Re)},Ve=function(Re){for(var Pe=[],Ye=0,et=0;et<Re.length;et++){var tt=Re.charCodeAt(et);tt<128?Pe[Ye++]=tt:tt<2048?(Pe[Ye++]=tt>>6|192,Pe[Ye++]=63&tt|128):55296==(64512&tt)&&et+1<Re.length&&56320==(64512&Re.charCodeAt(et+1))?(tt=65536+((1023&tt)<<10)+(1023&Re.charCodeAt(++et)),Pe[Ye++]=tt>>18|240,Pe[Ye++]=tt>>12&63|128,Pe[Ye++]=tt>>6&63|128,Pe[Ye++]=63&tt|128):(Pe[Ye++]=tt>>12|224,Pe[Ye++]=tt>>6&63|128,Pe[Ye++]=63&tt|128)}return Pe},Ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(Re,Pe){if(!Array.isArray(Re))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var Ye=Pe?this.byteToCharMapWebSafe_:this.byteToCharMap_,et=[],tt=0;tt<Re.length;tt+=3){var zt=Re[tt],_n=tt+1<Re.length,rr=_n?Re[tt+1]:0,Pn=tt+2<Re.length,Ln=Pn?Re[tt+2]:0,Kr=(15&rr)<<2|Ln>>6,wr=63&Ln;Pn||(wr=64,_n||(Kr=64)),et.push(Ye[zt>>2],Ye[(3&zt)<<4|rr>>4],Ye[Kr],Ye[wr])}return et.join("")},encodeString:function(Re,Pe){return this.HAS_NATIVE_SUPPORT&&!Pe?btoa(Re):this.encodeByteArray(Ve(Re),Pe)},decodeString:function(Re,Pe){return this.HAS_NATIVE_SUPPORT&&!Pe?atob(Re):function(Re){for(var Pe=[],Ye=0,et=0;Ye<Re.length;){var tt=Re[Ye++];if(tt<128)Pe[et++]=String.fromCharCode(tt);else if(tt>191&&tt<224){var zt=Re[Ye++];Pe[et++]=String.fromCharCode((31&tt)<<6|63&zt)}else if(tt>239&&tt<365){var Pn=((7&tt)<<18|(63&(zt=Re[Ye++]))<<12|(63&(_n=Re[Ye++]))<<6|63&Re[Ye++])-65536;Pe[et++]=String.fromCharCode(55296+(Pn>>10)),Pe[et++]=String.fromCharCode(56320+(1023&Pn))}else{zt=Re[Ye++];var _n=Re[Ye++];Pe[et++]=String.fromCharCode((15&tt)<<12|(63&zt)<<6|63&_n)}}return Pe.join("")}(this.decodeStringToByteArray(Re,Pe))},decodeStringToByteArray:function(Re,Pe){this.init_();for(var Ye=Pe?this.charToByteMapWebSafe_:this.charToByteMap_,et=[],tt=0;tt<Re.length;){var zt=Ye[Re.charAt(tt++)],rr=tt<Re.length?Ye[Re.charAt(tt)]:0,Ln=++tt<Re.length?Ye[Re.charAt(tt)]:64,jr=++tt<Re.length?Ye[Re.charAt(tt)]:64;if(++tt,null==zt||null==rr||null==Ln||null==jr)throw Error();et.push(zt<<2|rr>>4),64!==Ln&&(et.push(rr<<4&240|Ln>>2),64!==jr&&et.push(Ln<<6&192|jr))}return et},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var Re=0;Re<this.ENCODED_VALS.length;Re++)this.byteToCharMap_[Re]=this.ENCODED_VALS.charAt(Re),this.charToByteMap_[this.byteToCharMap_[Re]]=Re,this.byteToCharMapWebSafe_[Re]=this.ENCODED_VALS_WEBSAFE.charAt(Re),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Re]]=Re,Re>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Re)]=Re,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Re)]=Re)}}},he=function(Re){var Pe=Ve(Re);return Ne.encodeByteArray(Pe,!0)},be=function(Re){return he(Re).replace(/\./g,"")},se=function(Re){try{return Ne.decodeString(Re,!0)}catch(Pe){console.error("base64Decode failed: ",Pe)}return null};function Ae(Re){return ge(void 0,Re)}function ge(Re,Pe){if(!(Pe instanceof Object))return Pe;switch(Pe.constructor){case Date:return new Date(Pe.getTime());case Object:void 0===Re&&(Re={});break;case Array:Re=[];break;default:return Pe}for(var et in Pe)!Pe.hasOwnProperty(et)||!Ee(et)||(Re[et]=ge(Re[et],Pe[et]));return Re}function Ee(Re){return"__proto__"!==Re}var Oe=function(){function Re(){var Pe=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(Ye,et){Pe.resolve=Ye,Pe.reject=et})}return Re.prototype.wrapCallback=function(Pe){var Ye=this;return function(et,tt){et?Ye.reject(et):Ye.resolve(tt),"function"==typeof Pe&&(Ye.promise.catch(function(){}),1===Pe.length?Pe(et):Pe(et,tt))}},Re}();function Ue(Re,Pe){if(Re.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var et=Pe||"demo-project",tt=Re.iat||0,zt=Re.sub||Re.user_id;if(!zt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var _n=(0,P.pi)({iss:"https://securetoken.google.com/"+et,aud:et,iat:tt,exp:tt+3600,auth_time:tt,sub:zt,user_id:zt,firebase:{sign_in_provider:"custom",identities:{}}},Re);return[be(JSON.stringify({alg:"none",type:"JWT"})),be(JSON.stringify(_n)),""].join(".")}function Xe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ne(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function Ke(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Re){return!1}}function At(){return"object"==typeof self&&self.self===self}function On(){var Re="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Re&&void 0!==Re.id}function Lt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ct(){return Xe().indexOf("Electron/")>=0}function $t(){var Re=Xe();return Re.indexOf("MSIE ")>=0||Re.indexOf("Trident/")>=0}function Rt(){return Xe().indexOf("MSAppHost/")>=0}function En(){return!1}function Dt(){return!Ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var at=function(Re){function Pe(Ye,et,tt){var zt=Re.call(this,et)||this;return zt.code=Ye,zt.customData=tt,zt.name="FirebaseError",Object.setPrototypeOf(zt,Pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(zt,tn.prototype.create),zt}return(0,P.ZT)(Pe,Re),Pe}(Error),tn=function(){function Re(Pe,Ye,et){this.service=Pe,this.serviceName=Ye,this.errors=et}return Re.prototype.create=function(Pe){for(var Ye=[],et=1;et<arguments.length;et++)Ye[et-1]=arguments[et];var tt=Ye[0]||{},zt=this.service+"/"+Pe,_n=this.errors[Pe],rr=_n?ln(_n,tt):"Error",Pn=this.serviceName+": "+rr+" ("+zt+").",Ln=new at(zt,Pn,tt);return Ln},Re}();function ln(Re,Pe){return Re.replace(Tn,function(Ye,et){var tt=Pe[et];return null!=tt?String(tt):"<"+et+"?>"})}var Tn=/\{\$([^}]+)}/g;function sn(Re){return JSON.parse(Re)}function jt(Re){return JSON.stringify(Re)}var Nt=function(Re){var Pe={},Ye={},et={},tt="";try{var zt=Re.split(".");Pe=sn(se(zt[0])||""),Ye=sn(se(zt[1])||""),tt=zt[2],et=Ye.d||{},delete Ye.d}catch(_n){}return{header:Pe,claims:Ye,data:et,signature:tt}},Fn=function(Re){var Ye=Nt(Re).claims;return!!Ye&&"object"==typeof Ye&&Ye.hasOwnProperty("iat")},Cn=function(Re){var Pe=Nt(Re).claims;return"object"==typeof Pe&&!0===Pe.admin};function sr(Re,Pe){return Object.prototype.hasOwnProperty.call(Re,Pe)}function zn(Re,Pe){if(Object.prototype.hasOwnProperty.call(Re,Pe))return Re[Pe]}function Bn(Re){for(var Pe in Re)if(Object.prototype.hasOwnProperty.call(Re,Pe))return!1;return!0}function Xn(Re,Pe,Ye){var et={};for(var tt in Re)Object.prototype.hasOwnProperty.call(Re,tt)&&(et[tt]=Pe.call(Ye,Re[tt],tt,Re));return et}function Oi(Re){for(var Pe=[],Ye=function(Pn,Ln){Array.isArray(Ln)?Ln.forEach(function(ii){Pe.push(encodeURIComponent(Pn)+"="+encodeURIComponent(ii))}):Pe.push(encodeURIComponent(Pn)+"="+encodeURIComponent(Ln))},et=0,tt=Object.entries(Re);et<tt.length;et++){var zt=tt[et];Ye(zt[0],zt[1])}return Pe.length?"&"+Pe.join("&"):""}var jn=function(){function Re(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var Pe=1;Pe<this.blockSize;++Pe)this.pad_[Pe]=0;this.reset()}return Re.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Re.prototype.compress_=function(Pe,Ye){Ye||(Ye=0);var et=this.W_;if("string"==typeof Pe)for(var tt=0;tt<16;tt++)et[tt]=Pe.charCodeAt(Ye)<<24|Pe.charCodeAt(Ye+1)<<16|Pe.charCodeAt(Ye+2)<<8|Pe.charCodeAt(Ye+3),Ye+=4;else for(tt=0;tt<16;tt++)et[tt]=Pe[Ye]<<24|Pe[Ye+1]<<16|Pe[Ye+2]<<8|Pe[Ye+3],Ye+=4;for(tt=16;tt<80;tt++)et[tt]=4294967295&((zt=et[tt-3]^et[tt-8]^et[tt-14]^et[tt-16])<<1|zt>>>31);var jr,Kr,_n=this.chain_[0],rr=this.chain_[1],Pn=this.chain_[2],Ln=this.chain_[3],ii=this.chain_[4];for(tt=0;tt<80;tt++){tt<40?tt<20?(jr=Ln^rr&(Pn^Ln),Kr=1518500249):(jr=rr^Pn^Ln,Kr=1859775393):tt<60?(jr=rr&Pn|Ln&(rr|Pn),Kr=2400959708):(jr=rr^Pn^Ln,Kr=3395469782);var zt=(_n<<5|_n>>>27)+jr+ii+Kr+et[tt]&4294967295;ii=Ln,Ln=Pn,Pn=4294967295&(rr<<30|rr>>>2),rr=_n,_n=zt}this.chain_[0]=this.chain_[0]+_n&4294967295,this.chain_[1]=this.chain_[1]+rr&4294967295,this.chain_[2]=this.chain_[2]+Pn&4294967295,this.chain_[3]=this.chain_[3]+Ln&4294967295,this.chain_[4]=this.chain_[4]+ii&4294967295},Re.prototype.update=function(Pe,Ye){if(null!=Pe){void 0===Ye&&(Ye=Pe.length);for(var et=Ye-this.blockSize,tt=0,zt=this.buf_,_n=this.inbuf_;tt<Ye;){if(0===_n)for(;tt<=et;)this.compress_(Pe,tt),tt+=this.blockSize;if("string"==typeof Pe){for(;tt<Ye;)if(zt[_n]=Pe.charCodeAt(tt),++tt,++_n===this.blockSize){this.compress_(zt),_n=0;break}}else for(;tt<Ye;)if(zt[_n]=Pe[tt],++tt,++_n===this.blockSize){this.compress_(zt),_n=0;break}}this.inbuf_=_n,this.total_+=Ye}},Re.prototype.digest=function(){var Pe=[],Ye=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var et=this.blockSize-1;et>=56;et--)this.buf_[et]=255&Ye,Ye/=256;this.compress_(this.buf_);var tt=0;for(et=0;et<5;et++)for(var zt=24;zt>=0;zt-=8)Pe[tt]=this.chain_[et]>>zt&255,++tt;return Pe},Re}();function Vn(Re,Pe){var Ye=new Qt(Re,Pe);return Ye.subscribe.bind(Ye)}var Qt=function(){function Re(Pe,Ye){var et=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ye,this.task.then(function(){Pe(et)}).catch(function(tt){et.error(tt)})}return Re.prototype.next=function(Pe){this.forEachObserver(function(Ye){Ye.next(Pe)})},Re.prototype.error=function(Pe){this.forEachObserver(function(Ye){Ye.error(Pe)}),this.close(Pe)},Re.prototype.complete=function(){this.forEachObserver(function(Pe){Pe.complete()}),this.close()},Re.prototype.subscribe=function(Pe,Ye,et){var zt,tt=this;if(void 0===Pe&&void 0===Ye&&void 0===et)throw new Error("Missing Observer.");void 0===(zt=function(Re,Pe){if("object"!=typeof Re||null===Re)return!1;for(var Ye=0,et=["next","error","complete"];Ye<et.length;Ye++){var tt=et[Ye];if(tt in Re&&"function"==typeof Re[tt])return!0}return!1}(Pe)?Pe:{next:Pe,error:Ye,complete:et}).next&&(zt.next=$n),void 0===zt.error&&(zt.error=$n),void 0===zt.complete&&(zt.complete=$n);var _n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{tt.finalError?zt.error(tt.finalError):zt.complete()}catch(rr){}}),this.observers.push(zt),_n},Re.prototype.unsubscribeOne=function(Pe){void 0===this.observers||void 0===this.observers[Pe]||(delete this.observers[Pe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Re.prototype.forEachObserver=function(Pe){if(!this.finalized)for(var Ye=0;Ye<this.observers.length;Ye++)this.sendOne(Ye,Pe)},Re.prototype.sendOne=function(Pe,Ye){var et=this;this.task.then(function(){if(void 0!==et.observers&&void 0!==et.observers[Pe])try{Ye(et.observers[Pe])}catch(tt){"undefined"!=typeof console&&console.error&&console.error(tt)}})},Re.prototype.close=function(Pe){var Ye=this;this.finalized||(this.finalized=!0,void 0!==Pe&&(this.finalError=Pe),this.task.then(function(){Ye.observers=void 0,Ye.onNoObservers=void 0}))},Re}();function $n(){}var Tt=function(Re,Pe,Ye,et){var tt;if(et<Pe?tt="at least "+Pe:et>Ye&&(tt=0===Ye?"none":"no more than "+Ye),tt)throw new Error(Re+" failed: Was called with "+et+(1===et?" argument.":" arguments.")+" Expects "+tt+".")};function $e(Re,Pe){return Re+" failed: "+Pe+" argument "}function Mt(Re,Pe,Ye,et){if((!et||Ye)&&"function"!=typeof Ye)throw new Error($e(Re,Pe)+"must be a valid function.")}function Pt(Re,Pe,Ye,et){if((!et||Ye)&&("object"!=typeof Ye||null===Ye))throw new Error($e(Re,Pe)+"must be a valid context object.")}var an=function(Re){for(var Pe=[],Ye=0,et=0;et<Re.length;et++){var tt=Re.charCodeAt(et);if(tt>=55296&&tt<=56319){var zt=tt-55296;et++,J(et<Re.length,"Surrogate pair missing trail surrogate."),tt=65536+(zt<<10)+(Re.charCodeAt(et)-56320)}tt<128?Pe[Ye++]=tt:tt<2048?(Pe[Ye++]=tt>>6|192,Pe[Ye++]=63&tt|128):tt<65536?(Pe[Ye++]=tt>>12|224,Pe[Ye++]=tt>>6&63|128,Pe[Ye++]=63&tt|128):(Pe[Ye++]=tt>>18|240,Pe[Ye++]=tt>>12&63|128,Pe[Ye++]=tt>>6&63|128,Pe[Ye++]=63&tt|128)}return Pe},Ot=function(Re){for(var Pe=0,Ye=0;Ye<Re.length;Ye++){var et=Re.charCodeAt(Ye);et<128?Pe++:et<2048?Pe+=2:et>=55296&&et<=56319?(Pe+=4,Ye++):Pe+=3}return Pe};function qt(Re){return Re&&Re._delegate?Re._delegate:Re}},2329:(Ht,it,K)=>{"use strict";K.d(it,{Z:()=>P.Z});var P=K(9759),J="8.10.0";P.Z.registerVersion("firebase",J,"app"),P.Z.SDK_VERSION=J},6215:(Ht,it,K)=>{"use strict";K.d(it,{X:()=>J});var P=K(9765),g=K(7971);class J extends P.xQ{constructor(Ve){super(),this._value=Ve}get value(){return this.getValue()}_subscribe(Ve){const we=super._subscribe(Ve);return we&&!we.closed&&Ve.next(this._value),we}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new g.N;return this._value}next(Ve){super.next(this._value=Ve)}}},7574:(Ht,it,K)=>{"use strict";K.d(it,{y:()=>Ae});var P=K(7393),J=K(9181),C=K(6490),we=K(6554),Ne=K(4487);var se=K(2494);let Ae=(()=>{class Ee{constructor(Ue){this._isScalar=!1,Ue&&(this._subscribe=Ue)}lift(Ue){const Xe=new Ee;return Xe.source=this,Xe.operator=Ue,Xe}subscribe(Ue,Xe,ne){const{operator:Ke}=this,At=function(Ee,Oe,Ue){if(Ee){if(Ee instanceof P.L)return Ee;if(Ee[J.b])return Ee[J.b]()}return Ee||Oe||Ue?new P.L(Ee,Oe,Ue):new P.L(C.c)}(Ue,Xe,ne);if(At.add(Ke?Ke.call(At,this.source):this.source||se.v.useDeprecatedSynchronousErrorHandling&&!At.syncErrorThrowable?this._subscribe(At):this._trySubscribe(At)),se.v.useDeprecatedSynchronousErrorHandling&&At.syncErrorThrowable&&(At.syncErrorThrowable=!1,At.syncErrorThrown))throw At.syncErrorValue;return At}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(Xe){se.v.useDeprecatedSynchronousErrorHandling&&(Ue.syncErrorThrown=!0,Ue.syncErrorValue=Xe),function(Ee){for(;Ee;){const{closed:Oe,destination:Ue,isStopped:Xe}=Ee;if(Oe||Xe)return!1;Ee=Ue&&Ue instanceof P.L?Ue:null}return!0}(Ue)?Ue.error(Xe):console.warn(Xe)}}forEach(Ue,Xe){return new(Xe=ge(Xe))((ne,Ke)=>{let At;At=this.subscribe(On=>{try{Ue(On)}catch(Lt){Ke(Lt),At&&At.unsubscribe()}},Ke,ne)})}_subscribe(Ue){const{source:Xe}=this;return Xe&&Xe.subscribe(Ue)}[we.L](){return this}pipe(...Ue){return 0===Ue.length?this:function(Ee){return 0===Ee.length?Ne.y:1===Ee.length?Ee[0]:function(Ue){return Ee.reduce((Xe,ne)=>ne(Xe),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=ge(Ue))((Xe,ne)=>{let Ke;this.subscribe(At=>Ke=At,At=>ne(At),()=>Xe(Ke))})}}return Ee.create=Oe=>new Ee(Oe),Ee})();function ge(Ee){if(Ee||(Ee=se.v.Promise||Promise),!Ee)throw new Error("no Promise impl found");return Ee}},6490:(Ht,it,K)=>{"use strict";K.d(it,{c:()=>J});var P=K(2494),g=K(4449);const J={closed:!0,next(C){},error(C){if(P.v.useDeprecatedSynchronousErrorHandling)throw C;(0,g.z)(C)},complete(){}}},5197:(Ht,it,K)=>{"use strict";K.d(it,{L:()=>g});var P=K(7393);class g extends P.L{notifyNext(C,Ve,we,Ne,he){this.destination.next(Ve)}notifyError(C,Ve){this.destination.error(C)}notifyComplete(C){this.destination.complete()}}},9765:(Ht,it,K)=>{"use strict";K.d(it,{Yc:()=>Ne,xQ:()=>he});var P=K(7574),g=K(7393),J=K(5319),C=K(7971),Ve=K(8858),we=K(9181);class Ne extends g.L{constructor(Ae){super(Ae),this.destination=Ae}}let he=(()=>{class se extends P.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[we.b](){return new Ne(this)}lift(ge){const Ee=new be(this,this);return Ee.operator=ge,Ee}next(ge){if(this.closed)throw new C.N;if(!this.isStopped){const{observers:Ee}=this,Oe=Ee.length,Ue=Ee.slice();for(let Xe=0;Xe<Oe;Xe++)Ue[Xe].next(ge)}}error(ge){if(this.closed)throw new C.N;this.hasError=!0,this.thrownError=ge,this.isStopped=!0;const{observers:Ee}=this,Oe=Ee.length,Ue=Ee.slice();for(let Xe=0;Xe<Oe;Xe++)Ue[Xe].error(ge);this.observers.length=0}complete(){if(this.closed)throw new C.N;this.isStopped=!0;const{observers:ge}=this,Ee=ge.length,Oe=ge.slice();for(let Ue=0;Ue<Ee;Ue++)Oe[Ue].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(ge){if(this.closed)throw new C.N;return super._trySubscribe(ge)}_subscribe(ge){if(this.closed)throw new C.N;return this.hasError?(ge.error(this.thrownError),J.w.EMPTY):this.isStopped?(ge.complete(),J.w.EMPTY):(this.observers.push(ge),new Ve.W(this,ge))}asObservable(){const ge=new P.y;return ge.source=this,ge}}return se.create=(Ae,ge)=>new be(Ae,ge),se})();class be extends he{constructor(Ae,ge){super(),this.destination=Ae,this.source=ge}next(Ae){const{destination:ge}=this;ge&&ge.next&&ge.next(Ae)}error(Ae){const{destination:ge}=this;ge&&ge.error&&this.destination.error(Ae)}complete(){const{destination:Ae}=this;Ae&&Ae.complete&&this.destination.complete()}_subscribe(Ae){const{source:ge}=this;return ge?this.source.subscribe(Ae):J.w.EMPTY}}},8858:(Ht,it,K)=>{"use strict";K.d(it,{W:()=>g});var P=K(5319);class g extends P.w{constructor(C,Ve){super(),this.subject=C,this.subscriber=Ve,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const C=this.subject,Ve=C.observers;if(this.subject=null,!Ve||0===Ve.length||C.isStopped||C.closed)return;const we=Ve.indexOf(this.subscriber);-1!==we&&Ve.splice(we,1)}}},7393:(Ht,it,K)=>{"use strict";K.d(it,{L:()=>Ne});var P=K(9105),g=K(6490),J=K(5319),C=K(9181),Ve=K(2494),we=K(4449);class Ne extends J.w{constructor(se,Ae,ge){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=g.c;break;case 1:if(!se){this.destination=g.c;break}if("object"==typeof se){se instanceof Ne?(this.syncErrorThrowable=se.syncErrorThrowable,this.destination=se,se.add(this)):(this.syncErrorThrowable=!0,this.destination=new he(this,se));break}default:this.syncErrorThrowable=!0,this.destination=new he(this,se,Ae,ge)}}[C.b](){return this}static create(se,Ae,ge){const Ee=new Ne(se,Ae,ge);return Ee.syncErrorThrowable=!1,Ee}next(se){this.isStopped||this._next(se)}error(se){this.isStopped||(this.isStopped=!0,this._error(se))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(se){this.destination.next(se)}_error(se){this.destination.error(se),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:se}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=se,this}}class he extends Ne{constructor(se,Ae,ge,Ee){super(),this._parentSubscriber=se;let Oe,Ue=this;(0,P.m)(Ae)?Oe=Ae:Ae&&(Oe=Ae.next,ge=Ae.error,Ee=Ae.complete,Ae!==g.c&&(Ue=Object.create(Ae),(0,P.m)(Ue.unsubscribe)&&this.add(Ue.unsubscribe.bind(Ue)),Ue.unsubscribe=this.unsubscribe.bind(this))),this._context=Ue,this._next=Oe,this._error=ge,this._complete=Ee}next(se){if(!this.isStopped&&this._next){const{_parentSubscriber:Ae}=this;Ve.v.useDeprecatedSynchronousErrorHandling&&Ae.syncErrorThrowable?this.__tryOrSetError(Ae,this._next,se)&&this.unsubscribe():this.__tryOrUnsub(this._next,se)}}error(se){if(!this.isStopped){const{_parentSubscriber:Ae}=this,{useDeprecatedSynchronousErrorHandling:ge}=Ve.v;if(this._error)ge&&Ae.syncErrorThrowable?(this.__tryOrSetError(Ae,this._error,se),this.unsubscribe()):(this.__tryOrUnsub(this._error,se),this.unsubscribe());else if(Ae.syncErrorThrowable)ge?(Ae.syncErrorValue=se,Ae.syncErrorThrown=!0):(0,we.z)(se),this.unsubscribe();else{if(this.unsubscribe(),ge)throw se;(0,we.z)(se)}}}complete(){if(!this.isStopped){const{_parentSubscriber:se}=this;if(this._complete){const Ae=()=>this._complete.call(this._context);Ve.v.useDeprecatedSynchronousErrorHandling&&se.syncErrorThrowable?(this.__tryOrSetError(se,Ae),this.unsubscribe()):(this.__tryOrUnsub(Ae),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(se,Ae){try{se.call(this._context,Ae)}catch(ge){if(this.unsubscribe(),Ve.v.useDeprecatedSynchronousErrorHandling)throw ge;(0,we.z)(ge)}}__tryOrSetError(se,Ae,ge){if(!Ve.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Ae.call(this._context,ge)}catch(Ee){return Ve.v.useDeprecatedSynchronousErrorHandling?(se.syncErrorValue=Ee,se.syncErrorThrown=!0,!0):((0,we.z)(Ee),!0)}return!1}_unsubscribe(){const{_parentSubscriber:se}=this;this._context=null,this._parentSubscriber=null,se.unsubscribe()}}},5319:(Ht,it,K)=>{"use strict";K.d(it,{w:()=>we});var P=K(9796),g=K(1555),J=K(9105);const Ve=(()=>{function he(be){return Error.call(this),this.message=be?`${be.length} errors occurred during unsubscription:\n${be.map((se,Ae)=>`${Ae+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=be,this}return he.prototype=Object.create(Error.prototype),he})();class we{constructor(be){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,be&&(this._ctorUnsubscribe=!0,this._unsubscribe=be)}unsubscribe(){let be;if(this.closed)return;let{_parentOrParents:se,_ctorUnsubscribe:Ae,_unsubscribe:ge,_subscriptions:Ee}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,se instanceof we)se.remove(this);else if(null!==se)for(let Oe=0;Oe<se.length;++Oe)se[Oe].remove(this);if((0,J.m)(ge)){Ae&&(this._unsubscribe=void 0);try{ge.call(this)}catch(Oe){be=Oe instanceof Ve?Ne(Oe.errors):[Oe]}}if((0,P.k)(Ee)){let Oe=-1,Ue=Ee.length;for(;++Oe<Ue;){const Xe=Ee[Oe];if((0,g.K)(Xe))try{Xe.unsubscribe()}catch(ne){be=be||[],ne instanceof Ve?be=be.concat(Ne(ne.errors)):be.push(ne)}}}if(be)throw new Ve(be)}add(be){let se=be;if(!be)return we.EMPTY;switch(typeof be){case"function":se=new we(be);case"object":if(se===this||se.closed||"function"!=typeof se.unsubscribe)return se;if(this.closed)return se.unsubscribe(),se;if(!(se instanceof we)){const Ee=se;se=new we,se._subscriptions=[Ee]}break;default:throw new Error("unrecognized teardown "+be+" added to Subscription.")}let{_parentOrParents:Ae}=se;if(null===Ae)se._parentOrParents=this;else if(Ae instanceof we){if(Ae===this)return se;se._parentOrParents=[Ae,this]}else{if(-1!==Ae.indexOf(this))return se;Ae.push(this)}const ge=this._subscriptions;return null===ge?this._subscriptions=[se]:ge.push(se),se}remove(be){const se=this._subscriptions;if(se){const Ae=se.indexOf(be);-1!==Ae&&se.splice(Ae,1)}}}var he;function Ne(he){return he.reduce((be,se)=>be.concat(se instanceof Ve?se.errors:se),[])}we.EMPTY=((he=new we).closed=!0,he)},2494:(Ht,it,K)=>{"use strict";K.d(it,{v:()=>g});let P=!1;const g={Promise:void 0,set useDeprecatedSynchronousErrorHandling(J){if(J){const C=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+C.stack)}else P&&console.log("RxJS: Back to a better error behavior. Thank you. <3");P=J},get useDeprecatedSynchronousErrorHandling(){return P}}},5345:(Ht,it,K)=>{"use strict";K.d(it,{IY:()=>C,Ds:()=>we,ft:()=>he});var P=K(7393),g=K(7574),J=K(7444);class C extends P.L{constructor(se){super(),this.parent=se}_next(se){this.parent.notifyNext(se)}_error(se){this.parent.notifyError(se),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class we extends P.L{notifyNext(se){this.destination.next(se)}notifyError(se){this.destination.error(se)}notifyComplete(){this.destination.complete()}}function he(be,se){if(se.closed)return;if(be instanceof g.y)return be.subscribe(se);let Ae;try{Ae=(0,J.s)(be)(se)}catch(ge){se.error(ge)}return Ae}},2441:(Ht,it,K)=>{"use strict";K.d(it,{c:()=>Ve,N:()=>we});var P=K(9765),g=K(7574),J=K(5319),C=K(1307);class Ve extends g.y{constructor(Ae,ge){super(),this.source=Ae,this.subjectFactory=ge,this._refCount=0,this._isComplete=!1}_subscribe(Ae){return this.getSubject().subscribe(Ae)}getSubject(){const Ae=this._subject;return(!Ae||Ae.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Ae=this._connection;return Ae||(this._isComplete=!1,Ae=this._connection=new J.w,Ae.add(this.source.subscribe(new Ne(this.getSubject(),this))),Ae.closed&&(this._connection=null,Ae=J.w.EMPTY)),Ae}refCount(){return(0,C.x)()(this)}}const we=(()=>{const se=Ve.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:se._subscribe},_isComplete:{value:se._isComplete,writable:!0},getSubject:{value:se.getSubject},connect:{value:se.connect},refCount:{value:se.refCount}}})();class Ne extends P.Yc{constructor(Ae,ge){super(Ae),this.connectable=ge}_error(Ae){this._unsubscribe(),super._error(Ae)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Ae=this.connectable;if(Ae){this.connectable=null;const ge=Ae._connection;Ae._refCount=0,Ae._subject=null,Ae._connection=null,ge&&ge.unsubscribe()}}}},8071:(Ht,it,K)=>{"use strict";K.d(it,{z:()=>C});var P=K(5917),g=K(3282);function C(...Ve){return(0,g.J)(1)((0,P.of)(...Ve))}},1439:(Ht,it,K)=>{"use strict";K.d(it,{P:()=>C});var P=K(7574),g=K(4402),J=K(9193);function C(Ve){return new P.y(we=>{let Ne;try{Ne=Ve()}catch(be){return void we.error(be)}return(Ne?(0,g.D)(Ne):(0,J.c)()).subscribe(we)})}},9193:(Ht,it,K)=>{"use strict";K.d(it,{E:()=>g,c:()=>J});var P=K(7574);const g=new P.y(Ve=>Ve.complete());function J(Ve){return Ve?function(Ve){return new P.y(we=>Ve.schedule(()=>we.complete()))}(Ve):g}},4402:(Ht,it,K)=>{"use strict";K.d(it,{D:()=>Ue});var P=K(7574),g=K(7444),J=K(5319),C=K(6554),Ne=K(4087),he=K(377),Ae=K(4072),ge=K(9489);function Ue(Xe,ne){return ne?function(Xe,ne){if(null!=Xe){if(function(Xe){return Xe&&"function"==typeof Xe[C.L]}(Xe))return function(Xe,ne){return new P.y(Ke=>{const At=new J.w;return At.add(ne.schedule(()=>{const On=Xe[C.L]();At.add(On.subscribe({next(Lt){At.add(ne.schedule(()=>Ke.next(Lt)))},error(Lt){At.add(ne.schedule(()=>Ke.error(Lt)))},complete(){At.add(ne.schedule(()=>Ke.complete()))}}))})),At})}(Xe,ne);if((0,Ae.t)(Xe))return function(Xe,ne){return new P.y(Ke=>{const At=new J.w;return At.add(ne.schedule(()=>Xe.then(On=>{At.add(ne.schedule(()=>{Ke.next(On),At.add(ne.schedule(()=>Ke.complete()))}))},On=>{At.add(ne.schedule(()=>Ke.error(On)))}))),At})}(Xe,ne);if((0,ge.z)(Xe))return(0,Ne.r)(Xe,ne);if(function(Xe){return Xe&&"function"==typeof Xe[he.hZ]}(Xe)||"string"==typeof Xe)return function(Xe,ne){if(!Xe)throw new Error("Iterable cannot be null");return new P.y(Ke=>{const At=new J.w;let On;return At.add(()=>{On&&"function"==typeof On.return&&On.return()}),At.add(ne.schedule(()=>{On=Xe[he.hZ](),At.add(ne.schedule(function(){if(Ke.closed)return;let Lt,ct;try{const $t=On.next();Lt=$t.value,ct=$t.done}catch($t){return void Ke.error($t)}ct?Ke.complete():(Ke.next(Lt),this.schedule())}))})),At})}(Xe,ne)}throw new TypeError((null!==Xe&&typeof Xe||Xe)+" is not observable")}(Xe,ne):Xe instanceof P.y?Xe:new P.y((0,g.s)(Xe))}},6693:(Ht,it,K)=>{"use strict";K.d(it,{n:()=>C});var P=K(7574),g=K(5015),J=K(4087);function C(Ve,we){return we?(0,J.r)(Ve,we):new P.y((0,g.V)(Ve))}},6682:(Ht,it,K)=>{"use strict";K.d(it,{T:()=>Ve});var P=K(7574),g=K(4869),J=K(3282),C=K(6693);function Ve(...we){let Ne=Number.POSITIVE_INFINITY,he=null,be=we[we.length-1];return(0,g.K)(be)?(he=we.pop(),we.length>1&&"number"==typeof we[we.length-1]&&(Ne=we.pop())):"number"==typeof be&&(Ne=we.pop()),null===he&&1===we.length&&we[0]instanceof P.y?we[0]:(0,J.J)(Ne)((0,C.n)(we,he))}},5917:(Ht,it,K)=>{"use strict";K.d(it,{of:()=>C});var P=K(4869),g=K(6693),J=K(4087);function C(...Ve){let we=Ve[Ve.length-1];return(0,P.K)(we)?(Ve.pop(),(0,J.r)(Ve,we)):(0,g.n)(Ve)}},4612:(Ht,it,K)=>{"use strict";K.d(it,{b:()=>g});var P=K(9773);function g(J,C){return(0,P.zg)(J,C,1)}},4395:(Ht,it,K)=>{"use strict";K.d(it,{b:()=>J});var P=K(7393),g=K(3637);function J(Ne,he=g.P){return be=>be.lift(new C(Ne,he))}class C{constructor(he,be){this.dueTime=he,this.scheduler=be}call(he,be){return be.subscribe(new Ve(he,this.dueTime,this.scheduler))}}class Ve extends P.L{constructor(he,be,se){super(he),this.dueTime=be,this.scheduler=se,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(he){this.clearDebounce(),this.lastValue=he,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(we,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:he}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(he)}}clearDebounce(){const he=this.debouncedSubscription;null!==he&&(this.remove(he),he.unsubscribe(),this.debouncedSubscription=null)}}function we(Ne){Ne.debouncedNext()}},5242:(Ht,it,K)=>{"use strict";K.d(it,{d:()=>g});var P=K(7393);function g(Ve=null){return we=>we.lift(new J(Ve))}class J{constructor(we){this.defaultValue=we}call(we,Ne){return Ne.subscribe(new C(we,this.defaultValue))}}class C extends P.L{constructor(we,Ne){super(we),this.defaultValue=Ne,this.isEmpty=!0}_next(we){this.isEmpty=!1,this.destination.next(we)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7519:(Ht,it,K)=>{"use strict";K.d(it,{x:()=>g});var P=K(7393);function g(Ve,we){return Ne=>Ne.lift(new J(Ve,we))}class J{constructor(we,Ne){this.compare=we,this.keySelector=Ne}call(we,Ne){return Ne.subscribe(new C(we,this.compare,this.keySelector))}}class C extends P.L{constructor(we,Ne,he){super(we),this.keySelector=he,this.hasKey=!1,"function"==typeof Ne&&(this.compare=Ne)}compare(we,Ne){return we===Ne}_next(we){let Ne;try{const{keySelector:be}=this;Ne=be?be(we):we}catch(be){return this.destination.error(be)}let he=!1;if(this.hasKey)try{const{compare:be}=this;he=be(this.key,Ne)}catch(be){return this.destination.error(be)}else this.hasKey=!0;he||(this.key=Ne,this.destination.next(we))}}},5435:(Ht,it,K)=>{"use strict";K.d(it,{h:()=>g});var P=K(7393);function g(Ve,we){return function(he){return he.lift(new J(Ve,we))}}class J{constructor(we,Ne){this.predicate=we,this.thisArg=Ne}call(we,Ne){return Ne.subscribe(new C(we,this.predicate,this.thisArg))}}class C extends P.L{constructor(we,Ne,he){super(we),this.predicate=Ne,this.thisArg=he,this.count=0}_next(we){let Ne;try{Ne=this.predicate.call(this.thisArg,we,this.count++)}catch(he){return void this.destination.error(he)}Ne&&this.destination.next(we)}}},8049:(Ht,it,K)=>{"use strict";K.d(it,{P:()=>Ne});var P=K(3410),g=K(5435),J=K(5257),C=K(5242),Ve=K(4635),we=K(4487);function Ne(he,be){const se=arguments.length>=2;return Ae=>Ae.pipe(he?(0,g.h)((ge,Ee)=>he(ge,Ee,Ae)):we.y,(0,J.q)(1),se?(0,C.d)(be):(0,Ve.T)(()=>new P.K))}},8002:(Ht,it,K)=>{"use strict";K.d(it,{U:()=>g});var P=K(7393);function g(Ve,we){return function(he){if("function"!=typeof Ve)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return he.lift(new J(Ve,we))}}class J{constructor(we,Ne){this.project=we,this.thisArg=Ne}call(we,Ne){return Ne.subscribe(new C(we,this.project,this.thisArg))}}class C extends P.L{constructor(we,Ne,he){super(we),this.project=Ne,this.count=0,this.thisArg=he||this}_next(we){let Ne;try{Ne=this.project.call(this.thisArg,we,this.count++)}catch(he){return void this.destination.error(he)}this.destination.next(Ne)}}},3282:(Ht,it,K)=>{"use strict";K.d(it,{J:()=>J});var P=K(9773),g=K(4487);function J(C=Number.POSITIVE_INFINITY){return(0,P.zg)(g.y,C)}},9773:(Ht,it,K)=>{"use strict";K.d(it,{zg:()=>C});var P=K(8002),g=K(4402),J=K(5345);function C(he,be,se=Number.POSITIVE_INFINITY){return"function"==typeof be?Ae=>Ae.pipe(C((ge,Ee)=>(0,g.D)(he(ge,Ee)).pipe((0,P.U)((Oe,Ue)=>be(ge,Oe,Ee,Ue))),se)):("number"==typeof be&&(se=be),Ae=>Ae.lift(new Ve(he,se)))}class Ve{constructor(be,se=Number.POSITIVE_INFINITY){this.project=be,this.concurrent=se}call(be,se){return se.subscribe(new we(be,this.project,this.concurrent))}}class we extends J.Ds{constructor(be,se,Ae=Number.POSITIVE_INFINITY){super(be),this.project=se,this.concurrent=Ae,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(be){this.active<this.concurrent?this._tryNext(be):this.buffer.push(be)}_tryNext(be){let se;const Ae=this.index++;try{se=this.project(be,Ae)}catch(ge){return void this.destination.error(ge)}this.active++,this._innerSub(se)}_innerSub(be){const se=new J.IY(this),Ae=this.destination;Ae.add(se);const ge=(0,J.ft)(be,se);ge!==se&&Ae.add(ge)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(be){this.destination.next(be)}notifyComplete(){const be=this.buffer;this.active--,be.length>0?this._next(be.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Ht,it,K)=>{"use strict";K.d(it,{ht:()=>Ae,QV:()=>be});var P=K(7393),g=K(9193),J=K(5917),C=K(7574);class he{constructor(Oe,Ue,Xe){this.kind=Oe,this.value=Ue,this.error=Xe,this.hasValue="N"===Oe}observe(Oe){switch(this.kind){case"N":return Oe.next&&Oe.next(this.value);case"E":return Oe.error&&Oe.error(this.error);case"C":return Oe.complete&&Oe.complete()}}do(Oe,Ue,Xe){switch(this.kind){case"N":return Oe&&Oe(this.value);case"E":return Ue&&Ue(this.error);case"C":return Xe&&Xe()}}accept(Oe,Ue,Xe){return Oe&&"function"==typeof Oe.next?this.observe(Oe):this.do(Oe,Ue,Xe)}toObservable(){switch(this.kind){case"N":return(0,J.of)(this.value);case"E":return Ee=this.error,new C.y(Ue=>Ue.error(Ee));case"C":return(0,g.c)()}var Ee;throw new Error("unexpected notification kind value")}static createNext(Oe){return void 0!==Oe?new he("N",Oe):he.undefinedValueNotification}static createError(Oe){return new he("E",void 0,Oe)}static createComplete(){return he.completeNotification}}function be(Ee,Oe=0){return function(Xe){return Xe.lift(new se(Ee,Oe))}}he.completeNotification=new he("C"),he.undefinedValueNotification=new he("N",void 0);class se{constructor(Oe,Ue=0){this.scheduler=Oe,this.delay=Ue}call(Oe,Ue){return Ue.subscribe(new Ae(Oe,this.scheduler,this.delay))}}class Ae extends P.L{constructor(Oe,Ue,Xe=0){super(Oe),this.scheduler=Ue,this.delay=Xe}static dispatch(Oe){const{notification:Ue,destination:Xe}=Oe;Ue.observe(Xe),this.unsubscribe()}scheduleMessage(Oe){this.destination.add(this.scheduler.schedule(Ae.dispatch,this.delay,new ge(Oe,this.destination)))}_next(Oe){this.scheduleMessage(he.createNext(Oe))}_error(Oe){this.scheduleMessage(he.createError(Oe)),this.unsubscribe()}_complete(){this.scheduleMessage(he.createComplete()),this.unsubscribe()}}class ge{constructor(Oe,Ue){this.notification=Oe,this.destination=Ue}}},9328:(Ht,it,K)=>{"use strict";K.d(it,{G:()=>g});var P=K(7393);function g(){return Ve=>Ve.lift(new J)}class J{call(we,Ne){return Ne.subscribe(new C(we))}}class C extends P.L{constructor(we){super(we),this.hasPrev=!1}_next(we){let Ne;this.hasPrev?Ne=[this.prev,we]:this.hasPrev=!0,this.prev=we,Ne&&this.destination.next(Ne)}}},1307:(Ht,it,K)=>{"use strict";K.d(it,{x:()=>g});var P=K(7393);function g(){return function(we){return we.lift(new J(we))}}class J{constructor(we){this.connectable=we}call(we,Ne){const{connectable:he}=this;he._refCount++;const be=new C(we,he),se=Ne.subscribe(be);return be.closed||(be.connection=he.connect()),se}}class C extends P.L{constructor(we,Ne){super(we),this.connectable=Ne}_unsubscribe(){const{connectable:we}=this;if(!we)return void(this.connection=null);this.connectable=null;const Ne=we._refCount;if(Ne<=0)return void(this.connection=null);if(we._refCount=Ne-1,Ne>1)return void(this.connection=null);const{connection:he}=this,be=we._connection;this.connection=null,be&&(!he||be===he)&&be.unsubscribe()}}},2145:(Ht,it,K)=>{"use strict";K.d(it,{R:()=>g});var P=K(7393);function g(Ve,we){let Ne=!1;return arguments.length>=2&&(Ne=!0),function(be){return be.lift(new J(Ve,we,Ne))}}class J{constructor(we,Ne,he=!1){this.accumulator=we,this.seed=Ne,this.hasSeed=he}call(we,Ne){return Ne.subscribe(new C(we,this.accumulator,this.seed,this.hasSeed))}}class C extends P.L{constructor(we,Ne,he,be){super(we),this.accumulator=Ne,this._seed=he,this.hasSeed=be,this.index=0}get seed(){return this._seed}set seed(we){this.hasSeed=!0,this._seed=we}_next(we){if(this.hasSeed)return this._tryNext(we);this.seed=we,this.destination.next(we)}_tryNext(we){const Ne=this.index++;let he;try{he=this.accumulator(this.seed,we,Ne)}catch(be){this.destination.error(be)}this.seed=he,this.destination.next(he)}}},8819:(Ht,it,K)=>{"use strict";K.d(it,{B:()=>Ne});var P=K(2441);var C=K(1307),Ve=K(9765);function we(){return new Ve.xQ}function Ne(){return he=>(0,C.x)()(function(he,be){return function(Ae){let ge;ge="function"==typeof he?he:function(){return he};const Ee=Object.create(Ae,P.N);return Ee.source=Ae,Ee.subjectFactory=ge,Ee}}(we)(he))}},2066:(Ht,it,K)=>{"use strict";K.d(it,{d:()=>be});var P=K(9765),g=K(7771),J=K(5319),C=K(309),Ve=K(7971),we=K(8858);class Ne extends P.xQ{constructor(ge=Number.POSITIVE_INFINITY,Ee=Number.POSITIVE_INFINITY,Oe){super(),this.scheduler=Oe,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=ge<1?1:ge,this._windowTime=Ee<1?1:Ee,Ee===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(ge){if(!this.isStopped){const Ee=this._events;Ee.push(ge),Ee.length>this._bufferSize&&Ee.shift()}super.next(ge)}nextTimeWindow(ge){this.isStopped||(this._events.push(new he(this._getNow(),ge)),this._trimBufferThenGetEvents()),super.next(ge)}_subscribe(ge){const Ee=this._infiniteTimeWindow,Oe=Ee?this._events:this._trimBufferThenGetEvents(),Ue=this.scheduler,Xe=Oe.length;let ne;if(this.closed)throw new Ve.N;if(this.isStopped||this.hasError?ne=J.w.EMPTY:(this.observers.push(ge),ne=new we.W(this,ge)),Ue&&ge.add(ge=new C.ht(ge,Ue)),Ee)for(let Ke=0;Ke<Xe&&!ge.closed;Ke++)ge.next(Oe[Ke]);else for(let Ke=0;Ke<Xe&&!ge.closed;Ke++)ge.next(Oe[Ke].value);return this.hasError?ge.error(this.thrownError):this.isStopped&&ge.complete(),ne}_getNow(){return(this.scheduler||g.c).now()}_trimBufferThenGetEvents(){const ge=this._getNow(),Ee=this._bufferSize,Oe=this._windowTime,Ue=this._events,Xe=Ue.length;let ne=0;for(;ne<Xe&&!(ge-Ue[ne].time<Oe);)ne++;return Xe>Ee&&(ne=Math.max(ne,Xe-Ee)),ne>0&&Ue.splice(0,ne),Ue}}class he{constructor(ge,Ee){this.time=ge,this.value=Ee}}function be(Ae,ge,Ee){let Oe;return Oe=Ae&&"object"==typeof Ae?Ae:{bufferSize:Ae,windowTime:ge,refCount:!1,scheduler:Ee},Ue=>Ue.lift(function({bufferSize:Ae=Number.POSITIVE_INFINITY,windowTime:ge=Number.POSITIVE_INFINITY,refCount:Ee,scheduler:Oe}){let Ue,ne,Xe=0,Ke=!1,At=!1;return function(Lt){let ct;Xe++,!Ue||Ke?(Ke=!1,Ue=new Ne(Ae,ge,Oe),ct=Ue.subscribe(this),ne=Lt.subscribe({next($t){Ue.next($t)},error($t){Ke=!0,Ue.error($t)},complete(){At=!0,ne=void 0,Ue.complete()}}),At&&(ne=void 0)):ct=Ue.subscribe(this),this.add(()=>{Xe--,ct.unsubscribe(),ct=void 0,ne&&!At&&Ee&&0===Xe&&(ne.unsubscribe(),ne=void 0,Ue=void 0)})}}(Oe))}},9761:(Ht,it,K)=>{"use strict";K.d(it,{O:()=>J});var P=K(8071),g=K(4869);function J(...C){const Ve=C[C.length-1];return(0,g.K)(Ve)?(C.pop(),we=>(0,P.z)(C,we,Ve)):we=>(0,P.z)(C,we)}},9673:(Ht,it,K)=>{"use strict";K.d(it,{R:()=>Ve});var P=K(7574),g=K(4581),J=K(6561);class C extends P.y{constructor(he,be=0,se=g.e){super(),this.source=he,this.delayTime=be,this.scheduler=se,(!(0,J.k)(be)||be<0)&&(this.delayTime=0),(!se||"function"!=typeof se.schedule)&&(this.scheduler=g.e)}static create(he,be=0,se=g.e){return new C(he,be,se)}static dispatch(he){const{source:be,subscriber:se}=he;return this.add(be.subscribe(se))}_subscribe(he){return this.scheduler.schedule(C.dispatch,this.delayTime,{source:this.source,subscriber:he})}}function Ve(Ne,he=0){return function(se){return se.lift(new we(Ne,he))}}class we{constructor(he,be){this.scheduler=he,this.delay=be}call(he,be){return new C(be,this.delay,this.scheduler).subscribe(he)}}},3190:(Ht,it,K)=>{"use strict";K.d(it,{w:()=>C});var P=K(8002),g=K(4402),J=K(5345);function C(Ne,he){return"function"==typeof he?be=>be.pipe(C((se,Ae)=>(0,g.D)(Ne(se,Ae)).pipe((0,P.U)((ge,Ee)=>he(se,ge,Ae,Ee))))):be=>be.lift(new Ve(Ne))}class Ve{constructor(he){this.project=he}call(he,be){return be.subscribe(new we(he,this.project))}}class we extends J.Ds{constructor(he,be){super(he),this.project=be,this.index=0}_next(he){let be;const se=this.index++;try{be=this.project(he,se)}catch(Ae){return void this.destination.error(Ae)}this._innerSub(be)}_innerSub(he){const be=this.innerSubscription;be&&be.unsubscribe();const se=new J.IY(this),Ae=this.destination;Ae.add(se),this.innerSubscription=(0,J.ft)(he,se),this.innerSubscription!==se&&Ae.add(this.innerSubscription)}_complete(){const{innerSubscription:he}=this;(!he||he.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(he){this.destination.next(he)}}},5257:(Ht,it,K)=>{"use strict";K.d(it,{q:()=>C});var P=K(7393),g=K(7108),J=K(9193);function C(Ne){return he=>0===Ne?(0,J.c)():he.lift(new Ve(Ne))}class Ve{constructor(he){if(this.total=he,this.total<0)throw new g.W}call(he,be){return be.subscribe(new we(he,this.total))}}class we extends P.L{constructor(he,be){super(he),this.total=be,this.count=0}_next(he){const be=this.total,se=++this.count;se<=be&&(this.destination.next(he),se===be&&(this.destination.complete(),this.unsubscribe()))}}},3342:(Ht,it,K)=>{"use strict";K.d(it,{b:()=>C});var P=K(7393);function g(){}var J=K(9105);function C(Ne,he,be){return function(Ae){return Ae.lift(new Ve(Ne,he,be))}}class Ve{constructor(he,be,se){this.nextOrObserver=he,this.error=be,this.complete=se}call(he,be){return be.subscribe(new we(he,this.nextOrObserver,this.error,this.complete))}}class we extends P.L{constructor(he,be,se,Ae){super(he),this._tapNext=g,this._tapError=g,this._tapComplete=g,this._tapError=se||g,this._tapComplete=Ae||g,(0,J.m)(be)?(this._context=this,this._tapNext=be):be&&(this._context=be,this._tapNext=be.next||g,this._tapError=be.error||g,this._tapComplete=be.complete||g)}_next(he){try{this._tapNext.call(this._context,he)}catch(be){return void this.destination.error(be)}this.destination.next(he)}_error(he){try{this._tapError.call(this._context,he)}catch(be){return void this.destination.error(be)}this.destination.error(he)}_complete(){try{this._tapComplete.call(this._context)}catch(he){return void this.destination.error(he)}return this.destination.complete()}}},4635:(Ht,it,K)=>{"use strict";K.d(it,{T:()=>J});var P=K(3410),g=K(7393);function J(Ne=we){return he=>he.lift(new C(Ne))}class C{constructor(he){this.errorFactory=he}call(he,be){return be.subscribe(new Ve(he,this.errorFactory))}}class Ve extends g.L{constructor(he,be){super(he),this.errorFactory=be,this.hasValue=!1}_next(he){this.hasValue=!0,this.destination.next(he)}_complete(){if(this.hasValue)return this.destination.complete();{let he;try{he=this.errorFactory()}catch(be){he=be}this.destination.error(he)}}}function we(){return new P.K}},4087:(Ht,it,K)=>{"use strict";K.d(it,{r:()=>J});var P=K(7574),g=K(5319);function J(C,Ve){return new P.y(we=>{const Ne=new g.w;let he=0;return Ne.add(Ve.schedule(function(){he!==C.length?(we.next(C[he++]),we.closed||Ne.add(this.schedule())):we.complete()})),Ne})}},6465:(Ht,it,K)=>{"use strict";K.d(it,{o:()=>J});var P=K(5319);class g extends P.w{constructor(Ve,we){super()}schedule(Ve,we=0){return this}}class J extends g{constructor(Ve,we){super(Ve,we),this.scheduler=Ve,this.work=we,this.pending=!1}schedule(Ve,we=0){if(this.closed)return this;this.state=Ve;const Ne=this.id,he=this.scheduler;return null!=Ne&&(this.id=this.recycleAsyncId(he,Ne,we)),this.pending=!0,this.delay=we,this.id=this.id||this.requestAsyncId(he,this.id,we),this}requestAsyncId(Ve,we,Ne=0){return setInterval(Ve.flush.bind(Ve,this),Ne)}recycleAsyncId(Ve,we,Ne=0){if(null!==Ne&&this.delay===Ne&&!1===this.pending)return we;clearInterval(we)}execute(Ve,we){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ne=this._execute(Ve,we);if(Ne)return Ne;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ve,we){let he,Ne=!1;try{this.work(Ve)}catch(be){Ne=!0,he=!!be&&be||new Error(be)}if(Ne)return this.unsubscribe(),he}_unsubscribe(){const Ve=this.id,we=this.scheduler,Ne=we.actions,he=Ne.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==he&&Ne.splice(he,1),null!=Ve&&(this.id=this.recycleAsyncId(we,Ve,null)),this.delay=null}}},6102:(Ht,it,K)=>{"use strict";K.d(it,{v:()=>g});let P=(()=>{class J{constructor(Ve,we=J.now){this.SchedulerAction=Ve,this.now=we}schedule(Ve,we=0,Ne){return new this.SchedulerAction(this,Ve).schedule(Ne,we)}}return J.now=()=>Date.now(),J})();class g extends P{constructor(C,Ve=P.now){super(C,()=>g.delegate&&g.delegate!==this?g.delegate.now():Ve()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(C,Ve=0,we){return g.delegate&&g.delegate!==this?g.delegate.schedule(C,Ve,we):super.schedule(C,Ve,we)}flush(C){const{actions:Ve}=this;if(this.active)return void Ve.push(C);let we;this.active=!0;do{if(we=C.execute(C.state,C.delay))break}while(C=Ve.shift());if(this.active=!1,we){for(;C=Ve.shift();)C.unsubscribe();throw we}}}},4581:(Ht,it,K)=>{"use strict";K.d(it,{e:()=>ge,E:()=>Ae});let P=1;const g=Promise.resolve(),J={};function C(Ee){return Ee in J&&(delete J[Ee],!0)}const Ve={setImmediate(Ee){const Oe=P++;return J[Oe]=!0,g.then(()=>C(Oe)&&Ee()),Oe},clearImmediate(Ee){C(Ee)}};var Ne=K(6465),be=K(6102);const Ae=new class extends be.v{flush(Oe){this.active=!0,this.scheduled=void 0;const{actions:Ue}=this;let Xe,ne=-1,Ke=Ue.length;Oe=Oe||Ue.shift();do{if(Xe=Oe.execute(Oe.state,Oe.delay))break}while(++ne<Ke&&(Oe=Ue.shift()));if(this.active=!1,Xe){for(;++ne<Ke&&(Oe=Ue.shift());)Oe.unsubscribe();throw Xe}}}(class extends Ne.o{constructor(Oe,Ue){super(Oe,Ue),this.scheduler=Oe,this.work=Ue}requestAsyncId(Oe,Ue,Xe=0){return null!==Xe&&Xe>0?super.requestAsyncId(Oe,Ue,Xe):(Oe.actions.push(this),Oe.scheduled||(Oe.scheduled=Ve.setImmediate(Oe.flush.bind(Oe,null))))}recycleAsyncId(Oe,Ue,Xe=0){if(null!==Xe&&Xe>0||null===Xe&&this.delay>0)return super.recycleAsyncId(Oe,Ue,Xe);0===Oe.actions.length&&(Ve.clearImmediate(Ue),Oe.scheduled=void 0)}}),ge=Ae},3637:(Ht,it,K)=>{"use strict";K.d(it,{z:()=>J,P:()=>C});var P=K(6465);const J=new(K(6102).v)(P.o),C=J},7771:(Ht,it,K)=>{"use strict";K.d(it,{c:()=>we,N:()=>Ve});var P=K(6465),J=K(6102);const Ve=new class extends J.v{}(class extends P.o{constructor(he,be){super(he,be),this.scheduler=he,this.work=be}schedule(he,be=0){return be>0?super.schedule(he,be):(this.delay=be,this.state=he,this.scheduler.flush(this),this)}execute(he,be){return be>0||this.closed?super.execute(he,be):this._execute(he,be)}requestAsyncId(he,be,se=0){return null!==se&&se>0||null===se&&this.delay>0?super.requestAsyncId(he,be,se):he.flush(this)}}),we=Ve},377:(Ht,it,K)=>{"use strict";K.d(it,{hZ:()=>g});const g="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Ht,it,K)=>{"use strict";K.d(it,{L:()=>P});const P="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Ht,it,K)=>{"use strict";K.d(it,{b:()=>P});const P="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(Ht,it,K)=>{"use strict";K.d(it,{W:()=>g});const g=(()=>{function J(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return J.prototype=Object.create(Error.prototype),J})()},3410:(Ht,it,K)=>{"use strict";K.d(it,{K:()=>g});const g=(()=>{function J(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return J.prototype=Object.create(Error.prototype),J})()},7971:(Ht,it,K)=>{"use strict";K.d(it,{N:()=>g});const g=(()=>{function J(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return J.prototype=Object.create(Error.prototype),J})()},4449:(Ht,it,K)=>{"use strict";function P(g){setTimeout(()=>{throw g},0)}K.d(it,{z:()=>P})},4487:(Ht,it,K)=>{"use strict";function P(g){return g}K.d(it,{y:()=>P})},9796:(Ht,it,K)=>{"use strict";K.d(it,{k:()=>P});const P=Array.isArray||(g=>g&&"number"==typeof g.length)},9489:(Ht,it,K)=>{"use strict";K.d(it,{z:()=>P});const P=g=>g&&"number"==typeof g.length&&"function"!=typeof g},9105:(Ht,it,K)=>{"use strict";function P(g){return"function"==typeof g}K.d(it,{m:()=>P})},6561:(Ht,it,K)=>{"use strict";K.d(it,{k:()=>g});var P=K(9796);function g(J){return!(0,P.k)(J)&&J-parseFloat(J)+1>=0}},1555:(Ht,it,K)=>{"use strict";function P(g){return null!==g&&"object"==typeof g}K.d(it,{K:()=>P})},4072:(Ht,it,K)=>{"use strict";function P(g){return!!g&&"function"!=typeof g.subscribe&&"function"==typeof g.then}K.d(it,{t:()=>P})},4869:(Ht,it,K)=>{"use strict";function P(g){return g&&"function"==typeof g.schedule}K.d(it,{K:()=>P})},7444:(Ht,it,K)=>{"use strict";K.d(it,{s:()=>Ae});var P=K(5015),g=K(4449),C=K(377),we=K(6554),he=K(9489),be=K(4072),se=K(1555);const Ae=ge=>{if(ge&&"function"==typeof ge[we.L])return(ge=>Ee=>{const Oe=ge[we.L]();if("function"!=typeof Oe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Oe.subscribe(Ee)})(ge);if((0,he.z)(ge))return(0,P.V)(ge);if((0,be.t)(ge))return(ge=>Ee=>(ge.then(Oe=>{Ee.closed||(Ee.next(Oe),Ee.complete())},Oe=>Ee.error(Oe)).then(null,g.z),Ee))(ge);if(ge&&"function"==typeof ge[C.hZ])return(ge=>Ee=>{const Oe=ge[C.hZ]();for(;;){let Ue;try{Ue=Oe.next()}catch(Xe){return Ee.error(Xe),Ee}if(Ue.done){Ee.complete();break}if(Ee.next(Ue.value),Ee.closed)break}return"function"==typeof Oe.return&&Ee.add(()=>{Oe.return&&Oe.return()}),Ee})(ge);{const Oe=`You provided ${(0,se.K)(ge)?"an invalid object":`'${ge}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Oe)}}},5015:(Ht,it,K)=>{"use strict";K.d(it,{V:()=>P});const P=g=>J=>{for(let C=0,Ve=g.length;C<Ve&&!J.closed;C++)J.next(g[C]);J.complete()}},509:(Ht,it,K)=>{"use strict";K.d(it,{D:()=>Ve});var P=K(7393);class g extends P.L{constructor(Ne,he,be){super(),this.parent=Ne,this.outerValue=he,this.outerIndex=be,this.index=0}_next(Ne){this.parent.notifyNext(this.outerValue,Ne,this.outerIndex,this.index++,this)}_error(Ne){this.parent.notifyError(Ne,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var J=K(7444),C=K(7574);function Ve(we,Ne,he,be,se=new g(we,he,be)){if(!se.closed)return Ne instanceof C.y?Ne.subscribe(se):(0,J.s)(Ne)(se)}},9437:(Ht,it,K)=>{"use strict";K.r(it),K.d(it,{ChatModule:()=>yh});var P=K(8583),g=K(665),J=K(2340),C=K(7716),Ve=K(3210),we=K(2213),Ne=K(2074),he=K(1841);function be(I){return null!=I&&"false"!=`${I}`}function se(I,E=0){return function(I){return!isNaN(parseFloat(I))&&!isNaN(Number(I))}(I)?Number(I):E}function ge(I){return Array.isArray(I)?I:[I]}function Ee(I){return null==I?"":"string"==typeof I?I:`${I}px`}function Oe(I){return I instanceof C.SBq?I.nativeElement:I}var Xe=K(7574),ne=K(9765),Ke=K(4395);let At=(()=>{class I{create(m){return"undefined"==typeof MutationObserver?null:new MutationObserver(m)}}return I.\u0275fac=function(m){return new(m||I)},I.\u0275prov=C.Yz7({factory:function(){return new I},token:I,providedIn:"root"}),I})(),On=(()=>{class I{constructor(m){this._mutationObserverFactory=m,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((m,w)=>this._cleanupObserver(w))}observe(m){const w=Oe(m);return new Xe.y(G=>{const d=this._observeElement(w).subscribe(G);return()=>{d.unsubscribe(),this._unobserveElement(w)}})}_observeElement(m){if(this._observedElements.has(m))this._observedElements.get(m).count++;else{const w=new ne.xQ,G=this._mutationObserverFactory.create(c=>w.next(c));G&&G.observe(m,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(m,{observer:G,stream:w,count:1})}return this._observedElements.get(m).stream}_unobserveElement(m){this._observedElements.has(m)&&(this._observedElements.get(m).count--,this._observedElements.get(m).count||this._cleanupObserver(m))}_cleanupObserver(m){if(this._observedElements.has(m)){const{observer:w,stream:G}=this._observedElements.get(m);w&&w.disconnect(),G.complete(),this._observedElements.delete(m)}}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(At))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(At))},token:I,providedIn:"root"}),I})(),Lt=(()=>{class I{constructor(m,w,G){this._contentObserver=m,this._elementRef=w,this._ngZone=G,this.event=new C.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(m){this._disabled=be(m),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(m){this._debounce=se(m),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const m=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?m.pipe((0,Ke.b)(this.debounce)):m).subscribe(this.event)})}_unsubscribe(){var m;null===(m=this._currentSubscription)||void 0===m||m.unsubscribe()}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(On),C.Y36(C.SBq),C.Y36(C.R0b))},I.\u0275dir=C.lG2({type:I,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),I})(),ct=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({providers:[At]}),I})();var $t=K(5319),En=(K(6215),K(5917));function bi(I,...E){return E.length?E.some(m=>I[m]):I.altKey||I.shiftKey||I.ctrlKey||I.metaKey}var or=K(3342),to=K(5435),no=K(8002),co=K(5257),Fi=K(7393),Ci=K(7519),Eo=K(5345);function kr(I){return E=>E.lift(new is(I))}class is{constructor(E){this.notifier=E}call(E,m){const w=new wo(E),G=(0,Eo.ft)(this.notifier,new Eo.IY(w));return G&&!w.seenValue?(w.add(G),m.subscribe(w)):w}}class wo extends Eo.Ds{constructor(E){super(E),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let Do;try{Do="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(I){Do=!1}let Ei,po,ee,Rr=(()=>{class I{constructor(m){this._platformId=m,this.isBrowser=this._platformId?(0,P.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Do)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(C.Lbi))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(C.Lbi))},token:I,providedIn:"root"}),I})(),ro=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({}),I})();function Lr(I){return function(){if(null==Ei&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ei=!0}))}finally{Ei=Ei||!1}return Ei}()?I:!!I.capture}function os(){if(null==po){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return po=!1,po;if("scrollBehavior"in document.documentElement.style)po=!0;else{const I=Element.prototype.scrollTo;po=!!I&&!/\{\s*\[native code\]\s*\}/.test(I.toString())}}return po}function k(I){return I.composedPath?I.composedPath()[0]:I.target}function De(){return void 0!==ee.__karma__&&!!ee.__karma__||void 0!==ee.jasmine&&!!ee.jasmine||void 0!==ee.jest&&!!ee.jest||void 0!==ee.Mocha&&!!ee.Mocha}ee="undefined"!=typeof global?global:"undefined"!=typeof window?window:{};class Dn extends class{constructor(E){this._items=E,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ne.xQ,this._typeaheadSubscription=$t.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=m=>m.disabled,this._pressedLetters=[],this.tabOut=new ne.xQ,this.change=new ne.xQ,E instanceof C.n_E&&E.changes.subscribe(m=>{if(this._activeItem){const G=m.toArray().indexOf(this._activeItem);G>-1&&G!==this._activeItemIndex&&(this._activeItemIndex=G)}})}skipPredicate(E){return this._skipPredicateFn=E,this}withWrap(E=!0){return this._wrap=E,this}withVerticalOrientation(E=!0){return this._vertical=E,this}withHorizontalOrientation(E){return this._horizontal=E,this}withAllowedModifierKeys(E){return this._allowedModifierKeys=E,this}withTypeAhead(E=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,or.b)(m=>this._pressedLetters.push(m)),(0,Ke.b)(E),(0,to.h)(()=>this._pressedLetters.length>0),(0,no.U)(()=>this._pressedLetters.join(""))).subscribe(m=>{const w=this._getItemsArray();for(let G=1;G<w.length+1;G++){const c=(this._activeItemIndex+G)%w.length,d=w[c];if(!this._skipPredicateFn(d)&&0===d.getLabel().toUpperCase().trim().indexOf(m)){this.setActiveItem(c);break}}this._pressedLetters=[]}),this}withHomeAndEnd(E=!0){return this._homeAndEnd=E,this}setActiveItem(E){const m=this._activeItem;this.updateActiveItem(E),this._activeItem!==m&&this.change.next(this._activeItemIndex)}onKeydown(E){const m=E.keyCode,G=["altKey","ctrlKey","metaKey","shiftKey"].every(c=>!E[c]||this._allowedModifierKeys.indexOf(c)>-1);switch(m){case 9:return void this.tabOut.next();case 40:if(this._vertical&&G){this.setNextItemActive();break}return;case 38:if(this._vertical&&G){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&G){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&G){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&G){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&G){this.setLastItemActive();break}return;default:return void((G||bi(E,"shiftKey"))&&(E.key&&1===E.key.length?this._letterKeyStream.next(E.key.toLocaleUpperCase()):(m>=65&&m<=90||m>=48&&m<=57)&&this._letterKeyStream.next(String.fromCharCode(m))))}this._pressedLetters=[],E.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(E){const m=this._getItemsArray(),w="number"==typeof E?E:m.indexOf(E),G=m[w];this._activeItem=null==G?null:G,this._activeItemIndex=w}_setActiveItemByDelta(E){this._wrap?this._setActiveInWrapMode(E):this._setActiveInDefaultMode(E)}_setActiveInWrapMode(E){const m=this._getItemsArray();for(let w=1;w<=m.length;w++){const G=(this._activeItemIndex+E*w+m.length)%m.length;if(!this._skipPredicateFn(m[G]))return void this.setActiveItem(G)}}_setActiveInDefaultMode(E){this._setActiveItemByIndex(this._activeItemIndex+E,E)}_setActiveItemByIndex(E,m){const w=this._getItemsArray();if(w[E]){for(;this._skipPredicateFn(w[E]);)if(!w[E+=m])return;this.setActiveItem(E)}}_getItemsArray(){return this._items instanceof C.n_E?this._items.toArray():this._items}}{setActiveItem(E){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(E),this.activeItem&&this.activeItem.setActiveStyles()}}"undefined"!=typeof Element&&Element;const ai=new C.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),To=new C.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let ui=(()=>{class I{constructor(m,w,G,c){this._ngZone=w,this._defaultOptions=c,this._document=G,this._liveElement=m||this._createLiveElement()}announce(m,...w){const G=this._defaultOptions;let c,d;return 1===w.length&&"number"==typeof w[0]?d=w[0]:[c,d]=w,this.clear(),clearTimeout(this._previousTimeout),c||(c=G&&G.politeness?G.politeness:"polite"),null==d&&G&&(d=G.duration),this._liveElement.setAttribute("aria-live",c),this._ngZone.runOutsideAngular(()=>new Promise(f=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=m,f(),"number"==typeof d&&(this._previousTimeout=setTimeout(()=>this.clear(),d))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const m="cdk-live-announcer-element",w=this._document.getElementsByClassName(m),G=this._document.createElement("div");for(let c=0;c<w.length;c++)w[c].parentNode.removeChild(w[c]);return G.classList.add(m),G.classList.add("cdk-visually-hidden"),G.setAttribute("aria-atomic","true"),G.setAttribute("aria-live","polite"),this._document.body.appendChild(G),G}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(ai,8),C.LFG(C.R0b),C.LFG(P.K0),C.LFG(To,8))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(ai,8),C.LFG(C.R0b),C.LFG(P.K0),C.LFG(To,8))},token:I,providedIn:"root"}),I})();const li="cdk-high-contrast-black-on-white",Wi="cdk-high-contrast-white-on-black",gi="cdk-high-contrast-active";let bn=(()=>{class I{constructor(m,w){this._platform=m,this._document=w}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const m=this._document.createElement("div");m.style.backgroundColor="rgb(1,2,3)",m.style.position="absolute",this._document.body.appendChild(m);const w=this._document.defaultView||window,G=w&&w.getComputedStyle?w.getComputedStyle(m):null,c=(G&&G.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(m),c){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const m=this._document.body.classList;m.remove(gi),m.remove(li),m.remove(Wi),this._hasCheckedHighContrastMode=!0;const w=this.getHighContrastMode();1===w?(m.add(gi),m.add(li)):2===w&&(m.add(gi),m.add(Wi))}}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(Rr),C.LFG(P.K0))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(Rr),C.LFG(P.K0))},token:I,providedIn:"root"}),I})();const Wn=new C.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,C.f3M)(P.K0)}});let Cr=(()=>{class I{constructor(m){if(this.value="ltr",this.change=new C.vpe,m){const G=m.documentElement?m.documentElement.dir:null,c=(m.body?m.body.dir:null)||G;this.value="ltr"===c||"rtl"===c?c:"ltr"}}ngOnDestroy(){this.change.complete()}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(Wn,8))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(Wn,8))},token:I,providedIn:"root"}),I})(),wi=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({}),I})();const io=new C.GfV("12.2.11");var Jr=K(6237);function Bs(I,E){if(1&I&&C._UZ(0,"mat-pseudo-checkbox",4),2&I){const m=C.oxw();C.Q6J("state",m.selected?"checked":"unchecked")("disabled",m.disabled)}}function Yi(I,E){if(1&I&&(C.TgZ(0,"span",5),C._uU(1),C.qZA()),2&I){const m=C.oxw();C.xp6(1),C.hij("(",m.group.label,")")}}const ni=["*"],Ca=new C.GfV("12.2.11"),wa=new C.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Ki,bs=(()=>{class I{constructor(m,w,G){this._hasDoneGlobalChecks=!1,this._document=G,m._applyBodyHighContrastModeCssClasses(),this._sanityChecks=w,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(m){return!(!(0,C.X6Q)()||De())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[m])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const m=this._document.createElement("div");m.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(m);const w=getComputedStyle(m);w&&"none"!==w.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(m)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&Ca.full!==io.full&&console.warn("The Angular Material version ("+Ca.full+") does not match the Angular CDK version ("+io.full+").\nPlease ensure the versions of these two packages exactly match.")}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(bn),C.LFG(wa,8),C.LFG(P.K0))},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[wi],wi]}),I})();function Wu(I){return class extends I{constructor(...E){super(...E),this._disabled=!1}get disabled(){return this._disabled}set disabled(E){this._disabled=be(E)}}}function Da(I,E){return class extends I{constructor(...m){super(...m),this.defaultColor=E,this.color=E}get color(){return this._color}set color(m){const w=m||this.defaultColor;w!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),w&&this._elementRef.nativeElement.classList.add(`mat-${w}`),this._color=w)}}}function Yu(I){return class extends I{constructor(...E){super(...E),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(E){this._disableRipple=be(E)}}}function hu(I,E=0){return class extends I{constructor(...m){super(...m),this._tabIndex=E,this.defaultTabIndex=E}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(m){this._tabIndex=null!=m?se(m):this.defaultTabIndex}}}function js(I){return class extends I{constructor(...E){super(...E),this.stateChanges=new ne.xQ,this.errorState=!1}updateErrorState(){const E=this.errorState,c=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);c!==E&&(this.errorState=c,this.stateChanges.next())}}}try{Ki="undefined"!=typeof Intl}catch(I){Ki=!1}let fu=(()=>{class I{isErrorState(m,w){return!!(m&&m.invalid&&(m.touched||w&&w.submitted))}}return I.\u0275fac=function(m){return new(m||I)},I.\u0275prov=C.Yz7({factory:function(){return new I},token:I,providedIn:"root"}),I})();class R{constructor(E,m,w){this._renderer=E,this.element=m,this.config=w,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const O={enterDuration:225,exitDuration:150},te=Lr({passive:!0}),de=["mousedown","touchstart"],Ie=["mouseup","mouseleave","touchend","touchcancel"];class Ze{constructor(E,m,w,G){this._target=E,this._ngZone=m,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,G.isBrowser&&(this._containerElement=Oe(w))}fadeInRipple(E,m,w={}){const G=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),c=Object.assign(Object.assign({},O),w.animation);w.centered&&(E=G.left+G.width/2,m=G.top+G.height/2);const d=w.radius||function(I,E,m){const w=Math.max(Math.abs(I-m.left),Math.abs(I-m.right)),G=Math.max(Math.abs(E-m.top),Math.abs(E-m.bottom));return Math.sqrt(w*w+G*G)}(E,m,G),f=E-G.left,y=m-G.top,D=c.enterDuration,L=document.createElement("div");L.classList.add("mat-ripple-element"),L.style.left=f-d+"px",L.style.top=y-d+"px",L.style.height=2*d+"px",L.style.width=2*d+"px",null!=w.color&&(L.style.backgroundColor=w.color),L.style.transitionDuration=`${D}ms`,this._containerElement.appendChild(L),window.getComputedStyle(L).getPropertyValue("opacity"),L.style.transform="scale(1)";const W=new R(this,L,w);return W.state=0,this._activeRipples.add(W),w.persistent||(this._mostRecentTransientRipple=W),this._runTimeoutOutsideZone(()=>{const ce=W===this._mostRecentTransientRipple;W.state=1,!w.persistent&&(!ce||!this._isPointerDown)&&W.fadeOut()},D),W}fadeOutRipple(E){const m=this._activeRipples.delete(E);if(E===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!m)return;const w=E.element,G=Object.assign(Object.assign({},O),E.config.animation);w.style.transitionDuration=`${G.exitDuration}ms`,w.style.opacity="0",E.state=2,this._runTimeoutOutsideZone(()=>{E.state=3,w.parentNode.removeChild(w)},G.exitDuration)}fadeOutAll(){this._activeRipples.forEach(E=>E.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(E=>{E.config.persistent||E.fadeOut()})}setupTriggerEvents(E){const m=Oe(E);!m||m===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=m,this._registerEvents(de))}handleEvent(E){"mousedown"===E.type?this._onMousedown(E):"touchstart"===E.type?this._onTouchStart(E):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Ie),this._pointerUpEventsRegistered=!0)}_onMousedown(E){const m=0===(I=E).offsetX&&0===I.offsetY,w=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;var I;!this._target.rippleDisabled&&!m&&!w&&(this._isPointerDown=!0,this.fadeInRipple(E.clientX,E.clientY,this._target.rippleConfig))}_onTouchStart(E){if(!this._target.rippleDisabled&&!function(I){const E=I.touches&&I.touches[0]||I.changedTouches&&I.changedTouches[0];return!(!E||-1!==E.identifier||null!=E.radiusX&&1!==E.radiusX||null!=E.radiusY&&1!==E.radiusY)}(E)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const m=E.changedTouches;for(let w=0;w<m.length;w++)this.fadeInRipple(m[w].clientX,m[w].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(E=>{!E.config.persistent&&(1===E.state||E.config.terminateOnPointerUp&&0===E.state)&&E.fadeOut()}))}_runTimeoutOutsideZone(E,m=0){this._ngZone.runOutsideAngular(()=>setTimeout(E,m))}_registerEvents(E){this._ngZone.runOutsideAngular(()=>{E.forEach(m=>{this._triggerElement.addEventListener(m,this,te)})})}_removeTriggerEvents(){this._triggerElement&&(de.forEach(E=>{this._triggerElement.removeEventListener(E,this,te)}),this._pointerUpEventsRegistered&&Ie.forEach(E=>{this._triggerElement.removeEventListener(E,this,te)}))}}const ir=new C.OlP("mat-ripple-global-options");let Gn=(()=>{class I{constructor(m,w,G,c,d){this._elementRef=m,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=c||{},this._rippleRenderer=new Ze(this,w,m,G)}get disabled(){return this._disabled}set disabled(m){m&&this.fadeOutAllNonPersistent(),this._disabled=m,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(m){this._trigger=m,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(m,w=0,G){return"number"==typeof m?this._rippleRenderer.fadeInRipple(m,w,Object.assign(Object.assign({},this.rippleConfig),G)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),m))}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(C.SBq),C.Y36(C.R0b),C.Y36(Rr),C.Y36(ir,8),C.Y36(Jr.Qb,8))},I.\u0275dir=C.lG2({type:I,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(m,w){2&m&&C.ekj("mat-ripple-unbounded",w.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),I})(),Ir=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[bs,ro],bs]}),I})(),Un=(()=>{class I{constructor(m){this._animationMode=m,this.state="unchecked",this.disabled=!1}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(Jr.Qb,8))},I.\u0275cmp=C.Xpm({type:I,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(m,w){2&m&&C.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===w.state)("mat-pseudo-checkbox-checked","checked"===w.state)("mat-pseudo-checkbox-disabled",w.disabled)("_mat-animation-noopable","NoopAnimations"===w._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(m,w){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),I})(),mo=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[bs]]}),I})();const Uo=new C.OlP("MAT_OPTION_PARENT_COMPONENT"),_o=Wu(class{});let Hs=0,Wo=(()=>{class I extends _o{constructor(m){var w;super(),this._labelId="mat-optgroup-label-"+Hs++,this._inert=null!==(w=null==m?void 0:m.inertGroups)&&void 0!==w&&w}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(Uo,8))},I.\u0275dir=C.lG2({type:I,inputs:{label:"label"},features:[C.qOj]}),I})();const Yo=new C.OlP("MatOptgroup");let Zn=0;class Mi{constructor(E,m=!1){this.source=E,this.isUserInput=m}}let ia=(()=>{class I{constructor(m,w,G,c){this._element=m,this._changeDetectorRef=w,this._parent=G,this.group=c,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Zn++,this.onSelectionChange=new C.vpe,this._stateChanges=new ne.xQ}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(m){this._disabled=be(m)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(m,w){const G=this._getHostElement();"function"==typeof G.focus&&G.focus(w)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(m){(13===m.keyCode||32===m.keyCode)&&!bi(m)&&(this._selectViaInteraction(),m.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const m=this.viewValue;m!==this._mostRecentViewValue&&(this._mostRecentViewValue=m,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(m=!1){this.onSelectionChange.emit(new Mi(this,m))}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(C.SBq),C.Y36(C.sBO),C.Y36(void 0),C.Y36(Wo))},I.\u0275dir=C.lG2({type:I,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),I})(),gu=(()=>{class I extends ia{constructor(m,w,G,c){super(m,w,G,c)}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(C.SBq),C.Y36(C.sBO),C.Y36(Uo,8),C.Y36(Yo,8))},I.\u0275cmp=C.Xpm({type:I,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(m,w){1&m&&C.NdJ("click",function(){return w._selectViaInteraction()})("keydown",function(c){return w._handleKeydown(c)}),2&m&&(C.Ikx("id",w.id),C.uIk("tabindex",w._getTabIndex())("aria-selected",w._getAriaSelected())("aria-disabled",w.disabled.toString()),C.ekj("mat-selected",w.selected)("mat-option-multiple",w.multiple)("mat-active",w.active)("mat-option-disabled",w.disabled))},exportAs:["matOption"],features:[C.qOj],ngContentSelectors:ni,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(m,w){1&m&&(C.F$t(),C.YNc(0,Bs,1,2,"mat-pseudo-checkbox",0),C.TgZ(1,"span",1),C.Hsn(2),C.qZA(),C.YNc(3,Yi,2,1,"span",2),C._UZ(4,"div",3)),2&m&&(C.Q6J("ngIf",w.multiple),C.xp6(3),C.Q6J("ngIf",w.group&&w.group._inert),C.xp6(1),C.Q6J("matRippleTrigger",w._getHostElement())("matRippleDisabled",w.disabled||w.disableRipple))},directives:[P.O5,Gn,Un],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),I})();function Za(I,E,m){if(m.length){let w=E.toArray(),G=m.toArray(),c=0;for(let d=0;d<I+1;d++)w[d].group&&w[d].group===G[c]&&c++;return c}return 0}let Lc=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[Ir,P.ez,bs,mo]]}),I})();var Ku=K(6682),ic=K(9796),Aa=K(9105);function Qu(I,E,m,w){return(0,Aa.m)(m)&&(w=m,m=void 0),w?Qu(I,E,m).pipe((0,no.U)(G=>(0,ic.k)(G)?w(...G):w(G))):new Xe.y(G=>{Ia(I,E,function(d){G.next(arguments.length>1?Array.prototype.slice.call(arguments):d)},G,m)})}function Ia(I,E,m,w,G){let c;if(function(I){return I&&"function"==typeof I.addEventListener&&"function"==typeof I.removeEventListener}(I)){const d=I;I.addEventListener(E,m,G),c=()=>d.removeEventListener(E,m,G)}else if(function(I){return I&&"function"==typeof I.on&&"function"==typeof I.off}(I)){const d=I;I.on(E,m),c=()=>d.off(E,m)}else if(function(I){return I&&"function"==typeof I.addListener&&"function"==typeof I.removeListener}(I)){const d=I;I.addListener(E,m),c=()=>d.removeListener(E,m)}else{if(!I||!I.length)throw new TypeError("Invalid event target");for(let d=0,f=I.length;d<f;d++)Ia(I[d],E,m,w,G)}w.add(c)}var zs=K(9761),Ar=K(7238);const oh=["underline"],oc=["connectionContainer"],Ko=["inputContainer"],yo=["label"];function qs(I,E){1&I&&(C.ynx(0),C.TgZ(1,"div",14),C._UZ(2,"div",15),C._UZ(3,"div",16),C._UZ(4,"div",17),C.qZA(),C.TgZ(5,"div",18),C._UZ(6,"div",15),C._UZ(7,"div",16),C._UZ(8,"div",17),C.qZA(),C.BQk())}function So(I,E){1&I&&(C.TgZ(0,"div",19),C.Hsn(1,1),C.qZA())}function $a(I,E){if(1&I&&(C.ynx(0),C.Hsn(1,2),C.TgZ(2,"span"),C._uU(3),C.qZA(),C.BQk()),2&I){const m=C.oxw(2);C.xp6(3),C.Oqu(m._control.placeholder)}}function pd(I,E){1&I&&C.Hsn(0,3,["*ngSwitchCase","true"])}function Vc(I,E){1&I&&(C.TgZ(0,"span",23),C._uU(1," *"),C.qZA())}function gd(I,E){if(1&I){const m=C.EpF();C.TgZ(0,"label",20,21),C.NdJ("cdkObserveContent",function(){return C.CHM(m),C.oxw().updateOutlineGap()}),C.YNc(2,$a,4,1,"ng-container",12),C.YNc(3,pd,1,0,"ng-content",12),C.YNc(4,Vc,2,0,"span",22),C.qZA()}if(2&I){const m=C.oxw();C.ekj("mat-empty",m._control.empty&&!m._shouldAlwaysFloat())("mat-form-field-empty",m._control.empty&&!m._shouldAlwaysFloat())("mat-accent","accent"==m.color)("mat-warn","warn"==m.color),C.Q6J("cdkObserveContentDisabled","outline"!=m.appearance)("id",m._labelId)("ngSwitch",m._hasLabel()),C.uIk("for",m._control.id)("aria-owns",m._control.id),C.xp6(2),C.Q6J("ngSwitchCase",!1),C.xp6(1),C.Q6J("ngSwitchCase",!0),C.xp6(1),C.Q6J("ngIf",!m.hideRequiredMarker&&m._control.required&&!m._control.disabled)}}function Uh(I,E){1&I&&(C.TgZ(0,"div",24),C.Hsn(1,4),C.qZA())}function sh(I,E){if(1&I&&(C.TgZ(0,"div",25,26),C._UZ(2,"span",27),C.qZA()),2&I){const m=C.oxw();C.xp6(2),C.ekj("mat-accent","accent"==m.color)("mat-warn","warn"==m.color)}}function Ol(I,E){if(1&I&&(C.TgZ(0,"div"),C.Hsn(1,5),C.qZA()),2&I){const m=C.oxw();C.Q6J("@transitionMessages",m._subscriptAnimationState)}}function Es(I,E){if(1&I&&(C.TgZ(0,"div",31),C._uU(1),C.qZA()),2&I){const m=C.oxw(2);C.Q6J("id",m._hintLabelId),C.xp6(1),C.Oqu(m.hintLabel)}}function Ps(I,E){if(1&I&&(C.TgZ(0,"div",28),C.YNc(1,Es,2,2,"div",29),C.Hsn(2,6),C._UZ(3,"div",30),C.Hsn(4,7),C.qZA()),2&I){const m=C.oxw();C.Q6J("@transitionMessages",m._subscriptAnimationState),C.xp6(1),C.Q6J("ngIf",m.hintLabel)}}const oa=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Ju=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Xu=new C.OlP("MatError"),Zs={transitionMessages:(0,Ar.X$)("transitionMessages",[(0,Ar.SB)("enter",(0,Ar.oB)({opacity:1,transform:"translateY(0%)"})),(0,Ar.eR)("void => enter",[(0,Ar.oB)({opacity:0,transform:"translateY(-5px)"}),(0,Ar.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let _u=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275dir=C.lG2({type:I}),I})();const Bc=new C.OlP("MatHint");let Oa=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275dir=C.lG2({type:I,selectors:[["mat-label"]]}),I})(),Bo=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275dir=C.lG2({type:I,selectors:[["mat-placeholder"]]}),I})();const jc=new C.OlP("MatPrefix"),Hc=new C.OlP("MatSuffix");let nl=0;const Ra=Da(class{constructor(I){this._elementRef=I}},"primary"),xl=new C.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),mi=new C.OlP("MatFormField");let bu=(()=>{class I extends Ra{constructor(m,w,G,c,d,f,y,D){super(m),this._changeDetectorRef=w,this._dir=c,this._defaults=d,this._platform=f,this._ngZone=y,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new ne.xQ,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+nl++,this._labelId="mat-form-field-label-"+nl++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==D,this.appearance=d&&d.appearance?d.appearance:"legacy",this._hideRequiredMarker=!(!d||null==d.hideRequiredMarker)&&d.hideRequiredMarker}get appearance(){return this._appearance}set appearance(m){const w=this._appearance;this._appearance=m||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&w!==m&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(m){this._hideRequiredMarker=be(m)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(m){this._hintLabel=m,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(m){m!==this._floatLabel&&(this._floatLabel=m||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(m){this._explicitFormFieldControl=m}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const m=this._control;m.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${m.controlType}`),m.stateChanges.pipe((0,zs.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),m.ngControl&&m.ngControl.valueChanges&&m.ngControl.valueChanges.pipe(kr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(kr(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Ku.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,zs.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,zs.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(kr(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(m){const w=this._control?this._control.ngControl:null;return w&&w[m]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Qu(this._label.nativeElement,"transitionend").pipe((0,co.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let m=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&m.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const w=this._hintChildren?this._hintChildren.find(c=>"start"===c.align):null,G=this._hintChildren?this._hintChildren.find(c=>"end"===c.align):null;w?m.push(w.id):this._hintLabel&&m.push(this._hintLabelId),G&&m.push(G.id)}else this._errorChildren&&m.push(...this._errorChildren.map(w=>w.id));this._control.setDescribedByIds(m)}}_validateControlChild(){}updateOutlineGap(){const m=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&m&&m.children.length&&m.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let w=0,G=0;const c=this._connectionContainerRef.nativeElement,d=c.querySelectorAll(".mat-form-field-outline-start"),f=c.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const y=c.getBoundingClientRect();if(0===y.width&&0===y.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(y),L=m.children,W=this._getStartEnd(L[0].getBoundingClientRect());let ce=0;for(let ve=0;ve<L.length;ve++)ce+=L[ve].offsetWidth;w=Math.abs(W-D)-5,G=ce>0?.75*ce+10:0}for(let y=0;y<d.length;y++)d[y].style.width=`${w}px`;for(let y=0;y<f.length;y++)f[y].style.width=`${G}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(m){return this._dir&&"rtl"===this._dir.value?m.right:m.left}_isAttachedToDOM(){const m=this._elementRef.nativeElement;if(m.getRootNode){const w=m.getRootNode();return w&&w!==m}return document.documentElement.contains(m)}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(C.SBq),C.Y36(C.sBO),C.Y36(C.SBq),C.Y36(Cr,8),C.Y36(xl,8),C.Y36(Rr),C.Y36(C.R0b),C.Y36(Jr.Qb,8))},I.\u0275cmp=C.Xpm({type:I,selectors:[["mat-form-field"]],contentQueries:function(m,w,G){if(1&m&&(C.Suo(G,_u,5),C.Suo(G,_u,7),C.Suo(G,Oa,5),C.Suo(G,Oa,7),C.Suo(G,Bo,5),C.Suo(G,Xu,5),C.Suo(G,Bc,5),C.Suo(G,jc,5),C.Suo(G,Hc,5)),2&m){let c;C.iGM(c=C.CRH())&&(w._controlNonStatic=c.first),C.iGM(c=C.CRH())&&(w._controlStatic=c.first),C.iGM(c=C.CRH())&&(w._labelChildNonStatic=c.first),C.iGM(c=C.CRH())&&(w._labelChildStatic=c.first),C.iGM(c=C.CRH())&&(w._placeholderChild=c.first),C.iGM(c=C.CRH())&&(w._errorChildren=c),C.iGM(c=C.CRH())&&(w._hintChildren=c),C.iGM(c=C.CRH())&&(w._prefixChildren=c),C.iGM(c=C.CRH())&&(w._suffixChildren=c)}},viewQuery:function(m,w){if(1&m&&(C.Gf(oh,5),C.Gf(oc,7),C.Gf(Ko,5),C.Gf(yo,5)),2&m){let G;C.iGM(G=C.CRH())&&(w.underlineRef=G.first),C.iGM(G=C.CRH())&&(w._connectionContainerRef=G.first),C.iGM(G=C.CRH())&&(w._inputContainerRef=G.first),C.iGM(G=C.CRH())&&(w._label=G.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(m,w){2&m&&C.ekj("mat-form-field-appearance-standard","standard"==w.appearance)("mat-form-field-appearance-fill","fill"==w.appearance)("mat-form-field-appearance-outline","outline"==w.appearance)("mat-form-field-appearance-legacy","legacy"==w.appearance)("mat-form-field-invalid",w._control.errorState)("mat-form-field-can-float",w._canLabelFloat())("mat-form-field-should-float",w._shouldLabelFloat())("mat-form-field-has-label",w._hasFloatingLabel())("mat-form-field-hide-placeholder",w._hideControlPlaceholder())("mat-form-field-disabled",w._control.disabled)("mat-form-field-autofilled",w._control.autofilled)("mat-focused",w._control.focused)("ng-untouched",w._shouldForward("untouched"))("ng-touched",w._shouldForward("touched"))("ng-pristine",w._shouldForward("pristine"))("ng-dirty",w._shouldForward("dirty"))("ng-valid",w._shouldForward("valid"))("ng-invalid",w._shouldForward("invalid"))("ng-pending",w._shouldForward("pending"))("_mat-animation-noopable",!w._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[C._Bn([{provide:mi,useExisting:I}]),C.qOj],ngContentSelectors:Ju,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(m,w){1&m&&(C.F$t(oa),C.TgZ(0,"div",0),C.TgZ(1,"div",1,2),C.NdJ("click",function(c){return w._control.onContainerClick&&w._control.onContainerClick(c)}),C.YNc(3,qs,9,0,"ng-container",3),C.YNc(4,So,2,0,"div",4),C.TgZ(5,"div",5,6),C.Hsn(7),C.TgZ(8,"span",7),C.YNc(9,gd,5,16,"label",8),C.qZA(),C.qZA(),C.YNc(10,Uh,2,0,"div",9),C.qZA(),C.YNc(11,sh,3,4,"div",10),C.TgZ(12,"div",11),C.YNc(13,Ol,2,1,"div",12),C.YNc(14,Ps,5,2,"div",13),C.qZA(),C.qZA()),2&m&&(C.xp6(3),C.Q6J("ngIf","outline"==w.appearance),C.xp6(1),C.Q6J("ngIf",w._prefixChildren.length),C.xp6(5),C.Q6J("ngIf",w._hasFloatingLabel()),C.xp6(1),C.Q6J("ngIf",w._suffixChildren.length),C.xp6(1),C.Q6J("ngIf","outline"!=w.appearance),C.xp6(1),C.Q6J("ngSwitch",w._getDisplayedMessages()),C.xp6(1),C.Q6J("ngSwitchCase","error"),C.xp6(1),C.Q6J("ngSwitchCase","hint"))},directives:[P.O5,P.RF,P.n9,Lt],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Zs.transitionMessages]},changeDetection:0}),I})(),uc=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[P.ez,bs,ct],bs]}),I})();var Cu=K(6465),Eu=K(6102);new class extends Eu.v{flush(E){this.active=!0,this.scheduled=void 0;const{actions:m}=this;let w,G=-1,c=m.length;E=E||m.shift();do{if(w=E.execute(E.state,E.delay))break}while(++G<c&&(E=m.shift()));if(this.active=!1,w){for(;++G<c&&(E=m.shift());)E.unsubscribe();throw w}}}(class extends Cu.o{constructor(E,m){super(E,m),this.scheduler=E,this.work=m}requestAsyncId(E,m,w=0){return null!==w&&w>0?super.requestAsyncId(E,m,w):(E.actions.push(this),E.scheduled||(E.scheduled=requestAnimationFrame(()=>E.flush(null))))}recycleAsyncId(E,m,w=0){if(null!==w&&w>0||null===w&&this.delay>0)return super.recycleAsyncId(E,m,w);0===E.actions.length&&(cancelAnimationFrame(m),E.scheduled=void 0)}});K(4581);var il=K(3637);class Ka{constructor(E){this.durationSelector=E}call(E,m){return m.subscribe(new Gc(E,this.durationSelector))}}class Gc extends Eo.Ds{constructor(E,m){super(E),this.durationSelector=m,this.hasValue=!1}_next(E){if(this.value=E,this.hasValue=!0,!this.throttled){let m;try{const{durationSelector:G}=this;m=G(E)}catch(G){return this.destination.error(G)}const w=(0,Eo.ft)(m,new Eo.IY(this));!w||w.closed?this.clearThrottle():this.add(this.throttled=w)}}clearThrottle(){const{value:E,hasValue:m,throttled:w}=this;w&&(this.remove(w),this.throttled=void 0,w.unsubscribe()),m&&(this.value=void 0,this.hasValue=!1,this.destination.next(E))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var Ao=K(6561),Fs=K(4869);function Pl(I){const{index:E,period:m,subscriber:w}=I;if(w.next(E),!w.closed){if(-1===m)return w.complete();I.index=E+1,this.schedule(I,m)}}function ol(I,E=il.P){return function(I){return function(m){return m.lift(new Ka(I))}}(()=>function(I=0,E,m){let w=-1;return(0,Ao.k)(E)?w=Number(E)<1?1:Number(E):(0,Fs.K)(E)&&(m=E),(0,Fs.K)(m)||(m=il.P),new Xe.y(G=>{const c=(0,Ao.k)(I)?I:+I-m.now();return m.schedule(Pl,c,{index:0,period:w,subscriber:G})})}(I,E))}K(9328);var sa=K(3190);K(2066);class vo{constructor(E=!1,m,w=!0){this._multiple=E,this._emitChanges=w,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ne.xQ,m&&m.length&&(E?m.forEach(G=>this._markSelected(G)):this._markSelected(m[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...E){this._verifyValueAssignment(E),E.forEach(m=>this._markSelected(m)),this._emitChangeEvent()}deselect(...E){this._verifyValueAssignment(E),E.forEach(m=>this._unmarkSelected(m)),this._emitChangeEvent()}toggle(E){this.isSelected(E)?this.deselect(E):this.select(E)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(E){return this._selection.has(E)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(E){this._multiple&&this.selected&&this._selected.sort(E)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(E){this.isSelected(E)||(this._multiple||this._unmarkAll(),this._selection.add(E),this._emitChanges&&this._selectedToEmit.push(E))}_unmarkSelected(E){this.isSelected(E)&&(this._selection.delete(E),this._emitChanges&&this._deselectedToEmit.push(E))}_unmarkAll(){this.isEmpty()||this._selection.forEach(E=>this._unmarkSelected(E))}_verifyValueAssignment(E){}}let Iu=(()=>{class I{constructor(m,w,G){this._ngZone=m,this._platform=w,this._scrolled=new ne.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=G}register(m){this.scrollContainers.has(m)||this.scrollContainers.set(m,m.elementScrolled().subscribe(()=>this._scrolled.next(m)))}deregister(m){const w=this.scrollContainers.get(m);w&&(w.unsubscribe(),this.scrollContainers.delete(m))}scrolled(m=20){return this._platform.isBrowser?new Xe.y(w=>{this._globalSubscription||this._addGlobalListener();const G=m>0?this._scrolled.pipe(ol(m)).subscribe(w):this._scrolled.subscribe(w);return this._scrolledCount++,()=>{G.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,En.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((m,w)=>this.deregister(w)),this._scrolled.complete()}ancestorScrolled(m,w){const G=this.getAncestorScrollContainers(m);return this.scrolled(w).pipe((0,to.h)(c=>!c||G.indexOf(c)>-1))}getAncestorScrollContainers(m){const w=[];return this.scrollContainers.forEach((G,c)=>{this._scrollableContainsElement(c,m)&&w.push(c)}),w}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(m,w){let G=Oe(w),c=m.getElementRef().nativeElement;do{if(G==c)return!0}while(G=G.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Qu(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(C.R0b),C.LFG(Rr),C.LFG(P.K0,8))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(C.R0b),C.LFG(Rr),C.LFG(P.K0,8))},token:I,providedIn:"root"}),I})(),sl=(()=>{class I{constructor(m,w,G){this._platform=m,this._change=new ne.xQ,this._changeListener=c=>{this._change.next(c)},this._document=G,w.runOutsideAngular(()=>{if(m.isBrowser){const c=this._getWindow();c.addEventListener("resize",this._changeListener),c.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const m=this._getWindow();m.removeEventListener("resize",this._changeListener),m.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const m={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),m}getViewportRect(){const m=this.getViewportScrollPosition(),{width:w,height:G}=this.getViewportSize();return{top:m.top,left:m.left,bottom:m.top+G,right:m.left+w,height:G,width:w}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const m=this._document,w=this._getWindow(),G=m.documentElement,c=G.getBoundingClientRect();return{top:-c.top||m.body.scrollTop||w.scrollY||G.scrollTop||0,left:-c.left||m.body.scrollLeft||w.scrollX||G.scrollLeft||0}}change(m=20){return m>0?this._change.pipe(ol(m)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const m=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:m.innerWidth,height:m.innerHeight}:{width:0,height:0}}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(Rr),C.LFG(C.R0b),C.LFG(P.K0,8))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(Rr),C.LFG(C.R0b),C.LFG(P.K0,8))},token:I,providedIn:"root"}),I})(),ua=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({}),I})(),al=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[wi,ro,ua],wi,ua]}),I})();class Nl{attach(E){return this._attachedHost=E,E.attach(this)}detach(){let E=this._attachedHost;null!=E&&(this._attachedHost=null,E.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(E){this._attachedHost=E}}class $c extends Nl{constructor(E,m,w,G){super(),this.component=E,this.viewContainerRef=m,this.injector=w,this.componentFactoryResolver=G}}class hc extends Nl{constructor(E,m,w){super(),this.templateRef=E,this.viewContainerRef=m,this.context=w}get origin(){return this.templateRef.elementRef}attach(E,m=this.context){return this.context=m,super.attach(E)}detach(){return this.context=void 0,super.detach()}}class ch extends Nl{constructor(E){super(),this.element=E instanceof C.SBq?E.nativeElement:E}}class Jo extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(E){return E instanceof $c?(this._attachedPortal=E,this.attachComponentPortal(E)):E instanceof hc?(this._attachedPortal=E,this.attachTemplatePortal(E)):this.attachDomPortal&&E instanceof ch?(this._attachedPortal=E,this.attachDomPortal(E)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(E){this._disposeFn=E}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(E,m,w,G,c){super(),this.outletElement=E,this._componentFactoryResolver=m,this._appRef=w,this._defaultInjector=G,this.attachDomPortal=d=>{const f=d.element,y=this._document.createComment("dom-portal");f.parentNode.insertBefore(y,f),this.outletElement.appendChild(f),this._attachedPortal=d,super.setDisposeFn(()=>{y.parentNode&&y.parentNode.replaceChild(f,y)})},this._document=c}attachComponentPortal(E){const w=(E.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(E.component);let G;return E.viewContainerRef?(G=E.viewContainerRef.createComponent(w,E.viewContainerRef.length,E.injector||E.viewContainerRef.injector),this.setDisposeFn(()=>G.destroy())):(G=w.create(E.injector||this._defaultInjector),this._appRef.attachView(G.hostView),this.setDisposeFn(()=>{this._appRef.detachView(G.hostView),G.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(G)),this._attachedPortal=E,G}attachTemplatePortal(E){let m=E.viewContainerRef,w=m.createEmbeddedView(E.templateRef,E.context);return w.rootNodes.forEach(G=>this.outletElement.appendChild(G)),w.detectChanges(),this.setDisposeFn(()=>{let G=m.indexOf(w);-1!==G&&m.remove(G)}),this._attachedPortal=E,w}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(E){return E.hostView.rootNodes[0]}}let ul=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({}),I})();class Ed{constructor(E,m){this.predicate=E,this.inclusive=m}call(E,m){return m.subscribe(new la(E,this.predicate,this.inclusive))}}class la extends Fi.L{constructor(E,m,w){super(E),this.predicate=m,this.inclusive=w,this.index=0}_next(E){const m=this.destination;let w;try{w=this.predicate(E,this.index++)}catch(G){return void m.error(G)}this.nextOrComplete(E,w)}nextOrComplete(E,m){const w=this.destination;Boolean(m)?w.next(E):(this.inclusive&&w.next(E),w.complete())}}const Ru=os();class ll{constructor(E,m){this._viewportRuler=E,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=m}attach(){}enable(){if(this._canBeEnabled()){const E=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=E.style.left||"",this._previousHTMLStyles.top=E.style.top||"",E.style.left=Ee(-this._previousScrollPosition.left),E.style.top=Ee(-this._previousScrollPosition.top),E.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const E=this._document.documentElement,w=E.style,G=this._document.body.style,c=w.scrollBehavior||"",d=G.scrollBehavior||"";this._isEnabled=!1,w.left=this._previousHTMLStyles.left,w.top=this._previousHTMLStyles.top,E.classList.remove("cdk-global-scrollblock"),Ru&&(w.scrollBehavior=G.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Ru&&(w.scrollBehavior=c,G.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const m=this._document.body,w=this._viewportRuler.getViewportSize();return m.scrollHeight>w.height||m.scrollWidth>w.width}}class Yc{constructor(E,m,w,G){this._scrollDispatcher=E,this._ngZone=m,this._viewportRuler=w,this._config=G,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(E){this._overlayRef=E}enable(){if(this._scrollSubscription)return;const E=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=E.subscribe(()=>{const m=this._viewportRuler.getViewportScrollPosition().top;Math.abs(m-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=E.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class cl{enable(){}disable(){}attach(){}}function fc(I,E){return E.some(m=>I.bottom<m.top||I.top>m.bottom||I.right<m.left||I.left>m.right)}function pc(I,E){return E.some(m=>I.top<m.top||I.bottom>m.bottom||I.left<m.left||I.right>m.right)}class Kc{constructor(E,m,w,G){this._scrollDispatcher=E,this._viewportRuler=m,this._ngZone=w,this._config=G,this._scrollSubscription=null}attach(E){this._overlayRef=E}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const m=this._overlayRef.overlayElement.getBoundingClientRect(),{width:w,height:G}=this._viewportRuler.getViewportSize();fc(m,[{width:w,height:G,bottom:G,right:w,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Qc=(()=>{class I{constructor(m,w,G,c){this._scrollDispatcher=m,this._viewportRuler=w,this._ngZone=G,this.noop=()=>new cl,this.close=d=>new Yc(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new ll(this._viewportRuler,this._document),this.reposition=d=>new Kc(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=c}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(Iu),C.LFG(sl),C.LFG(C.R0b),C.LFG(P.K0))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(Iu),C.LFG(sl),C.LFG(C.R0b),C.LFG(P.K0))},token:I,providedIn:"root"}),I})();class gc{constructor(E){if(this.scrollStrategy=new cl,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,E){const m=Object.keys(E);for(const w of m)void 0!==E[w]&&(this[w]=E[w])}}}class Xo{constructor(E,m,w,G,c){this.offsetX=w,this.offsetY=G,this.panelClass=c,this.originX=E.originX,this.originY=E.originY,this.overlayX=m.overlayX,this.overlayY=m.overlayY}}class ca{constructor(E,m){this.connectionPair=E,this.scrollableViewProperties=m}}let Vl=(()=>{class I{constructor(m){this._attachedOverlays=[],this._document=m}ngOnDestroy(){this.detach()}add(m){this.remove(m),this._attachedOverlays.push(m)}remove(m){const w=this._attachedOverlays.indexOf(m);w>-1&&this._attachedOverlays.splice(w,1),0===this._attachedOverlays.length&&this.detach()}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(P.K0))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(P.K0))},token:I,providedIn:"root"}),I})(),wd=(()=>{class I extends Vl{constructor(m){super(m),this._keydownListener=w=>{const G=this._attachedOverlays;for(let c=G.length-1;c>-1;c--)if(G[c]._keydownEvents.observers.length>0){G[c]._keydownEvents.next(w);break}}}add(m){super.add(m),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(P.K0))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(P.K0))},token:I,providedIn:"root"}),I})(),_c=(()=>{class I extends Vl{constructor(m,w){super(m),this._platform=w,this._cursorStyleIsSet=!1,this._pointerDownListener=G=>{this._pointerDownEventTarget=k(G)},this._clickListener=G=>{const c=k(G),d="click"===G.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const f=this._attachedOverlays.slice();for(let y=f.length-1;y>-1;y--){const D=f[y];if(!(D._outsidePointerEvents.observers.length<1)&&D.hasAttached()){if(D.overlayElement.contains(c)||D.overlayElement.contains(d))break;D._outsidePointerEvents.next(G)}}}}add(m){if(super.add(m),!this._isAttached){const w=this._document.body;w.addEventListener("pointerdown",this._pointerDownListener,!0),w.addEventListener("click",this._clickListener,!0),w.addEventListener("auxclick",this._clickListener,!0),w.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=w.style.cursor,w.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const m=this._document.body;m.removeEventListener("pointerdown",this._pointerDownListener,!0),m.removeEventListener("click",this._clickListener,!0),m.removeEventListener("auxclick",this._clickListener,!0),m.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(m.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(P.K0),C.LFG(Rr))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(P.K0),C.LFG(Rr))},token:I,providedIn:"root"}),I})(),Ys=(()=>{class I{constructor(m,w){this._platform=w,this._document=m}ngOnDestroy(){const m=this._containerElement;m&&m.parentNode&&m.parentNode.removeChild(m)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const m="cdk-overlay-container";if(this._platform.isBrowser||De()){const G=this._document.querySelectorAll(`.${m}[platform="server"], .${m}[platform="test"]`);for(let c=0;c<G.length;c++)G[c].parentNode.removeChild(G[c])}const w=this._document.createElement("div");w.classList.add(m),De()?w.setAttribute("platform","test"):this._platform.isBrowser||w.setAttribute("platform","server"),this._document.body.appendChild(w),this._containerElement=w}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(P.K0),C.LFG(Rr))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(P.K0),C.LFG(Rr))},token:I,providedIn:"root"}),I})();class Ks{constructor(E,m,w,G,c,d,f,y,D){this._portalOutlet=E,this._host=m,this._pane=w,this._config=G,this._ngZone=c,this._keyboardDispatcher=d,this._document=f,this._location=y,this._outsideClickDispatcher=D,this._backdropElement=null,this._backdropClick=new ne.xQ,this._attachments=new ne.xQ,this._detachments=new ne.xQ,this._locationChanges=$t.w.EMPTY,this._backdropClickHandler=L=>this._backdropClick.next(L),this._keydownEvents=new ne.xQ,this._outsidePointerEvents=new ne.xQ,G.scrollStrategy&&(this._scrollStrategy=G.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=G.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(E){let m=this._portalOutlet.attach(E);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,co.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),m}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const E=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),E}dispose(){const E=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,E&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(E){E!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=E,this.hasAttached()&&(E.attach(this),this.updatePosition()))}updateSize(E){this._config=Object.assign(Object.assign({},this._config),E),this._updateElementSize()}setDirection(E){this._config=Object.assign(Object.assign({},this._config),{direction:E}),this._updateElementDirection()}addPanelClass(E){this._pane&&this._toggleClasses(this._pane,E,!0)}removePanelClass(E){this._pane&&this._toggleClasses(this._pane,E,!1)}getDirection(){const E=this._config.direction;return E?"string"==typeof E?E:E.value:"ltr"}updateScrollStrategy(E){E!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=E,this.hasAttached()&&(E.attach(this),E.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const E=this._pane.style;E.width=Ee(this._config.width),E.height=Ee(this._config.height),E.minWidth=Ee(this._config.minWidth),E.minHeight=Ee(this._config.minHeight),E.maxWidth=Ee(this._config.maxWidth),E.maxHeight=Ee(this._config.maxHeight)}_togglePointerEvents(E){this._pane.style.pointerEvents=E?"":"none"}_attachBackdrop(){const E="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(E)})}):this._backdropElement.classList.add(E)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const E=this._backdropElement;if(!E)return;let m;const w=()=>{E&&(E.removeEventListener("click",this._backdropClickHandler),E.removeEventListener("transitionend",w),this._disposeBackdrop(E)),this._config.backdropClass&&this._toggleClasses(E,this._config.backdropClass,!1),clearTimeout(m)};E.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{E.addEventListener("transitionend",w)}),E.style.pointerEvents="none",m=this._ngZone.runOutsideAngular(()=>setTimeout(w,500))}_toggleClasses(E,m,w){const G=E.classList;ge(m).forEach(c=>{c&&(w?G.add(c):G.remove(c))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const E=this._ngZone.onStable.pipe(kr((0,Ku.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),E.unsubscribe())})})}_disposeScrollStrategy(){const E=this._scrollStrategy;E&&(E.disable(),E.detach&&E.detach())}_disposeBackdrop(E){E&&(E.parentNode&&E.parentNode.removeChild(E),this._backdropElement===E&&(this._backdropElement=null))}}const Dd="cdk-overlay-connected-position-bounding-box",yc=/([A-Za-z%]+)$/;class da{constructor(E,m,w,G,c){this._viewportRuler=m,this._document=w,this._platform=G,this._overlayContainer=c,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ne.xQ,this._resizeSubscription=$t.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(E)}get positions(){return this._preferredPositions}attach(E){this._validatePositions(),E.hostElement.classList.add(Dd),this._overlayRef=E,this._boundingBox=E.hostElement,this._pane=E.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const E=this._originRect,m=this._overlayRect,w=this._viewportRect,G=[];let c;for(let d of this._preferredPositions){let f=this._getOriginPoint(E,d),y=this._getOverlayPoint(f,m,d),D=this._getOverlayFit(y,m,w,d);if(D.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,f);this._canFitWithFlexibleDimensions(D,y,w)?G.push({position:d,origin:f,overlayRect:m,boundingBoxRect:this._calculateBoundingBoxRect(f,d)}):(!c||c.overlayFit.visibleArea<D.visibleArea)&&(c={overlayFit:D,overlayPoint:y,originPoint:f,position:d,overlayRect:m})}if(G.length){let d=null,f=-1;for(const y of G){const D=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);D>f&&(f=D,d=y)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&xu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Dd),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const E=this._lastPosition||this._preferredPositions[0],m=this._getOriginPoint(this._originRect,E);this._applyPosition(E,m)}}withScrollableContainers(E){return this._scrollables=E,this}withPositions(E){return this._preferredPositions=E,-1===E.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(E){return this._viewportMargin=E,this}withFlexibleDimensions(E=!0){return this._hasFlexibleDimensions=E,this}withGrowAfterOpen(E=!0){return this._growAfterOpen=E,this}withPush(E=!0){return this._canPush=E,this}withLockedPosition(E=!0){return this._positionLocked=E,this}setOrigin(E){return this._origin=E,this}withDefaultOffsetX(E){return this._offsetX=E,this}withDefaultOffsetY(E){return this._offsetY=E,this}withTransformOriginOn(E){return this._transformOriginSelector=E,this}_getOriginPoint(E,m){let w,G;if("center"==m.originX)w=E.left+E.width/2;else{const c=this._isRtl()?E.right:E.left,d=this._isRtl()?E.left:E.right;w="start"==m.originX?c:d}return G="center"==m.originY?E.top+E.height/2:"top"==m.originY?E.top:E.bottom,{x:w,y:G}}_getOverlayPoint(E,m,w){let G,c;return G="center"==w.overlayX?-m.width/2:"start"===w.overlayX?this._isRtl()?-m.width:0:this._isRtl()?0:-m.width,c="center"==w.overlayY?-m.height/2:"top"==w.overlayY?0:-m.height,{x:E.x+G,y:E.y+c}}_getOverlayFit(E,m,w,G){const c=eu(m);let{x:d,y:f}=E,y=this._getOffset(G,"x"),D=this._getOffset(G,"y");y&&(d+=y),D&&(f+=D);let ce=0-f,ve=f+c.height-w.height,Me=this._subtractOverflows(c.width,0-d,d+c.width-w.width),ke=this._subtractOverflows(c.height,ce,ve),dt=Me*ke;return{visibleArea:dt,isCompletelyWithinViewport:c.width*c.height===dt,fitsInViewportVertically:ke===c.height,fitsInViewportHorizontally:Me==c.width}}_canFitWithFlexibleDimensions(E,m,w){if(this._hasFlexibleDimensions){const G=w.bottom-m.y,c=w.right-m.x,d=Ts(this._overlayRef.getConfig().minHeight),f=Ts(this._overlayRef.getConfig().minWidth),D=E.fitsInViewportHorizontally||null!=f&&f<=c;return(E.fitsInViewportVertically||null!=d&&d<=G)&&D}return!1}_pushOverlayOnScreen(E,m,w){if(this._previousPushAmount&&this._positionLocked)return{x:E.x+this._previousPushAmount.x,y:E.y+this._previousPushAmount.y};const G=eu(m),c=this._viewportRect,d=Math.max(E.x+G.width-c.width,0),f=Math.max(E.y+G.height-c.height,0),y=Math.max(c.top-w.top-E.y,0),D=Math.max(c.left-w.left-E.x,0);let L=0,W=0;return L=G.width<=c.width?D||-d:E.x<this._viewportMargin?c.left-w.left-E.x:0,W=G.height<=c.height?y||-f:E.y<this._viewportMargin?c.top-w.top-E.y:0,this._previousPushAmount={x:L,y:W},{x:E.x+L,y:E.y+W}}_applyPosition(E,m){if(this._setTransformOrigin(E),this._setOverlayElementStyles(m,E),this._setBoundingBoxStyles(m,E),E.panelClass&&this._addPanelClasses(E.panelClass),this._lastPosition=E,this._positionChanges.observers.length){const w=this._getScrollVisibility(),G=new ca(E,w);this._positionChanges.next(G)}this._isInitialRender=!1}_setTransformOrigin(E){if(!this._transformOriginSelector)return;const m=this._boundingBox.querySelectorAll(this._transformOriginSelector);let w,G=E.overlayY;w="center"===E.overlayX?"center":this._isRtl()?"start"===E.overlayX?"right":"left":"start"===E.overlayX?"left":"right";for(let c=0;c<m.length;c++)m[c].style.transformOrigin=`${w} ${G}`}_calculateBoundingBoxRect(E,m){const w=this._viewportRect,G=this._isRtl();let c,d,f,L,W,ce;if("top"===m.overlayY)d=E.y,c=w.height-d+this._viewportMargin;else if("bottom"===m.overlayY)f=w.height-E.y+2*this._viewportMargin,c=w.height-f+this._viewportMargin;else{const ve=Math.min(w.bottom-E.y+w.top,E.y),Me=this._lastBoundingBoxSize.height;c=2*ve,d=E.y-ve,c>Me&&!this._isInitialRender&&!this._growAfterOpen&&(d=E.y-Me/2)}if("end"===m.overlayX&&!G||"start"===m.overlayX&&G)ce=w.width-E.x+this._viewportMargin,L=E.x-this._viewportMargin;else if("start"===m.overlayX&&!G||"end"===m.overlayX&&G)W=E.x,L=w.right-E.x;else{const ve=Math.min(w.right-E.x+w.left,E.x),Me=this._lastBoundingBoxSize.width;L=2*ve,W=E.x-ve,L>Me&&!this._isInitialRender&&!this._growAfterOpen&&(W=E.x-Me/2)}return{top:d,left:W,bottom:f,right:ce,width:L,height:c}}_setBoundingBoxStyles(E,m){const w=this._calculateBoundingBoxRect(E,m);!this._isInitialRender&&!this._growAfterOpen&&(w.height=Math.min(w.height,this._lastBoundingBoxSize.height),w.width=Math.min(w.width,this._lastBoundingBoxSize.width));const G={};if(this._hasExactPosition())G.top=G.left="0",G.bottom=G.right=G.maxHeight=G.maxWidth="",G.width=G.height="100%";else{const c=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;G.height=Ee(w.height),G.top=Ee(w.top),G.bottom=Ee(w.bottom),G.width=Ee(w.width),G.left=Ee(w.left),G.right=Ee(w.right),G.alignItems="center"===m.overlayX?"center":"end"===m.overlayX?"flex-end":"flex-start",G.justifyContent="center"===m.overlayY?"center":"bottom"===m.overlayY?"flex-end":"flex-start",c&&(G.maxHeight=Ee(c)),d&&(G.maxWidth=Ee(d))}this._lastBoundingBoxSize=w,xu(this._boundingBox.style,G)}_resetBoundingBoxStyles(){xu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){xu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(E,m){const w={},G=this._hasExactPosition(),c=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(G){const L=this._viewportRuler.getViewportScrollPosition();xu(w,this._getExactOverlayY(m,E,L)),xu(w,this._getExactOverlayX(m,E,L))}else w.position="static";let f="",y=this._getOffset(m,"x"),D=this._getOffset(m,"y");y&&(f+=`translateX(${y}px) `),D&&(f+=`translateY(${D}px)`),w.transform=f.trim(),d.maxHeight&&(G?w.maxHeight=Ee(d.maxHeight):c&&(w.maxHeight="")),d.maxWidth&&(G?w.maxWidth=Ee(d.maxWidth):c&&(w.maxWidth="")),xu(this._pane.style,w)}_getExactOverlayY(E,m,w){let G={top:"",bottom:""},c=this._getOverlayPoint(m,this._overlayRect,E);this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,w));let d=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return c.y-=d,"bottom"===E.overlayY?G.bottom=this._document.documentElement.clientHeight-(c.y+this._overlayRect.height)+"px":G.top=Ee(c.y),G}_getExactOverlayX(E,m,w){let d,G={left:"",right:""},c=this._getOverlayPoint(m,this._overlayRect,E);return this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,w)),d=this._isRtl()?"end"===E.overlayX?"left":"right":"end"===E.overlayX?"right":"left","right"===d?G.right=this._document.documentElement.clientWidth-(c.x+this._overlayRect.width)+"px":G.left=Ee(c.x),G}_getScrollVisibility(){const E=this._getOriginRect(),m=this._pane.getBoundingClientRect(),w=this._scrollables.map(G=>G.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:pc(E,w),isOriginOutsideView:fc(E,w),isOverlayClipped:pc(m,w),isOverlayOutsideView:fc(m,w)}}_subtractOverflows(E,...m){return m.reduce((w,G)=>w-Math.max(G,0),E)}_getNarrowedViewportRect(){const E=this._document.documentElement.clientWidth,m=this._document.documentElement.clientHeight,w=this._viewportRuler.getViewportScrollPosition();return{top:w.top+this._viewportMargin,left:w.left+this._viewportMargin,right:w.left+E-this._viewportMargin,bottom:w.top+m-this._viewportMargin,width:E-2*this._viewportMargin,height:m-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(E,m){return"x"===m?null==E.offsetX?this._offsetX:E.offsetX:null==E.offsetY?this._offsetY:E.offsetY}_validatePositions(){}_addPanelClasses(E){this._pane&&ge(E).forEach(m=>{""!==m&&-1===this._appliedPanelClasses.indexOf(m)&&(this._appliedPanelClasses.push(m),this._pane.classList.add(m))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(E=>{this._pane.classList.remove(E)}),this._appliedPanelClasses=[])}_getOriginRect(){const E=this._origin;if(E instanceof C.SBq)return E.nativeElement.getBoundingClientRect();if(E instanceof Element)return E.getBoundingClientRect();const m=E.width||0,w=E.height||0;return{top:E.y,bottom:E.y+w,left:E.x,right:E.x+m,height:w,width:m}}}function xu(I,E){for(let m in E)E.hasOwnProperty(m)&&(I[m]=E[m]);return I}function Ts(I){if("number"!=typeof I&&null!=I){const[E,m]=I.split(yc);return m&&"px"!==m?null:parseFloat(E)}return I||null}function eu(I){return{top:Math.floor(I.top),right:Math.floor(I.right),bottom:Math.floor(I.bottom),left:Math.floor(I.left),width:Math.floor(I.width),height:Math.floor(I.height)}}class _i{constructor(E,m,w,G,c,d,f){this._preferredPositions=[],this._positionStrategy=new da(w,G,c,d,f).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(E,m),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(E){this._overlayRef=E,this._positionStrategy.attach(E),this._direction&&(E.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(E){this._positionStrategy.withScrollableContainers(E)}withFallbackPosition(E,m,w,G){const c=new Xo(E,m,w,G);return this._preferredPositions.push(c),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(E){return this._overlayRef?this._overlayRef.setDirection(E):this._direction=E,this}withOffsetX(E){return this._positionStrategy.withDefaultOffsetX(E),this}withOffsetY(E){return this._positionStrategy.withDefaultOffsetY(E),this}withLockedPosition(E){return this._positionStrategy.withLockedPosition(E),this}withPositions(E){return this._preferredPositions=E.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(E){return this._positionStrategy.setOrigin(E),this}}const ri="cdk-global-overlay-wrapper";class Pu{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(E){const m=E.getConfig();this._overlayRef=E,this._width&&!m.width&&E.updateSize({width:this._width}),this._height&&!m.height&&E.updateSize({height:this._height}),E.hostElement.classList.add(ri),this._isDisposed=!1}top(E=""){return this._bottomOffset="",this._topOffset=E,this._alignItems="flex-start",this}left(E=""){return this._rightOffset="",this._leftOffset=E,this._justifyContent="flex-start",this}bottom(E=""){return this._topOffset="",this._bottomOffset=E,this._alignItems="flex-end",this}right(E=""){return this._leftOffset="",this._rightOffset=E,this._justifyContent="flex-end",this}width(E=""){return this._overlayRef?this._overlayRef.updateSize({width:E}):this._width=E,this}height(E=""){return this._overlayRef?this._overlayRef.updateSize({height:E}):this._height=E,this}centerHorizontally(E=""){return this.left(E),this._justifyContent="center",this}centerVertically(E=""){return this.top(E),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const E=this._overlayRef.overlayElement.style,m=this._overlayRef.hostElement.style,w=this._overlayRef.getConfig(),{width:G,height:c,maxWidth:d,maxHeight:f}=w,y=!("100%"!==G&&"100vw"!==G||d&&"100%"!==d&&"100vw"!==d),D=!("100%"!==c&&"100vh"!==c||f&&"100%"!==f&&"100vh"!==f);E.position=this._cssPosition,E.marginLeft=y?"0":this._leftOffset,E.marginTop=D?"0":this._topOffset,E.marginBottom=this._bottomOffset,E.marginRight=this._rightOffset,y?m.justifyContent="flex-start":"center"===this._justifyContent?m.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?m.justifyContent="flex-end":"flex-end"===this._justifyContent&&(m.justifyContent="flex-start"):m.justifyContent=this._justifyContent,m.alignItems=D?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const E=this._overlayRef.overlayElement.style,m=this._overlayRef.hostElement,w=m.style;m.classList.remove(ri),w.justifyContent=w.alignItems=E.marginTop=E.marginBottom=E.marginLeft=E.marginRight=E.position="",this._overlayRef=null,this._isDisposed=!0}}let vc=(()=>{class I{constructor(m,w,G,c){this._viewportRuler=m,this._document=w,this._platform=G,this._overlayContainer=c}global(){return new Pu}connectedTo(m,w,G){return new _i(w,G,m,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(m){return new da(m,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(sl),C.LFG(P.K0),C.LFG(Rr),C.LFG(Ys))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(sl),C.LFG(P.K0),C.LFG(Rr),C.LFG(Ys))},token:I,providedIn:"root"}),I})(),Hi=0,Di=(()=>{class I{constructor(m,w,G,c,d,f,y,D,L,W,ce){this.scrollStrategies=m,this._overlayContainer=w,this._componentFactoryResolver=G,this._positionBuilder=c,this._keyboardDispatcher=d,this._injector=f,this._ngZone=y,this._document=D,this._directionality=L,this._location=W,this._outsideClickDispatcher=ce}create(m){const w=this._createHostElement(),G=this._createPaneElement(w),c=this._createPortalOutlet(G),d=new gc(m);return d.direction=d.direction||this._directionality.value,new Ks(c,w,G,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(m){const w=this._document.createElement("div");return w.id="cdk-overlay-"+Hi++,w.classList.add("cdk-overlay-pane"),m.appendChild(w),w}_createHostElement(){const m=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(m),m}_createPortalOutlet(m){return this._appRef||(this._appRef=this._injector.get(C.z2F)),new Jo(m,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(Qc),C.LFG(Ys),C.LFG(C._Vd),C.LFG(vc),C.LFG(wd),C.LFG(C.zs3),C.LFG(C.R0b),C.LFG(P.K0),C.LFG(Cr),C.LFG(P.Ye),C.LFG(_c))},I.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac}),I})();const Mo=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],oo=new C.OlP("cdk-connected-overlay-scroll-strategy");let ps=(()=>{class I{constructor(m){this.elementRef=m}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(C.SBq))},I.\u0275dir=C.lG2({type:I,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),I})(),xo=(()=>{class I{constructor(m,w,G,c,d){this._overlay=m,this._dir=d,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=$t.w.EMPTY,this._attachSubscription=$t.w.EMPTY,this._detachSubscription=$t.w.EMPTY,this._positionSubscription=$t.w.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new C.vpe,this.positionChange=new C.vpe,this.attach=new C.vpe,this.detach=new C.vpe,this.overlayKeydown=new C.vpe,this.overlayOutsideClick=new C.vpe,this._templatePortal=new hc(w,G),this._scrollStrategyFactory=c,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(m){this._offsetX=m,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(m){this._offsetY=m,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(m){this._hasBackdrop=be(m)}get lockPosition(){return this._lockPosition}set lockPosition(m){this._lockPosition=be(m)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(m){this._flexibleDimensions=be(m)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(m){this._growAfterOpen=be(m)}get push(){return this._push}set push(m){this._push=be(m)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(m){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),m.origin&&this.open&&this._position.apply()),m.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Mo);const m=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=m.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=m.detachments().subscribe(()=>this.detach.emit()),m.keydownEvents().subscribe(w=>{this.overlayKeydown.next(w),27===w.keyCode&&!this.disableClose&&!bi(w)&&(w.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(w=>{this.overlayOutsideClick.next(w)})}_buildConfig(){const m=this._position=this.positionStrategy||this._createPositionStrategy(),w=new gc({direction:this._dir,positionStrategy:m,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(w.width=this.width),(this.height||0===this.height)&&(w.height=this.height),(this.minWidth||0===this.minWidth)&&(w.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(w.minHeight=this.minHeight),this.backdropClass&&(w.backdropClass=this.backdropClass),this.panelClass&&(w.panelClass=this.panelClass),w}_updatePositionStrategy(m){const w=this.positions.map(G=>({originX:G.originX,originY:G.originY,overlayX:G.overlayX,overlayY:G.overlayY,offsetX:G.offsetX||this.offsetX,offsetY:G.offsetY||this.offsetY,panelClass:G.panelClass||void 0}));return m.setOrigin(this.origin.elementRef).withPositions(w).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const m=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(m),m}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(m=>{this.backdropClick.emit(m)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(I,E=!1){return m=>m.lift(new Ed(I,E))}(()=>this.positionChange.observers.length>0)).subscribe(m=>{this.positionChange.emit(m),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(Di),C.Y36(C.Rgc),C.Y36(C.s_b),C.Y36(oo),C.Y36(Cr,8))},I.\u0275dir=C.lG2({type:I,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[C.TTD]}),I})();const dl={provide:oo,deps:[Di],useFactory:function(I){return()=>I.scrollStrategies.reposition()}};let Fu=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({providers:[Di,dl],imports:[[wi,ul,al],al]}),I})();var bc=K(1439);const Td=["trigger"],es=["panel"];function Wt(I,E){if(1&I&&(C.TgZ(0,"span",8),C._uU(1),C.qZA()),2&I){const m=C.oxw();C.xp6(1),C.Oqu(m.placeholder)}}function Jc(I,E){if(1&I&&(C.TgZ(0,"span",12),C._uU(1),C.qZA()),2&I){const m=C.oxw(2);C.xp6(1),C.Oqu(m.triggerValue)}}function tu(I,E){1&I&&C.Hsn(0,0,["*ngSwitchCase","true"])}function Sd(I,E){if(1&I&&(C.TgZ(0,"span",9),C.YNc(1,Jc,2,1,"span",10),C.YNc(2,tu,1,0,"ng-content",11),C.qZA()),2&I){const m=C.oxw();C.Q6J("ngSwitch",!!m.customTrigger),C.xp6(2),C.Q6J("ngSwitchCase",!0)}}function Ul(I,E){if(1&I){const m=C.EpF();C.TgZ(0,"div",13),C.TgZ(1,"div",14,15),C.NdJ("@transformPanel.done",function(G){return C.CHM(m),C.oxw()._panelDoneAnimatingStream.next(G.toState)})("keydown",function(G){return C.CHM(m),C.oxw()._handleKeydown(G)}),C.Hsn(3,1),C.qZA(),C.qZA()}if(2&I){const m=C.oxw();C.Q6J("@transformPanelWrap",void 0),C.xp6(1),C.Gre("mat-select-panel ",m._getPanelTheme(),""),C.Udp("transform-origin",m._transformOrigin)("font-size",m._triggerFontSize,"px"),C.Q6J("ngClass",m.panelClass)("@transformPanel",m.multiple?"showing-multiple":"showing"),C.uIk("id",m.id+"-panel")("aria-multiselectable",m.multiple)("aria-label",m.ariaLabel||null)("aria-labelledby",m._getPanelAriaLabelledby())}}const hl=[[["mat-select-trigger"]],"*"],Ad=["mat-select-trigger","*"],Js={transformPanelWrap:(0,Ar.X$)("transformPanelWrap",[(0,Ar.eR)("* => void",(0,Ar.IO)("@transformPanel",[(0,Ar.pV)()],{optional:!0}))]),transformPanel:(0,Ar.X$)("transformPanel",[(0,Ar.SB)("void",(0,Ar.oB)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),(0,Ar.SB)("showing",(0,Ar.oB)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),(0,Ar.SB)("showing-multiple",(0,Ar.oB)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),(0,Ar.eR)("void => *",(0,Ar.jt)("120ms cubic-bezier(0, 0, 0.2, 1)")),(0,Ar.eR)("* => void",(0,Ar.jt)("100ms 25ms linear",(0,Ar.oB)({opacity:0})))])};let us=0;const gl=new C.OlP("mat-select-scroll-strategy"),Lu=new C.OlP("MAT_SELECT_CONFIG"),Vu={provide:gl,deps:[Di],useFactory:function(I){return()=>I.scrollStrategies.reposition()}};class Bl{constructor(E,m){this.source=E,this.value=m}}const ml=Yu(hu(Wu(js(class{constructor(I,E,m,w,G){this._elementRef=I,this._defaultErrorStateMatcher=E,this._parentForm=m,this._parentFormGroup=w,this.ngControl=G}})))),Xc=new C.OlP("MatSelectTrigger");let fh=(()=>{class I extends ml{constructor(m,w,G,c,d,f,y,D,L,W,ce,ve,Me,ke){var dt,It,Bt;super(d,c,y,D,W),this._viewportRuler=m,this._changeDetectorRef=w,this._ngZone=G,this._dir=f,this._parentFormField=L,this._liveAnnouncer=Me,this._defaultOptions=ke,this._panelOpen=!1,this._compareWith=(on,Qn)=>on===Qn,this._uid="mat-select-"+us++,this._triggerAriaLabelledBy=null,this._destroy=new ne.xQ,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+us++,this._panelDoneAnimatingStream=new ne.xQ,this._overlayPanelClass=(null===(dt=this._defaultOptions)||void 0===dt?void 0:dt.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(Bt=null===(It=this._defaultOptions)||void 0===It?void 0:It.disableOptionCentering)&&void 0!==Bt&&Bt,this.ariaLabel="",this.optionSelectionChanges=(0,bc.P)(()=>{const on=this.options;return on?on.changes.pipe((0,zs.O)(on),(0,sa.w)(()=>(0,Ku.T)(...on.map(Qn=>Qn.onSelectionChange)))):this._ngZone.onStable.pipe((0,co.q)(1),(0,sa.w)(()=>this.optionSelectionChanges))}),this.openedChange=new C.vpe,this._openedStream=this.openedChange.pipe((0,to.h)(on=>on),(0,no.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,to.h)(on=>!on),(0,no.U)(()=>{})),this.selectionChange=new C.vpe,this.valueChange=new C.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==ke?void 0:ke.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=ke.typeaheadDebounceInterval),this._scrollStrategyFactory=ve,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(ce)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(m){this._placeholder=m,this.stateChanges.next()}get required(){return this._required}set required(m){this._required=be(m),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(m){this._multiple=be(m)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(m){this._disableOptionCentering=be(m)}get compareWith(){return this._compareWith}set compareWith(m){this._compareWith=m,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(m){(m!==this._value||this._multiple&&Array.isArray(m))&&(this.options&&this._setSelectionByValue(m),this._value=m)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(m){this._typeaheadDebounceInterval=se(m)}get id(){return this._id}set id(m){this._id=m||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new vo(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,Ci.x)(),kr(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(kr(this._destroy)).subscribe(m=>{m.added.forEach(w=>w.select()),m.removed.forEach(w=>w.deselect())}),this.options.changes.pipe((0,zs.O)(null),kr(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const m=this._getTriggerAriaLabelledby();if(m!==this._triggerAriaLabelledBy){const w=this._elementRef.nativeElement;this._triggerAriaLabelledBy=m,m?w.setAttribute("aria-labelledby",m):w.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(m){m.disabled&&this.stateChanges.next(),m.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(m){this.value=m}registerOnChange(m){this._onChange=m}registerOnTouched(m){this._onTouched=m}setDisabledState(m){this.disabled=m,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var m,w;return this.multiple?(null===(m=this._selectionModel)||void 0===m?void 0:m.selected)||[]:null===(w=this._selectionModel)||void 0===w?void 0:w.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const m=this._selectionModel.selected.map(w=>w.viewValue);return this._isRtl()&&m.reverse(),m.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(m){this.disabled||(this.panelOpen?this._handleOpenKeydown(m):this._handleClosedKeydown(m))}_handleClosedKeydown(m){const w=m.keyCode,G=40===w||38===w||37===w||39===w,c=13===w||32===w,d=this._keyManager;if(!d.isTyping()&&c&&!bi(m)||(this.multiple||m.altKey)&&G)m.preventDefault(),this.open();else if(!this.multiple){const f=this.selected;d.onKeydown(m);const y=this.selected;y&&f!==y&&this._liveAnnouncer.announce(y.viewValue,1e4)}}_handleOpenKeydown(m){const w=this._keyManager,G=m.keyCode,c=40===G||38===G,d=w.isTyping();if(c&&m.altKey)m.preventDefault(),this.close();else if(d||13!==G&&32!==G||!w.activeItem||bi(m))if(!d&&this._multiple&&65===G&&m.ctrlKey){m.preventDefault();const f=this.options.some(y=>!y.disabled&&!y.selected);this.options.forEach(y=>{y.disabled||(f?y.select():y.deselect())})}else{const f=w.activeItemIndex;w.onKeydown(m),this._multiple&&c&&m.shiftKey&&w.activeItem&&w.activeItemIndex!==f&&w.activeItem._selectViaInteraction()}else m.preventDefault(),w.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,co.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(m){if(this._selectionModel.selected.forEach(w=>w.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&m)Array.isArray(m),m.forEach(w=>this._selectValue(w)),this._sortValues();else{const w=this._selectValue(m);w?this._keyManager.updateActiveItem(w):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(m){const w=this.options.find(G=>{if(this._selectionModel.isSelected(G))return!1;try{return null!=G.value&&this._compareWith(G.value,m)}catch(c){return!1}});return w&&this._selectionModel.select(w),w}_initKeyManager(){this._keyManager=new Dn(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(kr(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(kr(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const m=(0,Ku.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(kr(m)).subscribe(w=>{this._onSelect(w.source,w.isUserInput),w.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Ku.T)(...this.options.map(w=>w._stateChanges)).pipe(kr(m)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(m,w){const G=this._selectionModel.isSelected(m);null!=m.value||this._multiple?(G!==m.selected&&(m.selected?this._selectionModel.select(m):this._selectionModel.deselect(m)),w&&this._keyManager.setActiveItem(m),this.multiple&&(this._sortValues(),w&&this.focus())):(m.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(m.value)),G!==this._selectionModel.isSelected(m)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const m=this.options.toArray();this._selectionModel.sort((w,G)=>this.sortComparator?this.sortComparator(w,G,m):m.indexOf(w)-m.indexOf(G)),this.stateChanges.next()}}_propagateChanges(m){let w=null;w=this.multiple?this.selected.map(G=>G.value):this.selected?this.selected.value:m,this._value=w,this.valueChange.emit(w),this._onChange(w),this.selectionChange.emit(this._getChangeEvent(w)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var m;return!this._panelOpen&&!this.disabled&&(null===(m=this.options)||void 0===m?void 0:m.length)>0}focus(m){this._elementRef.nativeElement.focus(m)}_getPanelAriaLabelledby(){var m;if(this.ariaLabel)return null;const w=null===(m=this._parentFormField)||void 0===m?void 0:m.getLabelId();return this.ariaLabelledby?(w?w+" ":"")+this.ariaLabelledby:w}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var m;if(this.ariaLabel)return null;const w=null===(m=this._parentFormField)||void 0===m?void 0:m.getLabelId();let G=(w?w+" ":"")+this._valueId;return this.ariaLabelledby&&(G+=" "+this.ariaLabelledby),G}_panelDoneAnimating(m){this.openedChange.emit(m)}setDescribedByIds(m){this._ariaDescribedby=m.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(sl),C.Y36(C.sBO),C.Y36(C.R0b),C.Y36(fu),C.Y36(C.SBq),C.Y36(Cr,8),C.Y36(g.F,8),C.Y36(g.sg,8),C.Y36(mi,8),C.Y36(g.a5,10),C.$8M("tabindex"),C.Y36(gl),C.Y36(ui),C.Y36(Lu,8))},I.\u0275dir=C.lG2({type:I,viewQuery:function(m,w){if(1&m&&(C.Gf(Td,5),C.Gf(es,5),C.Gf(xo,5)),2&m){let G;C.iGM(G=C.CRH())&&(w.trigger=G.first),C.iGM(G=C.CRH())&&(w.panel=G.first),C.iGM(G=C.CRH())&&(w._overlayDir=G.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[C.qOj,C.TTD]}),I})(),Uu=(()=>{class I extends fh{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(m,w,G){const c=this._getItemHeight();return Math.min(Math.max(0,c*m-w+c/2),G)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(kr(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,co.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(m){const w=Za(m,this.options,this.optionGroups),G=this._getItemHeight();this.panel.nativeElement.scrollTop=0===m&&1===w?0:function(I,E,m,w){return I<m?I:I+E>m+256?Math.max(0,I-256+E):m}((m+w)*G,G,this.panel.nativeElement.scrollTop)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(m){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(m)}_getChangeEvent(m){return new Bl(this,m)}_calculateOverlayOffsetX(){const m=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),w=this._viewportRuler.getViewportSize(),G=this._isRtl(),c=this.multiple?56:32;let d;if(this.multiple)d=40;else if(this.disableOptionCentering)d=16;else{let D=this._selectionModel.selected[0]||this.options.first;d=D&&D.group?32:16}G||(d*=-1);const f=0-(m.left+d-(G?c:0)),y=m.right+d-w.width+(G?0:c);f>0?d+=f+8:y>0&&(d-=y+8),this._overlayDir.offsetX=Math.round(d),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(m,w,G){const c=this._getItemHeight(),d=(c-this._triggerRect.height)/2,f=Math.floor(256/c);let y;return this.disableOptionCentering?0:(y=0===this._scrollTop?m*c:this._scrollTop===G?(m-(this._getItemCount()-f))*c+(c-(this._getItemCount()*c-256)%c):w-c/2,Math.round(-1*y-d))}_checkOverlayWithinViewport(m){const w=this._getItemHeight(),G=this._viewportRuler.getViewportSize(),c=this._triggerRect.top-8,d=G.height-this._triggerRect.bottom-8,f=Math.abs(this._offsetY),D=Math.min(this._getItemCount()*w,256)-f-this._triggerRect.height;D>d?this._adjustPanelUp(D,d):f>c?this._adjustPanelDown(f,c,m):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(m,w){const G=Math.round(m-w);this._scrollTop-=G,this._offsetY-=G,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(m,w,G){const c=Math.round(m-w);if(this._scrollTop+=c,this._offsetY+=c,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=G)return this._scrollTop=G,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const m=this._getItemHeight(),w=this._getItemCount(),G=Math.min(w*m,256),d=w*m-G;let f;f=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),f+=Za(f,this.options,this.optionGroups);const y=G/2;this._scrollTop=this._calculateOverlayScroll(f,y,d),this._offsetY=this._calculateOverlayOffsetY(f,y,d),this._checkOverlayWithinViewport(d)}_getOriginBasedOnOption(){const m=this._getItemHeight(),w=(m-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-w+m/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return I.\u0275fac=function(){let E;return function(w){return(E||(E=C.n5z(I)))(w||I)}}(),I.\u0275cmp=C.Xpm({type:I,selectors:[["mat-select"]],contentQueries:function(m,w,G){if(1&m&&(C.Suo(G,Xc,5),C.Suo(G,gu,5),C.Suo(G,Yo,5)),2&m){let c;C.iGM(c=C.CRH())&&(w.customTrigger=c.first),C.iGM(c=C.CRH())&&(w.options=c),C.iGM(c=C.CRH())&&(w.optionGroups=c)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(m,w){1&m&&C.NdJ("keydown",function(c){return w._handleKeydown(c)})("focus",function(){return w._onFocus()})("blur",function(){return w._onBlur()}),2&m&&(C.uIk("id",w.id)("tabindex",w.tabIndex)("aria-controls",w.panelOpen?w.id+"-panel":null)("aria-expanded",w.panelOpen)("aria-label",w.ariaLabel||null)("aria-required",w.required.toString())("aria-disabled",w.disabled.toString())("aria-invalid",w.errorState)("aria-describedby",w._ariaDescribedby||null)("aria-activedescendant",w._getAriaActiveDescendant()),C.ekj("mat-select-disabled",w.disabled)("mat-select-invalid",w.errorState)("mat-select-required",w.required)("mat-select-empty",w.empty)("mat-select-multiple",w.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[C._Bn([{provide:_u,useExisting:I},{provide:Uo,useExisting:I}]),C.qOj],ngContentSelectors:Ad,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(m,w){if(1&m&&(C.F$t(hl),C.TgZ(0,"div",0,1),C.NdJ("click",function(){return w.toggle()}),C.TgZ(3,"div",2),C.YNc(4,Wt,2,1,"span",3),C.YNc(5,Sd,3,2,"span",4),C.qZA(),C.TgZ(6,"div",5),C._UZ(7,"div",6),C.qZA(),C.qZA(),C.YNc(8,Ul,4,14,"ng-template",7),C.NdJ("backdropClick",function(){return w.close()})("attach",function(){return w._onAttached()})("detach",function(){return w.close()})),2&m){const G=C.MAs(1);C.uIk("aria-owns",w.panelOpen?w.id+"-panel":null),C.xp6(3),C.Q6J("ngSwitch",w.empty),C.uIk("id",w._valueId),C.xp6(1),C.Q6J("ngSwitchCase",!0),C.xp6(1),C.Q6J("ngSwitchCase",!1),C.xp6(3),C.Q6J("cdkConnectedOverlayPanelClass",w._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",w._scrollStrategy)("cdkConnectedOverlayOrigin",G)("cdkConnectedOverlayOpen",w.panelOpen)("cdkConnectedOverlayPositions",w._positions)("cdkConnectedOverlayMinWidth",null==w._triggerRect?null:w._triggerRect.width)("cdkConnectedOverlayOffsetY",w._offsetY)}},directives:[ps,P.RF,P.n9,xo,P.ED,P.mk],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[Js.transformPanelWrap,Js.transformPanel]},changeDetection:0}),I})(),Xs=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({providers:[Vu],imports:[[P.ez,Fu,Lc,bs],ua,uc,Lc,bs]}),I})();var Hh=K(4552),Rd=K(1437);function xd(I,E){if(1&I&&(C.TgZ(0,"mat-option",8),C.TgZ(1,"div",9),C.TgZ(2,"div"),C._UZ(3,"img",10),C.qZA(),C.TgZ(4,"div"),C.TgZ(5,"p"),C._uU(6),C.qZA(),C.qZA(),C.qZA(),C.qZA()),2&I){const m=E.$implicit;C.Q6J("value",m.key),C.xp6(3),C.Q6J("src",m.img,C.LSH),C.xp6(3),C.Oqu(m.description)}}function ph(I,E){if(1&I){const m=C.EpF();C.TgZ(0,"form",2),C.NdJ("ngSubmit",function(){C.CHM(m);const G=C.oxw();return G.submitStartChatForm(G.startChatForm)}),C.TgZ(1,"div"),C.TgZ(2,"label",3),C._uU(3,"Username"),C.qZA(),C._UZ(4,"input",4),C.qZA(),C.TgZ(5,"div"),C.TgZ(6,"mat-form-field"),C.TgZ(7,"mat-select",5),C.YNc(8,xd,7,3,"mat-option",6),C.qZA(),C.qZA(),C.qZA(),C.TgZ(9,"div"),C.TgZ(10,"button",7),C._uU(11,"Start chat"),C.qZA(),C.qZA(),C.qZA()}if(2&I){const m=C.oxw();C.Q6J("formGroup",m.startChatForm),C.xp6(8),C.Q6J("ngForOf",m.menuOptions),C.xp6(2),C.Q6J("disabled",m.startChatForm.invalid)}}function ea(I,E){1&I&&(C.TgZ(0,"div"),C._uU(1," Your chat will be accepted soon! "),C.qZA())}const ks=function(I,E,m){return{nick:I,chatId:E,domain:m}};function nu(I,E){if(1&I&&(C.TgZ(0,"div"),C.TgZ(1,"div"),C._UZ(2,"app-chat-form-history",11),C.qZA(),C.TgZ(3,"div"),C._UZ(4,"app-chat-form",12),C.qZA(),C.qZA()),2&I){const m=C.oxw();C.xp6(2),C.Q6J("chatHistory",m.currentChat[0].chatHistory),C.xp6(2),C.Q6J("userInfo",C.kEZ(2,ks,m.clientUsername,m.clientChatId,m.clientChatDomain))}}let jl=(()=>{class I{constructor(m,w,G,c,d,f){this._fb=m,this._firestoreCollections=w,this._route=G,this._router=c,this._generateId=d,this._http=f,this.currentChat=[],this.clientInformation=[]}ngOnInit(){this.clientUsername=JSON.parse(localStorage.getItem("username")),this.clientChatId=JSON.parse(localStorage.getItem("chatId")),this.clientChatDomain=JSON.parse(localStorage.getItem("domain")),this.startChatForm=this._fb.group({username:[this.clientUsername,g.kI.required],option:[null,g.kI.required]}),this._menuOptionsSubscription=this._firestoreCollections.getActiveMenuOptions().subscribe(m=>{this.menuOptions=m.map(w=>Object.assign({id:w.payload.doc.id},w.payload.doc.data()))},m=>{}),this._route.snapshot.queryParams.domain?(this.domain=this._route.snapshot.queryParams.domain,this._domainsSubscription=this._firestoreCollections.getDomains().subscribe(m=>{this.domains=m.map(w=>Object.assign({id:w.payload.doc.id},w.payload.doc.data())),new Promise((w,G)=>{for(let c=0;c<this.domains.length;c++){if(this.domains[c].domain==this.domain)return w();c==this.domains.length-1&&this._router.navigate(["/error"])}})},m=>{})):this._router.navigate(["/error"]),this.clientChatId&&this.clientChatDomain&&(this._currentChatSubscription=this._firestoreCollections.getChat(this.clientChatDomain,"activeChats",this.clientChatId).subscribe(m=>{this.currentChat=m.map(w=>Object.assign({},w.payload.doc.data())),0==this.currentChat.length&&(localStorage.removeItem("domain"),localStorage.removeItem("chatId"),this._currentChatSubscription.unsubscribe())},m=>{})),this.getClientInformation()}ngOnDestroy(){this._menuOptionsSubscription.unsubscribe(),this._currentChatSubscription&&this._currentChatSubscription.unsubscribe(),this._domainsSubscription&&this._domainsSubscription.unsubscribe()}submitStartChatForm(m){if(m.invalid)return;const w=m.value.username,G=this.clientInformation,c=m.value.option,d=this.domain,y=this._generateId.generateId(),D={username:w,clientInformation:G,option:c,domain:d,status:"pending",id:y};this.clientChatId=y,this.clientChatDomain=d,localStorage.setItem("chatId",JSON.stringify(y)),localStorage.setItem("domain",JSON.stringify(d)),localStorage.setItem("username",JSON.stringify(w)),this._firestoreCollections.addChat(D).then(()=>{this._currentChatSubscription=this._firestoreCollections.getChat(this.clientChatDomain,"activeChats",this.clientChatId).subscribe(L=>{this.currentChat=L.map(W=>Object.assign({},W.payload.doc.data()))},L=>{})},L=>{})}getClientInformation(){this._http.get("https://api.geoapify.com/v1/ipinfo?apiKey="+J.N.geoLocationAPIKey).subscribe(m=>{this.clientInformation.push({ip:m.ip,country:m.country.name,city:m.city.name})},m=>{})}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(g.qu),C.Y36(Ve.P),C.Y36(we.gz),C.Y36(we.F0),C.Y36(Ne.U),C.Y36(he.eN))},I.\u0275cmp=C.Xpm({type:I,selectors:[["app-chat"]],decls:4,vars:3,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],[3,"formGroup","ngSubmit"],["for","username"],["type","text","name","username","formControlName","username"],["formControlName","option"],[3,"value",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],[3,"value"],[2,"display","flex"],["width","20px",3,"src"],[3,"chatHistory"],[3,"userInfo"]],template:function(m,w){1&m&&(C.TgZ(0,"div"),C.YNc(1,ph,12,3,"form",0),C.YNc(2,ea,2,0,"div",1),C.YNc(3,nu,5,6,"div",1),C.qZA()),2&m&&(C.xp6(1),C.Q6J("ngIf","pending"!==(null==w.currentChat[0]?null:w.currentChat[0].status)&&"active"!==(null==w.currentChat[0]?null:w.currentChat[0].status)),C.xp6(1),C.Q6J("ngIf",w.currentChat.length>0&&"pending"==w.currentChat[0].status),C.xp6(1),C.Q6J("ngIf",w.currentChat.length>0&&"active"==w.currentChat[0].status))},directives:[P.O5,g._Y,g.JL,g.sg,g.Fj,g.JJ,g.u,bu,Uu,P.sg,gu,Hh.q,Rd.a],styles:[""]}),I})();K(9193);let Bu=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[ro]]}),I})(),mh=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({providers:[fu],imports:[[Bu,uc,bs],Bu,uc]}),I})();var _h=K(4466);let yh=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[P.ez,g.UX,g.u5,mh,Xs,_h.m,we.Bz.forChild([{path:"",component:jl},{path:"**",redirectTo:""}])]]}),I})()},6009:(Ht,it,K)=>{"use strict";K.r(it),K.d(it,{ControlPanelModule:()=>br});var P=K(8583),g=K(7716),J=K(9447),C=K(2213);const Ve=function(){return["chats"]},we=function(){return["settings"]};function Ne(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"div",2),g.TgZ(1,"ul",3),g.TgZ(2,"li",4),g._uU(3,"Chats"),g.qZA(),g.TgZ(4,"li",4),g._uU(5,"Settings"),g.qZA(),g.qZA(),g.TgZ(6,"button",5),g.NdJ("click",function(){return g.CHM(X),g.oxw().logout()}),g._uU(7,"Logout"),g.qZA(),g.qZA()}2&Te&&(g.xp6(2),g.Q6J("routerLink",g.DdM(2,Ve)),g.xp6(2),g.Q6J("routerLink",g.DdM(3,we)))}let he=(()=>{class Te{constructor(X){this._authService=X}ngOnInit(){this._userSubscription=this._authService.user.subscribe(X=>{this.user=X})}ngOnDestroy(){this._userSubscription.unsubscribe()}logout(){this._authService.logout()}}return Te.\u0275fac=function(X){return new(X||Te)(g.Y36(J.e))},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-header"]],decls:2,vars:1,consts:[[1,"container"],["class","header-nav",4,"ngIf"],[1,"header-nav"],[1,"header-nav__links"],["routerLinkActive","router-link-active",3,"routerLink"],[1,"header-nav__logout-btn",3,"click"]],template:function(X,ie){1&X&&(g.TgZ(0,"div",0),g.YNc(1,Ne,8,4,"div",1),g.qZA()),2&X&&(g.xp6(1),g.Q6J("ngIf",null!=ie.user&&null!=ie.user))},directives:[P.O5,C.Od,C.rH],styles:[".header-nav[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px}.header-nav__links[_ngcontent-%COMP%]{display:flex;align-items:center}.header-nav__links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-right:10px;cursor:pointer}"]}),Te})(),be=(()=>{class Te{constructor(){}ngOnInit(){}}return Te.\u0275fac=function(X){return new(X||Te)},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-control-panel"]],decls:2,vars:0,template:function(X,ie){1&X&&(g._UZ(0,"app-header"),g._UZ(1,"router-outlet"))},directives:[he,C.lC],styles:[""]}),Te})();var se=K(665);let Ae=(()=>{class Te{constructor(){}}return Te.\u0275fac=function(X){return new(X||Te)},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-loading-spinner"]],decls:14,vars:0,consts:[[1,"loading-spinner"],[1,"loader"]],template:function(X,ie){1&X&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g._UZ(2,"div"),g._UZ(3,"div"),g._UZ(4,"div"),g._UZ(5,"div"),g._UZ(6,"div"),g._UZ(7,"div"),g._UZ(8,"div"),g._UZ(9,"div"),g._UZ(10,"div"),g._UZ(11,"div"),g._UZ(12,"div"),g._UZ(13,"div"),g.qZA(),g.qZA())},styles:['.loading-spinner[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;left:0px;top:0px;width:100%;height:100%;z-index:499;background-color:var(--color13)}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{display:flex;width:64px;height:64px}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:32px 32px;animation:spin 1.2s linear infinite;-webkit-transform-origin:32px 32px;-webkit-animation:spin 1.2s linear infinite}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:52px;left:30px;width:7px;height:22px;border-radius:20%;background-color:#b53636}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);-webkit-transform:rotate(0deg);animation-delay:-1.1s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);-webkit-transform:rotate(30deg);animation-delay:-1s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);-webkit-transform:rotate(60deg);animation-delay:-.9s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);-webkit-transform:rotate(90deg);animation-delay:-.8s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);-webkit-transform:rotate(120deg);animation-delay:-.7s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);-webkit-transform:rotate(150deg);animation-delay:-.6s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);-webkit-transform:rotate(180deg);animation-delay:-.5s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);-webkit-transform:rotate(210deg);animation-delay:-.4s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);-webkit-transform:rotate(240deg);animation-delay:-.3s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);-webkit-transform:rotate(270deg);animation-delay:-.2s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);-webkit-transform:rotate(300deg);animation-delay:-.1s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);-webkit-transform:rotate(330deg);animation-delay:0s}@keyframes spin{0%{opacity:1}to{opacity:0}}']}),Te})();function ge(Te,gt){1&Te&&g._UZ(0,"app-loading-spinner")}function Ee(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," Please enter your email! "),g.qZA())}function Oe(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," Please enter a valid email! "),g.qZA())}function Ue(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," Please enter a passowrd! "),g.qZA())}function Xe(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," The password could not be longer then 30 symbols! "),g.qZA())}function ne(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," The password should be at least 8 symbols! "),g.qZA())}function Ke(Te,gt){if(1&Te&&(g.TgZ(0,"li",17),g._uU(1),g.qZA()),2&Te){const X=g.oxw();g.xp6(1),g.Oqu(X.errorAuthMsg)}}function At(Te,gt){if(1&Te&&(g.TgZ(0,"li",17),g._uU(1),g.qZA()),2&Te){const X=g.oxw();g.xp6(1),g.Oqu(X.errorOnGetuserData)}}let On=(()=>{class Te{constructor(X){this._authService=X}ngOnInit(){this.signinForm=new se.cw({email:new se.NI(null,[se.kI.required,se.kI.email]),password:new se.NI(null,[se.kI.required,se.kI.minLength(8),se.kI.maxLength(30)])}),this._errorAuthMsgSubscription=this._authService.errorAuthMsgSubject.subscribe(X=>{this.errorAuthMsg=X}),this._errorOnGetuserDataSubscription=this._authService.errorOnGetuserDataSubject.subscribe(X=>{this.errorOnGetuserData=X}),this._isLoadingSubscription=this._authService.isLoadingSubject.subscribe(X=>{this.isLoading=X})}ngOnDestroy(){this._errorAuthMsgSubscription.unsubscribe(),this._errorOnGetuserDataSubscription.unsubscribe(),this._isLoadingSubscription.unsubscribe(),this._authService.errorAuthMsg="",this._authService.errorAuthMsgSubject.next(this._authService.errorAuthMsg)}onSubmit(X){this._authService.signIn(X.value.email,X.value.password)}}return Te.\u0275fac=function(X){return new(X||Te)(g.Y36(J.e))},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-login"]],decls:33,vars:10,consts:[[1,"container"],[1,"sign-form",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"sign-form__sign-up-header"],[1,"hr-border"],[1,"sign-form__sign-element"],["for","email"],[1,"email"],[1,"email-img"],["type","text","name","email","formControlName","email"],[1,"sign-error"],["for","password"],[1,"password"],[1,"password-img"],["type","password","name","password","formControlName","password"],["type","submit",1,"btn-default",3,"disabled"],["class","error-msg",4,"ngIf"],[1,"error-msg"]],template:function(X,ie){1&X&&(g.TgZ(0,"div"),g.TgZ(1,"div",0),g.TgZ(2,"form",1),g.NdJ("ngSubmit",function(){return ie.onSubmit(ie.signinForm)}),g.YNc(3,ge,1,0,"app-loading-spinner",2),g.TgZ(4,"div",3),g.TgZ(5,"h2"),g._uU(6,"Login"),g.qZA(),g.qZA(),g._UZ(7,"hr",4),g.TgZ(8,"div",5),g.TgZ(9,"label",6),g._uU(10,"Email"),g.qZA(),g.TgZ(11,"div",7),g._UZ(12,"div",8),g._UZ(13,"input",9),g.qZA(),g.TgZ(14,"ul",10),g.YNc(15,Ee,2,0,"li",2),g.YNc(16,Oe,2,0,"li",2),g.qZA(),g.qZA(),g.TgZ(17,"div",5),g.TgZ(18,"label",11),g._uU(19,"Password"),g.qZA(),g.TgZ(20,"div",12),g._UZ(21,"div",13),g._UZ(22,"input",14),g.qZA(),g.TgZ(23,"ul",10),g.YNc(24,Ue,2,0,"li",2),g.YNc(25,Xe,2,0,"li",2),g.YNc(26,ne,2,0,"li",2),g.qZA(),g.qZA(),g.TgZ(27,"div"),g.TgZ(28,"button",15),g._uU(29,"Login"),g.qZA(),g.TgZ(30,"ul",10),g.YNc(31,Ke,2,1,"li",16),g.YNc(32,At,2,1,"li",16),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&X&&(g.xp6(2),g.Q6J("formGroup",ie.signinForm),g.xp6(1),g.Q6J("ngIf",ie.isLoading),g.xp6(12),g.Q6J("ngIf",!ie.signinForm.get("email").valid&&!ie.signinForm.get("email").hasError("email")&&ie.signinForm.get("email").touched),g.xp6(1),g.Q6J("ngIf",ie.signinForm.get("email").hasError("email")&&ie.signinForm.get("email").touched),g.xp6(8),g.Q6J("ngIf",!ie.signinForm.get("password").valid&&!ie.signinForm.get("password").hasError("maxlength")&&!ie.signinForm.get("password").hasError("minlength")&&ie.signinForm.get("password").touched),g.xp6(1),g.Q6J("ngIf",ie.signinForm.get("password").hasError("maxlength")&&ie.signinForm.get("password").touched),g.xp6(1),g.Q6J("ngIf",ie.signinForm.get("password").hasError("minlength")&&ie.signinForm.get("password").touched),g.xp6(2),g.Q6J("disabled",!ie.signinForm.valid),g.xp6(3),g.Q6J("ngIf",ie.errorAuthMsg),g.xp6(1),g.Q6J("ngIf",ie.errorOnGetuserData))},directives:[se._Y,se.JL,se.sg,P.O5,se.Fj,se.JJ,se.u,Ae],styles:['@import"https://fonts.googleapis.com/css?family=Rubik&display=swap";.sign-form[_ngcontent-%COMP%]{background-color:var(--color2);box-shadow:0 0 10px 1px #000000bf;max-width:767px;padding:20px;margin:0 auto;position:relative}.sign-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.sign-form__sign-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#b53636;text-align:center;font-size:1.3em;padding:5px}.sign-form__sign-element[_ngcontent-%COMP%]{font-size:1.1em;margin:20px 0}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{display:flex}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(user.73c0f083ad3711c1d950.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   .phone-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(phone.fb842bee9111b51d51a6.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:textfield;margin:0;border-left:none!important}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}.sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   .email-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;box-sizing:border-box;background-image:url(email.31cd4a3f10faa4acdb5c.png);padding:10px}.sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .password-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(password.63582da5386052e0358d.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .sign-error[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#b53636;font-size:1.1em;padding:10px 0 0;list-style:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 50px);border:1px solid var(--color8);color:var(--color7);border-radius:0 3px 3px 0;box-sizing:border-box;padding:7px;font-size:1.1em;outline:none;background-color:#ffffff80;filter:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{border:1px solid var(--color8);-webkit-text-fill-color:var(--color7);-webkit-box-shadow:none;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.sign-form__sign-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;width:100%;color:var(--color7)}.sign-form[_ngcontent-%COMP%]   .hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:20px 0}']}),Te})();var Lt=K(3210),ct=K(4552),$t=K(1437);function Rt(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.TgZ(3,"p"),g._uU(4),g.qZA(),g.TgZ(5,"div"),g.TgZ(6,"button",2),g.NdJ("click",function(){g.CHM(X);const _e=g.oxw().$implicit;return g.oxw(2).acceptChat(_e)}),g._uU(7,"Accept"),g.qZA(),g.qZA(),g.qZA()}if(2&Te){const X=g.oxw().$implicit;g.xp6(2),g.Oqu(X.username),g.xp6(2),g.Oqu(X.option)}}function En(Te,gt){if(1&Te&&(g.TgZ(0,"div"),g.YNc(1,Rt,8,2,"div",1),g.qZA()),2&Te){const X=gt.$implicit;g.xp6(1),g.Q6J("ngIf","pending"==X.status)}}function Dt(Te,gt){if(1&Te&&(g.TgZ(0,"div"),g.TgZ(1,"div"),g.TgZ(2,"p"),g._uU(3),g.qZA(),g.qZA(),g.TgZ(4,"div"),g.YNc(5,En,2,1,"div",0),g.qZA(),g.qZA()),2&Te){const X=gt.$implicit;g.xp6(3),g.Oqu(X.domainDescription),g.xp6(2),g.Q6J("ngForOf",X.chats)}}const Je=function(Te,gt,X){return{nick:Te,chatId:gt,domain:X}};function ot(Te,gt){if(1&Te&&(g.TgZ(0,"div"),g.TgZ(1,"div"),g.TgZ(2,"div"),g.TgZ(3,"p"),g._uU(4),g.qZA(),g.TgZ(5,"p"),g._uU(6),g.qZA(),g.TgZ(7,"p"),g._uU(8),g.qZA(),g.qZA(),g.TgZ(9,"div"),g._UZ(10,"app-chat-form-history",3),g.qZA(),g.qZA(),g.TgZ(11,"div"),g.TgZ(12,"p"),g._uU(13,"Client's info"),g.qZA(),g.TgZ(14,"div"),g.TgZ(15,"p"),g._uU(16),g.qZA(),g.TgZ(17,"p"),g._uU(18),g.qZA(),g.TgZ(19,"p"),g._uU(20),g.qZA(),g.qZA(),g.qZA(),g.TgZ(21,"div"),g._UZ(22,"app-chat-form",4),g.qZA(),g.qZA()),2&Te){const X=g.oxw().$implicit;g.xp6(4),g.Oqu(X.username),g.xp6(2),g.Oqu(X.option),g.xp6(2),g.Oqu(X.domain),g.xp6(2),g.Q6J("chatHistory",X.chatHistory),g.xp6(6),g.Oqu(X.clientInformation[0].ip),g.xp6(2),g.Oqu(X.clientInformation[0].city),g.xp6(2),g.Oqu(X.clientInformation[0].country),g.xp6(2),g.Q6J("userInfo",g.kEZ(8,Je,X.operatorDisplayName,X.id,X.domain))}}function st(Te,gt){if(1&Te&&(g.TgZ(0,"div"),g.YNc(1,ot,23,12,"div",1),g.qZA()),2&Te){const X=gt.$implicit,ie=g.oxw(2);g.xp6(1),g.Q6J("ngIf","active"==X.status&&X.operatorEmail==(null==ie.user?null:ie.user.email))}}function nt(Te,gt){if(1&Te&&(g.TgZ(0,"div"),g.YNc(1,st,2,1,"div",0),g.qZA()),2&Te){const X=gt.$implicit;g.xp6(1),g.Q6J("ngForOf",X.chats)}}let vt=(()=>{class Te{constructor(X,ie){this._authService=X,this._firestoreCollections=ie,this.activeChats=[]}ngOnInit(){new Promise((X,ie)=>{this._userSubscription=this._authService.user.subscribe(_e=>{this.user=_e,null!=this.user&&X()})}).then(()=>{for(const X of this.user.domains)X.checked&&this.activeChats.push({domainDescription:X.description,fsCollection:X.domain,chatsSubscription:""});for(let X=0;X<this.activeChats.length;X++)this.activeChats[X].chatsSubscription=this._firestoreCollections.getChats(this.activeChats[X].fsCollection,"activeChats").subscribe(ye=>{this.activeChats[X].chats=ye.map(qe=>Object.assign({},qe.payload.doc.data()))})})}ngOnDestroy(){this._userSubscription.unsubscribe();for(const X of this.activeChats)X.chatsSubscription.unsubscribe()}acceptChat(X){this._firestoreCollections.acceptPendingChat(X,{operatorDisplayName:this.user.name,operatorEmail:this.user.email}).then(()=>{},qe=>{})}}return Te.\u0275fac=function(X){return new(X||Te)(g.Y36(J.e),g.Y36(Lt.P))},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-chats"]],decls:10,vars:2,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button",3,"click"],[3,"chatHistory"],[3,"userInfo"]],template:function(X,ie){1&X&&(g.TgZ(0,"div"),g.TgZ(1,"p"),g._uU(2,"Pending chats"),g.qZA(),g.TgZ(3,"div"),g.YNc(4,Dt,6,2,"div",0),g.qZA(),g.qZA(),g.TgZ(5,"div"),g.TgZ(6,"p"),g._uU(7,"Chats"),g.qZA(),g.TgZ(8,"div"),g.YNc(9,nt,2,1,"div",0),g.qZA(),g.qZA()),2&X&&(g.xp6(4),g.Q6J("ngForOf",ie.activeChats),g.xp6(5),g.Q6J("ngForOf",ie.activeChats))},directives:[P.sg,P.O5,ct.q,$t.a],styles:[""]}),Te})();var at=K(4466);let tn=(()=>{class Te{constructor(){this.defaultRoles=[{name:"Users",value:"users",route:"users",checked:!1},{name:"Register",value:"register",route:"register",checked:!1},{name:"Blocked Clients",value:"blockedClients",route:"blocked-clients",checked:!0},{name:"Account Settings",value:"accountSettings",route:"account-settings",checked:!0},{name:"Domain Options",value:"domainOptions",route:"domain-options",checked:!1}]}}return Te.\u0275fac=function(X){return new(X||Te)},Te.\u0275prov=g.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})();function ln(Te,gt){1&Te&&g._UZ(0,"app-loading-spinner")}function Tn(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," Please enter your name! "),g.qZA())}function sn(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," The name could not be longer then 30 characters! "),g.qZA())}function jt(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," The name should be at least 3 characters! "),g.qZA())}function Nt(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," Please enter your email! "),g.qZA())}function Jt(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," Please enter a valid email! "),g.qZA())}function Gt(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," Please enter a passowrd! "),g.qZA())}function Fn(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," The password could not be longer then 30 symbols! "),g.qZA())}function Cn(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," The password should be at least 8 symbols! "),g.qZA())}function sr(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," The passwords do not match! "),g.qZA())}function zn(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"label"),g.TgZ(1,"input",25),g.NdJ("change",function(_e){const qe=g.CHM(X).index;return g.oxw().onRoleChange(_e,qe)}),g.qZA(),g._uU(2),g.qZA()}if(2&Te){const X=gt.$implicit;g.xp6(1),g.Q6J("value",X.value),g.uIk("checked",X.checked?"checked":null)("name",X.name)("data-route",X.route)("data-checked",X.checked),g.xp6(1),g.hij(" ",X.name," ")}}function Bn(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"label"),g.TgZ(1,"input",26),g.NdJ("change",function(_e){const qe=g.CHM(X).index;return g.oxw().onDomainChange(_e,qe)}),g.qZA(),g._uU(2),g.qZA()}if(2&Te){const X=gt.$implicit;g.xp6(1),g.Q6J("value",X.domain)("name",X.description),g.xp6(1),g.hij(" ",X.description," ")}}function Xn(Te,gt){if(1&Te&&(g.TgZ(0,"li",27),g._uU(1),g.qZA()),2&Te){const X=g.oxw();g.xp6(1),g.Oqu(X.errorAuthMsg)}}function Sn(Te,gt){if(1&Te&&(g.TgZ(0,"li",27),g._uU(1),g.qZA()),2&Te){const X=g.oxw();g.xp6(1),g.Oqu(X.errorOnSetUserData)}}const An=function(Te){return{invalid:Te}};let Oi=(()=>{class Te{constructor(X,ie,_e,ye){this._formBuilder=X,this._authService=ie,this._roleService=_e,this._firestoreCollections=ye,this.roles=this._roleService.defaultRoles}ngOnInit(){this._domainsSubscription=this._firestoreCollections.getDomains().subscribe(X=>{this.domains=X.map(ie=>Object.assign({id:ie.payload.doc.id},ie.payload.doc.data()))},X=>{}),this.signupForm=this._formBuilder.group({name:[null,[se.kI.required,se.kI.minLength(3),se.kI.maxLength(30)]],email:[null,[se.kI.required,se.kI.email]],password:[null,[se.kI.required,se.kI.minLength(8),se.kI.maxLength(30)]],confirmPass:[null,[se.kI.required]],roles:this._formBuilder.array([]),domains:this._formBuilder.array([])},{validator:this.confirmPasswordMatcher("password","confirmPass")}),this.rolesArray=this.signupForm.get("roles"),this.domainsArray=this.signupForm.get("domains");for(const X of this.roles)this.rolesArray.push(new se.NI({name:X.name,value:X.value,route:X.route,checked:X.checked}));if(null!=this.domains)for(const X of this.domains)this.domainsArray.push(new se.NI({checked:X.checked,description:X.description,domain:X.domain}));this._errorAuthMsgSubscription=this._authService.errorAuthMsgSubject.subscribe(X=>{this.errorAuthMsg=X}),this._errorOnSetUserDataSubscription=this._authService.errorOnSetUserDataSubject.subscribe(X=>{this.errorOnSetUserData=X}),this._isLoadingSubscription=this._authService.isLoadingSubject.subscribe(X=>{this.isLoading=X})}ngOnDestroy(){this._errorAuthMsgSubscription.unsubscribe(),this._errorOnSetUserDataSubscription.unsubscribe(),this._isLoadingSubscription.unsubscribe(),this._domainsSubscription.unsubscribe(),this._authService.errorAuthMsg="",this._authService.errorAuthMsgSubject.next(this._authService.errorAuthMsg)}confirmPasswordMatcher(X,ie){return _e=>{const qe=_e.controls[ie];qe.setErrors(_e.controls[X].value!==qe.value?{mustMatch:!0}:null)}}onRoleChange(X,ie){this.rolesArray.value[ie].checked=!!X.target.checked}onDomainChange(X,ie){this.domainsArray.value[ie].checked=!!X.target.checked}onSubmit(X){X.invalid||this._authService.signUp({name:X.value.name,email:X.value.email,password:X.value.password,roles:X.value.roles,domains:X.value.domains,active:!0})}}return Te.\u0275fac=function(X){return new(X||Te)(g.Y36(se.qu),g.Y36(J.e),g.Y36(tn),g.Y36(Lt.P))},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-register"]],decls:61,vars:19,consts:[[1,"container"],[1,"sign-form",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"sign-form__sign-up-header"],[1,"hr-border"],[1,"sign-form__sign-element"],["for","name"],[1,"name"],[1,"name-img"],["type","text","name","name","formControlName","name"],[1,"sign-error"],["for","email"],[1,"email"],[1,"email-img"],["type","text","name","email","formControlName","email"],["for","password"],[1,"password"],[1,"password-img"],["type","password","name","password","formControlName","password"],["for","confirmPass"],["type","password","name","confirmPass","formControlName","confirmPass",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"sign-form__sign-form-btn"],["type","submit",1,"btn-default",3,"disabled"],["class","error-msg",4,"ngIf"],["type","checkbox",3,"value","change"],["type","checkbox",3,"value","name","change"],[1,"error-msg"]],template:function(X,ie){1&X&&(g.TgZ(0,"div"),g.TgZ(1,"div",0),g.TgZ(2,"form",1),g.NdJ("ngSubmit",function(){return ie.onSubmit(ie.signupForm)}),g.YNc(3,ln,1,0,"app-loading-spinner",2),g.TgZ(4,"div",3),g.TgZ(5,"h2"),g._uU(6,"Register"),g.qZA(),g.qZA(),g._UZ(7,"hr",4),g.TgZ(8,"div",5),g.TgZ(9,"label",6),g._uU(10,"Name"),g.qZA(),g.TgZ(11,"div",7),g._UZ(12,"div",8),g._UZ(13,"input",9),g.qZA(),g.TgZ(14,"ul",10),g.YNc(15,Tn,2,0,"li",2),g.YNc(16,sn,2,0,"li",2),g.YNc(17,jt,2,0,"li",2),g.qZA(),g.qZA(),g.TgZ(18,"div",5),g.TgZ(19,"label",11),g._uU(20,"Email"),g.qZA(),g.TgZ(21,"div",12),g._UZ(22,"div",13),g._UZ(23,"input",14),g.qZA(),g.TgZ(24,"ul",10),g.YNc(25,Nt,2,0,"li",2),g.YNc(26,Jt,2,0,"li",2),g.qZA(),g.qZA(),g.TgZ(27,"div",5),g.TgZ(28,"label",15),g._uU(29,"Password"),g.qZA(),g.TgZ(30,"div",16),g._UZ(31,"div",17),g._UZ(32,"input",18),g.qZA(),g.TgZ(33,"ul",10),g.YNc(34,Gt,2,0,"li",2),g.YNc(35,Fn,2,0,"li",2),g.YNc(36,Cn,2,0,"li",2),g.qZA(),g.qZA(),g.TgZ(37,"div",5),g.TgZ(38,"label",19),g._uU(39,"Confirm Password"),g.qZA(),g.TgZ(40,"div",16),g._UZ(41,"div",17),g._UZ(42,"input",20),g.qZA(),g.TgZ(43,"ul",10),g.YNc(44,sr,2,0,"li",2),g.qZA(),g.qZA(),g.TgZ(45,"div",5),g.TgZ(46,"p"),g._uU(47,"Roles"),g.qZA(),g.TgZ(48,"div"),g.YNc(49,zn,3,6,"label",21),g.qZA(),g.qZA(),g.TgZ(50,"div",5),g.TgZ(51,"p"),g._uU(52,"Domains"),g.qZA(),g.TgZ(53,"div"),g.YNc(54,Bn,3,3,"label",21),g.qZA(),g.qZA(),g.TgZ(55,"div",22),g.TgZ(56,"button",23),g._uU(57,"Create registration"),g.qZA(),g.TgZ(58,"ul",10),g.YNc(59,Xn,2,1,"li",24),g.YNc(60,Sn,2,1,"li",24),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&X&&(g.xp6(2),g.Q6J("formGroup",ie.signupForm),g.xp6(1),g.Q6J("ngIf",ie.isLoading),g.xp6(12),g.Q6J("ngIf",!ie.signupForm.get("name").valid&&!ie.signupForm.get("name").hasError("maxlength")&&!ie.signupForm.get("name").hasError("minlength")&&ie.signupForm.get("name").touched),g.xp6(1),g.Q6J("ngIf",ie.signupForm.get("name").hasError("maxlength")&&ie.signupForm.get("name").touched),g.xp6(1),g.Q6J("ngIf",ie.signupForm.get("name").hasError("minlength")&&ie.signupForm.get("name").touched),g.xp6(8),g.Q6J("ngIf",!ie.signupForm.get("email").valid&&!ie.signupForm.get("email").hasError("email")&&ie.signupForm.get("email").touched),g.xp6(1),g.Q6J("ngIf",ie.signupForm.get("email").hasError("email")&&ie.signupForm.get("email").touched),g.xp6(8),g.Q6J("ngIf",!ie.signupForm.get("password").valid&&!ie.signupForm.get("password").hasError("maxlength")&&!ie.signupForm.get("password").hasError("minlength")&&ie.signupForm.get("password").touched),g.xp6(1),g.Q6J("ngIf",ie.signupForm.get("password").hasError("maxlength")&&ie.signupForm.get("password").touched),g.xp6(1),g.Q6J("ngIf",ie.signupForm.get("password").hasError("minlength")&&ie.signupForm.get("password").touched),g.xp6(6),g.Q6J("ngClass",g.VKq(17,An,!ie.signupForm.get("confirmPass").valid&&ie.signupForm.get("confirmPass").dirty)),g.xp6(2),g.Q6J("ngIf",!ie.signupForm.get("confirmPass").valid&&ie.signupForm.get("confirmPass").dirty),g.xp6(5),g.Q6J("ngForOf",ie.roles),g.xp6(5),g.Q6J("ngForOf",ie.domains),g.xp6(2),g.Q6J("disabled",!ie.signupForm.valid),g.xp6(3),g.Q6J("ngIf",ie.errorAuthMsg),g.xp6(1),g.Q6J("ngIf",ie.errorOnSetUserData))},directives:[se._Y,se.JL,se.sg,P.O5,se.Fj,se.JJ,se.u,P.mk,P.sg,Ae],styles:['@import"https://fonts.googleapis.com/css?family=Rubik&display=swap";.sign-form[_ngcontent-%COMP%]{background-color:var(--color2);box-shadow:0 0 10px 1px #000000bf;max-width:767px;padding:20px;margin:0 auto;position:relative}.sign-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.sign-form__sign-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#b53636;text-align:center;font-size:1.3em;padding:5px}.sign-form__sign-element[_ngcontent-%COMP%]{font-size:1.1em;margin:20px 0}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{display:flex}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(user.73c0f083ad3711c1d950.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   .phone-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(phone.fb842bee9111b51d51a6.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:textfield;margin:0;border-left:none!important}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}.sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   .email-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;box-sizing:border-box;background-image:url(email.31cd4a3f10faa4acdb5c.png);padding:10px}.sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .password-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(password.63582da5386052e0358d.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .sign-error[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#b53636;font-size:1.1em;padding:10px 0 0;list-style:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 50px);border:1px solid var(--color8);color:var(--color7);border-radius:0 3px 3px 0;box-sizing:border-box;padding:7px;font-size:1.1em;outline:none;background-color:#ffffff80;filter:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{border:1px solid var(--color8);-webkit-text-fill-color:var(--color7);-webkit-box-shadow:none;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.sign-form__sign-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;width:100%;color:var(--color7)}.sign-form[_ngcontent-%COMP%]   .hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:20px 0}']}),Te})();var gn=K(9829);let Yt=(()=>{class Te{constructor(X,ie){this._router=X,this._firebaseAuth=ie}canActivate(X,ie){const{autenticationRequired:_e,autenticationFailureRedirectUrl:ye}=X.data;return new Promise((yt,rn)=>{this.userSubscription=this._firebaseAuth.authState.subscribe(Mn=>_e&&Mn||!_e&&!Mn?(this.userSubscription.unsubscribe(),yt(!0)):(this.userSubscription.unsubscribe(),this._router.navigate([ye])))})}}return Te.\u0275fac=function(X){return new(X||Te)(g.LFG(C.F0),g.LFG(gn.zQ))},Te.\u0275prov=g.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})();function jn(Te,gt){if(1&Te&&(g.TgZ(0,"p"),g._uU(1),g.qZA()),2&Te){const X=g.oxw().$implicit;g.xp6(1),g.hij(" ",X.name," ")}}const Vn=function(Te){return[Te]};function Qt(Te,gt){if(1&Te&&(g.TgZ(0,"li",5),g.YNc(1,jn,2,1,"p",6),g.qZA()),2&Te){const X=gt.$implicit;g.Q6J("routerLink",g.VKq(2,Vn,X.route)),g.xp6(1),g.Q6J("ngIf",X.checked)}}let hr=(()=>{class Te{constructor(X){this._authService=X}ngOnInit(){this.userSubscirption=this._authService.user.subscribe(X=>{this.user=X})}ngOnDestroy(){this.userSubscirption.unsubscribe()}}return Te.\u0275fac=function(X){return new(X||Te)(g.Y36(J.e))},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-settings"]],decls:7,vars:1,consts:[[1,"container"],[1,"settings"],[1,"settings__nav"],["routerLinkActive","settings-link-active",3,"routerLink",4,"ngFor","ngForOf"],[1,"settings__options"],["routerLinkActive","settings-link-active",3,"routerLink"],[4,"ngIf"]],template:function(X,ie){1&X&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"ul"),g.YNc(4,Qt,2,4,"li",3),g.qZA(),g.qZA(),g.TgZ(5,"div",4),g._UZ(6,"router-outlet"),g.qZA(),g.qZA(),g.qZA()),2&X&&(g.xp6(4),g.Q6J("ngForOf",null==ie.user?null:ie.user.roles))},directives:[P.sg,C.lC,C.Od,C.rH,P.O5],styles:[".settings[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.settings__nav[_ngcontent-%COMP%]{width:10%}.settings__nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;cursor:pointer}.settings__options[_ngcontent-%COMP%]{width:90%}"]}),Te})();const Br=function(){return["active"]},$n=function(){return["inactive"]};let Tt=(()=>{class Te{constructor(){}ngOnInit(){}}return Te.\u0275fac=function(X){return new(X||Te)},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-users"]],decls:8,vars:4,consts:[[1,"container"],[1,"users-nav"],["routerLinkActive","users-link-active",3,"routerLink"]],template:function(X,ie){1&X&&(g.TgZ(0,"div",0),g.TgZ(1,"div"),g.TgZ(2,"ul",1),g.TgZ(3,"li",2),g._uU(4,"Active Accounts"),g.qZA(),g.TgZ(5,"li",2),g._uU(6,"Inactive Accounts"),g.qZA(),g.qZA(),g.qZA(),g._UZ(7,"router-outlet"),g.qZA()),2&X&&(g.xp6(3),g.Q6J("routerLink",g.DdM(2,Br)),g.xp6(2),g.Q6J("routerLink",g.DdM(3,$n)))},directives:[C.Od,C.rH,C.lC],styles:[".users-nav[_ngcontent-%COMP%]{display:flex;align-items:center}.users-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;padding:10px;cursor:pointer}"]}),Te})(),$e=(()=>{class Te{constructor(){}ngOnInit(){}}return Te.\u0275fac=function(X){return new(X||Te)},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-blocked-clients"]],decls:2,vars:0,template:function(X,ie){1&X&&(g.TgZ(0,"p"),g._uU(1,"blocked-clients works!"),g.qZA())},styles:[""]}),Te})();const ze=function(){return["change-password"]},Mt=function(){return["change-theme"]};let Pt=(()=>{class Te{constructor(){}ngOnInit(){}}return Te.\u0275fac=function(X){return new(X||Te)},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-account-settings"]],decls:9,vars:4,consts:[[1,"container"],["routerLinkActive","account-settings-link-active",3,"routerLink"]],template:function(X,ie){1&X&&(g.TgZ(0,"div",0),g.TgZ(1,"div"),g.TgZ(2,"ul"),g.TgZ(3,"li",1),g._uU(4," Change Password "),g.qZA(),g.TgZ(5,"li",1),g._uU(6," Change Theme "),g.qZA(),g.qZA(),g.qZA(),g.TgZ(7,"div"),g._UZ(8,"router-outlet"),g.qZA(),g.qZA()),2&X&&(g.xp6(3),g.Q6J("routerLink",g.DdM(2,ze)),g.xp6(2),g.Q6J("routerLink",g.DdM(3,Mt)))},directives:[C.Od,C.rH,C.lC],styles:[""]}),Te})();function an(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g.TgZ(6,"button",6),g.NdJ("click",function(){const ye=g.CHM(X).$implicit;return g.oxw().deleteDomainPopUpFun(ye)}),g._uU(7,"Delete"),g.qZA(),g.qZA(),g.qZA()}if(2&Te){const X=gt.$implicit;g.xp6(2),g.Oqu(X.domain),g.xp6(2),g.Oqu(X.description)}}function Ot(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.TgZ(3,"div"),g.TgZ(4,"button",6),g.NdJ("click",function(){return g.CHM(X),g.oxw().deleteDomain()}),g._uU(5,"Yes"),g.qZA(),g.TgZ(6,"button",6),g.NdJ("click",function(){return g.CHM(X),g.oxw().cancelPopUpFun()}),g._uU(7,"No"),g.qZA(),g.qZA(),g.qZA()}if(2&Te){const X=g.oxw();g.xp6(2),g.hij("\u0410re you sure you want to delete domain ",X.currentDomain.description,"?")}}let He=(()=>{class Te{constructor(X,ie){this._fb=X,this._firestoreCollections=ie,this.deleteDomainPopUp=!1}ngOnInit(){this.addDomainForm=this._fb.group({domain:[null,[se.kI.required,se.kI.pattern("^[a-z]*$")]],description:[null,se.kI.required]}),this._usersSubscription=this._firestoreCollections.getUsers().subscribe(X=>{this.users=X.map(ie=>Object.assign({id:ie.payload.doc.id},ie.payload.doc.data()))},X=>{}),this._domainsSubscription=this._firestoreCollections.getDomains().subscribe(X=>{this.domains=X.map(ie=>Object.assign({id:ie.payload.doc.id},ie.payload.doc.data()))},X=>{})}ngOnDestroy(){this._domainsSubscription.unsubscribe(),this._usersSubscription.unsubscribe()}submitDomainForm(X){if(X.invalid)return;const ie=X.value.domain,_e=X.value.description,yt={domain:ie,description:_e,checked:!1};this._firestoreCollections.addDomain({domain:ie,description:_e}).then(()=>{for(const rn of this.users)this._firestoreCollections.setDomain(rn.uid,yt).then(()=>{},Mn=>{});X.reset()},rn=>{})}deleteDomain(){this._firestoreCollections.deleteDomain(this.currentDomain.id).then(()=>{const X=this.currentDomain.description,ie=this.currentDomain.domain;for(const _e of this.users)this.deleteDomainItem(_e.uid,{checked:!0,description:X,domain:ie});for(const _e of this.users)this.deleteDomainItem(_e.uid,{checked:!1,description:X,domain:ie});this.cancelPopUpFun()},X=>{})}deleteDomainPopUpFun(X){this.deleteDomainPopUp=!0,this.currentDomain=X}cancelPopUpFun(){this.deleteDomainPopUp=!1,this.currentDomain=void 0}deleteDomainItem(X,ie){this._firestoreCollections.deleteDomainItem(X,ie).then(()=>{},_e=>{})}}return Te.\u0275fac=function(X){return new(X||Te)(g.Y36(se.qu),g.Y36(Lt.P))},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-allowed-domains"]],decls:24,vars:4,consts:[[3,"formGroup","ngSubmit"],["type","text","formControlName","domain","placeholder","Domain..."],["type","text","formControlName","description","placeholder","Description..."],["type","submit",3,"disabled"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click"]],template:function(X,ie){1&X&&(g.TgZ(0,"div"),g.TgZ(1,"div"),g._uU(2,"Strict Mode"),g.qZA(),g.TgZ(3,"div"),g.TgZ(4,"button"),g._uU(5,"Add domain"),g.qZA(),g.TgZ(6,"form",0),g.NdJ("ngSubmit",function(){return ie.submitDomainForm(ie.addDomainForm)}),g.TgZ(7,"div"),g._UZ(8,"input",1),g._UZ(9,"input",2),g.qZA(),g.TgZ(10,"div"),g.TgZ(11,"button",3),g._uU(12,"Add"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"div"),g.TgZ(14,"table"),g.TgZ(15,"tr"),g.TgZ(16,"th"),g._uU(17,"Domain"),g.qZA(),g.TgZ(18,"th"),g._uU(19,"Description"),g.qZA(),g.TgZ(20,"th"),g._uU(21,"Delete"),g.qZA(),g.qZA(),g.YNc(22,an,8,2,"tr",4),g.qZA(),g.qZA(),g.YNc(23,Ot,8,1,"div",5),g.qZA()),2&X&&(g.xp6(6),g.Q6J("formGroup",ie.addDomainForm),g.xp6(5),g.Q6J("disabled",ie.addDomainForm.invalid),g.xp6(11),g.Q6J("ngForOf",ie.domains),g.xp6(1),g.Q6J("ngIf",ie.deleteDomainPopUp))},directives:[se._Y,se.JL,se.sg,se.Fj,se.JJ,se.u,P.sg,P.O5],styles:[""]}),Te})(),pt=(()=>{class Te{transform(X,ie){return X?ie?(ie=ie.toLowerCase(),X.filter(_e=>JSON.stringify(_e.name).toLocaleLowerCase().includes(ie)||JSON.stringify(_e.email).toLocaleLowerCase().includes(ie))):X:null}}return Te.\u0275fac=function(X){return new(X||Te)},Te.\u0275pipe=g.Yjl({name:"searchPipe",type:Te,pure:!0}),Te})();function bt(Te,gt){if(1&Te&&(g.TgZ(0,"label"),g._UZ(1,"input",6),g._uU(2),g.qZA()),2&Te){const X=gt.$implicit;g.xp6(1),g.uIk("checked",X.checked?"checked":null),g.xp6(1),g.hij(" ",X.name," ")}}function St(Te,gt){if(1&Te&&(g.TgZ(0,"label"),g._UZ(1,"input",7),g._uU(2),g.qZA()),2&Te){const X=gt.$implicit;g.xp6(1),g.Q6J("checked",X.checked?"checked":null),g.xp6(1),g.hij(" ",X.description," ")}}function Ut(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"button",3),g.NdJ("click",function(){g.CHM(X);const _e=g.oxw().$implicit;return g.oxw().changeAccountActivity(_e.uid,!0)}),g._uU(1," Activate "),g.qZA()}}function hn(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"button",3),g.NdJ("click",function(){g.CHM(X);const _e=g.oxw().$implicit;return g.oxw().changeAccountActivity(_e.uid,!1)}),g._uU(1," Deactivate "),g.qZA()}}function mn(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td"),g.TgZ(2,"button",3),g.NdJ("click",function(){const ye=g.CHM(X).$implicit;return g.oxw().editUser(ye)}),g._uU(3,"Edit"),g.qZA(),g.qZA(),g.TgZ(4,"td"),g._uU(5),g.qZA(),g.TgZ(6,"td"),g._uU(7),g.qZA(),g.TgZ(8,"td"),g.YNc(9,bt,3,2,"label",1),g.qZA(),g.TgZ(10,"td"),g.TgZ(11,"div"),g.YNc(12,St,3,2,"label",1),g.qZA(),g.qZA(),g.TgZ(13,"td"),g.TgZ(14,"button",4),g.NdJ("click",function(){const ye=g.CHM(X).$implicit;return g.oxw().resetPassword(ye.email)}),g._uU(15," Reset Password "),g.qZA(),g.qZA(),g.TgZ(16,"td"),g.YNc(17,Ut,2,0,"button",5),g.YNc(18,hn,2,0,"button",5),g.qZA(),g.TgZ(19,"td"),g.TgZ(20,"button",3),g.NdJ("click",function(){const ye=g.CHM(X).$implicit;return g.oxw().getUserLogins(ye.uid)}),g._uU(21,"Login History"),g.qZA(),g.qZA(),g.qZA()}if(2&Te){const X=gt.$implicit,ie=g.oxw();g.xp6(5),g.hij(" ",X.email," "),g.xp6(2),g.hij(" ",X.name," "),g.xp6(2),g.Q6J("ngForOf",X.roles),g.xp6(3),g.Q6J("ngForOf",X.domains),g.xp6(2),g.Q6J("disabled",ie.disabledResetPasswordButton&&ie.currentResetEmail==X.email),g.xp6(3),g.Q6J("ngIf",!X.active),g.xp6(1),g.Q6J("ngIf",X.active)}}function qt(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.TgZ(3,"button",3),g.NdJ("click",function(){return g.CHM(X),g.oxw().closeResetPasswordPopUp()}),g._uU(4,"Close"),g.qZA(),g.qZA()}if(2&Te){const X=g.oxw();g.xp6(2),g.hij(" Reset password email was successfully sent to ",X.currentResetEmail,"! ")}}function Re(Te,gt){if(1&Te&&(g.TgZ(0,"tr"),g.TgZ(1,"td"),g._uU(2),g.ALo(3,"date"),g.ALo(4,"date"),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td"),g._uU(8),g.qZA(),g.TgZ(9,"td"),g._uU(10),g.qZA(),g.qZA()),2&Te){const X=gt.$implicit;g.xp6(2),g.AsE("",g.xi3(3,5,X.date.toDate(),"dd.MM.yyyy")," at ",g.xi3(4,8,X.date.toDate(),"HH:mm"),""),g.xp6(4),g.Oqu(X.ip),g.xp6(2),g.Oqu(X.country),g.xp6(2),g.Oqu(X.city)}}function Pe(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"button",8),g.NdJ("click",function(){return g.CHM(X),g.oxw().closeLogins()}),g._uU(2,"Close"),g.qZA(),g.TgZ(3,"table"),g.TgZ(4,"tr"),g.TgZ(5,"th"),g._uU(6,"Time"),g.qZA(),g.TgZ(7,"th"),g._uU(8,"IP"),g.qZA(),g.TgZ(9,"th"),g._uU(10,"Country"),g.qZA(),g.TgZ(11,"th"),g._uU(12,"City"),g.qZA(),g.qZA(),g.YNc(13,Re,11,11,"tr",1),g.qZA(),g.qZA()}if(2&Te){const X=g.oxw();g.xp6(13),g.Q6J("ngForOf",X.loginHistory[0].loginHistory)}}function Ye(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"label"),g._uU(1),g.TgZ(2,"input",13),g.NdJ("change",function(_e){const qe=g.CHM(X).index;return g.oxw(2).onRoleChange(_e,qe)}),g.qZA(),g.qZA()}if(2&Te){const X=gt.$implicit;g.xp6(1),g.hij(" ",X.name," "),g.xp6(1),g.Q6J("checked",X.checked?"checked":null)}}function et(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"label"),g._uU(1),g.TgZ(2,"input",13),g.NdJ("change",function(_e){const qe=g.CHM(X).index;return g.oxw(2).onDomainChange(_e,qe)}),g.qZA(),g.qZA()}if(2&Te){const X=gt.$implicit;g.xp6(1),g.hij(" ",X.description," "),g.xp6(1),g.Q6J("checked",X.checked?"checked":null)}}function tt(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"form",9),g.NdJ("ngSubmit",function(){return g.CHM(X),g.oxw().submitEditUserForm()}),g.TgZ(2,"div"),g.TgZ(3,"label",10),g._uU(4,"Display name"),g.qZA(),g._UZ(5,"input",11),g.qZA(),g.TgZ(6,"div"),g.YNc(7,Ye,3,2,"label",1),g.qZA(),g.TgZ(8,"div"),g.YNc(9,et,3,2,"label",1),g.qZA(),g.TgZ(10,"div"),g.TgZ(11,"button",12),g._uU(12,"Apply"),g.qZA(),g.TgZ(13,"button",3),g.NdJ("click",function(){return g.CHM(X),g.oxw().resetEditUserForm()}),g._uU(14,"Cancel"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&Te){const X=g.oxw();g.xp6(1),g.Q6J("formGroup",X.editUserForm),g.xp6(6),g.Q6J("ngForOf",X.currentUser.roles),g.xp6(2),g.Q6J("ngForOf",X.currentUser.domains)}}let zt=(()=>{class Te{constructor(X,ie,_e){this._firestoreCollections=X,this._firebaseAuth=ie,this._fb=_e,this.resetPasswordPopUp=!1,this.disabledResetPasswordButton=!1}ngOnInit(){}ngOnDestroy(){}editUser(X){this.currentUser=X,this.editUserForm=this._fb.group({name:[X.name,se.kI.required],roles:this._fb.array([]),domains:this._fb.array([])});const ie=this.editUserForm.get("roles"),_e=this.editUserForm.get("domains");for(const ye of X.roles)ie.push(new se.NI({checked:ye.checked,name:ye.name,route:ye.route,value:ye.value}));for(const ye of X.domains)_e.push(new se.NI({checked:ye.checked,description:ye.description,domain:ye.domain}))}submitEditUserForm(){this.editUserForm.invalid||this._firestoreCollections.setUserData({name:this.editUserForm.value.name,email:this.currentUser.email,active:this.currentUser.active,roles:this.editUserForm.value.roles,domains:this.editUserForm.value.domains,uid:this.currentUser.uid},!1).then(()=>{this.editUserForm.reset(),this.currentUser=void 0},Mn=>{})}resetEditUserForm(){this.currentUser=void 0,this.editUserForm.reset()}onRoleChange(X,ie){this.editUserForm.value.roles[ie].checked=!!X.target.checked}onDomainChange(X,ie){this.editUserForm.value.domains[ie].checked=!!X.target.checked}getUserLogins(X){this._loginHistorySubscription=this._firestoreCollections.getUserLogins(X).subscribe(ie=>{this.loginHistory=ie.map(_e=>Object.assign({id:_e.payload.doc.id},_e.payload.doc.data()))})}closeLogins(){this.loginHistory=void 0,this._loginHistorySubscription.unsubscribe()}changeAccountActivity(X,ie){this._firestoreCollections.updateUserActivity({userId:X,parameter:ie}).then(()=>{},yt=>{})}closeResetPasswordPopUp(){this.resetPasswordPopUp=!1,this.disabledResetPasswordButton=!1,this.currentResetEmail=""}resetPassword(X){this.disabledResetPasswordButton=!0,this.currentResetEmail=X,this._firebaseAuth.sendPasswordResetEmail(this.currentResetEmail).then(()=>{this.resetPasswordPopUp=!0,this.errorMsgOnResetPassword=""},ie=>{this.errorMsgOnResetPassword=ie.message,this.disabledResetPasswordButton=!1})}}return Te.\u0275fac=function(X){return new(X||Te)(g.Y36(Lt.P),g.Y36(gn.zQ),g.Y36(se.qu))},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-users-template"]],inputs:{users:"users"},decls:25,vars:8,consts:[["type","text","placeholder","Search by email or display name...",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button",3,"click"],["type","button",3,"disabled","click"],["type","button",3,"click",4,"ngIf"],["disabled","","type","checkbox"],["type","checkbox","disabled","",3,"checked"],[3,"click"],[3,"formGroup","ngSubmit"],["for","name"],["type","text","formControlName","name"],["type","submit"],["type","checkbox",3,"checked","change"]],template:function(X,ie){1&X&&(g.TgZ(0,"div"),g.TgZ(1,"div"),g.TgZ(2,"input",0),g.NdJ("ngModelChange",function(ye){return ie.searchParams=ye}),g.qZA(),g.TgZ(3,"table"),g.TgZ(4,"tr"),g._UZ(5,"th"),g.TgZ(6,"th"),g._uU(7,"Email Address"),g.qZA(),g.TgZ(8,"th"),g._uU(9,"Display Name"),g.qZA(),g.TgZ(10,"th"),g._uU(11,"Roles"),g.qZA(),g.TgZ(12,"th"),g._uU(13,"Domains"),g.qZA(),g.TgZ(14,"th"),g._uU(15,"Reset Password"),g.qZA(),g.TgZ(16,"th"),g._uU(17,"Activity"),g.qZA(),g.TgZ(18,"th"),g._uU(19,"Login History"),g.qZA(),g.qZA(),g.YNc(20,mn,22,7,"tr",1),g.ALo(21,"searchPipe"),g.qZA(),g.qZA(),g.YNc(22,qt,5,1,"div",2),g.YNc(23,Pe,14,1,"div",2),g.YNc(24,tt,15,3,"div",2),g.qZA()),2&X&&(g.xp6(2),g.Q6J("ngModel",ie.searchParams),g.xp6(18),g.Q6J("ngForOf",g.xi3(21,5,ie.users,ie.searchParams)),g.xp6(2),g.Q6J("ngIf",ie.resetPasswordPopUp),g.xp6(1),g.Q6J("ngIf",ie.loginHistory),g.xp6(1),g.Q6J("ngIf",ie.currentUser))},directives:[se.Fj,se.JJ,se.On,P.sg,P.O5,se._Y,se.JL,se.sg,se.u],pipes:[pt,P.uU],styles:[""]}),Te})(),_n=(()=>{class Te{constructor(X){this._firestoreCollections=X}ngOnInit(){this._activeUsersSubscription=this._firestoreCollections.getUserData("active",!0).subscribe(X=>{this.activeUsers=X.map(ie=>Object.assign({id:ie.payload.doc.id},ie.payload.doc.data()))},X=>{})}ngOnDestroy(){this._activeUsersSubscription.unsubscribe()}}return Te.\u0275fac=function(X){return new(X||Te)(g.Y36(Lt.P))},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-active-acounts"]],decls:1,vars:1,consts:[[3,"users"]],template:function(X,ie){1&X&&g._UZ(0,"app-users-template",0),2&X&&g.Q6J("users",ie.activeUsers)},directives:[zt],styles:[""]}),Te})(),rr=(()=>{class Te{constructor(X){this._firestoreCollections=X}ngOnInit(){this._inactiveUsersSubscription=this._firestoreCollections.getUserData("active",!1).subscribe(X=>{this.inactiveUsers=X.map(ie=>Object.assign({id:ie.payload.doc.id},ie.payload.doc.data()))},X=>{})}ngOnDestroy(){this._inactiveUsersSubscription.unsubscribe()}}return Te.\u0275fac=function(X){return new(X||Te)(g.Y36(Lt.P))},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-inactive-acounts"]],decls:1,vars:1,consts:[[3,"users"]],template:function(X,ie){1&X&&g._UZ(0,"app-users-template",0),2&X&&g.Q6J("users",ie.inactiveUsers)},directives:[zt],styles:[""]}),Te})(),Pn=(()=>{class Te{constructor(X,ie){this._router=X,this._authService=ie}canActivate(X,ie){const{role:_e,autenticationFailureRedirectUrl:ye}=X.data;return new Promise((qe,yt)=>{this.userSubscription=this._authService.user.subscribe(rn=>{if(null!=rn){for(let Mn of rn.roles)if(_e==Mn.value&&Mn.checked)return void 0!==this.userSubscription&&this.userSubscription.unsubscribe(),qe(!0);return this.userSubscription.unsubscribe(),this._router.navigate([ye])}null==rn&&this.userSubscription&&this.userSubscription.unsubscribe()})})}}return Te.\u0275fac=function(X){return new(X||Te)(g.LFG(C.F0),g.LFG(J.e))},Te.\u0275prov=g.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})();function Ln(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," Please enter a passowrd! "),g.qZA())}function ii(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," The password could not be longer then 30 symbols! "),g.qZA())}function jr(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," The password should be at least 8 symbols! "),g.qZA())}function Kr(Te,gt){1&Te&&(g.TgZ(0,"li"),g._uU(1," The passwords do not match! "),g.qZA())}function wr(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"p"),g._uU(2,"Your password has been successfully changed!"),g.qZA(),g.TgZ(3,"button",11),g.NdJ("click",function(){return g.CHM(X),g.oxw().closePasswordChangePopUp()}),g._uU(4,"Close"),g.qZA(),g.qZA()}}function xi(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.TgZ(3,"div"),g.TgZ(4,"button",12),g.NdJ("click",function(){return g.CHM(X),g.oxw().logout()}),g._uU(5,"Logout"),g.qZA(),g.TgZ(6,"button",12),g.NdJ("click",function(){return g.CHM(X),g.oxw().stayLogged()}),g._uU(7,"Change later"),g.qZA(),g.qZA(),g.qZA()}if(2&Te){const X=g.oxw();g.xp6(2),g.Oqu(X.changePasswordMsg)}}const Fo=function(Te){return{invalid:Te}};let Li=(()=>{class Te{constructor(X,ie,_e){this._fb=X,this._firebaseAuth=ie,this._authService=_e,this.changePasswordPopUp=!1,this.changePasswordLogoutPopUp=!1}ngOnInit(){this.changePasswordFrom=this._fb.group({password:[null,[se.kI.required,se.kI.minLength(8),se.kI.maxLength(30)]],confirmPass:[null,[se.kI.required]]},{validator:this.confirmPasswordMatcher("password","confirmPass")})}confirmPasswordMatcher(X,ie){return _e=>{const qe=_e.controls[ie];qe.setErrors(_e.controls[X].value!==qe.value?{mustMatch:!0}:null)}}changePassword(X){if(X.invalid)return;const ie=X.value.password;this._firebaseAuth.currentUser.then(_e=>{null==_e||_e.updatePassword(ie).then(()=>{this.changePasswordPopUp=!0,X.reset()},ye=>{this.changePasswordLogoutPopUp=!0,this.changePasswordMsg=ye.message})})}closePasswordChangePopUp(){this.changePasswordPopUp=!1}logout(){this._authService.logout()}stayLogged(){this.changePasswordLogoutPopUp=!1,this.changePasswordMsg="",this.changePasswordFrom.reset()}}return Te.\u0275fac=function(X){return new(X||Te)(g.Y36(se.qu),g.Y36(gn.zQ),g.Y36(J.e))},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-change-password"]],decls:25,vars:11,consts:[[3,"formGroup","ngSubmit"],[1,"sign-form__sign-element"],["for","password"],[1,"password"],[1,"password-img"],["type","password","name","password","formControlName","password"],[1,"sign-error"],[4,"ngIf"],["for","confirmPass"],["type","password","name","confirmPass","formControlName","confirmPass",3,"ngClass"],["type","submit",3,"disabled"],["type","button",3,"click"],[3,"click"]],template:function(X,ie){1&X&&(g.TgZ(0,"div"),g.TgZ(1,"form",0),g.NdJ("ngSubmit",function(){return ie.changePassword(ie.changePasswordFrom)}),g.TgZ(2,"div",1),g.TgZ(3,"label",2),g._uU(4,"Password"),g.qZA(),g.TgZ(5,"div",3),g._UZ(6,"div",4),g._UZ(7,"input",5),g.qZA(),g.TgZ(8,"ul",6),g.YNc(9,Ln,2,0,"li",7),g.YNc(10,ii,2,0,"li",7),g.YNc(11,jr,2,0,"li",7),g.qZA(),g.qZA(),g.TgZ(12,"div",1),g.TgZ(13,"label",8),g._uU(14,"Confirm Password"),g.qZA(),g.TgZ(15,"div",3),g._UZ(16,"div",4),g._UZ(17,"input",9),g.qZA(),g.TgZ(18,"ul",6),g.YNc(19,Kr,2,0,"li",7),g.qZA(),g.qZA(),g.TgZ(20,"div"),g.TgZ(21,"button",10),g._uU(22,"Change Password"),g.qZA(),g.qZA(),g.qZA(),g.YNc(23,wr,5,0,"div",7),g.YNc(24,xi,8,1,"div",7),g.qZA()),2&X&&(g.xp6(1),g.Q6J("formGroup",ie.changePasswordFrom),g.xp6(8),g.Q6J("ngIf",!ie.changePasswordFrom.get("password").valid&&!ie.changePasswordFrom.get("password").hasError("maxlength")&&!ie.changePasswordFrom.get("password").hasError("minlength")&&ie.changePasswordFrom.get("password").touched),g.xp6(1),g.Q6J("ngIf",ie.changePasswordFrom.get("password").hasError("maxlength")&&ie.changePasswordFrom.get("password").touched),g.xp6(1),g.Q6J("ngIf",ie.changePasswordFrom.get("password").hasError("minlength")&&ie.changePasswordFrom.get("password").touched),g.xp6(6),g.Q6J("ngClass",g.VKq(9,Fo,!ie.changePasswordFrom.get("confirmPass").valid&&ie.changePasswordFrom.get("confirmPass").dirty)),g.xp6(2),g.Q6J("ngIf",!ie.changePasswordFrom.get("confirmPass").valid&&ie.changePasswordFrom.get("confirmPass").dirty),g.xp6(2),g.Q6J("disabled",ie.changePasswordFrom.invalid),g.xp6(2),g.Q6J("ngIf",ie.changePasswordPopUp),g.xp6(1),g.Q6J("ngIf",ie.changePasswordLogoutPopUp))},directives:[se._Y,se.JL,se.sg,se.Fj,se.JJ,se.u,P.O5,P.mk],styles:[""]}),Te})(),uo=(()=>{class Te{constructor(){}ngOnInit(){}}return Te.\u0275fac=function(X){return new(X||Te)},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-change-theme"]],decls:2,vars:0,template:function(X,ie){1&X&&(g.TgZ(0,"p"),g._uU(1,"change-theme works!"),g.qZA())},styles:[""]}),Te})();const ns=function(){return["allowed-domains"]},Nr=function(){return["chat-menu-options"]};let ur=(()=>{class Te{constructor(){}ngOnInit(){}}return Te.\u0275fac=function(X){return new(X||Te)},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-domain-options"]],decls:8,vars:4,consts:[["routerLinkActive","domain-options-router-link-active",3,"routerLink"]],template:function(X,ie){1&X&&(g.TgZ(0,"div"),g.TgZ(1,"div"),g.TgZ(2,"ul"),g.TgZ(3,"li",0),g._uU(4,"Allowed Domains"),g.qZA(),g.TgZ(5,"li",0),g._uU(6,"Chat Menu Options"),g.qZA(),g.qZA(),g.qZA(),g._UZ(7,"router-outlet"),g.qZA()),2&X&&(g.xp6(3),g.Q6J("routerLink",g.DdM(2,ns)),g.xp6(2),g.Q6J("routerLink",g.DdM(3,Nr)))},directives:[C.Od,C.rH,C.lC],styles:[""]}),Te})();var yn=K(9351),Vr=K(2074);const eo=["editImg"];function Dr(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"button",4),g.NdJ("click",function(){return g.CHM(X),g.oxw().activateMenuOptionForm()}),g._uU(1,"Add menu option"),g.qZA()}}function Xt(Te,gt){if(1&Te&&(g.TgZ(0,"div"),g._UZ(1,"img",15),g.qZA()),2&Te){const X=g.oxw(2);g.xp6(1),g.Q6J("src",X.menuFileLocalPath,g.LSH)}}function dn(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"form",5),g.NdJ("ngSubmit",function(){g.CHM(X);const _e=g.oxw();return _e.isInEditMenuEditOptionMode?_e.submitmenuEditOptionsForm():_e.submitMenuOptionsForm(_e.menuOptionsForm)}),g.TgZ(1,"div"),g.YNc(2,Xt,2,1,"div",3),g.TgZ(3,"div"),g.TgZ(4,"input",6,7),g.NdJ("change",function(_e){return g.CHM(X),g.oxw().selectMenuImg(_e)}),g.qZA(),g.qZA(),g.TgZ(6,"div"),g.TgZ(7,"button",4),g.NdJ("click",function(){return g.CHM(X),g.MAs(5).click()}),g._uU(8," Select image "),g.qZA(),g.qZA(),g.qZA(),g.TgZ(9,"div"),g.TgZ(10,"label",8),g._uU(11,"Active"),g.qZA(),g._UZ(12,"input",9),g.qZA(),g.TgZ(13,"div"),g.TgZ(14,"label",10),g._uU(15,"Key"),g.qZA(),g._UZ(16,"input",11),g.qZA(),g.TgZ(17,"div"),g.TgZ(18,"label",12),g._uU(19,"Description"),g.qZA(),g._UZ(20,"input",13),g.qZA(),g.TgZ(21,"div"),g.TgZ(22,"button",14),g._uU(23),g.qZA(),g.TgZ(24,"button",4),g.NdJ("click",function(){return g.CHM(X),g.oxw().clearMenuOptionForm()}),g._uU(25,"Cancel"),g.qZA(),g.qZA(),g.qZA()}if(2&Te){const X=g.oxw();g.Q6J("formGroup",X.menuOptionsForm),g.xp6(2),g.Q6J("ngIf",!X.isInEditMenuEditOptionMode),g.xp6(20),g.Q6J("disabled",X.menuOptionsForm.invalid),g.xp6(1),g.Oqu(X.isInEditMenuEditOptionMode?"Change":"Add")}}function In(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"button",4),g.NdJ("click",function(){return g.CHM(X),g.oxw(2).applyNewImg()}),g._uU(1,"Apply (icon)"),g.qZA()}}function $r(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"button",4),g.NdJ("click",function(){return g.CHM(X),g.oxw(2).clearMenuOptionForm()}),g._uU(1,"Cancel (icon)"),g.qZA()}}function Si(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td"),g.TgZ(2,"button",4),g.NdJ("click",function(){const ye=g.CHM(X).$implicit;return g.oxw().editOption(ye)}),g._uU(3,"Edit"),g.qZA(),g.qZA(),g.TgZ(4,"td"),g.TgZ(5,"button",4),g.NdJ("click",function(){const ye=g.CHM(X).$implicit;return g.oxw().deleteMenuOptionPopUp(ye)}),g._uU(6,"Delete"),g.qZA(),g.qZA(),g.TgZ(7,"td"),g.TgZ(8,"div"),g.TgZ(9,"input",16,17),g.NdJ("change",function(_e){const qe=g.CHM(X).$implicit;return g.oxw().editMenuImg(_e,qe)}),g.qZA(),g.qZA(),g._UZ(11,"img",15),g.TgZ(12,"button",4),g.NdJ("click",function(){return g.CHM(X),g.MAs(10).click()}),g._uU(13,"Edit Image (icon)"),g.qZA(),g.YNc(14,In,2,0,"button",0),g.YNc(15,$r,2,0,"button",0),g.qZA(),g.TgZ(16,"td"),g.TgZ(17,"label"),g._uU(18,"Active"),g.qZA(),g._UZ(19,"input",18),g.qZA(),g.TgZ(20,"td"),g._uU(21),g.qZA(),g.qZA()}if(2&Te){const X=gt.$implicit,ie=g.oxw();g.xp6(11),g.Q6J("src",ie.menuEditedImage&&ie.currentOption.id==X.id?ie.menuEditedImage:X.img,g.LSH),g.xp6(3),g.Q6J("ngIf",ie.menuEditedImage&&ie.currentOption.id==X.id),g.xp6(1),g.Q6J("ngIf",ie.menuEditedImage&&ie.currentOption.id==X.id),g.xp6(4),g.Q6J("checked",X.active?"checked":null),g.xp6(2),g.Oqu(X.description)}}function Tr(Te,gt){if(1&Te){const X=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.TgZ(3,"button",4),g.NdJ("click",function(){return g.CHM(X),g.oxw().deleteMenuOption()}),g._uU(4,"OK"),g.qZA(),g.TgZ(5,"button",4),g.NdJ("click",function(){return g.CHM(X),g.oxw().clearMenuOptionForm()}),g._uU(6,"Cancel"),g.qZA(),g.qZA()}if(2&Te){const X=g.oxw();g.xp6(2),g.hij("Menu ",X.currentOption.description," will be deleted!")}}let ei=(()=>{class Te{constructor(X,ie,_e,ye){this._fb=X,this._angularFireStorage=ie,this._firestoreCollectionService=_e,this._generateIdService=ye,this.menuDefaultImg="../../../../../assets/images/menu-options/upload-img.png",this.menuFileLocalPath=this.menuDefaultImg,this.isOptionMenuActive=!1,this.isInEditMenuEditOptionMode=!1,this.isDeleteMenuOptionPopUpActive=!1}ngOnInit(){this.menuOptionsForm=this._fb.group({key:[null,se.kI.required],description:[null,se.kI.required],active:[!0],img:[null,se.kI.required]}),this._menuOptionsSubscription=this._firestoreCollectionService.getMenuOptions().subscribe(X=>{this.menuOptions=X.map(ie=>Object.assign({id:ie.payload.doc.id},ie.payload.doc.data()))},X=>{})}ngOnDestroy(){this._menuOptionsSubscription.unsubscribe()}activateMenuOptionForm(){this.isOptionMenuActive=!0}clearMenuOptionForm(){this.isOptionMenuActive=!1,this.currentOption=void 0,this.isDeleteMenuOptionPopUpActive=!1,this.isInEditMenuEditOptionMode=!1,this.menuEditedImage=void 0,this.menuFileLocalPath=this.menuDefaultImg,this.menuOptionsForm.reset(),this.editImg.nativeElement.value=""}submitMenuOptionsForm(X){X.invalid||this.uploadCarImgToFirestore().then(()=>this._firestoreCollectionService.addMenuOptionItem({key:X.value.key,description:X.value.description,img:X.value.img,active:X.value.active}).then(()=>{this.clearMenuOptionForm(),this.menuFileLocalPath=this.menuDefaultImg,this.isOptionMenuActive=!1},rn=>{}),ie=>{})}selectMenuImg(X){if(this.menuFile=X.target.files[0],this.menuFile){const ie=new FileReader;ie.onload=_e=>{this.menuFileLocalPath=_e.target.result},ie.readAsDataURL(X.target.files[0])}else this.menuFileLocalPath=this.menuDefaultImg}uploadCarImgToFirestore(){return new Promise((X,ie)=>{this._angularFireStorage.upload("/optionMenuImages/"+this._generateIdService.generateId()+this.menuFile.name,this.menuFile).then(_e=>{_e.ref.getDownloadURL().then(ye=>{this.menuOptionsForm.value.img=ye,X()},ye=>{})},_e=>{})})}deleteMenuOptionPopUp(X){this.currentOption=X,this.isDeleteMenuOptionPopUpActive=!0}deleteMenuOption(){this._firestoreCollectionService.deleteItemFromFireStorage(this.currentOption.img).then(()=>{this._firestoreCollectionService.deleteMenuOptionItem(this.currentOption).then(()=>{this.clearMenuOptionForm()},X=>{})},X=>{})}editOption(X){this.isOptionMenuActive=!0,this.isInEditMenuEditOptionMode=!0,this.currentOption=X,this.menuOptionsForm=this._fb.group({key:[X.key,se.kI.required],description:[X.description,se.kI.required],active:[X.active],img:[null]})}submitmenuEditOptionsForm(){this._firestoreCollectionService.editMenuOptionItem({key:this.menuOptionsForm.value.key,description:this.menuOptionsForm.value.description,active:this.menuOptionsForm.value.active,id:this.currentOption.id}).then(()=>{this.clearMenuOptionForm()},yt=>{})}editMenuImg(X,ie){if(this.currentOption=ie,this.menuFile=X.target.files[0],this.menuFile){const _e=new FileReader;_e.onload=ye=>{this.menuEditedImage=ye.target.result},_e.readAsDataURL(X.target.files[0])}else this.menuEditedImage=void 0,this.currentOption=void 0}applyNewImg(){this._firestoreCollectionService.deleteItemFromFireStorage(this.currentOption.img).then(()=>{this.uploadCarImgToFirestore().then(()=>{console.log(this.menuEditedImage),this._firestoreCollectionService.editMenuOptioImage(this.currentOption.id,this.menuOptionsForm.value.img).then(()=>{this.clearMenuOptionForm()},X=>{})})},X=>{})}}return Te.\u0275fac=function(X){return new(X||Te)(g.Y36(se.qu),g.Y36(yn.Q1),g.Y36(Lt.P),g.Y36(Vr.U))},Te.\u0275cmp=g.Xpm({type:Te,selectors:[["app-chat-menu-options"]],viewQuery:function(X,ie){if(1&X&&g.Gf(eo,5),2&X){let _e;g.iGM(_e=g.CRH())&&(ie.editImg=_e.first)}},decls:18,vars:4,consts:[["type","button",3,"click",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button",3,"click"],[3,"formGroup","ngSubmit"],["formControlName","img","type","file","accept",".png,.jpg,.jpeg,.svg,.heic",2,"display","none",3,"change"],["selectImg",""],["for","active"],["type","checkbox","name","active","formControlName","active"],["for","key"],["type","text","name","key","formControlName","key"],["for","description"],["type","text","name","description","formControlName","description"],["type","submit",3,"disabled"],[3,"src"],["type","file","accept",".png,.jpg,.jpeg,.svg,.heic",2,"display","none",3,"change"],["editImg",""],["type","checkbox","disabled","",3,"checked"]],template:function(X,ie){1&X&&(g.TgZ(0,"div"),g.TgZ(1,"div"),g.YNc(2,Dr,2,0,"button",0),g.qZA(),g.TgZ(3,"div"),g.YNc(4,dn,26,4,"form",1),g.qZA(),g.TgZ(5,"div"),g.TgZ(6,"table"),g.TgZ(7,"tr"),g._UZ(8,"th"),g._UZ(9,"th"),g.TgZ(10,"th"),g._uU(11,"Image"),g.qZA(),g.TgZ(12,"th"),g._uU(13,"Activity"),g.qZA(),g.TgZ(14,"th"),g._uU(15,"Description"),g.qZA(),g.qZA(),g.YNc(16,Si,22,5,"tr",2),g.qZA(),g.qZA(),g.YNc(17,Tr,7,1,"div",3),g.qZA()),2&X&&(g.xp6(2),g.Q6J("ngIf",!ie.isOptionMenuActive),g.xp6(2),g.Q6J("ngIf",ie.isOptionMenuActive),g.xp6(12),g.Q6J("ngForOf",ie.menuOptions),g.xp6(1),g.Q6J("ngIf",ie.isDeleteMenuOptionPopUpActive))},directives:[P.O5,P.sg,se._Y,se.JL,se.sg,se.Fj,se.JJ,se.u,se.Wl],styles:["img[_ngcontent-%COMP%]{width:100px}"]}),Te})(),br=(()=>{class Te{}return Te.\u0275fac=function(X){return new(X||Te)},Te.\u0275mod=g.oAB({type:Te}),Te.\u0275inj=g.cJS({imports:[[P.ez,se.UX,at.m,se.u5,C.Bz.forChild([{path:"",component:be,children:[{path:"login",component:On,canActivate:[Yt],data:{autenticationRequired:!1,autenticationFailureRedirectUrl:"/control-panel/chats"}},{path:"chats",component:vt,canActivate:[Yt],data:{autenticationRequired:!0,autenticationFailureRedirectUrl:"/control-panel/login"}},{path:"settings",component:hr,children:[{path:"users",component:Tt,children:[{path:"active",component:_n},{path:"inactive",component:rr},{path:"",redirectTo:"active",pathMatch:"full"}],canActivate:[Pn],data:{role:"users",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"register",component:Oi,canActivate:[Pn],data:{role:"register",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"blocked-clients",component:$e,canActivate:[Pn],data:{role:"blockedClients",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"account-settings",component:Pt,children:[{path:"change-password",component:Li},{path:"change-theme",component:uo},{path:"",redirectTo:"change-password",pathMatch:"full"}],canActivate:[Pn],data:{role:"accountSettings",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"domain-options",component:ur,children:[{path:"allowed-domains",component:He},{path:"chat-menu-options",component:ei},{path:"",redirectTo:"allowed-domains",pathMatch:"full"}],canActivate:[Pn],data:{role:"domainOptions",autenticationFailureRedirectUrl:"/control-panel/settings"}}],canActivate:[Yt],data:{autenticationRequired:!0,autenticationFailureRedirectUrl:"/control-panel/login"}},{path:"**",redirectTo:"chats"}]}])]]}),Te})()},7236:(Ht,it,K)=>{"use strict";K.r(it),K.d(it,{ErrorModule:()=>Ve});var P=K(8583),g=K(7716);let J=(()=>{class we{constructor(){}ngOnInit(){}}return we.\u0275fac=function(he){return new(he||we)},we.\u0275cmp=g.Xpm({type:we,selectors:[["app-error"]],decls:2,vars:0,template:function(he,be){1&he&&(g.TgZ(0,"p"),g._uU(1,"error works!"),g.qZA())},styles:[""]}),we})();var C=K(2213);let Ve=(()=>{class we{}return we.\u0275fac=function(he){return new(he||we)},we.\u0275mod=g.oAB({type:we}),we.\u0275inj=g.cJS({imports:[[P.ez,C.Bz.forChild([{path:"",component:J}])]]}),we})()},4552:(Ht,it,K)=>{"use strict";K.d(it,{q:()=>C});var P=K(7716),g=K(8583);function J(Ve,we){if(1&Ve&&(P.TgZ(0,"div"),P.TgZ(1,"div"),P.TgZ(2,"div"),P.TgZ(3,"p"),P._uU(4),P.qZA(),P.TgZ(5,"p"),P._uU(6),P.ALo(7,"date"),P.qZA(),P.qZA(),P.TgZ(8,"p"),P._uU(9),P.qZA(),P.qZA(),P.qZA()),2&Ve){const Ne=we.$implicit;P.xp6(4),P.Oqu(Ne.nick),P.xp6(2),P.Oqu(P.xi3(7,3,Ne.time.toDate(),"HH:mm")),P.xp6(3),P.Oqu(Ne.message)}}let C=(()=>{class Ve{constructor(){this.chatHistory=[]}ngOnInit(){}}return Ve.\u0275fac=function(Ne){return new(Ne||Ve)},Ve.\u0275cmp=P.Xpm({type:Ve,selectors:[["app-chat-form-history"]],inputs:{chatHistory:"chatHistory"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(Ne,he){1&Ne&&(P.TgZ(0,"div"),P.YNc(1,J,10,6,"div",0),P.qZA()),2&Ne&&(P.xp6(1),P.Q6J("ngForOf",he.chatHistory))},directives:[g.sg],pipes:[g.uU],styles:[""]}),Ve})()},1437:(Ht,it,K)=>{"use strict";K.d(it,{a:()=>Ve});var P=K(665),g=K(2329),J=K(7716),C=K(3210);let Ve=(()=>{class we{constructor(he,be){this._firestoreCollections=he,this._fb=be}ngOnInit(){this.chatForm=this._fb.group({message:[null,P.kI.required]})}submitChatForm(he){if(he.invalid)return;const ge={nick:this.userInfo.nick,chatId:this.userInfo.chatId,domain:this.userInfo.domain},Ee=he.value.message,Oe=g.Z.firestore.Timestamp.now();this._firestoreCollections.addMessage(ge,{message:Ee,time:Oe}).then(()=>{he.reset()},Xe=>{})}submitOnEnter(he,be){13===he.keyCode&&this.submitChatForm(be)}}return we.\u0275fac=function(he){return new(he||we)(J.Y36(C.P),J.Y36(P.qu))},we.\u0275cmp=J.Xpm({type:we,selectors:[["app-chat-form"]],inputs:{userInfo:"userInfo"},decls:5,vars:1,consts:[[3,"formGroup","ngSubmit","keydown"],["formControlName","message"],["type","submit"]],template:function(he,be){1&he&&(J.TgZ(0,"form",0),J.NdJ("ngSubmit",function(){return be.submitChatForm(be.chatForm)})("keydown",function(Ae){return be.submitOnEnter(Ae,be.chatForm)}),J._UZ(1,"textarea",1),J.TgZ(2,"div"),J.TgZ(3,"button",2),J._uU(4,"Send"),J.qZA(),J.qZA(),J.qZA()),2&he&&J.Q6J("formGroup",be.chatForm)},directives:[P._Y,P.JL,P.sg,P.Fj,P.JJ,P.u],styles:[""]}),we})()},9447:(Ht,it,K)=>{"use strict";K.d(it,{e:()=>ge});var P=K(6215),g=K(2329),J=K(2340);class Ve{constructor(Oe,Ue,Xe,ne,Ke){this.ip=Oe,this.country=Ue,this.city=Xe,this.uid=ne,this.date=Ke}}var Ne=K(7716),he=K(2213),be=K(9829),se=K(3210),Ae=K(1841);let ge=(()=>{class Ee{constructor(Ue,Xe,ne,Ke){this._router=Ue,this._firebaseAuth=Xe,this._firestoreCollections=ne,this._http=Ke,this.user=new P.X(void 0),this.userLocation=new Ve("","","","",null),this.setIP=!1,this.errorAuthMsg="",this.errorAuthMsgSubject=new P.X(this.errorAuthMsg),this.errorOnGetuserData="",this.errorOnGetuserDataSubject=new P.X(this.errorOnGetuserData),this.errorOnSetUserData="",this.errorOnSetUserDataSubject=new P.X(this.errorOnSetUserData),this.isLoading=!1,this.isLoadingSubject=new P.X(this.isLoading),this.secondaryApp=g.Z.initializeApp(J.N.firebaseConfig,"Secondary")}signUp(Ue){this.enableLoadingSpinner(),this.secondaryApp.auth().createUserWithEmailAndPassword(Ue.email,Ue.password).then(Xe=>{Ue.uid=Xe.user.uid,this._firestoreCollections.setUserData(Ue,!0).then(()=>{this.secondaryApp.auth().signOut(),this.errorOnSetUserData="",this.errorOnSetUserDataSubject.next(this.errorOnSetUserData)},ne=>{this.errorOnSetUserData=ne.message,this.errorOnSetUserDataSubject.next(this.errorOnSetUserData)}),this.errorAuthMsg="",this.errorAuthMsgSubject.next(this.errorAuthMsg),this.disableLoadingSpinner()},Xe=>{this.errorAuthHandler(Xe),this.disableLoadingSpinner()})}signIn(Ue,Xe){this.enableLoadingSpinner(),this._firebaseAuth.signInWithEmailAndPassword(Ue,Xe).then(()=>{this.setIP=!0,this.subscribeForDbCollectionUser(Ue),this.errorAuthMsg="",this.errorAuthMsgSubject.next(this.errorAuthMsg),this.disableLoadingSpinner()},ne=>{this.errorAuthHandler(ne),this.disableLoadingSpinner()})}logout(){this._firebaseAuth.signOut().then(()=>{this.userDbSubscription.unsubscribe(),this.user.next(null),this._router.navigate(["/control-panel/login"])})}autoLogin(){this._firebaseAuth.authState.subscribe(Ue=>{Ue&&!this.userDbSubscription?this.subscribeForDbCollectionUser(Ue.email):this.user.next(null)})}subscribeForDbCollectionUser(Ue){this.userDbSubscription=this._firestoreCollections.getUserData("email",Ue).subscribe(Xe=>{const ne=Xe.map(Ke=>Object.assign({},Ke.payload.doc.data()));this.user.next(ne[0]),this.userLocation.uid=ne[0].uid,ne[0].active||this.logout(),this.setIP&&(this.setIP=!1,this.setUserIP(),this._router.navigate(["/control-panel/chats"])),this.errorOnGetuserData="",this.errorOnGetuserDataSubject.next(this.errorOnGetuserData)},Xe=>{this.errorOnGetuserData=Xe.message,this.errorOnGetuserDataSubject.next(this.errorOnGetuserData)})}setUserIP(){this._userLocationSubscription=this._http.get("https://api.geoapify.com/v1/ipinfo?apiKey="+J.N.geoLocationAPIKey).subscribe(Ue=>{this.userLocation.country=Ue.country.name,this.userLocation.city=Ue.city.name,this.userLocation.ip=Ue.ip,this.userLocation.date=g.Z.firestore.Timestamp.now(),this._firestoreCollections.setUserIPAddress(this.userLocation).then(()=>{this._userLocationSubscription.unsubscribe()},Xe=>{this._userLocationSubscription.unsubscribe()})})}errorAuthHandler(Ue){switch(Ue.code){case"auth/email-already-in-use":this.errorAuthMsg="Already has a registration with this email!",this.errorAuthMsgSubject.next(this.errorAuthMsg);break;case"auth/user-not-found":this.errorAuthMsg="Wrong email!",this.errorAuthMsgSubject.next(this.errorAuthMsg);break;case"auth/wrong-password":this.errorAuthMsg="Wrong password!",this.errorAuthMsgSubject.next(this.errorAuthMsg);break;default:this.errorAuthMsg="Unknown Error",this.errorAuthMsgSubject.next(this.errorAuthMsg)}}enableLoadingSpinner(){this.isLoading=!0,this.isLoadingSubject.next(this.isLoading)}disableLoadingSpinner(){this.isLoading=!1,this.isLoadingSubject.next(this.isLoading)}}return Ee.\u0275fac=function(Ue){return new(Ue||Ee)(Ne.LFG(he.F0),Ne.LFG(be.zQ),Ne.LFG(se.P),Ne.LFG(Ae.eN))},Ee.\u0275prov=Ne.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})()},3210:(Ht,it,K)=>{"use strict";K.d(it,{P:()=>Sv});var P=K(2329),g=K(7716),J=K(3637),C=K(7574),Ve=K(4402),we=K(5917),Ne=K(9761),he=K(9328),be=K(8002),se=K(2145),Ae=K(7519),ge=K(5435),Ee=K(309),Oe=K(57),Ue=K(8583),Xe=K(9759),ne=K(4762),Ke=K(4685),At=K(300),On=function(o,t){return(On=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(s[p]=l[p])})(o,t)};function ct(o){var t="function"==typeof Symbol&&Symbol.iterator,s=t&&o[t],l=0;if(s)return s.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&l>=o.length&&(o=void 0),{value:o&&o[l++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var Rt,$t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},En=En||{},Dt=$t||self;function Je(){}function ot(o){var t=typeof o;return"array"==(t="object"!=t?t:o?Array.isArray(o)?"array":t:"null")||"object"==t&&"number"==typeof o.length}function st(o){var t=typeof o;return"object"==t&&null!=o||"function"==t}var vt="closure_uid_"+(1e9*Math.random()>>>0),at=0;function tn(o,t,s){return o.call.apply(o.bind,arguments)}function ln(o,t,s){if(!o)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var p=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(p,l),o.apply(t,p)}}return function(){return o.apply(t,arguments)}}function Tn(o,t,s){return(Tn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tn:ln).apply(null,arguments)}function sn(o,t){var s=Array.prototype.slice.call(arguments,1);return function(){var l=s.slice();return l.push.apply(l,arguments),o.apply(this,l)}}function jt(o,t){function s(){}s.prototype=t.prototype,o.Z=t.prototype,o.prototype=new s,o.prototype.constructor=o,o.Vb=function(l,p,v){for(var S=Array(arguments.length-2),F=2;F<arguments.length;F++)S[F-2]=arguments[F];return t.prototype[p].apply(l,S)}}function Nt(){this.s=this.s,this.o=this.o}var Gt={};Nt.prototype.s=!1,Nt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var o=function(o){return Object.prototype.hasOwnProperty.call(o,vt)&&o[vt]||(o[vt]=++at)}(this);delete Gt[o]}},Nt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Fn=Array.prototype.indexOf?function(o,t){return Array.prototype.indexOf.call(o,t,void 0)}:function(o,t){if("string"==typeof o)return"string"!=typeof t||1!=t.length?-1:o.indexOf(t,0);for(var s=0;s<o.length;s++)if(s in o&&o[s]===t)return s;return-1},Cn=Array.prototype.forEach?function(o,t,s){Array.prototype.forEach.call(o,t,s)}:function(o,t,s){for(var l=o.length,p="string"==typeof o?o.split(""):o,v=0;v<l;v++)v in p&&t.call(s,p[v],v,o)};function zn(o){return Array.prototype.concat.apply([],arguments)}function Bn(o){var t=o.length;if(0<t){for(var s=Array(t),l=0;l<t;l++)s[l]=o[l];return s}return[]}function Xn(o){return/^[\s\xa0]*$/.test(o)}var gn,Sn=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]};function An(o,t){return-1!=o.indexOf(t)}function Oi(o,t){return o<t?-1:o>t?1:0}e:{var Yt=Dt.navigator;if(Yt){var jn=Yt.userAgent;if(jn){gn=jn;break e}}gn=""}function Vn(o,t,s){for(var l in o)t.call(s,o[l],l,o)}function Qt(o){var t={};for(var s in o)t[s]=o[s];return t}var hr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Br(o,t){for(var s,l,p=1;p<arguments.length;p++){for(s in l=arguments[p])o[s]=l[s];for(var v=0;v<hr.length;v++)s=hr[v],Object.prototype.hasOwnProperty.call(l,s)&&(o[s]=l[s])}}function $n(o){return $n[" "](o),o}$n[" "]=Je;var pt,o,$e=An(gn,"Opera"),ze=An(gn,"Trident")||An(gn,"MSIE"),Mt=An(gn,"Edge"),Pt=Mt||ze,an=An(gn,"Gecko")&&!(An(gn.toLowerCase(),"webkit")&&!An(gn,"Edge"))&&!(An(gn,"Trident")||An(gn,"MSIE"))&&!An(gn,"Edge"),Ot=An(gn.toLowerCase(),"webkit")&&!An(gn,"Edge");function He(){var o=Dt.document;return o?o.documentMode:void 0}e:{var bt="",St=(o=gn,an?/rv:([^\);]+)(\)|;)/.exec(o):Mt?/Edge\/([\d\.]+)/.exec(o):ze?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o):Ot?/WebKit\/(\S+)/.exec(o):$e?/(?:Version)[ \/]?(\S+)/.exec(o):void 0);if(St&&(bt=St?St[1]:""),ze){var Ut=He();if(null!=Ut&&Ut>parseFloat(bt)){pt=String(Ut);break e}}pt=bt}var hn={};function mn(){return t=hn,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var o=0,t=Sn(String(pt)).split("."),s=Sn("9").split("."),l=Math.max(t.length,s.length),p=0;0==o&&p<l;p++){var v=t[p]||"",S=s[p]||"";do{if(v=/(\d*)(\D*)(.*)/.exec(v)||["","","",""],S=/(\d*)(\D*)(.*)/.exec(S)||["","","",""],0==v[0].length&&0==S[0].length)break;o=Oi(0==v[1].length?0:parseInt(v[1],10),0==S[1].length?0:parseInt(S[1],10))||Oi(0==v[2].length,0==S[2].length)||Oi(v[2],S[2]),v=v[3],S=S[3]}while(0==o)}return 0<=o}();var t}var Pe=Dt.document&&ze&&(He()||parseInt(pt,10))||void 0,Ye=function(){if(!Dt.addEventListener||!Object.defineProperty)return!1;var o=!1,t=Object.defineProperty({},"passive",{get:function(){o=!0}});try{Dt.addEventListener("test",Je,t),Dt.removeEventListener("test",Je,t)}catch(s){}return o}();function et(o,t){this.type=o,this.g=this.target=t,this.defaultPrevented=!1}function tt(o,t){if(et.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var s=this.type=o.type,l=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=t,t=o.relatedTarget){if(an){e:{try{$n(t.nodeName);var p=!0;break e}catch(v){}p=!1}p||(t=null)}}else"mouseover"==s?t=o.fromElement:"mouseout"==s&&(t=o.toElement);this.relatedTarget=t,l?(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0):(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType="string"==typeof o.pointerType?o.pointerType:zt[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&tt.Z.h.call(this)}}et.prototype.h=function(){this.defaultPrevented=!0},jt(tt,et);var zt={2:"touch",3:"pen",4:"mouse"};tt.prototype.h=function(){tt.Z.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var _n="closure_listenable_"+(1e6*Math.random()|0),rr=0;function Pn(o,t,s,l,p){this.listener=o,this.proxy=null,this.src=t,this.type=s,this.capture=!!l,this.ia=p,this.key=++rr,this.ca=this.fa=!1}function Ln(o){o.ca=!0,o.listener=null,o.proxy=null,o.src=null,o.ia=null}function ii(o){this.src=o,this.g={},this.h=0}function jr(o,t){var s=t.type;if(s in o.g){var v,l=o.g[s],p=Fn(l,t);(v=0<=p)&&Array.prototype.splice.call(l,p,1),v&&(Ln(t),0==o.g[s].length&&(delete o.g[s],o.h--))}}function Kr(o,t,s,l){for(var p=0;p<o.length;++p){var v=o[p];if(!v.ca&&v.listener==t&&v.capture==!!s&&v.ia==l)return p}return-1}ii.prototype.add=function(o,t,s,l,p){var v=o.toString();(o=this.g[v])||(o=this.g[v]=[],this.h++);var S=Kr(o,t,l,p);return-1<S?(t=o[S],s||(t.fa=!1)):((t=new Pn(t,this.src,v,!!l,p)).fa=s,o.push(t)),t};var wr="closure_lm_"+(1e6*Math.random()|0),xi={};function Fo(o,t,s,l,p){if(l&&l.once)return ns(o,t,s,l,p);if(Array.isArray(t)){for(var v=0;v<t.length;v++)Fo(o,t[v],s,l,p);return null}return s=Xt(s),o&&o[_n]?o.N(t,s,st(l)?!!l.capture:!!l,p):Li(o,t,s,!1,l,p)}function Li(o,t,s,l,p,v){if(!t)throw Error("Invalid event type");var S=st(p)?!!p.capture:!!p,F=eo(o);if(F||(o[wr]=F=new ii(o)),(s=F.add(t,s,l,S,v)).proxy)return s;if(l=function(){var t=Vr;return function o(s){return t.call(o.src,o.listener,s)}}(),s.proxy=l,l.src=o,l.listener=s,o.addEventListener)Ye||(p=S),void 0===p&&(p=!1),o.addEventListener(t.toString(),l,p);else if(o.attachEvent)o.attachEvent(yn(t.toString()),l);else{if(!o.addListener||!o.removeListener)throw Error("addEventListener and attachEvent are unavailable.");o.addListener(l)}return s}function ns(o,t,s,l,p){if(Array.isArray(t)){for(var v=0;v<t.length;v++)ns(o,t[v],s,l,p);return null}return s=Xt(s),o&&o[_n]?o.O(t,s,st(l)?!!l.capture:!!l,p):Li(o,t,s,!0,l,p)}function Nr(o,t,s,l,p){if(Array.isArray(t))for(var v=0;v<t.length;v++)Nr(o,t[v],s,l,p);else l=st(l)?!!l.capture:!!l,s=Xt(s),o&&o[_n]?(o=o.i,(t=String(t).toString())in o.g&&-1<(s=Kr(v=o.g[t],s,l,p))&&(Ln(v[s]),Array.prototype.splice.call(v,s,1),0==v.length&&(delete o.g[t],o.h--))):o&&(o=eo(o))&&(t=o.g[t.toString()],o=-1,t&&(o=Kr(t,s,l,p)),(s=-1<o?t[o]:null)&&ur(s))}function ur(o){if("number"!=typeof o&&o&&!o.ca){var t=o.src;if(t&&t[_n])jr(t.i,o);else{var s=o.type,l=o.proxy;t.removeEventListener?t.removeEventListener(s,l,o.capture):t.detachEvent?t.detachEvent(yn(s),l):t.addListener&&t.removeListener&&t.removeListener(l),(s=eo(t))?(jr(s,o),0==s.h&&(s.src=null,t[wr]=null)):Ln(o)}}}function yn(o){return o in xi?xi[o]:xi[o]="on"+o}function Vr(o,t){if(o.ca)o=!0;else{t=new tt(t,this);var s=o.listener,l=o.ia||o.src;o.fa&&ur(o),o=s.call(l,t)}return o}function eo(o){return(o=o[wr])instanceof ii?o:null}var Dr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xt(o){return"function"==typeof o?o:(o[Dr]||(o[Dr]=function(t){return o.handleEvent(t)}),o[Dr])}function dn(){Nt.call(this),this.i=new ii(this),this.P=this,this.I=null}function In(o,t){var s,l=o.I;if(l)for(s=[];l;l=l.I)s.push(l);if(o=o.P,l=t.type||t,"string"==typeof t)t=new et(t,o);else if(t instanceof et)t.target=t.target||o;else{var p=t;Br(t=new et(l,o),p)}if(p=!0,s)for(var v=s.length-1;0<=v;v--){var S=t.g=s[v];p=$r(S,l,!0,t)&&p}if(p=$r(S=t.g=o,l,!0,t)&&p,p=$r(S,l,!1,t)&&p,s)for(v=0;v<s.length;v++)p=$r(S=t.g=s[v],l,!1,t)&&p}function $r(o,t,s,l){if(!(t=o.i.g[String(t)]))return!0;t=t.concat();for(var p=!0,v=0;v<t.length;++v){var S=t[v];if(S&&!S.ca&&S.capture==s){var F=S.listener,Q=S.ia||S.src;S.fa&&jr(o.i,S),p=!1!==F.call(Q,l)&&p}}return p&&!l.defaultPrevented}jt(dn,Nt),dn.prototype[_n]=!0,dn.prototype.removeEventListener=function(o,t,s,l){Nr(this,o,t,s,l)},dn.prototype.M=function(){if(dn.Z.M.call(this),this.i){var t,o=this.i;for(t in o.g){for(var s=o.g[t],l=0;l<s.length;l++)Ln(s[l]);delete o.g[t],o.h--}}this.I=null},dn.prototype.N=function(o,t,s,l){return this.i.add(String(o),t,!1,s,l)},dn.prototype.O=function(o,t,s,l){return this.i.add(String(o),t,!0,s,l)};var Si=Dt.JSON.stringify;function Tr(){var o=qe,t=null;return o.g&&(t=o.g,o.g=o.g.next,o.g||(o.h=null),t.next=null),t}var ie,ei=function(){function o(){this.h=this.g=null}return o.prototype.add=function(t,s){var l=br.get();l.set(t,s),this.h?this.h.next=l:this.g=l,this.h=l},o}(),br=new(function(){function o(t,s){this.i=t,this.j=s,this.h=0,this.g=null}return o.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},o}())(function(){return new Te},function(o){return o.reset()}),Te=function(){function o(){this.next=this.g=this.h=null}return o.prototype.set=function(t,s){this.h=t,this.g=s,this.next=null},o.prototype.reset=function(){this.next=this.g=this.h=null},o}();function gt(o){Dt.setTimeout(function(){throw o},0)}function X(o,t){ie||function(){var o=Dt.Promise.resolve(void 0);ie=function(){o.then(yt)}}(),ye||(ie(),ye=!0),qe.add(o,t)}var ye=!1,qe=new ei;function yt(){for(var o;o=Tr();){try{o.h.call(o.g)}catch(s){gt(s)}var t=br;t.j(o),100>t.h&&(t.h++,o.next=t.g,t.g=o)}ye=!1}function rn(o,t){dn.call(this),this.h=o||1,this.g=t||Dt,this.j=Tn(this.kb,this),this.l=Date.now()}function Mn(o){o.da=!1,o.S&&(o.g.clearTimeout(o.S),o.S=null)}function vn(o,t,s){if("function"==typeof o)s&&(o=Tn(o,s));else{if(!o||"function"!=typeof o.handleEvent)throw Error("Invalid listener argument");o=Tn(o.handleEvent,o)}return 2147483647<Number(t)?-1:Dt.setTimeout(o,t||0)}function cn(o){o.g=vn(function(){o.g=null,o.i&&(o.i=!1,cn(o))},o.j);var t=o.h;o.h=null,o.m.apply(null,t)}jt(rn,dn),(Rt=rn.prototype).da=!1,Rt.S=null,Rt.kb=function(){if(this.da){var o=Date.now()-this.l;0<o&&o<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-o):(this.S&&(this.g.clearTimeout(this.S),this.S=null),In(this,"tick"),this.da&&(Mn(this),this.start()))}},Rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Rt.M=function(){rn.Z.M.call(this),Mn(this),delete this.g};var er=function(o){function t(s,l){var p=o.call(this)||this;return p.m=s,p.j=l,p.h=null,p.i=!1,p.g=null,p}return function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=o}On(o,t),o.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}(t,o),t.prototype.l=function(s){this.h=arguments,this.g?this.i=!0:cn(this)},t.prototype.M=function(){o.prototype.M.call(this),this.g&&(Dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(Nt);function zi(o){Nt.call(this),this.h=o,this.g={}}jt(zi,Nt);var gr=[];function Vi(o,t,s,l){Array.isArray(s)||(s&&(gr[0]=s.toString()),s=gr);for(var p=0;p<s.length;p++){var v=Fo(t,s[p],l||o.handleEvent,!1,o.h||o);if(!v)break;o.g[v.key]=v}}function lo(o){Vn(o.g,function(t,s){this.g.hasOwnProperty(s)&&ur(t)},o),o.g={}}function Wr(){this.g=!0}function Hn(o,t,s,l){o.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(o,t){if(!o.g)return t;if(!t)return null;try{var s=JSON.parse(t);if(s)for(o=0;o<s.length;o++)if(Array.isArray(s[o])){var l=s[o];if(!(2>l.length)){var p=l[1];if(Array.isArray(p)&&!(1>p.length)){var v=p[0];if("noop"!=v&&"stop"!=v&&"close"!=v)for(var S=1;S<p.length;S++)p[S]=""}}}return Si(s)}catch(F){return t}}(o,s)+(l?" "+l:"")})}zi.prototype.M=function(){zi.Z.M.call(this),lo(this)},zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wr.prototype.Aa=function(){this.g=!1},Wr.prototype.info=function(){};var qi={},fi=null;function Zi(){return fi=fi||new dn}function Qi(o){et.call(this,qi.Ma,o)}function yi(o){var t=Zi();In(t,new Qi(t,o))}function ds(o,t){et.call(this,qi.STAT_EVENT,o),this.stat=t}function Hr(o){var t=Zi();In(t,new ds(t,o))}function _s(o,t){et.call(this,qi.Na,o),this.size=t}function $i(o,t){if("function"!=typeof o)throw Error("Fn must not be null and must be a function");return Dt.setTimeout(function(){o()},t)}qi.Ma="serverreachability",jt(Qi,et),qi.STAT_EVENT="statevent",jt(ds,et),qi.Na="timingevent",jt(_s,et);var zo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},No={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function hs(){}function rs(){}hs.prototype.h=null;var or,qo={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function vi(){et.call(this,"d")}function bi(){et.call(this,"c")}function to(){}function no(o,t,s,l){this.l=o,this.j=t,this.m=s,this.X=l||1,this.V=new zi(this),this.P=Fi,this.W=new rn(o=Pt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new co}function co(){this.i=null,this.g="",this.h=!1}jt(vi,et),jt(bi,et),jt(to,hs),to.prototype.g=function(){return new XMLHttpRequest},to.prototype.i=function(){return{}},or=new to;var Fi=45e3,ho={},pi={};function ko(o,t,s){o.K=1,o.v=De(q(t)),o.s=s,o.U=!0,Ci(o,null)}function Ci(o,t){o.F=Date.now(),wo(o),o.A=q(o.v);var s=o.A,l=o.X;Array.isArray(l)||(l=[String(l)]),Dn(s.h,"t",l),o.C=0,s=o.l.H,o.h=new co,o.g=ni(o.l,s?t:null,!o.s),0<o.O&&(o.L=new er(Tn(o.Ia,o,o.g),o.O)),Vi(o.V,o.g,"readystatechange",o.gb),t=o.H?Qt(o.H):{},o.s?(o.u||(o.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.s,t)):(o.u="GET",o.g.ea(o.A,o.u,null,t)),yi(1),function(o,t,s,l,p,v){o.info(function(){if(o.g)if(v)for(var S="",F=v.split("&"),Q=0;Q<F.length;Q++){var le=F[Q].split("=");if(1<le.length){var fe=le[0];le=le[1];var xe=fe.split("_");S=2<=xe.length&&"type"==xe[1]?S+(fe+"=")+le+"&":S+(fe+"=redacted&")}}else S=null;else S=v;return"XMLHTTP REQ ("+l+") [attempt "+p+"]: "+t+"\n"+s+"\n"+S})}(o.j,o.u,o.A,o.m,o.X,o.s)}function Eo(o){return!!o.g&&"GET"==o.u&&2!=o.K&&o.l.Ba}function kr(o,t,s){for(var p,l=!0;!o.I&&o.C<s.length;){if((p=is(o,s))==pi){4==t&&(o.o=4,Hr(14),l=!1),Hn(o.j,o.m,null,"[Incomplete Response]");break}if(p==ho){o.o=4,Hr(15),Hn(o.j,o.m,s,"[Invalid Chunk]"),l=!1;break}Hn(o.j,o.m,p,null),fo(o,p)}Eo(o)&&p!=pi&&p!=ho&&(o.h.g="",o.C=0),4!=t||0!=s.length||o.h.h||(o.o=1,Hr(16),l=!1),o.i=o.i&&l,l?0<s.length&&!o.aa&&(o.aa=!0,(t=o.l).g==o&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+s.length),Ai(t),t.L=!0,Hr(11))):(Hn(o.j,o.m,s,"[Invalid Chunked Response]"),ti(o),ro(o))}function is(o,t){var s=o.C,l=t.indexOf("\n",s);return-1==l?pi:(s=Number(t.substring(s,l)),isNaN(s)?ho:(l+=1)+s>t.length?pi:(t=t.substr(l,s),o.C=l+s,t))}function wo(o){o.Y=Date.now()+o.P,Do(o,o.P)}function Do(o,t){if(null!=o.B)throw Error("WatchDog timer not null");o.B=$i(Tn(o.eb,o),t)}function Rr(o){o.B&&(Dt.clearTimeout(o.B),o.B=null)}function ro(o){0==o.l.G||o.I||Jr(o.l,o)}function ti(o){Rr(o);var t=o.L;t&&"function"==typeof t.na&&t.na(),o.L=null,Mn(o.W),lo(o.V),o.g&&(t=o.g,o.g=null,t.abort(),t.na())}function fo(o,t){try{var s=o.l;if(0!=s.G&&(s.g==o||kt(s.i,o)))if(s.I=o.N,!o.J&&kt(s.i,o)&&3==s.G){try{var l=s.Ca.g.parse(t)}catch(en){l=null}if(Array.isArray(l)&&3==l.length){var p=l;if(0==p[0])e:if(s.u)s.ta=p[1],0<s.ta-s.U&&37500>p[2]&&s.N&&0==s.A&&!s.v&&(s.v=$i(Tn(s.ab,s),6e3));else{if(s.g){if(!(s.g.F+3e3<o.F))break e;io(s),ya(s)}Cr(s),Hr(18)}if(1>=Ba(s.i)&&s.ka){try{s.ka()}catch(en){}s.ka=void 0}}else Ii(s,11)}else if((o.J||s.g==o)&&io(s),!Xn(t))for(p=s.Ca.g.parse(t),t=0;t<p.length;t++){var v=p[t];if(s.U=v[0],v=v[1],2==s.G)if("c"==v[0]){s.J=v[1],s.la=v[2];var S=v[3];null!=S&&(s.ma=S,s.h.info("VER="+s.ma));var F=v[4];null!=F&&(s.za=F,s.h.info("SVER="+s.za));var Q=v[5];null!=Q&&"number"==typeof Q&&0<Q&&(s.K=l=1.5*Q,s.h.info("backChannelRequestTimeoutMs_="+l)),l=s;var le=o.g;if(le){var fe=le.g?le.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fe){var xe=l.i;!xe.g&&(An(fe,"spdy")||An(fe,"quic")||An(fe,"h2"))&&(xe.j=xe.l,xe.g=new Set,xe.h&&(_r(xe,xe.h),xe.h=null))}if(l.D){var Ge=le.g?le.g.getResponseHeader("X-HTTP-Session-Id"):null;Ge&&(l.sa=Ge,ee(l.F,l.D,Ge))}}s.G=3,s.j&&s.j.xa(),s.$&&(s.O=Date.now()-o.F,s.h.info("Handshake RTT: "+s.O+"ms"));var ht=o;if((l=s).oa=Yi(l,l.H?l.la:null,l.W),ht.J){vs(l.i,ht);var lt=ht,wt=l.K;wt&&lt.setTimeout(wt),lt.B&&(Rr(lt),wo(lt)),l.g=ht}else xr(l);0<s.l.length&&Wi(s)}else"stop"!=v[0]&&"close"!=v[0]||Ii(s,7);else 3==s.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Ii(s,7):Ni(s):"noop"!=v[0]&&s.j&&s.j.wa(v),s.A=0)}yi(4)}catch(en){}}function Ei(o,t){if(o.forEach&&"function"==typeof o.forEach)o.forEach(t,void 0);else if(ot(o)||"string"==typeof o)Cn(o,t,void 0);else{if(o.T&&"function"==typeof o.T)var s=o.T();else if(o.R&&"function"==typeof o.R)s=void 0;else if(ot(o)||"string"==typeof o){s=[];for(var l=o.length,p=0;p<l;p++)s.push(p)}else for(p in s=[],l=0,o)s[l++]=p;p=(l=function(o){if(o.R&&"function"==typeof o.R)return o.R();if("string"==typeof o)return o.split("");if(ot(o)){for(var t=[],s=o.length,l=0;l<s;l++)t.push(o[l]);return t}for(l in t=[],s=0,o)t[s++]=o[l];return t}(o)).length;for(var v=0;v<p;v++)t.call(void 0,l[v],s&&s[v],o)}}function Vo(o,t){this.h={},this.g=[],this.i=0;var s=arguments.length;if(1<s){if(s%2)throw Error("Uneven number of arguments");for(var l=0;l<s;l+=2)this.set(arguments[l],arguments[l+1])}else if(o)if(o instanceof Vo)for(s=o.T(),l=0;l<s.length;l++)this.set(s[l],o.get(s[l]));else for(l in o)this.set(l,o[l])}function Lr(o){if(o.i!=o.g.length){for(var t=0,s=0;t<o.g.length;){var l=o.g[t];cr(o.h,l)&&(o.g[s++]=l),t++}o.g.length=s}if(o.i!=o.g.length){var p={};for(s=t=0;t<o.g.length;)cr(p,l=o.g[t])||(o.g[s++]=l,p[l]=1),t++;o.g.length=s}}function cr(o,t){return Object.prototype.hasOwnProperty.call(o,t)}(Rt=no.prototype).setTimeout=function(o){this.P=o},Rt.gb=function(o){o=o.target;var t=this.L;t&&3==ai(o)?t.l():this.Ia(o)},Rt.Ia=function(o){try{if(o==this.g)e:{var t=ai(this.g),s=this.g.Da(),l=this.g.ba();if(!(3>t)&&(3!=t||Pt||this.g&&(this.h.h||this.g.ga()||Oo(this.g)))){this.I||4!=t||7==s||yi(8==s||0>=l?3:2),Rr(this);var p=this.g.ba();this.N=p;t:if(Eo(this)){var v=Oo(this.g);o="";var S=v.length,F=4==ai(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ti(this),ro(this);var Q="";break t}this.h.i=new Dt.TextDecoder}for(s=0;s<S;s++)this.h.h=!0,o+=this.h.i.decode(v[s],{stream:F&&s==S-1});v.splice(0,S),this.h.g+=o,this.C=0,Q=this.h.g}else Q=this.g.ga();if(this.i=200==p,function(o,t,s,l,p,v,S){o.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+p+"]: "+t+"\n"+s+"\n"+v+" "+S})}(this.j,this.u,this.A,this.m,this.X,t,p),this.i){if(this.$&&!this.J){t:{if(this.g){var le,fe=this.g;if((le=fe.g?fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xn(le)){var xe=le;break t}}xe=null}if(!(p=xe)){this.i=!1,this.o=3,Hr(12),ti(this),ro(this);break e}Hn(this.j,this.m,p,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fo(this,p)}this.U?(kr(this,t,Q),Pt&&this.i&&3==t&&(Vi(this.V,this.W,"tick",this.fb),this.W.start())):(Hn(this.j,this.m,Q,null),fo(this,Q)),4==t&&ti(this),this.i&&!this.I&&(4==t?Jr(this.l,this):(this.i=!1,wo(this)))}else 400==p&&0<Q.indexOf("Unknown SID")?(this.o=3,Hr(12)):(this.o=0,Hr(13)),ti(this),ro(this)}}}catch(Ge){}},Rt.fb=function(){if(this.g){var o=ai(this.g),t=this.g.ga();this.C<t.length&&(Rr(this),kr(this,o,t),this.i&&4!=o&&wo(this))}},Rt.cancel=function(){this.I=!0,ti(this)},Rt.eb=function(){this.B=null;var o=Date.now();0<=o-this.Y?(function(o,t){o.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(yi(3),Hr(17)),ti(this),this.o=2,ro(this)):Do(this,this.Y-o)},(Rt=Vo.prototype).R=function(){Lr(this);for(var o=[],t=0;t<this.g.length;t++)o.push(this.h[this.g[t]]);return o},Rt.T=function(){return Lr(this),this.g.concat()},Rt.get=function(o,t){return cr(this.h,o)?this.h[o]:t},Rt.set=function(o,t){cr(this.h,o)||(this.i++,this.g.push(o)),this.h[o]=t},Rt.forEach=function(o,t){for(var s=this.T(),l=0;l<s.length;l++){var p=s[l],v=this.get(p);o.call(t,v,p,this)}};var po=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Y(o,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,o instanceof Y){this.g=void 0!==t?t:o.g,pe(this,o.j),this.s=o.s,x(this,o.i),$(this,o.m),this.l=o.l,t=o.h;var s=new Gr;s.i=t.i,t.g&&(s.g=new Vo(t.g),s.h=t.h),k(this,s),this.o=o.o}else o&&(s=String(o).match(po))?(this.g=!!t,pe(this,s[1]||"",!0),this.s=H(s[2]||""),x(this,s[3]||"",!0),$(this,s[4]),this.l=H(s[5]||"",!0),k(this,s[6]||"",!0),this.o=H(s[7]||"")):(this.g=!!t,this.h=new Gr(null,this.g))}function q(o){return new Y(o)}function pe(o,t,s){o.j=s?H(t,!0):t,o.j&&(o.j=o.j.replace(/:$/,""))}function x(o,t,s){o.i=s?H(t,!0):t}function $(o,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);o.m=t}else o.m=null}function k(o,t,s){t instanceof Gr?(o.h=t,function(o,t){t&&!o.j&&(fr(o),o.i=null,o.g.forEach(function(s,l){var p=l.toLowerCase();l!=p&&(zr(this,l),Dn(this,p,s))},o)),o.j=t}(o.h,o.g)):(s||(t=j(t,wn)),o.h=new Gr(t,o.g))}function ee(o,t,s){o.h.set(t,s)}function De(o){return ee(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function H(o,t){return o?t?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function j(o,t,s){return"string"==typeof o?(o=encodeURI(o).replace(t,V),s&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function V(o){return"%"+((o=o.charCodeAt(0))>>4&15).toString(16)+(15&o).toString(16)}Y.prototype.toString=function(){var o=[],t=this.j;t&&o.push(j(t,ue,!0),":");var s=this.i;return(s||"file"==t)&&(o.push("//"),(t=this.s)&&o.push(j(t,ue,!0),"@"),o.push(encodeURIComponent(String(s)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(s=this.m)&&o.push(":",String(s))),(s=this.l)&&(this.i&&"/"!=s.charAt(0)&&o.push("/"),o.push(j(s,"/"==s.charAt(0)?xt:We,!0))),(s=this.h.toString())&&o.push("?",s),(s=this.o)&&o.push("#",j(s,dr)),o.join("")};var ue=/[#\/\?@]/g,We=/[#\?:]/g,xt=/[#\?]/g,wn=/[#\?@]/g,dr=/#/g;function Gr(o,t){this.h=this.g=null,this.i=o||null,this.j=!!t}function fr(o){o.g||(o.g=new Vo,o.h=0,o.i&&function(o,t){if(o){o=o.split("&");for(var s=0;s<o.length;s++){var l=o[s].indexOf("="),p=null;if(0<=l){var v=o[s].substring(0,l);p=o[s].substring(l+1)}else v=o[s];t(v,p?decodeURIComponent(p.replace(/\+/g," ")):"")}}}(o.i,function(t,s){o.add(decodeURIComponent(t.replace(/\+/g," ")),s)}))}function zr(o,t){fr(o),t=Ji(o,t),cr(o.g.h,t)&&(o.i=null,o.h-=o.g.get(t).length,cr((o=o.g).h,t)&&(delete o.h[t],o.i--,o.g.length>2*o.i&&Lr(o)))}function oi(o,t){return fr(o),t=Ji(o,t),cr(o.g.h,t)}function Dn(o,t,s){zr(o,t),0<s.length&&(o.i=null,o.g.set(Ji(o,t),Bn(s)),o.h+=s.length)}function Ji(o,t){return t=String(t),o.j&&(t=t.toLowerCase()),t}(Rt=Gr.prototype).add=function(o,t){fr(this),this.i=null,o=Ji(this,o);var s=this.g.get(o);return s||this.g.set(o,s=[]),s.push(t),this.h+=1,this},Rt.forEach=function(o,t){fr(this),this.g.forEach(function(s,l){Cn(s,function(p){o.call(t,p,l,this)},this)},this)},Rt.T=function(){fr(this);for(var o=this.g.R(),t=this.g.T(),s=[],l=0;l<t.length;l++)for(var p=o[l],v=0;v<p.length;v++)s.push(t[l]);return s},Rt.R=function(o){fr(this);var t=[];if("string"==typeof o)oi(this,o)&&(t=zn(t,this.g.get(Ji(this,o))));else{o=this.g.R();for(var s=0;s<o.length;s++)t=zn(t,o[s])}return t},Rt.set=function(o,t){return fr(this),this.i=null,oi(this,o=Ji(this,o))&&(this.h-=this.g.get(o).length),this.g.set(o,[t]),this.h+=1,this},Rt.get=function(o,t){return o&&0<(o=this.R(o)).length?String(o[0]):t},Rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var o=[],t=this.g.T(),s=0;s<t.length;s++){var l=t[s],p=encodeURIComponent(String(l));l=this.R(l);for(var v=0;v<l.length;v++){var S=p;""!==l[v]&&(S+="="+encodeURIComponent(String(l[v]))),o.push(S)}}return this.i=o.join("&")};var go=function(t,s){this.h=t,this.g=s};function cu(o){this.l=o||$u,o=Dt.PerformanceNavigationTiming?0<(o=Dt.performance.getEntriesByType("navigation")).length&&("hq"==o[0].nextHopProtocol||"h2"==o[0].nextHopProtocol):!!(Dt.g&&Dt.g.Ea&&Dt.g.Ea()&&Dt.g.Ea().Zb),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $u=10;function du(o){return!!o.h||!!o.g&&o.g.size>=o.j}function Ba(o){return o.h?1:o.g?o.g.size:0}function kt(o,t){return o.h?o.h==t:!!o.g&&o.g.has(t)}function _r(o,t){o.g?o.g.add(t):o.h=t}function vs(o,t){o.h&&o.h==t?o.h=null:o.g&&o.g.has(t)&&o.g.delete(t)}function Pi(o){var t,s;if(null!=o.h)return o.i.concat(o.h.D);if(null!=o.g&&0!==o.g.size){var l=o.i;try{for(var p=ct(o.g.values()),v=p.next();!v.done;v=p.next())l=l.concat(v.value.D)}catch(F){t={error:F}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(t)throw t.error}}return l}return Bn(o.i)}function Os(){}function Rs(){this.g=new Os}function Zo(o,t,s){var l=s||"";try{Ei(o,function(p,v){var S=p;st(p)&&(S=Si(p)),t.push(l+v+"="+encodeURIComponent(S))})}catch(p){throw t.push(l+"type="+encodeURIComponent("_badmap")),p}}function A(o,t,s,l,p){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,p(l)}catch(v){}}function M(o){this.l=o.$b||null,this.j=o.ib||!1}function B(o,t){dn.call(this),this.D=o,this.u=t,this.m=void 0,this.readyState=ae,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cu.prototype.cancel=function(){var o,t;if(this.i=Pi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var s=ct(this.g.values()),l=s.next();!l.done;l=s.next())l.value.cancel()}catch(v){o={error:v}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(o)throw o.error}}this.g.clear()}},Os.prototype.stringify=function(o){return Dt.JSON.stringify(o,void 0)},Os.prototype.parse=function(o){return Dt.JSON.parse(o,void 0)},jt(M,hs),M.prototype.g=function(){return new B(this.l,this.j)},M.prototype.i=function(o){return function(){return o}}({}),jt(B,dn);var ae=0;function Ce(o){o.j.read().then(o.Sa.bind(o)).catch(o.ha.bind(o))}function Fe(o){o.readyState=4,o.l=null,o.j=null,o.A=null,Le(o)}function Le(o){o.onreadystatechange&&o.onreadystatechange.call(o)}(Rt=B.prototype).open=function(o,t){if(this.readyState!=ae)throw this.abort(),Error("Error reopening a connection");this.C=o,this.B=t,this.readyState=1,Le(this)},Rt.send=function(o){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};o&&(t.body=o),(this.D||Dt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fe(this)),this.readyState=ae},Rt.Va=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Le(this)),this.g&&(this.readyState=3,Le(this),this.g)))if("arraybuffer"===this.responseType)o.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Dt.ReadableStream&&"body"in o){if(this.j=o.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ce(this)}else o.text().then(this.Ua.bind(this),this.ha.bind(this))},Rt.Sa=function(o){if(this.g){if(this.u&&o.value)this.response.push(o.value);else if(!this.u){var t=o.value?o.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!o.done}))&&(this.response=this.responseText+=t)}o.done?Fe(this):Le(this),3==this.readyState&&Ce(this)}},Rt.Ua=function(o){this.g&&(this.response=this.responseText=o,Fe(this))},Rt.Ta=function(o){this.g&&(this.response=o,Fe(this))},Rt.ha=function(){this.g&&Fe(this)},Rt.setRequestHeader=function(o,t){this.v.append(o,t)},Rt.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},Rt.getAllResponseHeaders=function(){if(!this.h)return"";for(var o=[],t=this.h.entries(),s=t.next();!s.done;)o.push((s=s.value)[0]+": "+s[1]),s=t.next();return o.join("\r\n")},Object.defineProperty(B.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(o){this.m=o?"include":"same-origin"}});var ut=Dt.JSON.parse;function mt(o){dn.call(this),this.headers=new Vo,this.u=o||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Zt,this.K=this.L=!1}jt(mt,dn);var Zt="",xn=/^https?$/i,lr=["POST","PUT"];function qn(o){return"content-type"==o.toLowerCase()}function Nn(o,t){o.h=!1,o.g&&(o.l=!0,o.g.abort(),o.l=!1),o.j=t,o.m=5,mr(o),Ur(o)}function mr(o){o.D||(o.D=!0,In(o,"complete"),In(o,"error"))}function si(o){if(o.h&&void 0!==En&&(!o.C[1]||4!=ai(o)||2!=o.ba()))if(o.v&&4==ai(o))vn(o.Fa,0,o);else if(In(o,"readystatechange"),4==ai(o)){o.h=!1;try{var l,t=o.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break e;default:s=!1}if(!(l=s)){var p;if(p=0===t){var v=String(o.H).match(po)[1]||null;if(!v&&Dt.self&&Dt.self.location){var S=Dt.self.location.protocol;v=S.substr(0,S.length-1)}p=!xn.test(v?v.toLowerCase():"")}l=p}if(l)In(o,"complete"),In(o,"success");else{o.m=6;try{var F=2<ai(o)?o.g.statusText:""}catch(Q){F=""}o.j=F+" ["+o.ba()+"]",mr(o)}}finally{Ur(o)}}}function Ur(o,t){if(o.g){Xi(o);var s=o.g,l=o.C[0]?Je:null;o.g=null,o.C=null,t||In(o,"ready");try{s.onreadystatechange=l}catch(p){}}}function Xi(o){o.g&&o.K&&(o.g.ontimeout=null),o.A&&(Dt.clearTimeout(o.A),o.A=null)}function ai(o){return o.g?o.g.readyState:0}function Oo(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.J){case Zt:case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ui(o,t,s){e:{for(l in s){var l=!1;break e}l=!0}l||(s=function(o){var t="";return Vn(o,function(s,l){t+=l,t+=":",t+=s,t+="\r\n"}),t}(s),"string"==typeof o?null!=s&&encodeURIComponent(String(s)):ee(o,t,s))}function Ro(o,t,s){return s&&s.internalChannelParams&&s.internalChannelParams[o]||t}function $o(o){this.za=0,this.l=[],this.h=new Wr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ro("failFast",!1,o),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ro("baseRetryDelayMs",5e3,o),this.$a=Ro("retryDelaySeedMs",1e4,o),this.Ya=Ro("forwardChannelMaxRetries",2,o),this.ra=Ro("forwardChannelRequestTimeoutMs",2e4,o),this.qa=o&&o.xmlHttpFactory||void 0,this.Ba=o&&o.Yb||!1,this.K=void 0,this.H=o&&o.supportsCrossDomainXhr||!1,this.J="",this.i=new cu(o&&o.concurrentRequestLimit),this.Ca=new Rs,this.ja=o&&o.fastHandshake||!1,this.Ra=o&&o.Wb||!1,o&&o.Aa&&this.h.Aa(),o&&o.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&o&&o.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!o||!1!==o.Xb}function Ni(o){if(va(o),3==o.G){var t=o.V++,s=q(o.F);ee(s,"SID",o.J),ee(s,"RID",t),ee(s,"TYPE","terminate"),Rn(o,s),(t=new no(o,o.h,t,void 0)).K=2,t.v=De(q(s)),s=!1,Dt.navigator&&Dt.navigator.sendBeacon&&(s=Dt.navigator.sendBeacon(t.v.toString(),"")),!s&&Dt.Image&&((new Image).src=t.v,s=!0),s||(t.g=ni(t.l,null),t.g.ea(t.v)),t.F=Date.now(),wo(t)}Bs(o)}function ya(o){o.g&&(Ai(o),o.g.cancel(),o.g=null)}function va(o){ya(o),o.u&&(Dt.clearTimeout(o.u),o.u=null),io(o),o.i.cancel(),o.m&&("number"==typeof o.m&&Dt.clearTimeout(o.m),o.m=null)}function li(o,t){o.l.push(new go(o.Za++,t)),3==o.G&&Wi(o)}function Wi(o){du(o.i)||o.m||(o.m=!0,X(o.Ha,o),o.C=0)}function bn(o,t){var s;s=t?t.m:o.V++;var l=q(o.F);ee(l,"SID",o.J),ee(l,"RID",s),ee(l,"AID",o.U),Rn(o,l),o.o&&o.s&&ui(l,o.o,o.s),s=new no(o,o.h,s,o.C+1),null===o.o&&(s.H=o.s),t&&(o.l=t.D.concat(o.l)),t=Wn(o,s,1e3),s.setTimeout(Math.round(.5*o.ra)+Math.round(.5*o.ra*Math.random())),_r(o.i,s),ko(s,l,t)}function Rn(o,t){o.j&&Ei({},function(s,l){ee(t,l,s)})}function Wn(o,t,s){s=Math.min(o.l.length,s);var l=o.j?Tn(o.j.Oa,o.j,o):null;e:for(var p=o.l,v=-1;;){var S=["count="+s];-1==v?0<s?S.push("ofs="+(v=p[0].h)):v=0:S.push("ofs="+v);for(var F=!0,Q=0;Q<s;Q++){var le=p[Q].h,fe=p[Q].g;if(0>(le-=v))v=Math.max(0,p[Q].h-100),F=!1;else try{Zo(fe,S,"req"+le+"_")}catch(xe){l&&l(fe)}}if(F){l=S.join("&");break e}}return o=o.l.splice(0,s),t.D=o,l}function xr(o){o.g||o.u||(o.Y=1,X(o.Ga,o),o.A=0)}function Cr(o){return!(o.g||o.u||3<=o.A||(o.Y++,o.u=$i(Tn(o.Ga,o),na(o,o.A)),o.A++,0))}function Ai(o){null!=o.B&&(Dt.clearTimeout(o.B),o.B=null)}function wi(o){o.g=new no(o,o.h,"rpc",o.Y),null===o.o&&(o.g.H=o.s),o.g.O=0;var t=q(o.oa);ee(t,"RID","rpc"),ee(t,"SID",o.J),ee(t,"CI",o.N?"0":"1"),ee(t,"AID",o.U),Rn(o,t),ee(t,"TYPE","xmlhttp"),o.o&&o.s&&ui(t,o.o,o.s),o.K&&o.g.setTimeout(o.K);var s=o.g;o=o.la,s.K=1,s.v=De(q(t)),s.s=null,s.U=!0,Ci(s,o)}function io(o){null!=o.v&&(Dt.clearTimeout(o.v),o.v=null)}function Jr(o,t){var s=null;if(o.g==t){io(o),Ai(o),o.g=null;var l=2}else{if(!kt(o.i,t))return;s=t.D,vs(o.i,t),l=1}if(o.I=t.N,0!=o.G)if(t.i)if(1==l){s=t.s?t.s.length:0,t=Date.now()-t.F;var p=o.C;In(l=Zi(),new _s(l,s,t,p)),Wi(o)}else xr(o);else if(3==(p=t.o)||0==p&&0<o.I||!(1==l&&function(o,t){return!(Ba(o.i)>=o.i.j-(o.m?1:0)||(o.m?(o.l=t.D.concat(o.l),0):1==o.G||2==o.G||o.C>=(o.Xa?0:o.Ya)||(o.m=$i(Tn(o.Ha,o,t),na(o,o.C)),o.C++,0)))}(o,t)||2==l&&Cr(o)))switch(s&&0<s.length&&(t=o.i,t.i=t.i.concat(s)),p){case 1:Ii(o,5);break;case 4:Ii(o,10);break;case 3:Ii(o,6);break;default:Ii(o,2)}}function na(o,t){var s=o.Pa+Math.floor(Math.random()*o.$a);return o.j||(s*=2),s*t}function Ii(o,t){if(o.h.info("Error code "+t),2==t){var s=null;o.j&&(s=null);var l=Tn(o.jb,o);s||(s=new Y("//www.google.com/images/cleardot.gif"),Dt.location&&"http"==Dt.location.protocol||pe(s,"https"),De(s)),function(o,t){var s=new Wr;if(Dt.Image){var l=new Image;l.onload=sn(A,s,l,"TestLoadImage: loaded",!0,t),l.onerror=sn(A,s,l,"TestLoadImage: error",!1,t),l.onabort=sn(A,s,l,"TestLoadImage: abort",!1,t),l.ontimeout=sn(A,s,l,"TestLoadImage: timeout",!1,t),Dt.setTimeout(function(){l.ontimeout&&l.ontimeout()},1e4),l.src=o}else t(!1)}(s.toString(),l)}else Hr(2);o.G=0,o.j&&o.j.va(t),Bs(o),va(o)}function Bs(o){o.G=0,o.I=-1,o.j&&((0!=Pi(o.i).length||0!=o.l.length)&&(o.i.i.length=0,Bn(o.l),o.l.length=0),o.j.ua())}function Yi(o,t,s){var l=function(o){return o instanceof Y?q(o):new Y(o,void 0)}(s);if(""!=l.i)t&&x(l,t+"."+l.i),$(l,l.m);else{var p=Dt.location;l=function(o,t,s,l){var p=new Y(null,void 0);return o&&pe(p,o),t&&x(p,t),s&&$(p,s),l&&(p.l=l),p}(p.protocol,t?t+"."+p.hostname:p.hostname,+p.port,s)}return o.aa&&Vn(o.aa,function(v,S){ee(l,S,v)}),s=o.sa,(t=o.D)&&s&&ee(l,t,s),ee(l,"VER",o.ma),Rn(o,l),l}function ni(o,t,s){if(t&&!o.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new mt(s&&o.Ba&&!o.qa?new M({ib:!0}):o.qa)).L=o.H,t}function xs(){}function ba(){if(ze&&!(10<=Number(Pe)))throw Error("Environmental error: no available transport.")}function Bi(o,t){dn.call(this),this.g=new $o(t),this.l=o,this.h=t&&t.messageUrlParams||null,o=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.s=o,o=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(o?o["X-WebChannel-Content-Type"]=t.messageContentType:o={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(o?o["X-WebChannel-Client-Profile"]=t.ya:o={"X-WebChannel-Client-Profile":t.ya}),this.g.P=o,(o=t&&t.httpHeadersOverwriteParam)&&!Xn(o)&&(this.g.o=o),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Xn(t)&&(this.g.D=t,null!==(o=this.h)&&t in o&&t in(o=this.h)&&delete o[t]),this.j=new wa(this)}function Ca(o){vi.call(this);var t=o.__sm__;if(t){e:{for(var s in t){o=s;break e}o=void 0}(this.i=o)&&(o=this.i,t=null!==t&&o in t?t[o]:void 0),this.data=t}else this.data=o}function Ea(){bi.call(this),this.status=1}function wa(o){this.g=o}(Rt=mt.prototype).ea=function(o,t,s,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+o);t=t?t.toUpperCase():"GET",this.H=o,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():or.g(),this.C=function(o){return o.h||(o.h=o.i())}(this.u?this.u:or),this.g.onreadystatechange=Tn(this.Fa,this);try{this.F=!0,this.g.open(t,String(o),!0),this.F=!1}catch(v){return void Nn(this,v)}o=s||"";var p=new Vo(this.headers);l&&Ei(l,function(v,S){p.set(S,v)}),l=function(o){e:{for(var t=qn,s=o.length,l="string"==typeof o?o.split(""):o,p=0;p<s;p++)if(p in l&&t.call(void 0,l[p],p,o)){t=p;break e}t=-1}return 0>t?null:"string"==typeof o?o.charAt(t):o[t]}(p.T()),s=Dt.FormData&&o instanceof Dt.FormData,!(0<=Fn(lr,t))||l||s||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),p.forEach(function(v,S){this.g.setRequestHeader(S,v)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Xi(this),0<this.B&&((this.K=function(o){return ze&&mn()&&"number"==typeof o.timeout&&void 0!==o.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tn(this.pa,this)):this.A=vn(this.pa,this.B,this)),this.v=!0,this.g.send(o),this.v=!1}catch(v){Nn(this,v)}},Rt.pa=function(){void 0!==En&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,In(this,"timeout"),this.abort(8))},Rt.abort=function(o){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=o||7,In(this,"complete"),In(this,"abort"),Ur(this))},Rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ur(this,!0)),mt.Z.M.call(this)},Rt.Fa=function(){this.s||(this.F||this.v||this.l?si(this):this.cb())},Rt.cb=function(){si(this)},Rt.ba=function(){try{return 2<ai(this)?this.g.status:-1}catch(o){return-1}},Rt.ga=function(){try{return this.g?this.g.responseText:""}catch(o){return""}},Rt.Qa=function(o){if(this.g){var t=this.g.responseText;return o&&0==t.indexOf(o)&&(t=t.substring(o.length)),ut(t)}},Rt.Da=function(){return this.m},Rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Rt=$o.prototype).ma=8,Rt.G=1,Rt.hb=function(o){try{this.h.info("Origin Trials invoked: "+o)}catch(t){}},Rt.Ha=function(o){if(this.m)if(this.m=null,1==this.G){if(!o){this.V=Math.floor(1e5*Math.random()),o=this.V++;var t=new no(this,this.h,o,void 0),s=this.s;if(this.P&&(s?Br(s=Qt(s),this.P):s=this.P),null===this.o&&(t.H=s),this.ja)e:{for(var l=0,p=0;p<this.l.length;p++){var v=this.l[p];if(void 0===(v="__data__"in v.g&&"string"==typeof(v=v.g.__data__)?v.length:void 0))break;if(4096<(l+=v)){l=p;break e}if(4096===l||p===this.l.length-1){l=p+1;break e}}l=1e3}else l=1e3;l=Wn(this,t,l),ee(p=q(this.F),"RID",o),ee(p,"CVER",22),this.D&&ee(p,"X-HTTP-Session-Id",this.D),Rn(this,p),this.o&&s&&ui(p,this.o,s),_r(this.i,t),this.Ra&&ee(p,"TYPE","init"),this.ja?(ee(p,"$req",l),ee(p,"SID","null"),t.$=!0,ko(t,p,null)):ko(t,p,l),this.G=2}}else 3==this.G&&(o?bn(this,o):0==this.l.length||du(this.i)||bn(this))},Rt.Ga=function(){if(this.u=null,wi(this),this.$&&!(this.L||null==this.g||0>=this.O)){var o=2*this.O;this.h.info("BP detection timer enabled: "+o),this.B=$i(Tn(this.bb,this),o)}},Rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Hr(10),ya(this),wi(this))},Rt.ab=function(){null!=this.v&&(this.v=null,ya(this),Cr(this),Hr(19))},Rt.jb=function(o){o?(this.h.info("Successfully pinged google.com"),Hr(2)):(this.h.info("Failed to ping google.com"),Hr(1))},(Rt=xs.prototype).xa=function(){},Rt.wa=function(){},Rt.va=function(){},Rt.ua=function(){},Rt.Oa=function(){},ba.prototype.g=function(o,t){return new Bi(o,t)},jt(Bi,dn),Bi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var o=this.g,t=this.l,s=this.h||void 0;o.Wa&&(o.h.info("Origin Trials enabled."),X(Tn(o.hb,o,t))),Hr(0),o.W=t,o.aa=s||{},o.N=o.X,o.F=Yi(o,null,o.W),Wi(o)},Bi.prototype.close=function(){Ni(this.g)},Bi.prototype.u=function(o){if("string"==typeof o){var t={};t.__data__=o,li(this.g,t)}else this.v?((t={}).__data__=Si(o),li(this.g,t)):li(this.g,o)},Bi.prototype.M=function(){this.g.j=null,delete this.j,Ni(this.g),delete this.g,Bi.Z.M.call(this)},jt(Ca,vi),jt(Ea,bi),jt(wa,xs),wa.prototype.xa=function(){In(this.g,"a")},wa.prototype.wa=function(o){In(this.g,new Ca(o))},wa.prototype.va=function(o){In(this.g,new Ea(o))},wa.prototype.ua=function(){In(this.g,"b")},ba.prototype.createWebChannel=ba.prototype.g,Bi.prototype.send=Bi.prototype.u,Bi.prototype.open=Bi.prototype.m,Bi.prototype.close=Bi.prototype.close,zo.NO_ERROR=0,zo.TIMEOUT=8,zo.HTTP_ERROR=6,No.COMPLETE="complete",rs.EventType=qo,qo.OPEN="a",qo.CLOSE="b",qo.ERROR="c",qo.MESSAGE="d",dn.prototype.listen=dn.prototype.N,mt.prototype.listenOnce=mt.prototype.O,mt.prototype.getLastError=mt.prototype.La,mt.prototype.getLastErrorCode=mt.prototype.Da,mt.prototype.getStatus=mt.prototype.ba,mt.prototype.getResponseJson=mt.prototype.Qa,mt.prototype.getResponseText=mt.prototype.ga,mt.prototype.send=mt.prototype.ea;var Da=zo,Yu=No,hu=qi,js_PROXY=10,js_NOPROXY=11,Ml=M,ra=rs,ja=mt,Ki=function(){function o(t,s){var l=this;this.previousValue=t,s&&(s.sequenceNumberHandler=function(p){return l.t(p)},this.i=function(p){return s.writeSequenceNumber(p)})}return o.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},o.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},o}();Ki.o=-1;var _t={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Vt=function(o){function t(s,l){var p=this;return(p=o.call(this,l)||this).code=s,p.message=l,p.name="FirebaseError",p.toString=function(){return p.name+": [code="+p.code+"]: "+p.message},p}return(0,ne.ZT)(t,o),t}(Error),ss=new At.Yd("@firebase/firestore");function Sa(){return ss.logLevel}function nn(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(ss.logLevel<=At.in.DEBUG){var l=t.map(Ga);ss.debug.apply(ss,(0,ne.ev)(["Firestore (8.10.0): "+o],l))}}function Ri(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(ss.logLevel<=At.in.ERROR){var l=t.map(Ga);ss.error.apply(ss,(0,ne.ev)(["Firestore (8.10.0): "+o],l))}}function Cs(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(ss.logLevel<=At.in.WARN){var l=t.map(Ga);ss.warn.apply(ss,(0,ne.ev)(["Firestore (8.10.0): "+o],l))}}function Ga(o){if("string"==typeof o)return o;try{return JSON.stringify(o)}catch(s){return o}}function kn(o){void 0===o&&(o="Unexpected state");var t="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+o;throw Ri(t),new Error(t)}function Kn(o,t){o||kn()}function un(o,t){return o}function rc(o){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),s=new Uint8Array(o);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(s);else for(var l=0;l<o;l++)s[l]=Math.floor(256*Math.random());return s}var fu=function(){function o(){}return o.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/t.length)*t.length,l="";l.length<20;)for(var p=rc(40),v=0;v<p.length;++v)l.length<20&&p[v]<s&&(l+=t.charAt(p[v]%t.length));return l},o}();function Pr(o,t){return o<t?-1:o>t?1:0}function za(o,t,s){return o.length===t.length&&o.every(function(l,p){return s(l,t[p])})}function qa(o){return o+"\0"}var U=function(){function o(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new Vt(_t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Vt(_t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<-62135596800)throw new Vt(_t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Vt(_t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return o.now=function(){return o.fromMillis(Date.now())},o.fromDate=function(t){return o.fromMillis(t.getTime())},o.fromMillis=function(t){var s=Math.floor(t/1e3);return new o(s,Math.floor(1e6*(t-1e3*s)))},o.prototype.toDate=function(){return new Date(this.toMillis())},o.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},o.prototype._compareTo=function(t){return this.seconds===t.seconds?Pr(this.nanoseconds,t.nanoseconds):Pr(this.seconds,t.seconds)},o.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},o.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},o.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},o.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},o}(),R=function(){function o(t){this.timestamp=t}return o.fromTimestamp=function(t){return new o(t)},o.min=function(){return new o(new U(0,0))},o.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},o.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},o.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},o.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},o.prototype.toTimestamp=function(){return this.timestamp},o}();function O(o){var t=0;for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&t++;return t}function Z(o,t){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&t(s,o[s])}function te(o){for(var t in o)if(Object.prototype.hasOwnProperty.call(o,t))return!1;return!0}var de=function(){function o(t,s,l){void 0===s?s=0:s>t.length&&kn(),void 0===l?l=t.length-s:l>t.length-s&&kn(),this.segments=t,this.offset=s,this.len=l}return Object.defineProperty(o.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return 0===o.comparator(this,t)},o.prototype.child=function(t){var s=this.segments.slice(this.offset,this.limit());return t instanceof o?t.forEach(function(l){s.push(l)}):s.push(t),this.construct(s)},o.prototype.limit=function(){return this.offset+this.length},o.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},o.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},o.prototype.firstSegment=function(){return this.segments[this.offset]},o.prototype.lastSegment=function(){return this.get(this.length-1)},o.prototype.get=function(t){return this.segments[this.offset+t]},o.prototype.isEmpty=function(){return 0===this.length},o.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0},o.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0},o.prototype.forEach=function(t){for(var s=this.offset,l=this.limit();s<l;s++)t(this.segments[s])},o.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},o.comparator=function(t,s){for(var l=Math.min(t.length,s.length),p=0;p<l;p++){var v=t.get(p),S=s.get(p);if(v<S)return-1;if(v>S)return 1}return t.length<s.length?-1:t.length>s.length?1:0},o}(),Ie=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ne.ZT)(t,o),t.prototype.construct=function(s,l,p){return new t(s,l,p)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];for(var p=[],v=0,S=s;v<S.length;v++){var F=S[v];if(F.indexOf("//")>=0)throw new Vt(_t.INVALID_ARGUMENT,"Invalid segment ("+F+"). Paths must not contain // in them.");p.push.apply(p,F.split("/").filter(function(Q){return Q.length>0}))}return new t(p)},t.emptyPath=function(){return new t([])},t}(de),Ze=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Et=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ne.ZT)(t,o),t.prototype.construct=function(s,l,p){return new t(s,l,p)},t.isValidIdentifier=function(s){return Ze.test(s)},t.prototype.canonicalString=function(){return this.toArray().map(function(s){return s=s.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(s)||(s="`"+s+"`"),s}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(s){for(var l=[],p="",v=0,S=function(){if(0===p.length)throw new Vt(_t.INVALID_ARGUMENT,"Invalid field path ("+s+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");l.push(p),p=""},F=!1;v<s.length;){var Q=s[v];if("\\"===Q){if(v+1===s.length)throw new Vt(_t.INVALID_ARGUMENT,"Path has trailing escape character: "+s);var le=s[v+1];if("\\"!==le&&"."!==le&&"`"!==le)throw new Vt(_t.INVALID_ARGUMENT,"Path has invalid escape sequence: "+s);p+=le,v+=2}else"`"===Q?(F=!F,v++):"."!==Q||F?(p+=Q,v++):(S(),v++)}if(S(),F)throw new Vt(_t.INVALID_ARGUMENT,"Unterminated ` in path: "+s);return new t(l)},t.emptyPath=function(){return new t([])},t}(de),fn=function(){function o(t){this.fields=t,t.sort(Et.comparator)}return o.prototype.covers=function(t){for(var s=0,l=this.fields;s<l.length;s++)if(l[s].isPrefixOf(t))return!0;return!1},o.prototype.isEqual=function(t){return za(this.fields,t.fields,function(s,l){return s.isEqual(l)})},o}(),ir=function(){function o(t){this.binaryString=t}return o.fromBase64String=function(t){return new o(atob(t))},o.fromUint8Array=function(t){return new o(function(s){for(var l="",p=0;p<s.length;++p)l+=String.fromCharCode(s[p]);return l}(t))},o.prototype.toBase64=function(){return btoa(this.binaryString)},o.prototype.toUint8Array=function(){return function(t){for(var s=new Uint8Array(t.length),l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s}(this.binaryString)},o.prototype.approximateByteSize=function(){return 2*this.binaryString.length},o.prototype.compareTo=function(t){return Pr(this.binaryString,t.binaryString)},o.prototype.isEqual=function(t){return this.binaryString===t.binaryString},o}();ir.EMPTY_BYTE_STRING=new ir("");var Gn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(o){if(Kn(!!o),"string"==typeof o){var t=0,s=Gn.exec(o);if(Kn(!!s),s[1]){var l=s[1];l=(l+"000000000").substr(0,9),t=Number(l)}var p=new Date(o);return{seconds:Math.floor(p.getTime()/1e3),nanos:t}}return{seconds:Un(o.seconds),nanos:Un(o.nanos)}}function Un(o){return"number"==typeof o?o:"string"==typeof o?Number(o):0}function mo(o){return"string"==typeof o?ir.fromBase64String(o):ir.fromUint8Array(o)}function Uo(o){var t,s;return"server_timestamp"===(null===(s=((null===(t=null==o?void 0:o.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===s?void 0:s.stringValue)}function _o(o){var t=o.mapValue.fields.__previous_value__;return Uo(t)?_o(t):t}function Hs(o){var t=Ir(o.mapValue.fields.__local_write_time__.timestampValue);return new U(t.seconds,t.nanos)}function Wo(o){return null==o}function Yo(o){return 0===o&&1/o==-1/0}function pu(o){return"number"==typeof o&&Number.isInteger(o)&&!Yo(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER}var Zn=function(){function o(t){this.path=t}return o.fromPath=function(t){return new o(Ie.fromString(t))},o.fromName=function(t){return new o(Ie.fromString(t).popFirst(5))},o.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},o.prototype.isEqual=function(t){return null!==t&&0===Ie.comparator(this.path,t.path)},o.prototype.toString=function(){return this.path.toString()},o.comparator=function(t,s){return Ie.comparator(t.path,s.path)},o.isDocumentKey=function(t){return t.length%2==0},o.fromSegments=function(t){return new o(new Ie(t.slice()))},o}();function Mi(o){return"nullValue"in o?0:"booleanValue"in o?1:"integerValue"in o||"doubleValue"in o?2:"timestampValue"in o?3:"stringValue"in o?5:"bytesValue"in o?6:"referenceValue"in o?7:"geoPointValue"in o?8:"arrayValue"in o?9:"mapValue"in o?Uo(o)?4:10:kn()}function ia(o,t){var p,s=Mi(o);if(s!==Mi(t))return!1;switch(s){case 0:return!0;case 1:return o.booleanValue===t.booleanValue;case 4:return Hs(o).isEqual(Hs(t));case 3:return function(l,p){if("string"==typeof l.timestampValue&&"string"==typeof p.timestampValue&&l.timestampValue.length===p.timestampValue.length)return l.timestampValue===p.timestampValue;var v=Ir(l.timestampValue),S=Ir(p.timestampValue);return v.seconds===S.seconds&&v.nanos===S.nanos}(o,t);case 5:return o.stringValue===t.stringValue;case 6:return p=t,mo(o.bytesValue).isEqual(mo(p.bytesValue));case 7:return o.referenceValue===t.referenceValue;case 8:return function(l,p){return Un(l.geoPointValue.latitude)===Un(p.geoPointValue.latitude)&&Un(l.geoPointValue.longitude)===Un(p.geoPointValue.longitude)}(o,t);case 2:return function(l,p){if("integerValue"in l&&"integerValue"in p)return Un(l.integerValue)===Un(p.integerValue);if("doubleValue"in l&&"doubleValue"in p){var v=Un(l.doubleValue),S=Un(p.doubleValue);return v===S?Yo(v)===Yo(S):isNaN(v)&&isNaN(S)}return!1}(o,t);case 9:return za(o.arrayValue.values||[],t.arrayValue.values||[],ia);case 10:return function(l,p){var v=l.mapValue.fields||{},S=p.mapValue.fields||{};if(O(v)!==O(S))return!1;for(var F in v)if(v.hasOwnProperty(F)&&(void 0===S[F]||!ia(v[F],S[F])))return!1;return!0}(o,t);default:return kn()}}function gu(o,t){return void 0!==(o.values||[]).find(function(s){return ia(s,t)})}function Za(o,t){var p,v,S,F,s=Mi(o),l=Mi(t);if(s!==l)return Pr(s,l);switch(s){case 0:return 0;case 1:return Pr(o.booleanValue,t.booleanValue);case 2:return v=t,(S=Un((p=o).integerValue||p.doubleValue))<(F=Un(v.integerValue||v.doubleValue))?-1:S>F?1:S===F?0:isNaN(S)?isNaN(F)?0:-1:1;case 3:return hd(o.timestampValue,t.timestampValue);case 4:return hd(Hs(o),Hs(t));case 5:return Pr(o.stringValue,t.stringValue);case 6:return function(p,v){var S=mo(p),F=mo(v);return S.compareTo(F)}(o.bytesValue,t.bytesValue);case 7:return function(p,v){for(var S=p.split("/"),F=v.split("/"),Q=0;Q<S.length&&Q<F.length;Q++){var le=Pr(S[Q],F[Q]);if(0!==le)return le}return Pr(S.length,F.length)}(o.referenceValue,t.referenceValue);case 8:return function(p,v){var S=Pr(Un(p.latitude),Un(v.latitude));return 0!==S?S:Pr(Un(p.longitude),Un(v.longitude))}(o.geoPointValue,t.geoPointValue);case 9:return function(p,v){for(var S=p.values||[],F=v.values||[],Q=0;Q<S.length&&Q<F.length;++Q){var le=Za(S[Q],F[Q]);if(le)return le}return Pr(S.length,F.length)}(o.arrayValue,t.arrayValue);case 10:return function(p,v){var S=p.fields||{},F=Object.keys(S),Q=v.fields||{},le=Object.keys(Q);F.sort(),le.sort();for(var fe=0;fe<F.length&&fe<le.length;++fe){var xe=Pr(F[fe],le[fe]);if(0!==xe)return xe;var Ge=Za(S[F[fe]],Q[le[fe]]);if(0!==Ge)return Ge}return Pr(F.length,le.length)}(o.mapValue,t.mapValue);default:throw kn()}}function hd(o,t){if("string"==typeof o&&"string"==typeof t&&o.length===t.length)return Pr(o,t);var s=Ir(o),l=Ir(t),p=Pr(s.seconds,l.seconds);return 0!==p?p:Pr(s.nanos,l.nanos)}function Lc(o){return Ku(o)}function Ku(o){return"nullValue"in o?"null":"booleanValue"in o?""+o.booleanValue:"integerValue"in o?""+o.integerValue:"doubleValue"in o?""+o.doubleValue:"timestampValue"in o?"time("+(p=Ir(o.timestampValue)).seconds+","+p.nanos+")":"stringValue"in o?o.stringValue:"bytesValue"in o?mo(o.bytesValue).toBase64():"referenceValue"in o?Zn.fromName(o.referenceValue).toString():"geoPointValue"in o?"geo("+(t=o.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in o?function(l){for(var p="[",v=!0,S=0,F=l.values||[];S<F.length;S++)v?v=!1:p+=",",p+=Ku(F[S]);return p+"]"}(o.arrayValue):"mapValue"in o?function(l){for(var p="{",v=!0,S=0,F=Object.keys(l.fields||{}).sort();S<F.length;S++){var Q=F[S];v?v=!1:p+=",",p+=Q+":"+Ku(l.fields[Q])}return p+"}"}(o.mapValue):kn();var p,t}function ic(o,t){return{referenceValue:"projects/"+o.projectId+"/databases/"+o.database+"/documents/"+t.path.canonicalString()}}function Aa(o){return!!o&&"integerValue"in o}function fd(o){return!!o&&"arrayValue"in o}function Qu(o){return!!o&&"nullValue"in o}function Ia(o){return!!o&&"doubleValue"in o&&isNaN(Number(o.doubleValue))}function Gs(o){return!!o&&"mapValue"in o}function mu(o){if(o.geoPointValue)return{geoPointValue:Object.assign({},o.geoPointValue)};if(o.timestampValue&&"object"==typeof o.timestampValue)return{timestampValue:Object.assign({},o.timestampValue)};if(o.mapValue){var t={mapValue:{fields:{}}};return Z(o.mapValue.fields,function(p,v){return t.mapValue.fields[p]=mu(v)}),t}if(o.arrayValue){for(var s={arrayValue:{values:[]}},l=0;l<(o.arrayValue.values||[]).length;++l)s.arrayValue.values[l]=mu(o.arrayValue.values[l]);return s}return Object.assign({},o)}var ci=function(){function o(t){this.value=t}return o.empty=function(){return new o({mapValue:{}})},o.prototype.field=function(t){if(t.isEmpty())return this.value;for(var s=this.value,l=0;l<t.length-1;++l)if(!Gs(s=(s.mapValue.fields||{})[t.get(l)]))return null;return(s=(s.mapValue.fields||{})[t.lastSegment()])||null},o.prototype.set=function(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=mu(s)},o.prototype.setAll=function(t){var s=this,l=Et.emptyPath(),p={},v=[];t.forEach(function(F,Q){if(!l.isImmediateParentOf(Q)){var le=s.getFieldsMap(l);s.applyChanges(le,p,v),p={},v=[],l=Q.popLast()}F?p[Q.lastSegment()]=mu(F):v.push(Q.lastSegment())});var S=this.getFieldsMap(l);this.applyChanges(S,p,v)},o.prototype.delete=function(t){var s=this.field(t.popLast());Gs(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]},o.prototype.isEqual=function(t){return ia(this.value,t.value)},o.prototype.getFieldsMap=function(t){var s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(var l=0;l<t.length;++l){var p=s.mapValue.fields[t.get(l)];Gs(p)&&p.mapValue.fields||(p={mapValue:{fields:{}}},s.mapValue.fields[t.get(l)]=p),s=p}return s.mapValue.fields},o.prototype.applyChanges=function(t,s,l){Z(s,function(F,Q){return t[F]=Q});for(var p=0,v=l;p<v.length;p++)delete t[v[p]]},o.prototype.clone=function(){return new o(mu(this.value))},o}();function zs(o){var t=[];return Z(o.fields,function(s,l){var p=new Et([s]);if(Gs(l)){var v=zs(l.mapValue).fields;if(0===v.length)t.push(p);else for(var S=0,F=v;S<F.length;S++)t.push(p.child(F[S]))}else t.push(p)}),new fn(t)}var Ar=function(){function o(t,s,l,p,v){this.key=t,this.documentType=s,this.version=l,this.data=p,this.documentState=v}return o.newInvalidDocument=function(t){return new o(t,0,R.min(),ci.empty(),0)},o.newFoundDocument=function(t,s,l){return new o(t,1,s,l,0)},o.newNoDocument=function(t,s){return new o(t,2,s,ci.empty(),0)},o.newUnknownDocument=function(t,s){return new o(t,3,s,ci.empty(),2)},o.prototype.convertToFoundDocument=function(t,s){return this.version=t,this.documentType=1,this.data=s,this.documentState=0,this},o.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=ci.empty(),this.documentState=0,this},o.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=ci.empty(),this.documentState=2,this},o.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},o.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(o.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),o.prototype.isValidDocument=function(){return 0!==this.documentType},o.prototype.isFoundDocument=function(){return 1===this.documentType},o.prototype.isNoDocument=function(){return 2===this.documentType},o.prototype.isUnknownDocument=function(){return 3===this.documentType},o.prototype.isEqual=function(t){return t instanceof o&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},o.prototype.clone=function(){return new o(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},o.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},o}(),oh=function(o,t,s,l,p,v,S){void 0===t&&(t=null),void 0===s&&(s=[]),void 0===l&&(l=[]),void 0===p&&(p=null),void 0===v&&(v=null),void 0===S&&(S=null),this.path=o,this.collectionGroup=t,this.orderBy=s,this.filters=l,this.limit=p,this.startAt=v,this.endAt=S,this.h=null};function oc(o,t,s,l,p,v,S){return void 0===t&&(t=null),void 0===s&&(s=[]),void 0===l&&(l=[]),void 0===p&&(p=null),void 0===v&&(v=null),void 0===S&&(S=null),new oh(o,t,s,l,p,v,S)}function Ko(o){var t=un(o);if(null===t.h){var s=t.path.canonicalString();null!==t.collectionGroup&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map(function(l){return(p=l).field.canonicalString()+p.op.toString()+Lc(p.value);var p}).join(","),s+="|ob:",s+=t.orderBy.map(function(l){return(p=l).field.canonicalString()+p.dir;var p}).join(","),Wo(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=oa(t.startAt)),t.endAt&&(s+="|ub:",s+=oa(t.endAt)),t.h=s}return t.h}function yo(o,t){if(o.limit!==t.limit||o.orderBy.length!==t.orderBy.length)return!1;for(var s=0;s<o.orderBy.length;s++)if(!Uc(o.orderBy[s],t.orderBy[s]))return!1;if(o.filters.length!==t.filters.length)return!1;for(var l=0;l<o.filters.length;l++)if((p=o.filters[l]).op!==(v=t.filters[l]).op||!p.field.isEqual(v.field)||!ia(p.value,v.value))return!1;var p,v;return o.collectionGroup===t.collectionGroup&&!!o.path.isEqual(t.path)&&!!sc(o.startAt,t.startAt)&&sc(o.endAt,t.endAt)}function qs(o){return Zn.isDocumentKey(o.path)&&null===o.collectionGroup&&0===o.filters.length}var So=function(o){function t(s,l,p){var v=this;return(v=o.call(this)||this).field=s,v.op=l,v.value=p,v}return(0,ne.ZT)(t,o),t.create=function(s,l,p){return s.isKeyField()?"in"===l||"not-in"===l?this.l(s,l,p):new $a(s,l,p):"array-contains"===l?new Uh(s,p):"in"===l?new sh(s,p):"not-in"===l?new Ol(s,p):"array-contains-any"===l?new Es(s,p):new t(s,l,p)},t.l=function(s,l,p){return"in"===l?new pd(s,p):new Vc(s,p)},t.prototype.matches=function(s){var l=s.data.field(this.field);return"!="===this.op?null!==l&&this.m(Za(l,this.value)):null!==l&&Mi(this.value)===Mi(l)&&this.m(Za(l,this.value))},t.prototype.m=function(s){switch(this.op){case"<":return s<0;case"<=":return s<=0;case"==":return 0===s;case"!=":return 0!==s;case">":return s>0;case">=":return s>=0;default:return kn()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),$a=function(o){function t(s,l,p){var v=this;return(v=o.call(this,s,l,p)||this).key=Zn.fromName(p.referenceValue),v}return(0,ne.ZT)(t,o),t.prototype.matches=function(s){var l=Zn.comparator(s.key,this.key);return this.m(l)},t}(So),pd=function(o){function t(s,l){var p=this;return(p=o.call(this,s,"in",l)||this).keys=gd(0,l),p}return(0,ne.ZT)(t,o),t.prototype.matches=function(s){return this.keys.some(function(l){return l.isEqual(s.key)})},t}(So),Vc=function(o){function t(s,l){var p=this;return(p=o.call(this,s,"not-in",l)||this).keys=gd(0,l),p}return(0,ne.ZT)(t,o),t.prototype.matches=function(s){return!this.keys.some(function(l){return l.isEqual(s.key)})},t}(So);function gd(o,t){var s;return((null===(s=t.arrayValue)||void 0===s?void 0:s.values)||[]).map(function(l){return Zn.fromName(l.referenceValue)})}var Uh=function(o){function t(s,l){return o.call(this,s,"array-contains",l)||this}return(0,ne.ZT)(t,o),t.prototype.matches=function(s){var l=s.data.field(this.field);return fd(l)&&gu(l.arrayValue,this.value)},t}(So),sh=function(o){function t(s,l){return o.call(this,s,"in",l)||this}return(0,ne.ZT)(t,o),t.prototype.matches=function(s){var l=s.data.field(this.field);return null!==l&&gu(this.value.arrayValue,l)},t}(So),Ol=function(o){function t(s,l){return o.call(this,s,"not-in",l)||this}return(0,ne.ZT)(t,o),t.prototype.matches=function(s){if(gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var l=s.data.field(this.field);return null!==l&&!gu(this.value.arrayValue,l)},t}(So),Es=function(o){function t(s,l){return o.call(this,s,"array-contains-any",l)||this}return(0,ne.ZT)(t,o),t.prototype.matches=function(s){var l=this,p=s.data.field(this.field);return!(!fd(p)||!p.arrayValue.values)&&p.arrayValue.values.some(function(v){return gu(l.value.arrayValue,v)})},t}(So),Ps=function(o,t){this.position=o,this.before=t};function oa(o){return(o.before?"b":"a")+":"+o.position.map(function(t){return Lc(t)}).join(",")}var Ju=function(o,t){void 0===t&&(t="asc"),this.field=o,this.dir=t};function Uc(o,t){return o.dir===t.dir&&o.field.isEqual(t.field)}function Xu(o,t,s){for(var l=0,p=0;p<o.position.length;p++){var v=t[p],S=o.position[p];if(l=v.field.isKeyField()?Zn.comparator(Zn.fromName(S.referenceValue),s.key):Za(S,s.data.field(v.field)),"desc"===v.dir&&(l*=-1),0!==l)break}return o.before?l<=0:l<0}function sc(o,t){if(null===o)return null===t;if(null===t||o.before!==t.before||o.position.length!==t.position.length)return!1;for(var s=0;s<o.position.length;s++)if(!ia(o.position[s],t.position[s]))return!1;return!0}var Zs=function(o,t,s,l,p,v,S,F){void 0===t&&(t=null),void 0===s&&(s=[]),void 0===l&&(l=[]),void 0===p&&(p=null),void 0===v&&(v="F"),void 0===S&&(S=null),void 0===F&&(F=null),this.path=o,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=l,this.limit=p,this.limitType=v,this.startAt=S,this.endAt=F,this.p=null,this.T=null};function _u(o,t,s,l,p,v,S,F){return new Zs(o,t,s,l,p,v,S,F)}function yu(o){return new Zs(o)}function vu(o){return!Wo(o.limit)&&"F"===o.limitType}function Ma(o){return!Wo(o.limit)&&"L"===o.limitType}function el(o){return o.explicitOrderBy.length>0?o.explicitOrderBy[0].field:null}function Bc(o){for(var t=0,s=o.filters;t<s.length;t++){var l=s[t];if(l.g())return l.field}return null}function tl(o){return null!==o.collectionGroup}function Oa(o){var t=un(o);if(null===t.p){t.p=[];var s=Bc(t),l=el(t);if(null!==s&&null===l)s.isKeyField()||t.p.push(new Ju(s)),t.p.push(new Ju(Et.keyField(),"asc"));else{for(var p=!1,v=0,S=t.explicitOrderBy;v<S.length;v++){var F=S[v];t.p.push(F),F.field.isKeyField()&&(p=!0)}if(!p){var Q=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Ju(Et.keyField(),Q))}}}return t.p}function Bo(o){var t=un(o);if(!t.T)if("F"===t.limitType)t.T=oc(t.path,t.collectionGroup,Oa(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var s=[],l=0,p=Oa(t);l<p.length;l++){var v=p[l];s.push(new Ju(v.field,"desc"===v.dir?"asc":"desc"))}var F=t.endAt?new Ps(t.endAt.position,!t.endAt.before):null,Q=t.startAt?new Ps(t.startAt.position,!t.startAt.before):null;t.T=oc(t.path,t.collectionGroup,s,t.filters,t.limit,F,Q)}return t.T}function jc(o,t,s){return new Zs(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),t,s,o.startAt,o.endAt)}function Rl(o,t){return yo(Bo(o),Bo(t))&&o.limitType===t.limitType}function Hc(o){return Ko(Bo(o))+"|lt:"+o.limitType}function ac(o){return"Query(target="+(s=(t=Bo(o)).path.canonicalString(),null!==t.collectionGroup&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=", filters: ["+t.filters.map(function(l){return(p=l).field.canonicalString()+" "+p.op+" "+Lc(p.value);var p}).join(", ")+"]"),Wo(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=", orderBy: ["+t.orderBy.map(function(l){return(p=l).field.canonicalString()+" ("+p.dir+")";var p}).join(", ")+"]"),t.startAt&&(s+=", startAt: "+oa(t.startAt)),t.endAt&&(s+=", endAt: "+oa(t.endAt)),"Target("+s+"); limitType=")+o.limitType+")";var t,s}function nl(o,t){return t.isFoundDocument()&&(p=(l=t).key.path,null!==(s=o).collectionGroup?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(p):Zn.isDocumentKey(s.path)?s.path.isEqual(p):s.path.isImmediateParentOf(p))&&function(s,l){for(var p=0,v=s.explicitOrderBy;p<v.length;p++){var S=v[p];if(!S.field.isKeyField()&&null===l.data.field(S.field))return!1}return!0}(o,t)&&function(s,l){for(var p=0,v=s.filters;p<v.length;p++)if(!v[p].matches(l))return!1;return!0}(o,t)&&function(s,l){return!(s.startAt&&!Xu(s.startAt,Oa(s),l)||s.endAt&&Xu(s.endAt,Oa(s),l))}(o,t);var s,l,p}function rl(o){return function(t,s){for(var l=!1,p=0,v=Oa(o);p<v.length;p++){var S=v[p],F=Wa(S,t,s);if(0!==F)return F;l=l||S.field.isKeyField()}return 0}}function Wa(o,t,s){var p,S,F,Q,l=o.field.isKeyField()?Zn.comparator(t.key,s.key):(S=s,F=t.data.field(p=o.field),Q=S.data.field(p),null!==F&&null!==Q?Za(F,Q):kn());switch(o.dir){case"asc":return l;case"desc":return-1*l;default:return kn()}}function Ra(o,t){if(o.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yo(t)?"-0":t}}function xl(o){return{integerValue:""+o}}function mi(o,t){return pu(t)?xl(t):Ra(o,t)}var bu=function(){this._=void 0};function uc(o,t,s){return o instanceof Eu?(v={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(l=s).seconds,nanos:l.nanoseconds}}}},(p=t)&&(v.fields.__previous_value__=p),{mapValue:v}):o instanceof Ya?wu(o,t):o instanceof Du?Tu(o,t):function(l,p){var v=xa(l,p),S=il(v)+il(l.A);return Aa(v)&&Aa(l.A)?xl(S):Ra(l.R,S)}(o,t);var l,p,v}function Cu(o,t,s){return o instanceof Ya?wu(o,t):o instanceof Du?Tu(o,t):s}function xa(o,t){return o instanceof as?Aa(s=t)||(l=s)&&"doubleValue"in l?t:{integerValue:0}:null;var l,s}var Eu=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ne.ZT)(t,o),t}(bu),Ya=function(o){function t(s){var l=this;return(l=o.call(this)||this).elements=s,l}return(0,ne.ZT)(t,o),t}(bu);function wu(o,t){for(var s=$s(t),l=function(S){s.some(function(F){return ia(F,S)})||s.push(S)},p=0,v=o.elements;p<v.length;p++)l(v[p]);return{arrayValue:{values:s}}}var Du=function(o){function t(s){var l=this;return(l=o.call(this)||this).elements=s,l}return(0,ne.ZT)(t,o),t}(bu);function Tu(o,t){for(var s=$s(t),l=function(S){s=s.filter(function(F){return!ia(F,S)})},p=0,v=o.elements;p<v.length;p++)l(v[p]);return{arrayValue:{values:s}}}var as=function(o){function t(s,l){var p=this;return(p=o.call(this)||this).R=s,p.A=l,p}return(0,ne.ZT)(t,o),t}(bu);function il(o){return Un(o.integerValue||o.doubleValue)}function $s(o){return fd(o)&&o.arrayValue.values?o.arrayValue.values.slice():[]}var Ka=function(o,t){this.field=o,this.transform=t},Gc=function(o,t){this.version=o,this.transformResults=t},Ao=function(){function o(t,s){this.updateTime=t,this.exists=s}return o.none=function(){return new o},o.exists=function(t){return new o(void 0,t)},o.updateTime=function(t){return new o(t)},Object.defineProperty(o.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},o}();function Fs(o,t){return void 0!==o.updateTime?t.isFoundDocument()&&t.version.isEqual(o.updateTime):void 0===o.exists||o.exists===t.isFoundDocument()}var fs=function(){};function Pl(o,t,s){var l,p,v,S,F;o instanceof Qa?(p=t,v=s,S=(l=o).value.clone(),F=Ws(l.fieldTransforms,p,v.transformResults),S.setAll(F),p.convertToFoundDocument(v.version,S).setHasCommittedMutations()):o instanceof ws?function(l,p,v){if(Fs(l.precondition,p)){var S=Ws(l.fieldTransforms,p,v.transformResults),F=p.data;F.setAll(_d(l)),F.setAll(S),p.convertToFoundDocument(v.version,F).setHasCommittedMutations()}else p.convertToUnknownDocument(v.version)}(o,t,s):function(l,p,v){p.convertToNoDocument(v.version).setHasCommittedMutations()}(0,t,s)}function ol(o,t,s){var p;o instanceof Qa?function(l,p,v){if(Fs(l.precondition,p)){var S=l.value.clone(),F=zc(l.fieldTransforms,v,p);S.setAll(F),p.convertToFoundDocument(md(p),S).setHasLocalMutations()}}(o,t,s):o instanceof ws?function(l,p,v){if(Fs(l.precondition,p)){var S=zc(l.fieldTransforms,v,p),F=p.data;F.setAll(_d(l)),F.setAll(S),p.convertToFoundDocument(md(p),F).setHasLocalMutations()}}(o,t,s):Fs(o.precondition,p=t)&&p.convertToNoDocument(R.min())}function Su(o,t){for(var s=null,l=0,p=o.fieldTransforms;l<p.length;l++){var v=p[l],S=t.data.field(v.field),F=xa(v.transform,S||null);null!=F&&(null==s&&(s=ci.empty()),s.set(v.field,F))}return s||null}function sa(o,t){return o.type===t.type&&!!o.key.isEqual(t.key)&&!!o.precondition.isEqual(t.precondition)&&(l=t.fieldTransforms,!!(void 0===(s=o.fieldTransforms)&&void 0===l||s&&l&&za(s,l,function(p,v){return(S=p).field.isEqual((F=v).field)&&(le=F.transform,(Q=S.transform)instanceof Ya&&le instanceof Ya||Q instanceof Du&&le instanceof Du?za(Q.elements,le.elements,ia):Q instanceof as&&le instanceof as?ia(Q.A,le.A):Q instanceof Eu&&le instanceof Eu);var S,F,Q,le})))&&(0===o.type?o.value.isEqual(t.value):1!==o.type||o.data.isEqual(t.data)&&o.fieldMask.isEqual(t.fieldMask));var s,l}function md(o){return o.isFoundDocument()?o.version:R.min()}var Qa=function(o){function t(s,l,p,v){void 0===v&&(v=[]);var S=this;return(S=o.call(this)||this).key=s,S.value=l,S.precondition=p,S.fieldTransforms=v,S.type=0,S}return(0,ne.ZT)(t,o),t}(fs),ws=function(o){function t(s,l,p,v,S){void 0===S&&(S=[]);var F=this;return(F=o.call(this)||this).key=s,F.data=l,F.fieldMask=p,F.precondition=v,F.fieldTransforms=S,F.type=1,F}return(0,ne.ZT)(t,o),t}(fs);function _d(o){var t=new Map;return o.fieldMask.fields.forEach(function(s){if(!s.isEmpty()){var l=o.data.field(s);t.set(s,l)}}),t}function Ws(o,t,s){var l=new Map;Kn(o.length===s.length);for(var p=0;p<s.length;p++){var v=o[p],S=v.transform,F=t.data.field(v.field);l.set(v.field,Cu(S,F,s[p]))}return l}function zc(o,t,s){for(var l=new Map,p=0,v=o;p<v.length;p++){var S=v[p],F=S.transform,Q=s.data.field(S.field);l.set(S.field,uc(F,Q,t))}return l}var vo,Xr,aa=function(o){function t(s,l){var p=this;return(p=o.call(this)||this).key=s,p.precondition=l,p.type=2,p.fieldTransforms=[],p}return(0,ne.ZT)(t,o),t}(fs),Ja=function(o){function t(s,l){var p=this;return(p=o.call(this)||this).key=s,p.precondition=l,p.type=3,p.fieldTransforms=[],p}return(0,ne.ZT)(t,o),t}(fs),jo=function(o){this.count=o};function qc(o){switch(o){case _t.OK:return kn();case _t.CANCELLED:case _t.UNKNOWN:case _t.DEADLINE_EXCEEDED:case _t.RESOURCE_EXHAUSTED:case _t.INTERNAL:case _t.UNAVAILABLE:case _t.UNAUTHENTICATED:return!1;case _t.INVALID_ARGUMENT:case _t.NOT_FOUND:case _t.ALREADY_EXISTS:case _t.PERMISSION_DENIED:case _t.FAILED_PRECONDITION:case _t.ABORTED:case _t.OUT_OF_RANGE:case _t.UNIMPLEMENTED:case _t.DATA_LOSS:return!0;default:return kn()}}function Zc(o){if(void 0===o)return Ri("GRPC error has no .code"),_t.UNKNOWN;switch(o){case vo.OK:return _t.OK;case vo.CANCELLED:return _t.CANCELLED;case vo.UNKNOWN:return _t.UNKNOWN;case vo.DEADLINE_EXCEEDED:return _t.DEADLINE_EXCEEDED;case vo.RESOURCE_EXHAUSTED:return _t.RESOURCE_EXHAUSTED;case vo.INTERNAL:return _t.INTERNAL;case vo.UNAVAILABLE:return _t.UNAVAILABLE;case vo.UNAUTHENTICATED:return _t.UNAUTHENTICATED;case vo.INVALID_ARGUMENT:return _t.INVALID_ARGUMENT;case vo.NOT_FOUND:return _t.NOT_FOUND;case vo.ALREADY_EXISTS:return _t.ALREADY_EXISTS;case vo.PERMISSION_DENIED:return _t.PERMISSION_DENIED;case vo.FAILED_PRECONDITION:return _t.FAILED_PRECONDITION;case vo.ABORTED:return _t.ABORTED;case vo.OUT_OF_RANGE:return _t.OUT_OF_RANGE;case vo.UNIMPLEMENTED:return _t.UNIMPLEMENTED;case vo.DATA_LOSS:return _t.DATA_LOSS;default:return kn()}}(Xr=vo||(vo={}))[Xr.OK=0]="OK",Xr[Xr.CANCELLED=1]="CANCELLED",Xr[Xr.UNKNOWN=2]="UNKNOWN",Xr[Xr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xr[Xr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xr[Xr.NOT_FOUND=5]="NOT_FOUND",Xr[Xr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xr[Xr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xr[Xr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xr[Xr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xr[Xr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xr[Xr.ABORTED=10]="ABORTED",Xr[Xr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xr[Xr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xr[Xr.INTERNAL=13]="INTERNAL",Xr[Xr.UNAVAILABLE=14]="UNAVAILABLE",Xr[Xr.DATA_LOSS=15]="DATA_LOSS";var Qo=function(){function o(t,s){this.comparator=t,this.root=s||Pa.EMPTY}return o.prototype.insert=function(t,s){return new o(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,Pa.BLACK,null,null))},o.prototype.remove=function(t){return new o(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Pa.BLACK,null,null))},o.prototype.get=function(t){for(var s=this.root;!s.isEmpty();){var l=this.comparator(t,s.key);if(0===l)return s.value;l<0?s=s.left:l>0&&(s=s.right)}return null},o.prototype.indexOf=function(t){for(var s=0,l=this.root;!l.isEmpty();){var p=this.comparator(t,l.key);if(0===p)return s+l.left.size;p<0?l=l.left:(s+=l.left.size+1,l=l.right)}return-1},o.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(o.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),o.prototype.minKey=function(){return this.root.minKey()},o.prototype.maxKey=function(){return this.root.maxKey()},o.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},o.prototype.forEach=function(t){this.inorderTraversal(function(s,l){return t(s,l),!1})},o.prototype.toString=function(){var t=[];return this.inorderTraversal(function(s,l){return t.push(s+":"+l),!1}),"{"+t.join(", ")+"}"},o.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},o.prototype.getIterator=function(){return new Au(this.root,null,this.comparator,!1)},o.prototype.getIteratorFrom=function(t){return new Au(this.root,t,this.comparator,!1)},o.prototype.getReverseIterator=function(){return new Au(this.root,null,this.comparator,!0)},o.prototype.getReverseIteratorFrom=function(t){return new Au(this.root,t,this.comparator,!0)},o}(),Au=function(){function o(t,s,l,p){this.isReverse=p,this.nodeStack=[];for(var v=1;!t.isEmpty();)if(v=s?l(t.key,s):1,p&&(v*=-1),v<0)t=this.isReverse?t.left:t.right;else{if(0===v){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return o.prototype.getNext=function(){var t=this.nodeStack.pop(),s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s},o.prototype.hasNext=function(){return this.nodeStack.length>0},o.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},o}(),Pa=function(){function o(t,s,l,p,v){this.key=t,this.value=s,this.color=null!=l?l:o.RED,this.left=null!=p?p:o.EMPTY,this.right=null!=v?v:o.EMPTY,this.size=this.left.size+1+this.right.size}return o.prototype.copy=function(t,s,l,p,v){return new o(null!=t?t:this.key,null!=s?s:this.value,null!=l?l:this.color,null!=p?p:this.left,null!=v?v:this.right)},o.prototype.isEmpty=function(){return!1},o.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},o.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},o.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},o.prototype.minKey=function(){return this.min().key},o.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},o.prototype.insert=function(t,s,l){var p=this,v=l(t,p.key);return(p=v<0?p.copy(null,null,null,p.left.insert(t,s,l),null):0===v?p.copy(null,s,null,null,null):p.copy(null,null,null,null,p.right.insert(t,s,l))).fixUp()},o.prototype.removeMin=function(){if(this.left.isEmpty())return o.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},o.prototype.remove=function(t,s){var l,p=this;if(s(t,p.key)<0)p.left.isEmpty()||p.left.isRed()||p.left.left.isRed()||(p=p.moveRedLeft()),p=p.copy(null,null,null,p.left.remove(t,s),null);else{if(p.left.isRed()&&(p=p.rotateRight()),p.right.isEmpty()||p.right.isRed()||p.right.left.isRed()||(p=p.moveRedRight()),0===s(t,p.key)){if(p.right.isEmpty())return o.EMPTY;l=p.right.min(),p=p.copy(l.key,l.value,null,null,p.right.removeMin())}p=p.copy(null,null,null,null,p.right.remove(t,s))}return p.fixUp()},o.prototype.isRed=function(){return this.color},o.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},o.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},o.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},o.prototype.rotateLeft=function(){var t=this.copy(null,null,o.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},o.prototype.rotateRight=function(){var t=this.copy(null,null,o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},o.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)},o.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},o.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw kn();var t=this.left.check();if(t!==this.right.check())throw kn();return t+(this.isRed()?0:1)},o}();Pa.EMPTY=null,Pa.RED=!0,Pa.BLACK=!1,Pa.EMPTY=new(function(){function o(){this.size=0}return Object.defineProperty(o.prototype,"key",{get:function(){throw kn()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"value",{get:function(){throw kn()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"color",{get:function(){throw kn()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"left",{get:function(){throw kn()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"right",{get:function(){throw kn()},enumerable:!1,configurable:!0}),o.prototype.copy=function(t,s,l,p,v){return this},o.prototype.insert=function(t,s,l){return new Pa(t,s)},o.prototype.remove=function(t,s){return this},o.prototype.isEmpty=function(){return!0},o.prototype.inorderTraversal=function(t){return!1},o.prototype.reverseTraversal=function(t){return!1},o.prototype.minKey=function(){return null},o.prototype.maxKey=function(){return null},o.prototype.isRed=function(){return!1},o.prototype.checkMaxDepth=function(){return!0},o.prototype.check=function(){return 0},o}());var bo=function(){function o(t){this.comparator=t,this.data=new Qo(this.comparator)}return o.prototype.has=function(t){return null!==this.data.get(t)},o.prototype.first=function(){return this.data.minKey()},o.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(o.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),o.prototype.indexOf=function(t){return this.data.indexOf(t)},o.prototype.forEach=function(t){this.data.inorderTraversal(function(s,l){return t(s),!1})},o.prototype.forEachInRange=function(t,s){for(var l=this.data.getIteratorFrom(t[0]);l.hasNext();){var p=l.getNext();if(this.comparator(p.key,t[1])>=0)return;s(p.key)}},o.prototype.forEachWhile=function(t,s){var l;for(l=void 0!==s?this.data.getIteratorFrom(s):this.data.getIterator();l.hasNext();)if(!t(l.getNext().key))return},o.prototype.firstAfterOrEqual=function(t){var s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null},o.prototype.getIterator=function(){return new Iu(this.data.getIterator())},o.prototype.getIteratorFrom=function(t){return new Iu(this.data.getIteratorFrom(t))},o.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},o.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},o.prototype.isEmpty=function(){return this.data.isEmpty()},o.prototype.unionWith=function(t){var s=this;return s.size<t.size&&(s=t,t=this),t.forEach(function(l){s=s.add(l)}),s},o.prototype.isEqual=function(t){if(!(t instanceof o)||this.size!==t.size)return!1;for(var s=this.data.getIterator(),l=t.data.getIterator();s.hasNext();){var p=s.getNext().key,v=l.getNext().key;if(0!==this.comparator(p,v))return!1}return!0},o.prototype.toArray=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},o.prototype.toString=function(){var t=[];return this.forEach(function(s){return t.push(s)}),"SortedSet("+t.toString()+")"},o.prototype.copy=function(t){var s=new o(this.comparator);return s.data=t,s},o}(),Iu=function(){function o(t){this.iter=t}return o.prototype.getNext=function(){return this.iter.getNext().key},o.prototype.hasNext=function(){return this.iter.hasNext()},o}(),Mu=new Qo(Zn.comparator);function Io(){return Mu}var sl=new Qo(Zn.comparator);function lc(){return sl}var ah=new Qo(Zn.comparator);function cc(){return ah}var Fl=new bo(Zn.comparator);function qr(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];for(var s=Fl,l=0,p=o;l<p.length;l++){var v=p[l];s=s.add(v)}return s}var ua=new bo(Pr);function al(){return ua}var yd=function(){function o(t,s,l,p,v){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=l,this.documentUpdates=p,this.resolvedLimboDocuments=v}return o.createSynthesizedRemoteEventForCurrentChange=function(t,s){var l=new Map;return l.set(t,vd.createSynthesizedTargetChangeForCurrentChange(t,s)),new o(R.min(),l,al(),Io(),qr())},o}(),vd=function(){function o(t,s,l,p,v){this.resumeToken=t,this.current=s,this.addedDocuments=l,this.modifiedDocuments=p,this.removedDocuments=v}return o.createSynthesizedTargetChangeForCurrentChange=function(t,s){return new o(ir.EMPTY_BYTE_STRING,s,qr(),qr(),qr())},o}(),dc=function(o,t,s,l){this.v=o,this.removedTargetIds=t,this.key=s,this.P=l},uh=function(o,t){this.targetId=o,this.V=t},lh=function(o,t,s,l){void 0===s&&(s=ir.EMPTY_BYTE_STRING),void 0===l&&(l=null),this.state=o,this.targetIds=t,this.resumeToken=s,this.cause=l},bd=function(){function o(){this.S=0,this.D=hc(),this.C=ir.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(o.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),o.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},o.prototype.M=function(){var t=qr(),s=qr(),l=qr();return this.D.forEach(function(p,v){switch(v){case 0:t=t.add(p);break;case 2:s=s.add(p);break;case 1:l=l.add(p);break;default:kn()}}),new vd(this.C,this.N,t,s,l)},o.prototype.L=function(){this.k=!1,this.D=hc()},o.prototype.B=function(t,s){this.k=!0,this.D=this.D.insert(t,s)},o.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},o.prototype.U=function(){this.S+=1},o.prototype.K=function(){this.S-=1},o.prototype.j=function(){this.k=!0,this.N=!0},o}(),Nl=function(){function o(t){this.W=t,this.G=new Map,this.H=Io(),this.J=$c(),this.Y=new bo(Pr)}return o.prototype.X=function(t){for(var s=0,l=t.v;s<l.length;s++){var p=l[s];t.P&&t.P.isFoundDocument()?this.Z(p,t.P):this.tt(p,t.key,t.P)}for(var v=0,S=t.removedTargetIds;v<S.length;v++)this.tt(p=S[v],t.key,t.P)},o.prototype.et=function(t){var s=this;this.forEachTarget(t,function(l){var p=s.nt(l);switch(t.state){case 0:s.st(l)&&p.O(t.resumeToken);break;case 1:p.K(),p.F||p.L(),p.O(t.resumeToken);break;case 2:p.K(),p.F||s.removeTarget(l);break;case 3:s.st(l)&&(p.j(),p.O(t.resumeToken));break;case 4:s.st(l)&&(s.it(l),p.O(t.resumeToken));break;default:kn()}})},o.prototype.forEachTarget=function(t,s){var l=this;t.targetIds.length>0?t.targetIds.forEach(s):this.G.forEach(function(p,v){l.st(v)&&s(v)})},o.prototype.rt=function(t){var s=t.targetId,l=t.V.count,p=this.ot(s);if(p){var v=p.target;if(qs(v))if(0===l){var S=new Zn(v.path);this.tt(s,S,Ar.newNoDocument(S,R.min()))}else Kn(1===l);else this.ct(s)!==l&&(this.it(s),this.Y=this.Y.add(s))}},o.prototype.ut=function(t){var s=this,l=new Map;this.G.forEach(function(S,F){var Q=s.ot(F);if(Q){if(S.current&&qs(Q.target)){var le=new Zn(Q.target.path);null!==s.H.get(le)||s.at(F,le)||s.tt(F,le,Ar.newNoDocument(le,t))}S.$&&(l.set(F,S.M()),S.L())}});var p=qr();this.J.forEach(function(S,F){var Q=!0;F.forEachWhile(function(le){var fe=s.ot(le);return!fe||2===fe.purpose||(Q=!1,!1)}),Q&&(p=p.add(S))});var v=new yd(t,l,this.Y,this.H,p);return this.H=Io(),this.J=$c(),this.Y=new bo(Pr),v},o.prototype.Z=function(t,s){if(this.st(t)){var l=this.at(t,s.key)?2:0;this.nt(t).B(s.key,l),this.H=this.H.insert(s.key,s),this.J=this.J.insert(s.key,this.ht(s.key).add(t))}},o.prototype.tt=function(t,s,l){if(this.st(t)){var p=this.nt(t);this.at(t,s)?p.B(s,1):p.q(s),this.J=this.J.insert(s,this.ht(s).delete(t)),l&&(this.H=this.H.insert(s,l))}},o.prototype.removeTarget=function(t){this.G.delete(t)},o.prototype.ct=function(t){var s=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size},o.prototype.U=function(t){this.nt(t).U()},o.prototype.nt=function(t){var s=this.G.get(t);return s||(s=new bd,this.G.set(t,s)),s},o.prototype.ht=function(t){var s=this.J.get(t);return s||(s=new bo(Pr),this.J=this.J.insert(t,s)),s},o.prototype.st=function(t){var s=null!==this.ot(t);return s||nn("WatchChangeAggregator","Detected inactive target",t),s},o.prototype.ot=function(t){var s=this.G.get(t);return s&&s.F?null:this.W.lt(t)},o.prototype.it=function(t){var s=this;this.G.set(t,new bd),this.W.getRemoteKeysForTarget(t).forEach(function(l){s.tt(t,l,null)})},o.prototype.at=function(t,s){return this.W.getRemoteKeysForTarget(t).has(s)},o}();function $c(){return new Qo(Zn.comparator)}function hc(){return new Qo(Zn.comparator)}var ch={asc:"ASCENDING",desc:"DESCENDING"},dh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kl=function(o,t){this.databaseId=o,this.I=t};function Jo(o,t){return o.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function Cd(o,t){return o.I?t.toBase64():t.toUint8Array()}function Ds(o,t){return Jo(o,t.toTimestamp())}function ji(o){return Kn(!!o),R.fromTimestamp((s=Ir(o),new U(s.seconds,s.nanos)));var s}function Ll(o,t){return(s=o,new Ie(["projects",s.projectId,"databases",s.database])).child("documents").child(t).canonicalString();var s}function Ou(o){var t=Ie.fromString(o);return Kn(Ys(t)),t}function ul(o,t){return Ll(o.databaseId,t.path)}function Fa(o,t){var s=Ou(t);if(s.get(1)!==o.databaseId.projectId)throw new Vt(_t.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+o.databaseId.projectId);if(s.get(3)!==o.databaseId.database)throw new Vt(_t.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+o.databaseId.database);return new Zn(Ru(s))}function Wc(o,t){return Ll(o.databaseId,t)}function Ed(o){var t=Ou(o);return 4===t.length?Ie.emptyPath():Ru(t)}function la(o){return new Ie(["projects",o.databaseId.projectId,"databases",o.databaseId.database]).canonicalString()}function Ru(o){return Kn(o.length>4&&"documents"===o.get(4)),o.popFirst(5)}function ll(o,t,s){return{name:ul(o,t),fields:s.value.mapValue.fields}}function Bh(o,t,s){var l=Fa(o,t.name),p=ji(t.updateTime),v=new ci({mapValue:{fields:t.fields}}),S=Ar.newFoundDocument(l,p,v);return s&&S.setHasCommittedMutations(),s?S.setHasCommittedMutations():S}function Yc(o,t){var s,p;if(t instanceof Qa)s={update:ll(o,t.key,t.value)};else if(t instanceof aa)s={delete:ul(o,t.key)};else if(t instanceof ws)s={update:ll(o,t.key,t.data),updateMask:_c(t.fieldMask)};else{if(!(t instanceof Ja))return kn();s={verify:ul(o,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map(function(l){return function(p,v){var S=v.transform;if(S instanceof Eu)return{fieldPath:v.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(S instanceof Ya)return{fieldPath:v.field.canonicalString(),appendMissingElements:{values:S.elements}};if(S instanceof Du)return{fieldPath:v.field.canonicalString(),removeAllFromArray:{values:S.elements}};if(S instanceof as)return{fieldPath:v.field.canonicalString(),increment:S.A};throw kn()}(0,l)})),t.precondition.isNone||(s.currentDocument=void 0!==(p=t.precondition).updateTime?{updateTime:Ds(o,p.updateTime)}:void 0!==p.exists?{exists:p.exists}:kn()),s}function cl(o,t){var le,s=t.currentDocument?void 0!==(le=t.currentDocument).updateTime?Ao.updateTime(ji(le.updateTime)):void 0!==le.exists?Ao.exists(le.exists):Ao.none():Ao.none(),l=t.updateTransforms?t.updateTransforms.map(function(le){return function(fe,xe){var Ge=null;"setToServerValue"in xe?(Kn("REQUEST_TIME"===xe.setToServerValue),Ge=new Eu):"appendMissingElements"in xe?Ge=new Ya(xe.appendMissingElements.values||[]):"removeAllFromArray"in xe?Ge=new Du(xe.removeAllFromArray.values||[]):"increment"in xe?Ge=new as(fe,xe.increment):kn();var wt=Et.fromServerFormat(xe.fieldPath);return new Ka(wt,Ge)}(o,le)}):[];if(t.update){var p=Fa(o,t.update.name),v=new ci({mapValue:{fields:t.update.fields}});if(t.updateMask){var S=function(le){return new fn((le.fieldPaths||[]).map(function(xe){return Et.fromServerFormat(xe)}))}(t.updateMask);return new ws(p,v,S,s,l)}return new Qa(p,v,s,l)}if(t.delete){var F=Fa(o,t.delete);return new aa(F,s)}if(t.verify){var Q=Fa(o,t.verify);return new Ja(Q,s)}return kn()}function fc(o,t){return{documents:[Wc(o,t.path)]}}function pc(o,t){var s={structuredQuery:{}},l=t.path;null!==t.collectionGroup?(s.parent=Wc(o,l),s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s.parent=Wc(o,l.popLast()),s.structuredQuery.from=[{collectionId:l.lastSegment()}]);var p=function(F){if(0!==F.length){var Q=F.map(function(le){return function(fe){if("=="===fe.op){if(Ia(fe.value))return{unaryFilter:{field:Xa(fe.field),op:"IS_NAN"}};if(Qu(fe.value))return{unaryFilter:{field:Xa(fe.field),op:"IS_NULL"}}}else if("!="===fe.op){if(Ia(fe.value))return{unaryFilter:{field:Xa(fe.field),op:"IS_NOT_NAN"}};if(Qu(fe.value))return{unaryFilter:{field:Xa(fe.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(fe.field),op:ca(fe.op),value:fe.value}}}(le)});return 1===Q.length?Q[0]:{compositeFilter:{op:"AND",filters:Q}}}}(t.filters);p&&(s.structuredQuery.where=p);var v=function(F){if(0!==F.length)return F.map(function(Q){return{field:Xa((le=Q).field),direction:mc(le.dir)};var le})}(t.orderBy);v&&(s.structuredQuery.orderBy=v);var Q,S=(Q=t.limit,o.I||Wo(Q)?Q:{value:Q});return null!==S&&(s.structuredQuery.limit=S),t.startAt&&(s.structuredQuery.startAt=gc(t.startAt)),t.endAt&&(s.structuredQuery.endAt=gc(t.endAt)),s}function Kc(o){var t=Ed(o.parent),s=o.structuredQuery,l=s.from?s.from.length:0,p=null;if(l>0){Kn(1===l);var v=s.from[0];v.allDescendants?p=v.collectionId:t=t.child(v.collectionId)}var S=[];s.where&&(S=Qc(s.where));var F=[];s.orderBy&&(F=s.orderBy.map(function(xe){return new Ju(Zr((Ge=xe).field),function(ht){switch(ht){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ge.direction));var Ge}));var xe,Ge,Q=null;s.limit&&(Q=Wo(Ge="object"==typeof(xe=s.limit)?xe.value:xe)?null:Ge);var le=null;s.startAt&&(le=Xo(s.startAt));var fe=null;return s.endAt&&(fe=Xo(s.endAt)),_u(t,p,F,S,Q,"F",le,fe)}function Qc(o){return o?void 0!==o.unaryFilter?[wd(o)]:void 0!==o.fieldFilter?[Vl(o)]:void 0!==o.compositeFilter?o.compositeFilter.filters.map(function(t){return Qc(t)}).reduce(function(t,s){return t.concat(s)}):kn():[]}function gc(o){return{before:o.before,values:o.position}}function Xo(o){return new Ps(o.values||[],!!o.before)}function mc(o){return ch[o]}function ca(o){return dh[o]}function Xa(o){return{fieldPath:o.canonicalString()}}function Zr(o){return Et.fromServerFormat(o.fieldPath)}function Vl(o){return So.create(Zr(o.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return kn()}}(o.fieldFilter.op),o.fieldFilter.value)}function wd(o){switch(o.unaryFilter.op){case"IS_NAN":var t=Zr(o.unaryFilter.field);return So.create(t,"==",{doubleValue:NaN});case"IS_NULL":var s=Zr(o.unaryFilter.field);return So.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var l=Zr(o.unaryFilter.field);return So.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var p=Zr(o.unaryFilter.field);return So.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return kn()}}function _c(o){var t=[];return o.fields.forEach(function(s){return t.push(s.canonicalString())}),{fieldPaths:t}}function Ys(o){return o.length>=4&&"projects"===o.get(0)&&"databases"===o.get(2)}function Ks(o){for(var t="",s=0;s<o.length;s++)t.length>0&&(t=yc(t)),t=Dd(o.get(s),t);return yc(t)}function Dd(o,t){for(var s=t,l=o.length,p=0;p<l;p++){var v=o.charAt(p);switch(v){case"\0":s+="\x01\x10";break;case"\x01":s+="\x01\x11";break;default:s+=v}}return s}function yc(o){return o+"\x01\x01"}function da(o){var t=o.length;if(Kn(t>=2),2===t)return Kn("\x01"===o.charAt(0)&&"\x01"===o.charAt(1)),Ie.emptyPath();for(var s=t-2,l=[],p="",v=0;v<t;){var S=o.indexOf("\x01",v);switch((S<0||S>s)&&kn(),o.charAt(S+1)){case"\x01":var F=o.substring(v,S),Q=void 0;0===p.length?Q=F:(Q=p+=F,p=""),l.push(Q);break;case"\x10":p+=o.substring(v,S),p+="\0";break;case"\x11":p+=o.substring(v,S+1);break;default:kn()}v=S+2}return new Ie(l)}var xu=function(o,t){this.seconds=o,this.nanoseconds=t},Ts=function(o,t,s){this.ownerId=o,this.allowTabSynchronization=t,this.leaseTimestampMs=s};Ts.store="owner",Ts.key="owner";var eu=function(o,t,s){this.userId=o,this.lastAcknowledgedBatchId=t,this.lastStreamToken=s};eu.store="mutationQueues",eu.keyPath="userId";var _i=function(o,t,s,l,p){this.userId=o,this.batchId=t,this.localWriteTimeMs=s,this.baseMutations=l,this.mutations=p};_i.store="mutations",_i.keyPath="batchId",_i.userMutationsIndex="userMutationsIndex",_i.userMutationsKeyPath=["userId","batchId"];var ri=function(){function o(){}return o.prefixForUser=function(t){return[t]},o.prefixForPath=function(t,s){return[t,Ks(s)]},o.key=function(t,s,l){return[t,Ks(s),l]},o}();ri.store="documentMutations",ri.PLACEHOLDER=new ri;var Pu=function(o,t){this.path=o,this.readTime=t},vc=function(o,t){this.path=o,this.version=t},Hi=function(o,t,s,l,p,v){this.unknownDocument=o,this.noDocument=t,this.document=s,this.hasCommittedMutations=l,this.readTime=p,this.parentPath=v};Hi.store="remoteDocuments",Hi.readTimeIndex="readTimeIndex",Hi.readTimeIndexPath="readTime",Hi.collectionReadTimeIndex="collectionReadTimeIndex",Hi.collectionReadTimeIndexPath=["parentPath","readTime"];var Di=function(o){this.byteSize=o};Di.store="remoteDocumentGlobal",Di.key="remoteDocumentGlobalKey";var Mo=function(o,t,s,l,p,v,S){this.targetId=o,this.canonicalId=t,this.readTime=s,this.resumeToken=l,this.lastListenSequenceNumber=p,this.lastLimboFreeSnapshotVersion=v,this.query=S};Mo.store="targets",Mo.keyPath="targetId",Mo.queryTargetsIndexName="queryTargetsIndex",Mo.queryTargetsKeyPath=["canonicalId","targetId"];var oo=function(o,t,s){this.targetId=o,this.path=t,this.sequenceNumber=s};oo.store="targetDocuments",oo.keyPath=["targetId","path"],oo.documentTargetsIndex="documentTargetsIndex",oo.documentTargetsKeyPath=["path","targetId"];var ps=function(o,t,s,l){this.highestTargetId=o,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=s,this.targetCount=l};ps.key="targetGlobalKey",ps.store="targetGlobal";var xo=function(o,t){this.collectionId=o,this.parent=t};xo.store="collectionParents",xo.keyPath=["collectionId","parent"];var Qs=function(o,t,s,l){this.clientId=o,this.updateTimeMs=t,this.networkEnabled=s,this.inForeground=l};Qs.store="clientMetadata",Qs.keyPath="clientId";var dl=function(o,t,s){this.bundleId=o,this.createTime=t,this.version=s};dl.store="bundles",dl.keyPath="bundleId";var Fu=function(o,t,s){this.name=o,this.readTime=t,this.bundledQuery=s};Fu.store="namedQueries",Fu.keyPath="name";var jh=(0,ne.ev)((0,ne.ev)([],(0,ne.ev)((0,ne.ev)([],(0,ne.ev)((0,ne.ev)([],(0,ne.ev)((0,ne.ev)([],[eu.store,_i.store,ri.store,Hi.store,Mo.store,Ts.store,ps.store,oo.store]),[Qs.store])),[Di.store])),[xo.store])),[dl.store,Fu.store]),bc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Td=function(){function o(){this.onCommittedListeners=[]}return o.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},o.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},o}(),es=function(){var o=this;this.promise=new Promise(function(t,s){o.resolve=t,o.reject=s})},Wt=function(){function o(t){var s=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(l){s.isDone=!0,s.result=l,s.nextCallback&&s.nextCallback(l)},function(l){s.isDone=!0,s.error=l,s.catchCallback&&s.catchCallback(l)})}return o.prototype.catch=function(t){return this.next(void 0,t)},o.prototype.next=function(t,s){var l=this;return this.callbackAttached&&kn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new o(function(p,v){l.nextCallback=function(S){l.wrapSuccess(t,S).next(p,v)},l.catchCallback=function(S){l.wrapFailure(s,S).next(p,v)}})},o.prototype.toPromise=function(){var t=this;return new Promise(function(s,l){t.next(s,l)})},o.prototype.wrapUserFunction=function(t){try{var s=t();return s instanceof o?s:o.resolve(s)}catch(l){return o.reject(l)}},o.prototype.wrapSuccess=function(t,s){return t?this.wrapUserFunction(function(){return t(s)}):o.resolve(s)},o.prototype.wrapFailure=function(t,s){return t?this.wrapUserFunction(function(){return t(s)}):o.reject(s)},o.resolve=function(t){return new o(function(s,l){s(t)})},o.reject=function(t){return new o(function(s,l){l(t)})},o.waitFor=function(t){return new o(function(s,l){var p=0,v=0,S=!1;t.forEach(function(F){++p,F.next(function(){++v,S&&v===p&&s()},function(Q){return l(Q)})}),S=!0,v===p&&s()})},o.or=function(t){for(var s=o.resolve(!1),l=function(S){s=s.next(function(F){return F?o.resolve(F):S()})},p=0,v=t;p<v.length;p++)l(v[p]);return s},o.forEach=function(t,s){var l=this,p=[];return t.forEach(function(v,S){p.push(s.call(l,v,S))}),this.waitFor(p)},o}(),Jc=function(){function o(t,s){var l=this;this.action=t,this.transaction=s,this.aborted=!1,this.ft=new es,this.transaction.oncomplete=function(){l.ft.resolve()},this.transaction.onabort=function(){s.error?l.ft.reject(new Ul(t,s.error)):l.ft.resolve()},this.transaction.onerror=function(p){var v=Id(p.target.error);l.ft.reject(new Ul(t,v))}}return o.open=function(t,s,l,p){try{return new o(s,t.transaction(p,l))}catch(v){throw new Ul(s,v)}},Object.defineProperty(o.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),o.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(nn("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},o.prototype.store=function(t){var s=this.transaction.objectStore(t);return new Ad(s)},o}(),tu=function(){function o(t,s,l){this.name=t,this.version=s,this.wt=l,12.2===o._t((0,Ke.z$)())&&Ri("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return o.delete=function(t){return nn("SimpleDb","Removing database:",t),Js(window.indexedDB.deleteDatabase(t)).toPromise()},o.yt=function(){if("undefined"==typeof indexedDB)return!1;if(o.gt())return!0;var t=(0,Ke.z$)(),s=o._t(t),l=0<s&&s<10,p=o.Et(t),v=0<p&&p<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||l||v)},o.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},o.It=function(t,s){return t.store(s)},o._t=function(t){var s=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),l=s?s[1].split("_").slice(0,2).join("."):"-1";return Number(l)},o.Et=function(t){var s=t.match(/Android ([\d.]+)/i),l=s?s[1].split(".").slice(0,2).join("."):"-1";return Number(l)},o.prototype.At=function(t){return(0,ne.mG)(this,void 0,void 0,function(){var s,l=this;return(0,ne.Jh)(this,function(p){switch(p.label){case 0:return this.db?[3,2]:(nn("SimpleDb","Opening database:",this.name),s=this,[4,new Promise(function(v,S){var F=indexedDB.open(l.name,l.version);F.onsuccess=function(Q){v(Q.target.result)},F.onblocked=function(){S(new Ul(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},F.onerror=function(Q){var le=Q.target.error;S("VersionError"===le.name?new Vt(_t.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ul(t,le))},F.onupgradeneeded=function(Q){nn("SimpleDb",'Database "'+l.name+'" requires upgrade from version:',Q.oldVersion),l.wt.Rt(Q.target.result,F.transaction,Q.oldVersion,l.version).next(function(){nn("SimpleDb","Database upgrade to version "+l.version+" complete")})}})]);case 1:s.db=p.sent(),p.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(v){return l.bt(v)}),this.db)]}})})},o.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(s){return t(s)})},o.prototype.runTransaction=function(t,s,l,p){return(0,ne.mG)(this,void 0,void 0,function(){var v,S,F,Q,le;return(0,ne.Jh)(this,function(fe){switch(fe.label){case 0:v="readonly"===s,S=0,F=function(){var xe,Ge,ht,lt,wt;return(0,ne.Jh)(this,function(en){switch(en.label){case 0:++S,en.label=1;case 1:return en.trys.push([1,4,,5]),[4,Q.At(t)];case 2:return Q.db=en.sent(),xe=Jc.open(Q.db,t,v?"readonly":"readwrite",l),Ge=p(xe).catch(function(pn){return xe.abort(pn),Wt.reject(pn)}).toPromise(),ht={},Ge.catch(function(){}),[4,xe.dt];case 3:return[2,(ht.value=(en.sent(),Ge),ht)];case 4:return nn("SimpleDb","Transaction failed with error:",(lt=en.sent()).message,"Retrying:",wt="FirebaseError"!==lt.name&&S<3),Q.close(),wt?[3,5]:[2,{value:Promise.reject(lt)}];case 5:return[2]}})},Q=this,fe.label=1;case 1:return[5,F()];case 2:if("object"==typeof(le=fe.sent()))return[2,le.value];fe.label=3;case 3:return[3,1];case 4:return[2]}})})},o.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},o}(),Sd=function(){function o(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(o.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),o.prototype.done=function(){this.Vt=!0},o.prototype.Ct=function(t){this.St=t},o.prototype.delete=function(){return Js(this.Pt.delete())},o}(),Ul=function(o){function t(s,l){var p=this;return(p=o.call(this,_t.UNAVAILABLE,"IndexedDB transaction '"+s+"' failed: "+l)||this).name="IndexedDbTransactionError",p}return(0,ne.ZT)(t,o),t}(Vt);function hl(o){return"IndexedDbTransactionError"===o.name}var Ad=function(){function o(t){this.store=t}return o.prototype.put=function(t,s){var l;return void 0!==s?(nn("SimpleDb","PUT",this.store.name,t,s),l=this.store.put(s,t)):(nn("SimpleDb","PUT",this.store.name,"<auto-key>",t),l=this.store.put(t)),Js(l)},o.prototype.add=function(t){return nn("SimpleDb","ADD",this.store.name,t,t),Js(this.store.add(t))},o.prototype.get=function(t){var s=this;return Js(this.store.get(t)).next(function(l){return void 0===l&&(l=null),nn("SimpleDb","GET",s.store.name,t,l),l})},o.prototype.delete=function(t){return nn("SimpleDb","DELETE",this.store.name,t),Js(this.store.delete(t))},o.prototype.count=function(){return nn("SimpleDb","COUNT",this.store.name),Js(this.store.count())},o.prototype.Nt=function(t,s){var l=this.cursor(this.options(t,s)),p=[];return this.xt(l,function(v,S){p.push(S)}).next(function(){return p})},o.prototype.kt=function(t,s){nn("SimpleDb","DELETE ALL",this.store.name);var l=this.options(t,s);l.Ft=!1;var p=this.cursor(l);return this.xt(p,function(v,S,F){return F.delete()})},o.prototype.$t=function(t,s){var l;s?l=t:(l={},s=t);var p=this.cursor(l);return this.xt(p,s)},o.prototype.Ot=function(t){var s=this.cursor({});return new Wt(function(l,p){s.onerror=function(v){var S=Id(v.target.error);p(S)},s.onsuccess=function(v){var S=v.target.result;S?t(S.primaryKey,S.value).next(function(F){F?S.continue():l()}):l()}})},o.prototype.xt=function(t,s){var l=[];return new Wt(function(p,v){t.onerror=function(S){v(S.target.error)},t.onsuccess=function(S){var F=S.target.result;if(F){var Q=new Sd(F),le=s(F.primaryKey,F.value,Q);if(le instanceof Wt){var fe=le.catch(function(xe){return Q.done(),Wt.reject(xe)});l.push(fe)}Q.isDone?p():null===Q.Dt?F.continue():F.continue(Q.Dt)}else p()}}).next(function(){return Wt.waitFor(l)})},o.prototype.options=function(t,s){var l;return void 0!==t&&("string"==typeof t?l=t:s=t),{index:l,range:s}},o.prototype.cursor=function(t){var s="next";if(t.reverse&&(s="prev"),t.index){var l=this.store.index(t.index);return t.Ft?l.openKeyCursor(t.range,s):l.openCursor(t.range,s)}return this.store.openCursor(t.range,s)},o}();function Js(o){return new Wt(function(t,s){o.onsuccess=function(l){t(l.target.result)},o.onerror=function(l){var p=Id(l.target.error);s(p)}})}var hh=!1;function Id(o){var t=tu._t((0,Ke.z$)());if(t>=12.2&&t<13){var s="An internal error was encountered in the Indexed Database server";if(o.message.indexOf(s)>=0){var l=new Vt("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+s+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return hh||(hh=!0,setTimeout(function(){throw l},0)),l}}return o}var fl=function(o){function t(s,l){var p=this;return(p=o.call(this)||this).Mt=s,p.currentSequenceNumber=l,p}return(0,ne.ZT)(t,o),t}(Td);function us(o,t){var s=un(o);return tu.It(s.Mt,t)}var Nu=function(){function o(t,s,l,p){this.batchId=t,this.localWriteTime=s,this.baseMutations=l,this.mutations=p}return o.prototype.applyToRemoteDocument=function(t,s){for(var l=s.mutationResults,p=0;p<this.mutations.length;p++){var v=this.mutations[p];v.key.isEqual(t.key)&&Pl(v,t,l[p])}},o.prototype.applyToLocalView=function(t){for(var s=0,l=this.baseMutations;s<l.length;s++)(S=l[s]).key.isEqual(t.key)&&ol(S,t,this.localWriteTime);for(var p=0,v=this.mutations;p<v.length;p++){var S;(S=v[p]).key.isEqual(t.key)&&ol(S,t,this.localWriteTime)}},o.prototype.applyToLocalDocumentSet=function(t){var s=this;this.mutations.forEach(function(l){var p=t.get(l.key),v=p;s.applyToLocalView(v),p.isValidDocument()||v.convertToNoDocument(R.min())})},o.prototype.keys=function(){return this.mutations.reduce(function(t,s){return t.add(s.key)},qr())},o.prototype.isEqual=function(t){return this.batchId===t.batchId&&za(this.mutations,t.mutations,function(s,l){return sa(s,l)})&&za(this.baseMutations,t.baseMutations,function(s,l){return sa(s,l)})},o}(),pl=function(){function o(t,s,l,p){this.batch=t,this.commitVersion=s,this.mutationResults=l,this.docVersions=p}return o.from=function(t,s,l){Kn(t.mutations.length===l.length);for(var p=cc(),v=t.mutations,S=0;S<v.length;S++)p=p.insert(v[S].key,l[S].version);return new o(t,s,l,p)},o}(),Cc=function(){function o(t,s,l,p,v,S,F){void 0===v&&(v=R.min()),void 0===S&&(S=R.min()),void 0===F&&(F=ir.EMPTY_BYTE_STRING),this.target=t,this.targetId=s,this.purpose=l,this.sequenceNumber=p,this.snapshotVersion=v,this.lastLimboFreeSnapshotVersion=S,this.resumeToken=F}return o.prototype.withSequenceNumber=function(t){return new o(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},o.prototype.withResumeToken=function(t,s){return new o(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t)},o.prototype.withLastLimboFreeSnapshotVersion=function(t){return new o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},o}(),Ns=function(o){this.Lt=o};function ku(o,t){if(t.document)return Bh(o.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var s=Zn.fromSegments(t.noDocument.path),l=Vu(t.noDocument.readTime),p=Ar.newNoDocument(s,l);return t.hasCommittedMutations?p.setHasCommittedMutations():p}if(t.unknownDocument){var v=Zn.fromSegments(t.unknownDocument.path);return l=Vu(t.unknownDocument.version),Ar.newUnknownDocument(v,l)}return kn()}function Po(o,t,s){var xe,Ge,l=gl(s),p=t.key.path.popLast().toArray();if(t.isFoundDocument()){var v={name:ul(xe=o.Lt,(Ge=t).key),fields:Ge.data.value.mapValue.fields,updateTime:Jo(xe,Ge.version.toTimestamp())},S=t.hasCommittedMutations;return new Hi(null,null,v,S,l,p)}if(t.isNoDocument()){var F=t.key.path.toArray(),Q=Lu(t.version);return S=t.hasCommittedMutations,new Hi(null,new Pu(F,Q),null,S,l,p)}if(t.isUnknownDocument()){var le=t.key.path.toArray(),fe=Lu(t.version);return new Hi(new vc(le,fe),null,null,!0,l,p)}return kn()}function gl(o){var t=o.toTimestamp();return[t.seconds,t.nanoseconds]}function Md(o){var t=new U(o[0],o[1]);return R.fromTimestamp(t)}function Lu(o){var t=o.toTimestamp();return new xu(t.seconds,t.nanoseconds)}function Vu(o){var t=new U(o.seconds,o.nanoseconds);return R.fromTimestamp(t)}function Bl(o,t){for(var s=(t.baseMutations||[]).map(function(Q){return cl(o.Lt,Q)}),l=0;l<t.mutations.length-1;++l)l+1<t.mutations.length&&void 0!==t.mutations[l+1].transform&&(t.mutations[l].updateTransforms=t.mutations[l+1].transform.fieldTransforms,t.mutations.splice(l+1,1),++l);var S=t.mutations.map(function(Q){return cl(o.Lt,Q)}),F=U.fromMillis(t.localWriteTimeMs);return new Nu(t.batchId,F,s,S)}function ml(o){var t,s,l=Vu(o.readTime),p=void 0!==o.lastLimboFreeSnapshotVersion?Vu(o.lastLimboFreeSnapshotVersion):R.min();return void 0!==o.query.documents?(Kn(1===(s=o.query).documents.length),t=Bo(yu(Ed(s.documents[0])))):t=Bo(Kc(o.query)),new Cc(t,o.targetId,0,o.lastListenSequenceNumber,l,p,ir.fromBase64String(o.resumeToken))}function Xc(o,t){var s,l=Lu(t.snapshotVersion),p=Lu(t.lastLimboFreeSnapshotVersion);s=qs(t.target)?fc(o.Lt,t.target):pc(o.Lt,t.target);var v=t.resumeToken.toBase64();return new Mo(t.targetId,Ko(t.target),l,v,t.sequenceNumber,p,s)}function Od(o){var t=Kc({parent:o.parent,structuredQuery:o.structuredQuery});return"LAST"===o.limitType?jc(t,t.limit,"L"):t}var fh=function(){function o(){}return o.prototype.getBundleMetadata=function(t,s){return Uu(t).get(s).next(function(l){if(l)return{id:(p=l).bundleId,createTime:Vu(p.createTime),version:p.version};var p})},o.prototype.saveBundleMetadata=function(t,s){return Uu(t).put({bundleId:(l=s).id,createTime:Lu(ji(l.createTime)),version:l.version});var l},o.prototype.getNamedQuery=function(t,s){return Xs(t).get(s).next(function(l){if(l)return{name:(p=l).name,query:Od(p.bundledQuery),readTime:Vu(p.readTime)};var p})},o.prototype.saveNamedQuery=function(t,s){return Xs(t).put({name:(l=s).name,readTime:Lu(ji(l.readTime)),bundledQuery:l.bundledQuery});var l},o}();function Uu(o){return us(o,dl.store)}function Xs(o){return us(o,Fu.store)}var Hh=function(){function o(){this.Bt=new Rd}return o.prototype.addToCollectionParentIndex=function(t,s){return this.Bt.add(s),Wt.resolve()},o.prototype.getCollectionParents=function(t,s){return Wt.resolve(this.Bt.getEntries(s))},o}(),Rd=function(){function o(){this.index={}}return o.prototype.add=function(t){var s=t.lastSegment(),l=t.popLast(),p=this.index[s]||new bo(Ie.comparator),v=!p.has(l);return this.index[s]=p.add(l),v},o.prototype.has=function(t){var s=t.lastSegment(),l=t.popLast(),p=this.index[s];return p&&p.has(l)},o.prototype.getEntries=function(t){return(this.index[t]||new bo(Ie.comparator)).toArray()},o}(),xd=function(){function o(){this.qt=new Rd}return o.prototype.addToCollectionParentIndex=function(t,s){var l=this;if(!this.qt.has(s)){var p=s.lastSegment(),v=s.popLast();t.addOnCommittedListener(function(){l.qt.add(s)});var S={collectionId:p,parent:Ks(v)};return ph(t).put(S)}return Wt.resolve()},o.prototype.getCollectionParents=function(t,s){var l=[],p=IDBKeyRange.bound([s,""],[qa(s),""],!1,!0);return ph(t).Nt(p).next(function(v){for(var S=0,F=v;S<F.length;S++){var Q=F[S];if(Q.collectionId!==s)break;l.push(da(Q.parent))}return l})},o}();function ph(o){return us(o,xo.store)}var ea={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ks=function(){function o(t,s,l){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=l}return o.withCacheSize=function(t){return new o(t,o.DEFAULT_COLLECTION_PERCENTILE,o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},o}();function nu(o,t,s){var l=o.store(_i.store),p=o.store(ri.store),v=[],S=IDBKeyRange.only(s.batchId),F=0,Q=l.$t({range:S},function(lt,wt,en){return F++,en.delete()});v.push(Q.next(function(){Kn(1===F)}));for(var le=[],fe=0,xe=s.mutations;fe<xe.length;fe++){var Ge=xe[fe],ht=ri.key(t,Ge.key.path,s.batchId);v.push(p.delete(ht)),le.push(Ge.key)}return Wt.waitFor(v).next(function(){return le})}function jl(o){if(!o)return 0;var t;if(o.document)t=o.document;else if(o.unknownDocument)t=o.unknownDocument;else{if(!o.noDocument)throw kn();t=o.noDocument}return JSON.stringify(t).length}ks.DEFAULT_COLLECTION_PERCENTILE=10,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ks.DEFAULT=new ks(41943040,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ks.DISABLED=new ks(-1,0,0);var ru=function(){function o(t,s,l,p){this.userId=t,this.R=s,this.Ut=l,this.referenceDelegate=p,this.Kt={}}return o.Qt=function(t,s,l,p){return Kn(""!==t.uid),new o(t.isAuthenticated()?t.uid:"",s,l,p)},o.prototype.checkEmpty=function(t){var s=!0,l=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fa(t).$t({index:_i.userMutationsIndex,range:l},function(p,v,S){s=!1,S.done()}).next(function(){return s})},o.prototype.addMutationBatch=function(t,s,l,p){var v=this,S=_l(t),F=fa(t);return F.add({}).next(function(Q){Kn("number"==typeof Q);for(var le=new Nu(Q,s,l,p),fe=function(pn,tr,nr){var Yr=nr.baseMutations.map(function(ki){return Yc(pn.Lt,ki)}),di=nr.mutations.map(function(ki){return Yc(pn.Lt,ki)});return new _i(tr,nr.batchId,nr.localWriteTime.toMillis(),Yr,di)}(v.R,v.userId,le),xe=[],Ge=new bo(function(pn,tr){return Pr(pn.canonicalString(),tr.canonicalString())}),ht=0,lt=p;ht<lt.length;ht++){var wt=lt[ht],en=ri.key(v.userId,wt.key.path,Q);Ge=Ge.add(wt.key.path.popLast()),xe.push(F.put(fe)),xe.push(S.put(en,ri.PLACEHOLDER))}return Ge.forEach(function(pn){xe.push(v.Ut.addToCollectionParentIndex(t,pn))}),t.addOnCommittedListener(function(){v.Kt[Q]=le.keys()}),Wt.waitFor(xe).next(function(){return le})})},o.prototype.lookupMutationBatch=function(t,s){var l=this;return fa(t).get(s).next(function(p){return p?(Kn(p.userId===l.userId),Bl(l.R,p)):null})},o.prototype.jt=function(t,s){var l=this;return this.Kt[s]?Wt.resolve(this.Kt[s]):this.lookupMutationBatch(t,s).next(function(p){if(p){var v=p.keys();return l.Kt[s]=v,v}return null})},o.prototype.getNextMutationBatchAfterBatchId=function(t,s){var l=this,p=s+1,v=IDBKeyRange.lowerBound([this.userId,p]),S=null;return fa(t).$t({index:_i.userMutationsIndex,range:v},function(F,Q,le){Q.userId===l.userId&&(Kn(Q.batchId>=p),S=Bl(l.R,Q)),le.done()}).next(function(){return S})},o.prototype.getHighestUnacknowledgedBatchId=function(t){var s=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),l=-1;return fa(t).$t({index:_i.userMutationsIndex,range:s,reverse:!0},function(p,v,S){l=v.batchId,S.done()}).next(function(){return l})},o.prototype.getAllMutationBatches=function(t){var s=this,l=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fa(t).Nt(_i.userMutationsIndex,l).next(function(p){return p.map(function(v){return Bl(s.R,v)})})},o.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,s){var l=this,p=ri.prefixForPath(this.userId,s.path),v=IDBKeyRange.lowerBound(p),S=[];return _l(t).$t({range:v},function(F,Q,le){var fe=F[0],Ge=F[2],ht=da(F[1]);if(fe===l.userId&&s.path.isEqual(ht))return fa(t).get(Ge).next(function(lt){if(!lt)throw kn();Kn(lt.userId===l.userId),S.push(Bl(l.R,lt))});le.done()}).next(function(){return S})},o.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,s){var l=this,p=new bo(Pr),v=[];return s.forEach(function(S){var F=ri.prefixForPath(l.userId,S.path),Q=IDBKeyRange.lowerBound(F),le=_l(t).$t({range:Q},function(fe,xe,Ge){var ht=fe[0],wt=fe[2],en=da(fe[1]);ht===l.userId&&S.path.isEqual(en)?p=p.add(wt):Ge.done()});v.push(le)}),Wt.waitFor(v).next(function(){return l.Wt(t,p)})},o.prototype.getAllMutationBatchesAffectingQuery=function(t,s){var l=this,p=s.path,v=p.length+1,S=ri.prefixForPath(this.userId,p),F=IDBKeyRange.lowerBound(S),Q=new bo(Pr);return _l(t).$t({range:F},function(le,fe,xe){var Ge=le[0],lt=le[2],wt=da(le[1]);Ge===l.userId&&p.isPrefixOf(wt)?wt.length===v&&(Q=Q.add(lt)):xe.done()}).next(function(){return l.Wt(t,Q)})},o.prototype.Wt=function(t,s){var l=this,p=[],v=[];return s.forEach(function(S){v.push(fa(t).get(S).next(function(F){if(null===F)throw kn();Kn(F.userId===l.userId),p.push(Bl(l.R,F))}))}),Wt.waitFor(v).next(function(){return p})},o.prototype.removeMutationBatch=function(t,s){var l=this;return nu(t.Mt,this.userId,s).next(function(p){return t.addOnCommittedListener(function(){l.Gt(s.batchId)}),Wt.forEach(p,function(v){return l.referenceDelegate.markPotentiallyOrphaned(t,v)})})},o.prototype.Gt=function(t){delete this.Kt[t]},o.prototype.performConsistencyCheck=function(t){var s=this;return this.checkEmpty(t).next(function(l){if(!l)return Wt.resolve();var p=IDBKeyRange.lowerBound(ri.prefixForUser(s.userId)),v=[];return _l(t).$t({range:p},function(S,F,Q){if(S[0]===s.userId){var le=da(S[1]);v.push(le)}else Q.done()}).next(function(){Kn(0===v.length)})})},o.prototype.containsKey=function(t,s){return ha(t,this.userId,s)},o.prototype.zt=function(t){var s=this;return Ec(t).get(this.userId).next(function(l){return l||new eu(s.userId,-1,"")})},o}();function ha(o,t,s){var l=ri.prefixForPath(t,s.path),p=l[1],v=IDBKeyRange.lowerBound(l),S=!1;return _l(o).$t({range:v,Ft:!0},function(F,Q,le){F[0]===t&&F[1]===p&&(S=!0),le.done()}).next(function(){return S})}function fa(o){return us(o,_i.store)}function _l(o){return us(o,ri.store)}function Ec(o){return us(o,eu.store)}var Bu=function(){function o(t){this.Ht=t}return o.prototype.next=function(){return this.Ht+=2,this.Ht},o.Jt=function(){return new o(0)},o.Yt=function(){return new o(-1)},o}(),gh=function(){function o(t,s){this.referenceDelegate=t,this.R=s}return o.prototype.allocateTargetId=function(t){var s=this;return this.Xt(t).next(function(l){var p=new Bu(l.highestTargetId);return l.highestTargetId=p.next(),s.Zt(t,l).next(function(){return l.highestTargetId})})},o.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(s){return R.fromTimestamp(new U(s.lastRemoteSnapshotVersion.seconds,s.lastRemoteSnapshotVersion.nanoseconds))})},o.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(s){return s.highestListenSequenceNumber})},o.prototype.setTargetsMetadata=function(t,s,l){var p=this;return this.Xt(t).next(function(v){return v.highestListenSequenceNumber=s,l&&(v.lastRemoteSnapshotVersion=l.toTimestamp()),s>v.highestListenSequenceNumber&&(v.highestListenSequenceNumber=s),p.Zt(t,v)})},o.prototype.addTargetData=function(t,s){var l=this;return this.te(t,s).next(function(){return l.Xt(t).next(function(p){return p.targetCount+=1,l.ee(s,p),l.Zt(t,p)})})},o.prototype.updateTargetData=function(t,s){return this.te(t,s)},o.prototype.removeTargetData=function(t,s){var l=this;return this.removeMatchingKeysForTargetId(t,s.targetId).next(function(){return wc(t).delete(s.targetId)}).next(function(){return l.Xt(t)}).next(function(p){return Kn(p.targetCount>0),p.targetCount-=1,l.Zt(t,p)})},o.prototype.removeTargets=function(t,s,l){var p=this,v=0,S=[];return wc(t).$t(function(F,Q){var le=ml(Q);le.sequenceNumber<=s&&null===l.get(le.targetId)&&(v++,S.push(p.removeTargetData(t,le)))}).next(function(){return Wt.waitFor(S)}).next(function(){return v})},o.prototype.forEachTarget=function(t,s){return wc(t).$t(function(l,p){var v=ml(p);s(v)})},o.prototype.Xt=function(t){return ju(t).get(ps.key).next(function(s){return Kn(null!==s),s})},o.prototype.Zt=function(t,s){return ju(t).put(ps.key,s)},o.prototype.te=function(t,s){return wc(t).put(Xc(this.R,s))},o.prototype.ee=function(t,s){var l=!1;return t.targetId>s.highestTargetId&&(s.highestTargetId=t.targetId,l=!0),t.sequenceNumber>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t.sequenceNumber,l=!0),l},o.prototype.getTargetCount=function(t){return this.Xt(t).next(function(s){return s.targetCount})},o.prototype.getTargetData=function(t,s){var l=Ko(s),p=IDBKeyRange.bound([l,Number.NEGATIVE_INFINITY],[l,Number.POSITIVE_INFINITY]),v=null;return wc(t).$t({range:p,index:Mo.queryTargetsIndexName},function(S,F,Q){var le=ml(F);yo(s,le.target)&&(v=le,Q.done())}).next(function(){return v})},o.prototype.addMatchingKeys=function(t,s,l){var p=this,v=[],S=pa(t);return s.forEach(function(F){var Q=Ks(F.path);v.push(S.put(new oo(l,Q))),v.push(p.referenceDelegate.addReference(t,l,F))}),Wt.waitFor(v)},o.prototype.removeMatchingKeys=function(t,s,l){var p=this,v=pa(t);return Wt.forEach(s,function(S){var F=Ks(S.path);return Wt.waitFor([v.delete([l,F]),p.referenceDelegate.removeReference(t,l,S)])})},o.prototype.removeMatchingKeysForTargetId=function(t,s){var l=pa(t),p=IDBKeyRange.bound([s],[s+1],!1,!0);return l.delete(p)},o.prototype.getMatchingKeysForTargetId=function(t,s){var l=IDBKeyRange.bound([s],[s+1],!1,!0),p=pa(t),v=qr();return p.$t({range:l,Ft:!0},function(S,F,Q){var le=da(S[1]),fe=new Zn(le);v=v.add(fe)}).next(function(){return v})},o.prototype.containsKey=function(t,s){var l=Ks(s.path),p=IDBKeyRange.bound([l],[qa(l)],!1,!0),v=0;return pa(t).$t({index:oo.documentTargetsIndex,Ft:!0,range:p},function(S,F,Q){0!==S[0]&&(v++,Q.done())}).next(function(){return v>0})},o.prototype.lt=function(t,s){return wc(t).get(s).next(function(l){return l?ml(l):null})},o}();function wc(o){return us(o,Mo.store)}function ju(o){return us(o,ps.store)}function pa(o){return us(o,oo.store)}function iu(o){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(t){if(o.code!==_t.FAILED_PRECONDITION||o.message!==bc)throw o;return nn("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Pd(o,t){var l=o[1],v=t[1],S=Pr(o[0],t[0]);return 0===S?Pr(l,v):S}var Fd=function(){function o(t){this.ne=t,this.buffer=new bo(Pd),this.se=0}return o.prototype.ie=function(){return++this.se},o.prototype.re=function(t){var s=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(s);else{var l=this.buffer.last();Pd(s,l)<0&&(this.buffer=this.buffer.delete(l).add(s))}},Object.defineProperty(o.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),o}(),mh=function(){function o(t,s){this.garbageCollector=t,this.asyncQueue=s,this.oe=!1,this.ce=null}return o.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},o.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(o.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),o.prototype.ue=function(t){var s=this,l=this.oe?3e5:6e4;nn("LruGarbageCollector","Garbage collection scheduled in "+l+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",l,function(){return(0,ne.mG)(s,void 0,void 0,function(){var p;return(0,ne.Jh)(this,function(v){switch(v.label){case 0:this.ce=null,this.oe=!0,v.label=1;case 1:return v.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return v.sent(),[3,7];case 3:return hl(p=v.sent())?(nn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",p),[3,6]):[3,4];case 4:return[4,iu(p)];case 5:v.sent(),v.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return v.sent(),[2]}})})})},o}(),_h=function(){function o(t,s){this.ae=t,this.params=s}return o.prototype.calculateTargetCount=function(t,s){return this.ae.he(t).next(function(l){return Math.floor(s/100*l)})},o.prototype.nthSequenceNumber=function(t,s){var l=this;if(0===s)return Wt.resolve(Ki.o);var p=new Fd(s);return this.ae.forEachTarget(t,function(v){return p.re(v.sequenceNumber)}).next(function(){return l.ae.le(t,function(v){return p.re(v)})}).next(function(){return p.maxValue})},o.prototype.removeTargets=function(t,s,l){return this.ae.removeTargets(t,s,l)},o.prototype.removeOrphanedDocuments=function(t,s){return this.ae.removeOrphanedDocuments(t,s)},o.prototype.collect=function(t,s){var l=this;return-1===this.params.cacheSizeCollectionThreshold?(nn("LruGarbageCollector","Garbage collection skipped; disabled"),Wt.resolve(ea)):this.getCacheSize(t).next(function(p){return p<l.params.cacheSizeCollectionThreshold?(nn("LruGarbageCollector","Garbage collection skipped; Cache size "+p+" is lower than threshold "+l.params.cacheSizeCollectionThreshold),ea):l.fe(t,s)})},o.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},o.prototype.fe=function(t,s){var l,p,v,S,F,Q,le,fe=this,xe=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(Ge){return Ge>fe.params.maximumSequenceNumbersToCollect?(nn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+fe.params.maximumSequenceNumbersToCollect+" from "+Ge),p=fe.params.maximumSequenceNumbersToCollect):p=Ge,S=Date.now(),fe.nthSequenceNumber(t,p)}).next(function(Ge){return l=Ge,F=Date.now(),fe.removeTargets(t,l,s)}).next(function(Ge){return v=Ge,Q=Date.now(),fe.removeOrphanedDocuments(t,l)}).next(function(Ge){return le=Date.now(),Sa()<=At.in.DEBUG&&nn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(S-xe)+"ms\n\tDetermined least recently used "+p+" in "+(F-S)+"ms\n\tRemoved "+v+" targets in "+(Q-F)+"ms\n\tRemoved "+Ge+" documents in "+(le-Q)+"ms\nTotal Duration: "+(le-xe)+"ms"),Wt.resolve({didRun:!0,sequenceNumbersCollected:p,targetsRemoved:v,documentsRemoved:Ge})})},o}(),yh=function(){function o(t,s){this.db=t,this.garbageCollector=new _h(this,s)}return o.prototype.he=function(t){var s=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(l){return s.next(function(p){return l+p})})},o.prototype.de=function(t){var s=0;return this.le(t,function(l){s++}).next(function(){return s})},o.prototype.forEachTarget=function(t,s){return this.db.getTargetCache().forEachTarget(t,s)},o.prototype.le=function(t,s){return this.we(t,function(l,p){return s(p)})},o.prototype.addReference=function(t,s,l){return I(t,l)},o.prototype.removeReference=function(t,s,l){return I(t,l)},o.prototype.removeTargets=function(t,s,l){return this.db.getTargetCache().removeTargets(t,s,l)},o.prototype.markPotentiallyOrphaned=function(t,s){return I(t,s)},o.prototype._e=function(t,s){return p=s,v=!1,Ec(l=t).Ot(function(S){return ha(l,S,p).next(function(F){return F&&(v=!0),Wt.resolve(!F)})}).next(function(){return v});var l,p,v},o.prototype.removeOrphanedDocuments=function(t,s){var l=this,p=this.db.getRemoteDocumentCache().newChangeBuffer(),v=[],S=0;return this.we(t,function(F,Q){if(Q<=s){var le=l._e(t,F).next(function(fe){if(!fe)return S++,p.getEntry(t,F).next(function(){return p.removeEntry(F),pa(t).delete([0,Ks(F.path)])})});v.push(le)}}).next(function(){return Wt.waitFor(v)}).next(function(){return p.apply(t)}).next(function(){return S})},o.prototype.removeTarget=function(t,s){var l=s.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,l)},o.prototype.updateLimboDocument=function(t,s){return I(t,s)},o.prototype.we=function(t,s){var l,p=pa(t),v=Ki.o;return p.$t({index:oo.documentTargetsIndex},function(S,F){var le=F.path,fe=F.sequenceNumber;0===S[0]?(v!==Ki.o&&s(new Zn(da(l)),v),v=fe,l=le):v=Ki.o}).next(function(){v!==Ki.o&&s(new Zn(da(l)),v)})},o.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},o}();function I(o,t){return pa(o).put((l=o.currentSequenceNumber,new oo(0,Ks(t.path),l)));var l}var E=function(){function o(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={}}return o.prototype.get=function(t){var s=this.mapKeyFn(t),l=this.inner[s];if(void 0!==l)for(var p=0,v=l;p<v.length;p++){var S=v[p],Q=S[1];if(this.equalsFn(S[0],t))return Q}},o.prototype.has=function(t){return void 0!==this.get(t)},o.prototype.set=function(t,s){var l=this.mapKeyFn(t),p=this.inner[l];if(void 0!==p){for(var v=0;v<p.length;v++)if(this.equalsFn(p[v][0],t))return void(p[v]=[t,s]);p.push([t,s])}else this.inner[l]=[[t,s]]},o.prototype.delete=function(t){var s=this.mapKeyFn(t),l=this.inner[s];if(void 0===l)return!1;for(var p=0;p<l.length;p++)if(this.equalsFn(l[p][0],t))return 1===l.length?delete this.inner[s]:l.splice(p,1),!0;return!1},o.prototype.forEach=function(t){Z(this.inner,function(s,l){for(var p=0,v=l;p<v.length;p++){var S=v[p];t(S[0],S[1])}})},o.prototype.isEmpty=function(){return te(this.inner)},o}(),m=function(){function o(){this.changes=new E(function(t){return t.toString()},function(t,s){return t.isEqual(s)}),this.changesApplied=!1}return o.prototype.getReadTime=function(t){var s=this.changes.get(t);return s?s.readTime:R.min()},o.prototype.addEntry=function(t,s){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:s})},o.prototype.removeEntry=function(t,s){void 0===s&&(s=null),this.assertNotApplied(),this.changes.set(t,{document:Ar.newInvalidDocument(t),readTime:s})},o.prototype.getEntry=function(t,s){this.assertNotApplied();var l=this.changes.get(s);return void 0!==l?Wt.resolve(l.document):this.getFromCache(t,s)},o.prototype.getEntries=function(t,s){return this.getAllFromCache(t,s)},o.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},o.prototype.assertNotApplied=function(){},o}(),w=function(){function o(t,s){this.R=t,this.Ut=s}return o.prototype.addEntry=function(t,s,l){return d(t).put(f(s),l)},o.prototype.removeEntry=function(t,s){var l=d(t),p=f(s);return l.delete(p)},o.prototype.updateMetadata=function(t,s){var l=this;return this.getMetadata(t).next(function(p){return p.byteSize+=s,l.me(t,p)})},o.prototype.getEntry=function(t,s){var l=this;return d(t).get(f(s)).next(function(p){return l.ye(s,p)})},o.prototype.ge=function(t,s){var l=this;return d(t).get(f(s)).next(function(p){return{document:l.ye(s,p),size:jl(p)}})},o.prototype.getEntries=function(t,s){var l=this,p=Io();return this.pe(t,s,function(v,S){var F=l.ye(v,S);p=p.insert(v,F)}).next(function(){return p})},o.prototype.Ee=function(t,s){var l=this,p=Io(),v=new Qo(Zn.comparator);return this.pe(t,s,function(S,F){var Q=l.ye(S,F);p=p.insert(S,Q),v=v.insert(S,jl(F))}).next(function(){return{documents:p,Te:v}})},o.prototype.pe=function(t,s,l){if(s.isEmpty())return Wt.resolve();var p=IDBKeyRange.bound(s.first().path.toArray(),s.last().path.toArray()),v=s.getIterator(),S=v.getNext();return d(t).$t({range:p},function(F,Q,le){for(var fe=Zn.fromSegments(F);S&&Zn.comparator(S,fe)<0;)l(S,null),S=v.getNext();S&&S.isEqual(fe)&&(l(S,Q),S=v.hasNext()?v.getNext():null),S?le.Ct(S.path.toArray()):le.done()}).next(function(){for(;S;)l(S,null),S=v.hasNext()?v.getNext():null})},o.prototype.getDocumentsMatchingQuery=function(t,s,l){var p=this,v=Io(),S=s.path.length+1,F={};if(l.isEqual(R.min())){var Q=s.path.toArray();F.range=IDBKeyRange.lowerBound(Q)}else{var le=s.path.toArray(),fe=gl(l);F.range=IDBKeyRange.lowerBound([le,fe],!0),F.index=Hi.collectionReadTimeIndex}return d(t).$t(F,function(xe,Ge,ht){if(xe.length===S){var lt=ku(p.R,Ge);s.path.isPrefixOf(lt.key.path)?nl(s,lt)&&(v=v.insert(lt.key,lt)):ht.done()}}).next(function(){return v})},o.prototype.newChangeBuffer=function(t){return new G(this,!!t&&t.trackRemovals)},o.prototype.getSize=function(t){return this.getMetadata(t).next(function(s){return s.byteSize})},o.prototype.getMetadata=function(t){return c(t).get(Di.key).next(function(s){return Kn(!!s),s})},o.prototype.me=function(t,s){return c(t).put(Di.key,s)},o.prototype.ye=function(t,s){if(s){var l=ku(this.R,s);if(!l.isNoDocument()||!l.version.isEqual(R.min()))return l}return Ar.newInvalidDocument(t)},o}(),G=function(o){function t(s,l){var p=this;return(p=o.call(this)||this).Ie=s,p.trackRemovals=l,p.Ae=new E(function(v){return v.toString()},function(v,S){return v.isEqual(S)}),p}return(0,ne.ZT)(t,o),t.prototype.applyChanges=function(s){var l=this,p=[],v=0,S=new bo(function(F,Q){return Pr(F.canonicalString(),Q.canonicalString())});return this.changes.forEach(function(F,Q){var le=l.Ae.get(F);if(Q.document.isValidDocument()){var fe=Po(l.Ie.R,Q.document,l.getReadTime(F));S=S.add(F.path.popLast());var xe=jl(fe);v+=xe-le,p.push(l.Ie.addEntry(s,F,fe))}else if(v-=le,l.trackRemovals){var Ge=Po(l.Ie.R,Ar.newNoDocument(F,R.min()),l.getReadTime(F));p.push(l.Ie.addEntry(s,F,Ge))}else p.push(l.Ie.removeEntry(s,F))}),S.forEach(function(F){p.push(l.Ie.Ut.addToCollectionParentIndex(s,F))}),p.push(this.Ie.updateMetadata(s,v)),Wt.waitFor(p)},t.prototype.getFromCache=function(s,l){var p=this;return this.Ie.ge(s,l).next(function(v){return p.Ae.set(l,v.size),v.document})},t.prototype.getAllFromCache=function(s,l){var p=this;return this.Ie.Ee(s,l).next(function(v){var S=v.documents;return v.Te.forEach(function(F,Q){p.Ae.set(F,Q)}),S})},t}(m);function c(o){return us(o,Di.store)}function d(o){return us(o,Hi.store)}function f(o){return o.path.toArray()}var y=function(){function o(t){this.R=t}return o.prototype.Rt=function(t,s,l,p){var v=this;Kn(l<p&&l>=0&&p<=11);var Q,S=new Jc("createOrUpgrade",s);l<1&&p>=1&&(t.createObjectStore(Ts.store),(Q=t).createObjectStore(eu.store,{keyPath:eu.keyPath}),Q.createObjectStore(_i.store,{keyPath:_i.keyPath,autoIncrement:!0}).createIndex(_i.userMutationsIndex,_i.userMutationsKeyPath,{unique:!0}),Q.createObjectStore(ri.store),D(t),function(Q){Q.createObjectStore(Hi.store)}(t));var F=Wt.resolve();return l<3&&p>=3&&(0!==l&&(function(Q){Q.deleteObjectStore(oo.store),Q.deleteObjectStore(Mo.store),Q.deleteObjectStore(ps.store)}(t),D(t)),F=F.next(function(){return function(Q){var le=Q.store(ps.store),fe=new ps(0,0,R.min().toTimestamp(),0);return le.put(ps.key,fe)}(S)})),l<4&&p>=4&&(0!==l&&(F=F.next(function(){return function(Q,le){return le.store(_i.store).Nt().next(function(fe){Q.deleteObjectStore(_i.store),Q.createObjectStore(_i.store,{keyPath:_i.keyPath,autoIncrement:!0}).createIndex(_i.userMutationsIndex,_i.userMutationsKeyPath,{unique:!0});var xe=le.store(_i.store),Ge=fe.map(function(ht){return xe.put(ht)});return Wt.waitFor(Ge)})}(t,S)})),F=F.next(function(){!function(Q){Q.createObjectStore(Qs.store,{keyPath:Qs.keyPath})}(t)})),l<5&&p>=5&&(F=F.next(function(){return v.Re(S)})),l<6&&p>=6&&(F=F.next(function(){return function(Q){Q.createObjectStore(Di.store)}(t),v.be(S)})),l<7&&p>=7&&(F=F.next(function(){return v.ve(S)})),l<8&&p>=8&&(F=F.next(function(){return v.Pe(t,S)})),l<9&&p>=9&&(F=F.next(function(){(function(Q){Q.objectStoreNames.contains("remoteDocumentChanges")&&Q.deleteObjectStore("remoteDocumentChanges")})(t),function(Q){var le=Q.objectStore(Hi.store);le.createIndex(Hi.readTimeIndex,Hi.readTimeIndexPath,{unique:!1}),le.createIndex(Hi.collectionReadTimeIndex,Hi.collectionReadTimeIndexPath,{unique:!1})}(s)})),l<10&&p>=10&&(F=F.next(function(){return v.Ve(S)})),l<11&&p>=11&&(F=F.next(function(){(function(Q){Q.createObjectStore(dl.store,{keyPath:dl.keyPath})})(t),function(Q){Q.createObjectStore(Fu.store,{keyPath:Fu.keyPath})}(t)})),F},o.prototype.be=function(t){var s=0;return t.store(Hi.store).$t(function(l,p){s+=jl(p)}).next(function(){var l=new Di(s);return t.store(Di.store).put(Di.key,l)})},o.prototype.Re=function(t){var s=this,l=t.store(eu.store),p=t.store(_i.store);return l.Nt().next(function(v){return Wt.forEach(v,function(S){var F=IDBKeyRange.bound([S.userId,-1],[S.userId,S.lastAcknowledgedBatchId]);return p.Nt(_i.userMutationsIndex,F).next(function(Q){return Wt.forEach(Q,function(le){Kn(le.userId===S.userId);var fe=Bl(s.R,le);return nu(t,S.userId,fe).next(function(){})})})})})},o.prototype.ve=function(t){var s=t.store(oo.store),l=t.store(Hi.store);return t.store(ps.store).get(ps.key).next(function(p){var v=[];return l.$t(function(S,F){var Q=new Ie(S),le=[0,Ks(Q)];v.push(s.get(le).next(function(fe){return fe?Wt.resolve():s.put(new oo(0,Ks(Q),p.highestListenSequenceNumber))}))}).next(function(){return Wt.waitFor(v)})})},o.prototype.Pe=function(t,s){t.createObjectStore(xo.store,{keyPath:xo.keyPath});var l=s.store(xo.store),p=new Rd,v=function(S){if(p.add(S)){var F=S.lastSegment(),Q=S.popLast();return l.put({collectionId:F,parent:Ks(Q)})}};return s.store(Hi.store).$t({Ft:!0},function(S,F){var Q=new Ie(S);return v(Q.popLast())}).next(function(){return s.store(ri.store).$t({Ft:!0},function(S,F){var le=da(S[1]);return v(le.popLast())})})},o.prototype.Ve=function(t){var s=this,l=t.store(Mo.store);return l.$t(function(p,v){var S=ml(v),F=Xc(s.R,S);return l.put(F)})},o}();function D(o){o.createObjectStore(oo.store,{keyPath:oo.keyPath}).createIndex(oo.documentTargetsIndex,oo.documentTargetsKeyPath,{unique:!0}),o.createObjectStore(Mo.store,{keyPath:Mo.keyPath}).createIndex(Mo.queryTargetsIndexName,Mo.queryTargetsKeyPath,{unique:!0}),o.createObjectStore(ps.store)}var L="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",W=function(){function o(t,s,l,p,v,S,F,Q,le,fe){if(this.allowTabSynchronization=t,this.persistenceKey=s,this.clientId=l,this.Se=v,this.window=S,this.document=F,this.De=le,this.Ce=fe,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(xe){return Promise.resolve()},!o.yt())throw new Vt(_t.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yh(this,p),this.Le=s+"main",this.R=new Ns(Q),this.Be=new tu(this.Le,11,new y(this.R)),this.qe=new gh(this.referenceDelegate,this.R),this.Ut=new xd,this.Ue=new w(this.R,this.Ut),this.Ke=new fh,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===fe&&Ri("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return o.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Vt(_t.FAILED_PRECONDITION,L);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(s){return t.qe.getHighestSequenceNumber(s)})}).then(function(s){t.Ne=new Ki(s,t.De)}).then(function(){t.xe=!0}).catch(function(s){return t.Be&&t.Be.close(),Promise.reject(s)})},o.prototype.He=function(t){var s=this;return this.Me=function(l){return(0,ne.mG)(s,void 0,void 0,function(){return(0,ne.Jh)(this,function(p){return this.started?[2,t(l)]:[2]})})},t(this.isPrimary)},o.prototype.setDatabaseDeletedListener=function(t){var s=this;this.Be.vt(function(l){return(0,ne.mG)(s,void 0,void 0,function(){return(0,ne.Jh)(this,function(p){switch(p.label){case 0:return null===l.newVersion?[4,t()]:[3,2];case 1:p.sent(),p.label=2;case 2:return[2]}})})})},o.prototype.setNetworkEnabled=function(t){var s=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,ne.mG)(s,void 0,void 0,function(){return(0,ne.Jh)(this,function(l){switch(l.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})}))},o.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(s){return ve(s).put(new Qs(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(s).next(function(l){l||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(s)}).next(function(l){return t.isPrimary&&!l?t.Xe(s).next(function(){return!1}):!!l&&t.Ze(s).next(function(){return!0})})}).catch(function(s){if(hl(s))return nn("IndexedDbPersistence","Failed to extend owner lease: ",s),t.isPrimary;if(!t.allowTabSynchronization)throw s;return nn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",s),!1}).then(function(s){t.isPrimary!==s&&t.Se.enqueueRetryable(function(){return t.Me(s)}),t.isPrimary=s})},o.prototype.Je=function(t){var s=this;return ce(t).get(Ts.key).next(function(l){return Wt.resolve(s.tn(l))})},o.prototype.en=function(t){return ve(t).delete(this.clientId)},o.prototype.nn=function(){return(0,ne.mG)(this,void 0,void 0,function(){var t,s,l,v=this;return(0,ne.Jh)(this,function(S){switch(S.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(F){var Q=us(F,Qs.store);return Q.Nt().next(function(le){var fe=v.rn(le,18e5),xe=le.filter(function(Ge){return-1===fe.indexOf(Ge)});return Wt.forEach(xe,function(Ge){return Q.delete(Ge.clientId)}).next(function(){return xe})})}).catch(function(){return[]})]);case 1:if(t=S.sent(),this.Qe)for(s=0,l=t;s<l.length;s++)this.Qe.removeItem(this.on(l[s].clientId));S.label=2;case 2:return[2]}})})},o.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},o.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},o.prototype.Ye=function(t){var s=this;return this.Ce?Wt.resolve(!0):ce(t).get(Ts.key).next(function(l){if(null!==l&&s.sn(l.leaseTimestampMs,5e3)&&!s.cn(l.ownerId)){if(s.tn(l)&&s.networkEnabled)return!0;if(!s.tn(l)){if(!l.allowTabSynchronization)throw new Vt(_t.FAILED_PRECONDITION,L);return!1}}return!(!s.networkEnabled||!s.inForeground)||ve(t).Nt().next(function(p){return void 0===s.rn(p,5e3).find(function(v){return!(s.clientId===v.clientId||!(!s.networkEnabled&&v.networkEnabled||!s.inForeground&&v.inForeground&&s.networkEnabled===v.networkEnabled))})})}).next(function(l){return s.isPrimary!==l&&nn("IndexedDbPersistence","Client "+(l?"is":"is not")+" eligible for a primary lease."),l})},o.prototype.shutdown=function(){return(0,ne.mG)(this,void 0,void 0,function(){var t=this;return(0,ne.Jh)(this,function(s){switch(s.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ts.store,Qs.store],function(l){var p=new fl(l,Ki.o);return t.Xe(p).next(function(){return t.en(p)})})];case 1:return s.sent(),this.Be.close(),this.ln(),[2]}})})},o.prototype.rn=function(t,s){var l=this;return t.filter(function(p){return l.sn(p.updateTimeMs,s)&&!l.cn(p.clientId)})},o.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(s){return ve(s).Nt().next(function(l){return t.rn(l,18e5).map(function(p){return p.clientId})})})},Object.defineProperty(o.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),o.prototype.getMutationQueue=function(t){return ru.Qt(t,this.R,this.Ut,this.referenceDelegate)},o.prototype.getTargetCache=function(){return this.qe},o.prototype.getRemoteDocumentCache=function(){return this.Ue},o.prototype.getIndexManager=function(){return this.Ut},o.prototype.getBundleCache=function(){return this.Ke},o.prototype.runTransaction=function(t,s,l){var v,p=this;return nn("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===s?"readonly":"readwrite",jh,function(F){return v=new fl(F,p.Ne?p.Ne.next():Ki.o),"readwrite-primary"===s?p.Je(v).next(function(Q){return!!Q||p.Ye(v)}).next(function(Q){if(!Q)throw Ri("Failed to obtain primary lease for action '"+t+"'."),p.isPrimary=!1,p.Se.enqueueRetryable(function(){return p.Me(!1)}),new Vt(_t.FAILED_PRECONDITION,bc);return l(v)}).next(function(Q){return p.Ze(v).next(function(){return Q})}):p.dn(v).next(function(){return l(v)})}).then(function(F){return v.raiseOnCommittedEvent(),F})},o.prototype.dn=function(t){var s=this;return ce(t).get(Ts.key).next(function(l){if(null!==l&&s.sn(l.leaseTimestampMs,5e3)&&!s.cn(l.ownerId)&&!s.tn(l)&&!(s.Ce||s.allowTabSynchronization&&l.allowTabSynchronization))throw new Vt(_t.FAILED_PRECONDITION,L)})},o.prototype.Ze=function(t){var s=new Ts(this.clientId,this.allowTabSynchronization,Date.now());return ce(t).put(Ts.key,s)},o.yt=function(){return tu.yt()},o.prototype.Xe=function(t){var s=this,l=ce(t);return l.get(Ts.key).next(function(p){return s.tn(p)?(nn("IndexedDbPersistence","Releasing primary lease."),l.delete(Ts.key)):Wt.resolve()})},o.prototype.sn=function(t,s){var l=Date.now();return!(t<l-s||t>l&&(Ri("Detected an update time that is in the future: "+t+" > "+l),1))},o.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},o.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},o.prototype.Ge=function(){var t,s=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){s.un(),(0,Ke.G6)()&&navigator.appVersion.match("Version/14")&&s.Se.enterRestrictedMode(!0),s.Se.enqueueAndForget(function(){return s.shutdown()})},this.window.addEventListener("pagehide",this.ke))},o.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},o.prototype.cn=function(t){var s;try{var l=null!==(null===(s=this.Qe)||void 0===s?void 0:s.getItem(this.on(t)));return nn("IndexedDbPersistence","Client '"+t+"' "+(l?"is":"is not")+" zombied in LocalStorage"),l}catch(p){return Ri("IndexedDbPersistence","Failed to get zombied client id.",p),!1}},o.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Ri("Failed to set zombie client id.",t)}},o.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},o.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},o}();function ce(o){return us(o,Ts.store)}function ve(o){return us(o,Qs.store)}function Me(o,t){var s=o.projectId;return o.isDefaultDatabase||(s+="."+o.database),"firestore/"+t+"/"+s+"/"}var ke=function(o,t){this.progress=o,this.wn=t},dt=function(){function o(t,s,l){this.Ue=t,this._n=s,this.Ut=l}return o.prototype.mn=function(t,s){var l=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,s).next(function(p){return l.yn(t,s,p)})},o.prototype.yn=function(t,s,l){return this.Ue.getEntry(t,s).next(function(p){for(var v=0,S=l;v<S.length;v++)S[v].applyToLocalView(p);return p})},o.prototype.gn=function(t,s){t.forEach(function(l,p){for(var v=0,S=s;v<S.length;v++)S[v].applyToLocalView(p)})},o.prototype.pn=function(t,s){var l=this;return this.Ue.getEntries(t,s).next(function(p){return l.En(t,p).next(function(){return p})})},o.prototype.En=function(t,s){var l=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,s).next(function(p){return l.gn(s,p)})},o.prototype.getDocumentsMatchingQuery=function(t,s,l){return Zn.isDocumentKey((p=s).path)&&null===p.collectionGroup&&0===p.filters.length?this.Tn(t,s.path):tl(s)?this.In(t,s,l):this.An(t,s,l);var p},o.prototype.Tn=function(t,s){return this.mn(t,new Zn(s)).next(function(l){var p=lc();return l.isFoundDocument()&&(p=p.insert(l.key,l)),p})},o.prototype.In=function(t,s,l){var p=this,v=s.collectionGroup,S=lc();return this.Ut.getCollectionParents(t,v).next(function(F){return Wt.forEach(F,function(Q){var fe,xe,le=(fe=s,xe=Q.child(v),new Zs(xe,null,fe.explicitOrderBy.slice(),fe.filters.slice(),fe.limit,fe.limitType,fe.startAt,fe.endAt));return p.An(t,le,l).next(function(fe){fe.forEach(function(xe,Ge){S=S.insert(xe,Ge)})})}).next(function(){return S})})},o.prototype.An=function(t,s,l){var p,v,S=this;return this.Ue.getDocumentsMatchingQuery(t,s,l).next(function(F){return p=F,S._n.getAllMutationBatchesAffectingQuery(t,s)}).next(function(F){return S.Rn(t,v=F,p).next(function(Q){p=Q;for(var le=0,fe=v;le<fe.length;le++)for(var xe=fe[le],Ge=0,ht=xe.mutations;Ge<ht.length;Ge++){var lt=ht[Ge],wt=lt.key,en=p.get(wt);null==en&&(en=Ar.newInvalidDocument(wt),p=p.insert(wt,en)),ol(lt,en,xe.localWriteTime),en.isFoundDocument()||(p=p.remove(wt))}})}).next(function(){return p.forEach(function(F,Q){nl(s,Q)||(p=p.remove(F))}),p})},o.prototype.Rn=function(t,s,l){for(var p=qr(),v=0,S=s;v<S.length;v++)for(var F=0,Q=S[v].mutations;F<Q.length;F++){var le=Q[F];le instanceof ws&&null===l.get(le.key)&&(p=p.add(le.key))}var fe=l;return this.Ue.getEntries(t,p).next(function(xe){return xe.forEach(function(Ge,ht){ht.isFoundDocument()&&(fe=fe.insert(Ge,ht))}),fe})},o}(),It=function(){function o(t,s,l,p){this.targetId=t,this.fromCache=s,this.bn=l,this.vn=p}return o.Pn=function(t,s){for(var l=qr(),p=qr(),v=0,S=s.docChanges;v<S.length;v++){var F=S[v];switch(F.type){case 0:l=l.add(F.doc.key);break;case 1:p=p.add(F.doc.key)}}return new o(t,s.fromCache,l,p)},o}(),Bt=function(){function o(){}return o.prototype.Vn=function(t){this.Sn=t},o.prototype.getDocumentsMatchingQuery=function(t,s,l,p){var S,v=this;return 0===(S=s).filters.length&&null===S.limit&&null==S.startAt&&null==S.endAt&&(0===S.explicitOrderBy.length||1===S.explicitOrderBy.length&&S.explicitOrderBy[0].field.isKeyField())||l.isEqual(R.min())?this.Dn(t,s):this.Sn.pn(t,p).next(function(S){var F=v.Cn(s,S);return(vu(s)||Ma(s))&&v.Nn(s.limitType,F,p,l)?v.Dn(t,s):(Sa()<=At.in.DEBUG&&nn("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ac(s)),v.Sn.getDocumentsMatchingQuery(t,s,l).next(function(Q){return F.forEach(function(le){Q=Q.insert(le.key,le)}),Q}))})},o.prototype.Cn=function(t,s){var l=new bo(rl(t));return s.forEach(function(p,v){nl(t,v)&&(l=l.add(v))}),l},o.prototype.Nn=function(t,s,l,p){if(l.size!==s.size)return!0;var v="F"===t?s.last():s.first();return!!v&&(v.hasPendingWrites||v.version.compareTo(p)>0)},o.prototype.Dn=function(t,s){return Sa()<=At.in.DEBUG&&nn("QueryEngine","Using full collection scan to execute query:",ac(s)),this.Sn.getDocumentsMatchingQuery(t,s,R.min())},o}(),on=function(){function o(t,s,l,p){this.persistence=t,this.xn=s,this.R=p,this.kn=new Qo(Pr),this.Fn=new E(function(v){return Ko(v)},yo),this.$n=R.min(),this._n=t.getMutationQueue(l),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new dt(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return o.prototype.collectGarbage=function(t){var s=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(l){return t.collect(l,s.kn)})},o}();function Qn(o,t,s,l){return new on(o,t,s,l)}function Yn(o,t){return(0,ne.mG)(this,void 0,void 0,function(){var s,l,p,v;return(0,ne.Jh)(this,function(S){switch(S.label){case 0:return s=un(o),l=s._n,p=s.Mn,[4,s.persistence.runTransaction("Handle user change","readonly",function(F){var Q;return s._n.getAllMutationBatches(F).next(function(le){return Q=le,l=s.persistence.getMutationQueue(t),p=new dt(s.On,l,s.persistence.getIndexManager()),l.getAllMutationBatches(F)}).next(function(le){for(var fe=[],xe=[],Ge=qr(),ht=0,lt=Q;ht<lt.length;ht++){var wt=lt[ht];fe.push(wt.batchId);for(var en=0,pn=wt.mutations;en<pn.length;en++)Ge=Ge.add(pn[en].key)}for(var nr=0,Yr=le;nr<Yr.length;nr++){var di=Yr[nr];xe.push(di.batchId);for(var ki=0,As=di.mutations;ki<As.length;ki++)Ge=Ge.add(As[ki].key)}return p.pn(F,Ge).next(function(xh){return{Ln:xh,removedBatchIds:fe,addedBatchIds:xe}})})})];case 1:return v=S.sent(),[2,(s._n=l,s.Mn=p,s.xn.Vn(s.Mn),v)]}})})}function Er(o,t){var s=un(o);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(l){var S,F,Q,le,fe,xe,Ge,p=t.batch.keys(),v=s.On.newChangeBuffer({trackRemovals:!0});return(S=s,F=l,Q=t,le=v,fe=Q.batch,xe=fe.keys(),Ge=Wt.resolve(),xe.forEach(function(ht){Ge=Ge.next(function(){return le.getEntry(F,ht)}).next(function(lt){var wt=Q.docVersions.get(ht);Kn(null!==wt),lt.version.compareTo(wt)<0&&(fe.applyToRemoteDocument(lt,Q),lt.isValidDocument()&&le.addEntry(lt,Q.commitVersion))})}),Ge.next(function(){return S._n.removeMutationBatch(F,fe)})).next(function(){return v.apply(l)}).next(function(){return s._n.performConsistencyCheck(l)}).next(function(){return s.Mn.pn(l,p)})})}function so(o){var t=un(o);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(s){return t.qe.getLastRemoteSnapshotVersion(s)})}function Na(o,t){var s=un(o),l=t.snapshotVersion,p=s.kn;return s.persistence.runTransaction("Apply remote event","readwrite-primary",function(v){var S=s.On.newChangeBuffer({trackRemovals:!0});p=s.kn;var F=[];t.targetChanges.forEach(function(fe,xe){var wt,en,pn,Ge=p.get(xe);if(Ge){F.push(s.qe.removeMatchingKeys(v,fe.removedDocuments,xe).next(function(){return s.qe.addMatchingKeys(v,fe.addedDocuments,xe)}));var ht=fe.resumeToken;if(ht.approximateByteSize()>0){var lt=Ge.withResumeToken(ht,l).withSequenceNumber(v.currentSequenceNumber);p=p.insert(xe,lt),wt=Ge,pn=fe,Kn((en=lt).resumeToken.approximateByteSize()>0),(0===wt.resumeToken.approximateByteSize()||en.snapshotVersion.toMicroseconds()-wt.snapshotVersion.toMicroseconds()>=3e8||pn.addedDocuments.size+pn.modifiedDocuments.size+pn.removedDocuments.size>0)&&F.push(s.qe.updateTargetData(v,lt))}}});var Q=Io();if(t.documentUpdates.forEach(function(fe,xe){t.resolvedLimboDocuments.has(fe)&&F.push(s.persistence.referenceDelegate.updateLimboDocument(v,fe))}),F.push(Hl(v,S,t.documentUpdates,l,void 0).next(function(fe){Q=fe})),!l.isEqual(R.min())){var le=s.qe.getLastRemoteSnapshotVersion(v).next(function(fe){return s.qe.setTargetsMetadata(v,v.currentSequenceNumber,l)});F.push(le)}return Wt.waitFor(F).next(function(){return S.apply(v)}).next(function(){return s.Mn.En(v,Q)}).next(function(){return Q})}).then(function(v){return s.kn=p,v})}function Hl(o,t,s,l,p){var v=qr();return s.forEach(function(S){return v=v.add(S)}),t.getEntries(o,v).next(function(S){var F=Io();return s.forEach(function(Q,le){var fe=S.get(Q),xe=(null==p?void 0:p.get(Q))||l;le.isNoDocument()&&le.version.isEqual(R.min())?(t.removeEntry(Q,xe),F=F.insert(Q,le)):!fe.isValidDocument()||le.version.compareTo(fe.version)>0||0===le.version.compareTo(fe.version)&&fe.hasPendingWrites?(t.addEntry(le,xe),F=F.insert(Q,le)):nn("LocalStore","Ignoring outdated watch update for ",Q,". Current version:",fe.version," Watch version:",le.version)}),F})}function Nd(o,t){var s=un(o);return s.persistence.runTransaction("Get next mutation batch","readonly",function(l){return void 0===t&&(t=-1),s._n.getNextMutationBatchAfterBatchId(l,t)})}function ou(o,t){var s=un(o);return s.persistence.runTransaction("Allocate target","readwrite",function(l){var p;return s.qe.getTargetData(l,t).next(function(v){return v?Wt.resolve(p=v):s.qe.allocateTargetId(l).next(function(S){return p=new Cc(t,S,0,l.currentSequenceNumber),s.qe.addTargetData(l,p).next(function(){return p})})})}).then(function(l){var p=s.kn.get(l.targetId);return(null===p||l.snapshotVersion.compareTo(p.snapshotVersion)>0)&&(s.kn=s.kn.insert(l.targetId,l),s.Fn.set(t,l.targetId)),l})}function su(o,t,s){return(0,ne.mG)(this,void 0,void 0,function(){var l,p,v,S;return(0,ne.Jh)(this,function(F){switch(F.label){case 0:l=un(o),p=l.kn.get(t),v=s?"readwrite":"readwrite-primary",F.label=1;case 1:return F.trys.push([1,4,,5]),s?[3,3]:[4,l.persistence.runTransaction("Release target",v,function(Q){return l.persistence.referenceDelegate.removeTarget(Q,p)})];case 2:F.sent(),F.label=3;case 3:return[3,5];case 4:if(!hl(S=F.sent()))throw S;return nn("LocalStore","Failed to update sequence numbers for target "+t+": "+S),[3,5];case 5:return l.kn=l.kn.remove(t),l.Fn.delete(p.target),[2]}})})}function Gh(o,t,s){var l=un(o),p=R.min(),v=qr();return l.persistence.runTransaction("Execute query","readonly",function(S){return(F=l,Q=S,le=Bo(t),fe=un(F),xe=fe.Fn.get(le),void 0!==xe?Wt.resolve(fe.kn.get(xe)):fe.qe.getTargetData(Q,le)).next(function(F){if(F)return p=F.lastLimboFreeSnapshotVersion,l.qe.getMatchingKeysForTargetId(S,F.targetId).next(function(Q){v=Q})}).next(function(){return l.xn.getDocumentsMatchingQuery(S,t,s?p:R.min(),s?v:qr())}).next(function(F){return{documents:F,Bn:v}});var F,Q,le,fe,xe})}function kf(o,t){var s=un(o),l=un(s.qe),p=s.kn.get(t);return p?Promise.resolve(p.target):s.persistence.runTransaction("Get target data","readonly",function(v){return l.lt(v,t).next(function(S){return S?S.target:null})})}function ig(o){var t=un(o);return t.persistence.runTransaction("Get new document changes","readonly",function(s){return p=s,v=t.$n,S=un(t.On),F=Io(),Q=gl(v),le=d(p),fe=IDBKeyRange.lowerBound(Q,!0),le.$t({index:Hi.readTimeIndex,range:fe},function(xe,Ge){var ht=ku(S.R,Ge);F=F.insert(ht.key,ht),Q=Ge.readTime}).next(function(){return{wn:F,readTime:Md(Q)}});var p,v,S,F,Q,le,fe}).then(function(s){var l=s.wn;return t.$n=s.readTime,l})}function t_(o){return(0,ne.mG)(this,void 0,void 0,function(){var t;return(0,ne.Jh)(this,function(s){return[2,(t=un(o)).persistence.runTransaction("Synchronize last document change read time","readonly",function(l){return v=d(l),S=R.min(),v.$t({index:Hi.readTimeIndex,reverse:!0},function(F,Q,le){Q.readTime&&(S=Md(Q.readTime)),le.done()}).next(function(){return S});var v,S}).then(function(l){t.$n=l})]})})}function og(o,t,s,l){return(0,ne.mG)(this,void 0,void 0,function(){var p,v,S,F,Q,le,fe,xe,Ge,ht;return(0,ne.Jh)(this,function(lt){switch(lt.label){case 0:for(p=un(o),v=qr(),S=Io(),F=cc(),Q=0,le=s;Q<le.length;Q++)xe=t.qn((fe=le[Q]).metadata.name),fe.document&&(v=v.add(xe)),S=S.insert(xe,t.Un(fe)),F=F.insert(xe,t.Kn(fe.metadata.readTime));return Ge=p.On.newChangeBuffer({trackRemovals:!0}),[4,ou(p,(wt=l,Bo(yu(Ie.fromString("__bundle__/docs/"+wt)))))];case 1:return ht=lt.sent(),[2,p.persistence.runTransaction("Apply bundle documents","readwrite",function(wt){return Hl(wt,Ge,S,R.min(),F).next(function(en){return Ge.apply(wt),en}).next(function(en){return p.qe.removeMatchingKeysForTargetId(wt,ht.targetId).next(function(){return p.qe.addMatchingKeys(wt,v,ht.targetId)}).next(function(){return p.Mn.En(wt,en)}).next(function(){return en})})})]}var wt})})}function Lf(o,t,s){return void 0===s&&(s=qr()),(0,ne.mG)(this,void 0,void 0,function(){var l,p;return(0,ne.Jh)(this,function(v){switch(v.label){case 0:return[4,ou(o,Bo(Od(t.bundledQuery)))];case 1:return l=v.sent(),[2,(p=un(o)).persistence.runTransaction("Save named query","readwrite",function(S){var F=ji(t.readTime);if(l.snapshotVersion.compareTo(F)>=0)return p.Ke.saveNamedQuery(S,t);var Q=l.withResumeToken(ir.EMPTY_BYTE_STRING,F);return p.kn=p.kn.insert(Q.targetId,Q),p.qe.updateTargetData(S,Q).next(function(){return p.qe.removeMatchingKeysForTargetId(S,l.targetId)}).next(function(){return p.qe.addMatchingKeys(S,s,l.targetId)}).next(function(){return p.Ke.saveNamedQuery(S,t)})})]}})})}var sg=function(){function o(t){this.R=t,this.Qn=new Map,this.jn=new Map}return o.prototype.getBundleMetadata=function(t,s){return Wt.resolve(this.Qn.get(s))},o.prototype.saveBundleMetadata=function(t,s){var l;return this.Qn.set(s.id,{id:(l=s).id,version:l.version,createTime:ji(l.createTime)}),Wt.resolve()},o.prototype.getNamedQuery=function(t,s){return Wt.resolve(this.jn.get(s))},o.prototype.saveNamedQuery=function(t,s){return this.jn.set(s.name,{name:(l=s).name,query:Od(l.bundledQuery),readTime:ji(l.readTime)}),Wt.resolve();var l},o}(),ag=function(){function o(){this.Wn=new bo(ls.Gn),this.zn=new bo(ls.Hn)}return o.prototype.isEmpty=function(){return this.Wn.isEmpty()},o.prototype.addReference=function(t,s){var l=new ls(t,s);this.Wn=this.Wn.add(l),this.zn=this.zn.add(l)},o.prototype.Jn=function(t,s){var l=this;t.forEach(function(p){return l.addReference(p,s)})},o.prototype.removeReference=function(t,s){this.Yn(new ls(t,s))},o.prototype.Xn=function(t,s){var l=this;t.forEach(function(p){return l.removeReference(p,s)})},o.prototype.Zn=function(t){var s=this,l=new Zn(new Ie([])),p=new ls(l,t),v=new ls(l,t+1),S=[];return this.zn.forEachInRange([p,v],function(F){s.Yn(F),S.push(F.key)}),S},o.prototype.ts=function(){var t=this;this.Wn.forEach(function(s){return t.Yn(s)})},o.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},o.prototype.es=function(t){var s=new Zn(new Ie([])),l=new ls(s,t),p=new ls(s,t+1),v=qr();return this.zn.forEachInRange([l,p],function(S){v=v.add(S.key)}),v},o.prototype.containsKey=function(t){var s=new ls(t,0),l=this.Wn.firstAfterOrEqual(s);return null!==l&&t.isEqual(l.key)},o}(),ls=function(){function o(t,s){this.key=t,this.ns=s}return o.Gn=function(t,s){return Zn.comparator(t.key,s.key)||Pr(t.ns,s.ns)},o.Hn=function(t,s){return Pr(t.ns,s.ns)||Zn.comparator(t.key,s.key)},o}(),n_=function(){function o(t,s){this.Ut=t,this.referenceDelegate=s,this._n=[],this.ss=1,this.rs=new bo(ls.Gn)}return o.prototype.checkEmpty=function(t){return Wt.resolve(0===this._n.length)},o.prototype.addMutationBatch=function(t,s,l,p){var v=this.ss;this.ss++;var S=new Nu(v,s,l,p);this._n.push(S);for(var F=0,Q=p;F<Q.length;F++){var le=Q[F];this.rs=this.rs.add(new ls(le.key,v)),this.Ut.addToCollectionParentIndex(t,le.key.path.popLast())}return Wt.resolve(S)},o.prototype.lookupMutationBatch=function(t,s){return Wt.resolve(this.os(s))},o.prototype.getNextMutationBatchAfterBatchId=function(t,s){var p=this.cs(s+1),v=p<0?0:p;return Wt.resolve(this._n.length>v?this._n[v]:null)},o.prototype.getHighestUnacknowledgedBatchId=function(){return Wt.resolve(0===this._n.length?-1:this.ss-1)},o.prototype.getAllMutationBatches=function(t){return Wt.resolve(this._n.slice())},o.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,s){var l=this,p=new ls(s,0),v=new ls(s,Number.POSITIVE_INFINITY),S=[];return this.rs.forEachInRange([p,v],function(F){var Q=l.os(F.ns);S.push(Q)}),Wt.resolve(S)},o.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,s){var l=this,p=new bo(Pr);return s.forEach(function(v){var S=new ls(v,0),F=new ls(v,Number.POSITIVE_INFINITY);l.rs.forEachInRange([S,F],function(Q){p=p.add(Q.ns)})}),Wt.resolve(this.us(p))},o.prototype.getAllMutationBatchesAffectingQuery=function(t,s){var l=s.path,p=l.length+1,v=l;Zn.isDocumentKey(v)||(v=v.child(""));var S=new ls(new Zn(v),0),F=new bo(Pr);return this.rs.forEachWhile(function(Q){var le=Q.key.path;return!!l.isPrefixOf(le)&&(le.length===p&&(F=F.add(Q.ns)),!0)},S),Wt.resolve(this.us(F))},o.prototype.us=function(t){var s=this,l=[];return t.forEach(function(p){var v=s.os(p);null!==v&&l.push(v)}),l},o.prototype.removeMutationBatch=function(t,s){var l=this;Kn(0===this.hs(s.batchId,"removed")),this._n.shift();var p=this.rs;return Wt.forEach(s.mutations,function(v){var S=new ls(v.key,s.batchId);return p=p.delete(S),l.referenceDelegate.markPotentiallyOrphaned(t,v.key)}).next(function(){l.rs=p})},o.prototype.Gt=function(t){},o.prototype.containsKey=function(t,s){var l=new ls(s,0),p=this.rs.firstAfterOrEqual(l);return Wt.resolve(s.isEqual(p&&p.key))},o.prototype.performConsistencyCheck=function(t){return Wt.resolve()},o.prototype.hs=function(t,s){return this.cs(t)},o.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},o.prototype.os=function(t){var s=this.cs(t);return s<0||s>=this._n.length?null:this._n[s]},o}(),ug=function(){function o(t,s){this.Ut=t,this.ls=s,this.docs=new Qo(Zn.comparator),this.size=0}return o.prototype.addEntry=function(t,s,l){var p=s.key,v=this.docs.get(p),S=v?v.size:0,F=this.ls(s);return this.docs=this.docs.insert(p,{document:s.clone(),size:F,readTime:l}),this.size+=F-S,this.Ut.addToCollectionParentIndex(t,p.path.popLast())},o.prototype.removeEntry=function(t){var s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)},o.prototype.getEntry=function(t,s){var l=this.docs.get(s);return Wt.resolve(l?l.document.clone():Ar.newInvalidDocument(s))},o.prototype.getEntries=function(t,s){var l=this,p=Io();return s.forEach(function(v){var S=l.docs.get(v);p=p.insert(v,S?S.document.clone():Ar.newInvalidDocument(v))}),Wt.resolve(p)},o.prototype.getDocumentsMatchingQuery=function(t,s,l){for(var p=Io(),v=new Zn(s.path.child("")),S=this.docs.getIteratorFrom(v);S.hasNext();){var F=S.getNext(),le=F.value,fe=le.document,xe=le.readTime;if(!s.path.isPrefixOf(F.key.path))break;xe.compareTo(l)<=0||nl(s,fe)&&(p=p.insert(fe.key,fe.clone()))}return Wt.resolve(p)},o.prototype.fs=function(t,s){return Wt.forEach(this.docs,function(l){return s(l)})},o.prototype.newChangeBuffer=function(t){return new r_(this)},o.prototype.getSize=function(t){return Wt.resolve(this.size)},o}(),r_=function(o){function t(s){var l=this;return(l=o.call(this)||this).Ie=s,l}return(0,ne.ZT)(t,o),t.prototype.applyChanges=function(s){var l=this,p=[];return this.changes.forEach(function(v,S){S.document.isValidDocument()?p.push(l.Ie.addEntry(s,S.document,l.getReadTime(v))):l.Ie.removeEntry(v)}),Wt.waitFor(p)},t.prototype.getFromCache=function(s,l){return this.Ie.getEntry(s,l)},t.prototype.getAllFromCache=function(s,l){return this.Ie.getEntries(s,l)},t}(m),i_=function(){function o(t){this.persistence=t,this.ds=new E(function(s){return Ko(s)},yo),this.lastRemoteSnapshotVersion=R.min(),this.highestTargetId=0,this.ws=0,this._s=new ag,this.targetCount=0,this.ys=Bu.Jt()}return o.prototype.forEachTarget=function(t,s){return this.ds.forEach(function(l,p){return s(p)}),Wt.resolve()},o.prototype.getLastRemoteSnapshotVersion=function(t){return Wt.resolve(this.lastRemoteSnapshotVersion)},o.prototype.getHighestSequenceNumber=function(t){return Wt.resolve(this.ws)},o.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Wt.resolve(this.highestTargetId)},o.prototype.setTargetsMetadata=function(t,s,l){return l&&(this.lastRemoteSnapshotVersion=l),s>this.ws&&(this.ws=s),Wt.resolve()},o.prototype.te=function(t){this.ds.set(t.target,t);var s=t.targetId;s>this.highestTargetId&&(this.ys=new Bu(s),this.highestTargetId=s),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},o.prototype.addTargetData=function(t,s){return this.te(s),this.targetCount+=1,Wt.resolve()},o.prototype.updateTargetData=function(t,s){return this.te(s),Wt.resolve()},o.prototype.removeTargetData=function(t,s){return this.ds.delete(s.target),this._s.Zn(s.targetId),this.targetCount-=1,Wt.resolve()},o.prototype.removeTargets=function(t,s,l){var p=this,v=0,S=[];return this.ds.forEach(function(F,Q){Q.sequenceNumber<=s&&null===l.get(Q.targetId)&&(p.ds.delete(F),S.push(p.removeMatchingKeysForTargetId(t,Q.targetId)),v++)}),Wt.waitFor(S).next(function(){return v})},o.prototype.getTargetCount=function(t){return Wt.resolve(this.targetCount)},o.prototype.getTargetData=function(t,s){var l=this.ds.get(s)||null;return Wt.resolve(l)},o.prototype.addMatchingKeys=function(t,s,l){return this._s.Jn(s,l),Wt.resolve()},o.prototype.removeMatchingKeys=function(t,s,l){this._s.Xn(s,l);var p=this.persistence.referenceDelegate,v=[];return p&&s.forEach(function(S){v.push(p.markPotentiallyOrphaned(t,S))}),Wt.waitFor(v)},o.prototype.removeMatchingKeysForTargetId=function(t,s){return this._s.Zn(s),Wt.resolve()},o.prototype.getMatchingKeysForTargetId=function(t,s){var l=this._s.es(s);return Wt.resolve(l)},o.prototype.containsKey=function(t,s){return Wt.resolve(this._s.containsKey(s))},o}(),Hu=function(){function o(t,s){var l=this;this.gs={},this.Ne=new Ki(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new i_(this),this.Ut=new Hh,this.Ue=new ug(this.Ut,function(S){return l.referenceDelegate.ps(S)}),this.R=new Ns(s),this.Ke=new sg(this.R)}return o.prototype.start=function(){return Promise.resolve()},o.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(o.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),o.prototype.setDatabaseDeletedListener=function(){},o.prototype.setNetworkEnabled=function(){},o.prototype.getIndexManager=function(){return this.Ut},o.prototype.getMutationQueue=function(t){var s=this.gs[t.toKey()];return s||(s=new n_(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=s),s},o.prototype.getTargetCache=function(){return this.qe},o.prototype.getRemoteDocumentCache=function(){return this.Ue},o.prototype.getBundleCache=function(){return this.Ke},o.prototype.runTransaction=function(t,s,l){var p=this;nn("MemoryPersistence","Starting transaction:",t);var v=new o_(this.Ne.next());return this.referenceDelegate.Es(),l(v).next(function(S){return p.referenceDelegate.Ts(v).next(function(){return S})}).toPromise().then(function(S){return v.raiseOnCommittedEvent(),S})},o.prototype.Is=function(t,s){return Wt.or(Object.values(this.gs).map(function(l){return function(){return l.containsKey(t,s)}}))},o}(),o_=function(o){function t(s){var l=this;return(l=o.call(this)||this).currentSequenceNumber=s,l}return(0,ne.ZT)(t,o),t}(Td),lg=function(){function o(t){this.persistence=t,this.As=new ag,this.Rs=null}return o.bs=function(t){return new o(t)},Object.defineProperty(o.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw kn()},enumerable:!1,configurable:!0}),o.prototype.addReference=function(t,s,l){return this.As.addReference(l,s),this.vs.delete(l.toString()),Wt.resolve()},o.prototype.removeReference=function(t,s,l){return this.As.removeReference(l,s),this.vs.add(l.toString()),Wt.resolve()},o.prototype.markPotentiallyOrphaned=function(t,s){return this.vs.add(s.toString()),Wt.resolve()},o.prototype.removeTarget=function(t,s){var l=this;this.As.Zn(s.targetId).forEach(function(v){return l.vs.add(v.toString())});var p=this.persistence.getTargetCache();return p.getMatchingKeysForTargetId(t,s.targetId).next(function(v){v.forEach(function(S){return l.vs.add(S.toString())})}).next(function(){return p.removeTargetData(t,s)})},o.prototype.Es=function(){this.Rs=new Set},o.prototype.Ts=function(t){var s=this,l=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wt.forEach(this.vs,function(p){var v=Zn.fromPath(p);return s.Ps(t,v).next(function(S){S||l.removeEntry(v)})}).next(function(){return s.Rs=null,l.apply(t)})},o.prototype.updateLimboDocument=function(t,s){var l=this;return this.Ps(t,s).next(function(p){p?l.vs.delete(s.toString()):l.vs.add(s.toString())})},o.prototype.ps=function(t){return 0},o.prototype.Ps=function(t,s){var l=this;return Wt.or([function(){return Wt.resolve(l.As.containsKey(s))},function(){return l.persistence.getTargetCache().containsKey(t,s)},function(){return l.persistence.Is(t,s)}])},o}(),Ss=function(){function o(t){this.uid=t}return o.prototype.isAuthenticated=function(){return null!=this.uid},o.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},o.prototype.isEqual=function(t){return t.uid===this.uid},o}();function cg(o,t){return"firestore_clients_"+o+"_"+t}function dg(o,t,s){var l="firestore_mutations_"+o+"_"+s;return t.isAuthenticated()&&(l+="_"+t.uid),l}function Vf(o,t){return"firestore_targets_"+o+"_"+t}Ss.UNAUTHENTICATED=new Ss(null),Ss.GOOGLE_CREDENTIALS=new Ss("google-credentials-uid"),Ss.FIRST_PARTY=new Ss("first-party-uid"),Ss.MOCK_USER=new Ss("mock-user");var Uf=function(){function o(t,s,l,p){this.user=t,this.batchId=s,this.state=l,this.error=p}return o.Vs=function(t,s,l){var p,v=JSON.parse(l),S="object"==typeof v&&-1!==["pending","acknowledged","rejected"].indexOf(v.state)&&(void 0===v.error||"object"==typeof v.error);return S&&v.error&&(S="string"==typeof v.error.message&&"string"==typeof v.error.code)&&(p=new Vt(v.error.code,v.error.message)),S?new o(t,s,v.state,p):(Ri("SharedClientState","Failed to parse mutation state for ID '"+s+"': "+l),null)},o.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},o}(),Bf=function(){function o(t,s,l){this.targetId=t,this.state=s,this.error=l}return o.Vs=function(t,s){var l,p=JSON.parse(s),v="object"==typeof p&&-1!==["not-current","current","rejected"].indexOf(p.state)&&(void 0===p.error||"object"==typeof p.error);return v&&p.error&&(v="string"==typeof p.error.message&&"string"==typeof p.error.code)&&(l=new Vt(p.error.code,p.error.message)),v?new o(t,p.state,l):(Ri("SharedClientState","Failed to parse target state for ID '"+t+"': "+s),null)},o.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},o}(),hg=function(){function o(t,s){this.clientId=t,this.activeTargetIds=s}return o.Vs=function(t,s){for(var l=JSON.parse(s),p="object"==typeof l&&l.activeTargetIds instanceof Array,v=al(),S=0;p&&S<l.activeTargetIds.length;++S)p=pu(l.activeTargetIds[S]),v=v.add(l.activeTargetIds[S]);return p?new o(t,v):(Ri("SharedClientState","Failed to parse client data for instance '"+t+"': "+s),null)},o}(),s_=function(){function o(t,s){this.clientId=t,this.onlineState=s}return o.Vs=function(t){var s=JSON.parse(t);return"object"==typeof s&&-1!==["Unknown","Online","Offline"].indexOf(s.onlineState)&&"string"==typeof s.clientId?new o(s.clientId,s.onlineState):(Ri("SharedClientState","Failed to parse online state: "+t),null)},o}(),yr=function(){function o(){this.activeTargetIds=al()}return o.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},o.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},o.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},o}(),zh=function(){function o(t,s,l,p,v){this.window=t,this.Se=s,this.persistenceKey=l,this.Ns=p,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Qo(Pr),this.started=!1,this.$s=[];var S=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=v,this.Os=cg(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new yr),this.Ls=new RegExp("^firestore_clients_"+S+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+S+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+S+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(F){return"firestore_bundle_loaded_"+F}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return o.yt=function(t){return!(!t||!t.localStorage)},o.prototype.start=function(){return(0,ne.mG)(this,void 0,void 0,function(){var t,s,l,p,v,S,F,Q,le,fe,Ge=this;return(0,ne.Jh)(this,function(ht){switch(ht.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=ht.sent(),s=0,l=t;s<l.length;s++)(p=l[s])!==this.Ns&&(v=this.getItem(cg(this.persistenceKey,p)))&&(S=hg.Vs(p,v))&&(this.Fs=this.Fs.insert(S.clientId,S));for(this.Qs(),(F=this.storage.getItem(this.Us))&&(Q=this.js(F))&&this.Ws(Q),le=0,fe=this.$s;le<fe.length;le++)this.ks(fe[le]);return this.$s=[],this.window.addEventListener("pagehide",function(){return Ge.shutdown()}),this.started=!0,[2]}})})},o.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},o.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},o.prototype.isActiveQueryTarget=function(t){var s=!1;return this.Fs.forEach(function(l,p){p.activeTargetIds.has(t)&&(s=!0)}),s},o.prototype.addPendingMutation=function(t){this.zs(t,"pending")},o.prototype.updateMutationState=function(t,s,l){this.zs(t,s,l),this.Hs(t)},o.prototype.addLocalQueryTarget=function(t){var s="not-current";if(this.isActiveQueryTarget(t)){var l=this.storage.getItem(Vf(this.persistenceKey,t));if(l){var p=Bf.Vs(t,l);p&&(s=p.state)}}return this.Js.Ds(t),this.Qs(),s},o.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},o.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},o.prototype.clearQueryState=function(t){this.removeItem(Vf(this.persistenceKey,t))},o.prototype.updateQueryState=function(t,s,l){this.Ys(t,s,l)},o.prototype.handleUserChange=function(t,s,l){var p=this;s.forEach(function(v){p.Hs(v)}),this.currentUser=t,l.forEach(function(v){p.addPendingMutation(v)})},o.prototype.setOnlineState=function(t){this.Xs(t)},o.prototype.notifyBundleLoaded=function(){this.Zs()},o.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},o.prototype.getItem=function(t){var s=this.storage.getItem(t);return nn("SharedClientState","READ",t,s),s},o.prototype.setItem=function(t,s){nn("SharedClientState","SET",t,s),this.storage.setItem(t,s)},o.prototype.removeItem=function(t){nn("SharedClientState","REMOVE",t),this.storage.removeItem(t)},o.prototype.ks=function(t){var s=this,l=t;if(l.storageArea===this.storage){if(nn("SharedClientState","EVENT",l.key,l.newValue),l.key===this.Os)return void Ri("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,ne.mG)(s,void 0,void 0,function(){var p,v,S,F,Q,le;return(0,ne.Jh)(this,function(fe){if(this.started){if(null!==l.key)if(this.Ls.test(l.key)){if(null==l.newValue)return p=this.ti(l.key),[2,this.ei(p,null)];if(v=this.ni(l.key,l.newValue))return[2,this.ei(v.clientId,v)]}else if(this.Bs.test(l.key)){if(null!==l.newValue&&(S=this.si(l.key,l.newValue)))return[2,this.ii(S)]}else if(this.qs.test(l.key)){if(null!==l.newValue&&(F=this.ri(l.key,l.newValue)))return[2,this.oi(F)]}else if(l.key===this.Us){if(null!==l.newValue&&(Q=this.js(l.newValue)))return[2,this.Ws(Q)]}else if(l.key===this.Ms)(le=function(xe){var Ge=Ki.o;if(null!=xe)try{var ht=JSON.parse(xe);Kn("number"==typeof ht),Ge=ht}catch(lt){Ri("SharedClientState","Failed to read sequence number from WebStorage",lt)}return Ge}(l.newValue))!==Ki.o&&this.sequenceNumberHandler(le);else if(l.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(l);return[2]})})})}},Object.defineProperty(o.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),o.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},o.prototype.zs=function(t,s,l){var p=new Uf(this.currentUser,t,s,l),v=dg(this.persistenceKey,this.currentUser,t);this.setItem(v,p.Ss())},o.prototype.Hs=function(t){var s=dg(this.persistenceKey,this.currentUser,t);this.removeItem(s)},o.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},o.prototype.Ys=function(t,s,l){var p=Vf(this.persistenceKey,t),v=new Bf(t,s,l);this.setItem(p,v.Ss())},o.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},o.prototype.ti=function(t){var s=this.Ls.exec(t);return s?s[1]:null},o.prototype.ni=function(t,s){var l=this.ti(t);return hg.Vs(l,s)},o.prototype.si=function(t,s){var l=this.Bs.exec(t),p=Number(l[1]);return Uf.Vs(new Ss(void 0!==l[2]?l[2]:null),p,s)},o.prototype.ri=function(t,s){var l=this.qs.exec(t),p=Number(l[1]);return Bf.Vs(p,s)},o.prototype.js=function(t){return s_.Vs(t)},o.prototype.ii=function(t){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(s){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(nn("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},o.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},o.prototype.ei=function(t,s){var l=this,p=s?this.Fs.insert(t,s):this.Fs.remove(t),v=this.Gs(this.Fs),S=this.Gs(p),F=[],Q=[];return S.forEach(function(le){v.has(le)||F.push(le)}),v.forEach(function(le){S.has(le)||Q.push(le)}),this.syncEngine.hi(F,Q).then(function(){l.Fs=p})},o.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},o.prototype.Gs=function(t){var s=al();return t.forEach(function(l,p){s=s.unionWith(p.activeTargetIds)}),s},o}(),jf=function(){function o(){this.li=new yr,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return o.prototype.addPendingMutation=function(t){},o.prototype.updateMutationState=function(t,s,l){},o.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},o.prototype.updateQueryState=function(t,s,l){this.fi[t]=s},o.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},o.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},o.prototype.clearQueryState=function(t){delete this.fi[t]},o.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},o.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},o.prototype.start=function(){return this.li=new yr,Promise.resolve()},o.prototype.handleUserChange=function(t,s,l){},o.prototype.setOnlineState=function(t){},o.prototype.shutdown=function(){},o.prototype.writeSequenceNumber=function(t){},o.prototype.notifyBundleLoaded=function(){},o}(),qh=function(){function o(){}return o.prototype.di=function(t){},o.prototype.shutdown=function(){},o}(),au=function(){function o(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return o.prototype.di=function(t){this.gi.push(t)},o.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},o.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},o.prototype._i=function(){nn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,s=this.gi;t<s.length;t++)(0,s[t])(0)},o.prototype.yi=function(){nn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,s=this.gi;t<s.length;t++)(0,s[t])(1)},o.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},o}(),fg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},a_=function(){function o(t){this.Ei=t.Ei,this.Ti=t.Ti}return o.prototype.Ii=function(t){this.Ai=t},o.prototype.Ri=function(t){this.bi=t},o.prototype.onMessage=function(t){this.vi=t},o.prototype.close=function(){this.Ti()},o.prototype.send=function(t){this.Ei(t)},o.prototype.Pi=function(){this.Ai()},o.prototype.Vi=function(t){this.bi(t)},o.prototype.Si=function(t){this.vi(t)},o}(),Hf=function(o){function t(s){var l=this;return(l=o.call(this,s)||this).forceLongPolling=s.forceLongPolling,l.autoDetectLongPolling=s.autoDetectLongPolling,l.useFetchStreams=s.useFetchStreams,l}return(0,ne.ZT)(t,o),t.prototype.Fi=function(s,l,p,v){return new Promise(function(S,F){var Q=new ja;Q.listenOnce(Yu.COMPLETE,function(){try{switch(Q.getLastErrorCode()){case Da.NO_ERROR:var fe=Q.getResponseJson();nn("Connection","XHR received:",JSON.stringify(fe)),S(fe);break;case Da.TIMEOUT:nn("Connection",'RPC "'+s+'" timed out'),F(new Vt(_t.DEADLINE_EXCEEDED,"Request time out"));break;case Da.HTTP_ERROR:var xe=Q.getStatus();if(nn("Connection",'RPC "'+s+'" failed with status:',xe,"response text:",Q.getResponseText()),xe>0){var Ge=Q.getResponseJson().error;if(Ge&&Ge.status&&Ge.message){var ht=(wt=Ge.status.toLowerCase().replace(/_/g,"-"),Object.values(_t).indexOf(wt)>=0?wt:_t.UNKNOWN);F(new Vt(ht,Ge.message))}else F(new Vt(_t.UNKNOWN,"Server responded with status "+Q.getStatus()))}else F(new Vt(_t.UNAVAILABLE,"Connection failed."));break;default:kn()}}finally{nn("Connection",'RPC "'+s+'" completed.')}var wt});var le=JSON.stringify(v);Q.send(l,"POST",le,p,15)})},t.prototype.Oi=function(s,l){var p=[this.Di,"/","google.firestore.v1.Firestore","/",s,"/channel"],v=new ba,S=Zi(),F={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(F.xmlHttpFactory=new Ml({})),this.ki(F.initMessageHeaders,l),(0,Ke.uI)()||(0,Ke.b$)()||(0,Ke.d)()||(0,Ke.w1)()||(0,Ke.Mn)()||(0,Ke.ru)()||(F.httpHeadersOverwriteParam="$httpHeaders");var Q=p.join("");nn("Connection","Creating WebChannel: "+Q,F);var le=v.createWebChannel(Q,F),fe=!1,xe=!1,Ge=new a_({Ei:function(lt){xe?nn("Connection","Not sending because WebChannel is closed:",lt):(fe||(nn("Connection","Opening WebChannel transport."),le.open(),fe=!0),nn("Connection","WebChannel sending:",lt),le.send(lt))},Ti:function(){return le.close()}}),ht=function(lt,wt,en){lt.listen(wt,function(pn){try{en(pn)}catch(tr){setTimeout(function(){throw tr},0)}})};return ht(le,ra.EventType.OPEN,function(){xe||nn("Connection","WebChannel transport opened.")}),ht(le,ra.EventType.CLOSE,function(){xe||(xe=!0,nn("Connection","WebChannel transport closed"),Ge.Vi())}),ht(le,ra.EventType.ERROR,function(lt){xe||(xe=!0,Cs("Connection","WebChannel transport errored:",lt),Ge.Vi(new Vt(_t.UNAVAILABLE,"The operation could not be completed")))}),ht(le,ra.EventType.MESSAGE,function(lt){var wt;if(!xe){var en=lt.data[0];Kn(!!en);var tr=en.error||(null===(wt=en[0])||void 0===wt?void 0:wt.error);if(tr){nn("Connection","WebChannel received error:",tr);var nr=tr.status,Yr=function(ki){var As=vo[ki];if(void 0!==As)return Zc(As)}(nr),di=tr.message;void 0===Yr&&(Yr=_t.INTERNAL,di="Unknown error status: "+nr+" with message "+tr.message),xe=!0,Ge.Vi(new Vt(Yr,di)),le.close()}else nn("Connection","WebChannel received:",en),Ge.Si(en)}}),ht(S,hu.STAT_EVENT,function(lt){lt.stat===js_PROXY?nn("Connection","Detected buffering proxy"):lt.stat===js_NOPROXY&&nn("Connection","Detected no buffering proxy")}),setTimeout(function(){Ge.Pi()},0),Ge},t}(function(){function o(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return o.prototype.Ni=function(t,s,l,p){var v=this.xi(t,s);nn("RestConnection","Sending: ",v,l);var S={};return this.ki(S,p),this.Fi(t,v,S,l).then(function(F){return nn("RestConnection","Received: ",F),F},function(F){throw Cs("RestConnection",t+" failed with error: ",F,"url: ",v,"request:",l),F})},o.prototype.$i=function(t,s,l,p){return this.Ni(t,s,l,p)},o.prototype.ki=function(t,s){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s)for(var l in s.authHeaders)s.authHeaders.hasOwnProperty(l)&&(t[l]=s.authHeaders[l])},o.prototype.xi=function(t,s){return this.Di+"/v1/"+s+":"+fg[t]},o}());function yl(){return"undefined"!=typeof window?window:null}function kd(){return"undefined"!=typeof document?document:null}function Ld(o){return new kl(o,!0)}var vh=function(){function o(t,s,l,p,v){void 0===l&&(l=1e3),void 0===p&&(p=1.5),void 0===v&&(v=6e4),this.Se=t,this.timerId=s,this.Mi=l,this.Li=p,this.Bi=v,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return o.prototype.reset=function(){this.qi=0},o.prototype.Qi=function(){this.qi=this.Bi},o.prototype.ji=function(t){var s=this;this.cancel();var l=Math.floor(this.qi+this.Wi()),p=Math.max(0,Date.now()-this.Ki),v=Math.max(0,l-p);v>0&&nn("ExponentialBackoff","Backing off for "+v+" ms (base delay: "+this.qi+" ms, delay with jitter: "+l+" ms, last attempt: "+p+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,v,function(){return s.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},o.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},o.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},o.prototype.Wi=function(){return(Math.random()-.5)*this.qi},o}(),u_=function(){function o(t,s,l,p,v,S){this.Se=t,this.zi=l,this.Hi=p,this.Ji=v,this.listener=S,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new vh(t,s)}return o.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},o.prototype.er=function(){return 2===this.state},o.prototype.start=function(){3!==this.state?this.auth():this.nr()},o.prototype.stop=function(){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},o.prototype.sr=function(){this.state=0,this.Zi.reset()},o.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},o.prototype.cr=function(t){this.ur(),this.stream.send(t)},o.prototype.rr=function(){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},o.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},o.prototype.close=function(t,s){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(l){switch(l.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():s&&s.code===_t.RESOURCE_EXHAUSTED?(Ri(s.toString()),Ri("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):s&&s.code===_t.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(s)];case 1:return l.sent(),[2]}})})},o.prototype.ar=function(){},o.prototype.auth=function(){var t=this;this.state=1;var s=this.hr(this.Yi),l=this.Yi;this.Ji.getToken().then(function(p){t.Yi===l&&t.lr(p)},function(p){s(function(){var v=new Vt(_t.UNKNOWN,"Fetching auth token failed: "+p.message);return t.dr(v)})})},o.prototype.lr=function(t){var s=this,l=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){l(function(){return s.state=2,s.listener.Ii()})}),this.stream.Ri(function(p){l(function(){return s.dr(p)})}),this.stream.onMessage(function(p){l(function(){return s.onMessage(p)})})},o.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,ne.mG)(t,void 0,void 0,function(){return(0,ne.Jh)(this,function(s){return this.state=0,this.start(),[2]})})})},o.prototype.dr=function(t){return nn("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},o.prototype.hr=function(t){var s=this;return function(l){s.Se.enqueueAndForget(function(){return s.Yi===t?l():(nn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},o}(),pg=function(o){function t(s,l,p,v,S){var F=this;return(F=o.call(this,s,"listen_stream_connection_backoff","listen_stream_idle",l,p,S)||this).R=v,F}return(0,ne.ZT)(t,o),t.prototype.wr=function(s){return this.Hi.Oi("Listen",s)},t.prototype.onMessage=function(s){this.Zi.reset();var l=function(v,S){var F,en;if("targetChange"in S){var Q="NO_CHANGE"===(en=S.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===en?1:"REMOVE"===en?2:"CURRENT"===en?3:"RESET"===en?4:kn(),le=S.targetChange.targetIds||[],fe=function(en,pn){return en.I?(Kn(void 0===pn||"string"==typeof pn),ir.fromBase64String(pn||"")):(Kn(void 0===pn||pn instanceof Uint8Array),ir.fromUint8Array(pn||new Uint8Array))}(v,S.targetChange.resumeToken),xe=(Ge=S.targetChange.cause)&&function(en){var pn=void 0===en.code?_t.UNKNOWN:Zc(en.code);return new Vt(pn,en.message||"")}(Ge);F=new lh(Q,le,fe,xe||null)}else if("documentChange"in S){le=Fa(v,(Q=S.documentChange).document.name),fe=ji(Q.document.updateTime);var Ge=new ci({mapValue:{fields:Q.document.fields}}),ht=(xe=Ar.newFoundDocument(le,fe,Ge),Q.targetIds||[]);F=new dc(ht,Q.removedTargetIds||[],xe.key,xe)}else if("documentDelete"in S)le=Fa(v,(Q=S.documentDelete).document),fe=Q.readTime?ji(Q.readTime):R.min(),Ge=Ar.newNoDocument(le,fe),F=new dc([],xe=Q.removedTargetIds||[],Ge.key,Ge);else if("documentRemove"in S)le=Fa(v,(Q=S.documentRemove).document),F=new dc([],fe=Q.removedTargetIds||[],le,null);else{if(!("filter"in S))return kn();var wt=S.filter;le=new jo(Q=wt.count||0),F=new uh(fe=wt.targetId,le)}return F}(this.R,s),p=function(v){if(!("targetChange"in v))return R.min();var S=v.targetChange;return S.targetIds&&S.targetIds.length?R.min():S.readTime?ji(S.readTime):R.min()}(s);return this.listener._r(l,p)},t.prototype.mr=function(s){var v,S,F,Q,l={};l.database=la(this.R),l.addTarget=(v=this.R,(F=qs(Q=(S=s).target)?{documents:fc(v,Q)}:{query:pc(v,Q)}).targetId=S.targetId,S.resumeToken.approximateByteSize()>0?F.resumeToken=Cd(v,S.resumeToken):S.snapshotVersion.compareTo(R.min())>0&&(F.readTime=Jo(v,S.snapshotVersion.toTimestamp())),F);var p=function(v,S){var F=function(Q,le){switch(le){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return kn()}}(0,S.purpose);return null==F?null:{"goog-listen-tags":F}}(0,s);p&&(l.labels=p),this.cr(l)},t.prototype.yr=function(s){var l={};l.database=la(this.R),l.removeTarget=s,this.cr(l)},t}(u_),fv=function(o){function t(s,l,p,v,S){var F=this;return(F=o.call(this,s,"write_stream_connection_backoff","write_stream_idle",l,p,S)||this).R=v,F.gr=!1,F}return(0,ne.ZT)(t,o),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,o.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(s){return this.Hi.Oi("Write",s)},t.prototype.onMessage=function(s){if(Kn(!!s.streamToken),this.lastStreamToken=s.streamToken,this.gr){this.Zi.reset();var l=(S=s.commitTime,(v=s.writeResults)&&v.length>0?(Kn(void 0!==S),v.map(function(F){return le=S,(fe=ji((Q=F).updateTime?Q.updateTime:le)).isEqual(R.min())&&(fe=ji(le)),new Gc(fe,Q.transformResults||[]);var Q,le,fe})):[]),p=ji(s.commitTime);return this.listener.Tr(p,l)}var v,S;return Kn(!s.writeResults||0===s.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var s={};s.database=la(this.R),this.cr(s)},t.prototype.Er=function(s){var l=this,p={streamToken:this.lastStreamToken,writes:s.map(function(v){return Yc(l.R,v)})};this.cr(p)},t}(u_),Gl=function(o){function t(s,l,p){var v=this;return(v=o.call(this)||this).credentials=s,v.Hi=l,v.R=p,v.Rr=!1,v}return(0,ne.ZT)(t,o),t.prototype.br=function(){if(this.Rr)throw new Vt(_t.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(s,l,p){var v=this;return this.br(),this.credentials.getToken().then(function(S){return v.Hi.Ni(s,l,p,S)}).catch(function(S){throw"FirebaseError"===S.name?(S.code===_t.UNAUTHENTICATED&&v.credentials.invalidateToken(),S):new Vt(_t.UNKNOWN,S.toString())})},t.prototype.$i=function(s,l,p){var v=this;return this.br(),this.credentials.getToken().then(function(S){return v.Hi.$i(s,l,p,S)}).catch(function(S){throw"FirebaseError"===S.name?(S.code===_t.UNAUTHENTICATED&&v.credentials.invalidateToken(),S):new Vt(_t.UNKNOWN,S.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),Zh=function(){function o(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return o.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},o.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},o.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},o.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},o.prototype.Cr=function(t){var s="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Ri(s),this.Vr=!1):nn("OnlineStateTracker",s)},o.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},o}(),$h=function(o,t,s,l,p){var v=this;this.localStore=o,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=p,this.Lr.di(function(S){s.enqueueAndForget(function(){return(0,ne.mG)(v,void 0,void 0,function(){return(0,ne.Jh)(this,function(F){switch(F.label){case 0:return zl(this)?(nn("RemoteStore","Restarting streams for network reachability change."),[4,function(Q){return(0,ne.mG)(this,void 0,void 0,function(){var le;return(0,ne.Jh)(this,function(fe){switch(fe.label){case 0:return(le=un(Q)).Or.add(4),[4,bh(le)];case 1:return fe.sent(),le.Br.set("Unknown"),le.Or.delete(4),[4,ed(le)];case 2:return fe.sent(),[2]}})})}(this)]):[3,2];case 1:F.sent(),F.label=2;case 2:return[2]}})})})}),this.Br=new Zh(s,l)};function ed(o){return(0,ne.mG)(this,void 0,void 0,function(){var t,s;return(0,ne.Jh)(this,function(l){switch(l.label){case 0:if(!zl(o))return[3,4];t=0,s=o.Mr,l.label=1;case 1:return t<s.length?[4,(0,s[t])(!0)]:[3,4];case 2:l.sent(),l.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function bh(o){return(0,ne.mG)(this,void 0,void 0,function(){var t,s;return(0,ne.Jh)(this,function(l){switch(l.label){case 0:t=0,s=o.Mr,l.label=1;case 1:return t<s.length?[4,(0,s[t])(!1)]:[3,4];case 2:l.sent(),l.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Wh(o,t){var s=un(o);s.$r.has(t.targetId)||(s.$r.set(t.targetId,t),Yh(s)?_g(s):Dc(s).er()&&gg(s,t))}function Vd(o,t){var s=un(o),l=Dc(s);s.$r.delete(t),l.er()&&mg(s,t),0===s.$r.size&&(l.er()?l.ir():zl(s)&&s.Br.set("Unknown"))}function gg(o,t){o.qr.U(t.targetId),Dc(o).mr(t)}function mg(o,t){o.qr.U(t),Dc(o).yr(t)}function _g(o){o.qr=new Nl({getRemoteKeysForTarget:function(t){return o.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return o.$r.get(t)||null}}),Dc(o).start(),o.Br.Sr()}function Yh(o){return zl(o)&&!Dc(o).tr()&&o.$r.size>0}function zl(o){return 0===un(o).Or.size}function yg(o){o.qr=void 0}function Gf(o){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(t){return o.$r.forEach(function(s,l){gg(o,s)}),[2]})})}function pv(o,t){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(s){return yg(o),Yh(o)?(o.Br.Nr(t),_g(o)):o.Br.set("Unknown"),[2]})})}function gv(o,t,s){return(0,ne.mG)(this,void 0,void 0,function(){var l,p,v;return(0,ne.Jh)(this,function(S){switch(S.label){case 0:if(o.Br.set("Online"),!(t instanceof lh&&2===t.state&&t.cause))return[3,6];S.label=1;case 1:return S.trys.push([1,3,,5]),[4,function(F,Q){return(0,ne.mG)(this,void 0,void 0,function(){var le,fe,xe,Ge;return(0,ne.Jh)(this,function(ht){switch(ht.label){case 0:le=Q.cause,fe=0,xe=Q.targetIds,ht.label=1;case 1:return fe<xe.length?F.$r.has(Ge=xe[fe])?[4,F.remoteSyncer.rejectListen(Ge,le)]:[3,3]:[3,5];case 2:ht.sent(),F.$r.delete(Ge),F.qr.removeTarget(Ge),ht.label=3;case 3:ht.label=4;case 4:return fe++,[3,1];case 5:return[2]}})})}(o,t)];case 2:return S.sent(),[3,5];case 3:return l=S.sent(),nn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),l),[4,zf(o,l)];case 4:return S.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof dc?o.qr.X(t):t instanceof uh?o.qr.rt(t):o.qr.et(t),s.isEqual(R.min()))return[3,13];S.label=7;case 7:return S.trys.push([7,11,,13]),[4,so(o.localStore)];case 8:return p=S.sent(),s.compareTo(p)>=0?[4,(F=o,Q=s,le=F.qr.ut(Q),le.targetChanges.forEach(function(fe,xe){if(fe.resumeToken.approximateByteSize()>0){var Ge=F.$r.get(xe);Ge&&F.$r.set(xe,Ge.withResumeToken(fe.resumeToken,Q))}}),le.targetMismatches.forEach(function(fe){var xe=F.$r.get(fe);if(xe){F.$r.set(fe,xe.withResumeToken(ir.EMPTY_BYTE_STRING,xe.snapshotVersion)),mg(F,fe);var Ge=new Cc(xe.target,fe,1,xe.sequenceNumber);gg(F,Ge)}}),F.remoteSyncer.applyRemoteEvent(le))]:[3,10];case 9:S.sent(),S.label=10;case 10:return[3,13];case 11:return nn("RemoteStore","Failed to raise snapshot:",v=S.sent()),[4,zf(o,v)];case 12:return S.sent(),[3,13];case 13:return[2]}var F,Q,le})})}function zf(o,t,s){return(0,ne.mG)(this,void 0,void 0,function(){var l=this;return(0,ne.Jh)(this,function(p){switch(p.label){case 0:if(!hl(t))throw t;return o.Or.add(1),[4,bh(o)];case 1:return p.sent(),o.Br.set("Offline"),s||(s=function(){return so(o.localStore)}),o.asyncQueue.enqueueRetryable(function(){return(0,ne.mG)(l,void 0,void 0,function(){return(0,ne.Jh)(this,function(v){switch(v.label){case 0:return nn("RemoteStore","Retrying IndexedDB access"),[4,s()];case 1:return v.sent(),o.Or.delete(1),[4,ed(o)];case 2:return v.sent(),[2]}})})}),[2]}})})}function l_(o,t){return t().catch(function(s){return zf(o,s,t)})}function Ch(o){return(0,ne.mG)(this,void 0,void 0,function(){var t,s,l,p,v;return(0,ne.Jh)(this,function(S){switch(S.label){case 0:t=un(o),s=Tc(t),l=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,S.label=1;case 1:if(!(zl(F=t)&&F.Fr.length<10))return[3,7];S.label=2;case 2:return S.trys.push([2,4,,6]),[4,Nd(t.localStore,l)];case 3:return null===(p=S.sent())?(0===t.Fr.length&&s.ir(),[3,7]):(l=p.batchId,function(F,Q){F.Fr.push(Q);var le=Tc(F);le.er()&&le.pr&&le.Er(Q.mutations)}(t,p),[3,6]);case 4:return v=S.sent(),[4,zf(t,v)];case 5:return S.sent(),[3,6];case 6:return[3,1];case 7:return c_(t)&&d_(t),[2]}var F})})}function c_(o){return zl(o)&&!Tc(o).tr()&&o.Fr.length>0}function d_(o){Tc(o).start()}function mv(o){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(t){return Tc(o).Ar(),[2]})})}function _v(o){return(0,ne.mG)(this,void 0,void 0,function(){var t,s,l;return(0,ne.Jh)(this,function(v){for(t=Tc(o),s=0,l=o.Fr;s<l.length;s++)t.Er(l[s].mutations);return[2]})})}function yv(o,t,s){return(0,ne.mG)(this,void 0,void 0,function(){var l,p;return(0,ne.Jh)(this,function(v){switch(v.label){case 0:return l=o.Fr.shift(),p=pl.from(l,t,s),[4,l_(o,function(){return o.remoteSyncer.applySuccessfulWrite(p)})];case 1:return v.sent(),[4,Ch(o)];case 2:return v.sent(),[2]}})})}function vv(o,t){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(s){switch(s.label){case 0:return t&&Tc(o).pr?[4,function(l,p){return(0,ne.mG)(this,void 0,void 0,function(){var v,S;return(0,ne.Jh)(this,function(F){switch(F.label){case 0:return qc(S=p.code)&&S!==_t.ABORTED?(v=l.Fr.shift(),Tc(l).sr(),[4,l_(l,function(){return l.remoteSyncer.rejectFailedWrite(v.batchId,p)})]):[3,3];case 1:return F.sent(),[4,Ch(l)];case 2:F.sent(),F.label=3;case 3:return[2]}})})}(o,t)]:[3,2];case 1:s.sent(),s.label=2;case 2:return c_(o)&&d_(o),[2]}})})}function vl(o,t){return(0,ne.mG)(this,void 0,void 0,function(){var s;return(0,ne.Jh)(this,function(l){switch(l.label){case 0:return s=un(o),t?(s.Or.delete(2),[4,ed(s)]):[3,2];case 1:return l.sent(),[3,5];case 2:return t?[3,4]:(s.Or.add(2),[4,bh(s)]);case 3:l.sent(),s.Br.set("Unknown"),l.label=4;case 4:l.label=5;case 5:return[2]}})})}function Dc(o){var s,l,p,v,t=this;return o.Ur||(o.Ur=(s=o.datastore,l=o.asyncQueue,p={Ii:Gf.bind(null,o),Ri:pv.bind(null,o),_r:gv.bind(null,o)},(v=un(s)).br(),new pg(l,v.Hi,v.credentials,v.R,p)),o.Mr.push(function(s){return(0,ne.mG)(t,void 0,void 0,function(){return(0,ne.Jh)(this,function(l){switch(l.label){case 0:return s?(o.Ur.sr(),Yh(o)?_g(o):o.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,o.Ur.stop()];case 2:l.sent(),yg(o),l.label=3;case 3:return[2]}})})})),o.Ur}function Tc(o){var s,l,p,v,t=this;return o.Kr||(o.Kr=(s=o.datastore,l=o.asyncQueue,p={Ii:mv.bind(null,o),Ri:vv.bind(null,o),Ir:_v.bind(null,o),Tr:yv.bind(null,o)},(v=un(s)).br(),new fv(l,v.Hi,v.credentials,v.R,p)),o.Mr.push(function(s){return(0,ne.mG)(t,void 0,void 0,function(){return(0,ne.Jh)(this,function(l){switch(l.label){case 0:return s?(o.Kr.sr(),[4,Ch(o)]):[3,2];case 1:return l.sent(),[3,4];case 2:return[4,o.Kr.stop()];case 3:l.sent(),o.Fr.length>0&&(nn("RemoteStore","Stopping write stream with "+o.Fr.length+" pending writes"),o.Fr=[]),l.label=4;case 4:return[2]}})})})),o.Kr}var vg=function(){function o(t,s,l,p,v){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=l,this.op=p,this.removalCallback=v,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(S){})}return o.createAndSchedule=function(t,s,l,p,v){var S=new o(t,s,Date.now()+l,p,v);return S.start(l),S},o.prototype.start=function(t){var s=this;this.timerHandle=setTimeout(function(){return s.handleDelayElapsed()},t)},o.prototype.skipDelay=function(){return this.handleDelayElapsed()},o.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Vt(_t.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},o.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(s){return t.deferred.resolve(s)})):Promise.resolve()})},o.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},o}();function Sc(o,t){if(Ri("AsyncQueue",t+": "+o),hl(o))return new Vt(_t.UNAVAILABLE,t+": "+o);throw o}var qf=function(){function o(t){this.comparator=t?function(s,l){return t(s,l)||Zn.comparator(s.key,l.key)}:function(s,l){return Zn.comparator(s.key,l.key)},this.keyedMap=lc(),this.sortedSet=new Qo(this.comparator)}return o.emptySet=function(t){return new o(t.comparator)},o.prototype.has=function(t){return null!=this.keyedMap.get(t)},o.prototype.get=function(t){return this.keyedMap.get(t)},o.prototype.first=function(){return this.sortedSet.minKey()},o.prototype.last=function(){return this.sortedSet.maxKey()},o.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},o.prototype.indexOf=function(t){var s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1},Object.defineProperty(o.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),o.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(s,l){return t(s),!1})},o.prototype.add=function(t){var s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))},o.prototype.delete=function(t){var s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this},o.prototype.isEqual=function(t){if(!(t instanceof o)||this.size!==t.size)return!1;for(var s=this.sortedSet.getIterator(),l=t.sortedSet.getIterator();s.hasNext();){var p=s.getNext().key,v=l.getNext().key;if(!p.isEqual(v))return!1}return!0},o.prototype.toString=function(){var t=[];return this.forEach(function(s){t.push(s.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},o.prototype.copy=function(t,s){var l=new o;return l.comparator=this.comparator,l.keyedMap=t,l.sortedSet=s,l},o}(),Kh=function(){function o(){this.Qr=new Qo(Zn.comparator)}return o.prototype.track=function(t){var s=t.doc.key,l=this.Qr.get(s);l?0!==t.type&&3===l.type?this.Qr=this.Qr.insert(s,t):3===t.type&&1!==l.type?this.Qr=this.Qr.insert(s,{type:l.type,doc:t.doc}):2===t.type&&2===l.type?this.Qr=this.Qr.insert(s,{type:2,doc:t.doc}):2===t.type&&0===l.type?this.Qr=this.Qr.insert(s,{type:0,doc:t.doc}):1===t.type&&0===l.type?this.Qr=this.Qr.remove(s):1===t.type&&2===l.type?this.Qr=this.Qr.insert(s,{type:1,doc:l.doc}):0===t.type&&1===l.type?this.Qr=this.Qr.insert(s,{type:2,doc:t.doc}):kn():this.Qr=this.Qr.insert(s,t)},o.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(s,l){t.push(l)}),t},o}(),Qh=function(){function o(t,s,l,p,v,S,F,Q){this.query=t,this.docs=s,this.oldDocs=l,this.docChanges=p,this.mutatedKeys=v,this.fromCache=S,this.syncStateChanged=F,this.excludesMetadataChanges=Q}return o.fromInitialDocuments=function(t,s,l,p){var v=[];return s.forEach(function(S){v.push({type:0,doc:S})}),new o(t,s,qf.emptySet(s),v,l,p,!0,!1)},Object.defineProperty(o.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Rl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var s=this.docChanges,l=t.docChanges;if(s.length!==l.length)return!1;for(var p=0;p<s.length;p++)if(s[p].type!==l[p].type||!s[p].doc.isEqual(l[p].doc))return!1;return!0},o}(),Ac=function(){this.Wr=void 0,this.listeners=[]},bg=function(){this.queries=new E(function(o){return Hc(o)},Rl),this.onlineState="Unknown",this.Gr=new Set};function Zf(o,t){return(0,ne.mG)(this,void 0,void 0,function(){var s,l,p,v,S,F,Q;return(0,ne.Jh)(this,function(le){switch(le.label){case 0:if(s=un(o),p=!1,(v=s.queries.get(l=t.query))||(p=!0,v=new Ac),!p)return[3,4];le.label=1;case 1:return le.trys.push([1,3,,4]),S=v,[4,s.onListen(l)];case 2:return S.Wr=le.sent(),[3,4];case 3:return F=le.sent(),Q=Sc(F,"Initialization of query '"+ac(t.query)+"' failed"),[2,void t.onError(Q)];case 4:return s.queries.set(l,v),v.listeners.push(t),t.zr(s.onlineState),v.Wr&&t.Hr(v.Wr)&&Jh(s),[2]}})})}function Cg(o,t){return(0,ne.mG)(this,void 0,void 0,function(){var s,l,p,v,S;return(0,ne.Jh)(this,function(F){return s=un(o),p=!1,(v=s.queries.get(l=t.query))&&(S=v.listeners.indexOf(t))>=0&&(v.listeners.splice(S,1),p=0===v.listeners.length),p?[2,(s.queries.delete(l),s.onUnlisten(l))]:[2]})})}function $f(o,t){for(var s=un(o),l=!1,p=0,v=t;p<v.length;p++){var S=v[p],Q=s.queries.get(S.query);if(Q){for(var le=0,fe=Q.listeners;le<fe.length;le++)fe[le].Hr(S)&&(l=!0);Q.Wr=S}}l&&Jh(s)}function h_(o,t,s){var l=un(o),p=l.queries.get(t);if(p)for(var v=0,S=p.listeners;v<S.length;v++)S[v].onError(s);l.queries.delete(t)}function Jh(o){o.Gr.forEach(function(t){t.next()})}var Wf=function(){function o(t,s,l){this.query=t,this.Jr=s,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=l||{}}return o.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var s=[],l=0,p=t.docChanges;l<p.length;l++){var v=p[l];3!==v.type&&s.push(v)}t=new Qh(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var S=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),S=!0):this.eo(t,this.onlineState)&&(this.no(t),S=!0),this.Xr=t,S},o.prototype.onError=function(t){this.Jr.error(t)},o.prototype.zr=function(t){this.onlineState=t;var s=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),s=!0),s},o.prototype.eo=function(t,s){return!t.fromCache||!(this.options.so&&"Offline"!==s||t.docs.isEmpty()&&"Offline"!==s)},o.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},o.prototype.no=function(t){t=Qh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},o}(),f_=function(){function o(t,s){this.payload=t,this.byteLength=s}return o.prototype.io=function(){return"metadata"in this.payload},o}(),Ud=function(){function o(t){this.R=t}return o.prototype.qn=function(t){return Fa(this.R,t)},o.prototype.Un=function(t){return t.metadata.exists?Bh(this.R,t.document,!1):Ar.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},o.prototype.Kn=function(t){return ji(t)},o}();!function(){function o(t,s,l){this.ro=t,this.localStore=s,this.R=l,this.queries=[],this.documents=[],this.progress=function(o){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:o.totalDocuments,totalBytes:o.totalBytes}}(t)}o.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var s=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++s):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++s),s!==this.progress.documentsLoaded?(this.progress.documentsLoaded=s,Object.assign({},this.progress)):null},o.prototype.co=function(t){for(var s=new Map,l=new Ud(this.R),p=0,v=t;p<v.length;p++){var S=v[p];if(S.metadata.queries)for(var F=l.qn(S.metadata.name),Q=0,le=S.metadata.queries;Q<le.length;Q++){var fe=le[Q],xe=(s.get(fe)||qr()).add(F);s.set(fe,xe)}}return s},o.prototype.complete=function(){return(0,ne.mG)(this,void 0,void 0,function(){var t,s,l,p,v;return(0,ne.Jh)(this,function(S){switch(S.label){case 0:return[4,og(this.localStore,new Ud(this.R),this.documents,this.ro.id)];case 1:t=S.sent(),s=this.co(this.documents),l=0,p=this.queries,S.label=2;case 2:return l<p.length?[4,Lf(this.localStore,v=p[l],s.get(v.name))]:[3,5];case 3:S.sent(),S.label=4;case 4:return l++,[3,2];case 5:return[2,(this.progress.taskState="Success",new ke(Object.assign({},this.progress),t))]}})})}}();var td=function(o){this.key=o},jd=function(o){this.key=o},nd=function(){function o(t,s){this.query=t,this.uo=s,this.ao=null,this.current=!1,this.ho=qr(),this.mutatedKeys=qr(),this.lo=rl(t),this.fo=new qf(this.lo)}return Object.defineProperty(o.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),o.prototype._o=function(t,s){var l=this,p=s?s.mo:new Kh,v=s?s.fo:this.fo,S=s?s.mutatedKeys:this.mutatedKeys,F=v,Q=!1,le=vu(this.query)&&v.size===this.query.limit?v.last():null,fe=Ma(this.query)&&v.size===this.query.limit?v.first():null;if(t.inorderTraversal(function(Ge,ht){var lt=v.get(Ge),wt=nl(l.query,ht)?ht:null,en=!!lt&&l.mutatedKeys.has(lt.key),pn=!!wt&&(wt.hasLocalMutations||l.mutatedKeys.has(wt.key)&&wt.hasCommittedMutations),tr=!1;lt&&wt?lt.data.isEqual(wt.data)?en!==pn&&(p.track({type:3,doc:wt}),tr=!0):l.yo(lt,wt)||(p.track({type:2,doc:wt}),tr=!0,(le&&l.lo(wt,le)>0||fe&&l.lo(wt,fe)<0)&&(Q=!0)):!lt&&wt?(p.track({type:0,doc:wt}),tr=!0):lt&&!wt&&(p.track({type:1,doc:lt}),tr=!0,(le||fe)&&(Q=!0)),tr&&(wt?(F=F.add(wt),S=pn?S.add(Ge):S.delete(Ge)):(F=F.delete(Ge),S=S.delete(Ge)))}),vu(this.query)||Ma(this.query))for(;F.size>this.query.limit;){var xe=vu(this.query)?F.last():F.first();F=F.delete(xe.key),S=S.delete(xe.key),p.track({type:1,doc:xe})}return{fo:F,mo:p,Nn:Q,mutatedKeys:S}},o.prototype.yo=function(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations},o.prototype.applyChanges=function(t,s,l){var p=this,v=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var S=t.mo.jr();S.sort(function(fe,xe){return ht=xe.type,(lt=function(wt){switch(wt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kn()}})(fe.type)-lt(ht)||p.lo(fe.doc,xe.doc);var ht,lt}),this.po(l);var F=s?this.Eo():[],Q=0===this.ho.size&&this.current?1:0,le=Q!==this.ao;return this.ao=Q,0!==S.length||le?{snapshot:new Qh(this.query,t.fo,v,S,t.mutatedKeys,0===Q,le,!1),To:F}:{To:F}},o.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Kh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},o.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},o.prototype.po=function(t){var s=this;t&&(t.addedDocuments.forEach(function(l){return s.uo=s.uo.add(l)}),t.modifiedDocuments.forEach(function(l){}),t.removedDocuments.forEach(function(l){return s.uo=s.uo.delete(l)}),this.current=t.current)},o.prototype.Eo=function(){var t=this;if(!this.current)return[];var s=this.ho;this.ho=qr(),this.fo.forEach(function(p){t.Io(p.key)&&(t.ho=t.ho.add(p.key))});var l=[];return s.forEach(function(p){t.ho.has(p)||l.push(new jd(p))}),this.ho.forEach(function(p){s.has(p)||l.push(new td(p))}),l},o.prototype.Ao=function(t){this.uo=t.Bn,this.ho=qr();var s=this._o(t.documents);return this.applyChanges(s,!0)},o.prototype.Ro=function(){return Qh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},o}(),p_=function(o,t,s){this.query=o,this.targetId=t,this.view=s},Eg=function(o){this.key=o,this.bo=!1},wg=function(){function o(t,s,l,p,v,S){this.localStore=t,this.remoteStore=s,this.eventManager=l,this.sharedClientState=p,this.currentUser=v,this.maxConcurrentLimboResolutions=S,this.vo={},this.Po=new E(function(F){return Hc(F)},Rl),this.Vo=new Map,this.So=new Set,this.Do=new Qo(Zn.comparator),this.Co=new Map,this.No=new ag,this.xo={},this.ko=new Map,this.Fo=Bu.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(o.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),o}();function Yf(o,t){return(0,ne.mG)(this,void 0,void 0,function(){var s,p,v,S,F;return(0,ne.Jh)(this,function(Q){switch(Q.label){case 0:return s=ep(o),(v=s.Po.get(t))?(s.sharedClientState.addLocalQueryTarget(v.targetId),p=v.view.Ro(),[3,4]):[3,1];case 1:return[4,ou(s.localStore,Bo(t))];case 2:return S=Q.sent(),F=s.sharedClientState.addLocalQueryTarget(S.targetId),[4,Eh(s,t,S.targetId,"current"===F)];case 3:p=Q.sent(),s.isPrimaryClient&&Wh(s.remoteStore,S),Q.label=4;case 4:return[2,p]}})})}function Eh(o,t,s,l){return(0,ne.mG)(this,void 0,void 0,function(){var p,v,S,F,Q,le;return(0,ne.Jh)(this,function(fe){switch(fe.label){case 0:return o.Oo=function(xe,Ge,ht){return function(lt,wt,en,pn){return(0,ne.mG)(this,void 0,void 0,function(){var tr,nr,Yr;return(0,ne.Jh)(this,function(di){switch(di.label){case 0:return(tr=wt.view._o(en)).Nn?[4,Gh(lt.localStore,wt.query,!1).then(function(ki){return wt.view._o(ki.documents,tr)})]:[3,2];case 1:tr=di.sent(),di.label=2;case 2:return nr=pn&&pn.targetChanges.get(wt.targetId),Yr=wt.view.applyChanges(tr,lt.isPrimaryClient,nr),[2,(Jf(lt,wt.targetId,Yr.To),Yr.snapshot)]}})})}(o,xe,Ge,ht)},[4,Gh(o.localStore,t,!0)];case 1:return p=fe.sent(),v=new nd(t,p.Bn),S=v._o(p.documents),F=vd.createSynthesizedTargetChangeForCurrentChange(s,l&&"Offline"!==o.onlineState),Q=v.applyChanges(S,o.isPrimaryClient,F),Jf(o,s,Q.To),le=new p_(t,s,v),[2,(o.Po.set(t,le),o.Vo.has(s)?o.Vo.get(s).push(t):o.Vo.set(s,[t]),Q.snapshot)]}})})}function Dg(o,t){return(0,ne.mG)(this,void 0,void 0,function(){var s,l,p;return(0,ne.Jh)(this,function(v){switch(v.label){case 0:return s=un(o),l=s.Po.get(t),(p=s.Vo.get(l.targetId)).length>1?[2,(s.Vo.set(l.targetId,p.filter(function(S){return!Rl(S,t)})),void s.Po.delete(t))]:s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)?[3,2]:[4,su(s.localStore,l.targetId,!1).then(function(){s.sharedClientState.clearQueryState(l.targetId),Vd(s.remoteStore,l.targetId),Hd(s,l.targetId)}).catch(iu)]):[3,3];case 1:v.sent(),v.label=2;case 2:return[3,5];case 3:return Hd(s,l.targetId),[4,su(s.localStore,l.targetId,!0)];case 4:v.sent(),v.label=5;case 5:return[2]}})})}function ef(o,t,s){return(0,ne.mG)(this,void 0,void 0,function(){var l,p,v,S;return(0,ne.Jh)(this,function(F){switch(F.label){case 0:l=tp(o),F.label=1;case 1:return F.trys.push([1,5,,6]),[4,(Q=l.localStore,le=t,xe=un(Q),Ge=U.now(),ht=le.reduce(function(lt,wt){return lt.add(wt.key)},qr()),xe.persistence.runTransaction("Locally write mutations","readwrite",function(lt){return xe.Mn.pn(lt,ht).next(function(wt){fe=wt;for(var en=[],pn=0,tr=le;pn<tr.length;pn++){var nr=tr[pn],Yr=Su(nr,fe.get(nr.key));null!=Yr&&en.push(new ws(nr.key,Yr,zs(Yr.value.mapValue),Ao.exists(!0)))}return xe._n.addMutationBatch(lt,Ge,en,le)})}).then(function(lt){return lt.applyToLocalDocumentSet(fe),{batchId:lt.batchId,changes:fe}}))];case 2:return p=F.sent(),l.sharedClientState.addPendingMutation(p.batchId),function(Q,le,fe){var xe=Q.xo[Q.currentUser.toKey()];xe||(xe=new Qo(Pr)),xe=xe.insert(le,fe),Q.xo[Q.currentUser.toKey()]=xe}(l,p.batchId,s),[4,Ic(l,p.changes)];case 3:return F.sent(),[4,Ch(l.remoteStore)];case 4:return F.sent(),[3,6];case 5:return v=F.sent(),S=Sc(v,"Failed to persist write"),s.reject(S),[3,6];case 6:return[2]}var Q,le,fe,xe,Ge,ht})})}function Tg(o,t){return(0,ne.mG)(this,void 0,void 0,function(){var s,l;return(0,ne.Jh)(this,function(p){switch(p.label){case 0:s=un(o),p.label=1;case 1:return p.trys.push([1,4,,6]),[4,Na(s.localStore,t)];case 2:return l=p.sent(),t.targetChanges.forEach(function(v,S){var F=s.Co.get(S);F&&(Kn(v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size<=1),v.addedDocuments.size>0?F.bo=!0:v.modifiedDocuments.size>0?Kn(F.bo):v.removedDocuments.size>0&&(Kn(F.bo),F.bo=!1))}),[4,Ic(s,l,t)];case 3:return p.sent(),[3,6];case 4:return[4,iu(p.sent())];case 5:return p.sent(),[3,6];case 6:return[2]}})})}function Kf(o,t,s){var l=un(o);if(l.isPrimaryClient&&0===s||!l.isPrimaryClient&&1===s){var p=[];l.Po.forEach(function(v,S){var F=S.view.zr(t);F.snapshot&&p.push(F.snapshot)}),function(v,S){var F=un(v);F.onlineState=S;var Q=!1;F.queries.forEach(function(le,fe){for(var xe=0,Ge=fe.listeners;xe<Ge.length;xe++)Ge[xe].zr(S)&&(Q=!0)}),Q&&Jh(F)}(l.eventManager,t),p.length&&l.vo._r(p),l.onlineState=t,l.isPrimaryClient&&l.sharedClientState.setOnlineState(t)}}function bv(o,t,s){return(0,ne.mG)(this,void 0,void 0,function(){var l,p,v,S,F,Q;return(0,ne.Jh)(this,function(le){switch(le.label){case 0:return(l=un(o)).sharedClientState.updateQueryState(t,"rejected",s),p=l.Co.get(t),(v=p&&p.key)?(S=(S=new Qo(Zn.comparator)).insert(v,Ar.newNoDocument(v,R.min())),F=qr().add(v),Q=new yd(R.min(),new Map,new bo(Pr),S,F),[4,Tg(l,Q)]):[3,2];case 1:return le.sent(),l.Do=l.Do.remove(v),l.Co.delete(t),Ig(l),[3,4];case 2:return[4,su(l.localStore,t,!1).then(function(){return Hd(l,t,s)}).catch(iu)];case 3:le.sent(),le.label=4;case 4:return[2]}})})}function Sg(o,t){return(0,ne.mG)(this,void 0,void 0,function(){var s,l,p;return(0,ne.Jh)(this,function(v){switch(v.label){case 0:s=un(o),l=t.batch.batchId,v.label=1;case 1:return v.trys.push([1,4,,6]),[4,Er(s.localStore,t)];case 2:return p=v.sent(),Qf(s,l,null),tf(s,l),s.sharedClientState.updateMutationState(l,"acknowledged"),[4,Ic(s,p)];case 3:return v.sent(),[3,6];case 4:return[4,iu(v.sent())];case 5:return v.sent(),[3,6];case 6:return[2]}})})}function Ag(o,t,s){return(0,ne.mG)(this,void 0,void 0,function(){var l,p;return(0,ne.Jh)(this,function(v){switch(v.label){case 0:l=un(o),v.label=1;case 1:return v.trys.push([1,4,,6]),[4,(S=l.localStore,F=t,Q=un(S),Q.persistence.runTransaction("Reject batch","readwrite-primary",function(le){var fe;return Q._n.lookupMutationBatch(le,F).next(function(xe){return Kn(null!==xe),fe=xe.keys(),Q._n.removeMutationBatch(le,xe)}).next(function(){return Q._n.performConsistencyCheck(le)}).next(function(){return Q.Mn.pn(le,fe)})}))];case 2:return p=v.sent(),Qf(l,t,s),tf(l,t),l.sharedClientState.updateMutationState(t,"rejected",s),[4,Ic(l,p)];case 3:return v.sent(),[3,6];case 4:return[4,iu(v.sent())];case 5:return v.sent(),[3,6];case 6:return[2]}var S,F,Q})})}function g_(o,t){return(0,ne.mG)(this,void 0,void 0,function(){var s,l,p,v,S;return(0,ne.Jh)(this,function(F){switch(F.label){case 0:zl((s=un(o)).remoteStore)||nn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),F.label=1;case 1:return F.trys.push([1,3,,4]),[4,(Q=s.localStore,le=un(Q),le.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(fe){return le._n.getHighestUnacknowledgedBatchId(fe)}))];case 2:return-1===(l=F.sent())?[2,void t.resolve()]:((p=s.ko.get(l)||[]).push(t),s.ko.set(l,p),[3,4]);case 3:return v=F.sent(),S=Sc(v,"Initialization of waitForPendingWrites() operation failed"),t.reject(S),[3,4];case 4:return[2]}var Q,le})})}function tf(o,t){(o.ko.get(t)||[]).forEach(function(s){s.resolve()}),o.ko.delete(t)}function Qf(o,t,s){var l=un(o),p=l.xo[l.currentUser.toKey()];if(p){var v=p.get(t);v&&(s?v.reject(s):v.resolve(),p=p.remove(t)),l.xo[l.currentUser.toKey()]=p}}function Hd(o,t,s){void 0===s&&(s=null),o.sharedClientState.removeLocalQueryTarget(t);for(var l=0,p=o.Vo.get(t);l<p.length;l++){var v=p[l];o.Po.delete(v),s&&o.vo.Mo(v,s)}o.Vo.delete(t),o.isPrimaryClient&&o.No.Zn(t).forEach(function(S){o.No.containsKey(S)||ga(o,S)})}function ga(o,t){o.So.delete(t.path.canonicalString());var s=o.Do.get(t);null!==s&&(Vd(o.remoteStore,s),o.Do=o.Do.remove(t),o.Co.delete(s),Ig(o))}function Jf(o,t,s){for(var l=0,p=s;l<p.length;l++){var v=p[l];v instanceof td?(o.No.addReference(v.key,t),m_(o,v)):v instanceof jd?(nn("SyncEngine","Document no longer in limbo: "+v.key),o.No.removeReference(v.key,t),o.No.containsKey(v.key)||ga(o,v.key)):kn()}}function m_(o,t){var s=t.key,l=s.path.canonicalString();o.Do.get(s)||o.So.has(l)||(nn("SyncEngine","New document in limbo: "+s),o.So.add(l),Ig(o))}function Ig(o){for(;o.So.size>0&&o.Do.size<o.maxConcurrentLimboResolutions;){var t=o.So.values().next().value;o.So.delete(t);var s=new Zn(Ie.fromString(t)),l=o.Fo.next();o.Co.set(l,new Eg(s)),o.Do=o.Do.insert(s,l),Wh(o.remoteStore,new Cc(Bo(yu(s.path)),l,2,Ki.o))}}function Ic(o,t,s){return(0,ne.mG)(this,void 0,void 0,function(){var l,p,v,S;return(0,ne.Jh)(this,function(F){switch(F.label){case 0:return l=un(o),p=[],v=[],S=[],l.Po.isEmpty()?[3,3]:(l.Po.forEach(function(Q,le){S.push(l.Oo(le,t,s).then(function(fe){if(fe){l.isPrimaryClient&&l.sharedClientState.updateQueryState(le.targetId,fe.fromCache?"not-current":"current"),p.push(fe);var xe=It.Pn(le.targetId,fe);v.push(xe)}}))}),[4,Promise.all(S)]);case 1:return F.sent(),l.vo._r(p),[4,function(Q,le){return(0,ne.mG)(this,void 0,void 0,function(){var fe,xe,Ge,ht,lt,wt,en,tr;return(0,ne.Jh)(this,function(nr){switch(nr.label){case 0:fe=un(Q),nr.label=1;case 1:return nr.trys.push([1,3,,4]),[4,fe.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(Yr){return Wt.forEach(le,function(di){return Wt.forEach(di.bn,function(ki){return fe.persistence.referenceDelegate.addReference(Yr,di.targetId,ki)}).next(function(){return Wt.forEach(di.vn,function(ki){return fe.persistence.referenceDelegate.removeReference(Yr,di.targetId,ki)})})})})];case 2:return nr.sent(),[3,4];case 3:if(!hl(xe=nr.sent()))throw xe;return nn("LocalStore","Failed to update sequence numbers: "+xe),[3,4];case 4:for(Ge=0,ht=le;Ge<ht.length;Ge++)wt=(lt=ht[Ge]).targetId,lt.fromCache||(en=fe.kn.get(wt),tr=en.withLastLimboFreeSnapshotVersion(en.snapshotVersion),fe.kn=fe.kn.insert(wt,tr));return[2]}})})}(l.localStore,v)];case 2:F.sent(),F.label=3;case 3:return[2]}})})}function Mg(o,t){return(0,ne.mG)(this,void 0,void 0,function(){var s,l;return(0,ne.Jh)(this,function(p){switch(p.label){case 0:return(s=un(o)).currentUser.isEqual(t)?[3,3]:(nn("SyncEngine","User change. New user:",t.toKey()),[4,Yn(s.localStore,t)]);case 1:return l=p.sent(),s.currentUser=t,(v=s).ko.forEach(function(F){F.forEach(function(Q){Q.reject(new Vt(_t.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),v.ko.clear(),s.sharedClientState.handleUserChange(t,l.removedBatchIds,l.addedBatchIds),[4,Ic(s,l.Ln)];case 2:p.sent(),p.label=3;case 3:return[2]}var v})})}function Cv(o,t){var s=un(o),l=s.Co.get(t);if(l&&l.bo)return qr().add(l.key);var p=qr(),v=s.Vo.get(t);if(!v)return p;for(var S=0,F=v;S<F.length;S++){var le=s.Po.get(F[S]);p=p.unionWith(le.view.wo)}return p}function __(o,t){return(0,ne.mG)(this,void 0,void 0,function(){var s,l,p;return(0,ne.Jh)(this,function(v){switch(v.label){case 0:return[4,Gh((s=un(o)).localStore,t.query,!0)];case 1:return l=v.sent(),p=t.view.Ao(l),[2,(s.isPrimaryClient&&Jf(s,t.targetId,p.To),p)]}})})}function Xf(o){return(0,ne.mG)(this,void 0,void 0,function(){var t;return(0,ne.Jh)(this,function(s){return[2,ig((t=un(o)).localStore).then(function(l){return Ic(t,l)})]})})}function Og(o,t,s,l){return(0,ne.mG)(this,void 0,void 0,function(){var p,v;return(0,ne.Jh)(this,function(S){switch(S.label){case 0:return[4,(F=(p=un(o)).localStore,Q=t,le=un(F),fe=un(le._n),le.persistence.runTransaction("Lookup mutation documents","readonly",function(xe){return fe.jt(xe,Q).next(function(Ge){return Ge?le.Mn.pn(xe,Ge):Wt.resolve(null)})}))];case 1:return null===(v=S.sent())?[3,6]:"pending"!==s?[3,3]:[4,Ch(p.remoteStore)];case 2:return S.sent(),[3,4];case 3:"acknowledged"===s||"rejected"===s?(Qf(p,t,l||null),tf(p,t),function(F,Q){un(un(F)._n).Gt(Q)}(p.localStore,t)):kn(),S.label=4;case 4:return[4,Ic(p,v)];case 5:return S.sent(),[3,7];case 6:nn("SyncEngine","Cannot apply mutation batch with id: "+t),S.label=7;case 7:return[2]}var F,Q,le,fe})})}function y_(o,t){return(0,ne.mG)(this,void 0,void 0,function(){var s,l,p,v,S,Q,le;return(0,ne.Jh)(this,function(fe){switch(fe.label){case 0:return ep(s=un(o)),tp(s),!0!==t||!0===s.$o?[3,3]:(l=s.sharedClientState.getAllActiveQueryTargets(),[4,Rg(s,l.toArray())]);case 1:return p=fe.sent(),s.$o=!0,[4,vl(s.remoteStore,!0)];case 2:for(fe.sent(),v=0,S=p;v<S.length;v++)Wh(s.remoteStore,S[v]);return[3,7];case 3:return!1!==t||!1===s.$o?[3,7]:(Q=[],le=Promise.resolve(),s.Vo.forEach(function(xe,Ge){s.sharedClientState.isLocalQueryTarget(Ge)?Q.push(Ge):le=le.then(function(){return Hd(s,Ge),su(s.localStore,Ge,!0)}),Vd(s.remoteStore,Ge)}),[4,le]);case 4:return fe.sent(),[4,Rg(s,Q)];case 5:return fe.sent(),(Ge=un(s)).Co.forEach(function(ht,lt){Vd(Ge.remoteStore,lt)}),Ge.No.ts(),Ge.Co=new Map,Ge.Do=new Qo(Zn.comparator),s.$o=!1,[4,vl(s.remoteStore,!1)];case 6:fe.sent(),fe.label=7;case 7:return[2]}var Ge})})}function Rg(o,t,s){return(0,ne.mG)(this,void 0,void 0,function(){var l,p,v,S,F,Q,le,fe,xe,Ge,lt,wt,en;return(0,ne.Jh)(this,function(pn){switch(pn.label){case 0:l=un(o),p=[],v=[],S=0,F=t,pn.label=1;case 1:return S<F.length?(le=void 0,(fe=l.Vo.get(Q=F[S]))&&0!==fe.length?[4,ou(l.localStore,Bo(fe[0]))]:[3,7]):[3,13];case 2:le=pn.sent(),xe=0,Ge=fe,pn.label=3;case 3:return xe<Ge.length?(lt=l.Po.get(Ge[xe]),[4,__(l,lt)]):[3,6];case 4:(wt=pn.sent()).snapshot&&v.push(wt.snapshot),pn.label=5;case 5:return xe++,[3,3];case 6:return[3,11];case 7:return[4,kf(l.localStore,Q)];case 8:return en=pn.sent(),[4,ou(l.localStore,en)];case 9:return le=pn.sent(),[4,Eh(l,xg(en),Q,!1)];case 10:pn.sent(),pn.label=11;case 11:p.push(le),pn.label=12;case 12:return S++,[3,1];case 13:return[2,(l.vo._r(v),p)]}})})}function xg(o){return _u(o.path,o.collectionGroup,o.orderBy,o.filters,o.limit,"F",o.startAt,o.endAt)}function Pg(o){var t=un(o);return un(un(t.localStore).persistence).fn()}function v_(o,t,s,l){return(0,ne.mG)(this,void 0,void 0,function(){var p,v,S;return(0,ne.Jh)(this,function(F){switch(F.label){case 0:return(p=un(o)).$o?(nn("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!p.Vo.has(t))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ig(p.localStore)];case 3:return v=F.sent(),S=yd.createSynthesizedRemoteEventForCurrentChange(t,"current"===s),[4,Ic(p,v,S)];case 4:return F.sent(),[3,8];case 5:return[4,su(p.localStore,t,!0)];case 6:return F.sent(),Hd(p,t,l),[3,8];case 7:kn(),F.label=8;case 8:return[2]}})})}function Fg(o,t,s){return(0,ne.mG)(this,void 0,void 0,function(){var l,p,v,S,F,Q,le,fe,xe;return(0,ne.Jh)(this,function(ht){switch(ht.label){case 0:if(!(l=ep(o)).$o)return[3,10];p=0,v=t,ht.label=1;case 1:return p<v.length?l.Vo.has(S=v[p])?(nn("SyncEngine","Adding an already active target "+S),[3,5]):[4,kf(l.localStore,S)]:[3,6];case 2:return F=ht.sent(),[4,ou(l.localStore,F)];case 3:return Q=ht.sent(),[4,Eh(l,xg(F),Q.targetId,!1)];case 4:ht.sent(),Wh(l.remoteStore,Q),ht.label=5;case 5:return p++,[3,1];case 6:le=function(lt){return(0,ne.Jh)(this,function(wt){switch(wt.label){case 0:return l.Vo.has(lt)?[4,su(l.localStore,lt,!1).then(function(){Vd(l.remoteStore,lt),Hd(l,lt)}).catch(iu)]:[3,2];case 1:wt.sent(),wt.label=2;case 2:return[2]}})},fe=0,xe=s,ht.label=7;case 7:return fe<xe.length?[5,le(xe[fe])]:[3,10];case 8:ht.sent(),ht.label=9;case 9:return fe++,[3,7];case 10:return[2]}})})}function ep(o){var t=un(o);return t.remoteStore.remoteSyncer.applyRemoteEvent=Tg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=bv.bind(null,t),t.vo._r=$f.bind(null,t.eventManager),t.vo.Mo=h_.bind(null,t.eventManager),t}function tp(o){var t=un(o);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Sg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ag.bind(null,t),t}var np=function(){function o(){this.synchronizeTabs=!1}return o.prototype.initialize=function(t){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(s){switch(s.label){case 0:return this.R=Ld(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return s.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},o.prototype.Uo=function(t){return null},o.prototype.Ko=function(t){return Qn(this.persistence,new Bt,t.initialUser,this.R)},o.prototype.qo=function(t){return new Hu(lg.bs,this.R)},o.prototype.Bo=function(t){return new jf},o.prototype.terminate=function(){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},o}(),kg=function(o){function t(s,l,p){var v=this;return(v=o.call(this)||this).Qo=s,v.cacheSizeBytes=l,v.forceOwnership=p,v.synchronizeTabs=!1,v}return(0,ne.ZT)(t,o),t.prototype.initialize=function(s){return(0,ne.mG)(this,void 0,void 0,function(){var l=this;return(0,ne.Jh)(this,function(p){switch(p.label){case 0:return[4,o.prototype.initialize.call(this,s)];case 1:return p.sent(),[4,t_(this.localStore)];case 2:return p.sent(),[4,this.Qo.initialize(this,s)];case 3:return p.sent(),[4,tp(this.Qo.syncEngine)];case 4:return p.sent(),[4,Ch(this.Qo.remoteStore)];case 5:return p.sent(),[4,this.persistence.He(function(){return l.gcScheduler&&!l.gcScheduler.started&&l.gcScheduler.start(l.localStore),Promise.resolve()})];case 6:return p.sent(),[2]}})})},t.prototype.Ko=function(s){return Qn(this.persistence,new Bt,s.initialUser,this.R)},t.prototype.Uo=function(s){return new mh(this.persistence.referenceDelegate.garbageCollector,s.asyncQueue)},t.prototype.qo=function(s){var l=Me(s.databaseInfo.databaseId,s.databaseInfo.persistenceKey),p=void 0!==this.cacheSizeBytes?ks.withCacheSize(this.cacheSizeBytes):ks.DEFAULT;return new W(this.synchronizeTabs,l,s.clientId,p,s.asyncQueue,yl(),kd(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(s){return new jf},t}(np),bl=function(o){function t(s,l){var p=this;return(p=o.call(this,s,l,!1)||this).Qo=s,p.cacheSizeBytes=l,p.synchronizeTabs=!0,p}return(0,ne.ZT)(t,o),t.prototype.initialize=function(s){return(0,ne.mG)(this,void 0,void 0,function(){var l,p=this;return(0,ne.Jh)(this,function(v){switch(v.label){case 0:return[4,o.prototype.initialize.call(this,s)];case 1:return v.sent(),l=this.Qo.syncEngine,this.sharedClientState instanceof zh?(this.sharedClientState.syncEngine={ui:Og.bind(null,l),ai:v_.bind(null,l),hi:Fg.bind(null,l),fn:Pg.bind(null,l),ci:Xf.bind(null,l)},[4,this.sharedClientState.start()]):[3,3];case 2:v.sent(),v.label=3;case 3:return[4,this.persistence.He(function(S){return(0,ne.mG)(p,void 0,void 0,function(){return(0,ne.Jh)(this,function(F){switch(F.label){case 0:return[4,y_(this.Qo.syncEngine,S)];case 1:return F.sent(),this.gcScheduler&&(S&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):S||this.gcScheduler.stop()),[2]}})})})];case 4:return v.sent(),[2]}})})},t.prototype.Bo=function(s){var l=yl();if(!zh.yt(l))throw new Vt(_t.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var p=Me(s.databaseInfo.databaseId,s.databaseInfo.persistenceKey);return new zh(l,s.asyncQueue,p,s.clientId,s.initialUser)},t}(kg),wh=function(){function o(){}return o.prototype.initialize=function(t,s){return(0,ne.mG)(this,void 0,void 0,function(){var l=this;return(0,ne.Jh)(this,function(p){switch(p.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(v){return Kf(l.syncEngine,v,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Mg.bind(null,this.syncEngine),[4,vl(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:p.sent(),p.label=2;case 2:return[2]}})})},o.prototype.createEventManager=function(t){return new bg},o.prototype.createDatastore=function(t){var l=Ld(t.databaseInfo.databaseId),p=new Hf(t.databaseInfo);return new Gl(t.credentials,p,l)},o.prototype.createRemoteStore=function(t){var s,l,p,v,S,F=this;return s=this.localStore,l=this.datastore,p=t.asyncQueue,v=function(Q){return Kf(F.syncEngine,Q,0)},S=au.yt()?new au:new qh,new $h(s,l,p,v,S)},o.prototype.createSyncEngine=function(t,s){return le=s,fe=new wg(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions),le&&(fe.$o=!0),fe;var le,fe},o.prototype.terminate=function(){return function(t){return(0,ne.mG)(this,void 0,void 0,function(){var s;return(0,ne.Jh)(this,function(l){switch(l.label){case 0:return s=un(t),nn("RemoteStore","RemoteStore shutting down."),s.Or.add(5),[4,bh(s)];case 1:return l.sent(),s.Lr.shutdown(),s.Br.set("Unknown"),[2]}})})}(this.remoteStore)},o}(),nf=function(){function o(t){this.observer=t,this.muted=!1}return o.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},o.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},o.prototype.Wo=function(){this.muted=!0},o.prototype.jo=function(t,s){var l=this;this.muted||setTimeout(function(){l.muted||t(s)},0)},o}(),Vg=(function(){function o(t,s){var l=this;this.Go=t,this.R=s,this.metadata=new es,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(p){p&&p.io()?l.metadata.resolve(p.payload.metadata):l.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==p?void 0:p.payload)))},function(p){return l.metadata.reject(p)})}o.prototype.close=function(){return this.Go.cancel()},o.prototype.getMetadata=function(){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(t){return[2,this.metadata.promise]})})},o.prototype.Lo=function(){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},o.prototype.Ho=function(){return(0,ne.mG)(this,void 0,void 0,function(){var t,s,l,p;return(0,ne.Jh)(this,function(v){switch(v.label){case 0:return[4,this.Jo()];case 1:return null===(t=v.sent())?[2,null]:(s=this.zo.decode(t),l=Number(s),isNaN(l)&&this.Yo("length string ("+s+") is not valid number"),[4,this.Xo(l)]);case 2:return p=v.sent(),[2,new f_(JSON.parse(p),t.length+l)]}})})},o.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},o.prototype.Jo=function(){return(0,ne.mG)(this,void 0,void 0,function(){var t,s;return(0,ne.Jh)(this,function(l){switch(l.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(l.sent())return[3,3];l.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),s=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),s)])}})})},o.prototype.Xo=function(t){return(0,ne.mG)(this,void 0,void 0,function(){var s;return(0,ne.Jh)(this,function(l){switch(l.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:l.sent()&&this.Yo("Reached the end of bundle when more is expected."),l.label=2;case 2:return[3,0];case 3:return s=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),s)]}})})},o.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},o.prototype.tc=function(){return(0,ne.mG)(this,void 0,void 0,function(){var t,s;return(0,ne.Jh)(this,function(l){switch(l.label){case 0:return[4,this.Go.read()];case 1:return(t=l.sent()).done||((s=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),s.set(t.value,this.buffer.length),this.buffer=s),[2,t.done]}})})}}(),function(){function o(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return o.prototype.lookup=function(t){return(0,ne.mG)(this,void 0,void 0,function(){var s,l=this;return(0,ne.Jh)(this,function(p){switch(p.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Vt(_t.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(v,S){return(0,ne.mG)(this,void 0,void 0,function(){var F,Q,le,fe,xe,Ge;return(0,ne.Jh)(this,function(ht){switch(ht.label){case 0:return F=un(v),Q=la(F.R)+"/documents",le={documents:S.map(function(lt){return ul(F.R,lt)})},[4,F.$i("BatchGetDocuments",Q,le)];case 1:return fe=ht.sent(),xe=new Map,fe.forEach(function(lt){var en,pn,wt=(en=F.R,"found"in(pn=lt)?function(tr,nr){Kn(!!nr.found);var Yr=Fa(tr,nr.found.name),di=ji(nr.found.updateTime),ki=new ci({mapValue:{fields:nr.found.fields}});return Ar.newFoundDocument(Yr,di,ki)}(en,pn):"missing"in pn?function(tr,nr){Kn(!!nr.missing),Kn(!!nr.readTime);var Yr=Fa(tr,nr.missing),di=ji(nr.readTime);return Ar.newNoDocument(Yr,di)}(en,pn):kn());xe.set(wt.key.toString(),wt)}),Ge=[],[2,(S.forEach(function(lt){var wt=xe.get(lt.toString());Kn(!!wt),Ge.push(wt)}),Ge)]}})})}(this.datastore,t)];case 1:return[2,((s=p.sent()).forEach(function(v){return l.recordVersion(v)}),s)]}})})},o.prototype.set=function(t,s){this.write(s.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},o.prototype.update=function(t,s){try{this.write(s.toMutation(t,this.preconditionForUpdate(t)))}catch(l){this.lastWriteError=l}this.writtenDocs.add(t.toString())},o.prototype.delete=function(t){this.write(new aa(t,this.precondition(t))),this.writtenDocs.add(t.toString())},o.prototype.commit=function(){return(0,ne.mG)(this,void 0,void 0,function(){var t,s=this;return(0,ne.Jh)(this,function(l){switch(l.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(p){t.delete(p.key.toString())}),t.forEach(function(p,v){var S=Zn.fromPath(v);s.mutations.push(new Ja(S,s.precondition(S)))}),[4,function(p,v){return(0,ne.mG)(this,void 0,void 0,function(){var S,F,Q;return(0,ne.Jh)(this,function(le){switch(le.label){case 0:return S=un(p),F=la(S.R)+"/documents",Q={writes:v.map(function(fe){return Yc(S.R,fe)})},[4,S.Ni("Commit",F,Q)];case 1:return le.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return l.sent(),this.committed=!0,[2]}})})},o.prototype.recordVersion=function(t){var s;if(t.isFoundDocument())s=t.version;else{if(!t.isNoDocument())throw kn();s=R.min()}var l=this.readVersions.get(t.key.toString());if(l){if(!s.isEqual(l))throw new Vt(_t.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),s)},o.prototype.precondition=function(t){var s=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&s?Ao.updateTime(s):Ao.none()},o.prototype.preconditionForUpdate=function(t){var s=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&s){if(s.isEqual(R.min()))throw new Vt(_t.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ao.updateTime(s)}return Ao.exists(!0)},o.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},o.prototype.ensureCommitNotCalled=function(){},o}()),b_=function(){function o(t,s,l,p){this.asyncQueue=t,this.datastore=s,this.updateFunction=l,this.deferred=p,this.ec=5,this.Zi=new vh(this.asyncQueue,"transaction_retry")}return o.prototype.run=function(){this.ec-=1,this.nc()},o.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,ne.mG)(t,void 0,void 0,function(){var s,l,p=this;return(0,ne.Jh)(this,function(v){return s=new Vg(this.datastore),(l=this.sc(s))&&l.then(function(S){p.asyncQueue.enqueueAndForget(function(){return s.commit().then(function(){p.deferred.resolve(S)}).catch(function(F){p.ic(F)})})}).catch(function(S){p.ic(S)}),[2]})})})},o.prototype.sc=function(t){try{var s=this.updateFunction(t);return!Wo(s)&&s.catch&&s.then?s:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(l){return this.deferred.reject(l),null}},o.prototype.ic=function(t){var s=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return s.nc(),Promise.resolve()})):this.deferred.reject(t)},o.prototype.rc=function(t){if("FirebaseError"===t.name){var s=t.code;return"aborted"===s||"failed-precondition"===s||!qc(s)}return!1},o}(),C_=function(){function o(t,s,l){var p=this;this.credentials=t,this.asyncQueue=s,this.databaseInfo=l,this.user=Ss.UNAUTHENTICATED,this.clientId=fu.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(s,function(v){return(0,ne.mG)(p,void 0,void 0,function(){return(0,ne.Jh)(this,function(S){switch(S.label){case 0:return nn("FirestoreClient","Received user=",v.uid),[4,this.credentialListener(v)];case 1:return S.sent(),this.user=v,[2]}})})})}return o.prototype.getConfiguration=function(){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},o.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},o.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Vt(_t.FAILED_PRECONDITION,"The client has already been terminated.")},o.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var s=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,ne.mG)(t,void 0,void 0,function(){var l,p;return(0,ne.Jh)(this,function(v){switch(v.label){case 0:return v.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:v.sent(),v.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:v.sent(),v.label=4;case 4:return this.credentials.removeChangeListener(),s.resolve(),[3,6];case 5:return l=v.sent(),p=Sc(l,"Failed to shutdown persistence"),s.reject(p),[3,6];case 6:return[2]}})})}),s.promise},o}();function Ug(o,t){return(0,ne.mG)(this,void 0,void 0,function(){var s,l,p=this;return(0,ne.Jh)(this,function(v){switch(v.label){case 0:return o.asyncQueue.verifyOperationInProgress(),nn("FirestoreClient","Initializing OfflineComponentProvider"),[4,o.getConfiguration()];case 1:return s=v.sent(),[4,t.initialize(s)];case 2:return v.sent(),l=s.initialUser,o.setCredentialChangeListener(function(S){return(0,ne.mG)(p,void 0,void 0,function(){return(0,ne.Jh)(this,function(F){switch(F.label){case 0:return l.isEqual(S)?[3,2]:[4,Yn(t.localStore,S)];case 1:F.sent(),l=S,F.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return o.terminate()}),o.offlineComponents=t,[2]}})})}function rf(o,t){return(0,ne.mG)(this,void 0,void 0,function(){var s,l;return(0,ne.Jh)(this,function(p){switch(p.label){case 0:return o.asyncQueue.verifyOperationInProgress(),[4,rp(o)];case 1:return s=p.sent(),nn("FirestoreClient","Initializing OnlineComponentProvider"),[4,o.getConfiguration()];case 2:return l=p.sent(),[4,t.initialize(s,l)];case 3:return p.sent(),o.setCredentialChangeListener(function(v){return function(S,F){return(0,ne.mG)(this,void 0,void 0,function(){var Q,le;return(0,ne.Jh)(this,function(fe){switch(fe.label){case 0:return(Q=un(S)).asyncQueue.verifyOperationInProgress(),nn("RemoteStore","RemoteStore received new credentials"),le=zl(Q),Q.Or.add(3),[4,bh(Q)];case 1:return fe.sent(),le&&Q.Br.set("Unknown"),[4,Q.remoteSyncer.handleCredentialChange(F)];case 2:return fe.sent(),Q.Or.delete(3),[4,ed(Q)];case 3:return fe.sent(),[2]}})})}(t.remoteStore,v)}),o.onlineComponents=t,[2]}})})}function rp(o){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(t){switch(t.label){case 0:return o.offlineComponents?[3,2]:(nn("FirestoreClient","Using default OfflineComponentProvider"),[4,Ug(o,new np)]);case 1:t.sent(),t.label=2;case 2:return[2,o.offlineComponents]}})})}function of(o){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(t){switch(t.label){case 0:return o.onlineComponents?[3,2]:(nn("FirestoreClient","Using default OnlineComponentProvider"),[4,rf(o,new wh)]);case 1:t.sent(),t.label=2;case 2:return[2,o.onlineComponents]}})})}function Dh(o){return rp(o).then(function(t){return t.persistence})}function Th(o){return rp(o).then(function(t){return t.localStore})}function Bg(o){return of(o).then(function(t){return t.remoteStore})}function Sh(o){return of(o).then(function(t){return t.syncEngine})}function Mc(o){return(0,ne.mG)(this,void 0,void 0,function(){var t,s;return(0,ne.Jh)(this,function(l){switch(l.label){case 0:return[4,of(o)];case 1:return t=l.sent(),[2,((s=t.eventManager).onListen=Yf.bind(null,t.syncEngine),s.onUnlisten=Dg.bind(null,t.syncEngine),s)]}})})}function ip(o,t,s){var l=this;void 0===s&&(s={});var p=new es;return o.asyncQueue.enqueueAndForget(function(){return(0,ne.mG)(l,void 0,void 0,function(){var v;return(0,ne.Jh)(this,function(S){switch(S.label){case 0:return v=function(F,Q,le,fe,xe){var Ge=new nf({next:function(lt){Q.enqueueAndForget(function(){return Cg(F,ht)});var wt=lt.docs.has(le);!wt&&lt.fromCache?xe.reject(new Vt(_t.UNAVAILABLE,"Failed to get document because the client is offline.")):wt&&lt.fromCache&&fe&&"server"===fe.source?xe.reject(new Vt(_t.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):xe.resolve(lt)},error:function(lt){return xe.reject(lt)}}),ht=new Wf(yu(le.path),Ge,{includeMetadataChanges:!0,so:!0});return Zf(F,ht)},[4,Mc(o)];case 1:return[2,v.apply(void 0,[S.sent(),o.asyncQueue,t,s,p])]}})})}),p.promise}function jg(o,t,s){var l=this;void 0===s&&(s={});var p=new es;return o.asyncQueue.enqueueAndForget(function(){return(0,ne.mG)(l,void 0,void 0,function(){var v;return(0,ne.Jh)(this,function(S){switch(S.label){case 0:return v=function(F,Q,le,fe,xe){var Ge=new nf({next:function(lt){Q.enqueueAndForget(function(){return Cg(F,ht)}),lt.fromCache&&"server"===fe.source?xe.reject(new Vt(_t.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):xe.resolve(lt)},error:function(lt){return xe.reject(lt)}}),ht=new Wf(le,Ge,{includeMetadataChanges:!0,so:!0});return Zf(F,ht)},[4,Mc(o)];case 1:return[2,v.apply(void 0,[S.sent(),o.asyncQueue,t,s,p])]}})})}),p.promise}var E_=function(o,t,s,l,p,v,S,F){this.databaseId=o,this.appId=t,this.persistenceKey=s,this.host=l,this.ssl=p,this.forceLongPolling=v,this.autoDetectLongPolling=S,this.useFetchStreams=F},Gd=function(){function o(t,s){this.projectId=t,this.database=s||"(default)"}return Object.defineProperty(o.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return t instanceof o&&t.projectId===this.projectId&&t.database===this.database},o}(),w_=new Map,Hg=function(o,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+o},op=function(){function o(){this.changeListener=null}return o.prototype.getToken=function(){return Promise.resolve(null)},o.prototype.invalidateToken=function(){},o.prototype.setChangeListener=function(t,s){this.changeListener=s,t.enqueueRetryable(function(){return s(Ss.UNAUTHENTICATED)})},o.prototype.removeChangeListener=function(){this.changeListener=null},o}(),Gg=function(){function o(t){this.token=t,this.changeListener=null}return o.prototype.getToken=function(){return Promise.resolve(this.token)},o.prototype.invalidateToken=function(){},o.prototype.setChangeListener=function(t,s){var l=this;this.changeListener=s,t.enqueueRetryable(function(){return s(l.token.user)})},o.prototype.removeChangeListener=function(){this.changeListener=null},o}(),zg=function(){function o(t){var s=this;this.currentUser=Ss.UNAUTHENTICATED,this.oc=new es,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){s.cc++,s.currentUser=s.ac(),s.oc.resolve(),s.changeListener&&s.asyncQueue.enqueueRetryable(function(){return s.changeListener(s.currentUser)})};var l=function(p){nn("FirebaseCredentialsProvider","Auth detected"),s.auth=p,s.auth.addAuthTokenListener(s.uc)};t.onInit(function(p){return l(p)}),setTimeout(function(){if(!s.auth){var p=t.getImmediate({optional:!0});p?l(p):(nn("FirebaseCredentialsProvider","Auth not yet detected"),s.oc.resolve())}},0)}return o.prototype.getToken=function(){var t=this,s=this.cc,l=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(l).then(function(p){return t.cc!==s?(nn("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):p?(Kn("string"==typeof p.accessToken),new Hg(p.accessToken,t.currentUser)):null}):Promise.resolve(null)},o.prototype.invalidateToken=function(){this.forceRefresh=!0},o.prototype.setChangeListener=function(t,s){var l=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,ne.mG)(l,void 0,void 0,function(){return(0,ne.Jh)(this,function(p){switch(p.label){case 0:return[4,this.oc.promise];case 1:return p.sent(),[4,s(this.currentUser)];case 2:return p.sent(),this.changeListener=s,[2]}})})})},o.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},o.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Kn(null===t||"string"==typeof t),new Ss(t)},o}(),qg=function(){function o(t,s,l){this.hc=t,this.lc=s,this.fc=l,this.type="FirstParty",this.user=Ss.FIRST_PARTY}return Object.defineProperty(o.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},s=this.hc.auth.getAuthHeaderValueForFirstParty([]);return s&&(t.Authorization=s),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),o}(),Zg=function(){function o(t,s,l){this.hc=t,this.lc=s,this.fc=l}return o.prototype.getToken=function(){return Promise.resolve(new qg(this.hc,this.lc,this.fc))},o.prototype.setChangeListener=function(t,s){t.enqueueRetryable(function(){return s(Ss.FIRST_PARTY)})},o.prototype.removeChangeListener=function(){},o.prototype.invalidateToken=function(){},o}();function Gu(o,t,s){if(!s)throw new Vt(_t.INVALID_ARGUMENT,"Function "+o+"() cannot be called with an empty "+t+".")}function zd(o,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Vt(_t.INVALID_ARGUMENT,"Invalid options passed to function "+o+'(): You cannot specify both "merge" and "mergeFields".');return t}function $g(o,t,s,l){if(!0===t&&!0===l)throw new Vt(_t.INVALID_ARGUMENT,o+" and "+s+" cannot be used together.")}function Wg(o){if(!Zn.isDocumentKey(o))throw new Vt(_t.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+o+" has "+o.length+".")}function D_(o){if(Zn.isDocumentKey(o))throw new Vt(_t.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+o+" has "+o.length+".")}function ql(o){if(void 0===o)return"undefined";if(null===o)return"null";if("string"==typeof o)return o.length>20&&(o=o.substring(0,20)+"..."),JSON.stringify(o);if("number"==typeof o||"boolean"==typeof o)return""+o;if("object"==typeof o){if(o instanceof Array)return"an array";var t=function(s){if(s.constructor){var l=/function\s+([^\s(]+)\s*\(/.exec(s.constructor.toString());if(l&&l.length>1)return l[1]}return null}(o);return t?"a custom "+t+" object":"an object"}return"function"==typeof o?"a function":kn()}function Ti(o,t){if("_delegate"in o&&(o=o._delegate),!(o instanceof t)){if(t.name===o.constructor.name)throw new Vt(_t.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var s=ql(o);throw new Vt(_t.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+s)}return o}function qd(o,t){if(t<=0)throw new Vt(_t.INVALID_ARGUMENT,"Function "+o+"() requires a positive number, but it was: "+t+".")}var Zd=function(){function o(t){var s;if(void 0===t.host){if(void 0!==t.ssl)throw new Vt(_t.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(s=t.ssl)||void 0===s||s;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Vt(_t.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,$g("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return o.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},o}(),Ah=function(){function o(t,s){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zd({}),this._settingsFrozen=!1,t instanceof Gd?(this._databaseId=t,this._credentials=new op):(this._app=t,this._databaseId=function(l){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Vt(_t.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gd(l.options.projectId)}(t),this._credentials=new zg(s))}return Object.defineProperty(o.prototype,"app",{get:function(){if(!this._app)throw new Vt(_t.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),o.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Vt(_t.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zd(t),void 0!==t.credentials&&(this._credentials=function(s){if(!s)return new op;switch(s.type){case"gapi":var l=s.client;return Kn(!("object"!=typeof l||null===l||!l.auth||!l.auth.getAuthHeaderValueForFirstParty)),new Zg(l,s.sessionIndex||"0",s.iamToken||null);case"provider":return s.client;default:throw new Vt(_t.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},o.prototype._getSettings=function(){return this._settings},o.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},o.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},o.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},o.prototype._terminate=function(){return(s=w_.get(this))&&(nn("ComponentProvider","Removing Datastore"),w_.delete(this),s.terminate()),Promise.resolve();var s},o}(),ao=function(){function o(t,s,l){this.converter=s,this._key=l,this.type="document",this.firestore=t}return Object.defineProperty(o.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"parent",{get:function(){return new Oc(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),o.prototype.withConverter=function(t){return new o(this.firestore,t,this._key)},o}(),ta=function(){function o(t,s,l){this.converter=s,this._query=l,this.type="query",this.firestore=t}return o.prototype.withConverter=function(t){return new o(this.firestore,t,this._query)},o}(),Oc=function(o){function t(s,l,p){var v=this;return(v=o.call(this,s,l,yu(p))||this)._path=p,v.type="collection",v}return(0,ne.ZT)(t,o),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var s=this._path.popLast();return s.isEmpty()?null:new ao(this.firestore,null,new Zn(s))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(s){return new t(this.firestore,s,this._path)},t}(ta);function sp(o,t){for(var s,l=[],p=2;p<arguments.length;p++)l[p-2]=arguments[p];if(o=(0,Ke.m9)(o),Gu("collection","path",t),o instanceof Ah)return D_(s=Ie.fromString.apply(Ie,(0,ne.ev)([t],l))),new Oc(o,null,s);if(!(o instanceof ao||o instanceof Oc))throw new Vt(_t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return D_(s=Ie.fromString.apply(Ie,(0,ne.ev)([o.path],l)).child(Ie.fromString(t))),new Oc(o.firestore,null,s)}function sf(o,t){for(var s,l=[],p=2;p<arguments.length;p++)l[p-2]=arguments[p];if(o=(0,Ke.m9)(o),1===arguments.length&&(t=fu.u()),Gu("doc","path",t),o instanceof Ah)return Wg(s=Ie.fromString.apply(Ie,(0,ne.ev)([t],l))),new ao(o,null,new Zn(s));if(!(o instanceof ao||o instanceof Oc))throw new Vt(_t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Wg(s=o._path.child(Ie.fromString.apply(Ie,(0,ne.ev)([t],l)))),new ao(o.firestore,o instanceof Oc?o.converter:null,new Zn(s))}function af(o,t){return o=(0,Ke.m9)(o),t=(0,Ke.m9)(t),(o instanceof ao||o instanceof Oc)&&(t instanceof ao||t instanceof Oc)&&o.firestore===t.firestore&&o.path===t.path&&o.converter===t.converter}function Yg(o,t){return o=(0,Ke.m9)(o),t=(0,Ke.m9)(t),o instanceof ta&&t instanceof ta&&o.firestore===t.firestore&&Rl(o._query,t._query)&&o.converter===t.converter}var T_=function(){function o(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new vh(this,"async_queue_retry"),this.Ic=function(){var l=kd();l&&nn("AsyncQueue","Visibility state changed to "+l.visibilityState),t.Zi.Gi()};var s=kd();s&&"function"==typeof s.addEventListener&&s.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(o.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),o.prototype.enqueueAndForget=function(t){this.enqueue(t)},o.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},o.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var s=kd();s&&"function"==typeof s.removeEventListener&&s.removeEventListener("visibilitychange",this.Ic)}},o.prototype.enqueue=function(t){var s=this;if(this.Ac(),this._c)return new Promise(function(){});var l=new es;return this.Rc(function(){return s._c&&s.Ec?Promise.resolve():(t().then(l.resolve,l.reject),l.promise)}).then(function(){return l.promise})},o.prototype.enqueueRetryable=function(t){var s=this;this.enqueueAndForget(function(){return s.wc.push(t),s.bc()})},o.prototype.bc=function(){return(0,ne.mG)(this,void 0,void 0,function(){var t,s=this;return(0,ne.Jh)(this,function(l){switch(l.label){case 0:if(0===this.wc.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return l.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!hl(t=l.sent()))throw t;return nn("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return s.bc()}),l.label=5;case 5:return[2]}})})},o.prototype.Rc=function(t){var s=this,l=this.dc.then(function(){return s.gc=!0,t().catch(function(p){throw s.yc=p,s.gc=!1,Ri("INTERNAL UNHANDLED ERROR: ",(S=(v=p).message||"",v.stack&&(S=v.stack.includes(v.message)?v.stack:v.message+"\n"+v.stack),S)),p;var v,S}).then(function(p){return s.gc=!1,p})});return this.dc=l,l},o.prototype.enqueueAfterDelay=function(t,s,l){var p=this;this.Ac(),this.Tc.indexOf(t)>-1&&(s=0);var v=vg.createAndSchedule(this,t,s,l,function(S){return p.vc(S)});return this.mc.push(v),v},o.prototype.Ac=function(){this.yc&&kn()},o.prototype.verifyOperationInProgress=function(){},o.prototype.Pc=function(){return(0,ne.mG)(this,void 0,void 0,function(){var t;return(0,ne.Jh)(this,function(s){switch(s.label){case 0:return[4,t=this.dc];case 1:s.sent(),s.label=2;case 2:if(t!==this.dc)return[3,0];s.label=3;case 3:return[2]}})})},o.prototype.Vc=function(t){for(var s=0,l=this.mc;s<l.length;s++)if(l[s].timerId===t)return!0;return!1},o.prototype.Sc=function(t){var s=this;return this.Pc().then(function(){s.mc.sort(function(S,F){return S.targetTimeMs-F.targetTimeMs});for(var l=0,p=s.mc;l<p.length;l++){var v=p[l];if(v.skipDelay(),"all"!==t&&v.timerId===t)break}return s.Pc()})},o.prototype.Dc=function(t){this.Tc.push(t)},o.prototype.vc=function(t){var s=this.mc.indexOf(t);this.mc.splice(s,1)},o}();function rd(o){return function(t,s){if("object"!=typeof t||null===t)return!1;for(var l=t,p=0,v=["next","error","complete"];p<v.length;p++){var S=v[p];if(S in l&&"function"==typeof l[S])return!0}return!1}(o)}!function(){function o(){this._progressObserver={},this._taskCompletionResolver=new es,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}o.prototype.onProgress=function(t,s,l){this._progressObserver={next:t,error:s,complete:l}},o.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},o.prototype.then=function(t,s){return this._taskCompletionResolver.promise.then(t,s)},o.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},o.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},o.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Ho=function(o){function t(s,l){var p=this;return(p=o.call(this,s,l)||this).type="firestore",p._queue=new T_,p._persistenceKey="name"in s?s.name:"[DEFAULT]",p}return(0,ne.ZT)(t,o),t.prototype._terminate=function(){return this._firestoreClient||id(this),this._firestoreClient.terminate()},t}(Ah);function gs(o){return o._firestoreClient||id(o),o._firestoreClient.verifyNotTerminated(),o._firestoreClient}function id(o){var t,v,F,s=o._freezeSettings(),l=(v=(null===(t=o._app)||void 0===t?void 0:t.options.appId)||"",new E_(o._databaseId,v,o._persistenceKey,(F=s).host,F.ssl,F.experimentalForceLongPolling,F.experimentalAutoDetectLongPolling,F.useFetchStreams));o._firestoreClient=new C_(o._credentials,o._queue,l)}function Qg(o,t,s){var l=this,p=new es;return o.asyncQueue.enqueue(function(){return(0,ne.mG)(l,void 0,void 0,function(){var v;return(0,ne.Jh)(this,function(S){switch(S.label){case 0:return S.trys.push([0,3,,4]),[4,Ug(o,s)];case 1:return S.sent(),[4,rf(o,t)];case 2:return S.sent(),p.resolve(),[3,4];case 3:if(!("FirebaseError"===(F=v=S.sent()).name?F.code===_t.FAILED_PRECONDITION||F.code===_t.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&F instanceof DOMException)||22===F.code||20===F.code||11===F.code))throw v;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+v),p.reject(v),[3,4];case 4:return[2]}var F})})}).then(function(){return p.promise})}function Jg(o){if(o._initialized||o._terminated)throw new Vt(_t.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Cl=function(){function o(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];for(var l=0;l<t.length;++l)if(0===t[l].length)throw new Vt(_t.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(t)}return o.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},o}(),od=function(){function o(t){this._byteString=t}return o.fromBase64String=function(t){try{return new o(ir.fromBase64String(t))}catch(s){throw new Vt(_t.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}},o.fromUint8Array=function(t){return new o(ir.fromUint8Array(t))},o.prototype.toBase64=function(){return this._byteString.toBase64()},o.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},o.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},o.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},o}(),Wd=function(o){this._methodName=o},uf=function(){function o(t,s){if(!isFinite(t)||t<-90||t>90)throw new Vt(_t.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new Vt(_t.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}return Object.defineProperty(o.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},o.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},o.prototype._compareTo=function(t){return Pr(this._lat,t._lat)||Pr(this._long,t._long)},o}(),Xg=/^__.*__$/,Co=function(){function o(t,s,l){this.data=t,this.fieldMask=s,this.fieldTransforms=l}return o.prototype.toMutation=function(t,s){return null!==this.fieldMask?new ws(t,this.data,this.fieldMask,s,this.fieldTransforms):new Qa(t,this.data,s,this.fieldTransforms)},o}(),lf=function(){function o(t,s,l){this.data=t,this.fieldMask=s,this.fieldTransforms=l}return o.prototype.toMutation=function(t,s){return new ws(t,this.data,this.fieldMask,s,this.fieldTransforms)},o}();function S_(o){switch(o){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kn()}}var El=function(){function o(t,s,l,p,v,S){this.settings=t,this.databaseId=s,this.R=l,this.ignoreUndefinedProperties=p,void 0===v&&this.Cc(),this.fieldTransforms=v||[],this.fieldMask=S||[]}return Object.defineProperty(o.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),o.prototype.xc=function(t){return new o(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},o.prototype.kc=function(t){var s,l=null===(s=this.path)||void 0===s?void 0:s.child(t),p=this.xc({path:l,Fc:!1});return p.$c(t),p},o.prototype.Oc=function(t){var s,l=null===(s=this.path)||void 0===s?void 0:s.child(t),p=this.xc({path:l,Fc:!1});return p.Cc(),p},o.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},o.prototype.Lc=function(t){return hf(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},o.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(s){return t.isPrefixOf(s)})||void 0!==this.fieldTransforms.find(function(s){return t.isPrefixOf(s.field)})},o.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},o.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(S_(this.Nc)&&Xg.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},o}(),ap=function(){function o(t,s,l){this.databaseId=t,this.ignoreUndefinedProperties=s,this.R=l||Ld(t)}return o.prototype.Uc=function(t,s,l,p){return void 0===p&&(p=!1),new El({Nc:t,methodName:s,qc:l,path:Et.emptyPath(),Fc:!1,Bc:p},this.databaseId,this.R,this.ignoreUndefinedProperties)},o}();function Zl(o){var t=o._freezeSettings(),s=Ld(o._databaseId);return new ap(o._databaseId,!!t.ignoreUndefinedProperties,s)}function up(o,t,s,l,p,v){void 0===v&&(v={});var S=o.Uc(v.merge||v.mergeFields?2:0,t,s,p);cf("Data must be an object, but it was:",S,l);var F,Q,le=hp(l,S);if(v.merge)F=new fn(S.fieldMask),Q=S.fieldTransforms;else if(v.mergeFields){for(var fe=[],xe=0,Ge=v.mergeFields;xe<Ge.length;xe++){var ht=df(t,Ge[xe],s);if(!S.contains(ht))throw new Vt(_t.INVALID_ARGUMENT,"Field '"+ht+"' is specified in your field mask but missing from your input data.");om(fe,ht)||fe.push(ht)}F=new fn(fe),Q=S.fieldTransforms.filter(function(lt){return F.covers(lt.field)})}else F=null,Q=S.fieldTransforms;return new Co(new ci(le),F,Q)}var lp=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ne.ZT)(t,o),t.prototype._toFieldTransform=function(s){if(2!==s.Nc)throw s.Lc(1===s.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return s.fieldMask.push(s.path),null},t.prototype.isEqual=function(s){return s instanceof t},t}(Wd);function em(o,t,s){return new El({Nc:3,qc:t.settings.qc,methodName:o._methodName,Fc:s},t.databaseId,t.R,t.ignoreUndefinedProperties)}var tm=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ne.ZT)(t,o),t.prototype._toFieldTransform=function(s){return new Ka(s.path,new Eu)},t.prototype.isEqual=function(s){return s instanceof t},t}(Wd),nm=function(o){function t(s,l){var p=this;return(p=o.call(this,s)||this).Kc=l,p}return(0,ne.ZT)(t,o),t.prototype._toFieldTransform=function(s){var l=em(this,s,!0),p=this.Kc.map(function(S){return $l(S,l)}),v=new Ya(p);return new Ka(s.path,v)},t.prototype.isEqual=function(s){return this===s},t}(Wd),rm=function(o){function t(s,l){var p=this;return(p=o.call(this,s)||this).Kc=l,p}return(0,ne.ZT)(t,o),t.prototype._toFieldTransform=function(s){var l=em(this,s,!0),p=this.Kc.map(function(S){return $l(S,l)}),v=new Du(p);return new Ka(s.path,v)},t.prototype.isEqual=function(s){return this===s},t}(Wd),im=function(o){function t(s,l){var p=this;return(p=o.call(this,s)||this).Qc=l,p}return(0,ne.ZT)(t,o),t.prototype._toFieldTransform=function(s){var l=new as(s.R,mi(s.R,this.Qc));return new Ka(s.path,l)},t.prototype.isEqual=function(s){return this===s},t}(Wd);function cp(o,t,s,l){var p=o.Uc(1,t,s);cf("Data must be an object, but it was:",p,l);var v=[],S=ci.empty();Z(l,function(Q,le){var fe=pp(t,Q,s);le=(0,Ke.m9)(le);var xe=p.Oc(fe);if(le instanceof lp)v.push(fe);else{var Ge=$l(le,xe);null!=Ge&&(v.push(fe),S.set(fe,Ge))}});var F=new fn(v);return new lf(S,F,p.fieldTransforms)}function dp(o,t,s,l,p,v){var S=o.Uc(1,t,s),F=[df(t,l,s)],Q=[p];if(v.length%2!=0)throw new Vt(_t.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var le=0;le<v.length;le+=2)F.push(df(t,v[le])),Q.push(v[le+1]);for(var fe=[],xe=ci.empty(),Ge=F.length-1;Ge>=0;--Ge)if(!om(fe,F[Ge])){var ht=F[Ge],lt=Q[Ge];lt=(0,Ke.m9)(lt);var wt=S.Oc(ht);if(lt instanceof lp)fe.push(ht);else{var en=$l(lt,wt);null!=en&&(fe.push(ht),xe.set(ht,en))}}var pn=new fn(fe);return new lf(xe,pn,S.fieldTransforms)}function Yd(o,t,s,l){return void 0===l&&(l=!1),$l(s,o.Uc(l?4:3,t))}function $l(o,t){if(fp(o=(0,Ke.m9)(o)))return cf("Unsupported field value:",t,o),hp(o,t);if(o instanceof Wd)return function(s,l){if(!S_(l.Nc))throw l.Lc(s._methodName+"() can only be used with update() and set()");if(!l.path)throw l.Lc(s._methodName+"() is not currently supported inside arrays");var p=s._toFieldTransform(l);p&&l.fieldTransforms.push(p)}(o,t),null;if(void 0===o&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),o instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(s,l){for(var p=[],v=0,S=0,F=s;S<F.length;S++){var Q=$l(F[S],l.Mc(v));null==Q&&(Q={nullValue:"NULL_VALUE"}),p.push(Q),v++}return{arrayValue:{values:p}}}(o,t)}return function(s,l){if(null===(s=(0,Ke.m9)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return mi(l.R,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){var p=U.fromDate(s);return{timestampValue:Jo(l.R,p)}}if(s instanceof U)return p=new U(s.seconds,1e3*Math.floor(s.nanoseconds/1e3)),{timestampValue:Jo(l.R,p)};if(s instanceof uf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof od)return{bytesValue:Cd(l.R,s._byteString)};if(s instanceof ao){var v=s.firestore._databaseId;if(!v.isEqual(p=l.databaseId))throw l.Lc("Document reference is for database "+v.projectId+"/"+v.database+" but should be for database "+p.projectId+"/"+p.database);return{referenceValue:Ll(s.firestore._databaseId||l.databaseId,s._key.path)}}throw l.Lc("Unsupported field value: "+ql(s))}(o,t)}function hp(o,t){var s={};return te(o)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Z(o,function(l,p){var v=$l(p,t.kc(l));null!=v&&(s[l]=v)}),{mapValue:{fields:s}}}function fp(o){return!("object"!=typeof o||null===o||o instanceof Array||o instanceof Date||o instanceof U||o instanceof uf||o instanceof od||o instanceof ao||o instanceof Wd)}function cf(o,t,s){if(!fp(s)||"object"!=typeof(p=s)||null===p||Object.getPrototypeOf(p)!==Object.prototype&&null!==Object.getPrototypeOf(p)){var l=ql(s);throw t.Lc("an object"===l?o+" a custom object":o+" "+l)}var p}function df(o,t,s){if((t=(0,Ke.m9)(t))instanceof Cl)return t._internalPath;if("string"==typeof t)return pp(o,t);throw hf("Field path arguments must be of type string or FieldPath.",o,!1,void 0,s)}var A_=new RegExp("[~\\*/\\[\\]]");function pp(o,t,s){if(t.search(A_)>=0)throw hf("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",o,!1,void 0,s);try{return(new(Cl.bind.apply(Cl,(0,ne.ev)([void 0],t.split(".")))))._internalPath}catch(l){throw hf("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",o,!1,void 0,s)}}function hf(o,t,s,l,p){var v=l&&!l.isEmpty(),S=void 0!==p,F="Function "+t+"() called with invalid data";s&&(F+=" (via `toFirestore()`)");var Q="";return(v||S)&&(Q+=" (found",v&&(Q+=" in field "+l),S&&(Q+=" in document "+p),Q+=")"),new Vt(_t.INVALID_ARGUMENT,(F+=". ")+o+Q)}function om(o,t){return o.some(function(s){return s.isEqual(t)})}var Kd=function(){function o(t,s,l,p,v){this._firestore=t,this._userDataWriter=s,this._key=l,this._document=p,this._converter=v}return Object.defineProperty(o.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ref",{get:function(){return new ao(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),o.prototype.exists=function(){return null!==this._document},o.prototype.data=function(){if(this._document){if(this._converter){var t=new wv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},o.prototype.get=function(t){if(this._document){var s=this._document.data.field(Ih("DocumentSnapshot.get",t));if(null!==s)return this._userDataWriter.convertValue(s)}},o}(),wv=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ne.ZT)(t,o),t.prototype.data=function(){return o.prototype.data.call(this)},t}(Kd);function Ih(o,t){return"string"==typeof t?pp(o,t):t instanceof Cl?t._internalPath:t._delegate._internalPath}var sd=function(){function o(t,s){this.hasPendingWrites=t,this.fromCache=s}return o.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},o}(),Wl=function(o){function t(s,l,p,v,S,F){var Q=this;return(Q=o.call(this,s,l,p,v,F)||this)._firestore=s,Q._firestoreImpl=s,Q.metadata=S,Q}return(0,ne.ZT)(t,o),t.prototype.exists=function(){return o.prototype.exists.call(this)},t.prototype.data=function(s){if(void 0===s&&(s={}),this._document){if(this._converter){var l=new ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(l,s)}return this._userDataWriter.convertValue(this._document.data.value,s.serverTimestamps)}},t.prototype.get=function(s,l){if(void 0===l&&(l={}),this._document){var p=this._document.data.field(Ih("DocumentSnapshot.get",s));if(null!==p)return this._userDataWriter.convertValue(p,l.serverTimestamps)}},t}(Kd),ff=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ne.ZT)(t,o),t.prototype.data=function(s){return void 0===s&&(s={}),o.prototype.data.call(this,s)},t}(Wl),ad=function(){function o(t,s,l,p){this._firestore=t,this._userDataWriter=s,this._snapshot=p,this.metadata=new sd(p.hasPendingWrites,p.fromCache),this.query=l}return Object.defineProperty(o.prototype,"docs",{get:function(){var t=[];return this.forEach(function(s){return t.push(s)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),o.prototype.forEach=function(t,s){var l=this;this._snapshot.docs.forEach(function(p){t.call(s,new ff(l._firestore,l._userDataWriter,p.key,p,new sd(l._snapshot.mutatedKeys.has(p.key),l._snapshot.fromCache),l.query.converter))})},o.prototype.docChanges=function(t){void 0===t&&(t={});var s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Vt(_t.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(l,p){if(l._snapshot.oldDocs.isEmpty()){var v=0;return l._snapshot.docChanges.map(function(F){return{type:"added",doc:new ff(l._firestore,l._userDataWriter,F.doc.key,F.doc,new sd(l._snapshot.mutatedKeys.has(F.doc.key),l._snapshot.fromCache),l.query.converter),oldIndex:-1,newIndex:v++}})}var S=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(function(F){return p||3!==F.type}).map(function(F){var Q=new ff(l._firestore,l._userDataWriter,F.doc.key,F.doc,new sd(l._snapshot.mutatedKeys.has(F.doc.key),l._snapshot.fromCache),l.query.converter),le=-1,fe=-1;return 0!==F.type&&(le=S.indexOf(F.doc.key),S=S.delete(F.doc.key)),1!==F.type&&(fe=(S=S.add(F.doc)).indexOf(F.doc.key)),{type:gp(F.type),doc:Q,oldIndex:le,newIndex:fe}})}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges},o}();function gp(o){switch(o){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kn()}}function sm(o,t){return o instanceof Wl&&t instanceof Wl?o._firestore===t._firestore&&o._key.isEqual(t._key)&&(null===o._document?null===t._document:o._document.isEqual(t._document))&&o._converter===t._converter:o instanceof ad&&t instanceof ad&&o._firestore===t._firestore&&Yg(o.query,t.query)&&o.metadata.isEqual(t.metadata)&&o._snapshot.isEqual(t._snapshot)}function mp(o){if(Ma(o)&&0===o.explicitOrderBy.length)throw new Vt(_t.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qd=function(){};function ud(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];for(var l=0,p=t;l<p.length;l++){var v=p[l];o=v._apply(o)}return o}var zu=function(o){function t(s,l,p){var v=this;return(v=o.call(this)||this).jc=s,v.Wc=l,v.Gc=p,v.type="where",v}return(0,ne.ZT)(t,o),t.prototype._apply=function(s){var v,F,l=Zl(s.firestore),p=function(v,S,F,Q,le,fe,xe){var Ge;if(le.isKeyField()){if("array-contains"===fe||"array-contains-any"===fe)throw new Vt(_t.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+fe+"' queries on FieldPath.documentId().");if("in"===fe||"not-in"===fe){am(xe,fe);for(var ht=[],lt=0,wt=xe;lt<wt.length;lt++)ht.push(vp(Q,v,wt[lt]));Ge={arrayValue:{values:ht}}}else Ge=vp(Q,v,xe)}else"in"!==fe&&"not-in"!==fe&&"array-contains-any"!==fe||am(xe,fe),Ge=Yd(F,"where",xe,"in"===fe||"not-in"===fe);var pn=So.create(le,fe,Ge);return function(tr,nr){if(nr.g()){var Yr=Bc(tr);if(null!==Yr&&!Yr.isEqual(nr.field))throw new Vt(_t.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+Yr.toString()+"' and '"+nr.field.toString()+"'");var di=el(tr);null!==di&&O_(0,nr.field,di)}var ki=function(As,Mp){for(var xh=0,wm=As.filters;xh<wm.length;xh++){var Op=wm[xh];if(Mp.indexOf(Op.op)>=0)return Op.op}return null}(tr,function(As){switch(As){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(nr.op));if(null!==ki)throw new Vt(_t.INVALID_ARGUMENT,ki===nr.op?"Invalid query. You cannot use more than one '"+nr.op.toString()+"' filter.":"Invalid query. You cannot use '"+nr.op.toString()+"' filters with '"+ki.toString()+"' filters.")}(v,pn),pn}(s._query,0,l,s.firestore._databaseId,this.jc,this.Wc,this.Gc);return new ta(s.firestore,s.converter,(F=(v=s._query).filters.concat([p]),new Zs(v.path,v.collectionGroup,v.explicitOrderBy.slice(),F,v.limit,v.limitType,v.startAt,v.endAt)))},t}(Qd),Dv=function(o){function t(s,l){var p=this;return(p=o.call(this)||this).jc=s,p.zc=l,p.type="orderBy",p}return(0,ne.ZT)(t,o),t.prototype._apply=function(s){var p,S,l=function(p,v,S){if(null!==p.startAt)throw new Vt(_t.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==p.endAt)throw new Vt(_t.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var F=new Ju(v,S);return function(Q,le){if(null===el(Q)){var fe=Bc(Q);null!==fe&&O_(0,fe,le.field)}}(p,F),F}(s._query,this.jc,this.zc);return new ta(s.firestore,s.converter,(S=(p=s._query).explicitOrderBy.concat([l]),new Zs(p.path,p.collectionGroup,S,p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)))},t}(Qd),I_=function(o){function t(s,l,p){var v=this;return(v=o.call(this)||this).type=s,v.Hc=l,v.Jc=p,v}return(0,ne.ZT)(t,o),t.prototype._apply=function(s){return new ta(s.firestore,s.converter,jc(s._query,this.Hc,this.Jc))},t}(Qd),M_=function(o){function t(s,l,p){var v=this;return(v=o.call(this)||this).type=s,v.Yc=l,v.Xc=p,v}return(0,ne.ZT)(t,o),t.prototype._apply=function(s){var p,v,l=yp(s,this.type,this.Yc,this.Xc);return new ta(s.firestore,s.converter,(v=l,new Zs((p=s._query).path,p.collectionGroup,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,v,p.endAt)))},t}(Qd),_p=function(o){function t(s,l,p){var v=this;return(v=o.call(this)||this).type=s,v.Yc=l,v.Xc=p,v}return(0,ne.ZT)(t,o),t.prototype._apply=function(s){var p,v,l=yp(s,this.type,this.Yc,this.Xc);return new ta(s.firestore,s.converter,(v=l,new Zs((p=s._query).path,p.collectionGroup,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,v)))},t}(Qd);function yp(o,t,s,l){if(s[0]=(0,Ke.m9)(s[0]),s[0]instanceof Kd)return function(v,S,F,Q,le){if(!Q)throw new Vt(_t.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+F+"().");for(var fe=[],xe=0,Ge=Oa(v);xe<Ge.length;xe++){var ht=Ge[xe];if(ht.field.isKeyField())fe.push(ic(S,Q.key));else{var lt=Q.data.field(ht.field);if(Uo(lt))throw new Vt(_t.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ht.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===lt){var wt=ht.field.canonicalString();throw new Vt(_t.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+wt+"' (used as the orderBy) does not exist.")}fe.push(lt)}}return new Ps(fe,le)}(o._query,o.firestore._databaseId,t,s[0]._document,l);var p=Zl(o.firestore);return function(v,S,F,Q,le,fe){var xe=v.explicitOrderBy;if(le.length>xe.length)throw new Vt(_t.INVALID_ARGUMENT,"Too many arguments provided to "+Q+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var Ge=[],ht=0;ht<le.length;ht++){var lt=le[ht];if(xe[ht].field.isKeyField()){if("string"!=typeof lt)throw new Vt(_t.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+Q+"(), but got a "+typeof lt);if(!tl(v)&&-1!==lt.indexOf("/"))throw new Vt(_t.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+Q+"() must be a plain document ID, but '"+lt+"' contains a slash.");var wt=v.path.child(Ie.fromString(lt));if(!Zn.isDocumentKey(wt))throw new Vt(_t.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+Q+"() must result in a valid document path, but '"+wt+"' is not because it contains an odd number of segments.");var en=new Zn(wt);Ge.push(ic(S,en))}else{var pn=Yd(F,Q,lt);Ge.push(pn)}}return new Ps(Ge,fe)}(o._query,o.firestore._databaseId,p,t,s,l)}function vp(o,t,s){if("string"==typeof(s=(0,Ke.m9)(s))){if(""===s)throw new Vt(_t.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!tl(t)&&-1!==s.indexOf("/"))throw new Vt(_t.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+s+"' contains a '/' character.");var l=t.path.child(Ie.fromString(s));if(!Zn.isDocumentKey(l))throw new Vt(_t.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+l+"' is not because it has an odd number of segments ("+l.length+").");return ic(o,new Zn(l))}if(s instanceof ao)return ic(o,s._key);throw new Vt(_t.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ql(s)+".")}function am(o,t){if(!Array.isArray(o)||0===o.length)throw new Vt(_t.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(o.length>10)throw new Vt(_t.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function O_(o,t,s){if(!s.isEqual(t))throw new Vt(_t.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+s.toString()+"' instead.")}var pf=function(){function o(){}return o.prototype.convertValue=function(t,s){switch(void 0===s&&(s="none"),Mi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Un(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes(mo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 10:return this.convertObject(t.mapValue,s);default:throw kn()}},o.prototype.convertObject=function(t,s){var l=this,p={};return Z(t.fields,function(v,S){p[v]=l.convertValue(S,s)}),p},o.prototype.convertGeoPoint=function(t){return new uf(Un(t.latitude),Un(t.longitude))},o.prototype.convertArray=function(t,s){var l=this;return(t.values||[]).map(function(p){return l.convertValue(p,s)})},o.prototype.convertServerTimestamp=function(t,s){switch(s){case"previous":var l=_o(t);return null==l?null:this.convertValue(l,s);case"estimate":return this.convertTimestamp(Hs(t));default:return null}},o.prototype.convertTimestamp=function(t){var s=Ir(t);return new U(s.seconds,s.nanos)},o.prototype.convertDocumentKey=function(t,s){var l=Ie.fromString(t);Kn(Ys(l));var p=new Gd(l.get(1),l.get(3)),v=new Zn(l.popFirst(5));return p.isEqual(s)||Ri("Document "+v+" contains a document reference within a different database ("+p.projectId+"/"+p.database+") which is not supported. It will be treated as a reference in the current database ("+s.projectId+"/"+s.database+") instead."),v},o}();function Jd(o,t,s){return o?s&&(s.merge||s.mergeFields)?o.toFirestore(t,s):o.toFirestore(t):t}var R_=function(o){function t(s){var l=this;return(l=o.call(this)||this).firestore=s,l}return(0,ne.ZT)(t,o),t.prototype.convertBytes=function(s){return new od(s)},t.prototype.convertReference=function(s){var l=this.convertDocumentKey(s,this.firestore._databaseId);return new ao(this.firestore,null,l)},t}(pf),bp=function(){function o(t,s){this._firestore=t,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Zl(t)}return o.prototype.set=function(t,s,l){this._verifyNotCommitted();var p=Rc(t,this._firestore),v=Jd(p.converter,s,l),S=up(this._dataReader,"WriteBatch.set",p._key,v,null!==p.converter,l);return this._mutations.push(S.toMutation(p._key,Ao.none())),this},o.prototype.update=function(t,s,l){for(var p=[],v=3;v<arguments.length;v++)p[v-3]=arguments[v];this._verifyNotCommitted();var S,F=Rc(t,this._firestore);return S="string"==typeof(s=(0,Ke.m9)(s))||s instanceof Cl?dp(this._dataReader,"WriteBatch.update",F._key,s,l,p):cp(this._dataReader,"WriteBatch.update",F._key,s),this._mutations.push(S.toMutation(F._key,Ao.exists(!0))),this},o.prototype.delete=function(t){this._verifyNotCommitted();var s=Rc(t,this._firestore);return this._mutations=this._mutations.concat(new aa(s._key,Ao.none())),this},o.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},o.prototype._verifyNotCommitted=function(){if(this._committed)throw new Vt(_t.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},o}();function Rc(o,t){if((o=(0,Ke.m9)(o)).firestore!==t)throw new Vt(_t.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return o}var ld=function(o){function t(s){var l=this;return(l=o.call(this)||this).firestore=s,l}return(0,ne.ZT)(t,o),t.prototype.convertBytes=function(s){return new od(s)},t.prototype.convertReference=function(s){var l=this.convertDocumentKey(s,this.firestore._databaseId);return new ao(this.firestore,null,l)},t}(pf);function um(o,t,s){for(var l=[],p=3;p<arguments.length;p++)l[p-3]=arguments[p];o=Ti(o,ao);var v=Ti(o.firestore,Ho),S=Zl(v);return Mh(v,[("string"==typeof(t=(0,Ke.m9)(t))||t instanceof Cl?dp(S,"updateDoc",o._key,t,s,l):cp(S,"updateDoc",o._key,t)).toMutation(o._key,Ao.exists(!0))])}function lm(o){for(var t,s,l,p=[],v=1;v<arguments.length;v++)p[v-1]=arguments[v];o=(0,Ke.m9)(o);var S={includeMetadataChanges:!1},F=0;"object"!=typeof p[F]||rd(p[F])||(S=p[F],F++);var Q,le,fe,xe={includeMetadataChanges:S.includeMetadataChanges};if(rd(p[F])){var Ge=p[F];p[F]=null===(t=Ge.next)||void 0===t?void 0:t.bind(Ge),p[F+1]=null===(s=Ge.error)||void 0===s?void 0:s.bind(Ge),p[F+2]=null===(l=Ge.complete)||void 0===l?void 0:l.bind(Ge)}if(o instanceof ao)le=Ti(o.firestore,Ho),fe=yu(o._key.path),Q={next:function(wt){p[F]&&p[F](Cp(le,o,wt))},error:p[F+1],complete:p[F+2]};else{var ht=Ti(o,ta);le=Ti(ht.firestore,Ho),fe=ht._query;var lt=new ld(le);Q={next:function(wt){p[F]&&p[F](new ad(le,lt,ht,wt))},error:p[F+1],complete:p[F+2]},mp(o._query)}return function(wt,en,pn,tr){var nr=this,Yr=new nf(tr),di=new Wf(en,Yr,pn);return wt.asyncQueue.enqueueAndForget(function(){return(0,ne.mG)(nr,void 0,void 0,function(){var ki;return(0,ne.Jh)(this,function(As){switch(As.label){case 0:return ki=Zf,[4,Mc(wt)];case 1:return[2,ki.apply(void 0,[As.sent(),di])]}})})}),function(){Yr.Wo(),wt.asyncQueue.enqueueAndForget(function(){return(0,ne.mG)(nr,void 0,void 0,function(){var ki;return(0,ne.Jh)(this,function(As){switch(As.label){case 0:return ki=Cg,[4,Mc(wt)];case 1:return[2,ki.apply(void 0,[As.sent(),di])]}})})})}}(gs(le),fe,xe,Q)}function Mh(o,t){return function(s,l){var p=this,v=new es;return s.asyncQueue.enqueueAndForget(function(){return(0,ne.mG)(p,void 0,void 0,function(){var S;return(0,ne.Jh)(this,function(F){switch(F.label){case 0:return S=ef,[4,Sh(s)];case 1:return[2,S.apply(void 0,[F.sent(),l,v])]}})})}),v.promise}(gs(o),t)}function Cp(o,t,s){var l=s.docs.get(t._key),p=new ld(o);return new Wl(o,p,t._key,l,new sd(s.hasPendingWrites,s.fromCache),t.converter)}var gf=function(o){function t(s,l){var p=this;return(p=o.call(this,s,l)||this)._firestore=s,p}return(0,ne.ZT)(t,o),t.prototype.get=function(s){var l=this,p=Rc(s,this._firestore),v=new ld(this._firestore);return o.prototype.get.call(this,s).then(function(S){return new Wl(l._firestore,v,p._key,S._document,new sd(!1,!1),p.converter)})},t}(function(){function o(t,s){this._firestore=t,this._transaction=s,this._dataReader=Zl(t)}return o.prototype.get=function(t){var s=this,l=Rc(t,this._firestore),p=new R_(this._firestore);return this._transaction.lookup([l._key]).then(function(v){if(!v||1!==v.length)return kn();var S=v[0];if(S.isFoundDocument())return new Kd(s._firestore,p,S.key,S,l.converter);if(S.isNoDocument())return new Kd(s._firestore,p,l._key,null,l.converter);throw kn()})},o.prototype.set=function(t,s,l){var p=Rc(t,this._firestore),v=Jd(p.converter,s,l),S=up(this._dataReader,"Transaction.set",p._key,v,null!==p.converter,l);return this._transaction.set(p._key,S),this},o.prototype.update=function(t,s,l){for(var p=[],v=3;v<arguments.length;v++)p[v-3]=arguments[v];var S,F=Rc(t,this._firestore);return S="string"==typeof(s=(0,Ke.m9)(s))||s instanceof Cl?dp(this._dataReader,"Transaction.update",F._key,s,l,p):cp(this._dataReader,"Transaction.update",F._key,s),this._transaction.update(F._key,S),this},o.prototype.delete=function(t){var s=Rc(t,this._firestore);return this._transaction.delete(s._key),this},o}());function cd(){if("undefined"==typeof Uint8Array)throw new Vt(_t.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ep(){if("undefined"==typeof atob)throw new Vt(_t.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var uu=function(){function o(t){this._delegate=t}return o.fromBase64String=function(t){return Ep(),new o(od.fromBase64String(t))},o.fromUint8Array=function(t){return cd(),new o(od.fromUint8Array(t))},o.prototype.toBase64=function(){return Ep(),this._delegate.toBase64()},o.prototype.toUint8Array=function(){return cd(),this._delegate.toUint8Array()},o.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},o.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},o}(),Oh=function(){function o(){}return o.prototype.enableIndexedDbPersistence=function(t,s){return function(l,p){Jg(l=Ti(l,Ho));var v=gs(l),S=l._freezeSettings(),F=new wh;return Qg(v,F,new kg(F,S.cacheSizeBytes,null==p?void 0:p.forceOwnership))}(t._delegate,{forceOwnership:s})},o.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(s){Jg(s=Ti(s,Ho));var l=gs(s),p=s._freezeSettings(),v=new wh;return Qg(l,v,new bl(v,p.cacheSizeBytes))}(t._delegate)},o.prototype.clearIndexedDbPersistence=function(t){return function(s){var l=this;if(s._initialized&&!s._terminated)throw new Vt(_t.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var p=new es;return s._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,ne.mG)(l,void 0,void 0,function(){var v;return(0,ne.Jh)(this,function(S){switch(S.label){case 0:return S.trys.push([0,2,,3]),[4,function(F){return(0,ne.mG)(this,void 0,void 0,function(){return(0,ne.Jh)(this,function(le){switch(le.label){case 0:return tu.yt()?[4,tu.delete(F+"main")]:[2,Promise.resolve()];case 1:return le.sent(),[2]}})})}(Me(s._databaseId,s._persistenceKey))];case 1:return S.sent(),p.resolve(),[3,3];case 2:return v=S.sent(),p.reject(v),[3,3];case 3:return[2]}})})}),p.promise}(t._delegate)},o}(),cm=function(){function o(t,s,l){var p=this;this._delegate=s,this.Zc=l,this.INTERNAL={delete:function(){return p.terminate()}},t instanceof Gd||(this.tu=t)}return Object.defineProperty(o.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),o.prototype.settings=function(t){var s=this._delegate._getSettings();t.merge||s.host===t.host||Cs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},s),t)).merge,this._delegate._setSettings(t)},o.prototype.useEmulator=function(t,s,l){void 0===l&&(l={}),function(p,v,S,F){var Q;void 0===F&&(F={});var le=(p=Ti(p,Ah))._getSettings();if("firestore.googleapis.com"!==le.host&&le.host!==v&&Cs("Host has been set in both settings() and useEmulator(), emulator host will be used"),p._setSettings(Object.assign(Object.assign({},le),{host:v+":"+S,ssl:!1})),F.mockUserToken){var fe,xe;if("string"==typeof F.mockUserToken)fe=F.mockUserToken,xe=Ss.MOCK_USER;else{fe=(0,Ke.Sg)(F.mockUserToken,null===(Q=p._app)||void 0===Q?void 0:Q.options.projectId);var Ge=F.mockUserToken.sub||F.mockUserToken.user_id;if(!Ge)throw new Vt(_t.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");xe=new Ss(Ge)}p._credentials=new Gg(new Hg(fe,xe))}}(this._delegate,t,s,l)},o.prototype.enableNetwork=function(){return function(t){var s=this;return t.asyncQueue.enqueue(function(){return(0,ne.mG)(s,void 0,void 0,function(){var l,p;return(0,ne.Jh)(this,function(v){switch(v.label){case 0:return[4,Dh(t)];case 1:return l=v.sent(),[4,Bg(t)];case 2:return p=v.sent(),[2,(l.setNetworkEnabled(!0),S=p,F=un(S),F.Or.delete(0),ed(F))]}var S,F})})})}(gs(Ti(this._delegate,Ho)))},o.prototype.disableNetwork=function(){return function(t){var s=this;return t.asyncQueue.enqueue(function(){return(0,ne.mG)(s,void 0,void 0,function(){var l,p;return(0,ne.Jh)(this,function(v){switch(v.label){case 0:return[4,Dh(t)];case 1:return l=v.sent(),[4,Bg(t)];case 2:return p=v.sent(),[2,(l.setNetworkEnabled(!1),function(S){return(0,ne.mG)(this,void 0,void 0,function(){var F;return(0,ne.Jh)(this,function(Q){switch(Q.label){case 0:return(F=un(S)).Or.add(0),[4,bh(F)];case 1:return Q.sent(),F.Br.set("Offline"),[2]}})})}(p))]}})})})}(gs(Ti(this._delegate,Ho)))},o.prototype.enablePersistence=function(t){var s=!1,l=!1;return t&&$g("synchronizeTabs",s=!!t.synchronizeTabs,"experimentalForceOwningTab",l=!!t.experimentalForceOwningTab),s?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,l)},o.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},o.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},o.prototype.waitForPendingWrites=function(){return function(t){var s=this,l=new es;return t.asyncQueue.enqueueAndForget(function(){return(0,ne.mG)(s,void 0,void 0,function(){var p;return(0,ne.Jh)(this,function(v){switch(v.label){case 0:return p=g_,[4,Sh(t)];case 1:return[2,p.apply(void 0,[v.sent(),l])]}})})}),l.promise}(gs(Ti(this._delegate,Ho)))},o.prototype.onSnapshotsInSync=function(t){return l=t,function(p,v){var S=this,F=new nf(v);return p.asyncQueue.enqueueAndForget(function(){return(0,ne.mG)(S,void 0,void 0,function(){var Q;return(0,ne.Jh)(this,function(le){switch(le.label){case 0:return Q=function(fe,xe){un(fe).Gr.add(xe),xe.next()},[4,Mc(p)];case 1:return[2,Q.apply(void 0,[le.sent(),F])]}})})}),function(){F.Wo(),p.asyncQueue.enqueueAndForget(function(){return(0,ne.mG)(S,void 0,void 0,function(){var Q;return(0,ne.Jh)(this,function(le){switch(le.label){case 0:return Q=function(fe,xe){un(fe).Gr.delete(xe)},[4,Mc(p)];case 1:return[2,Q.apply(void 0,[le.sent(),F])]}})})})}}(gs(Ti(this._delegate,Ho)),rd(l)?l:{next:l});var l},Object.defineProperty(o.prototype,"app",{get:function(){if(!this.tu)throw new Vt(_t.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),o.prototype.collection=function(t){try{return new Yl(this,sp(this._delegate,t))}catch(s){throw ms(s,"collection()","Firestore.collection()")}},o.prototype.doc=function(t){try{return new ka(this,sf(this._delegate,t))}catch(s){throw ms(s,"doc()","Firestore.doc()")}},o.prototype.collectionGroup=function(t){try{return new Tl(this,function(s,l){if(s=Ti(s,Ah),Gu("collectionGroup","collection id",l),l.indexOf("/")>=0)throw new Vt(_t.INVALID_ARGUMENT,"Invalid collection ID '"+l+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ta(s,null,(p=l,new Zs(Ie.emptyPath(),p)));var p}(this._delegate,t))}catch(s){throw ms(s,"collectionGroup()","Firestore.collectionGroup()")}},o.prototype.runTransaction=function(t){var l,s=this;return function(v,S){var F=this,Q=new es;return v.asyncQueue.enqueueAndForget(function(){return(0,ne.mG)(F,void 0,void 0,function(){var le;return(0,ne.Jh)(this,function(fe){switch(fe.label){case 0:return[4,(xe=v,of(xe).then(function(Ge){return Ge.datastore}))];case 1:return le=fe.sent(),new b_(v.asyncQueue,le,S,Q).run(),[2]}var xe})})}),Q.promise}(gs(l=this._delegate),function(v){return function(l){return t(new qu(s,l))}(new gf(l,v))})},o.prototype.batch=function(){var t=this;return gs(this._delegate),new Xd(new bp(this._delegate,function(s){return Mh(t._delegate,s)}))},o.prototype.loadBundle=function(t){throw new Vt(_t.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},o.prototype.namedQuery=function(t){throw new Vt(_t.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},o}(),mf=function(o){function t(s){var l=this;return(l=o.call(this)||this).firestore=s,l}return(0,ne.ZT)(t,o),t.prototype.convertBytes=function(s){return new uu(new od(s))},t.prototype.convertReference=function(s){var l=this.convertDocumentKey(s,this.firestore._databaseId);return ka.eu(l,this.firestore,null)},t}(pf),qu=function(){function o(t,s){this._firestore=t,this._delegate=s,this._userDataWriter=new mf(t)}return o.prototype.get=function(t){var s=this,l=lu(t);return this._delegate.get(l).then(function(p){return new wl(s._firestore,new Wl(s._firestore._delegate,s._userDataWriter,p._key,p._document,p.metadata,l.converter))})},o.prototype.set=function(t,s,l){var p=lu(t);return l?(zd("Transaction.set",l),this._delegate.set(p,s,l)):this._delegate.set(p,s),this},o.prototype.update=function(t,s,l){for(var p,v=[],S=3;S<arguments.length;S++)v[S-3]=arguments[S];var F=lu(t);return 2===arguments.length?this._delegate.update(F,s):(p=this._delegate).update.apply(p,(0,ne.ev)([F,s,l],v)),this},o.prototype.delete=function(t){var s=lu(t);return this._delegate.delete(s),this},o}(),Xd=function(){function o(t){this._delegate=t}return o.prototype.set=function(t,s,l){var p=lu(t);return l?(zd("WriteBatch.set",l),this._delegate.set(p,s,l)):this._delegate.set(p,s),this},o.prototype.update=function(t,s,l){for(var p,v=[],S=3;S<arguments.length;S++)v[S-3]=arguments[S];var F=lu(t);return 2===arguments.length?this._delegate.update(F,s):(p=this._delegate).update.apply(p,(0,ne.ev)([F,s,l],v)),this},o.prototype.delete=function(t){var s=lu(t);return this._delegate.delete(s),this},o.prototype.commit=function(){return this._delegate.commit()},o}(),cs=function(){function o(t,s,l){this._firestore=t,this._userDataWriter=s,this._delegate=l}return o.prototype.fromFirestore=function(t,s){var l=new ff(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Dl(this._firestore,l),null!=s?s:{})},o.prototype.toFirestore=function(t,s){return s?this._delegate.toFirestore(t,s):this._delegate.toFirestore(t)},o.nu=function(t,s){var l=o.su,p=l.get(t);p||(p=new WeakMap,l.set(t,p));var v=p.get(s);return v||(v=new o(t,new mf(t),s),p.set(s,v)),v},o}();cs.su=new WeakMap;var ka=function(){function o(t,s){this.firestore=t,this._delegate=s,this._userDataWriter=new mf(t)}return o.iu=function(t,s,l){if(t.length%2!=0)throw new Vt(_t.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new o(s,new ao(s._delegate,l,new Zn(t)))},o.eu=function(t,s,l){return new o(s,new ao(s._delegate,l,t))},Object.defineProperty(o.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"parent",{get:function(){return new Yl(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),o.prototype.collection=function(t){try{return new Yl(this.firestore,sp(this._delegate,t))}catch(s){throw ms(s,"collection()","DocumentReference.collection()")}},o.prototype.isEqual=function(t){return(t=(0,Ke.m9)(t))instanceof ao&&af(this._delegate,t)},o.prototype.set=function(t,s){s=zd("DocumentReference.set",s);try{return function(l,p,v){l=Ti(l,ao);var S=Ti(l.firestore,Ho),F=Jd(l.converter,p,v);return Mh(S,[up(Zl(S),"setDoc",l._key,F,null!==l.converter,v).toMutation(l._key,Ao.none())])}(this._delegate,t,s)}catch(l){throw ms(l,"setDoc()","DocumentReference.set()")}},o.prototype.update=function(t,s){for(var l=[],p=2;p<arguments.length;p++)l[p-2]=arguments[p];try{return 1===arguments.length?um(this._delegate,t):um.apply(void 0,(0,ne.ev)([this._delegate,t,s],l))}catch(v){throw ms(v,"updateDoc()","DocumentReference.update()")}},o.prototype.delete=function(){return Mh(Ti((t=this._delegate).firestore,Ho),[new aa(t._key,Ao.none())]);var t},o.prototype.onSnapshot=function(){for(var t=this,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var p=La(s),v=_f(s,function(S){return new wl(t.firestore,new Wl(t.firestore._delegate,t._userDataWriter,S._key,S._document,S.metadata,t._delegate.converter))});return lm(this._delegate,p,v)},o.prototype.get=function(t){var s=this;return("cache"===(null==t?void 0:t.source)?function(l){l=Ti(l,ao);var p=Ti(l.firestore,Ho),v=gs(p),S=new ld(p);return function(F,Q){var le=this,fe=new es;return F.asyncQueue.enqueueAndForget(function(){return(0,ne.mG)(le,void 0,void 0,function(){var xe;return(0,ne.Jh)(this,function(Ge){switch(Ge.label){case 0:return xe=function(ht,lt,wt){return(0,ne.mG)(this,void 0,void 0,function(){var en,pn;return(0,ne.Jh)(this,function(tr){switch(tr.label){case 0:return tr.trys.push([0,2,,3]),[4,(nr=ht,Yr=lt,di=un(nr),di.persistence.runTransaction("read document","readonly",function(ki){return di.Mn.mn(ki,Yr)}))];case 1:return(pn=tr.sent()).isFoundDocument()?wt.resolve(pn):pn.isNoDocument()?wt.resolve(null):wt.reject(new Vt(_t.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return en=tr.sent(),pn=Sc(en,"Failed to get document '"+lt+" from cache"),wt.reject(pn),[3,3];case 3:return[2]}var nr,Yr,di})})},[4,Th(F)];case 1:return[2,xe.apply(void 0,[Ge.sent(),Q,fe])]}})})}),fe.promise}(v,l._key).then(function(F){return new Wl(p,S,l._key,F,new sd(null!==F&&F.hasLocalMutations,!0),l.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(l){l=Ti(l,ao);var p=Ti(l.firestore,Ho);return ip(gs(p),l._key,{source:"server"}).then(function(v){return Cp(p,l,v)})}(this._delegate):function(l){l=Ti(l,ao);var p=Ti(l.firestore,Ho);return ip(gs(p),l._key).then(function(v){return Cp(p,l,v)})}(this._delegate)).then(function(l){return new wl(s.firestore,new Wl(s.firestore._delegate,s._userDataWriter,l._key,l._document,l.metadata,s._delegate.converter))})},o.prototype.withConverter=function(t){return new o(this.firestore,this._delegate.withConverter(t?cs.nu(this.firestore,t):null))},o}();function ms(o,t,s){return o.message=o.message.replace(t,s),o}function La(o){for(var t=0,s=o;t<s.length;t++){var l=s[t];if("object"==typeof l&&!rd(l))return l}return{}}function _f(o,t){var s,l,p;return{next:function(v){p.next&&p.next(t(v))},error:null===(s=(p=rd(o[0])?o[0]:rd(o[1])?o[1]:"function"==typeof o[0]?{next:o[0],error:o[1],complete:o[2]}:{next:o[1],error:o[2],complete:o[3]}).error)||void 0===s?void 0:s.bind(p),complete:null===(l=p.complete)||void 0===l?void 0:l.bind(p)}}var wl=function(){function o(t,s){this._firestore=t,this._delegate=s}return Object.defineProperty(o.prototype,"ref",{get:function(){return new ka(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),o.prototype.data=function(t){return this._delegate.data(t)},o.prototype.get=function(t,s){return this._delegate.get(t,s)},o.prototype.isEqual=function(t){return sm(this._delegate,t._delegate)},o}(),Dl=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,ne.ZT)(t,o),t.prototype.data=function(s){return this._delegate.data(s)},t}(wl),Tl=function(){function o(t,s){this.firestore=t,this._delegate=s,this._userDataWriter=new mf(t)}return o.prototype.where=function(t,s,l){try{return new o(this.firestore,ud(this._delegate,(S=l,F=s,Q=Ih("where",p=t),new zu(Q,F,S))))}catch(p){throw ms(p,/(orderBy|where)\(\)/,"Query.$1()")}var p,S,F,Q},o.prototype.orderBy=function(t,s){try{return new o(this.firestore,ud(this._delegate,function(l,p){void 0===p&&(p="asc");var v=p,S=Ih("orderBy",l);return new Dv(S,v)}(t,s)))}catch(l){throw ms(l,/(orderBy|where)\(\)/,"Query.$1()")}},o.prototype.limit=function(t){try{return new o(this.firestore,ud(this._delegate,(qd("limit",s=t),new I_("limit",s,"F"))))}catch(s){throw ms(s,"limit()","Query.limit()")}var s},o.prototype.limitToLast=function(t){try{return new o(this.firestore,ud(this._delegate,(qd("limitToLast",s=t),new I_("limitToLast",s,"L"))))}catch(s){throw ms(s,"limitToLast()","Query.limitToLast()")}var s},o.prototype.startAt=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,ud(this._delegate,function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];return new M_("startAt",l,!0)}.apply(void 0,t)))}catch(l){throw ms(l,"startAt()","Query.startAt()")}},o.prototype.startAfter=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,ud(this._delegate,function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];return new M_("startAfter",l,!1)}.apply(void 0,t)))}catch(l){throw ms(l,"startAfter()","Query.startAfter()")}},o.prototype.endBefore=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,ud(this._delegate,function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];return new _p("endBefore",l,!0)}.apply(void 0,t)))}catch(l){throw ms(l,"endBefore()","Query.endBefore()")}},o.prototype.endAt=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,ud(this._delegate,function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];return new _p("endAt",l,!1)}.apply(void 0,t)))}catch(l){throw ms(l,"endAt()","Query.endAt()")}},o.prototype.isEqual=function(t){return Yg(this._delegate,t._delegate)},o.prototype.get=function(t){var s=this;return("cache"===(null==t?void 0:t.source)?function(l){l=Ti(l,ta);var p=Ti(l.firestore,Ho),v=gs(p),S=new ld(p);return function(F,Q){var le=this,fe=new es;return F.asyncQueue.enqueueAndForget(function(){return(0,ne.mG)(le,void 0,void 0,function(){var xe;return(0,ne.Jh)(this,function(Ge){switch(Ge.label){case 0:return xe=function(ht,lt,wt){return(0,ne.mG)(this,void 0,void 0,function(){var en,pn,tr,nr,Yr;return(0,ne.Jh)(this,function(di){switch(di.label){case 0:return di.trys.push([0,2,,3]),[4,Gh(ht,lt,!0)];case 1:return Yr=di.sent(),en=new nd(lt,Yr.Bn),pn=en._o(Yr.documents),tr=en.applyChanges(pn,!1),wt.resolve(tr.snapshot),[3,3];case 2:return nr=di.sent(),Yr=Sc(nr,"Failed to execute query '"+lt+" against cache"),wt.reject(Yr),[3,3];case 3:return[2]}})})},[4,Th(F)];case 1:return[2,xe.apply(void 0,[Ge.sent(),Q,fe])]}})})}),fe.promise}(v,l._query).then(function(F){return new ad(p,S,l,F)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(l){l=Ti(l,ta);var p=Ti(l.firestore,Ho),v=gs(p),S=new ld(p);return jg(v,l._query,{source:"server"}).then(function(F){return new ad(p,S,l,F)})}(this._delegate):function(l){l=Ti(l,ta);var p=Ti(l.firestore,Ho),v=gs(p),S=new ld(p);return mp(l._query),jg(v,l._query).then(function(F){return new ad(p,S,l,F)})}(this._delegate)).then(function(l){return new xc(s.firestore,new ad(s.firestore._delegate,s._userDataWriter,s._delegate,l._snapshot))})},o.prototype.onSnapshot=function(){for(var t=this,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var p=La(s),v=_f(s,function(S){return new xc(t.firestore,new ad(t.firestore._delegate,t._userDataWriter,t._delegate,S._snapshot))});return lm(this._delegate,p,v)},o.prototype.withConverter=function(t){return new o(this.firestore,this._delegate.withConverter(t?cs.nu(this.firestore,t):null))},o}(),eh=function(){function o(t,s){this._firestore=t,this._delegate=s}return Object.defineProperty(o.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"doc",{get:function(){return new Dl(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),o}(),xc=function(){function o(t,s){this._firestore=t,this._delegate=s}return Object.defineProperty(o.prototype,"query",{get:function(){return new Tl(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(s){return new Dl(t._firestore,s)})},enumerable:!1,configurable:!0}),o.prototype.docChanges=function(t){var s=this;return this._delegate.docChanges(t).map(function(l){return new eh(s._firestore,l)})},o.prototype.forEach=function(t,s){var l=this;this._delegate.forEach(function(p){t.call(s,new Dl(l._firestore,p))})},o.prototype.isEqual=function(t){return sm(this._delegate,t._delegate)},o}(),Yl=function(o){function t(s,l){var p=this;return(p=o.call(this,s,l)||this).firestore=s,p._delegate=l,p}return(0,ne.ZT)(t,o),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var s=this._delegate.parent;return s?new ka(this.firestore,s):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(s){try{return new ka(this.firestore,void 0===s?sf(this._delegate):sf(this._delegate,s))}catch(l){throw ms(l,"doc()","CollectionReference.doc()")}},t.prototype.add=function(s){var p,v,S,F,Q,l=this;return(p=this._delegate,v=s,S=Ti(p.firestore,Ho),F=sf(p),Q=Jd(p.converter,v),Mh(S,[up(Zl(p.firestore),"addDoc",F._key,Q,null!==p.converter,{}).toMutation(F._key,Ao.exists(!1))]).then(function(){return F})).then(function(p){return new ka(l.firestore,p)})},t.prototype.isEqual=function(s){return af(this._delegate,s._delegate)},t.prototype.withConverter=function(s){return new t(this.firestore,this._delegate.withConverter(s?cs.nu(this.firestore,s):null))},t}(Tl);function lu(o){return Ti(o,ao)}var th=function(){function o(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];this._delegate=new(Cl.bind.apply(Cl,(0,ne.ev)([void 0],t)))}return o.documentId=function(){return new o(Et.keyField().canonicalString())},o.prototype.isEqual=function(t){return(t=(0,Ke.m9)(t))instanceof Cl&&this._delegate._internalPath.isEqual(t._internalPath)},o}(),nh=function(){function o(t){this._delegate=t}return o.serverTimestamp=function(){var t=new tm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new o(t)},o.delete=function(){var t=new lp("deleteField");return t._methodName="FieldValue.delete",new o(t)},o.arrayUnion=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l=function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];return new nm("arrayUnion",p)}.apply(void 0,t);return l._methodName="FieldValue.arrayUnion",new o(l)},o.arrayRemove=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l=function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];return new rm("arrayRemove",p)}.apply(void 0,t);return l._methodName="FieldValue.arrayRemove",new o(l)},o.increment=function(t){var s=new im("increment",t);return s._methodName="FieldValue.increment",new o(s)},o.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},o}(),dm=K(6034),hm={Firestore:cm,GeoPoint:uf,Timestamp:U,Blob:uu,Transaction:qu,WriteBatch:Xd,DocumentReference:ka,DocumentSnapshot:wl,Query:Tl,QueryDocumentSnapshot:Dl,QuerySnapshot:xc,CollectionReference:Yl,FieldPath:th,FieldValue:nh,setLogLevel:function(o){ss.setLogLevel(o)},CACHE_SIZE_UNLIMITED:-1};!function(o){o.INTERNAL.registerComponent(new dm.wA("firestore",function(l){return t=l.getProvider("app").getImmediate(),s=l.getProvider("auth-internal"),new cm(t,new Ho(t,s),new Oh);var t,s},"PUBLIC").setServiceProps(Object.assign({},hm))),o.registerVersion("@firebase/firestore","2.4.0")}(Xe.Z);var Dp=K(9829);function Tp(o,t){return function(o,t=J.z){return new C.y(s=>{let l;return null!=t?t.schedule(()=>{l=o.onSnapshot({includeMetadataChanges:!0},s)}):l=o.onSnapshot({includeMetadataChanges:!0},s),()=>{null!=l&&l()}})}(o,t)}function Sp(o,t){return Tp(o,t).pipe((0,be.U)(s=>({payload:s,type:"query"})))}function Rh(o,t){return Sp(o,t).pipe((0,Ne.O)(void 0),(0,he.G)(),(0,be.U)(([s,l])=>{const p=l.payload.docChanges(),v=p.map(S=>({type:S.type,payload:S}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(l.payload.metadata)&&l.payload.docs.forEach((S,F)=>{const Q=p.find(fe=>fe.doc.ref.isEqual(S.ref)),le=null==s?void 0:s.payload.docs.find(fe=>fe.ref.isEqual(S.ref));Q&&JSON.stringify(Q.doc.metadata)===JSON.stringify(S.metadata)||!Q&&le&&JSON.stringify(le.metadata)===JSON.stringify(S.metadata)||v.push({type:"modified",payload:{oldIndex:F,newIndex:F,type:"modified",doc:S}})}),v}))}function mm(o,t,s){return Rh(o,s).pipe((0,se.R)((l,p)=>function(o,t,s){return t.forEach(l=>{s.indexOf(l.type)>-1&&(o=function(o,t){switch(t.type){case"added":if(!o[t.newIndex]||!o[t.newIndex].doc.ref.isEqual(t.doc.ref))return yf(o,t.newIndex,0,t);break;case"modified":if(null==o[t.oldIndex]||o[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const s=o.slice();return s.splice(t.oldIndex,1),s.splice(t.newIndex,0,t),s}return yf(o,t.newIndex,1,t)}break;case"removed":if(o[t.oldIndex]&&o[t.oldIndex].doc.ref.isEqual(t.doc.ref))return yf(o,t.oldIndex,1)}return o}(o,l))}),o}(l,p.map(v=>v.payload),t),[]),(0,Ae.x)(),(0,be.U)(l=>l.map(p=>({type:p.type,payload:p}))))}function yf(o,t,s,...l){const p=o.slice();return p.splice(t,s,...l),p}function N_(o){return(!o||0===o.length)&&(o=["added","removed","modified"]),o}class ym{constructor(t,s,l){this.ref=t,this.query=s,this.afs=l}stateChanges(t){let s=Rh(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(s=s.pipe((0,be.U)(l=>l.filter(p=>t.indexOf(p.type)>-1)))),s.pipe((0,Ne.O)(void 0),(0,he.G)(),(0,ge.h)(([l,p])=>p.length>0||!l),(0,be.U)(([l,p])=>p),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe((0,se.R)((s,l)=>[...s,...l],[]))}snapshotChanges(t){const s=N_(t);return mm(this.query,s,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Sp(this.query,this.afs.schedulers.outsideAngular).pipe((0,be.U)(s=>s.payload.docs.map(l=>t.idField?Object.assign(Object.assign({},l.data()),{[t.idField]:l.id}):l.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Ve.D)(this.query.get(t)).pipe((0,Ee.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Ap(this.ref.doc(t),this.afs)}}class Ap{constructor(t,s){this.ref=t,this.afs=s}set(t,s){return this.ref.set(t,s)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,s){const l=this.ref.collection(t),{ref:p,query:v}=Cm(l,s);return new ym(p,v,this.afs)}snapshotChanges(){return function(o,t){return Tp(o,t).pipe((0,Ne.O)(void 0),(0,he.G)(),(0,be.U)(([s,l])=>l.exists?(null==s?void 0:s.exists)?{payload:l,type:"modified"}:{payload:l,type:"added"}:{payload:l,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,be.U)(({payload:s})=>t.idField?Object.assign(Object.assign({},s.data()),{[t.idField]:s.id}):s.data()))}get(t){return(0,Ve.D)(this.ref.get(t)).pipe((0,Ee.QV)(this.afs.schedulers.insideAngular))}}class k_{constructor(t,s){this.query=t,this.afs=s}stateChanges(t){return t&&0!==t.length?Rh(this.query,this.afs.schedulers.outsideAngular).pipe((0,be.U)(s=>s.filter(l=>t.indexOf(l.type)>-1)),(0,ge.h)(s=>s.length>0),this.afs.keepUnstableUntilFirst):Rh(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe((0,se.R)((s,l)=>[...s,...l],[]))}snapshotChanges(t){const s=N_(t);return mm(this.query,s,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Sp(this.query,this.afs.schedulers.outsideAngular).pipe((0,be.U)(l=>l.payload.docs.map(p=>t.idField?Object.assign({[t.idField]:p.id},p.data()):p.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Ve.D)(this.query.get(t)).pipe((0,Ee.QV)(this.afs.schedulers.insideAngular))}}const Ip=new g.OlP("angularfire2.enableFirestorePersistence"),vm=new g.OlP("angularfire2.firestore.persistenceSettings"),bm=new g.OlP("angularfire2.firestore.settings"),L_=new g.OlP("angularfire2.firestore.use-emulator");function Cm(o,t=(s=>s)){return{query:t(o),ref:o}}let Em=(()=>{class o{constructor(s,l,p,v,S,F,Q,le,fe){this.schedulers=new Oe.HU(F),this.keepUnstableUntilFirst=(0,Oe.ss)(this.schedulers);const xe=(0,Oe.on)(s,F,l);!P.Z.auth&&fe&&(0,Oe.yq)();const Ge=le;[this.firestore,this.persistenceEnabled$]=(0,Oe.sI)(`${xe.name}.firestore`,"AngularFirestore",xe,()=>{const ht=F.runOutsideAngular(()=>xe.firestore());if(v&&ht.settings(v),Ge&&ht.useEmulator(...Ge),p&&!(0,Ue.PM)(S)){const lt=()=>{try{return(0,Ve.D)(ht.enablePersistence(Q||void 0).then(()=>!0,()=>!1))}catch(wt){return"undefined"!=typeof console&&console.warn(wt),(0,we.of)(!1)}};return[ht,F.runOutsideAngular(lt)]}return[ht,(0,we.of)(!1)]},[v,Ge,p])}collection(s,l){let p;p="string"==typeof s?this.firestore.collection(s):s;const{ref:v,query:S}=Cm(p,l),F=this.schedulers.ngZone.run(()=>v);return new ym(F,S,this)}collectionGroup(s,l){const p=l||(S=>S),v=this.firestore.collectionGroup(s);return new k_(p(v),this)}doc(s){let l;l="string"==typeof s?this.firestore.doc(s):s;const p=this.schedulers.ngZone.run(()=>l);return new Ap(p,this)}createId(){return this.firestore.collection("_").doc().id}}return o.\u0275fac=function(s){return new(s||o)(g.LFG(Oe.Dh),g.LFG(Oe.xv,8),g.LFG(Ip,8),g.LFG(bm,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(vm,8),g.LFG(L_,8),g.LFG(Dp.Qv,8))},o.\u0275prov=g.Yz7({factory:function(){return new o(g.LFG(Oe.Dh),g.LFG(Oe.xv,8),g.LFG(Ip,8),g.LFG(bm,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(vm,8),g.LFG(L_,8),g.LFG(Dp.Qv,8))},token:o,providedIn:"any"}),o})();var Tv=K(9351);let Sv=(()=>{class o{constructor(s,l){this._firestore=s,this._storage=l}setUserData(s,l){const p=this._firestore.collection("users").doc(s.uid);return p.set({name:s.name,email:s.email,active:s.active,roles:s.roles,domains:s.domains,uid:s.uid}).then(()=>{if(l)return p.collection("loginHistory").doc(s.uid).set({loginHistory:[]})})}getUserData(s,l){return this._firestore.collection("users",p=>p.where(s,"==",l)).snapshotChanges()}getUsers(){return this._firestore.collection("users").snapshotChanges()}setUserIPAddress(s){return this._firestore.collection("users").doc(s.uid).collection("loginHistory").doc(s.uid).update({loginHistory:P.Z.firestore.FieldValue.arrayUnion({date:s.date,ip:s.ip,country:s.country,city:s.city})})}updateUserActivity(s){return this._firestore.collection("users").doc(s.userId).update({active:s.parameter})}getUserLogins(s){return this._firestore.collection("users").doc(s).collection("loginHistory").snapshotChanges()}setDomain(s,l){return this._firestore.collection("users").doc(s).update({domains:P.Z.firestore.FieldValue.arrayUnion({domain:l.domain,description:l.description,checked:l.checked})})}deleteDomain(s){return this._firestore.collection("domains").doc(s).delete()}deleteDomainItem(s,l){return this._firestore.collection("users").doc(s).update({domains:P.Z.firestore.FieldValue.arrayRemove(l)})}addDomain(s){return this._firestore.collection("domains").add(s)}getDomains(){return this._firestore.collection("domains").snapshotChanges()}setUserDomain(s){return this._firestore.collection("users").doc(s.uid).set({name:s.name,email:s.email,active:s.active,roles:s.roles,domains:s.domains,uid:s.uid})}addMenuOptionItem(s){return this._firestore.collection("menuOptions").add(s)}deleteMenuOptionItem(s){return this._firestore.collection("menuOptions").doc(s.id).delete()}editMenuOptionItem(s){return this._firestore.collection("menuOptions").doc(s.id).update({key:s.key,description:s.description,active:s.active})}editMenuOptioImage(s,l){return this._firestore.collection("menuOptions").doc(s).update({img:l})}getMenuOptions(){return this._firestore.collection("menuOptions").snapshotChanges()}getActiveMenuOptions(){return this._firestore.collection("menuOptions",s=>s.where("active","==",!0)).snapshotChanges()}deleteItemFromFireStorage(s){return this._storage.storage.refFromURL(s).delete()}addChat(s){return this._firestore.collection(s.domain).doc("activeChats").collection("activeChats").doc(s.id).set(s)}getChat(s,l,p){return this._firestore.collection(s).doc(l).collection(l,v=>v.where("id","==",p)).snapshotChanges()}getChats(s,l){return this._firestore.collection(s).doc(l).collection(l).snapshotChanges()}acceptPendingChat(s,l){return this._firestore.collection(s.domain).doc("activeChats").collection("activeChats").doc(s.id).update({status:"active",operatorDisplayName:l.operatorDisplayName,operatorEmail:l.operatorEmail})}getCurrentChats(s,l){return this._firestore.collection(s).doc(l).collection(l,p=>p.where("status","==","pending")).snapshotChanges()}addMessage(s,l){return this._firestore.collection(s.domain).doc("activeChats").collection("activeChats").doc(s.chatId).update({chatHistory:P.Z.firestore.FieldValue.arrayUnion({nick:s.nick,message:l.message,time:l.time})})}}return o.\u0275fac=function(s){return new(s||o)(g.LFG(Em),g.LFG(Tv.Q1))},o.\u0275prov=g.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},2074:(Ht,it,K)=>{"use strict";K.d(it,{U:()=>g});var P=K(7716);let g=(()=>{class J{generateId(){let Ve="";const we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Ne=we.length;for(var he=0;he<20;he++)Ve+=we.charAt(Math.floor(Math.random()*Ne));return Ve}}return J.\u0275fac=function(Ve){return new(Ve||J)},J.\u0275prov=P.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})()},4466:(Ht,it,K)=>{"use strict";K.d(it,{m:()=>Ve});var P=K(8583),g=K(2213),J=K(665),C=K(7716);let Ve=(()=>{class we{}return we.\u0275fac=function(he){return new(he||we)},we.\u0275mod=C.oAB({type:we}),we.\u0275inj=C.cJS({imports:[[P.ez,g.Bz,J.UX]]}),we})()},2340:(Ht,it,K)=>{"use strict";K.d(it,{N:()=>P});const P={production:!0,firebaseConfig:{apiKey:"AIzaSyAXek0gZLsyXTReB0Fyd9-OVHf1VMjT6fE",authDomain:"live-chat-dcb29.firebaseapp.com",projectId:"live-chat-dcb29",storageBucket:"live-chat-dcb29.appspot.com",messagingSenderId:"30670541766",appId:"1:30670541766:web:2e599941fa52d3985358c7"},geoLocationAPIKey:"a77ee739ab87419193811644c63fda5a"}},9014:(Ht,it,K)=>{"use strict";var P=K(9075),g=K(7716),J=K(57),C=K(3637),Ve=K(7574),we=K(5917),Ne=K(6682),he=K(8002),be=K(8819),se=K(3190),Ae=K(2145),ge=K(7519),Ee=K(5197),Oe=K(509);class Xe{constructor(pt,bt){this.observables=pt,this.project=bt}call(pt,bt){return bt.subscribe(new ne(pt,this.observables,this.project))}}class ne extends Ee.L{constructor(pt,bt,St){super(pt),this.observables=bt,this.project=St,this.toRespond=[];const Ut=bt.length;this.values=new Array(Ut);for(let hn=0;hn<Ut;hn++)this.toRespond.push(hn);for(let hn=0;hn<Ut;hn++)this.add((0,Oe.D)(this,bt[hn],void 0,hn))}notifyNext(pt,bt,St){this.values[St]=bt;const Ut=this.toRespond;if(Ut.length>0){const hn=Ut.indexOf(St);-1!==hn&&Ut.splice(hn,1)}}notifyComplete(){}_next(pt){if(0===this.toRespond.length){const bt=[pt,...this.values];this.project?this._tryProject(bt):this.destination.next(bt)}}_tryProject(pt){let bt;try{bt=this.project.apply(this,pt)}catch(St){return void this.destination.error(St)}this.destination.next(bt)}}var Ke=K(7393);class On{constructor(pt){this.predicate=pt}call(pt,bt){return bt.subscribe(new Lt(pt,this.predicate))}}class Lt extends Ke.L{constructor(pt,bt){super(pt),this.predicate=bt,this.skipping=!0,this.index=0}_next(pt){const bt=this.destination;this.skipping&&this.tryCallPredicate(pt),this.skipping||bt.next(pt)}tryCallPredicate(pt){try{const bt=this.predicate(pt,this.index++);this.skipping=Boolean(bt)}catch(bt){this.destination.error(bt)}}}K(9192);var $t=K(9829),Rt=K(2329);function Je(He){return null==He}function ot(He){return"function"==typeof He.set}function st(He,pt){return ot(pt)?pt:He.ref(pt)}function nt(He,pt){if(function(He){return"string"==typeof He}(He))return pt.stringCase();if(ot(He))return pt.firebaseCase();if(function(He){return"function"==typeof He.exportVal}(He))return pt.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof He)}function vt(He,pt,bt="on",St=C.z){return new Ve.y(Ut=>{let hn=null;return hn=He[bt](pt,(mn,qt)=>{St.schedule(()=>{Ut.next({snapshot:mn,prevKey:qt})}),"once"===bt&&St.schedule(()=>Ut.complete())},mn=>{St.schedule(()=>Ut.error(mn))}),"on"===bt?{unsubscribe(){null!=hn&&He.off(pt,hn)}}:{unsubscribe(){}}}).pipe((0,he.U)(Ut=>{const{snapshot:hn,prevKey:mn}=Ut;let qt=null;return hn.exists()&&(qt=hn.key),{type:pt,payload:hn,prevKey:mn,key:qt}}),(0,be.B)())}function tn(He,pt){const bt=He.length;for(let St=0;St<bt;St++)if(He[St].payload.key===pt)return St;return-1}function Tn(He,pt){const{payload:bt,prevKey:St,key:Ut}=pt,hn=tn(He,Ut),mn=function(He,pt){if(Je(pt))return 0;{const bt=tn(He,pt);return-1===bt?He.length:bt+1}}(He,St);switch(pt.type){case"value":if(pt.payload&&pt.payload.exists()){let qt=null;pt.payload.forEach(Re=>{const Pe={payload:Re,type:"value",prevKey:qt,key:Re.key};return qt=Re.key,He=[...He,Pe],!1})}return He;case"child_added":if(hn>-1){const qt=He[hn-1];(qt&&qt.key||null)!==St&&(He=He.filter(Re=>Re.payload.key!==bt.key)).splice(mn,0,pt)}else{if(null==St)return[pt,...He];(He=He.slice()).splice(mn,0,pt)}return He;case"child_removed":return He.filter(qt=>qt.payload.key!==bt.key);case"child_changed":return He.map(qt=>qt.payload.key===Ut?pt:qt);case"child_moved":if(hn>-1){const qt=He.splice(hn,1)[0];return(He=He.slice()).splice(mn,0,qt),He}return He;default:return He}}function sn(He){return(Je(He)||0===He.length)&&(He=["child_added","child_removed","child_changed","child_moved"]),He}function jt(He,pt,bt){return function(He,pt,bt){return vt(He,"value","once",bt).pipe((0,se.w)(St=>{const Ut=[(0,we.of)(St)];return pt.forEach(hn=>Ut.push(vt(He,hn,"on",bt))),(0,Ne.T)(...Ut).pipe((0,Ae.R)(Tn,[]))}),(0,ge.x)())}(He,pt=sn(pt),bt)}function Nt(He,pt,bt){const St=(pt=sn(pt)).map(Ut=>vt(He,Ut,"on",bt));return(0,Ne.T)(...St)}function Cn(He,pt){return function(St,Ut){return nt(St,{stringCase:()=>He.child(St)[pt](Ut),firebaseCase:()=>St[pt](Ut),snapshotCase:()=>St.ref[pt](Ut)})}}function sr(He){return function(bt){return bt?nt(bt,{stringCase:()=>He.child(bt).remove(),firebaseCase:()=>bt.remove(),snapshotCase:()=>bt.ref.remove()}):He.remove()}}function Bn(He,pt){return function(){return vt(He,"value","on",pt)}}const Sn=new g.OlP("angularfire2.realtimeDatabaseURL"),An=new g.OlP("angularfire2.database.use-emulator");let Oi=(()=>{class He{constructor(bt,St,Ut,hn,mn,qt,Re){this.schedulers=new J.HU(mn),this.keepUnstableUntilFirst=(0,J.ss)(this.schedulers);const Pe=qt,Ye=(0,J.on)(bt,mn,St);!Rt.Z.auth&&Re&&(0,J.yq)(),this.database=(0,J.sI)(`${Ye.name}.database.${Ut}`,"AngularFireDatabase",Ye,()=>{const et=mn.runOutsideAngular(()=>Ye.database(Ut||void 0));return Pe&&et.useEmulator(...Pe),et},[Pe])}list(bt,St){const Ut=this.schedulers.ngZone.runOutsideAngular(()=>st(this.database,bt));let hn=Ut;return St&&(hn=St(Ut)),function(He,pt){const bt=pt.schedulers.outsideAngular,St=pt.schedulers.ngZone.run(()=>He.ref);return{query:He,update:Cn(St,"update"),set:Cn(St,"set"),push:Ut=>St.push(Ut),remove:sr(St),snapshotChanges:Ut=>jt(He,Ut,bt).pipe(pt.keepUnstableUntilFirst),stateChanges:Ut=>Nt(He,Ut,bt).pipe(pt.keepUnstableUntilFirst),auditTrail:Ut=>function(He,pt,bt){return function(He,pt,bt){return function(He,pt){return vt(He,"value","on",pt).pipe((0,he.U)(bt=>{let St;return bt.payload.forEach(Ut=>(St=Ut.key,!1)),{data:bt,lastKeyToLoad:St}}))}(He,bt).pipe(function(...He){return pt=>{let bt;return"function"==typeof He[He.length-1]&&(bt=He.pop()),pt.lift(new Xe(He,bt))}}(pt),(0,he.U)(([Ut,hn])=>{const mn=Ut.lastKeyToLoad,qt=hn.map(Re=>Re.key);return{actions:hn,lastKeyToLoad:mn,loadedKeys:qt}}),function(He){return pt=>pt.lift(new On(He))}(Ut=>-1===Ut.loadedKeys.indexOf(Ut.lastKeyToLoad)),(0,he.U)(Ut=>Ut.actions))}(He,Nt(He,pt).pipe((0,Ae.R)((Ut,hn)=>[...Ut,hn],[])),bt)}(He,Ut,bt).pipe(pt.keepUnstableUntilFirst),valueChanges:(Ut,hn)=>jt(He,Ut,bt).pipe((0,he.U)(qt=>qt.map(Re=>hn&&hn.idField?Object.assign(Object.assign({},Re.payload.val()),{[hn.idField]:Re.key}):Re.payload.val())),pt.keepUnstableUntilFirst)}}(hn,this)}object(bt){return function(He,pt){return{query:He,snapshotChanges:()=>Bn(He,pt.schedulers.outsideAngular)().pipe(pt.keepUnstableUntilFirst),update:bt=>He.ref.update(bt),set:bt=>He.ref.set(bt),remove:()=>He.ref.remove(),valueChanges:()=>Bn(He,pt.schedulers.outsideAngular)().pipe(pt.keepUnstableUntilFirst,(0,he.U)(St=>St.payload.exists()?St.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>st(this.database,bt)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return He.\u0275fac=function(bt){return new(bt||He)(g.LFG(J.Dh),g.LFG(J.xv,8),g.LFG(Sn,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(An,8),g.LFG($t.Qv,8))},He.\u0275prov=g.Yz7({factory:function(){return new He(g.LFG(J.Dh),g.LFG(J.xv,8),g.LFG(Sn,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(An,8),g.LFG($t.Qv,8))},token:He,providedIn:"any"}),He})(),gn=(()=>{class He{}return He.\u0275fac=function(bt){return new(bt||He)},He.\u0275mod=g.oAB({type:He}),He.\u0275inj=g.cJS({providers:[Oi]}),He})();var Yt=K(9351),jn=K(1841),Vn=K(2213);const Qt=[{path:"",redirectTo:"chat",pathMatch:"full"},{path:"chat",loadChildren:()=>Promise.resolve().then(K.bind(K,9437)).then(He=>He.ChatModule)},{path:"control-panel",loadChildren:()=>Promise.resolve().then(K.bind(K,6009)).then(He=>He.ControlPanelModule)},{path:"error",loadChildren:()=>Promise.resolve().then(K.bind(K,7236)).then(He=>He.ErrorModule)},{path:"**",redirectTo:"chat"}];let hr=(()=>{class He{}return He.\u0275fac=function(bt){return new(bt||He)},He.\u0275mod=g.oAB({type:He}),He.\u0275inj=g.cJS({imports:[[Vn.Bz.forRoot(Qt)],Vn.Bz]}),He})();var Br=K(9447);let $n=(()=>{class He{getCurrentTheme(){const bt=JSON.parse(localStorage.getItem("theme"));bt?(document.documentElement.classList.remove("theme-light","theme-dark"),document.documentElement.classList.add(bt),this.darkMode="theme-light"!=bt):(localStorage.setItem("theme",JSON.stringify("theme-light")),document.documentElement.classList.add("theme-light"),this.darkMode=!1)}setLight(){localStorage.setItem("theme",JSON.stringify("theme-light")),this.getCurrentTheme()}setDark(){localStorage.setItem("theme",JSON.stringify("theme-dark")),this.getCurrentTheme()}}return He.\u0275fac=function(bt){return new(bt||He)},He.\u0275prov=g.Yz7({token:He,factory:He.\u0275fac,providedIn:"root"}),He})(),Tt=(()=>{class He{constructor(bt,St){this._authservice=bt,this._themeService=St}ngOnInit(){this._authservice.autoLogin(),this._themeService.getCurrentTheme()}}return He.\u0275fac=function(bt){return new(bt||He)(g.Y36(Br.e),g.Y36($n))},He.\u0275cmp=g.Xpm({type:He,selectors:[["app-root"]],decls:1,vars:0,template:function(bt,St){1&bt&&g._UZ(0,"router-outlet")},directives:[Vn.lC],styles:[""]}),He})();var $e=K(2340),ze=K(9437),Mt=K(6009),Pt=K(7236),an=K(6237);let Ot=(()=>{class He{}return He.\u0275fac=function(bt){return new(bt||He)},He.\u0275mod=g.oAB({type:He,bootstrap:[Tt]}),He.\u0275inj=g.cJS({providers:[],imports:[[P.b2,hr,ze.ChatModule,Mt.ControlPanelModule,Pt.ErrorModule,jn.JF,J.hO.initializeApp($e.N.firebaseConfig),gn,Yt.TE,an.PW]]}),He})();$e.N.production&&(0,g.G48)(),P.q6().bootstrapModule(Ot).catch(He=>console.error(He))},4762:(Ht,it,K)=>{"use strict";K.d(it,{ZT:()=>g,pi:()=>J,mG:()=>he,Jh:()=>be,XA:()=>ge,CR:()=>Ee,ev:()=>Xe});var P=function(Je,ot){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(st,nt){st.__proto__=nt}||function(st,nt){for(var vt in nt)Object.prototype.hasOwnProperty.call(nt,vt)&&(st[vt]=nt[vt])})(Je,ot)};function g(Je,ot){if("function"!=typeof ot&&null!==ot)throw new TypeError("Class extends value "+String(ot)+" is not a constructor or null");function st(){this.constructor=Je}P(Je,ot),Je.prototype=null===ot?Object.create(ot):(st.prototype=ot.prototype,new st)}var J=function(){return(J=Object.assign||function(ot){for(var st,nt=1,vt=arguments.length;nt<vt;nt++)for(var at in st=arguments[nt])Object.prototype.hasOwnProperty.call(st,at)&&(ot[at]=st[at]);return ot}).apply(this,arguments)};function he(Je,ot,st,nt){return new(st||(st=Promise))(function(at,tn){function ln(jt){try{sn(nt.next(jt))}catch(Nt){tn(Nt)}}function Tn(jt){try{sn(nt.throw(jt))}catch(Nt){tn(Nt)}}function sn(jt){jt.done?at(jt.value):function(at){return at instanceof st?at:new st(function(tn){tn(at)})}(jt.value).then(ln,Tn)}sn((nt=nt.apply(Je,ot||[])).next())})}function be(Je,ot){var nt,vt,at,tn,st={label:0,sent:function(){if(1&at[0])throw at[1];return at[1]},trys:[],ops:[]};return tn={next:ln(0),throw:ln(1),return:ln(2)},"function"==typeof Symbol&&(tn[Symbol.iterator]=function(){return this}),tn;function ln(sn){return function(jt){return function(sn){if(nt)throw new TypeError("Generator is already executing.");for(;st;)try{if(nt=1,vt&&(at=2&sn[0]?vt.return:sn[0]?vt.throw||((at=vt.return)&&at.call(vt),0):vt.next)&&!(at=at.call(vt,sn[1])).done)return at;switch(vt=0,at&&(sn=[2&sn[0],at.value]),sn[0]){case 0:case 1:at=sn;break;case 4:return st.label++,{value:sn[1],done:!1};case 5:st.label++,vt=sn[1],sn=[0];continue;case 7:sn=st.ops.pop(),st.trys.pop();continue;default:if(!(at=(at=st.trys).length>0&&at[at.length-1])&&(6===sn[0]||2===sn[0])){st=0;continue}if(3===sn[0]&&(!at||sn[1]>at[0]&&sn[1]<at[3])){st.label=sn[1];break}if(6===sn[0]&&st.label<at[1]){st.label=at[1],at=sn;break}if(at&&st.label<at[2]){st.label=at[2],st.ops.push(sn);break}at[2]&&st.ops.pop(),st.trys.pop();continue}sn=ot.call(Je,st)}catch(jt){sn=[6,jt],vt=0}finally{nt=at=0}if(5&sn[0])throw sn[1];return{value:sn[0]?sn[1]:void 0,done:!0}}([sn,jt])}}}function ge(Je){var ot="function"==typeof Symbol&&Symbol.iterator,st=ot&&Je[ot],nt=0;if(st)return st.call(Je);if(Je&&"number"==typeof Je.length)return{next:function(){return Je&&nt>=Je.length&&(Je=void 0),{value:Je&&Je[nt++],done:!Je}}};throw new TypeError(ot?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ee(Je,ot){var st="function"==typeof Symbol&&Je[Symbol.iterator];if(!st)return Je;var vt,tn,nt=st.call(Je),at=[];try{for(;(void 0===ot||ot-- >0)&&!(vt=nt.next()).done;)at.push(vt.value)}catch(ln){tn={error:ln}}finally{try{vt&&!vt.done&&(st=nt.return)&&st.call(nt)}finally{if(tn)throw tn.error}}return at}function Xe(Je,ot,st){if(st||2===arguments.length)for(var at,nt=0,vt=ot.length;nt<vt;nt++)(at||!(nt in ot))&&(at||(at=Array.prototype.slice.call(ot,0,nt)),at[nt]=ot[nt]);return Je.concat(at||Array.prototype.slice.call(ot))}}},Ht=>{Ht(Ht.s=9014)}]);