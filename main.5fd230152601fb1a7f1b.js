(self.webpackChunklive_chat=self.webpackChunklive_chat||[]).push([[179],{8255:jt=>{function it(Q){return Promise.resolve().then(()=>{var P=new Error("Cannot find module '"+Q+"'");throw P.code="MODULE_NOT_FOUND",P})}it.keys=()=>[],it.resolve=it,it.id=8255,jt.exports=it},7238:(jt,it,Q)=>{"use strict";Q.d(it,{l3:()=>X,_j:()=>P,LC:()=>g,ZN:()=>Ke,jt:()=>Ve,pV:()=>Ce,IO:()=>Ue,vP:()=>Fe,SB:()=>ve,oB:()=>fe,eR:()=>Se,X$:()=>C,ZE:()=>St,k1:()=>Mn});class P{}class g{}const X="*";function C(kt,dt){return{type:7,name:kt,definitions:dt,options:{}}}function Ve(kt,dt=null){return{type:4,styles:dt,timings:kt}}function Fe(kt,dt=null){return{type:2,steps:kt,options:dt}}function fe(kt){return{type:6,styles:kt,offset:null}}function ve(kt,dt,Zt){return{type:0,name:kt,styles:dt,options:Zt}}function Se(kt,dt,Zt=null){return{type:1,expr:kt,animation:dt,options:Zt}}function Ce(kt=null){return{type:9,options:kt}}function Ue(kt,dt,Zt=null){return{type:11,selector:kt,animation:dt,options:Zt}}function re(kt){Promise.resolve(null).then(kt)}class Ke{constructor(dt=0,Zt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=dt+Zt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(dt=>dt()),this._onDoneFns=[])}onStart(dt){this._onStartFns.push(dt)}onDone(dt){this._onDoneFns.push(dt)}onDestroy(dt){this._onDestroyFns.push(dt)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){re(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(dt=>dt()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(dt=>dt()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(dt){this._position=this.totalTime?dt*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(dt){const Zt="start"==dt?this._onStartFns:this._onDoneFns;Zt.forEach(Ot=>Ot()),Zt.length=0}}class St{constructor(dt){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=dt;let Zt=0,Ot=0,Cn=0;const wt=this.players.length;0==wt?re(()=>this._onFinish()):this.players.forEach(Je=>{Je.onDone(()=>{++Zt==wt&&this._onFinish()}),Je.onDestroy(()=>{++Ot==wt&&this._onDestroy()}),Je.onStart(()=>{++Cn==wt&&this._onStart()})}),this.totalTime=this.players.reduce((Je,ot)=>Math.max(Je,ot.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(dt=>dt()),this._onDoneFns=[])}init(){this.players.forEach(dt=>dt.init())}onStart(dt){this._onStartFns.push(dt)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(dt=>dt()),this._onStartFns=[])}onDone(dt){this._onDoneFns.push(dt)}onDestroy(dt){this._onDestroyFns.push(dt)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(dt=>dt.play())}pause(){this.players.forEach(dt=>dt.pause())}restart(){this.players.forEach(dt=>dt.restart())}finish(){this._onFinish(),this.players.forEach(dt=>dt.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(dt=>dt.destroy()),this._onDestroyFns.forEach(dt=>dt()),this._onDestroyFns=[])}reset(){this.players.forEach(dt=>dt.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(dt){const Zt=dt*this.totalTime;this.players.forEach(Ot=>{const Cn=Ot.totalTime?Math.min(1,Zt/Ot.totalTime):1;Ot.setPosition(Cn)})}getPosition(){const dt=this.players.reduce((Zt,Ot)=>null===Zt||Ot.totalTime>Zt.totalTime?Ot:Zt,null);return null!=dt?dt.getPosition():0}beforeDestroy(){this.players.forEach(dt=>{dt.beforeDestroy&&dt.beforeDestroy()})}triggerCallback(dt){const Zt="start"==dt?this._onStartFns:this._onDoneFns;Zt.forEach(Ot=>Ot()),Zt.length=0}}const Mn="!"},8583:(jt,it,Q)=>{"use strict";Q.d(it,{mr:()=>St,Ov:()=>zo,ez:()=>wo,K0:()=>Fe,uU:()=>qo,Do:()=>kt,V_:()=>se,Ye:()=>dt,S$:()=>re,mk:()=>Yt,sg:()=>cn,O5:()=>pr,RF:()=>Vi,n9:()=>sr,ED:()=>jn,b0:()=>Mn,lw:()=>fe,EM:()=>lr,JF:()=>ge,NF:()=>ho,PM:()=>Lo,w_:()=>Ee,bD:()=>Do,q:()=>X,Mx:()=>ut,HT:()=>Ve});var P=Q(7716);let g=null;function X(){return g}function Ve(x){g||(g=x)}class Ee{}const Fe=new P.OlP("DocumentToken");let fe=(()=>{class x{historyGo(k){throw new Error("Not implemented")}}return x.\u0275fac=function(k){return new(k||x)},x.\u0275prov=(0,P.Yz7)({factory:ve,token:x,providedIn:"platform"}),x})();function ve(){return(0,P.LFG)(Se)}const se=new P.OlP("Location Initialized");let Se=(()=>{class x extends fe{constructor(k){super(),this._doc=k,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return X().getBaseHref(this._doc)}onPopState(k){const ee=X().getGlobalEventTarget(this._doc,"window");return ee.addEventListener("popstate",k,!1),()=>ee.removeEventListener("popstate",k)}onHashChange(k){const ee=X().getGlobalEventTarget(this._doc,"window");return ee.addEventListener("hashchange",k,!1),()=>ee.removeEventListener("hashchange",k)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(k){this.location.pathname=k}pushState(k,ee,we){me()?this._history.pushState(k,ee,we):this.location.hash=we}replaceState(k,ee,we){me()?this._history.replaceState(k,ee,we):this.location.hash=we}forward(){this._history.forward()}back(){this._history.back()}historyGo(k=0){this._history.go(k)}getState(){return this._history.state}}return x.\u0275fac=function(k){return new(k||x)(P.LFG(Fe))},x.\u0275prov=(0,P.Yz7)({factory:Ce,token:x,providedIn:"platform"}),x})();function me(){return!!window.history.pushState}function Ce(){return new Se((0,P.LFG)(Fe))}function Me(x,W){if(0==x.length)return W;if(0==W.length)return x;let k=0;return x.endsWith("/")&&k++,W.startsWith("/")&&k++,2==k?x+W.substring(1):1==k?x+W:x+"/"+W}function Ue(x){const W=x.match(/#|\?|$/),k=W&&W.index||x.length;return x.slice(0,k-("/"===x[k-1]?1:0))+x.slice(k)}function Xe(x){return x&&"?"!==x[0]?"?"+x:x}let re=(()=>{class x{historyGo(k){throw new Error("Not implemented")}}return x.\u0275fac=function(k){return new(k||x)},x.\u0275prov=(0,P.Yz7)({factory:Ke,token:x,providedIn:"root"}),x})();function Ke(x){const W=(0,P.LFG)(Fe).location;return new Mn((0,P.LFG)(fe),W&&W.origin||"")}const St=new P.OlP("appBaseHref");let Mn=(()=>{class x extends re{constructor(k,ee){if(super(),this._platformLocation=k,this._removeListenerFns=[],null==ee&&(ee=this._platformLocation.getBaseHrefFromDOM()),null==ee)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ee}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}prepareExternalUrl(k){return Me(this._baseHref,k)}path(k=!1){const ee=this._platformLocation.pathname+Xe(this._platformLocation.search),we=this._platformLocation.hash;return we&&k?`${ee}${we}`:ee}pushState(k,ee,we,je){const rt=this.prepareExternalUrl(we+Xe(je));this._platformLocation.pushState(k,ee,rt)}replaceState(k,ee,we,je){const rt=this.prepareExternalUrl(we+Xe(je));this._platformLocation.replaceState(k,ee,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(k=0){var ee,we;null===(we=(ee=this._platformLocation).historyGo)||void 0===we||we.call(ee,k)}}return x.\u0275fac=function(k){return new(k||x)(P.LFG(fe),P.LFG(St,8))},x.\u0275prov=P.Yz7({token:x,factory:x.\u0275fac}),x})(),kt=(()=>{class x extends re{constructor(k,ee){super(),this._platformLocation=k,this._baseHref="",this._removeListenerFns=[],null!=ee&&(this._baseHref=ee)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}path(k=!1){let ee=this._platformLocation.hash;return null==ee&&(ee="#"),ee.length>0?ee.substring(1):ee}prepareExternalUrl(k){const ee=Me(this._baseHref,k);return ee.length>0?"#"+ee:ee}pushState(k,ee,we,je){let rt=this.prepareExternalUrl(we+Xe(je));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.pushState(k,ee,rt)}replaceState(k,ee,we,je){let rt=this.prepareExternalUrl(we+Xe(je));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.replaceState(k,ee,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(k=0){var ee,we;null===(we=(ee=this._platformLocation).historyGo)||void 0===we||we.call(ee,k)}}return x.\u0275fac=function(k){return new(k||x)(P.LFG(fe),P.LFG(St,8))},x.\u0275prov=P.Yz7({token:x,factory:x.\u0275fac}),x})(),dt=(()=>{class x{constructor(k,ee){this._subject=new P.vpe,this._urlChangeListeners=[],this._platformStrategy=k;const we=this._platformStrategy.getBaseHref();this._platformLocation=ee,this._baseHref=Ue(Cn(we)),this._platformStrategy.onPopState(je=>{this._subject.emit({url:this.path(!0),pop:!0,state:je.state,type:je.type})})}path(k=!1){return this.normalize(this._platformStrategy.path(k))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(k,ee=""){return this.path()==this.normalize(k+Xe(ee))}normalize(k){return x.stripTrailingSlash(function(x,W){return x&&W.startsWith(x)?W.substring(x.length):W}(this._baseHref,Cn(k)))}prepareExternalUrl(k){return k&&"/"!==k[0]&&(k="/"+k),this._platformStrategy.prepareExternalUrl(k)}go(k,ee="",we=null){this._platformStrategy.pushState(we,"",k,ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Xe(ee)),we)}replaceState(k,ee="",we=null){this._platformStrategy.replaceState(we,"",k,ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Xe(ee)),we)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(k=0){var ee,we;null===(we=(ee=this._platformStrategy).historyGo)||void 0===we||we.call(ee,k)}onUrlChange(k){this._urlChangeListeners.push(k),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ee=>{this._notifyUrlChangeListeners(ee.url,ee.state)}))}_notifyUrlChangeListeners(k="",ee){this._urlChangeListeners.forEach(we=>we(k,ee))}subscribe(k,ee,we){return this._subject.subscribe({next:k,error:ee,complete:we})}}return x.\u0275fac=function(k){return new(k||x)(P.LFG(re),P.LFG(fe))},x.normalizeQueryParams=Xe,x.joinWithSlash=Me,x.stripTrailingSlash=Ue,x.\u0275prov=(0,P.Yz7)({factory:Zt,token:x,providedIn:"root"}),x})();function Zt(){return new dt((0,P.LFG)(re),(0,P.LFG)(fe))}function Cn(x){return x.replace(/\/index.html$/,"")}var ot=(()=>((ot=ot||{})[ot.Zero=0]="Zero",ot[ot.One=1]="One",ot[ot.Two=2]="Two",ot[ot.Few=3]="Few",ot[ot.Many=4]="Many",ot[ot.Other=5]="Other",ot))(),st=(()=>((st=st||{})[st.Format=0]="Format",st[st.Standalone=1]="Standalone",st))(),nt=(()=>((nt=nt||{})[nt.Narrow=0]="Narrow",nt[nt.Abbreviated=1]="Abbreviated",nt[nt.Wide=2]="Wide",nt[nt.Short=3]="Short",nt))(),yt=(()=>((yt=yt||{})[yt.Short=0]="Short",yt[yt.Medium=1]="Medium",yt[yt.Long=2]="Long",yt[yt.Full=3]="Full",yt))(),at=(()=>((at=at||{})[at.Decimal=0]="Decimal",at[at.Group=1]="Group",at[at.List=2]="List",at[at.PercentSign=3]="PercentSign",at[at.PlusSign=4]="PlusSign",at[at.MinusSign=5]="MinusSign",at[at.Exponential=6]="Exponential",at[at.SuperscriptingExponent=7]="SuperscriptingExponent",at[at.PerMille=8]="PerMille",at[at.Infinity=9]="Infinity",at[at.NaN=10]="NaN",at[at.TimeSeparator=11]="TimeSeparator",at[at.CurrencyDecimal=12]="CurrencyDecimal",at[at.CurrencyGroup=13]="CurrencyGroup",at))();function Pn(x,W){return dr((0,P.cg1)(x)[P.wAp.DateFormat],W)}function bn(x,W){return dr((0,P.cg1)(x)[P.wAp.TimeFormat],W)}function or(x,W){return dr((0,P.cg1)(x)[P.wAp.DateTimeFormat],W)}function Gn(x,W){const k=(0,P.cg1)(x),ee=k[P.wAp.NumberSymbols][W];if(void 0===ee){if(W===at.CurrencyDecimal)return k[P.wAp.NumberSymbols][at.Decimal];if(W===at.CurrencyGroup)return k[P.wAp.NumberSymbols][at.Group]}return ee}const mn=P.kL8;function Wt(x){if(!x[P.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${x[P.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function dr(x,W){for(let k=W;k>-1;k--)if(void 0!==x[k])return x[k];throw new Error("Locale data API: locale data undefined")}function Ur(x){const[W,k]=x.split(":");return{hours:+W,minutes:+k}}const ze=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,It={},xt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var sn=(()=>((sn=sn||{})[sn.Short=0]="Short",sn[sn.ShortGMT=1]="ShortGMT",sn[sn.Long=2]="Long",sn[sn.Extended=3]="Extended",sn))(),Mt=(()=>((Mt=Mt||{})[Mt.FullYear=0]="FullYear",Mt[Mt.Month=1]="Month",Mt[Mt.Date=2]="Date",Mt[Mt.Hours=3]="Hours",Mt[Mt.Minutes=4]="Minutes",Mt[Mt.Seconds=5]="Seconds",Mt[Mt.FractionalSeconds=6]="FractionalSeconds",Mt[Mt.Day=7]="Day",Mt))(),He=(()=>((He=He||{})[He.DayPeriods=0]="DayPeriods",He[He.Days=1]="Days",He[He.Months=2]="Months",He[He.Eras=3]="Eras",He))();function gt(x,W,k,ee){let we=function(x){if(ao(x))return x;if("number"==typeof x&&!isNaN(x))return new Date(x);if("string"==typeof x){if(x=x.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(x)){const[we,je=1,rt=1]=x.split("-").map(G=>+G);return vt(we,je-1,rt)}const k=parseFloat(x);if(!isNaN(x-k))return new Date(k);let ee;if(ee=x.match(ze))return function(x){const W=new Date(0);let k=0,ee=0;const we=x[8]?W.setUTCFullYear:W.setFullYear,je=x[8]?W.setUTCHours:W.setHours;x[9]&&(k=Number(x[9]+x[10]),ee=Number(x[9]+x[11])),we.call(W,Number(x[1]),Number(x[2])-1,Number(x[3]));const rt=Number(x[4]||0)-k,G=Number(x[5]||0)-ee,H=Number(x[6]||0),V=Math.floor(1e3*parseFloat("0."+(x[7]||0)));return je.call(W,rt,G,H,V),W}(ee)}const W=new Date(x);if(!ao(W))throw new Error(`Unable to convert "${x}" into a date`);return W}(x);W=Tt(k,W)||W;let G,rt=[];for(;W;){if(G=xt.exec(W),!G){rt.push(W);break}{rt=rt.concat(G.slice(1));const ue=rt.pop();if(!ue)break;W=ue}}let H=we.getTimezoneOffset();ee&&(H=Yr(ee,H),we=function(x,W,k){const we=x.getTimezoneOffset();return function(x,W){return(x=new Date(x.getTime())).setMinutes(x.getMinutes()+W),x}(x,-1*(Yr(W,we)-we))}(we,ee));let V="";return rt.forEach(ue=>{const $e=function(x){if(ri[x])return ri[x];let W;switch(x){case"G":case"GG":case"GGG":W=xe(He.Eras,nt.Abbreviated);break;case"GGGG":W=xe(He.Eras,nt.Wide);break;case"GGGGG":W=xe(He.Eras,nt.Narrow);break;case"y":W=Gt(Mt.FullYear,1,0,!1,!0);break;case"yy":W=Gt(Mt.FullYear,2,0,!0,!0);break;case"yyy":W=Gt(Mt.FullYear,3,0,!1,!0);break;case"yyyy":W=Gt(Mt.FullYear,4,0,!1,!0);break;case"Y":W=Rn(1);break;case"YY":W=Rn(2,!0);break;case"YYY":W=Rn(3);break;case"YYYY":W=Rn(4);break;case"M":case"L":W=Gt(Mt.Month,1,1);break;case"MM":case"LL":W=Gt(Mt.Month,2,1);break;case"MMM":W=xe(He.Months,nt.Abbreviated);break;case"MMMM":W=xe(He.Months,nt.Wide);break;case"MMMMM":W=xe(He.Months,nt.Narrow);break;case"LLL":W=xe(He.Months,nt.Abbreviated,st.Standalone);break;case"LLLL":W=xe(He.Months,nt.Wide,st.Standalone);break;case"LLLLL":W=xe(He.Months,nt.Narrow,st.Standalone);break;case"w":W=Vn(1);break;case"ww":W=Vn(2);break;case"W":W=Vn(1,!0);break;case"d":W=Gt(Mt.Date,1);break;case"dd":W=Gt(Mt.Date,2);break;case"c":case"cc":W=Gt(Mt.Day,1);break;case"ccc":W=xe(He.Days,nt.Abbreviated,st.Standalone);break;case"cccc":W=xe(He.Days,nt.Wide,st.Standalone);break;case"ccccc":W=xe(He.Days,nt.Narrow,st.Standalone);break;case"cccccc":W=xe(He.Days,nt.Short,st.Standalone);break;case"E":case"EE":case"EEE":W=xe(He.Days,nt.Abbreviated);break;case"EEEE":W=xe(He.Days,nt.Wide);break;case"EEEEE":W=xe(He.Days,nt.Narrow);break;case"EEEEEE":W=xe(He.Days,nt.Short);break;case"a":case"aa":case"aaa":W=xe(He.DayPeriods,nt.Abbreviated);break;case"aaaa":W=xe(He.DayPeriods,nt.Wide);break;case"aaaaa":W=xe(He.DayPeriods,nt.Narrow);break;case"b":case"bb":case"bbb":W=xe(He.DayPeriods,nt.Abbreviated,st.Standalone,!0);break;case"bbbb":W=xe(He.DayPeriods,nt.Wide,st.Standalone,!0);break;case"bbbbb":W=xe(He.DayPeriods,nt.Narrow,st.Standalone,!0);break;case"B":case"BB":case"BBB":W=xe(He.DayPeriods,nt.Abbreviated,st.Format,!0);break;case"BBBB":W=xe(He.DayPeriods,nt.Wide,st.Format,!0);break;case"BBBBB":W=xe(He.DayPeriods,nt.Narrow,st.Format,!0);break;case"h":W=Gt(Mt.Hours,1,-12);break;case"hh":W=Gt(Mt.Hours,2,-12);break;case"H":W=Gt(Mt.Hours,1);break;case"HH":W=Gt(Mt.Hours,2);break;case"m":W=Gt(Mt.Minutes,1);break;case"mm":W=Gt(Mt.Minutes,2);break;case"s":W=Gt(Mt.Seconds,1);break;case"ss":W=Gt(Mt.Seconds,2);break;case"S":W=Gt(Mt.FractionalSeconds,1);break;case"SS":W=Gt(Mt.FractionalSeconds,2);break;case"SSS":W=Gt(Mt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":W=et(sn.Short);break;case"ZZZZZ":W=et(sn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":W=et(sn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":W=et(sn.Long);break;default:return null}return ri[x]=W,W}(ue);V+=$e?$e(we,k,H):"''"===ue?"'":ue.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),V}function vt(x,W,k){const ee=new Date(0);return ee.setFullYear(x,W,k),ee.setHours(0,0,0),ee}function Tt(x,W){const k=function(x){return(0,P.cg1)(x)[P.wAp.LocaleId]}(x);if(It[k]=It[k]||{},It[k][W])return It[k][W];let ee="";switch(W){case"shortDate":ee=Pn(x,yt.Short);break;case"mediumDate":ee=Pn(x,yt.Medium);break;case"longDate":ee=Pn(x,yt.Long);break;case"fullDate":ee=Pn(x,yt.Full);break;case"shortTime":ee=bn(x,yt.Short);break;case"mediumTime":ee=bn(x,yt.Medium);break;case"longTime":ee=bn(x,yt.Long);break;case"fullTime":ee=bn(x,yt.Full);break;case"short":const we=Tt(x,"shortTime"),je=Tt(x,"shortDate");ee=Vt(or(x,yt.Short),[we,je]);break;case"medium":const rt=Tt(x,"mediumTime"),G=Tt(x,"mediumDate");ee=Vt(or(x,yt.Medium),[rt,G]);break;case"long":const H=Tt(x,"longTime"),V=Tt(x,"longDate");ee=Vt(or(x,yt.Long),[H,V]);break;case"full":const ue=Tt(x,"fullTime"),$e=Tt(x,"fullDate");ee=Vt(or(x,yt.Full),[ue,$e])}return ee&&(It[k][W]=ee),ee}function Vt(x,W){return W&&(x=x.replace(/\{([^}]+)}/g,function(k,ee){return null!=W&&ee in W?W[ee]:k})),x}function hn(x,W,k="-",ee,we){let je="";(x<0||we&&x<=0)&&(we?x=1-x:(x=-x,je=k));let rt=String(x);for(;rt.length<W;)rt="0"+rt;return ee&&(rt=rt.substr(rt.length-W)),je+rt}function Gt(x,W,k=0,ee=!1,we=!1){return function(je,rt){let G=function(x,W){switch(x){case Mt.FullYear:return W.getFullYear();case Mt.Month:return W.getMonth();case Mt.Date:return W.getDate();case Mt.Hours:return W.getHours();case Mt.Minutes:return W.getMinutes();case Mt.Seconds:return W.getSeconds();case Mt.FractionalSeconds:return W.getMilliseconds();case Mt.Day:return W.getDay();default:throw new Error(`Unknown DateType value "${x}".`)}}(x,je);if((k>0||G>-k)&&(G+=k),x===Mt.Hours)0===G&&-12===k&&(G=12);else if(x===Mt.FractionalSeconds)return function(x,W){return hn(x,3).substr(0,W)}(G,W);const H=Gn(rt,at.MinusSign);return hn(G,W,H,ee,we)}}function xe(x,W,k=st.Format,ee=!1){return function(we,je){return function(x,W,k,ee,we,je){switch(k){case He.Months:return function(x,W,k){const ee=(0,P.cg1)(x),je=dr([ee[P.wAp.MonthsFormat],ee[P.wAp.MonthsStandalone]],W);return dr(je,k)}(W,we,ee)[x.getMonth()];case He.Days:return function(x,W,k){const ee=(0,P.cg1)(x),je=dr([ee[P.wAp.DaysFormat],ee[P.wAp.DaysStandalone]],W);return dr(je,k)}(W,we,ee)[x.getDay()];case He.DayPeriods:const rt=x.getHours(),G=x.getMinutes();if(je){const V=function(x){const W=(0,P.cg1)(x);return Wt(W),(W[P.wAp.ExtraData][2]||[]).map(ee=>"string"==typeof ee?Ur(ee):[Ur(ee[0]),Ur(ee[1])])}(W),ue=function(x,W,k){const ee=(0,P.cg1)(x);Wt(ee);const je=dr([ee[P.wAp.ExtraData][0],ee[P.wAp.ExtraData][1]],W)||[];return dr(je,k)||[]}(W,we,ee),$e=V.findIndex(Rt=>{if(Array.isArray(Rt)){const[wn,cr]=Rt,Hr=rt>=wn.hours&&G>=wn.minutes,hr=rt<cr.hours||rt===cr.hours&&G<cr.minutes;if(wn.hours<cr.hours){if(Hr&&hr)return!0}else if(Hr||hr)return!0}else if(Rt.hours===rt&&Rt.minutes===G)return!0;return!1});if(-1!==$e)return ue[$e]}return function(x,W,k){const ee=(0,P.cg1)(x),je=dr([ee[P.wAp.DayPeriodsFormat],ee[P.wAp.DayPeriodsStandalone]],W);return dr(je,k)}(W,we,ee)[rt<12?0:1];case He.Eras:return function(x,W){return dr((0,P.cg1)(x)[P.wAp.Eras],W)}(W,ee)[x.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${k}`)}}(we,je,x,W,k,ee)}}function et(x){return function(W,k,ee){const we=-1*ee,je=Gn(k,at.MinusSign),rt=we>0?Math.floor(we/60):Math.ceil(we/60);switch(x){case sn.Short:return(we>=0?"+":"")+hn(rt,2,je)+hn(Math.abs(we%60),2,je);case sn.ShortGMT:return"GMT"+(we>=0?"+":"")+hn(rt,1,je);case sn.Long:return"GMT"+(we>=0?"+":"")+hn(rt,2,je)+":"+hn(Math.abs(we%60),2,je);case sn.Extended:return 0===ee?"Z":(we>=0?"+":"")+hn(rt,2,je)+":"+hn(Math.abs(we%60),2,je);default:throw new Error(`Unknown zone width "${x}"`)}}}function nr(x){return vt(x.getFullYear(),x.getMonth(),x.getDate()+(4-x.getDay()))}function Vn(x,W=!1){return function(k,ee){let we;if(W){const je=new Date(k.getFullYear(),k.getMonth(),1).getDay()-1,rt=k.getDate();we=1+Math.floor((rt+je)/7)}else{const je=nr(k),rt=function(x){const W=vt(x,0,1).getDay();return vt(x,0,1+(W<=4?4:11)-W)}(je.getFullYear()),G=je.getTime()-rt.getTime();we=1+Math.round(G/6048e5)}return hn(we,x,Gn(ee,at.MinusSign))}}function Rn(x,W=!1){return function(k,ee){return hn(nr(k).getFullYear(),x,Gn(ee,at.MinusSign),W)}}const ri={};function Yr(x,W){x=x.replace(/:/g,"");const k=Date.parse("Jan 01, 1970 00:00:00 "+x)/6e4;return isNaN(k)?W:k}function ao(x){return x instanceof Date&&!isNaN(x.valueOf())}class B{}let ce=(()=>{class x extends B{constructor(k){super(),this.locale=k}getPluralCategory(k,ee){switch(mn(ee||this.locale)(k)){case ot.Zero:return"zero";case ot.One:return"one";case ot.Two:return"two";case ot.Few:return"few";case ot.Many:return"many";default:return"other"}}}return x.\u0275fac=function(k){return new(k||x)(P.LFG(P.soG))},x.\u0275prov=P.Yz7({token:x,factory:x.\u0275fac}),x})();function ut(x,W){W=encodeURIComponent(W);for(const k of x.split(";")){const ee=k.indexOf("="),[we,je]=-1==ee?[k,""]:[k.slice(0,ee),k.slice(ee+1)];if(we.trim()===W)return decodeURIComponent(je)}return null}let Yt=(()=>{class x{constructor(k,ee,we,je){this._iterableDiffers=k,this._keyValueDiffers=ee,this._ngEl=we,this._renderer=je,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(k){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof k?k.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(k){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof k?k.split(/\s+/):k,this._rawClass&&((0,P.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const k=this._iterableDiffer.diff(this._rawClass);k&&this._applyIterableChanges(k)}else if(this._keyValueDiffer){const k=this._keyValueDiffer.diff(this._rawClass);k&&this._applyKeyValueChanges(k)}}_applyKeyValueChanges(k){k.forEachAddedItem(ee=>this._toggleClass(ee.key,ee.currentValue)),k.forEachChangedItem(ee=>this._toggleClass(ee.key,ee.currentValue)),k.forEachRemovedItem(ee=>{ee.previousValue&&this._toggleClass(ee.key,!1)})}_applyIterableChanges(k){k.forEachAddedItem(ee=>{if("string"!=typeof ee.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,P.AaK)(ee.item)}`);this._toggleClass(ee.item,!0)}),k.forEachRemovedItem(ee=>this._toggleClass(ee.item,!1))}_applyClasses(k){k&&(Array.isArray(k)||k instanceof Set?k.forEach(ee=>this._toggleClass(ee,!0)):Object.keys(k).forEach(ee=>this._toggleClass(ee,!!k[ee])))}_removeClasses(k){k&&(Array.isArray(k)||k instanceof Set?k.forEach(ee=>this._toggleClass(ee,!1)):Object.keys(k).forEach(ee=>this._toggleClass(ee,!1)))}_toggleClass(k,ee){(k=k.trim())&&k.split(/\s+/g).forEach(we=>{ee?this._renderer.addClass(this._ngEl.nativeElement,we):this._renderer.removeClass(this._ngEl.nativeElement,we)})}}return x.\u0275fac=function(k){return new(k||x)(P.Y36(P.ZZ4),P.Y36(P.aQg),P.Y36(P.SBq),P.Y36(P.Qsj))},x.\u0275dir=P.lG2({type:x,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),x})();class ln{constructor(W,k,ee,we){this.$implicit=W,this.ngForOf=k,this.index=ee,this.count=we}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cn=(()=>{class x{constructor(k,ee,we){this._viewContainer=k,this._template=ee,this._differs=we,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(k){this._ngForOf=k,this._ngForOfDirty=!0}set ngForTrackBy(k){this._trackByFn=k}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(k){k&&(this._template=k)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const k=this._ngForOf;if(!this._differ&&k)try{this._differ=this._differs.find(k).create(this.ngForTrackBy)}catch(ee){throw new Error(`Cannot find a differ supporting object '${k}' of type '${function(x){return x.name||typeof x}(k)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const k=this._differ.diff(this._ngForOf);k&&this._applyChanges(k)}}_applyChanges(k){const ee=[];k.forEachOperation((we,je,rt)=>{if(null==we.previousIndex){const G=this._viewContainer.createEmbeddedView(this._template,new ln(null,this._ngForOf,-1,-1),null===rt?void 0:rt),H=new Xn(we,G);ee.push(H)}else if(null==rt)this._viewContainer.remove(null===je?void 0:je);else if(null!==je){const G=this._viewContainer.get(je);this._viewContainer.move(G,rt);const H=new Xn(we,G);ee.push(H)}});for(let we=0;we<ee.length;we++)this._perViewChange(ee[we].view,ee[we].record);for(let we=0,je=this._viewContainer.length;we<je;we++){const rt=this._viewContainer.get(we);rt.context.index=we,rt.context.count=je,rt.context.ngForOf=this._ngForOf}k.forEachIdentityChange(we=>{this._viewContainer.get(we.currentIndex).context.$implicit=we.item})}_perViewChange(k,ee){k.context.$implicit=ee.item}static ngTemplateContextGuard(k,ee){return!0}}return x.\u0275fac=function(k){return new(k||x)(P.Y36(P.s_b),P.Y36(P.Rgc),P.Y36(P.ZZ4))},x.\u0275dir=P.lG2({type:x,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),x})();class Xn{constructor(W,k){this.record=W,this.view=k}}let pr=(()=>{class x{constructor(k,ee){this._viewContainer=k,this._context=new Li,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ee}set ngIf(k){this._context.$implicit=this._context.ngIf=k,this._updateView()}set ngIfThen(k){uo("ngIfThen",k),this._thenTemplateRef=k,this._thenViewRef=null,this._updateView()}set ngIfElse(k){uo("ngIfElse",k),this._elseTemplateRef=k,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(k,ee){return!0}}return x.\u0275fac=function(k){return new(k||x)(P.Y36(P.s_b),P.Y36(P.Rgc))},x.\u0275dir=P.lG2({type:x,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),x})();class Li{constructor(){this.$implicit=null,this.ngIf=null}}function uo(x,W){if(W&&!W.createEmbeddedView)throw new Error(`${x} must be a TemplateRef, but received '${(0,P.AaK)(W)}'.`)}class $r{constructor(W,k){this._viewContainerRef=W,this._templateRef=k,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(W){W&&!this._created?this.create():!W&&this._created&&this.destroy()}}let Vi=(()=>{class x{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(k){this._ngSwitch=k,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(k){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(k)}_matchCase(k){const ee=k==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ee,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ee}_updateDefaultCases(k){if(this._defaultViews&&k!==this._defaultUsed){this._defaultUsed=k;for(let ee=0;ee<this._defaultViews.length;ee++)this._defaultViews[ee].enforceState(k)}}}return x.\u0275fac=function(k){return new(k||x)},x.\u0275dir=P.lG2({type:x,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),x})(),sr=(()=>{class x{constructor(k,ee,we){this.ngSwitch=we,we._addCase(),this._view=new $r(k,ee)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return x.\u0275fac=function(k){return new(k||x)(P.Y36(P.s_b),P.Y36(P.Rgc),P.Y36(Vi,9))},x.\u0275dir=P.lG2({type:x,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),x})(),jn=(()=>{class x{constructor(k,ee,we){we._addDefault(new $r(k,ee))}}return x.\u0275fac=function(k){return new(k||x)(P.Y36(P.s_b),P.Y36(P.Rgc),P.Y36(Vi,9))},x.\u0275dir=P.lG2({type:x,selectors:[["","ngSwitchDefault",""]]}),x})();function _i(x,W){return Error(`InvalidPipeArgument: '${W}' for pipe '${(0,P.AaK)(x)}'`)}class ds{createSubscription(W,k){return W.subscribe({next:k,error:ee=>{throw ee}})}dispose(W){W.unsubscribe()}onDestroy(W){W.unsubscribe()}}class jr{createSubscription(W,k){return W.then(k,ee=>{throw ee})}dispose(W){}onDestroy(W){}}const _s=new jr,Zi=new ds;let zo=(()=>{class x{constructor(k){this._ref=k,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(k){return this._obj?k!==this._obj?(this._dispose(),this.transform(k)):this._latestValue:(k&&this._subscribe(k),this._latestValue)}_subscribe(k){this._obj=k,this._strategy=this._selectStrategy(k),this._subscription=this._strategy.createSubscription(k,ee=>this._updateLatestValue(k,ee))}_selectStrategy(k){if((0,P.QGY)(k))return _s;if((0,P.F4k)(k))return Zi;throw _i(x,k)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(k,ee){k===this._obj&&(this._latestValue=ee,this._ref.markForCheck())}}return x.\u0275fac=function(k){return new(k||x)(P.Y36(P.sBO,16))},x.\u0275pipe=P.Yjl({name:"async",type:x,pure:!1}),x})(),qo=(()=>{class x{constructor(k){this.locale=k}transform(k,ee="mediumDate",we,je){if(null==k||""===k||k!=k)return null;try{return gt(k,ee,je||this.locale,we)}catch(rt){throw _i(x,rt.message)}}}return x.\u0275fac=function(k){return new(k||x)(P.Y36(P.soG,16))},x.\u0275pipe=P.Yjl({name:"date",type:x,pure:!0}),x})(),wo=(()=>{class x{}return x.\u0275fac=function(k){return new(k||x)},x.\u0275mod=P.oAB({type:x}),x.\u0275inj=P.cJS({providers:[{provide:B,useClass:ce}]}),x})();const Do="browser";function ho(x){return x===Do}function Lo(x){return"server"===x}let lr=(()=>{class x{}return x.\u0275prov=(0,P.Yz7)({token:x,providedIn:"root",factory:()=>new fo((0,P.LFG)(Fe),window)}),x})();class fo{constructor(W,k){this.document=W,this.window=k,this.offset=()=>[0,0]}setOffset(W){this.offset=Array.isArray(W)?()=>W:W}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(W){this.supportsScrolling()&&this.window.scrollTo(W[0],W[1])}scrollToAnchor(W){if(!this.supportsScrolling())return;const k=function(x,W){const k=x.getElementById(W)||x.getElementsByName(W)[0];if(k)return k;if("function"==typeof x.createTreeWalker&&x.body&&(x.body.createShadowRoot||x.body.attachShadow)){const ee=x.createTreeWalker(x.body,NodeFilter.SHOW_ELEMENT);let we=ee.currentNode;for(;we;){const je=we.shadowRoot;if(je){const rt=je.getElementById(W)||je.querySelector(`[name="${W}"]`);if(rt)return rt}we=ee.nextNode()}}return null}(this.document,W);k&&(this.scrollToElement(k),this.attemptFocus(k))}setHistoryScrollRestoration(W){if(this.supportScrollRestoration()){const k=this.window.history;k&&k.scrollRestoration&&(k.scrollRestoration=W)}}scrollToElement(W){const k=W.getBoundingClientRect(),ee=k.left+this.window.pageXOffset,we=k.top+this.window.pageYOffset,je=this.offset();this.window.scrollTo(ee-je[0],we-je[1])}attemptFocus(W){return W.focus(),this.document.activeElement===W}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const W=os(this.window.history)||os(Object.getPrototypeOf(this.window.history));return!(!W||!W.writable&&!W.set)}catch(W){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(W){return!1}}}function os(x){return Object.getOwnPropertyDescriptor(x,"scrollRestoration")}class ge{}},1841:(jt,it,Q)=>{"use strict";Q.d(it,{eN:()=>at,JF:()=>dr});var P=Q(8583),g=Q(7716),X=Q(5917),C=Q(7574),Ve=Q(4612),Ee=Q(5435),Fe=Q(8002);class fe{}class ve{}class se{constructor(Ze){this.normalizedNames=new Map,this.lazyUpdate=null,Ze?this.lazyInit="string"==typeof Ze?()=>{this.headers=new Map,Ze.split("\n").forEach(ze=>{const It=ze.indexOf(":");if(It>0){const xt=ze.slice(0,It),sn=xt.toLowerCase(),Mt=ze.slice(It+1).trim();this.maybeSetNormalizedName(xt,sn),this.headers.has(sn)?this.headers.get(sn).push(Mt):this.headers.set(sn,[Mt])}})}:()=>{this.headers=new Map,Object.keys(Ze).forEach(ze=>{let It=Ze[ze];const xt=ze.toLowerCase();"string"==typeof It&&(It=[It]),It.length>0&&(this.headers.set(xt,It),this.maybeSetNormalizedName(ze,xt))})}:this.headers=new Map}has(Ze){return this.init(),this.headers.has(Ze.toLowerCase())}get(Ze){this.init();const ze=this.headers.get(Ze.toLowerCase());return ze&&ze.length>0?ze[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ze){return this.init(),this.headers.get(Ze.toLowerCase())||null}append(Ze,ze){return this.clone({name:Ze,value:ze,op:"a"})}set(Ze,ze){return this.clone({name:Ze,value:ze,op:"s"})}delete(Ze,ze){return this.clone({name:Ze,value:ze,op:"d"})}maybeSetNormalizedName(Ze,ze){this.normalizedNames.has(ze)||this.normalizedNames.set(ze,Ze)}init(){this.lazyInit&&(this.lazyInit instanceof se?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ze=>this.applyUpdate(Ze)),this.lazyUpdate=null))}copyFrom(Ze){Ze.init(),Array.from(Ze.headers.keys()).forEach(ze=>{this.headers.set(ze,Ze.headers.get(ze)),this.normalizedNames.set(ze,Ze.normalizedNames.get(ze))})}clone(Ze){const ze=new se;return ze.lazyInit=this.lazyInit&&this.lazyInit instanceof se?this.lazyInit:this,ze.lazyUpdate=(this.lazyUpdate||[]).concat([Ze]),ze}applyUpdate(Ze){const ze=Ze.name.toLowerCase();switch(Ze.op){case"a":case"s":let It=Ze.value;if("string"==typeof It&&(It=[It]),0===It.length)return;this.maybeSetNormalizedName(Ze.name,ze);const xt=("a"===Ze.op?this.headers.get(ze):void 0)||[];xt.push(...It),this.headers.set(ze,xt);break;case"d":const sn=Ze.value;if(sn){let Mt=this.headers.get(ze);if(!Mt)return;Mt=Mt.filter(He=>-1===sn.indexOf(He)),0===Mt.length?(this.headers.delete(ze),this.normalizedNames.delete(ze)):this.headers.set(ze,Mt)}else this.headers.delete(ze),this.normalizedNames.delete(ze)}}forEach(Ze){this.init(),Array.from(this.normalizedNames.keys()).forEach(ze=>Ze(this.normalizedNames.get(ze),this.headers.get(ze)))}}class Se{encodeKey(Ze){return Ue(Ze)}encodeValue(Ze){return Ue(Ze)}decodeKey(Ze){return decodeURIComponent(Ze)}decodeValue(Ze){return decodeURIComponent(Ze)}}const Ce=/%(\d[a-f0-9])/gi,Me={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Ue(Dt){return encodeURIComponent(Dt).replace(Ce,(Ze,ze)=>{var It;return null!==(It=Me[ze])&&void 0!==It?It:Ze})}function Xe(Dt){return`${Dt}`}class re{constructor(Ze={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ze.encoder||new Se,Ze.fromString){if(Ze.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(Dt,Ze){const ze=new Map;return Dt.length>0&&Dt.replace(/^\?/,"").split("&").forEach(xt=>{const sn=xt.indexOf("="),[Mt,He]=-1==sn?[Ze.decodeKey(xt),""]:[Ze.decodeKey(xt.slice(0,sn)),Ze.decodeValue(xt.slice(sn+1))],gt=ze.get(Mt)||[];gt.push(He),ze.set(Mt,gt)}),ze}(Ze.fromString,this.encoder)}else Ze.fromObject?(this.map=new Map,Object.keys(Ze.fromObject).forEach(ze=>{const It=Ze.fromObject[ze];this.map.set(ze,Array.isArray(It)?It:[It])})):this.map=null}has(Ze){return this.init(),this.map.has(Ze)}get(Ze){this.init();const ze=this.map.get(Ze);return ze?ze[0]:null}getAll(Ze){return this.init(),this.map.get(Ze)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ze,ze){return this.clone({param:Ze,value:ze,op:"a"})}appendAll(Ze){const ze=[];return Object.keys(Ze).forEach(It=>{const xt=Ze[It];Array.isArray(xt)?xt.forEach(sn=>{ze.push({param:It,value:sn,op:"a"})}):ze.push({param:It,value:xt,op:"a"})}),this.clone(ze)}set(Ze,ze){return this.clone({param:Ze,value:ze,op:"s"})}delete(Ze,ze){return this.clone({param:Ze,value:ze,op:"d"})}toString(){return this.init(),this.keys().map(Ze=>{const ze=this.encoder.encodeKey(Ze);return this.map.get(Ze).map(It=>ze+"="+this.encoder.encodeValue(It)).join("&")}).filter(Ze=>""!==Ze).join("&")}clone(Ze){const ze=new re({encoder:this.encoder});return ze.cloneFrom=this.cloneFrom||this,ze.updates=(this.updates||[]).concat(Ze),ze}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ze=>this.map.set(Ze,this.cloneFrom.map.get(Ze))),this.updates.forEach(Ze=>{switch(Ze.op){case"a":case"s":const ze=("a"===Ze.op?this.map.get(Ze.param):void 0)||[];ze.push(Xe(Ze.value)),this.map.set(Ze.param,ze);break;case"d":if(void 0===Ze.value){this.map.delete(Ze.param);break}{let It=this.map.get(Ze.param)||[];const xt=It.indexOf(Xe(Ze.value));-1!==xt&&It.splice(xt,1),It.length>0?this.map.set(Ze.param,It):this.map.delete(Ze.param)}}}),this.cloneFrom=this.updates=null)}}class St{constructor(){this.map=new Map}set(Ze,ze){return this.map.set(Ze,ze),this}get(Ze){return this.map.has(Ze)||this.map.set(Ze,Ze.defaultValue()),this.map.get(Ze)}delete(Ze){return this.map.delete(Ze),this}keys(){return this.map.keys()}}function kt(Dt){return"undefined"!=typeof ArrayBuffer&&Dt instanceof ArrayBuffer}function dt(Dt){return"undefined"!=typeof Blob&&Dt instanceof Blob}function Zt(Dt){return"undefined"!=typeof FormData&&Dt instanceof FormData}class Cn{constructor(Ze,ze,It,xt){let sn;if(this.url=ze,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ze.toUpperCase(),function(Dt){switch(Dt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||xt?(this.body=void 0!==It?It:null,sn=xt):sn=It,sn&&(this.reportProgress=!!sn.reportProgress,this.withCredentials=!!sn.withCredentials,sn.responseType&&(this.responseType=sn.responseType),sn.headers&&(this.headers=sn.headers),sn.context&&(this.context=sn.context),sn.params&&(this.params=sn.params)),this.headers||(this.headers=new se),this.context||(this.context=new St),this.params){const Mt=this.params.toString();if(0===Mt.length)this.urlWithParams=ze;else{const He=ze.indexOf("?");this.urlWithParams=ze+(-1===He?"?":He<ze.length-1?"&":"")+Mt}}else this.params=new re,this.urlWithParams=ze}serializeBody(){return null===this.body?null:kt(this.body)||dt(this.body)||Zt(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof re?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Zt(this.body)?null:dt(this.body)?this.body.type||null:kt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof re?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ze={}){var ze;const It=Ze.method||this.method,xt=Ze.url||this.url,sn=Ze.responseType||this.responseType,Mt=void 0!==Ze.body?Ze.body:this.body,He=void 0!==Ze.withCredentials?Ze.withCredentials:this.withCredentials,gt=void 0!==Ze.reportProgress?Ze.reportProgress:this.reportProgress;let vt=Ze.headers||this.headers,Tt=Ze.params||this.params;const Vt=null!==(ze=Ze.context)&&void 0!==ze?ze:this.context;return void 0!==Ze.setHeaders&&(vt=Object.keys(Ze.setHeaders).reduce((hn,gn)=>hn.set(gn,Ze.setHeaders[gn]),vt)),Ze.setParams&&(Tt=Object.keys(Ze.setParams).reduce((hn,gn)=>hn.set(gn,Ze.setParams[gn]),Tt)),new Cn(It,xt,Mt,{params:Tt,headers:vt,context:Vt,reportProgress:gt,responseType:sn,withCredentials:He})}}var wt=(()=>((wt=wt||{})[wt.Sent=0]="Sent",wt[wt.UploadProgress=1]="UploadProgress",wt[wt.ResponseHeader=2]="ResponseHeader",wt[wt.DownloadProgress=3]="DownloadProgress",wt[wt.Response=4]="Response",wt[wt.User=5]="User",wt))();class Je{constructor(Ze,ze=200,It="OK"){this.headers=Ze.headers||new se,this.status=void 0!==Ze.status?Ze.status:ze,this.statusText=Ze.statusText||It,this.url=Ze.url||null,this.ok=this.status>=200&&this.status<300}}class ot extends Je{constructor(Ze={}){super(Ze),this.type=wt.ResponseHeader}clone(Ze={}){return new ot({headers:Ze.headers||this.headers,status:void 0!==Ze.status?Ze.status:this.status,statusText:Ze.statusText||this.statusText,url:Ze.url||this.url||void 0})}}class st extends Je{constructor(Ze={}){super(Ze),this.type=wt.Response,this.body=void 0!==Ze.body?Ze.body:null}clone(Ze={}){return new st({body:void 0!==Ze.body?Ze.body:this.body,headers:Ze.headers||this.headers,status:void 0!==Ze.status?Ze.status:this.status,statusText:Ze.statusText||this.statusText,url:Ze.url||this.url||void 0})}}class nt extends Je{constructor(Ze){super(Ze,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ze.url||"(unknown url)"}`:`Http failure response for ${Ze.url||"(unknown url)"}: ${Ze.status} ${Ze.statusText}`,this.error=Ze.error||null}}function yt(Dt,Ze){return{body:Ze,headers:Dt.headers,context:Dt.context,observe:Dt.observe,params:Dt.params,reportProgress:Dt.reportProgress,responseType:Dt.responseType,withCredentials:Dt.withCredentials}}let at=(()=>{class Dt{constructor(ze){this.handler=ze}request(ze,It,xt={}){let sn;if(ze instanceof Cn)sn=ze;else{let gt,vt;gt=xt.headers instanceof se?xt.headers:new se(xt.headers),xt.params&&(vt=xt.params instanceof re?xt.params:new re({fromObject:xt.params})),sn=new Cn(ze,It,void 0!==xt.body?xt.body:null,{headers:gt,context:xt.context,params:vt,reportProgress:xt.reportProgress,responseType:xt.responseType||"json",withCredentials:xt.withCredentials})}const Mt=(0,X.of)(sn).pipe((0,Ve.b)(gt=>this.handler.handle(gt)));if(ze instanceof Cn||"events"===xt.observe)return Mt;const He=Mt.pipe((0,Ee.h)(gt=>gt instanceof st));switch(xt.observe||"body"){case"body":switch(sn.responseType){case"arraybuffer":return He.pipe((0,Fe.U)(gt=>{if(null!==gt.body&&!(gt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return gt.body}));case"blob":return He.pipe((0,Fe.U)(gt=>{if(null!==gt.body&&!(gt.body instanceof Blob))throw new Error("Response is not a Blob.");return gt.body}));case"text":return He.pipe((0,Fe.U)(gt=>{if(null!==gt.body&&"string"!=typeof gt.body)throw new Error("Response is not a string.");return gt.body}));case"json":default:return He.pipe((0,Fe.U)(gt=>gt.body))}case"response":return He;default:throw new Error(`Unreachable: unhandled observe type ${xt.observe}}`)}}delete(ze,It={}){return this.request("DELETE",ze,It)}get(ze,It={}){return this.request("GET",ze,It)}head(ze,It={}){return this.request("HEAD",ze,It)}jsonp(ze,It){return this.request("JSONP",ze,{params:(new re).append(It,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ze,It={}){return this.request("OPTIONS",ze,It)}patch(ze,It,xt={}){return this.request("PATCH",ze,yt(xt,It))}post(ze,It,xt={}){return this.request("POST",ze,yt(xt,It))}put(ze,It,xt={}){return this.request("PUT",ze,yt(xt,It))}}return Dt.\u0275fac=function(ze){return new(ze||Dt)(g.LFG(fe))},Dt.\u0275prov=g.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})();class tn{constructor(Ze,ze){this.next=Ze,this.interceptor=ze}handle(Ze){return this.interceptor.intercept(Ze,this.next)}}const un=new g.OlP("HTTP_INTERCEPTORS");let Tn=(()=>{class Dt{intercept(ze,It){return It.handle(ze)}}return Dt.\u0275fac=function(ze){return new(ze||Dt)},Dt.\u0275prov=g.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})();const or=/^\)\]\}',?\n/;let Bn=(()=>{class Dt{constructor(ze){this.xhrFactory=ze}handle(ze){if("JSONP"===ze.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new C.y(It=>{const xt=this.xhrFactory.build();if(xt.open(ze.method,ze.urlWithParams),ze.withCredentials&&(xt.withCredentials=!0),ze.headers.forEach((gn,Gt)=>xt.setRequestHeader(gn,Gt.join(","))),ze.headers.has("Accept")||xt.setRequestHeader("Accept","application/json, text/plain, */*"),!ze.headers.has("Content-Type")){const gn=ze.detectContentTypeHeader();null!==gn&&xt.setRequestHeader("Content-Type",gn)}if(ze.responseType){const gn=ze.responseType.toLowerCase();xt.responseType="json"!==gn?gn:"text"}const sn=ze.serializeBody();let Mt=null;const He=()=>{if(null!==Mt)return Mt;const gn=1223===xt.status?204:xt.status,Gt=xt.statusText||"OK",Oe=new se(xt.getAllResponseHeaders()),xe=function(Dt){return"responseURL"in Dt&&Dt.responseURL?Dt.responseURL:/^X-Request-URL:/m.test(Dt.getAllResponseHeaders())?Dt.getResponseHeader("X-Request-URL"):null}(xt)||ze.url;return Mt=new ot({headers:Oe,status:gn,statusText:Gt,url:xe}),Mt},gt=()=>{let{headers:gn,status:Gt,statusText:Oe,url:xe}=He(),Ye=null;204!==Gt&&(Ye=void 0===xt.response?xt.responseText:xt.response),0===Gt&&(Gt=Ye?200:0);let et=Gt>=200&&Gt<300;if("json"===ze.responseType&&"string"==typeof Ye){const tt=Ye;Ye=Ye.replace(or,"");try{Ye=""!==Ye?JSON.parse(Ye):null}catch(zt){Ye=tt,et&&(et=!1,Ye={error:zt,text:Ye})}}et?(It.next(new st({body:Ye,headers:gn,status:Gt,statusText:Oe,url:xe||void 0})),It.complete()):It.error(new nt({error:Ye,headers:gn,status:Gt,statusText:Oe,url:xe||void 0}))},vt=gn=>{const{url:Gt}=He(),Oe=new nt({error:gn,status:xt.status||0,statusText:xt.statusText||"Unknown Error",url:Gt||void 0});It.error(Oe)};let Tt=!1;const Vt=gn=>{Tt||(It.next(He()),Tt=!0);let Gt={type:wt.DownloadProgress,loaded:gn.loaded};gn.lengthComputable&&(Gt.total=gn.total),"text"===ze.responseType&&!!xt.responseText&&(Gt.partialText=xt.responseText),It.next(Gt)},hn=gn=>{let Gt={type:wt.UploadProgress,loaded:gn.loaded};gn.lengthComputable&&(Gt.total=gn.total),It.next(Gt)};return xt.addEventListener("load",gt),xt.addEventListener("error",vt),xt.addEventListener("timeout",vt),xt.addEventListener("abort",vt),ze.reportProgress&&(xt.addEventListener("progress",Vt),null!==sn&&xt.upload&&xt.upload.addEventListener("progress",hn)),xt.send(sn),It.next({type:wt.Sent}),()=>{xt.removeEventListener("error",vt),xt.removeEventListener("abort",vt),xt.removeEventListener("load",gt),xt.removeEventListener("timeout",vt),ze.reportProgress&&(xt.removeEventListener("progress",Vt),null!==sn&&xt.upload&&xt.upload.removeEventListener("progress",hn)),xt.readyState!==xt.DONE&&xt.abort()}})}}return Dt.\u0275fac=function(ze){return new(ze||Dt)(g.LFG(P.JF))},Dt.\u0275prov=g.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})();const Jn=new g.OlP("XSRF_COOKIE_NAME"),Sn=new g.OlP("XSRF_HEADER_NAME");class An{}let Mi=(()=>{class Dt{constructor(ze,It,xt){this.doc=ze,this.platform=It,this.cookieName=xt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ze=this.doc.cookie||"";return ze!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,P.Mx)(ze,this.cookieName),this.lastCookieString=ze),this.lastToken}}return Dt.\u0275fac=function(ze){return new(ze||Dt)(g.LFG(P.K0),g.LFG(g.Lbi),g.LFG(Jn))},Dt.\u0275prov=g.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})(),mn=(()=>{class Dt{constructor(ze,It){this.tokenService=ze,this.headerName=It}intercept(ze,It){const xt=ze.url.toLowerCase();if("GET"===ze.method||"HEAD"===ze.method||xt.startsWith("http://")||xt.startsWith("https://"))return It.handle(ze);const sn=this.tokenService.getToken();return null!==sn&&!ze.headers.has(this.headerName)&&(ze=ze.clone({headers:ze.headers.set(this.headerName,sn)})),It.handle(ze)}}return Dt.\u0275fac=function(ze){return new(ze||Dt)(g.LFG(An),g.LFG(Sn))},Dt.\u0275prov=g.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})(),Wt=(()=>{class Dt{constructor(ze,It){this.backend=ze,this.injector=It,this.chain=null}handle(ze){if(null===this.chain){const It=this.injector.get(un,[]);this.chain=It.reduceRight((xt,sn)=>new tn(xt,sn),this.backend)}return this.chain.handle(ze)}}return Dt.\u0275fac=function(ze){return new(ze||Dt)(g.LFG(ve),g.LFG(g.zs3))},Dt.\u0275prov=g.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})(),Qt=(()=>{class Dt{static disable(){return{ngModule:Dt,providers:[{provide:mn,useClass:Tn}]}}static withOptions(ze={}){return{ngModule:Dt,providers:[ze.cookieName?{provide:Jn,useValue:ze.cookieName}:[],ze.headerName?{provide:Sn,useValue:ze.headerName}:[]]}}}return Dt.\u0275fac=function(ze){return new(ze||Dt)},Dt.\u0275mod=g.oAB({type:Dt}),Dt.\u0275inj=g.cJS({providers:[mn,{provide:un,useExisting:mn,multi:!0},{provide:An,useClass:Mi},{provide:Jn,useValue:"XSRF-TOKEN"},{provide:Sn,useValue:"X-XSRF-TOKEN"}]}),Dt})(),dr=(()=>{class Dt{}return Dt.\u0275fac=function(ze){return new(ze||Dt)},Dt.\u0275mod=g.oAB({type:Dt}),Dt.\u0275inj=g.cJS({providers:[at,{provide:fe,useClass:Wt},Bn,{provide:ve,useExisting:Bn}],imports:[[Qt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Dt})()},7716:(jt,it,Q)=>{"use strict";Q.d(it,{deG:()=>ia,tb:()=>DC,AFp:()=>CC,ip1:()=>Uy,CZH:()=>Of,hGG:()=>xA,z2F:()=>Jp,sBO:()=>ED,Sil:()=>Qp,_Vd:()=>Ef,EJc:()=>SC,SBq:()=>Nc,qLn:()=>fl,vpe:()=>kc,gxx:()=>ql,tBr:()=>Tu,XFs:()=>Qt,OlP:()=>Ii,zs3:()=>bo,ZZ4:()=>Pm,aQg:()=>Fm,soG:()=>zm,YKP:()=>d0,v3s:()=>dA,h0i:()=>Fh,PXZ:()=>oA,R0b:()=>Zu,FiY:()=>as,Lbi:()=>wC,g9A:()=>EC,n_E:()=>Yp,Qsj:()=>aD,FYo:()=>xm,JOm:()=>ea,Tiy:()=>hy,q3G:()=>qr,tp0:()=>$s,EAV:()=>gA,Rgc:()=>Vp,dDg:()=>OC,DyG:()=>zs,q4F:()=>fy,GfV:()=>r0,s_b:()=>Lm,ifc:()=>Mt,eFA:()=>NC,G48:()=>JS,Gpc:()=>Se,f3M:()=>uc,X6Q:()=>Zy,_c5:()=>TA,VLi:()=>QS,c2e:()=>TC,zSh:()=>qd,wAp:()=>fr,vHH:()=>Ue,EiD:()=>mc,mCW:()=>Jo,qzn:()=>ua,JVY:()=>yd,pB0:()=>lh,eBb:()=>dc,L6k:()=>vd,LAX:()=>uh,cg1:()=>ry,Tjo:()=>wA,kL8:()=>Tb,yhl:()=>al,dqk:()=>Vt,sIi:()=>Oh,CqO:()=>$_,QGY:()=>Z_,F4k:()=>Rv,RDi:()=>K,AaK:()=>fe,z3N:()=>zr,qOj:()=>Jd,TTD:()=>wo,_Bn:()=>Jb,xp6:()=>zh,uIk:()=>_f,Gre:()=>pb,ekj:()=>J_,Suo:()=>X0,Xpm:()=>Rn,lG2:()=>ao,Yz7:()=>bn,cJS:()=>Gn,oAB:()=>Ri,Yjl:()=>ns,Y36:()=>Rp,_UZ:()=>Mv,BQk:()=>q_,ynx:()=>z_,qZA:()=>G_,TgZ:()=>H_,EpF:()=>Ov,n5z:()=>Ct,Ikx:()=>ny,LFG:()=>gi,$8M:()=>rr,NdJ:()=>W_,CRH:()=>eC,oxw:()=>Nv,ALo:()=>$0,xi3:()=>W0,Hsn:()=>Lv,F$t:()=>kv,Q6J:()=>B_,DdM:()=>U0,VKq:()=>B0,kEZ:()=>j0,iGM:()=>Q0,MAs:()=>_m,CHM:()=>vs,LSH:()=>_c,kYT:()=>Fo,Udp:()=>Q_,YNc:()=>Rh,_uU:()=>sb,Oqu:()=>ey,hij:()=>Tm,AsE:()=>ty,Gf:()=>J0});var P=Q(9765),g=Q(5319),X=Q(7574),C=Q(6682),Ve=Q(8819);function Ee(e){for(let i in e)if(e[i]===Ee)return i;throw Error("Could not find renamed property on target object.")}function Fe(e,i){for(const a in i)i.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(e[a]=i[a])}function fe(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(fe).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const i=e.toString();if(null==i)return""+i;const a=i.indexOf("\n");return-1===a?i:i.substring(0,a)}function ve(e,i){return null==e||""===e?null===i?"":i:null==i||""===i?e:e+" "+i}const se=Ee({__forward_ref__:Ee});function Se(e){return e.__forward_ref__=Se,e.toString=function(){return fe(this())},e}function me(e){return Ce(e)?e():e}function Ce(e){return"function"==typeof e&&e.hasOwnProperty(se)&&e.__forward_ref__===Se}class Ue extends Error{constructor(i,a){super(function(e,i){return`${e?`NG0${e}: `:""}${i}`}(i,a)),this.code=i}}function Ke(e){return"string"==typeof e?e:null==e?"":String(e)}function St(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Ke(e)}function Zt(e,i){const a=i?` in ${i}`:"";throw new Ue("201",`No provider for ${St(e)} found${a}`)}function Bt(e,i){null==e&&function(e,i,a,u){throw new Error(`ASSERTION ERROR: ${e}`+(null==u?"":` [Expected=> ${a} ${u} ${i} <=Actual]`))}(i,e,null,"!=")}function bn(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Gn(e){return{providers:e.providers||[],imports:e.imports||[]}}function Bn(e){return Jn(e,mn)||Jn(e,kn)}function Jn(e,i){return e.hasOwnProperty(i)?e[i]:null}function Mi(e){return e&&(e.hasOwnProperty(Wt)||e.hasOwnProperty(Ln))?e[Wt]:null}const mn=Ee({\u0275prov:Ee}),Wt=Ee({\u0275inj:Ee}),kn=Ee({ngInjectableDef:Ee}),Ln=Ee({ngInjectorDef:Ee});var Qt=(()=>((Qt=Qt||{})[Qt.Default=0]="Default",Qt[Qt.Host=1]="Host",Qt[Qt.Self=2]="Self",Qt[Qt.SkipSelf=4]="SkipSelf",Qt[Qt.Optional=8]="Optional",Qt))();let dr;function Zn(e){const i=dr;return dr=e,i}function Dt(e,i,a){const u=Bn(e);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&Qt.Optional?null:void 0!==i?i:void Zt(fe(e),"Injector")}function ze(e){return{toString:e}.toString()}var It=(()=>((It=It||{})[It.OnPush=0]="OnPush",It[It.Default=1]="Default",It))(),Mt=(()=>((Mt=Mt||{})[Mt.Emulated=0]="Emulated",Mt[Mt.None=2]="None",Mt[Mt.ShadowDom=3]="ShadowDom",Mt))();const He="undefined"!=typeof globalThis&&globalThis,gt="undefined"!=typeof window&&window,vt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vt=He||"undefined"!=typeof global&&global||gt||vt,Gt={},Oe=[],xe=Ee({\u0275cmp:Ee}),Ye=Ee({\u0275dir:Ee}),et=Ee({\u0275pipe:Ee}),tt=Ee({\u0275mod:Ee}),zt=Ee({\u0275loc:Ee}),_n=Ee({\u0275fac:Ee}),nr=Ee({__NG_ELEMENT_ID__:Ee});let Vn=0;function Rn(e){return ze(()=>{const a={},u={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===It.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Oe,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Mt.Emulated,id:"c",styles:e.styles||Oe,_:null,setInput:null,schemas:e.schemas||null,tView:null},h=e.directives,_=e.features,b=e.pipes;return u.id+=Vn++,u.inputs=ki(e.inputs,a),u.outputs=ki(e.outputs),_&&_.forEach(T=>T(u)),u.directiveDefs=h?()=>("function"==typeof h?h():h).map(Br):null,u.pipeDefs=b?()=>("function"==typeof b?b():b).map(Yr):null,u})}function Br(e){return Fr(e)||function(e){return e[Ye]||null}(e)}function Yr(e){return function(e){return e[et]||null}(e)}const Er={};function Ri(e){return ze(()=>{const i={type:e.type,bootstrap:e.bootstrap||Oe,declarations:e.declarations||Oe,imports:e.imports||Oe,exports:e.exports||Oe,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(Er[e.id]=e.type),i})}function Fo(e,i){return ze(()=>{const a=Lr(e,!0);a.declarations=i.declarations||Oe,a.imports=i.imports||Oe,a.exports=i.exports||Oe})}function ki(e,i){if(null==e)return Gt;const a={};for(const u in e)if(e.hasOwnProperty(u)){let h=e[u],_=h;Array.isArray(h)&&(_=h[1],h=h[0]),a[h]=u,i&&(i[h]=_)}return a}const ao=Rn;function ns(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function Fr(e){return e[xe]||null}function Lr(e,i){const a=e[tt]||null;if(!a&&!0===i)throw new Error(`Type ${fe(e)} does not have '\u0275mod' property.`);return a}function Kr(e){return Array.isArray(e)&&"object"==typeof e[1]}function Mr(e){return Array.isArray(e)&&!0===e[1]}function zi(e){return 0!=(8&e.flags)}function hi(e){return 2==(2&e.flags)}function qi(e){return 1==(1&e.flags)}function Ki(e){return null!==e.template}function _i(e){return 0!=(512&e[2])}function Nr(e,i){return e.hasOwnProperty(_n)?e[_n]:null}class is{constructor(i,a,u){this.previousValue=i,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function wo(){return Do}function Do(e){return e.type.prototype.ngOnChanges&&(e.setInput=no),Or}function Or(){const e=ho(this),i=null==e?void 0:e.current;if(i){const a=e.previous;if(a===Gt)e.previous=i;else for(let u in i)a[u]=i[u];e.current=null,this.ngOnChanges(i)}}function no(e,i,a,u){const h=ho(e)||function(e,i){return e[ei]=i}(e,{previous:Gt,current:null}),_=h.current||(h.current={}),b=h.previous,T=this.declaredInputs[a],N=b[T];_[T]=new is(N&&N.currentValue,i,b===Gt),e[u]=i}wo.ngInherit=!0;const ei="__ngSimpleChanges__";function ho(e){return e[ei]||null}let os;function K(e){os=e}function x(e){return!!e.listen}const k={createRenderer:(e,i)=>void 0!==os?os:"undefined"!=typeof document?document:void 0};function we(e){for(;Array.isArray(e);)e=e[0];return e}function G(e,i){return we(i[e])}function H(e,i){return we(i[e.index])}function ue(e,i){return e.data[i]}function $e(e,i){return e[i]}function Rt(e,i){const a=i[e];return Kr(a)?a:a[0]}function wn(e){return 4==(4&e[2])}function cr(e){return 128==(128&e[2])}function hr(e,i){return null==i?null:e[i]}function Gr(e){e[18]=0}function ii(e,i){e[5]+=i;let a=e,u=e[3];for(;null!==u&&(1===i&&1===a[5]||-1===i&&0===a[5]);)u[5]+=i,a=u,u=u[3]}const Dn={lFrame:ai(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $u(){return Dn.bindingsEnabled}function Nt(){return Dn.lFrame.lView}function mr(){return Dn.lFrame.tView}function vs(e){return Dn.lFrame.contextLView=e,e[8]}function xi(){let e=Os();for(;null!==e&&64===e.type;)e=e.parent;return e}function Os(){return Dn.lFrame.currentTNode}function Zo(e,i){const a=Dn.lFrame;a.currentTNode=e,a.isParent=i}function oe(){return Dn.lFrame.isParent}function A(){Dn.lFrame.isParent=!1}function ae(){return Dn.isInCheckNoChangesMode}function be(e){Dn.isInCheckNoChangesMode=e}function Pe(){const e=Dn.lFrame;let i=e.bindingRootIndex;return-1===i&&(i=e.bindingRootIndex=e.tView.bindingStartIndex),i}function Le(){return Dn.lFrame.bindingIndex}function mt(){return Dn.lFrame.bindingIndex++}function qt(e){const i=Dn.lFrame,a=i.bindingIndex;return i.bindingIndex=i.bindingIndex+e,a}function Tr(e,i){const a=Dn.lFrame;a.bindingIndex=a.bindingRootIndex=e,Fn(i)}function Fn(e){Dn.lFrame.currentDirectiveIndex=e}function oi(){return Dn.lFrame.currentQueryIndex}function Vr(e){Dn.lFrame.currentQueryIndex=e}function Ji(e){const i=e[1];return 2===i.type?i.declTNode:1===i.type?e[6]:null}function si(e,i,a){if(a&Qt.SkipSelf){let h=i,_=e;for(;!(h=h.parent,null!==h||a&Qt.Host||(h=Ji(_),null===h||(_=_[15],10&h.type))););if(null===h)return!1;i=h,e=_}const u=Dn.lFrame=To();return u.currentTNode=i,u.lView=e,!0}function Oo(e){const i=To(),a=e[1];Dn.lFrame=i,i.currentTNode=a.firstChild,i.lView=e,i.tView=a,i.contextLView=e,i.bindingIndex=a.bindingStartIndex,i.inI18n=!1}function To(){const e=Dn.lFrame,i=null===e?null:e.child;return null===i?ai(e):i}function ai(e){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=i),i}function Ro(){const e=Dn.lFrame;return Dn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const $o=Ro;function Fi(){const e=Ro();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ui(){return Dn.lFrame.selectedIndex}function $i(e){Dn.lFrame.selectedIndex=e}function pi(){const e=Dn.lFrame;return ue(e.tView,e.selectedIndex)}function Ei(e,i){for(let a=i.directiveStart,u=i.directiveEnd;a<u;a++){const _=e.data[a].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:T,ngAfterViewInit:N,ngAfterViewChecked:q,ngOnDestroy:ie}=_;b&&(e.contentHooks||(e.contentHooks=[])).push(-a,b),T&&((e.contentHooks||(e.contentHooks=[])).push(a,T),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(a,T)),N&&(e.viewHooks||(e.viewHooks=[])).push(-a,N),q&&((e.viewHooks||(e.viewHooks=[])).push(a,q),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(a,q)),null!=ie&&(e.destroyHooks||(e.destroyHooks=[])).push(a,ie)}}function ro(e,i,a){Ai(e,i,3,a)}function Qr(e,i,a,u){(3&e[2])===a&&Ai(e,i,a,u)}function na(e,i){let a=e[2];(3&a)===i&&(a&=2047,a+=1,e[2]=a)}function Ai(e,i,a,u){const _=null!=u?u:-1,b=i.length-1;let T=0;for(let N=void 0!==u?65535&e[18]:0;N<b;N++)if("number"==typeof i[N+1]){if(T=i[N],null!=u&&T>=u)break}else i[N]<0&&(e[18]+=65536),(T<_||-1==_)&&(Bs(e,a,i,N),e[18]=(4294901760&e[18])+N+2),N++}function Bs(e,i,a,u){const h=a[u]<0,_=a[u+1],T=e[h?-a[u]:a[u]];if(h){if(e[2]>>11<e[18]>>16&&(3&e[2])===i){e[2]+=2048;try{_.call(T)}finally{}}}else try{_.call(T)}finally{}}class ti{constructor(i,a,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function Da(e,i,a){const u=x(e);let h=0;for(;h<a.length;){const _=a[h];if("number"==typeof _){if(0!==_)break;h++;const b=a[h++],T=a[h++],N=a[h++];u?e.setAttribute(i,T,N,b):i.setAttributeNS(b,T,N)}else{const b=_,T=a[++h];hu(b)?u&&e.setProperty(i,b,T):u?e.setAttribute(i,b,T):i.setAttribute(b,T),h++}}return h}function Yu(e){return 3===e||4===e||6===e}function hu(e){return 64===e.charCodeAt(0)}function js(e,i){if(null!==i&&0!==i.length)if(null===e||0===e.length)e=i.slice();else{let a=-1;for(let u=0;u<i.length;u++){const h=i[u];"number"==typeof h?a=h:0===a||Ml(e,a,h,null,-1===a||2===a?i[++u]:null)}}return e}function Ml(e,i,a,u,h){let _=0,b=e.length;if(-1===i)b=-1;else for(;_<e.length;){const T=e[_++];if("number"==typeof T){if(T===i){b=-1;break}if(T>i){b=_-1;break}}}for(;_<e.length;){const T=e[_];if("number"==typeof T)break;if(T===a){if(null===u)return void(null!==h&&(e[_+1]=h));if(u===e[_+1])return void(e[_+2]=h)}_++,null!==u&&_++,null!==h&&_++}-1!==b&&(e.splice(b,0,i),_=b+1),e.splice(_++,0,a),null!==u&&e.splice(_++,0,u),null!==h&&e.splice(_++,0,h)}function ra(e){return-1!==e}function ja(e){return 32767&e}function Ha(e,i){let a=function(e){return e>>16}(e),u=i;for(;a>0;)u=u[15],a--;return u}let Yi=!0;function _t(e){const i=Yi;return Yi=e,i}let nn=0;function Cs(e,i){const a=Nn(e,i);if(-1!==a)return a;const u=i[1];u.firstCreatePass&&(e.injectorIndex=i.length,Ga(u.data,e),Ga(i,null),Ga(u.blueprint,null));const h=Yn(e,i),_=e.injectorIndex;if(ra(h)){const b=ja(h),T=Ha(h,i),N=T[1].data;for(let q=0;q<8;q++)i[_+q]=T[b+q]|N[b+q]}return i[_+8]=h,_}function Ga(e,i){e.push(0,0,0,0,0,0,0,0,i)}function Nn(e,i){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===i[e.injectorIndex+8]?-1:e.injectorIndex}function Yn(e,i){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let a=0,u=null,h=i;for(;null!==h;){const _=h[1],b=_.type;if(u=2===b?_.declTNode:1===b?h[6]:null,null===u)return-1;if(a++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function an(e,i,a){!function(e,i,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(nr)&&(u=a[nr]),null==u&&(u=a[nr]=nn++);const h=255&u;i.data[e+(h>>5)]|=1<<h}(e,i,a)}function fu(e,i,a){if(a&Qt.Optional)return e;Zt(i,"NodeInjector")}function xr(e,i,a,u){if(a&Qt.Optional&&void 0===u&&(u=null),0==(a&(Qt.Self|Qt.Host))){const h=e[9],_=Zn(void 0);try{return h?h.get(i,u,a&Qt.Optional):Dt(i,u,a&Qt.Optional)}finally{Zn(_)}}return fu(u,i,a)}function za(e,i,a,u=Qt.Default,h){if(null!==e){const _=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const i=e.hasOwnProperty(nr)?e[nr]:void 0;return"number"==typeof i?i>=0?255&i:U:i}(a);if("function"==typeof _){if(!si(i,e,u))return u&Qt.Host?fu(h,a,u):xr(i,a,u,h);try{const b=_(u);if(null!=b||u&Qt.Optional)return b;Zt(a)}finally{$o()}}else if("number"==typeof _){let b=null,T=Nn(e,i),N=-1,q=u&Qt.Host?i[16][6]:null;for((-1===T||u&Qt.SkipSelf)&&(N=-1===T?Yn(e,i):i[T+8],-1!==N&&Ae(u,!1)?(b=i[1],T=ja(N),i=Ha(N,i)):T=-1);-1!==T;){const ie=i[1];if(he(_,T,ie.data)){const _e=R(T,i,a,b,u,q);if(_e!==qa)return _e}N=i[T+8],-1!==N&&Ae(u,i[1].data[T+8]===q)&&he(_,T,i)?(b=ie,T=ja(N),i=Ha(N,i)):T=-1}}}return xr(i,a,u,h)}const qa={};function U(){return new qe(xi(),Nt())}function R(e,i,a,u,h,_){const b=i[1],T=b.data[e+8],ie=O(T,b,a,null==u?hi(T)&&Yi:u!=b&&0!=(3&T.type),h&Qt.Host&&_===T);return null!==ie?$(i,b,ie,T):qa}function O(e,i,a,u,h){const _=e.providerIndexes,b=i.data,T=1048575&_,N=e.directiveStart,ie=_>>20,Te=h?T+ie:e.directiveEnd;for(let Be=u?T:T+ie;Be<Te;Be++){const Qe=b[Be];if(Be<N&&a===Qe||Be>=N&&Qe.type===a)return Be}if(h){const Be=b[N];if(Be&&Ki(Be)&&Be.type===a)return N}return null}function $(e,i,a,u){let h=e[a];const _=i.data;if(function(e){return e instanceof ti}(h)){const b=h;b.resolving&&function(e,i){throw new Ue("200",`Circular dependency in DI detected for ${e}`)}(St(_[a]));const T=_t(b.canSeeViewProviders);b.resolving=!0;const N=b.injectImpl?Zn(b.injectImpl):null;si(e,u,Qt.Default);try{h=e[a]=b.factory(void 0,_,e,u),i.firstCreatePass&&a>=u.directiveStart&&function(e,i,a){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:_}=i.type.prototype;if(u){const b=Do(i);(a.preOrderHooks||(a.preOrderHooks=[])).push(e,b),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(e,b)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-e,h),_&&((a.preOrderHooks||(a.preOrderHooks=[])).push(e,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(e,_))}(a,_[a],i)}finally{null!==N&&Zn(N),_t(T),b.resolving=!1,$o()}}return h}function he(e,i,a){return!!(a[i+(e>>5)]&1<<e)}function Ae(e,i){return!(e&Qt.Self||e&Qt.Host&&i)}class qe{constructor(i,a){this._tNode=i,this._lView=a}get(i,a){return za(this._tNode,this._lView,i,void 0,a)}}function Ct(e){return ze(()=>{const i=e.prototype.constructor,a=i[_n]||fn(i),u=Object.prototype;let h=Object.getPrototypeOf(e.prototype).constructor;for(;h&&h!==u;){const _=h[_n]||fn(h);if(_&&_!==a)return _;h=Object.getPrototypeOf(h)}return _=>new _})}function fn(e){return Ce(e)?()=>{const i=fn(me(e));return i&&i()}:Nr(e)}function rr(e){return function(e,i){if("class"===i)return e.classes;if("style"===i)return e.styles;const a=e.attrs;if(a){const u=a.length;let h=0;for(;h<u;){const _=a[h];if(Yu(_))break;if(0===_)h+=2;else if("number"==typeof _)for(h++;h<u&&"string"==typeof a[h];)h++;else{if(_===i)return a[h+1];h+=2}}}return null}(xi(),e)}const Ar="__parameters__";function mo(e,i,a){return ze(()=>{const u=function(e){return function(...a){if(e){const u=e(...a);for(const h in u)this[h]=u[h]}}}(i);function h(..._){if(this instanceof h)return u.apply(this,_),this;const b=new h(..._);return T.annotation=b,T;function T(N,q,ie){const _e=N.hasOwnProperty(Ar)?N[Ar]:Object.defineProperty(N,Ar,{value:[]})[Ar];for(;_e.length<=ie;)_e.push(null);return(_e[ie]=_e[ie]||[]).push(b),N}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=e,h.annotationCls=h,h})}class Ii{constructor(i,a){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=bn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ia=new Ii("AnalyzeForEntryComponents"),zs=Function;function Ko(e,i){void 0===i&&(i=e);for(let a=0;a<e.length;a++){let u=e[a];Array.isArray(u)?(i===e&&(i=e.slice(0,a)),Ko(u,i)):i!==e&&i.push(u)}return i}function _o(e,i){e.forEach(a=>Array.isArray(a)?_o(a,i):i(a))}function qs(e,i,a){i>=e.length?e.push(a):e.splice(i,0,a)}function So(e,i){return i>=e.length-1?e.pop():e.splice(i,1)[0]}function $a(e,i){const a=[];for(let u=0;u<e;u++)a.push(i);return a}function Es(e,i,a){let u=oa(e,i);return u>=0?e[1|u]=a:(u=~u,function(e,i,a,u){let h=e.length;if(h==i)e.push(a,u);else if(1===h)e.push(u,e[0]),e[0]=a;else{for(h--,e.push(e[h-1],e[h]);h>i;)e[h]=e[h-2],h--;e[i]=a,e[i+1]=u}}(e,u,i,a)),u}function Ps(e,i){const a=oa(e,i);if(a>=0)return e[1|a]}function oa(e,i){return function(e,i,a){let u=0,h=e.length>>a;for(;h!==u;){const _=u+(h-u>>1),b=e[_<<a];if(i===b)return _<<a;b>i?h=_:u=_+1}return~(h<<a)}(e,i,1)}const tl={},Oa="__NG_DI_FLAG__",Bo="ngTempTokenPath",Rl=/\n/gm,ac="__source",rl=Ee({provide:String,useValue:Ee});let Wa;function Ra(e){const i=Wa;return Wa=e,i}function xl(e,i=Qt.Default){if(void 0===Wa)throw new Error("inject() must be called from an injection context");return null===Wa?Dt(e,void 0,i):Wa.get(e,i&Qt.Optional?null:void 0,i)}function gi(e,i=Qt.Default){return(dr||xl)(me(e),i)}const uc=gi;function Cu(e){const i=[];for(let a=0;a<e.length;a++){const u=me(e[a]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let h,_=Qt.Default;for(let b=0;b<u.length;b++){const T=u[b],N=Eu(T);"number"==typeof N?-1===N?h=T.token:_|=N:h=T}i.push(gi(h,_))}else i.push(gi(u))}return i}function xa(e,i){return e[Oa]=i,e.prototype[Oa]=i,e}function Eu(e){return e[Oa]}function Ya(e,i,a,u){const h=e[Bo];throw i[ac]&&h.unshift(i[ac]),e.message=function(e,i,a,u=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let h=fe(i);if(Array.isArray(i))h=i.map(fe).join(" -> ");else if("object"==typeof i){let _=[];for(let b in i)if(i.hasOwnProperty(b)){let T=i[b];_.push(b+":"+("string"==typeof T?JSON.stringify(T):fe(T)))}h=`{${_.join(", ")}}`}return`${a}${u?"("+u+")":""}[${h}]: ${e.replace(Rl,"\n  ")}`}("\n"+e.message,h,a,u),e.ngTokenPath=h,e[Bo]=null,e}const Tu=xa(mo("Inject",e=>({token:e})),-1),as=xa(mo("Optional"),8),$s=xa(mo("SkipSelf"),4);let aa;function jo(e){var i;return(null===(i=function(){if(void 0===aa&&(aa=null,Vt.trustedTypes))try{aa=Vt.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return aa}())||void 0===i?void 0:i.createHTML(e))||e}class Io{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class sl extends Io{getTypeName(){return"HTML"}}class lc extends Io{getTypeName(){return"Style"}}class ah extends Io{getTypeName(){return"Script"}}class cc extends Io{getTypeName(){return"URL"}}class Fl extends Io{getTypeName(){return"ResourceURL"}}function zr(e){return e instanceof Io?e.changingThisBreaksApplicationSecurity:e}function ua(e,i){const a=al(e);if(null!=a&&a!==i){if("ResourceURL"===a&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===i}function al(e){return e instanceof Io&&e.getTypeName()||null}function yd(e){return new sl(e)}function vd(e){return new lc(e)}function dc(e){return new ah(e)}function uh(e){return new cc(e)}function lh(e){return new Fl(e)}class Nl{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const a=(new window.DOMParser).parseFromString(jo(i),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(i):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class $c{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const u=this.inertDocument.createElement("body");a.appendChild(u)}}getInertBodyElement(i){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=jo(i),a;const u=this.inertDocument.createElement("body");return u.innerHTML=jo(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const a=i.attributes;for(let h=a.length-1;0<h;h--){const b=a.item(h).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&i.removeAttribute(b)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const ch=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,kl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Jo(e){return(e=String(e)).match(ch)||e.match(kl)?e:"unsafe:"+e}function Ds(e){const i={};for(const a of e.split(","))i[a]=!0;return i}function Bi(...e){const i={};for(const a of e)for(const u in a)a.hasOwnProperty(u)&&(i[u]=!0);return i}const Ll=Ds("area,br,col,hr,img,wbr"),Ou=Ds("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ul=Ds("rp,rt"),la=Bi(Ll,Bi(Ou,Ds("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Bi(ul,Ds("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bi(ul,Ou)),Ru=Ds("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ll=Ds("srcset"),cl=Bi(Ru,ll,Ds("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ds("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),fc=Ds("script,style,template");class pc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let a=i.firstChild,u=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?u=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,u&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let h=this.checkClobberedElement(a,a.nextSibling);if(h){a=h;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(i){const a=i.nodeName.toLowerCase();if(!la.hasOwnProperty(a))return this.sanitizedSomething=!0,!fc.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const u=i.attributes;for(let h=0;h<u.length;h++){const _=u.item(h),b=_.name,T=b.toLowerCase();if(!cl.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let N=_.value;Ru[T]&&(N=Jo(N)),ll[T]&&(e=N,N=(e=String(e)).split(",").map(i=>Jo(i.trim())).join(", ")),this.buf.push(" ",b,'="',gc(N),'"')}var e;return this.buf.push(">"),!0}endElement(i){const a=i.nodeName.toLowerCase();la.hasOwnProperty(a)&&!Ll.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(i){this.buf.push(gc(i))}checkClobberedElement(i,a){if(a&&(i.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return a}}const Kc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qc=/([^\#-~ |!])/g;function gc(e){return e.replace(/&/g,"&amp;").replace(Kc,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(Qc,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Xo;function mc(e,i){let a=null;try{Xo=Xo||function(e){const i=new $c(e);return function(){try{return!!(new window.DOMParser).parseFromString(jo(""),"text/html")}catch(e){return!1}}()?new Nl(i):i}(e);let u=i?String(i):"";a=Xo.getInertBodyElement(u);let h=5,_=u;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,u=_,_=a.innerHTML,a=Xo.getInertBodyElement(u)}while(u!==_);return jo((new pc).sanitizeChildren(ca(a)||a))}finally{if(a){const u=ca(a)||a;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function ca(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var qr=(()=>((qr=qr||{})[qr.NONE=0]="NONE",qr[qr.HTML=1]="HTML",qr[qr.STYLE=2]="STYLE",qr[qr.SCRIPT=3]="SCRIPT",qr[qr.URL=4]="URL",qr[qr.RESOURCE_URL=5]="RESOURCE_URL",qr))();function _c(e){const i=function(){const e=Nt();return e&&e[12]}();return i?i.sanitize(qr.URL,e)||"":ua(e,"URL")?zr(e):Jo(Ke(e))}const ji="__ngContext__";function wi(e,i){e[ji]=i}function io(e){const i=function(e){return e[ji]||null}(e);return i?Array.isArray(i)?i:i.lView:null}function Js(e){return e.ngOriginalError}function Id(e,...i){e.error(...i)}class fl{constructor(){this._console=console}handleError(i){const a=this._findOriginalError(i),u=this._findContext(i),h=(e=i)&&e.ngErrorLogger||Id;var e;h(this._console,"ERROR",i),a&&h(this._console,"ORIGINAL ERROR",a),u&&h(this._console,"ERROR CONTEXT",u)}_findContext(i){return i?i.ngDebugContext||this._findContext(Js(i)):null}_findOriginalError(i){let a=i&&Js(i);for(;a&&Js(a);)a=Js(a);return a||null}}const ml=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vt))();function Xs(e){return e instanceof Function?e():e}var ea=(()=>((ea=ea||{})[ea.Important=1]="Important",ea[ea.DashCase=2]="DashCase",ea))();function nu(e,i){return undefined(e,i)}function ha(e){const i=e[3];return Mr(i)?i[3]:i}function Ec(e){return gh(e[13])}function Bu(e){return gh(e[4])}function gh(e){for(;null!==e&&!Mr(e);)e=e[4];return e}function ju(e,i,a,u,h){if(null!=u){let _,b=!1;Mr(u)?_=u:Kr(u)&&(b=!0,u=u[0]);const T=we(u);0===e&&null!==a?null==h?de(i,a,T):Y(i,a,T,h||null,!0):1===e&&null!==a?Y(i,a,T,h||null,!0):2===e?function(e,i,a){const u=Ne(e,i);u&&function(e,i,a,u){x(e)?e.removeChild(i,a,u):i.removeChild(a)}(e,u,i,a)}(i,T,b):3===e&&i.destroyNode(T),null!=_&&function(e,i,a,u,h){const _=a[7];_!==we(a)&&ju(i,e,u,_,h);for(let T=10;T<a.length;T++){const N=a[T];su(N[1],N,e,i,u,_)}}(i,e,_,a,h)}}function Fd(e,i,a){return x(e)?e.createElement(i,a):null===a?e.createElement(i):e.createElementNS(a,i)}function w(e,i){const a=e[9],u=a.indexOf(i),h=i[3];1024&i[2]&&(i[2]&=-1025,ii(h,-1)),a.splice(u,1)}function z(e,i){if(e.length<=10)return;const a=10+i,u=e[a];if(u){const h=u[17];null!==h&&h!==e&&w(h,u),i>0&&(e[a-1][4]=u[4]);const _=So(e,10+i);!function(e,i){su(e,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const b=_[19];null!==b&&b.detachView(_[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function c(e,i){if(!(256&i[2])){const a=i[11];x(a)&&a.destroyNode&&su(e,i,a,3,null,null),function(e){let i=e[13];if(!i)return d(e[1],e);for(;i;){let a=null;if(Kr(i))a=i[13];else{const u=i[10];u&&(a=u)}if(!a){for(;i&&!i[4]&&i!==e;)Kr(i)&&d(i[1],i),i=i[3];null===i&&(i=e),Kr(i)&&d(i[1],i),a=i&&i[4]}i=a}}(i)}}function d(e,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(e,i){let a;if(null!=e&&null!=(a=e.destroyHooks))for(let u=0;u<a.length;u+=2){const h=i[a[u]];if(!(h instanceof ti)){const _=a[u+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const T=h[_[b]],N=_[b+1];try{N.call(T)}finally{}}else try{_.call(h)}finally{}}}}(e,i),function(e,i){const a=e.cleanup,u=i[7];let h=-1;if(null!==a)for(let _=0;_<a.length-1;_+=2)if("string"==typeof a[_]){const b=a[_+1],T="function"==typeof b?b(i):we(i[b]),N=u[h=a[_+2]],q=a[_+3];"boolean"==typeof q?T.removeEventListener(a[_],N,q):q>=0?u[h=q]():u[h=-q].unsubscribe(),_+=2}else{const b=u[h=a[_+1]];a[_].call(b)}if(null!==u){for(let _=h+1;_<u.length;_++)u[_]();i[7]=null}}(e,i),1===i[1].type&&x(i[11])&&i[11].destroy();const a=i[17];if(null!==a&&Mr(i[3])){a!==i[3]&&w(a,i);const u=i[19];null!==u&&u.detachView(e)}}}function D(e,i,a){return function(e,i,a){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return a[0];if(2&u.flags){const h=e.data[u.directiveStart].encapsulation;if(h===Mt.None||h===Mt.Emulated)return null}return H(u,a)}(e,i.parent,a)}function Y(e,i,a,u,h){x(e)?e.insertBefore(i,a,u,h):i.insertBefore(a,u,h)}function de(e,i,a){x(e)?e.appendChild(i,a):i.appendChild(a)}function ye(e,i,a,u,h){null!==u?Y(e,i,a,u,h):de(e,i,a)}function Ne(e,i){return x(e)?e.parentNode(i):i.parentNode}function At(e,i,a){return rn(e,i,a)}let rn=function(e,i,a){return 40&e.type?H(e,a):null};function Cr(e,i,a,u){const h=D(e,u,i),_=i[11],T=At(u.parent||i[6],u,i);if(null!=h)if(Array.isArray(a))for(let N=0;N<a.length;N++)ye(_,h,a[N],T,!1);else ye(_,h,a,T,!1)}function oo(e,i){if(null!==i){const a=i.type;if(3&a)return H(i,e);if(4&a)return Hl(-1,e[i.index]);if(8&a){const u=i.child;if(null!==u)return oo(e,u);{const h=e[i.index];return Mr(h)?Hl(-1,h):we(h)}}if(32&a)return nu(i,e)()||we(e[i.index]);{const u=Na(e,i);return null!==u?Array.isArray(u)?u[0]:oo(ha(e[16]),u):oo(e,i.next)}}return null}function Na(e,i){return null!==i?e[16][6].projection[i.projection]:null}function Hl(e,i){const a=10+e+1;if(a<i.length){const u=i[a],h=u[1].firstChild;if(null!==h)return oo(u,h)}return i[7]}function ou(e,i,a,u,h,_,b){for(;null!=a;){const T=u[a.index],N=a.type;if(b&&0===i&&(T&&wi(we(T),u),a.flags|=4),64!=(64&a.flags))if(8&N)ou(e,i,a.child,u,h,_,!1),ju(i,e,h,T,_);else if(32&N){const q=nu(a,u);let ie;for(;ie=q();)ju(i,e,h,ie,_);ju(i,e,h,T,_)}else 16&N?kf(e,i,u,a,h,_):ju(i,e,h,T,_);a=b?a.projectionNext:a.next}}function su(e,i,a,u,h,_){ou(a,u,e.firstChild,i,h,_,!1)}function kf(e,i,a,u,h,_){const b=a[16],N=b[6].projection[u.projection];if(Array.isArray(N))for(let q=0;q<N.length;q++)ju(i,e,h,N[q],_);else ou(e,i,N,b[3],h,_,!0)}function og(e,i,a){x(e)?e.setAttribute(i,"style",a):i.style.cssText=a}function Lf(e,i,a){x(e)?""===a?e.removeAttribute(i,"class"):e.setAttribute(i,"class",a):i.className=a}function sg(e,i,a){let u=e.length;for(;;){const h=e.indexOf(i,a);if(-1===h)return h;if(0===h||e.charCodeAt(h-1)<=32){const _=i.length;if(h+_===u||e.charCodeAt(h+_)<=32)return h}a=h+1}}const ls="ng-template";function n_(e,i,a){let u=0;for(;u<e.length;){let h=e[u++];if(a&&"class"===h){if(h=e[u],-1!==sg(h.toLowerCase(),i,0))return!0}else if(1===h){for(;u<e.length&&"string"==typeof(h=e[u++]);)if(h.toLowerCase()===i)return!0;return!1}}return!1}function ug(e){return 4===e.type&&e.value!==ls}function r_(e,i,a){return i===(4!==e.type||a?e.value:ls)}function i_(e,i,a){let u=4;const h=e.attrs||[],_=function(e){for(let i=0;i<e.length;i++)if(Yu(e[i]))return i;return e.length}(h);let b=!1;for(let T=0;T<i.length;T++){const N=i[T];if("number"!=typeof N){if(!b)if(4&u){if(u=2|1&u,""!==N&&!r_(e,N,a)||""===N&&1===i.length){if(Hu(u))return!1;b=!0}}else{const q=8&u?N:i[++T];if(8&u&&null!==e.attrs){if(!n_(e.attrs,q,a)){if(Hu(u))return!1;b=!0}continue}const _e=o_(8&u?"class":N,h,ug(e),a);if(-1===_e){if(Hu(u))return!1;b=!0;continue}if(""!==q){let Te;Te=_e>_?"":h[_e+1].toLowerCase();const Be=8&u?Te:null;if(Be&&-1!==sg(Be,q,0)||2&u&&q!==Te){if(Hu(u))return!1;b=!0}}}}else{if(!b&&!Hu(u)&&!Hu(N))return!1;if(b&&Hu(N))continue;b=!1,u=N|1&u}}return Hu(u)||b}function Hu(e){return 0==(1&e)}function o_(e,i,a,u){if(null===i)return-1;let h=0;if(u||!a){let _=!1;for(;h<i.length;){const b=i[h];if(b===e)return h;if(3===b||6===b)_=!0;else{if(1===b||2===b){let T=i[++h];for(;"string"==typeof T;)T=i[++h];continue}if(4===b)break;if(0===b){h+=4;continue}}h+=_?1:2}return-1}return function(e,i){let a=e.indexOf(4);if(a>-1)for(a++;a<e.length;){const u=e[a];if("number"==typeof u)return-1;if(u===i)return a;a++}return-1}(i,e)}function lg(e,i,a=!1){for(let u=0;u<i.length;u++)if(i_(e,i[u],a))return!0;return!1}function Vf(e,i){e:for(let a=0;a<i.length;a++){const u=i[a];if(e.length===u.length){for(let h=0;h<e.length;h++)if(e[h]!==u[h])continue e;return!0}}return!1}function Uf(e,i){return e?":not("+i.trim()+")":i}function Bf(e){let i=e[0],a=1,u=2,h="",_=!1;for(;a<e.length;){let b=e[a];if("string"==typeof b)if(2&u){const T=e[++a];h+="["+b+(T.length>0?'="'+T+'"':"")+"]"}else 8&u?h+="."+b:4&u&&(h+=" "+b);else""!==h&&!Hu(b)&&(i+=Uf(_,h),h=""),u=b,_=_||!Hu(u);a++}return""!==h&&(i+=Uf(_,h)),i}const _r={};function zh(e){jf(mr(),Nt(),ui()+e,ae())}function jf(e,i,a,u){if(!u)if(3==(3&i[2])){const _=e.preOrderCheckHooks;null!==_&&ro(i,_,a)}else{const _=e.preOrderHooks;null!==_&&Qr(i,_,0,a)}$i(a)}function qh(e,i){return e<<17|i<<2}function au(e){return e>>17&32767}function Hf(e){return 2|e}function yl(e){return(131068&e)>>2}function kd(e,i){return-131069&e|i<<2}function vh(e){return 1|e}function Jh(e,i){const a=e.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const h=a[u],_=a[u+1];if(-1!==_){const b=e.data[_];Vr(h),b.contentQueries(2,i[_],_)}}}function Ud(e,i,a,u,h,_,b,T,N,q){const ie=i.blueprint.slice();return ie[0]=h,ie[2]=140|u,Gr(ie),ie[3]=ie[15]=e,ie[8]=a,ie[10]=b||e&&e[10],ie[11]=T||e&&e[11],ie[12]=N||e&&e[12]||null,ie[9]=q||e&&e[9]||null,ie[6]=_,ie[16]=2==i.type?e[16]:ie,ie}function Bd(e,i,a,u,h){let _=e.data[i];if(null===_)_=function(e,i,a,u,h){const _=Os(),b=oe(),N=e.data[i]=function(e,i,a,u,h,_){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,a,i,u,h);return null===e.firstChild&&(e.firstChild=N),null!==_&&(b?null==_.child&&null!==N.parent&&(_.child=N):null===_.next&&(_.next=N)),N}(e,i,a,u,h),Dn.lFrame.inI18n&&(_.flags|=64);else if(64&_.type){_.type=a,_.value=u,_.attrs=h;const b=function(){const e=Dn.lFrame,i=e.currentTNode;return e.isParent?i:i.parent}();_.injectorIndex=null===b?-1:b.injectorIndex}return Zo(_,!0),_}function td(e,i,a,u){if(0===a)return-1;const h=i.length;for(let _=0;_<a;_++)i.push(u),e.blueprint.push(u),e.data.push(null);return h}function jd(e,i,a){Oo(i);try{const u=e.viewQuery;null!==u&&Gd(1,u,a);const h=e.template;null!==h&&Eg(e,i,h,1,a),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Jh(e,i),e.staticViewQueries&&Gd(2,e.viewQuery,a);const _=e.components;null!==_&&function(e,i){for(let a=0;a<i.length;a++)rp(e,i[a])}(i,_)}catch(u){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),u}finally{i[2]&=-5,Fi()}}function nd(e,i,a,u){const h=i[2];if(256==(256&h))return;Oo(i);const _=ae();try{Gr(i),function(e){Dn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==a&&Eg(e,i,a,2,u);const b=3==(3&h);if(!_)if(b){const q=e.preOrderCheckHooks;null!==q&&ro(i,q,null)}else{const q=e.preOrderHooks;null!==q&&Qr(i,q,0,null),na(i,0)}if(function(e){for(let i=Ec(e);null!==i;i=Bu(i)){if(!i[2])continue;const a=i[9];for(let u=0;u<a.length;u++){const h=a[u],_=h[3];0==(1024&h[2])&&ii(_,1),h[2]|=1024}}}(i),function(e){for(let i=Ec(e);null!==i;i=Bu(i))for(let a=10;a<i.length;a++){const u=i[a],h=u[1];cr(u)&&nd(h,u,h.template,u[8])}}(i),null!==e.contentQueries&&Jh(e,i),!_)if(b){const q=e.contentCheckHooks;null!==q&&ro(i,q)}else{const q=e.contentHooks;null!==q&&Qr(i,q,1),na(i,1)}!function(e,i){const a=e.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const h=a[u];if(h<0)$i(~h);else{const _=h,b=a[++u],T=a[++u];Tr(b,_),T(2,i[_])}}}finally{$i(-1)}}(e,i);const T=e.components;null!==T&&function(e,i){for(let a=0;a<i.length;a++)Ug(e,i[a])}(i,T);const N=e.viewQuery;if(null!==N&&Gd(2,N,u),!_)if(b){const q=e.viewCheckHooks;null!==q&&ro(i,q)}else{const q=e.viewHooks;null!==q&&Qr(i,q,2),na(i,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),_||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,ii(i[3],-1))}finally{Fi()}}function p_(e,i,a,u){const h=i[10],_=!ae(),b=wn(i);try{_&&!b&&h.begin&&h.begin(),b&&jd(e,i,u),nd(e,i,a,u)}finally{_&&!b&&h.end&&h.end()}}function Eg(e,i,a,u,h){const _=ui(),b=2&u;try{$i(-1),b&&i.length>20&&jf(e,i,20,ae()),a(u,h)}finally{$i(_)}}function wg(e,i,a){if(zi(i)){const h=i.directiveEnd;for(let _=i.directiveStart;_<h;_++){const b=e.data[_];b.contentQueries&&b.contentQueries(1,a[_],_)}}}function Yf(e,i,a){!$u()||(function(e,i,a,u){const h=a.directiveStart,_=a.directiveEnd;e.firstCreatePass||Cs(a,i),wi(u,i);const b=a.initialInputs;for(let T=h;T<_;T++){const N=e.data[T],q=Ki(N);q&&kg(i,a,N);const ie=$(i,e,T,a);wi(ie,i),null!==b&&Lg(0,T-h,ie,N,0,b),q&&(Rt(a.index,i)[8]=ie)}}(e,i,a,H(a,i)),128==(128&a.flags)&&function(e,i,a){const u=a.directiveStart,h=a.directiveEnd,b=a.index,T=Dn.lFrame.currentDirectiveIndex;try{$i(b);for(let N=u;N<h;N++){const q=e.data[N],ie=i[N];Fn(N),(null!==q.hostBindings||0!==q.hostVars||null!==q.hostAttrs)&&Pg(q,ie)}}finally{$i(-1),Fn(T)}}(e,i,a))}function Eh(e,i,a=H){const u=i.localNames;if(null!==u){let h=i.index+1;for(let _=0;_<u.length;_+=2){const b=u[_+1],T=-1===b?a(i,e):e[b];e[h++]=T}}}function Dg(e){const i=e.tView;return null===i||i.incompleteFirstPass?e.tView=ef(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):i}function ef(e,i,a,u,h,_,b,T,N,q){const ie=20+u,_e=ie+h,Te=function(e,i){const a=[];for(let u=0;u<i;u++)a.push(u<e?null:_r);return a}(ie,_e),Be="function"==typeof q?q():q;return Te[1]={type:e,blueprint:Te,template:a,queries:null,viewQuery:T,declTNode:i,data:Te.slice().fill(null,ie),bindingStartIndex:ie,expandoStartIndex:_e,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:N,consts:Be,incompleteFirstPass:!1}}function Ag(e,i,a,u){const h=op(i);null===a?h.push(u):(h.push(a),e.firstCreatePass&&Gg(e).push(u,h.length-1))}function tf(e,i,a){for(let u in e)if(e.hasOwnProperty(u)){const h=e[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(i,h):a[u]=[i,h]}return a}function ga(e,i,a,u,h,_,b,T){const N=H(i,a);let ie,q=i.inputs;!T&&null!=q&&(ie=q[u])?(Zg(e,a,ie,u,h),hi(i)&&function(e,i){const a=Rt(i,e);16&a[2]||(a[2]|=64)}(a,i.index)):3&i.type&&(u=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(u),h=null!=b?b(h,i.value||"",u):h,x(_)?_.setProperty(N,u,h):hu(u)||(N.setProperty?N.setProperty(u,h):N[u]=h))}function Xf(e,i,a,u){let h=!1;if($u()){const _=function(e,i,a){const u=e.directiveRegistry;let h=null;if(u)for(let _=0;_<u.length;_++){const b=u[_];lg(a,b.selectors,!1)&&(h||(h=[]),an(Cs(a,i),e,b.type),Ki(b)?(Fg(e,a),h.unshift(b)):h.push(b))}return h}(e,i,a),b=null===u?null:{"":-1};if(null!==_){h=!0,Ng(a,e.data.length,_.length);for(let ie=0;ie<_.length;ie++){const _e=_[ie];_e.providersResolver&&_e.providersResolver(_e)}let T=!1,N=!1,q=td(e,i,_.length,null);for(let ie=0;ie<_.length;ie++){const _e=_[ie];a.mergedAttrs=js(a.mergedAttrs,_e.hostAttrs),np(e,a,i,q,_e),tp(q,_e,b),null!==_e.contentQueries&&(a.flags|=8),(null!==_e.hostBindings||null!==_e.hostAttrs||0!==_e.hostVars)&&(a.flags|=128);const Te=_e.type.prototype;!T&&(Te.ngOnChanges||Te.ngOnInit||Te.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(a.index),T=!0),!N&&(Te.ngOnChanges||Te.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(a.index),N=!0),q++}!function(e,i){const u=i.directiveEnd,h=e.data,_=i.attrs,b=[];let T=null,N=null;for(let q=i.directiveStart;q<u;q++){const ie=h[q],_e=ie.inputs,Te=null===_||ug(i)?null:nf(_e,_);b.push(Te),T=tf(_e,q,T),N=tf(ie.outputs,q,N)}null!==T&&(T.hasOwnProperty("class")&&(i.flags|=16),T.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=b,i.inputs=T,i.outputs=N}(e,a)}b&&function(e,i,a){if(i){const u=e.localNames=[];for(let h=0;h<i.length;h+=2){const _=a[i[h+1]];if(null==_)throw new Ue("301",`Export of name '${i[h+1]}' not found!`);u.push(i[h],_)}}}(a,u,b)}return a.mergedAttrs=js(a.mergedAttrs,a.attrs),h}function Og(e,i,a,u,h,_){const b=_.hostBindings;if(b){let T=e.hostBindingOpCodes;null===T&&(T=e.hostBindingOpCodes=[]);const N=~i.index;(function(e){let i=e.length;for(;i>0;){const a=e[--i];if("number"==typeof a&&a<0)return a}return 0})(T)!=N&&T.push(N),T.push(u,h,b)}}function Pg(e,i){null!==e.hostBindings&&e.hostBindings(1,i)}function Fg(e,i){i.flags|=2,(e.components||(e.components=[])).push(i.index)}function tp(e,i,a){if(a){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)a[i.exportAs[u]]=e;Ki(i)&&(a[""]=e)}}function Ng(e,i,a){e.flags|=1,e.directiveStart=i,e.directiveEnd=i+a,e.providerIndexes=i}function np(e,i,a,u,h){e.data[u]=h;const _=h.factory||(h.factory=Nr(h.type)),b=new ti(_,Ki(h),null);e.blueprint[u]=b,a[u]=b,Og(e,i,0,u,td(e,a,h.hostVars,_r),h)}function kg(e,i,a){const u=H(i,e),h=Dg(a),_=e[10],b=Dh(e,Ud(e,h,null,a.onPush?64:16,u,i,_,_.createRenderer(u,a),null,null));e[i.index]=b}function bl(e,i,a,u,h,_){const b=H(e,i);!function(e,i,a,u,h,_,b){if(null==_)x(e)?e.removeAttribute(i,h,a):i.removeAttribute(h);else{const T=null==b?Ke(_):b(_,u||"",h);x(e)?e.setAttribute(i,h,T,a):a?i.setAttributeNS(a,h,T):i.setAttribute(h,T)}}(i[11],b,_,e.value,a,u,h)}function Lg(e,i,a,u,h,_){const b=_[i];if(null!==b){const T=u.setInput;for(let N=0;N<b.length;){const q=b[N++],ie=b[N++],_e=b[N++];null!==T?u.setInput(a,_e,q,ie):a[ie]=_e}}}function nf(e,i){let a=null,u=0;for(;u<i.length;){const h=i[u];if(0!==h)if(5!==h){if("number"==typeof h)break;e.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,e[h],i[u+1])),u+=2}else u+=2;else u+=4}return a}function Vg(e,i,a,u){return new Array(e,!0,!1,i,null,0,u,a,null,null)}function Ug(e,i){const a=Rt(i,e);if(cr(a)){const u=a[1];80&a[2]?nd(u,a,u.template,a[8]):a[5]>0&&rf(a)}}function rf(e){for(let u=Ec(e);null!==u;u=Bu(u))for(let h=10;h<u.length;h++){const _=u[h];if(1024&_[2]){const b=_[1];nd(b,_,b.template,_[8])}else _[5]>0&&rf(_)}const a=e[1].components;if(null!==a)for(let u=0;u<a.length;u++){const h=Rt(a[u],e);cr(h)&&h[5]>0&&rf(h)}}function rp(e,i){const a=Rt(i,e),u=a[1];(function(e,i){for(let a=i.length;a<e.blueprint.length;a++)i.push(e.blueprint[a])})(u,a),jd(u,a,a[8])}function Dh(e,i){return e[13]?e[14][4]=i:e[13]=i,e[14]=i,i}function Th(e){for(;e;){e[2]|=64;const i=ha(e);if(_i(e)&&!i)return e;e=i}return null}function Mc(e,i,a){const u=i[10];u.begin&&u.begin();try{nd(e,i,e.template,a)}catch(h){throw qg(i,h),h}finally{u.end&&u.end()}}function ip(e){!function(e){for(let i=0;i<e.components.length;i++){const a=e.components[i],u=io(a),h=u[1];p_(h,u,h.template,a)}}(e[8])}function Gd(e,i,a){Vr(0),i(e,a)}const Hg=(()=>Promise.resolve(null))();function op(e){return e[7]||(e[7]=[])}function Gg(e){return e.cleanup||(e.cleanup=[])}function qg(e,i){const a=e[9],u=a?a.get(fl,null):null;u&&u.handleError(i)}function Zg(e,i,a,u,h){for(let _=0;_<a.length;){const b=a[_++],T=a[_++],N=i[b],q=e.data[b];null!==q.setInput?q.setInput(N,h,u,T):N[T]=h}}function Gu(e,i,a){const u=G(i,e);!function(e,i,a){x(e)?e.setValue(i,a):i.textContent=a}(e[11],u,a)}function zd(e,i,a){let u=a?e.styles:null,h=a?e.classes:null,_=0;if(null!==i)for(let b=0;b<i.length;b++){const T=i[b];"number"==typeof T?_=T:1==_?h=ve(h,T):2==_&&(u=ve(u,T+": "+i[++b]+";"))}a?e.styles=u:e.stylesWithoutHost=u,a?e.classes=h:e.classesWithoutHost=h}const ql=new Ii("INJECTOR",-1);class Di{get(i,a=tl){if(a===tl){const u=new Error(`NullInjectorError: No provider for ${fe(i)}!`);throw u.name="NullInjectorError",u}return a}}const qd=new Ii("Set Injector scope."),Zd={},Ah={};let so;function ta(){return void 0===so&&(so=new Di),so}function sp(e,i=null,a=null,u){return new sf(e,a,i||ta(),u)}class sf{constructor(i,a,u,h=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];a&&_o(a,T=>this.processProvider(T,i,a)),_o([i],T=>this.processInjectorType(T,[],_)),this.records.set(ql,$d(void 0,this));const b=this.records.get(qd);this.scope=null!=b?b.value:null,this.source=h||("object"==typeof i?null:fe(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,a=tl,u=Qt.Default){this.assertNotDestroyed();const h=Ra(this),_=Zn(void 0);try{if(!(u&Qt.SkipSelf)){let T=this.records.get(i);if(void 0===T){const N=("function"==typeof(e=i)||"object"==typeof e&&e instanceof Ii)&&Bn(i);T=N&&this.injectableDefInScope(N)?$d(af(i),Zd):null,this.records.set(i,T)}if(null!=T)return this.hydrate(i,T)}return(u&Qt.Self?ta():this.parent).get(i,a=u&Qt.Optional&&a===tl?null:a)}catch(b){if("NullInjectorError"===b.name){if((b[Bo]=b[Bo]||[]).unshift(fe(i)),h)throw b;return Ya(b,i,"R3InjectorError",this.source)}throw b}finally{Zn(_),Ra(h)}var e}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,h)=>i.push(fe(h))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,a,u){if(!(i=me(i)))return!1;let h=Mi(i);const _=null==h&&i.ngModule||void 0,b=void 0===_?i:_,T=-1!==u.indexOf(b);if(void 0!==_&&(h=Mi(_)),null==h)return!1;if(null!=h.imports&&!T){let ie;u.push(b);try{_o(h.imports,_e=>{this.processInjectorType(_e,a,u)&&(void 0===ie&&(ie=[]),ie.push(_e))})}finally{}if(void 0!==ie)for(let _e=0;_e<ie.length;_e++){const{ngModule:Te,providers:Be}=ie[_e];_o(Be,Qe=>this.processProvider(Qe,Te,Be||Oe))}}this.injectorDefTypes.add(b);const N=Nr(b)||(()=>new b);this.records.set(b,$d(N,Zd));const q=h.providers;if(null!=q&&!T){const ie=i;_o(q,_e=>this.processProvider(_e,ie,q))}return void 0!==_&&void 0!==i.providers}processProvider(i,a,u){let h=id(i=me(i))?i:me(i&&i.provide);const _=Kg(e=i)?$d(void 0,e.useValue):$d(rd(e),Zd);var e;if(id(i)||!0!==i.multi)this.records.get(h);else{let b=this.records.get(h);b||(b=$d(void 0,Zd,!0),b.factory=()=>Cu(b.multi),this.records.set(h,b)),h=i,b.multi.push(i)}this.records.set(h,_)}hydrate(i,a){return a.value===Zd&&(a.value=Ah,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(e=a.value)&&"object"==typeof e&&"function"==typeof e.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var e}injectableDefInScope(i){if(!i.providedIn)return!1;const a=me(i.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function af(e){const i=Bn(e),a=null!==i?i.factory:Nr(e);if(null!==a)return a;if(e instanceof Ii)throw new Error(`Token ${fe(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const i=e.length;if(i>0){const u=$a(i,"?");throw new Error(`Can't resolve all parameters for ${fe(e)}: (${u.join(", ")}).`)}const a=function(e){const i=e&&(e[mn]||e[kn]);if(i){const a=function(e){if(e.hasOwnProperty("name"))return e.name;const i=(""+e).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),i}return null}(e);return null!==a?()=>a.factory(e):()=>new e}(e);throw new Error("unreachable")}function rd(e,i,a){let u;if(id(e)){const h=me(e);return Nr(h)||af(h)}if(Kg(e))u=()=>me(e.useValue);else if(function(e){return!(!e||!e.useFactory)}(e))u=()=>e.useFactory(...Cu(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))u=()=>gi(me(e.useExisting));else{const h=me(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return Nr(h)||af(h);u=()=>new h(...Cu(e.deps))}return u}function $d(e,i,a=!1){return{factory:e,value:i,multi:a?[]:void 0}}function Kg(e){return null!==e&&"object"==typeof e&&rl in e}function id(e){return"function"==typeof e}const Xg=function(e,i,a){return function(e,i=null,a=null,u){const h=sp(e,i,a,u);return h._resolveInjectorDefTypes(),h}({name:a},i,e,a)};let bo=(()=>{class e{static create(a,u){return Array.isArray(a)?Xg(a,u,""):Xg(a.providers,a.parent,a.name||"")}}return e.THROW_IF_NOT_FOUND=tl,e.NULL=new Di,e.\u0275prov=bn({token:e,providedIn:"any",factory:()=>gi(ql)}),e.__NG_ELEMENT_ID__=-1,e})();function am(e,i){Ei(io(e)[1],xi())}function Jd(e){let i=function(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),a=!0;const u=[e];for(;i;){let h;if(Ki(e))h=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Error("Directives cannot inherit Components");h=i.\u0275dir}if(h){if(a){u.push(h);const b=e;b.inputs=bp(e.inputs),b.declaredInputs=bp(e.declaredInputs),b.outputs=bp(e.outputs);const T=h.hostBindings;T&&um(e,T);const N=h.viewQuery,q=h.contentQueries;if(N&&Rc(e,N),q&&ld(e,q),Fe(e.inputs,h.inputs),Fe(e.declaredInputs,h.declaredInputs),Fe(e.outputs,h.outputs),Ki(h)&&h.data.animation){const ie=e.data;ie.animation=(ie.animation||[]).concat(h.data.animation)}}const _=h.features;if(_)for(let b=0;b<_.length;b++){const T=_[b];T&&T.ngInherit&&T(e),T===Jd&&(a=!1)}}i=Object.getPrototypeOf(i)}!function(e){let i=0,a=null;for(let u=e.length-1;u>=0;u--){const h=e[u];h.hostVars=i+=h.hostVars,h.hostAttrs=js(h.hostAttrs,a=js(a,h.hostAttrs))}}(u)}function bp(e){return e===Gt?{}:e===Oe?[]:e}function Rc(e,i){const a=e.viewQuery;e.viewQuery=a?(u,h)=>{i(u,h),a(u,h)}:i}function ld(e,i){const a=e.contentQueries;e.contentQueries=a?(u,h,_)=>{i(u,h,_),a(u,h,_)}:i}function um(e,i){const a=e.hostBindings;e.hostBindings=a?(u,h)=>{i(u,h),a(u,h)}:i}let gf=null;function cd(){if(!gf){const e=Vt.Symbol;if(e&&e.iterator)gf=e.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<i.length;++a){const u=i[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(gf=u)}}}return gf}class uu{constructor(i){this.wrapped=i}static wrap(i){return new uu(i)}static unwrap(i){return uu.isWrapped(i)?i.wrapped:i}static isWrapped(i){return i instanceof uu}}function Oh(e){return!!wp(e)&&(Array.isArray(e)||!(e instanceof Map)&&cd()in e)}function wp(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function qu(e,i,a){return e[i]=a}function cs(e,i,a){return!Object.is(e[i],a)&&(e[i]=a,!0)}function ka(e,i,a,u){const h=cs(e,i,a);return cs(e,i+1,u)||h}function _f(e,i,a,u){const h=Nt();return cs(h,mt(),i)&&(mr(),bl(pi(),h,e,i,a,u)),_f}function Dl(e,i,a,u){return cs(e,mt(),a)?i+Ke(a)+u:_r}function Rh(e,i,a,u,h,_,b,T){const N=Nt(),q=mr(),ie=e+20,_e=q.firstCreatePass?function(e,i,a,u,h,_,b,T,N){const q=i.consts,ie=Bd(i,e,4,b||null,hr(q,T));Xf(i,a,ie,hr(q,N)),Ei(i,ie);const _e=ie.tViews=ef(2,ie,u,h,_,i.directiveRegistry,i.pipeRegistry,null,i.schemas,q);return null!==i.queries&&(i.queries.template(i,ie),_e.queries=i.queries.embeddedTView(ie)),ie}(ie,q,N,i,a,u,h,_,b):q.data[ie];Zo(_e,!1);const Te=N[11].createComment("");Cr(q,N,Te,_e),wi(Te,N),Dh(N,N[ie]=Vg(Te,N,Te,_e)),qi(_e)&&Yf(q,N,_e),null!=b&&Eh(N,_e,T)}function _m(e){return $e(Dn.lFrame.contextLView,20+e)}function Rp(e,i=Qt.Default){const a=Nt();return null===a?gi(e,i):za(xi(),a,me(e),i)}function B_(e,i,a){const u=Nt();return cs(u,mt(),i)&&ga(mr(),pi(),u,e,i,u[11],a,!1),B_}function j_(e,i,a,u,h){const b=h?"class":"style";Zg(e,a,i.inputs[b],b,u)}function H_(e,i,a,u){const h=Nt(),_=mr(),b=20+e,T=h[11],N=h[b]=Fd(T,i,Dn.lFrame.currentNamespace),q=_.firstCreatePass?function(e,i,a,u,h,_,b){const T=i.consts,q=Bd(i,e,2,h,hr(T,_));return Xf(i,a,q,hr(T,b)),null!==q.attrs&&zd(q,q.attrs,!1),null!==q.mergedAttrs&&zd(q,q.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,q),q}(b,_,h,0,i,a,u):_.data[b];Zo(q,!0);const ie=q.mergedAttrs;null!==ie&&Da(T,N,ie);const _e=q.classes;null!==_e&&Lf(T,N,_e);const Te=q.styles;null!==Te&&og(T,N,Te),64!=(64&q.flags)&&Cr(_,h,N,q),0===Dn.lFrame.elementDepthCount&&wi(N,h),Dn.lFrame.elementDepthCount++,qi(q)&&(Yf(_,h,q),wg(_,q,h)),null!==u&&Eh(h,q)}function G_(){let e=xi();oe()?A():(e=e.parent,Zo(e,!1));const i=e;Dn.lFrame.elementDepthCount--;const a=mr();a.firstCreatePass&&(Ei(a,e),zi(e)&&a.queries.elementEnd(e)),null!=i.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(i)&&j_(a,i,Nt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(i)&&j_(a,i,Nt(),i.stylesWithoutHost,!1)}function Mv(e,i,a,u){H_(e,i,a,u),G_()}function z_(e,i,a){const u=Nt(),h=mr(),_=e+20,b=h.firstCreatePass?function(e,i,a,u,h){const _=i.consts,b=hr(_,u),T=Bd(i,e,8,"ng-container",b);return null!==b&&zd(T,b,!0),Xf(i,a,T,hr(_,h)),null!==i.queries&&i.queries.elementStart(i,T),T}(_,h,u,i,a):h.data[_];Zo(b,!0);const T=u[_]=u[11].createComment("");Cr(h,u,T,b),wi(T,u),qi(b)&&(Yf(h,u,b),wg(h,b,u)),null!=a&&Eh(u,b)}function q_(){let e=xi();const i=mr();oe()?A():(e=e.parent,Zo(e,!1)),i.firstCreatePass&&(Ei(i,e),zi(e)&&i.queries.elementEnd(e))}function Ov(){return Nt()}function Z_(e){return!!e&&"function"==typeof e.then}function Rv(e){return!!e&&"function"==typeof e.subscribe}const $_=Rv;function W_(e,i,a,u){const h=Nt(),_=mr(),b=xi();return function(e,i,a,u,h,_,b,T){const N=qi(u),ie=e.firstCreatePass&&Gg(e),_e=i[8],Te=op(i);let Be=!0;if(3&u.type||T){const pt=H(u,i),Kt=T?T(pt):pt,Pt=Te.length,Qn=T?yr=>T(we(yr[u.index])):u.index;if(x(a)){let yr=null;if(!T&&N&&(yr=function(e,i,a,u){const h=e.cleanup;if(null!=h)for(let _=0;_<h.length-1;_+=2){const b=h[_];if(b===a&&h[_+1]===u){const T=i[7],N=h[_+2];return T.length>N?T[N]:null}"string"==typeof b&&(_+=2)}return null}(e,i,h,u.index)),null!==yr)(yr.__ngLastListenerFn__||yr).__ngNextListenerFn__=_,yr.__ngLastListenerFn__=_,Be=!1;else{_=Y_(u,i,_e,_,!1);const di=a.listen(Kt,h,_);Te.push(_,di),ie&&ie.push(h,Qn,Pt,Pt+1)}}else _=Y_(u,i,_e,_,!0),Kt.addEventListener(h,_,b),Te.push(_),ie&&ie.push(h,Qn,Pt,b)}else _=Y_(u,i,_e,_,!1);const Qe=u.outputs;let bt;if(Be&&null!==Qe&&(bt=Qe[h])){const pt=bt.length;if(pt)for(let Kt=0;Kt<pt;Kt+=2){const Ms=i[bt[Kt]][bt[Kt+1]].subscribe(_),Il=Te.length;Te.push(_,Ms),ie&&ie.push(h,u.index,Il,-(Il+1))}}}(_,h,h[11],b,e,i,!!a,u),W_}function Fv(e,i,a,u){try{return!1!==a(u)}catch(h){return qg(e,h),!1}}function Y_(e,i,a,u,h){return function _(b){if(b===Function)return u;const T=2&e.flags?Rt(e.index,i):i;0==(32&i[2])&&Th(T);let N=Fv(i,0,u,b),q=_.__ngNextListenerFn__;for(;q;)N=Fv(i,0,q,b)&&N,q=q.__ngNextListenerFn__;return h&&!1===N&&(b.preventDefault(),b.returnValue=!1),N}}function Nv(e=1){return function(e){return(Dn.lFrame.contextLView=function(e,i){for(;e>0;)i=i[15],e--;return i}(e,Dn.lFrame.contextLView))[8]}(e)}function bE(e,i){let a=null;const u=function(e){const i=e.attrs;if(null!=i){const a=i.indexOf(5);if(0==(1&a))return i[a+1]}return null}(e);for(let h=0;h<i.length;h++){const _=i[h];if("*"!==_){if(null===u?lg(e,_,!0):Vf(u,_))return h}else a=h}return a}function kv(e){const i=Nt()[16][6];if(!i.projection){const u=i.projection=$a(e?e.length:1,null),h=u.slice();let _=i.child;for(;null!==_;){const b=e?bE(_,e):0;null!==b&&(h[b]?h[b].projectionNext=_:u[b]=_,h[b]=_),_=_.next}}}function Lv(e,i=0,a){const u=Nt(),h=mr(),_=Bd(h,20+e,16,null,a||null);null===_.projection&&(_.projection=i),A(),64!=(64&_.flags)&&function(e,i,a){kf(i[11],0,i,a,D(e,a,i),At(a.parent||i[6],a,i))}(h,u,_)}function $v(e,i,a,u,h){const _=e[a+1],b=null===i;let T=u?au(_):yl(_),N=!1;for(;0!==T&&(!1===N||b);){const ie=e[T+1];wE(e[T],i)&&(N=!0,e[T+1]=u?vh(ie):Hf(ie)),T=u?au(ie):yl(ie)}N&&(e[a+1]=u?Hf(_):vh(_))}function wE(e,i){return null===e||null==i||(Array.isArray(e)?e[1]:e)===i||!(!Array.isArray(e)||"string"!=typeof i)&&oa(e,i)>=0}const Is={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Wv(e){return e.substring(Is.key,Is.keyEnd)}function Yv(e,i){const a=Is.textEnd;return a===i?-1:(i=Is.keyEnd=function(e,i,a){for(;i<a&&e.charCodeAt(i)>32;)i++;return i}(e,Is.key=i,a),vf(e,i,a))}function vf(e,i,a){for(;i<a&&e.charCodeAt(i)<=32;)i++;return i}function Q_(e,i,a){return Kl(e,i,a,!1),Q_}function J_(e,i){return Kl(e,i,null,!0),J_}function Fc(e,i){for(let a=function(e){return function(e){Is.key=0,Is.keyEnd=0,Is.value=0,Is.valueEnd=0,Is.textEnd=e.length}(e),Yv(e,vf(e,0,Is.textEnd))}(i);a>=0;a=Yv(i,a))Es(e,Wv(i),!0)}function Kl(e,i,a,u){const h=Nt(),_=mr(),b=qt(2);_.firstUpdatePass&&tb(_,e,b,u),i!==_r&&cs(h,b,i)&&rb(_,_.data[ui()],h,h[11],e,h[b+1]=function(e,i){return null==e||("string"==typeof i?e+=i:"object"==typeof e&&(e=fe(zr(e)))),e}(i,a),u,b)}function eb(e,i){return i>=e.expandoStartIndex}function tb(e,i,a,u){const h=e.data;if(null===h[a+1]){const _=h[ui()],b=eb(e,a);ob(_,u)&&null===i&&!b&&(i=!1),i=function(e,i,a,u){const h=function(e){const i=Dn.lFrame.currentDirectiveIndex;return-1===i?null:e[i]}(e);let _=u?i.residualClasses:i.residualStyles;if(null===h)0===(u?i.classBindings:i.styleBindings)&&(a=xp(a=X_(null,e,i,a,u),i.attrs,u),_=null);else{const b=i.directiveStylingLast;if(-1===b||e[b]!==h)if(a=X_(h,e,i,a,u),null===_){let N=function(e,i,a){const u=a?i.classBindings:i.styleBindings;if(0!==yl(u))return e[au(u)]}(e,i,u);void 0!==N&&Array.isArray(N)&&(N=X_(null,e,i,N[1],u),N=xp(N,i.attrs,u),function(e,i,a,u){e[au(a?i.classBindings:i.styleBindings)]=u}(e,i,u,N))}else _=function(e,i,a){let u;const h=i.directiveEnd;for(let _=1+i.directiveStylingLast;_<h;_++)u=xp(u,e[_].hostAttrs,a);return xp(u,i.attrs,a)}(e,i,u)}return void 0!==_&&(u?i.residualClasses=_:i.residualStyles=_),a}(h,_,i,u),function(e,i,a,u,h,_){let b=_?i.classBindings:i.styleBindings,T=au(b),N=yl(b);e[u]=a;let ie,q=!1;if(Array.isArray(a)){const _e=a;ie=_e[1],(null===ie||oa(_e,ie)>0)&&(q=!0)}else ie=a;if(h)if(0!==N){const Te=au(e[T+1]);e[u+1]=qh(Te,T),0!==Te&&(e[Te+1]=kd(e[Te+1],u)),e[T+1]=function(e,i){return 131071&e|i<<17}(e[T+1],u)}else e[u+1]=qh(T,0),0!==T&&(e[T+1]=kd(e[T+1],u)),T=u;else e[u+1]=qh(N,0),0===T?T=u:e[N+1]=kd(e[N+1],u),N=u;q&&(e[u+1]=Hf(e[u+1])),$v(e,ie,u,!0),$v(e,ie,u,!1),function(e,i,a,u,h){const _=h?e.residualClasses:e.residualStyles;null!=_&&"string"==typeof i&&oa(_,i)>=0&&(a[u+1]=vh(a[u+1]))}(i,ie,e,u,_),b=qh(T,N),_?i.classBindings=b:i.styleBindings=b}(h,_,i,a,b,u)}}function X_(e,i,a,u,h){let _=null;const b=a.directiveEnd;let T=a.directiveStylingLast;for(-1===T?T=a.directiveStart:T++;T<b&&(_=i[T],u=xp(u,_.hostAttrs,h),_!==e);)T++;return null!==e&&(a.directiveStylingLast=T),u}function xp(e,i,a){const u=a?1:2;let h=-1;if(null!==i)for(let _=0;_<i.length;_++){const b=i[_];"number"==typeof b?h=b:h===u&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Es(e,b,!!a||i[++_]))}return void 0===e?null:e}function rb(e,i,a,u,h,_,b,T){if(!(3&i.type))return;const N=e.data,q=N[T+1];Dm(function(e){return 1==(1&e)}(q)?ib(N,i,a,h,yl(q),b):void 0)||(Dm(_)||function(e){return 2==(2&e)}(q)&&(_=ib(N,null,a,h,T,b)),function(e,i,a,u,h){const _=x(e);if(i)h?_?e.addClass(a,u):a.classList.add(u):_?e.removeClass(a,u):a.classList.remove(u);else{let b=-1===u.indexOf("-")?void 0:ea.DashCase;if(null==h)_?e.removeStyle(a,u,b):a.style.removeProperty(u);else{const T="string"==typeof h&&h.endsWith("!important");T&&(h=h.slice(0,-10),b|=ea.Important),_?e.setStyle(a,u,h,b):a.style.setProperty(u,h,T?"important":"")}}}(u,b,G(ui(),a),h,_))}function ib(e,i,a,u,h,_){const b=null===i;let T;for(;h>0;){const N=e[h],q=Array.isArray(N),ie=q?N[1]:N,_e=null===ie;let Te=a[h+1];Te===_r&&(Te=_e?Oe:void 0);let Be=_e?Ps(Te,u):ie===u?Te:void 0;if(q&&!Dm(Be)&&(Be=Ps(N,u)),Dm(Be)&&(T=Be,b))return T;const Qe=e[h+1];h=b?au(Qe):yl(Qe)}if(null!==i){let N=_?i.residualClasses:i.residualStyles;null!=N&&(T=Ps(N,u))}return T}function Dm(e){return void 0!==e}function ob(e,i){return 0!=(e.flags&(i?16:32))}function sb(e,i=""){const a=Nt(),u=mr(),h=e+20,_=u.firstCreatePass?Bd(u,h,1,i,null):u.data[h],b=a[h]=function(e,i){return x(e)?e.createText(i):e.createTextNode(i)}(a[11],i);Cr(u,a,b,_),Zo(_,!1)}function ey(e){return Tm("",e,""),ey}function Tm(e,i,a){const u=Nt(),h=Dl(u,e,i,a);return h!==_r&&Gu(u,ui(),h),Tm}function ty(e,i,a,u,h){const _=Nt(),b=function(e,i,a,u,h,_){const T=ka(e,Le(),a,h);return qt(2),T?i+Ke(a)+u+Ke(h)+_:_r}(_,e,i,a,u,h);return b!==_r&&Gu(_,ui(),b),ty}function pb(e,i,a){!function(e,i,a,u){const h=mr(),_=qt(2);h.firstUpdatePass&&tb(h,null,_,u);const b=Nt();if(a!==_r&&cs(b,_,a)){const T=h.data[ui()];if(ob(T,u)&&!eb(h,_)){let N=u?T.classesWithoutHost:T.stylesWithoutHost;null!==N&&(a=ve(N,a||"")),j_(h,T,b,a,u)}else!function(e,i,a,u,h,_,b,T){h===_r&&(h=Oe);let N=0,q=0,ie=0<h.length?h[0]:null,_e=0<_.length?_[0]:null;for(;null!==ie||null!==_e;){const Te=N<h.length?h[N+1]:void 0,Be=q<_.length?_[q+1]:void 0;let bt,Qe=null;ie===_e?(N+=2,q+=2,Te!==Be&&(Qe=_e,bt=Be)):null===_e||null!==ie&&ie<_e?(N+=2,Qe=ie):(q+=2,Qe=_e,bt=Be),null!==Qe&&rb(e,i,a,u,Qe,bt,b,T),ie=N<h.length?h[N]:null,_e=q<_.length?_[q]:null}}(h,T,b,b[11],b[_+1],b[_+1]=function(e,i,a){if(null==a||""===a)return Oe;const u=[],h=zr(a);if(Array.isArray(h))for(let _=0;_<h.length;_++)e(u,h[_],!0);else if("object"==typeof h)for(const _ in h)h.hasOwnProperty(_)&&e(u,_,h[_]);else"string"==typeof h&&i(u,h);return u}(e,i,a),u,_)}}(Es,Fc,Dl(Nt(),e,i,a),!0)}function ny(e,i,a){const u=Nt();return cs(u,mt(),i)&&ga(mr(),pi(),u,e,i,u[11],a,!0),ny}const Ph=void 0;var rw=["en",[["a","p"],["AM","PM"],Ph],[["AM","PM"],Ph,Ph],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ph,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ph,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ph,"{1} 'at' {0}",Ph],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const i=Math.floor(Math.abs(e)),a=e.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===a?1:5}];let bf={};function ry(e){const i=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let a=Sb(i);if(a)return a;const u=i.split("-")[0];if(a=Sb(u),a)return a;if("en"===u)return rw;throw new Error(`Missing locale data for the locale "${e}".`)}function Tb(e){return ry(e)[fr.PluralCase]}function Sb(e){return e in bf||(bf[e]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[e]),bf[e]}var fr=(()=>((fr=fr||{})[fr.LocaleId=0]="LocaleId",fr[fr.DayPeriodsFormat=1]="DayPeriodsFormat",fr[fr.DayPeriodsStandalone=2]="DayPeriodsStandalone",fr[fr.DaysFormat=3]="DaysFormat",fr[fr.DaysStandalone=4]="DaysStandalone",fr[fr.MonthsFormat=5]="MonthsFormat",fr[fr.MonthsStandalone=6]="MonthsStandalone",fr[fr.Eras=7]="Eras",fr[fr.FirstDayOfWeek=8]="FirstDayOfWeek",fr[fr.WeekendRange=9]="WeekendRange",fr[fr.DateFormat=10]="DateFormat",fr[fr.TimeFormat=11]="TimeFormat",fr[fr.DateTimeFormat=12]="DateTimeFormat",fr[fr.NumberSymbols=13]="NumberSymbols",fr[fr.NumberFormats=14]="NumberFormats",fr[fr.CurrencyCode=15]="CurrencyCode",fr[fr.CurrencySymbol=16]="CurrencySymbol",fr[fr.CurrencyName=17]="CurrencyName",fr[fr.Currencies=18]="Currencies",fr[fr.Directionality=19]="Directionality",fr[fr.PluralCase=20]="PluralCase",fr[fr.ExtraData=21]="ExtraData",fr))();const Sm="en-US";let Ab=Sm;function iy(e){Bt(e,"Expected localeId to be defined"),"string"==typeof e&&(Ab=e.toLowerCase().replace(/_/g,"-"))}function ay(e,i,a,u,h){if(e=me(e),Array.isArray(e))for(let _=0;_<e.length;_++)ay(e[_],i,a,u,h);else{const _=mr(),b=Nt();let T=id(e)?e:me(e.provide),N=rd(e);const q=xi(),ie=1048575&q.providerIndexes,_e=q.directiveStart,Te=q.providerIndexes>>20;if(id(e)||!e.multi){const Be=new ti(N,h,Rp),Qe=ly(T,i,h?ie:ie+Te,_e);-1===Qe?(an(Cs(q,b),_,T),uy(_,e,i.length),i.push(T),q.directiveStart++,q.directiveEnd++,h&&(q.providerIndexes+=1048576),a.push(Be),b.push(Be)):(a[Qe]=Be,b[Qe]=Be)}else{const Be=ly(T,i,ie+Te,_e),Qe=ly(T,i,ie,ie+Te),bt=Be>=0&&a[Be],pt=Qe>=0&&a[Qe];if(h&&!pt||!h&&!bt){an(Cs(q,b),_,T);const Kt=function(e,i,a,u,h){const _=new ti(e,a,Rp);return _.multi=[],_.index=i,_.componentProviders=0,Qb(_,h,u&&!a),_}(h?eD:Xw,a.length,h,u,N);!h&&pt&&(a[Qe].providerFactory=Kt),uy(_,e,i.length,0),i.push(T),q.directiveStart++,q.directiveEnd++,h&&(q.providerIndexes+=1048576),a.push(Kt),b.push(Kt)}else uy(_,e,Be>-1?Be:Qe,Qb(a[h?Qe:Be],N,!h&&u));!h&&u&&pt&&a[Qe].componentProviders++}}}function uy(e,i,a,u){const h=id(i);if(h||function(e){return!!e.useClass}(i)){const b=(i.useClass||i).prototype.ngOnDestroy;if(b){const T=e.destroyHooks||(e.destroyHooks=[]);if(!h&&i.multi){const N=T.indexOf(a);-1===N?T.push(a,[u,b]):T[N+1].push(u,b)}else T.push(a,b)}}}function Qb(e,i,a){return a&&e.componentProviders++,e.multi.push(i)-1}function ly(e,i,a,u){for(let h=a;h<u;h++)if(i[h]===e)return h;return-1}function Xw(e,i,a,u){return cy(this.multi,[])}function eD(e,i,a,u){const h=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,T=$(a,a[1],this.providerFactory.index,u);_=T.slice(0,b),cy(h,_);for(let N=b;N<T.length;N++)_.push(T[N])}else _=[],cy(h,_);return _}function cy(e,i){for(let a=0;a<e.length;a++)i.push((0,e[a])());return i}function Jb(e,i=[]){return a=>{a.providersResolver=(u,h)=>function(e,i,a){const u=mr();if(u.firstCreatePass){const h=Ki(e);ay(a,u.data,u.blueprint,h,!0),ay(i,u.data,u.blueprint,h,!1)}}(u,h?h(e):e,i)}}class Xb{}const t0="ngComponent";class rD{resolveComponentFactory(i){throw function(e){const i=Error(`No component factory found for ${fe(e)}. Did you add it to @NgModule.entryComponents?`);return i[t0]=e,i}(i)}}let Ef=(()=>{class e{}return e.NULL=new rD,e})();function Rm(...e){}function wf(e,i){return new Nc(H(e,i))}const sD=function(){return wf(xi(),Nt())};let Nc=(()=>{class e{constructor(a){this.nativeElement=a}}return e.__NG_ELEMENT_ID__=sD,e})();function n0(e){return e instanceof Nc?e.nativeElement:e}class xm{}let aD=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>lD(),e})();const lD=function(){const e=Nt(),a=Rt(xi().index,e);return function(e){return e[11]}(Kr(a)?a:e)};let hy=(()=>{class e{}return e.\u0275prov=bn({token:e,providedIn:"root",factory:()=>null}),e})();class r0{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const fy=new r0("12.2.9");class o0{constructor(){}supports(i){return Oh(i)}create(i){return new fD(i)}}const hD=(e,i)=>i;class fD{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||hD}forEachItem(i){let a;for(a=this._itHead;null!==a;a=a._next)i(a)}forEachOperation(i){let a=this._itHead,u=this._removalsHead,h=0,_=null;for(;a||u;){const b=!u||a&&a.currentIndex<a0(u,h,_)?a:u,T=a0(b,h,_),N=b.currentIndex;if(b===u)h--,u=u._nextRemoved;else if(a=a._next,null==b.previousIndex)h++;else{_||(_=[]);const q=T-h,ie=N-h;if(q!=ie){for(let Te=0;Te<q;Te++){const Be=Te<_.length?_[Te]:_[Te]=0,Qe=Be+Te;ie<=Qe&&Qe<q&&(_[Te]=Be+1)}_[b.previousIndex]=ie-q}}T!==N&&i(b,T,N)}}forEachPreviousItem(i){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)i(a)}forEachAddedItem(i){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)i(a)}forEachMovedItem(i){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)i(a)}forEachRemovedItem(i){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)i(a)}forEachIdentityChange(i){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)i(a)}diff(i){if(null==i&&(i=[]),!Oh(i))throw new Error(`Error trying to diff '${fe(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let h,_,b,a=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let T=0;T<this.length;T++)_=i[T],b=this._trackByFn(T,_),null!==a&&Object.is(a.trackById,b)?(u&&(a=this._verifyReinsertion(a,_,b,T)),Object.is(a.item,_)||this._addIdentityChange(a,_)):(a=this._mismatch(a,_,b,T),u=!0),a=a._next}else h=0,function(e,i){if(Array.isArray(e))for(let a=0;a<e.length;a++)i(e[a]);else{const a=e[cd()]();let u;for(;!(u=a.next()).done;)i(u.value)}}(i,T=>{b=this._trackByFn(h,T),null!==a&&Object.is(a.trackById,b)?(u&&(a=this._verifyReinsertion(a,T,b,h)),Object.is(a.item,T)||this._addIdentityChange(a,T)):(a=this._mismatch(a,T,b,h),u=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,a,u,h){let _;return null===i?_=this._itTail:(_=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,a)||this._addIdentityChange(i,a),this._reinsertAfter(i,_,h)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(i.item,a)||this._addIdentityChange(i,a),this._moveAfter(i,_,h)):i=this._addAfter(new pD(a,u),_,h),i}_verifyReinsertion(i,a,u,h){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==_?i=this._reinsertAfter(_,i._prev,h):i.currentIndex!=h&&(i.currentIndex=h,this._addToMoves(i,h)),i}_truncate(i){for(;null!==i;){const a=i._next;this._addToRemovals(this._unlink(i)),i=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const h=i._prevRemoved,_=i._nextRemoved;return null===h?this._removalsHead=_:h._nextRemoved=_,null===_?this._removalsTail=h:_._prevRemoved=h,this._insertAfter(i,a,u),this._addToMoves(i,u),i}_moveAfter(i,a,u){return this._unlink(i),this._insertAfter(i,a,u),this._addToMoves(i,u),i}_addAfter(i,a,u){return this._insertAfter(i,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,a,u){const h=null===a?this._itHead:a._next;return i._next=h,i._prev=a,null===h?this._itTail=i:h._prev=i,null===a?this._itHead=i:a._next=i,null===this._linkedRecords&&(this._linkedRecords=new s0),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const a=i._prev,u=i._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,i}_addToMoves(i,a){return i.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new s0),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,a){return i.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class pD{constructor(i,a){this.item=i,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gD{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const a=i._prevDup,u=i._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class s0{constructor(){this.map=new Map}put(i){const a=i.trackById;let u=this.map.get(a);u||(u=new gD,this.map.set(a,u)),u.add(i)}get(i,a){const h=this.map.get(i);return h?h.get(i,a):null}remove(i){const a=i.trackById;return this.map.get(a).remove(i)&&this.map.delete(a),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function a0(e,i,a){const u=e.previousIndex;if(null===u)return u;let h=0;return a&&u<a.length&&(h=a[u]),u+i+h}class u0{constructor(){}supports(i){return i instanceof Map||wp(i)}create(){return new mD}}class mD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let a;for(a=this._mapHead;null!==a;a=a._next)i(a)}forEachPreviousItem(i){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)i(a)}forEachChangedItem(i){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)i(a)}forEachAddedItem(i){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)i(a)}forEachRemovedItem(i){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)i(a)}diff(i){if(i){if(!(i instanceof Map||wp(i)))throw new Error(`Error trying to diff '${fe(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const _=this._getOrCreateRecordForKey(h,u);a=this._insertBeforeOrAppend(a,_)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,a){if(i){const u=i._prev;return a._next=i,a._prev=u,i._prev=a,u&&(u._next=a),i===this._mapHead&&(this._mapHead=a),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(i,a){if(this._records.has(i)){const h=this._records.get(i);this._maybeAddToChanges(h,a);const _=h._prev,b=h._next;return _&&(_._next=b),b&&(b._prev=_),h._next=null,h._prev=null,h}const u=new _D(i);return this._records.set(i,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,a){Object.is(a,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=a,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,a){i instanceof Map?i.forEach(a):Object.keys(i).forEach(u=>a(i[u],u))}}class _D{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function l0(){return new Pm([new o0])}let Pm=(()=>{class e{constructor(a){this.factories=a}static create(a,u){if(null!=u){const h=u.factories.slice();a=a.concat(h)}return new e(a)}static extend(a){return{provide:e,useFactory:u=>e.create(a,u||l0()),deps:[[e,new $s,new as]]}}find(a){const u=this.factories.find(h=>h.supports(a));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(e){return e.name||typeof e}(a)}'`)}}return e.\u0275prov=bn({token:e,providedIn:"root",factory:l0}),e})();function c0(){return new Fm([new u0])}let Fm=(()=>{class e{constructor(a){this.factories=a}static create(a,u){if(u){const h=u.factories.slice();a=a.concat(h)}return new e(a)}static extend(a){return{provide:e,useFactory:u=>e.create(a,u||c0()),deps:[[e,new $s,new as]]}}find(a){const u=this.factories.find(h=>h.supports(a));if(u)return u;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return e.\u0275prov=bn({token:e,providedIn:"root",factory:c0}),e})();function Nm(e,i,a,u,h=!1){for(;null!==a;){const _=i[a.index];if(null!==_&&u.push(we(_)),Mr(_))for(let T=10;T<_.length;T++){const N=_[T],q=N[1].firstChild;null!==q&&Nm(N[1],N,q,u)}const b=a.type;if(8&b)Nm(e,i,a.child,u);else if(32&b){const T=nu(a,i);let N;for(;N=T();)u.push(N)}else if(16&b){const T=Na(i,a);if(Array.isArray(T))u.push(...T);else{const N=ha(i[16]);Nm(N[1],N,T,u,!0)}}a=h?a.projectionNext:a.next}return u}class Lp{constructor(i,a){this._lView=i,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,a=i[1];return Nm(a,i,a.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Mr(i)){const a=i[8],u=a?a.indexOf(this):-1;u>-1&&(z(i,u),So(a,u))}this._attachedToViewContainer=!1}c(this._lView[1],this._lView)}onDestroy(i){Ag(this._lView[1],this._lView,null,i)}markForCheck(){Th(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Mc(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,i,a){be(!0);try{Mc(e,i,a)}finally{be(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,su(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class vD extends Lp{constructor(i){super(i),this._view=i}detectChanges(){ip(this._view)}checkNoChanges(){!function(e){be(!0);try{ip(e)}finally{be(!1)}}(this._view)}get context(){return null}}const CD=function(e){return function(e,i,a){if(hi(e)&&!a){const u=Rt(e.index,i);return new Lp(u,u)}return 47&e.type?new Lp(i[16],i):null}(xi(),Nt(),16==(16&e))};let ED=(()=>{class e{}return e.__NG_ELEMENT_ID__=CD,e})();const TD=[new u0],AD=new Pm([new o0]),ID=new Fm(TD),OD=function(){return km(xi(),Nt())};let Vp=(()=>{class e{}return e.__NG_ELEMENT_ID__=OD,e})();const RD=Vp,xD=class extends RD{constructor(i,a,u){super(),this._declarationLView=i,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(i){const a=this._declarationTContainer.tViews,u=Ud(this._declarationLView,a,i,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(u[19]=_.createEmbeddedView(a)),jd(a,u,i),new Lp(u)}};function km(e,i){return 4&e.type?new xD(i,e,wf(e,i)):null}class Fh{}class d0{}const ND=function(){return p0(xi(),Nt())};let Lm=(()=>{class e{}return e.__NG_ELEMENT_ID__=ND,e})();const LD=Lm,h0=class extends LD{constructor(i,a,u){super(),this._lContainer=i,this._hostTNode=a,this._hostLView=u}get element(){return wf(this._hostTNode,this._hostLView)}get injector(){return new qe(this._hostTNode,this._hostLView)}get parentInjector(){const i=Yn(this._hostTNode,this._hostLView);if(ra(i)){const a=Ha(i,this._hostLView),u=ja(i);return new qe(a[1].data[u+8],a)}return new qe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const a=f0(this._lContainer);return null!==a&&a[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,a,u){const h=i.createEmbeddedView(a||{});return this.insert(h,u),h}createComponent(i,a,u,h,_){const b=u||this.parentInjector;if(!_&&null==i.ngModule&&b){const N=b.get(Fh,null);N&&(_=N)}const T=i.create(b,h,void 0,_);return this.insert(T.hostView,a),T}insert(i,a){const u=i._lView,h=u[1];if(Mr(u[3])){const ie=this.indexOf(i);if(-1!==ie)this.detach(ie);else{const _e=u[3],Te=new h0(_e,_e[6],_e[3]);Te.detach(Te.indexOf(i))}}const _=this._adjustIndex(a),b=this._lContainer;!function(e,i,a,u){const h=10+u,_=a.length;u>0&&(a[h-1][4]=i),u<_-10?(i[4]=a[h],qs(a,10+u,i)):(a.push(i),i[4]=null),i[3]=a;const b=i[17];null!==b&&a!==b&&function(e,i){const a=e[9];i[16]!==i[3][3][16]&&(e[2]=!0),null===a?e[9]=[i]:a.push(i)}(b,i);const T=i[19];null!==T&&T.insertView(e),i[2]|=128}(h,u,b,_);const T=Hl(_,b),N=u[11],q=Ne(N,b[7]);return null!==q&&function(e,i,a,u,h,_){u[0]=h,u[6]=i,su(e,u,a,1,h,_)}(h,b[6],N,u,q,T),i.attachToViewContainerRef(),qs(py(b),_,i),i}move(i,a){return this.insert(i,a)}indexOf(i){const a=f0(this._lContainer);return null!==a?a.indexOf(i):-1}remove(i){const a=this._adjustIndex(i,-1),u=z(this._lContainer,a);u&&(So(py(this._lContainer),a),c(u[1],u))}detach(i){const a=this._adjustIndex(i,-1),u=z(this._lContainer,a);return u&&null!=So(py(this._lContainer),a)?new Lp(u):null}_adjustIndex(i,a=0){return null==i?this.length+a:i}};function f0(e){return e[8]}function py(e){return e[8]||(e[8]=[])}function p0(e,i){let a;const u=i[e.index];if(Mr(u))a=u;else{let h;if(8&e.type)h=we(u);else{const _=i[11];h=_.createComment("");const b=H(e,i);Y(_,Ne(_,b),h,function(e,i){return x(e)?e.nextSibling(i):i.nextSibling}(_,b),!1)}i[e.index]=a=Vg(u,i,h,e),Dh(i,a)}return new h0(a,e,i)}const Af={};class F0 extends Ef{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const a=Fr(i);return new k0(a,this.ngModule)}}function N0(e){const i=[];for(let a in e)e.hasOwnProperty(a)&&i.push({propName:e[a],templateName:a});return i}const PT=new Ii("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ml});class k0 extends Xb{constructor(i,a){super(),this.componentDef=i,this.ngModule=a,this.componentType=i.type,this.selector=i.selectors.map(Bf).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return N0(this.componentDef.inputs)}get outputs(){return N0(this.componentDef.outputs)}create(i,a,u,h){const _=(h=h||this.ngModule)?function(e,i){return{get:(a,u,h)=>{const _=e.get(a,Af,h);return _!==Af||u===Af?_:i.get(a,u,h)}}}(i,h.injector):i,b=_.get(xm,k),T=_.get(hy,null),N=b.createRenderer(null,this.componentDef),q=this.componentDef.selectors[0][0]||"div",ie=u?function(e,i,a){if(x(e))return e.selectRootElement(i,a===Mt.ShadowDom);let u="string"==typeof i?e.querySelector(i):i;return u.textContent="",u}(N,u,this.componentDef.encapsulation):Fd(b.createRenderer(null,this.componentDef),q,function(e){const i=e.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(q)),_e=this.componentDef.onPush?576:528,Te=function(e,i){return{components:[],scheduler:e||ml,clean:Hg,playerHandler:i||null,flags:0}}(),Be=ef(0,null,null,1,0,null,null,null,null,null),Qe=Ud(null,Be,Te,_e,null,null,b,N,T,_);let bt,pt;Oo(Qe);try{const Kt=function(e,i,a,u,h,_){const b=a[1];a[20]=e;const N=Bd(b,20,2,"#host",null),q=N.mergedAttrs=i.hostAttrs;null!==q&&(zd(N,q,!0),null!==e&&(Da(h,e,q),null!==N.classes&&Lf(h,e,N.classes),null!==N.styles&&og(h,e,N.styles)));const ie=u.createRenderer(e,i),_e=Ud(a,Dg(i),null,i.onPush?64:16,a[20],N,u,ie,_||null,null);return b.firstCreatePass&&(an(Cs(N,a),b,i.type),Fg(b,N),Ng(N,a.length,1)),Dh(a,_e),a[20]=_e}(ie,this.componentDef,Qe,b,N);if(ie)if(u)Da(N,ie,["ng-version",fy.full]);else{const{attrs:Pt,classes:Qn}=function(e){const i=[],a=[];let u=1,h=2;for(;u<e.length;){let _=e[u];if("string"==typeof _)2===h?""!==_&&i.push(_,e[++u]):8===h&&a.push(_);else{if(!Hu(h))break;h=_}u++}return{attrs:i,classes:a}}(this.componentDef.selectors[0]);Pt&&Da(N,ie,Pt),Qn&&Qn.length>0&&Lf(N,ie,Qn.join(" "))}if(pt=ue(Be,20),void 0!==a){const Pt=pt.projection=[];for(let Qn=0;Qn<this.ngContentSelectors.length;Qn++){const yr=a[Qn];Pt.push(null!=yr?Array.from(yr):null)}}bt=function(e,i,a,u,h){const _=a[1],b=function(e,i,a){const u=xi();e.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),np(e,u,i,td(e,i,1,null),a));const h=$(i,e,u.directiveStart,u);wi(h,i);const _=H(u,i);return _&&wi(_,i),h}(_,a,i);if(u.components.push(b),e[8]=b,h&&h.forEach(N=>N(b,i)),i.contentQueries){const N=xi();i.contentQueries(1,b,N.directiveStart)}const T=xi();return!_.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||($i(T.index),Og(a[1],T,0,T.directiveStart,T.directiveEnd,i),Pg(i,b)),b}(Kt,this.componentDef,Qe,Te,[am]),jd(Be,Qe,null)}finally{Fi()}return new kT(this.componentType,bt,wf(pt,Qe),Qe,pt)}}class kT extends class{}{constructor(i,a,u,h,_){super(),this.location=u,this._rootLView=h,this._tNode=_,this.instance=a,this.hostView=this.changeDetectorRef=new vD(h),this.componentType=i}get injector(){return new qe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const If=new Map;class UT extends Fh{constructor(i,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new F0(this);const u=Lr(i),h=i[zt]||null;h&&iy(h),this._bootstrapComponents=Xs(u.bootstrap),this._r3Injector=sp(i,a,[{provide:Fh,useValue:this},{provide:Ef,useValue:this.componentFactoryResolver}],fe(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,a=bo.THROW_IF_NOT_FOUND,u=Qt.Default){return i===bo||i===Fh||i===ql?this:this._r3Injector.get(i,a,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Ay extends d0{constructor(i){super(),this.moduleType=i,null!==Lr(i)&&function(e){const i=new Set;!function a(u){const h=Lr(u,!0),_=h.id;null!==_&&(function(e,i,a){if(i&&i!==a)throw new Error(`Duplicate module registered for ${e} - ${fe(i)} vs ${fe(i.name)}`)}(_,If.get(_),u),If.set(_,u));const b=Xs(h.imports);for(const T of b)i.has(T)||(i.add(T),a(T))}(e)}(i)}create(i){return new UT(this.moduleType,i)}}function U0(e,i,a){const u=Pe()+e,h=Nt();return h[u]===_r?qu(h,u,a?i.call(a):i()):function(e,i){return e[i]}(h,u)}function B0(e,i,a,u){return function(e,i,a,u,h,_){const b=i+a;return cs(e,b,h)?qu(e,b+1,_?u.call(_,h):u(h)):Zp(e,b+1)}(Nt(),Pe(),e,i,a,u)}function j0(e,i,a,u,h,_){return function(e,i,a,u,h,_,b,T){const N=i+a;return function(e,i,a,u,h){const _=ka(e,i,a,u);return cs(e,i+2,h)||_}(e,N,h,_,b)?qu(e,N+3,T?u.call(T,h,_,b):u(h,_,b)):Zp(e,N+3)}(Nt(),Pe(),e,i,a,u,h,_)}function Zp(e,i){const a=e[i];return a===_r?void 0:a}function $0(e,i){const a=mr();let u;const h=e+20;a.firstCreatePass?(u=function(e,i){if(i)for(let a=i.length-1;a>=0;a--){const u=i[a];if(e===u.name)return u}throw new Ue("302",`The pipe '${e}' could not be found!`)}(i,a.pipeRegistry),a.data[h]=u,u.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,u.onDestroy)):u=a.data[h];const _=u.factory||(u.factory=Nr(u.type)),b=Zn(Rp);try{const T=_t(!1),N=_();return _t(T),function(e,i,a,u){a>=e.data.length&&(e.data[a]=null,e.blueprint[a]=null),i[a]=u}(a,Nt(),h,N),N}finally{Zn(b)}}function W0(e,i,a,u){const h=e+20,_=Nt(),b=$e(_,h);return function(e,i){uu.isWrapped(i)&&(i=uu.unwrap(i),e[Le()]=_r);return i}(_,function(e,i){return e[1].data[i].pure}(_,h)?function(e,i,a,u,h,_,b){const T=i+a;return ka(e,T,h,_)?qu(e,T+2,b?u.call(b,h,_):u(h,_)):Zp(e,T+2)}(_,Pe(),i,b.transform,a,u,b):b.transform(a,u))}function Iy(e){return i=>{setTimeout(e,void 0,i)}}const kc=class extends P.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,a,u){var h,_,b;let T=i,N=a||(()=>null),q=u;if(i&&"object"==typeof i){const _e=i;T=null===(h=_e.next)||void 0===h?void 0:h.bind(_e),N=null===(_=_e.error)||void 0===_?void 0:_.bind(_e),q=null===(b=_e.complete)||void 0===b?void 0:b.bind(_e)}this.__isAsync&&(N=Iy(N),T&&(T=Iy(T)),q&&(q=Iy(q)));const ie=super.subscribe({next:T,error:N,complete:q});return i instanceof g.w&&i.add(ie),ie}};function XT(){return this._results[cd()]()}class Yp{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=cd(),u=Yp.prototype;u[a]||(u[a]=XT)}get changes(){return this._changes||(this._changes=new kc)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,a){return this._results.reduce(i,a)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,a){const u=this;u.dirty=!1;const h=Ko(i);(this._changesDetected=!function(e,i,a){if(e.length!==i.length)return!1;for(let u=0;u<e.length;u++){let h=e[u],_=i[u];if(a&&(h=a(h),_=a(_)),_!==h)return!1}return!0}(u._results,h,a))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class My{constructor(i){this.queryList=i,this.matches=null}clone(){return new My(this.queryList)}setDirty(){this.queryList.setDirty()}}class Oy{constructor(i=[]){this.queries=i}createEmbeddedView(i){const a=i.queries;if(null!==a){const u=null!==i.contentQueries?i.contentQueries[0]:a.length,h=[];for(let _=0;_<u;_++){const b=a.getByIndex(_);h.push(this.queries[b.indexInDeclarationView].clone())}return new Oy(h)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let a=0;a<this.queries.length;a++)null!==rC(i,a).matches&&this.queries[a].setDirty()}}class Y0{constructor(i,a,u=null){this.predicate=i,this.flags=a,this.read=u}}class Ry{constructor(i=[]){this.queries=i}elementStart(i,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,a)}elementEnd(i){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(i)}embeddedTView(i){let a=null;for(let u=0;u<this.length;u++){const h=null!==a?a.length:0,_=this.getByIndex(u).embeddedTView(i,h);_&&(_.indexInDeclarationView=u,null!==a?a.push(_):a=[_])}return null!==a?new Ry(a):null}template(i,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,a)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class xy{constructor(i,a=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(i,a){this.isApplyingToNode(a)&&this.matchTNode(i,a)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,a){this.elementStart(i,a)}embeddedTView(i,a){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,a),new xy(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const _=u[h];this.matchTNodeWithReadOption(i,a,nS(a,_)),this.matchTNodeWithReadOption(i,a,O(a,i,_,!1,!1))}else u===Vp?4&a.type&&this.matchTNodeWithReadOption(i,a,-1):this.matchTNodeWithReadOption(i,a,O(a,i,u,!1,!1))}matchTNodeWithReadOption(i,a,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===Nc||h===Lm||h===Vp&&4&a.type)this.addMatch(a.index,-2);else{const _=O(a,i,h,!1,!1);null!==_&&this.addMatch(a.index,_)}else this.addMatch(a.index,u)}}addMatch(i,a){null===this.matches?this.matches=[i,a]:this.matches.push(i,a)}}function nS(e,i){const a=e.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===i)return a[u+1];return null}function iS(e,i,a,u){return-1===a?function(e,i){return 11&e.type?wf(e,i):4&e.type?km(e,i):null}(i,e):-2===a?function(e,i,a){return a===Nc?wf(i,e):a===Vp?km(i,e):a===Lm?p0(i,e):void 0}(e,i,u):$(e,e[1],a,i)}function K0(e,i,a,u){const h=i[19].queries[u];if(null===h.matches){const _=e.data,b=a.matches,T=[];for(let N=0;N<b.length;N+=2){const q=b[N];T.push(q<0?null:iS(i,_[q],b[N+1],a.metadata.read))}h.matches=T}return h.matches}function Py(e,i,a,u){const h=e.queries.getByIndex(a),_=h.matches;if(null!==_){const b=K0(e,i,h,a);for(let T=0;T<_.length;T+=2){const N=_[T];if(N>0)u.push(b[T/2]);else{const q=_[T+1],ie=i[-N];for(let _e=10;_e<ie.length;_e++){const Te=ie[_e];Te[17]===Te[3]&&Py(Te[1],Te,q,u)}if(null!==ie[9]){const _e=ie[9];for(let Te=0;Te<_e.length;Te++){const Be=_e[Te];Py(Be[1],Be,q,u)}}}}}return u}function Q0(e){const i=Nt(),a=mr(),u=oi();Vr(u+1);const h=rC(a,u);if(e.dirty&&wn(i)===(2==(2&h.metadata.flags))){if(null===h.matches)e.reset([]);else{const _=h.crossesNgTemplate?Py(a,i,u,[]):K0(a,i,h,u);e.reset(_,n0),e.notifyOnChanges()}return!0}return!1}function J0(e,i,a){const u=mr();u.firstCreatePass&&(nC(u,new Y0(e,i,a),-1),2==(2&i)&&(u.staticViewQueries=!0)),tC(u,Nt(),i)}function X0(e,i,a,u){const h=mr();if(h.firstCreatePass){const _=xi();nC(h,new Y0(i,a,u),_.index),function(e,i){const a=e.contentQueries||(e.contentQueries=[]);i!==(a.length?a[a.length-1]:-1)&&a.push(e.queries.length-1,i)}(h,e),2==(2&a)&&(h.staticContentQueries=!0)}tC(h,Nt(),a)}function eC(){return e=Nt(),i=oi(),e[19].queries[i].queryList;var e,i}function tC(e,i,a){const u=new Yp(4==(4&a));Ag(e,i,u,u.destroy),null===i[19]&&(i[19]=new Oy),i[19].queries.push(new My(u))}function nC(e,i,a){null===e.queries&&(e.queries=new Ry),e.queries.track(new xy(i,a))}function rC(e,i){return e.queries.getByIndex(i)}const Uy=new Ii("Application Initializer");let Of=(()=>{class e{constructor(a){this.appInits=a,this.resolve=Rm,this.reject=Rm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const _=this.appInits[h]();if(Z_(_))a.push(_);else if($_(_)){const b=new Promise((T,N)=>{_.subscribe({complete:T,error:N})});a.push(b)}}Promise.all(a).then(()=>{u()}).catch(h=>{this.reject(h)}),0===a.length&&u(),this.initialized=!0}}return e.\u0275fac=function(a){return new(a||e)(gi(Uy,8))},e.\u0275prov=bn({token:e,factory:e.\u0275fac}),e})();const CC=new Ii("AppId"),NS={provide:CC,useFactory:function(){return`${By()}${By()}${By()}`},deps:[]};function By(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const EC=new Ii("Platform Initializer"),wC=new Ii("Platform ID"),DC=new Ii("appBootstrapListener");let TC=(()=>{class e{log(a){console.log(a)}warn(a){console.warn(a)}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=bn({token:e,factory:e.\u0275fac}),e})();const zm=new Ii("LocaleId"),SC=new Ii("DefaultCurrencyCode");class LS{constructor(i,a){this.ngModuleFactory=i,this.componentFactories=a}}const jy=function(e){return new Ay(e)},VS=jy,US=function(e){return Promise.resolve(jy(e))},AC=function(e){const i=jy(e),u=Xs(Lr(e).declarations).reduce((h,_)=>{const b=Fr(_);return b&&h.push(new k0(b)),h},[]);return new LS(i,u)},BS=AC,jS=function(e){return Promise.resolve(AC(e))};let Qp=(()=>{class e{constructor(){this.compileModuleSync=VS,this.compileModuleAsync=US,this.compileModuleAndAllComponentsSync=BS,this.compileModuleAndAllComponentsAsync=jS}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=bn({token:e,factory:e.\u0275fac}),e})();const zS=(()=>Promise.resolve(0))();function Hy(e){"undefined"==typeof Zone?zS.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Zu{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kc(!1),this.onMicrotaskEmpty=new kc(!1),this.onStable=new kc(!1),this.onError=new kc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&a,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let e=Vt.requestAnimationFrame,i=Vt.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&i){const a=e[Zone.__symbol__("OriginalDelegate")];a&&(e=a);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(e){const i=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Vt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,zy(e),e.isCheckStableRunning=!0,Gy(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),zy(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,h,_,b,T)=>{try{return IC(e),a.invokeTask(h,_,b,T)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||e.shouldCoalesceRunChangeDetection)&&i(),MC(e)}},onInvoke:(a,u,h,_,b,T,N)=>{try{return IC(e),a.invoke(h,_,b,T,N)}finally{e.shouldCoalesceRunChangeDetection&&i(),MC(e)}},onHasTask:(a,u,h,_)=>{a.hasTask(h,_),u===h&&("microTask"==_.change?(e._hasPendingMicrotasks=_.microTask,zy(e),Gy(e)):"macroTask"==_.change&&(e.hasPendingMacrotasks=_.macroTask))},onHandleError:(a,u,h,_)=>(a.handleError(h,_),e.runOutsideAngular(()=>e.onError.emit(_)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Zu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,a,u){return this._inner.run(i,a,u)}runTask(i,a,u,h){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+h,i,ZS,Rm,Rm);try{return _.runTask(b,a,u)}finally{_.cancelTask(b)}}runGuarded(i,a,u){return this._inner.runGuarded(i,a,u)}runOutsideAngular(i){return this._outer.run(i)}}const ZS={};function Gy(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function zy(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function IC(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function MC(e){e._nesting--,Gy(e)}class YS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kc,this.onMicrotaskEmpty=new kc,this.onStable=new kc,this.onError=new kc}run(i,a,u){return i.apply(a,u)}runGuarded(i,a,u){return i.apply(a,u)}runOutsideAngular(i){return i()}runTask(i,a,u,h){return i.apply(a,u)}}let OC=(()=>{class e{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zu.assertNotInAngularZone(),Hy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hy(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,h){let _=-1;u&&u>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:_,updateCb:h})}whenStable(a,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,h){return[]}}return e.\u0275fac=function(a){return new(a||e)(gi(Zu))},e.\u0275prov=bn({token:e,factory:e.\u0275fac}),e})(),RC=(()=>{class e{constructor(){this._applications=new Map,qy.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return qy.findTestabilityInTree(this,a,u)}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=bn({token:e,factory:e.\u0275fac}),e})();class KS{addToWindow(i){}findTestabilityInTree(i,a,u){return null}}function QS(e){qy=e}let qy=new KS,xC=!0,PC=!1;function Zy(){return PC=!0,xC}function JS(){if(PC)throw new Error("Cannot enable prod mode after platform setup.");xC=!1}let ec;const FC=new Ii("AllowMultipleToken");class oA{constructor(i,a){this.name=i,this.token=a}}function NC(e,i,a=[]){const u=`Platform: ${i}`,h=new Ii(u);return(_=[])=>{let b=kC();if(!b||b.injector.get(FC,!1))if(e)e(a.concat(_).concat({provide:h,useValue:!0}));else{const T=a.concat(_).concat({provide:h,useValue:!0},{provide:qd,useValue:"platform"});!function(e){if(ec&&!ec.destroyed&&!ec.injector.get(FC,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ec=e.get(LC);const i=e.get(EC,null);i&&i.forEach(a=>a())}(bo.create({providers:T,name:u}))}return function(e){const i=kC();if(!i)throw new Error("No platform exists!");if(!i.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(h)}}function kC(){return ec&&!ec.destroyed?ec:null}let LC=(()=>{class e{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const T=function(e,i){let a;return a="noop"===e?new YS:("zone.js"===e?void 0:e)||new Zu({enableLongStackTrace:Zy(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),N=[{provide:Zu,useValue:T}];return T.run(()=>{const q=bo.create({providers:N,parent:this.injector,name:a.moduleType.name}),ie=a.create(q),_e=ie.injector.get(fl,null);if(!_e)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return T.runOutsideAngular(()=>{const Te=T.onError.subscribe({next:Be=>{_e.handleError(Be)}});ie.onDestroy(()=>{$y(this._modules,ie),Te.unsubscribe()})}),function(e,i,a){try{const u=a();return Z_(u)?u.catch(h=>{throw i.runOutsideAngular(()=>e.handleError(h)),h}):u}catch(u){throw i.runOutsideAngular(()=>e.handleError(u)),u}}(_e,T,()=>{const Te=ie.injector.get(Of);return Te.runInitializers(),Te.donePromise.then(()=>(iy(ie.injector.get(zm,Sm)||Sm),this._moduleDoBootstrap(ie),ie))})})}bootstrapModule(a,u=[]){const h=VC({},u);return function(e,i,a){const u=new Ay(a);return Promise.resolve(u)}(0,0,a).then(_=>this.bootstrapModuleFactory(_,h))}_moduleDoBootstrap(a){const u=a.injector.get(Jp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${fe(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(a){return new(a||e)(gi(bo))},e.\u0275prov=bn({token:e,factory:e.\u0275fac}),e})();function VC(e,i){return Array.isArray(i)?i.reduce(VC,e):Object.assign(Object.assign({},e),i)}let Jp=(()=>{class e{constructor(a,u,h,_,b){this._zone=a,this._injector=u,this._exceptionHandler=h,this._componentFactoryResolver=_,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const T=new X.y(q=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{q.next(this._stable),q.complete()})}),N=new X.y(q=>{let ie;this._zone.runOutsideAngular(()=>{ie=this._zone.onStable.subscribe(()=>{Zu.assertNotInAngularZone(),Hy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,q.next(!0))})})});const _e=this._zone.onUnstable.subscribe(()=>{Zu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{q.next(!1)}))});return()=>{ie.unsubscribe(),_e.unsubscribe()}});this.isStable=(0,C.T)(T,N.pipe((0,Ve.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=a instanceof Xb?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(h.componentType);const _=function(e){return e.isBoundToModule}(h)?void 0:this._injector.get(Fh),T=h.create(bo.NULL,[],u||h.selector,_),N=T.location.nativeElement,q=T.injector.get(OC,null),ie=q&&T.injector.get(RC);return q&&ie&&ie.registerApplication(N,q),T.onDestroy(()=>{this.detachView(T.hostView),$y(this.components,T),ie&&ie.unregisterApplication(N)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;$y(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(DC,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(a){return new(a||e)(gi(Zu),gi(bo),gi(fl),gi(Ef),gi(Of))},e.\u0275prov=bn({token:e,factory:e.\u0275fac}),e})();function $y(e,i){const a=e.indexOf(i);a>-1&&e.splice(a,1)}class dA{}class fA{}const pA={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let gA=(()=>{class e{constructor(a,u){this._compiler=a,this._config=u||pA}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[u,h]=a.split("#");return void 0===h&&(h="default"),Q(8255)(u).then(_=>_[h]).then(_=>HC(_,u,h)).then(_=>this._compiler.compileModuleAsync(_))}loadFactory(a){let[u,h]=a.split("#"),_="NgFactory";return void 0===h&&(h="default",_=""),Q(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(b=>b[h+_]).then(b=>HC(b,u,h))}}return e.\u0275fac=function(a){return new(a||e)(gi(Qp),gi(fA,8))},e.\u0275prov=bn({token:e,factory:e.\u0275fac}),e})();function HC(e,i,a){if(!e)throw new Error(`Cannot find '${a}' in '${i}'`);return e}const wA=function(e){return null},TA=NC(null,"core",[{provide:wC,useValue:"unknown"},{provide:LC,deps:[bo]},{provide:RC,deps:[]},{provide:TC,deps:[]}]),OA=[{provide:Jp,useClass:Jp,deps:[Zu,bo,fl,Ef,Of]},{provide:PT,deps:[Zu],useFactory:function(e){let i=[];return e.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(a){i.push(a)}}},{provide:Of,useClass:Of,deps:[[new as,Uy]]},{provide:Qp,useClass:Qp,deps:[]},NS,{provide:Pm,useFactory:function(){return AD},deps:[]},{provide:Fm,useFactory:function(){return ID},deps:[]},{provide:zm,useFactory:function(e){return iy(e=e||"undefined"!=typeof $localize&&$localize.locale||Sm),e},deps:[[new Tu(zm),new as,new $s]]},{provide:SC,useValue:"USD"}];let xA=(()=>{class e{constructor(a){}}return e.\u0275fac=function(a){return new(a||e)(gi(Jp))},e.\u0275mod=Ri({type:e}),e.\u0275inj=Gn({providers:OA}),e})()},9829:(jt,it,Q)=>{"use strict";Q.d(it,{zQ:()=>Ot,Qv:()=>Ke});var P=Q(7716),g=Q(9765),X=Q(5917),C=Q(7574),Ve=Q(4402),Ee=Q(6682),Fe=Q(3190);function fe(wt,Je){return Je?(0,Fe.w)(()=>wt,Je):(0,Fe.w)(()=>wt)}var ve=Q(309),se=Q(8002),Se=Q(2066),me=Q(8049),Ce=Q(9673),Me=Q(5435),Ue=Q(57),Xe=Q(8583);const Ke=new P.OlP("angularfire2.auth.use-emulator"),St=new P.OlP("angularfire2.auth.settings"),Mn=new P.OlP("angularfire2.auth.tenant-id"),kt=new P.OlP("angularfire2.auth.langugage-code"),dt=new P.OlP("angularfire2.auth.use-device-language"),Zt=new P.OlP("angularfire.auth.persistence");let Ot=(()=>{class wt{constructor(ot,st,nt,yt,at,tn,un,Tn,on,Bt){const Ft=new Ue.HU(yt),Jt=(0,Ue.ss)(Ft),Ht=new g.xQ,Pn=(0,X.of)(void 0).pipe((0,ve.QV)(Ft.outsideAngular),(0,Fe.w)(()=>yt.runOutsideAngular(()=>Q.e(336).then(Q.bind(Q,1336)))),(0,se.U)(()=>(0,Ue.on)(ot,yt,st)),(0,se.U)(bn=>yt.runOutsideAngular(()=>{const or=at,Gn=tn;return(0,Ue.sI)(`${bn.name}.auth`,"AngularFireAuth",bn,()=>{const Bn=yt.runOutsideAngular(()=>bn.auth());if(or&&Bn.useEmulator(`http://${or.join(":")}`),un&&(Bn.tenantId=un),Bn.languageCode=Tn,on&&Bn.useDeviceLanguage(),Gn)for(const[Jn,Sn]of Object.entries(Gn))Bn.settings[Jn]=Sn;return Bt&&Bn.setPersistence(Bt),Bn},[or,un,Tn,on,Gn,Bt])})),(0,Se.d)({bufferSize:1,refCount:!1}));if((0,Xe.PM)(nt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,X.of)(null);else{Pn.pipe((0,me.P)()).subscribe();const or=Pn.pipe((0,Fe.w)(Sn=>Sn.getRedirectResult().then(An=>An,()=>null)),Jt,(0,Se.d)({bufferSize:1,refCount:!1})),Gn=Sn=>new C.y(An=>({unsubscribe:yt.runOutsideAngular(()=>Sn(An))})),Bn=Pn.pipe((0,Fe.w)(Sn=>Gn(Sn.onAuthStateChanged.bind(Sn)))),Jn=Pn.pipe((0,Fe.w)(Sn=>Gn(Sn.onIdTokenChanged.bind(Sn))));this.authState=or.pipe(fe(Bn),(0,Ce.R)(Ft.outsideAngular),(0,ve.QV)(Ft.insideAngular)),this.user=or.pipe(fe(Jn),(0,Ce.R)(Ft.outsideAngular),(0,ve.QV)(Ft.insideAngular)),this.idToken=this.user.pipe((0,Fe.w)(Sn=>Sn?(0,Ve.D)(Sn.getIdToken()):(0,X.of)(null))),this.idTokenResult=this.user.pipe((0,Fe.w)(Sn=>Sn?(0,Ve.D)(Sn.getIdTokenResult()):(0,X.of)(null))),this.credential=(0,Ee.T)(or,Ht,this.authState.pipe((0,Me.h)(Sn=>!Sn))).pipe((0,se.U)(Sn=>(null==Sn?void 0:Sn.user)?Sn:null),(0,Ce.R)(Ft.outsideAngular),(0,ve.QV)(Ft.insideAngular))}return(0,Ue.pX)(this,Pn,yt,{spy:{apply:(bn,or,Gn)=>{(bn.startsWith("signIn")||bn.startsWith("createUser"))&&Gn.then(Bn=>Ht.next(Bn))}}})}}return wt.\u0275fac=function(ot){return new(ot||wt)(P.LFG(Ue.Dh),P.LFG(Ue.xv,8),P.LFG(P.Lbi),P.LFG(P.R0b),P.LFG(Ke,8),P.LFG(St,8),P.LFG(Mn,8),P.LFG(kt,8),P.LFG(dt,8),P.LFG(Zt,8))},wt.\u0275prov=P.Yz7({factory:function(){return new wt(P.LFG(Ue.Dh),P.LFG(Ue.xv,8),P.LFG(P.Lbi),P.LFG(P.R0b),P.LFG(Ke,8),P.LFG(St,8),P.LFG(Mn,8),P.LFG(kt,8),P.LFG(dt,8),P.LFG(Zt,8))},token:wt,providedIn:"any"}),wt})()},9351:(jt,it,Q)=>{"use strict";Q.d(it,{Q1:()=>kr,TE:()=>os});var P=Q(7574),g=Q(5917),X=Q(4402),C=Q(4395),Ve=Q(8002),Ee=Q(309),Fe=Q(3190),fe=Q(7716),ve=Q(57),se=Q(9759),Se=Q(4762),me=Q(4685),Ce=Q(6034),Me="firebasestorage.googleapis.com",Ue="storageBucket",Ke=function(K){function Z(ge,x){var W=K.call(this,St(ge),"Firebase Storage: "+x+" ("+St(ge)+")")||this;return W.customData={serverResponse:null},W._baseMessage=W.message,Object.setPrototypeOf(W,Z.prototype),W}return(0,Se.ZT)(Z,K),Z.prototype._codeEquals=function(ge){return St(ge)===this.code},Object.defineProperty(Z.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(ge){this.customData.serverResponse=ge,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),Z}(me.ZR);function St(K){return"storage/"+K}function Mn(){return new Ke("unknown","An unknown error occurred, please check the error payload for server response.")}function Je(){return new Ke("canceled","User canceled the upload/download.")}function yt(){return new Ke("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function un(K){return new Ke("invalid-argument",K)}function Tn(){return new Ke("app-deleted","The Firebase app was deleted.")}function on(K){return new Ke("invalid-root-operation","The operation '"+K+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bt(K,Z){return new Ke("invalid-format","String does not match format '"+K+"': "+Z)}function Ft(K){throw new Ke("internal-error","Internal error: "+K)}var Ht={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Pn=function(Z,ge){this.data=Z,this.contentType=ge||null};function bn(K,Z){switch(K){case Ht.RAW:return new Pn(or(Z));case Ht.BASE64:case Ht.BASE64URL:return new Pn(Bn(K,Z));case Ht.DATA_URL:return new Pn(function(K){var Z=new Jn(K);return Z.base64?Bn(Ht.BASE64,Z.rest):function(K){var Z;try{Z=decodeURIComponent(K)}catch(ge){throw Bt(Ht.DATA_URL,"Malformed data URL.")}return or(Z)}(Z.rest)}(Z),function(K){return new Jn(K).contentType}(Z))}throw Mn()}function or(K){for(var Z=[],ge=0;ge<K.length;ge++){var x=K.charCodeAt(ge);if(x<=127)Z.push(x);else if(x<=2047)Z.push(192|x>>6,128|63&x);else if(55296==(64512&x))if(ge<K.length-1&&56320==(64512&K.charCodeAt(ge+1))){var k=x,ee=K.charCodeAt(++ge);Z.push(240|(x=65536|(1023&k)<<10|1023&ee)>>18,128|x>>12&63,128|x>>6&63,128|63&x)}else Z.push(239,191,189);else 56320==(64512&x)?Z.push(239,191,189):Z.push(224|x>>12,128|x>>6&63,128|63&x)}return new Uint8Array(Z)}function Bn(K,Z){switch(K){case Ht.BASE64:var ge=-1!==Z.indexOf("-"),x=-1!==Z.indexOf("_");if(ge||x)throw Bt(K,"Invalid character '"+(ge?"-":"_")+"' found: is it base64url encoded?");break;case Ht.BASE64URL:var k=-1!==Z.indexOf("+"),ee=-1!==Z.indexOf("/");if(k||ee)throw Bt(K,"Invalid character '"+(k?"+":"/")+"' found: is it base64 encoded?");Z=Z.replace(/-/g,"+").replace(/_/g,"/")}var we;try{we=function(K){return atob(K)}(Z)}catch(G){throw Bt(K,"Invalid character found")}for(var je=new Uint8Array(we.length),rt=0;rt<we.length;rt++)je[rt]=we.charCodeAt(rt);return je}var Jn=function(Z){this.base64=!1,this.contentType=null;var ge=Z.match(/^data:([^,]+)?,/);if(null===ge)throw Bt(Ht.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var x=ge[1]||null;null!=x&&(this.base64=function(K,Z){return K.length>=Z.length&&K.substring(K.length-Z.length)===Z}(x,";base64"),this.contentType=this.base64?x.substring(0,x.length-";base64".length):x),this.rest=Z.substring(Z.indexOf(",")+1)},Wt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function kn(K){switch(K){case"running":case"pausing":case"canceling":return Wt.RUNNING;case"paused":return Wt.PAUSED;case"success":return Wt.SUCCESS;case"canceled":return Wt.CANCELED;case"error":default:return Wt.ERROR}}var Ln=(()=>{return(K=Ln||(Ln={}))[K.NO_ERROR=0]="NO_ERROR",K[K.NETWORK_ERROR=1]="NETWORK_ERROR",K[K.ABORT=2]="ABORT",Ln;var K})(),Qt=function(){function K(){var Z=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ln.NO_ERROR,this.sendPromise_=new Promise(function(ge){Z.xhr_.addEventListener("abort",function(){Z.errorCode_=Ln.ABORT,ge()}),Z.xhr_.addEventListener("error",function(){Z.errorCode_=Ln.NETWORK_ERROR,ge()}),Z.xhr_.addEventListener("load",function(){ge()})})}return K.prototype.send=function(Z,ge,x,W){if(this.sent_)throw Ft("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(ge,Z,!0),void 0!==W)for(var k in W)W.hasOwnProperty(k)&&this.xhr_.setRequestHeader(k,W[k].toString());return void 0!==x?this.xhr_.send(x):this.xhr_.send(),this.sendPromise_},K.prototype.getErrorCode=function(){if(!this.sent_)throw Ft("cannot .getErrorCode() before sending");return this.errorCode_},K.prototype.getStatus=function(){if(!this.sent_)throw Ft("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Z){return-1}},K.prototype.getResponseText=function(){if(!this.sent_)throw Ft("cannot .getResponseText() before sending");return this.xhr_.responseText},K.prototype.abort=function(){this.xhr_.abort()},K.prototype.getResponseHeader=function(Z){return this.xhr_.getResponseHeader(Z)},K.prototype.addUploadProgressListener=function(Z){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",Z)},K.prototype.removeUploadProgressListener=function(Z){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",Z)},K}(),Ur=function(){function K(){}return K.prototype.createConnection=function(){return new Qt},K}(),Zn=function(){function K(Z,ge){this.bucket=Z,this.path_=ge}return Object.defineProperty(K.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),K.prototype.fullServerUrl=function(){var Z=encodeURIComponent;return"/b/"+Z(this.bucket)+"/o/"+Z(this.path)},K.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},K.makeFromBucketSpec=function(Z,ge){var x;try{x=K.makeFromUrl(Z,ge)}catch(W){return new K(Z,"")}if(""===x.path)return x;throw function(K){return new Ke("invalid-default-bucket","Invalid default bucket '"+K+"'.")}(Z)},K.makeFromUrl=function(Z,ge){var x=null,W="([A-Za-z0-9.\\-_]+)",we=new RegExp("^gs://"+W+"(/(.*))?$","i");function rt(po){po.path_=decodeURIComponent(po.path)}for(var H=ge.replace(/[.]/g,"\\."),hr=[{regex:we,indices:{bucket:1,path:3},postModify:function(po){"/"===po.path.charAt(po.path.length-1)&&(po.path_=po.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+H+"/v[A-Za-z0-9_]+/b/"+W+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:rt},{regex:new RegExp("^https?://"+(ge===Me?"(?:storage.googleapis.com|storage.cloud.google.com)":ge)+"/"+W+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:rt}],Gr=0;Gr<hr.length;Gr++){var ii=hr[Gr],Dn=ii.regex.exec(Z);if(Dn){var ys=Dn[ii.indices.path];ys||(ys=""),x=new K(Dn[ii.indices.bucket],ys),ii.postModify(x);break}}if(null==x)throw function(K){return new Ke("invalid-url","Invalid URL '"+K+"'.")}(Z);return x},K}(),Dt=function(){function K(Z){this.promise_=Promise.reject(Z)}return K.prototype.getPromise=function(){return this.promise_},K.prototype.cancel=function(Z){},K}();function Mt(K){return"string"==typeof K||K instanceof String}function He(K){return gt()&&K instanceof Blob}function gt(){return"undefined"!=typeof Blob}function vt(K,Z,ge,x){if(x<Z)throw un("Invalid value for '"+K+"'. Expected "+Z+" or greater.");if(x>ge)throw un("Invalid value for '"+K+"'. Expected "+ge+" or less.")}function Tt(K,Z){var ge=Z.match(/^(\w+):\/\/.+/),W=Z;return null==(null==ge?void 0:ge[1])&&(W="https://"+Z),W+"/v0"+K}function Vt(K){var Z=encodeURIComponent,ge="?";for(var x in K)K.hasOwnProperty(x)&&(ge=ge+(Z(x)+"=")+Z(K[x])+"&");return ge.slice(0,-1)}var hn=function(){function K(Z,ge,x,W,k,ee,we,je,rt,G,H){var V=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=Z,this.method_=ge,this.headers_=x,this.body_=W,this.successCodes_=k.slice(),this.additionalRetryCodes_=ee.slice(),this.callback_=we,this.errorCallback_=je,this.progressCallback_=G,this.timeout_=rt,this.pool_=H,this.promise_=new Promise(function(ue,$e){V.resolve_=ue,V.reject_=$e,V.start_()})}return K.prototype.start_=function(){var Z=this;function x(W,k){var ee=Z.resolve_,we=Z.reject_,je=k.connection;if(k.wasSuccessCode)try{var rt=Z.callback_(je,je.getResponseText());!function(K){return void 0!==K}(rt)?ee():ee(rt)}catch(H){we(H)}else if(null!==je)(G=Mn()).serverResponse=je.getResponseText(),we(Z.errorCallback_?Z.errorCallback_(je,G):G);else if(k.canceled)we(G=Z.appDelete_?Tn():Je());else{var G;we(G=new Ke("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}}this.canceled_?x(0,new gn(!1,null,!0)):this.backoffId_=function(K,Z,ge){var x=1,W=null,k=!1,ee=0;function we(){return 2===ee}var je=!1;function rt(){for(var $e=[],Rt=0;Rt<arguments.length;Rt++)$e[Rt]=arguments[Rt];je||(je=!0,Z.apply(null,$e))}function G($e){W=setTimeout(function(){W=null,K(H,we())},$e)}function H($e){for(var Rt=[],wn=1;wn<arguments.length;wn++)Rt[wn-1]=arguments[wn];if(!je){if($e)return void rt.call.apply(rt,(0,Se.ev)([null,$e],Rt));var Hr;if(we()||k)return void rt.call.apply(rt,(0,Se.ev)([null,$e],Rt));x<64&&(x*=2),1===ee?(ee=2,Hr=0):Hr=1e3*(x+Math.random()),G(Hr)}}var V=!1;function ue($e){V||(V=!0,!je&&(null!==W?($e||(ee=2),clearTimeout(W),G(0)):$e||(ee=1)))}return G(0),setTimeout(function(){k=!0,ue(!0)},ge),ue}(function(W,k){if(k)W(!1,new gn(!1,null,!0));else{var ee=Z.pool_.createConnection();Z.pendingConnection_=ee,null!==Z.progressCallback_&&ee.addUploadProgressListener(we),ee.send(Z.url_,Z.method_,Z.body_,Z.headers_).then(function(){null!==Z.progressCallback_&&ee.removeUploadProgressListener(we),Z.pendingConnection_=null;var je=ee.getErrorCode()===Ln.NO_ERROR,rt=ee.getStatus();if(je&&!Z.isRetryStatusCode_(rt)){var H=-1!==Z.successCodes_.indexOf(rt);W(!0,new gn(H,ee))}else{var G=ee.getErrorCode()===Ln.ABORT;W(!1,new gn(!1,null,G))}})}function we(je){null!==Z.progressCallback_&&Z.progressCallback_(je.loaded,je.lengthComputable?je.total:-1)}},x,this.timeout_)},K.prototype.getPromise=function(){return this.promise_},K.prototype.cancel=function(Z){this.canceled_=!0,this.appDelete_=Z||!1,null!==this.backoffId_&&function(K){K(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},K.prototype.isRetryStatusCode_=function(Z){var ge=Z>=500&&Z<600,W=-1!==[408,429].indexOf(Z),k=-1!==this.additionalRetryCodes_.indexOf(Z);return ge||W||k},K}(),gn=function(Z,ge,x){this.wasSuccessCode=Z,this.connection=ge,this.canceled=!!x};function tt(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function zt(){for(var K=[],Z=0;Z<arguments.length;Z++)K[Z]=arguments[Z];var ge=tt();if(void 0!==ge){for(var x=new ge,W=0;W<K.length;W++)x.append(K[W]);return x.getBlob()}if(gt())return new Blob(K);throw new Ke("unsupported-environment","This browser doesn't seem to support creating Blobs")}var nr=function(){function K(Z,ge){var x=0,W="";He(Z)?(this.data_=Z,x=Z.size,W=Z.type):Z instanceof ArrayBuffer?(ge?this.data_=new Uint8Array(Z):(this.data_=new Uint8Array(Z.byteLength),this.data_.set(new Uint8Array(Z))),x=this.data_.length):Z instanceof Uint8Array&&(ge?this.data_=Z:(this.data_=new Uint8Array(Z.length),this.data_.set(Z)),x=Z.length),this.size_=x,this.type_=W}return K.prototype.size=function(){return this.size_},K.prototype.type=function(){return this.type_},K.prototype.slice=function(Z,ge){if(He(this.data_)){var W=function(K,Z,ge){return K.webkitSlice?K.webkitSlice(Z,ge):K.mozSlice?K.mozSlice(Z,ge):K.slice?K.slice(Z,ge):null}(this.data_,Z,ge);return null===W?null:new K(W)}return new K(new Uint8Array(this.data_.buffer,Z,ge-Z),!0)},K.getBlob=function(){for(var Z=[],ge=0;ge<arguments.length;ge++)Z[ge]=arguments[ge];if(gt()){var x=Z.map(function(je){return je instanceof K?je.data_:je});return new K(zt.apply(null,x))}var W=Z.map(function(je){return Mt(je)?bn(Ht.RAW,je).data:je.data_}),k=0;W.forEach(function(je){k+=je.byteLength});var ee=new Uint8Array(k),we=0;return W.forEach(function(je){for(var rt=0;rt<je.length;rt++)ee[we++]=je[rt]}),new K(ee,!0)},K.prototype.uploadData=function(){return this.data_},K}();function Vn(K){var Z;try{Z=JSON.parse(K)}catch(ge){return null}return function(K){return"object"==typeof K&&!Array.isArray(K)}(Z)?Z:null}function Br(K){var Z=K.lastIndexOf("/",K.length-2);return-1===Z?K:K.slice(Z+1)}function Yr(K,Z){return Z}var Er=function(Z,ge,x,W){this.server=Z,this.local=ge||Z,this.writable=!!x,this.xform=W||Yr},Ri=null;function ki(){if(Ri)return Ri;var K=[];K.push(new Er("bucket")),K.push(new Er("generation")),K.push(new Er("metageneration")),K.push(new Er("name","fullPath",!0));var ge=new Er("name");ge.xform=function(k,ee){return function(K){return!Mt(K)||K.length<2?K:Br(K)}(ee)},K.push(ge);var W=new Er("size");return W.xform=function(k,ee){return void 0!==ee?Number(ee):ee},K.push(W),K.push(new Er("timeCreated")),K.push(new Er("updated")),K.push(new Er("md5Hash",null,!0)),K.push(new Er("cacheControl",null,!0)),K.push(new Er("contentDisposition",null,!0)),K.push(new Er("contentEncoding",null,!0)),K.push(new Er("contentLanguage",null,!0)),K.push(new Er("contentType",null,!0)),K.push(new Er("metadata","customMetadata",!0)),Ri=K}function Fr(K,Z,ge){var x=Vn(Z);return null===x?null:function(K,Z,ge){for(var x={type:"file"},W=ge.length,k=0;k<W;k++){var ee=ge[k];x[ee.local]=ee.xform(x,Z[ee.server])}return function(K,Z){Object.defineProperty(K,"ref",{get:function(){var k=new Zn(K.bucket,K.fullPath);return Z._makeStorageReference(k)}})}(x,K),x}(K,x,ge)}function yn(K,Z){for(var ge={},x=Z.length,W=0;W<x;W++){var k=Z[W];k.writable&&(ge[k.server]=K[k.local])}return JSON.stringify(ge)}var Lr="prefixes";var dn=function(Z,ge,x,W){this.url=Z,this.method=ge,this.handler=x,this.timeout=W,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function In(K){if(!K)throw Mn()}function Zr(K,Z){return function(x,W){var k=Fr(K,W,Z);return In(null!==k),k}}function Xr(K){return function(ge,x){var W;return(W=401===ge.getStatus()?ge.getResponseText().includes("Firebase App Check token is invalid")?new Ke("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Ke("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===ge.getStatus()?function(K){return new Ke("quota-exceeded","Quota for bucket '"+K+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(K.bucket):403===ge.getStatus()?function(K){return new Ke("unauthorized","User does not have permission to access '"+K+"'.")}(K.path):x).serverResponse=x.serverResponse,W}}function vr(K){var Z=Xr(K);return function(x,W){var k=Z(x,W);return 404===x.getStatus()&&(k=function(K){return new Ke("object-not-found","Object '"+K+"' does not exist.")}(K.path)),k.serverResponse=W.serverResponse,k}}function Co(K,Z,ge){var W=Tt(Z.fullServerUrl(),K.host),ee=K.maxOperationRetryTime,we=new dn(W,"GET",Zr(K,ge),ee);return we.errorHandler=vr(Z),we}function De(K,Z,ge,x,W){var k={};k.prefix=Z.isRoot?"":Z.path+"/",ge&&ge.length>0&&(k.delimiter=ge),x&&(k.pageToken=x),W&&(k.maxResults=W);var we=Tt(Z.bucketOnlyServerUrl(),K.host),rt=K.maxOperationRetryTime,G=new dn(we,"GET",function(K,Z){return function(x,W){var k=function(K,Z,ge){var x=Vn(ge);return null===x?null:function(K,Z,ge){var x={prefixes:[],items:[],nextPageToken:ge.nextPageToken};if(ge[Lr])for(var W=0,k=ge[Lr];W<k.length;W++){var we=k[W].replace(/\/$/,""),je=K._makeStorageReference(new Zn(Z,we));x.prefixes.push(je)}if(ge.items)for(var rt=0,G=ge.items;rt<G.length;rt++)je=K._makeStorageReference(new Zn(Z,G[rt].name)),x.items.push(je);return x}(K,Z,x)}(K,Z,W);return In(null!==k),k}}(K,Z.bucket),rt);return G.urlParams=k,G.errorHandler=Xr(Z),G}function ke(K,Z,ge){var x=Object.assign({},ge);return x.fullPath=K.path,x.size=Z.size(),x.contentType||(x.contentType=function(K,Z){return Z&&Z.type()||"application/octet-stream"}(0,Z)),x}var Yt=function(Z,ge,x,W){this.current=Z,this.total=ge,this.finalized=!!x,this.metadata=W||null};function En(K,Z){var ge=null;try{ge=K.getResponseHeader("X-Goog-Upload-Status")}catch(W){In(!1)}return In(!!ge&&-1!==(Z||["active"]).indexOf(ge)),ge}var pr=function(Z,ge,x){if(function(K){return"function"==typeof K}(Z)||null!=ge||null!=x)this.next=Z,this.error=ge,this.complete=x;else{var k=Z;this.next=k.next,this.error=k.error,this.complete=k.complete}};function Li(K){return function(){for(var Z=[],ge=0;ge<arguments.length;ge++)Z[ge]=arguments[ge];Promise.resolve().then(function(){return K.apply(void 0,Z)})}}var uo=function(){function K(Z,ge,x){var W=this;void 0===x&&(x=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=Z,this._blob=ge,this._metadata=x,this._mappings=ki(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(k){W._request=void 0,W._chunkMultiplier=1,k._codeEquals("canceled")?(W._needToFetchStatus=!0,W.completeTransitions_()):(W._error=k,W._transition("error"))},this._metadataErrorHandler=function(k){W._request=void 0,k._codeEquals("canceled")?W.completeTransitions_():(W._error=k,W._transition("error"))},this._promise=new Promise(function(k,ee){W._resolve=k,W._reject=ee,W._start()}),this._promise.then(null,function(){})}return K.prototype._makeProgressCallback=function(){var Z=this,ge=this._transferred;return function(x){return Z._updateProgress(ge+x)}},K.prototype._shouldDoResumable=function(Z){return Z.size()>262144},K.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},K.prototype._resolveToken=function(Z){var ge=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(x){var W=x[0],k=x[1];switch(ge._state){case"running":Z(W,k);break;case"canceling":ge._transition("canceled");break;case"pausing":ge._transition("paused")}})},K.prototype._createResumable=function(){var Z=this;this._resolveToken(function(ge,x){var W=function(K,Z,ge,x,W){var k=Z.bucketOnlyServerUrl(),ee=ke(Z,x,W),we={name:ee.fullPath},je=Tt(k,K.host),G={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+x.size(),"X-Goog-Upload-Header-Content-Type":ee.contentType,"Content-Type":"application/json; charset=utf-8"},H=yn(ee,ge),$e=new dn(je,"POST",function(Rt){var wn;En(Rt);try{wn=Rt.getResponseHeader("X-Goog-Upload-URL")}catch(cr){In(!1)}return In(Mt(wn)),wn},K.maxUploadRetryTime);return $e.urlParams=we,$e.headers=G,$e.body=H,$e.errorHandler=Xr(Z),$e}(Z._ref.storage,Z._ref._location,Z._mappings,Z._blob,Z._metadata),k=Z._ref.storage._makeRequest(W,ge,x);Z._request=k,k.getPromise().then(function(ee){Z._request=void 0,Z._uploadUrl=ee,Z._needToFetchStatus=!1,Z.completeTransitions_()},Z._errorHandler)})},K.prototype._fetchStatus=function(){var Z=this,ge=this._uploadUrl;this._resolveToken(function(x,W){var k=function(K,Z,ge,x){var je=new dn(ge,"POST",function(rt){var G=En(rt,["active","final"]),H=null;try{H=rt.getResponseHeader("X-Goog-Upload-Size-Received")}catch(ue){In(!1)}H||In(!1);var V=Number(H);return In(!isNaN(V)),new Yt(V,x.size(),"final"===G)},K.maxUploadRetryTime);return je.headers={"X-Goog-Upload-Command":"query"},je.errorHandler=Xr(Z),je}(Z._ref.storage,Z._ref._location,ge,Z._blob),ee=Z._ref.storage._makeRequest(k,x,W);Z._request=ee,ee.getPromise().then(function(we){we=we,Z._request=void 0,Z._updateProgress(we.current),Z._needToFetchStatus=!1,we.finalized&&(Z._needToFetchMetadata=!0),Z.completeTransitions_()},Z._errorHandler)})},K.prototype._continueUpload=function(){var Z=this,ge=262144*this._chunkMultiplier,x=new Yt(this._transferred,this._blob.size()),W=this._uploadUrl;this._resolveToken(function(k,ee){var we;try{we=function(K,Z,ge,x,W,k,ee,we){var je=new Yt(0,0);if(ee?(je.current=ee.current,je.total=ee.total):(je.current=0,je.total=x.size()),x.size()!==je.total)throw new Ke("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var rt=je.total-je.current,G=rt;W>0&&(G=Math.min(G,W));var H=je.current,$e={"X-Goog-Upload-Command":G===rt?"upload, finalize":"upload","X-Goog-Upload-Offset":""+je.current},Rt=x.slice(H,H+G);if(null===Rt)throw yt();var hr=new dn(ge,"POST",function(Gr,ii){var po,Dn=En(Gr,["active","final"]),Qi=je.current+G,ys=x.size();return po="final"===Dn?Zr(Z,k)(Gr,ii):null,new Yt(Qi,ys,"final"===Dn,po)},Z.maxUploadRetryTime);return hr.headers=$e,hr.body=Rt.uploadData(),hr.progressCallback=we||null,hr.errorHandler=Xr(K),hr}(Z._ref._location,Z._ref.storage,W,Z._blob,ge,Z._mappings,x,Z._makeProgressCallback())}catch(rt){return Z._error=rt,void Z._transition("error")}var je=Z._ref.storage._makeRequest(we,k,ee);Z._request=je,je.getPromise().then(function(rt){Z._increaseMultiplier(),Z._request=void 0,Z._updateProgress(rt.current),rt.finalized?(Z._metadata=rt.metadata,Z._transition("success")):Z.completeTransitions_()},Z._errorHandler)})},K.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},K.prototype._fetchMetadata=function(){var Z=this;this._resolveToken(function(ge,x){var W=Co(Z._ref.storage,Z._ref._location,Z._mappings),k=Z._ref.storage._makeRequest(W,ge,x);Z._request=k,k.getPromise().then(function(ee){Z._request=void 0,Z._metadata=ee,Z._transition("success")},Z._metadataErrorHandler)})},K.prototype._oneShotUpload=function(){var Z=this;this._resolveToken(function(ge,x){var W=function(K,Z,ge,x,W){var k=Z.bucketOnlyServerUrl(),ee={"X-Goog-Upload-Protocol":"multipart"},je=function(){for(var hr="",Gr=0;Gr<2;Gr++)hr+=Math.random().toString().slice(2);return hr}();ee["Content-Type"]="multipart/related; boundary="+je;var rt=ke(Z,x,W),G=yn(rt,ge),ue=nr.getBlob("--"+je+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+G+"\r\n--"+je+"\r\nContent-Type: "+rt.contentType+"\r\n\r\n",x,"\r\n--"+je+"--");if(null===ue)throw yt();var $e={name:rt.fullPath},Rt=Tt(k,K.host),cr=K.maxUploadRetryTime,Hr=new dn(Rt,"POST",Zr(K,ge),cr);return Hr.urlParams=$e,Hr.headers=ee,Hr.body=ue.uploadData(),Hr.errorHandler=Xr(Z),Hr}(Z._ref.storage,Z._ref._location,Z._mappings,Z._blob,Z._metadata),k=Z._ref.storage._makeRequest(W,ge,x);Z._request=k,k.getPromise().then(function(ee){Z._request=void 0,Z._metadata=ee,Z._updateProgress(Z._blob.size()),Z._transition("success")},Z._errorHandler)})},K.prototype._updateProgress=function(Z){var ge=this._transferred;this._transferred=Z,this._transferred!==ge&&this._notifyObservers()},K.prototype._transition=function(Z){if(this._state!==Z)switch(Z){case"canceling":case"pausing":this._state=Z,void 0!==this._request&&this._request.cancel();break;case"running":var ge="paused"===this._state;this._state=Z,ge&&(this._notifyObservers(),this._start());break;case"paused":this._state=Z,this._notifyObservers();break;case"canceled":this._error=Je(),this._state=Z,this._notifyObservers();break;case"error":case"success":this._state=Z,this._notifyObservers()}},K.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(K.prototype,"snapshot",{get:function(){var Z=kn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:Z,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),K.prototype.on=function(Z,ge,x,W){var k=this,ee=new pr(ge,x,W);return this._addObserver(ee),function(){k._removeObserver(ee)}},K.prototype.then=function(Z,ge){return this._promise.then(Z,ge)},K.prototype.catch=function(Z){return this.then(null,Z)},K.prototype._addObserver=function(Z){this._observers.push(Z),this._notifyObserver(Z)},K.prototype._removeObserver=function(Z){var ge=this._observers.indexOf(Z);-1!==ge&&this._observers.splice(ge,1)},K.prototype._notifyObservers=function(){var Z=this;this._finishPromise(),this._observers.slice().forEach(function(x){Z._notifyObserver(x)})},K.prototype._finishPromise=function(){if(void 0!==this._resolve){var Z=!0;switch(kn(this._state)){case Wt.SUCCESS:Li(this._resolve.bind(null,this.snapshot))();break;case Wt.CANCELED:case Wt.ERROR:Li(this._reject.bind(null,this._error))();break;default:Z=!1}Z&&(this._resolve=void 0,this._reject=void 0)}},K.prototype._notifyObserver=function(Z){switch(kn(this._state)){case Wt.RUNNING:case Wt.PAUSED:Z.next&&Li(Z.next.bind(Z,this.snapshot))();break;case Wt.SUCCESS:Z.complete&&Li(Z.complete.bind(Z))();break;case Wt.CANCELED:case Wt.ERROR:Z.error&&Li(Z.error.bind(Z,this._error))();break;default:Z.error&&Li(Z.error.bind(Z,this._error))()}},K.prototype.resume=function(){var Z="paused"===this._state||"pausing"===this._state;return Z&&this._transition("running"),Z},K.prototype.pause=function(){var Z="running"===this._state;return Z&&this._transition("pausing"),Z},K.prototype.cancel=function(){var Z="running"===this._state||"pausing"===this._state;return Z&&this._transition("canceling"),Z},K}(),$r=function(){function K(Z,ge){this._service=Z,this._location=ge instanceof Zn?ge:Zn.makeFromUrl(ge,Z.host)}return K.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},K.prototype._newRef=function(Z,ge){return new K(Z,ge)},Object.defineProperty(K.prototype,"root",{get:function(){var Z=new Zn(this._location.bucket,"");return this._newRef(this._service,Z)},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"name",{get:function(){return Br(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"parent",{get:function(){var Z=function(K){if(0===K.length)return null;var Z=K.lastIndexOf("/");return-1===Z?"":K.slice(0,Z)}(this._location.path);if(null===Z)return null;var ge=new Zn(this._location.bucket,Z);return new K(this._service,ge)},enumerable:!1,configurable:!0}),K.prototype._throwIfRoot=function(Z){if(""===this._location.path)throw on(Z)},K}();function sr(K){var Z={prefixes:[],items:[]};return jn(K,Z).then(function(){return Z})}function jn(K,Z,ge){return(0,Se.mG)(this,void 0,void 0,function(){var W,k,ee;return(0,Se.Jh)(this,function(we){switch(we.label){case 0:return[4,Kr(K,{pageToken:ge})];case 1:return W=we.sent(),(k=Z.prefixes).push.apply(k,W.prefixes),(ee=Z.items).push.apply(ee,W.items),null==W.nextPageToken?[3,3]:[4,jn(K,Z,W.nextPageToken)];case 2:we.sent(),we.label=3;case 3:return[2]}})})}function Kr(K,Z){return(0,Se.mG)(this,void 0,void 0,function(){var ge,x;return(0,Se.Jh)(this,function(W){switch(W.label){case 0:return null!=Z&&"number"==typeof Z.maxResults&&vt("options.maxResults",1,1e3,Z.maxResults),x=De(K.storage,K._location,"/",(ge=Z||{}).pageToken,ge.maxResults),[4,K.storage.makeRequestWithTokens(x)];case 1:return[2,W.sent().getPromise()]}})})}function hi(K){return(0,Se.mG)(this,void 0,void 0,function(){var Z;return(0,Se.Jh)(this,function(ge){switch(ge.label){case 0:return K._throwIfRoot("getDownloadURL"),Z=function(K,Z,ge){var W=Tt(Z.fullServerUrl(),K.host),ee=K.maxOperationRetryTime,we=new dn(W,"GET",function(K,Z){return function(x,W){var k=Fr(K,W,Z);return In(null!==k),function(K,Z,ge){var x=Vn(Z);if(null===x||!Mt(x.downloadTokens))return null;var W=x.downloadTokens;if(0===W.length)return null;var k=encodeURIComponent;return W.split(",").map(function(je){var G=K.fullPath;return Tt("/b/"+k(K.bucket)+"/o/"+k(G),ge)+Vt({alt:"media",token:je})})[0]}(k,W,K.host)}}(K,ge),ee);return we.errorHandler=vr(Z),we}(K.storage,K._location,ki()),[4,K.storage.makeRequestWithTokens(Z)];case 1:return[2,ge.sent().getPromise().then(function(x){if(null===x)throw new Ke("no-download-url","The given file does not have any download URLs.");return x})]}})})}function Ki(K,Z){var ge=function(K,Z){var ge=Z.split("/").filter(function(x){return x.length>0}).join("/");return 0===K.length?ge:K+"/"+ge}(K._location.path,Z),x=new Zn(K._location.bucket,ge);return new $r(K.storage,x)}function _i(K){return/^[A-Za-z]+:\/\//.test(K)}function jr(K,Z){if(K instanceof No){var ge=K;if(null==ge._bucket)throw new Ke("no-default-bucket","No default bucket found. Did you set the '"+Ue+"' property when initializing the app?");var x=new $r(ge,ge._bucket);return null!=Z?jr(x,Z):x}return void 0!==Z?Ki(K,Z):K}function _s(K,Z){if(Z&&_i(Z)){if(K instanceof No)return function(K,Z){return new $r(K,Z)}(K,Z);throw un("To use ref(service, url), the first argument must be a Storage instance.")}return jr(K,Z)}function Zi(K,Z){var ge=null==Z?void 0:Z[Ue];return null==ge?null:Zn.makeFromBucketSpec(ge,K)}var No=function(){function K(Z,ge,x,W,k,ee){this.app=Z,this._authProvider=ge,this._appCheckProvider=x,this._pool=W,this._url=k,this._firebaseVersion=ee,this._bucket=null,this._host=Me,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=k?Zn.makeFromBucketSpec(k,this._host):Zi(this._host,this.app.options)}return Object.defineProperty(K.prototype,"host",{get:function(){return this._host},set:function(Z){this._host=Z,this._bucket=null!=this._url?Zn.makeFromBucketSpec(this._url,Z):Zi(Z,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(Z){vt("time",0,Number.POSITIVE_INFINITY,Z),this._maxUploadRetryTime=Z},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(Z){vt("time",0,Number.POSITIVE_INFINITY,Z),this._maxOperationRetryTime=Z},enumerable:!1,configurable:!0}),K.prototype._getAuthToken=function(){return(0,Se.mG)(this,void 0,void 0,function(){var Z,ge;return(0,Se.Jh)(this,function(x){switch(x.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(Z=this._authProvider.getImmediate({optional:!0}))?[4,Z.getToken()]:[3,2];case 1:if(null!==(ge=x.sent()))return[2,ge.accessToken];x.label=2;case 2:return[2,null]}})})},K.prototype._getAppCheckToken=function(){return(0,Se.mG)(this,void 0,void 0,function(){var Z;return(0,Se.Jh)(this,function(x){switch(x.label){case 0:return(Z=this._appCheckProvider.getImmediate({optional:!0}))?[4,Z.getToken()]:[3,2];case 1:return[2,x.sent().token];case 2:return[2,null]}})})},K.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(Z){return Z.cancel()}),this._requests.clear()),Promise.resolve()},K.prototype._makeStorageReference=function(Z){return new $r(this,Z)},K.prototype._makeRequest=function(Z,ge,x){var W=this;if(this._deleted)return new Dt(Tn());var k=function(K,Z,ge,x,W,k){var ee=Vt(K.urlParams),we=K.url+ee,je=Object.assign({},K.headers);return function(K,Z){Z&&(K["X-Firebase-GMPID"]=Z)}(je,Z),function(K,Z){null!==Z&&Z.length>0&&(K.Authorization="Firebase "+Z)}(je,ge),function(K,Z){K["X-Firebase-Storage-Version"]="webjs/"+(null!=Z?Z:"AppManager")}(je,k),function(K,Z){null!==Z&&(K["X-Firebase-AppCheck"]=Z)}(je,x),new hn(we,K.method,je,K.body,K.successCodes,K.additionalRetryCodes,K.handler,K.errorHandler,K.timeout,K.progressCallback,W)}(Z,this._appId,ge,x,this._pool,this._firebaseVersion);return this._requests.add(k),k.getPromise().then(function(){return W._requests.delete(k)},function(){return W._requests.delete(k)}),k},K.prototype.makeRequestWithTokens=function(Z){return(0,Se.mG)(this,void 0,void 0,function(){var ge;return(0,Se.Jh)(this,function(k){switch(k.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return ge=k.sent(),[2,this._makeRequest(Z,ge[0],ge[1])]}})})},K}();function eo(K,Z){return _s(K=(0,me.m9)(K),Z)}var K,Z,Pi=function(){function K(Z,ge,x){this._delegate=Z,this.task=ge,this.ref=x}return Object.defineProperty(K.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),K}(),co=function(){function K(Z,ge){this._delegate=Z,this._ref=ge,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(K.prototype,"snapshot",{get:function(){return new Pi(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),K.prototype.then=function(Z,ge){var x=this;return this._delegate.then(function(W){if(Z)return Z(new Pi(W,x,x._ref))},ge)},K.prototype.on=function(Z,ge,x,W){var k=this,ee=void 0;return ge&&(ee="function"==typeof ge?function(we){return ge(new Pi(we,k,k._ref))}:{next:ge.next?function(we){return ge.next(new Pi(we,k,k._ref))}:void 0,complete:ge.complete||void 0,error:ge.error||void 0}),this._delegate.on(Z,ee,x||void 0,W||void 0)},K}(),fi=function(){function K(Z,ge){this._delegate=Z,this._service=ge}return Object.defineProperty(K.prototype,"prefixes",{get:function(){var Z=this;return this._delegate.prefixes.map(function(ge){return new ko(ge,Z._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"items",{get:function(){var Z=this;return this._delegate.items.map(function(ge){return new ko(ge,Z._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),K}(),ko=function(){function K(Z,ge){this._delegate=Z,this.storage=ge}return Object.defineProperty(K.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),K.prototype.toString=function(){return this._delegate.toString()},K.prototype.child=function(Z){return new K(function(K,Z){return Ki(K,Z)}(this._delegate,Z),this.storage)},Object.defineProperty(K.prototype,"root",{get:function(){return new K(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"parent",{get:function(){var Z=this._delegate.parent;return null==Z?null:new K(Z,this.storage)},enumerable:!1,configurable:!0}),K.prototype.put=function(Z,ge){return this._throwIfRoot("put"),new co(function(K,Z,ge){return function(K,Z,ge){return K._throwIfRoot("uploadBytesResumable"),new uo(K,new nr(Z),ge)}(K=(0,me.m9)(K),Z,ge)}(this._delegate,Z,ge),this)},K.prototype.putString=function(Z,ge,x){void 0===ge&&(ge=Ht.RAW),this._throwIfRoot("putString");var W=bn(ge,Z),k=(0,Se.pi)({},x);return null==k.contentType&&null!=W.contentType&&(k.contentType=W.contentType),new co(new uo(this._delegate,new nr(W.data,!0),k),this)},K.prototype.listAll=function(){var Z=this;return function(K){return sr(K=(0,me.m9)(K))}(this._delegate).then(function(ge){return new fi(ge,Z.storage)})},K.prototype.list=function(Z){var ge=this;return function(K,Z){return Kr(K=(0,me.m9)(K),Z)}(this._delegate,Z||void 0).then(function(x){return new fi(x,ge.storage)})},K.prototype.getMetadata=function(){return function(K){return function(K){return(0,Se.mG)(this,void 0,void 0,function(){var Z;return(0,Se.Jh)(this,function(ge){switch(ge.label){case 0:return K._throwIfRoot("getMetadata"),Z=Co(K.storage,K._location,ki()),[4,K.storage.makeRequestWithTokens(Z)];case 1:return[2,ge.sent().getPromise()]}})})}(K=(0,me.m9)(K))}(this._delegate)},K.prototype.updateMetadata=function(Z){return function(K,Z){return function(K,Z){return(0,Se.mG)(this,void 0,void 0,function(){var ge;return(0,Se.Jh)(this,function(x){switch(x.label){case 0:return K._throwIfRoot("updateMetadata"),ge=function(K,Z,ge,x){var k=Tt(Z.fullServerUrl(),K.host),we=yn(ge,x),rt=K.maxOperationRetryTime,G=new dn(k,"PATCH",Zr(K,x),rt);return G.headers={"Content-Type":"application/json; charset=utf-8"},G.body=we,G.errorHandler=vr(Z),G}(K.storage,K._location,Z,ki()),[4,K.storage.makeRequestWithTokens(ge)];case 1:return[2,x.sent().getPromise()]}})})}(K=(0,me.m9)(K),Z)}(this._delegate,Z)},K.prototype.getDownloadURL=function(){return function(K){return hi(K=(0,me.m9)(K))}(this._delegate)},K.prototype.delete=function(){return this._throwIfRoot("delete"),function(K){return function(K){return(0,Se.mG)(this,void 0,void 0,function(){var Z;return(0,Se.Jh)(this,function(ge){switch(ge.label){case 0:return K._throwIfRoot("deleteObject"),Z=function(K,Z){var x=Tt(Z.fullServerUrl(),K.host),we=new dn(x,"DELETE",function(je,rt){},K.maxOperationRetryTime);return we.successCodes=[200,204],we.errorHandler=vr(Z),we}(K.storage,K._location),[4,K.storage.makeRequestWithTokens(Z)];case 1:return[2,ge.sent().getPromise()]}})})}(K=(0,me.m9)(K))}(this._delegate)},K.prototype._throwIfRoot=function(Z){if(""===this._delegate._location.path)throw on(Z)},K}(),bi=function(){function K(Z,ge){this.app=Z,this._delegate=ge}return Object.defineProperty(K.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),K.prototype.ref=function(Z){if(_i(Z))throw un("ref() expected a child path but got a URL, use refFromURL instead.");return new ko(eo(this._delegate,Z),this)},K.prototype.refFromURL=function(Z){if(!_i(Z))throw un("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Zn.makeFromUrl(Z,this._delegate.host)}catch(ge){throw un("refFromUrl() expected a valid full URL but got an invalid one.")}return new ko(eo(this._delegate,Z),this)},K.prototype.setMaxUploadRetryTime=function(Z){this._delegate.maxUploadRetryTime=Z},K.prototype.setMaxOperationRetryTime=function(Z){this._delegate.maxOperationRetryTime=Z},K.prototype.useEmulator=function(Z,ge,x){void 0===x&&(x={}),function(K,Z,ge,x){void 0===x&&(x={}),function(K,Z,ge,x){void 0===x&&(x={}),K.host="http://"+Z+":"+ge;var W=x.mockUserToken;W&&(K._overrideAuthToken="string"==typeof W?W:(0,me.Sg)(W,K.app.options.projectId))}(K,Z,ge,x)}(this._delegate,Z,ge,x)},K}();function ei(K){const Z=function(K){return new P.y(Z=>{const ge=ee=>Z.next(ee);ge(K.snapshot);const k=K.on("state_changed",ge);return K.then(ee=>{ge(ee),Z.complete()},ee=>{ge(K.snapshot),(ee=>{Z.error(ee)})(ee)}),function(){k()}}).pipe((0,C.b)(0))}(K);return{task:K,then:K.then.bind(K),catch:K.catch.bind(K),pause:K.pause.bind(K),cancel:K.cancel.bind(K),resume:K.resume.bind(K),snapshotChanges:()=>Z,percentageChanges:()=>Z.pipe((0,Ve.U)(ge=>ge.bytesTransferred/ge.totalBytes*100))}}function ho(K,Z,ge){return{getDownloadURL:()=>(0,g.of)(void 0).pipe((0,Ee.QV)(Z.outsideAngular),(0,Fe.w)(()=>K.getDownloadURL()),ge),getMetadata:()=>(0,g.of)(void 0).pipe((0,Ee.QV)(Z.outsideAngular),(0,Fe.w)(()=>K.getMetadata()),ge),delete:()=>(0,X.D)(K.delete()),child:x=>ho(K.child(x),Z,ge),updateMetadata:x=>(0,X.D)(K.updateMetadata(x)),put:(x,W)=>ei(K.put(x,W)),putString:(x,W,k)=>ei(K.putString(x,W,k)),listAll:()=>(0,X.D)(K.listAll())}}Z={TaskState:Wt,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:Ht,Storage:No,Reference:ko},(K=se.Z).INTERNAL.registerComponent(new Ce.wA("storage",function(K,Z){var ge=Z.instanceIdentifier,x=K.getProvider("app").getImmediate(),W=K.getProvider("auth-internal"),k=K.getProvider("app-check-internal");return new bi(x,new No(x,W,k,new Ur,ge,se.Z.SDK_VERSION))},"PUBLIC").setServiceProps(Z).setMultipleInstances(!0)),K.registerVersion("@firebase/storage","0.7.0"),Q(8583);const Lo=new fe.OlP("angularfire2.storageBucket"),Ci=new fe.OlP("angularfire2.storage.maxUploadRetryTime"),Vo=new fe.OlP("angularfire2.storage.maxOperationRetryTime");let kr=(()=>{class K{constructor(ge,x,W,k,ee,we,je){this.schedulers=new ve.HU(ee),this.keepUnstableUntilFirst=(0,ve.ss)(this.schedulers);const rt=(0,ve.on)(ge,ee,x);this.storage=(0,ve.sI)(`${rt.name}.storage.${W}`,"AngularFireStorage",rt,()=>{const G=ee.runOutsideAngular(()=>rt.storage(W||void 0));return we&&G.setMaxUploadRetryTime(we),je&&G.setMaxOperationRetryTime(je),G},[we,je])}ref(ge){return ho(this.storage.ref(ge),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(ge){return ho(this.storage.refFromURL(ge),this.schedulers,this.keepUnstableUntilFirst)}upload(ge,x,W){return ho(this.storage.ref(ge),this.schedulers,this.keepUnstableUntilFirst).put(x,W)}}return K.\u0275fac=function(ge){return new(ge||K)(fe.LFG(ve.Dh),fe.LFG(ve.xv,8),fe.LFG(Lo,8),fe.LFG(fe.Lbi),fe.LFG(fe.R0b),fe.LFG(Ci,8),fe.LFG(Vo,8))},K.\u0275prov=fe.Yz7({factory:function(){return new K(fe.LFG(ve.Dh),fe.LFG(ve.xv,8),fe.LFG(Lo,8),fe.LFG(fe.Lbi),fe.LFG(fe.R0b),fe.LFG(Ci,8),fe.LFG(Vo,8))},token:K,providedIn:"any"}),K})(),fo=(()=>{class K{}return K.\u0275fac=function(ge){return new(ge||K)},K.\u0275mod=fe.oAB({type:K}),K.\u0275inj=fe.cJS({}),K})(),os=(()=>{class K{}return K.\u0275fac=function(ge){return new(ge||K)},K.\u0275mod=fe.oAB({type:K}),K.\u0275inj=fe.cJS({providers:[kr],imports:[fo]}),K})()},57:(jt,it,Q)=>{"use strict";Q.d(it,{hO:()=>wt,xv:()=>re,Dh:()=>Xe,HU:()=>Se,GT:()=>Ue,sI:()=>Ot,on:()=>Mn,ss:()=>me,pX:()=>Me,yq:()=>kt});var P=Q(7771),g=Q(3637),X=Q(3342),C=Q(9673),Ve=Q(309),Ee=Q(7716),Fe=Q(2329);function fe(){}jt=Q.hmd(jt);class ve{constructor(ot,st=P.N){this.zone=ot,this.delegate=st}now(){return this.delegate.now()}schedule(ot,st,nt){const yt=this.zone;return this.delegate.schedule(function(tn){yt.runGuarded(()=>{ot.apply(this,[tn])})},st,nt)}}class se{constructor(ot){this.zone=ot,this.task=null}call(ot,st){const nt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fe,{},fe,fe)),st.pipe((0,X.b)({next:nt,complete:nt,error:nt})).subscribe(ot).add(nt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class Se{constructor(ot){this.ngZone=ot,this.outsideAngular=ot.runOutsideAngular(()=>new ve(Zone.current)),this.insideAngular=ot.run(()=>new ve(Zone.current,g.z))}}function me(Je){return function(st){return(st=st.lift(new se(Je.ngZone))).pipe((0,C.R)(Je.outsideAngular),(0,Ve.QV)(Je.insideAngular))}}const Ce=["ngOnDestroy"],Me=(Je,ot,st,nt={})=>new Proxy(Je,{get:(yt,at)=>st.runOutsideAngular(()=>{var tn;if(Je[at])return(null===(tn=null==nt?void 0:nt.spy)||void 0===tn?void 0:tn.get)&&nt.spy.get(at,Je[at]),Je[at];if(Ce.indexOf(at)>-1)return()=>{};const un=ot.toPromise().then(Tn=>{const on=Tn&&Tn[at];return"function"==typeof on?on.bind(Tn):on&&on.then?on.then(Bt=>st.run(()=>Bt)):st.run(()=>on)});return new Proxy(()=>{},{get:(Tn,on)=>un[on],apply:(Tn,on,Bt)=>un.then(Ft=>{var Jt;const Ht=Ft&&Ft(...Bt);return(null===(Jt=null==nt?void 0:nt.spy)||void 0===Jt?void 0:Jt.apply)&&nt.spy.apply(at,Bt,Ht),Ht})})})}),Ue=(Je,ot)=>{ot.forEach(st=>{Object.getOwnPropertyNames(st.prototype||st).forEach(nt=>{Object.defineProperty(Je.prototype,nt,Object.getOwnPropertyDescriptor(st.prototype||st,nt))})})},Xe=new Ee.OlP("angularfire2.app.options"),re=new Ee.OlP("angularfire2.app.nameOrConfig"),St=new Ee.GfV("6.1.5");function Mn(Je,ot,st){const yt="object"==typeof st&&st||{};yt.name=yt.name||"string"==typeof st&&st||"[DEFAULT]";const tn=Fe.Z.apps.filter(un=>un&&un.name===yt.name)[0]||ot.runOutsideAngular(()=>Fe.Z.initializeApp(Je,yt));try{JSON.stringify(Je)!==JSON.stringify(tn.options)&&dt("error",`${tn.name} Firebase App already initialized with different options${jt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(un){}return tn}const kt=()=>{dt("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},dt=(Je,...ot)=>{(0,Ee.X6Q)()&&"undefined"!=typeof console&&console[Je](...ot)};function Ot(Je,ot,st,nt,yt){const[at,...tn]=globalThis.\u0275AngularfireInstanceCache.get(Je)||[];if(at){try{yt.some((un,Tn)=>{const on=tn[Tn];return un&&"object"==typeof un?JSON.stringify(un)!==JSON.stringify(on):un!==on})&&dt("error",`${ot} was already initialized on the ${st.name} Firebase App instance with different settings.${jt.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(un){}return at}{const un=nt();return globalThis.\u0275AngularfireInstanceCache.set(Je,[un,...yt]),un}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const Cn={provide:class{},useFactory:Mn,deps:[Xe,Ee.R0b,[new Ee.FiY,re]]};let wt=(()=>{class Je{constructor(st){Fe.Z.registerVersion("angularfire",St.full,st.toString()),Fe.Z.registerVersion("angular",Ee.q4F.full)}static initializeApp(st,nt){return{ngModule:Je,providers:[{provide:Xe,useValue:st},{provide:re,useValue:nt}]}}}return Je.\u0275fac=function(st){return new(st||Je)(Ee.LFG(Ee.Lbi))},Je.\u0275mod=Ee.oAB({type:Je}),Je.\u0275inj=Ee.cJS({providers:[Cn]}),Je})()},665:(jt,it,Q)=>{"use strict";Q.d(it,{Wl:()=>Me,Fj:()=>Ke,qu:()=>je,NI:()=>Dr,u:()=>rs,cw:()=>Xr,sg:()=>jr,u5:()=>k,a5:()=>Ln,JJ:()=>Zn,JL:()=>Dt,F:()=>B,On:()=>pr,UX:()=>ee,kI:()=>Ot,_Y:()=>Li});var P=Q(7716),g=Q(8583),X=Q(7574),C=Q(9796),Ve=Q(8002),Ee=Q(1555),Fe=Q(4402);function ve(G,H){return new X.y(V=>{const ue=G.length;if(0===ue)return void V.complete();const $e=new Array(ue);let Rt=0,wn=0;for(let cr=0;cr<ue;cr++){const Hr=(0,Fe.D)(G[cr]);let hr=!1;V.add(Hr.subscribe({next:Gr=>{hr||(hr=!0,wn++),$e[cr]=Gr},error:Gr=>V.error(Gr),complete:()=>{Rt++,(Rt===ue||!hr)&&(wn===ue&&V.next(H?H.reduce((Gr,ii,Dn)=>(Gr[ii]=$e[Dn],Gr),{}):$e),V.complete())}}))}})}let se=(()=>{class G{constructor(V,ue){this._renderer=V,this._elementRef=ue,this.onChange=$e=>{},this.onTouched=()=>{}}setProperty(V,ue){this._renderer.setProperty(this._elementRef.nativeElement,V,ue)}registerOnTouched(V){this.onTouched=V}registerOnChange(V){this.onChange=V}setDisabledState(V){this.setProperty("disabled",V)}}return G.\u0275fac=function(V){return new(V||G)(P.Y36(P.Qsj),P.Y36(P.SBq))},G.\u0275dir=P.lG2({type:G}),G})(),Se=(()=>{class G extends se{}return G.\u0275fac=function(){let H;return function(ue){return(H||(H=P.n5z(G)))(ue||G)}}(),G.\u0275dir=P.lG2({type:G,features:[P.qOj]}),G})();const me=new P.OlP("NgValueAccessor"),Ce={provide:me,useExisting:(0,P.Gpc)(()=>Me),multi:!0};let Me=(()=>{class G extends Se{writeValue(V){this.setProperty("checked",V)}}return G.\u0275fac=function(){let H;return function(ue){return(H||(H=P.n5z(G)))(ue||G)}}(),G.\u0275dir=P.lG2({type:G,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(V,ue){1&V&&P.NdJ("change",function(Rt){return ue.onChange(Rt.target.checked)})("blur",function(){return ue.onTouched()})},features:[P._Bn([Ce]),P.qOj]}),G})();const Ue={provide:me,useExisting:(0,P.Gpc)(()=>Ke),multi:!0},re=new P.OlP("CompositionEventMode");let Ke=(()=>{class G extends se{constructor(V,ue,$e){super(V,ue),this._compositionMode=$e,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const G=(0,g.q)()?(0,g.q)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(V){this.setProperty("value",null==V?"":V)}_handleInput(V){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(V)}_compositionStart(){this._composing=!0}_compositionEnd(V){this._composing=!1,this._compositionMode&&this.onChange(V)}}return G.\u0275fac=function(V){return new(V||G)(P.Y36(P.Qsj),P.Y36(P.SBq),P.Y36(re,8))},G.\u0275dir=P.lG2({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(V,ue){1&V&&P.NdJ("input",function(Rt){return ue._handleInput(Rt.target.value)})("blur",function(){return ue.onTouched()})("compositionstart",function(){return ue._compositionStart()})("compositionend",function(Rt){return ue._compositionEnd(Rt.target.value)})},features:[P._Bn([Ue]),P.qOj]}),G})();function St(G){return null==G||0===G.length}function Mn(G){return null!=G&&"number"==typeof G.length}const kt=new P.OlP("NgValidators"),dt=new P.OlP("NgAsyncValidators"),Zt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ot{static min(H){return G=H,H=>{if(St(H.value)||St(G))return null;const V=parseFloat(H.value);return!isNaN(V)&&V<G?{min:{min:G,actual:H.value}}:null};var G}static max(H){return G=H,H=>{if(St(H.value)||St(G))return null;const V=parseFloat(H.value);return!isNaN(V)&&V>G?{max:{max:G,actual:H.value}}:null};var G}static required(H){return St(H.value)?{required:!0}:null}static requiredTrue(H){return!0===H.value?null:{required:!0}}static email(H){return St((G=H).value)||Zt.test(G.value)?null:{email:!0};var G}static minLength(H){return G=H,H=>St(H.value)||!Mn(H.value)?null:H.value.length<G?{minlength:{requiredLength:G,actualLength:H.value.length}}:null;var G}static maxLength(H){return G=H,H=>Mn(H.value)&&H.value.length>G?{maxlength:{requiredLength:G,actualLength:H.value.length}}:null;var G}static pattern(H){return function(G){if(!G)return tn;let H,V;return"string"==typeof G?(V="","^"!==G.charAt(0)&&(V+="^"),V+=G,"$"!==G.charAt(G.length-1)&&(V+="$"),H=new RegExp(V)):(V=G.toString(),H=G),ue=>{if(St(ue.value))return null;const $e=ue.value;return H.test($e)?null:{pattern:{requiredPattern:V,actualValue:$e}}}}(H)}static nullValidator(H){return null}static compose(H){return Ht(H)}static composeAsync(H){return bn(H)}}function tn(G){return null}function un(G){return null!=G}function Tn(G){const H=(0,P.QGY)(G)?(0,Fe.D)(G):G;return(0,P.CqO)(H),H}function on(G){let H={};return G.forEach(V=>{H=null!=V?Object.assign(Object.assign({},H),V):H}),0===Object.keys(H).length?null:H}function Bt(G,H){return H.map(V=>V(G))}function Jt(G){return G.map(H=>function(G){return!G.validate}(H)?H:V=>H.validate(V))}function Ht(G){if(!G)return null;const H=G.filter(un);return 0==H.length?null:function(V){return on(Bt(V,H))}}function Pn(G){return null!=G?Ht(Jt(G)):null}function bn(G){if(!G)return null;const H=G.filter(un);return 0==H.length?null:function(V){return function(...G){if(1===G.length){const H=G[0];if((0,C.k)(H))return ve(H,null);if((0,Ee.K)(H)&&Object.getPrototypeOf(H)===Object.prototype){const V=Object.keys(H);return ve(V.map(ue=>H[ue]),V)}}if("function"==typeof G[G.length-1]){const H=G.pop();return ve(G=1===G.length&&(0,C.k)(G[0])?G[0]:G,null).pipe((0,Ve.U)(V=>H(...V)))}return ve(G,null)}(Bt(V,H).map(Tn)).pipe((0,Ve.U)(on))}}function or(G){return null!=G?bn(Jt(G)):null}function Gn(G,H){return null===G?[H]:Array.isArray(G)?[...G,H]:[G,H]}function Bn(G){return G._rawValidators}function Jn(G){return G._rawAsyncValidators}function Sn(G){return G?Array.isArray(G)?G:[G]:[]}function An(G,H){return Array.isArray(G)?G.includes(H):G===H}function Mi(G,H){const V=Sn(H);return Sn(G).forEach($e=>{An(V,$e)||V.push($e)}),V}function mn(G,H){return Sn(H).filter(V=>!An(G,V))}let Wt=(()=>{class G{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(V){this._rawValidators=V||[],this._composedValidatorFn=Pn(this._rawValidators)}_setAsyncValidators(V){this._rawAsyncValidators=V||[],this._composedAsyncValidatorFn=or(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(V){this._onDestroyCallbacks.push(V)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(V=>V()),this._onDestroyCallbacks=[]}reset(V){this.control&&this.control.reset(V)}hasError(V,ue){return!!this.control&&this.control.hasError(V,ue)}getError(V,ue){return this.control?this.control.getError(V,ue):null}}return G.\u0275fac=function(V){return new(V||G)},G.\u0275dir=P.lG2({type:G}),G})(),kn=(()=>{class G extends Wt{get formDirective(){return null}get path(){return null}}return G.\u0275fac=function(){let H;return function(ue){return(H||(H=P.n5z(G)))(ue||G)}}(),G.\u0275dir=P.lG2({type:G,features:[P.qOj]}),G})();class Ln extends Wt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Qt{constructor(H){this._cd=H}is(H){var V,ue,$e;return"submitted"===H?!!(null===(V=this._cd)||void 0===V?void 0:V.submitted):!!(null===($e=null===(ue=this._cd)||void 0===ue?void 0:ue.control)||void 0===$e?void 0:$e[H])}}let Zn=(()=>{class G extends Qt{constructor(V){super(V)}}return G.\u0275fac=function(V){return new(V||G)(P.Y36(Ln,2))},G.\u0275dir=P.lG2({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(V,ue){2&V&&P.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))},features:[P.qOj]}),G})(),Dt=(()=>{class G extends Qt{constructor(V){super(V)}}return G.\u0275fac=function(V){return new(V||G)(P.Y36(kn,10))},G.\u0275dir=P.lG2({type:G,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(V,ue){2&V&&P.ekj("ng-untouched",ue.is("untouched"))("ng-touched",ue.is("touched"))("ng-pristine",ue.is("pristine"))("ng-dirty",ue.is("dirty"))("ng-valid",ue.is("valid"))("ng-invalid",ue.is("invalid"))("ng-pending",ue.is("pending"))("ng-submitted",ue.is("submitted"))},features:[P.qOj]}),G})();function gn(G,H){return[...H.path,G]}function Gt(G,H){et(G,H),H.valueAccessor.writeValue(G.value),function(G,H){H.valueAccessor.registerOnChange(V=>{G._pendingValue=V,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&nr(G,H)})}(G,H),function(G,H){const V=(ue,$e)=>{H.valueAccessor.writeValue(ue),$e&&H.viewToModelUpdate(ue)};G.registerOnChange(V),H._registerOnDestroy(()=>{G._unregisterOnChange(V)})}(G,H),function(G,H){H.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&nr(G,H),"submit"!==G.updateOn&&G.markAsTouched()})}(G,H),function(G,H){if(H.valueAccessor.setDisabledState){const V=ue=>{H.valueAccessor.setDisabledState(ue)};G.registerOnDisabledChange(V),H._registerOnDestroy(()=>{G._unregisterOnDisabledChange(V)})}}(G,H)}function Oe(G,H,V=!0){const ue=()=>{};H.valueAccessor&&(H.valueAccessor.registerOnChange(ue),H.valueAccessor.registerOnTouched(ue)),tt(G,H),G&&(H._invokeOnDestroyCallbacks(),G._registerOnCollectionChange(()=>{}))}function xe(G,H){G.forEach(V=>{V.registerOnValidatorChange&&V.registerOnValidatorChange(H)})}function et(G,H){const V=Bn(G);null!==H.validator?G.setValidators(Gn(V,H.validator)):"function"==typeof V&&G.setValidators([V]);const ue=Jn(G);null!==H.asyncValidator?G.setAsyncValidators(Gn(ue,H.asyncValidator)):"function"==typeof ue&&G.setAsyncValidators([ue]);const $e=()=>G.updateValueAndValidity();xe(H._rawValidators,$e),xe(H._rawAsyncValidators,$e)}function tt(G,H){let V=!1;if(null!==G){if(null!==H.validator){const $e=Bn(G);if(Array.isArray($e)&&$e.length>0){const Rt=$e.filter(wn=>wn!==H.validator);Rt.length!==$e.length&&(V=!0,G.setValidators(Rt))}}if(null!==H.asyncValidator){const $e=Jn(G);if(Array.isArray($e)&&$e.length>0){const Rt=$e.filter(wn=>wn!==H.asyncValidator);Rt.length!==$e.length&&(V=!0,G.setAsyncValidators(Rt))}}}const ue=()=>{};return xe(H._rawValidators,ue),xe(H._rawAsyncValidators,ue),V}function nr(G,H){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),H.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function Rn(G,H){et(G,H)}function Er(G,H){if(!G.hasOwnProperty("model"))return!1;const V=G.model;return!!V.isFirstChange()||!Object.is(H,V.currentValue)}function Fo(G,H){G._syncPendingControls(),H.forEach(V=>{const ue=V.control;"submit"===ue.updateOn&&ue._pendingChange&&(V.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}function ki(G,H){if(!H)return null;let V,ue,$e;return Array.isArray(H),H.forEach(Rt=>{Rt.constructor===Ke?V=Rt:function(G){return Object.getPrototypeOf(G.constructor)===Se}(Rt)?ue=Rt:$e=Rt}),$e||ue||V||null}function ao(G,H){const V=G.indexOf(H);V>-1&&G.splice(V,1)}const Fr="VALID",ar="INVALID",yn="PENDING",Lr="DISABLED";function wr(G){return(Zr(G)?G.validators:G)||null}function Xt(G){return Array.isArray(G)?Pn(G):G||null}function dn(G,H){return(Zr(H)?H.asyncValidators:G)||null}function In(G){return Array.isArray(G)?or(G):G||null}function Zr(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}class Ti{constructor(H,V){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=H,this._rawAsyncValidators=V,this._composedValidatorFn=Xt(this._rawValidators),this._composedAsyncValidatorFn=In(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(H){this._rawValidators=this._composedValidatorFn=H}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(H){this._rawAsyncValidators=this._composedAsyncValidatorFn=H}get parent(){return this._parent}get valid(){return this.status===Fr}get invalid(){return this.status===ar}get pending(){return this.status==yn}get disabled(){return this.status===Lr}get enabled(){return this.status!==Lr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(H){this._rawValidators=H,this._composedValidatorFn=Xt(H)}setAsyncValidators(H){this._rawAsyncValidators=H,this._composedAsyncValidatorFn=In(H)}addValidators(H){this.setValidators(Mi(H,this._rawValidators))}addAsyncValidators(H){this.setAsyncValidators(Mi(H,this._rawAsyncValidators))}removeValidators(H){this.setValidators(mn(H,this._rawValidators))}removeAsyncValidators(H){this.setAsyncValidators(mn(H,this._rawAsyncValidators))}hasValidator(H){return An(this._rawValidators,H)}hasAsyncValidator(H){return An(this._rawAsyncValidators,H)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(H={}){this.touched=!0,this._parent&&!H.onlySelf&&this._parent.markAsTouched(H)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(H=>H.markAllAsTouched())}markAsUntouched(H={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(V=>{V.markAsUntouched({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}markAsDirty(H={}){this.pristine=!1,this._parent&&!H.onlySelf&&this._parent.markAsDirty(H)}markAsPristine(H={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(V=>{V.markAsPristine({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}markAsPending(H={}){this.status=yn,!1!==H.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!H.onlySelf&&this._parent.markAsPending(H)}disable(H={}){const V=this._parentMarkedDirty(H.onlySelf);this.status=Lr,this.errors=null,this._forEachChild(ue=>{ue.disable(Object.assign(Object.assign({},H),{onlySelf:!0}))}),this._updateValue(),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},H),{skipPristineCheck:V})),this._onDisabledChange.forEach(ue=>ue(!0))}enable(H={}){const V=this._parentMarkedDirty(H.onlySelf);this.status=Fr,this._forEachChild(ue=>{ue.enable(Object.assign(Object.assign({},H),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},H),{skipPristineCheck:V})),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors(H){this._parent&&!H.onlySelf&&(this._parent.updateValueAndValidity(H),H.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(H){this._parent=H}updateValueAndValidity(H={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fr||this.status===yn)&&this._runAsyncValidator(H.emitEvent)),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!H.onlySelf&&this._parent.updateValueAndValidity(H)}_updateTreeValidity(H={emitEvent:!0}){this._forEachChild(V=>V._updateTreeValidity(H)),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lr:Fr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(H){if(this.asyncValidator){this.status=yn,this._hasOwnPendingAsyncValidator=!0;const V=Tn(this.asyncValidator(this));this._asyncValidationSubscription=V.subscribe(ue=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ue,{emitEvent:H})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(H,V={}){this.errors=H,this._updateControlsErrors(!1!==V.emitEvent)}get(H){return function(G,H,V){if(null==H||(Array.isArray(H)||(H=H.split(".")),Array.isArray(H)&&0===H.length))return null;let ue=G;return H.forEach($e=>{ue=ue instanceof Xr?ue.controls.hasOwnProperty($e)?ue.controls[$e]:null:ue instanceof vr&&ue.at($e)||null}),ue}(this,H)}getError(H,V){const ue=V?this.get(V):this;return ue&&ue.errors?ue.errors[H]:null}hasError(H,V){return!!this.getError(H,V)}get root(){let H=this;for(;H._parent;)H=H._parent;return H}_updateControlsErrors(H){this.status=this._calculateStatus(),H&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(H)}_initObservables(){this.valueChanges=new P.vpe,this.statusChanges=new P.vpe}_calculateStatus(){return this._allControlsDisabled()?Lr:this.errors?ar:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yn)?yn:this._anyControlsHaveStatus(ar)?ar:Fr}_anyControlsHaveStatus(H){return this._anyControls(V=>V.status===H)}_anyControlsDirty(){return this._anyControls(H=>H.dirty)}_anyControlsTouched(){return this._anyControls(H=>H.touched)}_updatePristine(H={}){this.pristine=!this._anyControlsDirty(),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}_updateTouched(H={}){this.touched=this._anyControlsTouched(),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}_isBoxedValue(H){return"object"==typeof H&&null!==H&&2===Object.keys(H).length&&"value"in H&&"disabled"in H}_registerOnCollectionChange(H){this._onCollectionChange=H}_setUpdateStrategy(H){Zr(H)&&null!=H.updateOn&&(this._updateOn=H.updateOn)}_parentMarkedDirty(H){return!H&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Dr extends Ti{constructor(H=null,V,ue){super(wr(V),dn(ue,V)),this._onChange=[],this._applyFormState(H),this._setUpdateStrategy(V),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(H,V={}){this.value=this._pendingValue=H,this._onChange.length&&!1!==V.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==V.emitViewToModelChange)),this.updateValueAndValidity(V)}patchValue(H,V={}){this.setValue(H,V)}reset(H=null,V={}){this._applyFormState(H),this.markAsPristine(V),this.markAsUntouched(V),this.setValue(this.value,V),this._pendingChange=!1}_updateValue(){}_anyControls(H){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(H){this._onChange.push(H)}_unregisterOnChange(H){ao(this._onChange,H)}registerOnDisabledChange(H){this._onDisabledChange.push(H)}_unregisterOnDisabledChange(H){ao(this._onDisabledChange,H)}_forEachChild(H){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(H){this._isBoxedValue(H)?(this.value=this._pendingValue=H.value,H.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=H}}class Xr extends Ti{constructor(H,V,ue){super(wr(V),dn(ue,V)),this.controls=H,this._initObservables(),this._setUpdateStrategy(V),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(H,V){return this.controls[H]?this.controls[H]:(this.controls[H]=V,V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange),V)}addControl(H,V,ue={}){this.registerControl(H,V),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl(H,V={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],this.updateValueAndValidity({emitEvent:V.emitEvent}),this._onCollectionChange()}setControl(H,V,ue={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],V&&this.registerControl(H,V),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains(H){return this.controls.hasOwnProperty(H)&&this.controls[H].enabled}setValue(H,V={}){this._checkAllValuesPresent(H),Object.keys(H).forEach(ue=>{this._throwIfControlMissing(ue),this.controls[ue].setValue(H[ue],{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V)}patchValue(H,V={}){null!=H&&(Object.keys(H).forEach(ue=>{this.controls[ue]&&this.controls[ue].patchValue(H[ue],{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V))}reset(H={},V={}){this._forEachChild((ue,$e)=>{ue.reset(H[$e],{onlySelf:!0,emitEvent:V.emitEvent})}),this._updatePristine(V),this._updateTouched(V),this.updateValueAndValidity(V)}getRawValue(){return this._reduceChildren({},(H,V,ue)=>(H[ue]=V instanceof Dr?V.value:V.getRawValue(),H))}_syncPendingControls(){let H=this._reduceChildren(!1,(V,ue)=>!!ue._syncPendingControls()||V);return H&&this.updateValueAndValidity({onlySelf:!0}),H}_throwIfControlMissing(H){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[H])throw new Error(`Cannot find form control with name: ${H}.`)}_forEachChild(H){Object.keys(this.controls).forEach(V=>{const ue=this.controls[V];ue&&H(ue,V)})}_setUpControls(){this._forEachChild(H=>{H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(H){for(const V of Object.keys(this.controls)){const ue=this.controls[V];if(this.contains(V)&&H(ue))return!0}return!1}_reduceValue(){return this._reduceChildren({},(H,V,ue)=>((V.enabled||this.disabled)&&(H[ue]=V.value),H))}_reduceChildren(H,V){let ue=H;return this._forEachChild(($e,Rt)=>{ue=V(ue,$e,Rt)}),ue}_allControlsDisabled(){for(const H of Object.keys(this.controls))if(this.controls[H].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(H){this._forEachChild((V,ue)=>{if(void 0===H[ue])throw new Error(`Must supply a value for form control with name: '${ue}'.`)})}}class vr extends Ti{constructor(H,V,ue){super(wr(V),dn(ue,V)),this.controls=H,this._initObservables(),this._setUpdateStrategy(V),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(H){return this.controls[H]}push(H,V={}){this.controls.push(H),this._registerControl(H),this.updateValueAndValidity({emitEvent:V.emitEvent}),this._onCollectionChange()}insert(H,V,ue={}){this.controls.splice(H,0,V),this._registerControl(V),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt(H,V={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),this.controls.splice(H,1),this.updateValueAndValidity({emitEvent:V.emitEvent})}setControl(H,V,ue={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),this.controls.splice(H,1),V&&(this.controls.splice(H,0,V),this._registerControl(V)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(H,V={}){this._checkAllValuesPresent(H),H.forEach((ue,$e)=>{this._throwIfControlMissing($e),this.at($e).setValue(ue,{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V)}patchValue(H,V={}){null!=H&&(H.forEach((ue,$e)=>{this.at($e)&&this.at($e).patchValue(ue,{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V))}reset(H=[],V={}){this._forEachChild((ue,$e)=>{ue.reset(H[$e],{onlySelf:!0,emitEvent:V.emitEvent})}),this._updatePristine(V),this._updateTouched(V),this.updateValueAndValidity(V)}getRawValue(){return this.controls.map(H=>H instanceof Dr?H.value:H.getRawValue())}clear(H={}){this.controls.length<1||(this._forEachChild(V=>V._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:H.emitEvent}))}_syncPendingControls(){let H=this.controls.reduce((V,ue)=>!!ue._syncPendingControls()||V,!1);return H&&this.updateValueAndValidity({onlySelf:!0}),H}_throwIfControlMissing(H){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(H))throw new Error(`Cannot find form control at index ${H}`)}_forEachChild(H){this.controls.forEach((V,ue)=>{H(V,ue)})}_updateValue(){this.value=this.controls.filter(H=>H.enabled||this.disabled).map(H=>H.value)}_anyControls(H){return this.controls.some(V=>V.enabled&&H(V))}_setUpControls(){this._forEachChild(H=>this._registerControl(H))}_checkAllValuesPresent(H){this._forEachChild((V,ue)=>{if(void 0===H[ue])throw new Error(`Must supply a value for form control at index: ${ue}.`)})}_allControlsDisabled(){for(const H of this.controls)if(H.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(H){H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange)}}const Co={provide:kn,useExisting:(0,P.Gpc)(()=>B)},We=(()=>Promise.resolve(null))();let B=(()=>{class G extends kn{constructor(V,ue){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new P.vpe,this.form=new Xr({},Pn(V),or(ue))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(V){We.then(()=>{const ue=this._findContainer(V.path);V.control=ue.registerControl(V.name,V.control),Gt(V.control,V),V.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(V)})}getControl(V){return this.form.get(V.path)}removeControl(V){We.then(()=>{const ue=this._findContainer(V.path);ue&&ue.removeControl(V.name),ao(this._directives,V)})}addFormGroup(V){We.then(()=>{const ue=this._findContainer(V.path),$e=new Xr({});Rn($e,V),ue.registerControl(V.name,$e),$e.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(V){We.then(()=>{const ue=this._findContainer(V.path);ue&&ue.removeControl(V.name)})}getFormGroup(V){return this.form.get(V.path)}updateModel(V,ue){We.then(()=>{this.form.get(V.path).setValue(ue)})}setValue(V){this.control.setValue(V)}onSubmit(V){return this.submitted=!0,Fo(this.form,this._directives),this.ngSubmit.emit(V),!1}onReset(){this.resetForm()}resetForm(V){this.form.reset(V),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(V){return V.pop(),V.length?this.form.get(V):this.form}}return G.\u0275fac=function(V){return new(V||G)(P.Y36(kt,10),P.Y36(dt,10))},G.\u0275dir=P.lG2({type:G,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(V,ue){1&V&&P.NdJ("submit",function(Rt){return ue.onSubmit(Rt)})("reset",function(){return ue.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[P._Bn([Co]),P.qOj]}),G})();const cn={provide:Ln,useExisting:(0,P.Gpc)(()=>pr)},Gi=(()=>Promise.resolve(null))();let pr=(()=>{class G extends Ln{constructor(V,ue,$e,Rt){super(),this.control=new Dr,this._registered=!1,this.update=new P.vpe,this._parent=V,this._setValidators(ue),this._setAsyncValidators($e),this.valueAccessor=ki(0,Rt)}ngOnChanges(V){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in V&&this._updateDisabled(V),Er(V,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?gn(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(V){this.viewModel=V,this.update.emit(V)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Gt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(V){Gi.then(()=>{this.control.setValue(V,{emitViewToModelChange:!1})})}_updateDisabled(V){const ue=V.isDisabled.currentValue,$e=""===ue||ue&&"false"!==ue;Gi.then(()=>{$e&&!this.control.disabled?this.control.disable():!$e&&this.control.disabled&&this.control.enable()})}}return G.\u0275fac=function(V){return new(V||G)(P.Y36(kn,9),P.Y36(kt,10),P.Y36(dt,10),P.Y36(me,10))},G.\u0275dir=P.lG2({type:G,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[P._Bn([cn]),P.qOj,P.TTD]}),G})(),Li=(()=>{class G{}return G.\u0275fac=function(V){return new(V||G)},G.\u0275dir=P.lG2({type:G,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),G})(),jn=(()=>{class G{}return G.\u0275fac=function(V){return new(V||G)},G.\u0275mod=P.oAB({type:G}),G.\u0275inj=P.cJS({}),G})();const qi=new P.OlP("NgModelWithFormControlWarning"),ds={provide:kn,useExisting:(0,P.Gpc)(()=>jr)};let jr=(()=>{class G extends kn{constructor(V,ue){super(),this.validators=V,this.asyncValidators=ue,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new P.vpe,this._setValidators(V),this._setAsyncValidators(ue)}ngOnChanges(V){this._checkFormPresent(),V.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(tt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(V){const ue=this.form.get(V.path);return Gt(ue,V),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(V),ue}getControl(V){return this.form.get(V.path)}removeControl(V){Oe(V.control||null,V,!1),ao(this.directives,V)}addFormGroup(V){this._setUpFormContainer(V)}removeFormGroup(V){this._cleanUpFormContainer(V)}getFormGroup(V){return this.form.get(V.path)}addFormArray(V){this._setUpFormContainer(V)}removeFormArray(V){this._cleanUpFormContainer(V)}getFormArray(V){return this.form.get(V.path)}updateModel(V,ue){this.form.get(V.path).setValue(ue)}onSubmit(V){return this.submitted=!0,Fo(this.form,this.directives),this.ngSubmit.emit(V),!1}onReset(){this.resetForm()}resetForm(V){this.form.reset(V),this.submitted=!1}_updateDomValue(){this.directives.forEach(V=>{const ue=V.control,$e=this.form.get(V.path);ue!==$e&&(Oe(ue||null,V),$e instanceof Dr&&(Gt($e,V),V.control=$e))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(V){const ue=this.form.get(V.path);Rn(ue,V),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(V){if(this.form){const ue=this.form.get(V.path);ue&&function(G,H){return tt(G,H)}(ue,V)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){et(this.form,this),this._oldForm&&tt(this._oldForm,this)}_checkFormPresent(){}}return G.\u0275fac=function(V){return new(V||G)(P.Y36(kt,10),P.Y36(dt,10))},G.\u0275dir=P.lG2({type:G,selectors:[["","formGroup",""]],hostBindings:function(V,ue){1&V&&P.NdJ("submit",function(Rt){return ue.onSubmit(Rt)})("reset",function(){return ue.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[P._Bn([ds]),P.qOj,P.TTD]}),G})();const Us={provide:Ln,useExisting:(0,P.Gpc)(()=>rs)};let rs=(()=>{class G extends Ln{constructor(V,ue,$e,Rt,wn){super(),this._ngModelWarningConfig=wn,this._added=!1,this.update=new P.vpe,this._ngModelWarningSent=!1,this._parent=V,this._setValidators(ue),this._setAsyncValidators($e),this.valueAccessor=ki(0,Rt)}set isDisabled(V){}ngOnChanges(V){this._added||this._setUpControl(),Er(V,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(V){this.viewModel=V,this.update.emit(V)}get path(){return gn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return G.\u0275fac=function(V){return new(V||G)(P.Y36(kn,13),P.Y36(kt,10),P.Y36(dt,10),P.Y36(me,10),P.Y36(qi,8))},G.\u0275dir=P.lG2({type:G,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[P._Bn([Us]),P.qOj,P.TTD]}),G._ngModelWarningSentOnce=!1,G})(),W=(()=>{class G{}return G.\u0275fac=function(V){return new(V||G)},G.\u0275mod=P.oAB({type:G}),G.\u0275inj=P.cJS({imports:[[jn]]}),G})(),k=(()=>{class G{}return G.\u0275fac=function(V){return new(V||G)},G.\u0275mod=P.oAB({type:G}),G.\u0275inj=P.cJS({imports:[W]}),G})(),ee=(()=>{class G{static withConfig(V){return{ngModule:G,providers:[{provide:qi,useValue:V.warnOnNgModelWithFormControl}]}}}return G.\u0275fac=function(V){return new(V||G)},G.\u0275mod=P.oAB({type:G}),G.\u0275inj=P.cJS({imports:[W]}),G})(),je=(()=>{class G{group(V,ue=null){const $e=this._reduceControls(V);let cr,Rt=null,wn=null;return null!=ue&&(function(G){return void 0!==G.asyncValidators||void 0!==G.validators||void 0!==G.updateOn}(ue)?(Rt=null!=ue.validators?ue.validators:null,wn=null!=ue.asyncValidators?ue.asyncValidators:null,cr=null!=ue.updateOn?ue.updateOn:void 0):(Rt=null!=ue.validator?ue.validator:null,wn=null!=ue.asyncValidator?ue.asyncValidator:null)),new Xr($e,{asyncValidators:wn,updateOn:cr,validators:Rt})}control(V,ue,$e){return new Dr(V,ue,$e)}array(V,ue,$e){const Rt=V.map(wn=>this._createControl(wn));return new vr(Rt,ue,$e)}_reduceControls(V){const ue={};return Object.keys(V).forEach($e=>{ue[$e]=this._createControl(V[$e])}),ue}_createControl(V){return V instanceof Dr||V instanceof Xr||V instanceof vr?V:Array.isArray(V)?this.control(V[0],V.length>1?V[1]:null,V.length>2?V[2]:null):this.control(V)}}return G.\u0275fac=function(V){return new(V||G)},G.\u0275prov=(0,P.Yz7)({factory:function(){return new G},token:G,providedIn:ee}),G})()},6237:(jt,it,Q)=>{"use strict";Q.d(it,{Qb:()=>mr,PW:()=>Rs});var P=Q(7716),g=Q(9075),X=Q(7238);function C(){return"undefined"!=typeof window&&void 0!==window.document}function Ve(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Ee(oe){switch(oe.length){case 0:return new X.ZN;case 1:return oe[0];default:return new X.ZE(oe)}}function Fe(oe,A,M,j,ae={},be={}){const Pe=[],Le=[];let lt=-1,mt=null;if(j.forEach(qt=>{const xn=qt.offset,ur=xn==lt,Tr=ur&&mt||{};Object.keys(qt).forEach(zn=>{let Fn=zn,gr=qt[zn];if("offset"!==zn)switch(Fn=A.normalizePropertyName(Fn,Pe),gr){case X.k1:gr=ae[zn];break;case X.l3:gr=be[zn];break;default:gr=A.normalizeStyleValue(zn,Fn,gr,Pe)}Tr[Fn]=gr}),ur||Le.push(Tr),mt=Tr,lt=xn}),Pe.length){const qt="\n - ";throw new Error(`Unable to animate due to the following errors:${qt}${Pe.join(qt)}`)}return Le}function fe(oe,A,M,j){switch(A){case"start":oe.onStart(()=>j(M&&ve(M,"start",oe)));break;case"done":oe.onDone(()=>j(M&&ve(M,"done",oe)));break;case"destroy":oe.onDestroy(()=>j(M&&ve(M,"destroy",oe)))}}function ve(oe,A,M){const j=M.totalTime,be=se(oe.element,oe.triggerName,oe.fromState,oe.toState,A||oe.phaseName,null==j?oe.totalTime:j,!!M.disabled),Pe=oe._data;return null!=Pe&&(be._data=Pe),be}function se(oe,A,M,j,ae="",be=0,Pe){return{element:oe,triggerName:A,fromState:M,toState:j,phaseName:ae,totalTime:be,disabled:!!Pe}}function Se(oe,A,M){let j;return oe instanceof Map?(j=oe.get(A),j||oe.set(A,j=M)):(j=oe[A],j||(j=oe[A]=M)),j}function me(oe){const A=oe.indexOf(":");return[oe.substring(1,A),oe.substr(A+1)]}let Ce=(oe,A)=>!1,Ue=(oe,A)=>!1,re=(oe,A,M)=>[];const St=Ve();(St||"undefined"!=typeof Element)&&(Ce=C()?(oe,A)=>{for(;A&&A!==document.documentElement;){if(A===oe)return!0;A=A.parentNode||A.host}return!1}:(oe,A)=>oe.contains(A),Ue=(()=>{if(St||Element.prototype.matches)return(oe,A)=>oe.matches(A);{const oe=Element.prototype,A=oe.matchesSelector||oe.mozMatchesSelector||oe.msMatchesSelector||oe.oMatchesSelector||oe.webkitMatchesSelector;return A?(M,j)=>A.apply(M,[j]):Ue}})(),re=(oe,A,M)=>{let j=[];if(M){const ae=oe.querySelectorAll(A);for(let be=0;be<ae.length;be++)j.push(ae[be])}else{const ae=oe.querySelector(A);ae&&j.push(ae)}return j});let kt=null,dt=!1;function Zt(oe){kt||(kt=("undefined"!=typeof document?document.body:null)||{},dt=!!kt.style&&"WebkitAppearance"in kt.style);let A=!0;return kt.style&&!function(oe){return"ebkit"==oe.substring(1,6)}(oe)&&(A=oe in kt.style,!A&&dt&&(A="Webkit"+oe.charAt(0).toUpperCase()+oe.substr(1)in kt.style)),A}const Cn=Ue,wt=Ce,Je=re;function ot(oe){const A={};return Object.keys(oe).forEach(M=>{const j=M.replace(/([a-z])([A-Z])/g,"$1-$2");A[j]=oe[M]}),A}let st=(()=>{class oe{validateStyleProperty(M){return Zt(M)}matchesElement(M,j){return Cn(M,j)}containsElement(M,j){return wt(M,j)}query(M,j,ae){return Je(M,j,ae)}computeStyle(M,j,ae){return ae||""}animate(M,j,ae,be,Pe,Le=[],lt){return new X.ZN(ae,be)}}return oe.\u0275fac=function(M){return new(M||oe)},oe.\u0275prov=P.Yz7({token:oe,factory:oe.\u0275fac}),oe})(),nt=(()=>{class oe{}return oe.NOOP=new st,oe})();const un="ng-enter",Tn="ng-leave",Ft="ng-trigger",Jt=".ng-trigger",Ht="ng-animating",Pn=".ng-animating";function bn(oe){if("number"==typeof oe)return oe;const A=oe.match(/^(-?[\.\d]+)(m?s)/);return!A||A.length<2?0:or(parseFloat(A[1]),A[2])}function or(oe,A){switch(A){case"s":return 1e3*oe;default:return oe}}function Gn(oe,A,M){return oe.hasOwnProperty("duration")?oe:function(oe,A,M){let ae,be=0,Pe="";if("string"==typeof oe){const Le=oe.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Le)return A.push(`The provided timing value "${oe}" is invalid.`),{duration:0,delay:0,easing:""};ae=or(parseFloat(Le[1]),Le[2]);const lt=Le[3];null!=lt&&(be=or(parseFloat(lt),Le[4]));const mt=Le[5];mt&&(Pe=mt)}else ae=oe;if(!M){let Le=!1,lt=A.length;ae<0&&(A.push("Duration values below 0 are not allowed for this animation step."),Le=!0),be<0&&(A.push("Delay values below 0 are not allowed for this animation step."),Le=!0),Le&&A.splice(lt,0,`The provided timing value "${oe}" is invalid.`)}return{duration:ae,delay:be,easing:Pe}}(oe,A,M)}function Jn(oe,A={}){return Object.keys(oe).forEach(M=>{A[M]=oe[M]}),A}function An(oe,A,M={}){if(A)for(let j in oe)M[j]=oe[j];else Jn(oe,M);return M}function Mi(oe,A,M){return M?A+":"+M+";":""}function mn(oe){let A="";for(let M=0;M<oe.style.length;M++){const j=oe.style.item(M);A+=Mi(0,j,oe.style.getPropertyValue(j))}for(const M in oe.style)oe.style.hasOwnProperty(M)&&!M.startsWith("_")&&(A+=Mi(0,It(M),oe.style[M]));oe.setAttribute("style",A)}function Wt(oe,A,M){oe.style&&(Object.keys(A).forEach(j=>{const ae=ze(j);M&&!M.hasOwnProperty(j)&&(M[j]=oe.style[ae]),oe.style[ae]=A[j]}),Ve()&&mn(oe))}function kn(oe,A){oe.style&&(Object.keys(A).forEach(M=>{const j=ze(M);oe.style[j]=""}),Ve()&&mn(oe))}function Ln(oe){return Array.isArray(oe)?1==oe.length?oe[0]:(0,X.vP)(oe):oe}const dr=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ur(oe){let A=[];if("string"==typeof oe){let M;for(;M=dr.exec(oe);)A.push(M[1]);dr.lastIndex=0}return A}function Zn(oe,A,M){const j=oe.toString(),ae=j.replace(dr,(be,Pe)=>{let Le=A[Pe];return A.hasOwnProperty(Pe)||(M.push(`Please provide a value for the animation param ${Pe}`),Le=""),Le.toString()});return ae==j?oe:ae}function Dt(oe){const A=[];let M=oe.next();for(;!M.done;)A.push(M.value),M=oe.next();return A}const Ze=/-+([a-z0-9])/g;function ze(oe){return oe.replace(Ze,(...A)=>A[1].toUpperCase())}function It(oe){return oe.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function xt(oe,A){return 0===oe||0===A}function sn(oe,A,M){const j=Object.keys(M);if(j.length&&A.length){let be=A[0],Pe=[];if(j.forEach(Le=>{be.hasOwnProperty(Le)||Pe.push(Le),be[Le]=M[Le]}),Pe.length)for(var ae=1;ae<A.length;ae++){let Le=A[ae];Pe.forEach(function(lt){Le[lt]=He(oe,lt)})}}return A}function Mt(oe,A,M){switch(A.type){case 7:return oe.visitTrigger(A,M);case 0:return oe.visitState(A,M);case 1:return oe.visitTransition(A,M);case 2:return oe.visitSequence(A,M);case 3:return oe.visitGroup(A,M);case 4:return oe.visitAnimate(A,M);case 5:return oe.visitKeyframes(A,M);case 6:return oe.visitStyle(A,M);case 8:return oe.visitReference(A,M);case 9:return oe.visitAnimateChild(A,M);case 10:return oe.visitAnimateRef(A,M);case 11:return oe.visitQuery(A,M);case 12:return oe.visitStagger(A,M);default:throw new Error(`Unable to resolve animation metadata node #${A.type}`)}}function He(oe,A){return window.getComputedStyle(oe)[A]}function vt(oe,A){const M=[];return"string"==typeof oe?oe.split(/\s*,\s*/).forEach(j=>function(oe,A,M){if(":"==oe[0]){const lt=function(oe,A){switch(oe){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(M,j)=>parseFloat(j)>parseFloat(M);case":decrement":return(M,j)=>parseFloat(j)<parseFloat(M);default:return A.push(`The transition alias value "${oe}" is not supported`),"* => *"}}(oe,M);if("function"==typeof lt)return void A.push(lt);oe=lt}const j=oe.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==j||j.length<4)return M.push(`The provided transition expression "${oe}" is not supported`),A;const ae=j[1],be=j[2],Pe=j[3];A.push(Gt(ae,Pe));"<"==be[0]&&!("*"==ae&&"*"==Pe)&&A.push(Gt(Pe,ae))}(j,M,A)):M.push(oe),M}const hn=new Set(["true","1"]),gn=new Set(["false","0"]);function Gt(oe,A){const M=hn.has(oe)||gn.has(oe),j=hn.has(A)||gn.has(A);return(ae,be)=>{let Pe="*"==oe||oe==ae,Le="*"==A||A==be;return!Pe&&M&&"boolean"==typeof ae&&(Pe=ae?hn.has(oe):gn.has(oe)),!Le&&j&&"boolean"==typeof be&&(Le=be?hn.has(A):gn.has(A)),Pe&&Le}}const xe=new RegExp("s*:selfs*,?","g");function Ye(oe,A,M){return new tt(oe).build(A,M)}class tt{constructor(A){this._driver=A}build(A,M){const j=new nr(M);return this._resetContextStyleTimingState(j),Mt(this,Ln(A),j)}_resetContextStyleTimingState(A){A.currentQuerySelector="",A.collectedStyles={},A.collectedStyles[""]={},A.currentTime=0}visitTrigger(A,M){let j=M.queryCount=0,ae=M.depCount=0;const be=[],Pe=[];return"@"==A.name.charAt(0)&&M.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),A.definitions.forEach(Le=>{if(this._resetContextStyleTimingState(M),0==Le.type){const lt=Le,mt=lt.name;mt.toString().split(/\s*,\s*/).forEach(qt=>{lt.name=qt,be.push(this.visitState(lt,M))}),lt.name=mt}else if(1==Le.type){const lt=this.visitTransition(Le,M);j+=lt.queryCount,ae+=lt.depCount,Pe.push(lt)}else M.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:A.name,states:be,transitions:Pe,queryCount:j,depCount:ae,options:null}}visitState(A,M){const j=this.visitStyle(A.styles,M),ae=A.options&&A.options.params||null;if(j.containsDynamicStyles){const be=new Set,Pe=ae||{};if(j.styles.forEach(Le=>{if(Rn(Le)){const lt=Le;Object.keys(lt).forEach(mt=>{Ur(lt[mt]).forEach(qt=>{Pe.hasOwnProperty(qt)||be.add(qt)})})}}),be.size){const Le=Dt(be.values());M.errors.push(`state("${A.name}", ...) must define default values for all the following style substitutions: ${Le.join(", ")}`)}}return{type:0,name:A.name,style:j,options:ae?{params:ae}:null}}visitTransition(A,M){M.queryCount=0,M.depCount=0;const j=Mt(this,Ln(A.animation),M);return{type:1,matchers:vt(A.expr,M.errors),animation:j,queryCount:M.queryCount,depCount:M.depCount,options:Br(A.options)}}visitSequence(A,M){return{type:2,steps:A.steps.map(j=>Mt(this,j,M)),options:Br(A.options)}}visitGroup(A,M){const j=M.currentTime;let ae=0;const be=A.steps.map(Pe=>{M.currentTime=j;const Le=Mt(this,Pe,M);return ae=Math.max(ae,M.currentTime),Le});return M.currentTime=ae,{type:3,steps:be,options:Br(A.options)}}visitAnimate(A,M){const j=function(oe,A){let M=null;if(oe.hasOwnProperty("duration"))M=oe;else if("number"==typeof oe)return Yr(Gn(oe,A).duration,0,"");const j=oe;if(j.split(/\s+/).some(be=>"{"==be.charAt(0)&&"{"==be.charAt(1))){const be=Yr(0,0,"");return be.dynamic=!0,be.strValue=j,be}return M=M||Gn(j,A),Yr(M.duration,M.delay,M.easing)}(A.timings,M.errors);M.currentAnimateTimings=j;let ae,be=A.styles?A.styles:(0,X.oB)({});if(5==be.type)ae=this.visitKeyframes(be,M);else{let Pe=A.styles,Le=!1;if(!Pe){Le=!0;const mt={};j.easing&&(mt.easing=j.easing),Pe=(0,X.oB)(mt)}M.currentTime+=j.duration+j.delay;const lt=this.visitStyle(Pe,M);lt.isEmptyStep=Le,ae=lt}return M.currentAnimateTimings=null,{type:4,timings:j,style:ae,options:null}}visitStyle(A,M){const j=this._makeStyleAst(A,M);return this._validateStyleAst(j,M),j}_makeStyleAst(A,M){const j=[];Array.isArray(A.styles)?A.styles.forEach(Pe=>{"string"==typeof Pe?Pe==X.l3?j.push(Pe):M.errors.push(`The provided style string value ${Pe} is not allowed.`):j.push(Pe)}):j.push(A.styles);let ae=!1,be=null;return j.forEach(Pe=>{if(Rn(Pe)){const Le=Pe,lt=Le.easing;if(lt&&(be=lt,delete Le.easing),!ae)for(let mt in Le)if(Le[mt].toString().indexOf("{{")>=0){ae=!0;break}}}),{type:6,styles:j,easing:be,offset:A.offset,containsDynamicStyles:ae,options:null}}_validateStyleAst(A,M){const j=M.currentAnimateTimings;let ae=M.currentTime,be=M.currentTime;j&&be>0&&(be-=j.duration+j.delay),A.styles.forEach(Pe=>{"string"!=typeof Pe&&Object.keys(Pe).forEach(Le=>{if(!this._driver.validateStyleProperty(Le))return void M.errors.push(`The provided animation property "${Le}" is not a supported CSS property for animations`);const lt=M.collectedStyles[M.currentQuerySelector],mt=lt[Le];let qt=!0;mt&&(be!=ae&&be>=mt.startTime&&ae<=mt.endTime&&(M.errors.push(`The CSS property "${Le}" that exists between the times of "${mt.startTime}ms" and "${mt.endTime}ms" is also being animated in a parallel animation between the times of "${be}ms" and "${ae}ms"`),qt=!1),be=mt.startTime),qt&&(lt[Le]={startTime:be,endTime:ae}),M.options&&function(oe,A,M){const j=A.params||{},ae=Ur(oe);ae.length&&ae.forEach(be=>{j.hasOwnProperty(be)||M.push(`Unable to resolve the local animation param ${be} in the given list of values`)})}(Pe[Le],M.options,M.errors)})})}visitKeyframes(A,M){const j={type:5,styles:[],options:null};if(!M.currentAnimateTimings)return M.errors.push("keyframes() must be placed inside of a call to animate()"),j;let be=0;const Pe=[];let Le=!1,lt=!1,mt=0;const qt=A.steps.map(oi=>{const Vr=this._makeStyleAst(oi,M);let Ji=null!=Vr.offset?Vr.offset:function(oe){if("string"==typeof oe)return null;let A=null;if(Array.isArray(oe))oe.forEach(M=>{if(Rn(M)&&M.hasOwnProperty("offset")){const j=M;A=parseFloat(j.offset),delete j.offset}});else if(Rn(oe)&&oe.hasOwnProperty("offset")){const M=oe;A=parseFloat(M.offset),delete M.offset}return A}(Vr.styles),si=0;return null!=Ji&&(be++,si=Vr.offset=Ji),lt=lt||si<0||si>1,Le=Le||si<mt,mt=si,Pe.push(si),Vr});lt&&M.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),Le&&M.errors.push("Please ensure that all keyframe offsets are in order");const xn=A.steps.length;let ur=0;be>0&&be<xn?M.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==be&&(ur=1/(xn-1));const Tr=xn-1,zn=M.currentTime,Fn=M.currentAnimateTimings,gr=Fn.duration;return qt.forEach((oi,Vr)=>{const Ji=ur>0?Vr==Tr?1:ur*Vr:Pe[Vr],si=Ji*gr;M.currentTime=zn+Fn.delay+si,Fn.duration=si,this._validateStyleAst(oi,M),oi.offset=Ji,j.styles.push(oi)}),j}visitReference(A,M){return{type:8,animation:Mt(this,Ln(A.animation),M),options:Br(A.options)}}visitAnimateChild(A,M){return M.depCount++,{type:9,options:Br(A.options)}}visitAnimateRef(A,M){return{type:10,animation:this.visitReference(A.animation,M),options:Br(A.options)}}visitQuery(A,M){const j=M.currentQuerySelector,ae=A.options||{};M.queryCount++,M.currentQuery=A;const[be,Pe]=function(oe){const A=!!oe.split(/\s*,\s*/).find(M=>":self"==M);return A&&(oe=oe.replace(xe,"")),[oe=oe.replace(/@\*/g,Jt).replace(/@\w+/g,M=>Jt+"-"+M.substr(1)).replace(/:animating/g,Pn),A]}(A.selector);M.currentQuerySelector=j.length?j+" "+be:be,Se(M.collectedStyles,M.currentQuerySelector,{});const Le=Mt(this,Ln(A.animation),M);return M.currentQuery=null,M.currentQuerySelector=j,{type:11,selector:be,limit:ae.limit||0,optional:!!ae.optional,includeSelf:Pe,animation:Le,originalSelector:A.selector,options:Br(A.options)}}visitStagger(A,M){M.currentQuery||M.errors.push("stagger() can only be used inside of query()");const j="full"===A.timings?{duration:0,delay:0,easing:"full"}:Gn(A.timings,M.errors,!0);return{type:12,animation:Mt(this,Ln(A.animation),M),timings:j,options:null}}}class nr{constructor(A){this.errors=A,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Rn(oe){return!Array.isArray(oe)&&"object"==typeof oe}function Br(oe){return oe?(oe=Jn(oe)).params&&(oe.params=function(oe){return oe?Jn(oe):null}(oe.params)):oe={},oe}function Yr(oe,A,M){return{duration:oe,delay:A,easing:M}}function Er(oe,A,M,j,ae,be,Pe=null,Le=!1){return{type:1,element:oe,keyframes:A,preStyleProps:M,postStyleProps:j,duration:ae,delay:be,totalTime:ae+be,easing:Pe,subTimeline:Le}}class Ri{constructor(){this._map=new Map}consume(A){let M=this._map.get(A);return M?this._map.delete(A):M=[],M}append(A,M){let j=this._map.get(A);j||this._map.set(A,j=[]),j.push(...M)}has(A){return this._map.has(A)}clear(){this._map.clear()}}const ao=new RegExp(":enter","g"),Fr=new RegExp(":leave","g");function ar(oe,A,M,j,ae,be={},Pe={},Le,lt,mt=[]){return(new yn).buildKeyframes(oe,A,M,j,ae,be,Pe,Le,lt,mt)}class yn{buildKeyframes(A,M,j,ae,be,Pe,Le,lt,mt,qt=[]){mt=mt||new Ri;const xn=new Xi(A,M,mt,ae,be,qt,[]);xn.options=lt,xn.currentTimeline.setStyles([Pe],null,xn.errors,lt),Mt(this,j,xn);const ur=xn.timelines.filter(Tr=>Tr.containsAnimation());if(ur.length&&Object.keys(Le).length){const Tr=ur[ur.length-1];Tr.allowOnlyTimelineStyles()||Tr.setStyles([Le],null,xn.errors,lt)}return ur.length?ur.map(Tr=>Tr.buildKeyframes()):[Er(M,[],[],[],0,0,"",!1)]}visitTrigger(A,M){}visitState(A,M){}visitTransition(A,M){}visitAnimateChild(A,M){const j=M.subInstructions.consume(M.element);if(j){const ae=M.createSubContext(A.options),be=M.currentTimeline.currentTime,Pe=this._visitSubInstructions(j,ae,ae.options);be!=Pe&&M.transformIntoNewTimeline(Pe)}M.previousNode=A}visitAnimateRef(A,M){const j=M.createSubContext(A.options);j.transformIntoNewTimeline(),this.visitReference(A.animation,j),M.transformIntoNewTimeline(j.currentTimeline.currentTime),M.previousNode=A}_visitSubInstructions(A,M,j){let be=M.currentTimeline.currentTime;const Pe=null!=j.duration?bn(j.duration):null,Le=null!=j.delay?bn(j.delay):null;return 0!==Pe&&A.forEach(lt=>{const mt=M.appendInstructionToTimeline(lt,Pe,Le);be=Math.max(be,mt.duration+mt.delay)}),be}visitReference(A,M){M.updateOptions(A.options,!0),Mt(this,A.animation,M),M.previousNode=A}visitSequence(A,M){const j=M.subContextCount;let ae=M;const be=A.options;if(be&&(be.params||be.delay)&&(ae=M.createSubContext(be),ae.transformIntoNewTimeline(),null!=be.delay)){6==ae.previousNode.type&&(ae.currentTimeline.snapshotCurrentStyles(),ae.previousNode=Lr);const Pe=bn(be.delay);ae.delayNextStep(Pe)}A.steps.length&&(A.steps.forEach(Pe=>Mt(this,Pe,ae)),ae.currentTimeline.applyStylesToKeyframe(),ae.subContextCount>j&&ae.transformIntoNewTimeline()),M.previousNode=A}visitGroup(A,M){const j=[];let ae=M.currentTimeline.currentTime;const be=A.options&&A.options.delay?bn(A.options.delay):0;A.steps.forEach(Pe=>{const Le=M.createSubContext(A.options);be&&Le.delayNextStep(be),Mt(this,Pe,Le),ae=Math.max(ae,Le.currentTimeline.currentTime),j.push(Le.currentTimeline)}),j.forEach(Pe=>M.currentTimeline.mergeTimelineCollectedStyles(Pe)),M.transformIntoNewTimeline(ae),M.previousNode=A}_visitTiming(A,M){if(A.dynamic){const j=A.strValue;return Gn(M.params?Zn(j,M.params,M.errors):j,M.errors)}return{duration:A.duration,delay:A.delay,easing:A.easing}}visitAnimate(A,M){const j=M.currentAnimateTimings=this._visitTiming(A.timings,M),ae=M.currentTimeline;j.delay&&(M.incrementTime(j.delay),ae.snapshotCurrentStyles());const be=A.style;5==be.type?this.visitKeyframes(be,M):(M.incrementTime(j.duration),this.visitStyle(be,M),ae.applyStylesToKeyframe()),M.currentAnimateTimings=null,M.previousNode=A}visitStyle(A,M){const j=M.currentTimeline,ae=M.currentAnimateTimings;!ae&&j.getCurrentStyleProperties().length&&j.forwardFrame();const be=ae&&ae.easing||A.easing;A.isEmptyStep?j.applyEmptyStep(be):j.setStyles(A.styles,be,M.errors,M.options),M.previousNode=A}visitKeyframes(A,M){const j=M.currentAnimateTimings,ae=M.currentTimeline.duration,be=j.duration,Le=M.createSubContext().currentTimeline;Le.easing=j.easing,A.styles.forEach(lt=>{Le.forwardTime((lt.offset||0)*be),Le.setStyles(lt.styles,lt.easing,M.errors,M.options),Le.applyStylesToKeyframe()}),M.currentTimeline.mergeTimelineCollectedStyles(Le),M.transformIntoNewTimeline(ae+be),M.previousNode=A}visitQuery(A,M){const j=M.currentTimeline.currentTime,ae=A.options||{},be=ae.delay?bn(ae.delay):0;be&&(6===M.previousNode.type||0==j&&M.currentTimeline.getCurrentStyleProperties().length)&&(M.currentTimeline.snapshotCurrentStyles(),M.previousNode=Lr);let Pe=j;const Le=M.invokeQuery(A.selector,A.originalSelector,A.limit,A.includeSelf,!!ae.optional,M.errors);M.currentQueryTotal=Le.length;let lt=null;Le.forEach((mt,qt)=>{M.currentQueryIndex=qt;const xn=M.createSubContext(A.options,mt);be&&xn.delayNextStep(be),mt===M.element&&(lt=xn.currentTimeline),Mt(this,A.animation,xn),xn.currentTimeline.applyStylesToKeyframe(),Pe=Math.max(Pe,xn.currentTimeline.currentTime)}),M.currentQueryIndex=0,M.currentQueryTotal=0,M.transformIntoNewTimeline(Pe),lt&&(M.currentTimeline.mergeTimelineCollectedStyles(lt),M.currentTimeline.snapshotCurrentStyles()),M.previousNode=A}visitStagger(A,M){const j=M.parentContext,ae=M.currentTimeline,be=A.timings,Pe=Math.abs(be.duration),Le=Pe*(M.currentQueryTotal-1);let lt=Pe*M.currentQueryIndex;switch(be.duration<0?"reverse":be.easing){case"reverse":lt=Le-lt;break;case"full":lt=j.currentStaggerTime}const qt=M.currentTimeline;lt&&qt.delayNextStep(lt);const xn=qt.currentTime;Mt(this,A.animation,M),M.previousNode=A,j.currentStaggerTime=ae.currentTime-xn+(ae.startTime-j.currentTimeline.startTime)}}const Lr={};class Xi{constructor(A,M,j,ae,be,Pe,Le,lt){this._driver=A,this.element=M,this.subInstructions=j,this._enterClassName=ae,this._leaveClassName=be,this.errors=Pe,this.timelines=Le,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Lr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=lt||new wr(this._driver,M,0),Le.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(A,M){if(!A)return;const j=A;let ae=this.options;null!=j.duration&&(ae.duration=bn(j.duration)),null!=j.delay&&(ae.delay=bn(j.delay));const be=j.params;if(be){let Pe=ae.params;Pe||(Pe=this.options.params={}),Object.keys(be).forEach(Le=>{(!M||!Pe.hasOwnProperty(Le))&&(Pe[Le]=Zn(be[Le],Pe,this.errors))})}}_copyOptions(){const A={};if(this.options){const M=this.options.params;if(M){const j=A.params={};Object.keys(M).forEach(ae=>{j[ae]=M[ae]})}}return A}createSubContext(A=null,M,j){const ae=M||this.element,be=new Xi(this._driver,ae,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(ae,j||0));return be.previousNode=this.previousNode,be.currentAnimateTimings=this.currentAnimateTimings,be.options=this._copyOptions(),be.updateOptions(A),be.currentQueryIndex=this.currentQueryIndex,be.currentQueryTotal=this.currentQueryTotal,be.parentContext=this,this.subContextCount++,be}transformIntoNewTimeline(A){return this.previousNode=Lr,this.currentTimeline=this.currentTimeline.fork(this.element,A),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(A,M,j){const ae={duration:null!=M?M:A.duration,delay:this.currentTimeline.currentTime+(null!=j?j:0)+A.delay,easing:""},be=new Xt(this._driver,A.element,A.keyframes,A.preStyleProps,A.postStyleProps,ae,A.stretchStartingKeyframe);return this.timelines.push(be),ae}incrementTime(A){this.currentTimeline.forwardTime(this.currentTimeline.duration+A)}delayNextStep(A){A>0&&this.currentTimeline.delayNextStep(A)}invokeQuery(A,M,j,ae,be,Pe){let Le=[];if(ae&&Le.push(this.element),A.length>0){A=(A=A.replace(ao,"."+this._enterClassName)).replace(Fr,"."+this._leaveClassName);let mt=this._driver.query(this.element,A,1!=j);0!==j&&(mt=j<0?mt.slice(mt.length+j,mt.length):mt.slice(0,j)),Le.push(...mt)}return!be&&0==Le.length&&Pe.push(`\`query("${M}")\` returned zero elements. (Use \`query("${M}", { optional: true })\` if you wish to allow this.)`),Le}}class wr{constructor(A,M,j,ae){this._driver=A,this.element=M,this.startTime=j,this._elementTimelineStylesLookup=ae,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(M),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(M,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(A){const M=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||M?(this.forwardTime(this.currentTime+A),M&&this.snapshotCurrentStyles()):this.startTime+=A}fork(A,M){return this.applyStylesToKeyframe(),new wr(this._driver,A,M||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(A){this.applyStylesToKeyframe(),this.duration=A,this._loadKeyframe()}_updateStyle(A,M){this._localTimelineStyles[A]=M,this._globalTimelineStyles[A]=M,this._styleSummary[A]={time:this.currentTime,value:M}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(A){A&&(this._previousKeyframe.easing=A),Object.keys(this._globalTimelineStyles).forEach(M=>{this._backFill[M]=this._globalTimelineStyles[M]||X.l3,this._currentKeyframe[M]=X.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(A,M,j,ae){M&&(this._previousKeyframe.easing=M);const be=ae&&ae.params||{},Pe=function(oe,A){const M={};let j;return oe.forEach(ae=>{"*"===ae?(j=j||Object.keys(A),j.forEach(be=>{M[be]=X.l3})):An(ae,!1,M)}),M}(A,this._globalTimelineStyles);Object.keys(Pe).forEach(Le=>{const lt=Zn(Pe[Le],be,j);this._pendingStyles[Le]=lt,this._localTimelineStyles.hasOwnProperty(Le)||(this._backFill[Le]=this._globalTimelineStyles.hasOwnProperty(Le)?this._globalTimelineStyles[Le]:X.l3),this._updateStyle(Le,lt)})}applyStylesToKeyframe(){const A=this._pendingStyles,M=Object.keys(A);0!=M.length&&(this._pendingStyles={},M.forEach(j=>{this._currentKeyframe[j]=A[j]}),Object.keys(this._localTimelineStyles).forEach(j=>{this._currentKeyframe.hasOwnProperty(j)||(this._currentKeyframe[j]=this._localTimelineStyles[j])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(A=>{const M=this._localTimelineStyles[A];this._pendingStyles[A]=M,this._updateStyle(A,M)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const A=[];for(let M in this._currentKeyframe)A.push(M);return A}mergeTimelineCollectedStyles(A){Object.keys(A._styleSummary).forEach(M=>{const j=this._styleSummary[M],ae=A._styleSummary[M];(!j||ae.time>j.time)&&this._updateStyle(M,ae.value)})}buildKeyframes(){this.applyStylesToKeyframe();const A=new Set,M=new Set,j=1===this._keyframes.size&&0===this.duration;let ae=[];this._keyframes.forEach((Le,lt)=>{const mt=An(Le,!0);Object.keys(mt).forEach(qt=>{const xn=mt[qt];xn==X.k1?A.add(qt):xn==X.l3&&M.add(qt)}),j||(mt.offset=lt/this.duration),ae.push(mt)});const be=A.size?Dt(A.values()):[],Pe=M.size?Dt(M.values()):[];if(j){const Le=ae[0],lt=Jn(Le);Le.offset=0,lt.offset=1,ae=[Le,lt]}return Er(this.element,ae,be,Pe,this.duration,this.startTime,this.easing,!1)}}class Xt extends wr{constructor(A,M,j,ae,be,Pe,Le=!1){super(A,M,Pe.delay),this.keyframes=j,this.preStyleProps=ae,this.postStyleProps=be,this._stretchStartingKeyframe=Le,this.timings={duration:Pe.duration,delay:Pe.delay,easing:Pe.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let A=this.keyframes,{delay:M,duration:j,easing:ae}=this.timings;if(this._stretchStartingKeyframe&&M){const be=[],Pe=j+M,Le=M/Pe,lt=An(A[0],!1);lt.offset=0,be.push(lt);const mt=An(A[0],!1);mt.offset=dn(Le),be.push(mt);const qt=A.length-1;for(let xn=1;xn<=qt;xn++){let ur=An(A[xn],!1);ur.offset=dn((M+ur.offset*j)/Pe),be.push(ur)}j=Pe,M=0,ae="",A=be}return Er(this.element,A,this.preStyleProps,this.postStyleProps,j,M,ae,!0)}}function dn(oe,A=3){const M=Math.pow(10,A-1);return Math.round(oe*M)/M}class Ti{}class Xr extends Ti{normalizePropertyName(A,M){return ze(A)}normalizeStyleValue(A,M,j,ae){let be="";const Pe=j.toString().trim();if(Co[M]&&0!==j&&"0"!==j)if("number"==typeof j)be="px";else{const Le=j.match(/^[+-]?[\d\.]+([a-z]*)$/);Le&&0==Le[1].length&&ae.push(`Please provide a CSS unit value for ${A}:${j}`)}return Pe+be}}const Co=(()=>function(oe){const A={};return oe.forEach(M=>A[M]=!0),A}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function We(oe,A,M,j,ae,be,Pe,Le,lt,mt,qt,xn,ur){return{type:0,element:oe,triggerName:A,isRemovalTransition:ae,fromState:M,fromStyles:be,toState:j,toStyles:Pe,timelines:Le,queriedElements:lt,preStyleProps:mt,postStyleProps:qt,totalTime:xn,errors:ur}}const B={};class te{constructor(A,M,j){this._triggerName=A,this.ast=M,this._stateStyles=j}match(A,M,j,ae){return function(oe,A,M,j,ae){return oe.some(be=>be(A,M,j,ae))}(this.ast.matchers,A,M,j,ae)}buildStyles(A,M,j){const ae=this._stateStyles["*"],be=this._stateStyles[A],Pe=ae?ae.buildStyles(M,j):{};return be?be.buildStyles(M,j):Pe}build(A,M,j,ae,be,Pe,Le,lt,mt,qt){const xn=[],ur=this.ast.options&&this.ast.options.params||B,zn=this.buildStyles(j,Le&&Le.params||B,xn),Fn=lt&&lt.params||B,gr=this.buildStyles(ae,Fn,xn),oi=new Set,Vr=new Map,Ji=new Map,si="void"===ae,Oo={params:Object.assign(Object.assign({},ur),Fn)},To=qt?[]:ar(A,M,this.ast.animation,be,Pe,zn,gr,Oo,mt,xn);let ai=0;if(To.forEach($o=>{ai=Math.max($o.duration+$o.delay,ai)}),xn.length)return We(M,this._triggerName,j,ae,si,zn,gr,[],[],Vr,Ji,ai,xn);To.forEach($o=>{const Fi=$o.element,ya=Se(Vr,Fi,{});$o.preStyleProps.forEach(ui=>ya[ui]=!0);const va=Se(Ji,Fi,{});$o.postStyleProps.forEach(ui=>va[ui]=!0),Fi!==M&&oi.add(Fi)});const Ro=Dt(oi.values());return We(M,this._triggerName,j,ae,si,zn,gr,To,Ro,Vr,Ji,ai)}}class ke{constructor(A,M,j){this.styles=A,this.defaultParams=M,this.normalizer=j}buildStyles(A,M){const j={},ae=Jn(this.defaultParams);return Object.keys(A).forEach(be=>{const Pe=A[be];null!=Pe&&(ae[be]=Pe)}),this.styles.styles.forEach(be=>{if("string"!=typeof be){const Pe=be;Object.keys(Pe).forEach(Le=>{let lt=Pe[Le];lt.length>1&&(lt=Zn(lt,ae,M));const mt=this.normalizer.normalizePropertyName(Le,M);lt=this.normalizer.normalizeStyleValue(Le,mt,lt,M),j[mt]=lt})}}),j}}class Yt{constructor(A,M,j){this.name=A,this.ast=M,this._normalizer=j,this.transitionFactories=[],this.states={},M.states.forEach(ae=>{this.states[ae.name]=new ke(ae.style,ae.options&&ae.options.params||{},j)}),ln(this.states,"true","1"),ln(this.states,"false","0"),M.transitions.forEach(ae=>{this.transitionFactories.push(new te(A,ae,this.states))}),this.fallbackTransition=function(oe,A,M){return new te(oe,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Pe,Le)=>!0],options:null,queryCount:0,depCount:0},A)}(A,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(A,M,j,ae){return this.transitionFactories.find(Pe=>Pe.match(A,M,j,ae))||null}matchStyles(A,M,j){return this.fallbackTransition.buildStyles(A,M,j)}}function ln(oe,A,M){oe.hasOwnProperty(A)?oe.hasOwnProperty(M)||(oe[M]=oe[A]):oe.hasOwnProperty(M)&&(oe[A]=oe[M])}const cn=new Ri;class Xn{constructor(A,M,j){this.bodyNode=A,this._driver=M,this._normalizer=j,this._animations={},this._playersById={},this.players=[]}register(A,M){const j=[],ae=Ye(this._driver,M,j);if(j.length)throw new Error(`Unable to build the animation due to the following errors: ${j.join("\n")}`);this._animations[A]=ae}_buildPlayer(A,M,j){const ae=A.element,be=Fe(0,this._normalizer,0,A.keyframes,M,j);return this._driver.animate(ae,be,A.duration,A.delay,A.easing,[],!0)}create(A,M,j={}){const ae=[],be=this._animations[A];let Pe;const Le=new Map;if(be?(Pe=ar(this._driver,M,be,un,Tn,{},{},j,cn,ae),Pe.forEach(qt=>{const xn=Se(Le,qt.element,{});qt.postStyleProps.forEach(ur=>xn[ur]=null)})):(ae.push("The requested animation doesn't exist or has already been destroyed"),Pe=[]),ae.length)throw new Error(`Unable to create the animation due to the following errors: ${ae.join("\n")}`);Le.forEach((qt,xn)=>{Object.keys(qt).forEach(ur=>{qt[ur]=this._driver.computeStyle(xn,ur,X.l3)})});const mt=Ee(Pe.map(qt=>{const xn=Le.get(qt.element);return this._buildPlayer(qt,{},xn)}));return this._playersById[A]=mt,mt.onDestroy(()=>this.destroy(A)),this.players.push(mt),mt}destroy(A){const M=this._getPlayer(A);M.destroy(),delete this._playersById[A];const j=this.players.indexOf(M);j>=0&&this.players.splice(j,1)}_getPlayer(A){const M=this._playersById[A];if(!M)throw new Error(`Unable to find the timeline player referenced by ${A}`);return M}listen(A,M,j,ae){const be=se(M,"","","");return fe(this._getPlayer(A),j,be,ae),()=>{}}command(A,M,j,ae){if("register"==j)return void this.register(A,ae[0]);if("create"==j)return void this.create(A,M,ae[0]||{});const be=this._getPlayer(A);switch(j){case"play":be.play();break;case"pause":be.pause();break;case"reset":be.reset();break;case"restart":be.restart();break;case"finish":be.finish();break;case"init":be.init();break;case"setPosition":be.setPosition(parseFloat(ae[0]));break;case"destroy":this.destroy(A)}}}const Gi="ng-animate-queued",Li="ng-animate-disabled",uo=".ng-animate-disabled",sr=[],jn={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Kr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Mr="__ng_removed";class zi{constructor(A,M=""){this.namespaceId=M;const j=A&&A.hasOwnProperty("value");if(this.value=null!=(oe=j?A.value:A)?oe:null,j){const be=Jn(A);delete be.value,this.options=be}else this.options={};var oe;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(A){const M=A.params;if(M){const j=this.options.params;Object.keys(M).forEach(ae=>{null==j[ae]&&(j[ae]=M[ae])})}}}const hi="void",qi=new zi(hi);class Ki{constructor(A,M,j){this.id=A,this.hostElement=M,this._engine=j,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+A,yi(M,this._hostClassName)}listen(A,M,j,ae){if(!this._triggers.hasOwnProperty(M))throw new Error(`Unable to listen on the animation trigger event "${j}" because the animation trigger "${M}" doesn't exist!`);if(null==j||0==j.length)throw new Error(`Unable to listen on the animation trigger "${M}" because the provided event is undefined!`);if("start"!=(oe=j)&&"done"!=oe)throw new Error(`The provided animation trigger event "${j}" for the animation trigger "${M}" is not supported!`);var oe;const be=Se(this._elementListeners,A,[]),Pe={name:M,phase:j,callback:ae};be.push(Pe);const Le=Se(this._engine.statesByElement,A,{});return Le.hasOwnProperty(M)||(yi(A,Ft),yi(A,Ft+"-"+M),Le[M]=qi),()=>{this._engine.afterFlush(()=>{const lt=be.indexOf(Pe);lt>=0&&be.splice(lt,1),this._triggers[M]||delete Le[M]})}}register(A,M){return!this._triggers[A]&&(this._triggers[A]=M,!0)}_getTrigger(A){const M=this._triggers[A];if(!M)throw new Error(`The provided animation trigger "${A}" has not been registered!`);return M}trigger(A,M,j,ae=!0){const be=this._getTrigger(M),Pe=new ds(this.id,M,A);let Le=this._engine.statesByElement.get(A);Le||(yi(A,Ft),yi(A,Ft+"-"+M),this._engine.statesByElement.set(A,Le={}));let lt=Le[M];const mt=new zi(j,this.id);if(!(j&&j.hasOwnProperty("value"))&&lt&&mt.absorbOptions(lt.options),Le[M]=mt,lt||(lt=qi),mt.value!==hi&&lt.value===mt.value){if(!function(oe,A){const M=Object.keys(oe),j=Object.keys(A);if(M.length!=j.length)return!1;for(let ae=0;ae<M.length;ae++){const be=M[ae];if(!A.hasOwnProperty(be)||oe[be]!==A[be])return!1}return!0}(lt.params,mt.params)){const Fn=[],gr=be.matchStyles(lt.value,lt.params,Fn),oi=be.matchStyles(mt.value,mt.params,Fn);Fn.length?this._engine.reportError(Fn):this._engine.afterFlush(()=>{kn(A,gr),Wt(A,oi)})}return}const ur=Se(this._engine.playersByElement,A,[]);ur.forEach(Fn=>{Fn.namespaceId==this.id&&Fn.triggerName==M&&Fn.queued&&Fn.destroy()});let Tr=be.matchTransition(lt.value,mt.value,A,mt.params),zn=!1;if(!Tr){if(!ae)return;Tr=be.fallbackTransition,zn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:A,triggerName:M,transition:Tr,fromState:lt,toState:mt,player:Pe,isFallbackTransition:zn}),zn||(yi(A,Gi),Pe.onStart(()=>{vi(A,Gi)})),Pe.onDone(()=>{let Fn=this.players.indexOf(Pe);Fn>=0&&this.players.splice(Fn,1);const gr=this._engine.playersByElement.get(A);if(gr){let oi=gr.indexOf(Pe);oi>=0&&gr.splice(oi,1)}}),this.players.push(Pe),ur.push(Pe),Pe}deregister(A){delete this._triggers[A],this._engine.statesByElement.forEach((M,j)=>{delete M[A]}),this._elementListeners.forEach((M,j)=>{this._elementListeners.set(j,M.filter(ae=>ae.name!=A))})}clearElementCache(A){this._engine.statesByElement.delete(A),this._elementListeners.delete(A);const M=this._engine.playersByElement.get(A);M&&(M.forEach(j=>j.destroy()),this._engine.playersByElement.delete(A))}_signalRemovalForInnerTriggers(A,M){const j=this._engine.driver.query(A,Jt,!0);j.forEach(ae=>{if(ae[Mr])return;const be=this._engine.fetchNamespacesByElement(ae);be.size?be.forEach(Pe=>Pe.triggerLeaveAnimation(ae,M,!1,!0)):this.clearElementCache(ae)}),this._engine.afterFlushAnimationsDone(()=>j.forEach(ae=>this.clearElementCache(ae)))}triggerLeaveAnimation(A,M,j,ae){const be=this._engine.statesByElement.get(A);if(be){const Pe=[];if(Object.keys(be).forEach(Le=>{if(this._triggers[Le]){const lt=this.trigger(A,Le,hi,ae);lt&&Pe.push(lt)}}),Pe.length)return this._engine.markElementAsRemoved(this.id,A,!0,M),j&&Ee(Pe).onDone(()=>this._engine.processLeaveNode(A)),!0}return!1}prepareLeaveAnimationListeners(A){const M=this._elementListeners.get(A),j=this._engine.statesByElement.get(A);if(M&&j){const ae=new Set;M.forEach(be=>{const Pe=be.name;if(ae.has(Pe))return;ae.add(Pe);const lt=this._triggers[Pe].fallbackTransition,mt=j[Pe]||qi,qt=new zi(hi),xn=new ds(this.id,Pe,A);this._engine.totalQueuedPlayers++,this._queue.push({element:A,triggerName:Pe,transition:lt,fromState:mt,toState:qt,player:xn,isFallbackTransition:!0})})}}removeNode(A,M){const j=this._engine;if(A.childElementCount&&this._signalRemovalForInnerTriggers(A,M),this.triggerLeaveAnimation(A,M,!0))return;let ae=!1;if(j.totalAnimations){const be=j.players.length?j.playersByQueriedElement.get(A):[];if(be&&be.length)ae=!0;else{let Pe=A;for(;Pe=Pe.parentNode;)if(j.statesByElement.get(Pe)){ae=!0;break}}}if(this.prepareLeaveAnimationListeners(A),ae)j.markElementAsRemoved(this.id,A,!1,M);else{const be=A[Mr];(!be||be===jn)&&(j.afterFlush(()=>this.clearElementCache(A)),j.destroyInnerAnimations(A),j._onRemovalComplete(A,M))}}insertNode(A,M){yi(A,this._hostClassName)}drainQueuedTransitions(A){const M=[];return this._queue.forEach(j=>{const ae=j.player;if(ae.destroyed)return;const be=j.element,Pe=this._elementListeners.get(be);Pe&&Pe.forEach(Le=>{if(Le.name==j.triggerName){const lt=se(be,j.triggerName,j.fromState.value,j.toState.value);lt._data=A,fe(j.player,Le.phase,lt,Le.callback)}}),ae.markedForDestroy?this._engine.afterFlush(()=>{ae.destroy()}):M.push(j)}),this._queue=[],M.sort((j,ae)=>{const be=j.transition.ast.depCount,Pe=ae.transition.ast.depCount;return 0==be||0==Pe?be-Pe:this._engine.driver.containsElement(j.element,ae.element)?1:-1})}destroy(A){this.players.forEach(M=>M.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,A)}elementContainsData(A){let M=!1;return this._elementListeners.has(A)&&(M=!0),M=!!this._queue.find(j=>j.element===A)||M,M}}class _i{constructor(A,M,j){this.bodyNode=A,this.driver=M,this._normalizer=j,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(ae,be)=>{}}_onRemovalComplete(A,M){this.onRemovalComplete(A,M)}get queuedPlayers(){const A=[];return this._namespaceList.forEach(M=>{M.players.forEach(j=>{j.queued&&A.push(j)})}),A}createNamespace(A,M){const j=new Ki(A,M,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,M)?this._balanceNamespaceList(j,M):(this.newHostElements.set(M,j),this.collectEnterElement(M)),this._namespaceLookup[A]=j}_balanceNamespaceList(A,M){const j=this._namespaceList.length-1;if(j>=0){let ae=!1;for(let be=j;be>=0;be--)if(this.driver.containsElement(this._namespaceList[be].hostElement,M)){this._namespaceList.splice(be+1,0,A),ae=!0;break}ae||this._namespaceList.splice(0,0,A)}else this._namespaceList.push(A);return this.namespacesByHostElement.set(M,A),A}register(A,M){let j=this._namespaceLookup[A];return j||(j=this.createNamespace(A,M)),j}registerTrigger(A,M,j){let ae=this._namespaceLookup[A];ae&&ae.register(M,j)&&this.totalAnimations++}destroy(A,M){if(!A)return;const j=this._fetchNamespace(A);this.afterFlush(()=>{this.namespacesByHostElement.delete(j.hostElement),delete this._namespaceLookup[A];const ae=this._namespaceList.indexOf(j);ae>=0&&this._namespaceList.splice(ae,1)}),this.afterFlushAnimationsDone(()=>j.destroy(M))}_fetchNamespace(A){return this._namespaceLookup[A]}fetchNamespacesByElement(A){const M=new Set,j=this.statesByElement.get(A);if(j){const ae=Object.keys(j);for(let be=0;be<ae.length;be++){const Pe=j[ae[be]].namespaceId;if(Pe){const Le=this._fetchNamespace(Pe);Le&&M.add(Le)}}}return M}trigger(A,M,j,ae){if(Zi(M)){const be=this._fetchNamespace(A);if(be)return be.trigger(M,j,ae),!0}return!1}insertNode(A,M,j,ae){if(!Zi(M))return;const be=M[Mr];if(be&&be.setForRemoval){be.setForRemoval=!1,be.setForMove=!0;const Pe=this.collectedLeaveElements.indexOf(M);Pe>=0&&this.collectedLeaveElements.splice(Pe,1)}if(A){const Pe=this._fetchNamespace(A);Pe&&Pe.insertNode(M,j)}ae&&this.collectEnterElement(M)}collectEnterElement(A){this.collectedEnterElements.push(A)}markElementAsDisabled(A,M){M?this.disabledNodes.has(A)||(this.disabledNodes.add(A),yi(A,Li)):this.disabledNodes.has(A)&&(this.disabledNodes.delete(A),vi(A,Li))}removeNode(A,M,j,ae){if(Zi(M)){const be=A?this._fetchNamespace(A):null;if(be?be.removeNode(M,ae):this.markElementAsRemoved(A,M,!1,ae),j){const Pe=this.namespacesByHostElement.get(M);Pe&&Pe.id!==A&&Pe.removeNode(M,ae)}}else this._onRemovalComplete(M,ae)}markElementAsRemoved(A,M,j,ae){this.collectedLeaveElements.push(M),M[Mr]={namespaceId:A,setForRemoval:ae,hasAnimation:j,removedBeforeQueried:!1}}listen(A,M,j,ae,be){return Zi(M)?this._fetchNamespace(A).listen(M,j,ae,be):()=>{}}_buildInstruction(A,M,j,ae,be){return A.transition.build(this.driver,A.element,A.fromState.value,A.toState.value,j,ae,A.fromState.options,A.toState.options,M,be)}destroyInnerAnimations(A){let M=this.driver.query(A,Jt,!0);M.forEach(j=>this.destroyActiveAnimationsForElement(j)),0!=this.playersByQueriedElement.size&&(M=this.driver.query(A,Pn,!0),M.forEach(j=>this.finishActiveQueriedAnimationOnElement(j)))}destroyActiveAnimationsForElement(A){const M=this.playersByElement.get(A);M&&M.forEach(j=>{j.queued?j.markedForDestroy=!0:j.destroy()})}finishActiveQueriedAnimationOnElement(A){const M=this.playersByQueriedElement.get(A);M&&M.forEach(j=>j.finish())}whenRenderingDone(){return new Promise(A=>{if(this.players.length)return Ee(this.players).onDone(()=>A());A()})}processLeaveNode(A){const M=A[Mr];if(M&&M.setForRemoval){if(A[Mr]=jn,M.namespaceId){this.destroyInnerAnimations(A);const j=this._fetchNamespace(M.namespaceId);j&&j.clearElementCache(A)}this._onRemovalComplete(A,M.setForRemoval)}this.driver.matchesElement(A,uo)&&this.markElementAsDisabled(A,!1),this.driver.query(A,uo,!0).forEach(j=>{this.markElementAsDisabled(j,!1)})}flush(A=-1){let M=[];if(this.newHostElements.size&&(this.newHostElements.forEach((j,ae)=>this._balanceNamespaceList(j,ae)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let j=0;j<this.collectedEnterElements.length;j++)yi(this.collectedEnterElements[j],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const j=[];try{M=this._flushAnimations(j,A)}finally{for(let ae=0;ae<j.length;ae++)j[ae]()}}else for(let j=0;j<this.collectedLeaveElements.length;j++)this.processLeaveNode(this.collectedLeaveElements[j]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(j=>j()),this._flushFns=[],this._whenQuietFns.length){const j=this._whenQuietFns;this._whenQuietFns=[],M.length?Ee(M).onDone(()=>{j.forEach(ae=>ae())}):j.forEach(ae=>ae())}}reportError(A){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${A.join("\n")}`)}_flushAnimations(A,M){const j=new Ri,ae=[],be=new Map,Pe=[],Le=new Map,lt=new Map,mt=new Map,qt=new Set;this.disabledNodes.forEach(vn=>{qt.add(vn);const On=this.driver.query(vn,".ng-animate-queued",!0);for(let $n=0;$n<On.length;$n++)qt.add(On[$n])});const xn=this.bodyNode,ur=Array.from(this.statesByElement.keys()),Tr=Us(ur,this.collectedEnterElements),zn=new Map;let Fn=0;Tr.forEach((vn,On)=>{const $n=un+Fn++;zn.set(On,$n),vn.forEach(Rr=>yi(Rr,$n))});const gr=[],oi=new Set,Vr=new Set;for(let vn=0;vn<this.collectedLeaveElements.length;vn++){const On=this.collectedLeaveElements[vn],$n=On[Mr];$n&&$n.setForRemoval&&(gr.push(On),oi.add(On),$n.hasAnimation?this.driver.query(On,".ng-star-inserted",!0).forEach(Rr=>oi.add(Rr)):Vr.add(On))}const Ji=new Map,si=Us(ur,Array.from(oi));si.forEach((vn,On)=>{const $n=Tn+Fn++;Ji.set(On,$n),vn.forEach(Rr=>yi(Rr,$n))}),A.push(()=>{Tr.forEach((vn,On)=>{const $n=zn.get(On);vn.forEach(Rr=>vi(Rr,$n))}),si.forEach((vn,On)=>{const $n=Ji.get(On);vn.forEach(Rr=>vi(Rr,$n))}),gr.forEach(vn=>{this.processLeaveNode(vn)})});const Oo=[],To=[];for(let vn=this._namespaceList.length-1;vn>=0;vn--)this._namespaceList[vn].drainQueuedTransitions(M).forEach($n=>{const Rr=$n.player,br=$n.element;if(Oo.push(Rr),this.collectedEnterElements.length){const Ai=br[Mr];if(Ai&&Ai.setForMove)return void Rr.destroy()}const Si=!xn||!this.driver.containsElement(xn,br),Ei=Ji.get(br),ro=zn.get(br),Qr=this._buildInstruction($n,j,ro,Ei,Si);if(Qr.errors&&Qr.errors.length)To.push(Qr);else{if(Si)return Rr.onStart(()=>kn(br,Qr.fromStyles)),Rr.onDestroy(()=>Wt(br,Qr.toStyles)),void ae.push(Rr);if($n.isFallbackTransition)return Rr.onStart(()=>kn(br,Qr.fromStyles)),Rr.onDestroy(()=>Wt(br,Qr.toStyles)),void ae.push(Rr);Qr.timelines.forEach(Ai=>Ai.stretchStartingKeyframe=!0),j.append(br,Qr.timelines),Pe.push({instruction:Qr,player:Rr,element:br}),Qr.queriedElements.forEach(Ai=>Se(Le,Ai,[]).push(Rr)),Qr.preStyleProps.forEach((Ai,Bs)=>{const Wi=Object.keys(Ai);if(Wi.length){let ti=lt.get(Bs);ti||lt.set(Bs,ti=new Set),Wi.forEach(xs=>ti.add(xs))}}),Qr.postStyleProps.forEach((Ai,Bs)=>{const Wi=Object.keys(Ai);let ti=mt.get(Bs);ti||mt.set(Bs,ti=new Set),Wi.forEach(xs=>ti.add(xs))})}});if(To.length){const vn=[];To.forEach(On=>{vn.push(`@${On.triggerName} has failed due to:\n`),On.errors.forEach($n=>vn.push(`- ${$n}\n`))}),Oo.forEach(On=>On.destroy()),this.reportError(vn)}const ai=new Map,Ro=new Map;Pe.forEach(vn=>{const On=vn.element;j.has(On)&&(Ro.set(On,On),this._beforeAnimationBuild(vn.player.namespaceId,vn.instruction,ai))}),ae.forEach(vn=>{const On=vn.element;this._getPreviousPlayers(On,!1,vn.namespaceId,vn.triggerName,null).forEach(Rr=>{Se(ai,On,[]).push(Rr),Rr.destroy()})});const $o=gr.filter(vn=>Pi(vn,lt,mt)),Fi=new Map;hs(Fi,this.driver,Vr,mt,X.l3).forEach(vn=>{Pi(vn,lt,mt)&&$o.push(vn)});const va=new Map;Tr.forEach((vn,On)=>{hs(va,this.driver,new Set(vn),lt,X.k1)}),$o.forEach(vn=>{const On=Fi.get(vn),$n=va.get(vn);Fi.set(vn,Object.assign(Object.assign({},On),$n))});const ui=[],$i=[],pi={};Pe.forEach(vn=>{const{element:On,player:$n,instruction:Rr}=vn;if(j.has(On)){if(qt.has(On))return $n.onDestroy(()=>Wt(On,Rr.toStyles)),$n.disabled=!0,$n.overrideTotalTime(Rr.totalTime),void ae.push($n);let br=pi;if(Ro.size>1){let Ei=On;const ro=[];for(;Ei=Ei.parentNode;){const Qr=Ro.get(Ei);if(Qr){br=Qr;break}ro.push(Ei)}ro.forEach(Qr=>Ro.set(Qr,br))}const Si=this._buildAnimation($n.namespaceId,Rr,ai,be,va,Fi);if($n.setRealPlayer(Si),br===pi)ui.push($n);else{const Ei=this.playersByElement.get(br);Ei&&Ei.length&&($n.parentPlayer=Ee(Ei)),ae.push($n)}}else kn(On,Rr.fromStyles),$n.onDestroy(()=>Wt(On,Rr.toStyles)),$i.push($n),qt.has(On)&&ae.push($n)}),$i.forEach(vn=>{const On=be.get(vn.element);if(On&&On.length){const $n=Ee(On);vn.setRealPlayer($n)}}),ae.forEach(vn=>{vn.parentPlayer?vn.syncPlayerEvents(vn.parentPlayer):vn.destroy()});for(let vn=0;vn<gr.length;vn++){const On=gr[vn],$n=On[Mr];if(vi(On,Tn),$n&&$n.hasAnimation)continue;let Rr=[];if(Le.size){let Si=Le.get(On);Si&&Si.length&&Rr.push(...Si);let Ei=this.driver.query(On,Pn,!0);for(let ro=0;ro<Ei.length;ro++){let Qr=Le.get(Ei[ro]);Qr&&Qr.length&&Rr.push(...Qr)}}const br=Rr.filter(Si=>!Si.destroyed);br.length?ir(this,On,br):this.processLeaveNode(On)}return gr.length=0,ui.forEach(vn=>{this.players.push(vn),vn.onDone(()=>{vn.destroy();const On=this.players.indexOf(vn);this.players.splice(On,1)}),vn.play()}),ui}elementContainsData(A,M){let j=!1;const ae=M[Mr];return ae&&ae.setForRemoval&&(j=!0),this.playersByElement.has(M)&&(j=!0),this.playersByQueriedElement.has(M)&&(j=!0),this.statesByElement.has(M)&&(j=!0),this._fetchNamespace(A).elementContainsData(M)||j}afterFlush(A){this._flushFns.push(A)}afterFlushAnimationsDone(A){this._whenQuietFns.push(A)}_getPreviousPlayers(A,M,j,ae,be){let Pe=[];if(M){const Le=this.playersByQueriedElement.get(A);Le&&(Pe=Le)}else{const Le=this.playersByElement.get(A);if(Le){const lt=!be||be==hi;Le.forEach(mt=>{mt.queued||!lt&&mt.triggerName!=ae||Pe.push(mt)})}}return(j||ae)&&(Pe=Pe.filter(Le=>!(j&&j!=Le.namespaceId||ae&&ae!=Le.triggerName))),Pe}_beforeAnimationBuild(A,M,j){const be=M.element,Pe=M.isRemovalTransition?void 0:A,Le=M.isRemovalTransition?void 0:M.triggerName;for(const lt of M.timelines){const mt=lt.element,qt=mt!==be,xn=Se(j,mt,[]);this._getPreviousPlayers(mt,qt,Pe,Le,M.toState).forEach(Tr=>{const zn=Tr.getRealPlayer();zn.beforeDestroy&&zn.beforeDestroy(),Tr.destroy(),xn.push(Tr)})}kn(be,M.fromStyles)}_buildAnimation(A,M,j,ae,be,Pe){const Le=M.triggerName,lt=M.element,mt=[],qt=new Set,xn=new Set,ur=M.timelines.map(zn=>{const Fn=zn.element;qt.add(Fn);const gr=Fn[Mr];if(gr&&gr.removedBeforeQueried)return new X.ZN(zn.duration,zn.delay);const oi=Fn!==lt,Vr=function(oe){const A=[];return to(oe,A),A}((j.get(Fn)||sr).map(ai=>ai.getRealPlayer())).filter(ai=>!!ai.element&&ai.element===Fn),Ji=be.get(Fn),si=Pe.get(Fn),Oo=Fe(0,this._normalizer,0,zn.keyframes,Ji,si),To=this._buildPlayer(zn,Oo,Vr);if(zn.subTimeline&&ae&&xn.add(Fn),oi){const ai=new ds(A,Le,Fn);ai.setRealPlayer(To),mt.push(ai)}return To});mt.forEach(zn=>{Se(this.playersByQueriedElement,zn.element,[]).push(zn),zn.onDone(()=>function(oe,A,M){let j;if(oe instanceof Map){if(j=oe.get(A),j){if(j.length){const ae=j.indexOf(M);j.splice(ae,1)}0==j.length&&oe.delete(A)}}else if(j=oe[A],j){if(j.length){const ae=j.indexOf(M);j.splice(ae,1)}0==j.length&&delete oe[A]}return j}(this.playersByQueriedElement,zn.element,zn))}),qt.forEach(zn=>yi(zn,Ht));const Tr=Ee(ur);return Tr.onDestroy(()=>{qt.forEach(zn=>vi(zn,Ht)),Wt(lt,M.toStyles)}),xn.forEach(zn=>{Se(ae,zn,[]).push(Tr)}),Tr}_buildPlayer(A,M,j){return M.length>0?this.driver.animate(A.element,M,A.duration,A.delay,A.easing,j):new X.ZN(A.duration,A.delay)}}class ds{constructor(A,M,j){this.namespaceId=A,this.triggerName=M,this.element=j,this._player=new X.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(A){this._containsRealPlayer||(this._player=A,Object.keys(this._queuedCallbacks).forEach(M=>{this._queuedCallbacks[M].forEach(j=>fe(A,M,void 0,j))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(A.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(A){this.totalTime=A}syncPlayerEvents(A){const M=this._player;M.triggerCallback&&A.onStart(()=>M.triggerCallback("start")),A.onDone(()=>this.finish()),A.onDestroy(()=>this.destroy())}_queueEvent(A,M){Se(this._queuedCallbacks,A,[]).push(M)}onDone(A){this.queued&&this._queueEvent("done",A),this._player.onDone(A)}onStart(A){this.queued&&this._queueEvent("start",A),this._player.onStart(A)}onDestroy(A){this.queued&&this._queueEvent("destroy",A),this._player.onDestroy(A)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(A){this.queued||this._player.setPosition(A)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(A){const M=this._player;M.triggerCallback&&M.triggerCallback(A)}}function Zi(oe){return oe&&1===oe.nodeType}function No(oe,A){const M=oe.style.display;return oe.style.display=null!=A?A:"none",M}function hs(oe,A,M,j,ae){const be=[];M.forEach(lt=>be.push(No(lt)));const Pe=[];j.forEach((lt,mt)=>{const qt={};lt.forEach(xn=>{const ur=qt[xn]=A.computeStyle(mt,xn,ae);(!ur||0==ur.length)&&(mt[Mr]=Kr,Pe.push(mt))}),oe.set(mt,qt)});let Le=0;return M.forEach(lt=>No(lt,be[Le++])),Pe}function Us(oe,A){const M=new Map;if(oe.forEach(Le=>M.set(Le,[])),0==A.length)return M;const ae=new Set(A),be=new Map;function Pe(Le){if(!Le)return 1;let lt=be.get(Le);if(lt)return lt;const mt=Le.parentNode;return lt=M.has(mt)?mt:ae.has(mt)?1:Pe(mt),be.set(Le,lt),lt}return A.forEach(Le=>{const lt=Pe(Le);1!==lt&&M.get(lt).push(Le)}),M}const rs="$$classes";function yi(oe,A){if(oe.classList)oe.classList.add(A);else{let M=oe[rs];M||(M=oe[rs]={}),M[A]=!0}}function vi(oe,A){if(oe.classList)oe.classList.remove(A);else{let M=oe[rs];M&&delete M[A]}}function ir(oe,A,M){Ee(M).onDone(()=>oe.processLeaveNode(A))}function to(oe,A){for(let M=0;M<oe.length;M++){const j=oe[M];j instanceof X.ZE?to(j.players,A):A.push(j)}}function Pi(oe,A,M){const j=M.get(oe);if(!j)return!1;let ae=A.get(oe);return ae?j.forEach(be=>ae.add(be)):A.set(oe,j),M.delete(oe),!0}class co{constructor(A,M,j){this.bodyNode=A,this._driver=M,this._normalizer=j,this._triggerCache={},this.onRemovalComplete=(ae,be)=>{},this._transitionEngine=new _i(A,M,j),this._timelineEngine=new Xn(A,M,j),this._transitionEngine.onRemovalComplete=(ae,be)=>this.onRemovalComplete(ae,be)}registerTrigger(A,M,j,ae,be){const Pe=A+"-"+ae;let Le=this._triggerCache[Pe];if(!Le){const lt=[],mt=Ye(this._driver,be,lt);if(lt.length)throw new Error(`The animation trigger "${ae}" has failed to build due to the following errors:\n - ${lt.join("\n - ")}`);Le=function(oe,A,M){return new Yt(oe,A,M)}(ae,mt,this._normalizer),this._triggerCache[Pe]=Le}this._transitionEngine.registerTrigger(M,ae,Le)}register(A,M){this._transitionEngine.register(A,M)}destroy(A,M){this._transitionEngine.destroy(A,M)}onInsert(A,M,j,ae){this._transitionEngine.insertNode(A,M,j,ae)}onRemove(A,M,j,ae){this._transitionEngine.removeNode(A,M,ae||!1,j)}disableAnimations(A,M){this._transitionEngine.markElementAsDisabled(A,M)}process(A,M,j,ae){if("@"==j.charAt(0)){const[be,Pe]=me(j);this._timelineEngine.command(be,M,Pe,ae)}else this._transitionEngine.trigger(A,M,j,ae)}listen(A,M,j,ae,be){if("@"==j.charAt(0)){const[Pe,Le]=me(j);return this._timelineEngine.listen(Pe,M,Le,be)}return this._transitionEngine.listen(A,M,j,ae,be)}flush(A=-1){this._transitionEngine.flush(A)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function fi(oe,A){let M=null,j=null;return Array.isArray(A)&&A.length?(M=bi(A[0]),A.length>1&&(j=bi(A[A.length-1]))):A&&(M=bi(A)),M||j?new ko(oe,M,j):null}let ko=(()=>{class oe{constructor(M,j,ae){this._element=M,this._startStyles=j,this._endStyles=ae,this._state=0;let be=oe.initialStylesByElement.get(M);be||oe.initialStylesByElement.set(M,be={}),this._initialStyles=be}start(){this._state<1&&(this._startStyles&&Wt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Wt(this._element,this._initialStyles),this._endStyles&&(Wt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(oe.initialStylesByElement.delete(this._element),this._startStyles&&(kn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(kn(this._element,this._endStyles),this._endStyles=null),Wt(this._element,this._initialStyles),this._state=3)}}return oe.initialStylesByElement=new WeakMap,oe})();function bi(oe){let A=null;const M=Object.keys(oe);for(let j=0;j<M.length;j++){const ae=M[j];Eo(ae)&&(A=A||{},A[ae]=oe[ae])}return A}function Eo(oe){return"display"===oe||"position"===oe}const is="animation",wo="animationend";class Or{constructor(A,M,j,ae,be,Pe,Le){this._element=A,this._name=M,this._duration=j,this._delay=ae,this._easing=be,this._fillMode=Pe,this._onDoneFn=Le,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=lt=>this._handleCallback(lt)}apply(){(function(oe,A){const M=lr(oe,"").trim();let j=0;M.length&&(function(oe,A){let M=0;for(let j=0;j<oe.length;j++)","===oe.charAt(j)&&M++;return M}(M)+1,A=`${M}, ${A}`),kr(oe,"",A)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Vo(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){no(this._element,this._name,"paused")}resume(){no(this._element,this._name,"running")}setPosition(A){const M=Lo(this._element,this._name);this._position=A*this._duration,kr(this._element,"Delay",`-${this._position}ms`,M)}getPosition(){return this._position}_handleCallback(A){const M=A._ngTestManualTimestamp||Date.now(),j=1e3*parseFloat(A.elapsedTime.toFixed(3));A.animationName==this._name&&Math.max(M-this._startTime,0)>=this._delay&&j>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Vo(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(oe,A){const j=lr(oe,"").split(","),ae=Ci(j,A);ae>=0&&(j.splice(ae,1),kr(oe,"",j.join(",")))}(this._element,this._name))}}function no(oe,A,M){kr(oe,"PlayState",M,Lo(oe,A))}function Lo(oe,A){const M=lr(oe,"");return M.indexOf(",")>0?Ci(M.split(","),A):Ci([M],A)}function Ci(oe,A){for(let M=0;M<oe.length;M++)if(oe[M].indexOf(A)>=0)return M;return-1}function Vo(oe,A,M){M?oe.removeEventListener(wo,A):oe.addEventListener(wo,A)}function kr(oe,A,M,j){const ae=is+A;if(null!=j){const be=oe.style[ae];if(be.length){const Pe=be.split(",");Pe[j]=M,M=Pe.join(",")}}oe.style[ae]=M}function lr(oe,A){return oe.style[is+A]||""}class Z{constructor(A,M,j,ae,be,Pe,Le,lt){this.element=A,this.keyframes=M,this.animationName=j,this._duration=ae,this._delay=be,this._finalStyles=Le,this._specialStyles=lt,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Pe||"linear",this.totalTime=ae+be,this._buildStyler()}onStart(A){this._onStartFns.push(A)}onDone(A){this._onDoneFns.push(A)}onDestroy(A){this._onDestroyFns.push(A)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(A=>A()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(A=>A()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(A=>A()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(A){this._styler.setPosition(A)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Or(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(A){const M="start"==A?this._onStartFns:this._onDoneFns;M.forEach(j=>j()),M.length=0}beforeDestroy(){this.init();const A={};if(this.hasStarted()){const M=this._state>=3;Object.keys(this._finalStyles).forEach(j=>{"offset"!=j&&(A[j]=M?this._finalStyles[j]:He(this.element,j))})}this.currentSnapshot=A}}class ge extends X.ZN{constructor(A,M){super(),this.element=A,this._startingStyles={},this.__initialized=!1,this._styles=ot(M)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(A=>{this._startingStyles[A]=this.element.style[A]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(A=>this.element.style.setProperty(A,this._styles[A])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(A=>{const M=this._startingStyles[A];M?this.element.style.setProperty(A,M):this.element.style.removeProperty(A)}),this._startingStyles=null,super.destroy())}}class k{constructor(){this._count=0}validateStyleProperty(A){return Zt(A)}matchesElement(A,M){return Cn(A,M)}containsElement(A,M){return wt(A,M)}query(A,M,j){return Je(A,M,j)}computeStyle(A,M,j){return window.getComputedStyle(A)[M]}buildKeyframeElement(A,M,j){j=j.map(Le=>ot(Le));let ae=`@keyframes ${M} {\n`,be="";j.forEach(Le=>{be=" ";const lt=parseFloat(Le.offset);ae+=`${be}${100*lt}% {\n`,be+=" ",Object.keys(Le).forEach(mt=>{const qt=Le[mt];switch(mt){case"offset":return;case"easing":return void(qt&&(ae+=`${be}animation-timing-function: ${qt};\n`));default:return void(ae+=`${be}${mt}: ${qt};\n`)}}),ae+=`${be}}\n`}),ae+="}\n";const Pe=document.createElement("style");return Pe.textContent=ae,Pe}animate(A,M,j,ae,be,Pe=[],Le){const lt=Pe.filter(gr=>gr instanceof Z),mt={};xt(j,ae)&&lt.forEach(gr=>{let oi=gr.currentSnapshot;Object.keys(oi).forEach(Vr=>mt[Vr]=oi[Vr])});const qt=function(oe){let A={};return oe&&(Array.isArray(oe)?oe:[oe]).forEach(j=>{Object.keys(j).forEach(ae=>{"offset"==ae||"easing"==ae||(A[ae]=j[ae])})}),A}(M=sn(A,M,mt));if(0==j)return new ge(A,qt);const xn="gen_css_kf_"+this._count++,ur=this.buildKeyframeElement(A,xn,M);(function(oe){var A;const M=null===(A=oe.getRootNode)||void 0===A?void 0:A.call(oe);return"undefined"!=typeof ShadowRoot&&M instanceof ShadowRoot?M:document.head})(A).appendChild(ur);const zn=fi(A,M),Fn=new Z(A,M,xn,j,ae,be,qt,zn);return Fn.onDestroy(()=>{var oe;(oe=ur).parentNode.removeChild(oe)}),Fn}}class H{constructor(A,M,j,ae){this.element=A,this.keyframes=M,this.options=j,this._specialStyles=ae,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=j.duration,this._delay=j.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(A=>A()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const A=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,A,this.options),this._finalKeyframe=A.length?A[A.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(A,M,j){return A.animate(M,j)}onStart(A){this._onStartFns.push(A)}onDone(A){this._onDoneFns.push(A)}onDestroy(A){this._onDestroyFns.push(A)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(A=>A()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(A=>A()),this._onDestroyFns=[])}setPosition(A){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=A*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const A={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(M=>{"offset"!=M&&(A[M]=this._finished?this._finalKeyframe[M]:He(this.element,M))}),this.currentSnapshot=A}triggerCallback(A){const M="start"==A?this._onStartFns:this._onDoneFns;M.forEach(j=>j()),M.length=0}}class V{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test($e().toString()),this._cssKeyframesDriver=new k}validateStyleProperty(A){return Zt(A)}matchesElement(A,M){return Cn(A,M)}containsElement(A,M){return wt(A,M)}query(A,M,j){return Je(A,M,j)}computeStyle(A,M,j){return window.getComputedStyle(A)[M]}overrideWebAnimationsSupport(A){this._isNativeImpl=A}animate(A,M,j,ae,be,Pe=[],Le){if(!Le&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(A,M,j,ae,be,Pe);const qt={duration:j,delay:ae,fill:0==ae?"both":"forwards"};be&&(qt.easing=be);const xn={},ur=Pe.filter(zn=>zn instanceof H);xt(j,ae)&&ur.forEach(zn=>{let Fn=zn.currentSnapshot;Object.keys(Fn).forEach(gr=>xn[gr]=Fn[gr])});const Tr=fi(A,M=sn(A,M=M.map(zn=>An(zn,!1)),xn));return new H(A,M,qt,Tr)}}function $e(){return C()&&Element.prototype.animate||{}}var Rt=Q(8583);let wn=(()=>{class oe extends X._j{constructor(M,j){super(),this._nextAnimationId=0,this._renderer=M.createRenderer(j.body,{id:"0",encapsulation:P.ifc.None,styles:[],data:{animation:[]}})}build(M){const j=this._nextAnimationId.toString();this._nextAnimationId++;const ae=Array.isArray(M)?(0,X.vP)(M):M;return hr(this._renderer,null,j,"register",[ae]),new cr(j,this._renderer)}}return oe.\u0275fac=function(M){return new(M||oe)(P.LFG(P.FYo),P.LFG(Rt.K0))},oe.\u0275prov=P.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class cr extends X.LC{constructor(A,M){super(),this._id=A,this._renderer=M}create(A,M){return new Hr(this._id,A,M||{},this._renderer)}}class Hr{constructor(A,M,j,ae){this.id=A,this.element=M,this._renderer=ae,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",j)}_listen(A,M){return this._renderer.listen(this.element,`@@${this.id}:${A}`,M)}_command(A,...M){return hr(this._renderer,this.element,this.id,A,M)}onDone(A){this._listen("done",A)}onStart(A){this._listen("start",A)}onDestroy(A){this._listen("destroy",A)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(A){this._command("setPosition",A)}getPosition(){var A,M;return null!==(M=null===(A=this._renderer.engine.players[+this.id])||void 0===A?void 0:A.getPosition())&&void 0!==M?M:0}}function hr(oe,A,M,j,ae){return oe.setProperty(A,`@@${M}:${j}`,ae)}const ii="@.disabled";let Dn=(()=>{class oe{constructor(M,j,ae){this.delegate=M,this.engine=j,this._zone=ae,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),j.onRemovalComplete=(be,Pe)=>{Pe&&Pe.parentNode(be)&&Pe.removeChild(be.parentNode,be)}}createRenderer(M,j){const be=this.delegate.createRenderer(M,j);if(!(M&&j&&j.data&&j.data.animation)){let qt=this._rendererCache.get(be);return qt||(qt=new Qi("",be,this.engine),this._rendererCache.set(be,qt)),qt}const Pe=j.id,Le=j.id+"-"+this._currentId;this._currentId++,this.engine.register(Le,M);const lt=qt=>{Array.isArray(qt)?qt.forEach(lt):this.engine.registerTrigger(Pe,Le,M,qt.name,qt)};return j.data.animation.forEach(lt),new ys(this,Le,be,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(M,j,ae){M>=0&&M<this._microtaskId?this._zone.run(()=>j(ae)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(be=>{const[Pe,Le]=be;Pe(Le)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([j,ae]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return oe.\u0275fac=function(M){return new(M||oe)(P.LFG(P.FYo),P.LFG(co),P.LFG(P.R0b))},oe.\u0275prov=P.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class Qi{constructor(A,M,j){this.namespaceId=A,this.delegate=M,this.engine=j,this.destroyNode=this.delegate.destroyNode?ae=>M.destroyNode(ae):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(A,M){return this.delegate.createElement(A,M)}createComment(A){return this.delegate.createComment(A)}createText(A){return this.delegate.createText(A)}appendChild(A,M){this.delegate.appendChild(A,M),this.engine.onInsert(this.namespaceId,M,A,!1)}insertBefore(A,M,j,ae=!0){this.delegate.insertBefore(A,M,j),this.engine.onInsert(this.namespaceId,M,A,ae)}removeChild(A,M,j){this.engine.onRemove(this.namespaceId,M,this.delegate,j)}selectRootElement(A,M){return this.delegate.selectRootElement(A,M)}parentNode(A){return this.delegate.parentNode(A)}nextSibling(A){return this.delegate.nextSibling(A)}setAttribute(A,M,j,ae){this.delegate.setAttribute(A,M,j,ae)}removeAttribute(A,M,j){this.delegate.removeAttribute(A,M,j)}addClass(A,M){this.delegate.addClass(A,M)}removeClass(A,M){this.delegate.removeClass(A,M)}setStyle(A,M,j,ae){this.delegate.setStyle(A,M,j,ae)}removeStyle(A,M,j){this.delegate.removeStyle(A,M,j)}setProperty(A,M,j){"@"==M.charAt(0)&&M==ii?this.disableAnimations(A,!!j):this.delegate.setProperty(A,M,j)}setValue(A,M){this.delegate.setValue(A,M)}listen(A,M,j){return this.delegate.listen(A,M,j)}disableAnimations(A,M){this.engine.disableAnimations(A,M)}}class ys extends Qi{constructor(A,M,j,ae){super(M,j,ae),this.factory=A,this.namespaceId=M}setProperty(A,M,j){"@"==M.charAt(0)?"."==M.charAt(1)&&M==ii?this.disableAnimations(A,j=void 0===j||!!j):this.engine.process(this.namespaceId,A,M.substr(1),j):this.delegate.setProperty(A,M,j)}listen(A,M,j){if("@"==M.charAt(0)){const ae=function(oe){switch(oe){case"body":return document.body;case"document":return document;case"window":return window;default:return oe}}(A);let be=M.substr(1),Pe="";return"@"!=be.charAt(0)&&([be,Pe]=function(oe){const A=oe.indexOf(".");return[oe.substring(0,A),oe.substr(A+1)]}(be)),this.engine.listen(this.namespaceId,ae,be,Pe,Le=>{this.factory.scheduleListenerCallback(Le._data||-1,j,Le)})}return this.delegate.listen(A,M,j)}}let $u=(()=>{class oe extends co{constructor(M,j,ae){super(M.body,j,ae)}ngOnDestroy(){this.flush()}}return oe.\u0275fac=function(M){return new(M||oe)(P.LFG(Rt.K0),P.LFG(nt),P.LFG(Ti))},oe.\u0275prov=P.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const mr=new P.OlP("AnimationModuleType"),vs=[{provide:X._j,useClass:wn},{provide:Ti,useFactory:function(){return new Xr}},{provide:co,useClass:$u},{provide:P.FYo,useFactory:function(oe,A,M){return new Dn(oe,A,M)},deps:[g.se,co,P.R0b]}],xi=[{provide:nt,useFactory:function(){return"function"==typeof $e()?new V:new k}},{provide:mr,useValue:"BrowserAnimations"},...vs],Os=[{provide:nt,useClass:st},{provide:mr,useValue:"NoopAnimations"},...vs];let Rs=(()=>{class oe{static withConfig(M){return{ngModule:oe,providers:M.disableAnimations?Os:xi}}}return oe.\u0275fac=function(M){return new(M||oe)},oe.\u0275mod=P.oAB({type:oe}),oe.\u0275inj=P.cJS({providers:xi,imports:[g.b2]}),oe})()},9075:(jt,it,Q)=>{"use strict";Q.d(it,{b2:()=>Ri,q6:()=>Yr,se:()=>Jn});var P=Q(8583),g=Q(7716);class X extends P.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class C extends X{static makeCurrent(){(0,P.HT)(new C)}onAndCancel(te,ce,ke){return te.addEventListener(ce,ke,!1),()=>{te.removeEventListener(ce,ke,!1)}}dispatchEvent(te,ce){te.dispatchEvent(ce)}remove(te){te.parentNode&&te.parentNode.removeChild(te)}createElement(te,ce){return(ce=ce||this.getDefaultDocument()).createElement(te)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(te){return te.nodeType===Node.ELEMENT_NODE}isShadowRoot(te){return te instanceof DocumentFragment}getGlobalEventTarget(te,ce){return"window"===ce?window:"document"===ce?te:"body"===ce?te.body:null}getBaseHref(te){const ce=(Ve=Ve||document.querySelector("base"),Ve?Ve.getAttribute("href"):null);return null==ce?null:function(B){Fe=Fe||document.createElement("a"),Fe.setAttribute("href",B);const te=Fe.pathname;return"/"===te.charAt(0)?te:`/${te}`}(ce)}resetBaseElement(){Ve=null}getUserAgent(){return window.navigator.userAgent}getCookie(te){return(0,P.Mx)(document.cookie,te)}}let Fe,Ve=null;const ve=new g.OlP("TRANSITION_ID"),Se=[{provide:g.ip1,useFactory:function(B,te,ce){return()=>{ce.get(g.CZH).donePromise.then(()=>{const ke=(0,P.q)(),ut=te.querySelectorAll(`style[ng-transition="${B}"]`);for(let Yt=0;Yt<ut.length;Yt++)ke.remove(ut[Yt])})}},deps:[ve,P.K0,g.zs3],multi:!0}];class me{static init(){(0,g.VLi)(new me)}addToWindow(te){g.dqk.getAngularTestability=(ke,ut=!0)=>{const Yt=te.findTestabilityInTree(ke,ut);if(null==Yt)throw new Error("Could not find testability for element.");return Yt},g.dqk.getAllAngularTestabilities=()=>te.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>te.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(ke=>{const ut=g.dqk.getAllAngularTestabilities();let Yt=ut.length,En=!1;const ln=function(cn){En=En||cn,Yt--,0==Yt&&ke(En)};ut.forEach(function(cn){cn.whenStable(ln)})})}findTestabilityInTree(te,ce,ke){if(null==ce)return null;const ut=te.getTestability(ce);return null!=ut?ut:ke?(0,P.q)().isShadowRoot(ce)?this.findTestabilityInTree(te,ce.host,!0):this.findTestabilityInTree(te,ce.parentElement,!0):null}}let Ce=(()=>{class B{build(){return new XMLHttpRequest}}return B.\u0275fac=function(ce){return new(ce||B)},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac}),B})();const st=new g.OlP("EventManagerPlugins");let nt=(()=>{class B{constructor(ce,ke){this._zone=ke,this._eventNameToPlugin=new Map,ce.forEach(ut=>ut.manager=this),this._plugins=ce.slice().reverse()}addEventListener(ce,ke,ut){return this._findPluginFor(ke).addEventListener(ce,ke,ut)}addGlobalEventListener(ce,ke,ut){return this._findPluginFor(ke).addGlobalEventListener(ce,ke,ut)}getZone(){return this._zone}_findPluginFor(ce){const ke=this._eventNameToPlugin.get(ce);if(ke)return ke;const ut=this._plugins;for(let Yt=0;Yt<ut.length;Yt++){const En=ut[Yt];if(En.supports(ce))return this._eventNameToPlugin.set(ce,En),En}throw new Error(`No event manager plugin found for event ${ce}`)}}return B.\u0275fac=function(ce){return new(ce||B)(g.LFG(st),g.LFG(g.R0b))},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac}),B})();class yt{constructor(te){this._doc=te}addGlobalEventListener(te,ce,ke){const ut=(0,P.q)().getGlobalEventTarget(this._doc,te);if(!ut)throw new Error(`Unsupported event target ${ut} for event ${ce}`);return this.addEventListener(ut,ce,ke)}}let at=(()=>{class B{constructor(){this._stylesSet=new Set}addStyles(ce){const ke=new Set;ce.forEach(ut=>{this._stylesSet.has(ut)||(this._stylesSet.add(ut),ke.add(ut))}),this.onStylesAdded(ke)}onStylesAdded(ce){}getAllStyles(){return Array.from(this._stylesSet)}}return B.\u0275fac=function(ce){return new(ce||B)},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac}),B})(),tn=(()=>{class B extends at{constructor(ce){super(),this._doc=ce,this._hostNodes=new Map,this._hostNodes.set(ce.head,[])}_addStylesToHost(ce,ke,ut){ce.forEach(Yt=>{const En=this._doc.createElement("style");En.textContent=Yt,ut.push(ke.appendChild(En))})}addHost(ce){const ke=[];this._addStylesToHost(this._stylesSet,ce,ke),this._hostNodes.set(ce,ke)}removeHost(ce){const ke=this._hostNodes.get(ce);ke&&ke.forEach(un),this._hostNodes.delete(ce)}onStylesAdded(ce){this._hostNodes.forEach((ke,ut)=>{this._addStylesToHost(ce,ut,ke)})}ngOnDestroy(){this._hostNodes.forEach(ce=>ce.forEach(un))}}return B.\u0275fac=function(ce){return new(ce||B)(g.LFG(P.K0))},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac}),B})();function un(B){(0,P.q)().remove(B)}const Tn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},on=/%COMP%/g;function or(B,te,ce){for(let ke=0;ke<te.length;ke++){let ut=te[ke];Array.isArray(ut)?or(B,ut,ce):(ut=ut.replace(on,B),ce.push(ut))}return ce}function Gn(B){return te=>{if("__ngUnwrap__"===te)return B;!1===B(te)&&(te.preventDefault(),te.returnValue=!1)}}let Jn=(()=>{class B{constructor(ce,ke,ut){this.eventManager=ce,this.sharedStylesHost=ke,this.appId=ut,this.rendererByCompId=new Map,this.defaultRenderer=new Sn(ce)}createRenderer(ce,ke){if(!ce||!ke)return this.defaultRenderer;switch(ke.encapsulation){case g.ifc.Emulated:{let ut=this.rendererByCompId.get(ke.id);return ut||(ut=new Wt(this.eventManager,this.sharedStylesHost,ke,this.appId),this.rendererByCompId.set(ke.id,ut)),ut.applyToHost(ce),ut}case 1:case g.ifc.ShadowDom:return new kn(this.eventManager,this.sharedStylesHost,ce,ke);default:if(!this.rendererByCompId.has(ke.id)){const ut=or(ke.id,ke.styles,[]);this.sharedStylesHost.addStyles(ut),this.rendererByCompId.set(ke.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return B.\u0275fac=function(ce){return new(ce||B)(g.LFG(nt),g.LFG(tn),g.LFG(g.AFp))},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac}),B})();class Sn{constructor(te){this.eventManager=te,this.data=Object.create(null)}destroy(){}createElement(te,ce){return ce?document.createElementNS(Tn[ce]||ce,te):document.createElement(te)}createComment(te){return document.createComment(te)}createText(te){return document.createTextNode(te)}appendChild(te,ce){te.appendChild(ce)}insertBefore(te,ce,ke){te&&te.insertBefore(ce,ke)}removeChild(te,ce){te&&te.removeChild(ce)}selectRootElement(te,ce){let ke="string"==typeof te?document.querySelector(te):te;if(!ke)throw new Error(`The selector "${te}" did not match any elements`);return ce||(ke.textContent=""),ke}parentNode(te){return te.parentNode}nextSibling(te){return te.nextSibling}setAttribute(te,ce,ke,ut){if(ut){ce=ut+":"+ce;const Yt=Tn[ut];Yt?te.setAttributeNS(Yt,ce,ke):te.setAttribute(ce,ke)}else te.setAttribute(ce,ke)}removeAttribute(te,ce,ke){if(ke){const ut=Tn[ke];ut?te.removeAttributeNS(ut,ce):te.removeAttribute(`${ke}:${ce}`)}else te.removeAttribute(ce)}addClass(te,ce){te.classList.add(ce)}removeClass(te,ce){te.classList.remove(ce)}setStyle(te,ce,ke,ut){ut&(g.JOm.DashCase|g.JOm.Important)?te.style.setProperty(ce,ke,ut&g.JOm.Important?"important":""):te.style[ce]=ke}removeStyle(te,ce,ke){ke&g.JOm.DashCase?te.style.removeProperty(ce):te.style[ce]=""}setProperty(te,ce,ke){te[ce]=ke}setValue(te,ce){te.nodeValue=ce}listen(te,ce,ke){return"string"==typeof te?this.eventManager.addGlobalEventListener(te,ce,Gn(ke)):this.eventManager.addEventListener(te,ce,Gn(ke))}}class Wt extends Sn{constructor(te,ce,ke,ut){super(te),this.component=ke;const Yt=or(ut+"-"+ke.id,ke.styles,[]);ce.addStyles(Yt),this.contentAttr="_ngcontent-%COMP%".replace(on,ut+"-"+ke.id),this.hostAttr="_nghost-%COMP%".replace(on,ut+"-"+ke.id)}applyToHost(te){super.setAttribute(te,this.hostAttr,"")}createElement(te,ce){const ke=super.createElement(te,ce);return super.setAttribute(ke,this.contentAttr,""),ke}}class kn extends Sn{constructor(te,ce,ke,ut){super(te),this.sharedStylesHost=ce,this.hostEl=ke,this.shadowRoot=ke.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Yt=or(ut.id,ut.styles,[]);for(let En=0;En<Yt.length;En++){const ln=document.createElement("style");ln.textContent=Yt[En],this.shadowRoot.appendChild(ln)}}nodeOrShadowRoot(te){return te===this.hostEl?this.shadowRoot:te}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(te,ce){return super.appendChild(this.nodeOrShadowRoot(te),ce)}insertBefore(te,ce,ke){return super.insertBefore(this.nodeOrShadowRoot(te),ce,ke)}removeChild(te,ce){return super.removeChild(this.nodeOrShadowRoot(te),ce)}parentNode(te){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(te)))}}let Ln=(()=>{class B extends yt{constructor(ce){super(ce)}supports(ce){return!0}addEventListener(ce,ke,ut){return ce.addEventListener(ke,ut,!1),()=>this.removeEventListener(ce,ke,ut)}removeEventListener(ce,ke,ut){return ce.removeEventListener(ke,ut)}}return B.\u0275fac=function(ce){return new(ce||B)(g.LFG(P.K0))},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac}),B})();const sn=["alt","control","meta","shift"],He={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},gn={alt:B=>B.altKey,control:B=>B.ctrlKey,meta:B=>B.metaKey,shift:B=>B.shiftKey};let Gt=(()=>{class B extends yt{constructor(ce){super(ce)}supports(ce){return null!=B.parseEventName(ce)}addEventListener(ce,ke,ut){const Yt=B.parseEventName(ke),En=B.eventCallback(Yt.fullKey,ut,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,P.q)().onAndCancel(ce,Yt.domEventName,En))}static parseEventName(ce){const ke=ce.toLowerCase().split("."),ut=ke.shift();if(0===ke.length||"keydown"!==ut&&"keyup"!==ut)return null;const Yt=B._normalizeKey(ke.pop());let En="";if(sn.forEach(cn=>{const Xn=ke.indexOf(cn);Xn>-1&&(ke.splice(Xn,1),En+=cn+".")}),En+=Yt,0!=ke.length||0===Yt.length)return null;const ln={};return ln.domEventName=ut,ln.fullKey=En,ln}static getEventFullKey(ce){let ke="",ut=function(B){let te=B.key;if(null==te){if(te=B.keyIdentifier,null==te)return"Unidentified";te.startsWith("U+")&&(te=String.fromCharCode(parseInt(te.substring(2),16)),3===B.location&&gt.hasOwnProperty(te)&&(te=gt[te]))}return He[te]||te}(ce);return ut=ut.toLowerCase()," "===ut?ut="space":"."===ut&&(ut="dot"),sn.forEach(Yt=>{Yt!=ut&&gn[Yt](ce)&&(ke+=Yt+".")}),ke+=ut,ke}static eventCallback(ce,ke,ut){return Yt=>{B.getEventFullKey(Yt)===ce&&ut.runGuarded(()=>ke(Yt))}}static _normalizeKey(ce){switch(ce){case"esc":return"escape";default:return ce}}}return B.\u0275fac=function(ce){return new(ce||B)(g.LFG(P.K0))},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac}),B})();const Yr=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:P.bD},{provide:g.g9A,useValue:function(){C.makeCurrent(),me.init()},multi:!0},{provide:P.K0,useFactory:function(){return(0,g.RDi)(document),document},deps:[]}]),Er=[[],{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function(){return new g.qLn},deps:[]},{provide:st,useClass:Ln,multi:!0,deps:[P.K0,g.R0b,g.Lbi]},{provide:st,useClass:Gt,multi:!0,deps:[P.K0]},[],{provide:Jn,useClass:Jn,deps:[nt,tn,g.AFp]},{provide:g.FYo,useExisting:Jn},{provide:at,useExisting:tn},{provide:tn,useClass:tn,deps:[P.K0]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:nt,useClass:nt,deps:[st,g.R0b]},{provide:P.JF,useClass:Ce,deps:[]},[]];let Ri=(()=>{class B{constructor(ce){if(ce)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(ce){return{ngModule:B,providers:[{provide:g.AFp,useValue:ce.appId},{provide:ve,useExisting:g.AFp},Se]}}}return B.\u0275fac=function(ce){return new(ce||B)(g.LFG(B,12))},B.\u0275mod=g.oAB({type:B}),B.\u0275inj=g.cJS({providers:Er,imports:[P.ez,g.hGG]}),B})();"undefined"!=typeof window&&window},2213:(jt,it,Q)=>{"use strict";Q.d(it,{gz:()=>Mr,F0:()=>ti,rH:()=>Ui,Od:()=>wa,Bz:()=>ss,lC:()=>Wu});var P=Q(8583),g=Q(7716),X=Q(4869),C=Q(9796),Ve=Q(5197),Ee=Q(509),Fe=Q(6693);const fe={};class se{constructor(R){this.resultSelector=R}call(R,O){return O.subscribe(new Se(R,this.resultSelector))}}class Se extends Ve.L{constructor(R,O){super(R),this.resultSelector=O,this.active=0,this.values=[],this.observables=[]}_next(R){this.values.push(fe),this.observables.push(R)}_complete(){const R=this.observables,O=R.length;if(0===O)this.destination.complete();else{this.active=O,this.toRespond=O;for(let $=0;$<O;$++)this.add((0,Ee.D)(this,R[$],void 0,$))}}notifyComplete(R){0==(this.active-=1)&&this.destination.complete()}notifyNext(R,O,$){const ne=this.values,Ae=this.toRespond?ne[$]===fe?--this.toRespond:this.toRespond:0;ne[$]=O,0===Ae&&(this.resultSelector?this._tryResultSelector(ne):this.destination.next(ne.slice()))}_tryResultSelector(R){let O;try{O=this.resultSelector.apply(this,R)}catch($){return void this.destination.error($)}this.destination.next(O)}}var me=Q(4402),Ce=Q(5917),Me=Q(6215),Ue=Q(7574),Xe=Q(3410),re=Q(8071),Ke=Q(1439),St=Q(9193),Mn=Q(2441),kt=Q(9765),dt=Q(5345);function Zt(U){return function(O){const $=new Ot(U),ne=O.lift($);return $.caught=ne}}class Ot{constructor(R){this.selector=R}call(R,O){return O.subscribe(new Cn(R,this.selector,this.caught))}}class Cn extends dt.Ds{constructor(R,O,$){super(R),this.selector=O,this.caught=$}error(R){if(!this.isStopped){let O;try{O=this.selector(R,this.caught)}catch(he){return void super.error(he)}this._unsubscribeAndRecycle();const $=new dt.IY(this);this.add($);const ne=(0,dt.ft)(O,$);ne!==$&&this.add(ne)}}}var wt=Q(5435),Je=Q(7393),ot=Q(7108);function st(U){return function(O){return 0===U?(0,St.c)():O.lift(new nt(U))}}class nt{constructor(R){if(this.total=R,this.total<0)throw new ot.W}call(R,O){return O.subscribe(new yt(R,this.total))}}class yt extends Je.L{constructor(R,O){super(R),this.total=O,this.ring=new Array,this.count=0}_next(R){const O=this.ring,$=this.total,ne=this.count++;O.length<$?O.push(R):O[ne%$]=R}_complete(){const R=this.destination;let O=this.count;if(O>0){const $=this.count>=this.total?this.total:this.count,ne=this.ring;for(let he=0;he<$;he++){const Ae=O++%$;R.next(ne[Ae])}}R.complete()}}var at=Q(4635),tn=Q(5242),un=Q(4487),on=Q(5319);class Ft{constructor(R){this.callback=R}call(R,O){return O.subscribe(new Jt(R,this.callback))}}class Jt extends Je.L{constructor(R,O){super(R),this.add(new on.w(O))}}var Ht=Q(8002),Pn=Q(3190),bn=Q(5257),or=Q(9761),Gn=Q(2145),Bn=Q(4612),Jn=Q(8049),Sn=Q(9773),An=Q(3342),Mi=Q(1307),mn=Q(3282);class Wt{constructor(R,O){this.id=R,this.url=O}}class kn extends Wt{constructor(R,O,$="imperative",ne=null){super(R,O),this.navigationTrigger=$,this.restoredState=ne}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ln extends Wt{constructor(R,O,$){super(R,O),this.urlAfterRedirects=$}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qt extends Wt{constructor(R,O,$){super(R,O),this.reason=$}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class dr extends Wt{constructor(R,O,$){super(R,O),this.error=$}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ur extends Wt{constructor(R,O,$,ne){super(R,O),this.urlAfterRedirects=$,this.state=ne}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zn extends Wt{constructor(R,O,$,ne){super(R,O),this.urlAfterRedirects=$,this.state=ne}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dt extends Wt{constructor(R,O,$,ne,he){super(R,O),this.urlAfterRedirects=$,this.state=ne,this.shouldActivate=he}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ze extends Wt{constructor(R,O,$,ne){super(R,O),this.urlAfterRedirects=$,this.state=ne}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ze extends Wt{constructor(R,O,$,ne){super(R,O),this.urlAfterRedirects=$,this.state=ne}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class It{constructor(R){this.route=R}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xt{constructor(R){this.route=R}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sn{constructor(R){this.snapshot=R}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mt{constructor(R){this.snapshot=R}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class He{constructor(R){this.snapshot=R}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gt{constructor(R){this.snapshot=R}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vt{constructor(R,O,$){this.routerEvent=R,this.position=O,this.anchor=$}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Tt="primary";class Vt{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const O=this.params[R];return Array.isArray(O)?O[0]:O}return null}getAll(R){if(this.has(R)){const O=this.params[R];return Array.isArray(O)?O:[O]}return[]}get keys(){return Object.keys(this.params)}}function hn(U){return new Vt(U)}const gn="ngNavigationCancelingError";function Gt(U){const R=Error("NavigationCancelingError: "+U);return R[gn]=!0,R}function xe(U,R,O){const $=O.path.split("/");if($.length>U.length||"full"===O.pathMatch&&(R.hasChildren()||$.length<U.length))return null;const ne={};for(let he=0;he<$.length;he++){const Ae=$[he],qe=U[he];if(Ae.startsWith(":"))ne[Ae.substring(1)]=qe;else if(Ae!==qe.path)return null}return{consumed:U.slice(0,$.length),posParams:ne}}function et(U,R){const O=U?Object.keys(U):void 0,$=R?Object.keys(R):void 0;if(!O||!$||O.length!=$.length)return!1;let ne;for(let he=0;he<O.length;he++)if(ne=O[he],!tt(U[ne],R[ne]))return!1;return!0}function tt(U,R){if(Array.isArray(U)&&Array.isArray(R)){if(U.length!==R.length)return!1;const O=[...U].sort(),$=[...R].sort();return O.every((ne,he)=>$[he]===ne)}return U===R}function zt(U){return Array.prototype.concat.apply([],U)}function _n(U){return U.length>0?U[U.length-1]:null}function Vn(U,R){for(const O in U)U.hasOwnProperty(O)&&R(U[O],O)}function Rn(U){return(0,g.CqO)(U)?U:(0,g.QGY)(U)?(0,me.D)(Promise.resolve(U)):(0,Ce.of)(U)}const Br={exact:function Fo(U,R,O){if(!wr(U.segments,R.segments)||!Fr(U.segments,R.segments,O)||U.numberOfChildren!==R.numberOfChildren)return!1;for(const $ in R.children)if(!U.children[$]||!Fo(U.children[$],R.children[$],O))return!1;return!0},subset:ao},Yr={exact:function(U,R){return et(U,R)},subset:function(U,R){return Object.keys(R).length<=Object.keys(U).length&&Object.keys(R).every(O=>tt(U[O],R[O]))},ignored:()=>!0};function Er(U,R,O){return Br[O.paths](U.root,R.root,O.matrixParams)&&Yr[O.queryParams](U.queryParams,R.queryParams)&&!("exact"===O.fragment&&U.fragment!==R.fragment)}function ao(U,R,O){return ns(U,R,R.segments,O)}function ns(U,R,O,$){if(U.segments.length>O.length){const ne=U.segments.slice(0,O.length);return!(!wr(ne,O)||R.hasChildren()||!Fr(ne,O,$))}if(U.segments.length===O.length){if(!wr(U.segments,O)||!Fr(U.segments,O,$))return!1;for(const ne in R.children)if(!U.children[ne]||!ao(U.children[ne],R.children[ne],$))return!1;return!0}{const ne=O.slice(0,U.segments.length),he=O.slice(U.segments.length);return!!(wr(U.segments,ne)&&Fr(U.segments,ne,$)&&U.children[Tt])&&ns(U.children[Tt],R,he,$)}}function Fr(U,R,O){return R.every(($,ne)=>Yr[O](U[ne].parameters,$.parameters))}class ar{constructor(R,O,$){this.root=R,this.queryParams=O,this.fragment=$}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hn(this.queryParams)),this._queryParamMap}toString(){return Zr.serialize(this)}}class yn{constructor(R,O){this.segments=R,this.children=O,this.parent=null,Vn(O,($,ne)=>$.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ti(this)}}class Lr{constructor(R,O){this.path=R,this.parameters=O}get parameterMap(){return this._parameterMap||(this._parameterMap=hn(this.parameters)),this._parameterMap}toString(){return te(this)}}function wr(U,R){return U.length===R.length&&U.every((O,$)=>O.path===R[$].path)}class dn{}class In{parse(R){const O=new Gi(R);return new ar(O.parseRootSegment(),O.parseQueryParams(),O.parseFragment())}serialize(R){var U;return`${`/${Dr(R.root,!0)}`}${function(U){const R=Object.keys(U).map(O=>{const $=U[O];return Array.isArray($)?$.map(ne=>`${vr(O)}=${vr(ne)}`).join("&"):`${vr(O)}=${vr($)}`}).filter(O=>!!O);return R.length?`?${R.join("&")}`:""}(R.queryParams)}${"string"==typeof R.fragment?`#${U=R.fragment,encodeURI(U)}`:""}`}}const Zr=new In;function Ti(U){return U.segments.map(R=>te(R)).join("/")}function Dr(U,R){if(!U.hasChildren())return Ti(U);if(R){const O=U.children[Tt]?Dr(U.children[Tt],!1):"",$=[];return Vn(U.children,(ne,he)=>{he!==Tt&&$.push(`${he}:${Dr(ne,!1)}`)}),$.length>0?`${O}(${$.join("//")})`:O}{const O=function(U,R){let O=[];return Vn(U.children,($,ne)=>{ne===Tt&&(O=O.concat(R($,ne)))}),Vn(U.children,($,ne)=>{ne!==Tt&&(O=O.concat(R($,ne)))}),O}(U,($,ne)=>ne===Tt?[Dr(U.children[Tt],!1)]:[`${ne}:${Dr($,!1)}`]);return 1===Object.keys(U.children).length&&null!=U.children[Tt]?`${Ti(U)}/${O[0]}`:`${Ti(U)}/(${O.join("//")})`}}function Xr(U){return encodeURIComponent(U).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vr(U){return Xr(U).replace(/%3B/gi,";")}function De(U){return Xr(U).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function We(U){return decodeURIComponent(U)}function B(U){return We(U.replace(/\+/g,"%20"))}function te(U){return`${De(U.path)}${function(U){return Object.keys(U).map(R=>`;${De(R)}=${De(U[R])}`).join("")}(U.parameters)}`}const ut=/^[^\/()?;=#]+/;function Yt(U){const R=U.match(ut);return R?R[0]:""}const En=/^[^=?&#]+/,cn=/^[^?&#]+/;class Gi{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yn([],{}):new yn([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let O={};this.peekStartsWith("/(")&&(this.capture("/"),O=this.parseParens(!0));let $={};return this.peekStartsWith("(")&&($=this.parseParens(!1)),(R.length>0||Object.keys(O).length>0)&&($[Tt]=new yn(R,O)),$}parseSegment(){const R=Yt(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(R),new Lr(We(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const O=Yt(this.remaining);if(!O)return;this.capture(O);let $="";if(this.consumeOptional("=")){const ne=Yt(this.remaining);ne&&($=ne,this.capture($))}R[We(O)]=We($)}parseQueryParam(R){const O=function(U){const R=U.match(En);return R?R[0]:""}(this.remaining);if(!O)return;this.capture(O);let $="";if(this.consumeOptional("=")){const Ae=function(U){const R=U.match(cn);return R?R[0]:""}(this.remaining);Ae&&($=Ae,this.capture($))}const ne=B(O),he=B($);if(R.hasOwnProperty(ne)){let Ae=R[ne];Array.isArray(Ae)||(Ae=[Ae],R[ne]=Ae),Ae.push(he)}else R[ne]=he}parseParens(R){const O={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const $=Yt(this.remaining),ne=this.remaining[$.length];if("/"!==ne&&")"!==ne&&";"!==ne)throw new Error(`Cannot parse url '${this.url}'`);let he;$.indexOf(":")>-1?(he=$.substr(0,$.indexOf(":")),this.capture(he),this.capture(":")):R&&(he=Tt);const Ae=this.parseChildren();O[he]=1===Object.keys(Ae).length?Ae[Tt]:new yn([],Ae),this.consumeOptional("//")}return O}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new Error(`Expected "${R}".`)}}class pr{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const O=this.pathFromRoot(R);return O.length>1?O[O.length-2]:null}children(R){const O=Li(R,this._root);return O?O.children.map($=>$.value):[]}firstChild(R){const O=Li(R,this._root);return O&&O.children.length>0?O.children[0].value:null}siblings(R){const O=uo(R,this._root);return O.length<2?[]:O[O.length-2].children.map(ne=>ne.value).filter(ne=>ne!==R)}pathFromRoot(R){return uo(R,this._root).map(O=>O.value)}}function Li(U,R){if(U===R.value)return R;for(const O of R.children){const $=Li(U,O);if($)return $}return null}function uo(U,R){if(U===R.value)return[R];for(const O of R.children){const $=uo(U,O);if($.length)return $.unshift(R),$}return[]}class $r{constructor(R,O){this.value=R,this.children=O}toString(){return`TreeNode(${this.value})`}}function Vi(U){const R={};return U&&U.children.forEach(O=>R[O.value.outlet]=O),R}class sr extends pr{constructor(R,O){super(R),this.snapshot=O,_i(this,R)}toString(){return this.snapshot.toString()}}function jn(U,R){const O=function(U,R){const Ae=new qi([],{},{},"",{},Tt,R,null,U.root,-1,{});return new Ki("",new $r(Ae,[]))}(U,R),$=new Me.X([new Lr("",{})]),ne=new Me.X({}),he=new Me.X({}),Ae=new Me.X({}),qe=new Me.X(""),Ct=new Mr($,ne,Ae,qe,he,Tt,R,O.root);return Ct.snapshot=O.root,new sr(new $r(Ct,[]),O)}class Mr{constructor(R,O,$,ne,he,Ae,qe,Ct){this.url=R,this.params=O,this.queryParams=$,this.fragment=ne,this.data=he,this.outlet=Ae,this.component=qe,this._futureSnapshot=Ct}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ht.U)(R=>hn(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ht.U)(R=>hn(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zi(U,R="emptyOnly"){const O=U.pathFromRoot;let $=0;if("always"!==R)for($=O.length-1;$>=1;){const ne=O[$],he=O[$-1];if(ne.routeConfig&&""===ne.routeConfig.path)$--;else{if(he.component)break;$--}}return function(U){return U.reduce((R,O)=>({params:Object.assign(Object.assign({},R.params),O.params),data:Object.assign(Object.assign({},R.data),O.data),resolve:Object.assign(Object.assign({},R.resolve),O._resolvedData)}),{params:{},data:{},resolve:{}})}(O.slice($))}class qi{constructor(R,O,$,ne,he,Ae,qe,Ct,fn,rr,Hn){this.url=R,this.params=O,this.queryParams=$,this.fragment=ne,this.data=he,this.outlet=Ae,this.component=qe,this.routeConfig=Ct,this._urlSegment=fn,this._lastPathIndex=rr,this._resolve=Hn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map($=>$.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ki extends pr{constructor(R,O){super(O),this.url=R,_i(this,O)}toString(){return ds(this._root)}}function _i(U,R){R.value._routerState=U,R.children.forEach(O=>_i(U,O))}function ds(U){const R=U.children.length>0?` { ${U.children.map(ds).join(", ")} } `:"";return`${U.value}${R}`}function jr(U){if(U.snapshot){const R=U.snapshot,O=U._futureSnapshot;U.snapshot=O,et(R.queryParams,O.queryParams)||U.queryParams.next(O.queryParams),R.fragment!==O.fragment&&U.fragment.next(O.fragment),et(R.params,O.params)||U.params.next(O.params),function(U,R){if(U.length!==R.length)return!1;for(let O=0;O<U.length;++O)if(!et(U[O],R[O]))return!1;return!0}(R.url,O.url)||U.url.next(O.url),et(R.data,O.data)||U.data.next(O.data)}else U.snapshot=U._futureSnapshot,U.data.next(U._futureSnapshot.data)}function _s(U,R){return et(U.params,R.params)&&function(U,R){return wr(U,R)&&U.every((O,$)=>et(O.parameters,R[$].parameters))}(U.url,R.url)&&!(!U.parent!=!R.parent)&&(!U.parent||_s(U.parent,R.parent))}function zo(U,R,O){if(O&&U.shouldReuseRoute(R.value,O.value.snapshot)){const $=O.value;$._futureSnapshot=R.value;const ne=function(U,R,O){return R.children.map($=>{for(const ne of O.children)if(U.shouldReuseRoute($.value,ne.value.snapshot))return zo(U,$,ne);return zo(U,$)})}(U,R,O);return new $r($,ne)}{if(U.shouldAttach(R.value)){const he=U.retrieve(R.value);if(null!==he){const Ae=he.route;return No(R,Ae),Ae}}const $=function(U){return new Mr(new Me.X(U.url),new Me.X(U.params),new Me.X(U.queryParams),new Me.X(U.fragment),new Me.X(U.data),U.outlet,U.component,U)}(R.value),ne=R.children.map(he=>zo(U,he));return new $r($,ne)}}function No(U,R){if(U.value.routeConfig!==R.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(U.children.length!==R.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");R.value._futureSnapshot=U.value;for(let O=0;O<U.children.length;++O)No(U.children[O],R.children[O])}function qo(U){return"object"==typeof U&&null!=U&&!U.outlets&&!U.segmentPath}function yi(U){return"object"==typeof U&&null!=U&&U.outlets}function vi(U,R,O,$,ne){let he={};return $&&Vn($,(Ae,qe)=>{he[qe]=Array.isArray(Ae)?Ae.map(Ct=>`${Ct}`):`${Ae}`}),new ar(O.root===U?R:ir(O.root,U,R),he,ne)}function ir(U,R,O){const $={};return Vn(U.children,(ne,he)=>{$[he]=ne===R?O:ir(ne,R,O)}),new yn(U.segments,$)}class eo{constructor(R,O,$){if(this.isAbsolute=R,this.numberOfDoubleDots=O,this.commands=$,R&&$.length>0&&qo($[0]))throw new Error("Root segment cannot have matrix parameters");const ne=$.find(yi);if(ne&&ne!==_n($))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class lo{constructor(R,O,$){this.segmentGroup=R,this.processChildren=O,this.index=$}}function ko(U,R,O){if(U||(U=new yn([],{})),0===U.segments.length&&U.hasChildren())return bi(U,R,O);const $=function(U,R,O){let $=0,ne=R;const he={match:!1,pathIndex:0,commandIndex:0};for(;ne<U.segments.length;){if($>=O.length)return he;const Ae=U.segments[ne],qe=O[$];if(yi(qe))break;const Ct=`${qe}`,fn=$<O.length-1?O[$+1]:null;if(ne>0&&void 0===Ct)break;if(Ct&&fn&&"object"==typeof fn&&void 0===fn.outlets){if(!Do(Ct,fn,Ae))return he;$+=2}else{if(!Do(Ct,{},Ae))return he;$++}ne++}return{match:!0,pathIndex:ne,commandIndex:$}}(U,R,O),ne=O.slice($.commandIndex);if($.match&&$.pathIndex<U.segments.length){const he=new yn(U.segments.slice(0,$.pathIndex),{});return he.children[Tt]=new yn(U.segments.slice($.pathIndex),U.children),bi(he,0,ne)}return $.match&&0===ne.length?new yn(U.segments,{}):$.match&&!U.hasChildren()?Nr(U,R,O):$.match?bi(U,0,ne):Nr(U,R,O)}function bi(U,R,O){if(0===O.length)return new yn(U.segments,{});{const $=function(U){return yi(U[0])?U[0].outlets:{[Tt]:U}}(O),ne={};return Vn($,(he,Ae)=>{"string"==typeof he&&(he=[he]),null!==he&&(ne[Ae]=ko(U.children[Ae],R,he))}),Vn(U.children,(he,Ae)=>{void 0===$[Ae]&&(ne[Ae]=he)}),new yn(U.segments,ne)}}function Nr(U,R,O){const $=U.segments.slice(0,R);let ne=0;for(;ne<O.length;){const he=O[ne];if(yi(he)){const Ct=is(he.outlets);return new yn($,Ct)}if(0===ne&&qo(O[0])){$.push(new Lr(U.segments[R].path,wo(O[0]))),ne++;continue}const Ae=yi(he)?he.outlets[Tt]:`${he}`,qe=ne<O.length-1?O[ne+1]:null;Ae&&qe&&qo(qe)?($.push(new Lr(Ae,wo(qe))),ne+=2):($.push(new Lr(Ae,{})),ne++)}return new yn($,{})}function is(U){const R={};return Vn(U,(O,$)=>{"string"==typeof O&&(O=[O]),null!==O&&(R[$]=Nr(new yn([],{}),0,O))}),R}function wo(U){const R={};return Vn(U,(O,$)=>R[$]=`${O}`),R}function Do(U,R,O){return U==O.path&&et(R,O.parameters)}class no{constructor(R,O,$,ne){this.routeReuseStrategy=R,this.futureState=O,this.currState=$,this.forwardEvent=ne}activate(R){const O=this.futureState._root,$=this.currState?this.currState._root:null;this.deactivateChildRoutes(O,$,R),jr(this.futureState.root),this.activateChildRoutes(O,$,R)}deactivateChildRoutes(R,O,$){const ne=Vi(O);R.children.forEach(he=>{const Ae=he.value.outlet;this.deactivateRoutes(he,ne[Ae],$),delete ne[Ae]}),Vn(ne,(he,Ae)=>{this.deactivateRouteAndItsChildren(he,$)})}deactivateRoutes(R,O,$){const ne=R.value,he=O?O.value:null;if(ne===he)if(ne.component){const Ae=$.getContext(ne.outlet);Ae&&this.deactivateChildRoutes(R,O,Ae.children)}else this.deactivateChildRoutes(R,O,$);else he&&this.deactivateRouteAndItsChildren(O,$)}deactivateRouteAndItsChildren(R,O){this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,O):this.deactivateRouteAndOutlet(R,O)}detachAndStoreRouteSubtree(R,O){const $=O.getContext(R.value.outlet);if($&&$.outlet){const ne=$.outlet.detach(),he=$.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:ne,route:R,contexts:he})}}deactivateRouteAndOutlet(R,O){const $=O.getContext(R.value.outlet),ne=$&&R.value.component?$.children:O,he=Vi(R);for(const Ae of Object.keys(he))this.deactivateRouteAndItsChildren(he[Ae],ne);$&&$.outlet&&($.outlet.deactivate(),$.children.onOutletDeactivated(),$.attachRef=null,$.resolver=null,$.route=null)}activateChildRoutes(R,O,$){const ne=Vi(O);R.children.forEach(he=>{this.activateRoutes(he,ne[he.value.outlet],$),this.forwardEvent(new gt(he.value.snapshot))}),R.children.length&&this.forwardEvent(new Mt(R.value.snapshot))}activateRoutes(R,O,$){const ne=R.value,he=O?O.value:null;if(jr(ne),ne===he)if(ne.component){const Ae=$.getOrCreateContext(ne.outlet);this.activateChildRoutes(R,O,Ae.children)}else this.activateChildRoutes(R,O,$);else if(ne.component){const Ae=$.getOrCreateContext(ne.outlet);if(this.routeReuseStrategy.shouldAttach(ne.snapshot)){const qe=this.routeReuseStrategy.retrieve(ne.snapshot);this.routeReuseStrategy.store(ne.snapshot,null),Ae.children.onOutletReAttached(qe.contexts),Ae.attachRef=qe.componentRef,Ae.route=qe.route.value,Ae.outlet&&Ae.outlet.attach(qe.componentRef,qe.route.value),ei(qe.route)}else{const qe=function(U){for(let R=U.parent;R;R=R.parent){const O=R.routeConfig;if(O&&O._loadedConfig)return O._loadedConfig;if(O&&O.component)return null}return null}(ne.snapshot),Ct=qe?qe.module.componentFactoryResolver:null;Ae.attachRef=null,Ae.route=ne,Ae.resolver=Ct,Ae.outlet&&Ae.outlet.activateWith(ne,Ct),this.activateChildRoutes(R,null,Ae.children)}}else this.activateChildRoutes(R,null,$)}}function ei(U){jr(U.value),U.children.forEach(ei)}class Lo{constructor(R,O){this.routes=R,this.module=O}}function Ci(U){return"function"==typeof U}function kr(U){return U instanceof ar}const Z=Symbol("INITIAL_VALUE");function ge(){return(0,Pn.w)(U=>function(...U){let R,O;return(0,X.K)(U[U.length-1])&&(O=U.pop()),"function"==typeof U[U.length-1]&&(R=U.pop()),1===U.length&&(0,C.k)(U[0])&&(U=U[0]),(0,Fe.n)(U,O).lift(new se(R))}(U.map(R=>R.pipe((0,bn.q)(1),(0,or.O)(Z)))).pipe((0,Gn.R)((R,O)=>{let $=!1;return O.reduce((ne,he,Ae)=>ne!==Z?ne:(he===Z&&($=!0),$||!1!==he&&Ae!==O.length-1&&!kr(he)?ne:he),R)},Z),(0,wt.h)(R=>R!==Z),(0,Ht.U)(R=>kr(R)?R:!0===R),(0,bn.q)(1)))}let x=(()=>{class U{}return U.\u0275fac=function(O){return new(O||U)},U.\u0275cmp=g.Xpm({type:U,selectors:[["ng-component"]],decls:1,vars:0,template:function(O,$){1&O&&g._UZ(0,"router-outlet")},directives:function(){return[Wu]},encapsulation:2}),U})();function W(U,R=""){for(let O=0;O<U.length;O++){const $=U[O];k($,ee(R,$))}}function k(U,R){U.children&&W(U.children,R)}function ee(U,R){return R?U||R.path?U&&!R.path?`${U}/`:!U&&R.path?R.path:`${U}/${R.path}`:"":U}function we(U){const R=U.children&&U.children.map(we),O=R?Object.assign(Object.assign({},U),{children:R}):Object.assign({},U);return!O.component&&(R||O.loadChildren)&&O.outlet&&O.outlet!==Tt&&(O.component=x),O}function je(U){return U.outlet||Tt}function rt(U,R){const O=U.filter($=>je($)===R);return O.push(...U.filter($=>je($)!==R)),O}const G={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function H(U,R,O){var $;if(""===R.path)return"full"===R.pathMatch&&(U.hasChildren()||O.length>0)?Object.assign({},G):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const he=(R.matcher||xe)(O,U,R);if(!he)return Object.assign({},G);const Ae={};Vn(he.posParams,(Ct,fn)=>{Ae[fn]=Ct.path});const qe=he.consumed.length>0?Object.assign(Object.assign({},Ae),he.consumed[he.consumed.length-1].parameters):Ae;return{matched:!0,consumedSegments:he.consumed,lastChild:he.consumed.length,parameters:qe,positionalParamSegments:null!==($=he.posParams)&&void 0!==$?$:{}}}function V(U,R,O,$,ne="corrected"){if(O.length>0&&function(U,R,O){return O.some($=>cr(U,R,$)&&je($)!==Tt)}(U,O,$)){const Ae=new yn(R,function(U,R,O,$){const ne={};ne[Tt]=$,$._sourceSegment=U,$._segmentIndexShift=R.length;for(const he of O)if(""===he.path&&je(he)!==Tt){const Ae=new yn([],{});Ae._sourceSegment=U,Ae._segmentIndexShift=R.length,ne[je(he)]=Ae}return ne}(U,R,$,new yn(O,U.children)));return Ae._sourceSegment=U,Ae._segmentIndexShift=R.length,{segmentGroup:Ae,slicedSegments:[]}}if(0===O.length&&function(U,R,O){return O.some($=>cr(U,R,$))}(U,O,$)){const Ae=new yn(U.segments,function(U,R,O,$,ne,he){const Ae={};for(const qe of $)if(cr(U,O,qe)&&!ne[je(qe)]){const Ct=new yn([],{});Ct._sourceSegment=U,Ct._segmentIndexShift="legacy"===he?U.segments.length:R.length,Ae[je(qe)]=Ct}return Object.assign(Object.assign({},ne),Ae)}(U,R,O,$,U.children,ne));return Ae._sourceSegment=U,Ae._segmentIndexShift=R.length,{segmentGroup:Ae,slicedSegments:O}}const he=new yn(U.segments,U.children);return he._sourceSegment=U,he._segmentIndexShift=R.length,{segmentGroup:he,slicedSegments:O}}function cr(U,R,O){return(!(U.hasChildren()||R.length>0)||"full"!==O.pathMatch)&&""===O.path}function Hr(U,R,O,$){return!!(je(U)===$||$!==Tt&&cr(R,O,U))&&("**"===U.path||H(R,U,O).matched)}function hr(U,R,O){return 0===R.length&&!U.children[O]}class Gr{constructor(R){this.segmentGroup=R||null}}class ii{constructor(R){this.urlTree=R}}function Dn(U){return new Ue.y(R=>R.error(new Gr(U)))}function Qi(U){return new Ue.y(R=>R.error(new ii(U)))}function ys(U){return new Ue.y(R=>R.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${U}'`)))}class $u{constructor(R,O,$,ne,he){this.configLoader=O,this.urlSerializer=$,this.urlTree=ne,this.config=he,this.allowRedirects=!0,this.ngModule=R.get(g.h0i)}apply(){const R=V(this.urlTree.root,[],[],this.config).segmentGroup,O=new yn(R.segments,R.children);return this.expandSegmentGroup(this.ngModule,this.config,O,Tt).pipe((0,Ht.U)(he=>this.createUrlTree(Ba(he),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Zt(he=>{if(he instanceof ii)return this.allowRedirects=!1,this.match(he.urlTree);throw he instanceof Gr?this.noMatchError(he):he}))}match(R){return this.expandSegmentGroup(this.ngModule,this.config,R.root,Tt).pipe((0,Ht.U)(ne=>this.createUrlTree(Ba(ne),R.queryParams,R.fragment))).pipe(Zt(ne=>{throw ne instanceof Gr?this.noMatchError(ne):ne}))}noMatchError(R){return new Error(`Cannot match any routes. URL Segment: '${R.segmentGroup}'`)}createUrlTree(R,O,$){const ne=R.segments.length>0?new yn([],{[Tt]:R}):R;return new ar(ne,O,$)}expandSegmentGroup(R,O,$,ne){return 0===$.segments.length&&$.hasChildren()?this.expandChildren(R,O,$).pipe((0,Ht.U)(he=>new yn([],he))):this.expandSegment(R,$,O,$.segments,ne,!0)}expandChildren(R,O,$){const ne=[];for(const he of Object.keys($.children))"primary"===he?ne.unshift(he):ne.push(he);return(0,me.D)(ne).pipe((0,Bn.b)(he=>{const Ae=$.children[he],qe=rt(O,he);return this.expandSegmentGroup(R,qe,Ae,he).pipe((0,Ht.U)(Ct=>({segment:Ct,outlet:he})))}),(0,Gn.R)((he,Ae)=>(he[Ae.outlet]=Ae.segment,he),{}),function(U,R){const O=arguments.length>=2;return $=>$.pipe(U?(0,wt.h)((ne,he)=>U(ne,he,$)):un.y,st(1),O?(0,tn.d)(R):(0,at.T)(()=>new Xe.K))}())}expandSegment(R,O,$,ne,he,Ae){return(0,me.D)($).pipe((0,Bn.b)(qe=>this.expandSegmentAgainstRoute(R,O,$,qe,ne,he,Ae).pipe(Zt(fn=>{if(fn instanceof Gr)return(0,Ce.of)(null);throw fn}))),(0,Jn.P)(qe=>!!qe),Zt((qe,Ct)=>{if(qe instanceof Xe.K||"EmptyError"===qe.name){if(hr(O,ne,he))return(0,Ce.of)(new yn([],{}));throw new Gr(O)}throw qe}))}expandSegmentAgainstRoute(R,O,$,ne,he,Ae,qe){return Hr(ne,O,he,Ae)?void 0===ne.redirectTo?this.matchSegmentAgainstRoute(R,O,ne,he,Ae):qe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,O,$,ne,he,Ae):Dn(O):Dn(O)}expandSegmentAgainstRouteUsingRedirect(R,O,$,ne,he,Ae){return"**"===ne.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,$,ne,Ae):this.expandRegularSegmentAgainstRouteUsingRedirect(R,O,$,ne,he,Ae)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,O,$,ne){const he=this.applyRedirectCommands([],$.redirectTo,{});return $.redirectTo.startsWith("/")?Qi(he):this.lineralizeSegments($,he).pipe((0,Sn.zg)(Ae=>{const qe=new yn(Ae,{});return this.expandSegment(R,qe,O,Ae,ne,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,O,$,ne,he,Ae){const{matched:qe,consumedSegments:Ct,lastChild:fn,positionalParamSegments:rr}=H(O,ne,he);if(!qe)return Dn(O);const Hn=this.applyRedirectCommands(Ct,ne.redirectTo,rr);return ne.redirectTo.startsWith("/")?Qi(Hn):this.lineralizeSegments(ne,Hn).pipe((0,Sn.zg)(Ar=>this.expandSegment(R,O,$,Ar.concat(he.slice(fn)),Ae,!1)))}matchSegmentAgainstRoute(R,O,$,ne,he){if("**"===$.path)return $.loadChildren?($._loadedConfig?(0,Ce.of)($._loadedConfig):this.configLoader.load(R.injector,$)).pipe((0,Ht.U)(Ar=>($._loadedConfig=Ar,new yn(ne,{})))):(0,Ce.of)(new yn(ne,{}));const{matched:Ae,consumedSegments:qe,lastChild:Ct}=H(O,$,ne);if(!Ae)return Dn(O);const fn=ne.slice(Ct);return this.getChildConfig(R,$,ne).pipe((0,Sn.zg)(Hn=>{const Ar=Hn.module,Un=Hn.routes,{segmentGroup:go,slicedSegments:Uo}=V(O,qe,fn,Un),mo=new yn(go.segments,go.children);if(0===Uo.length&&mo.hasChildren())return this.expandChildren(Ar,Un,mo).pipe((0,Ht.U)(pu=>new yn(qe,pu)));if(0===Un.length&&0===Uo.length)return(0,Ce.of)(new yn(qe,{}));const Hs=je($)===he;return this.expandSegment(Ar,mo,Un,Uo,Hs?Tt:he,!0).pipe((0,Ht.U)(Yo=>new yn(qe.concat(Yo.segments),Yo.children)))}))}getChildConfig(R,O,$){return O.children?(0,Ce.of)(new Lo(O.children,R)):O.loadChildren?void 0!==O._loadedConfig?(0,Ce.of)(O._loadedConfig):this.runCanLoadGuards(R.injector,O,$).pipe((0,Sn.zg)(ne=>{return ne?this.configLoader.load(R.injector,O).pipe((0,Ht.U)(he=>(O._loadedConfig=he,he))):(U=O,new Ue.y(R=>R.error(Gt(`Cannot load children because the guard of the route "path: '${U.path}'" returned false`))));var U})):(0,Ce.of)(new Lo([],R))}runCanLoadGuards(R,O,$){const ne=O.canLoad;if(!ne||0===ne.length)return(0,Ce.of)(!0);const he=ne.map(Ae=>{const qe=R.get(Ae);let Ct;if((U=qe)&&Ci(U.canLoad))Ct=qe.canLoad(O,$);else{if(!Ci(qe))throw new Error("Invalid CanLoad guard");Ct=qe(O,$)}var U;return Rn(Ct)});return(0,Ce.of)(he).pipe(ge(),(0,An.b)(Ae=>{if(!kr(Ae))return;const qe=Gt(`Redirecting to "${this.urlSerializer.serialize(Ae)}"`);throw qe.url=Ae,qe}),(0,Ht.U)(Ae=>!0===Ae))}lineralizeSegments(R,O){let $=[],ne=O.root;for(;;){if($=$.concat(ne.segments),0===ne.numberOfChildren)return(0,Ce.of)($);if(ne.numberOfChildren>1||!ne.children[Tt])return ys(R.redirectTo);ne=ne.children[Tt]}}applyRedirectCommands(R,O,$){return this.applyRedirectCreatreUrlTree(O,this.urlSerializer.parse(O),R,$)}applyRedirectCreatreUrlTree(R,O,$,ne){const he=this.createSegmentGroup(R,O.root,$,ne);return new ar(he,this.createQueryParams(O.queryParams,this.urlTree.queryParams),O.fragment)}createQueryParams(R,O){const $={};return Vn(R,(ne,he)=>{if("string"==typeof ne&&ne.startsWith(":")){const qe=ne.substring(1);$[he]=O[qe]}else $[he]=ne}),$}createSegmentGroup(R,O,$,ne){const he=this.createSegments(R,O.segments,$,ne);let Ae={};return Vn(O.children,(qe,Ct)=>{Ae[Ct]=this.createSegmentGroup(R,qe,$,ne)}),new yn(he,Ae)}createSegments(R,O,$,ne){return O.map(he=>he.path.startsWith(":")?this.findPosParam(R,he,ne):this.findOrReturn(he,$))}findPosParam(R,O,$){const ne=$[O.path.substring(1)];if(!ne)throw new Error(`Cannot redirect to '${R}'. Cannot find '${O.path}'.`);return ne}findOrReturn(R,O){let $=0;for(const ne of O){if(ne.path===R.path)return O.splice($),ne;$++}return R}}function Ba(U){const R={};for(const $ of Object.keys(U.children)){const he=Ba(U.children[$]);(he.segments.length>0||he.hasChildren())&&(R[$]=he)}return function(U){if(1===U.numberOfChildren&&U.children[Tt]){const R=U.children[Tt];return new yn(U.segments.concat(R.segments),R.children)}return U}(new yn(U.segments,R))}class mr{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class vs{constructor(R,O){this.component=R,this.route=O}}function xi(U,R,O){const $=U._root;return oe($,R?R._root:null,O,[$.value])}function Rs(U,R,O){const $=function(U){if(!U)return null;for(let R=U.parent;R;R=R.parent){const O=R.routeConfig;if(O&&O._loadedConfig)return O._loadedConfig}return null}(R);return($?$.module.injector:O).get(U)}function oe(U,R,O,$,ne={canDeactivateChecks:[],canActivateChecks:[]}){const he=Vi(R);return U.children.forEach(Ae=>{(function(U,R,O,$,ne={canDeactivateChecks:[],canActivateChecks:[]}){const he=U.value,Ae=R?R.value:null,qe=O?O.getContext(U.value.outlet):null;if(Ae&&he.routeConfig===Ae.routeConfig){const Ct=function(U,R,O){if("function"==typeof O)return O(U,R);switch(O){case"pathParamsChange":return!wr(U.url,R.url);case"pathParamsOrQueryParamsChange":return!wr(U.url,R.url)||!et(U.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_s(U,R)||!et(U.queryParams,R.queryParams);case"paramsChange":default:return!_s(U,R)}}(Ae,he,he.routeConfig.runGuardsAndResolvers);Ct?ne.canActivateChecks.push(new mr($)):(he.data=Ae.data,he._resolvedData=Ae._resolvedData),oe(U,R,he.component?qe?qe.children:null:O,$,ne),Ct&&qe&&qe.outlet&&qe.outlet.isActivated&&ne.canDeactivateChecks.push(new vs(qe.outlet.component,Ae))}else Ae&&j(R,qe,ne),ne.canActivateChecks.push(new mr($)),oe(U,null,he.component?qe?qe.children:null:O,$,ne)})(Ae,he[Ae.value.outlet],O,$.concat([Ae.value]),ne),delete he[Ae.value.outlet]}),Vn(he,(Ae,qe)=>j(Ae,O.getContext(qe),ne)),ne}function j(U,R,O){const $=Vi(U),ne=U.value;Vn($,(he,Ae)=>{j(he,ne.component?R?R.children.getContext(Ae):null:R,O)}),O.canDeactivateChecks.push(new vs(ne.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,ne))}class ur{}function Tr(U){return new Ue.y(R=>R.error(U))}class Fn{constructor(R,O,$,ne,he,Ae){this.rootComponentType=R,this.config=O,this.urlTree=$,this.url=ne,this.paramsInheritanceStrategy=he,this.relativeLinkResolution=Ae}recognize(){const R=V(this.urlTree.root,[],[],this.config.filter(Ae=>void 0===Ae.redirectTo),this.relativeLinkResolution).segmentGroup,O=this.processSegmentGroup(this.config,R,Tt);if(null===O)return null;const $=new qi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Tt,this.rootComponentType,null,this.urlTree.root,-1,{}),ne=new $r($,O),he=new Ki(this.url,ne);return this.inheritParamsAndData(he._root),he}inheritParamsAndData(R){const O=R.value,$=zi(O,this.paramsInheritanceStrategy);O.params=Object.freeze($.params),O.data=Object.freeze($.data),R.children.forEach(ne=>this.inheritParamsAndData(ne))}processSegmentGroup(R,O,$){return 0===O.segments.length&&O.hasChildren()?this.processChildren(R,O):this.processSegment(R,O,O.segments,$)}processChildren(R,O){const $=[];for(const he of Object.keys(O.children)){const Ae=O.children[he],qe=rt(R,he),Ct=this.processSegmentGroup(qe,Ae,he);if(null===Ct)return null;$.push(...Ct)}const ne=Ji($);return ne.sort((R,O)=>R.value.outlet===Tt?-1:O.value.outlet===Tt?1:R.value.outlet.localeCompare(O.value.outlet)),ne}processSegment(R,O,$,ne){for(const he of R){const Ae=this.processSegmentAgainstRoute(he,O,$,ne);if(null!==Ae)return Ae}return hr(O,$,ne)?[]:null}processSegmentAgainstRoute(R,O,$,ne){if(R.redirectTo||!Hr(R,O,$,ne))return null;let he,Ae=[],qe=[];if("**"===R.path){const Un=$.length>0?_n($).parameters:{};he=new qi($,Un,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ai(R),je(R),R.component,R,Oo(O),To(O)+$.length,Ro(R))}else{const Un=H(O,R,$);if(!Un.matched)return null;Ae=Un.consumedSegments,qe=$.slice(Un.lastChild),he=new qi(Ae,Un.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ai(R),je(R),R.component,R,Oo(O),To(O)+Ae.length,Ro(R))}const Ct=(U=R).children?U.children:U.loadChildren?U._loadedConfig.routes:[],{segmentGroup:fn,slicedSegments:rr}=V(O,Ae,qe,Ct.filter(Un=>void 0===Un.redirectTo),this.relativeLinkResolution);var U;if(0===rr.length&&fn.hasChildren()){const Un=this.processChildren(Ct,fn);return null===Un?null:[new $r(he,Un)]}if(0===Ct.length&&0===rr.length)return[new $r(he,[])];const Hn=je(R)===ne,Ar=this.processSegment(Ct,fn,rr,Hn?Tt:ne);return null===Ar?null:[new $r(he,Ar)]}}function Vr(U){const R=U.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function Ji(U){const R=[],O=new Set;for(const $ of U){if(!Vr($)){R.push($);continue}const ne=R.find(he=>$.value.routeConfig===he.value.routeConfig);void 0!==ne?(ne.children.push(...$.children),O.add(ne)):R.push($)}for(const $ of O){const ne=Ji($.children);R.push(new $r($.value,ne))}return R.filter($=>!O.has($))}function Oo(U){let R=U;for(;R._sourceSegment;)R=R._sourceSegment;return R}function To(U){let R=U,O=R._segmentIndexShift?R._segmentIndexShift:0;for(;R._sourceSegment;)R=R._sourceSegment,O+=R._segmentIndexShift?R._segmentIndexShift:0;return O-1}function ai(U){return U.data||{}}function Ro(U){return U.resolve||{}}function $i(U){return(0,Pn.w)(R=>{const O=U(R);return O?(0,me.D)(O).pipe((0,Ht.U)(()=>R)):(0,Ce.of)(R)})}class On extends class{shouldDetach(R){return!1}store(R,O){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,O){return R.routeConfig===O.routeConfig}}{}const $n=new g.OlP("ROUTES");class Rr{constructor(R,O,$,ne){this.loader=R,this.compiler=O,this.onLoadStartListener=$,this.onLoadEndListener=ne}load(R,O){if(O._loader$)return O._loader$;this.onLoadStartListener&&this.onLoadStartListener(O);const ne=this.loadModuleFactory(O.loadChildren).pipe((0,Ht.U)(he=>{this.onLoadEndListener&&this.onLoadEndListener(O);const Ae=he.create(R);return new Lo(zt(Ae.injector.get($n,void 0,g.XFs.Self|g.XFs.Optional)).map(we),Ae)}),Zt(he=>{throw O._loader$=void 0,he}));return O._loader$=new Mn.c(ne,()=>new kt.xQ).pipe((0,Mi.x)()),O._loader$}loadModuleFactory(R){return"string"==typeof R?(0,me.D)(this.loader.load(R)):Rn(R()).pipe((0,Sn.zg)(O=>O instanceof g.YKP?(0,Ce.of)(O):(0,me.D)(this.compiler.compileModuleAsync(O))))}}class br{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Si,this.attachRef=null}}class Si{constructor(){this.contexts=new Map}onChildOutletCreated(R,O){const $=this.getOrCreateContext(R);$.outlet=O,this.contexts.set(R,$)}onChildOutletDestroyed(R){const O=this.getContext(R);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const R=this.contexts;return this.contexts=new Map,R}onOutletReAttached(R){this.contexts=R}getOrCreateContext(R){let O=this.getContext(R);return O||(O=new br,this.contexts.set(R,O)),O}getContext(R){return this.contexts.get(R)||null}}class ro{shouldProcessUrl(R){return!0}extract(R){return R}merge(R,O){return R}}function Qr(U){throw U}function na(U,R,O){return R.parse("/")}function Ai(U,R){return(0,Ce.of)(null)}const Bs={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ti=(()=>{class U{constructor(O,$,ne,he,Ae,qe,Ct,fn){this.rootComponentType=O,this.urlSerializer=$,this.rootContexts=ne,this.location=he,this.config=fn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new kt.xQ,this.errorHandler=Qr,this.malformedUriErrorHandler=na,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ai,afterPreactivation:Ai},this.urlHandlingStrategy=new ro,this.routeReuseStrategy=new On,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ae.get(g.h0i),this.console=Ae.get(g.c2e);const Ar=Ae.get(g.R0b);this.isNgZoneEnabled=Ar instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(fn),this.currentUrlTree=new ar(new yn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Rr(qe,Ct,Un=>this.triggerEvent(new It(Un)),Un=>this.triggerEvent(new xt(Un))),this.routerState=jn(this.currentUrlTree,this.rootComponentType),this.transitions=new Me.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var O;return null===(O=this.location.getState())||void 0===O?void 0:O.\u0275routerPageId}setupNavigations(O){const $=this.events;return O.pipe((0,wt.h)(ne=>0!==ne.id),(0,Ht.U)(ne=>Object.assign(Object.assign({},ne),{extractedUrl:this.urlHandlingStrategy.extract(ne.rawUrl)})),(0,Pn.w)(ne=>{let he=!1,Ae=!1;return(0,Ce.of)(ne).pipe((0,An.b)(qe=>{this.currentNavigation={id:qe.id,initialUrl:qe.currentRawUrl,extractedUrl:qe.extractedUrl,trigger:qe.source,extras:qe.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Pn.w)(qe=>{const Ct=this.browserUrlTree.toString(),fn=!this.navigated||qe.extractedUrl.toString()!==Ct||Ct!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||fn)&&this.urlHandlingStrategy.shouldProcessUrl(qe.rawUrl))return ba(qe.source)&&(this.browserUrlTree=qe.extractedUrl),(0,Ce.of)(qe).pipe((0,Pn.w)(Hn=>{const Ar=this.transitions.getValue();return $.next(new kn(Hn.id,this.serializeUrl(Hn.extractedUrl),Hn.source,Hn.restoredState)),Ar!==this.transitions.getValue()?St.E:Promise.resolve(Hn)}),function(U,R,O,$){return(0,Pn.w)(ne=>function(U,R,O,$,ne){return new $u(U,R,O,$,ne).apply()}(U,R,O,ne.extractedUrl,$).pipe((0,Ht.U)(he=>Object.assign(Object.assign({},ne),{urlAfterRedirects:he}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,An.b)(Hn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Hn.urlAfterRedirects})}),function(U,R,O,$,ne){return(0,Sn.zg)(he=>function(U,R,O,$,ne="emptyOnly",he="legacy"){try{const Ae=new Fn(U,R,O,$,ne,he).recognize();return null===Ae?Tr(new ur):(0,Ce.of)(Ae)}catch(Ae){return Tr(Ae)}}(U,R,he.urlAfterRedirects,O(he.urlAfterRedirects),$,ne).pipe((0,Ht.U)(Ae=>Object.assign(Object.assign({},he),{targetSnapshot:Ae}))))}(this.rootComponentType,this.config,Hn=>this.serializeUrl(Hn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,An.b)(Hn=>{"eager"===this.urlUpdateStrategy&&(Hn.extras.skipLocationChange||this.setBrowserUrl(Hn.urlAfterRedirects,Hn),this.browserUrlTree=Hn.urlAfterRedirects);const Ar=new Ur(Hn.id,this.serializeUrl(Hn.extractedUrl),this.serializeUrl(Hn.urlAfterRedirects),Hn.targetSnapshot);$.next(Ar)}));if(fn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ar,extractedUrl:Un,source:go,restoredState:Uo,extras:mo}=qe,Hs=new kn(Ar,this.serializeUrl(Un),go,Uo);$.next(Hs);const Wo=jn(Un,this.rootComponentType).snapshot;return(0,Ce.of)(Object.assign(Object.assign({},qe),{targetSnapshot:Wo,urlAfterRedirects:Un,extras:Object.assign(Object.assign({},mo),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=qe.rawUrl,this.browserUrlTree=qe.urlAfterRedirects,qe.resolve(null),St.E}),$i(qe=>{const{targetSnapshot:Ct,id:fn,extractedUrl:rr,rawUrl:Hn,extras:{skipLocationChange:Ar,replaceUrl:Un}}=qe;return this.hooks.beforePreactivation(Ct,{navigationId:fn,appliedUrlTree:rr,rawUrlTree:Hn,skipLocationChange:!!Ar,replaceUrl:!!Un})}),(0,An.b)(qe=>{const Ct=new Zn(qe.id,this.serializeUrl(qe.extractedUrl),this.serializeUrl(qe.urlAfterRedirects),qe.targetSnapshot);this.triggerEvent(Ct)}),(0,Ht.U)(qe=>Object.assign(Object.assign({},qe),{guards:xi(qe.targetSnapshot,qe.currentSnapshot,this.rootContexts)})),function(U,R){return(0,Sn.zg)(O=>{const{targetSnapshot:$,currentSnapshot:ne,guards:{canActivateChecks:he,canDeactivateChecks:Ae}}=O;return 0===Ae.length&&0===he.length?(0,Ce.of)(Object.assign(Object.assign({},O),{guardsResult:!0})):function(U,R,O,$){return(0,me.D)(U).pipe((0,Sn.zg)(ne=>function(U,R,O,$,ne){const he=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!he||0===he.length)return(0,Ce.of)(!0);const Ae=he.map(qe=>{const Ct=Rs(qe,R,ne);let fn;if(function(U){return U&&Ci(U.canDeactivate)}(Ct))fn=Rn(Ct.canDeactivate(U,R,O,$));else{if(!Ci(Ct))throw new Error("Invalid CanDeactivate guard");fn=Rn(Ct(U,R,O,$))}return fn.pipe((0,Jn.P)())});return(0,Ce.of)(Ae).pipe(ge())}(ne.component,ne.route,O,R,$)),(0,Jn.P)(ne=>!0!==ne,!0))}(Ae,$,ne,U).pipe((0,Sn.zg)(qe=>qe&&function(U){return"boolean"==typeof U}(qe)?function(U,R,O,$){return(0,me.D)(R).pipe((0,Bn.b)(ne=>(0,re.z)(function(U,R){return null!==U&&R&&R(new sn(U)),(0,Ce.of)(!0)}(ne.route.parent,$),function(U,R){return null!==U&&R&&R(new He(U)),(0,Ce.of)(!0)}(ne.route,$),function(U,R,O){const $=R[R.length-1],he=R.slice(0,R.length-1).reverse().map(Ae=>function(U){const R=U.routeConfig?U.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:U,guards:R}:null}(Ae)).filter(Ae=>null!==Ae).map(Ae=>(0,Ke.P)(()=>{const qe=Ae.guards.map(Ct=>{const fn=Rs(Ct,Ae.node,O);let rr;if(function(U){return U&&Ci(U.canActivateChild)}(fn))rr=Rn(fn.canActivateChild($,U));else{if(!Ci(fn))throw new Error("Invalid CanActivateChild guard");rr=Rn(fn($,U))}return rr.pipe((0,Jn.P)())});return(0,Ce.of)(qe).pipe(ge())}));return(0,Ce.of)(he).pipe(ge())}(U,ne.path,O),function(U,R,O){const $=R.routeConfig?R.routeConfig.canActivate:null;if(!$||0===$.length)return(0,Ce.of)(!0);const ne=$.map(he=>(0,Ke.P)(()=>{const Ae=Rs(he,R,O);let qe;if(function(U){return U&&Ci(U.canActivate)}(Ae))qe=Rn(Ae.canActivate(R,U));else{if(!Ci(Ae))throw new Error("Invalid CanActivate guard");qe=Rn(Ae(R,U))}return qe.pipe((0,Jn.P)())}));return(0,Ce.of)(ne).pipe(ge())}(U,ne.route,O))),(0,Jn.P)(ne=>!0!==ne,!0))}($,he,U,R):(0,Ce.of)(qe)),(0,Ht.U)(qe=>Object.assign(Object.assign({},O),{guardsResult:qe})))})}(this.ngModule.injector,qe=>this.triggerEvent(qe)),(0,An.b)(qe=>{if(kr(qe.guardsResult)){const fn=Gt(`Redirecting to "${this.serializeUrl(qe.guardsResult)}"`);throw fn.url=qe.guardsResult,fn}const Ct=new Dt(qe.id,this.serializeUrl(qe.extractedUrl),this.serializeUrl(qe.urlAfterRedirects),qe.targetSnapshot,!!qe.guardsResult);this.triggerEvent(Ct)}),(0,wt.h)(qe=>!!qe.guardsResult||(this.restoreHistory(qe),this.cancelNavigationTransition(qe,""),!1)),$i(qe=>{if(qe.guards.canActivateChecks.length)return(0,Ce.of)(qe).pipe((0,An.b)(Ct=>{const fn=new Ze(Ct.id,this.serializeUrl(Ct.extractedUrl),this.serializeUrl(Ct.urlAfterRedirects),Ct.targetSnapshot);this.triggerEvent(fn)}),(0,Pn.w)(Ct=>{let fn=!1;return(0,Ce.of)(Ct).pipe(function(U,R){return(0,Sn.zg)(O=>{const{targetSnapshot:$,guards:{canActivateChecks:ne}}=O;if(!ne.length)return(0,Ce.of)(O);let he=0;return(0,me.D)(ne).pipe((0,Bn.b)(Ae=>function(U,R,O,$){return function(U,R,O,$){const ne=Object.keys(U);if(0===ne.length)return(0,Ce.of)({});const he={};return(0,me.D)(ne).pipe((0,Sn.zg)(Ae=>function(U,R,O,$){const ne=Rs(U,R,$);return Rn(ne.resolve?ne.resolve(R,O):ne(R,O))}(U[Ae],R,O,$).pipe((0,An.b)(qe=>{he[Ae]=qe}))),st(1),(0,Sn.zg)(()=>Object.keys(he).length===ne.length?(0,Ce.of)(he):St.E))}(U._resolve,U,R,$).pipe((0,Ht.U)(he=>(U._resolvedData=he,U.data=Object.assign(Object.assign({},U.data),zi(U,O).resolve),null)))}(Ae.route,$,U,R)),(0,An.b)(()=>he++),st(1),(0,Sn.zg)(Ae=>he===ne.length?(0,Ce.of)(O):St.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,An.b)({next:()=>fn=!0,complete:()=>{fn||(this.restoreHistory(Ct),this.cancelNavigationTransition(Ct,"At least one route resolver didn't emit any value."))}}))}),(0,An.b)(Ct=>{const fn=new ze(Ct.id,this.serializeUrl(Ct.extractedUrl),this.serializeUrl(Ct.urlAfterRedirects),Ct.targetSnapshot);this.triggerEvent(fn)}))}),$i(qe=>{const{targetSnapshot:Ct,id:fn,extractedUrl:rr,rawUrl:Hn,extras:{skipLocationChange:Ar,replaceUrl:Un}}=qe;return this.hooks.afterPreactivation(Ct,{navigationId:fn,appliedUrlTree:rr,rawUrlTree:Hn,skipLocationChange:!!Ar,replaceUrl:!!Un})}),(0,Ht.U)(qe=>{const Ct=function(U,R,O){const $=zo(U,R._root,O?O._root:void 0);return new sr($,R)}(this.routeReuseStrategy,qe.targetSnapshot,qe.currentRouterState);return Object.assign(Object.assign({},qe),{targetRouterState:Ct})}),(0,An.b)(qe=>{this.currentUrlTree=qe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(qe.urlAfterRedirects,qe.rawUrl),this.routerState=qe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(qe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,qe),this.browserUrlTree=qe.urlAfterRedirects)}),((U,R,O)=>(0,Ht.U)($=>(new no(R,$.targetRouterState,$.currentRouterState,O).activate(U),$)))(this.rootContexts,this.routeReuseStrategy,qe=>this.triggerEvent(qe)),(0,An.b)({next(){he=!0},complete(){he=!0}}),function(U){return R=>R.lift(new Ft(U))}(()=>{if(!he&&!Ae){const qe=`Navigation ID ${ne.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(ne),this.cancelNavigationTransition(ne,qe)):this.cancelNavigationTransition(ne,qe)}this.currentNavigation=null}),Zt(qe=>{if(Ae=!0,function(U){return U&&U[gn]}(qe)){const Ct=kr(qe.url);Ct||(this.navigated=!0,this.restoreHistory(ne,!0));const fn=new Qt(ne.id,this.serializeUrl(ne.extractedUrl),qe.message);$.next(fn),Ct?setTimeout(()=>{const rr=this.urlHandlingStrategy.merge(qe.url,this.rawUrlTree),Hn={skipLocationChange:ne.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ba(ne.source)};this.scheduleNavigation(rr,"imperative",null,Hn,{resolve:ne.resolve,reject:ne.reject,promise:ne.promise})},0):ne.resolve(!1)}else{this.restoreHistory(ne,!0);const Ct=new dr(ne.id,this.serializeUrl(ne.extractedUrl),qe);$.next(Ct);try{ne.resolve(this.errorHandler(qe))}catch(fn){ne.reject(fn)}}return St.E}))}))}resetRootComponentType(O){this.rootComponentType=O,this.routerState.root.component=this.rootComponentType}getTransition(){const O=this.transitions.value;return O.urlAfterRedirects=this.browserUrlTree,O}setTransition(O){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),O))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(O=>{const $=this.extractLocationChangeInfoFromEvent(O);this.shouldScheduleNavigation(this.lastLocationChangeInfo,$)&&setTimeout(()=>{const{source:ne,state:he,urlTree:Ae}=$,qe={replaceUrl:!0};if(he){const Ct=Object.assign({},he);delete Ct.navigationId,delete Ct.\u0275routerPageId,0!==Object.keys(Ct).length&&(qe.state=Ct)}this.scheduleNavigation(Ae,ne,he,qe)},0),this.lastLocationChangeInfo=$}))}extractLocationChangeInfoFromEvent(O){var $;return{source:"popstate"===O.type?"popstate":"hashchange",urlTree:this.parseUrl(O.url),state:(null===($=O.state)||void 0===$?void 0:$.navigationId)?O.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(O,$){if(!O)return!0;const ne=$.urlTree.toString()===O.urlTree.toString();return $.transitionId!==O.transitionId||!ne||!("hashchange"===$.source&&"popstate"===O.source||"popstate"===$.source&&"hashchange"===O.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(O){this.events.next(O)}resetConfig(O){W(O),this.config=O.map(we),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(O,$={}){const{relativeTo:ne,queryParams:he,fragment:Ae,queryParamsHandling:qe,preserveFragment:Ct}=$,fn=ne||this.routerState.root,rr=Ct?this.currentUrlTree.fragment:Ae;let Hn=null;switch(qe){case"merge":Hn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),he);break;case"preserve":Hn=this.currentUrlTree.queryParams;break;default:Hn=he||null}return null!==Hn&&(Hn=this.removeEmptyProps(Hn)),function(U,R,O,$,ne){if(0===O.length)return vi(R.root,R.root,R,$,ne);const he=function(U){if("string"==typeof U[0]&&1===U.length&&"/"===U[0])return new eo(!0,0,U);let R=0,O=!1;const $=U.reduce((ne,he,Ae)=>{if("object"==typeof he&&null!=he){if(he.outlets){const qe={};return Vn(he.outlets,(Ct,fn)=>{qe[fn]="string"==typeof Ct?Ct.split("/"):Ct}),[...ne,{outlets:qe}]}if(he.segmentPath)return[...ne,he.segmentPath]}return"string"!=typeof he?[...ne,he]:0===Ae?(he.split("/").forEach((qe,Ct)=>{0==Ct&&"."===qe||(0==Ct&&""===qe?O=!0:".."===qe?R++:""!=qe&&ne.push(qe))}),ne):[...ne,he]},[]);return new eo(O,R,$)}(O);if(he.toRoot())return vi(R.root,new yn([],{}),R,$,ne);const Ae=function(U,R,O){if(U.isAbsolute)return new lo(R.root,!0,0);if(-1===O.snapshot._lastPathIndex){const he=O.snapshot._urlSegment;return new lo(he,he===R.root,0)}const $=qo(U.commands[0])?0:1;return function(U,R,O){let $=U,ne=R,he=O;for(;he>ne;){if(he-=ne,$=$.parent,!$)throw new Error("Invalid number of '../'");ne=$.segments.length}return new lo($,!1,ne-he)}(O.snapshot._urlSegment,O.snapshot._lastPathIndex+$,U.numberOfDoubleDots)}(he,R,U),qe=Ae.processChildren?bi(Ae.segmentGroup,Ae.index,he.commands):ko(Ae.segmentGroup,Ae.index,he.commands);return vi(Ae.segmentGroup,qe,R,$,ne)}(fn,this.currentUrlTree,O,Hn,null!=rr?rr:null)}navigateByUrl(O,$={skipLocationChange:!1}){const ne=kr(O)?O:this.parseUrl(O),he=this.urlHandlingStrategy.merge(ne,this.rawUrlTree);return this.scheduleNavigation(he,"imperative",null,$)}navigate(O,$={skipLocationChange:!1}){return function(U){for(let R=0;R<U.length;R++){const O=U[R];if(null==O)throw new Error(`The requested path contains ${O} segment at index ${R}`)}}(O),this.navigateByUrl(this.createUrlTree(O,$),$)}serializeUrl(O){return this.urlSerializer.serialize(O)}parseUrl(O){let $;try{$=this.urlSerializer.parse(O)}catch(ne){$=this.malformedUriErrorHandler(ne,this.urlSerializer,O)}return $}isActive(O,$){let ne;if(ne=!0===$?Object.assign({},Bs):!1===$?Object.assign({},Wi):$,kr(O))return Er(this.currentUrlTree,O,ne);const he=this.parseUrl(O);return Er(this.currentUrlTree,he,ne)}removeEmptyProps(O){return Object.keys(O).reduce(($,ne)=>{const he=O[ne];return null!=he&&($[ne]=he),$},{})}processNavigations(){this.navigations.subscribe(O=>{this.navigated=!0,this.lastSuccessfulId=O.id,this.currentPageId=O.targetPageId,this.events.next(new Ln(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,O.resolve(!0)},O=>{this.console.warn(`Unhandled Navigation Error: ${O}`)})}scheduleNavigation(O,$,ne,he,Ae){var qe,Ct;if(this.disposed)return Promise.resolve(!1);const fn=this.getTransition(),rr=ba($)&&fn&&!ba(fn.source),Un=(this.lastSuccessfulId===fn.id||this.currentNavigation?fn.rawUrl:fn.urlAfterRedirects).toString()===O.toString();if(rr&&Un)return Promise.resolve(!0);let go,Uo,mo;Ae?(go=Ae.resolve,Uo=Ae.reject,mo=Ae.promise):mo=new Promise((Yo,pu)=>{go=Yo,Uo=pu});const Hs=++this.navigationId;let Wo;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(ne=this.location.getState()),Wo=ne&&ne.\u0275routerPageId?ne.\u0275routerPageId:he.replaceUrl||he.skipLocationChange?null!==(qe=this.browserPageId)&&void 0!==qe?qe:0:(null!==(Ct=this.browserPageId)&&void 0!==Ct?Ct:0)+1):Wo=0,this.setTransition({id:Hs,targetPageId:Wo,source:$,restoredState:ne,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:O,extras:he,resolve:go,reject:Uo,promise:mo,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),mo.catch(Yo=>Promise.reject(Yo))}setBrowserUrl(O,$){const ne=this.urlSerializer.serialize(O),he=Object.assign(Object.assign({},$.extras.state),this.generateNgRouterState($.id,$.targetPageId));this.location.isCurrentPathEqualTo(ne)||$.extras.replaceUrl?this.location.replaceState(ne,"",he):this.location.go(ne,"",he)}restoreHistory(O,$=!1){var ne,he;if("computed"===this.canceledNavigationResolution){const Ae=this.currentPageId-O.targetPageId;"popstate"!==O.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(ne=this.currentNavigation)||void 0===ne?void 0:ne.finalUrl)||0===Ae?this.currentUrlTree===(null===(he=this.currentNavigation)||void 0===he?void 0:he.finalUrl)&&0===Ae&&(this.resetState(O),this.browserUrlTree=O.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ae)}else"replace"===this.canceledNavigationResolution&&($&&this.resetState(O),this.resetUrlToCurrentUrlTree())}resetState(O){this.routerState=O.currentRouterState,this.currentUrlTree=O.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,O.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(O,$){const ne=new Qt(O.id,this.serializeUrl(O.extractedUrl),$);this.triggerEvent(ne),O.resolve(!1)}generateNgRouterState(O,$){return"computed"===this.canceledNavigationResolution?{navigationId:O,\u0275routerPageId:$}:{navigationId:O}}}return U.\u0275fac=function(O){return new(O||U)(g.LFG(g.DyG),g.LFG(dn),g.LFG(Si),g.LFG(P.Ye),g.LFG(g.zs3),g.LFG(g.v3s),g.LFG(g.Sil),g.LFG(void 0))},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac}),U})();function ba(U){return"imperative"!==U}let Ui=(()=>{class U{constructor(O,$,ne,he,Ae){this.router=O,this.route=$,this.commands=[],this.onChanges=new kt.xQ,null==ne&&he.setAttribute(Ae.nativeElement,"tabindex","0")}ngOnChanges(O){this.onChanges.next(this)}set routerLink(O){this.commands=null!=O?Array.isArray(O)?O:[O]:[]}onClick(){const O={skipLocationChange:Ea(this.skipLocationChange),replaceUrl:Ea(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,O),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ea(this.preserveFragment)})}}return U.\u0275fac=function(O){return new(O||U)(g.Y36(ti),g.Y36(Mr),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},U.\u0275dir=g.lG2({type:U,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(O,$){1&O&&g.NdJ("click",function(){return $.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[g.TTD]}),U})(),Ca=(()=>{class U{constructor(O,$,ne){this.router=O,this.route=$,this.locationStrategy=ne,this.commands=[],this.onChanges=new kt.xQ,this.subscription=O.events.subscribe(he=>{he instanceof Ln&&this.updateTargetUrlAndHref()})}set routerLink(O){this.commands=null!=O?Array.isArray(O)?O:[O]:[]}ngOnChanges(O){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(O,$,ne,he,Ae){if(0!==O||$||ne||he||Ae||"string"==typeof this.target&&"_self"!=this.target)return!0;const qe={skipLocationChange:Ea(this.skipLocationChange),replaceUrl:Ea(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,qe),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ea(this.preserveFragment)})}}return U.\u0275fac=function(O){return new(O||U)(g.Y36(ti),g.Y36(Mr),g.Y36(P.S$))},U.\u0275dir=g.lG2({type:U,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(O,$){1&O&&g.NdJ("click",function(he){return $.onClick(he.button,he.ctrlKey,he.shiftKey,he.altKey,he.metaKey)}),2&O&&(g.Ikx("href",$.href,g.LSH),g.uIk("target",$.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[g.TTD]}),U})();function Ea(U){return""===U||!!U}let wa=(()=>{class U{constructor(O,$,ne,he,Ae,qe){this.router=O,this.element=$,this.renderer=ne,this.cdr=he,this.link=Ae,this.linkWithHref=qe,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=O.events.subscribe(Ct=>{Ct instanceof Ln&&this.update()})}ngAfterContentInit(){(0,Ce.of)(this.links.changes,this.linksWithHrefs.changes,(0,Ce.of)(null)).pipe((0,mn.J)()).subscribe(O=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var O;null===(O=this.linkInputChangesSubscription)||void 0===O||O.unsubscribe();const $=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(ne=>!!ne).map(ne=>ne.onChanges);this.linkInputChangesSubscription=(0,me.D)($).pipe((0,mn.J)()).subscribe(ne=>{this.isActive!==this.isLinkActive(this.router)(ne)&&this.update()})}set routerLinkActive(O){const $=Array.isArray(O)?O:O.split(" ");this.classes=$.filter(ne=>!!ne)}ngOnChanges(O){this.update()}ngOnDestroy(){var O;this.routerEventsSubscription.unsubscribe(),null===(O=this.linkInputChangesSubscription)||void 0===O||O.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const O=this.hasActiveLinks();this.isActive!==O&&(this.isActive=O,this.cdr.markForCheck(),this.classes.forEach($=>{O?this.renderer.addClass(this.element.nativeElement,$):this.renderer.removeClass(this.element.nativeElement,$)}))})}isLinkActive(O){const $=function(U){return!!U.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return ne=>O.isActive(ne.urlTree,$)}hasActiveLinks(){const O=this.isLinkActive(this.router);return this.link&&O(this.link)||this.linkWithHref&&O(this.linkWithHref)||this.links.some(O)||this.linksWithHrefs.some(O)}}return U.\u0275fac=function(O){return new(O||U)(g.Y36(ti),g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(g.sBO),g.Y36(Ui,8),g.Y36(Ca,8))},U.\u0275dir=g.lG2({type:U,selectors:[["","routerLinkActive",""]],contentQueries:function(O,$,ne){if(1&O&&(g.Suo(ne,Ui,5),g.Suo(ne,Ca,5)),2&O){let he;g.iGM(he=g.CRH())&&($.links=he),g.iGM(he=g.CRH())&&($.linksWithHrefs=he)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[g.TTD]}),U})(),Wu=(()=>{class U{constructor(O,$,ne,he,Ae){this.parentContexts=O,this.location=$,this.resolver=ne,this.changeDetector=Ae,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.name=he||Tt,O.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const O=this.parentContexts.getContext(this.name);O&&O.route&&(O.attachRef?this.attach(O.attachRef,O.route):this.activateWith(O.route,O.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const O=this.activated;return this.activated=null,this._activatedRoute=null,O}attach(O,$){this.activated=O,this._activatedRoute=$,this.location.insert(O.hostView)}deactivate(){if(this.activated){const O=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(O)}}activateWith(O,$){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=O;const Ae=($=$||this.resolver).resolveComponentFactory(O._futureSnapshot.routeConfig.component),qe=this.parentContexts.getOrCreateContext(this.name).children,Ct=new Da(O,qe,this.location.injector);this.activated=this.location.createComponent(Ae,this.location.length,Ct),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return U.\u0275fac=function(O){return new(O||U)(g.Y36(Si),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},U.\u0275dir=g.lG2({type:U,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),U})();class Da{constructor(R,O,$){this.route=R,this.childContexts=O,this.parent=$}get(R,O){return R===Mr?this.route:R===Si?this.childContexts:this.parent.get(R,O)}}class Yu{}class js{preload(R,O){return(0,Ce.of)(null)}}let Ml=(()=>{class U{constructor(O,$,ne,he,Ae){this.router=O,this.injector=he,this.preloadingStrategy=Ae,this.loader=new Rr($,ne,fn=>O.triggerEvent(new It(fn)),fn=>O.triggerEvent(new xt(fn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,wt.h)(O=>O instanceof Ln),(0,Bn.b)(()=>this.preload())).subscribe(()=>{})}preload(){const O=this.injector.get(g.h0i);return this.processRoutes(O,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(O,$){const ne=[];for(const he of $)if(he.loadChildren&&!he.canLoad&&he._loadedConfig){const Ae=he._loadedConfig;ne.push(this.processRoutes(Ae.module,Ae.routes))}else he.loadChildren&&!he.canLoad?ne.push(this.preloadConfig(O,he)):he.children&&ne.push(this.processRoutes(O,he.children));return(0,me.D)(ne).pipe((0,mn.J)(),(0,Ht.U)(he=>{}))}preloadConfig(O,$){return this.preloadingStrategy.preload($,()=>($._loadedConfig?(0,Ce.of)($._loadedConfig):this.loader.load(O.injector,$)).pipe((0,Sn.zg)(he=>($._loadedConfig=he,this.processRoutes(he.module,he.routes)))))}}return U.\u0275fac=function(O){return new(O||U)(g.LFG(ti),g.LFG(g.v3s),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(Yu))},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac}),U})(),ra=(()=>{class U{constructor(O,$,ne={}){this.router=O,this.viewportScroller=$,this.options=ne,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ne.scrollPositionRestoration=ne.scrollPositionRestoration||"disabled",ne.anchorScrolling=ne.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(O=>{O instanceof kn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=O.navigationTrigger,this.restoredId=O.restoredState?O.restoredState.navigationId:0):O instanceof Ln&&(this.lastId=O.id,this.scheduleScrollEvent(O,this.router.parseUrl(O.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(O=>{O instanceof vt&&(O.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(O.position):O.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(O.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(O,$){this.router.triggerEvent(new vt(O,"popstate"===this.lastSource?this.store[this.restoredId]:null,$))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return U.\u0275fac=function(O){return new(O||U)(g.LFG(ti),g.LFG(P.EM),g.LFG(void 0))},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac}),U})();const Ta=new g.OlP("ROUTER_CONFIGURATION"),Ha=new g.OlP("ROUTER_FORROOT_GUARD"),_t=[P.Ye,{provide:dn,useClass:In},{provide:ti,useFactory:function(U,R,O,$,ne,he,Ae,qe={},Ct,fn){const rr=new ti(null,U,R,O,$,ne,he,zt(Ae));return Ct&&(rr.urlHandlingStrategy=Ct),fn&&(rr.routeReuseStrategy=fn),function(U,R){U.errorHandler&&(R.errorHandler=U.errorHandler),U.malformedUriErrorHandler&&(R.malformedUriErrorHandler=U.malformedUriErrorHandler),U.onSameUrlNavigation&&(R.onSameUrlNavigation=U.onSameUrlNavigation),U.paramsInheritanceStrategy&&(R.paramsInheritanceStrategy=U.paramsInheritanceStrategy),U.relativeLinkResolution&&(R.relativeLinkResolution=U.relativeLinkResolution),U.urlUpdateStrategy&&(R.urlUpdateStrategy=U.urlUpdateStrategy)}(qe,rr),qe.enableTracing&&rr.events.subscribe(Hn=>{var Ar,Un;null===(Ar=console.group)||void 0===Ar||Ar.call(console,`Router Event: ${Hn.constructor.name}`),console.log(Hn.toString()),console.log(Hn),null===(Un=console.groupEnd)||void 0===Un||Un.call(console)}),rr},deps:[dn,Si,P.Ye,g.zs3,g.v3s,g.Sil,$n,Ta,[class{},new g.FiY],[class{},new g.FiY]]},Si,{provide:Mr,useFactory:function(U){return U.routerState.root},deps:[ti]},{provide:g.v3s,useClass:g.EAV},Ml,js,class{preload(R,O){return O().pipe(Zt(()=>(0,Ce.of)(null)))}},{provide:Ta,useValue:{enableTracing:!1}}];function Lt(){return new g.PXZ("Router",ti)}let ss=(()=>{class U{constructor(O,$){}static forRoot(O,$){return{ngModule:U,providers:[_t,Cs(O),{provide:Ha,useFactory:Oi,deps:[[ti,new g.FiY,new g.tp0]]},{provide:Ta,useValue:$||{}},{provide:P.S$,useFactory:nn,deps:[P.lw,[new g.tBr(P.mr),new g.FiY],Ta]},{provide:ra,useFactory:Sa,deps:[ti,P.EM,Ta]},{provide:Yu,useExisting:$&&$.preloadingStrategy?$.preloadingStrategy:js},{provide:g.PXZ,multi:!0,useFactory:Lt},[an,{provide:g.ip1,multi:!0,useFactory:rc,deps:[an]},{provide:xr,useFactory:fu,deps:[an]},{provide:g.tb,multi:!0,useExisting:xr}]]}}static forChild(O){return{ngModule:U,providers:[Cs(O)]}}}return U.\u0275fac=function(O){return new(O||U)(g.LFG(Ha,8),g.LFG(ti,8))},U.\u0275mod=g.oAB({type:U}),U.\u0275inj=g.cJS({}),U})();function Sa(U,R,O){return O.scrollOffset&&R.setOffset(O.scrollOffset),new ra(U,R,O)}function nn(U,R,O={}){return O.useHash?new P.Do(U,R):new P.b0(U,R)}function Oi(U){return"guarded"}function Cs(U){return[{provide:g.deG,multi:!0,useValue:U},{provide:$n,multi:!0,useValue:U}]}let an=(()=>{class U{constructor(O){this.injector=O,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new kt.xQ}appInitializer(){return this.injector.get(P.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let $=null;const ne=new Promise(qe=>$=qe),he=this.injector.get(ti),Ae=this.injector.get(Ta);return"disabled"===Ae.initialNavigation?(he.setUpLocationChangeListener(),$(!0)):"enabled"===Ae.initialNavigation||"enabledBlocking"===Ae.initialNavigation?(he.hooks.afterPreactivation=()=>this.initNavigation?(0,Ce.of)(null):(this.initNavigation=!0,$(!0),this.resultOfPreactivationDone),he.initialNavigation()):$(!0),ne})}bootstrapListener(O){const $=this.injector.get(Ta),ne=this.injector.get(Ml),he=this.injector.get(ra),Ae=this.injector.get(ti),qe=this.injector.get(g.z2F);O===qe.components[0]&&(("enabledNonBlocking"===$.initialNavigation||void 0===$.initialNavigation)&&Ae.initialNavigation(),ne.setUpPreloading(),he.init(),Ae.resetRootComponentType(qe.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return U.\u0275fac=function(O){return new(O||U)(g.LFG(g.zs3))},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac}),U})();function rc(U){return U.appInitializer.bind(U)}function fu(U){return U.bootstrapListener.bind(U)}const xr=new g.OlP("Router Initializer")},9759:(jt,it,Q)=>{"use strict";Q.d(it,{Z:()=>Bt});var Ve,dt,P=Q(4762),g=Q(4685),X=Q(6034),C=Q(300),Ee=((Ve={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ve["bad-app-name"]="Illegal App name: '{$appName}",Ve["duplicate-app"]="Firebase App named '{$appName}' already exists",Ve["app-deleted"]="Firebase App named '{$appName}' already deleted",Ve["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ve["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ve),Fe=new g.LL("app","Firebase",Ee),fe="@firebase/app",Zt="[DEFAULT]",Ot=((dt={})[fe]="fire-core",dt["@firebase/analytics"]="fire-analytics",dt["@firebase/app-check"]="fire-app-check",dt["@firebase/auth"]="fire-auth",dt["@firebase/database"]="fire-rtdb",dt["@firebase/functions"]="fire-fn",dt["@firebase/installations"]="fire-iid",dt["@firebase/messaging"]="fire-fcm",dt["@firebase/performance"]="fire-perf",dt["@firebase/remote-config"]="fire-rc",dt["@firebase/storage"]="fire-gcs",dt["@firebase/firestore"]="fire-fst",dt["fire-js"]="fire-js",dt["firebase-wrapper"]="fire-js-all",dt),Cn=new C.Yd("@firebase/app"),wt=function(){function Ft(Jt,Ht,Pn){var bn=this;this.firebase_=Pn,this.isDeleted_=!1,this.name_=Ht.name,this.automaticDataCollectionEnabled_=Ht.automaticDataCollectionEnabled||!1,this.options_=(0,g.p$)(Jt),this.container=new X.H0(Ht.name),this._addComponent(new X.wA("app",function(){return bn},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(or){return bn._addComponent(or)})}return Object.defineProperty(Ft.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(Jt){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=Jt},enumerable:!1,configurable:!0}),Object.defineProperty(Ft.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Ft.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Ft.prototype.delete=function(){var Jt=this;return new Promise(function(Ht){Jt.checkDestroyed_(),Ht()}).then(function(){return Jt.firebase_.INTERNAL.removeApp(Jt.name_),Promise.all(Jt.container.getProviders().map(function(Ht){return Ht.delete()}))}).then(function(){Jt.isDeleted_=!0})},Ft.prototype._getService=function(Jt,Ht){var Pn;void 0===Ht&&(Ht=Zt),this.checkDestroyed_();var bn=this.container.getProvider(Jt);return!bn.isInitialized()&&"EXPLICIT"===(null===(Pn=bn.getComponent())||void 0===Pn?void 0:Pn.instantiationMode)&&bn.initialize(),bn.getImmediate({identifier:Ht})},Ft.prototype._removeServiceInstance=function(Jt,Ht){void 0===Ht&&(Ht=Zt),this.container.getProvider(Jt).clearInstance(Ht)},Ft.prototype._addComponent=function(Jt){try{this.container.addComponent(Jt)}catch(Ht){Cn.debug("Component "+Jt.name+" failed to register with FirebaseApp "+this.name,Ht)}},Ft.prototype._addOrOverwriteComponent=function(Jt){this.container.addOrOverwriteComponent(Jt)},Ft.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Ft.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Fe.create("app-deleted",{appName:this.name_})},Ft}();wt.prototype.name&&wt.prototype.options||wt.prototype.delete||console.log("dc");var nt=function st(){var Ft=function(Ft){var Jt={},Ht=new Map,Pn={__esModule:!0,initializeApp:function(mn,Wt){void 0===Wt&&(Wt={}),("object"!=typeof Wt||null===Wt)&&(Wt={name:Wt});var Ln=Wt;void 0===Ln.name&&(Ln.name=Zt);var Qt=Ln.name;if("string"!=typeof Qt||!Qt)throw Fe.create("bad-app-name",{appName:String(Qt)});if((0,g.r3)(Jt,Qt))throw Fe.create("duplicate-app",{appName:Qt});var dr=new Ft(mn,Ln,Pn);return Jt[Qt]=dr,dr},app:or,registerVersion:function(mn,Wt,kn){var Ln,Qt=null!==(Ln=Ot[mn])&&void 0!==Ln?Ln:mn;kn&&(Qt+="-"+kn);var dr=Qt.match(/\s|\//),Ur=Wt.match(/\s|\//);if(dr||Ur){var Zn=['Unable to register library "'+Qt+'" with version "'+Wt+'":'];return dr&&Zn.push('library name "'+Qt+'" contains illegal characters (whitespace or "/")'),dr&&Ur&&Zn.push("and"),Ur&&Zn.push('version name "'+Wt+'" contains illegal characters (whitespace or "/")'),void Cn.warn(Zn.join(" "))}Jn(new X.wA(Qt+"-version",function(){return{library:Qt,version:Wt}},"VERSION"))},setLogLevel:C.Ub,onLog:function(mn,Wt){if(null!==mn&&"function"!=typeof mn)throw Fe.create("invalid-log-argument");(0,C.Am)(mn,Wt)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:Jn,removeApp:function(mn){delete Jt[mn]},components:Ht,useAsService:function(mn,Wt){return"serverAuth"===Wt?null:Wt}}};function or(mn){if(!(0,g.r3)(Jt,mn=mn||Zt))throw Fe.create("no-app",{appName:mn});return Jt[mn]}function Jn(mn){var Wt=mn.name;if(Ht.has(Wt))return Cn.debug("There were multiple attempts to register component "+Wt+"."),"PUBLIC"===mn.type?Pn[Wt]:null;if(Ht.set(Wt,mn),"PUBLIC"===mn.type){var kn=function(Ur){if(void 0===Ur&&(Ur=or()),"function"!=typeof Ur[Wt])throw Fe.create("invalid-app-argument",{appName:Wt});return Ur[Wt]()};void 0!==mn.serviceProps&&(0,g.ZB)(kn,mn.serviceProps),Pn[Wt]=kn,Ft.prototype[Wt]=function(){for(var Ur=[],Zn=0;Zn<arguments.length;Zn++)Ur[Zn]=arguments[Zn];return this._getService.bind(this,Wt).apply(this,mn.multipleInstances?Ur:[])}}for(var Ln=0,Qt=Object.keys(Jt);Ln<Qt.length;Ln++)Jt[Qt[Ln]]._addComponent(mn);return"PUBLIC"===mn.type?Pn[Wt]:null}return Pn.default=Pn,Object.defineProperty(Pn,"apps",{get:function(){return Object.keys(Jt).map(function(mn){return Jt[mn]})}}),or.App=Ft,Pn}(wt);return Ft.INTERNAL=(0,P.pi)((0,P.pi)({},Ft.INTERNAL),{createFirebaseNamespace:st,extendNamespace:function(Ht){(0,g.ZB)(Ft,Ht)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Ft}(),yt=function(){function Ft(Jt){this.container=Jt}return Ft.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(Ht){if(function(Ft){var Jt=Ft.getComponent();return"VERSION"===(null==Jt?void 0:Jt.type)}(Ht)){var Pn=Ht.getImmediate();return Pn.library+"/"+Pn.version}return null}).filter(function(Ht){return Ht}).join(" ")},Ft}();if((0,g.jU)()&&void 0!==self.firebase){Cn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var un=self.firebase.SDK_VERSION;un&&un.indexOf("LITE")>=0&&Cn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Tn=nt.initializeApp;nt.initializeApp=function(){for(var Ft=[],Jt=0;Jt<arguments.length;Jt++)Ft[Jt]=arguments[Jt];return(0,g.UG)()&&Cn.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Tn.apply(void 0,Ft)};var Ft,on=nt;(Ft=on).INTERNAL.registerComponent(new X.wA("platform-logger",function(Ht){return new yt(Ht)},"PRIVATE")),Ft.registerVersion(fe,"0.6.30",undefined),Ft.registerVersion("fire-js","");const Bt=on},6034:(jt,it,Q)=>{"use strict";Q.d(it,{wA:()=>X,H0:()=>fe,zt:()=>Ve});var P=Q(4762),g=Q(4685),X=function(){function ve(se,Se,me){this.name=se,this.instanceFactory=Se,this.type=me,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ve.prototype.setInstantiationMode=function(se){return this.instantiationMode=se,this},ve.prototype.setMultipleInstances=function(se){return this.multipleInstances=se,this},ve.prototype.setServiceProps=function(se){return this.serviceProps=se,this},ve.prototype.setInstanceCreatedCallback=function(se){return this.onInstanceCreated=se,this},ve}(),C="[DEFAULT]",Ve=function(){function ve(se,Se){this.name=se,this.container=Se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ve.prototype.get=function(se){var Se=this.normalizeInstanceIdentifier(se);if(!this.instancesDeferred.has(Se)){var me=new g.BH;if(this.instancesDeferred.set(Se,me),this.isInitialized(Se)||this.shouldAutoInitialize())try{var Ce=this.getOrInitializeService({instanceIdentifier:Se});Ce&&me.resolve(Ce)}catch(Me){}}return this.instancesDeferred.get(Se).promise},ve.prototype.getImmediate=function(se){var Se,me=this.normalizeInstanceIdentifier(null==se?void 0:se.identifier),Ce=null!==(Se=null==se?void 0:se.optional)&&void 0!==Se&&Se;if(!this.isInitialized(me)&&!this.shouldAutoInitialize()){if(Ce)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:me})}catch(Me){if(Ce)return null;throw Me}},ve.prototype.getComponent=function(){return this.component},ve.prototype.setComponent=function(se){var Se,me;if(se.name!==this.name)throw Error("Mismatching Component "+se.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=se,this.shouldAutoInitialize()){if(function(ve){return"EAGER"===ve.instantiationMode}(se))try{this.getOrInitializeService({instanceIdentifier:C})}catch(Mn){}try{for(var Ce=(0,P.XA)(this.instancesDeferred.entries()),Me=Ce.next();!Me.done;Me=Ce.next()){var Ue=(0,P.CR)(Me.value,2),re=Ue[1],Ke=this.normalizeInstanceIdentifier(Ue[0]);try{var St=this.getOrInitializeService({instanceIdentifier:Ke});re.resolve(St)}catch(Mn){}}}catch(Mn){Se={error:Mn}}finally{try{Me&&!Me.done&&(me=Ce.return)&&me.call(Ce)}finally{if(Se)throw Se.error}}}},ve.prototype.clearInstance=function(se){void 0===se&&(se=C),this.instancesDeferred.delete(se),this.instancesOptions.delete(se),this.instances.delete(se)},ve.prototype.delete=function(){return(0,P.mG)(this,void 0,void 0,function(){var se;return(0,P.Jh)(this,function(Se){switch(Se.label){case 0:return se=Array.from(this.instances.values()),[4,Promise.all((0,P.ev)((0,P.ev)([],(0,P.CR)(se.filter(function(me){return"INTERNAL"in me}).map(function(me){return me.INTERNAL.delete()}))),(0,P.CR)(se.filter(function(me){return"_delete"in me}).map(function(me){return me._delete()}))))];case 1:return Se.sent(),[2]}})})},ve.prototype.isComponentSet=function(){return null!=this.component},ve.prototype.isInitialized=function(se){return void 0===se&&(se=C),this.instances.has(se)},ve.prototype.getOptions=function(se){return void 0===se&&(se=C),this.instancesOptions.get(se)||{}},ve.prototype.initialize=function(se){var Se,me;void 0===se&&(se={});var Ce=se.options,Me=void 0===Ce?{}:Ce,Ue=this.normalizeInstanceIdentifier(se.instanceIdentifier);if(this.isInitialized(Ue))throw Error(this.name+"("+Ue+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Xe=this.getOrInitializeService({instanceIdentifier:Ue,options:Me});try{for(var re=(0,P.XA)(this.instancesDeferred.entries()),Ke=re.next();!Ke.done;Ke=re.next()){var St=(0,P.CR)(Ke.value,2),kt=St[1];Ue===this.normalizeInstanceIdentifier(St[0])&&kt.resolve(Xe)}}catch(Zt){Se={error:Zt}}finally{try{Ke&&!Ke.done&&(me=re.return)&&me.call(re)}finally{if(Se)throw Se.error}}return Xe},ve.prototype.onInit=function(se,Se){var me,Ce=this.normalizeInstanceIdentifier(Se),Me=null!==(me=this.onInitCallbacks.get(Ce))&&void 0!==me?me:new Set;Me.add(se),this.onInitCallbacks.set(Ce,Me);var Ue=this.instances.get(Ce);return Ue&&se(Ue,Ce),function(){Me.delete(se)}},ve.prototype.invokeOnInitCallbacks=function(se,Se){var me,Ce,Me=this.onInitCallbacks.get(Se);if(Me)try{for(var Ue=(0,P.XA)(Me),Xe=Ue.next();!Xe.done;Xe=Ue.next()){var re=Xe.value;try{re(se,Se)}catch(Ke){}}}catch(Ke){me={error:Ke}}finally{try{Xe&&!Xe.done&&(Ce=Ue.return)&&Ce.call(Ue)}finally{if(me)throw me.error}}},ve.prototype.getOrInitializeService=function(se){var Se=se.instanceIdentifier,me=se.options,Ce=void 0===me?{}:me,Me=this.instances.get(Se);if(!Me&&this.component&&(Me=this.component.instanceFactory(this.container,{instanceIdentifier:Ee(Se),options:Ce}),this.instances.set(Se,Me),this.instancesOptions.set(Se,Ce),this.invokeOnInitCallbacks(Me,Se),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Se,Me)}catch(Ue){}return Me||null},ve.prototype.normalizeInstanceIdentifier=function(se){return void 0===se&&(se=C),this.component?this.component.multipleInstances?se:C:se},ve.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},ve}();function Ee(ve){return ve===C?void 0:ve}var fe=function(){function ve(se){this.name=se,this.providers=new Map}return ve.prototype.addComponent=function(se){var Se=this.getProvider(se.name);if(Se.isComponentSet())throw new Error("Component "+se.name+" has already been registered with "+this.name);Se.setComponent(se)},ve.prototype.addOrOverwriteComponent=function(se){this.getProvider(se.name).isComponentSet()&&this.providers.delete(se.name),this.addComponent(se)},ve.prototype.getProvider=function(se){if(this.providers.has(se))return this.providers.get(se);var Se=new Ve(se,this);return this.providers.set(se,Se),Se},ve.prototype.getProviders=function(){return Array.from(this.providers.values())},ve}()},9192:(jt,it,Q)=>{"use strict";var P=Q(9759),g=Q(6034),X=Q(4685),C=Q(4762),Ve=Q(300);jt=Q.hmd(jt);var fe="";function ve(c){fe=c}var c,se=function(){function c(d){this.domStorage_=d,this.prefix_="firebase:"}return c.prototype.set=function(d,f){null==f?this.domStorage_.removeItem(this.prefixedName_(d)):this.domStorage_.setItem(this.prefixedName_(d),(0,X.Pz)(f))},c.prototype.get=function(d){var f=this.domStorage_.getItem(this.prefixedName_(d));return null==f?null:(0,X.cI)(f)},c.prototype.remove=function(d){this.domStorage_.removeItem(this.prefixedName_(d))},c.prototype.prefixedName_=function(d){return this.prefix_+d},c.prototype.toString=function(){return this.domStorage_.toString()},c}(),Se=function(){function c(){this.cache_={},this.isInMemoryStorage=!0}return c.prototype.set=function(d,f){null==f?delete this.cache_[d]:this.cache_[d]=f},c.prototype.get=function(d){return(0,X.r3)(this.cache_,d)?this.cache_[d]:null},c.prototype.remove=function(d){delete this.cache_[d]},c}(),me=function(c){try{if("undefined"!=typeof window&&void 0!==window[c]){var d=window[c];return d.setItem("firebase:sentinel","cache"),d.removeItem("firebase:sentinel"),new se(d)}}catch(f){}return new Se},Ce=me("localStorage"),Me=me("sessionStorage"),Ue=new Ve.Yd("@firebase/database"),Xe=(c=1,function(){return c++}),re=function(c){var d=(0,X.dS)(c),f=new X.gQ;f.update(d);var y=f.digest();return X.US.encodeByteArray(y)},Ke=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];for(var f="",y=0;y<c.length;y++){var D=c[y];Array.isArray(D)||D&&"object"==typeof D&&"number"==typeof D.length?f+=Ke.apply(null,D):f+="object"==typeof D?(0,X.Pz)(D):D,f+=" "}return f},St=null,Mn=!0,kt=function(c,d){(0,X.hu)(!d||!0===c||!1===c,"Can't turn on custom loggers persistently."),!0===c?(Ue.logLevel=Ve.in.VERBOSE,St=Ue.log.bind(Ue),d&&Me.set("logging_enabled",!0)):"function"==typeof c?St=c:(St=null,Me.remove("logging_enabled"))},dt=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];if(!0===Mn&&(Mn=!1,null===St&&!0===Me.get("logging_enabled")&&kt(!0)),St){var f=Ke.apply(null,c);St(f)}},Zt=function(c){return function(){for(var d=[],f=0;f<arguments.length;f++)d[f]=arguments[f];dt.apply(void 0,(0,C.ev)([c],(0,C.CR)(d)))}},Ot=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var f="FIREBASE INTERNAL ERROR: "+Ke.apply(void 0,(0,C.ev)([],(0,C.CR)(c)));Ue.error(f)},Cn=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var f="FIREBASE FATAL ERROR: "+Ke.apply(void 0,(0,C.ev)([],(0,C.CR)(c)));throw Ue.error(f),new Error(f)},wt=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var f="FIREBASE WARNING: "+Ke.apply(void 0,(0,C.ev)([],(0,C.CR)(c)));Ue.warn(f)},ot=function(c){return"number"==typeof c&&(c!=c||c===Number.POSITIVE_INFINITY||c===Number.NEGATIVE_INFINITY)},nt="[MIN_NAME]",yt="[MAX_NAME]",at=function(c,d){if(c===d)return 0;if(c===nt||d===yt)return-1;if(d===nt||c===yt)return 1;var f=Bn(c),y=Bn(d);return null!==f?null!==y?f-y==0?c.length-d.length:f-y:-1:null!==y?1:c<d?-1:1},tn=function(c,d){return c===d?0:c<d?-1:1},un=function(c,d){if(d&&c in d)return d[c];throw new Error("Missing required key ("+c+") in object: "+(0,X.Pz)(d))},Tn=function(c){if("object"!=typeof c||null===c)return(0,X.Pz)(c);var d=[];for(var f in c)d.push(f);d.sort();for(var y="{",D=0;D<d.length;D++)0!==D&&(y+=","),y+=(0,X.Pz)(d[D]),y+=":",y+=Tn(c[d[D]]);return y+"}"},on=function(c,d){var f=c.length;if(f<=d)return[c];for(var y=[],D=0;D<f;D+=d)y.push(c.substring(D,D+d>f?f:D+d));return y};function Bt(c,d){for(var f in c)c.hasOwnProperty(f)&&d(f,c[f])}var Ft=function(c){(0,X.hu)(!ot(c),"Invalid JSON number");var D,L,Y,de,ye,y=1023;0===c?(L=0,Y=0,D=1/c==-1/0?1:0):(D=c<0,(c=Math.abs(c))>=Math.pow(2,1-y)?(L=(de=Math.min(Math.floor(Math.log(c)/Math.LN2),y))+y,Y=Math.round(c*Math.pow(2,52-de)-Math.pow(2,52))):(L=0,Y=Math.round(c/Math.pow(2,-1074))));var Ie=[];for(ye=52;ye;ye-=1)Ie.push(Y%2?1:0),Y=Math.floor(Y/2);for(ye=11;ye;ye-=1)Ie.push(L%2?1:0),L=Math.floor(L/2);Ie.push(D?1:0),Ie.reverse();var Ne=Ie.join(""),ht="";for(ye=0;ye<64;ye+=8){var At=parseInt(Ne.substr(ye,8),2).toString(16);1===At.length&&(At="0"+At),ht+=At}return ht.toLowerCase()},bn=new RegExp("^-?(0*)\\d{1,10}$"),or=-2147483648,Gn=2147483647,Bn=function(c){if(bn.test(c)){var d=Number(c);if(d>=or&&d<=Gn)return d}return null},Jn=function(c){try{c()}catch(d){setTimeout(function(){throw wt("Exception was thrown by user callback.",d.stack||""),d},Math.floor(0))}},An=function(c,d){var f=setTimeout(c,d);return"object"==typeof f&&f.unref&&f.unref(),f},Mi=function(){function c(d,f){var y=this;this.appName_=d,this.appCheckProvider=f,this.appCheck=null==f?void 0:f.getImmediate({optional:!0}),this.appCheck||null==f||f.get().then(function(D){return y.appCheck=D})}return c.prototype.getToken=function(d){var f=this;return this.appCheck?this.appCheck.getToken(d):new Promise(function(y,D){setTimeout(function(){f.appCheck?f.getToken(d).then(y,D):y(null)},0)})},c.prototype.addTokenChangeListener=function(d){var f;null===(f=this.appCheckProvider)||void 0===f||f.get().then(function(y){return y.addTokenListener(d)})},c.prototype.notifyForInvalidToken=function(){wt('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},c}(),mn=function(){function c(d,f,y){var D=this;this.appName_=d,this.firebaseOptions_=f,this.authProvider_=y,this.auth_=null,this.auth_=y.getImmediate({optional:!0}),this.auth_||y.onInit(function(L){return D.auth_=L})}return c.prototype.getToken=function(d){var f=this;return this.auth_?this.auth_.getToken(d).catch(function(y){return y&&"auth/token-not-initialized"===y.code?(dt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(y)}):new Promise(function(y,D){setTimeout(function(){f.auth_?f.getToken(d).then(y,D):y(null)},0)})},c.prototype.addTokenChangeListener=function(d){this.auth_?this.auth_.addAuthTokenListener(d):this.authProvider_.get().then(function(f){return f.addAuthTokenListener(d)})},c.prototype.removeTokenChangeListener=function(d){this.authProvider_.get().then(function(f){return f.removeAuthTokenListener(d)})},c.prototype.notifyForInvalidToken=function(){var d='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';wt(d+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},c}(),Wt=function(){function c(d){this.accessToken=d}return c.prototype.getToken=function(d){return Promise.resolve({accessToken:this.accessToken})},c.prototype.addTokenChangeListener=function(d){d(this.accessToken)},c.prototype.removeTokenChangeListener=function(d){},c.prototype.notifyForInvalidToken=function(){},c.OWNER="owner",c}(),Zn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,It="websocket",xt="long_polling",sn=function(){function c(d,f,y,D,L,Y,de){void 0===L&&(L=!1),void 0===Y&&(Y=""),void 0===de&&(de=!1),this.secure=f,this.namespace=y,this.webSocketOnly=D,this.nodeAdmin=L,this.persistenceKey=Y,this.includeNamespaceInQueryParams=de,this._host=d.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ce.get("host:"+d)||this._host}return c.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},c.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(c.prototype,"host",{get:function(){return this._host},set:function(d){d!==this.internalHost&&(this.internalHost=d,this.isCacheableHost()&&Ce.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),c.prototype.toString=function(){var d=this.toURLString();return this.persistenceKey&&(d+="<"+this.persistenceKey+">"),d},c.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},c}();function He(c,d,f){var y;if((0,X.hu)("string"==typeof d,"typeof type must == string"),(0,X.hu)("object"==typeof f,"typeof params must == object"),d===It)y=(c.secure?"wss://":"ws://")+c.internalHost+"/.ws?";else{if(d!==xt)throw new Error("Unknown connection type: "+d);y=(c.secure?"https://":"http://")+c.internalHost+"/.lp?"}(function(c){return c.host!==c.internalHost||c.isCustomHost()||c.includeNamespaceInQueryParams})(c)&&(f.ns=c.namespace);var D=[];return Bt(f,function(L,Y){D.push(L+"="+Y)}),y+D.join("&")}var gt=function(){function c(){this.counters_={}}return c.prototype.incrementCounter=function(d,f){void 0===f&&(f=1),(0,X.r3)(this.counters_,d)||(this.counters_[d]=0),this.counters_[d]+=f},c.prototype.get=function(){return(0,X.p$)(this.counters_)},c}(),vt={},Tt={};function Vt(c){var d=c.toString();return vt[d]||(vt[d]=new gt),vt[d]}var gn=function(){function c(d){this.onMessage_=d,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return c.prototype.closeAfter=function(d,f){this.closeAfterResponse=d,this.onClose=f,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},c.prototype.handleResponse=function(d,f){var y=this;this.pendingResponses[d]=f;for(var D=function(){var de=L.pendingResponses[L.currentResponseNum];delete L.pendingResponses[L.currentResponseNum];for(var ye=function(Ne){de[Ne]&&Jn(function(){y.onMessage_(de[Ne])})},Ie=0;Ie<de.length;++Ie)ye(Ie);if(L.currentResponseNum===L.closeAfterResponse)return L.onClose&&(L.onClose(),L.onClose=null),"break";L.currentResponseNum++},L=this;this.pendingResponses[this.currentResponseNum]&&"break"!==D(););},c}(),ki=function(){function c(d,f,y,D,L,Y,de){var ye=this;this.connId=d,this.repoInfo=f,this.applicationId=y,this.appCheckToken=D,this.authToken=L,this.transportSessionId=Y,this.lastSessionId=de,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Zt(d),this.stats_=Vt(f),this.urlFn=function(Ie){return ye.appCheckToken&&(Ie.ac=ye.appCheckToken),He(f,xt,Ie)}}return c.prototype.open=function(d,f){var y=this;this.curSegmentNum=0,this.onDisconnect_=f,this.myPacketOrderer=new gn(d),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){y.log_("Timed out trying to connect."),y.onClosed_(),y.connectTimeoutTimer_=null},Math.floor(3e4)),function(c){if((0,X.Yr)()||"complete"===document.readyState)c();else{var d=!1,f=function(){document.body?d||(d=!0,c()):setTimeout(f,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&f()}),window.attachEvent("onload",f))}}(function(){if(!y.isClosed_){y.scriptTagHolder=new ao(function(){for(var Y=[],de=0;de<arguments.length;de++)Y[de]=arguments[de];var ye=(0,C.CR)(Y,5),Ie=ye[0],Ne=ye[1],ht=ye[2];if(y.incrementIncomingBytes_(Y),y.scriptTagHolder)if(y.connectTimeoutTimer_&&(clearTimeout(y.connectTimeoutTimer_),y.connectTimeoutTimer_=null),y.everConnected_=!0,"start"===Ie)y.id=Ne,y.password=ht;else{if("close"!==Ie)throw new Error("Unrecognized command received: "+Ie);Ne?(y.scriptTagHolder.sendNewPolls=!1,y.myPacketOrderer.closeAfter(Ne,function(){y.onClosed_()})):y.onClosed_()}},function(){for(var Y=[],de=0;de<arguments.length;de++)Y[de]=arguments[de];var ye=(0,C.CR)(Y,2),Ie=ye[0],Ne=ye[1];y.incrementIncomingBytes_(Y),y.myPacketOrderer.handleResponse(Ie,Ne)},function(){y.onClosed_()},y.urlFn);var D={start:"t"};D.ser=Math.floor(1e8*Math.random()),y.scriptTagHolder.uniqueCallbackIdentifier&&(D.cb=y.scriptTagHolder.uniqueCallbackIdentifier),D.v="5",y.transportSessionId&&(D.s=y.transportSessionId),y.lastSessionId&&(D.ls=y.lastSessionId),y.applicationId&&(D.p=y.applicationId),y.appCheckToken&&(D.ac=y.appCheckToken),"undefined"!=typeof location&&location.hostname&&Zn.test(location.hostname)&&(D.r="f");var L=y.urlFn(D);y.log_("Connecting via long-poll to "+L),y.scriptTagHolder.addTag(L,function(){})}})},c.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},c.forceAllow=function(){c.forceAllow_=!0},c.forceDisallow=function(){c.forceDisallow_=!0},c.isAvailable=function(){return!((0,X.Yr)()||!c.forceAllow_&&(c.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},c.prototype.markConnectionHealthy=function(){},c.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},c.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},c.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},c.prototype.send=function(d){var f=(0,X.Pz)(d);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);for(var y=(0,X.h$)(f),D=on(y,1840),L=0;L<D.length;L++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,D.length,D[L]),this.curSegmentNum++},c.prototype.addDisconnectPingFrame=function(d,f){if(!(0,X.Yr)()){this.myDisconnFrame=document.createElement("iframe");var y={dframe:"t"};y.id=d,y.pw=f,this.myDisconnFrame.src=this.urlFn(y),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},c.prototype.incrementIncomingBytes_=function(d){var f=(0,X.Pz)(d).length;this.bytesReceived+=f,this.stats_.incrementCounter("bytes_received",f)},c}(),ao=function(){function c(d,f,y,D){if(this.onDisconnect=y,this.urlFn=D,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,X.Yr)())this.commandCB=d,this.onMessageCB=f;else{this.uniqueCallbackIdentifier=Xe(),window["pLPCommand"+this.uniqueCallbackIdentifier]=d,window["pRTLPCB"+this.uniqueCallbackIdentifier]=f,this.myIFrame=c.createIFrame_();var L="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(L='<script>document.domain="'+document.domain+'";<\/script>');var de="<html><body>"+L+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(de),this.myIFrame.doc.close()}catch(ye){dt("frame writing exception"),ye.stack&&dt(ye.stack),dt(ye)}}}return c.createIFrame_=function(){var d=document.createElement("iframe");if(d.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(d);try{d.contentWindow.document||dt("No IE domain setting required")}catch(D){var y=document.domain;d.src="javascript:void((function(){document.open();document.domain='"+y+"';document.close();})())"}return d.contentDocument?d.doc=d.contentDocument:d.contentWindow?d.doc=d.contentWindow.document:d.document&&(d.doc=d.document),d},c.prototype.close=function(){var d=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==d.myIFrame&&(document.body.removeChild(d.myIFrame),d.myIFrame=null)},Math.floor(0)));var f=this.onDisconnect;f&&(this.onDisconnect=null,f())},c.prototype.startLongPoll=function(d,f){for(this.myID=d,this.myPW=f,this.alive=!0;this.newRequest_(););},c.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var d={};d.id=this.myID,d.pw=this.myPW,d.ser=this.currentSerial;for(var f=this.urlFn(d),y="",D=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+y.length<=1870;){var Y=this.pendingSegs.shift();y=y+"&seg"+D+"="+Y.seg+"&ts"+D+"="+Y.ts+"&d"+D+"="+Y.d,D++}return this.addLongPollTag_(f+=y,this.currentSerial),!0}return!1},c.prototype.enqueueSegment=function(d,f,y){this.pendingSegs.push({seg:d,ts:f,d:y}),this.alive&&this.newRequest_()},c.prototype.addLongPollTag_=function(d,f){var y=this;this.outstandingRequests.add(f);var D=function(){y.outstandingRequests.delete(f),y.newRequest_()},L=setTimeout(D,Math.floor(25e3));this.addTag(d,function(){clearTimeout(L),D()})},c.prototype.addTag=function(d,f){var y=this;(0,X.Yr)()?this.doNodeLongPoll(d,f):setTimeout(function(){try{if(!y.sendNewPolls)return;var D=y.myIFrame.doc.createElement("script");D.type="text/javascript",D.async=!0,D.src=d,D.onload=D.onreadystatechange=function(){var L=D.readyState;(!L||"loaded"===L||"complete"===L)&&(D.onload=D.onreadystatechange=null,D.parentNode&&D.parentNode.removeChild(D),f())},D.onerror=function(){dt("Long-poll script failed to load: "+d),y.sendNewPolls=!1,y.close()},y.myIFrame.doc.body.appendChild(D)}catch(L){}},Math.floor(1))},c}(),ar=null;"undefined"!=typeof MozWebSocket?ar=MozWebSocket:"undefined"!=typeof WebSocket&&(ar=WebSocket);var yn=function(){function c(d,f,y,D,L,Y,de){this.connId=d,this.applicationId=y,this.appCheckToken=D,this.authToken=L,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Zt(this.connId),this.stats_=Vt(f),this.connURL=c.connectionURL_(f,Y,de,D),this.nodeAdmin=f.nodeAdmin}return c.connectionURL_=function(d,f,y,D){var L={v:"5"};return!(0,X.Yr)()&&"undefined"!=typeof location&&location.hostname&&Zn.test(location.hostname)&&(L.r="f"),f&&(L.s=f),y&&(L.ls=y),D&&(L.ac=D),He(d,It,L)},c.prototype.open=function(d,f){var y=this;this.onDisconnect=f,this.onMessage=d,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ce.set("previous_websocket_failure",!0);try{if((0,X.Yr)()){var L={headers:{"User-Agent":"Firebase/5/"+fe+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(L.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(L.headers["X-Firebase-AppCheck"]=this.appCheckToken);var Y=process.env,de=0===this.connURL.indexOf("wss://")?Y.HTTPS_PROXY||Y.https_proxy:Y.HTTP_PROXY||Y.http_proxy;de&&(L.proxy={origin:de}),this.mySock=new ar(this.connURL,[],L)}else this.mySock=new ar(this.connURL,[],L={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(Ie){this.log_("Error instantiating WebSocket.");var ye=Ie.message||Ie.data;return ye&&this.log_(ye),void this.onClosed_()}this.mySock.onopen=function(){y.log_("Websocket connected."),y.everConnected_=!0},this.mySock.onclose=function(){y.log_("Websocket connection was disconnected."),y.mySock=null,y.onClosed_()},this.mySock.onmessage=function(Ie){y.handleIncomingFrame(Ie)},this.mySock.onerror=function(Ie){y.log_("WebSocket error.  Closing connection.");var Ne=Ie.message||Ie.data;Ne&&y.log_(Ne),y.onClosed_()}},c.prototype.start=function(){},c.forceDisallow=function(){c.forceDisallow_=!0},c.isAvailable=function(){var d=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var y=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);y&&y.length>1&&parseFloat(y[1])<4.4&&(d=!0)}return!d&&null!==ar&&!c.forceDisallow_},c.previouslyFailed=function(){return Ce.isInMemoryStorage||!0===Ce.get("previous_websocket_failure")},c.prototype.markConnectionHealthy=function(){Ce.remove("previous_websocket_failure")},c.prototype.appendFrame_=function(d){if(this.frames.push(d),this.frames.length===this.totalFrames){var f=this.frames.join("");this.frames=null;var y=(0,X.cI)(f);this.onMessage(y)}},c.prototype.handleNewFrameCount_=function(d){this.totalFrames=d,this.frames=[]},c.prototype.extractFrameCount_=function(d){if((0,X.hu)(null===this.frames,"We already have a frame buffer"),d.length<=6){var f=Number(d);if(!isNaN(f))return this.handleNewFrameCount_(f),null}return this.handleNewFrameCount_(1),d},c.prototype.handleIncomingFrame=function(d){if(null!==this.mySock){var f=d.data;if(this.bytesReceived+=f.length,this.stats_.incrementCounter("bytes_received",f.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(f);else{var y=this.extractFrameCount_(f);null!==y&&this.appendFrame_(y)}}},c.prototype.send=function(d){this.resetKeepAlive();var f=(0,X.Pz)(d);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);var y=on(f,16384);y.length>1&&this.sendString_(String(y.length));for(var D=0;D<y.length;D++)this.sendString_(y[D])},c.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},c.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},c.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},c.prototype.resetKeepAlive=function(){var d=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){d.mySock&&d.sendString_("0"),d.resetKeepAlive()},Math.floor(45e3))},c.prototype.sendString_=function(d){try{this.mySock.send(d)}catch(f){this.log_("Exception thrown from WebSocket.send():",f.message||f.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},c.responsesRequiredToBeHealthy=2,c.healthyTimeout=3e4,c}(),Lr=function(){function c(d){this.initTransports_(d)}return Object.defineProperty(c,"ALL_TRANSPORTS",{get:function(){return[ki,yn]},enumerable:!1,configurable:!0}),c.prototype.initTransports_=function(d){var f,y,D=yn&&yn.isAvailable(),L=D&&!yn.previouslyFailed();if(d.webSocketOnly&&(D||wt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),L=!0),L)this.transports_=[yn];else{var Y=this.transports_=[];try{for(var de=(0,C.XA)(c.ALL_TRANSPORTS),ye=de.next();!ye.done;ye=de.next()){var Ie=ye.value;Ie&&Ie.isAvailable()&&Y.push(Ie)}}catch(Ne){f={error:Ne}}finally{try{ye&&!ye.done&&(y=de.return)&&y.call(de)}finally{if(f)throw f.error}}}},c.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},c.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},c}(),te=function(){function c(d,f,y,D,L,Y,de,ye,Ie,Ne){this.id=d,this.repoInfo_=f,this.applicationId_=y,this.appCheckToken_=D,this.authToken_=L,this.onMessage_=Y,this.onReady_=de,this.onDisconnect_=ye,this.onKill_=Ie,this.lastSessionId=Ne,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Zt("c:"+this.id+":"),this.transportManager_=new Lr(f),this.log_("Connection created"),this.start_()}return c.prototype.start_=function(){var d=this,f=this.transportManager_.initialTransport();this.conn_=new f(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=f.responsesRequiredToBeHealthy||0;var y=this.connReceiver_(this.conn_),D=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){d.conn_&&d.conn_.open(y,D)},Math.floor(0));var L=f.healthyTimeout||0;L>0&&(this.healthyTimeout_=An(function(){d.healthyTimeout_=null,d.isHealthy_||(d.conn_&&d.conn_.bytesReceived>102400?(d.log_("Connection exceeded healthy timeout but has received "+d.conn_.bytesReceived+" bytes.  Marking connection healthy."),d.isHealthy_=!0,d.conn_.markConnectionHealthy()):d.conn_&&d.conn_.bytesSent>10240?d.log_("Connection exceeded healthy timeout but has sent "+d.conn_.bytesSent+" bytes.  Leaving connection alive."):(d.log_("Closing unhealthy connection after timeout."),d.close()))},Math.floor(L)))},c.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},c.prototype.disconnReceiver_=function(d){var f=this;return function(y){d===f.conn_?f.onConnectionLost_(y):d===f.secondaryConn_?(f.log_("Secondary connection lost."),f.onSecondaryConnectionLost_()):f.log_("closing an old connection")}},c.prototype.connReceiver_=function(d){var f=this;return function(y){2!==f.state_&&(d===f.rx_?f.onPrimaryMessageReceived_(y):d===f.secondaryConn_?f.onSecondaryMessageReceived_(y):f.log_("message on old connection"))}},c.prototype.sendRequest=function(d){this.sendData_({t:"d",d})},c.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},c.prototype.onSecondaryControl_=function(d){if("t"in d){var f=d.t;"a"===f?this.upgradeIfSecondaryHealthy_():"r"===f?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===f&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},c.prototype.onSecondaryMessageReceived_=function(d){var f=un("t",d),y=un("d",d);if("c"===f)this.onSecondaryControl_(y);else{if("d"!==f)throw new Error("Unknown protocol layer: "+f);this.pendingDataMessages.push(y)}},c.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},c.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},c.prototype.onPrimaryMessageReceived_=function(d){var f=un("t",d),y=un("d",d);"c"===f?this.onControl_(y):"d"===f&&this.onDataMessage_(y)},c.prototype.onDataMessage_=function(d){this.onPrimaryResponse_(),this.onMessage_(d)},c.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},c.prototype.onControl_=function(d){var f=un("t",d);if("d"in d){var y=d.d;if("h"===f)this.onHandshake_(y);else if("n"===f){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var D=0;D<this.pendingDataMessages.length;++D)this.onDataMessage_(this.pendingDataMessages[D]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===f?this.onConnectionShutdown_(y):"r"===f?this.onReset_(y):"e"===f?Ot("Server Error: "+y):"o"===f?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ot("Unknown control packet command: "+f)}},c.prototype.onHandshake_=function(d){var f=d.ts,y=d.v,D=d.h;this.sessionId=d.s,this.repoInfo_.host=D,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,f),"5"!==y&&wt("Protocol version mismatch detected"),this.tryStartUpgrade_())},c.prototype.tryStartUpgrade_=function(){var d=this.transportManager_.upgradeTransport();d&&this.startUpgrade_(d)},c.prototype.startUpgrade_=function(d){var f=this;this.secondaryConn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;var y=this.connReceiver_(this.secondaryConn_),D=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(y,D),An(function(){f.secondaryConn_&&(f.log_("Timed out trying to upgrade."),f.secondaryConn_.close())},Math.floor(6e4))},c.prototype.onReset_=function(d){this.log_("Reset packet received.  New host: "+d),this.repoInfo_.host=d,1===this.state_?this.close():(this.closeConnections_(),this.start_())},c.prototype.onConnectionEstablished_=function(d,f){var y=this;this.log_("Realtime connection established."),this.conn_=d,this.state_=1,this.onReady_&&(this.onReady_(f,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):An(function(){y.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},c.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},c.prototype.onSecondaryConnectionLost_=function(){var d=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===d||this.rx_===d)&&this.close()},c.prototype.onConnectionLost_=function(d){this.conn_=null,d||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ce.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},c.prototype.onConnectionShutdown_=function(d){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(d),this.onKill_=null),this.onDisconnect_=null,this.close()},c.prototype.sendData_=function(d){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(d)},c.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},c.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},c}(),ce=function(){function c(){}return c.prototype.put=function(d,f,y,D){},c.prototype.merge=function(d,f,y,D){},c.prototype.refreshAuthToken=function(d){},c.prototype.refreshAppCheckToken=function(d){},c.prototype.onDisconnectPut=function(d,f,y){},c.prototype.onDisconnectMerge=function(d,f,y){},c.prototype.onDisconnectCancel=function(d,f){},c.prototype.reportStats=function(d){},c}(),ke=function(){function c(d){this.allowedEvents_=d,this.listeners_={},(0,X.hu)(Array.isArray(d)&&d.length>0,"Requires a non-empty array")}return c.prototype.trigger=function(d){for(var f=[],y=1;y<arguments.length;y++)f[y-1]=arguments[y];if(Array.isArray(this.listeners_[d]))for(var D=(0,C.ev)([],(0,C.CR)(this.listeners_[d])),L=0;L<D.length;L++)D[L].callback.apply(D[L].context,f)},c.prototype.on=function(d,f,y){this.validateEventType_(d),this.listeners_[d]=this.listeners_[d]||[],this.listeners_[d].push({callback:f,context:y});var D=this.getInitialEvent(d);D&&f.apply(y,D)},c.prototype.off=function(d,f,y){this.validateEventType_(d);for(var D=this.listeners_[d]||[],L=0;L<D.length;L++)if(D[L].callback===f&&(!y||y===D[L].context))return void D.splice(L,1)},c.prototype.validateEventType_=function(d){(0,X.hu)(this.allowedEvents_.find(function(f){return f===d}),"Unknown event: "+d)},c}(),ut=function(c){function d(){var f=c.call(this,["online"])||this;return f.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,X.uI)()&&(window.addEventListener("online",function(){f.online_||(f.online_=!0,f.trigger("online",!0))},!1),window.addEventListener("offline",function(){f.online_&&(f.online_=!1,f.trigger("online",!1))},!1)),f}return(0,C.ZT)(d,c),d.getInstance=function(){return new d},d.prototype.getInitialEvent=function(f){return(0,X.hu)("online"===f,"Unknown event type: "+f),[this.online_]},d.prototype.currentlyOnline=function(){return this.online_},d}(ke),ln=function(){function c(d,f){if(void 0===f){this.pieces_=d.split("/");for(var y=0,D=0;D<this.pieces_.length;D++)this.pieces_[D].length>0&&(this.pieces_[y]=this.pieces_[D],y++);this.pieces_.length=y,this.pieceNum_=0}else this.pieces_=d,this.pieceNum_=f}return c.prototype.toString=function(){for(var d="",f=this.pieceNum_;f<this.pieces_.length;f++)""!==this.pieces_[f]&&(d+="/"+this.pieces_[f]);return d||"/"},c}();function cn(){return new ln("")}function Xn(c){return c.pieceNum_>=c.pieces_.length?null:c.pieces_[c.pieceNum_]}function Gi(c){return c.pieces_.length-c.pieceNum_}function pr(c){var d=c.pieceNum_;return d<c.pieces_.length&&d++,new ln(c.pieces_,d)}function Li(c){return c.pieceNum_<c.pieces_.length?c.pieces_[c.pieces_.length-1]:null}function $r(c,d){return void 0===d&&(d=0),c.pieces_.slice(c.pieceNum_+d)}function Vi(c){if(c.pieceNum_>=c.pieces_.length)return null;for(var d=[],f=c.pieceNum_;f<c.pieces_.length-1;f++)d.push(c.pieces_[f]);return new ln(d,0)}function sr(c,d){for(var f=[],y=c.pieceNum_;y<c.pieces_.length;y++)f.push(c.pieces_[y]);if(d instanceof ln)for(y=d.pieceNum_;y<d.pieces_.length;y++)f.push(d.pieces_[y]);else{var D=d.split("/");for(y=0;y<D.length;y++)D[y].length>0&&f.push(D[y])}return new ln(f,0)}function jn(c){return c.pieceNum_>=c.pieces_.length}function Kr(c,d){var f=Xn(c),y=Xn(d);if(null===f)return d;if(f===y)return Kr(pr(c),pr(d));throw new Error("INTERNAL ERROR: innerPath ("+d+") is not within outerPath ("+c+")")}function Mr(c,d){for(var f=$r(c,0),y=$r(d,0),D=0;D<f.length&&D<y.length;D++){var L=at(f[D],y[D]);if(0!==L)return L}return f.length===y.length?0:f.length<y.length?-1:1}function zi(c,d){if(Gi(c)!==Gi(d))return!1;for(var f=c.pieceNum_,y=d.pieceNum_;f<=c.pieces_.length;f++,y++)if(c.pieces_[f]!==d.pieces_[y])return!1;return!0}function hi(c,d){var f=c.pieceNum_,y=d.pieceNum_;if(Gi(c)>Gi(d))return!1;for(;f<c.pieces_.length;){if(c.pieces_[f]!==d.pieces_[y])return!1;++f,++y}return!0}var qi=function(d,f){this.errorPrefix_=f,this.parts_=$r(d,0),this.byteLength_=Math.max(1,this.parts_.length);for(var y=0;y<this.parts_.length;y++)this.byteLength_+=(0,X.ug)(this.parts_[y]);ds(this)};function ds(c){if(c.byteLength_>768)throw new Error(c.errorPrefix_+"has a key path longer than 768 bytes ("+c.byteLength_+").");if(c.parts_.length>32)throw new Error(c.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+jr(c))}function jr(c){return 0===c.parts_.length?"":"in property '"+c.parts_.join(".")+"'"}var to,is,_s=function(c){function d(){var y,D,f=c.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(D="visibilitychange",y="hidden"):void 0!==document.mozHidden?(D="mozvisibilitychange",y="mozHidden"):void 0!==document.msHidden?(D="msvisibilitychange",y="msHidden"):void 0!==document.webkitHidden&&(D="webkitvisibilitychange",y="webkitHidden")),f.visible_=!0,D&&document.addEventListener(D,function(){var L=!document[y];L!==f.visible_&&(f.visible_=L,f.trigger("visible",L))},!1),f}return(0,C.ZT)(d,c),d.getInstance=function(){return new d},d.prototype.getInitialEvent=function(f){return(0,X.hu)("visible"===f,"Unknown event type: "+f),[this.visible_]},d}(ke),Zi=1e3,vi=function(c){function d(f,y,D,L,Y,de,ye,Ie){var Ne=c.call(this)||this;if(Ne.repoInfo_=f,Ne.applicationId_=y,Ne.onDataUpdate_=D,Ne.onConnectStatus_=L,Ne.onServerInfoUpdate_=Y,Ne.authTokenProvider_=de,Ne.appCheckTokenProvider_=ye,Ne.authOverride_=Ie,Ne.id=d.nextPersistentConnectionId_++,Ne.log_=Zt("p:"+Ne.id+":"),Ne.interruptReasons_={},Ne.listens=new Map,Ne.outstandingPuts_=[],Ne.outstandingGets_=[],Ne.outstandingPutCount_=0,Ne.outstandingGetCount_=0,Ne.onDisconnectRequestQueue_=[],Ne.connected_=!1,Ne.reconnectDelay_=Zi,Ne.maxReconnectDelay_=3e5,Ne.securityDebugCallback_=null,Ne.lastSessionId=null,Ne.establishConnectionTimer_=null,Ne.visible_=!1,Ne.requestCBHash_={},Ne.requestNumber_=0,Ne.realtime_=null,Ne.authToken_=null,Ne.appCheckToken_=null,Ne.forceTokenRefresh_=!1,Ne.invalidAuthTokenCount_=0,Ne.invalidAppCheckTokenCount_=0,Ne.firstConnection_=!0,Ne.lastConnectionAttemptTime_=null,Ne.lastConnectionEstablishedTime_=null,Ie&&!(0,X.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return _s.getInstance().on("visible",Ne.onVisible_,Ne),-1===f.host.indexOf("fblocal")&&ut.getInstance().on("online",Ne.onOnline_,Ne),Ne}return(0,C.ZT)(d,c),d.prototype.sendRequest=function(f,y,D){var L=++this.requestNumber_,Y={r:L,a:f,b:y};this.log_((0,X.Pz)(Y)),(0,X.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(Y),D&&(this.requestCBHash_[L]=D)},d.prototype.get=function(f){var y=this;this.initConnection_();var D=new X.BH,L={p:f._path.toString(),q:f._queryObject},Y={action:"g",request:L,onComplete:function(ye){var Ie=ye.d;"ok"===ye.s?(y.onDataUpdate_(L.p,Ie,!1,null),D.resolve(Ie)):D.reject(Ie)}};this.outstandingGets_.push(Y),this.outstandingGetCount_++;var de=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var ye=y.outstandingGets_[de];void 0===ye||Y!==ye||(delete y.outstandingGets_[de],y.outstandingGetCount_--,0===y.outstandingGetCount_&&(y.outstandingGets_=[]),y.log_("get "+de+" timed out on connection"),D.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(de),D.promise},d.prototype.listen=function(f,y,D,L){this.initConnection_();var Y=f._queryIdentifier,de=f._path.toString();this.log_("Listen called for "+de+" "+Y),this.listens.has(de)||this.listens.set(de,new Map),(0,X.hu)(f._queryParams.isDefault()||!f._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,X.hu)(!this.listens.get(de).has(Y),"listen() called twice for same path/queryId.");var ye={onComplete:L,hashFn:y,query:f,tag:D};this.listens.get(de).set(Y,ye),this.connected_&&this.sendListen_(ye)},d.prototype.sendGet_=function(f){var y=this,D=this.outstandingGets_[f];this.sendRequest("g",D.request,function(L){delete y.outstandingGets_[f],y.outstandingGetCount_--,0===y.outstandingGetCount_&&(y.outstandingGets_=[]),D.onComplete&&D.onComplete(L)})},d.prototype.sendListen_=function(f){var y=this,D=f.query,L=D._path.toString(),Y=D._queryIdentifier;this.log_("Listen on "+L+" for "+Y);var de={p:L};f.tag&&(de.q=D._queryObject,de.t=f.tag),de.h=f.hashFn(),this.sendRequest("q",de,function(Ie){var Ne=Ie.d,ht=Ie.s;d.warnOnListenWarnings_(Ne,D),(y.listens.get(L)&&y.listens.get(L).get(Y))===f&&(y.log_("listen response",Ie),"ok"!==ht&&y.removeListen_(L,Y),f.onComplete&&f.onComplete(ht,Ne))})},d.warnOnListenWarnings_=function(f,y){if(f&&"object"==typeof f&&(0,X.r3)(f,"w")){var D=(0,X.DV)(f,"w");if(Array.isArray(D)&&~D.indexOf("no_index")){var L='".indexOn": "'+y._queryParams.getIndex().toString()+'"',Y=y._path.toString();wt("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+L+" at "+Y+" to your security rules for better performance.")}}},d.prototype.refreshAuthToken=function(f){this.authToken_=f,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(f)},d.prototype.reduceReconnectDelayIfAdminCredential_=function(f){(f&&40===f.length||(0,X.GJ)(f))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},d.prototype.refreshAppCheckToken=function(f){this.appCheckToken_=f,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},d.prototype.tryAuth=function(){var f=this;if(this.connected_&&this.authToken_){var y=this.authToken_,D=(0,X.w9)(y)?"auth":"gauth",L={cred:y};null===this.authOverride_?L.noauth=!0:"object"==typeof this.authOverride_&&(L.authvar=this.authOverride_),this.sendRequest(D,L,function(Y){var de=Y.s,ye=Y.d||"error";f.authToken_===y&&("ok"===de?f.invalidAuthTokenCount_=0:f.onAuthRevoked_(de,ye))})}},d.prototype.tryAppCheck=function(){var f=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(y){var D=y.s,L=y.d||"error";"ok"===D?f.invalidAppCheckTokenCount_=0:f.onAppCheckRevoked_(D,L)})},d.prototype.unlisten=function(f,y){var D=f._path.toString(),L=f._queryIdentifier;this.log_("Unlisten called for "+D+" "+L),(0,X.hu)(f._queryParams.isDefault()||!f._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(D,L)&&this.connected_&&this.sendUnlisten_(D,L,f._queryObject,y)},d.prototype.sendUnlisten_=function(f,y,D,L){this.log_("Unlisten on "+f+" for "+y);var Y={p:f};L&&(Y.q=D,Y.t=L),this.sendRequest("n",Y)},d.prototype.onDisconnectPut=function(f,y,D){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",f,y,D):this.onDisconnectRequestQueue_.push({pathString:f,action:"o",data:y,onComplete:D})},d.prototype.onDisconnectMerge=function(f,y,D){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",f,y,D):this.onDisconnectRequestQueue_.push({pathString:f,action:"om",data:y,onComplete:D})},d.prototype.onDisconnectCancel=function(f,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",f,null,y):this.onDisconnectRequestQueue_.push({pathString:f,action:"oc",data:null,onComplete:y})},d.prototype.sendOnDisconnect_=function(f,y,D,L){var Y={p:y,d:D};this.log_("onDisconnect "+f,Y),this.sendRequest(f,Y,function(de){L&&setTimeout(function(){L(de.s,de.d)},Math.floor(0))})},d.prototype.put=function(f,y,D,L){this.putInternal("p",f,y,D,L)},d.prototype.merge=function(f,y,D,L){this.putInternal("m",f,y,D,L)},d.prototype.putInternal=function(f,y,D,L,Y){this.initConnection_();var de={p:y,d:D};void 0!==Y&&(de.h=Y),this.outstandingPuts_.push({action:f,request:de,onComplete:L}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+y)},d.prototype.sendPut_=function(f){var y=this,D=this.outstandingPuts_[f].action,L=this.outstandingPuts_[f].request,Y=this.outstandingPuts_[f].onComplete;this.outstandingPuts_[f].queued=this.connected_,this.sendRequest(D,L,function(de){y.log_(D+" response",de),delete y.outstandingPuts_[f],y.outstandingPutCount_--,0===y.outstandingPutCount_&&(y.outstandingPuts_=[]),Y&&Y(de.s,de.d)})},d.prototype.reportStats=function(f){var y=this;if(this.connected_){var D={c:f};this.log_("reportStats",D),this.sendRequest("s",D,function(L){"ok"!==L.s&&y.log_("reportStats","Error sending stats: "+L.d)})}},d.prototype.onDataMessage_=function(f){if("r"in f){this.log_("from server: "+(0,X.Pz)(f));var y=f.r,D=this.requestCBHash_[y];D&&(delete this.requestCBHash_[y],D(f.b))}else{if("error"in f)throw"A server-side error has occurred: "+f.error;"a"in f&&this.onDataPush_(f.a,f.b)}},d.prototype.onDataPush_=function(f,y){this.log_("handleServerMessage",f,y),"d"===f?this.onDataUpdate_(y.p,y.d,!1,y.t):"m"===f?this.onDataUpdate_(y.p,y.d,!0,y.t):"c"===f?this.onListenRevoked_(y.p,y.q):"ac"===f?this.onAuthRevoked_(y.s,y.d):"apc"===f?this.onAppCheckRevoked_(y.s,y.d):"sd"===f?this.onSecurityDebugPacket_(y):Ot("Unrecognized action received from server: "+(0,X.Pz)(f)+"\nAre you using the latest client?")},d.prototype.onReady_=function(f,y){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(f),this.lastSessionId=y,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},d.prototype.scheduleConnect_=function(f){var y=this;(0,X.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){y.establishConnectionTimer_=null,y.establishConnection_()},Math.floor(f))},d.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},d.prototype.onVisible_=function(f){f&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zi,this.realtime_||this.scheduleConnect_(0)),this.visible_=f},d.prototype.onOnline_=function(f){f?(this.log_("Browser went online."),this.reconnectDelay_=Zi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},d.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Zi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var y=(new Date).getTime()-this.lastConnectionAttemptTime_,D=Math.max(0,this.reconnectDelay_-y);D=Math.random()*D,this.log_("Trying to reconnect in "+D+"ms"),this.scheduleConnect_(D),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},d.prototype.establishConnection_=function(){return(0,C.mG)(this,void 0,void 0,function(){var f,y,D,L,Y,de,ye,Ie,ht,At,Ut,rn,Kn,Wn=this;return(0,C.Jh)(this,function(Cr){switch(Cr.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,f=this.onDataMessage_.bind(this),y=this.onReady_.bind(this),D=this.onRealtimeDisconnect_.bind(this),L=this.id+":"+d.nextConnectionId_++,Y=this.lastSessionId,de=!1,ye=null,this.realtime_={close:Ie=function(){ye?ye.close():(de=!0,D())},sendRequest:function(oo){(0,X.hu)(ye,"sendRequest call when we're not connected not allowed."),ye.sendRequest(oo)}},ht=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,Cr.label=1;case 1:return Cr.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(ht),this.appCheckTokenProvider_.getToken(ht)])];case 2:return At=C.CR.apply(void 0,[Cr.sent(),2]),Ut=At[0],rn=At[1],de?dt("getToken() completed but was canceled"):(dt("getToken() completed. Creating connection."),this.authToken_=Ut&&Ut.accessToken,this.appCheckToken_=rn&&rn.token,ye=new te(L,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,f,y,D,function(oo){wt(oo+" ("+Wn.repoInfo_.toString()+")"),Wn.interrupt("server_kill")},Y)),[3,4];case 3:return Kn=Cr.sent(),this.log_("Failed to get token: "+Kn),de||(this.repoInfo_.nodeAdmin&&wt(Kn),Ie()),[3,4];case 4:return[2]}})})},d.prototype.interrupt=function(f){dt("Interrupting connection for reason: "+f),this.interruptReasons_[f]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},d.prototype.resume=function(f){dt("Resuming connection for reason: "+f),delete this.interruptReasons_[f],(0,X.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Zi,this.realtime_||this.scheduleConnect_(0))},d.prototype.handleTimestamp_=function(f){var y=f-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:y})},d.prototype.cancelSentTransactions_=function(){for(var f=0;f<this.outstandingPuts_.length;f++){var y=this.outstandingPuts_[f];y&&"h"in y.request&&y.queued&&(y.onComplete&&y.onComplete("disconnect"),delete this.outstandingPuts_[f],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},d.prototype.onListenRevoked_=function(f,y){var D;D=y?y.map(function(Y){return Tn(Y)}).join("$"):"default";var L=this.removeListen_(f,D);L&&L.onComplete&&L.onComplete("permission_denied")},d.prototype.removeListen_=function(f,y){var L,D=new ln(f).toString();if(this.listens.has(D)){var Y=this.listens.get(D);L=Y.get(y),Y.delete(y),0===Y.size&&this.listens.delete(D)}else L=void 0;return L},d.prototype.onAuthRevoked_=function(f,y){dt("Auth token revoked: "+f+"/"+y),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===f||"permission_denied"===f)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},d.prototype.onAppCheckRevoked_=function(f,y){dt("App check token revoked: "+f+"/"+y),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===f||"permission_denied"===f)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},d.prototype.onSecurityDebugPacket_=function(f){this.securityDebugCallback_?this.securityDebugCallback_(f):"msg"in f&&console.log("FIREBASE: "+f.msg.replace("\n","\nFIREBASE: "))},d.prototype.restoreState_=function(){var f,y,D,L;this.tryAuth(),this.tryAppCheck();try{for(var Y=(0,C.XA)(this.listens.values()),de=Y.next();!de.done;de=Y.next()){var ye=de.value;try{for(var Ie=(D=void 0,(0,C.XA)(ye.values())),Ne=Ie.next();!Ne.done;Ne=Ie.next())this.sendListen_(Ne.value)}catch(rn){D={error:rn}}finally{try{Ne&&!Ne.done&&(L=Ie.return)&&L.call(Ie)}finally{if(D)throw D.error}}}}catch(rn){f={error:rn}}finally{try{de&&!de.done&&(y=Y.return)&&y.call(Y)}finally{if(f)throw f.error}}for(var At=0;At<this.outstandingPuts_.length;At++)this.outstandingPuts_[At]&&this.sendPut_(At);for(;this.onDisconnectRequestQueue_.length;){var Ut=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(Ut.action,Ut.pathString,Ut.data,Ut.onComplete)}for(At=0;At<this.outstandingGets_.length;At++)this.outstandingGets_[At]&&this.sendGet_(At)},d.prototype.sendConnectStats_=function(){var f={},y="js";(0,X.Yr)()&&(y=this.repoInfo_.nodeAdmin?"admin_node":"node"),f["sdk."+y+"."+fe.replace(/\./g,"-")]=1,(0,X.uI)()?f["framework.cordova"]=1:(0,X.b$)()&&(f["framework.reactnative"]=1),this.reportStats(f)},d.prototype.shouldReconnect_=function(){var f=ut.getInstance().currentlyOnline();return(0,X.xb)(this.interruptReasons_)&&f},d.nextPersistentConnectionId_=0,d.nextConnectionId_=0,d}(ce),ir=function(){function c(d,f){this.name=d,this.node=f}return c.Wrap=function(d,f){return new c(d,f)},c}(),eo=function(){function c(){}return c.prototype.getCompare=function(){return this.compare.bind(this)},c.prototype.indexedValueChanged=function(d,f){var y=new ir(nt,d),D=new ir(nt,f);return 0!==this.compare(y,D)},c.prototype.minPost=function(){return ir.MIN},c}(),lo=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return(0,C.ZT)(d,c),Object.defineProperty(d,"__EMPTY_NODE",{get:function(){return to},set:function(f){to=f},enumerable:!1,configurable:!0}),d.prototype.compare=function(f,y){return at(f.name,y.name)},d.prototype.isDefinedOn=function(f){throw(0,X.g5)("KeyIndex.isDefinedOn not expected to be called.")},d.prototype.indexedValueChanged=function(f,y){return!1},d.prototype.minPost=function(){return ir.MIN},d.prototype.maxPost=function(){return new ir(yt,to)},d.prototype.makePost=function(f,y){return(0,X.hu)("string"==typeof f,"KeyIndex indexValue must always be a string."),new ir(f,to)},d.prototype.toString=function(){return".key"},d}(eo),Pi=new lo,co=function(){function c(d,f,y,D,L){void 0===L&&(L=null),this.isReverse_=D,this.resultGenerator_=L,this.nodeStack_=[];for(var Y=1;!d.isEmpty();)if(d=d,Y=f?y(d.key,f):1,D&&(Y*=-1),Y<0)d=this.isReverse_?d.left:d.right;else{if(0===Y){this.nodeStack_.push(d);break}this.nodeStack_.push(d),d=this.isReverse_?d.right:d.left}}return c.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var f,d=this.nodeStack_.pop();if(f=this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value},this.isReverse_)for(d=d.left;!d.isEmpty();)this.nodeStack_.push(d),d=d.right;else for(d=d.right;!d.isEmpty();)this.nodeStack_.push(d),d=d.left;return f},c.prototype.hasNext=function(){return this.nodeStack_.length>0},c.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var d=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value}},c}(),fi=function(){function c(d,f,y,D,L){this.key=d,this.value=f,this.color=null!=y?y:c.RED,this.left=null!=D?D:bi.EMPTY_NODE,this.right=null!=L?L:bi.EMPTY_NODE}return c.prototype.copy=function(d,f,y,D,L){return new c(null!=d?d:this.key,null!=f?f:this.value,null!=y?y:this.color,null!=D?D:this.left,null!=L?L:this.right)},c.prototype.count=function(){return this.left.count()+1+this.right.count()},c.prototype.isEmpty=function(){return!1},c.prototype.inorderTraversal=function(d){return this.left.inorderTraversal(d)||!!d(this.key,this.value)||this.right.inorderTraversal(d)},c.prototype.reverseTraversal=function(d){return this.right.reverseTraversal(d)||d(this.key,this.value)||this.left.reverseTraversal(d)},c.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},c.prototype.minKey=function(){return this.min_().key},c.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},c.prototype.insert=function(d,f,y){var D=this,L=y(d,D.key);return(D=L<0?D.copy(null,null,null,D.left.insert(d,f,y),null):0===L?D.copy(null,f,null,null,null):D.copy(null,null,null,null,D.right.insert(d,f,y))).fixUp_()},c.prototype.removeMin_=function(){if(this.left.isEmpty())return bi.EMPTY_NODE;var d=this;return!d.left.isRed_()&&!d.left.left.isRed_()&&(d=d.moveRedLeft_()),(d=d.copy(null,null,null,d.left.removeMin_(),null)).fixUp_()},c.prototype.remove=function(d,f){var y,D;if(f(d,(y=this).key)<0)!y.left.isEmpty()&&!y.left.isRed_()&&!y.left.left.isRed_()&&(y=y.moveRedLeft_()),y=y.copy(null,null,null,y.left.remove(d,f),null);else{if(y.left.isRed_()&&(y=y.rotateRight_()),!y.right.isEmpty()&&!y.right.isRed_()&&!y.right.left.isRed_()&&(y=y.moveRedRight_()),0===f(d,y.key)){if(y.right.isEmpty())return bi.EMPTY_NODE;D=y.right.min_(),y=y.copy(D.key,D.value,null,null,y.right.removeMin_())}y=y.copy(null,null,null,null,y.right.remove(d,f))}return y.fixUp_()},c.prototype.isRed_=function(){return this.color},c.prototype.fixUp_=function(){var d=this;return d.right.isRed_()&&!d.left.isRed_()&&(d=d.rotateLeft_()),d.left.isRed_()&&d.left.left.isRed_()&&(d=d.rotateRight_()),d.left.isRed_()&&d.right.isRed_()&&(d=d.colorFlip_()),d},c.prototype.moveRedLeft_=function(){var d=this.colorFlip_();return d.right.left.isRed_()&&(d=(d=(d=d.copy(null,null,null,null,d.right.rotateRight_())).rotateLeft_()).colorFlip_()),d},c.prototype.moveRedRight_=function(){var d=this.colorFlip_();return d.left.left.isRed_()&&(d=(d=d.rotateRight_()).colorFlip_()),d},c.prototype.rotateLeft_=function(){var d=this.copy(null,null,c.RED,null,this.right.left);return this.right.copy(null,null,this.color,d,null)},c.prototype.rotateRight_=function(){var d=this.copy(null,null,c.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,d)},c.prototype.colorFlip_=function(){var d=this.left.copy(null,null,!this.left.color,null,null),f=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,d,f)},c.prototype.checkMaxDepth_=function(){var d=this.check_();return Math.pow(2,d)<=this.count()+1},c.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var d=this.left.check_();if(d!==this.right.check_())throw new Error("Black depths differ");return d+(this.isRed_()?0:1)},c.RED=!0,c.BLACK=!1,c}(),ko=function(){function c(){}return c.prototype.copy=function(d,f,y,D,L){return this},c.prototype.insert=function(d,f,y){return new fi(d,f,null)},c.prototype.remove=function(d,f){return this},c.prototype.count=function(){return 0},c.prototype.isEmpty=function(){return!0},c.prototype.inorderTraversal=function(d){return!1},c.prototype.reverseTraversal=function(d){return!1},c.prototype.minKey=function(){return null},c.prototype.maxKey=function(){return null},c.prototype.check_=function(){return 0},c.prototype.isRed_=function(){return!1},c}(),bi=function(){function c(d,f){void 0===f&&(f=c.EMPTY_NODE),this.comparator_=d,this.root_=f}return c.prototype.insert=function(d,f){return new c(this.comparator_,this.root_.insert(d,f,this.comparator_).copy(null,null,fi.BLACK,null,null))},c.prototype.remove=function(d){return new c(this.comparator_,this.root_.remove(d,this.comparator_).copy(null,null,fi.BLACK,null,null))},c.prototype.get=function(d){for(var f,y=this.root_;!y.isEmpty();){if(0===(f=this.comparator_(d,y.key)))return y.value;f<0?y=y.left:f>0&&(y=y.right)}return null},c.prototype.getPredecessorKey=function(d){for(var f,y=this.root_,D=null;!y.isEmpty();){if(0===(f=this.comparator_(d,y.key))){if(y.left.isEmpty())return D?D.key:null;for(y=y.left;!y.right.isEmpty();)y=y.right;return y.key}f<0?y=y.left:f>0&&(D=y,y=y.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},c.prototype.isEmpty=function(){return this.root_.isEmpty()},c.prototype.count=function(){return this.root_.count()},c.prototype.minKey=function(){return this.root_.minKey()},c.prototype.maxKey=function(){return this.root_.maxKey()},c.prototype.inorderTraversal=function(d){return this.root_.inorderTraversal(d)},c.prototype.reverseTraversal=function(d){return this.root_.reverseTraversal(d)},c.prototype.getIterator=function(d){return new co(this.root_,null,this.comparator_,!1,d)},c.prototype.getIteratorFrom=function(d,f){return new co(this.root_,d,this.comparator_,!1,f)},c.prototype.getReverseIteratorFrom=function(d,f){return new co(this.root_,d,this.comparator_,!0,f)},c.prototype.getReverseIterator=function(d){return new co(this.root_,null,this.comparator_,!0,d)},c.EMPTY_NODE=new ko,c}();function Eo(c,d){return at(c.name,d.name)}function Nr(c,d){return at(c,d)}var no,ho,Lo,Z,W,Do=function(c){return"number"==typeof c?"number:"+Ft(c):"string:"+c},Or=function(c){if(c.isLeafNode()){var d=c.val();(0,X.hu)("string"==typeof d||"number"==typeof d||"object"==typeof d&&(0,X.r3)(d,".sv"),"Priority must be a string or number.")}else(0,X.hu)(c===is||c.isEmpty(),"priority of unexpected type.");(0,X.hu)(c===is||c.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ei=function(){function c(d,f){void 0===f&&(f=c.__childrenNodeConstructor.EMPTY_NODE),this.value_=d,this.priorityNode_=f,this.lazyHash_=null,(0,X.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Or(this.priorityNode_)}return Object.defineProperty(c,"__childrenNodeConstructor",{get:function(){return no},set:function(d){no=d},enumerable:!1,configurable:!0}),c.prototype.isLeafNode=function(){return!0},c.prototype.getPriority=function(){return this.priorityNode_},c.prototype.updatePriority=function(d){return new c(this.value_,d)},c.prototype.getImmediateChild=function(d){return".priority"===d?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE},c.prototype.getChild=function(d){return jn(d)?this:".priority"===Xn(d)?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE},c.prototype.hasChild=function(){return!1},c.prototype.getPredecessorChildName=function(d,f){return null},c.prototype.updateImmediateChild=function(d,f){return".priority"===d?this.updatePriority(f):f.isEmpty()&&".priority"!==d?this:c.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(d,f).updatePriority(this.priorityNode_)},c.prototype.updateChild=function(d,f){var y=Xn(d);return null===y?f:f.isEmpty()&&".priority"!==y?this:((0,X.hu)(".priority"!==y||1===Gi(d),".priority must be the last token in a path"),this.updateImmediateChild(y,c.__childrenNodeConstructor.EMPTY_NODE.updateChild(pr(d),f)))},c.prototype.isEmpty=function(){return!1},c.prototype.numChildren=function(){return 0},c.prototype.forEachChild=function(d,f){return!1},c.prototype.val=function(d){return d&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},c.prototype.hash=function(){if(null===this.lazyHash_){var d="";this.priorityNode_.isEmpty()||(d+="priority:"+Do(this.priorityNode_.val())+":");var f=typeof this.value_;d+=f+":",d+="number"===f?Ft(this.value_):this.value_,this.lazyHash_=re(d)}return this.lazyHash_},c.prototype.getValue=function(){return this.value_},c.prototype.compareTo=function(d){return d===c.__childrenNodeConstructor.EMPTY_NODE?1:d instanceof c.__childrenNodeConstructor?-1:((0,X.hu)(d.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(d))},c.prototype.compareToLeafNode_=function(d){var f=typeof d.value_,y=typeof this.value_,D=c.VALUE_TYPE_ORDER.indexOf(f),L=c.VALUE_TYPE_ORDER.indexOf(y);return(0,X.hu)(D>=0,"Unknown leaf type: "+f),(0,X.hu)(L>=0,"Unknown leaf type: "+y),D===L?"object"===y?0:this.value_<d.value_?-1:this.value_===d.value_?0:1:L-D},c.prototype.withIndex=function(){return this},c.prototype.isIndexed=function(){return!0},c.prototype.equals=function(d){return d===this||!!d.isLeafNode()&&(this.value_===d.value_&&this.priorityNode_.equals(d.priorityNode_))},c.VALUE_TYPE_ORDER=["object","boolean","number","string"],c}(),lr=new(function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return(0,C.ZT)(d,c),d.prototype.compare=function(f,y){var D=f.node.getPriority(),L=y.node.getPriority(),Y=D.compareTo(L);return 0===Y?at(f.name,y.name):Y},d.prototype.isDefinedOn=function(f){return!f.getPriority().isEmpty()},d.prototype.indexedValueChanged=function(f,y){return!f.getPriority().equals(y.getPriority())},d.prototype.minPost=function(){return ir.MIN},d.prototype.maxPost=function(){return new ir(yt,new ei("[PRIORITY-POST]",Lo))},d.prototype.makePost=function(f,y){var D=ho(f);return new ir(y,new ei("[PRIORITY-POST]",D))},d.prototype.toString=function(){return".priority"},d}(eo)),fo=Math.log(2),os=function(){function c(d){this.count=parseInt(Math.log(d+1)/fo,10),this.current_=this.count-1;var D=parseInt(Array(this.count+1).join("1"),2);this.bits_=d+1&D}return c.prototype.nextBitIsOne=function(){var d=!(this.bits_&1<<this.current_);return this.current_--,d},c}(),K=function(c,d,f,y){c.sort(d);var D=function(ye,Ie){var ht,At,Ne=Ie-ye;if(0===Ne)return null;if(1===Ne)return ht=c[ye],At=f?f(ht):ht,new fi(At,ht.node,fi.BLACK,null,null);var Ut=parseInt(Ne/2,10)+ye,rn=D(ye,Ut),Kn=D(Ut+1,Ie);return ht=c[Ut],At=f?f(ht):ht,new fi(At,ht.node,fi.BLACK,rn,Kn)},de=function(ye){for(var Ie=null,Ne=null,ht=c.length,At=function(Cr,oo){var Na=ht-Cr,Hl=ht;ht-=Cr;var Nd=D(Na+1,Hl),ou=c[Na],su=f?f(ou):ou;Ut(new fi(su,ou.node,oo,null,Nd))},Ut=function(Cr){Ie?(Ie.left=Cr,Ie=Cr):(Ne=Cr,Ie=Cr)},rn=0;rn<ye.count;++rn){var Kn=ye.nextBitIsOne(),Wn=Math.pow(2,ye.count-(rn+1));Kn?At(Wn,fi.BLACK):(At(Wn,fi.BLACK),At(Wn,fi.RED))}return Ne}(new os(c.length));return new bi(y||d,de)},ge={},x=function(){function c(d,f){this.indexes_=d,this.indexSet_=f}return Object.defineProperty(c,"Default",{get:function(){return(0,X.hu)(ge&&lr,"ChildrenNode.ts has not been loaded"),Z=Z||new c({".priority":ge},{".priority":lr})},enumerable:!1,configurable:!0}),c.prototype.get=function(d){var f=(0,X.DV)(this.indexes_,d);if(!f)throw new Error("No index defined for "+d);return f instanceof bi?f:null},c.prototype.hasIndex=function(d){return(0,X.r3)(this.indexSet_,d.toString())},c.prototype.addIndex=function(d,f){(0,X.hu)(d!==Pi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var y=[],D=!1,L=f.getIterator(ir.Wrap),Y=L.getNext();Y;)D=D||d.isDefinedOn(Y.node),y.push(Y),Y=L.getNext();var de;de=D?K(y,d.getCompare()):ge;var ye=d.toString(),Ie=(0,C.pi)({},this.indexSet_);Ie[ye]=d;var Ne=(0,C.pi)({},this.indexes_);return Ne[ye]=de,new c(Ne,Ie)},c.prototype.addToIndexes=function(d,f){var y=this;return new c((0,X.UI)(this.indexes_,function(L,Y){var de=(0,X.DV)(y.indexSet_,Y);if((0,X.hu)(de,"Missing index implementation for "+Y),L===ge){if(de.isDefinedOn(d.node)){for(var ye=[],Ie=f.getIterator(ir.Wrap),Ne=Ie.getNext();Ne;)Ne.name!==d.name&&ye.push(Ne),Ne=Ie.getNext();return ye.push(d),K(ye,de.getCompare())}return ge}var ht=f.get(d.name),At=L;return ht&&(At=At.remove(new ir(d.name,ht))),At.insert(d,d.node)}),this.indexSet_)},c.prototype.removeFromIndexes=function(d,f){return new c((0,X.UI)(this.indexes_,function(D){if(D===ge)return D;var L=f.get(d.name);return L?D.remove(new ir(d.name,L)):D}),this.indexSet_)},c}(),k=function(){function c(d,f,y){this.children_=d,this.priorityNode_=f,this.indexMap_=y,this.lazyHash_=null,this.priorityNode_&&Or(this.priorityNode_),this.children_.isEmpty()&&(0,X.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(c,"EMPTY_NODE",{get:function(){return W||(W=new c(new bi(Nr),null,x.Default))},enumerable:!1,configurable:!0}),c.prototype.isLeafNode=function(){return!1},c.prototype.getPriority=function(){return this.priorityNode_||W},c.prototype.updatePriority=function(d){return this.children_.isEmpty()?this:new c(this.children_,d,this.indexMap_)},c.prototype.getImmediateChild=function(d){if(".priority"===d)return this.getPriority();var f=this.children_.get(d);return null===f?W:f},c.prototype.getChild=function(d){var f=Xn(d);return null===f?this:this.getImmediateChild(f).getChild(pr(d))},c.prototype.hasChild=function(d){return null!==this.children_.get(d)},c.prototype.updateImmediateChild=function(d,f){if((0,X.hu)(f,"We should always be passing snapshot nodes"),".priority"===d)return this.updatePriority(f);var y=new ir(d,f),D=void 0,L=void 0;f.isEmpty()?(D=this.children_.remove(d),L=this.indexMap_.removeFromIndexes(y,this.children_)):(D=this.children_.insert(d,f),L=this.indexMap_.addToIndexes(y,this.children_));var Y=D.isEmpty()?W:this.priorityNode_;return new c(D,Y,L)},c.prototype.updateChild=function(d,f){var y=Xn(d);if(null===y)return f;(0,X.hu)(".priority"!==Xn(d)||1===Gi(d),".priority must be the last token in a path");var D=this.getImmediateChild(y).updateChild(pr(d),f);return this.updateImmediateChild(y,D)},c.prototype.isEmpty=function(){return this.children_.isEmpty()},c.prototype.numChildren=function(){return this.children_.count()},c.prototype.val=function(d){if(this.isEmpty())return null;var f={},y=0,D=0,L=!0;if(this.forEachChild(lr,function(ye,Ie){f[ye]=Ie.val(d),y++,L&&c.INTEGER_REGEXP_.test(ye)?D=Math.max(D,Number(ye)):L=!1}),!d&&L&&D<2*y){var Y=[];for(var de in f)Y[de]=f[de];return Y}return d&&!this.getPriority().isEmpty()&&(f[".priority"]=this.getPriority().val()),f},c.prototype.hash=function(){if(null===this.lazyHash_){var d="";this.getPriority().isEmpty()||(d+="priority:"+Do(this.getPriority().val())+":"),this.forEachChild(lr,function(f,y){var D=y.hash();""!==D&&(d+=":"+f+":"+D)}),this.lazyHash_=""===d?"":re(d)}return this.lazyHash_},c.prototype.getPredecessorChildName=function(d,f,y){var D=this.resolveIndex_(y);if(D){var L=D.getPredecessorKey(new ir(d,f));return L?L.name:null}return this.children_.getPredecessorKey(d)},c.prototype.getFirstChildName=function(d){var f=this.resolveIndex_(d);if(f){var y=f.minKey();return y&&y.name}return this.children_.minKey()},c.prototype.getFirstChild=function(d){var f=this.getFirstChildName(d);return f?new ir(f,this.children_.get(f)):null},c.prototype.getLastChildName=function(d){var f=this.resolveIndex_(d);if(f){var y=f.maxKey();return y&&y.name}return this.children_.maxKey()},c.prototype.getLastChild=function(d){var f=this.getLastChildName(d);return f?new ir(f,this.children_.get(f)):null},c.prototype.forEachChild=function(d,f){var y=this.resolveIndex_(d);return y?y.inorderTraversal(function(D){return f(D.name,D.node)}):this.children_.inorderTraversal(f)},c.prototype.getIterator=function(d){return this.getIteratorFrom(d.minPost(),d)},c.prototype.getIteratorFrom=function(d,f){var y=this.resolveIndex_(f);if(y)return y.getIteratorFrom(d,function(Y){return Y});for(var D=this.children_.getIteratorFrom(d.name,ir.Wrap),L=D.peek();null!=L&&f.compare(L,d)<0;)D.getNext(),L=D.peek();return D},c.prototype.getReverseIterator=function(d){return this.getReverseIteratorFrom(d.maxPost(),d)},c.prototype.getReverseIteratorFrom=function(d,f){var y=this.resolveIndex_(f);if(y)return y.getReverseIteratorFrom(d,function(Y){return Y});for(var D=this.children_.getReverseIteratorFrom(d.name,ir.Wrap),L=D.peek();null!=L&&f.compare(L,d)>0;)D.getNext(),L=D.peek();return D},c.prototype.compareTo=function(d){return this.isEmpty()?d.isEmpty()?0:-1:d.isLeafNode()||d.isEmpty()?1:d===we?-1:0},c.prototype.withIndex=function(d){if(d===Pi||this.indexMap_.hasIndex(d))return this;var f=this.indexMap_.addIndex(d,this.children_);return new c(this.children_,this.priorityNode_,f)},c.prototype.isIndexed=function(d){return d===Pi||this.indexMap_.hasIndex(d)},c.prototype.equals=function(d){if(d===this)return!0;if(d.isLeafNode())return!1;var f=d;if(this.getPriority().equals(f.getPriority())){if(this.children_.count()===f.children_.count()){for(var y=this.getIterator(lr),D=f.getIterator(lr),L=y.getNext(),Y=D.getNext();L&&Y;){if(L.name!==Y.name||!L.node.equals(Y.node))return!1;L=y.getNext(),Y=D.getNext()}return null===L&&null===Y}return!1}return!1},c.prototype.resolveIndex_=function(d){return d===Pi?null:this.indexMap_.get(d.toString())},c.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,c}(),we=new(function(c){function d(){return c.call(this,new bi(Nr),k.EMPTY_NODE,x.Default)||this}return(0,C.ZT)(d,c),d.prototype.compareTo=function(f){return f===this?0:1},d.prototype.equals=function(f){return f===this},d.prototype.getPriority=function(){return this},d.prototype.getImmediateChild=function(f){return k.EMPTY_NODE},d.prototype.isEmpty=function(){return!1},d}(k));function rt(c,d){if(void 0===d&&(d=null),null===c)return k.EMPTY_NODE;if("object"==typeof c&&".priority"in c&&(d=c[".priority"]),(0,X.hu)(null===d||"string"==typeof d||"number"==typeof d||"object"==typeof d&&".sv"in d,"Invalid priority type found: "+typeof d),"object"==typeof c&&".value"in c&&null!==c[".value"]&&(c=c[".value"]),"object"!=typeof c||".sv"in c)return new ei(c,rt(d));if(c instanceof Array){var ye=k.EMPTY_NODE;return Bt(c,function(Ie,Ne){if((0,X.r3)(c,Ie)&&"."!==Ie.substring(0,1)){var ht=rt(Ne);(ht.isLeafNode()||!ht.isEmpty())&&(ye=ye.updateImmediateChild(Ie,ht))}}),ye.updatePriority(rt(d))}var y=[],D=!1;if(Bt(c,function(Ie,Ne){if("."!==Ie.substring(0,1)){var ht=rt(Ne);ht.isEmpty()||(D=D||!ht.getPriority().isEmpty(),y.push(new ir(Ie,ht)))}}),0===y.length)return k.EMPTY_NODE;var Y=K(y,Eo,function(Ie){return Ie.name},Nr);if(D){var de=K(y,lr.getCompare());return new k(Y,rt(d),new x({".priority":de},{".priority":lr}))}return new k(Y,rt(d),x.Default)}Object.defineProperties(ir,{MIN:{value:new ir(nt,k.EMPTY_NODE)},MAX:{value:new ir(yt,we)}}),lo.__EMPTY_NODE=k.EMPTY_NODE,ei.__childrenNodeConstructor=k,function(c){is=c}(we),function(c){Lo=c}(we),function(c){ho=c}(rt);var G=function(c){function d(f){var y=c.call(this)||this;return y.indexPath_=f,(0,X.hu)(!jn(f)&&".priority"!==Xn(f),"Can't create PathIndex with empty path or .priority key"),y}return(0,C.ZT)(d,c),d.prototype.extractChild=function(f){return f.getChild(this.indexPath_)},d.prototype.isDefinedOn=function(f){return!f.getChild(this.indexPath_).isEmpty()},d.prototype.compare=function(f,y){var D=this.extractChild(f.node),L=this.extractChild(y.node),Y=D.compareTo(L);return 0===Y?at(f.name,y.name):Y},d.prototype.makePost=function(f,y){var D=rt(f),L=k.EMPTY_NODE.updateChild(this.indexPath_,D);return new ir(y,L)},d.prototype.maxPost=function(){var f=k.EMPTY_NODE.updateChild(this.indexPath_,we);return new ir(yt,f)},d.prototype.toString=function(){return $r(this.indexPath_,0).join("/")},d}(eo),V=new(function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return(0,C.ZT)(d,c),d.prototype.compare=function(f,y){var D=f.node.compareTo(y.node);return 0===D?at(f.name,y.name):D},d.prototype.isDefinedOn=function(f){return!0},d.prototype.indexedValueChanged=function(f,y){return!f.equals(y)},d.prototype.minPost=function(){return ir.MIN},d.prototype.maxPost=function(){return ir.MAX},d.prototype.makePost=function(f,y){var D=rt(f);return new ir(y,D)},d.prototype.toString=function(){return".value"},d}(eo)),ue="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",cr=function(){var c=0,d=[];return function(f){var y=f===c;c=f;var D,L=new Array(8);for(D=7;D>=0;D--)L[D]=ue.charAt(f%64),f=Math.floor(f/64);(0,X.hu)(0===f,"Cannot push at time == 0");var Y=L.join("");if(y){for(D=11;D>=0&&63===d[D];D--)d[D]=0;d[D]++}else for(D=0;D<12;D++)d[D]=Math.floor(64*Math.random());for(D=0;D<12;D++)Y+=ue.charAt(d[D]);return(0,X.hu)(20===Y.length,"nextPushId: Length should be 20."),Y}}(),Hr=function(c){if(c===""+Gn)return"-";var d=Bn(c);if(null!=d)return""+(d+1);for(var f=new Array(c.length),y=0;y<f.length;y++)f[y]=c.charAt(y);if(f.length<786)return f.push("-"),f.join("");for(var D=f.length-1;D>=0&&"z"===f[D];)D--;if(-1===D)return yt;var Y=ue.charAt(ue.indexOf(f[D])+1);return f[D]=Y,f.slice(0,D+1).join("")},hr=function(c){if(c===""+or)return nt;var d=Bn(c);if(null!=d)return""+(d-1);for(var f=new Array(c.length),y=0;y<f.length;y++)f[y]=c.charAt(y);return"-"===f[f.length-1]?1===f.length?""+Gn:(delete f[f.length-1],f.join("")):(f[f.length-1]=ue.charAt(ue.indexOf(f[f.length-1])-1),f.join("")+"z".repeat(786-f.length))};function Gr(c){return{type:"value",snapshotNode:c}}function ii(c,d){return{type:"child_added",snapshotNode:d,childName:c}}function Dn(c,d){return{type:"child_removed",snapshotNode:d,childName:c}}function Qi(c,d,f){return{type:"child_changed",snapshotNode:d,childName:c,oldSnap:f}}var po=function(){function c(d){this.index_=d}return c.prototype.updateChild=function(d,f,y,D,L,Y){(0,X.hu)(d.isIndexed(this.index_),"A node must be indexed if only a child is updated");var de=d.getImmediateChild(f);return de.getChild(D).equals(y.getChild(D))&&de.isEmpty()===y.isEmpty()||(null!=Y&&(y.isEmpty()?d.hasChild(f)?Y.trackChildChange(Dn(f,de)):(0,X.hu)(d.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):de.isEmpty()?Y.trackChildChange(ii(f,y)):Y.trackChildChange(Qi(f,y,de))),d.isLeafNode()&&y.isEmpty())?d:d.updateImmediateChild(f,y).withIndex(this.index_)},c.prototype.updateFullNode=function(d,f,y){return null!=y&&(d.isLeafNode()||d.forEachChild(lr,function(D,L){f.hasChild(D)||y.trackChildChange(Dn(D,L))}),f.isLeafNode()||f.forEachChild(lr,function(D,L){if(d.hasChild(D)){var Y=d.getImmediateChild(D);Y.equals(L)||y.trackChildChange(Qi(D,L,Y))}else y.trackChildChange(ii(D,L))})),f.withIndex(this.index_)},c.prototype.updatePriority=function(d,f){return d.isEmpty()?k.EMPTY_NODE:d.updatePriority(f)},c.prototype.filtersNodes=function(){return!1},c.prototype.getIndexedFilter=function(){return this},c.prototype.getIndex=function(){return this.index_},c}(),cu=function(){function c(d){this.indexedFilter_=new po(d.getIndex()),this.index_=d.getIndex(),this.startPost_=c.getStartPost_(d),this.endPost_=c.getEndPost_(d)}return c.prototype.getStartPost=function(){return this.startPost_},c.prototype.getEndPost=function(){return this.endPost_},c.prototype.matches=function(d){return this.index_.compare(this.getStartPost(),d)<=0&&this.index_.compare(d,this.getEndPost())<=0},c.prototype.updateChild=function(d,f,y,D,L,Y){return this.matches(new ir(f,y))||(y=k.EMPTY_NODE),this.indexedFilter_.updateChild(d,f,y,D,L,Y)},c.prototype.updateFullNode=function(d,f,y){f.isLeafNode()&&(f=k.EMPTY_NODE);var D=f.withIndex(this.index_);D=D.updatePriority(k.EMPTY_NODE);var L=this;return f.forEachChild(lr,function(Y,de){L.matches(new ir(Y,de))||(D=D.updateImmediateChild(Y,k.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(d,D,y)},c.prototype.updatePriority=function(d,f){return d},c.prototype.filtersNodes=function(){return!0},c.prototype.getIndexedFilter=function(){return this.indexedFilter_},c.prototype.getIndex=function(){return this.index_},c.getStartPost_=function(d){if(d.hasStart()){var f=d.getIndexStartName();return d.getIndex().makePost(d.getIndexStartValue(),f)}return d.getIndex().minPost()},c.getEndPost_=function(d){if(d.hasEnd()){var f=d.getIndexEndName();return d.getIndex().makePost(d.getIndexEndValue(),f)}return d.getIndex().maxPost()},c}(),$u=function(){function c(d){this.rangedFilter_=new cu(d),this.index_=d.getIndex(),this.limit_=d.getLimit(),this.reverse_=!d.isViewFromLeft()}return c.prototype.updateChild=function(d,f,y,D,L,Y){return this.rangedFilter_.matches(new ir(f,y))||(y=k.EMPTY_NODE),d.getImmediateChild(f).equals(y)?d:d.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(d,f,y,D,L,Y):this.fullLimitUpdateChild_(d,f,y,L,Y)},c.prototype.updateFullNode=function(d,f,y){var D;if(f.isLeafNode()||f.isEmpty())D=k.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<f.numChildren()&&f.isIndexed(this.index_)){D=k.EMPTY_NODE.withIndex(this.index_);var L=void 0;L=this.reverse_?f.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):f.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var Y=0;L.hasNext()&&Y<this.limit_;){var de=L.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),de)<=0:this.index_.compare(de,this.rangedFilter_.getEndPost())<=0))break;D=D.updateImmediateChild(de.name,de.node),Y++}}else{D=(D=f.withIndex(this.index_)).updatePriority(k.EMPTY_NODE);var Ie=void 0,Ne=void 0,ht=void 0;if(L=void 0,this.reverse_){L=D.getReverseIterator(this.index_),Ie=this.rangedFilter_.getEndPost(),Ne=this.rangedFilter_.getStartPost();var At=this.index_.getCompare();ht=function(Wn,Cr){return At(Cr,Wn)}}else L=D.getIterator(this.index_),Ie=this.rangedFilter_.getStartPost(),Ne=this.rangedFilter_.getEndPost(),ht=this.index_.getCompare();Y=0;for(var Ut=!1;L.hasNext();)de=L.getNext(),!Ut&&ht(Ie,de)<=0&&(Ut=!0),Ut&&Y<this.limit_&&ht(de,Ne)<=0?Y++:D=D.updateImmediateChild(de.name,k.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(d,D,y)},c.prototype.updatePriority=function(d,f){return d},c.prototype.filtersNodes=function(){return!0},c.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},c.prototype.getIndex=function(){return this.index_},c.prototype.fullLimitUpdateChild_=function(d,f,y,D,L){var Y;if(this.reverse_){var de=this.index_.getCompare();Y=function(oo,Na){return de(Na,oo)}}else Y=this.index_.getCompare();var ye=d;(0,X.hu)(ye.numChildren()===this.limit_,"");var Ie=new ir(f,y),Ne=this.reverse_?ye.getFirstChild(this.index_):ye.getLastChild(this.index_),ht=this.rangedFilter_.matches(Ie);if(ye.hasChild(f)){for(var At=ye.getImmediateChild(f),Ut=D.getChildAfterChild(this.index_,Ne,this.reverse_);null!=Ut&&(Ut.name===f||ye.hasChild(Ut.name));)Ut=D.getChildAfterChild(this.index_,Ut,this.reverse_);var rn=null==Ut?1:Y(Ut,Ie);if(ht&&!y.isEmpty()&&rn>=0)return null!=L&&L.trackChildChange(Qi(f,y,At)),ye.updateImmediateChild(f,y);null!=L&&L.trackChildChange(Dn(f,At));var Wn=ye.updateImmediateChild(f,k.EMPTY_NODE);return null!=Ut&&this.rangedFilter_.matches(Ut)?(null!=L&&L.trackChildChange(ii(Ut.name,Ut.node)),Wn.updateImmediateChild(Ut.name,Ut.node)):Wn}return y.isEmpty()?d:ht&&Y(Ne,Ie)>=0?(null!=L&&(L.trackChildChange(Dn(Ne.name,Ne.node)),L.trackChildChange(ii(f,y))),ye.updateImmediateChild(f,y).updateImmediateChild(Ne.name,k.EMPTY_NODE)):d},c}(),du=function(){function c(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=lr}return c.prototype.hasStart=function(){return this.startSet_},c.prototype.hasStartAfter=function(){return this.startAfterSet_},c.prototype.hasEndBefore=function(){return this.endBeforeSet_},c.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},c.prototype.getIndexStartValue=function(){return(0,X.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},c.prototype.getIndexStartName=function(){return(0,X.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:nt},c.prototype.hasEnd=function(){return this.endSet_},c.prototype.getIndexEndValue=function(){return(0,X.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},c.prototype.getIndexEndName=function(){return(0,X.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yt},c.prototype.hasLimit=function(){return this.limitSet_},c.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},c.prototype.getLimit=function(){return(0,X.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},c.prototype.getIndex=function(){return this.index_},c.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},c.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===lr},c.prototype.copy=function(){var d=new c;return d.limitSet_=this.limitSet_,d.limit_=this.limit_,d.startSet_=this.startSet_,d.indexStartValue_=this.indexStartValue_,d.startNameSet_=this.startNameSet_,d.indexStartName_=this.indexStartName_,d.endSet_=this.endSet_,d.indexEndValue_=this.indexEndValue_,d.endNameSet_=this.endNameSet_,d.indexEndName_=this.indexEndName_,d.index_=this.index_,d.viewFrom_=this.viewFrom_,d},c}();function vs(c,d,f){var y=c.copy();return y.startSet_=!0,void 0===d&&(d=null),y.indexStartValue_=d,null!=f?(y.startNameSet_=!0,y.indexStartName_=f):(y.startNameSet_=!1,y.indexStartName_=""),y}function Os(c,d,f){var y=c.copy();return y.endSet_=!0,void 0===d&&(d=null),y.indexEndValue_=d,void 0!==f?(y.endNameSet_=!0,y.indexEndName_=f):(y.endNameSet_=!1,y.indexEndName_=""),y}function Zo(c,d){var f=c.copy();return f.index_=d,f}function oe(c){var f,d={};return c.isDefault()||(c.index_===lr?f="$priority":c.index_===V?f="$value":c.index_===Pi?f="$key":((0,X.hu)(c.index_ instanceof G,"Unrecognized index type!"),f=c.index_.toString()),d.orderBy=(0,X.Pz)(f),c.startSet_&&(d.startAt=(0,X.Pz)(c.indexStartValue_),c.startNameSet_&&(d.startAt+=","+(0,X.Pz)(c.indexStartName_))),c.endSet_&&(d.endAt=(0,X.Pz)(c.indexEndValue_),c.endNameSet_&&(d.endAt+=","+(0,X.Pz)(c.indexEndName_))),c.limitSet_&&(c.isViewFromLeft()?d.limitToFirst=c.limit_:d.limitToLast=c.limit_)),d}function A(c){var d={};if(c.startSet_&&(d.sp=c.indexStartValue_,c.startNameSet_&&(d.sn=c.indexStartName_)),c.endSet_&&(d.ep=c.indexEndValue_,c.endNameSet_&&(d.en=c.indexEndName_)),c.limitSet_){d.l=c.limit_;var f=c.viewFrom_;""===f&&(f=c.isViewFromLeft()?"l":"r"),d.vf=f}return c.index_!==lr&&(d.i=c.index_.toString()),d}var M=function(c){function d(f,y,D,L){var Y=c.call(this)||this;return Y.repoInfo_=f,Y.onDataUpdate_=y,Y.authTokenProvider_=D,Y.appCheckTokenProvider_=L,Y.log_=Zt("p:rest:"),Y.listens_={},Y}return(0,C.ZT)(d,c),d.prototype.reportStats=function(f){throw new Error("Method not implemented.")},d.getListenId_=function(f,y){return void 0!==y?"tag$"+y:((0,X.hu)(f._queryParams.isDefault(),"should have a tag if it's not a default query."),f._path.toString())},d.prototype.listen=function(f,y,D,L){var Y=this,de=f._path.toString();this.log_("Listen called for "+de+" "+f._queryIdentifier);var ye=d.getListenId_(f,D),Ie={};this.listens_[ye]=Ie;var Ne=oe(f._queryParams);this.restRequest_(de+".json",Ne,function(ht,At){var Ut=At;404===ht&&(Ut=null,ht=null),null===ht&&Y.onDataUpdate_(de,Ut,!1,D),(0,X.DV)(Y.listens_,ye)===Ie&&L(ht?401===ht?"permission_denied":"rest_error:"+ht:"ok",null)})},d.prototype.unlisten=function(f,y){var D=d.getListenId_(f,y);delete this.listens_[D]},d.prototype.get=function(f){var y=this,D=oe(f._queryParams),L=f._path.toString(),Y=new X.BH;return this.restRequest_(L+".json",D,function(de,ye){var Ie=ye;404===de&&(Ie=null,de=null),null===de?(y.onDataUpdate_(L,Ie,!1,null),Y.resolve(Ie)):Y.reject(new Error(Ie))}),Y.promise},d.prototype.refreshAuthToken=function(f){},d.prototype.restRequest_=function(f,y,D){var L=this;return void 0===y&&(y={}),y.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(Y){var de=(0,C.CR)(Y,2),ye=de[0],Ie=de[1];ye&&ye.accessToken&&(y.auth=ye.accessToken),Ie&&Ie.token&&(y.ac=Ie.token);var Ne=(L.repoInfo_.secure?"https://":"http://")+L.repoInfo_.host+f+"?ns="+L.repoInfo_.namespace+(0,X.xO)(y);L.log_("Sending REST request for "+Ne);var ht=new XMLHttpRequest;ht.onreadystatechange=function(){if(D&&4===ht.readyState){L.log_("REST Response for "+Ne+" received. status:",ht.status,"response:",ht.responseText);var At=null;if(ht.status>=200&&ht.status<300){try{At=(0,X.cI)(ht.responseText)}catch(Ut){wt("Failed to parse JSON response for "+Ne+": "+ht.responseText)}D(null,At)}else 401!==ht.status&&404!==ht.status&&wt("Got unsuccessful REST response for "+Ne+" Status: "+ht.status),D(ht.status);D=null}},ht.open("GET",Ne,!0),ht.send()})},d}(ce),j=function(){function c(){this.rootNode_=k.EMPTY_NODE}return c.prototype.getNode=function(d){return this.rootNode_.getChild(d)},c.prototype.updateSnapshot=function(d,f){this.rootNode_=this.rootNode_.updateChild(d,f)},c}();function ae(){return{value:null,children:new Map}}function be(c,d,f){if(jn(d))c.value=f,c.children.clear();else if(null!==c.value)c.value=c.value.updateChild(d,f);else{var y=Xn(d);c.children.has(y)||c.children.set(y,ae()),be(c.children.get(y),d=pr(d),f)}}function Pe(c,d){if(jn(d))return c.value=null,c.children.clear(),!0;if(null!==c.value){if(c.value.isLeafNode())return!1;var f=c.value;return c.value=null,f.forEachChild(lr,function(L,Y){be(c,new ln(L),Y)}),Pe(c,d)}if(c.children.size>0){var y=Xn(d);return d=pr(d),c.children.has(y)&&Pe(c.children.get(y),d)&&c.children.delete(y),0===c.children.size}return!0}function Le(c,d,f){null!==c.value?f(d,c.value):function(c,d){c.children.forEach(function(f,y){d(y,f)})}(c,function(y,D){Le(D,new ln(d.toString()+"/"+y),f)})}var mt=function(){function c(d){this.collection_=d,this.last_=null}return c.prototype.get=function(){var d=this.collection_.get(),f=(0,C.pi)({},d);return this.last_&&Bt(this.last_,function(y,D){f[y]=f[y]-D}),this.last_=d,f},c}(),Tr=function(){function c(d,f){this.server_=f,this.statsToReport_={},this.statsListener_=new mt(d);var y=1e4+2e4*Math.random();An(this.reportStats_.bind(this),Math.floor(y))}return c.prototype.reportStats_=function(){var d=this,f=this.statsListener_.get(),y={},D=!1;Bt(f,function(L,Y){Y>0&&(0,X.r3)(d.statsToReport_,L)&&(y[L]=Y,D=!0)}),D&&this.server_.reportStats(y),An(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},c}(),Fn=(()=>(function(c){c[c.OVERWRITE=0]="OVERWRITE",c[c.MERGE=1]="MERGE",c[c.ACK_USER_WRITE=2]="ACK_USER_WRITE",c[c.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Fn||(Fn={})),Fn))();function Vr(c){return{fromUser:!1,fromServer:!0,queryId:c,tagged:!0}}var Ji=function(){function c(d,f,y){this.path=d,this.affectedTree=f,this.revert=y,this.type=Fn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return c.prototype.operationForChild=function(d){if(jn(this.path)){if(null!=this.affectedTree.value)return(0,X.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var f=this.affectedTree.subtree(new ln(d));return new c(cn(),f,this.revert)}return(0,X.hu)(Xn(this.path)===d,"operationForChild called for unrelated child."),new c(pr(this.path),this.affectedTree,this.revert)},c}(),si=function(){function c(d,f){this.source=d,this.path=f,this.type=Fn.LISTEN_COMPLETE}return c.prototype.operationForChild=function(d){return jn(this.path)?new c(this.source,cn()):new c(this.source,pr(this.path))},c}(),Oo=function(){function c(d,f,y){this.source=d,this.path=f,this.snap=y,this.type=Fn.OVERWRITE}return c.prototype.operationForChild=function(d){return jn(this.path)?new c(this.source,cn(),this.snap.getImmediateChild(d)):new c(this.source,pr(this.path),this.snap)},c}(),To=function(){function c(d,f,y){this.source=d,this.path=f,this.children=y,this.type=Fn.MERGE}return c.prototype.operationForChild=function(d){if(jn(this.path)){var f=this.children.subtree(new ln(d));return f.isEmpty()?null:f.value?new Oo(this.source,cn(),f.value):new c(this.source,cn(),f)}return(0,X.hu)(Xn(this.path)===d,"Can't get a merge for a child not on the path of the operation"),new c(this.source,pr(this.path),this.children)},c.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},c}(),ai=function(){function c(d,f,y){this.node_=d,this.fullyInitialized_=f,this.filtered_=y}return c.prototype.isFullyInitialized=function(){return this.fullyInitialized_},c.prototype.isFiltered=function(){return this.filtered_},c.prototype.isCompleteForPath=function(d){if(jn(d))return this.isFullyInitialized()&&!this.filtered_;var f=Xn(d);return this.isCompleteForChild(f)},c.prototype.isCompleteForChild=function(d){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(d)},c.prototype.getNode=function(){return this.node_},c}(),Ro=function(d){this.query_=d,this.index_=this.query_._queryParams.getIndex()};function Fi(c,d,f,y,D,L){var Y=y.filter(function(de){return de.type===f});Y.sort(function(de,ye){return function(c,d,f){if(null==d.childName||null==f.childName)throw(0,X.g5)("Should only compare child_ events.");var y=new ir(d.childName,d.snapshotNode),D=new ir(f.childName,f.snapshotNode);return c.index_.compare(y,D)}(c,de,ye)}),Y.forEach(function(de){var ye=function(c,d,f){return"value"===d.type||"child_removed"===d.type||(d.prevName=f.getPredecessorChildName(d.childName,d.snapshotNode,c.index_)),d}(c,de,L);D.forEach(function(Ie){Ie.respondsTo(de.type)&&d.push(Ie.createEvent(ye,c.query_))})})}function ui(c,d){return{eventCache:c,serverCache:d}}function $i(c,d,f,y){return ui(new ai(d,f,y),c.serverCache)}function pi(c,d,f,y){return ui(c.eventCache,new ai(d,f,y))}function vn(c){return c.eventCache.isFullyInitialized()?c.eventCache.getNode():null}function On(c){return c.serverCache.isFullyInitialized()?c.serverCache.getNode():null}var $n,br=function(){function c(d,f){void 0===f&&($n||($n=new bi(tn)),f=$n),this.value=d,this.children=f}return c.fromObject=function(d){var f=new c(null);return Bt(d,function(y,D){f=f.set(new ln(y),D)}),f},c.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},c.prototype.findRootMostMatchingPathAndValue=function(d,f){if(null!=this.value&&f(this.value))return{path:cn(),value:this.value};if(jn(d))return null;var y=Xn(d),D=this.children.get(y);if(null!==D){var L=D.findRootMostMatchingPathAndValue(pr(d),f);return null!=L?{path:sr(new ln(y),L.path),value:L.value}:null}return null},c.prototype.findRootMostValueAndPath=function(d){return this.findRootMostMatchingPathAndValue(d,function(){return!0})},c.prototype.subtree=function(d){if(jn(d))return this;var f=Xn(d),y=this.children.get(f);return null!==y?y.subtree(pr(d)):new c(null)},c.prototype.set=function(d,f){if(jn(d))return new c(f,this.children);var y=Xn(d),L=(this.children.get(y)||new c(null)).set(pr(d),f),Y=this.children.insert(y,L);return new c(this.value,Y)},c.prototype.remove=function(d){if(jn(d))return this.children.isEmpty()?new c(null):new c(null,this.children);var f=Xn(d),y=this.children.get(f);if(y){var D=y.remove(pr(d)),L=void 0;return L=D.isEmpty()?this.children.remove(f):this.children.insert(f,D),null===this.value&&L.isEmpty()?new c(null):new c(this.value,L)}return this},c.prototype.get=function(d){if(jn(d))return this.value;var f=Xn(d),y=this.children.get(f);return y?y.get(pr(d)):null},c.prototype.setTree=function(d,f){if(jn(d))return f;var Y,y=Xn(d),L=(this.children.get(y)||new c(null)).setTree(pr(d),f);return Y=L.isEmpty()?this.children.remove(y):this.children.insert(y,L),new c(this.value,Y)},c.prototype.fold=function(d){return this.fold_(cn(),d)},c.prototype.fold_=function(d,f){var y={};return this.children.inorderTraversal(function(D,L){y[D]=L.fold_(sr(d,D),f)}),f(d,this.value,y)},c.prototype.findOnPath=function(d,f){return this.findOnPath_(d,cn(),f)},c.prototype.findOnPath_=function(d,f,y){var D=!!this.value&&y(f,this.value);if(D)return D;if(jn(d))return null;var L=Xn(d),Y=this.children.get(L);return Y?Y.findOnPath_(pr(d),sr(f,L),y):null},c.prototype.foreachOnPath=function(d,f){return this.foreachOnPath_(d,cn(),f)},c.prototype.foreachOnPath_=function(d,f,y){if(jn(d))return this;this.value&&y(f,this.value);var D=Xn(d),L=this.children.get(D);return L?L.foreachOnPath_(pr(d),sr(f,D),y):new c(null)},c.prototype.foreach=function(d){this.foreach_(cn(),d)},c.prototype.foreach_=function(d,f){this.children.inorderTraversal(function(y,D){D.foreach_(sr(d,y),f)}),this.value&&f(d,this.value)},c.prototype.foreachChild=function(d){this.children.inorderTraversal(function(f,y){y.value&&d(f,y.value)})},c}(),Si=function(){function c(d){this.writeTree_=d}return c.empty=function(){return new c(new br(null))},c}();function Ei(c,d,f){if(jn(d))return new Si(new br(f));var y=c.writeTree_.findRootMostValueAndPath(d);if(null!=y){var D=y.path,L=y.value,Y=Kr(D,d);return L=L.updateChild(Y,f),new Si(c.writeTree_.set(D,L))}var de=new br(f),ye=c.writeTree_.setTree(d,de);return new Si(ye)}function ro(c,d,f){var y=c;return Bt(f,function(D,L){y=Ei(y,sr(d,D),L)}),y}function Qr(c,d){if(jn(d))return Si.empty();var f=c.writeTree_.setTree(d,new br(null));return new Si(f)}function na(c,d){return null!=Ai(c,d)}function Ai(c,d){var f=c.writeTree_.findRootMostValueAndPath(d);return null!=f?c.writeTree_.get(f.path).getChild(Kr(f.path,d)):null}function Bs(c){var d=[],f=c.writeTree_.value;return null!=f?f.isLeafNode()||f.forEachChild(lr,function(y,D){d.push(new ir(y,D))}):c.writeTree_.children.inorderTraversal(function(y,D){null!=D.value&&d.push(new ir(y,D.value))}),d}function Wi(c,d){if(jn(d))return c;var f=Ai(c,d);return new Si(null!=f?new br(f):c.writeTree_.subtree(d))}function ti(c){return c.writeTree_.isEmpty()}function xs(c,d){return ba(cn(),c.writeTree_,d)}function ba(c,d,f){if(null!=d.value)return f.updateChild(c,d.value);var y=null;return d.children.inorderTraversal(function(D,L){".priority"===D?((0,X.hu)(null!==L.value,"Priority writes must always be leaf nodes"),y=L.value):f=ba(sr(c,D),L,f)}),!f.getChild(c).isEmpty()&&null!==y&&(f=f.updateChild(sr(c,".priority"),y)),f}function Ui(c,d){return Ga(d,c)}function Wu(c,d){if(c.snap)return hi(c.path,d);for(var f in c.children)if(c.children.hasOwnProperty(f)&&hi(sr(c.path,f),d))return!0;return!1}function Yu(c){return c.visible}function hu(c,d,f){for(var y=Si.empty(),D=0;D<c.length;++D){var L=c[D];if(d(L)){var Y=L.path,de=void 0;if(L.snap)hi(f,Y)?y=Ei(y,de=Kr(f,Y),L.snap):hi(Y,f)&&(de=Kr(Y,f),y=Ei(y,cn(),L.snap.getChild(de)));else{if(!L.children)throw(0,X.g5)("WriteRecord should have .snap or .children");if(hi(f,Y))y=ro(y,de=Kr(f,Y),L.children);else if(hi(Y,f))if(jn(de=Kr(Y,f)))y=ro(y,cn(),L.children);else{var ye=(0,X.DV)(L.children,Xn(de));if(ye){var Ie=ye.getChild(pr(de));y=Ei(y,cn(),Ie)}}}}}return y}function js(c,d,f,y,D){if(y||D){var ye=Wi(c.visibleWrites,d);return!D&&ti(ye)?f:D||null!=f||na(ye,cn())?xs(hu(c.allWrites,function(At){return(At.visible||D)&&(!y||!~y.indexOf(At.writeId))&&(hi(At.path,d)||hi(d,At.path))},d),f||k.EMPTY_NODE):null}var L=Ai(c.visibleWrites,d);if(null!=L)return L;var Y=Wi(c.visibleWrites,d);return ti(Y)?f:null!=f||na(Y,cn())?xs(Y,f||k.EMPTY_NODE):null}function _t(c,d,f,y){return js(c.writeTree,c.treePath,d,f,y)}function Lt(c,d){return function(c,d,f){var y=k.EMPTY_NODE,D=Ai(c.visibleWrites,d);if(D)return D.isLeafNode()||D.forEachChild(lr,function(de,ye){y=y.updateImmediateChild(de,ye)}),y;if(f){var L=Wi(c.visibleWrites,d);return f.forEachChild(lr,function(de,ye){var Ie=xs(Wi(L,new ln(de)),ye);y=y.updateImmediateChild(de,Ie)}),Bs(L).forEach(function(de){y=y.updateImmediateChild(de.name,de.node)}),y}return Bs(Wi(c.visibleWrites,d)).forEach(function(de){y=y.updateImmediateChild(de.name,de.node)}),y}(c.writeTree,c.treePath,d)}function ss(c,d,f,y){return function(c,d,f,y,D){(0,X.hu)(y||D,"Either existingEventSnap or existingServerSnap must exist");var L=sr(d,f);if(na(c.visibleWrites,L))return null;var Y=Wi(c.visibleWrites,L);return ti(Y)?D.getChild(f):xs(Y,D.getChild(f))}(c.writeTree,c.treePath,d,f,y)}function Sa(c,d){return function(c,d){return Ai(c.visibleWrites,d)}(c.writeTree,sr(c.treePath,d))}function Oi(c,d,f){return function(c,d,f,y){var D=sr(d,f),L=Ai(c.visibleWrites,D);return null!=L?L:y.isCompleteForChild(f)?xs(Wi(c.visibleWrites,D),y.getNode().getImmediateChild(f)):null}(c.writeTree,c.treePath,d,f)}function Cs(c,d){return Ga(sr(c.treePath,d),c.writeTree)}function Ga(c,d){return{treePath:c,writeTree:d}}var Nn=function(){function c(){this.changeMap=new Map}return c.prototype.trackChildChange=function(d){var f=d.type,y=d.childName;(0,X.hu)("child_added"===f||"child_changed"===f||"child_removed"===f,"Only child changes supported for tracking"),(0,X.hu)(".priority"!==y,"Only non-priority child changes can be tracked.");var D=this.changeMap.get(y);if(D){var L=D.type;if("child_added"===f&&"child_removed"===L)this.changeMap.set(y,Qi(y,d.snapshotNode,D.snapshotNode));else if("child_removed"===f&&"child_added"===L)this.changeMap.delete(y);else if("child_removed"===f&&"child_changed"===L)this.changeMap.set(y,Dn(y,D.oldSnap));else if("child_changed"===f&&"child_added"===L)this.changeMap.set(y,ii(y,d.snapshotNode));else{if("child_changed"!==f||"child_changed"!==L)throw(0,X.g5)("Illegal combination of changes: "+d+" occurred after "+D);this.changeMap.set(y,Qi(y,d.snapshotNode,D.oldSnap))}}else this.changeMap.set(y,d)},c.prototype.getChanges=function(){return Array.from(this.changeMap.values())},c}(),an=new(function(){function c(){}return c.prototype.getCompleteChild=function(d){return null},c.prototype.getChildAfterChild=function(d,f,y){return null},c}()),rc=function(){function c(d,f,y){void 0===y&&(y=null),this.writes_=d,this.viewCache_=f,this.optCompleteServerCache_=y}return c.prototype.getCompleteChild=function(d){var f=this.viewCache_.eventCache;if(f.isCompleteForChild(d))return f.getNode().getImmediateChild(d);var y=null!=this.optCompleteServerCache_?new ai(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Oi(this.writes_,d,y)},c.prototype.getChildAfterChild=function(d,f,y){var D=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:On(this.viewCache_),L=function(c,d,f,y,D,L){return function(c,d,f,y,D,L,Y){var de,ye=Wi(c.visibleWrites,d),Ie=Ai(ye,cn());if(null!=Ie)de=Ie;else{if(null==f)return[];de=xs(ye,f)}if((de=de.withIndex(Y)).isEmpty()||de.isLeafNode())return[];for(var Ne=[],ht=Y.getCompare(),At=L?de.getReverseIteratorFrom(y,Y):de.getIteratorFrom(y,Y),Ut=At.getNext();Ut&&Ne.length<D;)0!==ht(Ut,y)&&Ne.push(Ut),Ut=At.getNext();return Ne}(c.writeTree,c.treePath,d,f,y,D,L)}(this.writes_,D,f,1,y,d);return 0===L.length?null:L[0]},c}();function U(c,d,f,y,D,L){var Y=d.eventCache;if(null!=Sa(y,f))return d;var de=void 0,ye=void 0;if(jn(f))if((0,X.hu)(d.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),d.serverCache.isFiltered()){var Ie=On(d),ht=Lt(y,Ie instanceof k?Ie:k.EMPTY_NODE);de=c.filter.updateFullNode(d.eventCache.getNode(),ht,L)}else{var At=_t(y,On(d));de=c.filter.updateFullNode(d.eventCache.getNode(),At,L)}else{var Ut=Xn(f);if(".priority"===Ut){(0,X.hu)(1===Gi(f),"Can't have a priority with additional path components");var rn=Y.getNode(),Kn=ss(y,f,rn,ye=d.serverCache.getNode());de=null!=Kn?c.filter.updatePriority(rn,Kn):Y.getNode()}else{var Wn=pr(f),Cr=void 0;if(Y.isCompleteForChild(Ut)){ye=d.serverCache.getNode();var oo=ss(y,f,Y.getNode(),ye);Cr=null!=oo?Y.getNode().getImmediateChild(Ut).updateChild(Wn,oo):Y.getNode().getImmediateChild(Ut)}else Cr=Oi(y,Ut,d.serverCache);de=null!=Cr?c.filter.updateChild(Y.getNode(),Ut,Cr,Wn,D,L):Y.getNode()}}return $i(d,de,Y.isFullyInitialized()||jn(f),c.filter.filtersNodes())}function R(c,d,f,y,D,L,Y,de){var Ie,ye=d.serverCache,Ne=Y?c.filter:c.filter.getIndexedFilter();if(jn(f))Ie=Ne.updateFullNode(ye.getNode(),y,null);else if(Ne.filtersNodes()&&!ye.isFiltered()){var ht=ye.getNode().updateChild(f,y);Ie=Ne.updateFullNode(ye.getNode(),ht,null)}else{var At=Xn(f);if(!ye.isCompleteForPath(f)&&Gi(f)>1)return d;var Ut=pr(f),Kn=ye.getNode().getImmediateChild(At).updateChild(Ut,y);Ie=".priority"===At?Ne.updatePriority(ye.getNode(),Kn):Ne.updateChild(ye.getNode(),At,Kn,Ut,an,null)}var Wn=pi(d,Ie,ye.isFullyInitialized()||jn(f),Ne.filtersNodes());return U(c,Wn,f,D,new rc(D,Wn,L),de)}function O(c,d,f,y,D,L,Y){var ye,Ie,de=d.eventCache,Ne=new rc(D,d,L);if(jn(f))Ie=c.filter.updateFullNode(d.eventCache.getNode(),y,Y),ye=$i(d,Ie,!0,c.filter.filtersNodes());else{var ht=Xn(f);if(".priority"===ht)Ie=c.filter.updatePriority(d.eventCache.getNode(),y),ye=$i(d,Ie,de.isFullyInitialized(),de.isFiltered());else{var At=pr(f),Ut=de.getNode().getImmediateChild(ht),rn=void 0;if(jn(At))rn=y;else{var Kn=Ne.getCompleteChild(ht);rn=null!=Kn?".priority"===Li(At)&&Kn.getChild(Vi(At)).isEmpty()?Kn:Kn.updateChild(At,y):k.EMPTY_NODE}ye=Ut.equals(rn)?d:$i(d,c.filter.updateChild(de.getNode(),ht,rn,At,Ne,Y),de.isFullyInitialized(),c.filter.filtersNodes())}}return ye}function $(c,d){return c.eventCache.isCompleteForChild(d)}function he(c,d,f){return f.foreach(function(y,D){d=d.updateChild(y,D)}),d}function Ae(c,d,f,y,D,L,Y,de){if(d.serverCache.getNode().isEmpty()&&!d.serverCache.isFullyInitialized())return d;var Ie,ye=d;Ie=jn(f)?y:new br(null).setTree(f,y);var Ne=d.serverCache.getNode();return Ie.children.inorderTraversal(function(ht,At){if(Ne.hasChild(ht)){var rn=he(0,d.serverCache.getNode().getImmediateChild(ht),At);ye=R(c,ye,new ln(ht),rn,D,L,Y,de)}}),Ie.children.inorderTraversal(function(ht,At){var Ut=!d.serverCache.isCompleteForChild(ht)&&void 0===At.value;if(!Ne.hasChild(ht)&&!Ut){var Kn=he(0,d.serverCache.getNode().getImmediateChild(ht),At);ye=R(c,ye,new ln(ht),Kn,D,L,Y,de)}}),ye}var rr=function(){function c(d,f){this.query_=d,this.eventRegistrations_=[];var y=this.query_._queryParams,D=new po(y.getIndex()),L=function(c){return c.loadsAllData()?new po(c.getIndex()):c.hasLimit()?new $u(c):new cu(c)}(y);this.processor_=function(c){return{filter:c}}(L);var Y=f.serverCache,de=f.eventCache,ye=D.updateFullNode(k.EMPTY_NODE,Y.getNode(),null),Ie=L.updateFullNode(k.EMPTY_NODE,de.getNode(),null),Ne=new ai(ye,Y.isFullyInitialized(),D.filtersNodes()),ht=new ai(Ie,de.isFullyInitialized(),L.filtersNodes());this.viewCache_=ui(ht,Ne),this.eventGenerator_=new Ro(this.query_)}return Object.defineProperty(c.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),c}();function Un(c,d){var f=On(c.viewCache_);return f&&(c.query._queryParams.loadsAllData()||!jn(d)&&!f.getImmediateChild(Xn(d)).isEmpty())?f.getChild(d):null}function go(c){return 0===c.eventRegistrations_.length}function mo(c,d,f){var y=[];if(f){(0,X.hu)(null==d,"A cancel should cancel all event registrations.");var D=c.query._path;c.eventRegistrations_.forEach(function(ye){var Ie=ye.createCancelEvent(f,D);Ie&&y.push(Ie)})}if(d){for(var L=[],Y=0;Y<c.eventRegistrations_.length;++Y){var de=c.eventRegistrations_[Y];if(de.matches(d)){if(d.hasAnyCallback()){L=L.concat(c.eventRegistrations_.slice(Y+1));break}}else L.push(de)}c.eventRegistrations_=L}else c.eventRegistrations_=[];return y}function Hs(c,d,f,y){d.type===Fn.MERGE&&null!==d.source.queryId&&((0,X.hu)(On(c.viewCache_),"We should always have a full cache before handling merges"),(0,X.hu)(vn(c.viewCache_),"Missing event cache, even though we have a server cache"));var D=c.viewCache_,L=function(c,d,f,y,D){var Y,de,L=new Nn;if(f.type===Fn.OVERWRITE){var ye=f;ye.source.fromUser?Y=O(c,d,ye.path,ye.snap,y,D,L):((0,X.hu)(ye.source.fromServer,"Unknown source."),de=ye.source.tagged||d.serverCache.isFiltered()&&!jn(ye.path),Y=R(c,d,ye.path,ye.snap,y,D,de,L))}else if(f.type===Fn.MERGE){var Ie=f;Ie.source.fromUser?Y=function(c,d,f,y,D,L,Y){var de=d;return y.foreach(function(ye,Ie){var Ne=sr(f,ye);$(d,Xn(Ne))&&(de=O(c,de,Ne,Ie,D,L,Y))}),y.foreach(function(ye,Ie){var Ne=sr(f,ye);$(d,Xn(Ne))||(de=O(c,de,Ne,Ie,D,L,Y))}),de}(c,d,Ie.path,Ie.children,y,D,L):((0,X.hu)(Ie.source.fromServer,"Unknown source."),de=Ie.source.tagged||d.serverCache.isFiltered(),Y=Ae(c,d,Ie.path,Ie.children,y,D,de,L))}else if(f.type===Fn.ACK_USER_WRITE){var Ne=f;Y=Ne.revert?function(c,d,f,y,D,L){var Y;if(null!=Sa(y,f))return d;var de=new rc(y,d,D),ye=d.eventCache.getNode(),Ie=void 0;if(jn(f)||".priority"===Xn(f)){var Ne=void 0;if(d.serverCache.isFullyInitialized())Ne=_t(y,On(d));else{var ht=d.serverCache.getNode();(0,X.hu)(ht instanceof k,"serverChildren would be complete if leaf node"),Ne=Lt(y,ht)}Ie=c.filter.updateFullNode(ye,Ne=Ne,L)}else{var At=Xn(f),Ut=Oi(y,At,d.serverCache);null==Ut&&d.serverCache.isCompleteForChild(At)&&(Ut=ye.getImmediateChild(At)),(Ie=null!=Ut?c.filter.updateChild(ye,At,Ut,pr(f),de,L):d.eventCache.getNode().hasChild(At)?c.filter.updateChild(ye,At,k.EMPTY_NODE,pr(f),de,L):ye).isEmpty()&&d.serverCache.isFullyInitialized()&&(Y=_t(y,On(d))).isLeafNode()&&(Ie=c.filter.updateFullNode(Ie,Y,L))}return Y=d.serverCache.isFullyInitialized()||null!=Sa(y,cn()),$i(d,Ie,Y,c.filter.filtersNodes())}(c,d,Ne.path,y,D,L):function(c,d,f,y,D,L,Y){if(null!=Sa(D,f))return d;var de=d.serverCache.isFiltered(),ye=d.serverCache;if(null!=y.value){if(jn(f)&&ye.isFullyInitialized()||ye.isCompleteForPath(f))return R(c,d,f,ye.getNode().getChild(f),D,L,de,Y);if(jn(f)){var Ie=new br(null);return ye.getNode().forEachChild(Pi,function(ht,At){Ie=Ie.set(new ln(ht),At)}),Ae(c,d,f,Ie,D,L,de,Y)}return d}var Ne=new br(null);return y.foreach(function(ht,At){var Ut=sr(f,ht);ye.isCompleteForPath(Ut)&&(Ne=Ne.set(ht,ye.getNode().getChild(Ut)))}),Ae(c,d,f,Ne,D,L,de,Y)}(c,d,Ne.path,Ne.affectedTree,y,D,L)}else{if(f.type!==Fn.LISTEN_COMPLETE)throw(0,X.g5)("Unknown operation type: "+f.type);Y=function(c,d,f,y,D){var L=d.serverCache;return U(c,pi(d,L.getNode(),L.isFullyInitialized()||jn(f),L.isFiltered()),f,y,an,D)}(c,d,f.path,y,L)}var ht=L.getChanges();return function(c,d,f){var y=d.eventCache;if(y.isFullyInitialized()){var D=y.getNode().isLeafNode()||y.getNode().isEmpty(),L=vn(c);(f.length>0||!c.eventCache.isFullyInitialized()||D&&!y.getNode().equals(L)||!y.getNode().getPriority().equals(L.getPriority()))&&f.push(Gr(vn(d)))}}(d,Y,ht),{viewCache:Y,changes:ht}}(c.processor_,D,d,f,y);return function(c,d){(0,X.hu)(d.eventCache.getNode().isIndexed(c.filter.getIndex()),"Event snap not indexed"),(0,X.hu)(d.serverCache.getNode().isIndexed(c.filter.getIndex()),"Server snap not indexed")}(c.processor_,L.viewCache),(0,X.hu)(L.viewCache.serverCache.isFullyInitialized()||!D.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),c.viewCache_=L.viewCache,Yo(c,L.changes,L.viewCache.eventCache.getNode(),null)}function Yo(c,d,f,y){return function(c,d,f,y){var D=[],L=[];return d.forEach(function(Y){"child_changed"===Y.type&&c.index_.indexedValueChanged(Y.oldSnap,Y.snapshotNode)&&L.push(function(c,d){return{type:"child_moved",snapshotNode:d,childName:c}}(Y.childName,Y.snapshotNode))}),Fi(c,D,"child_removed",d,y,f),Fi(c,D,"child_added",d,y,f),Fi(c,D,"child_moved",L,y,f),Fi(c,D,"child_changed",d,y,f),Fi(c,D,"value",d,y,f),D}(c.eventGenerator_,d,f,y?[y]:c.eventRegistrations_)}var pu,mu,qn=function(){this.views=new Map};function Za(c,d,f,y){var D,L,Y=d.source.queryId;if(null!==Y){var de=c.views.get(Y);return(0,X.hu)(null!=de,"SyncTree gave us an op for an invalid query."),Hs(de,d,f,y)}var ye=[];try{for(var Ie=(0,C.XA)(c.views.values()),Ne=Ie.next();!Ne.done;Ne=Ie.next())ye=ye.concat(Hs(de=Ne.value,d,f,y))}catch(ht){D={error:ht}}finally{try{Ne&&!Ne.done&&(L=Ie.return)&&L.call(Ie)}finally{if(D)throw D.error}}return ye}function hd(c,d,f,y,D){var Y=c.views.get(d._queryIdentifier);if(!Y){var de=_t(f,D?y:null),ye=!1;de?ye=!0:y instanceof k?(de=Lt(f,y),ye=!1):(de=k.EMPTY_NODE,ye=!1);var Ie=ui(new ai(de,ye,!1),new ai(y,D,!1));return new rr(d,Ie)}return Y}function ic(c){var d,f,y=[];try{for(var D=(0,C.XA)(c.views.values()),L=D.next();!L.done;L=D.next()){var Y=L.value;Y.query._queryParams.loadsAllData()||y.push(Y)}}catch(de){d={error:de}}finally{try{L&&!L.done&&(f=D.return)&&f.call(D)}finally{if(d)throw d.error}}return y}function Aa(c,d){var f,y,D=null;try{for(var L=(0,C.XA)(c.views.values()),Y=L.next();!Y.done;Y=L.next())D=D||Un(Y.value,d)}catch(ye){f={error:ye}}finally{try{Y&&!Y.done&&(y=L.return)&&y.call(L)}finally{if(f)throw f.error}}return D}function fd(c,d){return d._queryParams.loadsAllData()?Gs(c):c.views.get(d._queryIdentifier)}function Qu(c,d){return null!=fd(c,d)}function Ia(c){return null!=Gs(c)}function Gs(c){var d,f;try{for(var y=(0,C.XA)(c.views.values()),D=y.next();!D.done;D=y.next()){var L=D.value;if(L.query._queryParams.loadsAllData())return L}}catch(Y){d={error:Y}}finally{try{D&&!D.done&&(f=y.return)&&f.call(y)}finally{if(d)throw d.error}}return null}var Sr=1,oh=function(d){this.listenProvider_=d,this.syncPointTree_=new br(null),this.pendingWriteTree_={visibleWrites:Si.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function oc(c,d,f,y,D){return function(c,d,f,y,D){(0,X.hu)(y>c.lastWriteId,"Stacking an older write on top of newer ones"),void 0===D&&(D=!0),c.allWrites.push({path:d,snap:f,writeId:y,visible:D}),D&&(c.visibleWrites=Ei(c.visibleWrites,d,f)),c.lastWriteId=y}(c.pendingWriteTree_,d,f,y,D),D?Ps(c,new Oo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},d,f)):[]}function _o(c,d,f){void 0===f&&(f=!1);var y=function(c,d){for(var f=0;f<c.allWrites.length;f++){var y=c.allWrites[f];if(y.writeId===d)return y}return null}(c.pendingWriteTree_,d);if(function(c,d){var f=c.allWrites.findIndex(function(Ie){return Ie.writeId===d});(0,X.hu)(f>=0,"removeWrite called with nonexistent writeId.");var y=c.allWrites[f];c.allWrites.splice(f,1);for(var D=y.visible,L=!1,Y=c.allWrites.length-1;D&&Y>=0;){var de=c.allWrites[Y];de.visible&&(Y>=f&&Wu(de,y.path)?D=!1:hi(y.path,de.path)&&(L=!0)),Y--}return!!D&&(L?(function(c){c.visibleWrites=hu(c.allWrites,Yu,cn()),c.lastWriteId=c.allWrites.length>0?c.allWrites[c.allWrites.length-1].writeId:-1}(c),!0):(y.snap?c.visibleWrites=Qr(c.visibleWrites,y.path):Bt(y.children,function(Ie){c.visibleWrites=Qr(c.visibleWrites,sr(y.path,Ie))}),!0))}(c.pendingWriteTree_,d)){var L=new br(null);return null!=y.snap?L=L.set(cn(),!0):Bt(y.children,function(Y){L=L.set(new ln(Y),!0)}),Ps(c,new Ji(y.path,L,f))}return[]}function qs(c,d,f){return Ps(c,new Oo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,f))}function Vc(c,d,f,y){var D=d._path,L=c.syncPointTree_.get(D),Y=[];if(L&&("default"===d._queryIdentifier||Qu(L,d))){var de=function(c,d,f,y){var D,L,Y=d._queryIdentifier,de=[],ye=[],Ie=Ia(c);if("default"===Y)try{for(var Ne=(0,C.XA)(c.views.entries()),ht=Ne.next();!ht.done;ht=Ne.next()){var rn,At=(0,C.CR)(ht.value,2),Ut=At[0];ye=ye.concat(mo(rn=At[1],f,y)),go(rn)&&(c.views.delete(Ut),rn.query._queryParams.loadsAllData()||de.push(rn.query))}}catch(Kn){D={error:Kn}}finally{try{ht&&!ht.done&&(L=Ne.return)&&L.call(Ne)}finally{if(D)throw D.error}}else(rn=c.views.get(Y))&&(ye=ye.concat(mo(rn,f,y)),go(rn)&&(c.views.delete(Y),rn.query._queryParams.loadsAllData()||de.push(rn.query)));return Ie&&!Ia(c)&&de.push(new((0,X.hu)(pu,"Reference.ts has not been loaded"),pu)(d._repo,d._path)),{removed:de,events:ye}}(L,d,f,y);(function(c){return 0===c.views.size})(L)&&(c.syncPointTree_=c.syncPointTree_.remove(D));var ye=de.removed;Y=de.events;var Ie=-1!==ye.findIndex(function(oo){return oo._queryParams.loadsAllData()}),Ne=c.syncPointTree_.findOnPath(D,function(oo,Na){return Ia(Na)});if(Ie&&!Ne){var ht=c.syncPointTree_.subtree(D);if(!ht.isEmpty())for(var At=function(c){return c.fold(function(d,f,y){if(f&&Ia(f))return[Gs(f)];var L=[];return f&&(L=ic(f)),Bt(y,function(Y,de){L=L.concat(de)}),L})}(ht),Ut=0;Ut<At.length;++Ut){var rn=At[Ut],Kn=rn.query,Wn=Uc(c,rn);c.listenProvider_.startListening(Ma(Kn),Xu(c,Kn),Wn.hashFn,Wn.onComplete)}}!Ne&&ye.length>0&&!y&&(Ie?c.listenProvider_.stopListening(Ma(d),null):ye.forEach(function(oo){var Na=c.queryToTagMap.get(sc(oo));c.listenProvider_.stopListening(Ma(oo),Na)})),function(c,d){for(var f=0;f<d.length;++f){var y=d[f];if(!y._queryParams.loadsAllData()){var D=sc(y),L=c.queryToTagMap.get(D);c.queryToTagMap.delete(D),c.tagToQueryMap.delete(L)}}}(c,ye)}return Y}function sh(c,d,f){var y=d._path,D=null,L=!1;c.syncPointTree_.foreachOnPath(y,function(Kn,Wn){var Cr=Kr(Kn,y);D=D||Aa(Wn,Cr),L=L||Ia(Wn)});var de,Y=c.syncPointTree_.get(y);Y?(L=L||Ia(Y),D=D||Aa(Y,cn())):(Y=new qn,c.syncPointTree_=c.syncPointTree_.set(y,Y)),null!=D?de=!0:(de=!1,D=k.EMPTY_NODE,c.syncPointTree_.subtree(y).foreachChild(function(Kn,Wn){var Cr=Aa(Wn,cn());Cr&&(D=D.updateImmediateChild(Kn,Cr))}));var Ie=Qu(Y,d);if(!Ie&&!d._queryParams.loadsAllData()){var Ne=sc(d);(0,X.hu)(!c.queryToTagMap.has(Ne),"View does not exist, but we have a tag");var ht=Sr++;c.queryToTagMap.set(Ne,ht),c.tagToQueryMap.set(ht,Ne)}var Ut=function(c,d,f,y,D,L){var Y=hd(c,d,y,D,L);return c.views.has(d._queryIdentifier)||c.views.set(d._queryIdentifier,Y),function(c,d){c.eventRegistrations_.push(d)}(Y,f),function(c,d){var f=c.viewCache_.eventCache,y=[];return f.getNode().isLeafNode()||f.getNode().forEachChild(lr,function(L,Y){y.push(ii(L,Y))}),f.isFullyInitialized()&&y.push(Gr(f.getNode())),Yo(c,y,f.getNode(),d)}(Y,f)}(Y,d,f,Ui(c.pendingWriteTree_,y),D,de);if(!Ie&&!L){var rn=fd(Y,d);Ut=Ut.concat(function(c,d,f){var y=d._path,D=Xu(c,d),L=Uc(c,f),Y=c.listenProvider_.startListening(Ma(d),D,L.hashFn,L.onComplete),de=c.syncPointTree_.subtree(y);if(D)(0,X.hu)(!Ia(de.value),"If we're adding a query, it shouldn't be shadowed");else for(var ye=de.fold(function(ht,At,Ut){if(!jn(ht)&&At&&Ia(At))return[Gs(At).query];var rn=[];return At&&(rn=rn.concat(ic(At).map(function(Kn){return Kn.query}))),Bt(Ut,function(Kn,Wn){rn=rn.concat(Wn)}),rn}),Ie=0;Ie<ye.length;++Ie){var Ne=ye[Ie];c.listenProvider_.stopListening(Ma(Ne),Xu(c,Ne))}return Y}(c,d,rn))}return Ut}function Ol(c,d,f){var D=c.pendingWriteTree_,L=c.syncPointTree_.findOnPath(d,function(Y,de){var Ie=Aa(de,Kr(Y,d));if(Ie)return Ie});return js(D,d,L,f,!0)}function Ps(c,d){return oa(d,c.syncPointTree_,null,Ui(c.pendingWriteTree_,cn()))}function oa(c,d,f,y){if(jn(c.path))return Ju(c,d,f,y);var D=d.get(cn());null==f&&null!=D&&(f=Aa(D,cn()));var L=[],Y=Xn(c.path),de=c.operationForChild(Y),ye=d.children.get(Y);if(ye&&de){var Ie=f?f.getImmediateChild(Y):null,Ne=Cs(y,Y);L=L.concat(oa(de,ye,Ie,Ne))}return D&&(L=L.concat(Za(D,c,y,f))),L}function Ju(c,d,f,y){var D=d.get(cn());null==f&&null!=D&&(f=Aa(D,cn()));var L=[];return d.children.inorderTraversal(function(Y,de){var ye=f?f.getImmediateChild(Y):null,Ie=Cs(y,Y),Ne=c.operationForChild(Y);Ne&&(L=L.concat(Ju(Ne,de,ye,Ie)))}),D&&(L=L.concat(Za(D,c,y,f))),L}function Uc(c,d){var f=d.query,y=Xu(c,f);return{hashFn:function(){return(function(c){return c.viewCache_.serverCache.getNode()}(d)||k.EMPTY_NODE).hash()},onComplete:function(D){if("ok"===D)return y?function(c,d,f){var y=Zs(c,f);if(y){var D=_u(y),L=D.path,Y=D.queryId,de=Kr(L,d);return yu(c,L,new si(Vr(Y),de))}return[]}(c,f._path,y):function(c,d){return Ps(c,new si({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d))}(c,f._path);var L=function(c,d){var f="Unknown Error";"too_big"===c?f="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===c?f="Client doesn't have permission to access the desired data.":"unavailable"===c&&(f="The service is unavailable");var y=new Error(c+" at "+d._path.toString()+": "+f);return y.code=c.toUpperCase(),y}(D,f);return Vc(c,f,null,L)}}}function Xu(c,d){var f=sc(d);return c.queryToTagMap.get(f)}function sc(c){return c._path.toString()+"$"+c._queryIdentifier}function Zs(c,d){return c.tagToQueryMap.get(d)}function _u(c){var d=c.indexOf("$");return(0,X.hu)(-1!==d&&d<c.length-1,"Bad queryKey."),{queryId:c.substr(d+1),path:new ln(c.substr(0,d))}}function yu(c,d,f){var y=c.syncPointTree_.get(d);return(0,X.hu)(y,"Missing sync point for query tag that we're tracking"),Za(y,f,Ui(c.pendingWriteTree_,d),null)}function Ma(c){return c._queryParams.loadsAllData()&&!c._queryParams.isDefault()?new((0,X.hu)(mu,"Reference.ts has not been loaded"),mu)(c._repo,c._path):c}var Oa=function(){function c(d){this.node_=d}return c.prototype.getImmediateChild=function(d){return new c(this.node_.getImmediateChild(d))},c.prototype.node=function(){return this.node_},c}(),Bo=function(){function c(d,f){this.syncTree_=d,this.path_=f}return c.prototype.getImmediateChild=function(d){var f=sr(this.path_,d);return new c(this.syncTree_,f)},c.prototype.node=function(){return Ol(this.syncTree_,this.path_)},c}(),Rl=function(c,d,f){return c&&"object"==typeof c?((0,X.hu)(".sv"in c,"Unexpected leaf node or priority contents"),"string"==typeof c[".sv"]?Hc(c[".sv"],d,f):"object"==typeof c[".sv"]?ac(c[".sv"],d):void(0,X.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2))):c},Hc=function(c,d,f){switch(c){case"timestamp":return f.timestamp;default:(0,X.hu)(!1,"Unexpected server value: "+c)}},ac=function(c,d,f){c.hasOwnProperty("increment")||(0,X.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2));var y=c.increment;"number"!=typeof y&&(0,X.hu)(!1,"Unexpected increment value: "+y);var D=d.node();if((0,X.hu)(null!=D,"Expected ChildrenNode.EMPTY_NODE for nulls"),!D.isLeafNode())return y;var Y=D.getValue();return"number"!=typeof Y?y:Y+y},nl=function(c,d,f,y){return Wa(d,new Bo(f,c),y)},rl=function(c,d,f){return Wa(c,new Oa(d),f)};function Wa(c,d,f){var L,y=c.getPriority().val(),D=Rl(y,d.getImmediateChild(".priority"),f);if(c.isLeafNode()){var Y=c,de=Rl(Y.getValue(),d,f);return de!==Y.getValue()||D!==Y.getPriority().val()?new ei(de,rt(D)):c}var ye=c;return L=ye,D!==ye.getPriority().val()&&(L=L.updatePriority(new ei(D))),ye.forEachChild(lr,function(Ie,Ne){var ht=Wa(Ne,d.getImmediateChild(Ie),f);ht!==Ne&&(L=L.updateImmediateChild(Ie,ht))}),L}var Ra=function(d,f,y){void 0===d&&(d=""),void 0===f&&(f=null),void 0===y&&(y={children:{},childCount:0}),this.name=d,this.parent=f,this.node=y};function xl(c,d){for(var f=d instanceof ln?d:new ln(d),y=c,D=Xn(f);null!==D;){var L=(0,X.DV)(y.node.children,D)||{children:{},childCount:0};y=new Ra(D,y,L),D=Xn(f=pr(f))}return y}function gi(c){return c.node.value}function bu(c,d){c.node.value=d,Du(c)}function uc(c){return c.node.childCount>0}function xa(c,d){Bt(c.node.children,function(f,y){d(new Ra(f,c,y))})}function Eu(c,d,f,y){f&&!y&&d(c),xa(c,function(D){Eu(D,d,!0,y)}),f&&y&&d(c)}function wu(c){return new ln(null===c.parent?c.name:wu(c.parent)+"/"+c.name)}function Du(c){null!==c.parent&&function(c,d,f){var y=function(c){return void 0===gi(c)&&!uc(c)}(f),D=(0,X.r3)(c.node.children,d);y&&D?(delete c.node.children[d],c.node.childCount--,Du(c)):!y&&!D&&(c.node.children[d]=f.node,c.node.childCount++,Du(c))}(c.parent,c.name,c)}var as=/[\[\].#$\/\u0000-\u001F\u007F]/,il=/[\[\].#$\u0000-\u001F\u007F]/,$s=10485760,Ka=function(c){return"string"==typeof c&&0!==c.length&&!as.test(c)},Gc=function(c){return"string"==typeof c&&0!==c.length&&!il.test(c)},Fs=function(c){return null===c||"string"==typeof c||"number"==typeof c&&!ot(c)||c&&"object"==typeof c&&(0,X.r3)(c,".sv")},fs=function(c,d,f,y){y&&void 0===d||Pl((0,X.gK)(c,"value"),d,f)},Pl=function(c,d,f){var y=f instanceof ln?new qi(f,c):f;if(void 0===d)throw new Error(c+"contains undefined "+jr(y));if("function"==typeof d)throw new Error(c+"contains a function "+jr(y)+" with contents = "+d.toString());if(ot(d))throw new Error(c+"contains "+d.toString()+" "+jr(y));if("string"==typeof d&&d.length>$s/3&&(0,X.ug)(d)>$s)throw new Error(c+"contains a string greater than "+$s+" utf8 bytes "+jr(y)+" ('"+d.substring(0,50)+"...')");if(d&&"object"==typeof d){var D=!1,L=!1;if(Bt(d,function(Y,de){if(".value"===Y)D=!0;else if(".priority"!==Y&&".sv"!==Y&&(L=!0,!Ka(Y)))throw new Error(c+" contains an invalid key ("+Y+") "+jr(y)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(c,d){c.parts_.length>0&&(c.byteLength_+=1),c.parts_.push(d),c.byteLength_+=(0,X.ug)(d),ds(c)})(y,Y),Pl(c,de,y),function(c){var d=c.parts_.pop();c.byteLength_-=(0,X.ug)(d),c.parts_.length>0&&(c.byteLength_-=1)}(y)}),D&&L)throw new Error(c+' contains ".value" child '+jr(y)+" in addition to actual children.")}},Su=function(c,d,f,y){if(!y||void 0!==d){var D=(0,X.gK)(c,"values");if(!d||"object"!=typeof d||Array.isArray(d))throw new Error(D+" must be an object containing the children to replace.");var L=[];Bt(d,function(Y,de){var ye=new ln(Y);if(Pl(D,de,sr(f,ye)),".priority"===Li(ye)&&!Fs(de))throw new Error(D+"contains an invalid value for '"+ye.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");L.push(ye)}),function(c,d){var f,y;for(f=0;f<d.length;f++)for(var D=$r(y=d[f]),L=0;L<D.length;L++)if((".priority"!==D[L]||L!==D.length-1)&&!Ka(D[L]))throw new Error(c+"contains an invalid key ("+D[L]+") in path "+y.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');d.sort(Mr);var Y=null;for(f=0;f<d.length;f++){if(y=d[f],null!==Y&&hi(Y,y))throw new Error(c+"contains a path "+Y.toString()+" that is ancestor of another path "+y.toString());Y=y}}(D,L)}},sa=function(c,d,f){if(!f||void 0!==d){if(ot(d))throw new Error((0,X.gK)(c,"priority")+"is "+d.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Fs(d))throw new Error((0,X.gK)(c,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},md=function(c,d,f){if(!f||void 0!==d)switch(d){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,X.gK)(c,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Qa=function(c,d,f,y){if(!(y&&void 0===f||Ka(f)))throw new Error((0,X.gK)(c,d)+'was an invalid key = "'+f+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ws=function(c,d,f,y){if(!(y&&void 0===f||Gc(f)))throw new Error((0,X.gK)(c,d)+'was an invalid path = "'+f+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ws=function(c,d){if(".info"===Xn(d))throw new Error(c+" failed = Can't modify data under /.info/")},zc=function(c,d){var f=d.path.toString();if("string"!=typeof d.repoInfo.host||0===d.repoInfo.host.length||!Ka(d.repoInfo.namespace)&&"localhost"!==d.repoInfo.host.split(":")[0]||0!==f.length&&!function(c){return c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Gc(c)}(f))throw new Error((0,X.gK)(c,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},yo=function(c,d,f,y){if((!y||void 0!==f)&&"boolean"!=typeof f)throw new Error((0,X.gK)(c,d)+"must be a boolean.")},Jr=function(){this.eventLists_=[],this.recursionDepth_=0};function aa(c,d){for(var f=null,y=0;y<d.length;y++){var D=d[y],L=D.getPath();null!==f&&!zi(L,f.path)&&(c.eventLists_.push(f),f=null),null===f&&(f={events:[],path:L}),f.events.push(D)}f&&c.eventLists_.push(f)}function Ja(c,d,f){aa(c,f),qc(c,function(y){return zi(y,d)})}function jo(c,d,f){aa(c,f),qc(c,function(y){return hi(y,d)||hi(d,y)})}function qc(c,d){c.recursionDepth_++;for(var f=!0,y=0;y<c.eventLists_.length;y++){var D=c.eventLists_[y];D&&(d(D.path)?(Zc(c.eventLists_[y]),c.eventLists_[y]=null):f=!1)}f&&(c.eventLists_=[]),c.recursionDepth_--}function Zc(c){for(var d=0;d<c.events.length;d++){var f=c.events[d];if(null!==f){c.events[d]=null;var y=f.getEventRunner();St&&dt("event: "+f.toString()),Jn(y)}}}var Qo="repo_interrupt",Pa=function(){function c(d,f,y,D){this.repoInfo_=d,this.forceRestClient_=f,this.authTokenProvider_=y,this.appCheckProvider_=D,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Jr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ae(),this.transactionQueueTree_=new Ra,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return c.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},c}();function Iu(c){var f=c.infoData_.getNode(new ln(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+f}function Mu(c){return function(c){return(c=c||{}).timestamp=c.timestamp||(new Date).getTime(),c}({timestamp:Iu(c)})}function Io(c,d,f,y,D){c.dataUpdateCount++;var L=new ln(d);f=c.interceptServerDataCallback_?c.interceptServerDataCallback_(d,f):f;var Y=[];if(D)if(y){var de=(0,X.UI)(f,function(At){return rt(At)});Y=function(c,d,f,y){var D=Zs(c,y);if(D){var L=_u(D),Y=L.path,de=L.queryId,ye=Kr(Y,d),Ie=br.fromObject(f);return yu(c,Y,new To(Vr(de),ye,Ie))}return[]}(c.serverSyncTree_,L,de,D)}else{var ye=rt(f);Y=function(c,d,f,y){var D=Zs(c,y);if(null!=D){var L=_u(D),Y=L.path,de=L.queryId,ye=Kr(Y,d);return yu(c,Y,new Oo(Vr(de),ye,f))}return[]}(c.serverSyncTree_,L,ye,D)}else if(y){var Ie=(0,X.UI)(f,function(At){return rt(At)});Y=function(c,d,f){var y=br.fromObject(f);return Ps(c,new To({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,y))}(c.serverSyncTree_,L,Ie)}else{var Ne=rt(f);Y=qs(c.serverSyncTree_,L,Ne)}var ht=L;Y.length>0&&(ht=Ou(c,L)),jo(c.eventQueue_,ht,Y)}function lc(c,d){cc(c,"connected",d),!1===d&&function(c){kl(c,"onDisconnectEvents");var d=Mu(c),f=ae();Le(c.onDisconnect_,cn(),function(D,L){var Y=nl(D,L,c.serverSyncTree_,d);be(f,D,Y)});var y=[];Le(f,cn(),function(D,L){y=y.concat(qs(c.serverSyncTree_,D,L));var Y=Ru(c,D);Ou(c,Y)}),c.onDisconnect_=ae(),jo(c.eventQueue_,cn(),y)}(c)}function cc(c,d,f){var y=new ln("/.info/"+d),D=rt(f);c.infoData_.updateSnapshot(y,D);var L=qs(c.infoSyncTree_,y,D);jo(c.eventQueue_,y,L)}function Fl(c){return c.nextWriteId_++}function ua(c,d,f,y,D){kl(c,"set",{path:d.toString(),value:f,priority:y});var L=Mu(c),Y=rt(f,y),de=Ol(c.serverSyncTree_,d),ye=rl(Y,de,L),Ie=Fl(c),Ne=oc(c.serverSyncTree_,d,ye,Ie,!0);aa(c.eventQueue_,Ne),c.server_.put(d.toString(),Y.val(!0),function(At,Ut){var rn="ok"===At;rn||wt("set at "+d+" failed: "+At);var Kn=_o(c.serverSyncTree_,Ie,!rn);jo(c.eventQueue_,d,Kn),Jo(0,D,At,Ut)});var ht=Ru(c,d);Ou(c,ht),jo(c.eventQueue_,ht,[])}function vd(c,d,f){c.server_.onDisconnectCancel(d.toString(),function(y,D){"ok"===y&&Pe(c.onDisconnect_,d),Jo(0,f,y,D)})}function dc(c,d,f,y){var D=rt(f);c.server_.onDisconnectPut(d.toString(),D.val(!0),function(L,Y){"ok"===L&&be(c.onDisconnect_,d,D),Jo(0,y,L,Y)})}function Nl(c,d,f){var y;y=".info"===Xn(d._path)?Vc(c.infoSyncTree_,d,f):Vc(c.serverSyncTree_,d,f),Ja(c.eventQueue_,d._path,y)}function $c(c){c.persistentConnection_&&c.persistentConnection_.interrupt(Qo)}function kl(c){for(var d=[],f=1;f<arguments.length;f++)d[f-1]=arguments[f];var y="";c.persistentConnection_&&(y=c.persistentConnection_.id+":"),dt.apply(void 0,(0,C.ev)([y],(0,C.CR)(d)))}function Jo(c,d,f,y){d&&Jn(function(){if("ok"===f)d(null);else{var D=(f||"error").toUpperCase(),L=D;y&&(L+=": "+y);var Y=new Error(L);Y.code=D,d(Y)}})}function Ds(c,d,f){return Ol(c.serverSyncTree_,d,f)||k.EMPTY_NODE}function Bi(c,d){if(void 0===d&&(d=c.transactionQueueTree_),d||la(c,d),gi(d)){var f=Wc(c,d);(0,X.hu)(f.length>0,"Sending zero length transaction queue"),f.every(function(D){return 0===D.status})&&function(c,d,f){for(var y=f.map(function(At){return At.currentWriteId}),D=Ds(c,d,y),L=D,Y=D.hash(),de=0;de<f.length;de++){var ye=f[de];(0,X.hu)(0===ye.status,"tryToSendTransactionQueue_: items in queue should all be run."),ye.status=1,ye.retryCount++;var Ie=Kr(d,ye.path);L=L.updateChild(Ie,ye.currentOutputSnapshotRaw)}var Ne=L.val(!0),ht=d;c.server_.put(ht.toString(),Ne,function(At){kl(c,"transaction put response",{path:ht.toString(),status:At});var Ut=[];if("ok"===At){for(var rn=[],Kn=function(Cr){f[Cr].status=2,Ut=Ut.concat(_o(c.serverSyncTree_,f[Cr].currentWriteId)),f[Cr].onComplete&&rn.push(function(){return f[Cr].onComplete(null,!0,f[Cr].currentOutputSnapshotResolved)}),f[Cr].unwatcher()},Wn=0;Wn<f.length;Wn++)Kn(Wn);for(la(c,xl(c.transactionQueueTree_,d)),Bi(c,c.transactionQueueTree_),jo(c.eventQueue_,d,Ut),Wn=0;Wn<rn.length;Wn++)Jn(rn[Wn])}else{if("datastale"===At)for(Wn=0;Wn<f.length;Wn++)f[Wn].status=3===f[Wn].status?4:0;else for(wt("transaction at "+ht.toString()+" failed: "+At),Wn=0;Wn<f.length;Wn++)f[Wn].status=4,f[Wn].abortReason=At;Ou(c,d)}},Y)}(c,wu(d),f)}else uc(d)&&xa(d,function(D){Bi(c,D)})}function Ou(c,d){var f=Fa(c,d),y=wu(f);return function(c,d,f){if(0!==d.length){for(var y=[],D=[],Y=d.filter(function(Ie){return 0===Ie.status}).map(function(Ie){return Ie.currentWriteId}),de=function(Ie){var Ut,Ne=d[Ie],ht=Kr(f,Ne.path),At=!1;if((0,X.hu)(null!==ht,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Ne.status)At=!0,Ut=Ne.abortReason,D=D.concat(_o(c.serverSyncTree_,Ne.currentWriteId,!0));else if(0===Ne.status)if(Ne.retryCount>=25)At=!0,Ut="maxretry",D=D.concat(_o(c.serverSyncTree_,Ne.currentWriteId,!0));else{var rn=Ds(c,Ne.path,Y);Ne.currentInputSnapshot=rn;var Kn=d[Ie].update(rn.val());if(void 0!==Kn){Pl("transaction failed: Data returned ",Kn,Ne.path);var Wn=rt(Kn);"object"==typeof Kn&&null!=Kn&&(0,X.r3)(Kn,".priority")||(Wn=Wn.updatePriority(rn.getPriority()));var oo=Ne.currentWriteId,Na=Mu(c),Hl=rl(Wn,rn,Na);Ne.currentOutputSnapshotRaw=Wn,Ne.currentOutputSnapshotResolved=Hl,Ne.currentWriteId=Fl(c),Y.splice(Y.indexOf(oo),1),D=(D=D.concat(oc(c.serverSyncTree_,Ne.path,Hl,Ne.currentWriteId,Ne.applyLocally))).concat(_o(c.serverSyncTree_,oo,!0))}else At=!0,Ut="nodata",D=D.concat(_o(c.serverSyncTree_,Ne.currentWriteId,!0))}jo(c.eventQueue_,f,D),D=[],At&&(d[Ie].status=2,setTimeout(d[Ie].unwatcher,Math.floor(0)),d[Ie].onComplete&&y.push("nodata"===Ut?function(){return d[Ie].onComplete(null,!1,d[Ie].currentInputSnapshot)}:function(){return d[Ie].onComplete(new Error(Ut),!1,null)}))},ye=0;ye<d.length;ye++)de(ye);for(la(c,c.transactionQueueTree_),ye=0;ye<y.length;ye++)Jn(y[ye]);Bi(c,c.transactionQueueTree_)}}(c,Wc(c,f),y),y}function Fa(c,d){var f,y=c.transactionQueueTree_;for(f=Xn(d);null!==f&&void 0===gi(y);)y=xl(y,f),f=Xn(d=pr(d));return y}function Wc(c,d){var f=[];return Ed(c,d,f),f.sort(function(y,D){return y.order-D.order}),f}function Ed(c,d,f){var y=gi(d);if(y)for(var D=0;D<y.length;D++)f.push(y[D]);xa(d,function(L){Ed(c,L,f)})}function la(c,d){var f=gi(d);if(f){for(var y=0,D=0;D<f.length;D++)2!==f[D].status&&(f[y]=f[D],y++);f.length=y,bu(d,f.length>0?f:void 0)}xa(d,function(L){la(c,L)})}function Ru(c,d){var f=wu(Fa(c,d)),y=xl(c.transactionQueueTree_,d);return function(c,d,f){for(var y=c.parent;null!==y;){if(d(y))return!0;y=y.parent}}(y,function(D){ll(c,D)}),ll(c,y),Eu(y,function(D){ll(c,D)}),f}function ll(c,d){var f=gi(d);if(f){for(var y=[],D=[],L=-1,Y=0;Y<f.length;Y++)3===f[Y].status||(1===f[Y].status?((0,X.hu)(L===Y-1,"All SENT items should be at beginning of queue."),L=Y,f[Y].status=3,f[Y].abortReason="set"):((0,X.hu)(0===f[Y].status,"Unexpected transaction status in abort"),f[Y].unwatcher(),D=D.concat(_o(c.serverSyncTree_,f[Y].currentWriteId,!0)),f[Y].onComplete&&y.push(f[Y].onComplete.bind(null,new Error("set"),!1,null))));for(-1===L?bu(d,void 0):f.length=L+1,jo(c.eventQueue_,wu(d),D),Y=0;Y<y.length;Y++)Jn(y[Y])}}var cl=function(c,d){var f=fc(c),y=f.namespace;return"firebase.com"===f.domain&&Cn(f.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!y||"undefined"===y)&&"localhost"!==f.domain&&Cn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),f.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&wt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new sn(f.host,f.secure,y,d,"ws"===f.scheme||"wss"===f.scheme,"",y!==f.subdomain),path:new ln(f.pathString)}},fc=function(c){var d="",f="",y="",D="",L="",Y=!0,de="https",ye=443;if("string"==typeof c){var Ie=c.indexOf("//");Ie>=0&&(de=c.substring(0,Ie-1),c=c.substring(Ie+2));var Ne=c.indexOf("/");-1===Ne&&(Ne=c.length);var ht=c.indexOf("?");-1===ht&&(ht=c.length),d=c.substring(0,Math.min(Ne,ht)),Ne<ht&&(D=function(c){for(var d="",f=c.split("/"),y=0;y<f.length;y++)if(f[y].length>0){var D=f[y];try{D=decodeURIComponent(D.replace(/\+/g," "))}catch(L){}d+="/"+D}return d}(c.substring(Ne,ht)));var At=function(c){var d,f,y={};"?"===c.charAt(0)&&(c=c.substring(1));try{for(var D=(0,C.XA)(c.split("&")),L=D.next();!L.done;L=D.next()){var Y=L.value;if(0!==Y.length){var de=Y.split("=");2===de.length?y[decodeURIComponent(de[0])]=decodeURIComponent(de[1]):wt("Invalid query segment '"+Y+"' in query '"+c+"'")}}}catch(ye){d={error:ye}}finally{try{L&&!L.done&&(f=D.return)&&f.call(D)}finally{if(d)throw d.error}}return y}(c.substring(Math.min(c.length,ht)));(Ie=d.indexOf(":"))>=0?(Y="https"===de||"wss"===de,ye=parseInt(d.substring(Ie+1),10)):Ie=d.length;var Ut=d.slice(0,Ie);if("localhost"===Ut.toLowerCase())f="localhost";else if(Ut.split(".").length<=2)f=Ut;else{var rn=d.indexOf(".");y=d.substring(0,rn).toLowerCase(),f=d.substring(rn+1),L=y}"ns"in At&&(L=At.ns)}return{host:d,port:ye,domain:f,subdomain:y,secure:Y,scheme:de,pathString:D,namespace:L}},pc=function(){function c(d,f,y,D){this.eventType=d,this.eventRegistration=f,this.snapshot=y,this.prevName=D}return c.prototype.getPath=function(){var d=this.snapshot.ref;return"value"===this.eventType?d._path:d.parent._path},c.prototype.getEventType=function(){return this.eventType},c.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},c.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,X.Pz)(this.snapshot.exportVal())},c}(),Kc=function(){function c(d,f,y){this.eventRegistration=d,this.error=f,this.path=y}return c.prototype.getPath=function(){return this.path},c.prototype.getEventType=function(){return"cancel"},c.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},c.prototype.toString=function(){return this.path.toString()+":cancel"},c}(),Qc=function(){function c(d,f){this.snapshotCallback=d,this.cancelCallback=f}return c.prototype.onValue=function(d,f){this.snapshotCallback.call(null,d,f)},c.prototype.onCancel=function(d){return(0,X.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,d)},Object.defineProperty(c.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),c.prototype.matches=function(d){return this.snapshotCallback===d.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===d.snapshotCallback.userCallback&&this.snapshotCallback.context===d.snapshotCallback.context},c}(),gc=function(){function c(d,f){this._repo=d,this._path=f}return c.prototype.cancel=function(){var d=new X.BH;return vd(this._repo,this._path,d.wrapCallback(function(){})),d.promise},c.prototype.remove=function(){Ws("OnDisconnect.remove",this._path);var d=new X.BH;return dc(this._repo,this._path,null,d.wrapCallback(function(){})),d.promise},c.prototype.set=function(d){Ws("OnDisconnect.set",this._path),fs("OnDisconnect.set",d,this._path,!1);var f=new X.BH;return dc(this._repo,this._path,d,f.wrapCallback(function(){})),f.promise},c.prototype.setWithPriority=function(d,f){Ws("OnDisconnect.setWithPriority",this._path),fs("OnDisconnect.setWithPriority",d,this._path,!1),sa("OnDisconnect.setWithPriority",f,!1);var y=new X.BH;return function(c,d,f,y,D){var L=rt(f,y);c.server_.onDisconnectPut(d.toString(),L.val(!0),function(Y,de){"ok"===Y&&be(c.onDisconnect_,d,L),Jo(0,D,Y,de)})}(this._repo,this._path,d,f,y.wrapCallback(function(){})),y.promise},c.prototype.update=function(d){Ws("OnDisconnect.update",this._path),Su("OnDisconnect.update",d,this._path,!1);var f=new X.BH;return function(c,d,f,y){if((0,X.xb)(f))return dt("onDisconnect().update() called with empty data.  Don't do anything."),void Jo(0,y,"ok",void 0);c.server_.onDisconnectMerge(d.toString(),f,function(D,L){"ok"===D&&Bt(f,function(Y,de){var ye=rt(de);be(c.onDisconnect_,sr(d,Y),ye)}),Jo(0,y,D,L)})}(this._repo,this._path,d,f.wrapCallback(function(){})),f.promise},c}(),Xo=function(){function c(d,f,y,D){this._repo=d,this._path=f,this._queryParams=y,this._orderByCalled=D}return Object.defineProperty(c.prototype,"key",{get:function(){return jn(this._path)?null:Li(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"ref",{get:function(){return new qr(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"_queryIdentifier",{get:function(){var d=A(this._queryParams),f=Tn(d);return"{}"===f?"default":f},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"_queryObject",{get:function(){return A(this._queryParams)},enumerable:!1,configurable:!0}),c.prototype.isEqual=function(d){if(!((d=(0,X.m9)(d))instanceof c))return!1;var f=this._repo===d._repo,y=zi(this._path,d._path);return f&&y&&this._queryIdentifier===d._queryIdentifier},c.prototype.toJSON=function(){return this.toString()},c.prototype.toString=function(){return this._repo.toString()+function(c){for(var d="",f=c.pieceNum_;f<c.pieces_.length;f++)""!==c.pieces_[f]&&(d+="/"+encodeURIComponent(String(c.pieces_[f])));return d||"/"}(this._path)},c}();function mc(c,d){if(!0===c._orderByCalled)throw new Error(d+": You can't combine multiple orderBy calls.")}function ca(c){var d=null,f=null;if(c.hasStart()&&(d=c.getIndexStartValue()),c.hasEnd()&&(f=c.getIndexEndValue()),c.getIndex()===Pi){var y="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",D="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(c.hasStart()){if(c.getIndexStartName()!==nt)throw new Error(y);if("string"!=typeof d)throw new Error(D)}if(c.hasEnd()){if(c.getIndexEndName()!==yt)throw new Error(y);if("string"!=typeof f)throw new Error(D)}}else if(c.getIndex()===lr){if(null!=d&&!Fs(d)||null!=f&&!Fs(f))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,X.hu)(c.getIndex()instanceof G||c.getIndex()===V,"unknown index type."),null!=d&&"object"==typeof d||null!=f&&"object"==typeof f)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Xa(c){if(c.hasStart()&&c.hasEnd()&&c.hasLimit()&&!c.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var qr=function(c){function d(f,y){return c.call(this,f,y,new du,!1)||this}return(0,C.ZT)(d,c),Object.defineProperty(d.prototype,"parent",{get:function(){var f=Vi(this._path);return null===f?null:new d(this._repo,f)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"root",{get:function(){for(var f=this;null!==f.parent;)f=f.parent;return f},enumerable:!1,configurable:!0}),d}(Xo),Vl=function(){function c(d,f,y){this._node=d,this.ref=f,this._index=y}return Object.defineProperty(c.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),c.prototype.child=function(d){var f=new ln(d),y=Ys(this.ref,d);return new c(this._node.getChild(f),y,lr)},c.prototype.exists=function(){return!this._node.isEmpty()},c.prototype.exportVal=function(){return this._node.val(!0)},c.prototype.forEach=function(d){var f=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(D,L){return d(new c(L,Ys(f.ref,D),lr))})},c.prototype.hasChild=function(d){var f=new ln(d);return!this._node.getChild(f).isEmpty()},c.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},c.prototype.toJSON=function(){return this.exportVal()},c.prototype.val=function(){return this._node.val()},c}();function wd(c,d){return(c=(0,X.m9)(c))._checkNotDeleted("ref"),void 0!==d?Ys(c._root,d):c._root}function _c(c,d){(c=(0,X.m9)(c))._checkNotDeleted("refFromURL");var f=cl(d,c._repo.repoInfo_.nodeAdmin);zc("refFromURL",f);var y=f.repoInfo;return!c._repo.repoInfo_.isCustomHost()&&y.host!==c._repo.repoInfo_.host&&Cn("refFromURL: Host name does not match the current database: (found "+y.host+" but expected "+c._repo.repoInfo_.host+")"),wd(c,f.path.toString())}function Ys(c,d){return null===Xn((c=(0,X.m9)(c))._path)?((f=d)&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),ws("child","path",f,!1)):ws("child","path",d,!1),new qr(c._repo,sr(c._path,d));var f}function Ks(c,d){c=(0,X.m9)(c),Ws("push",c._path),fs("push",d,c._path,!0);var Y,f=Iu(c._repo),y=cr(f),D=Ys(c,y),L=Ys(c,y);return Y=null!=d?yc(L,d).then(function(){return L}):Promise.resolve(L),D.then=Y.then.bind(Y),D.catch=Y.then.bind(Y,void 0),D}function Dd(c){return Ws("remove",c._path),yc(c,null)}function yc(c,d){c=(0,X.m9)(c),Ws("set",c._path),fs("set",d,c._path,!1);var f=new X.BH;return ua(c._repo,c._path,d,null,f.wrapCallback(function(){})),f.promise}function da(c,d){c=(0,X.m9)(c),Ws("setPriority",c._path),sa("setPriority",d,!1);var f=new X.BH;return ua(c._repo,sr(c._path,".priority"),d,null,f.wrapCallback(function(){})),f.promise}function xu(c,d,f){if(Ws("setWithPriority",c._path),fs("setWithPriority",d,c._path,!1),sa("setWithPriority",f,!1),".length"===c.key||".keys"===c.key)throw"setWithPriority failed: "+c.key+" is a read-only object.";var y=new X.BH;return ua(c._repo,c._path,d,f,y.wrapCallback(function(){})),y.promise}function Ts(c,d){Su("update",d,c._path,!1);var f=new X.BH;return function(c,d,f,y){kl(c,"update",{path:d.toString(),value:f});var D=!0,L=Mu(c),Y={};if(Bt(f,function(Ie,Ne){D=!1,Y[Ie]=nl(sr(d,Ie),rt(Ne),c.serverSyncTree_,L)}),D)dt("update() called with empty data.  Don't do anything."),Jo(0,y,"ok",void 0);else{var de=Fl(c),ye=function(c,d,f,y){!function(c,d,f,y){(0,X.hu)(y>c.lastWriteId,"Stacking an older merge on top of newer ones"),c.allWrites.push({path:d,children:f,writeId:y,visible:!0}),c.visibleWrites=ro(c.visibleWrites,d,f),c.lastWriteId=y}(c.pendingWriteTree_,d,f,y);var D=br.fromObject(f);return Ps(c,new To({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},d,D))}(c.serverSyncTree_,d,Y,de);aa(c.eventQueue_,ye),c.server_.merge(d.toString(),f,function(Ie,Ne){var ht="ok"===Ie;ht||wt("update at "+d+" failed: "+Ie);var At=_o(c.serverSyncTree_,de,!ht),Ut=At.length>0?Ou(c,d):d;jo(c.eventQueue_,Ut,At),Jo(0,y,Ie,Ne)}),Bt(f,function(Ie){var Ne=Ru(c,sr(d,Ie));Ou(c,Ne)}),jo(c.eventQueue_,d,[])}}(c._repo,c._path,d,f.wrapCallback(function(){})),f.promise}function eu(c){return function(c,d){var f=function(c,d){var f=d._path,y=null;c.syncPointTree_.foreachOnPath(f,function(Ie,Ne){var ht=Kr(Ie,f);y=y||Aa(Ne,ht)});var D=c.syncPointTree_.get(f);D?y=y||Aa(D,cn()):(D=new qn,c.syncPointTree_=c.syncPointTree_.set(f,D));var L=null!=y,Y=L?new ai(y,!0,!1):null;return function(c){return vn(c.viewCache_)}(hd(D,d,Ui(c.pendingWriteTree_,d._path),L?Y.getNode():k.EMPTY_NODE,L))}(c.serverSyncTree_,d);return null!=f?Promise.resolve(f):c.server_.get(d).then(function(y){var D=rt(y).withIndex(d._queryParams.getIndex()),L=qs(c.serverSyncTree_,d._path,D);return Ja(c.eventQueue_,d._path,L),Promise.resolve(D)},function(y){return kl(c,"get for query "+(0,X.Pz)(d)+" failed: "+y),Promise.reject(new Error(y))})}((c=(0,X.m9)(c))._repo,c).then(function(d){return new Vl(d,new qr(c._repo,c._path),c._queryParams.getIndex())})}var mi=function(){function c(d){this.callbackContext=d}return c.prototype.respondsTo=function(d){return"value"===d},c.prototype.createEvent=function(d,f){var y=f._queryParams.getIndex();return new pc("value",this,new Vl(d.snapshotNode,new qr(f._repo,f._path),y))},c.prototype.getEventRunner=function(d){var f=this;return"cancel"===d.getEventType()?function(){return f.callbackContext.onCancel(d.error)}:function(){return f.callbackContext.onValue(d.snapshot,null)}},c.prototype.createCancelEvent=function(d,f){return this.callbackContext.hasCancelCallback?new Kc(this,d,f):null},c.prototype.matches=function(d){return d instanceof c&&(!d.callbackContext||!this.callbackContext||d.callbackContext.matches(this.callbackContext))},c.prototype.hasAnyCallback=function(){return null!==this.callbackContext},c}(),ni=function(){function c(d,f){this.eventType=d,this.callbackContext=f}return c.prototype.respondsTo=function(d){var f="children_added"===d?"child_added":d;return this.eventType===("children_removed"===f?"child_removed":f)},c.prototype.createCancelEvent=function(d,f){return this.callbackContext.hasCancelCallback?new Kc(this,d,f):null},c.prototype.createEvent=function(d,f){(0,X.hu)(null!=d.childName,"Child events should have a childName.");var y=Ys(new qr(f._repo,f._path),d.childName),D=f._queryParams.getIndex();return new pc(d.type,this,new Vl(d.snapshotNode,y,D),d.prevName)},c.prototype.getEventRunner=function(d){var f=this;return"cancel"===d.getEventType()?function(){return f.callbackContext.onCancel(d.error)}:function(){return f.callbackContext.onValue(d.snapshot,d.prevName)}},c.prototype.matches=function(d){return d instanceof c&&this.eventType===d.eventType&&(!this.callbackContext||!d.callbackContext||this.callbackContext.matches(d.callbackContext))},c.prototype.hasAnyCallback=function(){return!!this.callbackContext},c}();function Pu(c,d,f,y,D){var L;if("object"==typeof y&&(L=void 0,D=y),"function"==typeof y&&(L=y),D&&D.onlyOnce){var Y=f,de=function(Ne,ht){Nl(c._repo,c,Ie),Y(Ne,ht)};de.userCallback=f.userCallback,de.context=f.context,f=de}var ye=new Qc(f,L||void 0),Ie="value"===d?new mi(ye):new ni(d,ye);return function(c,d,f){var y;y=".info"===Xn(d._path)?sh(c.infoSyncTree_,d,f):sh(c.serverSyncTree_,d,f),Ja(c.eventQueue_,d._path,y)}(c._repo,c,Ie),function(){return Nl(c._repo,c,Ie)}}function vc(c,d,f,y){return Pu(c,"value",d,f,y)}function ji(c,d,f,y){return Pu(c,"child_added",d,f,y)}function wi(c,d,f,y){return Pu(c,"child_changed",d,f,y)}function Mo(c,d,f,y){return Pu(c,"child_moved",d,f,y)}function io(c,d,f,y){return Pu(c,"child_removed",d,f,y)}function ps(c,d,f){var y=null,D=f?new Qc(f):null;"value"===d?y=new mi(D):d&&(y=new ni(d,D)),Nl(c._repo,c,y)}var xo=function(){},Qs=function(c){function d(f,y){var D=c.call(this)||this;return D._value=f,D._key=y,D}return(0,C.ZT)(d,c),d.prototype._apply=function(f){fs("endAt",this._value,f._path,!0);var y=Os(f._queryParams,this._value,this._key);if(Xa(y),ca(y),f._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xo(f._repo,f._path,y,f._orderByCalled)},d}(xo);function dl(c,d){return Qa("endAt","key",d,!0),new Qs(c,d)}var Fu=function(c){function d(f,y){var D=c.call(this)||this;return D._value=f,D._key=y,D}return(0,C.ZT)(d,c),d.prototype._apply=function(f){fs("endBefore",this._value,f._path,!1);var y=function(c,d,f){var D;return c.index_===Pi?("string"==typeof d&&(d=hr(d)),D=Os(c,d,f)):D=Os(c,d,null==f?nt:hr(f)),D.endBeforeSet_=!0,D}(f._queryParams,this._value,this._key);if(Xa(y),ca(y),f._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xo(f._repo,f._path,y,f._orderByCalled)},d}(xo);function jh(c,d){return Qa("endBefore","key",d,!0),new Fu(c,d)}var bc=function(c){function d(f,y){var D=c.call(this)||this;return D._value=f,D._key=y,D}return(0,C.ZT)(d,c),d.prototype._apply=function(f){fs("startAt",this._value,f._path,!0);var y=vs(f._queryParams,this._value,this._key);if(Xa(y),ca(y),f._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Xo(f._repo,f._path,y,f._orderByCalled)},d}(xo);function Td(c,d){return void 0===c&&(c=null),Qa("startAt","key",d,!0),new bc(c,d)}var es=function(c){function d(f,y){var D=c.call(this)||this;return D._value=f,D._key=y,D}return(0,C.ZT)(d,c),d.prototype._apply=function(f){fs("startAfter",this._value,f._path,!1);var y=function(c,d,f){var y;return c.index_===Pi?("string"==typeof d&&(d=Hr(d)),y=vs(c,d,f)):y=vs(c,d,null==f?yt:Hr(f)),y.startAfterSet_=!0,y}(f._queryParams,this._value,this._key);if(Xa(y),ca(y),f._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Xo(f._repo,f._path,y,f._orderByCalled)},d}(xo);function $t(c,d){return Qa("startAfter","key",d,!0),new es(c,d)}var Jc=function(c){function d(f){var y=c.call(this)||this;return y._limit=f,y}return(0,C.ZT)(d,c),d.prototype._apply=function(f){if(f._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Xo(f._repo,f._path,function(c,d){var f=c.copy();return f.limitSet_=!0,f.limit_=d,f.viewFrom_="l",f}(f._queryParams,this._limit),f._orderByCalled)},d}(xo);function tu(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Jc(c)}var Sd=function(c){function d(f){var y=c.call(this)||this;return y._limit=f,y}return(0,C.ZT)(d,c),d.prototype._apply=function(f){if(f._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Xo(f._repo,f._path,function(c,d){var f=c.copy();return f.limitSet_=!0,f.limit_=d,f.viewFrom_="r",f}(f._queryParams,this._limit),f._orderByCalled)},d}(xo);function Ul(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Sd(c)}var hl=function(c){function d(f){var y=c.call(this)||this;return y._path=f,y}return(0,C.ZT)(d,c),d.prototype._apply=function(f){mc(f,"orderByChild");var y=new ln(this._path);if(jn(y))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var D=new G(y),L=Zo(f._queryParams,D);return ca(L),new Xo(f._repo,f._path,L,!0)},d}(xo);function Ad(c){if("$key"===c)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===c)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===c)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ws("orderByChild","path",c,!1),new hl(c)}var Js=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return(0,C.ZT)(d,c),d.prototype._apply=function(f){mc(f,"orderByKey");var y=Zo(f._queryParams,Pi);return ca(y),new Xo(f._repo,f._path,y,!0)},d}(xo);function hh(){return new Js}var Id=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return(0,C.ZT)(d,c),d.prototype._apply=function(f){mc(f,"orderByPriority");var y=Zo(f._queryParams,lr);return ca(y),new Xo(f._repo,f._path,y,!0)},d}(xo);function fl(){return new Id}var us=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return(0,C.ZT)(d,c),d.prototype._apply=function(f){mc(f,"orderByValue");var y=Zo(f._queryParams,V);return ca(y),new Xo(f._repo,f._path,y,!0)},d}(xo);function Nu(){return new us}var pl=function(c){function d(f,y){var D=c.call(this)||this;return D._value=f,D._key=y,D}return(0,C.ZT)(d,c),d.prototype._apply=function(f){if(fs("equalTo",this._value,f._path,!1),f._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(f._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Qs(this._value,this._key)._apply(new bc(this._value,this._key)._apply(f))},d}(xo);function Cc(c,d){return Qa("equalTo","key",d,!0),new pl(c,d)}function Ns(c){for(var d,f,y=[],D=1;D<arguments.length;D++)y[D-1]=arguments[D];var L=(0,X.m9)(c);try{for(var Y=(0,C.XA)(y),de=Y.next();!de.done;de=Y.next()){var ye=de.value;L=ye._apply(L)}}catch(Ie){d={error:Ie}}finally{try{de&&!de.done&&(f=Y.return)&&f.call(Y)}finally{if(d)throw d.error}}return L}(function(c){(0,X.hu)(!pu,"__referenceConstructor has already been defined"),pu=c})(qr),function(c){(0,X.hu)(!mu,"__referenceConstructor has already been defined"),mu=c}(qr);var Po={},gl=!1;function Lu(c,d,f,y,D){var L=y||c.options.databaseURL;void 0===L&&(c.options.projectId||Cn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dt("Using default host for project ",c.options.projectId),L=c.options.projectId+"-default-rtdb.firebaseio.com");var ye,Y=cl(L,D),de=Y.repoInfo,Ie=void 0;"undefined"!=typeof process&&(Ie=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Ie?(ye=!0,de=(Y=cl(L="http://"+Ie+"?ns="+de.namespace,D)).repoInfo):ye=!Y.repoInfo.secure;var Ne=D&&ye?new Wt(Wt.OWNER):new mn(c.name,c.options,d);zc("Invalid Firebase Database URL",Y),jn(Y.path)||Cn("Database URL must point to the root of a Firebase Database (not including a child path).");var ht=function(c,d,f,y){var D=Po[d.name];D||(Po[d.name]=D={});var L=D[c.toURLString()];return L&&Cn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),L=new Pa(c,gl,f,y),D[c.toURLString()]=L,L}(de,c,Ne,new Mi(c.name,f));return new Xc(ht,c)}var Xc=function(){function c(d,f){this._repoInternal=d,this.app=f,this.type="database",this._instanceStarted=!1}return Object.defineProperty(c.prototype,"_repo",{get:function(){return this._instanceStarted||(function(c,d,f){if(c.stats_=Vt(c.repoInfo_),c.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)c.server_=new M(c.repoInfo_,function(y,D,L,Y){Io(c,y,D,L,Y)},c.authTokenProvider_,c.appCheckProvider_),setTimeout(function(){return lc(c,!0)},0);else{if(null!=f){if("object"!=typeof f)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,X.Pz)(f)}catch(y){throw new Error("Invalid authOverride provided: "+y)}}c.persistentConnection_=new vi(c.repoInfo_,d,function(y,D,L,Y){Io(c,y,D,L,Y)},function(y){lc(c,y)},function(y){!function(c,d){Bt(d,function(f,y){cc(c,f,y)})}(c,y)},c.authTokenProvider_,c.appCheckProvider_,f),c.server_=c.persistentConnection_}c.authTokenProvider_.addTokenChangeListener(function(y){c.server_.refreshAuthToken(y)}),c.appCheckProvider_.addTokenChangeListener(function(y){c.server_.refreshAppCheckToken(y.token)}),c.statsReporter_=function(c,d){var f=c.toString();return Tt[f]||(Tt[f]=d()),Tt[f]}(c.repoInfo_,function(){return new Tr(c.stats_,c.server_)}),c.infoData_=new j,c.infoSyncTree_=new oh({startListening:function(y,D,L,Y){var de=[],ye=c.infoData_.getNode(y._path);return ye.isEmpty()||(de=qs(c.infoSyncTree_,y._path,ye),setTimeout(function(){Y("ok")},0)),de},stopListening:function(){}}),cc(c,"connected",!1),c.serverSyncTree_=new oh({startListening:function(y,D,L,Y){return c.server_.listen(y,L,D,function(de,ye){var Ie=Y(de,ye);jo(c.eventQueue_,y._path,Ie)}),[]},stopListening:function(y,D){c.server_.unlisten(y,D)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new qr(this._repo,cn())),this._rootInternal},enumerable:!1,configurable:!0}),c.prototype._delete=function(){return null!==this._rootInternal&&(function(c,d){var f=Po[d];(!f||f[c.key]!==c)&&Cn("Database "+d+"("+c.repoInfo_+") has already been deleted."),$c(c),delete f[c.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},c.prototype._checkNotDeleted=function(d){null===this._rootInternal&&Cn("Cannot call "+d+" on a deleted database.")},c}();function fh(c){(c=(0,X.m9)(c))._checkNotDeleted("goOffline"),$c(c._repo)}function Uu(c){(c=(0,X.m9)(c))._checkNotDeleted("goOnline"),function(c){c.persistentConnection_&&c.persistentConnection_.resume(Qo)}(c._repo)}var Xs={".sv":"timestamp"},xd=function(){function c(d,f){this.committed=d,this.snapshot=f}return c.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},c}();function ph(c,d,f){var y;if(c=(0,X.m9)(c),Ws("Reference.transaction",c._path),".length"===c.key||".keys"===c.key)throw"Reference.transaction failed: "+c.key+" is a read-only object.";var D=null===(y=null==f?void 0:f.applyLocally)||void 0===y||y,L=new X.BH,de=vc(c,function(){});return function(c,d,f,y,D,L){kl(c,"transaction on "+d);var Y={path:d,update:f,onComplete:y,status:null,order:Xe(),applyLocally:L,retryCount:0,unwatcher:D,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},de=Ds(c,d,void 0);Y.currentInputSnapshot=de;var ye=Y.update(de.val());if(void 0===ye)Y.unwatcher(),Y.currentOutputSnapshotRaw=null,Y.currentOutputSnapshotResolved=null,Y.onComplete&&Y.onComplete(null,!1,Y.currentInputSnapshot);else{Pl("transaction failed: Data returned ",ye,Y.path),Y.status=0;var Ie=xl(c.transactionQueueTree_,d),Ne=gi(Ie)||[];Ne.push(Y),bu(Ie,Ne);var ht=void 0;"object"==typeof ye&&null!==ye&&(0,X.r3)(ye,".priority")?(ht=(0,X.DV)(ye,".priority"),(0,X.hu)(Fs(ht),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):ht=(Ol(c.serverSyncTree_,d)||k.EMPTY_NODE).getPriority().val();var Ut=Mu(c),rn=rt(ye,ht),Kn=rl(rn,de,Ut);Y.currentOutputSnapshotRaw=rn,Y.currentOutputSnapshotResolved=Kn,Y.currentWriteId=Fl(c);var Wn=oc(c.serverSyncTree_,d,Kn,Y.currentWriteId,Y.applyLocally);jo(c.eventQueue_,d,Wn),Bi(c,c.transactionQueueTree_)}}(c._repo,c._path,d,function(ye,Ie,Ne){var ht=null;ye?L.reject(ye):(ht=new Vl(Ne,new qr(c._repo,c._path),lr),L.resolve(new xd(Ie,ht)))},de,D),L.promise}var ea=function(){function c(d){this._delegate=d}return c.prototype.cancel=function(d){(0,X.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,X.Wj)("OnDisconnect.cancel","onComplete",d,!0);var f=this._delegate.cancel();return d&&f.then(function(){return d(null)},function(y){return d(y)}),f},c.prototype.remove=function(d){(0,X.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,X.Wj)("OnDisconnect.remove","onComplete",d,!0);var f=this._delegate.remove();return d&&f.then(function(){return d(null)},function(y){return d(y)}),f},c.prototype.set=function(d,f){(0,X.Dv)("OnDisconnect.set",1,2,arguments.length),(0,X.Wj)("OnDisconnect.set","onComplete",f,!0);var y=this._delegate.set(d);return f&&y.then(function(){return f(null)},function(D){return f(D)}),y},c.prototype.setWithPriority=function(d,f,y){(0,X.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,X.Wj)("OnDisconnect.setWithPriority","onComplete",y,!0);var D=this._delegate.setWithPriority(d,f);return y&&D.then(function(){return y(null)},function(L){return y(L)}),D},c.prototype.update=function(d,f){if((0,X.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(d)){for(var y={},D=0;D<d.length;++D)y[""+D]=d[D];d=y,wt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,X.Wj)("OnDisconnect.update","onComplete",f,!0);var L=this._delegate.update(d);return f&&L.then(function(){return f(null)},function(Y){return f(Y)}),L},c}(),ks=function(){function c(d,f){this.committed=d,this.snapshot=f}return c.prototype.toJSON=function(){return(0,X.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},c}(),nu=function(){function c(d,f){this._database=d,this._delegate=f}return c.prototype.val=function(){return(0,X.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},c.prototype.exportVal=function(){return(0,X.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},c.prototype.toJSON=function(){return(0,X.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},c.prototype.exists=function(){return(0,X.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},c.prototype.child=function(d){return(0,X.Dv)("DataSnapshot.child",0,1,arguments.length),d=String(d),ws("DataSnapshot.child","path",d,!1),new c(this._database,this._delegate.child(d))},c.prototype.hasChild=function(d){return(0,X.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ws("DataSnapshot.hasChild","path",d,!1),this._delegate.hasChild(d)},c.prototype.getPriority=function(){return(0,X.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},c.prototype.forEach=function(d){var f=this;return(0,X.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,X.Wj)("DataSnapshot.forEach","action",d,!1),this._delegate.forEach(function(y){return d(new c(f._database,y))})},c.prototype.hasChildren=function(){return(0,X.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(c.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),c.prototype.numChildren=function(){return(0,X.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},c.prototype.getRef=function(){return(0,X.Dv)("DataSnapshot.ref",0,0,arguments.length),new ru(this._database,this._delegate.ref)},Object.defineProperty(c.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),c}(),jl=function(){function c(d,f){this.database=d,this._delegate=f}return c.prototype.on=function(d,f,y,D){var Y,L=this;(0,X.Dv)("Query.on",2,4,arguments.length),(0,X.Wj)("Query.on","callback",f,!1);var de=c.getCancelAndContextArgs_("Query.on",y,D),ye=function(Ne,ht){f.call(de.context,new nu(L.database,Ne),ht)};ye.userCallback=f,ye.context=de.context;var Ie=null===(Y=de.cancel)||void 0===Y?void 0:Y.bind(de.context);switch(d){case"value":return vc(this._delegate,ye,Ie),f;case"child_added":return ji(this._delegate,ye,Ie),f;case"child_removed":return io(this._delegate,ye,Ie),f;case"child_changed":return wi(this._delegate,ye,Ie),f;case"child_moved":return Mo(this._delegate,ye,Ie),f;default:throw new Error((0,X.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},c.prototype.off=function(d,f,y){if((0,X.Dv)("Query.off",0,3,arguments.length),md("Query.off",d,!0),(0,X.Wj)("Query.off","callback",f,!0),(0,X.lb)("Query.off","context",y,!0),f){var D=function(){};D.userCallback=f,D.context=y,ps(this._delegate,d,D)}else ps(this._delegate,d)},c.prototype.get=function(){var d=this;return eu(this._delegate).then(function(f){return new nu(d.database,f)})},c.prototype.once=function(d,f,y,D){var L=this;(0,X.Dv)("Query.once",1,4,arguments.length),(0,X.Wj)("Query.once","callback",f,!0);var Y=c.getCancelAndContextArgs_("Query.once",y,D),de=new X.BH,ye=function(Ne,ht){var At=new nu(L.database,Ne);f&&f.call(Y.context,At,ht),de.resolve(At)};ye.userCallback=f,ye.context=Y.context;var Ie=function(Ne){Y.cancel&&Y.cancel.call(Y.context,Ne),de.reject(Ne)};switch(d){case"value":vc(this._delegate,ye,Ie,{onlyOnce:!0});break;case"child_added":ji(this._delegate,ye,Ie,{onlyOnce:!0});break;case"child_removed":io(this._delegate,ye,Ie,{onlyOnce:!0});break;case"child_changed":wi(this._delegate,ye,Ie,{onlyOnce:!0});break;case"child_moved":Mo(this._delegate,ye,Ie,{onlyOnce:!0});break;default:throw new Error((0,X.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return de.promise},c.prototype.limitToFirst=function(d){return(0,X.Dv)("Query.limitToFirst",1,1,arguments.length),new c(this.database,Ns(this._delegate,tu(d)))},c.prototype.limitToLast=function(d){return(0,X.Dv)("Query.limitToLast",1,1,arguments.length),new c(this.database,Ns(this._delegate,Ul(d)))},c.prototype.orderByChild=function(d){return(0,X.Dv)("Query.orderByChild",1,1,arguments.length),new c(this.database,Ns(this._delegate,Ad(d)))},c.prototype.orderByKey=function(){return(0,X.Dv)("Query.orderByKey",0,0,arguments.length),new c(this.database,Ns(this._delegate,hh()))},c.prototype.orderByPriority=function(){return(0,X.Dv)("Query.orderByPriority",0,0,arguments.length),new c(this.database,Ns(this._delegate,fl()))},c.prototype.orderByValue=function(){return(0,X.Dv)("Query.orderByValue",0,0,arguments.length),new c(this.database,Ns(this._delegate,Nu()))},c.prototype.startAt=function(d,f){return void 0===d&&(d=null),(0,X.Dv)("Query.startAt",0,2,arguments.length),new c(this.database,Ns(this._delegate,Td(d,f)))},c.prototype.startAfter=function(d,f){return void 0===d&&(d=null),(0,X.Dv)("Query.startAfter",0,2,arguments.length),new c(this.database,Ns(this._delegate,$t(d,f)))},c.prototype.endAt=function(d,f){return void 0===d&&(d=null),(0,X.Dv)("Query.endAt",0,2,arguments.length),new c(this.database,Ns(this._delegate,dl(d,f)))},c.prototype.endBefore=function(d,f){return void 0===d&&(d=null),(0,X.Dv)("Query.endBefore",0,2,arguments.length),new c(this.database,Ns(this._delegate,jh(d,f)))},c.prototype.equalTo=function(d,f){return(0,X.Dv)("Query.equalTo",1,2,arguments.length),new c(this.database,Ns(this._delegate,Cc(d,f)))},c.prototype.toString=function(){return(0,X.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},c.prototype.toJSON=function(){return(0,X.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},c.prototype.isEqual=function(d){if((0,X.Dv)("Query.isEqual",1,1,arguments.length),!(d instanceof c)){var f="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(f)}return this._delegate.isEqual(d._delegate)},c.getCancelAndContextArgs_=function(d,f,y){var D={cancel:void 0,context:void 0};if(f&&y)D.cancel=f,(0,X.Wj)(d,"cancel",D.cancel,!0),D.context=y,(0,X.lb)(d,"context",D.context,!0);else if(f)if("object"==typeof f&&null!==f)D.context=f;else{if("function"!=typeof f)throw new Error((0,X.gK)(d,"cancelOrContext")+" must either be a cancel callback or a context object.");D.cancel=f}return D},Object.defineProperty(c.prototype,"ref",{get:function(){return new ru(this.database,new qr(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),c}(),ru=function(c){function d(f,y){var D=c.call(this,f,new Xo(y._repo,y._path,new du,!1))||this;return D.database=f,D._delegate=y,D}return(0,C.ZT)(d,c),d.prototype.getKey=function(){return(0,X.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},d.prototype.child=function(f){return(0,X.Dv)("Reference.child",1,1,arguments.length),"number"==typeof f&&(f=String(f)),new d(this.database,Ys(this._delegate,f))},d.prototype.getParent=function(){(0,X.Dv)("Reference.parent",0,0,arguments.length);var f=this._delegate.parent;return f?new d(this.database,f):null},d.prototype.getRoot=function(){return(0,X.Dv)("Reference.root",0,0,arguments.length),new d(this.database,this._delegate.root)},d.prototype.set=function(f,y){(0,X.Dv)("Reference.set",1,2,arguments.length),(0,X.Wj)("Reference.set","onComplete",y,!0);var D=yc(this._delegate,f);return y&&D.then(function(){return y(null)},function(L){return y(L)}),D},d.prototype.update=function(f,y){if((0,X.Dv)("Reference.update",1,2,arguments.length),Array.isArray(f)){for(var D={},L=0;L<f.length;++L)D[""+L]=f[L];f=D,wt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ws("Reference.update",this._delegate._path),(0,X.Wj)("Reference.update","onComplete",y,!0);var Y=Ts(this._delegate,f);return y&&Y.then(function(){return y(null)},function(de){return y(de)}),Y},d.prototype.setWithPriority=function(f,y,D){(0,X.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,X.Wj)("Reference.setWithPriority","onComplete",D,!0);var L=xu(this._delegate,f,y);return D&&L.then(function(){return D(null)},function(Y){return D(Y)}),L},d.prototype.remove=function(f){(0,X.Dv)("Reference.remove",0,1,arguments.length),(0,X.Wj)("Reference.remove","onComplete",f,!0);var y=Dd(this._delegate);return f&&y.then(function(){return f(null)},function(D){return f(D)}),y},d.prototype.transaction=function(f,y,D){var L=this;(0,X.Dv)("Reference.transaction",1,3,arguments.length),(0,X.Wj)("Reference.transaction","transactionUpdate",f,!1),(0,X.Wj)("Reference.transaction","onComplete",y,!0),yo("Reference.transaction","applyLocally",D,!0);var Y=ph(this._delegate,f,{applyLocally:D}).then(function(de){return new ks(de.committed,new nu(L.database,de.snapshot))});return y&&Y.then(function(de){return y(null,de.committed,de.snapshot)},function(de){return y(de,!1,null)}),Y},d.prototype.setPriority=function(f,y){(0,X.Dv)("Reference.setPriority",1,2,arguments.length),(0,X.Wj)("Reference.setPriority","onComplete",y,!0);var D=da(this._delegate,f);return y&&D.then(function(){return y(null)},function(L){return y(L)}),D},d.prototype.push=function(f,y){var D=this;(0,X.Dv)("Reference.push",0,2,arguments.length),(0,X.Wj)("Reference.push","onComplete",y,!0);var L=Ks(this._delegate,f),Y=L.then(function(ye){return new d(D.database,ye)});y&&Y.then(function(){return y(null)},function(ye){return y(ye)});var de=new d(this.database,L);return de.then=Y.then.bind(Y),de.catch=Y.catch.bind(Y,void 0),de},d.prototype.onDisconnect=function(){return Ws("Reference.onDisconnect",this._delegate._path),new ea(new gc(this._delegate._repo,this._delegate._path))},Object.defineProperty(d.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),d}(jl),ha=function(){function c(d,f){var y=this;this._delegate=d,this.app=f,this.INTERNAL={delete:function(){return y._delegate._delete()}}}return c.prototype.useEmulator=function(d,f,y){void 0===y&&(y={}),function(c,d,f,y){void 0===y&&(y={}),(c=(0,X.m9)(c))._checkNotDeleted("useEmulator"),c._instanceStarted&&Cn("Cannot call useEmulator() after instance has already been initialized.");var D=c._repoInternal,L=void 0;if(D.repoInfo_.nodeAdmin)y.mockUserToken&&Cn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),L=new Wt(Wt.OWNER);else if(y.mockUserToken){var Y="string"==typeof y.mockUserToken?y.mockUserToken:(0,X.Sg)(y.mockUserToken,c.app.options.projectId);L=new Wt(Y)}!function(c,d,f,y){c.repoInfo_=new sn(d+":"+f,!1,c.repoInfo_.namespace,c.repoInfo_.webSocketOnly,c.repoInfo_.nodeAdmin,c.repoInfo_.persistenceKey,c.repoInfo_.includeNamespaceInQueryParams),y&&(c.authTokenProvider_=y)}(D,d,f,L)}(this._delegate,d,f,y)},c.prototype.ref=function(d){if((0,X.Dv)("database.ref",0,1,arguments.length),d instanceof ru){var f=_c(this._delegate,d.toString());return new ru(this,f)}return f=wd(this._delegate,d),new ru(this,f)},c.prototype.refFromURL=function(d){var f="database.refFromURL";(0,X.Dv)(f,1,1,arguments.length);var y=_c(this._delegate,d);return new ru(this,y)},c.prototype.goOffline=function(){return(0,X.Dv)("database.goOffline",0,0,arguments.length),fh(this._delegate)},c.prototype.goOnline=function(){return(0,X.Dv)("database.goOnline",0,0,arguments.length),Uu(this._delegate)},c.ServerValue={TIMESTAMP:Xs,increment:function(d){return function(c){return{".sv":{increment:c}}}(d)}},c}(),Pd=Object.freeze({__proto__:null,forceLongPolling:function(){yn.forceDisallow(),ki.forceAllow()},forceWebSockets:function(){ki.forceDisallow()},isWebSocketsAvailable:function(){return yn.isAvailable()},setSecurityDebugCallback:function(c,d){c._delegate._repo.persistentConnection_.securityDebugCallback_=d},stats:function(c,d){!function(c,d){if(void 0===d&&(d=!1),"undefined"!=typeof console){var f;d?(c.statsListener_||(c.statsListener_=new mt(c.stats_)),f=c.statsListener_.get()):f=c.stats_.get();var y=Object.keys(f).reduce(function(D,L){return Math.max(L.length,D)},0);Bt(f,function(D,L){for(var Y=D,de=D.length;de<y+2;de++)Y+=" ";console.log(Y+L)})}}(c._delegate._repo,d)},statsIncrementCounter:function(c,d){!function(c,d){c.stats_.incrementCounter(d),function(c,d){c.statsToReport_[d]=!0}(c.statsReporter_,d)}(c._delegate._repo,d)},dataUpdateCount:function(c){return c._delegate._repo.dataUpdateCount},interceptServerData:function(c,d){return function(c,d){c.interceptServerDataCallback_=d}(c._delegate._repo,d)},initStandalone:function(c){var d=c.app,f=c.url,D=c.customAuthImpl,L=c.namespace,Y=c.nodeAdmin,de=void 0!==Y&&Y;ve(c.version);var ye=new g.zt("auth-internal",new g.H0("database-standalone"));return ye.setComponent(new g.wA("auth-internal",function(){return D},"PRIVATE")),{instance:new ha(Lu(d,ye,void 0,f,de),d),namespace:L}}}),Fd=vi;vi.prototype.simpleListen=function(c,d){this.sendRequest("q",{p:c},d)},vi.prototype.echo=function(c,d){this.sendRequest("echo",{d:c},d)};var m=Object.freeze({__proto__:null,DataConnection:Fd,RealTimeConnection:te,hijackHash:function(c){var d=vi.prototype.put;return vi.prototype.put=function(f,y,D,L){void 0!==L&&(L=c()),d.call(this,f,y,D,L)},function(){vi.prototype.put=d}},ConnectionTarget:sn,queryIdentifier:function(c){return c._delegate._queryIdentifier},forceRestClient:function(c){!function(c){gl=c}(c)}}),w=ha.ServerValue;!function(c){ve(c.SDK_VERSION);var d=c.INTERNAL.registerComponent(new g.wA("database",function(f,y){var D=y.instanceIdentifier,L=f.getProvider("app").getImmediate(),Y=f.getProvider("auth-internal"),de=f.getProvider("app-check-internal");return new ha(Lu(L,Y,de,D),L)},"PUBLIC").setServiceProps({Reference:ru,Query:jl,Database:ha,DataSnapshot:nu,enableLogging:kt,INTERNAL:Pd,ServerValue:w,TEST_ACCESS:m}).setMultipleInstances(!0));c.registerVersion("@firebase/database","0.11.0"),(0,X.Yr)()&&(jt.exports=d)}(P.Z)},300:(jt,it,Q)=>{"use strict";function P(){for(var me=0,Ce=0,Me=arguments.length;Ce<Me;Ce++)me+=arguments[Ce].length;var Ue=Array(me),Xe=0;for(Ce=0;Ce<Me;Ce++)for(var re=arguments[Ce],Ke=0,St=re.length;Ke<St;Ke++,Xe++)Ue[Xe]=re[Ke];return Ue}Q.d(it,{in:()=>C,Yd:()=>ve,Ub:()=>se,Am:()=>Se});var g,X=[],C=(()=>{return(me=C||(C={}))[me.DEBUG=0]="DEBUG",me[me.VERBOSE=1]="VERBOSE",me[me.INFO=2]="INFO",me[me.WARN=3]="WARN",me[me.ERROR=4]="ERROR",me[me.SILENT=5]="SILENT",C;var me})(),Ve={debug:C.DEBUG,verbose:C.VERBOSE,info:C.INFO,warn:C.WARN,error:C.ERROR,silent:C.SILENT},Ee=C.INFO,Fe=((g={})[C.DEBUG]="log",g[C.VERBOSE]="log",g[C.INFO]="info",g[C.WARN]="warn",g[C.ERROR]="error",g),fe=function(me,Ce){for(var Me=[],Ue=2;Ue<arguments.length;Ue++)Me[Ue-2]=arguments[Ue];if(!(Ce<me.logLevel)){var Xe=(new Date).toISOString(),re=Fe[Ce];if(!re)throw new Error("Attempted to log a message with an invalid logType (value: "+Ce+")");console[re].apply(console,P(["["+Xe+"]  "+me.name+":"],Me))}},ve=function(){function me(Ce){this.name=Ce,this._logLevel=Ee,this._logHandler=fe,this._userLogHandler=null,X.push(this)}return Object.defineProperty(me.prototype,"logLevel",{get:function(){return this._logLevel},set:function(Ce){if(!(Ce in C))throw new TypeError('Invalid value "'+Ce+'" assigned to `logLevel`');this._logLevel=Ce},enumerable:!1,configurable:!0}),me.prototype.setLogLevel=function(Ce){this._logLevel="string"==typeof Ce?Ve[Ce]:Ce},Object.defineProperty(me.prototype,"logHandler",{get:function(){return this._logHandler},set:function(Ce){if("function"!=typeof Ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ce},enumerable:!1,configurable:!0}),Object.defineProperty(me.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(Ce){this._userLogHandler=Ce},enumerable:!1,configurable:!0}),me.prototype.debug=function(){for(var Ce=[],Me=0;Me<arguments.length;Me++)Ce[Me]=arguments[Me];this._userLogHandler&&this._userLogHandler.apply(this,P([this,C.DEBUG],Ce)),this._logHandler.apply(this,P([this,C.DEBUG],Ce))},me.prototype.log=function(){for(var Ce=[],Me=0;Me<arguments.length;Me++)Ce[Me]=arguments[Me];this._userLogHandler&&this._userLogHandler.apply(this,P([this,C.VERBOSE],Ce)),this._logHandler.apply(this,P([this,C.VERBOSE],Ce))},me.prototype.info=function(){for(var Ce=[],Me=0;Me<arguments.length;Me++)Ce[Me]=arguments[Me];this._userLogHandler&&this._userLogHandler.apply(this,P([this,C.INFO],Ce)),this._logHandler.apply(this,P([this,C.INFO],Ce))},me.prototype.warn=function(){for(var Ce=[],Me=0;Me<arguments.length;Me++)Ce[Me]=arguments[Me];this._userLogHandler&&this._userLogHandler.apply(this,P([this,C.WARN],Ce)),this._logHandler.apply(this,P([this,C.WARN],Ce))},me.prototype.error=function(){for(var Ce=[],Me=0;Me<arguments.length;Me++)Ce[Me]=arguments[Me];this._userLogHandler&&this._userLogHandler.apply(this,P([this,C.ERROR],Ce)),this._logHandler.apply(this,P([this,C.ERROR],Ce))},me}();function se(me){X.forEach(function(Ce){Ce.setLogLevel(me)})}function Se(me,Ce){for(var Me=function(Ke){var St=null;Ce&&Ce.level&&(St=Ve[Ce.level]),Ke.userLogHandler=null===me?null:function(Mn,kt){for(var dt=[],Zt=2;Zt<arguments.length;Zt++)dt[Zt-2]=arguments[Zt];var Ot=dt.map(function(Cn){if(null==Cn)return null;if("string"==typeof Cn)return Cn;if("number"==typeof Cn||"boolean"==typeof Cn)return Cn.toString();if(Cn instanceof Error)return Cn.message;try{return JSON.stringify(Cn)}catch(wt){return null}}).filter(function(Cn){return Cn}).join(" ");kt>=(null!=St?St:Mn.logLevel)&&me({level:C[kt].toLowerCase(),message:Ot,args:dt,type:Mn.name})}},Ue=0,Xe=X;Ue<Xe.length;Ue++)Me(Xe[Ue])}},4685:(jt,it,Q)=>{"use strict";Q.d(it,{BH:()=>Me,LL:()=>tn,ZR:()=>at,gQ:()=>kn,hu:()=>X,g5:()=>C,US:()=>Fe,h$:()=>fe,r3:()=>or,Sg:()=>Ue,ne:()=>Ln,p$:()=>Se,ZB:()=>me,gK:()=>Ze,m9:()=>Gt,z$:()=>Xe,GJ:()=>bn,jU:()=>St,ru:()=>Mn,d:()=>dt,xb:()=>Bn,w1:()=>Zt,uI:()=>re,UG:()=>Ke,Yr:()=>Cn,b$:()=>kt,G6:()=>wt,Mn:()=>Ot,w9:()=>Pn,cI:()=>on,UI:()=>Jn,xO:()=>Mi,DV:()=>Gn,ug:()=>Mt,dS:()=>sn,Pz:()=>Bt,Dv:()=>Dt,Wj:()=>It,lb:()=>xt});var P=Q(4762),X=function(Oe,xe){if(!Oe)throw C(xe)},C=function(Oe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Oe)},Ve=function(Oe){for(var xe=[],Ye=0,et=0;et<Oe.length;et++){var tt=Oe.charCodeAt(et);tt<128?xe[Ye++]=tt:tt<2048?(xe[Ye++]=tt>>6|192,xe[Ye++]=63&tt|128):55296==(64512&tt)&&et+1<Oe.length&&56320==(64512&Oe.charCodeAt(et+1))?(tt=65536+((1023&tt)<<10)+(1023&Oe.charCodeAt(++et)),xe[Ye++]=tt>>18|240,xe[Ye++]=tt>>12&63|128,xe[Ye++]=tt>>6&63|128,xe[Ye++]=63&tt|128):(xe[Ye++]=tt>>12|224,xe[Ye++]=tt>>6&63|128,xe[Ye++]=63&tt|128)}return xe},Fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(Oe,xe){if(!Array.isArray(Oe))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var Ye=xe?this.byteToCharMapWebSafe_:this.byteToCharMap_,et=[],tt=0;tt<Oe.length;tt+=3){var zt=Oe[tt],_n=tt+1<Oe.length,nr=_n?Oe[tt+1]:0,Vn=tt+2<Oe.length,Rn=Vn?Oe[tt+2]:0,Yr=(15&nr)<<2|Rn>>6,Er=63&Rn;Vn||(Er=64,_n||(Yr=64)),et.push(Ye[zt>>2],Ye[(3&zt)<<4|nr>>4],Ye[Yr],Ye[Er])}return et.join("")},encodeString:function(Oe,xe){return this.HAS_NATIVE_SUPPORT&&!xe?btoa(Oe):this.encodeByteArray(Ve(Oe),xe)},decodeString:function(Oe,xe){return this.HAS_NATIVE_SUPPORT&&!xe?atob(Oe):function(Oe){for(var xe=[],Ye=0,et=0;Ye<Oe.length;){var tt=Oe[Ye++];if(tt<128)xe[et++]=String.fromCharCode(tt);else if(tt>191&&tt<224){var zt=Oe[Ye++];xe[et++]=String.fromCharCode((31&tt)<<6|63&zt)}else if(tt>239&&tt<365){var Vn=((7&tt)<<18|(63&(zt=Oe[Ye++]))<<12|(63&(_n=Oe[Ye++]))<<6|63&Oe[Ye++])-65536;xe[et++]=String.fromCharCode(55296+(Vn>>10)),xe[et++]=String.fromCharCode(56320+(1023&Vn))}else{zt=Oe[Ye++];var _n=Oe[Ye++];xe[et++]=String.fromCharCode((15&tt)<<12|(63&zt)<<6|63&_n)}}return xe.join("")}(this.decodeStringToByteArray(Oe,xe))},decodeStringToByteArray:function(Oe,xe){this.init_();for(var Ye=xe?this.charToByteMapWebSafe_:this.charToByteMap_,et=[],tt=0;tt<Oe.length;){var zt=Ye[Oe.charAt(tt++)],nr=tt<Oe.length?Ye[Oe.charAt(tt)]:0,Rn=++tt<Oe.length?Ye[Oe.charAt(tt)]:64,Br=++tt<Oe.length?Ye[Oe.charAt(tt)]:64;if(++tt,null==zt||null==nr||null==Rn||null==Br)throw Error();et.push(zt<<2|nr>>4),64!==Rn&&(et.push(nr<<4&240|Rn>>2),64!==Br&&et.push(Rn<<6&192|Br))}return et},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var Oe=0;Oe<this.ENCODED_VALS.length;Oe++)this.byteToCharMap_[Oe]=this.ENCODED_VALS.charAt(Oe),this.charToByteMap_[this.byteToCharMap_[Oe]]=Oe,this.byteToCharMapWebSafe_[Oe]=this.ENCODED_VALS_WEBSAFE.charAt(Oe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Oe]]=Oe,Oe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Oe)]=Oe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Oe)]=Oe)}}},fe=function(Oe){var xe=Ve(Oe);return Fe.encodeByteArray(xe,!0)},ve=function(Oe){return fe(Oe).replace(/\./g,"")},se=function(Oe){try{return Fe.decodeString(Oe,!0)}catch(xe){console.error("base64Decode failed: ",xe)}return null};function Se(Oe){return me(void 0,Oe)}function me(Oe,xe){if(!(xe instanceof Object))return xe;switch(xe.constructor){case Date:return new Date(xe.getTime());case Object:void 0===Oe&&(Oe={});break;case Array:Oe=[];break;default:return xe}for(var et in xe)!xe.hasOwnProperty(et)||!Ce(et)||(Oe[et]=me(Oe[et],xe[et]));return Oe}function Ce(Oe){return"__proto__"!==Oe}var Me=function(){function Oe(){var xe=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(Ye,et){xe.resolve=Ye,xe.reject=et})}return Oe.prototype.wrapCallback=function(xe){var Ye=this;return function(et,tt){et?Ye.reject(et):Ye.resolve(tt),"function"==typeof xe&&(Ye.promise.catch(function(){}),1===xe.length?xe(et):xe(et,tt))}},Oe}();function Ue(Oe,xe){if(Oe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var et=xe||"demo-project",tt=Oe.iat||0,zt=Oe.sub||Oe.user_id;if(!zt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var _n=(0,P.pi)({iss:"https://securetoken.google.com/"+et,aud:et,iat:tt,exp:tt+3600,auth_time:tt,sub:zt,user_id:zt,firebase:{sign_in_provider:"custom",identities:{}}},Oe);return[ve(JSON.stringify({alg:"none",type:"JWT"})),ve(JSON.stringify(_n)),""].join(".")}function Xe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function re(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function Ke(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Oe){return!1}}function St(){return"object"==typeof self&&self.self===self}function Mn(){var Oe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Oe&&void 0!==Oe.id}function kt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function dt(){return Xe().indexOf("Electron/")>=0}function Zt(){var Oe=Xe();return Oe.indexOf("MSIE ")>=0||Oe.indexOf("Trident/")>=0}function Ot(){return Xe().indexOf("MSAppHost/")>=0}function Cn(){return!1}function wt(){return!Ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var at=function(Oe){function xe(Ye,et,tt){var zt=Oe.call(this,et)||this;return zt.code=Ye,zt.customData=tt,zt.name="FirebaseError",Object.setPrototypeOf(zt,xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(zt,tn.prototype.create),zt}return(0,P.ZT)(xe,Oe),xe}(Error),tn=function(){function Oe(xe,Ye,et){this.service=xe,this.serviceName=Ye,this.errors=et}return Oe.prototype.create=function(xe){for(var Ye=[],et=1;et<arguments.length;et++)Ye[et-1]=arguments[et];var tt=Ye[0]||{},zt=this.service+"/"+xe,_n=this.errors[xe],nr=_n?un(_n,tt):"Error",Vn=this.serviceName+": "+nr+" ("+zt+").",Rn=new at(zt,Vn,tt);return Rn},Oe}();function un(Oe,xe){return Oe.replace(Tn,function(Ye,et){var tt=xe[et];return null!=tt?String(tt):"<"+et+"?>"})}var Tn=/\{\$([^}]+)}/g;function on(Oe){return JSON.parse(Oe)}function Bt(Oe){return JSON.stringify(Oe)}var Ft=function(Oe){var xe={},Ye={},et={},tt="";try{var zt=Oe.split(".");xe=on(se(zt[0])||""),Ye=on(se(zt[1])||""),tt=zt[2],et=Ye.d||{},delete Ye.d}catch(_n){}return{header:xe,claims:Ye,data:et,signature:tt}},Pn=function(Oe){var Ye=Ft(Oe).claims;return!!Ye&&"object"==typeof Ye&&Ye.hasOwnProperty("iat")},bn=function(Oe){var xe=Ft(Oe).claims;return"object"==typeof xe&&!0===xe.admin};function or(Oe,xe){return Object.prototype.hasOwnProperty.call(Oe,xe)}function Gn(Oe,xe){if(Object.prototype.hasOwnProperty.call(Oe,xe))return Oe[xe]}function Bn(Oe){for(var xe in Oe)if(Object.prototype.hasOwnProperty.call(Oe,xe))return!1;return!0}function Jn(Oe,xe,Ye){var et={};for(var tt in Oe)Object.prototype.hasOwnProperty.call(Oe,tt)&&(et[tt]=xe.call(Ye,Oe[tt],tt,Oe));return et}function Mi(Oe){for(var xe=[],Ye=function(Vn,Rn){Array.isArray(Rn)?Rn.forEach(function(ri){xe.push(encodeURIComponent(Vn)+"="+encodeURIComponent(ri))}):xe.push(encodeURIComponent(Vn)+"="+encodeURIComponent(Rn))},et=0,tt=Object.entries(Oe);et<tt.length;et++){var zt=tt[et];Ye(zt[0],zt[1])}return xe.length?"&"+xe.join("&"):""}var kn=function(){function Oe(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var xe=1;xe<this.blockSize;++xe)this.pad_[xe]=0;this.reset()}return Oe.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Oe.prototype.compress_=function(xe,Ye){Ye||(Ye=0);var et=this.W_;if("string"==typeof xe)for(var tt=0;tt<16;tt++)et[tt]=xe.charCodeAt(Ye)<<24|xe.charCodeAt(Ye+1)<<16|xe.charCodeAt(Ye+2)<<8|xe.charCodeAt(Ye+3),Ye+=4;else for(tt=0;tt<16;tt++)et[tt]=xe[Ye]<<24|xe[Ye+1]<<16|xe[Ye+2]<<8|xe[Ye+3],Ye+=4;for(tt=16;tt<80;tt++)et[tt]=4294967295&((zt=et[tt-3]^et[tt-8]^et[tt-14]^et[tt-16])<<1|zt>>>31);var Br,Yr,_n=this.chain_[0],nr=this.chain_[1],Vn=this.chain_[2],Rn=this.chain_[3],ri=this.chain_[4];for(tt=0;tt<80;tt++){tt<40?tt<20?(Br=Rn^nr&(Vn^Rn),Yr=1518500249):(Br=nr^Vn^Rn,Yr=1859775393):tt<60?(Br=nr&Vn|Rn&(nr|Vn),Yr=2400959708):(Br=nr^Vn^Rn,Yr=3395469782);var zt=(_n<<5|_n>>>27)+Br+ri+Yr+et[tt]&4294967295;ri=Rn,Rn=Vn,Vn=4294967295&(nr<<30|nr>>>2),nr=_n,_n=zt}this.chain_[0]=this.chain_[0]+_n&4294967295,this.chain_[1]=this.chain_[1]+nr&4294967295,this.chain_[2]=this.chain_[2]+Vn&4294967295,this.chain_[3]=this.chain_[3]+Rn&4294967295,this.chain_[4]=this.chain_[4]+ri&4294967295},Oe.prototype.update=function(xe,Ye){if(null!=xe){void 0===Ye&&(Ye=xe.length);for(var et=Ye-this.blockSize,tt=0,zt=this.buf_,_n=this.inbuf_;tt<Ye;){if(0===_n)for(;tt<=et;)this.compress_(xe,tt),tt+=this.blockSize;if("string"==typeof xe){for(;tt<Ye;)if(zt[_n]=xe.charCodeAt(tt),++tt,++_n===this.blockSize){this.compress_(zt),_n=0;break}}else for(;tt<Ye;)if(zt[_n]=xe[tt],++tt,++_n===this.blockSize){this.compress_(zt),_n=0;break}}this.inbuf_=_n,this.total_+=Ye}},Oe.prototype.digest=function(){var xe=[],Ye=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var et=this.blockSize-1;et>=56;et--)this.buf_[et]=255&Ye,Ye/=256;this.compress_(this.buf_);var tt=0;for(et=0;et<5;et++)for(var zt=24;zt>=0;zt-=8)xe[tt]=this.chain_[et]>>zt&255,++tt;return xe},Oe}();function Ln(Oe,xe){var Ye=new Qt(Oe,xe);return Ye.subscribe.bind(Ye)}var Qt=function(){function Oe(xe,Ye){var et=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ye,this.task.then(function(){xe(et)}).catch(function(tt){et.error(tt)})}return Oe.prototype.next=function(xe){this.forEachObserver(function(Ye){Ye.next(xe)})},Oe.prototype.error=function(xe){this.forEachObserver(function(Ye){Ye.error(xe)}),this.close(xe)},Oe.prototype.complete=function(){this.forEachObserver(function(xe){xe.complete()}),this.close()},Oe.prototype.subscribe=function(xe,Ye,et){var zt,tt=this;if(void 0===xe&&void 0===Ye&&void 0===et)throw new Error("Missing Observer.");void 0===(zt=function(Oe,xe){if("object"!=typeof Oe||null===Oe)return!1;for(var Ye=0,et=["next","error","complete"];Ye<et.length;Ye++){var tt=et[Ye];if(tt in Oe&&"function"==typeof Oe[tt])return!0}return!1}(xe)?xe:{next:xe,error:Ye,complete:et}).next&&(zt.next=Zn),void 0===zt.error&&(zt.error=Zn),void 0===zt.complete&&(zt.complete=Zn);var _n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{tt.finalError?zt.error(tt.finalError):zt.complete()}catch(nr){}}),this.observers.push(zt),_n},Oe.prototype.unsubscribeOne=function(xe){void 0===this.observers||void 0===this.observers[xe]||(delete this.observers[xe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Oe.prototype.forEachObserver=function(xe){if(!this.finalized)for(var Ye=0;Ye<this.observers.length;Ye++)this.sendOne(Ye,xe)},Oe.prototype.sendOne=function(xe,Ye){var et=this;this.task.then(function(){if(void 0!==et.observers&&void 0!==et.observers[xe])try{Ye(et.observers[xe])}catch(tt){"undefined"!=typeof console&&console.error&&console.error(tt)}})},Oe.prototype.close=function(xe){var Ye=this;this.finalized||(this.finalized=!0,void 0!==xe&&(this.finalError=xe),this.task.then(function(){Ye.observers=void 0,Ye.onNoObservers=void 0}))},Oe}();function Zn(){}var Dt=function(Oe,xe,Ye,et){var tt;if(et<xe?tt="at least "+xe:et>Ye&&(tt=0===Ye?"none":"no more than "+Ye),tt)throw new Error(Oe+" failed: Was called with "+et+(1===et?" argument.":" arguments.")+" Expects "+tt+".")};function Ze(Oe,xe){return Oe+" failed: "+xe+" argument "}function It(Oe,xe,Ye,et){if((!et||Ye)&&"function"!=typeof Ye)throw new Error(Ze(Oe,xe)+"must be a valid function.")}function xt(Oe,xe,Ye,et){if((!et||Ye)&&("object"!=typeof Ye||null===Ye))throw new Error(Ze(Oe,xe)+"must be a valid context object.")}var sn=function(Oe){for(var xe=[],Ye=0,et=0;et<Oe.length;et++){var tt=Oe.charCodeAt(et);if(tt>=55296&&tt<=56319){var zt=tt-55296;et++,X(et<Oe.length,"Surrogate pair missing trail surrogate."),tt=65536+(zt<<10)+(Oe.charCodeAt(et)-56320)}tt<128?xe[Ye++]=tt:tt<2048?(xe[Ye++]=tt>>6|192,xe[Ye++]=63&tt|128):tt<65536?(xe[Ye++]=tt>>12|224,xe[Ye++]=tt>>6&63|128,xe[Ye++]=63&tt|128):(xe[Ye++]=tt>>18|240,xe[Ye++]=tt>>12&63|128,xe[Ye++]=tt>>6&63|128,xe[Ye++]=63&tt|128)}return xe},Mt=function(Oe){for(var xe=0,Ye=0;Ye<Oe.length;Ye++){var et=Oe.charCodeAt(Ye);et<128?xe++:et<2048?xe+=2:et>=55296&&et<=56319?(xe+=4,Ye++):xe+=3}return xe};function Gt(Oe){return Oe&&Oe._delegate?Oe._delegate:Oe}},2329:(jt,it,Q)=>{"use strict";Q.d(it,{Z:()=>P.Z});var P=Q(9759),X="8.10.0";P.Z.registerVersion("firebase",X,"app"),P.Z.SDK_VERSION=X},6215:(jt,it,Q)=>{"use strict";Q.d(it,{X:()=>X});var P=Q(9765),g=Q(7971);class X extends P.xQ{constructor(Ve){super(),this._value=Ve}get value(){return this.getValue()}_subscribe(Ve){const Ee=super._subscribe(Ve);return Ee&&!Ee.closed&&Ve.next(this._value),Ee}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new g.N;return this._value}next(Ve){super.next(this._value=Ve)}}},7574:(jt,it,Q)=>{"use strict";Q.d(it,{y:()=>Se});var P=Q(7393),X=Q(9181),C=Q(6490),Ee=Q(6554),Fe=Q(4487);var se=Q(2494);let Se=(()=>{class Ce{constructor(Ue){this._isScalar=!1,Ue&&(this._subscribe=Ue)}lift(Ue){const Xe=new Ce;return Xe.source=this,Xe.operator=Ue,Xe}subscribe(Ue,Xe,re){const{operator:Ke}=this,St=function(Ce,Me,Ue){if(Ce){if(Ce instanceof P.L)return Ce;if(Ce[X.b])return Ce[X.b]()}return Ce||Me||Ue?new P.L(Ce,Me,Ue):new P.L(C.c)}(Ue,Xe,re);if(St.add(Ke?Ke.call(St,this.source):this.source||se.v.useDeprecatedSynchronousErrorHandling&&!St.syncErrorThrowable?this._subscribe(St):this._trySubscribe(St)),se.v.useDeprecatedSynchronousErrorHandling&&St.syncErrorThrowable&&(St.syncErrorThrowable=!1,St.syncErrorThrown))throw St.syncErrorValue;return St}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(Xe){se.v.useDeprecatedSynchronousErrorHandling&&(Ue.syncErrorThrown=!0,Ue.syncErrorValue=Xe),function(Ce){for(;Ce;){const{closed:Me,destination:Ue,isStopped:Xe}=Ce;if(Me||Xe)return!1;Ce=Ue&&Ue instanceof P.L?Ue:null}return!0}(Ue)?Ue.error(Xe):console.warn(Xe)}}forEach(Ue,Xe){return new(Xe=me(Xe))((re,Ke)=>{let St;St=this.subscribe(Mn=>{try{Ue(Mn)}catch(kt){Ke(kt),St&&St.unsubscribe()}},Ke,re)})}_subscribe(Ue){const{source:Xe}=this;return Xe&&Xe.subscribe(Ue)}[Ee.L](){return this}pipe(...Ue){return 0===Ue.length?this:function(Ce){return 0===Ce.length?Fe.y:1===Ce.length?Ce[0]:function(Ue){return Ce.reduce((Xe,re)=>re(Xe),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=me(Ue))((Xe,re)=>{let Ke;this.subscribe(St=>Ke=St,St=>re(St),()=>Xe(Ke))})}}return Ce.create=Me=>new Ce(Me),Ce})();function me(Ce){if(Ce||(Ce=se.v.Promise||Promise),!Ce)throw new Error("no Promise impl found");return Ce}},6490:(jt,it,Q)=>{"use strict";Q.d(it,{c:()=>X});var P=Q(2494),g=Q(4449);const X={closed:!0,next(C){},error(C){if(P.v.useDeprecatedSynchronousErrorHandling)throw C;(0,g.z)(C)},complete(){}}},5197:(jt,it,Q)=>{"use strict";Q.d(it,{L:()=>g});var P=Q(7393);class g extends P.L{notifyNext(C,Ve,Ee,Fe,fe){this.destination.next(Ve)}notifyError(C,Ve){this.destination.error(C)}notifyComplete(C){this.destination.complete()}}},9765:(jt,it,Q)=>{"use strict";Q.d(it,{Yc:()=>Fe,xQ:()=>fe});var P=Q(7574),g=Q(7393),X=Q(5319),C=Q(7971),Ve=Q(8858),Ee=Q(9181);class Fe extends g.L{constructor(Se){super(Se),this.destination=Se}}let fe=(()=>{class se extends P.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Ee.b](){return new Fe(this)}lift(me){const Ce=new ve(this,this);return Ce.operator=me,Ce}next(me){if(this.closed)throw new C.N;if(!this.isStopped){const{observers:Ce}=this,Me=Ce.length,Ue=Ce.slice();for(let Xe=0;Xe<Me;Xe++)Ue[Xe].next(me)}}error(me){if(this.closed)throw new C.N;this.hasError=!0,this.thrownError=me,this.isStopped=!0;const{observers:Ce}=this,Me=Ce.length,Ue=Ce.slice();for(let Xe=0;Xe<Me;Xe++)Ue[Xe].error(me);this.observers.length=0}complete(){if(this.closed)throw new C.N;this.isStopped=!0;const{observers:me}=this,Ce=me.length,Me=me.slice();for(let Ue=0;Ue<Ce;Ue++)Me[Ue].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(me){if(this.closed)throw new C.N;return super._trySubscribe(me)}_subscribe(me){if(this.closed)throw new C.N;return this.hasError?(me.error(this.thrownError),X.w.EMPTY):this.isStopped?(me.complete(),X.w.EMPTY):(this.observers.push(me),new Ve.W(this,me))}asObservable(){const me=new P.y;return me.source=this,me}}return se.create=(Se,me)=>new ve(Se,me),se})();class ve extends fe{constructor(Se,me){super(),this.destination=Se,this.source=me}next(Se){const{destination:me}=this;me&&me.next&&me.next(Se)}error(Se){const{destination:me}=this;me&&me.error&&this.destination.error(Se)}complete(){const{destination:Se}=this;Se&&Se.complete&&this.destination.complete()}_subscribe(Se){const{source:me}=this;return me?this.source.subscribe(Se):X.w.EMPTY}}},8858:(jt,it,Q)=>{"use strict";Q.d(it,{W:()=>g});var P=Q(5319);class g extends P.w{constructor(C,Ve){super(),this.subject=C,this.subscriber=Ve,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const C=this.subject,Ve=C.observers;if(this.subject=null,!Ve||0===Ve.length||C.isStopped||C.closed)return;const Ee=Ve.indexOf(this.subscriber);-1!==Ee&&Ve.splice(Ee,1)}}},7393:(jt,it,Q)=>{"use strict";Q.d(it,{L:()=>Fe});var P=Q(9105),g=Q(6490),X=Q(5319),C=Q(9181),Ve=Q(2494),Ee=Q(4449);class Fe extends X.w{constructor(se,Se,me){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=g.c;break;case 1:if(!se){this.destination=g.c;break}if("object"==typeof se){se instanceof Fe?(this.syncErrorThrowable=se.syncErrorThrowable,this.destination=se,se.add(this)):(this.syncErrorThrowable=!0,this.destination=new fe(this,se));break}default:this.syncErrorThrowable=!0,this.destination=new fe(this,se,Se,me)}}[C.b](){return this}static create(se,Se,me){const Ce=new Fe(se,Se,me);return Ce.syncErrorThrowable=!1,Ce}next(se){this.isStopped||this._next(se)}error(se){this.isStopped||(this.isStopped=!0,this._error(se))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(se){this.destination.next(se)}_error(se){this.destination.error(se),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:se}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=se,this}}class fe extends Fe{constructor(se,Se,me,Ce){super(),this._parentSubscriber=se;let Me,Ue=this;(0,P.m)(Se)?Me=Se:Se&&(Me=Se.next,me=Se.error,Ce=Se.complete,Se!==g.c&&(Ue=Object.create(Se),(0,P.m)(Ue.unsubscribe)&&this.add(Ue.unsubscribe.bind(Ue)),Ue.unsubscribe=this.unsubscribe.bind(this))),this._context=Ue,this._next=Me,this._error=me,this._complete=Ce}next(se){if(!this.isStopped&&this._next){const{_parentSubscriber:Se}=this;Ve.v.useDeprecatedSynchronousErrorHandling&&Se.syncErrorThrowable?this.__tryOrSetError(Se,this._next,se)&&this.unsubscribe():this.__tryOrUnsub(this._next,se)}}error(se){if(!this.isStopped){const{_parentSubscriber:Se}=this,{useDeprecatedSynchronousErrorHandling:me}=Ve.v;if(this._error)me&&Se.syncErrorThrowable?(this.__tryOrSetError(Se,this._error,se),this.unsubscribe()):(this.__tryOrUnsub(this._error,se),this.unsubscribe());else if(Se.syncErrorThrowable)me?(Se.syncErrorValue=se,Se.syncErrorThrown=!0):(0,Ee.z)(se),this.unsubscribe();else{if(this.unsubscribe(),me)throw se;(0,Ee.z)(se)}}}complete(){if(!this.isStopped){const{_parentSubscriber:se}=this;if(this._complete){const Se=()=>this._complete.call(this._context);Ve.v.useDeprecatedSynchronousErrorHandling&&se.syncErrorThrowable?(this.__tryOrSetError(se,Se),this.unsubscribe()):(this.__tryOrUnsub(Se),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(se,Se){try{se.call(this._context,Se)}catch(me){if(this.unsubscribe(),Ve.v.useDeprecatedSynchronousErrorHandling)throw me;(0,Ee.z)(me)}}__tryOrSetError(se,Se,me){if(!Ve.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Se.call(this._context,me)}catch(Ce){return Ve.v.useDeprecatedSynchronousErrorHandling?(se.syncErrorValue=Ce,se.syncErrorThrown=!0,!0):((0,Ee.z)(Ce),!0)}return!1}_unsubscribe(){const{_parentSubscriber:se}=this;this._context=null,this._parentSubscriber=null,se.unsubscribe()}}},5319:(jt,it,Q)=>{"use strict";Q.d(it,{w:()=>Ee});var P=Q(9796),g=Q(1555),X=Q(9105);const Ve=(()=>{function fe(ve){return Error.call(this),this.message=ve?`${ve.length} errors occurred during unsubscription:\n${ve.map((se,Se)=>`${Se+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ve,this}return fe.prototype=Object.create(Error.prototype),fe})();class Ee{constructor(ve){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ve&&(this._ctorUnsubscribe=!0,this._unsubscribe=ve)}unsubscribe(){let ve;if(this.closed)return;let{_parentOrParents:se,_ctorUnsubscribe:Se,_unsubscribe:me,_subscriptions:Ce}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,se instanceof Ee)se.remove(this);else if(null!==se)for(let Me=0;Me<se.length;++Me)se[Me].remove(this);if((0,X.m)(me)){Se&&(this._unsubscribe=void 0);try{me.call(this)}catch(Me){ve=Me instanceof Ve?Fe(Me.errors):[Me]}}if((0,P.k)(Ce)){let Me=-1,Ue=Ce.length;for(;++Me<Ue;){const Xe=Ce[Me];if((0,g.K)(Xe))try{Xe.unsubscribe()}catch(re){ve=ve||[],re instanceof Ve?ve=ve.concat(Fe(re.errors)):ve.push(re)}}}if(ve)throw new Ve(ve)}add(ve){let se=ve;if(!ve)return Ee.EMPTY;switch(typeof ve){case"function":se=new Ee(ve);case"object":if(se===this||se.closed||"function"!=typeof se.unsubscribe)return se;if(this.closed)return se.unsubscribe(),se;if(!(se instanceof Ee)){const Ce=se;se=new Ee,se._subscriptions=[Ce]}break;default:throw new Error("unrecognized teardown "+ve+" added to Subscription.")}let{_parentOrParents:Se}=se;if(null===Se)se._parentOrParents=this;else if(Se instanceof Ee){if(Se===this)return se;se._parentOrParents=[Se,this]}else{if(-1!==Se.indexOf(this))return se;Se.push(this)}const me=this._subscriptions;return null===me?this._subscriptions=[se]:me.push(se),se}remove(ve){const se=this._subscriptions;if(se){const Se=se.indexOf(ve);-1!==Se&&se.splice(Se,1)}}}var fe;function Fe(fe){return fe.reduce((ve,se)=>ve.concat(se instanceof Ve?se.errors:se),[])}Ee.EMPTY=((fe=new Ee).closed=!0,fe)},2494:(jt,it,Q)=>{"use strict";Q.d(it,{v:()=>g});let P=!1;const g={Promise:void 0,set useDeprecatedSynchronousErrorHandling(X){if(X){const C=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+C.stack)}else P&&console.log("RxJS: Back to a better error behavior. Thank you. <3");P=X},get useDeprecatedSynchronousErrorHandling(){return P}}},5345:(jt,it,Q)=>{"use strict";Q.d(it,{IY:()=>C,Ds:()=>Ee,ft:()=>fe});var P=Q(7393),g=Q(7574),X=Q(7444);class C extends P.L{constructor(se){super(),this.parent=se}_next(se){this.parent.notifyNext(se)}_error(se){this.parent.notifyError(se),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Ee extends P.L{notifyNext(se){this.destination.next(se)}notifyError(se){this.destination.error(se)}notifyComplete(){this.destination.complete()}}function fe(ve,se){if(se.closed)return;if(ve instanceof g.y)return ve.subscribe(se);let Se;try{Se=(0,X.s)(ve)(se)}catch(me){se.error(me)}return Se}},2441:(jt,it,Q)=>{"use strict";Q.d(it,{c:()=>Ve,N:()=>Ee});var P=Q(9765),g=Q(7574),X=Q(5319),C=Q(1307);class Ve extends g.y{constructor(Se,me){super(),this.source=Se,this.subjectFactory=me,this._refCount=0,this._isComplete=!1}_subscribe(Se){return this.getSubject().subscribe(Se)}getSubject(){const Se=this._subject;return(!Se||Se.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Se=this._connection;return Se||(this._isComplete=!1,Se=this._connection=new X.w,Se.add(this.source.subscribe(new Fe(this.getSubject(),this))),Se.closed&&(this._connection=null,Se=X.w.EMPTY)),Se}refCount(){return(0,C.x)()(this)}}const Ee=(()=>{const se=Ve.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:se._subscribe},_isComplete:{value:se._isComplete,writable:!0},getSubject:{value:se.getSubject},connect:{value:se.connect},refCount:{value:se.refCount}}})();class Fe extends P.Yc{constructor(Se,me){super(Se),this.connectable=me}_error(Se){this._unsubscribe(),super._error(Se)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Se=this.connectable;if(Se){this.connectable=null;const me=Se._connection;Se._refCount=0,Se._subject=null,Se._connection=null,me&&me.unsubscribe()}}}},8071:(jt,it,Q)=>{"use strict";Q.d(it,{z:()=>C});var P=Q(5917),g=Q(3282);function C(...Ve){return(0,g.J)(1)((0,P.of)(...Ve))}},1439:(jt,it,Q)=>{"use strict";Q.d(it,{P:()=>C});var P=Q(7574),g=Q(4402),X=Q(9193);function C(Ve){return new P.y(Ee=>{let Fe;try{Fe=Ve()}catch(ve){return void Ee.error(ve)}return(Fe?(0,g.D)(Fe):(0,X.c)()).subscribe(Ee)})}},9193:(jt,it,Q)=>{"use strict";Q.d(it,{E:()=>g,c:()=>X});var P=Q(7574);const g=new P.y(Ve=>Ve.complete());function X(Ve){return Ve?function(Ve){return new P.y(Ee=>Ve.schedule(()=>Ee.complete()))}(Ve):g}},4402:(jt,it,Q)=>{"use strict";Q.d(it,{D:()=>Ue});var P=Q(7574),g=Q(7444),X=Q(5319),C=Q(6554),Fe=Q(4087),fe=Q(377),Se=Q(4072),me=Q(9489);function Ue(Xe,re){return re?function(Xe,re){if(null!=Xe){if(function(Xe){return Xe&&"function"==typeof Xe[C.L]}(Xe))return function(Xe,re){return new P.y(Ke=>{const St=new X.w;return St.add(re.schedule(()=>{const Mn=Xe[C.L]();St.add(Mn.subscribe({next(kt){St.add(re.schedule(()=>Ke.next(kt)))},error(kt){St.add(re.schedule(()=>Ke.error(kt)))},complete(){St.add(re.schedule(()=>Ke.complete()))}}))})),St})}(Xe,re);if((0,Se.t)(Xe))return function(Xe,re){return new P.y(Ke=>{const St=new X.w;return St.add(re.schedule(()=>Xe.then(Mn=>{St.add(re.schedule(()=>{Ke.next(Mn),St.add(re.schedule(()=>Ke.complete()))}))},Mn=>{St.add(re.schedule(()=>Ke.error(Mn)))}))),St})}(Xe,re);if((0,me.z)(Xe))return(0,Fe.r)(Xe,re);if(function(Xe){return Xe&&"function"==typeof Xe[fe.hZ]}(Xe)||"string"==typeof Xe)return function(Xe,re){if(!Xe)throw new Error("Iterable cannot be null");return new P.y(Ke=>{const St=new X.w;let Mn;return St.add(()=>{Mn&&"function"==typeof Mn.return&&Mn.return()}),St.add(re.schedule(()=>{Mn=Xe[fe.hZ](),St.add(re.schedule(function(){if(Ke.closed)return;let kt,dt;try{const Zt=Mn.next();kt=Zt.value,dt=Zt.done}catch(Zt){return void Ke.error(Zt)}dt?Ke.complete():(Ke.next(kt),this.schedule())}))})),St})}(Xe,re)}throw new TypeError((null!==Xe&&typeof Xe||Xe)+" is not observable")}(Xe,re):Xe instanceof P.y?Xe:new P.y((0,g.s)(Xe))}},6693:(jt,it,Q)=>{"use strict";Q.d(it,{n:()=>C});var P=Q(7574),g=Q(5015),X=Q(4087);function C(Ve,Ee){return Ee?(0,X.r)(Ve,Ee):new P.y((0,g.V)(Ve))}},6682:(jt,it,Q)=>{"use strict";Q.d(it,{T:()=>Ve});var P=Q(7574),g=Q(4869),X=Q(3282),C=Q(6693);function Ve(...Ee){let Fe=Number.POSITIVE_INFINITY,fe=null,ve=Ee[Ee.length-1];return(0,g.K)(ve)?(fe=Ee.pop(),Ee.length>1&&"number"==typeof Ee[Ee.length-1]&&(Fe=Ee.pop())):"number"==typeof ve&&(Fe=Ee.pop()),null===fe&&1===Ee.length&&Ee[0]instanceof P.y?Ee[0]:(0,X.J)(Fe)((0,C.n)(Ee,fe))}},5917:(jt,it,Q)=>{"use strict";Q.d(it,{of:()=>C});var P=Q(4869),g=Q(6693),X=Q(4087);function C(...Ve){let Ee=Ve[Ve.length-1];return(0,P.K)(Ee)?(Ve.pop(),(0,X.r)(Ve,Ee)):(0,g.n)(Ve)}},4612:(jt,it,Q)=>{"use strict";Q.d(it,{b:()=>g});var P=Q(9773);function g(X,C){return(0,P.zg)(X,C,1)}},4395:(jt,it,Q)=>{"use strict";Q.d(it,{b:()=>X});var P=Q(7393),g=Q(3637);function X(Fe,fe=g.P){return ve=>ve.lift(new C(Fe,fe))}class C{constructor(fe,ve){this.dueTime=fe,this.scheduler=ve}call(fe,ve){return ve.subscribe(new Ve(fe,this.dueTime,this.scheduler))}}class Ve extends P.L{constructor(fe,ve,se){super(fe),this.dueTime=ve,this.scheduler=se,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(fe){this.clearDebounce(),this.lastValue=fe,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ee,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:fe}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(fe)}}clearDebounce(){const fe=this.debouncedSubscription;null!==fe&&(this.remove(fe),fe.unsubscribe(),this.debouncedSubscription=null)}}function Ee(Fe){Fe.debouncedNext()}},5242:(jt,it,Q)=>{"use strict";Q.d(it,{d:()=>g});var P=Q(7393);function g(Ve=null){return Ee=>Ee.lift(new X(Ve))}class X{constructor(Ee){this.defaultValue=Ee}call(Ee,Fe){return Fe.subscribe(new C(Ee,this.defaultValue))}}class C extends P.L{constructor(Ee,Fe){super(Ee),this.defaultValue=Fe,this.isEmpty=!0}_next(Ee){this.isEmpty=!1,this.destination.next(Ee)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7519:(jt,it,Q)=>{"use strict";Q.d(it,{x:()=>g});var P=Q(7393);function g(Ve,Ee){return Fe=>Fe.lift(new X(Ve,Ee))}class X{constructor(Ee,Fe){this.compare=Ee,this.keySelector=Fe}call(Ee,Fe){return Fe.subscribe(new C(Ee,this.compare,this.keySelector))}}class C extends P.L{constructor(Ee,Fe,fe){super(Ee),this.keySelector=fe,this.hasKey=!1,"function"==typeof Fe&&(this.compare=Fe)}compare(Ee,Fe){return Ee===Fe}_next(Ee){let Fe;try{const{keySelector:ve}=this;Fe=ve?ve(Ee):Ee}catch(ve){return this.destination.error(ve)}let fe=!1;if(this.hasKey)try{const{compare:ve}=this;fe=ve(this.key,Fe)}catch(ve){return this.destination.error(ve)}else this.hasKey=!0;fe||(this.key=Fe,this.destination.next(Ee))}}},5435:(jt,it,Q)=>{"use strict";Q.d(it,{h:()=>g});var P=Q(7393);function g(Ve,Ee){return function(fe){return fe.lift(new X(Ve,Ee))}}class X{constructor(Ee,Fe){this.predicate=Ee,this.thisArg=Fe}call(Ee,Fe){return Fe.subscribe(new C(Ee,this.predicate,this.thisArg))}}class C extends P.L{constructor(Ee,Fe,fe){super(Ee),this.predicate=Fe,this.thisArg=fe,this.count=0}_next(Ee){let Fe;try{Fe=this.predicate.call(this.thisArg,Ee,this.count++)}catch(fe){return void this.destination.error(fe)}Fe&&this.destination.next(Ee)}}},8049:(jt,it,Q)=>{"use strict";Q.d(it,{P:()=>Fe});var P=Q(3410),g=Q(5435),X=Q(5257),C=Q(5242),Ve=Q(4635),Ee=Q(4487);function Fe(fe,ve){const se=arguments.length>=2;return Se=>Se.pipe(fe?(0,g.h)((me,Ce)=>fe(me,Ce,Se)):Ee.y,(0,X.q)(1),se?(0,C.d)(ve):(0,Ve.T)(()=>new P.K))}},8002:(jt,it,Q)=>{"use strict";Q.d(it,{U:()=>g});var P=Q(7393);function g(Ve,Ee){return function(fe){if("function"!=typeof Ve)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return fe.lift(new X(Ve,Ee))}}class X{constructor(Ee,Fe){this.project=Ee,this.thisArg=Fe}call(Ee,Fe){return Fe.subscribe(new C(Ee,this.project,this.thisArg))}}class C extends P.L{constructor(Ee,Fe,fe){super(Ee),this.project=Fe,this.count=0,this.thisArg=fe||this}_next(Ee){let Fe;try{Fe=this.project.call(this.thisArg,Ee,this.count++)}catch(fe){return void this.destination.error(fe)}this.destination.next(Fe)}}},3282:(jt,it,Q)=>{"use strict";Q.d(it,{J:()=>X});var P=Q(9773),g=Q(4487);function X(C=Number.POSITIVE_INFINITY){return(0,P.zg)(g.y,C)}},9773:(jt,it,Q)=>{"use strict";Q.d(it,{zg:()=>C});var P=Q(8002),g=Q(4402),X=Q(5345);function C(fe,ve,se=Number.POSITIVE_INFINITY){return"function"==typeof ve?Se=>Se.pipe(C((me,Ce)=>(0,g.D)(fe(me,Ce)).pipe((0,P.U)((Me,Ue)=>ve(me,Me,Ce,Ue))),se)):("number"==typeof ve&&(se=ve),Se=>Se.lift(new Ve(fe,se)))}class Ve{constructor(ve,se=Number.POSITIVE_INFINITY){this.project=ve,this.concurrent=se}call(ve,se){return se.subscribe(new Ee(ve,this.project,this.concurrent))}}class Ee extends X.Ds{constructor(ve,se,Se=Number.POSITIVE_INFINITY){super(ve),this.project=se,this.concurrent=Se,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ve){this.active<this.concurrent?this._tryNext(ve):this.buffer.push(ve)}_tryNext(ve){let se;const Se=this.index++;try{se=this.project(ve,Se)}catch(me){return void this.destination.error(me)}this.active++,this._innerSub(se)}_innerSub(ve){const se=new X.IY(this),Se=this.destination;Se.add(se);const me=(0,X.ft)(ve,se);me!==se&&Se.add(me)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ve){this.destination.next(ve)}notifyComplete(){const ve=this.buffer;this.active--,ve.length>0?this._next(ve.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(jt,it,Q)=>{"use strict";Q.d(it,{ht:()=>Se,QV:()=>ve});var P=Q(7393),g=Q(9193),X=Q(5917),C=Q(7574);class fe{constructor(Me,Ue,Xe){this.kind=Me,this.value=Ue,this.error=Xe,this.hasValue="N"===Me}observe(Me){switch(this.kind){case"N":return Me.next&&Me.next(this.value);case"E":return Me.error&&Me.error(this.error);case"C":return Me.complete&&Me.complete()}}do(Me,Ue,Xe){switch(this.kind){case"N":return Me&&Me(this.value);case"E":return Ue&&Ue(this.error);case"C":return Xe&&Xe()}}accept(Me,Ue,Xe){return Me&&"function"==typeof Me.next?this.observe(Me):this.do(Me,Ue,Xe)}toObservable(){switch(this.kind){case"N":return(0,X.of)(this.value);case"E":return Ce=this.error,new C.y(Ue=>Ue.error(Ce));case"C":return(0,g.c)()}var Ce;throw new Error("unexpected notification kind value")}static createNext(Me){return void 0!==Me?new fe("N",Me):fe.undefinedValueNotification}static createError(Me){return new fe("E",void 0,Me)}static createComplete(){return fe.completeNotification}}function ve(Ce,Me=0){return function(Xe){return Xe.lift(new se(Ce,Me))}}fe.completeNotification=new fe("C"),fe.undefinedValueNotification=new fe("N",void 0);class se{constructor(Me,Ue=0){this.scheduler=Me,this.delay=Ue}call(Me,Ue){return Ue.subscribe(new Se(Me,this.scheduler,this.delay))}}class Se extends P.L{constructor(Me,Ue,Xe=0){super(Me),this.scheduler=Ue,this.delay=Xe}static dispatch(Me){const{notification:Ue,destination:Xe}=Me;Ue.observe(Xe),this.unsubscribe()}scheduleMessage(Me){this.destination.add(this.scheduler.schedule(Se.dispatch,this.delay,new me(Me,this.destination)))}_next(Me){this.scheduleMessage(fe.createNext(Me))}_error(Me){this.scheduleMessage(fe.createError(Me)),this.unsubscribe()}_complete(){this.scheduleMessage(fe.createComplete()),this.unsubscribe()}}class me{constructor(Me,Ue){this.notification=Me,this.destination=Ue}}},9328:(jt,it,Q)=>{"use strict";Q.d(it,{G:()=>g});var P=Q(7393);function g(){return Ve=>Ve.lift(new X)}class X{call(Ee,Fe){return Fe.subscribe(new C(Ee))}}class C extends P.L{constructor(Ee){super(Ee),this.hasPrev=!1}_next(Ee){let Fe;this.hasPrev?Fe=[this.prev,Ee]:this.hasPrev=!0,this.prev=Ee,Fe&&this.destination.next(Fe)}}},1307:(jt,it,Q)=>{"use strict";Q.d(it,{x:()=>g});var P=Q(7393);function g(){return function(Ee){return Ee.lift(new X(Ee))}}class X{constructor(Ee){this.connectable=Ee}call(Ee,Fe){const{connectable:fe}=this;fe._refCount++;const ve=new C(Ee,fe),se=Fe.subscribe(ve);return ve.closed||(ve.connection=fe.connect()),se}}class C extends P.L{constructor(Ee,Fe){super(Ee),this.connectable=Fe}_unsubscribe(){const{connectable:Ee}=this;if(!Ee)return void(this.connection=null);this.connectable=null;const Fe=Ee._refCount;if(Fe<=0)return void(this.connection=null);if(Ee._refCount=Fe-1,Fe>1)return void(this.connection=null);const{connection:fe}=this,ve=Ee._connection;this.connection=null,ve&&(!fe||ve===fe)&&ve.unsubscribe()}}},2145:(jt,it,Q)=>{"use strict";Q.d(it,{R:()=>g});var P=Q(7393);function g(Ve,Ee){let Fe=!1;return arguments.length>=2&&(Fe=!0),function(ve){return ve.lift(new X(Ve,Ee,Fe))}}class X{constructor(Ee,Fe,fe=!1){this.accumulator=Ee,this.seed=Fe,this.hasSeed=fe}call(Ee,Fe){return Fe.subscribe(new C(Ee,this.accumulator,this.seed,this.hasSeed))}}class C extends P.L{constructor(Ee,Fe,fe,ve){super(Ee),this.accumulator=Fe,this._seed=fe,this.hasSeed=ve,this.index=0}get seed(){return this._seed}set seed(Ee){this.hasSeed=!0,this._seed=Ee}_next(Ee){if(this.hasSeed)return this._tryNext(Ee);this.seed=Ee,this.destination.next(Ee)}_tryNext(Ee){const Fe=this.index++;let fe;try{fe=this.accumulator(this.seed,Ee,Fe)}catch(ve){this.destination.error(ve)}this.seed=fe,this.destination.next(fe)}}},8819:(jt,it,Q)=>{"use strict";Q.d(it,{B:()=>Fe});var P=Q(2441);var C=Q(1307),Ve=Q(9765);function Ee(){return new Ve.xQ}function Fe(){return fe=>(0,C.x)()(function(fe,ve){return function(Se){let me;me="function"==typeof fe?fe:function(){return fe};const Ce=Object.create(Se,P.N);return Ce.source=Se,Ce.subjectFactory=me,Ce}}(Ee)(fe))}},2066:(jt,it,Q)=>{"use strict";Q.d(it,{d:()=>ve});var P=Q(9765),g=Q(7771),X=Q(5319),C=Q(309),Ve=Q(7971),Ee=Q(8858);class Fe extends P.xQ{constructor(me=Number.POSITIVE_INFINITY,Ce=Number.POSITIVE_INFINITY,Me){super(),this.scheduler=Me,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=me<1?1:me,this._windowTime=Ce<1?1:Ce,Ce===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(me){if(!this.isStopped){const Ce=this._events;Ce.push(me),Ce.length>this._bufferSize&&Ce.shift()}super.next(me)}nextTimeWindow(me){this.isStopped||(this._events.push(new fe(this._getNow(),me)),this._trimBufferThenGetEvents()),super.next(me)}_subscribe(me){const Ce=this._infiniteTimeWindow,Me=Ce?this._events:this._trimBufferThenGetEvents(),Ue=this.scheduler,Xe=Me.length;let re;if(this.closed)throw new Ve.N;if(this.isStopped||this.hasError?re=X.w.EMPTY:(this.observers.push(me),re=new Ee.W(this,me)),Ue&&me.add(me=new C.ht(me,Ue)),Ce)for(let Ke=0;Ke<Xe&&!me.closed;Ke++)me.next(Me[Ke]);else for(let Ke=0;Ke<Xe&&!me.closed;Ke++)me.next(Me[Ke].value);return this.hasError?me.error(this.thrownError):this.isStopped&&me.complete(),re}_getNow(){return(this.scheduler||g.c).now()}_trimBufferThenGetEvents(){const me=this._getNow(),Ce=this._bufferSize,Me=this._windowTime,Ue=this._events,Xe=Ue.length;let re=0;for(;re<Xe&&!(me-Ue[re].time<Me);)re++;return Xe>Ce&&(re=Math.max(re,Xe-Ce)),re>0&&Ue.splice(0,re),Ue}}class fe{constructor(me,Ce){this.time=me,this.value=Ce}}function ve(Se,me,Ce){let Me;return Me=Se&&"object"==typeof Se?Se:{bufferSize:Se,windowTime:me,refCount:!1,scheduler:Ce},Ue=>Ue.lift(function({bufferSize:Se=Number.POSITIVE_INFINITY,windowTime:me=Number.POSITIVE_INFINITY,refCount:Ce,scheduler:Me}){let Ue,re,Xe=0,Ke=!1,St=!1;return function(kt){let dt;Xe++,!Ue||Ke?(Ke=!1,Ue=new Fe(Se,me,Me),dt=Ue.subscribe(this),re=kt.subscribe({next(Zt){Ue.next(Zt)},error(Zt){Ke=!0,Ue.error(Zt)},complete(){St=!0,re=void 0,Ue.complete()}}),St&&(re=void 0)):dt=Ue.subscribe(this),this.add(()=>{Xe--,dt.unsubscribe(),dt=void 0,re&&!St&&Ce&&0===Xe&&(re.unsubscribe(),re=void 0,Ue=void 0)})}}(Me))}},9761:(jt,it,Q)=>{"use strict";Q.d(it,{O:()=>X});var P=Q(8071),g=Q(4869);function X(...C){const Ve=C[C.length-1];return(0,g.K)(Ve)?(C.pop(),Ee=>(0,P.z)(C,Ee,Ve)):Ee=>(0,P.z)(C,Ee)}},9673:(jt,it,Q)=>{"use strict";Q.d(it,{R:()=>Ve});var P=Q(7574),g=Q(4581),X=Q(6561);class C extends P.y{constructor(fe,ve=0,se=g.e){super(),this.source=fe,this.delayTime=ve,this.scheduler=se,(!(0,X.k)(ve)||ve<0)&&(this.delayTime=0),(!se||"function"!=typeof se.schedule)&&(this.scheduler=g.e)}static create(fe,ve=0,se=g.e){return new C(fe,ve,se)}static dispatch(fe){const{source:ve,subscriber:se}=fe;return this.add(ve.subscribe(se))}_subscribe(fe){return this.scheduler.schedule(C.dispatch,this.delayTime,{source:this.source,subscriber:fe})}}function Ve(Fe,fe=0){return function(se){return se.lift(new Ee(Fe,fe))}}class Ee{constructor(fe,ve){this.scheduler=fe,this.delay=ve}call(fe,ve){return new C(ve,this.delay,this.scheduler).subscribe(fe)}}},3190:(jt,it,Q)=>{"use strict";Q.d(it,{w:()=>C});var P=Q(8002),g=Q(4402),X=Q(5345);function C(Fe,fe){return"function"==typeof fe?ve=>ve.pipe(C((se,Se)=>(0,g.D)(Fe(se,Se)).pipe((0,P.U)((me,Ce)=>fe(se,me,Se,Ce))))):ve=>ve.lift(new Ve(Fe))}class Ve{constructor(fe){this.project=fe}call(fe,ve){return ve.subscribe(new Ee(fe,this.project))}}class Ee extends X.Ds{constructor(fe,ve){super(fe),this.project=ve,this.index=0}_next(fe){let ve;const se=this.index++;try{ve=this.project(fe,se)}catch(Se){return void this.destination.error(Se)}this._innerSub(ve)}_innerSub(fe){const ve=this.innerSubscription;ve&&ve.unsubscribe();const se=new X.IY(this),Se=this.destination;Se.add(se),this.innerSubscription=(0,X.ft)(fe,se),this.innerSubscription!==se&&Se.add(this.innerSubscription)}_complete(){const{innerSubscription:fe}=this;(!fe||fe.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(fe){this.destination.next(fe)}}},5257:(jt,it,Q)=>{"use strict";Q.d(it,{q:()=>C});var P=Q(7393),g=Q(7108),X=Q(9193);function C(Fe){return fe=>0===Fe?(0,X.c)():fe.lift(new Ve(Fe))}class Ve{constructor(fe){if(this.total=fe,this.total<0)throw new g.W}call(fe,ve){return ve.subscribe(new Ee(fe,this.total))}}class Ee extends P.L{constructor(fe,ve){super(fe),this.total=ve,this.count=0}_next(fe){const ve=this.total,se=++this.count;se<=ve&&(this.destination.next(fe),se===ve&&(this.destination.complete(),this.unsubscribe()))}}},3342:(jt,it,Q)=>{"use strict";Q.d(it,{b:()=>C});var P=Q(7393);function g(){}var X=Q(9105);function C(Fe,fe,ve){return function(Se){return Se.lift(new Ve(Fe,fe,ve))}}class Ve{constructor(fe,ve,se){this.nextOrObserver=fe,this.error=ve,this.complete=se}call(fe,ve){return ve.subscribe(new Ee(fe,this.nextOrObserver,this.error,this.complete))}}class Ee extends P.L{constructor(fe,ve,se,Se){super(fe),this._tapNext=g,this._tapError=g,this._tapComplete=g,this._tapError=se||g,this._tapComplete=Se||g,(0,X.m)(ve)?(this._context=this,this._tapNext=ve):ve&&(this._context=ve,this._tapNext=ve.next||g,this._tapError=ve.error||g,this._tapComplete=ve.complete||g)}_next(fe){try{this._tapNext.call(this._context,fe)}catch(ve){return void this.destination.error(ve)}this.destination.next(fe)}_error(fe){try{this._tapError.call(this._context,fe)}catch(ve){return void this.destination.error(ve)}this.destination.error(fe)}_complete(){try{this._tapComplete.call(this._context)}catch(fe){return void this.destination.error(fe)}return this.destination.complete()}}},4635:(jt,it,Q)=>{"use strict";Q.d(it,{T:()=>X});var P=Q(3410),g=Q(7393);function X(Fe=Ee){return fe=>fe.lift(new C(Fe))}class C{constructor(fe){this.errorFactory=fe}call(fe,ve){return ve.subscribe(new Ve(fe,this.errorFactory))}}class Ve extends g.L{constructor(fe,ve){super(fe),this.errorFactory=ve,this.hasValue=!1}_next(fe){this.hasValue=!0,this.destination.next(fe)}_complete(){if(this.hasValue)return this.destination.complete();{let fe;try{fe=this.errorFactory()}catch(ve){fe=ve}this.destination.error(fe)}}}function Ee(){return new P.K}},4087:(jt,it,Q)=>{"use strict";Q.d(it,{r:()=>X});var P=Q(7574),g=Q(5319);function X(C,Ve){return new P.y(Ee=>{const Fe=new g.w;let fe=0;return Fe.add(Ve.schedule(function(){fe!==C.length?(Ee.next(C[fe++]),Ee.closed||Fe.add(this.schedule())):Ee.complete()})),Fe})}},6465:(jt,it,Q)=>{"use strict";Q.d(it,{o:()=>X});var P=Q(5319);class g extends P.w{constructor(Ve,Ee){super()}schedule(Ve,Ee=0){return this}}class X extends g{constructor(Ve,Ee){super(Ve,Ee),this.scheduler=Ve,this.work=Ee,this.pending=!1}schedule(Ve,Ee=0){if(this.closed)return this;this.state=Ve;const Fe=this.id,fe=this.scheduler;return null!=Fe&&(this.id=this.recycleAsyncId(fe,Fe,Ee)),this.pending=!0,this.delay=Ee,this.id=this.id||this.requestAsyncId(fe,this.id,Ee),this}requestAsyncId(Ve,Ee,Fe=0){return setInterval(Ve.flush.bind(Ve,this),Fe)}recycleAsyncId(Ve,Ee,Fe=0){if(null!==Fe&&this.delay===Fe&&!1===this.pending)return Ee;clearInterval(Ee)}execute(Ve,Ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Fe=this._execute(Ve,Ee);if(Fe)return Fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ve,Ee){let fe,Fe=!1;try{this.work(Ve)}catch(ve){Fe=!0,fe=!!ve&&ve||new Error(ve)}if(Fe)return this.unsubscribe(),fe}_unsubscribe(){const Ve=this.id,Ee=this.scheduler,Fe=Ee.actions,fe=Fe.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==fe&&Fe.splice(fe,1),null!=Ve&&(this.id=this.recycleAsyncId(Ee,Ve,null)),this.delay=null}}},6102:(jt,it,Q)=>{"use strict";Q.d(it,{v:()=>g});let P=(()=>{class X{constructor(Ve,Ee=X.now){this.SchedulerAction=Ve,this.now=Ee}schedule(Ve,Ee=0,Fe){return new this.SchedulerAction(this,Ve).schedule(Fe,Ee)}}return X.now=()=>Date.now(),X})();class g extends P{constructor(C,Ve=P.now){super(C,()=>g.delegate&&g.delegate!==this?g.delegate.now():Ve()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(C,Ve=0,Ee){return g.delegate&&g.delegate!==this?g.delegate.schedule(C,Ve,Ee):super.schedule(C,Ve,Ee)}flush(C){const{actions:Ve}=this;if(this.active)return void Ve.push(C);let Ee;this.active=!0;do{if(Ee=C.execute(C.state,C.delay))break}while(C=Ve.shift());if(this.active=!1,Ee){for(;C=Ve.shift();)C.unsubscribe();throw Ee}}}},4581:(jt,it,Q)=>{"use strict";Q.d(it,{e:()=>me,E:()=>Se});let P=1;const g=Promise.resolve(),X={};function C(Ce){return Ce in X&&(delete X[Ce],!0)}const Ve={setImmediate(Ce){const Me=P++;return X[Me]=!0,g.then(()=>C(Me)&&Ce()),Me},clearImmediate(Ce){C(Ce)}};var Fe=Q(6465),ve=Q(6102);const Se=new class extends ve.v{flush(Me){this.active=!0,this.scheduled=void 0;const{actions:Ue}=this;let Xe,re=-1,Ke=Ue.length;Me=Me||Ue.shift();do{if(Xe=Me.execute(Me.state,Me.delay))break}while(++re<Ke&&(Me=Ue.shift()));if(this.active=!1,Xe){for(;++re<Ke&&(Me=Ue.shift());)Me.unsubscribe();throw Xe}}}(class extends Fe.o{constructor(Me,Ue){super(Me,Ue),this.scheduler=Me,this.work=Ue}requestAsyncId(Me,Ue,Xe=0){return null!==Xe&&Xe>0?super.requestAsyncId(Me,Ue,Xe):(Me.actions.push(this),Me.scheduled||(Me.scheduled=Ve.setImmediate(Me.flush.bind(Me,null))))}recycleAsyncId(Me,Ue,Xe=0){if(null!==Xe&&Xe>0||null===Xe&&this.delay>0)return super.recycleAsyncId(Me,Ue,Xe);0===Me.actions.length&&(Ve.clearImmediate(Ue),Me.scheduled=void 0)}}),me=Se},3637:(jt,it,Q)=>{"use strict";Q.d(it,{z:()=>X,P:()=>C});var P=Q(6465);const X=new(Q(6102).v)(P.o),C=X},7771:(jt,it,Q)=>{"use strict";Q.d(it,{c:()=>Ee,N:()=>Ve});var P=Q(6465),X=Q(6102);const Ve=new class extends X.v{}(class extends P.o{constructor(fe,ve){super(fe,ve),this.scheduler=fe,this.work=ve}schedule(fe,ve=0){return ve>0?super.schedule(fe,ve):(this.delay=ve,this.state=fe,this.scheduler.flush(this),this)}execute(fe,ve){return ve>0||this.closed?super.execute(fe,ve):this._execute(fe,ve)}requestAsyncId(fe,ve,se=0){return null!==se&&se>0||null===se&&this.delay>0?super.requestAsyncId(fe,ve,se):fe.flush(this)}}),Ee=Ve},377:(jt,it,Q)=>{"use strict";Q.d(it,{hZ:()=>g});const g="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(jt,it,Q)=>{"use strict";Q.d(it,{L:()=>P});const P="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(jt,it,Q)=>{"use strict";Q.d(it,{b:()=>P});const P="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(jt,it,Q)=>{"use strict";Q.d(it,{W:()=>g});const g=(()=>{function X(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return X.prototype=Object.create(Error.prototype),X})()},3410:(jt,it,Q)=>{"use strict";Q.d(it,{K:()=>g});const g=(()=>{function X(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return X.prototype=Object.create(Error.prototype),X})()},7971:(jt,it,Q)=>{"use strict";Q.d(it,{N:()=>g});const g=(()=>{function X(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return X.prototype=Object.create(Error.prototype),X})()},4449:(jt,it,Q)=>{"use strict";function P(g){setTimeout(()=>{throw g},0)}Q.d(it,{z:()=>P})},4487:(jt,it,Q)=>{"use strict";function P(g){return g}Q.d(it,{y:()=>P})},9796:(jt,it,Q)=>{"use strict";Q.d(it,{k:()=>P});const P=Array.isArray||(g=>g&&"number"==typeof g.length)},9489:(jt,it,Q)=>{"use strict";Q.d(it,{z:()=>P});const P=g=>g&&"number"==typeof g.length&&"function"!=typeof g},9105:(jt,it,Q)=>{"use strict";function P(g){return"function"==typeof g}Q.d(it,{m:()=>P})},6561:(jt,it,Q)=>{"use strict";Q.d(it,{k:()=>g});var P=Q(9796);function g(X){return!(0,P.k)(X)&&X-parseFloat(X)+1>=0}},1555:(jt,it,Q)=>{"use strict";function P(g){return null!==g&&"object"==typeof g}Q.d(it,{K:()=>P})},4072:(jt,it,Q)=>{"use strict";function P(g){return!!g&&"function"!=typeof g.subscribe&&"function"==typeof g.then}Q.d(it,{t:()=>P})},4869:(jt,it,Q)=>{"use strict";function P(g){return g&&"function"==typeof g.schedule}Q.d(it,{K:()=>P})},7444:(jt,it,Q)=>{"use strict";Q.d(it,{s:()=>Se});var P=Q(5015),g=Q(4449),C=Q(377),Ee=Q(6554),fe=Q(9489),ve=Q(4072),se=Q(1555);const Se=me=>{if(me&&"function"==typeof me[Ee.L])return(me=>Ce=>{const Me=me[Ee.L]();if("function"!=typeof Me.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Me.subscribe(Ce)})(me);if((0,fe.z)(me))return(0,P.V)(me);if((0,ve.t)(me))return(me=>Ce=>(me.then(Me=>{Ce.closed||(Ce.next(Me),Ce.complete())},Me=>Ce.error(Me)).then(null,g.z),Ce))(me);if(me&&"function"==typeof me[C.hZ])return(me=>Ce=>{const Me=me[C.hZ]();for(;;){let Ue;try{Ue=Me.next()}catch(Xe){return Ce.error(Xe),Ce}if(Ue.done){Ce.complete();break}if(Ce.next(Ue.value),Ce.closed)break}return"function"==typeof Me.return&&Ce.add(()=>{Me.return&&Me.return()}),Ce})(me);{const Me=`You provided ${(0,se.K)(me)?"an invalid object":`'${me}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Me)}}},5015:(jt,it,Q)=>{"use strict";Q.d(it,{V:()=>P});const P=g=>X=>{for(let C=0,Ve=g.length;C<Ve&&!X.closed;C++)X.next(g[C]);X.complete()}},509:(jt,it,Q)=>{"use strict";Q.d(it,{D:()=>Ve});var P=Q(7393);class g extends P.L{constructor(Fe,fe,ve){super(),this.parent=Fe,this.outerValue=fe,this.outerIndex=ve,this.index=0}_next(Fe){this.parent.notifyNext(this.outerValue,Fe,this.outerIndex,this.index++,this)}_error(Fe){this.parent.notifyError(Fe,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var X=Q(7444),C=Q(7574);function Ve(Ee,Fe,fe,ve,se=new g(Ee,fe,ve)){if(!se.closed)return Fe instanceof C.y?Fe.subscribe(se):(0,X.s)(Fe)(se)}},9437:(jt,it,Q)=>{"use strict";Q.r(it),Q.d(it,{ChatModule:()=>yh});var P=Q(8583),g=Q(665),X=Q(2340),C=Q(7716),Ve=Q(3210),Ee=Q(2213),Fe=Q(2074),fe=Q(1841);function ve(I){return null!=I&&"false"!=`${I}`}function se(I,E=0){return function(I){return!isNaN(parseFloat(I))&&!isNaN(Number(I))}(I)?Number(I):E}function me(I){return Array.isArray(I)?I:[I]}function Ce(I){return null==I?"":"string"==typeof I?I:`${I}px`}function Me(I){return I instanceof C.SBq?I.nativeElement:I}var Xe=Q(7574),re=Q(9765),Ke=Q(4395);let St=(()=>{class I{create(m){return"undefined"==typeof MutationObserver?null:new MutationObserver(m)}}return I.\u0275fac=function(m){return new(m||I)},I.\u0275prov=C.Yz7({factory:function(){return new I},token:I,providedIn:"root"}),I})(),Mn=(()=>{class I{constructor(m){this._mutationObserverFactory=m,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((m,w)=>this._cleanupObserver(w))}observe(m){const w=Me(m);return new Xe.y(z=>{const d=this._observeElement(w).subscribe(z);return()=>{d.unsubscribe(),this._unobserveElement(w)}})}_observeElement(m){if(this._observedElements.has(m))this._observedElements.get(m).count++;else{const w=new re.xQ,z=this._mutationObserverFactory.create(c=>w.next(c));z&&z.observe(m,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(m,{observer:z,stream:w,count:1})}return this._observedElements.get(m).stream}_unobserveElement(m){this._observedElements.has(m)&&(this._observedElements.get(m).count--,this._observedElements.get(m).count||this._cleanupObserver(m))}_cleanupObserver(m){if(this._observedElements.has(m)){const{observer:w,stream:z}=this._observedElements.get(m);w&&w.disconnect(),z.complete(),this._observedElements.delete(m)}}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(St))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(St))},token:I,providedIn:"root"}),I})(),kt=(()=>{class I{constructor(m,w,z){this._contentObserver=m,this._elementRef=w,this._ngZone=z,this.event=new C.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(m){this._disabled=ve(m),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(m){this._debounce=se(m),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const m=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?m.pipe((0,Ke.b)(this.debounce)):m).subscribe(this.event)})}_unsubscribe(){var m;null===(m=this._currentSubscription)||void 0===m||m.unsubscribe()}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(Mn),C.Y36(C.SBq),C.Y36(C.R0b))},I.\u0275dir=C.lG2({type:I,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),I})(),dt=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({providers:[St]}),I})();var Zt=Q(5319),Cn=(Q(6215),Q(5917));function vi(I,...E){return E.length?E.some(m=>I[m]):I.altKey||I.shiftKey||I.ctrlKey||I.metaKey}var ir=Q(3342),eo=Q(5435),to=Q(8002),lo=Q(5257),Pi=Q(7393),bi=Q(7519),Eo=Q(5345);function Nr(I){return E=>E.lift(new is(I))}class is{constructor(E){this.notifier=E}call(E,m){const w=new wo(E),z=(0,Eo.ft)(this.notifier,new Eo.IY(w));return z&&!w.seenValue?(w.add(z),m.subscribe(w)):w}}class wo extends Eo.Ds{constructor(E){super(E),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let Do;try{Do="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(I){Do=!1}let Ci,fo,ee,Or=(()=>{class I{constructor(m){this._platformId=m,this.isBrowser=this._platformId?(0,P.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Do)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(C.Lbi))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(C.Lbi))},token:I,providedIn:"root"}),I})(),no=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({}),I})();function kr(I){return function(){if(null==Ci&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ci=!0}))}finally{Ci=Ci||!1}return Ci}()?I:!!I.capture}function os(){if(null==fo){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return fo=!1,fo;if("scrollBehavior"in document.documentElement.style)fo=!0;else{const I=Element.prototype.scrollTo;fo=!!I&&!/\{\s*\[native code\]\s*\}/.test(I.toString())}}return fo}function k(I){return I.composedPath?I.composedPath()[0]:I.target}function we(){return void 0!==ee.__karma__&&!!ee.__karma__||void 0!==ee.jasmine&&!!ee.jasmine||void 0!==ee.jest&&!!ee.jest||void 0!==ee.Mocha&&!!ee.Mocha}ee="undefined"!=typeof global?global:"undefined"!=typeof window?window:{};class Dn extends class{constructor(E){this._items=E,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new re.xQ,this._typeaheadSubscription=Zt.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=m=>m.disabled,this._pressedLetters=[],this.tabOut=new re.xQ,this.change=new re.xQ,E instanceof C.n_E&&E.changes.subscribe(m=>{if(this._activeItem){const z=m.toArray().indexOf(this._activeItem);z>-1&&z!==this._activeItemIndex&&(this._activeItemIndex=z)}})}skipPredicate(E){return this._skipPredicateFn=E,this}withWrap(E=!0){return this._wrap=E,this}withVerticalOrientation(E=!0){return this._vertical=E,this}withHorizontalOrientation(E){return this._horizontal=E,this}withAllowedModifierKeys(E){return this._allowedModifierKeys=E,this}withTypeAhead(E=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,ir.b)(m=>this._pressedLetters.push(m)),(0,Ke.b)(E),(0,eo.h)(()=>this._pressedLetters.length>0),(0,to.U)(()=>this._pressedLetters.join(""))).subscribe(m=>{const w=this._getItemsArray();for(let z=1;z<w.length+1;z++){const c=(this._activeItemIndex+z)%w.length,d=w[c];if(!this._skipPredicateFn(d)&&0===d.getLabel().toUpperCase().trim().indexOf(m)){this.setActiveItem(c);break}}this._pressedLetters=[]}),this}withHomeAndEnd(E=!0){return this._homeAndEnd=E,this}setActiveItem(E){const m=this._activeItem;this.updateActiveItem(E),this._activeItem!==m&&this.change.next(this._activeItemIndex)}onKeydown(E){const m=E.keyCode,z=["altKey","ctrlKey","metaKey","shiftKey"].every(c=>!E[c]||this._allowedModifierKeys.indexOf(c)>-1);switch(m){case 9:return void this.tabOut.next();case 40:if(this._vertical&&z){this.setNextItemActive();break}return;case 38:if(this._vertical&&z){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&z){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&z){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&z){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&z){this.setLastItemActive();break}return;default:return void((z||vi(E,"shiftKey"))&&(E.key&&1===E.key.length?this._letterKeyStream.next(E.key.toLocaleUpperCase()):(m>=65&&m<=90||m>=48&&m<=57)&&this._letterKeyStream.next(String.fromCharCode(m))))}this._pressedLetters=[],E.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(E){const m=this._getItemsArray(),w="number"==typeof E?E:m.indexOf(E),z=m[w];this._activeItem=null==z?null:z,this._activeItemIndex=w}_setActiveItemByDelta(E){this._wrap?this._setActiveInWrapMode(E):this._setActiveInDefaultMode(E)}_setActiveInWrapMode(E){const m=this._getItemsArray();for(let w=1;w<=m.length;w++){const z=(this._activeItemIndex+E*w+m.length)%m.length;if(!this._skipPredicateFn(m[z]))return void this.setActiveItem(z)}}_setActiveInDefaultMode(E){this._setActiveItemByIndex(this._activeItemIndex+E,E)}_setActiveItemByIndex(E,m){const w=this._getItemsArray();if(w[E]){for(;this._skipPredicateFn(w[E]);)if(!w[E+=m])return;this.setActiveItem(E)}}_getItemsArray(){return this._items instanceof C.n_E?this._items.toArray():this._items}}{setActiveItem(E){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(E),this.activeItem&&this.activeItem.setActiveStyles()}}"undefined"!=typeof Element&&Element;const si=new C.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),To=new C.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let ai=(()=>{class I{constructor(m,w,z,c){this._ngZone=w,this._defaultOptions=c,this._document=z,this._liveElement=m||this._createLiveElement()}announce(m,...w){const z=this._defaultOptions;let c,d;return 1===w.length&&"number"==typeof w[0]?d=w[0]:[c,d]=w,this.clear(),clearTimeout(this._previousTimeout),c||(c=z&&z.politeness?z.politeness:"polite"),null==d&&z&&(d=z.duration),this._liveElement.setAttribute("aria-live",c),this._ngZone.runOutsideAngular(()=>new Promise(f=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=m,f(),"number"==typeof d&&(this._previousTimeout=setTimeout(()=>this.clear(),d))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const m="cdk-live-announcer-element",w=this._document.getElementsByClassName(m),z=this._document.createElement("div");for(let c=0;c<w.length;c++)w[c].parentNode.removeChild(w[c]);return z.classList.add(m),z.classList.add("cdk-visually-hidden"),z.setAttribute("aria-atomic","true"),z.setAttribute("aria-live","polite"),this._document.body.appendChild(z),z}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(si,8),C.LFG(C.R0b),C.LFG(P.K0),C.LFG(To,8))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(si,8),C.LFG(C.R0b),C.LFG(P.K0),C.LFG(To,8))},token:I,providedIn:"root"}),I})();const ui="cdk-high-contrast-black-on-white",$i="cdk-high-contrast-white-on-black",pi="cdk-high-contrast-active";let vn=(()=>{class I{constructor(m,w){this._platform=m,this._document=w}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const m=this._document.createElement("div");m.style.backgroundColor="rgb(1,2,3)",m.style.position="absolute",this._document.body.appendChild(m);const w=this._document.defaultView||window,z=w&&w.getComputedStyle?w.getComputedStyle(m):null,c=(z&&z.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(m),c){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const m=this._document.body.classList;m.remove(pi),m.remove(ui),m.remove($i),this._hasCheckedHighContrastMode=!0;const w=this.getHighContrastMode();1===w?(m.add(pi),m.add(ui)):2===w&&(m.add(pi),m.add($i))}}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(Or),C.LFG(P.K0))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(Or),C.LFG(P.K0))},token:I,providedIn:"root"}),I})();const $n=new C.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,C.f3M)(P.K0)}});let br=(()=>{class I{constructor(m){if(this.value="ltr",this.change=new C.vpe,m){const z=m.documentElement?m.documentElement.dir:null,c=(m.body?m.body.dir:null)||z;this.value="ltr"===c||"rtl"===c?c:"ltr"}}ngOnDestroy(){this.change.complete()}}return I.\u0275fac=function(m){return new(m||I)(C.LFG($n,8))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG($n,8))},token:I,providedIn:"root"}),I})(),Ei=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({}),I})();const ro=new C.GfV("12.2.11");var Qr=Q(6237);function Bs(I,E){if(1&I&&C._UZ(0,"mat-pseudo-checkbox",4),2&I){const m=C.oxw();C.Q6J("state",m.selected?"checked":"unchecked")("disabled",m.disabled)}}function Wi(I,E){if(1&I&&(C.TgZ(0,"span",5),C._uU(1),C.qZA()),2&I){const m=C.oxw();C.xp6(1),C.hij("(",m.group.label,")")}}const ti=["*"],Ca=new C.GfV("12.2.11"),wa=new C.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Yi,bs=(()=>{class I{constructor(m,w,z){this._hasDoneGlobalChecks=!1,this._document=z,m._applyBodyHighContrastModeCssClasses(),this._sanityChecks=w,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(m){return!(!(0,C.X6Q)()||we())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[m])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const m=this._document.createElement("div");m.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(m);const w=getComputedStyle(m);w&&"none"!==w.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(m)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&Ca.full!==ro.full&&console.warn("The Angular Material version ("+Ca.full+") does not match the Angular CDK version ("+ro.full+").\nPlease ensure the versions of these two packages exactly match.")}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(vn),C.LFG(wa,8),C.LFG(P.K0))},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[Ei],Ei]}),I})();function Wu(I){return class extends I{constructor(...E){super(...E),this._disabled=!1}get disabled(){return this._disabled}set disabled(E){this._disabled=ve(E)}}}function Da(I,E){return class extends I{constructor(...m){super(...m),this.defaultColor=E,this.color=E}get color(){return this._color}set color(m){const w=m||this.defaultColor;w!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),w&&this._elementRef.nativeElement.classList.add(`mat-${w}`),this._color=w)}}}function Yu(I){return class extends I{constructor(...E){super(...E),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(E){this._disableRipple=ve(E)}}}function hu(I,E=0){return class extends I{constructor(...m){super(...m),this._tabIndex=E,this.defaultTabIndex=E}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(m){this._tabIndex=null!=m?se(m):this.defaultTabIndex}}}function js(I){return class extends I{constructor(...E){super(...E),this.stateChanges=new re.xQ,this.errorState=!1}updateErrorState(){const E=this.errorState,c=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);c!==E&&(this.errorState=c,this.stateChanges.next())}}}try{Yi="undefined"!=typeof Intl}catch(I){Yi=!1}let fu=(()=>{class I{isErrorState(m,w){return!!(m&&m.invalid&&(m.touched||w&&w.submitted))}}return I.\u0275fac=function(m){return new(m||I)},I.\u0275prov=C.Yz7({factory:function(){return new I},token:I,providedIn:"root"}),I})();class R{constructor(E,m,w){this._renderer=E,this.element=m,this.config=w,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const O={enterDuration:225,exitDuration:150},ne=kr({passive:!0}),he=["mousedown","touchstart"],Ae=["mouseup","mouseleave","touchend","touchcancel"];class qe{constructor(E,m,w,z){this._target=E,this._ngZone=m,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,z.isBrowser&&(this._containerElement=Me(w))}fadeInRipple(E,m,w={}){const z=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),c=Object.assign(Object.assign({},O),w.animation);w.centered&&(E=z.left+z.width/2,m=z.top+z.height/2);const d=w.radius||function(I,E,m){const w=Math.max(Math.abs(I-m.left),Math.abs(I-m.right)),z=Math.max(Math.abs(E-m.top),Math.abs(E-m.bottom));return Math.sqrt(w*w+z*z)}(E,m,z),f=E-z.left,y=m-z.top,D=c.enterDuration,L=document.createElement("div");L.classList.add("mat-ripple-element"),L.style.left=f-d+"px",L.style.top=y-d+"px",L.style.height=2*d+"px",L.style.width=2*d+"px",null!=w.color&&(L.style.backgroundColor=w.color),L.style.transitionDuration=`${D}ms`,this._containerElement.appendChild(L),window.getComputedStyle(L).getPropertyValue("opacity"),L.style.transform="scale(1)";const Y=new R(this,L,w);return Y.state=0,this._activeRipples.add(Y),w.persistent||(this._mostRecentTransientRipple=Y),this._runTimeoutOutsideZone(()=>{const de=Y===this._mostRecentTransientRipple;Y.state=1,!w.persistent&&(!de||!this._isPointerDown)&&Y.fadeOut()},D),Y}fadeOutRipple(E){const m=this._activeRipples.delete(E);if(E===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!m)return;const w=E.element,z=Object.assign(Object.assign({},O),E.config.animation);w.style.transitionDuration=`${z.exitDuration}ms`,w.style.opacity="0",E.state=2,this._runTimeoutOutsideZone(()=>{E.state=3,w.parentNode.removeChild(w)},z.exitDuration)}fadeOutAll(){this._activeRipples.forEach(E=>E.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(E=>{E.config.persistent||E.fadeOut()})}setupTriggerEvents(E){const m=Me(E);!m||m===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=m,this._registerEvents(he))}handleEvent(E){"mousedown"===E.type?this._onMousedown(E):"touchstart"===E.type?this._onTouchStart(E):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Ae),this._pointerUpEventsRegistered=!0)}_onMousedown(E){const m=0===(I=E).offsetX&&0===I.offsetY,w=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;var I;!this._target.rippleDisabled&&!m&&!w&&(this._isPointerDown=!0,this.fadeInRipple(E.clientX,E.clientY,this._target.rippleConfig))}_onTouchStart(E){if(!this._target.rippleDisabled&&!function(I){const E=I.touches&&I.touches[0]||I.changedTouches&&I.changedTouches[0];return!(!E||-1!==E.identifier||null!=E.radiusX&&1!==E.radiusX||null!=E.radiusY&&1!==E.radiusY)}(E)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const m=E.changedTouches;for(let w=0;w<m.length;w++)this.fadeInRipple(m[w].clientX,m[w].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(E=>{!E.config.persistent&&(1===E.state||E.config.terminateOnPointerUp&&0===E.state)&&E.fadeOut()}))}_runTimeoutOutsideZone(E,m=0){this._ngZone.runOutsideAngular(()=>setTimeout(E,m))}_registerEvents(E){this._ngZone.runOutsideAngular(()=>{E.forEach(m=>{this._triggerElement.addEventListener(m,this,ne)})})}_removeTriggerEvents(){this._triggerElement&&(he.forEach(E=>{this._triggerElement.removeEventListener(E,this,ne)}),this._pointerUpEventsRegistered&&Ae.forEach(E=>{this._triggerElement.removeEventListener(E,this,ne)}))}}const rr=new C.OlP("mat-ripple-global-options");let Hn=(()=>{class I{constructor(m,w,z,c,d){this._elementRef=m,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=c||{},this._rippleRenderer=new qe(this,w,m,z)}get disabled(){return this._disabled}set disabled(m){m&&this.fadeOutAllNonPersistent(),this._disabled=m,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(m){this._trigger=m,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(m,w=0,z){return"number"==typeof m?this._rippleRenderer.fadeInRipple(m,w,Object.assign(Object.assign({},this.rippleConfig),z)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),m))}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(C.SBq),C.Y36(C.R0b),C.Y36(Or),C.Y36(rr,8),C.Y36(Qr.Qb,8))},I.\u0275dir=C.lG2({type:I,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(m,w){2&m&&C.ekj("mat-ripple-unbounded",w.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),I})(),Ar=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[bs,no],bs]}),I})(),Un=(()=>{class I{constructor(m){this._animationMode=m,this.state="unchecked",this.disabled=!1}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(Qr.Qb,8))},I.\u0275cmp=C.Xpm({type:I,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(m,w){2&m&&C.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===w.state)("mat-pseudo-checkbox-checked","checked"===w.state)("mat-pseudo-checkbox-disabled",w.disabled)("_mat-animation-noopable","NoopAnimations"===w._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(m,w){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),I})(),go=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[bs]]}),I})();const Uo=new C.OlP("MAT_OPTION_PARENT_COMPONENT"),mo=Wu(class{});let Hs=0,Wo=(()=>{class I extends mo{constructor(m){var w;super(),this._labelId="mat-optgroup-label-"+Hs++,this._inert=null!==(w=null==m?void 0:m.inertGroups)&&void 0!==w&&w}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(Uo,8))},I.\u0275dir=C.lG2({type:I,inputs:{label:"label"},features:[C.qOj]}),I})();const Yo=new C.OlP("MatOptgroup");let qn=0;class Ii{constructor(E,m=!1){this.source=E,this.isUserInput=m}}let ia=(()=>{class I{constructor(m,w,z,c){this._element=m,this._changeDetectorRef=w,this._parent=z,this.group=c,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+qn++,this.onSelectionChange=new C.vpe,this._stateChanges=new re.xQ}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(m){this._disabled=ve(m)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(m,w){const z=this._getHostElement();"function"==typeof z.focus&&z.focus(w)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(m){(13===m.keyCode||32===m.keyCode)&&!vi(m)&&(this._selectViaInteraction(),m.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const m=this.viewValue;m!==this._mostRecentViewValue&&(this._mostRecentViewValue=m,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(m=!1){this.onSelectionChange.emit(new Ii(this,m))}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(C.SBq),C.Y36(C.sBO),C.Y36(void 0),C.Y36(Wo))},I.\u0275dir=C.lG2({type:I,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),I})(),gu=(()=>{class I extends ia{constructor(m,w,z,c){super(m,w,z,c)}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(C.SBq),C.Y36(C.sBO),C.Y36(Uo,8),C.Y36(Yo,8))},I.\u0275cmp=C.Xpm({type:I,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(m,w){1&m&&C.NdJ("click",function(){return w._selectViaInteraction()})("keydown",function(c){return w._handleKeydown(c)}),2&m&&(C.Ikx("id",w.id),C.uIk("tabindex",w._getTabIndex())("aria-selected",w._getAriaSelected())("aria-disabled",w.disabled.toString()),C.ekj("mat-selected",w.selected)("mat-option-multiple",w.multiple)("mat-active",w.active)("mat-option-disabled",w.disabled))},exportAs:["matOption"],features:[C.qOj],ngContentSelectors:ti,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(m,w){1&m&&(C.F$t(),C.YNc(0,Bs,1,2,"mat-pseudo-checkbox",0),C.TgZ(1,"span",1),C.Hsn(2),C.qZA(),C.YNc(3,Wi,2,1,"span",2),C._UZ(4,"div",3)),2&m&&(C.Q6J("ngIf",w.multiple),C.xp6(3),C.Q6J("ngIf",w.group&&w.group._inert),C.xp6(1),C.Q6J("matRippleTrigger",w._getHostElement())("matRippleDisabled",w.disabled||w.disableRipple))},directives:[P.O5,Hn,Un],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),I})();function Za(I,E,m){if(m.length){let w=E.toArray(),z=m.toArray(),c=0;for(let d=0;d<I+1;d++)w[d].group&&w[d].group===z[c]&&c++;return c}return 0}let Lc=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[Ar,P.ez,bs,go]]}),I})();var Ku=Q(6682),ic=Q(9796),Aa=Q(9105);function Qu(I,E,m,w){return(0,Aa.m)(m)&&(w=m,m=void 0),w?Qu(I,E,m).pipe((0,to.U)(z=>(0,ic.k)(z)?w(...z):w(z))):new Xe.y(z=>{Ia(I,E,function(d){z.next(arguments.length>1?Array.prototype.slice.call(arguments):d)},z,m)})}function Ia(I,E,m,w,z){let c;if(function(I){return I&&"function"==typeof I.addEventListener&&"function"==typeof I.removeEventListener}(I)){const d=I;I.addEventListener(E,m,z),c=()=>d.removeEventListener(E,m,z)}else if(function(I){return I&&"function"==typeof I.on&&"function"==typeof I.off}(I)){const d=I;I.on(E,m),c=()=>d.off(E,m)}else if(function(I){return I&&"function"==typeof I.addListener&&"function"==typeof I.removeListener}(I)){const d=I;I.addListener(E,m),c=()=>d.removeListener(E,m)}else{if(!I||!I.length)throw new TypeError("Invalid event target");for(let d=0,f=I.length;d<f;d++)Ia(I[d],E,m,w,z)}w.add(c)}var zs=Q(9761),Sr=Q(7238);const oh=["underline"],oc=["connectionContainer"],Ko=["inputContainer"],_o=["label"];function qs(I,E){1&I&&(C.ynx(0),C.TgZ(1,"div",14),C._UZ(2,"div",15),C._UZ(3,"div",16),C._UZ(4,"div",17),C.qZA(),C.TgZ(5,"div",18),C._UZ(6,"div",15),C._UZ(7,"div",16),C._UZ(8,"div",17),C.qZA(),C.BQk())}function So(I,E){1&I&&(C.TgZ(0,"div",19),C.Hsn(1,1),C.qZA())}function $a(I,E){if(1&I&&(C.ynx(0),C.Hsn(1,2),C.TgZ(2,"span"),C._uU(3),C.qZA(),C.BQk()),2&I){const m=C.oxw(2);C.xp6(3),C.Oqu(m._control.placeholder)}}function pd(I,E){1&I&&C.Hsn(0,3,["*ngSwitchCase","true"])}function Vc(I,E){1&I&&(C.TgZ(0,"span",23),C._uU(1," *"),C.qZA())}function gd(I,E){if(1&I){const m=C.EpF();C.TgZ(0,"label",20,21),C.NdJ("cdkObserveContent",function(){return C.CHM(m),C.oxw().updateOutlineGap()}),C.YNc(2,$a,4,1,"ng-container",12),C.YNc(3,pd,1,0,"ng-content",12),C.YNc(4,Vc,2,0,"span",22),C.qZA()}if(2&I){const m=C.oxw();C.ekj("mat-empty",m._control.empty&&!m._shouldAlwaysFloat())("mat-form-field-empty",m._control.empty&&!m._shouldAlwaysFloat())("mat-accent","accent"==m.color)("mat-warn","warn"==m.color),C.Q6J("cdkObserveContentDisabled","outline"!=m.appearance)("id",m._labelId)("ngSwitch",m._hasLabel()),C.uIk("for",m._control.id)("aria-owns",m._control.id),C.xp6(2),C.Q6J("ngSwitchCase",!1),C.xp6(1),C.Q6J("ngSwitchCase",!0),C.xp6(1),C.Q6J("ngIf",!m.hideRequiredMarker&&m._control.required&&!m._control.disabled)}}function Uh(I,E){1&I&&(C.TgZ(0,"div",24),C.Hsn(1,4),C.qZA())}function sh(I,E){if(1&I&&(C.TgZ(0,"div",25,26),C._UZ(2,"span",27),C.qZA()),2&I){const m=C.oxw();C.xp6(2),C.ekj("mat-accent","accent"==m.color)("mat-warn","warn"==m.color)}}function Ol(I,E){if(1&I&&(C.TgZ(0,"div"),C.Hsn(1,5),C.qZA()),2&I){const m=C.oxw();C.Q6J("@transitionMessages",m._subscriptAnimationState)}}function Es(I,E){if(1&I&&(C.TgZ(0,"div",31),C._uU(1),C.qZA()),2&I){const m=C.oxw(2);C.Q6J("id",m._hintLabelId),C.xp6(1),C.Oqu(m.hintLabel)}}function Ps(I,E){if(1&I&&(C.TgZ(0,"div",28),C.YNc(1,Es,2,2,"div",29),C.Hsn(2,6),C._UZ(3,"div",30),C.Hsn(4,7),C.qZA()),2&I){const m=C.oxw();C.Q6J("@transitionMessages",m._subscriptAnimationState),C.xp6(1),C.Q6J("ngIf",m.hintLabel)}}const oa=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Ju=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Xu=new C.OlP("MatError"),Zs={transitionMessages:(0,Sr.X$)("transitionMessages",[(0,Sr.SB)("enter",(0,Sr.oB)({opacity:1,transform:"translateY(0%)"})),(0,Sr.eR)("void => enter",[(0,Sr.oB)({opacity:0,transform:"translateY(-5px)"}),(0,Sr.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let _u=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275dir=C.lG2({type:I}),I})();const Bc=new C.OlP("MatHint");let Oa=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275dir=C.lG2({type:I,selectors:[["mat-label"]]}),I})(),Bo=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275dir=C.lG2({type:I,selectors:[["mat-placeholder"]]}),I})();const jc=new C.OlP("MatPrefix"),Hc=new C.OlP("MatSuffix");let nl=0;const Ra=Da(class{constructor(I){this._elementRef=I}},"primary"),xl=new C.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),gi=new C.OlP("MatFormField");let bu=(()=>{class I extends Ra{constructor(m,w,z,c,d,f,y,D){super(m),this._changeDetectorRef=w,this._dir=c,this._defaults=d,this._platform=f,this._ngZone=y,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new re.xQ,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+nl++,this._labelId="mat-form-field-label-"+nl++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==D,this.appearance=d&&d.appearance?d.appearance:"legacy",this._hideRequiredMarker=!(!d||null==d.hideRequiredMarker)&&d.hideRequiredMarker}get appearance(){return this._appearance}set appearance(m){const w=this._appearance;this._appearance=m||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&w!==m&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(m){this._hideRequiredMarker=ve(m)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(m){this._hintLabel=m,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(m){m!==this._floatLabel&&(this._floatLabel=m||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(m){this._explicitFormFieldControl=m}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const m=this._control;m.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${m.controlType}`),m.stateChanges.pipe((0,zs.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),m.ngControl&&m.ngControl.valueChanges&&m.ngControl.valueChanges.pipe(Nr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Nr(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Ku.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,zs.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,zs.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Nr(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(m){const w=this._control?this._control.ngControl:null;return w&&w[m]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Qu(this._label.nativeElement,"transitionend").pipe((0,lo.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let m=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&m.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const w=this._hintChildren?this._hintChildren.find(c=>"start"===c.align):null,z=this._hintChildren?this._hintChildren.find(c=>"end"===c.align):null;w?m.push(w.id):this._hintLabel&&m.push(this._hintLabelId),z&&m.push(z.id)}else this._errorChildren&&m.push(...this._errorChildren.map(w=>w.id));this._control.setDescribedByIds(m)}}_validateControlChild(){}updateOutlineGap(){const m=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&m&&m.children.length&&m.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let w=0,z=0;const c=this._connectionContainerRef.nativeElement,d=c.querySelectorAll(".mat-form-field-outline-start"),f=c.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const y=c.getBoundingClientRect();if(0===y.width&&0===y.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(y),L=m.children,Y=this._getStartEnd(L[0].getBoundingClientRect());let de=0;for(let ye=0;ye<L.length;ye++)de+=L[ye].offsetWidth;w=Math.abs(Y-D)-5,z=de>0?.75*de+10:0}for(let y=0;y<d.length;y++)d[y].style.width=`${w}px`;for(let y=0;y<f.length;y++)f[y].style.width=`${z}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(m){return this._dir&&"rtl"===this._dir.value?m.right:m.left}_isAttachedToDOM(){const m=this._elementRef.nativeElement;if(m.getRootNode){const w=m.getRootNode();return w&&w!==m}return document.documentElement.contains(m)}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(C.SBq),C.Y36(C.sBO),C.Y36(C.SBq),C.Y36(br,8),C.Y36(xl,8),C.Y36(Or),C.Y36(C.R0b),C.Y36(Qr.Qb,8))},I.\u0275cmp=C.Xpm({type:I,selectors:[["mat-form-field"]],contentQueries:function(m,w,z){if(1&m&&(C.Suo(z,_u,5),C.Suo(z,_u,7),C.Suo(z,Oa,5),C.Suo(z,Oa,7),C.Suo(z,Bo,5),C.Suo(z,Xu,5),C.Suo(z,Bc,5),C.Suo(z,jc,5),C.Suo(z,Hc,5)),2&m){let c;C.iGM(c=C.CRH())&&(w._controlNonStatic=c.first),C.iGM(c=C.CRH())&&(w._controlStatic=c.first),C.iGM(c=C.CRH())&&(w._labelChildNonStatic=c.first),C.iGM(c=C.CRH())&&(w._labelChildStatic=c.first),C.iGM(c=C.CRH())&&(w._placeholderChild=c.first),C.iGM(c=C.CRH())&&(w._errorChildren=c),C.iGM(c=C.CRH())&&(w._hintChildren=c),C.iGM(c=C.CRH())&&(w._prefixChildren=c),C.iGM(c=C.CRH())&&(w._suffixChildren=c)}},viewQuery:function(m,w){if(1&m&&(C.Gf(oh,5),C.Gf(oc,7),C.Gf(Ko,5),C.Gf(_o,5)),2&m){let z;C.iGM(z=C.CRH())&&(w.underlineRef=z.first),C.iGM(z=C.CRH())&&(w._connectionContainerRef=z.first),C.iGM(z=C.CRH())&&(w._inputContainerRef=z.first),C.iGM(z=C.CRH())&&(w._label=z.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(m,w){2&m&&C.ekj("mat-form-field-appearance-standard","standard"==w.appearance)("mat-form-field-appearance-fill","fill"==w.appearance)("mat-form-field-appearance-outline","outline"==w.appearance)("mat-form-field-appearance-legacy","legacy"==w.appearance)("mat-form-field-invalid",w._control.errorState)("mat-form-field-can-float",w._canLabelFloat())("mat-form-field-should-float",w._shouldLabelFloat())("mat-form-field-has-label",w._hasFloatingLabel())("mat-form-field-hide-placeholder",w._hideControlPlaceholder())("mat-form-field-disabled",w._control.disabled)("mat-form-field-autofilled",w._control.autofilled)("mat-focused",w._control.focused)("ng-untouched",w._shouldForward("untouched"))("ng-touched",w._shouldForward("touched"))("ng-pristine",w._shouldForward("pristine"))("ng-dirty",w._shouldForward("dirty"))("ng-valid",w._shouldForward("valid"))("ng-invalid",w._shouldForward("invalid"))("ng-pending",w._shouldForward("pending"))("_mat-animation-noopable",!w._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[C._Bn([{provide:gi,useExisting:I}]),C.qOj],ngContentSelectors:Ju,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(m,w){1&m&&(C.F$t(oa),C.TgZ(0,"div",0),C.TgZ(1,"div",1,2),C.NdJ("click",function(c){return w._control.onContainerClick&&w._control.onContainerClick(c)}),C.YNc(3,qs,9,0,"ng-container",3),C.YNc(4,So,2,0,"div",4),C.TgZ(5,"div",5,6),C.Hsn(7),C.TgZ(8,"span",7),C.YNc(9,gd,5,16,"label",8),C.qZA(),C.qZA(),C.YNc(10,Uh,2,0,"div",9),C.qZA(),C.YNc(11,sh,3,4,"div",10),C.TgZ(12,"div",11),C.YNc(13,Ol,2,1,"div",12),C.YNc(14,Ps,5,2,"div",13),C.qZA(),C.qZA()),2&m&&(C.xp6(3),C.Q6J("ngIf","outline"==w.appearance),C.xp6(1),C.Q6J("ngIf",w._prefixChildren.length),C.xp6(5),C.Q6J("ngIf",w._hasFloatingLabel()),C.xp6(1),C.Q6J("ngIf",w._suffixChildren.length),C.xp6(1),C.Q6J("ngIf","outline"!=w.appearance),C.xp6(1),C.Q6J("ngSwitch",w._getDisplayedMessages()),C.xp6(1),C.Q6J("ngSwitchCase","error"),C.xp6(1),C.Q6J("ngSwitchCase","hint"))},directives:[P.O5,P.RF,P.n9,kt],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Zs.transitionMessages]},changeDetection:0}),I})(),uc=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[P.ez,bs,dt],bs]}),I})();var Cu=Q(6465),Eu=Q(6102);new class extends Eu.v{flush(E){this.active=!0,this.scheduled=void 0;const{actions:m}=this;let w,z=-1,c=m.length;E=E||m.shift();do{if(w=E.execute(E.state,E.delay))break}while(++z<c&&(E=m.shift()));if(this.active=!1,w){for(;++z<c&&(E=m.shift());)E.unsubscribe();throw w}}}(class extends Cu.o{constructor(E,m){super(E,m),this.scheduler=E,this.work=m}requestAsyncId(E,m,w=0){return null!==w&&w>0?super.requestAsyncId(E,m,w):(E.actions.push(this),E.scheduled||(E.scheduled=requestAnimationFrame(()=>E.flush(null))))}recycleAsyncId(E,m,w=0){if(null!==w&&w>0||null===w&&this.delay>0)return super.recycleAsyncId(E,m,w);0===E.actions.length&&(cancelAnimationFrame(m),E.scheduled=void 0)}});Q(4581);var il=Q(3637);class Ka{constructor(E){this.durationSelector=E}call(E,m){return m.subscribe(new Gc(E,this.durationSelector))}}class Gc extends Eo.Ds{constructor(E,m){super(E),this.durationSelector=m,this.hasValue=!1}_next(E){if(this.value=E,this.hasValue=!0,!this.throttled){let m;try{const{durationSelector:z}=this;m=z(E)}catch(z){return this.destination.error(z)}const w=(0,Eo.ft)(m,new Eo.IY(this));!w||w.closed?this.clearThrottle():this.add(this.throttled=w)}}clearThrottle(){const{value:E,hasValue:m,throttled:w}=this;w&&(this.remove(w),this.throttled=void 0,w.unsubscribe()),m&&(this.value=void 0,this.hasValue=!1,this.destination.next(E))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var Ao=Q(6561),Fs=Q(4869);function Pl(I){const{index:E,period:m,subscriber:w}=I;if(w.next(E),!w.closed){if(-1===m)return w.complete();I.index=E+1,this.schedule(I,m)}}function ol(I,E=il.P){return function(I){return function(m){return m.lift(new Ka(I))}}(()=>function(I=0,E,m){let w=-1;return(0,Ao.k)(E)?w=Number(E)<1?1:Number(E):(0,Fs.K)(E)&&(m=E),(0,Fs.K)(m)||(m=il.P),new Xe.y(z=>{const c=(0,Ao.k)(I)?I:+I-m.now();return m.schedule(Pl,c,{index:0,period:w,subscriber:z})})}(I,E))}Q(9328);var sa=Q(3190);Q(2066);class yo{constructor(E=!1,m,w=!0){this._multiple=E,this._emitChanges=w,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new re.xQ,m&&m.length&&(E?m.forEach(z=>this._markSelected(z)):this._markSelected(m[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...E){this._verifyValueAssignment(E),E.forEach(m=>this._markSelected(m)),this._emitChangeEvent()}deselect(...E){this._verifyValueAssignment(E),E.forEach(m=>this._unmarkSelected(m)),this._emitChangeEvent()}toggle(E){this.isSelected(E)?this.deselect(E):this.select(E)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(E){return this._selection.has(E)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(E){this._multiple&&this.selected&&this._selected.sort(E)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(E){this.isSelected(E)||(this._multiple||this._unmarkAll(),this._selection.add(E),this._emitChanges&&this._selectedToEmit.push(E))}_unmarkSelected(E){this.isSelected(E)&&(this._selection.delete(E),this._emitChanges&&this._deselectedToEmit.push(E))}_unmarkAll(){this.isEmpty()||this._selection.forEach(E=>this._unmarkSelected(E))}_verifyValueAssignment(E){}}let Iu=(()=>{class I{constructor(m,w,z){this._ngZone=m,this._platform=w,this._scrolled=new re.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=z}register(m){this.scrollContainers.has(m)||this.scrollContainers.set(m,m.elementScrolled().subscribe(()=>this._scrolled.next(m)))}deregister(m){const w=this.scrollContainers.get(m);w&&(w.unsubscribe(),this.scrollContainers.delete(m))}scrolled(m=20){return this._platform.isBrowser?new Xe.y(w=>{this._globalSubscription||this._addGlobalListener();const z=m>0?this._scrolled.pipe(ol(m)).subscribe(w):this._scrolled.subscribe(w);return this._scrolledCount++,()=>{z.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Cn.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((m,w)=>this.deregister(w)),this._scrolled.complete()}ancestorScrolled(m,w){const z=this.getAncestorScrollContainers(m);return this.scrolled(w).pipe((0,eo.h)(c=>!c||z.indexOf(c)>-1))}getAncestorScrollContainers(m){const w=[];return this.scrollContainers.forEach((z,c)=>{this._scrollableContainsElement(c,m)&&w.push(c)}),w}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(m,w){let z=Me(w),c=m.getElementRef().nativeElement;do{if(z==c)return!0}while(z=z.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Qu(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(C.R0b),C.LFG(Or),C.LFG(P.K0,8))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(C.R0b),C.LFG(Or),C.LFG(P.K0,8))},token:I,providedIn:"root"}),I})(),sl=(()=>{class I{constructor(m,w,z){this._platform=m,this._change=new re.xQ,this._changeListener=c=>{this._change.next(c)},this._document=z,w.runOutsideAngular(()=>{if(m.isBrowser){const c=this._getWindow();c.addEventListener("resize",this._changeListener),c.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const m=this._getWindow();m.removeEventListener("resize",this._changeListener),m.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const m={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),m}getViewportRect(){const m=this.getViewportScrollPosition(),{width:w,height:z}=this.getViewportSize();return{top:m.top,left:m.left,bottom:m.top+z,right:m.left+w,height:z,width:w}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const m=this._document,w=this._getWindow(),z=m.documentElement,c=z.getBoundingClientRect();return{top:-c.top||m.body.scrollTop||w.scrollY||z.scrollTop||0,left:-c.left||m.body.scrollLeft||w.scrollX||z.scrollLeft||0}}change(m=20){return m>0?this._change.pipe(ol(m)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const m=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:m.innerWidth,height:m.innerHeight}:{width:0,height:0}}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(Or),C.LFG(C.R0b),C.LFG(P.K0,8))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(Or),C.LFG(C.R0b),C.LFG(P.K0,8))},token:I,providedIn:"root"}),I})(),ua=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({}),I})(),al=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[Ei,no,ua],Ei,ua]}),I})();class Nl{attach(E){return this._attachedHost=E,E.attach(this)}detach(){let E=this._attachedHost;null!=E&&(this._attachedHost=null,E.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(E){this._attachedHost=E}}class $c extends Nl{constructor(E,m,w,z){super(),this.component=E,this.viewContainerRef=m,this.injector=w,this.componentFactoryResolver=z}}class hc extends Nl{constructor(E,m,w){super(),this.templateRef=E,this.viewContainerRef=m,this.context=w}get origin(){return this.templateRef.elementRef}attach(E,m=this.context){return this.context=m,super.attach(E)}detach(){return this.context=void 0,super.detach()}}class ch extends Nl{constructor(E){super(),this.element=E instanceof C.SBq?E.nativeElement:E}}class Jo extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(E){return E instanceof $c?(this._attachedPortal=E,this.attachComponentPortal(E)):E instanceof hc?(this._attachedPortal=E,this.attachTemplatePortal(E)):this.attachDomPortal&&E instanceof ch?(this._attachedPortal=E,this.attachDomPortal(E)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(E){this._disposeFn=E}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(E,m,w,z,c){super(),this.outletElement=E,this._componentFactoryResolver=m,this._appRef=w,this._defaultInjector=z,this.attachDomPortal=d=>{const f=d.element,y=this._document.createComment("dom-portal");f.parentNode.insertBefore(y,f),this.outletElement.appendChild(f),this._attachedPortal=d,super.setDisposeFn(()=>{y.parentNode&&y.parentNode.replaceChild(f,y)})},this._document=c}attachComponentPortal(E){const w=(E.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(E.component);let z;return E.viewContainerRef?(z=E.viewContainerRef.createComponent(w,E.viewContainerRef.length,E.injector||E.viewContainerRef.injector),this.setDisposeFn(()=>z.destroy())):(z=w.create(E.injector||this._defaultInjector),this._appRef.attachView(z.hostView),this.setDisposeFn(()=>{this._appRef.detachView(z.hostView),z.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(z)),this._attachedPortal=E,z}attachTemplatePortal(E){let m=E.viewContainerRef,w=m.createEmbeddedView(E.templateRef,E.context);return w.rootNodes.forEach(z=>this.outletElement.appendChild(z)),w.detectChanges(),this.setDisposeFn(()=>{let z=m.indexOf(w);-1!==z&&m.remove(z)}),this._attachedPortal=E,w}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(E){return E.hostView.rootNodes[0]}}let ul=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({}),I})();class Ed{constructor(E,m){this.predicate=E,this.inclusive=m}call(E,m){return m.subscribe(new la(E,this.predicate,this.inclusive))}}class la extends Pi.L{constructor(E,m,w){super(E),this.predicate=m,this.inclusive=w,this.index=0}_next(E){const m=this.destination;let w;try{w=this.predicate(E,this.index++)}catch(z){return void m.error(z)}this.nextOrComplete(E,w)}nextOrComplete(E,m){const w=this.destination;Boolean(m)?w.next(E):(this.inclusive&&w.next(E),w.complete())}}const Ru=os();class ll{constructor(E,m){this._viewportRuler=E,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=m}attach(){}enable(){if(this._canBeEnabled()){const E=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=E.style.left||"",this._previousHTMLStyles.top=E.style.top||"",E.style.left=Ce(-this._previousScrollPosition.left),E.style.top=Ce(-this._previousScrollPosition.top),E.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const E=this._document.documentElement,w=E.style,z=this._document.body.style,c=w.scrollBehavior||"",d=z.scrollBehavior||"";this._isEnabled=!1,w.left=this._previousHTMLStyles.left,w.top=this._previousHTMLStyles.top,E.classList.remove("cdk-global-scrollblock"),Ru&&(w.scrollBehavior=z.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Ru&&(w.scrollBehavior=c,z.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const m=this._document.body,w=this._viewportRuler.getViewportSize();return m.scrollHeight>w.height||m.scrollWidth>w.width}}class Yc{constructor(E,m,w,z){this._scrollDispatcher=E,this._ngZone=m,this._viewportRuler=w,this._config=z,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(E){this._overlayRef=E}enable(){if(this._scrollSubscription)return;const E=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=E.subscribe(()=>{const m=this._viewportRuler.getViewportScrollPosition().top;Math.abs(m-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=E.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class cl{enable(){}disable(){}attach(){}}function fc(I,E){return E.some(m=>I.bottom<m.top||I.top>m.bottom||I.right<m.left||I.left>m.right)}function pc(I,E){return E.some(m=>I.top<m.top||I.bottom>m.bottom||I.left<m.left||I.right>m.right)}class Kc{constructor(E,m,w,z){this._scrollDispatcher=E,this._viewportRuler=m,this._ngZone=w,this._config=z,this._scrollSubscription=null}attach(E){this._overlayRef=E}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const m=this._overlayRef.overlayElement.getBoundingClientRect(),{width:w,height:z}=this._viewportRuler.getViewportSize();fc(m,[{width:w,height:z,bottom:z,right:w,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Qc=(()=>{class I{constructor(m,w,z,c){this._scrollDispatcher=m,this._viewportRuler=w,this._ngZone=z,this.noop=()=>new cl,this.close=d=>new Yc(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new ll(this._viewportRuler,this._document),this.reposition=d=>new Kc(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=c}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(Iu),C.LFG(sl),C.LFG(C.R0b),C.LFG(P.K0))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(Iu),C.LFG(sl),C.LFG(C.R0b),C.LFG(P.K0))},token:I,providedIn:"root"}),I})();class gc{constructor(E){if(this.scrollStrategy=new cl,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,E){const m=Object.keys(E);for(const w of m)void 0!==E[w]&&(this[w]=E[w])}}}class Xo{constructor(E,m,w,z,c){this.offsetX=w,this.offsetY=z,this.panelClass=c,this.originX=E.originX,this.originY=E.originY,this.overlayX=m.overlayX,this.overlayY=m.overlayY}}class ca{constructor(E,m){this.connectionPair=E,this.scrollableViewProperties=m}}let Vl=(()=>{class I{constructor(m){this._attachedOverlays=[],this._document=m}ngOnDestroy(){this.detach()}add(m){this.remove(m),this._attachedOverlays.push(m)}remove(m){const w=this._attachedOverlays.indexOf(m);w>-1&&this._attachedOverlays.splice(w,1),0===this._attachedOverlays.length&&this.detach()}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(P.K0))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(P.K0))},token:I,providedIn:"root"}),I})(),wd=(()=>{class I extends Vl{constructor(m){super(m),this._keydownListener=w=>{const z=this._attachedOverlays;for(let c=z.length-1;c>-1;c--)if(z[c]._keydownEvents.observers.length>0){z[c]._keydownEvents.next(w);break}}}add(m){super.add(m),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(P.K0))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(P.K0))},token:I,providedIn:"root"}),I})(),_c=(()=>{class I extends Vl{constructor(m,w){super(m),this._platform=w,this._cursorStyleIsSet=!1,this._pointerDownListener=z=>{this._pointerDownEventTarget=k(z)},this._clickListener=z=>{const c=k(z),d="click"===z.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const f=this._attachedOverlays.slice();for(let y=f.length-1;y>-1;y--){const D=f[y];if(!(D._outsidePointerEvents.observers.length<1)&&D.hasAttached()){if(D.overlayElement.contains(c)||D.overlayElement.contains(d))break;D._outsidePointerEvents.next(z)}}}}add(m){if(super.add(m),!this._isAttached){const w=this._document.body;w.addEventListener("pointerdown",this._pointerDownListener,!0),w.addEventListener("click",this._clickListener,!0),w.addEventListener("auxclick",this._clickListener,!0),w.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=w.style.cursor,w.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const m=this._document.body;m.removeEventListener("pointerdown",this._pointerDownListener,!0),m.removeEventListener("click",this._clickListener,!0),m.removeEventListener("auxclick",this._clickListener,!0),m.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(m.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(P.K0),C.LFG(Or))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(P.K0),C.LFG(Or))},token:I,providedIn:"root"}),I})(),Ys=(()=>{class I{constructor(m,w){this._platform=w,this._document=m}ngOnDestroy(){const m=this._containerElement;m&&m.parentNode&&m.parentNode.removeChild(m)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const m="cdk-overlay-container";if(this._platform.isBrowser||we()){const z=this._document.querySelectorAll(`.${m}[platform="server"], .${m}[platform="test"]`);for(let c=0;c<z.length;c++)z[c].parentNode.removeChild(z[c])}const w=this._document.createElement("div");w.classList.add(m),we()?w.setAttribute("platform","test"):this._platform.isBrowser||w.setAttribute("platform","server"),this._document.body.appendChild(w),this._containerElement=w}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(P.K0),C.LFG(Or))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(P.K0),C.LFG(Or))},token:I,providedIn:"root"}),I})();class Ks{constructor(E,m,w,z,c,d,f,y,D){this._portalOutlet=E,this._host=m,this._pane=w,this._config=z,this._ngZone=c,this._keyboardDispatcher=d,this._document=f,this._location=y,this._outsideClickDispatcher=D,this._backdropElement=null,this._backdropClick=new re.xQ,this._attachments=new re.xQ,this._detachments=new re.xQ,this._locationChanges=Zt.w.EMPTY,this._backdropClickHandler=L=>this._backdropClick.next(L),this._keydownEvents=new re.xQ,this._outsidePointerEvents=new re.xQ,z.scrollStrategy&&(this._scrollStrategy=z.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=z.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(E){let m=this._portalOutlet.attach(E);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,lo.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),m}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const E=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),E}dispose(){const E=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,E&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(E){E!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=E,this.hasAttached()&&(E.attach(this),this.updatePosition()))}updateSize(E){this._config=Object.assign(Object.assign({},this._config),E),this._updateElementSize()}setDirection(E){this._config=Object.assign(Object.assign({},this._config),{direction:E}),this._updateElementDirection()}addPanelClass(E){this._pane&&this._toggleClasses(this._pane,E,!0)}removePanelClass(E){this._pane&&this._toggleClasses(this._pane,E,!1)}getDirection(){const E=this._config.direction;return E?"string"==typeof E?E:E.value:"ltr"}updateScrollStrategy(E){E!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=E,this.hasAttached()&&(E.attach(this),E.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const E=this._pane.style;E.width=Ce(this._config.width),E.height=Ce(this._config.height),E.minWidth=Ce(this._config.minWidth),E.minHeight=Ce(this._config.minHeight),E.maxWidth=Ce(this._config.maxWidth),E.maxHeight=Ce(this._config.maxHeight)}_togglePointerEvents(E){this._pane.style.pointerEvents=E?"":"none"}_attachBackdrop(){const E="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(E)})}):this._backdropElement.classList.add(E)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const E=this._backdropElement;if(!E)return;let m;const w=()=>{E&&(E.removeEventListener("click",this._backdropClickHandler),E.removeEventListener("transitionend",w),this._disposeBackdrop(E)),this._config.backdropClass&&this._toggleClasses(E,this._config.backdropClass,!1),clearTimeout(m)};E.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{E.addEventListener("transitionend",w)}),E.style.pointerEvents="none",m=this._ngZone.runOutsideAngular(()=>setTimeout(w,500))}_toggleClasses(E,m,w){const z=E.classList;me(m).forEach(c=>{c&&(w?z.add(c):z.remove(c))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const E=this._ngZone.onStable.pipe(Nr((0,Ku.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),E.unsubscribe())})})}_disposeScrollStrategy(){const E=this._scrollStrategy;E&&(E.disable(),E.detach&&E.detach())}_disposeBackdrop(E){E&&(E.parentNode&&E.parentNode.removeChild(E),this._backdropElement===E&&(this._backdropElement=null))}}const Dd="cdk-overlay-connected-position-bounding-box",yc=/([A-Za-z%]+)$/;class da{constructor(E,m,w,z,c){this._viewportRuler=m,this._document=w,this._platform=z,this._overlayContainer=c,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new re.xQ,this._resizeSubscription=Zt.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(E)}get positions(){return this._preferredPositions}attach(E){this._validatePositions(),E.hostElement.classList.add(Dd),this._overlayRef=E,this._boundingBox=E.hostElement,this._pane=E.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const E=this._originRect,m=this._overlayRect,w=this._viewportRect,z=[];let c;for(let d of this._preferredPositions){let f=this._getOriginPoint(E,d),y=this._getOverlayPoint(f,m,d),D=this._getOverlayFit(y,m,w,d);if(D.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,f);this._canFitWithFlexibleDimensions(D,y,w)?z.push({position:d,origin:f,overlayRect:m,boundingBoxRect:this._calculateBoundingBoxRect(f,d)}):(!c||c.overlayFit.visibleArea<D.visibleArea)&&(c={overlayFit:D,overlayPoint:y,originPoint:f,position:d,overlayRect:m})}if(z.length){let d=null,f=-1;for(const y of z){const D=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);D>f&&(f=D,d=y)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&xu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Dd),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const E=this._lastPosition||this._preferredPositions[0],m=this._getOriginPoint(this._originRect,E);this._applyPosition(E,m)}}withScrollableContainers(E){return this._scrollables=E,this}withPositions(E){return this._preferredPositions=E,-1===E.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(E){return this._viewportMargin=E,this}withFlexibleDimensions(E=!0){return this._hasFlexibleDimensions=E,this}withGrowAfterOpen(E=!0){return this._growAfterOpen=E,this}withPush(E=!0){return this._canPush=E,this}withLockedPosition(E=!0){return this._positionLocked=E,this}setOrigin(E){return this._origin=E,this}withDefaultOffsetX(E){return this._offsetX=E,this}withDefaultOffsetY(E){return this._offsetY=E,this}withTransformOriginOn(E){return this._transformOriginSelector=E,this}_getOriginPoint(E,m){let w,z;if("center"==m.originX)w=E.left+E.width/2;else{const c=this._isRtl()?E.right:E.left,d=this._isRtl()?E.left:E.right;w="start"==m.originX?c:d}return z="center"==m.originY?E.top+E.height/2:"top"==m.originY?E.top:E.bottom,{x:w,y:z}}_getOverlayPoint(E,m,w){let z,c;return z="center"==w.overlayX?-m.width/2:"start"===w.overlayX?this._isRtl()?-m.width:0:this._isRtl()?0:-m.width,c="center"==w.overlayY?-m.height/2:"top"==w.overlayY?0:-m.height,{x:E.x+z,y:E.y+c}}_getOverlayFit(E,m,w,z){const c=eu(m);let{x:d,y:f}=E,y=this._getOffset(z,"x"),D=this._getOffset(z,"y");y&&(d+=y),D&&(f+=D);let de=0-f,ye=f+c.height-w.height,Ie=this._subtractOverflows(c.width,0-d,d+c.width-w.width),Ne=this._subtractOverflows(c.height,de,ye),ht=Ie*Ne;return{visibleArea:ht,isCompletelyWithinViewport:c.width*c.height===ht,fitsInViewportVertically:Ne===c.height,fitsInViewportHorizontally:Ie==c.width}}_canFitWithFlexibleDimensions(E,m,w){if(this._hasFlexibleDimensions){const z=w.bottom-m.y,c=w.right-m.x,d=Ts(this._overlayRef.getConfig().minHeight),f=Ts(this._overlayRef.getConfig().minWidth),D=E.fitsInViewportHorizontally||null!=f&&f<=c;return(E.fitsInViewportVertically||null!=d&&d<=z)&&D}return!1}_pushOverlayOnScreen(E,m,w){if(this._previousPushAmount&&this._positionLocked)return{x:E.x+this._previousPushAmount.x,y:E.y+this._previousPushAmount.y};const z=eu(m),c=this._viewportRect,d=Math.max(E.x+z.width-c.width,0),f=Math.max(E.y+z.height-c.height,0),y=Math.max(c.top-w.top-E.y,0),D=Math.max(c.left-w.left-E.x,0);let L=0,Y=0;return L=z.width<=c.width?D||-d:E.x<this._viewportMargin?c.left-w.left-E.x:0,Y=z.height<=c.height?y||-f:E.y<this._viewportMargin?c.top-w.top-E.y:0,this._previousPushAmount={x:L,y:Y},{x:E.x+L,y:E.y+Y}}_applyPosition(E,m){if(this._setTransformOrigin(E),this._setOverlayElementStyles(m,E),this._setBoundingBoxStyles(m,E),E.panelClass&&this._addPanelClasses(E.panelClass),this._lastPosition=E,this._positionChanges.observers.length){const w=this._getScrollVisibility(),z=new ca(E,w);this._positionChanges.next(z)}this._isInitialRender=!1}_setTransformOrigin(E){if(!this._transformOriginSelector)return;const m=this._boundingBox.querySelectorAll(this._transformOriginSelector);let w,z=E.overlayY;w="center"===E.overlayX?"center":this._isRtl()?"start"===E.overlayX?"right":"left":"start"===E.overlayX?"left":"right";for(let c=0;c<m.length;c++)m[c].style.transformOrigin=`${w} ${z}`}_calculateBoundingBoxRect(E,m){const w=this._viewportRect,z=this._isRtl();let c,d,f,L,Y,de;if("top"===m.overlayY)d=E.y,c=w.height-d+this._viewportMargin;else if("bottom"===m.overlayY)f=w.height-E.y+2*this._viewportMargin,c=w.height-f+this._viewportMargin;else{const ye=Math.min(w.bottom-E.y+w.top,E.y),Ie=this._lastBoundingBoxSize.height;c=2*ye,d=E.y-ye,c>Ie&&!this._isInitialRender&&!this._growAfterOpen&&(d=E.y-Ie/2)}if("end"===m.overlayX&&!z||"start"===m.overlayX&&z)de=w.width-E.x+this._viewportMargin,L=E.x-this._viewportMargin;else if("start"===m.overlayX&&!z||"end"===m.overlayX&&z)Y=E.x,L=w.right-E.x;else{const ye=Math.min(w.right-E.x+w.left,E.x),Ie=this._lastBoundingBoxSize.width;L=2*ye,Y=E.x-ye,L>Ie&&!this._isInitialRender&&!this._growAfterOpen&&(Y=E.x-Ie/2)}return{top:d,left:Y,bottom:f,right:de,width:L,height:c}}_setBoundingBoxStyles(E,m){const w=this._calculateBoundingBoxRect(E,m);!this._isInitialRender&&!this._growAfterOpen&&(w.height=Math.min(w.height,this._lastBoundingBoxSize.height),w.width=Math.min(w.width,this._lastBoundingBoxSize.width));const z={};if(this._hasExactPosition())z.top=z.left="0",z.bottom=z.right=z.maxHeight=z.maxWidth="",z.width=z.height="100%";else{const c=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;z.height=Ce(w.height),z.top=Ce(w.top),z.bottom=Ce(w.bottom),z.width=Ce(w.width),z.left=Ce(w.left),z.right=Ce(w.right),z.alignItems="center"===m.overlayX?"center":"end"===m.overlayX?"flex-end":"flex-start",z.justifyContent="center"===m.overlayY?"center":"bottom"===m.overlayY?"flex-end":"flex-start",c&&(z.maxHeight=Ce(c)),d&&(z.maxWidth=Ce(d))}this._lastBoundingBoxSize=w,xu(this._boundingBox.style,z)}_resetBoundingBoxStyles(){xu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){xu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(E,m){const w={},z=this._hasExactPosition(),c=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(z){const L=this._viewportRuler.getViewportScrollPosition();xu(w,this._getExactOverlayY(m,E,L)),xu(w,this._getExactOverlayX(m,E,L))}else w.position="static";let f="",y=this._getOffset(m,"x"),D=this._getOffset(m,"y");y&&(f+=`translateX(${y}px) `),D&&(f+=`translateY(${D}px)`),w.transform=f.trim(),d.maxHeight&&(z?w.maxHeight=Ce(d.maxHeight):c&&(w.maxHeight="")),d.maxWidth&&(z?w.maxWidth=Ce(d.maxWidth):c&&(w.maxWidth="")),xu(this._pane.style,w)}_getExactOverlayY(E,m,w){let z={top:"",bottom:""},c=this._getOverlayPoint(m,this._overlayRect,E);this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,w));let d=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return c.y-=d,"bottom"===E.overlayY?z.bottom=this._document.documentElement.clientHeight-(c.y+this._overlayRect.height)+"px":z.top=Ce(c.y),z}_getExactOverlayX(E,m,w){let d,z={left:"",right:""},c=this._getOverlayPoint(m,this._overlayRect,E);return this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,w)),d=this._isRtl()?"end"===E.overlayX?"left":"right":"end"===E.overlayX?"right":"left","right"===d?z.right=this._document.documentElement.clientWidth-(c.x+this._overlayRect.width)+"px":z.left=Ce(c.x),z}_getScrollVisibility(){const E=this._getOriginRect(),m=this._pane.getBoundingClientRect(),w=this._scrollables.map(z=>z.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:pc(E,w),isOriginOutsideView:fc(E,w),isOverlayClipped:pc(m,w),isOverlayOutsideView:fc(m,w)}}_subtractOverflows(E,...m){return m.reduce((w,z)=>w-Math.max(z,0),E)}_getNarrowedViewportRect(){const E=this._document.documentElement.clientWidth,m=this._document.documentElement.clientHeight,w=this._viewportRuler.getViewportScrollPosition();return{top:w.top+this._viewportMargin,left:w.left+this._viewportMargin,right:w.left+E-this._viewportMargin,bottom:w.top+m-this._viewportMargin,width:E-2*this._viewportMargin,height:m-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(E,m){return"x"===m?null==E.offsetX?this._offsetX:E.offsetX:null==E.offsetY?this._offsetY:E.offsetY}_validatePositions(){}_addPanelClasses(E){this._pane&&me(E).forEach(m=>{""!==m&&-1===this._appliedPanelClasses.indexOf(m)&&(this._appliedPanelClasses.push(m),this._pane.classList.add(m))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(E=>{this._pane.classList.remove(E)}),this._appliedPanelClasses=[])}_getOriginRect(){const E=this._origin;if(E instanceof C.SBq)return E.nativeElement.getBoundingClientRect();if(E instanceof Element)return E.getBoundingClientRect();const m=E.width||0,w=E.height||0;return{top:E.y,bottom:E.y+w,left:E.x,right:E.x+m,height:w,width:m}}}function xu(I,E){for(let m in E)E.hasOwnProperty(m)&&(I[m]=E[m]);return I}function Ts(I){if("number"!=typeof I&&null!=I){const[E,m]=I.split(yc);return m&&"px"!==m?null:parseFloat(E)}return I||null}function eu(I){return{top:Math.floor(I.top),right:Math.floor(I.right),bottom:Math.floor(I.bottom),left:Math.floor(I.left),width:Math.floor(I.width),height:Math.floor(I.height)}}class mi{constructor(E,m,w,z,c,d,f){this._preferredPositions=[],this._positionStrategy=new da(w,z,c,d,f).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(E,m),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(E){this._overlayRef=E,this._positionStrategy.attach(E),this._direction&&(E.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(E){this._positionStrategy.withScrollableContainers(E)}withFallbackPosition(E,m,w,z){const c=new Xo(E,m,w,z);return this._preferredPositions.push(c),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(E){return this._overlayRef?this._overlayRef.setDirection(E):this._direction=E,this}withOffsetX(E){return this._positionStrategy.withDefaultOffsetX(E),this}withOffsetY(E){return this._positionStrategy.withDefaultOffsetY(E),this}withLockedPosition(E){return this._positionStrategy.withLockedPosition(E),this}withPositions(E){return this._preferredPositions=E.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(E){return this._positionStrategy.setOrigin(E),this}}const ni="cdk-global-overlay-wrapper";class Pu{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(E){const m=E.getConfig();this._overlayRef=E,this._width&&!m.width&&E.updateSize({width:this._width}),this._height&&!m.height&&E.updateSize({height:this._height}),E.hostElement.classList.add(ni),this._isDisposed=!1}top(E=""){return this._bottomOffset="",this._topOffset=E,this._alignItems="flex-start",this}left(E=""){return this._rightOffset="",this._leftOffset=E,this._justifyContent="flex-start",this}bottom(E=""){return this._topOffset="",this._bottomOffset=E,this._alignItems="flex-end",this}right(E=""){return this._leftOffset="",this._rightOffset=E,this._justifyContent="flex-end",this}width(E=""){return this._overlayRef?this._overlayRef.updateSize({width:E}):this._width=E,this}height(E=""){return this._overlayRef?this._overlayRef.updateSize({height:E}):this._height=E,this}centerHorizontally(E=""){return this.left(E),this._justifyContent="center",this}centerVertically(E=""){return this.top(E),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const E=this._overlayRef.overlayElement.style,m=this._overlayRef.hostElement.style,w=this._overlayRef.getConfig(),{width:z,height:c,maxWidth:d,maxHeight:f}=w,y=!("100%"!==z&&"100vw"!==z||d&&"100%"!==d&&"100vw"!==d),D=!("100%"!==c&&"100vh"!==c||f&&"100%"!==f&&"100vh"!==f);E.position=this._cssPosition,E.marginLeft=y?"0":this._leftOffset,E.marginTop=D?"0":this._topOffset,E.marginBottom=this._bottomOffset,E.marginRight=this._rightOffset,y?m.justifyContent="flex-start":"center"===this._justifyContent?m.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?m.justifyContent="flex-end":"flex-end"===this._justifyContent&&(m.justifyContent="flex-start"):m.justifyContent=this._justifyContent,m.alignItems=D?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const E=this._overlayRef.overlayElement.style,m=this._overlayRef.hostElement,w=m.style;m.classList.remove(ni),w.justifyContent=w.alignItems=E.marginTop=E.marginBottom=E.marginLeft=E.marginRight=E.position="",this._overlayRef=null,this._isDisposed=!0}}let vc=(()=>{class I{constructor(m,w,z,c){this._viewportRuler=m,this._document=w,this._platform=z,this._overlayContainer=c}global(){return new Pu}connectedTo(m,w,z){return new mi(w,z,m,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(m){return new da(m,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(sl),C.LFG(P.K0),C.LFG(Or),C.LFG(Ys))},I.\u0275prov=C.Yz7({factory:function(){return new I(C.LFG(sl),C.LFG(P.K0),C.LFG(Or),C.LFG(Ys))},token:I,providedIn:"root"}),I})(),ji=0,wi=(()=>{class I{constructor(m,w,z,c,d,f,y,D,L,Y,de){this.scrollStrategies=m,this._overlayContainer=w,this._componentFactoryResolver=z,this._positionBuilder=c,this._keyboardDispatcher=d,this._injector=f,this._ngZone=y,this._document=D,this._directionality=L,this._location=Y,this._outsideClickDispatcher=de}create(m){const w=this._createHostElement(),z=this._createPaneElement(w),c=this._createPortalOutlet(z),d=new gc(m);return d.direction=d.direction||this._directionality.value,new Ks(c,w,z,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(m){const w=this._document.createElement("div");return w.id="cdk-overlay-"+ji++,w.classList.add("cdk-overlay-pane"),m.appendChild(w),w}_createHostElement(){const m=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(m),m}_createPortalOutlet(m){return this._appRef||(this._appRef=this._injector.get(C.z2F)),new Jo(m,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return I.\u0275fac=function(m){return new(m||I)(C.LFG(Qc),C.LFG(Ys),C.LFG(C._Vd),C.LFG(vc),C.LFG(wd),C.LFG(C.zs3),C.LFG(C.R0b),C.LFG(P.K0),C.LFG(br),C.LFG(P.Ye),C.LFG(_c))},I.\u0275prov=C.Yz7({token:I,factory:I.\u0275fac}),I})();const Mo=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],io=new C.OlP("cdk-connected-overlay-scroll-strategy");let ps=(()=>{class I{constructor(m){this.elementRef=m}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(C.SBq))},I.\u0275dir=C.lG2({type:I,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),I})(),xo=(()=>{class I{constructor(m,w,z,c,d){this._overlay=m,this._dir=d,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Zt.w.EMPTY,this._attachSubscription=Zt.w.EMPTY,this._detachSubscription=Zt.w.EMPTY,this._positionSubscription=Zt.w.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new C.vpe,this.positionChange=new C.vpe,this.attach=new C.vpe,this.detach=new C.vpe,this.overlayKeydown=new C.vpe,this.overlayOutsideClick=new C.vpe,this._templatePortal=new hc(w,z),this._scrollStrategyFactory=c,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(m){this._offsetX=m,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(m){this._offsetY=m,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(m){this._hasBackdrop=ve(m)}get lockPosition(){return this._lockPosition}set lockPosition(m){this._lockPosition=ve(m)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(m){this._flexibleDimensions=ve(m)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(m){this._growAfterOpen=ve(m)}get push(){return this._push}set push(m){this._push=ve(m)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(m){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),m.origin&&this.open&&this._position.apply()),m.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Mo);const m=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=m.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=m.detachments().subscribe(()=>this.detach.emit()),m.keydownEvents().subscribe(w=>{this.overlayKeydown.next(w),27===w.keyCode&&!this.disableClose&&!vi(w)&&(w.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(w=>{this.overlayOutsideClick.next(w)})}_buildConfig(){const m=this._position=this.positionStrategy||this._createPositionStrategy(),w=new gc({direction:this._dir,positionStrategy:m,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(w.width=this.width),(this.height||0===this.height)&&(w.height=this.height),(this.minWidth||0===this.minWidth)&&(w.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(w.minHeight=this.minHeight),this.backdropClass&&(w.backdropClass=this.backdropClass),this.panelClass&&(w.panelClass=this.panelClass),w}_updatePositionStrategy(m){const w=this.positions.map(z=>({originX:z.originX,originY:z.originY,overlayX:z.overlayX,overlayY:z.overlayY,offsetX:z.offsetX||this.offsetX,offsetY:z.offsetY||this.offsetY,panelClass:z.panelClass||void 0}));return m.setOrigin(this.origin.elementRef).withPositions(w).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const m=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(m),m}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(m=>{this.backdropClick.emit(m)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(I,E=!1){return m=>m.lift(new Ed(I,E))}(()=>this.positionChange.observers.length>0)).subscribe(m=>{this.positionChange.emit(m),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(wi),C.Y36(C.Rgc),C.Y36(C.s_b),C.Y36(io),C.Y36(br,8))},I.\u0275dir=C.lG2({type:I,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[C.TTD]}),I})();const dl={provide:io,deps:[wi],useFactory:function(I){return()=>I.scrollStrategies.reposition()}};let Fu=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({providers:[wi,dl],imports:[[Ei,ul,al],al]}),I})();var bc=Q(1439);const Td=["trigger"],es=["panel"];function $t(I,E){if(1&I&&(C.TgZ(0,"span",8),C._uU(1),C.qZA()),2&I){const m=C.oxw();C.xp6(1),C.Oqu(m.placeholder)}}function Jc(I,E){if(1&I&&(C.TgZ(0,"span",12),C._uU(1),C.qZA()),2&I){const m=C.oxw(2);C.xp6(1),C.Oqu(m.triggerValue)}}function tu(I,E){1&I&&C.Hsn(0,0,["*ngSwitchCase","true"])}function Sd(I,E){if(1&I&&(C.TgZ(0,"span",9),C.YNc(1,Jc,2,1,"span",10),C.YNc(2,tu,1,0,"ng-content",11),C.qZA()),2&I){const m=C.oxw();C.Q6J("ngSwitch",!!m.customTrigger),C.xp6(2),C.Q6J("ngSwitchCase",!0)}}function Ul(I,E){if(1&I){const m=C.EpF();C.TgZ(0,"div",13),C.TgZ(1,"div",14,15),C.NdJ("@transformPanel.done",function(z){return C.CHM(m),C.oxw()._panelDoneAnimatingStream.next(z.toState)})("keydown",function(z){return C.CHM(m),C.oxw()._handleKeydown(z)}),C.Hsn(3,1),C.qZA(),C.qZA()}if(2&I){const m=C.oxw();C.Q6J("@transformPanelWrap",void 0),C.xp6(1),C.Gre("mat-select-panel ",m._getPanelTheme(),""),C.Udp("transform-origin",m._transformOrigin)("font-size",m._triggerFontSize,"px"),C.Q6J("ngClass",m.panelClass)("@transformPanel",m.multiple?"showing-multiple":"showing"),C.uIk("id",m.id+"-panel")("aria-multiselectable",m.multiple)("aria-label",m.ariaLabel||null)("aria-labelledby",m._getPanelAriaLabelledby())}}const hl=[[["mat-select-trigger"]],"*"],Ad=["mat-select-trigger","*"],Js={transformPanelWrap:(0,Sr.X$)("transformPanelWrap",[(0,Sr.eR)("* => void",(0,Sr.IO)("@transformPanel",[(0,Sr.pV)()],{optional:!0}))]),transformPanel:(0,Sr.X$)("transformPanel",[(0,Sr.SB)("void",(0,Sr.oB)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),(0,Sr.SB)("showing",(0,Sr.oB)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),(0,Sr.SB)("showing-multiple",(0,Sr.oB)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),(0,Sr.eR)("void => *",(0,Sr.jt)("120ms cubic-bezier(0, 0, 0.2, 1)")),(0,Sr.eR)("* => void",(0,Sr.jt)("100ms 25ms linear",(0,Sr.oB)({opacity:0})))])};let us=0;const gl=new C.OlP("mat-select-scroll-strategy"),Lu=new C.OlP("MAT_SELECT_CONFIG"),Vu={provide:gl,deps:[wi],useFactory:function(I){return()=>I.scrollStrategies.reposition()}};class Bl{constructor(E,m){this.source=E,this.value=m}}const ml=Yu(hu(Wu(js(class{constructor(I,E,m,w,z){this._elementRef=I,this._defaultErrorStateMatcher=E,this._parentForm=m,this._parentFormGroup=w,this.ngControl=z}})))),Xc=new C.OlP("MatSelectTrigger");let fh=(()=>{class I extends ml{constructor(m,w,z,c,d,f,y,D,L,Y,de,ye,Ie,Ne){var ht,At,Ut;super(d,c,y,D,Y),this._viewportRuler=m,this._changeDetectorRef=w,this._ngZone=z,this._dir=f,this._parentFormField=L,this._liveAnnouncer=Ie,this._defaultOptions=Ne,this._panelOpen=!1,this._compareWith=(rn,Kn)=>rn===Kn,this._uid="mat-select-"+us++,this._triggerAriaLabelledBy=null,this._destroy=new re.xQ,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+us++,this._panelDoneAnimatingStream=new re.xQ,this._overlayPanelClass=(null===(ht=this._defaultOptions)||void 0===ht?void 0:ht.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(Ut=null===(At=this._defaultOptions)||void 0===At?void 0:At.disableOptionCentering)&&void 0!==Ut&&Ut,this.ariaLabel="",this.optionSelectionChanges=(0,bc.P)(()=>{const rn=this.options;return rn?rn.changes.pipe((0,zs.O)(rn),(0,sa.w)(()=>(0,Ku.T)(...rn.map(Kn=>Kn.onSelectionChange)))):this._ngZone.onStable.pipe((0,lo.q)(1),(0,sa.w)(()=>this.optionSelectionChanges))}),this.openedChange=new C.vpe,this._openedStream=this.openedChange.pipe((0,eo.h)(rn=>rn),(0,to.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,eo.h)(rn=>!rn),(0,to.U)(()=>{})),this.selectionChange=new C.vpe,this.valueChange=new C.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==Ne?void 0:Ne.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=Ne.typeaheadDebounceInterval),this._scrollStrategyFactory=ye,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(de)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(m){this._placeholder=m,this.stateChanges.next()}get required(){return this._required}set required(m){this._required=ve(m),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(m){this._multiple=ve(m)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(m){this._disableOptionCentering=ve(m)}get compareWith(){return this._compareWith}set compareWith(m){this._compareWith=m,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(m){(m!==this._value||this._multiple&&Array.isArray(m))&&(this.options&&this._setSelectionByValue(m),this._value=m)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(m){this._typeaheadDebounceInterval=se(m)}get id(){return this._id}set id(m){this._id=m||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new yo(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,bi.x)(),Nr(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Nr(this._destroy)).subscribe(m=>{m.added.forEach(w=>w.select()),m.removed.forEach(w=>w.deselect())}),this.options.changes.pipe((0,zs.O)(null),Nr(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const m=this._getTriggerAriaLabelledby();if(m!==this._triggerAriaLabelledBy){const w=this._elementRef.nativeElement;this._triggerAriaLabelledBy=m,m?w.setAttribute("aria-labelledby",m):w.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(m){m.disabled&&this.stateChanges.next(),m.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(m){this.value=m}registerOnChange(m){this._onChange=m}registerOnTouched(m){this._onTouched=m}setDisabledState(m){this.disabled=m,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var m,w;return this.multiple?(null===(m=this._selectionModel)||void 0===m?void 0:m.selected)||[]:null===(w=this._selectionModel)||void 0===w?void 0:w.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const m=this._selectionModel.selected.map(w=>w.viewValue);return this._isRtl()&&m.reverse(),m.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(m){this.disabled||(this.panelOpen?this._handleOpenKeydown(m):this._handleClosedKeydown(m))}_handleClosedKeydown(m){const w=m.keyCode,z=40===w||38===w||37===w||39===w,c=13===w||32===w,d=this._keyManager;if(!d.isTyping()&&c&&!vi(m)||(this.multiple||m.altKey)&&z)m.preventDefault(),this.open();else if(!this.multiple){const f=this.selected;d.onKeydown(m);const y=this.selected;y&&f!==y&&this._liveAnnouncer.announce(y.viewValue,1e4)}}_handleOpenKeydown(m){const w=this._keyManager,z=m.keyCode,c=40===z||38===z,d=w.isTyping();if(c&&m.altKey)m.preventDefault(),this.close();else if(d||13!==z&&32!==z||!w.activeItem||vi(m))if(!d&&this._multiple&&65===z&&m.ctrlKey){m.preventDefault();const f=this.options.some(y=>!y.disabled&&!y.selected);this.options.forEach(y=>{y.disabled||(f?y.select():y.deselect())})}else{const f=w.activeItemIndex;w.onKeydown(m),this._multiple&&c&&m.shiftKey&&w.activeItem&&w.activeItemIndex!==f&&w.activeItem._selectViaInteraction()}else m.preventDefault(),w.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,lo.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(m){if(this._selectionModel.selected.forEach(w=>w.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&m)Array.isArray(m),m.forEach(w=>this._selectValue(w)),this._sortValues();else{const w=this._selectValue(m);w?this._keyManager.updateActiveItem(w):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(m){const w=this.options.find(z=>{if(this._selectionModel.isSelected(z))return!1;try{return null!=z.value&&this._compareWith(z.value,m)}catch(c){return!1}});return w&&this._selectionModel.select(w),w}_initKeyManager(){this._keyManager=new Dn(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Nr(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Nr(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const m=(0,Ku.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Nr(m)).subscribe(w=>{this._onSelect(w.source,w.isUserInput),w.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Ku.T)(...this.options.map(w=>w._stateChanges)).pipe(Nr(m)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(m,w){const z=this._selectionModel.isSelected(m);null!=m.value||this._multiple?(z!==m.selected&&(m.selected?this._selectionModel.select(m):this._selectionModel.deselect(m)),w&&this._keyManager.setActiveItem(m),this.multiple&&(this._sortValues(),w&&this.focus())):(m.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(m.value)),z!==this._selectionModel.isSelected(m)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const m=this.options.toArray();this._selectionModel.sort((w,z)=>this.sortComparator?this.sortComparator(w,z,m):m.indexOf(w)-m.indexOf(z)),this.stateChanges.next()}}_propagateChanges(m){let w=null;w=this.multiple?this.selected.map(z=>z.value):this.selected?this.selected.value:m,this._value=w,this.valueChange.emit(w),this._onChange(w),this.selectionChange.emit(this._getChangeEvent(w)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var m;return!this._panelOpen&&!this.disabled&&(null===(m=this.options)||void 0===m?void 0:m.length)>0}focus(m){this._elementRef.nativeElement.focus(m)}_getPanelAriaLabelledby(){var m;if(this.ariaLabel)return null;const w=null===(m=this._parentFormField)||void 0===m?void 0:m.getLabelId();return this.ariaLabelledby?(w?w+" ":"")+this.ariaLabelledby:w}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var m;if(this.ariaLabel)return null;const w=null===(m=this._parentFormField)||void 0===m?void 0:m.getLabelId();let z=(w?w+" ":"")+this._valueId;return this.ariaLabelledby&&(z+=" "+this.ariaLabelledby),z}_panelDoneAnimating(m){this.openedChange.emit(m)}setDescribedByIds(m){this._ariaDescribedby=m.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(sl),C.Y36(C.sBO),C.Y36(C.R0b),C.Y36(fu),C.Y36(C.SBq),C.Y36(br,8),C.Y36(g.F,8),C.Y36(g.sg,8),C.Y36(gi,8),C.Y36(g.a5,10),C.$8M("tabindex"),C.Y36(gl),C.Y36(ai),C.Y36(Lu,8))},I.\u0275dir=C.lG2({type:I,viewQuery:function(m,w){if(1&m&&(C.Gf(Td,5),C.Gf(es,5),C.Gf(xo,5)),2&m){let z;C.iGM(z=C.CRH())&&(w.trigger=z.first),C.iGM(z=C.CRH())&&(w.panel=z.first),C.iGM(z=C.CRH())&&(w._overlayDir=z.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[C.qOj,C.TTD]}),I})(),Uu=(()=>{class I extends fh{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(m,w,z){const c=this._getItemHeight();return Math.min(Math.max(0,c*m-w+c/2),z)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Nr(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,lo.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(m){const w=Za(m,this.options,this.optionGroups),z=this._getItemHeight();this.panel.nativeElement.scrollTop=0===m&&1===w?0:function(I,E,m,w){return I<m?I:I+E>m+256?Math.max(0,I-256+E):m}((m+w)*z,z,this.panel.nativeElement.scrollTop)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(m){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(m)}_getChangeEvent(m){return new Bl(this,m)}_calculateOverlayOffsetX(){const m=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),w=this._viewportRuler.getViewportSize(),z=this._isRtl(),c=this.multiple?56:32;let d;if(this.multiple)d=40;else if(this.disableOptionCentering)d=16;else{let D=this._selectionModel.selected[0]||this.options.first;d=D&&D.group?32:16}z||(d*=-1);const f=0-(m.left+d-(z?c:0)),y=m.right+d-w.width+(z?0:c);f>0?d+=f+8:y>0&&(d-=y+8),this._overlayDir.offsetX=Math.round(d),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(m,w,z){const c=this._getItemHeight(),d=(c-this._triggerRect.height)/2,f=Math.floor(256/c);let y;return this.disableOptionCentering?0:(y=0===this._scrollTop?m*c:this._scrollTop===z?(m-(this._getItemCount()-f))*c+(c-(this._getItemCount()*c-256)%c):w-c/2,Math.round(-1*y-d))}_checkOverlayWithinViewport(m){const w=this._getItemHeight(),z=this._viewportRuler.getViewportSize(),c=this._triggerRect.top-8,d=z.height-this._triggerRect.bottom-8,f=Math.abs(this._offsetY),D=Math.min(this._getItemCount()*w,256)-f-this._triggerRect.height;D>d?this._adjustPanelUp(D,d):f>c?this._adjustPanelDown(f,c,m):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(m,w){const z=Math.round(m-w);this._scrollTop-=z,this._offsetY-=z,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(m,w,z){const c=Math.round(m-w);if(this._scrollTop+=c,this._offsetY+=c,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=z)return this._scrollTop=z,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const m=this._getItemHeight(),w=this._getItemCount(),z=Math.min(w*m,256),d=w*m-z;let f;f=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),f+=Za(f,this.options,this.optionGroups);const y=z/2;this._scrollTop=this._calculateOverlayScroll(f,y,d),this._offsetY=this._calculateOverlayOffsetY(f,y,d),this._checkOverlayWithinViewport(d)}_getOriginBasedOnOption(){const m=this._getItemHeight(),w=(m-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-w+m/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return I.\u0275fac=function(){let E;return function(w){return(E||(E=C.n5z(I)))(w||I)}}(),I.\u0275cmp=C.Xpm({type:I,selectors:[["mat-select"]],contentQueries:function(m,w,z){if(1&m&&(C.Suo(z,Xc,5),C.Suo(z,gu,5),C.Suo(z,Yo,5)),2&m){let c;C.iGM(c=C.CRH())&&(w.customTrigger=c.first),C.iGM(c=C.CRH())&&(w.options=c),C.iGM(c=C.CRH())&&(w.optionGroups=c)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(m,w){1&m&&C.NdJ("keydown",function(c){return w._handleKeydown(c)})("focus",function(){return w._onFocus()})("blur",function(){return w._onBlur()}),2&m&&(C.uIk("id",w.id)("tabindex",w.tabIndex)("aria-controls",w.panelOpen?w.id+"-panel":null)("aria-expanded",w.panelOpen)("aria-label",w.ariaLabel||null)("aria-required",w.required.toString())("aria-disabled",w.disabled.toString())("aria-invalid",w.errorState)("aria-describedby",w._ariaDescribedby||null)("aria-activedescendant",w._getAriaActiveDescendant()),C.ekj("mat-select-disabled",w.disabled)("mat-select-invalid",w.errorState)("mat-select-required",w.required)("mat-select-empty",w.empty)("mat-select-multiple",w.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[C._Bn([{provide:_u,useExisting:I},{provide:Uo,useExisting:I}]),C.qOj],ngContentSelectors:Ad,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(m,w){if(1&m&&(C.F$t(hl),C.TgZ(0,"div",0,1),C.NdJ("click",function(){return w.toggle()}),C.TgZ(3,"div",2),C.YNc(4,$t,2,1,"span",3),C.YNc(5,Sd,3,2,"span",4),C.qZA(),C.TgZ(6,"div",5),C._UZ(7,"div",6),C.qZA(),C.qZA(),C.YNc(8,Ul,4,14,"ng-template",7),C.NdJ("backdropClick",function(){return w.close()})("attach",function(){return w._onAttached()})("detach",function(){return w.close()})),2&m){const z=C.MAs(1);C.uIk("aria-owns",w.panelOpen?w.id+"-panel":null),C.xp6(3),C.Q6J("ngSwitch",w.empty),C.uIk("id",w._valueId),C.xp6(1),C.Q6J("ngSwitchCase",!0),C.xp6(1),C.Q6J("ngSwitchCase",!1),C.xp6(3),C.Q6J("cdkConnectedOverlayPanelClass",w._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",w._scrollStrategy)("cdkConnectedOverlayOrigin",z)("cdkConnectedOverlayOpen",w.panelOpen)("cdkConnectedOverlayPositions",w._positions)("cdkConnectedOverlayMinWidth",null==w._triggerRect?null:w._triggerRect.width)("cdkConnectedOverlayOffsetY",w._offsetY)}},directives:[ps,P.RF,P.n9,xo,P.ED,P.mk],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[Js.transformPanelWrap,Js.transformPanel]},changeDetection:0}),I})(),Xs=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({providers:[Vu],imports:[[P.ez,Fu,Lc,bs],ua,uc,Lc,bs]}),I})();var Hh=Q(4552),Rd=Q(1437);function xd(I,E){if(1&I&&(C.TgZ(0,"mat-option",8),C.TgZ(1,"div",9),C.TgZ(2,"div"),C._UZ(3,"img",10),C.qZA(),C.TgZ(4,"div"),C.TgZ(5,"p"),C._uU(6),C.qZA(),C.qZA(),C.qZA(),C.qZA()),2&I){const m=E.$implicit;C.Q6J("value",m.key),C.xp6(3),C.Q6J("src",m.img,C.LSH),C.xp6(3),C.Oqu(m.description)}}function ph(I,E){if(1&I){const m=C.EpF();C.TgZ(0,"form",2),C.NdJ("ngSubmit",function(){C.CHM(m);const z=C.oxw();return z.submitStartChatForm(z.startChatForm)}),C.TgZ(1,"div"),C.TgZ(2,"label",3),C._uU(3,"Username"),C.qZA(),C._UZ(4,"input",4),C.qZA(),C.TgZ(5,"div"),C.TgZ(6,"mat-form-field"),C.TgZ(7,"mat-select",5),C.YNc(8,xd,7,3,"mat-option",6),C.qZA(),C.qZA(),C.qZA(),C.TgZ(9,"div"),C.TgZ(10,"button",7),C._uU(11,"Start chat"),C.qZA(),C.qZA(),C.qZA()}if(2&I){const m=C.oxw();C.Q6J("formGroup",m.startChatForm),C.xp6(8),C.Q6J("ngForOf",m.menuOptions),C.xp6(2),C.Q6J("disabled",m.startChatForm.invalid)}}function ea(I,E){1&I&&(C.TgZ(0,"div"),C._uU(1," Your chat will be accepted soon! "),C.qZA())}const ks=function(I,E,m){return{nick:I,chatId:E,domain:m}};function nu(I,E){if(1&I&&(C.TgZ(0,"div"),C.TgZ(1,"div"),C._UZ(2,"app-chat-form-history",11),C.qZA(),C.TgZ(3,"div"),C._UZ(4,"app-chat-form",12),C.qZA(),C.qZA()),2&I){const m=C.oxw();C.xp6(2),C.Q6J("chatHistory",m.currentChat[0].chatHistory),C.xp6(2),C.Q6J("userInfo",C.kEZ(2,ks,m.clientUsername,m.clientChatId,m.clientChatDomain))}}let jl=(()=>{class I{constructor(m,w,z,c,d,f){this._fb=m,this._firestoreCollections=w,this._route=z,this._router=c,this._generateId=d,this._http=f,this.currentChat=[],this.clientInformation=[]}ngOnInit(){this.clientUsername=JSON.parse(localStorage.getItem("username")),this.clientChatId=JSON.parse(localStorage.getItem("chatId")),this.clientChatDomain=JSON.parse(localStorage.getItem("domain")),this.startChatForm=this._fb.group({username:[this.clientUsername,g.kI.required],option:[null,g.kI.required]}),this._menuOptionsSubscription=this._firestoreCollections.getActiveMenuOptions().subscribe(m=>{this.menuOptions=m.map(w=>Object.assign({id:w.payload.doc.id},w.payload.doc.data()))},m=>{}),this._route.snapshot.queryParams.domain?(this.domain=this._route.snapshot.queryParams.domain,this._domainsSubscription=this._firestoreCollections.getDomains().subscribe(m=>{this.domains=m.map(w=>Object.assign({id:w.payload.doc.id},w.payload.doc.data())),new Promise((w,z)=>{for(let c=0;c<this.domains.length;c++){if(this.domains[c].domain==this.domain)return w();c==this.domains.length-1&&this._router.navigate(["/error"])}})},m=>{})):this._router.navigate(["/error"]),this.clientChatId&&this.clientChatDomain&&(this._currentChatSubscription=this._firestoreCollections.getChat(this.clientChatDomain,"activeChats",this.clientChatId).subscribe(m=>{this.currentChat=m.map(w=>Object.assign({},w.payload.doc.data())),0==this.currentChat.length&&(localStorage.removeItem("domain"),localStorage.removeItem("chatId"),this._currentChatSubscription.unsubscribe())},m=>{})),this.getClientInformation()}ngOnDestroy(){this._menuOptionsSubscription.unsubscribe(),this._currentChatSubscription&&this._currentChatSubscription.unsubscribe(),this._domainsSubscription&&this._domainsSubscription.unsubscribe()}submitStartChatForm(m){if(m.invalid)return;const w=m.value.username,z=this.clientInformation,c=m.value.option,d=this.domain,y=this._generateId.generateId(),D={username:w,clientInformation:z,option:c,domain:d,status:"pending",id:y};this.clientChatId=y,this.clientChatDomain=d,localStorage.setItem("chatId",JSON.stringify(y)),localStorage.setItem("domain",JSON.stringify(d)),localStorage.setItem("username",JSON.stringify(w)),this._firestoreCollections.addChat(D).then(()=>{this._currentChatSubscription=this._firestoreCollections.getChat(this.clientChatDomain,"activeChats",this.clientChatId).subscribe(L=>{this.currentChat=L.map(Y=>Object.assign({},Y.payload.doc.data()))},L=>{})},L=>{})}getClientInformation(){this._http.get("https://api.geoapify.com/v1/ipinfo?apiKey="+X.N.geoLocationAPIKey).subscribe(m=>{this.clientInformation.push({ip:m.ip,country:m.country.name,city:m.city.name})},m=>{})}}return I.\u0275fac=function(m){return new(m||I)(C.Y36(g.qu),C.Y36(Ve.P),C.Y36(Ee.gz),C.Y36(Ee.F0),C.Y36(Fe.U),C.Y36(fe.eN))},I.\u0275cmp=C.Xpm({type:I,selectors:[["app-chat"]],decls:4,vars:3,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],[3,"formGroup","ngSubmit"],["for","username"],["type","text","name","username","formControlName","username"],["formControlName","option"],[3,"value",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],[3,"value"],[2,"display","flex"],["width","20px",3,"src"],[3,"chatHistory"],[3,"userInfo"]],template:function(m,w){1&m&&(C.TgZ(0,"div"),C.YNc(1,ph,12,3,"form",0),C.YNc(2,ea,2,0,"div",1),C.YNc(3,nu,5,6,"div",1),C.qZA()),2&m&&(C.xp6(1),C.Q6J("ngIf","pending"!==(null==w.currentChat[0]?null:w.currentChat[0].status)&&"active"!==(null==w.currentChat[0]?null:w.currentChat[0].status)),C.xp6(1),C.Q6J("ngIf",w.currentChat.length>0&&"pending"==w.currentChat[0].status),C.xp6(1),C.Q6J("ngIf",w.currentChat.length>0&&"active"==w.currentChat[0].status))},directives:[P.O5,g._Y,g.JL,g.sg,g.Fj,g.JJ,g.u,bu,Uu,P.sg,gu,Hh.q,Rd.a],styles:[""]}),I})();Q(9193);let Bu=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[no]]}),I})(),mh=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({providers:[fu],imports:[[Bu,uc,bs],Bu,uc]}),I})();var _h=Q(4466);let yh=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275mod=C.oAB({type:I}),I.\u0275inj=C.cJS({imports:[[P.ez,g.UX,g.u5,mh,Xs,_h.m,Ee.Bz.forChild([{path:"",component:jl},{path:"**",redirectTo:""}])]]}),I})()},6009:(jt,it,Q)=>{"use strict";Q.r(it),Q.d(it,{ControlPanelModule:()=>Co});var P=Q(8583),g=Q(7716),X=Q(9447),C=Q(2213);const Ve=function(){return["chats"]},Ee=function(){return["settings"]};function Fe(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"div",2),g.TgZ(1,"ul",3),g.TgZ(2,"li",4),g._uU(3,"Chats"),g.qZA(),g.TgZ(4,"li",4),g._uU(5,"Settings"),g.qZA(),g.qZA(),g.TgZ(6,"button",5),g.NdJ("click",function(){return g.CHM(B),g.oxw().logout()}),g._uU(7,"Logout"),g.qZA(),g.qZA()}2&De&&(g.xp6(2),g.Q6J("routerLink",g.DdM(2,Ve)),g.xp6(2),g.Q6J("routerLink",g.DdM(3,Ee)))}let fe=(()=>{class De{constructor(B){this._authService=B}ngOnInit(){this._userSubscription=this._authService.user.subscribe(B=>{this.user=B})}ngOnDestroy(){this._userSubscription.unsubscribe()}logout(){this._authService.logout()}}return De.\u0275fac=function(B){return new(B||De)(g.Y36(X.e))},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-header"]],decls:2,vars:1,consts:[[1,"container"],["class","header-nav",4,"ngIf"],[1,"header-nav"],[1,"header-nav__links"],["routerLinkActive","router-link-active",3,"routerLink"],[1,"header-nav__logout-btn",3,"click"]],template:function(B,te){1&B&&(g.TgZ(0,"div",0),g.YNc(1,Fe,8,4,"div",1),g.qZA()),2&B&&(g.xp6(1),g.Q6J("ngIf",null!=te.user&&null!=te.user))},directives:[P.O5,C.Od,C.rH],styles:[".header-nav[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px}.header-nav__links[_ngcontent-%COMP%]{display:flex;align-items:center}.header-nav__links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-right:10px;cursor:pointer}"]}),De})(),ve=(()=>{class De{constructor(){}ngOnInit(){}}return De.\u0275fac=function(B){return new(B||De)},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-control-panel"]],decls:2,vars:0,template:function(B,te){1&B&&(g._UZ(0,"app-header"),g._UZ(1,"router-outlet"))},directives:[fe,C.lC],styles:[""]}),De})();var se=Q(665);let Se=(()=>{class De{constructor(){}}return De.\u0275fac=function(B){return new(B||De)},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-loading-spinner"]],decls:14,vars:0,consts:[[1,"loading-spinner"],[1,"loader"]],template:function(B,te){1&B&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g._UZ(2,"div"),g._UZ(3,"div"),g._UZ(4,"div"),g._UZ(5,"div"),g._UZ(6,"div"),g._UZ(7,"div"),g._UZ(8,"div"),g._UZ(9,"div"),g._UZ(10,"div"),g._UZ(11,"div"),g._UZ(12,"div"),g._UZ(13,"div"),g.qZA(),g.qZA())},styles:['.loading-spinner[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;left:0px;top:0px;width:100%;height:100%;z-index:499;background-color:var(--color13)}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{display:flex;width:64px;height:64px}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:32px 32px;animation:spin 1.2s linear infinite;-webkit-transform-origin:32px 32px;-webkit-animation:spin 1.2s linear infinite}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:52px;left:30px;width:7px;height:22px;border-radius:20%;background-color:#b53636}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);-webkit-transform:rotate(0deg);animation-delay:-1.1s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);-webkit-transform:rotate(30deg);animation-delay:-1s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);-webkit-transform:rotate(60deg);animation-delay:-.9s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);-webkit-transform:rotate(90deg);animation-delay:-.8s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);-webkit-transform:rotate(120deg);animation-delay:-.7s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);-webkit-transform:rotate(150deg);animation-delay:-.6s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);-webkit-transform:rotate(180deg);animation-delay:-.5s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);-webkit-transform:rotate(210deg);animation-delay:-.4s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);-webkit-transform:rotate(240deg);animation-delay:-.3s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);-webkit-transform:rotate(270deg);animation-delay:-.2s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);-webkit-transform:rotate(300deg);animation-delay:-.1s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);-webkit-transform:rotate(330deg);animation-delay:0s}@keyframes spin{0%{opacity:1}to{opacity:0}}']}),De})();function me(De,We){1&De&&g._UZ(0,"app-loading-spinner")}function Ce(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," Please enter your email! "),g.qZA())}function Me(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," Please enter a valid email! "),g.qZA())}function Ue(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," Please enter a passowrd! "),g.qZA())}function Xe(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," The password could not be longer then 30 symbols! "),g.qZA())}function re(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," The password should be at least 8 symbols! "),g.qZA())}function Ke(De,We){if(1&De&&(g.TgZ(0,"li",17),g._uU(1),g.qZA()),2&De){const B=g.oxw();g.xp6(1),g.Oqu(B.errorAuthMsg)}}function St(De,We){if(1&De&&(g.TgZ(0,"li",17),g._uU(1),g.qZA()),2&De){const B=g.oxw();g.xp6(1),g.Oqu(B.errorOnGetuserData)}}let Mn=(()=>{class De{constructor(B){this._authService=B}ngOnInit(){this.signinForm=new se.cw({email:new se.NI(null,[se.kI.required,se.kI.email]),password:new se.NI(null,[se.kI.required,se.kI.minLength(8),se.kI.maxLength(30)])}),this._errorAuthMsgSubscription=this._authService.errorAuthMsgSubject.subscribe(B=>{this.errorAuthMsg=B}),this._errorOnGetuserDataSubscription=this._authService.errorOnGetuserDataSubject.subscribe(B=>{this.errorOnGetuserData=B}),this._isLoadingSubscription=this._authService.isLoadingSubject.subscribe(B=>{this.isLoading=B})}ngOnDestroy(){this._errorAuthMsgSubscription.unsubscribe(),this._errorOnGetuserDataSubscription.unsubscribe(),this._isLoadingSubscription.unsubscribe(),this._authService.errorAuthMsg="",this._authService.errorAuthMsgSubject.next(this._authService.errorAuthMsg)}onSubmit(B){this._authService.signIn(B.value.email,B.value.password)}}return De.\u0275fac=function(B){return new(B||De)(g.Y36(X.e))},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-login"]],decls:33,vars:10,consts:[[1,"container"],[1,"sign-form",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"sign-form__sign-up-header"],[1,"hr-border"],[1,"sign-form__sign-element"],["for","email"],[1,"email"],[1,"email-img"],["type","text","name","email","formControlName","email"],[1,"sign-error"],["for","password"],[1,"password"],[1,"password-img"],["type","password","name","password","formControlName","password"],["type","submit",1,"btn-default",3,"disabled"],["class","error-msg",4,"ngIf"],[1,"error-msg"]],template:function(B,te){1&B&&(g.TgZ(0,"div"),g.TgZ(1,"div",0),g.TgZ(2,"form",1),g.NdJ("ngSubmit",function(){return te.onSubmit(te.signinForm)}),g.YNc(3,me,1,0,"app-loading-spinner",2),g.TgZ(4,"div",3),g.TgZ(5,"h2"),g._uU(6,"Login"),g.qZA(),g.qZA(),g._UZ(7,"hr",4),g.TgZ(8,"div",5),g.TgZ(9,"label",6),g._uU(10,"Email"),g.qZA(),g.TgZ(11,"div",7),g._UZ(12,"div",8),g._UZ(13,"input",9),g.qZA(),g.TgZ(14,"ul",10),g.YNc(15,Ce,2,0,"li",2),g.YNc(16,Me,2,0,"li",2),g.qZA(),g.qZA(),g.TgZ(17,"div",5),g.TgZ(18,"label",11),g._uU(19,"Password"),g.qZA(),g.TgZ(20,"div",12),g._UZ(21,"div",13),g._UZ(22,"input",14),g.qZA(),g.TgZ(23,"ul",10),g.YNc(24,Ue,2,0,"li",2),g.YNc(25,Xe,2,0,"li",2),g.YNc(26,re,2,0,"li",2),g.qZA(),g.qZA(),g.TgZ(27,"div"),g.TgZ(28,"button",15),g._uU(29,"Login"),g.qZA(),g.TgZ(30,"ul",10),g.YNc(31,Ke,2,1,"li",16),g.YNc(32,St,2,1,"li",16),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&B&&(g.xp6(2),g.Q6J("formGroup",te.signinForm),g.xp6(1),g.Q6J("ngIf",te.isLoading),g.xp6(12),g.Q6J("ngIf",!te.signinForm.get("email").valid&&!te.signinForm.get("email").hasError("email")&&te.signinForm.get("email").touched),g.xp6(1),g.Q6J("ngIf",te.signinForm.get("email").hasError("email")&&te.signinForm.get("email").touched),g.xp6(8),g.Q6J("ngIf",!te.signinForm.get("password").valid&&!te.signinForm.get("password").hasError("maxlength")&&!te.signinForm.get("password").hasError("minlength")&&te.signinForm.get("password").touched),g.xp6(1),g.Q6J("ngIf",te.signinForm.get("password").hasError("maxlength")&&te.signinForm.get("password").touched),g.xp6(1),g.Q6J("ngIf",te.signinForm.get("password").hasError("minlength")&&te.signinForm.get("password").touched),g.xp6(2),g.Q6J("disabled",!te.signinForm.valid),g.xp6(3),g.Q6J("ngIf",te.errorAuthMsg),g.xp6(1),g.Q6J("ngIf",te.errorOnGetuserData))},directives:[se._Y,se.JL,se.sg,P.O5,se.Fj,se.JJ,se.u,Se],styles:['@import"https://fonts.googleapis.com/css?family=Rubik&display=swap";.sign-form[_ngcontent-%COMP%]{background-color:var(--color2);box-shadow:0 0 10px 1px #000000bf;max-width:767px;padding:20px;margin:0 auto;position:relative}.sign-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.sign-form__sign-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#b53636;text-align:center;font-size:1.3em;padding:5px}.sign-form__sign-element[_ngcontent-%COMP%]{font-size:1.1em;margin:20px 0}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{display:flex}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(user.73c0f083ad3711c1d950.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   .phone-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(phone.fb842bee9111b51d51a6.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:textfield;margin:0;border-left:none!important}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}.sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   .email-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;box-sizing:border-box;background-image:url(email.31cd4a3f10faa4acdb5c.png);padding:10px}.sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .password-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(password.63582da5386052e0358d.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .sign-error[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#b53636;font-size:1.1em;padding:10px 0 0;list-style:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 50px);border:1px solid var(--color8);color:var(--color7);border-radius:0 3px 3px 0;box-sizing:border-box;padding:7px;font-size:1.1em;outline:none;background-color:#ffffff80;filter:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{border:1px solid var(--color8);-webkit-text-fill-color:var(--color7);-webkit-box-shadow:none;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.sign-form__sign-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;width:100%;color:var(--color7)}.sign-form[_ngcontent-%COMP%]   .hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:20px 0}']}),De})();var kt=Q(3210),dt=Q(4552),Zt=Q(1437);function Ot(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.TgZ(3,"p"),g._uU(4),g.qZA(),g.TgZ(5,"div"),g.TgZ(6,"button",2),g.NdJ("click",function(){g.CHM(B);const ce=g.oxw().$implicit;return g.oxw(2).acceptChat(ce)}),g._uU(7,"Accept"),g.qZA(),g.qZA(),g.qZA()}if(2&De){const B=g.oxw().$implicit;g.xp6(2),g.Oqu(B.username),g.xp6(2),g.Oqu(B.option)}}function Cn(De,We){if(1&De&&(g.TgZ(0,"div"),g.YNc(1,Ot,8,2,"div",1),g.qZA()),2&De){const B=We.$implicit;g.xp6(1),g.Q6J("ngIf","pending"==B.status)}}function wt(De,We){if(1&De&&(g.TgZ(0,"div"),g.TgZ(1,"div"),g.TgZ(2,"p"),g._uU(3),g.qZA(),g.qZA(),g.TgZ(4,"div"),g.YNc(5,Cn,2,1,"div",0),g.qZA(),g.qZA()),2&De){const B=We.$implicit;g.xp6(3),g.Oqu(B.domainDescription),g.xp6(2),g.Q6J("ngForOf",B.chats)}}const Je=function(De,We,B){return{nick:De,chatId:We,domain:B}};function ot(De,We){if(1&De&&(g.TgZ(0,"div"),g.TgZ(1,"div"),g.TgZ(2,"div"),g._UZ(3,"app-chat-form-history",4),g.qZA(),g.TgZ(4,"div"),g._UZ(5,"app-chat-form",5),g.qZA(),g.qZA(),g.TgZ(6,"div"),g.TgZ(7,"p"),g._uU(8,"Client's info"),g.qZA(),g.TgZ(9,"div"),g.TgZ(10,"p"),g._uU(11),g.qZA(),g.TgZ(12,"p"),g._uU(13),g.qZA(),g.TgZ(14,"p"),g._uU(15),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&De){const B=g.oxw(2).$implicit;g.xp6(3),g.Q6J("chatHistory",B.chatHistory),g.xp6(2),g.Q6J("userInfo",g.kEZ(5,Je,B.operatorDisplayName,B.id,B.domain)),g.xp6(6),g.Oqu(B.clientInformation[0].ip),g.xp6(2),g.Oqu(B.clientInformation[0].city),g.xp6(2),g.Oqu(B.clientInformation[0].country)}}function st(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"div",3),g.NdJ("click",function(){g.CHM(B);const ce=g.oxw().$implicit;return g.oxw(2).setActiveChat(ce.id)}),g.TgZ(2,"p"),g._uU(3),g.qZA(),g.TgZ(4,"p"),g._uU(5),g.qZA(),g.TgZ(6,"p"),g._uU(7),g.qZA(),g.qZA(),g.YNc(8,ot,16,9,"div",1),g.qZA()}if(2&De){const B=g.oxw().$implicit,te=g.oxw(2);g.xp6(3),g.Oqu(B.username),g.xp6(2),g.Oqu(B.option),g.xp6(2),g.Oqu(B.domain),g.xp6(1),g.Q6J("ngIf",B.id==te.activeChat)}}function nt(De,We){if(1&De&&(g.TgZ(0,"div"),g.YNc(1,st,9,4,"div",1),g.qZA()),2&De){const B=We.$implicit,te=g.oxw(2);g.xp6(1),g.Q6J("ngIf","active"==B.status&&B.operatorEmail==(null==te.user?null:te.user.email))}}function yt(De,We){if(1&De&&(g.TgZ(0,"div"),g.YNc(1,nt,2,1,"div",0),g.qZA()),2&De){const B=We.$implicit;g.xp6(1),g.Q6J("ngForOf",B.chats)}}let at=(()=>{class De{constructor(B,te){this._authService=B,this._firestoreCollections=te,this.activeChats=[]}ngOnInit(){new Promise((B,te)=>{this._userSubscription=this._authService.user.subscribe(ce=>{this.user=ce,null!=this.user&&B()})}).then(()=>{for(const B of this.user.domains)B.checked&&this.activeChats.push({domainDescription:B.description,fsCollection:B.domain,chatsSubscription:""});for(let B=0;B<this.activeChats.length;B++)this.activeChats[B].chatsSubscription=this._firestoreCollections.getChats(this.activeChats[B].fsCollection,"activeChats").subscribe(ke=>{this.activeChats[B].chats=ke.map(ut=>Object.assign({},ut.payload.doc.data()))})})}ngOnDestroy(){this._userSubscription.unsubscribe();for(const B of this.activeChats)B.chatsSubscription.unsubscribe()}acceptChat(B){this._firestoreCollections.acceptPendingChat(B,{operatorDisplayName:this.user.name,operatorEmail:this.user.email}).then(()=>{this.activeChat=B.id},ut=>{})}setActiveChat(B){this.activeChat=B}}return De.\u0275fac=function(B){return new(B||De)(g.Y36(X.e),g.Y36(kt.P))},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-chats"]],decls:11,vars:2,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button",3,"click"],[3,"click"],[3,"chatHistory"],[3,"userInfo"]],template:function(B,te){1&B&&(g.TgZ(0,"div"),g.TgZ(1,"div"),g.TgZ(2,"p"),g._uU(3,"Pending chats"),g.qZA(),g.TgZ(4,"div"),g.YNc(5,wt,6,2,"div",0),g.qZA(),g.qZA(),g.TgZ(6,"div"),g.TgZ(7,"p"),g._uU(8,"Chats"),g.qZA(),g.TgZ(9,"div"),g.YNc(10,yt,2,1,"div",0),g.qZA(),g.qZA(),g.qZA()),2&B&&(g.xp6(5),g.Q6J("ngForOf",te.activeChats),g.xp6(5),g.Q6J("ngForOf",te.activeChats))},directives:[P.sg,P.O5,dt.q,Zt.a],styles:[""]}),De})();var tn=Q(4466);let un=(()=>{class De{constructor(){this.defaultRoles=[{name:"Users",value:"users",route:"users",checked:!1},{name:"Register",value:"register",route:"register",checked:!1},{name:"Blocked Clients",value:"blockedClients",route:"blocked-clients",checked:!0},{name:"Account Settings",value:"accountSettings",route:"account-settings",checked:!0},{name:"Domain Options",value:"domainOptions",route:"domain-options",checked:!1}]}}return De.\u0275fac=function(B){return new(B||De)},De.\u0275prov=g.Yz7({token:De,factory:De.\u0275fac,providedIn:"root"}),De})();function Tn(De,We){1&De&&g._UZ(0,"app-loading-spinner")}function on(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," Please enter your name! "),g.qZA())}function Bt(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," The name could not be longer then 30 characters! "),g.qZA())}function Ft(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," The name should be at least 3 characters! "),g.qZA())}function Jt(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," Please enter your email! "),g.qZA())}function Ht(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," Please enter a valid email! "),g.qZA())}function Pn(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," Please enter a passowrd! "),g.qZA())}function bn(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," The password could not be longer then 30 symbols! "),g.qZA())}function or(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," The password should be at least 8 symbols! "),g.qZA())}function Gn(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," The passwords do not match! "),g.qZA())}function Bn(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"label"),g.TgZ(1,"input",25),g.NdJ("change",function(ce){const ut=g.CHM(B).index;return g.oxw().onRoleChange(ce,ut)}),g.qZA(),g._uU(2),g.qZA()}if(2&De){const B=We.$implicit;g.xp6(1),g.Q6J("value",B.value),g.uIk("checked",B.checked?"checked":null)("name",B.name)("data-route",B.route)("data-checked",B.checked),g.xp6(1),g.hij(" ",B.name," ")}}function Jn(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"label"),g.TgZ(1,"input",26),g.NdJ("change",function(ce){const ut=g.CHM(B).index;return g.oxw().onDomainChange(ce,ut)}),g.qZA(),g._uU(2),g.qZA()}if(2&De){const B=We.$implicit;g.xp6(1),g.Q6J("value",B.domain)("name",B.description),g.xp6(1),g.hij(" ",B.description," ")}}function Sn(De,We){if(1&De&&(g.TgZ(0,"li",27),g._uU(1),g.qZA()),2&De){const B=g.oxw();g.xp6(1),g.Oqu(B.errorAuthMsg)}}function An(De,We){if(1&De&&(g.TgZ(0,"li",27),g._uU(1),g.qZA()),2&De){const B=g.oxw();g.xp6(1),g.Oqu(B.errorOnSetUserData)}}const Mi=function(De){return{invalid:De}};let mn=(()=>{class De{constructor(B,te,ce,ke){this._formBuilder=B,this._authService=te,this._roleService=ce,this._firestoreCollections=ke,this.roles=this._roleService.defaultRoles}ngOnInit(){this._domainsSubscription=this._firestoreCollections.getDomains().subscribe(B=>{this.domains=B.map(te=>Object.assign({id:te.payload.doc.id},te.payload.doc.data()))},B=>{}),this.signupForm=this._formBuilder.group({name:[null,[se.kI.required,se.kI.minLength(3),se.kI.maxLength(30)]],email:[null,[se.kI.required,se.kI.email]],password:[null,[se.kI.required,se.kI.minLength(8),se.kI.maxLength(30)]],confirmPass:[null,[se.kI.required]],roles:this._formBuilder.array([]),domains:this._formBuilder.array([])},{validator:this.confirmPasswordMatcher("password","confirmPass")}),this.rolesArray=this.signupForm.get("roles"),this.domainsArray=this.signupForm.get("domains");for(const B of this.roles)this.rolesArray.push(new se.NI({name:B.name,value:B.value,route:B.route,checked:B.checked}));if(null!=this.domains)for(const B of this.domains)this.domainsArray.push(new se.NI({checked:B.checked,description:B.description,domain:B.domain}));this._errorAuthMsgSubscription=this._authService.errorAuthMsgSubject.subscribe(B=>{this.errorAuthMsg=B}),this._errorOnSetUserDataSubscription=this._authService.errorOnSetUserDataSubject.subscribe(B=>{this.errorOnSetUserData=B}),this._isLoadingSubscription=this._authService.isLoadingSubject.subscribe(B=>{this.isLoading=B})}ngOnDestroy(){this._errorAuthMsgSubscription.unsubscribe(),this._errorOnSetUserDataSubscription.unsubscribe(),this._isLoadingSubscription.unsubscribe(),this._domainsSubscription.unsubscribe(),this._authService.errorAuthMsg="",this._authService.errorAuthMsgSubject.next(this._authService.errorAuthMsg)}confirmPasswordMatcher(B,te){return ce=>{const ut=ce.controls[te];ut.setErrors(ce.controls[B].value!==ut.value?{mustMatch:!0}:null)}}onRoleChange(B,te){this.rolesArray.value[te].checked=!!B.target.checked}onDomainChange(B,te){this.domainsArray.value[te].checked=!!B.target.checked}onSubmit(B){B.invalid||this._authService.signUp({name:B.value.name,email:B.value.email,password:B.value.password,roles:B.value.roles,domains:B.value.domains,active:!0})}}return De.\u0275fac=function(B){return new(B||De)(g.Y36(se.qu),g.Y36(X.e),g.Y36(un),g.Y36(kt.P))},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-register"]],decls:61,vars:19,consts:[[1,"container"],[1,"sign-form",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"sign-form__sign-up-header"],[1,"hr-border"],[1,"sign-form__sign-element"],["for","name"],[1,"name"],[1,"name-img"],["type","text","name","name","formControlName","name"],[1,"sign-error"],["for","email"],[1,"email"],[1,"email-img"],["type","text","name","email","formControlName","email"],["for","password"],[1,"password"],[1,"password-img"],["type","password","name","password","formControlName","password"],["for","confirmPass"],["type","password","name","confirmPass","formControlName","confirmPass",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"sign-form__sign-form-btn"],["type","submit",1,"btn-default",3,"disabled"],["class","error-msg",4,"ngIf"],["type","checkbox",3,"value","change"],["type","checkbox",3,"value","name","change"],[1,"error-msg"]],template:function(B,te){1&B&&(g.TgZ(0,"div"),g.TgZ(1,"div",0),g.TgZ(2,"form",1),g.NdJ("ngSubmit",function(){return te.onSubmit(te.signupForm)}),g.YNc(3,Tn,1,0,"app-loading-spinner",2),g.TgZ(4,"div",3),g.TgZ(5,"h2"),g._uU(6,"Register"),g.qZA(),g.qZA(),g._UZ(7,"hr",4),g.TgZ(8,"div",5),g.TgZ(9,"label",6),g._uU(10,"Name"),g.qZA(),g.TgZ(11,"div",7),g._UZ(12,"div",8),g._UZ(13,"input",9),g.qZA(),g.TgZ(14,"ul",10),g.YNc(15,on,2,0,"li",2),g.YNc(16,Bt,2,0,"li",2),g.YNc(17,Ft,2,0,"li",2),g.qZA(),g.qZA(),g.TgZ(18,"div",5),g.TgZ(19,"label",11),g._uU(20,"Email"),g.qZA(),g.TgZ(21,"div",12),g._UZ(22,"div",13),g._UZ(23,"input",14),g.qZA(),g.TgZ(24,"ul",10),g.YNc(25,Jt,2,0,"li",2),g.YNc(26,Ht,2,0,"li",2),g.qZA(),g.qZA(),g.TgZ(27,"div",5),g.TgZ(28,"label",15),g._uU(29,"Password"),g.qZA(),g.TgZ(30,"div",16),g._UZ(31,"div",17),g._UZ(32,"input",18),g.qZA(),g.TgZ(33,"ul",10),g.YNc(34,Pn,2,0,"li",2),g.YNc(35,bn,2,0,"li",2),g.YNc(36,or,2,0,"li",2),g.qZA(),g.qZA(),g.TgZ(37,"div",5),g.TgZ(38,"label",19),g._uU(39,"Confirm Password"),g.qZA(),g.TgZ(40,"div",16),g._UZ(41,"div",17),g._UZ(42,"input",20),g.qZA(),g.TgZ(43,"ul",10),g.YNc(44,Gn,2,0,"li",2),g.qZA(),g.qZA(),g.TgZ(45,"div",5),g.TgZ(46,"p"),g._uU(47,"Roles"),g.qZA(),g.TgZ(48,"div"),g.YNc(49,Bn,3,6,"label",21),g.qZA(),g.qZA(),g.TgZ(50,"div",5),g.TgZ(51,"p"),g._uU(52,"Domains"),g.qZA(),g.TgZ(53,"div"),g.YNc(54,Jn,3,3,"label",21),g.qZA(),g.qZA(),g.TgZ(55,"div",22),g.TgZ(56,"button",23),g._uU(57,"Create registration"),g.qZA(),g.TgZ(58,"ul",10),g.YNc(59,Sn,2,1,"li",24),g.YNc(60,An,2,1,"li",24),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&B&&(g.xp6(2),g.Q6J("formGroup",te.signupForm),g.xp6(1),g.Q6J("ngIf",te.isLoading),g.xp6(12),g.Q6J("ngIf",!te.signupForm.get("name").valid&&!te.signupForm.get("name").hasError("maxlength")&&!te.signupForm.get("name").hasError("minlength")&&te.signupForm.get("name").touched),g.xp6(1),g.Q6J("ngIf",te.signupForm.get("name").hasError("maxlength")&&te.signupForm.get("name").touched),g.xp6(1),g.Q6J("ngIf",te.signupForm.get("name").hasError("minlength")&&te.signupForm.get("name").touched),g.xp6(8),g.Q6J("ngIf",!te.signupForm.get("email").valid&&!te.signupForm.get("email").hasError("email")&&te.signupForm.get("email").touched),g.xp6(1),g.Q6J("ngIf",te.signupForm.get("email").hasError("email")&&te.signupForm.get("email").touched),g.xp6(8),g.Q6J("ngIf",!te.signupForm.get("password").valid&&!te.signupForm.get("password").hasError("maxlength")&&!te.signupForm.get("password").hasError("minlength")&&te.signupForm.get("password").touched),g.xp6(1),g.Q6J("ngIf",te.signupForm.get("password").hasError("maxlength")&&te.signupForm.get("password").touched),g.xp6(1),g.Q6J("ngIf",te.signupForm.get("password").hasError("minlength")&&te.signupForm.get("password").touched),g.xp6(6),g.Q6J("ngClass",g.VKq(17,Mi,!te.signupForm.get("confirmPass").valid&&te.signupForm.get("confirmPass").dirty)),g.xp6(2),g.Q6J("ngIf",!te.signupForm.get("confirmPass").valid&&te.signupForm.get("confirmPass").dirty),g.xp6(5),g.Q6J("ngForOf",te.roles),g.xp6(5),g.Q6J("ngForOf",te.domains),g.xp6(2),g.Q6J("disabled",!te.signupForm.valid),g.xp6(3),g.Q6J("ngIf",te.errorAuthMsg),g.xp6(1),g.Q6J("ngIf",te.errorOnSetUserData))},directives:[se._Y,se.JL,se.sg,P.O5,se.Fj,se.JJ,se.u,P.mk,P.sg,Se],styles:['@import"https://fonts.googleapis.com/css?family=Rubik&display=swap";.sign-form[_ngcontent-%COMP%]{background-color:var(--color2);box-shadow:0 0 10px 1px #000000bf;max-width:767px;padding:20px;margin:0 auto;position:relative}.sign-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.sign-form__sign-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#b53636;text-align:center;font-size:1.3em;padding:5px}.sign-form__sign-element[_ngcontent-%COMP%]{font-size:1.1em;margin:20px 0}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{display:flex}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(user.73c0f083ad3711c1d950.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   .phone-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(phone.fb842bee9111b51d51a6.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:textfield;margin:0;border-left:none!important}.sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .sign-form__sign-element[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}.sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   .email-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;box-sizing:border-box;background-image:url(email.31cd4a3f10faa4acdb5c.png);padding:10px}.sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .password-img[_ngcontent-%COMP%]{background-color:#b53636;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(password.63582da5386052e0358d.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .sign-error[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#b53636;font-size:1.1em;padding:10px 0 0;list-style:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 50px);border:1px solid var(--color8);color:var(--color7);border-radius:0 3px 3px 0;box-sizing:border-box;padding:7px;font-size:1.1em;outline:none;background-color:#ffffff80;filter:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{border:1px solid var(--color8);-webkit-text-fill-color:var(--color7);-webkit-box-shadow:none;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.sign-form__sign-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;width:100%;color:var(--color7)}.sign-form[_ngcontent-%COMP%]   .hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:20px 0}']}),De})();var Wt=Q(9829);let kn=(()=>{class De{constructor(B,te){this._router=B,this._firebaseAuth=te}canActivate(B,te){const{autenticationRequired:ce,autenticationFailureRedirectUrl:ke}=B.data;return new Promise((Yt,En)=>{this.userSubscription=this._firebaseAuth.authState.subscribe(ln=>ce&&ln||!ce&&!ln?(this.userSubscription.unsubscribe(),Yt(!0)):(this.userSubscription.unsubscribe(),this._router.navigate([ke])))})}}return De.\u0275fac=function(B){return new(B||De)(g.LFG(C.F0),g.LFG(Wt.zQ))},De.\u0275prov=g.Yz7({token:De,factory:De.\u0275fac,providedIn:"root"}),De})();function Ln(De,We){if(1&De&&(g.TgZ(0,"p"),g._uU(1),g.qZA()),2&De){const B=g.oxw().$implicit;g.xp6(1),g.hij(" ",B.name," ")}}const Qt=function(De){return[De]};function dr(De,We){if(1&De&&(g.TgZ(0,"li",5),g.YNc(1,Ln,2,1,"p",6),g.qZA()),2&De){const B=We.$implicit;g.Q6J("routerLink",g.VKq(2,Qt,B.route)),g.xp6(1),g.Q6J("ngIf",B.checked)}}let Ur=(()=>{class De{constructor(B){this._authService=B}ngOnInit(){this.userSubscirption=this._authService.user.subscribe(B=>{this.user=B})}ngOnDestroy(){this.userSubscirption.unsubscribe()}}return De.\u0275fac=function(B){return new(B||De)(g.Y36(X.e))},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-settings"]],decls:7,vars:1,consts:[[1,"container"],[1,"settings"],[1,"settings__nav"],["routerLinkActive","settings-link-active",3,"routerLink",4,"ngFor","ngForOf"],[1,"settings__options"],["routerLinkActive","settings-link-active",3,"routerLink"],[4,"ngIf"]],template:function(B,te){1&B&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"ul"),g.YNc(4,dr,2,4,"li",3),g.qZA(),g.qZA(),g.TgZ(5,"div",4),g._UZ(6,"router-outlet"),g.qZA(),g.qZA(),g.qZA()),2&B&&(g.xp6(4),g.Q6J("ngForOf",null==te.user?null:te.user.roles))},directives:[P.sg,C.lC,C.Od,C.rH,P.O5],styles:[".settings[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.settings__nav[_ngcontent-%COMP%]{width:10%}.settings__nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;cursor:pointer}.settings__options[_ngcontent-%COMP%]{width:90%}"]}),De})();const Zn=function(){return["active"]},Dt=function(){return["inactive"]};let Ze=(()=>{class De{constructor(){}ngOnInit(){}}return De.\u0275fac=function(B){return new(B||De)},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-users"]],decls:8,vars:4,consts:[[1,"container"],[1,"users-nav"],["routerLinkActive","users-link-active",3,"routerLink"]],template:function(B,te){1&B&&(g.TgZ(0,"div",0),g.TgZ(1,"div"),g.TgZ(2,"ul",1),g.TgZ(3,"li",2),g._uU(4,"Active Accounts"),g.qZA(),g.TgZ(5,"li",2),g._uU(6,"Inactive Accounts"),g.qZA(),g.qZA(),g.qZA(),g._UZ(7,"router-outlet"),g.qZA()),2&B&&(g.xp6(3),g.Q6J("routerLink",g.DdM(2,Zn)),g.xp6(2),g.Q6J("routerLink",g.DdM(3,Dt)))},directives:[C.Od,C.rH,C.lC],styles:[".users-nav[_ngcontent-%COMP%]{display:flex;align-items:center}.users-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;padding:10px;cursor:pointer}"]}),De})(),ze=(()=>{class De{constructor(){}ngOnInit(){}}return De.\u0275fac=function(B){return new(B||De)},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-blocked-clients"]],decls:2,vars:0,template:function(B,te){1&B&&(g.TgZ(0,"p"),g._uU(1,"blocked-clients works!"),g.qZA())},styles:[""]}),De})();const It=function(){return["change-password"]},xt=function(){return["change-theme"]};let sn=(()=>{class De{constructor(){}ngOnInit(){}}return De.\u0275fac=function(B){return new(B||De)},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-account-settings"]],decls:9,vars:4,consts:[[1,"container"],["routerLinkActive","account-settings-link-active",3,"routerLink"]],template:function(B,te){1&B&&(g.TgZ(0,"div",0),g.TgZ(1,"div"),g.TgZ(2,"ul"),g.TgZ(3,"li",1),g._uU(4," Change Password "),g.qZA(),g.TgZ(5,"li",1),g._uU(6," Change Theme "),g.qZA(),g.qZA(),g.qZA(),g.TgZ(7,"div"),g._UZ(8,"router-outlet"),g.qZA(),g.qZA()),2&B&&(g.xp6(3),g.Q6J("routerLink",g.DdM(2,It)),g.xp6(2),g.Q6J("routerLink",g.DdM(3,xt)))},directives:[C.Od,C.rH,C.lC],styles:[""]}),De})();function Mt(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g.TgZ(6,"button",6),g.NdJ("click",function(){const ke=g.CHM(B).$implicit;return g.oxw().deleteDomainPopUpFun(ke)}),g._uU(7,"Delete"),g.qZA(),g.qZA(),g.qZA()}if(2&De){const B=We.$implicit;g.xp6(2),g.Oqu(B.domain),g.xp6(2),g.Oqu(B.description)}}function He(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.TgZ(3,"div"),g.TgZ(4,"button",6),g.NdJ("click",function(){return g.CHM(B),g.oxw().deleteDomain()}),g._uU(5,"Yes"),g.qZA(),g.TgZ(6,"button",6),g.NdJ("click",function(){return g.CHM(B),g.oxw().cancelPopUpFun()}),g._uU(7,"No"),g.qZA(),g.qZA(),g.qZA()}if(2&De){const B=g.oxw();g.xp6(2),g.hij("\u0410re you sure you want to delete domain ",B.currentDomain.description,"?")}}let gt=(()=>{class De{constructor(B,te){this._fb=B,this._firestoreCollections=te,this.deleteDomainPopUp=!1}ngOnInit(){this.addDomainForm=this._fb.group({domain:[null,[se.kI.required,se.kI.pattern("^[a-z]*$")]],description:[null,se.kI.required]}),this._usersSubscription=this._firestoreCollections.getUsers().subscribe(B=>{this.users=B.map(te=>Object.assign({id:te.payload.doc.id},te.payload.doc.data()))},B=>{}),this._domainsSubscription=this._firestoreCollections.getDomains().subscribe(B=>{this.domains=B.map(te=>Object.assign({id:te.payload.doc.id},te.payload.doc.data()))},B=>{})}ngOnDestroy(){this._domainsSubscription.unsubscribe(),this._usersSubscription.unsubscribe()}submitDomainForm(B){if(B.invalid)return;const te=B.value.domain,ce=B.value.description,Yt={domain:te,description:ce,checked:!1};this._firestoreCollections.addDomain({domain:te,description:ce}).then(()=>{for(const En of this.users)this._firestoreCollections.setDomain(En.uid,Yt).then(()=>{},ln=>{});B.reset()},En=>{})}deleteDomain(){this._firestoreCollections.deleteDomain(this.currentDomain.id).then(()=>{const B=this.currentDomain.description,te=this.currentDomain.domain;for(const ce of this.users)this.deleteDomainItem(ce.uid,{checked:!0,description:B,domain:te});for(const ce of this.users)this.deleteDomainItem(ce.uid,{checked:!1,description:B,domain:te});this.cancelPopUpFun()},B=>{})}deleteDomainPopUpFun(B){this.deleteDomainPopUp=!0,this.currentDomain=B}cancelPopUpFun(){this.deleteDomainPopUp=!1,this.currentDomain=void 0}deleteDomainItem(B,te){this._firestoreCollections.deleteDomainItem(B,te).then(()=>{},ce=>{})}}return De.\u0275fac=function(B){return new(B||De)(g.Y36(se.qu),g.Y36(kt.P))},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-allowed-domains"]],decls:24,vars:4,consts:[[3,"formGroup","ngSubmit"],["type","text","formControlName","domain","placeholder","Domain..."],["type","text","formControlName","description","placeholder","Description..."],["type","submit",3,"disabled"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click"]],template:function(B,te){1&B&&(g.TgZ(0,"div"),g.TgZ(1,"div"),g._uU(2,"Strict Mode"),g.qZA(),g.TgZ(3,"div"),g.TgZ(4,"button"),g._uU(5,"Add domain"),g.qZA(),g.TgZ(6,"form",0),g.NdJ("ngSubmit",function(){return te.submitDomainForm(te.addDomainForm)}),g.TgZ(7,"div"),g._UZ(8,"input",1),g._UZ(9,"input",2),g.qZA(),g.TgZ(10,"div"),g.TgZ(11,"button",3),g._uU(12,"Add"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"div"),g.TgZ(14,"table"),g.TgZ(15,"tr"),g.TgZ(16,"th"),g._uU(17,"Domain"),g.qZA(),g.TgZ(18,"th"),g._uU(19,"Description"),g.qZA(),g.TgZ(20,"th"),g._uU(21,"Delete"),g.qZA(),g.qZA(),g.YNc(22,Mt,8,2,"tr",4),g.qZA(),g.qZA(),g.YNc(23,He,8,1,"div",5),g.qZA()),2&B&&(g.xp6(6),g.Q6J("formGroup",te.addDomainForm),g.xp6(5),g.Q6J("disabled",te.addDomainForm.invalid),g.xp6(11),g.Q6J("ngForOf",te.domains),g.xp6(1),g.Q6J("ngIf",te.deleteDomainPopUp))},directives:[se._Y,se.JL,se.sg,se.Fj,se.JJ,se.u,P.sg,P.O5],styles:[""]}),De})(),vt=(()=>{class De{transform(B,te){return B?te?(te=te.toLowerCase(),B.filter(ce=>JSON.stringify(ce.name).toLocaleLowerCase().includes(te)||JSON.stringify(ce.email).toLocaleLowerCase().includes(te))):B:null}}return De.\u0275fac=function(B){return new(B||De)},De.\u0275pipe=g.Yjl({name:"searchPipe",type:De,pure:!0}),De})();function Tt(De,We){if(1&De&&(g.TgZ(0,"label"),g._UZ(1,"input",6),g._uU(2),g.qZA()),2&De){const B=We.$implicit;g.xp6(1),g.uIk("checked",B.checked?"checked":null),g.xp6(1),g.hij(" ",B.name," ")}}function Vt(De,We){if(1&De&&(g.TgZ(0,"label"),g._UZ(1,"input",7),g._uU(2),g.qZA()),2&De){const B=We.$implicit;g.xp6(1),g.Q6J("checked",B.checked?"checked":null),g.xp6(1),g.hij(" ",B.description," ")}}function hn(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"button",3),g.NdJ("click",function(){g.CHM(B);const ce=g.oxw().$implicit;return g.oxw().changeAccountActivity(ce.uid,!0)}),g._uU(1," Activate "),g.qZA()}}function gn(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"button",3),g.NdJ("click",function(){g.CHM(B);const ce=g.oxw().$implicit;return g.oxw().changeAccountActivity(ce.uid,!1)}),g._uU(1," Deactivate "),g.qZA()}}function Gt(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td"),g.TgZ(2,"button",3),g.NdJ("click",function(){const ke=g.CHM(B).$implicit;return g.oxw().editUser(ke)}),g._uU(3,"Edit"),g.qZA(),g.qZA(),g.TgZ(4,"td"),g._uU(5),g.qZA(),g.TgZ(6,"td"),g._uU(7),g.qZA(),g.TgZ(8,"td"),g.YNc(9,Tt,3,2,"label",1),g.qZA(),g.TgZ(10,"td"),g.TgZ(11,"div"),g.YNc(12,Vt,3,2,"label",1),g.qZA(),g.qZA(),g.TgZ(13,"td"),g.TgZ(14,"button",4),g.NdJ("click",function(){const ke=g.CHM(B).$implicit;return g.oxw().resetPassword(ke.email)}),g._uU(15," Reset Password "),g.qZA(),g.qZA(),g.TgZ(16,"td"),g.YNc(17,hn,2,0,"button",5),g.YNc(18,gn,2,0,"button",5),g.qZA(),g.TgZ(19,"td"),g.TgZ(20,"button",3),g.NdJ("click",function(){const ke=g.CHM(B).$implicit;return g.oxw().getUserLogins(ke.uid)}),g._uU(21,"Login History"),g.qZA(),g.qZA(),g.qZA()}if(2&De){const B=We.$implicit,te=g.oxw();g.xp6(5),g.hij(" ",B.email," "),g.xp6(2),g.hij(" ",B.name," "),g.xp6(2),g.Q6J("ngForOf",B.roles),g.xp6(3),g.Q6J("ngForOf",B.domains),g.xp6(2),g.Q6J("disabled",te.disabledResetPasswordButton&&te.currentResetEmail==B.email),g.xp6(3),g.Q6J("ngIf",!B.active),g.xp6(1),g.Q6J("ngIf",B.active)}}function Oe(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.TgZ(3,"button",3),g.NdJ("click",function(){return g.CHM(B),g.oxw().closeResetPasswordPopUp()}),g._uU(4,"Close"),g.qZA(),g.qZA()}if(2&De){const B=g.oxw();g.xp6(2),g.hij(" Reset password email was successfully sent to ",B.currentResetEmail,"! ")}}function xe(De,We){if(1&De&&(g.TgZ(0,"tr"),g.TgZ(1,"td"),g._uU(2),g.ALo(3,"date"),g.ALo(4,"date"),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td"),g._uU(8),g.qZA(),g.TgZ(9,"td"),g._uU(10),g.qZA(),g.qZA()),2&De){const B=We.$implicit;g.xp6(2),g.AsE("",g.xi3(3,5,B.date.toDate(),"dd.MM.yyyy")," at ",g.xi3(4,8,B.date.toDate(),"HH:mm"),""),g.xp6(4),g.Oqu(B.ip),g.xp6(2),g.Oqu(B.country),g.xp6(2),g.Oqu(B.city)}}function Ye(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"button",8),g.NdJ("click",function(){return g.CHM(B),g.oxw().closeLogins()}),g._uU(2,"Close"),g.qZA(),g.TgZ(3,"table"),g.TgZ(4,"tr"),g.TgZ(5,"th"),g._uU(6,"Time"),g.qZA(),g.TgZ(7,"th"),g._uU(8,"IP"),g.qZA(),g.TgZ(9,"th"),g._uU(10,"Country"),g.qZA(),g.TgZ(11,"th"),g._uU(12,"City"),g.qZA(),g.qZA(),g.YNc(13,xe,11,11,"tr",1),g.qZA(),g.qZA()}if(2&De){const B=g.oxw();g.xp6(13),g.Q6J("ngForOf",B.loginHistory[0].loginHistory)}}function et(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"label"),g._uU(1),g.TgZ(2,"input",13),g.NdJ("change",function(ce){const ut=g.CHM(B).index;return g.oxw(2).onRoleChange(ce,ut)}),g.qZA(),g.qZA()}if(2&De){const B=We.$implicit;g.xp6(1),g.hij(" ",B.name," "),g.xp6(1),g.Q6J("checked",B.checked?"checked":null)}}function tt(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"label"),g._uU(1),g.TgZ(2,"input",13),g.NdJ("change",function(ce){const ut=g.CHM(B).index;return g.oxw(2).onDomainChange(ce,ut)}),g.qZA(),g.qZA()}if(2&De){const B=We.$implicit;g.xp6(1),g.hij(" ",B.description," "),g.xp6(1),g.Q6J("checked",B.checked?"checked":null)}}function zt(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"form",9),g.NdJ("ngSubmit",function(){return g.CHM(B),g.oxw().submitEditUserForm()}),g.TgZ(2,"div"),g.TgZ(3,"label",10),g._uU(4,"Display name"),g.qZA(),g._UZ(5,"input",11),g.qZA(),g.TgZ(6,"div"),g.YNc(7,et,3,2,"label",1),g.qZA(),g.TgZ(8,"div"),g.YNc(9,tt,3,2,"label",1),g.qZA(),g.TgZ(10,"div"),g.TgZ(11,"button",12),g._uU(12,"Apply"),g.qZA(),g.TgZ(13,"button",3),g.NdJ("click",function(){return g.CHM(B),g.oxw().resetEditUserForm()}),g._uU(14,"Cancel"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&De){const B=g.oxw();g.xp6(1),g.Q6J("formGroup",B.editUserForm),g.xp6(6),g.Q6J("ngForOf",B.currentUser.roles),g.xp6(2),g.Q6J("ngForOf",B.currentUser.domains)}}let _n=(()=>{class De{constructor(B,te,ce){this._firestoreCollections=B,this._firebaseAuth=te,this._fb=ce,this.resetPasswordPopUp=!1,this.disabledResetPasswordButton=!1}ngOnInit(){}ngOnDestroy(){}editUser(B){this.currentUser=B,this.editUserForm=this._fb.group({name:[B.name,se.kI.required],roles:this._fb.array([]),domains:this._fb.array([])});const te=this.editUserForm.get("roles"),ce=this.editUserForm.get("domains");for(const ke of B.roles)te.push(new se.NI({checked:ke.checked,name:ke.name,route:ke.route,value:ke.value}));for(const ke of B.domains)ce.push(new se.NI({checked:ke.checked,description:ke.description,domain:ke.domain}))}submitEditUserForm(){this.editUserForm.invalid||this._firestoreCollections.setUserData({name:this.editUserForm.value.name,email:this.currentUser.email,active:this.currentUser.active,roles:this.editUserForm.value.roles,domains:this.editUserForm.value.domains,uid:this.currentUser.uid},!1).then(()=>{this.editUserForm.reset(),this.currentUser=void 0},ln=>{})}resetEditUserForm(){this.currentUser=void 0,this.editUserForm.reset()}onRoleChange(B,te){this.editUserForm.value.roles[te].checked=!!B.target.checked}onDomainChange(B,te){this.editUserForm.value.domains[te].checked=!!B.target.checked}getUserLogins(B){this._loginHistorySubscription=this._firestoreCollections.getUserLogins(B).subscribe(te=>{this.loginHistory=te.map(ce=>Object.assign({id:ce.payload.doc.id},ce.payload.doc.data()))})}closeLogins(){this.loginHistory=void 0,this._loginHistorySubscription.unsubscribe()}changeAccountActivity(B,te){this._firestoreCollections.updateUserActivity({userId:B,parameter:te}).then(()=>{},Yt=>{})}closeResetPasswordPopUp(){this.resetPasswordPopUp=!1,this.disabledResetPasswordButton=!1,this.currentResetEmail=""}resetPassword(B){this.disabledResetPasswordButton=!0,this.currentResetEmail=B,this._firebaseAuth.sendPasswordResetEmail(this.currentResetEmail).then(()=>{this.resetPasswordPopUp=!0,this.errorMsgOnResetPassword=""},te=>{this.errorMsgOnResetPassword=te.message,this.disabledResetPasswordButton=!1})}}return De.\u0275fac=function(B){return new(B||De)(g.Y36(kt.P),g.Y36(Wt.zQ),g.Y36(se.qu))},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-users-template"]],inputs:{users:"users"},decls:25,vars:8,consts:[["type","text","placeholder","Search by email or display name...",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button",3,"click"],["type","button",3,"disabled","click"],["type","button",3,"click",4,"ngIf"],["disabled","","type","checkbox"],["type","checkbox","disabled","",3,"checked"],[3,"click"],[3,"formGroup","ngSubmit"],["for","name"],["type","text","formControlName","name"],["type","submit"],["type","checkbox",3,"checked","change"]],template:function(B,te){1&B&&(g.TgZ(0,"div"),g.TgZ(1,"div"),g.TgZ(2,"input",0),g.NdJ("ngModelChange",function(ke){return te.searchParams=ke}),g.qZA(),g.TgZ(3,"table"),g.TgZ(4,"tr"),g._UZ(5,"th"),g.TgZ(6,"th"),g._uU(7,"Email Address"),g.qZA(),g.TgZ(8,"th"),g._uU(9,"Display Name"),g.qZA(),g.TgZ(10,"th"),g._uU(11,"Roles"),g.qZA(),g.TgZ(12,"th"),g._uU(13,"Domains"),g.qZA(),g.TgZ(14,"th"),g._uU(15,"Reset Password"),g.qZA(),g.TgZ(16,"th"),g._uU(17,"Activity"),g.qZA(),g.TgZ(18,"th"),g._uU(19,"Login History"),g.qZA(),g.qZA(),g.YNc(20,Gt,22,7,"tr",1),g.ALo(21,"searchPipe"),g.qZA(),g.qZA(),g.YNc(22,Oe,5,1,"div",2),g.YNc(23,Ye,14,1,"div",2),g.YNc(24,zt,15,3,"div",2),g.qZA()),2&B&&(g.xp6(2),g.Q6J("ngModel",te.searchParams),g.xp6(18),g.Q6J("ngForOf",g.xi3(21,5,te.users,te.searchParams)),g.xp6(2),g.Q6J("ngIf",te.resetPasswordPopUp),g.xp6(1),g.Q6J("ngIf",te.loginHistory),g.xp6(1),g.Q6J("ngIf",te.currentUser))},directives:[se.Fj,se.JJ,se.On,P.sg,P.O5,se._Y,se.JL,se.sg,se.u],pipes:[vt,P.uU],styles:[""]}),De})(),nr=(()=>{class De{constructor(B){this._firestoreCollections=B}ngOnInit(){this._activeUsersSubscription=this._firestoreCollections.getUserData("active",!0).subscribe(B=>{this.activeUsers=B.map(te=>Object.assign({id:te.payload.doc.id},te.payload.doc.data()))},B=>{})}ngOnDestroy(){this._activeUsersSubscription.unsubscribe()}}return De.\u0275fac=function(B){return new(B||De)(g.Y36(kt.P))},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-active-acounts"]],decls:1,vars:1,consts:[[3,"users"]],template:function(B,te){1&B&&g._UZ(0,"app-users-template",0),2&B&&g.Q6J("users",te.activeUsers)},directives:[_n],styles:[""]}),De})(),Vn=(()=>{class De{constructor(B){this._firestoreCollections=B}ngOnInit(){this._inactiveUsersSubscription=this._firestoreCollections.getUserData("active",!1).subscribe(B=>{this.inactiveUsers=B.map(te=>Object.assign({id:te.payload.doc.id},te.payload.doc.data()))},B=>{})}ngOnDestroy(){this._inactiveUsersSubscription.unsubscribe()}}return De.\u0275fac=function(B){return new(B||De)(g.Y36(kt.P))},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-inactive-acounts"]],decls:1,vars:1,consts:[[3,"users"]],template:function(B,te){1&B&&g._UZ(0,"app-users-template",0),2&B&&g.Q6J("users",te.inactiveUsers)},directives:[_n],styles:[""]}),De})(),Rn=(()=>{class De{constructor(B,te){this._router=B,this._authService=te}canActivate(B,te){const{role:ce,autenticationFailureRedirectUrl:ke}=B.data;return new Promise((ut,Yt)=>{this.userSubscription=this._authService.user.subscribe(En=>{if(null!=En){for(let ln of En.roles)if(ce==ln.value&&ln.checked)return void 0!==this.userSubscription&&this.userSubscription.unsubscribe(),ut(!0);return this.userSubscription.unsubscribe(),this._router.navigate([ke])}null==En&&this.userSubscription&&this.userSubscription.unsubscribe()})})}}return De.\u0275fac=function(B){return new(B||De)(g.LFG(C.F0),g.LFG(X.e))},De.\u0275prov=g.Yz7({token:De,factory:De.\u0275fac,providedIn:"root"}),De})();function ri(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," Please enter a passowrd! "),g.qZA())}function Br(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," The password could not be longer then 30 symbols! "),g.qZA())}function Yr(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," The password should be at least 8 symbols! "),g.qZA())}function Er(De,We){1&De&&(g.TgZ(0,"li"),g._uU(1," The passwords do not match! "),g.qZA())}function Ri(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"p"),g._uU(2,"Your password has been successfully changed!"),g.qZA(),g.TgZ(3,"button",11),g.NdJ("click",function(){return g.CHM(B),g.oxw().closePasswordChangePopUp()}),g._uU(4,"Close"),g.qZA(),g.qZA()}}function Fo(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.TgZ(3,"div"),g.TgZ(4,"button",12),g.NdJ("click",function(){return g.CHM(B),g.oxw().logout()}),g._uU(5,"Logout"),g.qZA(),g.TgZ(6,"button",12),g.NdJ("click",function(){return g.CHM(B),g.oxw().stayLogged()}),g._uU(7,"Change later"),g.qZA(),g.qZA(),g.qZA()}if(2&De){const B=g.oxw();g.xp6(2),g.Oqu(B.changePasswordMsg)}}const ki=function(De){return{invalid:De}};let ao=(()=>{class De{constructor(B,te,ce){this._fb=B,this._firebaseAuth=te,this._authService=ce,this.changePasswordPopUp=!1,this.changePasswordLogoutPopUp=!1}ngOnInit(){this.changePasswordFrom=this._fb.group({password:[null,[se.kI.required,se.kI.minLength(8),se.kI.maxLength(30)]],confirmPass:[null,[se.kI.required]]},{validator:this.confirmPasswordMatcher("password","confirmPass")})}confirmPasswordMatcher(B,te){return ce=>{const ut=ce.controls[te];ut.setErrors(ce.controls[B].value!==ut.value?{mustMatch:!0}:null)}}changePassword(B){if(B.invalid)return;const te=B.value.password;this._firebaseAuth.currentUser.then(ce=>{null==ce||ce.updatePassword(te).then(()=>{this.changePasswordPopUp=!0,B.reset()},ke=>{this.changePasswordLogoutPopUp=!0,this.changePasswordMsg=ke.message})})}closePasswordChangePopUp(){this.changePasswordPopUp=!1}logout(){this._authService.logout()}stayLogged(){this.changePasswordLogoutPopUp=!1,this.changePasswordMsg="",this.changePasswordFrom.reset()}}return De.\u0275fac=function(B){return new(B||De)(g.Y36(se.qu),g.Y36(Wt.zQ),g.Y36(X.e))},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-change-password"]],decls:25,vars:11,consts:[[3,"formGroup","ngSubmit"],[1,"sign-form__sign-element"],["for","password"],[1,"password"],[1,"password-img"],["type","password","name","password","formControlName","password"],[1,"sign-error"],[4,"ngIf"],["for","confirmPass"],["type","password","name","confirmPass","formControlName","confirmPass",3,"ngClass"],["type","submit",3,"disabled"],["type","button",3,"click"],[3,"click"]],template:function(B,te){1&B&&(g.TgZ(0,"div"),g.TgZ(1,"form",0),g.NdJ("ngSubmit",function(){return te.changePassword(te.changePasswordFrom)}),g.TgZ(2,"div",1),g.TgZ(3,"label",2),g._uU(4,"Password"),g.qZA(),g.TgZ(5,"div",3),g._UZ(6,"div",4),g._UZ(7,"input",5),g.qZA(),g.TgZ(8,"ul",6),g.YNc(9,ri,2,0,"li",7),g.YNc(10,Br,2,0,"li",7),g.YNc(11,Yr,2,0,"li",7),g.qZA(),g.qZA(),g.TgZ(12,"div",1),g.TgZ(13,"label",8),g._uU(14,"Confirm Password"),g.qZA(),g.TgZ(15,"div",3),g._UZ(16,"div",4),g._UZ(17,"input",9),g.qZA(),g.TgZ(18,"ul",6),g.YNc(19,Er,2,0,"li",7),g.qZA(),g.qZA(),g.TgZ(20,"div"),g.TgZ(21,"button",10),g._uU(22,"Change Password"),g.qZA(),g.qZA(),g.qZA(),g.YNc(23,Ri,5,0,"div",7),g.YNc(24,Fo,8,1,"div",7),g.qZA()),2&B&&(g.xp6(1),g.Q6J("formGroup",te.changePasswordFrom),g.xp6(8),g.Q6J("ngIf",!te.changePasswordFrom.get("password").valid&&!te.changePasswordFrom.get("password").hasError("maxlength")&&!te.changePasswordFrom.get("password").hasError("minlength")&&te.changePasswordFrom.get("password").touched),g.xp6(1),g.Q6J("ngIf",te.changePasswordFrom.get("password").hasError("maxlength")&&te.changePasswordFrom.get("password").touched),g.xp6(1),g.Q6J("ngIf",te.changePasswordFrom.get("password").hasError("minlength")&&te.changePasswordFrom.get("password").touched),g.xp6(6),g.Q6J("ngClass",g.VKq(9,ki,!te.changePasswordFrom.get("confirmPass").valid&&te.changePasswordFrom.get("confirmPass").dirty)),g.xp6(2),g.Q6J("ngIf",!te.changePasswordFrom.get("confirmPass").valid&&te.changePasswordFrom.get("confirmPass").dirty),g.xp6(2),g.Q6J("disabled",te.changePasswordFrom.invalid),g.xp6(2),g.Q6J("ngIf",te.changePasswordPopUp),g.xp6(1),g.Q6J("ngIf",te.changePasswordLogoutPopUp))},directives:[se._Y,se.JL,se.sg,se.Fj,se.JJ,se.u,P.O5,P.mk],styles:[""]}),De})(),ns=(()=>{class De{constructor(){}ngOnInit(){}}return De.\u0275fac=function(B){return new(B||De)},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-change-theme"]],decls:2,vars:0,template:function(B,te){1&B&&(g.TgZ(0,"p"),g._uU(1,"change-theme works!"),g.qZA())},styles:[""]}),De})();const Fr=function(){return["allowed-domains"]},ar=function(){return["chat-menu-options"]};let yn=(()=>{class De{constructor(){}ngOnInit(){}}return De.\u0275fac=function(B){return new(B||De)},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-domain-options"]],decls:8,vars:4,consts:[["routerLinkActive","domain-options-router-link-active",3,"routerLink"]],template:function(B,te){1&B&&(g.TgZ(0,"div"),g.TgZ(1,"div"),g.TgZ(2,"ul"),g.TgZ(3,"li",0),g._uU(4,"Allowed Domains"),g.qZA(),g.TgZ(5,"li",0),g._uU(6,"Chat Menu Options"),g.qZA(),g.qZA(),g.qZA(),g._UZ(7,"router-outlet"),g.qZA()),2&B&&(g.xp6(3),g.Q6J("routerLink",g.DdM(2,Fr)),g.xp6(2),g.Q6J("routerLink",g.DdM(3,ar)))},directives:[C.Od,C.rH,C.lC],styles:[""]}),De})();var Lr=Q(9351),Xi=Q(2074);const wr=["editImg"];function Xt(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"button",4),g.NdJ("click",function(){return g.CHM(B),g.oxw().activateMenuOptionForm()}),g._uU(1,"Add menu option"),g.qZA()}}function dn(De,We){if(1&De&&(g.TgZ(0,"div"),g._UZ(1,"img",15),g.qZA()),2&De){const B=g.oxw(2);g.xp6(1),g.Q6J("src",B.menuFileLocalPath,g.LSH)}}function In(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"form",5),g.NdJ("ngSubmit",function(){g.CHM(B);const ce=g.oxw();return ce.isInEditMenuEditOptionMode?ce.submitmenuEditOptionsForm():ce.submitMenuOptionsForm(ce.menuOptionsForm)}),g.TgZ(1,"div"),g.YNc(2,dn,2,1,"div",3),g.TgZ(3,"div"),g.TgZ(4,"input",6,7),g.NdJ("change",function(ce){return g.CHM(B),g.oxw().selectMenuImg(ce)}),g.qZA(),g.qZA(),g.TgZ(6,"div"),g.TgZ(7,"button",4),g.NdJ("click",function(){return g.CHM(B),g.MAs(5).click()}),g._uU(8," Select image "),g.qZA(),g.qZA(),g.qZA(),g.TgZ(9,"div"),g.TgZ(10,"label",8),g._uU(11,"Active"),g.qZA(),g._UZ(12,"input",9),g.qZA(),g.TgZ(13,"div"),g.TgZ(14,"label",10),g._uU(15,"Key"),g.qZA(),g._UZ(16,"input",11),g.qZA(),g.TgZ(17,"div"),g.TgZ(18,"label",12),g._uU(19,"Description"),g.qZA(),g._UZ(20,"input",13),g.qZA(),g.TgZ(21,"div"),g.TgZ(22,"button",14),g._uU(23),g.qZA(),g.TgZ(24,"button",4),g.NdJ("click",function(){return g.CHM(B),g.oxw().clearMenuOptionForm()}),g._uU(25,"Cancel"),g.qZA(),g.qZA(),g.qZA()}if(2&De){const B=g.oxw();g.Q6J("formGroup",B.menuOptionsForm),g.xp6(2),g.Q6J("ngIf",!B.isInEditMenuEditOptionMode),g.xp6(20),g.Q6J("disabled",B.menuOptionsForm.invalid),g.xp6(1),g.Oqu(B.isInEditMenuEditOptionMode?"Change":"Add")}}function Zr(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"button",4),g.NdJ("click",function(){return g.CHM(B),g.oxw(2).applyNewImg()}),g._uU(1,"Apply (icon)"),g.qZA()}}function Ti(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"button",4),g.NdJ("click",function(){return g.CHM(B),g.oxw(2).clearMenuOptionForm()}),g._uU(1,"Cancel (icon)"),g.qZA()}}function Dr(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td"),g.TgZ(2,"button",4),g.NdJ("click",function(){const ke=g.CHM(B).$implicit;return g.oxw().editOption(ke)}),g._uU(3,"Edit"),g.qZA(),g.qZA(),g.TgZ(4,"td"),g.TgZ(5,"button",4),g.NdJ("click",function(){const ke=g.CHM(B).$implicit;return g.oxw().deleteMenuOptionPopUp(ke)}),g._uU(6,"Delete"),g.qZA(),g.qZA(),g.TgZ(7,"td"),g.TgZ(8,"div"),g.TgZ(9,"input",16,17),g.NdJ("change",function(ce){const ut=g.CHM(B).$implicit;return g.oxw().editMenuImg(ce,ut)}),g.qZA(),g.qZA(),g._UZ(11,"img",15),g.TgZ(12,"button",4),g.NdJ("click",function(){return g.CHM(B),g.MAs(10).click()}),g._uU(13,"Edit Image (icon)"),g.qZA(),g.YNc(14,Zr,2,0,"button",0),g.YNc(15,Ti,2,0,"button",0),g.qZA(),g.TgZ(16,"td"),g.TgZ(17,"label"),g._uU(18,"Active"),g.qZA(),g._UZ(19,"input",18),g.qZA(),g.TgZ(20,"td"),g._uU(21),g.qZA(),g.qZA()}if(2&De){const B=We.$implicit,te=g.oxw();g.xp6(11),g.Q6J("src",te.menuEditedImage&&te.currentOption.id==B.id?te.menuEditedImage:B.img,g.LSH),g.xp6(3),g.Q6J("ngIf",te.menuEditedImage&&te.currentOption.id==B.id),g.xp6(1),g.Q6J("ngIf",te.menuEditedImage&&te.currentOption.id==B.id),g.xp6(4),g.Q6J("checked",B.active?"checked":null),g.xp6(2),g.Oqu(B.description)}}function Xr(De,We){if(1&De){const B=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.TgZ(3,"button",4),g.NdJ("click",function(){return g.CHM(B),g.oxw().deleteMenuOption()}),g._uU(4,"OK"),g.qZA(),g.TgZ(5,"button",4),g.NdJ("click",function(){return g.CHM(B),g.oxw().clearMenuOptionForm()}),g._uU(6,"Cancel"),g.qZA(),g.qZA()}if(2&De){const B=g.oxw();g.xp6(2),g.hij("Menu ",B.currentOption.description," will be deleted!")}}let vr=(()=>{class De{constructor(B,te,ce,ke){this._fb=B,this._angularFireStorage=te,this._firestoreCollectionService=ce,this._generateIdService=ke,this.menuDefaultImg="../../../../../assets/images/menu-options/upload-img.png",this.menuFileLocalPath=this.menuDefaultImg,this.isOptionMenuActive=!1,this.isInEditMenuEditOptionMode=!1,this.isDeleteMenuOptionPopUpActive=!1}ngOnInit(){this.menuOptionsForm=this._fb.group({key:[null,se.kI.required],description:[null,se.kI.required],active:[!0],img:[null,se.kI.required]}),this._menuOptionsSubscription=this._firestoreCollectionService.getMenuOptions().subscribe(B=>{this.menuOptions=B.map(te=>Object.assign({id:te.payload.doc.id},te.payload.doc.data()))},B=>{})}ngOnDestroy(){this._menuOptionsSubscription.unsubscribe()}activateMenuOptionForm(){this.isOptionMenuActive=!0}clearMenuOptionForm(){this.isOptionMenuActive=!1,this.currentOption=void 0,this.isDeleteMenuOptionPopUpActive=!1,this.isInEditMenuEditOptionMode=!1,this.menuEditedImage=void 0,this.menuFileLocalPath=this.menuDefaultImg,this.menuOptionsForm.reset(),this.editImg.nativeElement.value=""}submitMenuOptionsForm(B){B.invalid||this.uploadCarImgToFirestore().then(()=>this._firestoreCollectionService.addMenuOptionItem({key:B.value.key,description:B.value.description,img:B.value.img,active:B.value.active}).then(()=>{this.clearMenuOptionForm(),this.menuFileLocalPath=this.menuDefaultImg,this.isOptionMenuActive=!1},En=>{}),te=>{})}selectMenuImg(B){if(this.menuFile=B.target.files[0],this.menuFile){const te=new FileReader;te.onload=ce=>{this.menuFileLocalPath=ce.target.result},te.readAsDataURL(B.target.files[0])}else this.menuFileLocalPath=this.menuDefaultImg}uploadCarImgToFirestore(){return new Promise((B,te)=>{this._angularFireStorage.upload("/optionMenuImages/"+this._generateIdService.generateId()+this.menuFile.name,this.menuFile).then(ce=>{ce.ref.getDownloadURL().then(ke=>{this.menuOptionsForm.value.img=ke,B()},ke=>{})},ce=>{})})}deleteMenuOptionPopUp(B){this.currentOption=B,this.isDeleteMenuOptionPopUpActive=!0}deleteMenuOption(){this._firestoreCollectionService.deleteItemFromFireStorage(this.currentOption.img).then(()=>{this._firestoreCollectionService.deleteMenuOptionItem(this.currentOption).then(()=>{this.clearMenuOptionForm()},B=>{})},B=>{})}editOption(B){this.isOptionMenuActive=!0,this.isInEditMenuEditOptionMode=!0,this.currentOption=B,this.menuOptionsForm=this._fb.group({key:[B.key,se.kI.required],description:[B.description,se.kI.required],active:[B.active],img:[null]})}submitmenuEditOptionsForm(){this._firestoreCollectionService.editMenuOptionItem({key:this.menuOptionsForm.value.key,description:this.menuOptionsForm.value.description,active:this.menuOptionsForm.value.active,id:this.currentOption.id}).then(()=>{this.clearMenuOptionForm()},Yt=>{})}editMenuImg(B,te){if(this.currentOption=te,this.menuFile=B.target.files[0],this.menuFile){const ce=new FileReader;ce.onload=ke=>{this.menuEditedImage=ke.target.result},ce.readAsDataURL(B.target.files[0])}else this.menuEditedImage=void 0,this.currentOption=void 0}applyNewImg(){this._firestoreCollectionService.deleteItemFromFireStorage(this.currentOption.img).then(()=>{this.uploadCarImgToFirestore().then(()=>{console.log(this.menuEditedImage),this._firestoreCollectionService.editMenuOptioImage(this.currentOption.id,this.menuOptionsForm.value.img).then(()=>{this.clearMenuOptionForm()},B=>{})})},B=>{})}}return De.\u0275fac=function(B){return new(B||De)(g.Y36(se.qu),g.Y36(Lr.Q1),g.Y36(kt.P),g.Y36(Xi.U))},De.\u0275cmp=g.Xpm({type:De,selectors:[["app-chat-menu-options"]],viewQuery:function(B,te){if(1&B&&g.Gf(wr,5),2&B){let ce;g.iGM(ce=g.CRH())&&(te.editImg=ce.first)}},decls:18,vars:4,consts:[["type","button",3,"click",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button",3,"click"],[3,"formGroup","ngSubmit"],["formControlName","img","type","file","accept",".png,.jpg,.jpeg,.svg,.heic",2,"display","none",3,"change"],["selectImg",""],["for","active"],["type","checkbox","name","active","formControlName","active"],["for","key"],["type","text","name","key","formControlName","key"],["for","description"],["type","text","name","description","formControlName","description"],["type","submit",3,"disabled"],[3,"src"],["type","file","accept",".png,.jpg,.jpeg,.svg,.heic",2,"display","none",3,"change"],["editImg",""],["type","checkbox","disabled","",3,"checked"]],template:function(B,te){1&B&&(g.TgZ(0,"div"),g.TgZ(1,"div"),g.YNc(2,Xt,2,0,"button",0),g.qZA(),g.TgZ(3,"div"),g.YNc(4,In,26,4,"form",1),g.qZA(),g.TgZ(5,"div"),g.TgZ(6,"table"),g.TgZ(7,"tr"),g._UZ(8,"th"),g._UZ(9,"th"),g.TgZ(10,"th"),g._uU(11,"Image"),g.qZA(),g.TgZ(12,"th"),g._uU(13,"Activity"),g.qZA(),g.TgZ(14,"th"),g._uU(15,"Description"),g.qZA(),g.qZA(),g.YNc(16,Dr,22,5,"tr",2),g.qZA(),g.qZA(),g.YNc(17,Xr,7,1,"div",3),g.qZA()),2&B&&(g.xp6(2),g.Q6J("ngIf",!te.isOptionMenuActive),g.xp6(2),g.Q6J("ngIf",te.isOptionMenuActive),g.xp6(12),g.Q6J("ngForOf",te.menuOptions),g.xp6(1),g.Q6J("ngIf",te.isDeleteMenuOptionPopUpActive))},directives:[P.O5,P.sg,se._Y,se.JL,se.sg,se.Fj,se.JJ,se.u,se.Wl],styles:["img[_ngcontent-%COMP%]{width:100px}"]}),De})(),Co=(()=>{class De{}return De.\u0275fac=function(B){return new(B||De)},De.\u0275mod=g.oAB({type:De}),De.\u0275inj=g.cJS({imports:[[P.ez,se.UX,tn.m,se.u5,C.Bz.forChild([{path:"",component:ve,children:[{path:"login",component:Mn,canActivate:[kn],data:{autenticationRequired:!1,autenticationFailureRedirectUrl:"/control-panel/chats"}},{path:"chats",component:at,canActivate:[kn],data:{autenticationRequired:!0,autenticationFailureRedirectUrl:"/control-panel/login"}},{path:"settings",component:Ur,children:[{path:"users",component:Ze,children:[{path:"active",component:nr},{path:"inactive",component:Vn},{path:"",redirectTo:"active",pathMatch:"full"}],canActivate:[Rn],data:{role:"users",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"register",component:mn,canActivate:[Rn],data:{role:"register",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"blocked-clients",component:ze,canActivate:[Rn],data:{role:"blockedClients",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"account-settings",component:sn,children:[{path:"change-password",component:ao},{path:"change-theme",component:ns},{path:"",redirectTo:"change-password",pathMatch:"full"}],canActivate:[Rn],data:{role:"accountSettings",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"domain-options",component:yn,children:[{path:"allowed-domains",component:gt},{path:"chat-menu-options",component:vr},{path:"",redirectTo:"allowed-domains",pathMatch:"full"}],canActivate:[Rn],data:{role:"domainOptions",autenticationFailureRedirectUrl:"/control-panel/settings"}}],canActivate:[kn],data:{autenticationRequired:!0,autenticationFailureRedirectUrl:"/control-panel/login"}},{path:"**",redirectTo:"chats"}]}])]]}),De})()},7236:(jt,it,Q)=>{"use strict";Q.r(it),Q.d(it,{ErrorModule:()=>Ve});var P=Q(8583),g=Q(7716);let X=(()=>{class Ee{constructor(){}ngOnInit(){}}return Ee.\u0275fac=function(fe){return new(fe||Ee)},Ee.\u0275cmp=g.Xpm({type:Ee,selectors:[["app-error"]],decls:2,vars:0,template:function(fe,ve){1&fe&&(g.TgZ(0,"p"),g._uU(1,"error works!"),g.qZA())},styles:[""]}),Ee})();var C=Q(2213);let Ve=(()=>{class Ee{}return Ee.\u0275fac=function(fe){return new(fe||Ee)},Ee.\u0275mod=g.oAB({type:Ee}),Ee.\u0275inj=g.cJS({imports:[[P.ez,C.Bz.forChild([{path:"",component:X}])]]}),Ee})()},4552:(jt,it,Q)=>{"use strict";Q.d(it,{q:()=>C});var P=Q(7716),g=Q(8583);function X(Ve,Ee){if(1&Ve&&(P.TgZ(0,"div"),P.TgZ(1,"div"),P.TgZ(2,"div"),P.TgZ(3,"p"),P._uU(4),P.qZA(),P.TgZ(5,"p"),P._uU(6),P.ALo(7,"date"),P.qZA(),P.qZA(),P.TgZ(8,"p"),P._uU(9),P.qZA(),P.qZA(),P.qZA()),2&Ve){const Fe=Ee.$implicit;P.xp6(4),P.Oqu(Fe.nick),P.xp6(2),P.Oqu(P.xi3(7,3,Fe.time.toDate(),"HH:mm")),P.xp6(3),P.Oqu(Fe.message)}}let C=(()=>{class Ve{constructor(){this.chatHistory=[]}ngOnInit(){}}return Ve.\u0275fac=function(Fe){return new(Fe||Ve)},Ve.\u0275cmp=P.Xpm({type:Ve,selectors:[["app-chat-form-history"]],inputs:{chatHistory:"chatHistory"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(Fe,fe){1&Fe&&(P.TgZ(0,"div"),P.YNc(1,X,10,6,"div",0),P.qZA()),2&Fe&&(P.xp6(1),P.Q6J("ngForOf",fe.chatHistory))},directives:[g.sg],pipes:[g.uU],styles:[""]}),Ve})()},1437:(jt,it,Q)=>{"use strict";Q.d(it,{a:()=>Ve});var P=Q(665),g=Q(2329),X=Q(7716),C=Q(3210);let Ve=(()=>{class Ee{constructor(fe,ve){this._firestoreCollections=fe,this._fb=ve}ngOnInit(){this.chatForm=this._fb.group({message:[null,P.kI.required]})}submitChatForm(fe){if(fe.invalid)return;const me={nick:this.userInfo.nick,chatId:this.userInfo.chatId,domain:this.userInfo.domain},Ce=fe.value.message,Me=g.Z.firestore.Timestamp.now();this._firestoreCollections.addMessage(me,{message:Ce,time:Me}).then(()=>{fe.reset()},Xe=>{})}submitOnEnter(fe,ve){13===fe.keyCode&&this.submitChatForm(ve)}}return Ee.\u0275fac=function(fe){return new(fe||Ee)(X.Y36(C.P),X.Y36(P.qu))},Ee.\u0275cmp=X.Xpm({type:Ee,selectors:[["app-chat-form"]],inputs:{userInfo:"userInfo"},decls:5,vars:1,consts:[[3,"formGroup","ngSubmit","keydown"],["formControlName","message"],["type","submit"]],template:function(fe,ve){1&fe&&(X.TgZ(0,"form",0),X.NdJ("ngSubmit",function(){return ve.submitChatForm(ve.chatForm)})("keydown",function(Se){return ve.submitOnEnter(Se,ve.chatForm)}),X._UZ(1,"textarea",1),X.TgZ(2,"div"),X.TgZ(3,"button",2),X._uU(4,"Send"),X.qZA(),X.qZA(),X.qZA()),2&fe&&X.Q6J("formGroup",ve.chatForm)},directives:[P._Y,P.JL,P.sg,P.Fj,P.JJ,P.u],styles:[""]}),Ee})()},9447:(jt,it,Q)=>{"use strict";Q.d(it,{e:()=>me});var P=Q(6215),g=Q(2329),X=Q(2340);class Ve{constructor(Me,Ue,Xe,re,Ke){this.ip=Me,this.country=Ue,this.city=Xe,this.uid=re,this.date=Ke}}var Fe=Q(7716),fe=Q(2213),ve=Q(9829),se=Q(3210),Se=Q(1841);let me=(()=>{class Ce{constructor(Ue,Xe,re,Ke){this._router=Ue,this._firebaseAuth=Xe,this._firestoreCollections=re,this._http=Ke,this.user=new P.X(void 0),this.userLocation=new Ve("","","","",null),this.setIP=!1,this.errorAuthMsg="",this.errorAuthMsgSubject=new P.X(this.errorAuthMsg),this.errorOnGetuserData="",this.errorOnGetuserDataSubject=new P.X(this.errorOnGetuserData),this.errorOnSetUserData="",this.errorOnSetUserDataSubject=new P.X(this.errorOnSetUserData),this.isLoading=!1,this.isLoadingSubject=new P.X(this.isLoading),this.secondaryApp=g.Z.initializeApp(X.N.firebaseConfig,"Secondary")}signUp(Ue){this.enableLoadingSpinner(),this.secondaryApp.auth().createUserWithEmailAndPassword(Ue.email,Ue.password).then(Xe=>{Ue.uid=Xe.user.uid,this._firestoreCollections.setUserData(Ue,!0).then(()=>{this.secondaryApp.auth().signOut(),this.errorOnSetUserData="",this.errorOnSetUserDataSubject.next(this.errorOnSetUserData)},re=>{this.errorOnSetUserData=re.message,this.errorOnSetUserDataSubject.next(this.errorOnSetUserData)}),this.errorAuthMsg="",this.errorAuthMsgSubject.next(this.errorAuthMsg),this.disableLoadingSpinner()},Xe=>{this.errorAuthHandler(Xe),this.disableLoadingSpinner()})}signIn(Ue,Xe){this.enableLoadingSpinner(),this._firebaseAuth.signInWithEmailAndPassword(Ue,Xe).then(()=>{this.setIP=!0,this.subscribeForDbCollectionUser(Ue),this.errorAuthMsg="",this.errorAuthMsgSubject.next(this.errorAuthMsg),this.disableLoadingSpinner()},re=>{this.errorAuthHandler(re),this.disableLoadingSpinner()})}logout(){this._firebaseAuth.signOut().then(()=>{this.userDbSubscription.unsubscribe(),this.user.next(null),this._router.navigate(["/control-panel/login"])})}autoLogin(){this._firebaseAuth.authState.subscribe(Ue=>{Ue&&!this.userDbSubscription?this.subscribeForDbCollectionUser(Ue.email):this.user.next(null)})}subscribeForDbCollectionUser(Ue){this.userDbSubscription=this._firestoreCollections.getUserData("email",Ue).subscribe(Xe=>{const re=Xe.map(Ke=>Object.assign({},Ke.payload.doc.data()));this.user.next(re[0]),this.userLocation.uid=re[0].uid,re[0].active||this.logout(),this.setIP&&(this.setIP=!1,this.setUserIP(),this._router.navigate(["/control-panel/chats"])),this.errorOnGetuserData="",this.errorOnGetuserDataSubject.next(this.errorOnGetuserData)},Xe=>{this.errorOnGetuserData=Xe.message,this.errorOnGetuserDataSubject.next(this.errorOnGetuserData)})}setUserIP(){this._userLocationSubscription=this._http.get("https://api.geoapify.com/v1/ipinfo?apiKey="+X.N.geoLocationAPIKey).subscribe(Ue=>{this.userLocation.country=Ue.country.name,this.userLocation.city=Ue.city.name,this.userLocation.ip=Ue.ip,this.userLocation.date=g.Z.firestore.Timestamp.now(),this._firestoreCollections.setUserIPAddress(this.userLocation).then(()=>{this._userLocationSubscription.unsubscribe()},Xe=>{this._userLocationSubscription.unsubscribe()})})}errorAuthHandler(Ue){switch(Ue.code){case"auth/email-already-in-use":this.errorAuthMsg="Already has a registration with this email!",this.errorAuthMsgSubject.next(this.errorAuthMsg);break;case"auth/user-not-found":this.errorAuthMsg="Wrong email!",this.errorAuthMsgSubject.next(this.errorAuthMsg);break;case"auth/wrong-password":this.errorAuthMsg="Wrong password!",this.errorAuthMsgSubject.next(this.errorAuthMsg);break;default:this.errorAuthMsg="Unknown Error",this.errorAuthMsgSubject.next(this.errorAuthMsg)}}enableLoadingSpinner(){this.isLoading=!0,this.isLoadingSubject.next(this.isLoading)}disableLoadingSpinner(){this.isLoading=!1,this.isLoadingSubject.next(this.isLoading)}}return Ce.\u0275fac=function(Ue){return new(Ue||Ce)(Fe.LFG(fe.F0),Fe.LFG(ve.zQ),Fe.LFG(se.P),Fe.LFG(Se.eN))},Ce.\u0275prov=Fe.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})()},3210:(jt,it,Q)=>{"use strict";Q.d(it,{P:()=>Sv});var P=Q(2329),g=Q(7716),X=Q(3637),C=Q(7574),Ve=Q(4402),Ee=Q(5917),Fe=Q(9761),fe=Q(9328),ve=Q(8002),se=Q(2145),Se=Q(7519),me=Q(5435),Ce=Q(309),Me=Q(57),Ue=Q(8583),Xe=Q(9759),re=Q(4762),Ke=Q(4685),St=Q(300),Mn=function(o,t){return(Mn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(s[p]=l[p])})(o,t)};function dt(o){var t="function"==typeof Symbol&&Symbol.iterator,s=t&&o[t],l=0;if(s)return s.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&l>=o.length&&(o=void 0),{value:o&&o[l++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ot,Zt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Cn=Cn||{},wt=Zt||self;function Je(){}function ot(o){var t=typeof o;return"array"==(t="object"!=t?t:o?Array.isArray(o)?"array":t:"null")||"object"==t&&"number"==typeof o.length}function st(o){var t=typeof o;return"object"==t&&null!=o||"function"==t}var yt="closure_uid_"+(1e9*Math.random()>>>0),at=0;function tn(o,t,s){return o.call.apply(o.bind,arguments)}function un(o,t,s){if(!o)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var p=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(p,l),o.apply(t,p)}}return function(){return o.apply(t,arguments)}}function Tn(o,t,s){return(Tn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tn:un).apply(null,arguments)}function on(o,t){var s=Array.prototype.slice.call(arguments,1);return function(){var l=s.slice();return l.push.apply(l,arguments),o.apply(this,l)}}function Bt(o,t){function s(){}s.prototype=t.prototype,o.Z=t.prototype,o.prototype=new s,o.prototype.constructor=o,o.Vb=function(l,p,v){for(var S=Array(arguments.length-2),F=2;F<arguments.length;F++)S[F-2]=arguments[F];return t.prototype[p].apply(l,S)}}function Ft(){this.s=this.s,this.o=this.o}var Ht={};Ft.prototype.s=!1,Ft.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var o=function(o){return Object.prototype.hasOwnProperty.call(o,yt)&&o[yt]||(o[yt]=++at)}(this);delete Ht[o]}},Ft.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Pn=Array.prototype.indexOf?function(o,t){return Array.prototype.indexOf.call(o,t,void 0)}:function(o,t){if("string"==typeof o)return"string"!=typeof t||1!=t.length?-1:o.indexOf(t,0);for(var s=0;s<o.length;s++)if(s in o&&o[s]===t)return s;return-1},bn=Array.prototype.forEach?function(o,t,s){Array.prototype.forEach.call(o,t,s)}:function(o,t,s){for(var l=o.length,p="string"==typeof o?o.split(""):o,v=0;v<l;v++)v in p&&t.call(s,p[v],v,o)};function Gn(o){return Array.prototype.concat.apply([],arguments)}function Bn(o){var t=o.length;if(0<t){for(var s=Array(t),l=0;l<t;l++)s[l]=o[l];return s}return[]}function Jn(o){return/^[\s\xa0]*$/.test(o)}var mn,Sn=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]};function An(o,t){return-1!=o.indexOf(t)}function Mi(o,t){return o<t?-1:o>t?1:0}e:{var Wt=wt.navigator;if(Wt){var kn=Wt.userAgent;if(kn){mn=kn;break e}}mn=""}function Ln(o,t,s){for(var l in o)t.call(s,o[l],l,o)}function Qt(o){var t={};for(var s in o)t[s]=o[s];return t}var dr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ur(o,t){for(var s,l,p=1;p<arguments.length;p++){for(s in l=arguments[p])o[s]=l[s];for(var v=0;v<dr.length;v++)s=dr[v],Object.prototype.hasOwnProperty.call(l,s)&&(o[s]=l[s])}}function Zn(o){return Zn[" "](o),o}Zn[" "]=Je;var gt,o,Ze=An(mn,"Opera"),ze=An(mn,"Trident")||An(mn,"MSIE"),It=An(mn,"Edge"),xt=It||ze,sn=An(mn,"Gecko")&&!(An(mn.toLowerCase(),"webkit")&&!An(mn,"Edge"))&&!(An(mn,"Trident")||An(mn,"MSIE"))&&!An(mn,"Edge"),Mt=An(mn.toLowerCase(),"webkit")&&!An(mn,"Edge");function He(){var o=wt.document;return o?o.documentMode:void 0}e:{var vt="",Tt=(o=mn,sn?/rv:([^\);]+)(\)|;)/.exec(o):It?/Edge\/([\d\.]+)/.exec(o):ze?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o):Mt?/WebKit\/(\S+)/.exec(o):Ze?/(?:Version)[ \/]?(\S+)/.exec(o):void 0);if(Tt&&(vt=Tt?Tt[1]:""),ze){var Vt=He();if(null!=Vt&&Vt>parseFloat(vt)){gt=String(Vt);break e}}gt=vt}var hn={};function gn(){return t=hn,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var o=0,t=Sn(String(gt)).split("."),s=Sn("9").split("."),l=Math.max(t.length,s.length),p=0;0==o&&p<l;p++){var v=t[p]||"",S=s[p]||"";do{if(v=/(\d*)(\D*)(.*)/.exec(v)||["","","",""],S=/(\d*)(\D*)(.*)/.exec(S)||["","","",""],0==v[0].length&&0==S[0].length)break;o=Mi(0==v[1].length?0:parseInt(v[1],10),0==S[1].length?0:parseInt(S[1],10))||Mi(0==v[2].length,0==S[2].length)||Mi(v[2],S[2]),v=v[3],S=S[3]}while(0==o)}return 0<=o}();var t}var xe=wt.document&&ze&&(He()||parseInt(gt,10))||void 0,Ye=function(){if(!wt.addEventListener||!Object.defineProperty)return!1;var o=!1,t=Object.defineProperty({},"passive",{get:function(){o=!0}});try{wt.addEventListener("test",Je,t),wt.removeEventListener("test",Je,t)}catch(s){}return o}();function et(o,t){this.type=o,this.g=this.target=t,this.defaultPrevented=!1}function tt(o,t){if(et.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var s=this.type=o.type,l=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=t,t=o.relatedTarget){if(sn){e:{try{Zn(t.nodeName);var p=!0;break e}catch(v){}p=!1}p||(t=null)}}else"mouseover"==s?t=o.fromElement:"mouseout"==s&&(t=o.toElement);this.relatedTarget=t,l?(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0):(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType="string"==typeof o.pointerType?o.pointerType:zt[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&tt.Z.h.call(this)}}et.prototype.h=function(){this.defaultPrevented=!0},Bt(tt,et);var zt={2:"touch",3:"pen",4:"mouse"};tt.prototype.h=function(){tt.Z.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var _n="closure_listenable_"+(1e6*Math.random()|0),nr=0;function Vn(o,t,s,l,p){this.listener=o,this.proxy=null,this.src=t,this.type=s,this.capture=!!l,this.ia=p,this.key=++nr,this.ca=this.fa=!1}function Rn(o){o.ca=!0,o.listener=null,o.proxy=null,o.src=null,o.ia=null}function ri(o){this.src=o,this.g={},this.h=0}function Br(o,t){var s=t.type;if(s in o.g){var v,l=o.g[s],p=Pn(l,t);(v=0<=p)&&Array.prototype.splice.call(l,p,1),v&&(Rn(t),0==o.g[s].length&&(delete o.g[s],o.h--))}}function Yr(o,t,s,l){for(var p=0;p<o.length;++p){var v=o[p];if(!v.ca&&v.listener==t&&v.capture==!!s&&v.ia==l)return p}return-1}ri.prototype.add=function(o,t,s,l,p){var v=o.toString();(o=this.g[v])||(o=this.g[v]=[],this.h++);var S=Yr(o,t,l,p);return-1<S?(t=o[S],s||(t.fa=!1)):((t=new Vn(t,this.src,v,!!l,p)).fa=s,o.push(t)),t};var Er="closure_lm_"+(1e6*Math.random()|0),Ri={};function Fo(o,t,s,l,p){if(l&&l.once)return ns(o,t,s,l,p);if(Array.isArray(t)){for(var v=0;v<t.length;v++)Fo(o,t[v],s,l,p);return null}return s=Xt(s),o&&o[_n]?o.N(t,s,st(l)?!!l.capture:!!l,p):ki(o,t,s,!1,l,p)}function ki(o,t,s,l,p,v){if(!t)throw Error("Invalid event type");var S=st(p)?!!p.capture:!!p,F=Xi(o);if(F||(o[Er]=F=new ri(o)),(s=F.add(t,s,l,S,v)).proxy)return s;if(l=function(){var t=Lr;return function o(s){return t.call(o.src,o.listener,s)}}(),s.proxy=l,l.src=o,l.listener=s,o.addEventListener)Ye||(p=S),void 0===p&&(p=!1),o.addEventListener(t.toString(),l,p);else if(o.attachEvent)o.attachEvent(yn(t.toString()),l);else{if(!o.addListener||!o.removeListener)throw Error("addEventListener and attachEvent are unavailable.");o.addListener(l)}return s}function ns(o,t,s,l,p){if(Array.isArray(t)){for(var v=0;v<t.length;v++)ns(o,t[v],s,l,p);return null}return s=Xt(s),o&&o[_n]?o.O(t,s,st(l)?!!l.capture:!!l,p):ki(o,t,s,!0,l,p)}function Fr(o,t,s,l,p){if(Array.isArray(t))for(var v=0;v<t.length;v++)Fr(o,t[v],s,l,p);else l=st(l)?!!l.capture:!!l,s=Xt(s),o&&o[_n]?(o=o.i,(t=String(t).toString())in o.g&&-1<(s=Yr(v=o.g[t],s,l,p))&&(Rn(v[s]),Array.prototype.splice.call(v,s,1),0==v.length&&(delete o.g[t],o.h--))):o&&(o=Xi(o))&&(t=o.g[t.toString()],o=-1,t&&(o=Yr(t,s,l,p)),(s=-1<o?t[o]:null)&&ar(s))}function ar(o){if("number"!=typeof o&&o&&!o.ca){var t=o.src;if(t&&t[_n])Br(t.i,o);else{var s=o.type,l=o.proxy;t.removeEventListener?t.removeEventListener(s,l,o.capture):t.detachEvent?t.detachEvent(yn(s),l):t.addListener&&t.removeListener&&t.removeListener(l),(s=Xi(t))?(Br(s,o),0==s.h&&(s.src=null,t[Er]=null)):Rn(o)}}}function yn(o){return o in Ri?Ri[o]:Ri[o]="on"+o}function Lr(o,t){if(o.ca)o=!0;else{t=new tt(t,this);var s=o.listener,l=o.ia||o.src;o.fa&&ar(o),o=s.call(l,t)}return o}function Xi(o){return(o=o[Er])instanceof ri?o:null}var wr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xt(o){return"function"==typeof o?o:(o[wr]||(o[wr]=function(t){return o.handleEvent(t)}),o[wr])}function dn(){Ft.call(this),this.i=new ri(this),this.P=this,this.I=null}function In(o,t){var s,l=o.I;if(l)for(s=[];l;l=l.I)s.push(l);if(o=o.P,l=t.type||t,"string"==typeof t)t=new et(t,o);else if(t instanceof et)t.target=t.target||o;else{var p=t;Ur(t=new et(l,o),p)}if(p=!0,s)for(var v=s.length-1;0<=v;v--){var S=t.g=s[v];p=Zr(S,l,!0,t)&&p}if(p=Zr(S=t.g=o,l,!0,t)&&p,p=Zr(S,l,!1,t)&&p,s)for(v=0;v<s.length;v++)p=Zr(S=t.g=s[v],l,!1,t)&&p}function Zr(o,t,s,l){if(!(t=o.i.g[String(t)]))return!0;t=t.concat();for(var p=!0,v=0;v<t.length;++v){var S=t[v];if(S&&!S.ca&&S.capture==s){var F=S.listener,J=S.ia||S.src;S.fa&&Br(o.i,S),p=!1!==F.call(J,l)&&p}}return p&&!l.defaultPrevented}Bt(dn,Ft),dn.prototype[_n]=!0,dn.prototype.removeEventListener=function(o,t,s,l){Fr(this,o,t,s,l)},dn.prototype.M=function(){if(dn.Z.M.call(this),this.i){var t,o=this.i;for(t in o.g){for(var s=o.g[t],l=0;l<s.length;l++)Rn(s[l]);delete o.g[t],o.h--}}this.I=null},dn.prototype.N=function(o,t,s,l){return this.i.add(String(o),t,!1,s,l)},dn.prototype.O=function(o,t,s,l){return this.i.add(String(o),t,!0,s,l)};var Ti=wt.JSON.stringify;function Dr(){var o=ke,t=null;return o.g&&(t=o.g,o.g=o.g.next,o.g||(o.h=null),t.next=null),t}var B,Xr=function(){function o(){this.h=this.g=null}return o.prototype.add=function(t,s){var l=vr.get();l.set(t,s),this.h?this.h.next=l:this.g=l,this.h=l},o}(),vr=new(function(){function o(t,s){this.i=t,this.j=s,this.h=0,this.g=null}return o.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},o}())(function(){return new Co},function(o){return o.reset()}),Co=function(){function o(){this.next=this.g=this.h=null}return o.prototype.set=function(t,s){this.h=t,this.g=s,this.next=null},o.prototype.reset=function(){this.next=this.g=this.h=null},o}();function De(o){wt.setTimeout(function(){throw o},0)}function We(o,t){B||function(){var o=wt.Promise.resolve(void 0);B=function(){o.then(ut)}}(),ce||(B(),ce=!0),ke.add(o,t)}var ce=!1,ke=new Xr;function ut(){for(var o;o=Dr();){try{o.h.call(o.g)}catch(s){De(s)}var t=vr;t.j(o),100>t.h&&(t.h++,o.next=t.g,t.g=o)}ce=!1}function Yt(o,t){dn.call(this),this.h=o||1,this.g=t||wt,this.j=Tn(this.kb,this),this.l=Date.now()}function En(o){o.da=!1,o.S&&(o.g.clearTimeout(o.S),o.S=null)}function ln(o,t,s){if("function"==typeof o)s&&(o=Tn(o,s));else{if(!o||"function"!=typeof o.handleEvent)throw Error("Invalid listener argument");o=Tn(o.handleEvent,o)}return 2147483647<Number(t)?-1:wt.setTimeout(o,t||0)}function cn(o){o.g=ln(function(){o.g=null,o.i&&(o.i=!1,cn(o))},o.j);var t=o.h;o.h=null,o.m.apply(null,t)}Bt(Yt,dn),(Ot=Yt.prototype).da=!1,Ot.S=null,Ot.kb=function(){if(this.da){var o=Date.now()-this.l;0<o&&o<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-o):(this.S&&(this.g.clearTimeout(this.S),this.S=null),In(this,"tick"),this.da&&(En(this),this.start()))}},Ot.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ot.M=function(){Yt.Z.M.call(this),En(this),delete this.g};var Xn=function(o){function t(s,l){var p=o.call(this)||this;return p.m=s,p.j=l,p.h=null,p.i=!1,p.g=null,p}return function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=o}Mn(o,t),o.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}(t,o),t.prototype.l=function(s){this.h=arguments,this.g?this.i=!0:cn(this)},t.prototype.M=function(){o.prototype.M.call(this),this.g&&(wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(Ft);function Gi(o){Ft.call(this),this.h=o,this.g={}}Bt(Gi,Ft);var pr=[];function Li(o,t,s,l){Array.isArray(s)||(s&&(pr[0]=s.toString()),s=pr);for(var p=0;p<s.length;p++){var v=Fo(t,s[p],l||o.handleEvent,!1,o.h||o);if(!v)break;o.g[v.key]=v}}function uo(o){Ln(o.g,function(t,s){this.g.hasOwnProperty(s)&&ar(t)},o),o.g={}}function $r(){this.g=!0}function jn(o,t,s,l){o.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(o,t){if(!o.g)return t;if(!t)return null;try{var s=JSON.parse(t);if(s)for(o=0;o<s.length;o++)if(Array.isArray(s[o])){var l=s[o];if(!(2>l.length)){var p=l[1];if(Array.isArray(p)&&!(1>p.length)){var v=p[0];if("noop"!=v&&"stop"!=v&&"close"!=v)for(var S=1;S<p.length;S++)p[S]=""}}}return Ti(s)}catch(F){return t}}(o,s)+(l?" "+l:"")})}Gi.prototype.M=function(){Gi.Z.M.call(this),uo(this)},Gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$r.prototype.Aa=function(){this.g=!1},$r.prototype.info=function(){};var zi={},hi=null;function qi(){return hi=hi||new dn}function Ki(o){et.call(this,zi.Ma,o)}function _i(o){var t=qi();In(t,new Ki(t,o))}function ds(o,t){et.call(this,zi.STAT_EVENT,o),this.stat=t}function jr(o){var t=qi();In(t,new ds(t,o))}function _s(o,t){et.call(this,zi.Na,o),this.size=t}function Zi(o,t){if("function"!=typeof o)throw Error("Fn must not be null and must be a function");return wt.setTimeout(function(){o()},t)}zi.Ma="serverreachability",Bt(Ki,et),zi.STAT_EVENT="statevent",Bt(ds,et),zi.Na="timingevent",Bt(_s,et);var zo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},No={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function hs(){}function rs(){}hs.prototype.h=null;var ir,qo={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function yi(){et.call(this,"d")}function vi(){et.call(this,"c")}function eo(){}function to(o,t,s,l){this.l=o,this.j=t,this.m=s,this.X=l||1,this.V=new Gi(this),this.P=Pi,this.W=new Yt(o=xt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new lo}function lo(){this.i=null,this.g="",this.h=!1}Bt(yi,et),Bt(vi,et),Bt(eo,hs),eo.prototype.g=function(){return new XMLHttpRequest},eo.prototype.i=function(){return{}},ir=new eo;var Pi=45e3,co={},fi={};function ko(o,t,s){o.K=1,o.v=we(Z(t)),o.s=s,o.U=!0,bi(o,null)}function bi(o,t){o.F=Date.now(),wo(o),o.A=Z(o.v);var s=o.A,l=o.X;Array.isArray(l)||(l=[String(l)]),Dn(s.h,"t",l),o.C=0,s=o.l.H,o.h=new lo,o.g=ti(o.l,s?t:null,!o.s),0<o.O&&(o.L=new Xn(Tn(o.Ia,o,o.g),o.O)),Li(o.V,o.g,"readystatechange",o.gb),t=o.H?Qt(o.H):{},o.s?(o.u||(o.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.s,t)):(o.u="GET",o.g.ea(o.A,o.u,null,t)),_i(1),function(o,t,s,l,p,v){o.info(function(){if(o.g)if(v)for(var S="",F=v.split("&"),J=0;J<F.length;J++){var le=F[J].split("=");if(1<le.length){var pe=le[0];le=le[1];var Re=pe.split("_");S=2<=Re.length&&"type"==Re[1]?S+(pe+"=")+le+"&":S+(pe+"=redacted&")}}else S=null;else S=v;return"XMLHTTP REQ ("+l+") [attempt "+p+"]: "+t+"\n"+s+"\n"+S})}(o.j,o.u,o.A,o.m,o.X,o.s)}function Eo(o){return!!o.g&&"GET"==o.u&&2!=o.K&&o.l.Ba}function Nr(o,t,s){for(var p,l=!0;!o.I&&o.C<s.length;){if((p=is(o,s))==fi){4==t&&(o.o=4,jr(14),l=!1),jn(o.j,o.m,null,"[Incomplete Response]");break}if(p==co){o.o=4,jr(15),jn(o.j,o.m,s,"[Invalid Chunk]"),l=!1;break}jn(o.j,o.m,p,null),ho(o,p)}Eo(o)&&p!=fi&&p!=co&&(o.h.g="",o.C=0),4!=t||0!=s.length||o.h.h||(o.o=1,jr(16),l=!1),o.i=o.i&&l,l?0<s.length&&!o.aa&&(o.aa=!0,(t=o.l).g==o&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+s.length),Si(t),t.L=!0,jr(11))):(jn(o.j,o.m,s,"[Invalid Chunked Response]"),ei(o),no(o))}function is(o,t){var s=o.C,l=t.indexOf("\n",s);return-1==l?fi:(s=Number(t.substring(s,l)),isNaN(s)?co:(l+=1)+s>t.length?fi:(t=t.substr(l,s),o.C=l+s,t))}function wo(o){o.Y=Date.now()+o.P,Do(o,o.P)}function Do(o,t){if(null!=o.B)throw Error("WatchDog timer not null");o.B=Zi(Tn(o.eb,o),t)}function Or(o){o.B&&(wt.clearTimeout(o.B),o.B=null)}function no(o){0==o.l.G||o.I||Qr(o.l,o)}function ei(o){Or(o);var t=o.L;t&&"function"==typeof t.na&&t.na(),o.L=null,En(o.W),uo(o.V),o.g&&(t=o.g,o.g=null,t.abort(),t.na())}function ho(o,t){try{var s=o.l;if(0!=s.G&&(s.g==o||Nt(s.i,o)))if(s.I=o.N,!o.J&&Nt(s.i,o)&&3==s.G){try{var l=s.Ca.g.parse(t)}catch(en){l=null}if(Array.isArray(l)&&3==l.length){var p=l;if(0==p[0])e:if(s.u)s.ta=p[1],0<s.ta-s.U&&37500>p[2]&&s.N&&0==s.A&&!s.v&&(s.v=Zi(Tn(s.ab,s),6e3));else{if(s.g){if(!(s.g.F+3e3<o.F))break e;ro(s),ya(s)}br(s),jr(18)}if(1>=Ba(s.i)&&s.ka){try{s.ka()}catch(en){}s.ka=void 0}}else Ai(s,11)}else if((o.J||s.g==o)&&ro(s),!Jn(t))for(p=s.Ca.g.parse(t),t=0;t<p.length;t++){var v=p[t];if(s.U=v[0],v=v[1],2==s.G)if("c"==v[0]){s.J=v[1],s.la=v[2];var S=v[3];null!=S&&(s.ma=S,s.h.info("VER="+s.ma));var F=v[4];null!=F&&(s.za=F,s.h.info("SVER="+s.za));var J=v[5];null!=J&&"number"==typeof J&&0<J&&(s.K=l=1.5*J,s.h.info("backChannelRequestTimeoutMs_="+l)),l=s;var le=o.g;if(le){var pe=le.g?le.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pe){var Re=l.i;!Re.g&&(An(pe,"spdy")||An(pe,"quic")||An(pe,"h2"))&&(Re.j=Re.l,Re.g=new Set,Re.h&&(mr(Re,Re.h),Re.h=null))}if(l.D){var Ge=le.g?le.g.getResponseHeader("X-HTTP-Session-Id"):null;Ge&&(l.sa=Ge,ee(l.F,l.D,Ge))}}s.G=3,s.j&&s.j.xa(),s.$&&(s.O=Date.now()-o.F,s.h.info("Handshake RTT: "+s.O+"ms"));var ft=o;if((l=s).oa=Wi(l,l.H?l.la:null,l.W),ft.J){vs(l.i,ft);var ct=ft,Et=l.K;Et&&ct.setTimeout(Et),ct.B&&(Or(ct),wo(ct)),l.g=ft}else Rr(l);0<s.l.length&&$i(s)}else"stop"!=v[0]&&"close"!=v[0]||Ai(s,7);else 3==s.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Ai(s,7):Fi(s):"noop"!=v[0]&&s.j&&s.j.wa(v),s.A=0)}_i(4)}catch(en){}}function Ci(o,t){if(o.forEach&&"function"==typeof o.forEach)o.forEach(t,void 0);else if(ot(o)||"string"==typeof o)bn(o,t,void 0);else{if(o.T&&"function"==typeof o.T)var s=o.T();else if(o.R&&"function"==typeof o.R)s=void 0;else if(ot(o)||"string"==typeof o){s=[];for(var l=o.length,p=0;p<l;p++)s.push(p)}else for(p in s=[],l=0,o)s[l++]=p;p=(l=function(o){if(o.R&&"function"==typeof o.R)return o.R();if("string"==typeof o)return o.split("");if(ot(o)){for(var t=[],s=o.length,l=0;l<s;l++)t.push(o[l]);return t}for(l in t=[],s=0,o)t[s++]=o[l];return t}(o)).length;for(var v=0;v<p;v++)t.call(void 0,l[v],s&&s[v],o)}}function Vo(o,t){this.h={},this.g=[],this.i=0;var s=arguments.length;if(1<s){if(s%2)throw Error("Uneven number of arguments");for(var l=0;l<s;l+=2)this.set(arguments[l],arguments[l+1])}else if(o)if(o instanceof Vo)for(s=o.T(),l=0;l<s.length;l++)this.set(s[l],o.get(s[l]));else for(l in o)this.set(l,o[l])}function kr(o){if(o.i!=o.g.length){for(var t=0,s=0;t<o.g.length;){var l=o.g[t];lr(o.h,l)&&(o.g[s++]=l),t++}o.g.length=s}if(o.i!=o.g.length){var p={};for(s=t=0;t<o.g.length;)lr(p,l=o.g[t])||(o.g[s++]=l,p[l]=1),t++;o.g.length=s}}function lr(o,t){return Object.prototype.hasOwnProperty.call(o,t)}(Ot=to.prototype).setTimeout=function(o){this.P=o},Ot.gb=function(o){o=o.target;var t=this.L;t&&3==si(o)?t.l():this.Ia(o)},Ot.Ia=function(o){try{if(o==this.g)e:{var t=si(this.g),s=this.g.Da(),l=this.g.ba();if(!(3>t)&&(3!=t||xt||this.g&&(this.h.h||this.g.ga()||Oo(this.g)))){this.I||4!=t||7==s||_i(8==s||0>=l?3:2),Or(this);var p=this.g.ba();this.N=p;t:if(Eo(this)){var v=Oo(this.g);o="";var S=v.length,F=4==si(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ei(this),no(this);var J="";break t}this.h.i=new wt.TextDecoder}for(s=0;s<S;s++)this.h.h=!0,o+=this.h.i.decode(v[s],{stream:F&&s==S-1});v.splice(0,S),this.h.g+=o,this.C=0,J=this.h.g}else J=this.g.ga();if(this.i=200==p,function(o,t,s,l,p,v,S){o.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+p+"]: "+t+"\n"+s+"\n"+v+" "+S})}(this.j,this.u,this.A,this.m,this.X,t,p),this.i){if(this.$&&!this.J){t:{if(this.g){var le,pe=this.g;if((le=pe.g?pe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jn(le)){var Re=le;break t}}Re=null}if(!(p=Re)){this.i=!1,this.o=3,jr(12),ei(this),no(this);break e}jn(this.j,this.m,p,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ho(this,p)}this.U?(Nr(this,t,J),xt&&this.i&&3==t&&(Li(this.V,this.W,"tick",this.fb),this.W.start())):(jn(this.j,this.m,J,null),ho(this,J)),4==t&&ei(this),this.i&&!this.I&&(4==t?Qr(this.l,this):(this.i=!1,wo(this)))}else 400==p&&0<J.indexOf("Unknown SID")?(this.o=3,jr(12)):(this.o=0,jr(13)),ei(this),no(this)}}}catch(Ge){}},Ot.fb=function(){if(this.g){var o=si(this.g),t=this.g.ga();this.C<t.length&&(Or(this),Nr(this,o,t),this.i&&4!=o&&wo(this))}},Ot.cancel=function(){this.I=!0,ei(this)},Ot.eb=function(){this.B=null;var o=Date.now();0<=o-this.Y?(function(o,t){o.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(_i(3),jr(17)),ei(this),this.o=2,no(this)):Do(this,this.Y-o)},(Ot=Vo.prototype).R=function(){kr(this);for(var o=[],t=0;t<this.g.length;t++)o.push(this.h[this.g[t]]);return o},Ot.T=function(){return kr(this),this.g.concat()},Ot.get=function(o,t){return lr(this.h,o)?this.h[o]:t},Ot.set=function(o,t){lr(this.h,o)||(this.i++,this.g.push(o)),this.h[o]=t},Ot.forEach=function(o,t){for(var s=this.T(),l=0;l<s.length;l++){var p=s[l],v=this.get(p);o.call(t,v,p,this)}};var fo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function K(o,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,o instanceof K){this.g=void 0!==t?t:o.g,ge(this,o.j),this.s=o.s,x(this,o.i),W(this,o.m),this.l=o.l,t=o.h;var s=new Hr;s.i=t.i,t.g&&(s.g=new Vo(t.g),s.h=t.h),k(this,s),this.o=o.o}else o&&(s=String(o).match(fo))?(this.g=!!t,ge(this,s[1]||"",!0),this.s=G(s[2]||""),x(this,s[3]||"",!0),W(this,s[4]),this.l=G(s[5]||"",!0),k(this,s[6]||"",!0),this.o=G(s[7]||"")):(this.g=!!t,this.h=new Hr(null,this.g))}function Z(o){return new K(o)}function ge(o,t,s){o.j=s?G(t,!0):t,o.j&&(o.j=o.j.replace(/:$/,""))}function x(o,t,s){o.i=s?G(t,!0):t}function W(o,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);o.m=t}else o.m=null}function k(o,t,s){t instanceof Hr?(o.h=t,function(o,t){t&&!o.j&&(hr(o),o.i=null,o.g.forEach(function(s,l){var p=l.toLowerCase();l!=p&&(Gr(this,l),Dn(this,p,s))},o)),o.j=t}(o.h,o.g)):(s||(t=H(t,wn)),o.h=new Hr(t,o.g))}function ee(o,t,s){o.h.set(t,s)}function we(o){return ee(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function G(o,t){return o?t?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function H(o,t,s){return"string"==typeof o?(o=encodeURI(o).replace(t,V),s&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function V(o){return"%"+((o=o.charCodeAt(0))>>4&15).toString(16)+(15&o).toString(16)}K.prototype.toString=function(){var o=[],t=this.j;t&&o.push(H(t,ue,!0),":");var s=this.i;return(s||"file"==t)&&(o.push("//"),(t=this.s)&&o.push(H(t,ue,!0),"@"),o.push(encodeURIComponent(String(s)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(s=this.m)&&o.push(":",String(s))),(s=this.l)&&(this.i&&"/"!=s.charAt(0)&&o.push("/"),o.push(H(s,"/"==s.charAt(0)?Rt:$e,!0))),(s=this.h.toString())&&o.push("?",s),(s=this.o)&&o.push("#",H(s,cr)),o.join("")};var ue=/[#\/\?@]/g,$e=/[#\?:]/g,Rt=/[#\?]/g,wn=/[#\?@]/g,cr=/#/g;function Hr(o,t){this.h=this.g=null,this.i=o||null,this.j=!!t}function hr(o){o.g||(o.g=new Vo,o.h=0,o.i&&function(o,t){if(o){o=o.split("&");for(var s=0;s<o.length;s++){var l=o[s].indexOf("="),p=null;if(0<=l){var v=o[s].substring(0,l);p=o[s].substring(l+1)}else v=o[s];t(v,p?decodeURIComponent(p.replace(/\+/g," ")):"")}}}(o.i,function(t,s){o.add(decodeURIComponent(t.replace(/\+/g," ")),s)}))}function Gr(o,t){hr(o),t=Qi(o,t),lr(o.g.h,t)&&(o.i=null,o.h-=o.g.get(t).length,lr((o=o.g).h,t)&&(delete o.h[t],o.i--,o.g.length>2*o.i&&kr(o)))}function ii(o,t){return hr(o),t=Qi(o,t),lr(o.g.h,t)}function Dn(o,t,s){Gr(o,t),0<s.length&&(o.i=null,o.g.set(Qi(o,t),Bn(s)),o.h+=s.length)}function Qi(o,t){return t=String(t),o.j&&(t=t.toLowerCase()),t}(Ot=Hr.prototype).add=function(o,t){hr(this),this.i=null,o=Qi(this,o);var s=this.g.get(o);return s||this.g.set(o,s=[]),s.push(t),this.h+=1,this},Ot.forEach=function(o,t){hr(this),this.g.forEach(function(s,l){bn(s,function(p){o.call(t,p,l,this)},this)},this)},Ot.T=function(){hr(this);for(var o=this.g.R(),t=this.g.T(),s=[],l=0;l<t.length;l++)for(var p=o[l],v=0;v<p.length;v++)s.push(t[l]);return s},Ot.R=function(o){hr(this);var t=[];if("string"==typeof o)ii(this,o)&&(t=Gn(t,this.g.get(Qi(this,o))));else{o=this.g.R();for(var s=0;s<o.length;s++)t=Gn(t,o[s])}return t},Ot.set=function(o,t){return hr(this),this.i=null,ii(this,o=Qi(this,o))&&(this.h-=this.g.get(o).length),this.g.set(o,[t]),this.h+=1,this},Ot.get=function(o,t){return o&&0<(o=this.R(o)).length?String(o[0]):t},Ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var o=[],t=this.g.T(),s=0;s<t.length;s++){var l=t[s],p=encodeURIComponent(String(l));l=this.R(l);for(var v=0;v<l.length;v++){var S=p;""!==l[v]&&(S+="="+encodeURIComponent(String(l[v]))),o.push(S)}}return this.i=o.join("&")};var po=function(t,s){this.h=t,this.g=s};function cu(o){this.l=o||$u,o=wt.PerformanceNavigationTiming?0<(o=wt.performance.getEntriesByType("navigation")).length&&("hq"==o[0].nextHopProtocol||"h2"==o[0].nextHopProtocol):!!(wt.g&&wt.g.Ea&&wt.g.Ea()&&wt.g.Ea().Zb),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $u=10;function du(o){return!!o.h||!!o.g&&o.g.size>=o.j}function Ba(o){return o.h?1:o.g?o.g.size:0}function Nt(o,t){return o.h?o.h==t:!!o.g&&o.g.has(t)}function mr(o,t){o.g?o.g.add(t):o.h=t}function vs(o,t){o.h&&o.h==t?o.h=null:o.g&&o.g.has(t)&&o.g.delete(t)}function xi(o){var t,s;if(null!=o.h)return o.i.concat(o.h.D);if(null!=o.g&&0!==o.g.size){var l=o.i;try{for(var p=dt(o.g.values()),v=p.next();!v.done;v=p.next())l=l.concat(v.value.D)}catch(F){t={error:F}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(t)throw t.error}}return l}return Bn(o.i)}function Os(){}function Rs(){this.g=new Os}function Zo(o,t,s){var l=s||"";try{Ci(o,function(p,v){var S=p;st(p)&&(S=Ti(p)),t.push(l+v+"="+encodeURIComponent(S))})}catch(p){throw t.push(l+"type="+encodeURIComponent("_badmap")),p}}function A(o,t,s,l,p){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,p(l)}catch(v){}}function M(o){this.l=o.$b||null,this.j=o.ib||!1}function j(o,t){dn.call(this),this.D=o,this.u=t,this.m=void 0,this.readyState=ae,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cu.prototype.cancel=function(){var o,t;if(this.i=xi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var s=dt(this.g.values()),l=s.next();!l.done;l=s.next())l.value.cancel()}catch(v){o={error:v}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(o)throw o.error}}this.g.clear()}},Os.prototype.stringify=function(o){return wt.JSON.stringify(o,void 0)},Os.prototype.parse=function(o){return wt.JSON.parse(o,void 0)},Bt(M,hs),M.prototype.g=function(){return new j(this.l,this.j)},M.prototype.i=function(o){return function(){return o}}({}),Bt(j,dn);var ae=0;function be(o){o.j.read().then(o.Sa.bind(o)).catch(o.ha.bind(o))}function Pe(o){o.readyState=4,o.l=null,o.j=null,o.A=null,Le(o)}function Le(o){o.onreadystatechange&&o.onreadystatechange.call(o)}(Ot=j.prototype).open=function(o,t){if(this.readyState!=ae)throw this.abort(),Error("Error reopening a connection");this.C=o,this.B=t,this.readyState=1,Le(this)},Ot.send=function(o){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};o&&(t.body=o),(this.D||wt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pe(this)),this.readyState=ae},Ot.Va=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Le(this)),this.g&&(this.readyState=3,Le(this),this.g)))if("arraybuffer"===this.responseType)o.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==wt.ReadableStream&&"body"in o){if(this.j=o.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;be(this)}else o.text().then(this.Ua.bind(this),this.ha.bind(this))},Ot.Sa=function(o){if(this.g){if(this.u&&o.value)this.response.push(o.value);else if(!this.u){var t=o.value?o.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!o.done}))&&(this.response=this.responseText+=t)}o.done?Pe(this):Le(this),3==this.readyState&&be(this)}},Ot.Ua=function(o){this.g&&(this.response=this.responseText=o,Pe(this))},Ot.Ta=function(o){this.g&&(this.response=o,Pe(this))},Ot.ha=function(){this.g&&Pe(this)},Ot.setRequestHeader=function(o,t){this.v.append(o,t)},Ot.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},Ot.getAllResponseHeaders=function(){if(!this.h)return"";for(var o=[],t=this.h.entries(),s=t.next();!s.done;)o.push((s=s.value)[0]+": "+s[1]),s=t.next();return o.join("\r\n")},Object.defineProperty(j.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(o){this.m=o?"include":"same-origin"}});var lt=wt.JSON.parse;function mt(o){dn.call(this),this.headers=new Vo,this.u=o||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qt,this.K=this.L=!1}Bt(mt,dn);var qt="",xn=/^https?$/i,ur=["POST","PUT"];function zn(o){return"content-type"==o.toLowerCase()}function Fn(o,t){o.h=!1,o.g&&(o.l=!0,o.g.abort(),o.l=!1),o.j=t,o.m=5,gr(o),Vr(o)}function gr(o){o.D||(o.D=!0,In(o,"complete"),In(o,"error"))}function oi(o){if(o.h&&void 0!==Cn&&(!o.C[1]||4!=si(o)||2!=o.ba()))if(o.v&&4==si(o))ln(o.Fa,0,o);else if(In(o,"readystatechange"),4==si(o)){o.h=!1;try{var l,t=o.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break e;default:s=!1}if(!(l=s)){var p;if(p=0===t){var v=String(o.H).match(fo)[1]||null;if(!v&&wt.self&&wt.self.location){var S=wt.self.location.protocol;v=S.substr(0,S.length-1)}p=!xn.test(v?v.toLowerCase():"")}l=p}if(l)In(o,"complete"),In(o,"success");else{o.m=6;try{var F=2<si(o)?o.g.statusText:""}catch(J){F=""}o.j=F+" ["+o.ba()+"]",gr(o)}}finally{Vr(o)}}}function Vr(o,t){if(o.g){Ji(o);var s=o.g,l=o.C[0]?Je:null;o.g=null,o.C=null,t||In(o,"ready");try{s.onreadystatechange=l}catch(p){}}}function Ji(o){o.g&&o.K&&(o.g.ontimeout=null),o.A&&(wt.clearTimeout(o.A),o.A=null)}function si(o){return o.g?o.g.readyState:0}function Oo(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.J){case qt:case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ai(o,t,s){e:{for(l in s){var l=!1;break e}l=!0}l||(s=function(o){var t="";return Ln(o,function(s,l){t+=l,t+=":",t+=s,t+="\r\n"}),t}(s),"string"==typeof o?null!=s&&encodeURIComponent(String(s)):ee(o,t,s))}function Ro(o,t,s){return s&&s.internalChannelParams&&s.internalChannelParams[o]||t}function $o(o){this.za=0,this.l=[],this.h=new $r,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ro("failFast",!1,o),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ro("baseRetryDelayMs",5e3,o),this.$a=Ro("retryDelaySeedMs",1e4,o),this.Ya=Ro("forwardChannelMaxRetries",2,o),this.ra=Ro("forwardChannelRequestTimeoutMs",2e4,o),this.qa=o&&o.xmlHttpFactory||void 0,this.Ba=o&&o.Yb||!1,this.K=void 0,this.H=o&&o.supportsCrossDomainXhr||!1,this.J="",this.i=new cu(o&&o.concurrentRequestLimit),this.Ca=new Rs,this.ja=o&&o.fastHandshake||!1,this.Ra=o&&o.Wb||!1,o&&o.Aa&&this.h.Aa(),o&&o.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&o&&o.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!o||!1!==o.Xb}function Fi(o){if(va(o),3==o.G){var t=o.V++,s=Z(o.F);ee(s,"SID",o.J),ee(s,"RID",t),ee(s,"TYPE","terminate"),On(o,s),(t=new to(o,o.h,t,void 0)).K=2,t.v=we(Z(s)),s=!1,wt.navigator&&wt.navigator.sendBeacon&&(s=wt.navigator.sendBeacon(t.v.toString(),"")),!s&&wt.Image&&((new Image).src=t.v,s=!0),s||(t.g=ti(t.l,null),t.g.ea(t.v)),t.F=Date.now(),wo(t)}Bs(o)}function ya(o){o.g&&(Si(o),o.g.cancel(),o.g=null)}function va(o){ya(o),o.u&&(wt.clearTimeout(o.u),o.u=null),ro(o),o.i.cancel(),o.m&&("number"==typeof o.m&&wt.clearTimeout(o.m),o.m=null)}function ui(o,t){o.l.push(new po(o.Za++,t)),3==o.G&&$i(o)}function $i(o){du(o.i)||o.m||(o.m=!0,We(o.Ha,o),o.C=0)}function vn(o,t){var s;s=t?t.m:o.V++;var l=Z(o.F);ee(l,"SID",o.J),ee(l,"RID",s),ee(l,"AID",o.U),On(o,l),o.o&&o.s&&ai(l,o.o,o.s),s=new to(o,o.h,s,o.C+1),null===o.o&&(s.H=o.s),t&&(o.l=t.D.concat(o.l)),t=$n(o,s,1e3),s.setTimeout(Math.round(.5*o.ra)+Math.round(.5*o.ra*Math.random())),mr(o.i,s),ko(s,l,t)}function On(o,t){o.j&&Ci({},function(s,l){ee(t,l,s)})}function $n(o,t,s){s=Math.min(o.l.length,s);var l=o.j?Tn(o.j.Oa,o.j,o):null;e:for(var p=o.l,v=-1;;){var S=["count="+s];-1==v?0<s?S.push("ofs="+(v=p[0].h)):v=0:S.push("ofs="+v);for(var F=!0,J=0;J<s;J++){var le=p[J].h,pe=p[J].g;if(0>(le-=v))v=Math.max(0,p[J].h-100),F=!1;else try{Zo(pe,S,"req"+le+"_")}catch(Re){l&&l(pe)}}if(F){l=S.join("&");break e}}return o=o.l.splice(0,s),t.D=o,l}function Rr(o){o.g||o.u||(o.Y=1,We(o.Ga,o),o.A=0)}function br(o){return!(o.g||o.u||3<=o.A||(o.Y++,o.u=Zi(Tn(o.Ga,o),na(o,o.A)),o.A++,0))}function Si(o){null!=o.B&&(wt.clearTimeout(o.B),o.B=null)}function Ei(o){o.g=new to(o,o.h,"rpc",o.Y),null===o.o&&(o.g.H=o.s),o.g.O=0;var t=Z(o.oa);ee(t,"RID","rpc"),ee(t,"SID",o.J),ee(t,"CI",o.N?"0":"1"),ee(t,"AID",o.U),On(o,t),ee(t,"TYPE","xmlhttp"),o.o&&o.s&&ai(t,o.o,o.s),o.K&&o.g.setTimeout(o.K);var s=o.g;o=o.la,s.K=1,s.v=we(Z(t)),s.s=null,s.U=!0,bi(s,o)}function ro(o){null!=o.v&&(wt.clearTimeout(o.v),o.v=null)}function Qr(o,t){var s=null;if(o.g==t){ro(o),Si(o),o.g=null;var l=2}else{if(!Nt(o.i,t))return;s=t.D,vs(o.i,t),l=1}if(o.I=t.N,0!=o.G)if(t.i)if(1==l){s=t.s?t.s.length:0,t=Date.now()-t.F;var p=o.C;In(l=qi(),new _s(l,s,t,p)),$i(o)}else Rr(o);else if(3==(p=t.o)||0==p&&0<o.I||!(1==l&&function(o,t){return!(Ba(o.i)>=o.i.j-(o.m?1:0)||(o.m?(o.l=t.D.concat(o.l),0):1==o.G||2==o.G||o.C>=(o.Xa?0:o.Ya)||(o.m=Zi(Tn(o.Ha,o,t),na(o,o.C)),o.C++,0)))}(o,t)||2==l&&br(o)))switch(s&&0<s.length&&(t=o.i,t.i=t.i.concat(s)),p){case 1:Ai(o,5);break;case 4:Ai(o,10);break;case 3:Ai(o,6);break;default:Ai(o,2)}}function na(o,t){var s=o.Pa+Math.floor(Math.random()*o.$a);return o.j||(s*=2),s*t}function Ai(o,t){if(o.h.info("Error code "+t),2==t){var s=null;o.j&&(s=null);var l=Tn(o.jb,o);s||(s=new K("//www.google.com/images/cleardot.gif"),wt.location&&"http"==wt.location.protocol||ge(s,"https"),we(s)),function(o,t){var s=new $r;if(wt.Image){var l=new Image;l.onload=on(A,s,l,"TestLoadImage: loaded",!0,t),l.onerror=on(A,s,l,"TestLoadImage: error",!1,t),l.onabort=on(A,s,l,"TestLoadImage: abort",!1,t),l.ontimeout=on(A,s,l,"TestLoadImage: timeout",!1,t),wt.setTimeout(function(){l.ontimeout&&l.ontimeout()},1e4),l.src=o}else t(!1)}(s.toString(),l)}else jr(2);o.G=0,o.j&&o.j.va(t),Bs(o),va(o)}function Bs(o){o.G=0,o.I=-1,o.j&&((0!=xi(o.i).length||0!=o.l.length)&&(o.i.i.length=0,Bn(o.l),o.l.length=0),o.j.ua())}function Wi(o,t,s){var l=function(o){return o instanceof K?Z(o):new K(o,void 0)}(s);if(""!=l.i)t&&x(l,t+"."+l.i),W(l,l.m);else{var p=wt.location;l=function(o,t,s,l){var p=new K(null,void 0);return o&&ge(p,o),t&&x(p,t),s&&W(p,s),l&&(p.l=l),p}(p.protocol,t?t+"."+p.hostname:p.hostname,+p.port,s)}return o.aa&&Ln(o.aa,function(v,S){ee(l,S,v)}),s=o.sa,(t=o.D)&&s&&ee(l,t,s),ee(l,"VER",o.ma),On(o,l),l}function ti(o,t,s){if(t&&!o.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new mt(s&&o.Ba&&!o.qa?new M({ib:!0}):o.qa)).L=o.H,t}function xs(){}function ba(){if(ze&&!(10<=Number(xe)))throw Error("Environmental error: no available transport.")}function Ui(o,t){dn.call(this),this.g=new $o(t),this.l=o,this.h=t&&t.messageUrlParams||null,o=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.s=o,o=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(o?o["X-WebChannel-Content-Type"]=t.messageContentType:o={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(o?o["X-WebChannel-Client-Profile"]=t.ya:o={"X-WebChannel-Client-Profile":t.ya}),this.g.P=o,(o=t&&t.httpHeadersOverwriteParam)&&!Jn(o)&&(this.g.o=o),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Jn(t)&&(this.g.D=t,null!==(o=this.h)&&t in o&&t in(o=this.h)&&delete o[t]),this.j=new wa(this)}function Ca(o){yi.call(this);var t=o.__sm__;if(t){e:{for(var s in t){o=s;break e}o=void 0}(this.i=o)&&(o=this.i,t=null!==t&&o in t?t[o]:void 0),this.data=t}else this.data=o}function Ea(){vi.call(this),this.status=1}function wa(o){this.g=o}(Ot=mt.prototype).ea=function(o,t,s,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+o);t=t?t.toUpperCase():"GET",this.H=o,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ir.g(),this.C=function(o){return o.h||(o.h=o.i())}(this.u?this.u:ir),this.g.onreadystatechange=Tn(this.Fa,this);try{this.F=!0,this.g.open(t,String(o),!0),this.F=!1}catch(v){return void Fn(this,v)}o=s||"";var p=new Vo(this.headers);l&&Ci(l,function(v,S){p.set(S,v)}),l=function(o){e:{for(var t=zn,s=o.length,l="string"==typeof o?o.split(""):o,p=0;p<s;p++)if(p in l&&t.call(void 0,l[p],p,o)){t=p;break e}t=-1}return 0>t?null:"string"==typeof o?o.charAt(t):o[t]}(p.T()),s=wt.FormData&&o instanceof wt.FormData,!(0<=Pn(ur,t))||l||s||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),p.forEach(function(v,S){this.g.setRequestHeader(S,v)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ji(this),0<this.B&&((this.K=function(o){return ze&&gn()&&"number"==typeof o.timeout&&void 0!==o.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tn(this.pa,this)):this.A=ln(this.pa,this.B,this)),this.v=!0,this.g.send(o),this.v=!1}catch(v){Fn(this,v)}},Ot.pa=function(){void 0!==Cn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,In(this,"timeout"),this.abort(8))},Ot.abort=function(o){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=o||7,In(this,"complete"),In(this,"abort"),Vr(this))},Ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vr(this,!0)),mt.Z.M.call(this)},Ot.Fa=function(){this.s||(this.F||this.v||this.l?oi(this):this.cb())},Ot.cb=function(){oi(this)},Ot.ba=function(){try{return 2<si(this)?this.g.status:-1}catch(o){return-1}},Ot.ga=function(){try{return this.g?this.g.responseText:""}catch(o){return""}},Ot.Qa=function(o){if(this.g){var t=this.g.responseText;return o&&0==t.indexOf(o)&&(t=t.substring(o.length)),lt(t)}},Ot.Da=function(){return this.m},Ot.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ot=$o.prototype).ma=8,Ot.G=1,Ot.hb=function(o){try{this.h.info("Origin Trials invoked: "+o)}catch(t){}},Ot.Ha=function(o){if(this.m)if(this.m=null,1==this.G){if(!o){this.V=Math.floor(1e5*Math.random()),o=this.V++;var t=new to(this,this.h,o,void 0),s=this.s;if(this.P&&(s?Ur(s=Qt(s),this.P):s=this.P),null===this.o&&(t.H=s),this.ja)e:{for(var l=0,p=0;p<this.l.length;p++){var v=this.l[p];if(void 0===(v="__data__"in v.g&&"string"==typeof(v=v.g.__data__)?v.length:void 0))break;if(4096<(l+=v)){l=p;break e}if(4096===l||p===this.l.length-1){l=p+1;break e}}l=1e3}else l=1e3;l=$n(this,t,l),ee(p=Z(this.F),"RID",o),ee(p,"CVER",22),this.D&&ee(p,"X-HTTP-Session-Id",this.D),On(this,p),this.o&&s&&ai(p,this.o,s),mr(this.i,t),this.Ra&&ee(p,"TYPE","init"),this.ja?(ee(p,"$req",l),ee(p,"SID","null"),t.$=!0,ko(t,p,null)):ko(t,p,l),this.G=2}}else 3==this.G&&(o?vn(this,o):0==this.l.length||du(this.i)||vn(this))},Ot.Ga=function(){if(this.u=null,Ei(this),this.$&&!(this.L||null==this.g||0>=this.O)){var o=2*this.O;this.h.info("BP detection timer enabled: "+o),this.B=Zi(Tn(this.bb,this),o)}},Ot.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,jr(10),ya(this),Ei(this))},Ot.ab=function(){null!=this.v&&(this.v=null,ya(this),br(this),jr(19))},Ot.jb=function(o){o?(this.h.info("Successfully pinged google.com"),jr(2)):(this.h.info("Failed to ping google.com"),jr(1))},(Ot=xs.prototype).xa=function(){},Ot.wa=function(){},Ot.va=function(){},Ot.ua=function(){},Ot.Oa=function(){},ba.prototype.g=function(o,t){return new Ui(o,t)},Bt(Ui,dn),Ui.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var o=this.g,t=this.l,s=this.h||void 0;o.Wa&&(o.h.info("Origin Trials enabled."),We(Tn(o.hb,o,t))),jr(0),o.W=t,o.aa=s||{},o.N=o.X,o.F=Wi(o,null,o.W),$i(o)},Ui.prototype.close=function(){Fi(this.g)},Ui.prototype.u=function(o){if("string"==typeof o){var t={};t.__data__=o,ui(this.g,t)}else this.v?((t={}).__data__=Ti(o),ui(this.g,t)):ui(this.g,o)},Ui.prototype.M=function(){this.g.j=null,delete this.j,Fi(this.g),delete this.g,Ui.Z.M.call(this)},Bt(Ca,yi),Bt(Ea,vi),Bt(wa,xs),wa.prototype.xa=function(){In(this.g,"a")},wa.prototype.wa=function(o){In(this.g,new Ca(o))},wa.prototype.va=function(o){In(this.g,new Ea(o))},wa.prototype.ua=function(){In(this.g,"b")},ba.prototype.createWebChannel=ba.prototype.g,Ui.prototype.send=Ui.prototype.u,Ui.prototype.open=Ui.prototype.m,Ui.prototype.close=Ui.prototype.close,zo.NO_ERROR=0,zo.TIMEOUT=8,zo.HTTP_ERROR=6,No.COMPLETE="complete",rs.EventType=qo,qo.OPEN="a",qo.CLOSE="b",qo.ERROR="c",qo.MESSAGE="d",dn.prototype.listen=dn.prototype.N,mt.prototype.listenOnce=mt.prototype.O,mt.prototype.getLastError=mt.prototype.La,mt.prototype.getLastErrorCode=mt.prototype.Da,mt.prototype.getStatus=mt.prototype.ba,mt.prototype.getResponseJson=mt.prototype.Qa,mt.prototype.getResponseText=mt.prototype.ga,mt.prototype.send=mt.prototype.ea;var Da=zo,Yu=No,hu=zi,js_PROXY=10,js_NOPROXY=11,Ml=M,ra=rs,ja=mt,Yi=function(){function o(t,s){var l=this;this.previousValue=t,s&&(s.sequenceNumberHandler=function(p){return l.t(p)},this.i=function(p){return s.writeSequenceNumber(p)})}return o.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},o.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},o}();Yi.o=-1;var _t={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Lt=function(o){function t(s,l){var p=this;return(p=o.call(this,l)||this).code=s,p.message=l,p.name="FirebaseError",p.toString=function(){return p.name+": [code="+p.code+"]: "+p.message},p}return(0,re.ZT)(t,o),t}(Error),ss=new St.Yd("@firebase/firestore");function Sa(){return ss.logLevel}function nn(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(ss.logLevel<=St.in.DEBUG){var l=t.map(Ga);ss.debug.apply(ss,(0,re.ev)(["Firestore (8.10.0): "+o],l))}}function Oi(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(ss.logLevel<=St.in.ERROR){var l=t.map(Ga);ss.error.apply(ss,(0,re.ev)(["Firestore (8.10.0): "+o],l))}}function Cs(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(ss.logLevel<=St.in.WARN){var l=t.map(Ga);ss.warn.apply(ss,(0,re.ev)(["Firestore (8.10.0): "+o],l))}}function Ga(o){if("string"==typeof o)return o;try{return JSON.stringify(o)}catch(s){return o}}function Nn(o){void 0===o&&(o="Unexpected state");var t="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+o;throw Oi(t),new Error(t)}function Yn(o,t){o||Nn()}function an(o,t){return o}function rc(o){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),s=new Uint8Array(o);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(s);else for(var l=0;l<o;l++)s[l]=Math.floor(256*Math.random());return s}var fu=function(){function o(){}return o.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/t.length)*t.length,l="";l.length<20;)for(var p=rc(40),v=0;v<p.length;++v)l.length<20&&p[v]<s&&(l+=t.charAt(p[v]%t.length));return l},o}();function xr(o,t){return o<t?-1:o>t?1:0}function za(o,t,s){return o.length===t.length&&o.every(function(l,p){return s(l,t[p])})}function qa(o){return o+"\0"}var U=function(){function o(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new Lt(_t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Lt(_t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<-62135596800)throw new Lt(_t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Lt(_t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return o.now=function(){return o.fromMillis(Date.now())},o.fromDate=function(t){return o.fromMillis(t.getTime())},o.fromMillis=function(t){var s=Math.floor(t/1e3);return new o(s,Math.floor(1e6*(t-1e3*s)))},o.prototype.toDate=function(){return new Date(this.toMillis())},o.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},o.prototype._compareTo=function(t){return this.seconds===t.seconds?xr(this.nanoseconds,t.nanoseconds):xr(this.seconds,t.seconds)},o.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},o.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},o.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},o.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},o}(),R=function(){function o(t){this.timestamp=t}return o.fromTimestamp=function(t){return new o(t)},o.min=function(){return new o(new U(0,0))},o.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},o.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},o.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},o.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},o.prototype.toTimestamp=function(){return this.timestamp},o}();function O(o){var t=0;for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&t++;return t}function $(o,t){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&t(s,o[s])}function ne(o){for(var t in o)if(Object.prototype.hasOwnProperty.call(o,t))return!1;return!0}var he=function(){function o(t,s,l){void 0===s?s=0:s>t.length&&Nn(),void 0===l?l=t.length-s:l>t.length-s&&Nn(),this.segments=t,this.offset=s,this.len=l}return Object.defineProperty(o.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return 0===o.comparator(this,t)},o.prototype.child=function(t){var s=this.segments.slice(this.offset,this.limit());return t instanceof o?t.forEach(function(l){s.push(l)}):s.push(t),this.construct(s)},o.prototype.limit=function(){return this.offset+this.length},o.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},o.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},o.prototype.firstSegment=function(){return this.segments[this.offset]},o.prototype.lastSegment=function(){return this.get(this.length-1)},o.prototype.get=function(t){return this.segments[this.offset+t]},o.prototype.isEmpty=function(){return 0===this.length},o.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0},o.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0},o.prototype.forEach=function(t){for(var s=this.offset,l=this.limit();s<l;s++)t(this.segments[s])},o.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},o.comparator=function(t,s){for(var l=Math.min(t.length,s.length),p=0;p<l;p++){var v=t.get(p),S=s.get(p);if(v<S)return-1;if(v>S)return 1}return t.length<s.length?-1:t.length>s.length?1:0},o}(),Ae=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,re.ZT)(t,o),t.prototype.construct=function(s,l,p){return new t(s,l,p)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];for(var p=[],v=0,S=s;v<S.length;v++){var F=S[v];if(F.indexOf("//")>=0)throw new Lt(_t.INVALID_ARGUMENT,"Invalid segment ("+F+"). Paths must not contain // in them.");p.push.apply(p,F.split("/").filter(function(J){return J.length>0}))}return new t(p)},t.emptyPath=function(){return new t([])},t}(he),qe=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ct=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,re.ZT)(t,o),t.prototype.construct=function(s,l,p){return new t(s,l,p)},t.isValidIdentifier=function(s){return qe.test(s)},t.prototype.canonicalString=function(){return this.toArray().map(function(s){return s=s.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(s)||(s="`"+s+"`"),s}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(s){for(var l=[],p="",v=0,S=function(){if(0===p.length)throw new Lt(_t.INVALID_ARGUMENT,"Invalid field path ("+s+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");l.push(p),p=""},F=!1;v<s.length;){var J=s[v];if("\\"===J){if(v+1===s.length)throw new Lt(_t.INVALID_ARGUMENT,"Path has trailing escape character: "+s);var le=s[v+1];if("\\"!==le&&"."!==le&&"`"!==le)throw new Lt(_t.INVALID_ARGUMENT,"Path has invalid escape sequence: "+s);p+=le,v+=2}else"`"===J?(F=!F,v++):"."!==J||F?(p+=J,v++):(S(),v++)}if(S(),F)throw new Lt(_t.INVALID_ARGUMENT,"Unterminated ` in path: "+s);return new t(l)},t.emptyPath=function(){return new t([])},t}(he),fn=function(){function o(t){this.fields=t,t.sort(Ct.comparator)}return o.prototype.covers=function(t){for(var s=0,l=this.fields;s<l.length;s++)if(l[s].isPrefixOf(t))return!0;return!1},o.prototype.isEqual=function(t){return za(this.fields,t.fields,function(s,l){return s.isEqual(l)})},o}(),rr=function(){function o(t){this.binaryString=t}return o.fromBase64String=function(t){return new o(atob(t))},o.fromUint8Array=function(t){return new o(function(s){for(var l="",p=0;p<s.length;++p)l+=String.fromCharCode(s[p]);return l}(t))},o.prototype.toBase64=function(){return btoa(this.binaryString)},o.prototype.toUint8Array=function(){return function(t){for(var s=new Uint8Array(t.length),l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s}(this.binaryString)},o.prototype.approximateByteSize=function(){return 2*this.binaryString.length},o.prototype.compareTo=function(t){return xr(this.binaryString,t.binaryString)},o.prototype.isEqual=function(t){return this.binaryString===t.binaryString},o}();rr.EMPTY_BYTE_STRING=new rr("");var Hn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(o){if(Yn(!!o),"string"==typeof o){var t=0,s=Hn.exec(o);if(Yn(!!s),s[1]){var l=s[1];l=(l+"000000000").substr(0,9),t=Number(l)}var p=new Date(o);return{seconds:Math.floor(p.getTime()/1e3),nanos:t}}return{seconds:Un(o.seconds),nanos:Un(o.nanos)}}function Un(o){return"number"==typeof o?o:"string"==typeof o?Number(o):0}function go(o){return"string"==typeof o?rr.fromBase64String(o):rr.fromUint8Array(o)}function Uo(o){var t,s;return"server_timestamp"===(null===(s=((null===(t=null==o?void 0:o.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===s?void 0:s.stringValue)}function mo(o){var t=o.mapValue.fields.__previous_value__;return Uo(t)?mo(t):t}function Hs(o){var t=Ar(o.mapValue.fields.__local_write_time__.timestampValue);return new U(t.seconds,t.nanos)}function Wo(o){return null==o}function Yo(o){return 0===o&&1/o==-1/0}function pu(o){return"number"==typeof o&&Number.isInteger(o)&&!Yo(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER}var qn=function(){function o(t){this.path=t}return o.fromPath=function(t){return new o(Ae.fromString(t))},o.fromName=function(t){return new o(Ae.fromString(t).popFirst(5))},o.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},o.prototype.isEqual=function(t){return null!==t&&0===Ae.comparator(this.path,t.path)},o.prototype.toString=function(){return this.path.toString()},o.comparator=function(t,s){return Ae.comparator(t.path,s.path)},o.isDocumentKey=function(t){return t.length%2==0},o.fromSegments=function(t){return new o(new Ae(t.slice()))},o}();function Ii(o){return"nullValue"in o?0:"booleanValue"in o?1:"integerValue"in o||"doubleValue"in o?2:"timestampValue"in o?3:"stringValue"in o?5:"bytesValue"in o?6:"referenceValue"in o?7:"geoPointValue"in o?8:"arrayValue"in o?9:"mapValue"in o?Uo(o)?4:10:Nn()}function ia(o,t){var p,s=Ii(o);if(s!==Ii(t))return!1;switch(s){case 0:return!0;case 1:return o.booleanValue===t.booleanValue;case 4:return Hs(o).isEqual(Hs(t));case 3:return function(l,p){if("string"==typeof l.timestampValue&&"string"==typeof p.timestampValue&&l.timestampValue.length===p.timestampValue.length)return l.timestampValue===p.timestampValue;var v=Ar(l.timestampValue),S=Ar(p.timestampValue);return v.seconds===S.seconds&&v.nanos===S.nanos}(o,t);case 5:return o.stringValue===t.stringValue;case 6:return p=t,go(o.bytesValue).isEqual(go(p.bytesValue));case 7:return o.referenceValue===t.referenceValue;case 8:return function(l,p){return Un(l.geoPointValue.latitude)===Un(p.geoPointValue.latitude)&&Un(l.geoPointValue.longitude)===Un(p.geoPointValue.longitude)}(o,t);case 2:return function(l,p){if("integerValue"in l&&"integerValue"in p)return Un(l.integerValue)===Un(p.integerValue);if("doubleValue"in l&&"doubleValue"in p){var v=Un(l.doubleValue),S=Un(p.doubleValue);return v===S?Yo(v)===Yo(S):isNaN(v)&&isNaN(S)}return!1}(o,t);case 9:return za(o.arrayValue.values||[],t.arrayValue.values||[],ia);case 10:return function(l,p){var v=l.mapValue.fields||{},S=p.mapValue.fields||{};if(O(v)!==O(S))return!1;for(var F in v)if(v.hasOwnProperty(F)&&(void 0===S[F]||!ia(v[F],S[F])))return!1;return!0}(o,t);default:return Nn()}}function gu(o,t){return void 0!==(o.values||[]).find(function(s){return ia(s,t)})}function Za(o,t){var p,v,S,F,s=Ii(o),l=Ii(t);if(s!==l)return xr(s,l);switch(s){case 0:return 0;case 1:return xr(o.booleanValue,t.booleanValue);case 2:return v=t,(S=Un((p=o).integerValue||p.doubleValue))<(F=Un(v.integerValue||v.doubleValue))?-1:S>F?1:S===F?0:isNaN(S)?isNaN(F)?0:-1:1;case 3:return hd(o.timestampValue,t.timestampValue);case 4:return hd(Hs(o),Hs(t));case 5:return xr(o.stringValue,t.stringValue);case 6:return function(p,v){var S=go(p),F=go(v);return S.compareTo(F)}(o.bytesValue,t.bytesValue);case 7:return function(p,v){for(var S=p.split("/"),F=v.split("/"),J=0;J<S.length&&J<F.length;J++){var le=xr(S[J],F[J]);if(0!==le)return le}return xr(S.length,F.length)}(o.referenceValue,t.referenceValue);case 8:return function(p,v){var S=xr(Un(p.latitude),Un(v.latitude));return 0!==S?S:xr(Un(p.longitude),Un(v.longitude))}(o.geoPointValue,t.geoPointValue);case 9:return function(p,v){for(var S=p.values||[],F=v.values||[],J=0;J<S.length&&J<F.length;++J){var le=Za(S[J],F[J]);if(le)return le}return xr(S.length,F.length)}(o.arrayValue,t.arrayValue);case 10:return function(p,v){var S=p.fields||{},F=Object.keys(S),J=v.fields||{},le=Object.keys(J);F.sort(),le.sort();for(var pe=0;pe<F.length&&pe<le.length;++pe){var Re=xr(F[pe],le[pe]);if(0!==Re)return Re;var Ge=Za(S[F[pe]],J[le[pe]]);if(0!==Ge)return Ge}return xr(F.length,le.length)}(o.mapValue,t.mapValue);default:throw Nn()}}function hd(o,t){if("string"==typeof o&&"string"==typeof t&&o.length===t.length)return xr(o,t);var s=Ar(o),l=Ar(t),p=xr(s.seconds,l.seconds);return 0!==p?p:xr(s.nanos,l.nanos)}function Lc(o){return Ku(o)}function Ku(o){return"nullValue"in o?"null":"booleanValue"in o?""+o.booleanValue:"integerValue"in o?""+o.integerValue:"doubleValue"in o?""+o.doubleValue:"timestampValue"in o?"time("+(p=Ar(o.timestampValue)).seconds+","+p.nanos+")":"stringValue"in o?o.stringValue:"bytesValue"in o?go(o.bytesValue).toBase64():"referenceValue"in o?qn.fromName(o.referenceValue).toString():"geoPointValue"in o?"geo("+(t=o.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in o?function(l){for(var p="[",v=!0,S=0,F=l.values||[];S<F.length;S++)v?v=!1:p+=",",p+=Ku(F[S]);return p+"]"}(o.arrayValue):"mapValue"in o?function(l){for(var p="{",v=!0,S=0,F=Object.keys(l.fields||{}).sort();S<F.length;S++){var J=F[S];v?v=!1:p+=",",p+=J+":"+Ku(l.fields[J])}return p+"}"}(o.mapValue):Nn();var p,t}function ic(o,t){return{referenceValue:"projects/"+o.projectId+"/databases/"+o.database+"/documents/"+t.path.canonicalString()}}function Aa(o){return!!o&&"integerValue"in o}function fd(o){return!!o&&"arrayValue"in o}function Qu(o){return!!o&&"nullValue"in o}function Ia(o){return!!o&&"doubleValue"in o&&isNaN(Number(o.doubleValue))}function Gs(o){return!!o&&"mapValue"in o}function mu(o){if(o.geoPointValue)return{geoPointValue:Object.assign({},o.geoPointValue)};if(o.timestampValue&&"object"==typeof o.timestampValue)return{timestampValue:Object.assign({},o.timestampValue)};if(o.mapValue){var t={mapValue:{fields:{}}};return $(o.mapValue.fields,function(p,v){return t.mapValue.fields[p]=mu(v)}),t}if(o.arrayValue){for(var s={arrayValue:{values:[]}},l=0;l<(o.arrayValue.values||[]).length;++l)s.arrayValue.values[l]=mu(o.arrayValue.values[l]);return s}return Object.assign({},o)}var li=function(){function o(t){this.value=t}return o.empty=function(){return new o({mapValue:{}})},o.prototype.field=function(t){if(t.isEmpty())return this.value;for(var s=this.value,l=0;l<t.length-1;++l)if(!Gs(s=(s.mapValue.fields||{})[t.get(l)]))return null;return(s=(s.mapValue.fields||{})[t.lastSegment()])||null},o.prototype.set=function(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=mu(s)},o.prototype.setAll=function(t){var s=this,l=Ct.emptyPath(),p={},v=[];t.forEach(function(F,J){if(!l.isImmediateParentOf(J)){var le=s.getFieldsMap(l);s.applyChanges(le,p,v),p={},v=[],l=J.popLast()}F?p[J.lastSegment()]=mu(F):v.push(J.lastSegment())});var S=this.getFieldsMap(l);this.applyChanges(S,p,v)},o.prototype.delete=function(t){var s=this.field(t.popLast());Gs(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]},o.prototype.isEqual=function(t){return ia(this.value,t.value)},o.prototype.getFieldsMap=function(t){var s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(var l=0;l<t.length;++l){var p=s.mapValue.fields[t.get(l)];Gs(p)&&p.mapValue.fields||(p={mapValue:{fields:{}}},s.mapValue.fields[t.get(l)]=p),s=p}return s.mapValue.fields},o.prototype.applyChanges=function(t,s,l){$(s,function(F,J){return t[F]=J});for(var p=0,v=l;p<v.length;p++)delete t[v[p]]},o.prototype.clone=function(){return new o(mu(this.value))},o}();function zs(o){var t=[];return $(o.fields,function(s,l){var p=new Ct([s]);if(Gs(l)){var v=zs(l.mapValue).fields;if(0===v.length)t.push(p);else for(var S=0,F=v;S<F.length;S++)t.push(p.child(F[S]))}else t.push(p)}),new fn(t)}var Sr=function(){function o(t,s,l,p,v){this.key=t,this.documentType=s,this.version=l,this.data=p,this.documentState=v}return o.newInvalidDocument=function(t){return new o(t,0,R.min(),li.empty(),0)},o.newFoundDocument=function(t,s,l){return new o(t,1,s,l,0)},o.newNoDocument=function(t,s){return new o(t,2,s,li.empty(),0)},o.newUnknownDocument=function(t,s){return new o(t,3,s,li.empty(),2)},o.prototype.convertToFoundDocument=function(t,s){return this.version=t,this.documentType=1,this.data=s,this.documentState=0,this},o.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=li.empty(),this.documentState=0,this},o.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=li.empty(),this.documentState=2,this},o.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},o.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(o.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),o.prototype.isValidDocument=function(){return 0!==this.documentType},o.prototype.isFoundDocument=function(){return 1===this.documentType},o.prototype.isNoDocument=function(){return 2===this.documentType},o.prototype.isUnknownDocument=function(){return 3===this.documentType},o.prototype.isEqual=function(t){return t instanceof o&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},o.prototype.clone=function(){return new o(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},o.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},o}(),oh=function(o,t,s,l,p,v,S){void 0===t&&(t=null),void 0===s&&(s=[]),void 0===l&&(l=[]),void 0===p&&(p=null),void 0===v&&(v=null),void 0===S&&(S=null),this.path=o,this.collectionGroup=t,this.orderBy=s,this.filters=l,this.limit=p,this.startAt=v,this.endAt=S,this.h=null};function oc(o,t,s,l,p,v,S){return void 0===t&&(t=null),void 0===s&&(s=[]),void 0===l&&(l=[]),void 0===p&&(p=null),void 0===v&&(v=null),void 0===S&&(S=null),new oh(o,t,s,l,p,v,S)}function Ko(o){var t=an(o);if(null===t.h){var s=t.path.canonicalString();null!==t.collectionGroup&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map(function(l){return(p=l).field.canonicalString()+p.op.toString()+Lc(p.value);var p}).join(","),s+="|ob:",s+=t.orderBy.map(function(l){return(p=l).field.canonicalString()+p.dir;var p}).join(","),Wo(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=oa(t.startAt)),t.endAt&&(s+="|ub:",s+=oa(t.endAt)),t.h=s}return t.h}function _o(o,t){if(o.limit!==t.limit||o.orderBy.length!==t.orderBy.length)return!1;for(var s=0;s<o.orderBy.length;s++)if(!Uc(o.orderBy[s],t.orderBy[s]))return!1;if(o.filters.length!==t.filters.length)return!1;for(var l=0;l<o.filters.length;l++)if((p=o.filters[l]).op!==(v=t.filters[l]).op||!p.field.isEqual(v.field)||!ia(p.value,v.value))return!1;var p,v;return o.collectionGroup===t.collectionGroup&&!!o.path.isEqual(t.path)&&!!sc(o.startAt,t.startAt)&&sc(o.endAt,t.endAt)}function qs(o){return qn.isDocumentKey(o.path)&&null===o.collectionGroup&&0===o.filters.length}var So=function(o){function t(s,l,p){var v=this;return(v=o.call(this)||this).field=s,v.op=l,v.value=p,v}return(0,re.ZT)(t,o),t.create=function(s,l,p){return s.isKeyField()?"in"===l||"not-in"===l?this.l(s,l,p):new $a(s,l,p):"array-contains"===l?new Uh(s,p):"in"===l?new sh(s,p):"not-in"===l?new Ol(s,p):"array-contains-any"===l?new Es(s,p):new t(s,l,p)},t.l=function(s,l,p){return"in"===l?new pd(s,p):new Vc(s,p)},t.prototype.matches=function(s){var l=s.data.field(this.field);return"!="===this.op?null!==l&&this.m(Za(l,this.value)):null!==l&&Ii(this.value)===Ii(l)&&this.m(Za(l,this.value))},t.prototype.m=function(s){switch(this.op){case"<":return s<0;case"<=":return s<=0;case"==":return 0===s;case"!=":return 0!==s;case">":return s>0;case">=":return s>=0;default:return Nn()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),$a=function(o){function t(s,l,p){var v=this;return(v=o.call(this,s,l,p)||this).key=qn.fromName(p.referenceValue),v}return(0,re.ZT)(t,o),t.prototype.matches=function(s){var l=qn.comparator(s.key,this.key);return this.m(l)},t}(So),pd=function(o){function t(s,l){var p=this;return(p=o.call(this,s,"in",l)||this).keys=gd(0,l),p}return(0,re.ZT)(t,o),t.prototype.matches=function(s){return this.keys.some(function(l){return l.isEqual(s.key)})},t}(So),Vc=function(o){function t(s,l){var p=this;return(p=o.call(this,s,"not-in",l)||this).keys=gd(0,l),p}return(0,re.ZT)(t,o),t.prototype.matches=function(s){return!this.keys.some(function(l){return l.isEqual(s.key)})},t}(So);function gd(o,t){var s;return((null===(s=t.arrayValue)||void 0===s?void 0:s.values)||[]).map(function(l){return qn.fromName(l.referenceValue)})}var Uh=function(o){function t(s,l){return o.call(this,s,"array-contains",l)||this}return(0,re.ZT)(t,o),t.prototype.matches=function(s){var l=s.data.field(this.field);return fd(l)&&gu(l.arrayValue,this.value)},t}(So),sh=function(o){function t(s,l){return o.call(this,s,"in",l)||this}return(0,re.ZT)(t,o),t.prototype.matches=function(s){var l=s.data.field(this.field);return null!==l&&gu(this.value.arrayValue,l)},t}(So),Ol=function(o){function t(s,l){return o.call(this,s,"not-in",l)||this}return(0,re.ZT)(t,o),t.prototype.matches=function(s){if(gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var l=s.data.field(this.field);return null!==l&&!gu(this.value.arrayValue,l)},t}(So),Es=function(o){function t(s,l){return o.call(this,s,"array-contains-any",l)||this}return(0,re.ZT)(t,o),t.prototype.matches=function(s){var l=this,p=s.data.field(this.field);return!(!fd(p)||!p.arrayValue.values)&&p.arrayValue.values.some(function(v){return gu(l.value.arrayValue,v)})},t}(So),Ps=function(o,t){this.position=o,this.before=t};function oa(o){return(o.before?"b":"a")+":"+o.position.map(function(t){return Lc(t)}).join(",")}var Ju=function(o,t){void 0===t&&(t="asc"),this.field=o,this.dir=t};function Uc(o,t){return o.dir===t.dir&&o.field.isEqual(t.field)}function Xu(o,t,s){for(var l=0,p=0;p<o.position.length;p++){var v=t[p],S=o.position[p];if(l=v.field.isKeyField()?qn.comparator(qn.fromName(S.referenceValue),s.key):Za(S,s.data.field(v.field)),"desc"===v.dir&&(l*=-1),0!==l)break}return o.before?l<=0:l<0}function sc(o,t){if(null===o)return null===t;if(null===t||o.before!==t.before||o.position.length!==t.position.length)return!1;for(var s=0;s<o.position.length;s++)if(!ia(o.position[s],t.position[s]))return!1;return!0}var Zs=function(o,t,s,l,p,v,S,F){void 0===t&&(t=null),void 0===s&&(s=[]),void 0===l&&(l=[]),void 0===p&&(p=null),void 0===v&&(v="F"),void 0===S&&(S=null),void 0===F&&(F=null),this.path=o,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=l,this.limit=p,this.limitType=v,this.startAt=S,this.endAt=F,this.p=null,this.T=null};function _u(o,t,s,l,p,v,S,F){return new Zs(o,t,s,l,p,v,S,F)}function yu(o){return new Zs(o)}function vu(o){return!Wo(o.limit)&&"F"===o.limitType}function Ma(o){return!Wo(o.limit)&&"L"===o.limitType}function el(o){return o.explicitOrderBy.length>0?o.explicitOrderBy[0].field:null}function Bc(o){for(var t=0,s=o.filters;t<s.length;t++){var l=s[t];if(l.g())return l.field}return null}function tl(o){return null!==o.collectionGroup}function Oa(o){var t=an(o);if(null===t.p){t.p=[];var s=Bc(t),l=el(t);if(null!==s&&null===l)s.isKeyField()||t.p.push(new Ju(s)),t.p.push(new Ju(Ct.keyField(),"asc"));else{for(var p=!1,v=0,S=t.explicitOrderBy;v<S.length;v++){var F=S[v];t.p.push(F),F.field.isKeyField()&&(p=!0)}if(!p){var J=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Ju(Ct.keyField(),J))}}}return t.p}function Bo(o){var t=an(o);if(!t.T)if("F"===t.limitType)t.T=oc(t.path,t.collectionGroup,Oa(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var s=[],l=0,p=Oa(t);l<p.length;l++){var v=p[l];s.push(new Ju(v.field,"desc"===v.dir?"asc":"desc"))}var F=t.endAt?new Ps(t.endAt.position,!t.endAt.before):null,J=t.startAt?new Ps(t.startAt.position,!t.startAt.before):null;t.T=oc(t.path,t.collectionGroup,s,t.filters,t.limit,F,J)}return t.T}function jc(o,t,s){return new Zs(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),t,s,o.startAt,o.endAt)}function Rl(o,t){return _o(Bo(o),Bo(t))&&o.limitType===t.limitType}function Hc(o){return Ko(Bo(o))+"|lt:"+o.limitType}function ac(o){return"Query(target="+(s=(t=Bo(o)).path.canonicalString(),null!==t.collectionGroup&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=", filters: ["+t.filters.map(function(l){return(p=l).field.canonicalString()+" "+p.op+" "+Lc(p.value);var p}).join(", ")+"]"),Wo(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=", orderBy: ["+t.orderBy.map(function(l){return(p=l).field.canonicalString()+" ("+p.dir+")";var p}).join(", ")+"]"),t.startAt&&(s+=", startAt: "+oa(t.startAt)),t.endAt&&(s+=", endAt: "+oa(t.endAt)),"Target("+s+"); limitType=")+o.limitType+")";var t,s}function nl(o,t){return t.isFoundDocument()&&(p=(l=t).key.path,null!==(s=o).collectionGroup?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(p):qn.isDocumentKey(s.path)?s.path.isEqual(p):s.path.isImmediateParentOf(p))&&function(s,l){for(var p=0,v=s.explicitOrderBy;p<v.length;p++){var S=v[p];if(!S.field.isKeyField()&&null===l.data.field(S.field))return!1}return!0}(o,t)&&function(s,l){for(var p=0,v=s.filters;p<v.length;p++)if(!v[p].matches(l))return!1;return!0}(o,t)&&function(s,l){return!(s.startAt&&!Xu(s.startAt,Oa(s),l)||s.endAt&&Xu(s.endAt,Oa(s),l))}(o,t);var s,l,p}function rl(o){return function(t,s){for(var l=!1,p=0,v=Oa(o);p<v.length;p++){var S=v[p],F=Wa(S,t,s);if(0!==F)return F;l=l||S.field.isKeyField()}return 0}}function Wa(o,t,s){var p,S,F,J,l=o.field.isKeyField()?qn.comparator(t.key,s.key):(S=s,F=t.data.field(p=o.field),J=S.data.field(p),null!==F&&null!==J?Za(F,J):Nn());switch(o.dir){case"asc":return l;case"desc":return-1*l;default:return Nn()}}function Ra(o,t){if(o.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yo(t)?"-0":t}}function xl(o){return{integerValue:""+o}}function gi(o,t){return pu(t)?xl(t):Ra(o,t)}var bu=function(){this._=void 0};function uc(o,t,s){return o instanceof Eu?(v={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(l=s).seconds,nanos:l.nanoseconds}}}},(p=t)&&(v.fields.__previous_value__=p),{mapValue:v}):o instanceof Ya?wu(o,t):o instanceof Du?Tu(o,t):function(l,p){var v=xa(l,p),S=il(v)+il(l.A);return Aa(v)&&Aa(l.A)?xl(S):Ra(l.R,S)}(o,t);var l,p,v}function Cu(o,t,s){return o instanceof Ya?wu(o,t):o instanceof Du?Tu(o,t):s}function xa(o,t){return o instanceof as?Aa(s=t)||(l=s)&&"doubleValue"in l?t:{integerValue:0}:null;var l,s}var Eu=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,re.ZT)(t,o),t}(bu),Ya=function(o){function t(s){var l=this;return(l=o.call(this)||this).elements=s,l}return(0,re.ZT)(t,o),t}(bu);function wu(o,t){for(var s=$s(t),l=function(S){s.some(function(F){return ia(F,S)})||s.push(S)},p=0,v=o.elements;p<v.length;p++)l(v[p]);return{arrayValue:{values:s}}}var Du=function(o){function t(s){var l=this;return(l=o.call(this)||this).elements=s,l}return(0,re.ZT)(t,o),t}(bu);function Tu(o,t){for(var s=$s(t),l=function(S){s=s.filter(function(F){return!ia(F,S)})},p=0,v=o.elements;p<v.length;p++)l(v[p]);return{arrayValue:{values:s}}}var as=function(o){function t(s,l){var p=this;return(p=o.call(this)||this).R=s,p.A=l,p}return(0,re.ZT)(t,o),t}(bu);function il(o){return Un(o.integerValue||o.doubleValue)}function $s(o){return fd(o)&&o.arrayValue.values?o.arrayValue.values.slice():[]}var Ka=function(o,t){this.field=o,this.transform=t},Gc=function(o,t){this.version=o,this.transformResults=t},Ao=function(){function o(t,s){this.updateTime=t,this.exists=s}return o.none=function(){return new o},o.exists=function(t){return new o(void 0,t)},o.updateTime=function(t){return new o(t)},Object.defineProperty(o.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},o}();function Fs(o,t){return void 0!==o.updateTime?t.isFoundDocument()&&t.version.isEqual(o.updateTime):void 0===o.exists||o.exists===t.isFoundDocument()}var fs=function(){};function Pl(o,t,s){var l,p,v,S,F;o instanceof Qa?(p=t,v=s,S=(l=o).value.clone(),F=Ws(l.fieldTransforms,p,v.transformResults),S.setAll(F),p.convertToFoundDocument(v.version,S).setHasCommittedMutations()):o instanceof ws?function(l,p,v){if(Fs(l.precondition,p)){var S=Ws(l.fieldTransforms,p,v.transformResults),F=p.data;F.setAll(_d(l)),F.setAll(S),p.convertToFoundDocument(v.version,F).setHasCommittedMutations()}else p.convertToUnknownDocument(v.version)}(o,t,s):function(l,p,v){p.convertToNoDocument(v.version).setHasCommittedMutations()}(0,t,s)}function ol(o,t,s){var p;o instanceof Qa?function(l,p,v){if(Fs(l.precondition,p)){var S=l.value.clone(),F=zc(l.fieldTransforms,v,p);S.setAll(F),p.convertToFoundDocument(md(p),S).setHasLocalMutations()}}(o,t,s):o instanceof ws?function(l,p,v){if(Fs(l.precondition,p)){var S=zc(l.fieldTransforms,v,p),F=p.data;F.setAll(_d(l)),F.setAll(S),p.convertToFoundDocument(md(p),F).setHasLocalMutations()}}(o,t,s):Fs(o.precondition,p=t)&&p.convertToNoDocument(R.min())}function Su(o,t){for(var s=null,l=0,p=o.fieldTransforms;l<p.length;l++){var v=p[l],S=t.data.field(v.field),F=xa(v.transform,S||null);null!=F&&(null==s&&(s=li.empty()),s.set(v.field,F))}return s||null}function sa(o,t){return o.type===t.type&&!!o.key.isEqual(t.key)&&!!o.precondition.isEqual(t.precondition)&&(l=t.fieldTransforms,!!(void 0===(s=o.fieldTransforms)&&void 0===l||s&&l&&za(s,l,function(p,v){return(S=p).field.isEqual((F=v).field)&&(le=F.transform,(J=S.transform)instanceof Ya&&le instanceof Ya||J instanceof Du&&le instanceof Du?za(J.elements,le.elements,ia):J instanceof as&&le instanceof as?ia(J.A,le.A):J instanceof Eu&&le instanceof Eu);var S,F,J,le})))&&(0===o.type?o.value.isEqual(t.value):1!==o.type||o.data.isEqual(t.data)&&o.fieldMask.isEqual(t.fieldMask));var s,l}function md(o){return o.isFoundDocument()?o.version:R.min()}var Qa=function(o){function t(s,l,p,v){void 0===v&&(v=[]);var S=this;return(S=o.call(this)||this).key=s,S.value=l,S.precondition=p,S.fieldTransforms=v,S.type=0,S}return(0,re.ZT)(t,o),t}(fs),ws=function(o){function t(s,l,p,v,S){void 0===S&&(S=[]);var F=this;return(F=o.call(this)||this).key=s,F.data=l,F.fieldMask=p,F.precondition=v,F.fieldTransforms=S,F.type=1,F}return(0,re.ZT)(t,o),t}(fs);function _d(o){var t=new Map;return o.fieldMask.fields.forEach(function(s){if(!s.isEmpty()){var l=o.data.field(s);t.set(s,l)}}),t}function Ws(o,t,s){var l=new Map;Yn(o.length===s.length);for(var p=0;p<s.length;p++){var v=o[p],S=v.transform,F=t.data.field(v.field);l.set(v.field,Cu(S,F,s[p]))}return l}function zc(o,t,s){for(var l=new Map,p=0,v=o;p<v.length;p++){var S=v[p],F=S.transform,J=s.data.field(S.field);l.set(S.field,uc(F,J,t))}return l}var yo,Jr,aa=function(o){function t(s,l){var p=this;return(p=o.call(this)||this).key=s,p.precondition=l,p.type=2,p.fieldTransforms=[],p}return(0,re.ZT)(t,o),t}(fs),Ja=function(o){function t(s,l){var p=this;return(p=o.call(this)||this).key=s,p.precondition=l,p.type=3,p.fieldTransforms=[],p}return(0,re.ZT)(t,o),t}(fs),jo=function(o){this.count=o};function qc(o){switch(o){case _t.OK:return Nn();case _t.CANCELLED:case _t.UNKNOWN:case _t.DEADLINE_EXCEEDED:case _t.RESOURCE_EXHAUSTED:case _t.INTERNAL:case _t.UNAVAILABLE:case _t.UNAUTHENTICATED:return!1;case _t.INVALID_ARGUMENT:case _t.NOT_FOUND:case _t.ALREADY_EXISTS:case _t.PERMISSION_DENIED:case _t.FAILED_PRECONDITION:case _t.ABORTED:case _t.OUT_OF_RANGE:case _t.UNIMPLEMENTED:case _t.DATA_LOSS:return!0;default:return Nn()}}function Zc(o){if(void 0===o)return Oi("GRPC error has no .code"),_t.UNKNOWN;switch(o){case yo.OK:return _t.OK;case yo.CANCELLED:return _t.CANCELLED;case yo.UNKNOWN:return _t.UNKNOWN;case yo.DEADLINE_EXCEEDED:return _t.DEADLINE_EXCEEDED;case yo.RESOURCE_EXHAUSTED:return _t.RESOURCE_EXHAUSTED;case yo.INTERNAL:return _t.INTERNAL;case yo.UNAVAILABLE:return _t.UNAVAILABLE;case yo.UNAUTHENTICATED:return _t.UNAUTHENTICATED;case yo.INVALID_ARGUMENT:return _t.INVALID_ARGUMENT;case yo.NOT_FOUND:return _t.NOT_FOUND;case yo.ALREADY_EXISTS:return _t.ALREADY_EXISTS;case yo.PERMISSION_DENIED:return _t.PERMISSION_DENIED;case yo.FAILED_PRECONDITION:return _t.FAILED_PRECONDITION;case yo.ABORTED:return _t.ABORTED;case yo.OUT_OF_RANGE:return _t.OUT_OF_RANGE;case yo.UNIMPLEMENTED:return _t.UNIMPLEMENTED;case yo.DATA_LOSS:return _t.DATA_LOSS;default:return Nn()}}(Jr=yo||(yo={}))[Jr.OK=0]="OK",Jr[Jr.CANCELLED=1]="CANCELLED",Jr[Jr.UNKNOWN=2]="UNKNOWN",Jr[Jr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jr[Jr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jr[Jr.NOT_FOUND=5]="NOT_FOUND",Jr[Jr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jr[Jr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jr[Jr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jr[Jr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jr[Jr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jr[Jr.ABORTED=10]="ABORTED",Jr[Jr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jr[Jr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jr[Jr.INTERNAL=13]="INTERNAL",Jr[Jr.UNAVAILABLE=14]="UNAVAILABLE",Jr[Jr.DATA_LOSS=15]="DATA_LOSS";var Qo=function(){function o(t,s){this.comparator=t,this.root=s||Pa.EMPTY}return o.prototype.insert=function(t,s){return new o(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,Pa.BLACK,null,null))},o.prototype.remove=function(t){return new o(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Pa.BLACK,null,null))},o.prototype.get=function(t){for(var s=this.root;!s.isEmpty();){var l=this.comparator(t,s.key);if(0===l)return s.value;l<0?s=s.left:l>0&&(s=s.right)}return null},o.prototype.indexOf=function(t){for(var s=0,l=this.root;!l.isEmpty();){var p=this.comparator(t,l.key);if(0===p)return s+l.left.size;p<0?l=l.left:(s+=l.left.size+1,l=l.right)}return-1},o.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(o.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),o.prototype.minKey=function(){return this.root.minKey()},o.prototype.maxKey=function(){return this.root.maxKey()},o.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},o.prototype.forEach=function(t){this.inorderTraversal(function(s,l){return t(s,l),!1})},o.prototype.toString=function(){var t=[];return this.inorderTraversal(function(s,l){return t.push(s+":"+l),!1}),"{"+t.join(", ")+"}"},o.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},o.prototype.getIterator=function(){return new Au(this.root,null,this.comparator,!1)},o.prototype.getIteratorFrom=function(t){return new Au(this.root,t,this.comparator,!1)},o.prototype.getReverseIterator=function(){return new Au(this.root,null,this.comparator,!0)},o.prototype.getReverseIteratorFrom=function(t){return new Au(this.root,t,this.comparator,!0)},o}(),Au=function(){function o(t,s,l,p){this.isReverse=p,this.nodeStack=[];for(var v=1;!t.isEmpty();)if(v=s?l(t.key,s):1,p&&(v*=-1),v<0)t=this.isReverse?t.left:t.right;else{if(0===v){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return o.prototype.getNext=function(){var t=this.nodeStack.pop(),s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s},o.prototype.hasNext=function(){return this.nodeStack.length>0},o.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},o}(),Pa=function(){function o(t,s,l,p,v){this.key=t,this.value=s,this.color=null!=l?l:o.RED,this.left=null!=p?p:o.EMPTY,this.right=null!=v?v:o.EMPTY,this.size=this.left.size+1+this.right.size}return o.prototype.copy=function(t,s,l,p,v){return new o(null!=t?t:this.key,null!=s?s:this.value,null!=l?l:this.color,null!=p?p:this.left,null!=v?v:this.right)},o.prototype.isEmpty=function(){return!1},o.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},o.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},o.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},o.prototype.minKey=function(){return this.min().key},o.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},o.prototype.insert=function(t,s,l){var p=this,v=l(t,p.key);return(p=v<0?p.copy(null,null,null,p.left.insert(t,s,l),null):0===v?p.copy(null,s,null,null,null):p.copy(null,null,null,null,p.right.insert(t,s,l))).fixUp()},o.prototype.removeMin=function(){if(this.left.isEmpty())return o.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},o.prototype.remove=function(t,s){var l,p=this;if(s(t,p.key)<0)p.left.isEmpty()||p.left.isRed()||p.left.left.isRed()||(p=p.moveRedLeft()),p=p.copy(null,null,null,p.left.remove(t,s),null);else{if(p.left.isRed()&&(p=p.rotateRight()),p.right.isEmpty()||p.right.isRed()||p.right.left.isRed()||(p=p.moveRedRight()),0===s(t,p.key)){if(p.right.isEmpty())return o.EMPTY;l=p.right.min(),p=p.copy(l.key,l.value,null,null,p.right.removeMin())}p=p.copy(null,null,null,null,p.right.remove(t,s))}return p.fixUp()},o.prototype.isRed=function(){return this.color},o.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},o.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},o.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},o.prototype.rotateLeft=function(){var t=this.copy(null,null,o.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},o.prototype.rotateRight=function(){var t=this.copy(null,null,o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},o.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)},o.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},o.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Nn();var t=this.left.check();if(t!==this.right.check())throw Nn();return t+(this.isRed()?0:1)},o}();Pa.EMPTY=null,Pa.RED=!0,Pa.BLACK=!1,Pa.EMPTY=new(function(){function o(){this.size=0}return Object.defineProperty(o.prototype,"key",{get:function(){throw Nn()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"value",{get:function(){throw Nn()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"color",{get:function(){throw Nn()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"left",{get:function(){throw Nn()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"right",{get:function(){throw Nn()},enumerable:!1,configurable:!0}),o.prototype.copy=function(t,s,l,p,v){return this},o.prototype.insert=function(t,s,l){return new Pa(t,s)},o.prototype.remove=function(t,s){return this},o.prototype.isEmpty=function(){return!0},o.prototype.inorderTraversal=function(t){return!1},o.prototype.reverseTraversal=function(t){return!1},o.prototype.minKey=function(){return null},o.prototype.maxKey=function(){return null},o.prototype.isRed=function(){return!1},o.prototype.checkMaxDepth=function(){return!0},o.prototype.check=function(){return 0},o}());var vo=function(){function o(t){this.comparator=t,this.data=new Qo(this.comparator)}return o.prototype.has=function(t){return null!==this.data.get(t)},o.prototype.first=function(){return this.data.minKey()},o.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(o.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),o.prototype.indexOf=function(t){return this.data.indexOf(t)},o.prototype.forEach=function(t){this.data.inorderTraversal(function(s,l){return t(s),!1})},o.prototype.forEachInRange=function(t,s){for(var l=this.data.getIteratorFrom(t[0]);l.hasNext();){var p=l.getNext();if(this.comparator(p.key,t[1])>=0)return;s(p.key)}},o.prototype.forEachWhile=function(t,s){var l;for(l=void 0!==s?this.data.getIteratorFrom(s):this.data.getIterator();l.hasNext();)if(!t(l.getNext().key))return},o.prototype.firstAfterOrEqual=function(t){var s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null},o.prototype.getIterator=function(){return new Iu(this.data.getIterator())},o.prototype.getIteratorFrom=function(t){return new Iu(this.data.getIteratorFrom(t))},o.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},o.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},o.prototype.isEmpty=function(){return this.data.isEmpty()},o.prototype.unionWith=function(t){var s=this;return s.size<t.size&&(s=t,t=this),t.forEach(function(l){s=s.add(l)}),s},o.prototype.isEqual=function(t){if(!(t instanceof o)||this.size!==t.size)return!1;for(var s=this.data.getIterator(),l=t.data.getIterator();s.hasNext();){var p=s.getNext().key,v=l.getNext().key;if(0!==this.comparator(p,v))return!1}return!0},o.prototype.toArray=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},o.prototype.toString=function(){var t=[];return this.forEach(function(s){return t.push(s)}),"SortedSet("+t.toString()+")"},o.prototype.copy=function(t){var s=new o(this.comparator);return s.data=t,s},o}(),Iu=function(){function o(t){this.iter=t}return o.prototype.getNext=function(){return this.iter.getNext().key},o.prototype.hasNext=function(){return this.iter.hasNext()},o}(),Mu=new Qo(qn.comparator);function Io(){return Mu}var sl=new Qo(qn.comparator);function lc(){return sl}var ah=new Qo(qn.comparator);function cc(){return ah}var Fl=new vo(qn.comparator);function zr(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];for(var s=Fl,l=0,p=o;l<p.length;l++){var v=p[l];s=s.add(v)}return s}var ua=new vo(xr);function al(){return ua}var yd=function(){function o(t,s,l,p,v){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=l,this.documentUpdates=p,this.resolvedLimboDocuments=v}return o.createSynthesizedRemoteEventForCurrentChange=function(t,s){var l=new Map;return l.set(t,vd.createSynthesizedTargetChangeForCurrentChange(t,s)),new o(R.min(),l,al(),Io(),zr())},o}(),vd=function(){function o(t,s,l,p,v){this.resumeToken=t,this.current=s,this.addedDocuments=l,this.modifiedDocuments=p,this.removedDocuments=v}return o.createSynthesizedTargetChangeForCurrentChange=function(t,s){return new o(rr.EMPTY_BYTE_STRING,s,zr(),zr(),zr())},o}(),dc=function(o,t,s,l){this.v=o,this.removedTargetIds=t,this.key=s,this.P=l},uh=function(o,t){this.targetId=o,this.V=t},lh=function(o,t,s,l){void 0===s&&(s=rr.EMPTY_BYTE_STRING),void 0===l&&(l=null),this.state=o,this.targetIds=t,this.resumeToken=s,this.cause=l},bd=function(){function o(){this.S=0,this.D=hc(),this.C=rr.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(o.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),o.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},o.prototype.M=function(){var t=zr(),s=zr(),l=zr();return this.D.forEach(function(p,v){switch(v){case 0:t=t.add(p);break;case 2:s=s.add(p);break;case 1:l=l.add(p);break;default:Nn()}}),new vd(this.C,this.N,t,s,l)},o.prototype.L=function(){this.k=!1,this.D=hc()},o.prototype.B=function(t,s){this.k=!0,this.D=this.D.insert(t,s)},o.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},o.prototype.U=function(){this.S+=1},o.prototype.K=function(){this.S-=1},o.prototype.j=function(){this.k=!0,this.N=!0},o}(),Nl=function(){function o(t){this.W=t,this.G=new Map,this.H=Io(),this.J=$c(),this.Y=new vo(xr)}return o.prototype.X=function(t){for(var s=0,l=t.v;s<l.length;s++){var p=l[s];t.P&&t.P.isFoundDocument()?this.Z(p,t.P):this.tt(p,t.key,t.P)}for(var v=0,S=t.removedTargetIds;v<S.length;v++)this.tt(p=S[v],t.key,t.P)},o.prototype.et=function(t){var s=this;this.forEachTarget(t,function(l){var p=s.nt(l);switch(t.state){case 0:s.st(l)&&p.O(t.resumeToken);break;case 1:p.K(),p.F||p.L(),p.O(t.resumeToken);break;case 2:p.K(),p.F||s.removeTarget(l);break;case 3:s.st(l)&&(p.j(),p.O(t.resumeToken));break;case 4:s.st(l)&&(s.it(l),p.O(t.resumeToken));break;default:Nn()}})},o.prototype.forEachTarget=function(t,s){var l=this;t.targetIds.length>0?t.targetIds.forEach(s):this.G.forEach(function(p,v){l.st(v)&&s(v)})},o.prototype.rt=function(t){var s=t.targetId,l=t.V.count,p=this.ot(s);if(p){var v=p.target;if(qs(v))if(0===l){var S=new qn(v.path);this.tt(s,S,Sr.newNoDocument(S,R.min()))}else Yn(1===l);else this.ct(s)!==l&&(this.it(s),this.Y=this.Y.add(s))}},o.prototype.ut=function(t){var s=this,l=new Map;this.G.forEach(function(S,F){var J=s.ot(F);if(J){if(S.current&&qs(J.target)){var le=new qn(J.target.path);null!==s.H.get(le)||s.at(F,le)||s.tt(F,le,Sr.newNoDocument(le,t))}S.$&&(l.set(F,S.M()),S.L())}});var p=zr();this.J.forEach(function(S,F){var J=!0;F.forEachWhile(function(le){var pe=s.ot(le);return!pe||2===pe.purpose||(J=!1,!1)}),J&&(p=p.add(S))});var v=new yd(t,l,this.Y,this.H,p);return this.H=Io(),this.J=$c(),this.Y=new vo(xr),v},o.prototype.Z=function(t,s){if(this.st(t)){var l=this.at(t,s.key)?2:0;this.nt(t).B(s.key,l),this.H=this.H.insert(s.key,s),this.J=this.J.insert(s.key,this.ht(s.key).add(t))}},o.prototype.tt=function(t,s,l){if(this.st(t)){var p=this.nt(t);this.at(t,s)?p.B(s,1):p.q(s),this.J=this.J.insert(s,this.ht(s).delete(t)),l&&(this.H=this.H.insert(s,l))}},o.prototype.removeTarget=function(t){this.G.delete(t)},o.prototype.ct=function(t){var s=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size},o.prototype.U=function(t){this.nt(t).U()},o.prototype.nt=function(t){var s=this.G.get(t);return s||(s=new bd,this.G.set(t,s)),s},o.prototype.ht=function(t){var s=this.J.get(t);return s||(s=new vo(xr),this.J=this.J.insert(t,s)),s},o.prototype.st=function(t){var s=null!==this.ot(t);return s||nn("WatchChangeAggregator","Detected inactive target",t),s},o.prototype.ot=function(t){var s=this.G.get(t);return s&&s.F?null:this.W.lt(t)},o.prototype.it=function(t){var s=this;this.G.set(t,new bd),this.W.getRemoteKeysForTarget(t).forEach(function(l){s.tt(t,l,null)})},o.prototype.at=function(t,s){return this.W.getRemoteKeysForTarget(t).has(s)},o}();function $c(){return new Qo(qn.comparator)}function hc(){return new Qo(qn.comparator)}var ch={asc:"ASCENDING",desc:"DESCENDING"},dh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kl=function(o,t){this.databaseId=o,this.I=t};function Jo(o,t){return o.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function Cd(o,t){return o.I?t.toBase64():t.toUint8Array()}function Ds(o,t){return Jo(o,t.toTimestamp())}function Bi(o){return Yn(!!o),R.fromTimestamp((s=Ar(o),new U(s.seconds,s.nanos)));var s}function Ll(o,t){return(s=o,new Ae(["projects",s.projectId,"databases",s.database])).child("documents").child(t).canonicalString();var s}function Ou(o){var t=Ae.fromString(o);return Yn(Ys(t)),t}function ul(o,t){return Ll(o.databaseId,t.path)}function Fa(o,t){var s=Ou(t);if(s.get(1)!==o.databaseId.projectId)throw new Lt(_t.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+o.databaseId.projectId);if(s.get(3)!==o.databaseId.database)throw new Lt(_t.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+o.databaseId.database);return new qn(Ru(s))}function Wc(o,t){return Ll(o.databaseId,t)}function Ed(o){var t=Ou(o);return 4===t.length?Ae.emptyPath():Ru(t)}function la(o){return new Ae(["projects",o.databaseId.projectId,"databases",o.databaseId.database]).canonicalString()}function Ru(o){return Yn(o.length>4&&"documents"===o.get(4)),o.popFirst(5)}function ll(o,t,s){return{name:ul(o,t),fields:s.value.mapValue.fields}}function Bh(o,t,s){var l=Fa(o,t.name),p=Bi(t.updateTime),v=new li({mapValue:{fields:t.fields}}),S=Sr.newFoundDocument(l,p,v);return s&&S.setHasCommittedMutations(),s?S.setHasCommittedMutations():S}function Yc(o,t){var s,p;if(t instanceof Qa)s={update:ll(o,t.key,t.value)};else if(t instanceof aa)s={delete:ul(o,t.key)};else if(t instanceof ws)s={update:ll(o,t.key,t.data),updateMask:_c(t.fieldMask)};else{if(!(t instanceof Ja))return Nn();s={verify:ul(o,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map(function(l){return function(p,v){var S=v.transform;if(S instanceof Eu)return{fieldPath:v.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(S instanceof Ya)return{fieldPath:v.field.canonicalString(),appendMissingElements:{values:S.elements}};if(S instanceof Du)return{fieldPath:v.field.canonicalString(),removeAllFromArray:{values:S.elements}};if(S instanceof as)return{fieldPath:v.field.canonicalString(),increment:S.A};throw Nn()}(0,l)})),t.precondition.isNone||(s.currentDocument=void 0!==(p=t.precondition).updateTime?{updateTime:Ds(o,p.updateTime)}:void 0!==p.exists?{exists:p.exists}:Nn()),s}function cl(o,t){var le,s=t.currentDocument?void 0!==(le=t.currentDocument).updateTime?Ao.updateTime(Bi(le.updateTime)):void 0!==le.exists?Ao.exists(le.exists):Ao.none():Ao.none(),l=t.updateTransforms?t.updateTransforms.map(function(le){return function(pe,Re){var Ge=null;"setToServerValue"in Re?(Yn("REQUEST_TIME"===Re.setToServerValue),Ge=new Eu):"appendMissingElements"in Re?Ge=new Ya(Re.appendMissingElements.values||[]):"removeAllFromArray"in Re?Ge=new Du(Re.removeAllFromArray.values||[]):"increment"in Re?Ge=new as(pe,Re.increment):Nn();var Et=Ct.fromServerFormat(Re.fieldPath);return new Ka(Et,Ge)}(o,le)}):[];if(t.update){var p=Fa(o,t.update.name),v=new li({mapValue:{fields:t.update.fields}});if(t.updateMask){var S=function(le){return new fn((le.fieldPaths||[]).map(function(Re){return Ct.fromServerFormat(Re)}))}(t.updateMask);return new ws(p,v,S,s,l)}return new Qa(p,v,s,l)}if(t.delete){var F=Fa(o,t.delete);return new aa(F,s)}if(t.verify){var J=Fa(o,t.verify);return new Ja(J,s)}return Nn()}function fc(o,t){return{documents:[Wc(o,t.path)]}}function pc(o,t){var s={structuredQuery:{}},l=t.path;null!==t.collectionGroup?(s.parent=Wc(o,l),s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s.parent=Wc(o,l.popLast()),s.structuredQuery.from=[{collectionId:l.lastSegment()}]);var p=function(F){if(0!==F.length){var J=F.map(function(le){return function(pe){if("=="===pe.op){if(Ia(pe.value))return{unaryFilter:{field:Xa(pe.field),op:"IS_NAN"}};if(Qu(pe.value))return{unaryFilter:{field:Xa(pe.field),op:"IS_NULL"}}}else if("!="===pe.op){if(Ia(pe.value))return{unaryFilter:{field:Xa(pe.field),op:"IS_NOT_NAN"}};if(Qu(pe.value))return{unaryFilter:{field:Xa(pe.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(pe.field),op:ca(pe.op),value:pe.value}}}(le)});return 1===J.length?J[0]:{compositeFilter:{op:"AND",filters:J}}}}(t.filters);p&&(s.structuredQuery.where=p);var v=function(F){if(0!==F.length)return F.map(function(J){return{field:Xa((le=J).field),direction:mc(le.dir)};var le})}(t.orderBy);v&&(s.structuredQuery.orderBy=v);var J,S=(J=t.limit,o.I||Wo(J)?J:{value:J});return null!==S&&(s.structuredQuery.limit=S),t.startAt&&(s.structuredQuery.startAt=gc(t.startAt)),t.endAt&&(s.structuredQuery.endAt=gc(t.endAt)),s}function Kc(o){var t=Ed(o.parent),s=o.structuredQuery,l=s.from?s.from.length:0,p=null;if(l>0){Yn(1===l);var v=s.from[0];v.allDescendants?p=v.collectionId:t=t.child(v.collectionId)}var S=[];s.where&&(S=Qc(s.where));var F=[];s.orderBy&&(F=s.orderBy.map(function(Re){return new Ju(qr((Ge=Re).field),function(ft){switch(ft){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ge.direction));var Ge}));var Re,Ge,J=null;s.limit&&(J=Wo(Ge="object"==typeof(Re=s.limit)?Re.value:Re)?null:Ge);var le=null;s.startAt&&(le=Xo(s.startAt));var pe=null;return s.endAt&&(pe=Xo(s.endAt)),_u(t,p,F,S,J,"F",le,pe)}function Qc(o){return o?void 0!==o.unaryFilter?[wd(o)]:void 0!==o.fieldFilter?[Vl(o)]:void 0!==o.compositeFilter?o.compositeFilter.filters.map(function(t){return Qc(t)}).reduce(function(t,s){return t.concat(s)}):Nn():[]}function gc(o){return{before:o.before,values:o.position}}function Xo(o){return new Ps(o.values||[],!!o.before)}function mc(o){return ch[o]}function ca(o){return dh[o]}function Xa(o){return{fieldPath:o.canonicalString()}}function qr(o){return Ct.fromServerFormat(o.fieldPath)}function Vl(o){return So.create(qr(o.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Nn()}}(o.fieldFilter.op),o.fieldFilter.value)}function wd(o){switch(o.unaryFilter.op){case"IS_NAN":var t=qr(o.unaryFilter.field);return So.create(t,"==",{doubleValue:NaN});case"IS_NULL":var s=qr(o.unaryFilter.field);return So.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var l=qr(o.unaryFilter.field);return So.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var p=qr(o.unaryFilter.field);return So.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Nn()}}function _c(o){var t=[];return o.fields.forEach(function(s){return t.push(s.canonicalString())}),{fieldPaths:t}}function Ys(o){return o.length>=4&&"projects"===o.get(0)&&"databases"===o.get(2)}function Ks(o){for(var t="",s=0;s<o.length;s++)t.length>0&&(t=yc(t)),t=Dd(o.get(s),t);return yc(t)}function Dd(o,t){for(var s=t,l=o.length,p=0;p<l;p++){var v=o.charAt(p);switch(v){case"\0":s+="\x01\x10";break;case"\x01":s+="\x01\x11";break;default:s+=v}}return s}function yc(o){return o+"\x01\x01"}function da(o){var t=o.length;if(Yn(t>=2),2===t)return Yn("\x01"===o.charAt(0)&&"\x01"===o.charAt(1)),Ae.emptyPath();for(var s=t-2,l=[],p="",v=0;v<t;){var S=o.indexOf("\x01",v);switch((S<0||S>s)&&Nn(),o.charAt(S+1)){case"\x01":var F=o.substring(v,S),J=void 0;0===p.length?J=F:(J=p+=F,p=""),l.push(J);break;case"\x10":p+=o.substring(v,S),p+="\0";break;case"\x11":p+=o.substring(v,S+1);break;default:Nn()}v=S+2}return new Ae(l)}var xu=function(o,t){this.seconds=o,this.nanoseconds=t},Ts=function(o,t,s){this.ownerId=o,this.allowTabSynchronization=t,this.leaseTimestampMs=s};Ts.store="owner",Ts.key="owner";var eu=function(o,t,s){this.userId=o,this.lastAcknowledgedBatchId=t,this.lastStreamToken=s};eu.store="mutationQueues",eu.keyPath="userId";var mi=function(o,t,s,l,p){this.userId=o,this.batchId=t,this.localWriteTimeMs=s,this.baseMutations=l,this.mutations=p};mi.store="mutations",mi.keyPath="batchId",mi.userMutationsIndex="userMutationsIndex",mi.userMutationsKeyPath=["userId","batchId"];var ni=function(){function o(){}return o.prefixForUser=function(t){return[t]},o.prefixForPath=function(t,s){return[t,Ks(s)]},o.key=function(t,s,l){return[t,Ks(s),l]},o}();ni.store="documentMutations",ni.PLACEHOLDER=new ni;var Pu=function(o,t){this.path=o,this.readTime=t},vc=function(o,t){this.path=o,this.version=t},ji=function(o,t,s,l,p,v){this.unknownDocument=o,this.noDocument=t,this.document=s,this.hasCommittedMutations=l,this.readTime=p,this.parentPath=v};ji.store="remoteDocuments",ji.readTimeIndex="readTimeIndex",ji.readTimeIndexPath="readTime",ji.collectionReadTimeIndex="collectionReadTimeIndex",ji.collectionReadTimeIndexPath=["parentPath","readTime"];var wi=function(o){this.byteSize=o};wi.store="remoteDocumentGlobal",wi.key="remoteDocumentGlobalKey";var Mo=function(o,t,s,l,p,v,S){this.targetId=o,this.canonicalId=t,this.readTime=s,this.resumeToken=l,this.lastListenSequenceNumber=p,this.lastLimboFreeSnapshotVersion=v,this.query=S};Mo.store="targets",Mo.keyPath="targetId",Mo.queryTargetsIndexName="queryTargetsIndex",Mo.queryTargetsKeyPath=["canonicalId","targetId"];var io=function(o,t,s){this.targetId=o,this.path=t,this.sequenceNumber=s};io.store="targetDocuments",io.keyPath=["targetId","path"],io.documentTargetsIndex="documentTargetsIndex",io.documentTargetsKeyPath=["path","targetId"];var ps=function(o,t,s,l){this.highestTargetId=o,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=s,this.targetCount=l};ps.key="targetGlobalKey",ps.store="targetGlobal";var xo=function(o,t){this.collectionId=o,this.parent=t};xo.store="collectionParents",xo.keyPath=["collectionId","parent"];var Qs=function(o,t,s,l){this.clientId=o,this.updateTimeMs=t,this.networkEnabled=s,this.inForeground=l};Qs.store="clientMetadata",Qs.keyPath="clientId";var dl=function(o,t,s){this.bundleId=o,this.createTime=t,this.version=s};dl.store="bundles",dl.keyPath="bundleId";var Fu=function(o,t,s){this.name=o,this.readTime=t,this.bundledQuery=s};Fu.store="namedQueries",Fu.keyPath="name";var jh=(0,re.ev)((0,re.ev)([],(0,re.ev)((0,re.ev)([],(0,re.ev)((0,re.ev)([],(0,re.ev)((0,re.ev)([],[eu.store,mi.store,ni.store,ji.store,Mo.store,Ts.store,ps.store,io.store]),[Qs.store])),[wi.store])),[xo.store])),[dl.store,Fu.store]),bc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Td=function(){function o(){this.onCommittedListeners=[]}return o.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},o.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},o}(),es=function(){var o=this;this.promise=new Promise(function(t,s){o.resolve=t,o.reject=s})},$t=function(){function o(t){var s=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(l){s.isDone=!0,s.result=l,s.nextCallback&&s.nextCallback(l)},function(l){s.isDone=!0,s.error=l,s.catchCallback&&s.catchCallback(l)})}return o.prototype.catch=function(t){return this.next(void 0,t)},o.prototype.next=function(t,s){var l=this;return this.callbackAttached&&Nn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new o(function(p,v){l.nextCallback=function(S){l.wrapSuccess(t,S).next(p,v)},l.catchCallback=function(S){l.wrapFailure(s,S).next(p,v)}})},o.prototype.toPromise=function(){var t=this;return new Promise(function(s,l){t.next(s,l)})},o.prototype.wrapUserFunction=function(t){try{var s=t();return s instanceof o?s:o.resolve(s)}catch(l){return o.reject(l)}},o.prototype.wrapSuccess=function(t,s){return t?this.wrapUserFunction(function(){return t(s)}):o.resolve(s)},o.prototype.wrapFailure=function(t,s){return t?this.wrapUserFunction(function(){return t(s)}):o.reject(s)},o.resolve=function(t){return new o(function(s,l){s(t)})},o.reject=function(t){return new o(function(s,l){l(t)})},o.waitFor=function(t){return new o(function(s,l){var p=0,v=0,S=!1;t.forEach(function(F){++p,F.next(function(){++v,S&&v===p&&s()},function(J){return l(J)})}),S=!0,v===p&&s()})},o.or=function(t){for(var s=o.resolve(!1),l=function(S){s=s.next(function(F){return F?o.resolve(F):S()})},p=0,v=t;p<v.length;p++)l(v[p]);return s},o.forEach=function(t,s){var l=this,p=[];return t.forEach(function(v,S){p.push(s.call(l,v,S))}),this.waitFor(p)},o}(),Jc=function(){function o(t,s){var l=this;this.action=t,this.transaction=s,this.aborted=!1,this.ft=new es,this.transaction.oncomplete=function(){l.ft.resolve()},this.transaction.onabort=function(){s.error?l.ft.reject(new Ul(t,s.error)):l.ft.resolve()},this.transaction.onerror=function(p){var v=Id(p.target.error);l.ft.reject(new Ul(t,v))}}return o.open=function(t,s,l,p){try{return new o(s,t.transaction(p,l))}catch(v){throw new Ul(s,v)}},Object.defineProperty(o.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),o.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(nn("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},o.prototype.store=function(t){var s=this.transaction.objectStore(t);return new Ad(s)},o}(),tu=function(){function o(t,s,l){this.name=t,this.version=s,this.wt=l,12.2===o._t((0,Ke.z$)())&&Oi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return o.delete=function(t){return nn("SimpleDb","Removing database:",t),Js(window.indexedDB.deleteDatabase(t)).toPromise()},o.yt=function(){if("undefined"==typeof indexedDB)return!1;if(o.gt())return!0;var t=(0,Ke.z$)(),s=o._t(t),l=0<s&&s<10,p=o.Et(t),v=0<p&&p<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||l||v)},o.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},o.It=function(t,s){return t.store(s)},o._t=function(t){var s=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),l=s?s[1].split("_").slice(0,2).join("."):"-1";return Number(l)},o.Et=function(t){var s=t.match(/Android ([\d.]+)/i),l=s?s[1].split(".").slice(0,2).join("."):"-1";return Number(l)},o.prototype.At=function(t){return(0,re.mG)(this,void 0,void 0,function(){var s,l=this;return(0,re.Jh)(this,function(p){switch(p.label){case 0:return this.db?[3,2]:(nn("SimpleDb","Opening database:",this.name),s=this,[4,new Promise(function(v,S){var F=indexedDB.open(l.name,l.version);F.onsuccess=function(J){v(J.target.result)},F.onblocked=function(){S(new Ul(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},F.onerror=function(J){var le=J.target.error;S("VersionError"===le.name?new Lt(_t.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ul(t,le))},F.onupgradeneeded=function(J){nn("SimpleDb",'Database "'+l.name+'" requires upgrade from version:',J.oldVersion),l.wt.Rt(J.target.result,F.transaction,J.oldVersion,l.version).next(function(){nn("SimpleDb","Database upgrade to version "+l.version+" complete")})}})]);case 1:s.db=p.sent(),p.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(v){return l.bt(v)}),this.db)]}})})},o.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(s){return t(s)})},o.prototype.runTransaction=function(t,s,l,p){return(0,re.mG)(this,void 0,void 0,function(){var v,S,F,J,le;return(0,re.Jh)(this,function(pe){switch(pe.label){case 0:v="readonly"===s,S=0,F=function(){var Re,Ge,ft,ct,Et;return(0,re.Jh)(this,function(en){switch(en.label){case 0:++S,en.label=1;case 1:return en.trys.push([1,4,,5]),[4,J.At(t)];case 2:return J.db=en.sent(),Re=Jc.open(J.db,t,v?"readonly":"readwrite",l),Ge=p(Re).catch(function(pn){return Re.abort(pn),$t.reject(pn)}).toPromise(),ft={},Ge.catch(function(){}),[4,Re.dt];case 3:return[2,(ft.value=(en.sent(),Ge),ft)];case 4:return nn("SimpleDb","Transaction failed with error:",(ct=en.sent()).message,"Retrying:",Et="FirebaseError"!==ct.name&&S<3),J.close(),Et?[3,5]:[2,{value:Promise.reject(ct)}];case 5:return[2]}})},J=this,pe.label=1;case 1:return[5,F()];case 2:if("object"==typeof(le=pe.sent()))return[2,le.value];pe.label=3;case 3:return[3,1];case 4:return[2]}})})},o.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},o}(),Sd=function(){function o(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(o.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),o.prototype.done=function(){this.Vt=!0},o.prototype.Ct=function(t){this.St=t},o.prototype.delete=function(){return Js(this.Pt.delete())},o}(),Ul=function(o){function t(s,l){var p=this;return(p=o.call(this,_t.UNAVAILABLE,"IndexedDB transaction '"+s+"' failed: "+l)||this).name="IndexedDbTransactionError",p}return(0,re.ZT)(t,o),t}(Lt);function hl(o){return"IndexedDbTransactionError"===o.name}var Ad=function(){function o(t){this.store=t}return o.prototype.put=function(t,s){var l;return void 0!==s?(nn("SimpleDb","PUT",this.store.name,t,s),l=this.store.put(s,t)):(nn("SimpleDb","PUT",this.store.name,"<auto-key>",t),l=this.store.put(t)),Js(l)},o.prototype.add=function(t){return nn("SimpleDb","ADD",this.store.name,t,t),Js(this.store.add(t))},o.prototype.get=function(t){var s=this;return Js(this.store.get(t)).next(function(l){return void 0===l&&(l=null),nn("SimpleDb","GET",s.store.name,t,l),l})},o.prototype.delete=function(t){return nn("SimpleDb","DELETE",this.store.name,t),Js(this.store.delete(t))},o.prototype.count=function(){return nn("SimpleDb","COUNT",this.store.name),Js(this.store.count())},o.prototype.Nt=function(t,s){var l=this.cursor(this.options(t,s)),p=[];return this.xt(l,function(v,S){p.push(S)}).next(function(){return p})},o.prototype.kt=function(t,s){nn("SimpleDb","DELETE ALL",this.store.name);var l=this.options(t,s);l.Ft=!1;var p=this.cursor(l);return this.xt(p,function(v,S,F){return F.delete()})},o.prototype.$t=function(t,s){var l;s?l=t:(l={},s=t);var p=this.cursor(l);return this.xt(p,s)},o.prototype.Ot=function(t){var s=this.cursor({});return new $t(function(l,p){s.onerror=function(v){var S=Id(v.target.error);p(S)},s.onsuccess=function(v){var S=v.target.result;S?t(S.primaryKey,S.value).next(function(F){F?S.continue():l()}):l()}})},o.prototype.xt=function(t,s){var l=[];return new $t(function(p,v){t.onerror=function(S){v(S.target.error)},t.onsuccess=function(S){var F=S.target.result;if(F){var J=new Sd(F),le=s(F.primaryKey,F.value,J);if(le instanceof $t){var pe=le.catch(function(Re){return J.done(),$t.reject(Re)});l.push(pe)}J.isDone?p():null===J.Dt?F.continue():F.continue(J.Dt)}else p()}}).next(function(){return $t.waitFor(l)})},o.prototype.options=function(t,s){var l;return void 0!==t&&("string"==typeof t?l=t:s=t),{index:l,range:s}},o.prototype.cursor=function(t){var s="next";if(t.reverse&&(s="prev"),t.index){var l=this.store.index(t.index);return t.Ft?l.openKeyCursor(t.range,s):l.openCursor(t.range,s)}return this.store.openCursor(t.range,s)},o}();function Js(o){return new $t(function(t,s){o.onsuccess=function(l){t(l.target.result)},o.onerror=function(l){var p=Id(l.target.error);s(p)}})}var hh=!1;function Id(o){var t=tu._t((0,Ke.z$)());if(t>=12.2&&t<13){var s="An internal error was encountered in the Indexed Database server";if(o.message.indexOf(s)>=0){var l=new Lt("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+s+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return hh||(hh=!0,setTimeout(function(){throw l},0)),l}}return o}var fl=function(o){function t(s,l){var p=this;return(p=o.call(this)||this).Mt=s,p.currentSequenceNumber=l,p}return(0,re.ZT)(t,o),t}(Td);function us(o,t){var s=an(o);return tu.It(s.Mt,t)}var Nu=function(){function o(t,s,l,p){this.batchId=t,this.localWriteTime=s,this.baseMutations=l,this.mutations=p}return o.prototype.applyToRemoteDocument=function(t,s){for(var l=s.mutationResults,p=0;p<this.mutations.length;p++){var v=this.mutations[p];v.key.isEqual(t.key)&&Pl(v,t,l[p])}},o.prototype.applyToLocalView=function(t){for(var s=0,l=this.baseMutations;s<l.length;s++)(S=l[s]).key.isEqual(t.key)&&ol(S,t,this.localWriteTime);for(var p=0,v=this.mutations;p<v.length;p++){var S;(S=v[p]).key.isEqual(t.key)&&ol(S,t,this.localWriteTime)}},o.prototype.applyToLocalDocumentSet=function(t){var s=this;this.mutations.forEach(function(l){var p=t.get(l.key),v=p;s.applyToLocalView(v),p.isValidDocument()||v.convertToNoDocument(R.min())})},o.prototype.keys=function(){return this.mutations.reduce(function(t,s){return t.add(s.key)},zr())},o.prototype.isEqual=function(t){return this.batchId===t.batchId&&za(this.mutations,t.mutations,function(s,l){return sa(s,l)})&&za(this.baseMutations,t.baseMutations,function(s,l){return sa(s,l)})},o}(),pl=function(){function o(t,s,l,p){this.batch=t,this.commitVersion=s,this.mutationResults=l,this.docVersions=p}return o.from=function(t,s,l){Yn(t.mutations.length===l.length);for(var p=cc(),v=t.mutations,S=0;S<v.length;S++)p=p.insert(v[S].key,l[S].version);return new o(t,s,l,p)},o}(),Cc=function(){function o(t,s,l,p,v,S,F){void 0===v&&(v=R.min()),void 0===S&&(S=R.min()),void 0===F&&(F=rr.EMPTY_BYTE_STRING),this.target=t,this.targetId=s,this.purpose=l,this.sequenceNumber=p,this.snapshotVersion=v,this.lastLimboFreeSnapshotVersion=S,this.resumeToken=F}return o.prototype.withSequenceNumber=function(t){return new o(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},o.prototype.withResumeToken=function(t,s){return new o(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t)},o.prototype.withLastLimboFreeSnapshotVersion=function(t){return new o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},o}(),Ns=function(o){this.Lt=o};function ku(o,t){if(t.document)return Bh(o.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var s=qn.fromSegments(t.noDocument.path),l=Vu(t.noDocument.readTime),p=Sr.newNoDocument(s,l);return t.hasCommittedMutations?p.setHasCommittedMutations():p}if(t.unknownDocument){var v=qn.fromSegments(t.unknownDocument.path);return l=Vu(t.unknownDocument.version),Sr.newUnknownDocument(v,l)}return Nn()}function Po(o,t,s){var Re,Ge,l=gl(s),p=t.key.path.popLast().toArray();if(t.isFoundDocument()){var v={name:ul(Re=o.Lt,(Ge=t).key),fields:Ge.data.value.mapValue.fields,updateTime:Jo(Re,Ge.version.toTimestamp())},S=t.hasCommittedMutations;return new ji(null,null,v,S,l,p)}if(t.isNoDocument()){var F=t.key.path.toArray(),J=Lu(t.version);return S=t.hasCommittedMutations,new ji(null,new Pu(F,J),null,S,l,p)}if(t.isUnknownDocument()){var le=t.key.path.toArray(),pe=Lu(t.version);return new ji(new vc(le,pe),null,null,!0,l,p)}return Nn()}function gl(o){var t=o.toTimestamp();return[t.seconds,t.nanoseconds]}function Md(o){var t=new U(o[0],o[1]);return R.fromTimestamp(t)}function Lu(o){var t=o.toTimestamp();return new xu(t.seconds,t.nanoseconds)}function Vu(o){var t=new U(o.seconds,o.nanoseconds);return R.fromTimestamp(t)}function Bl(o,t){for(var s=(t.baseMutations||[]).map(function(J){return cl(o.Lt,J)}),l=0;l<t.mutations.length-1;++l)l+1<t.mutations.length&&void 0!==t.mutations[l+1].transform&&(t.mutations[l].updateTransforms=t.mutations[l+1].transform.fieldTransforms,t.mutations.splice(l+1,1),++l);var S=t.mutations.map(function(J){return cl(o.Lt,J)}),F=U.fromMillis(t.localWriteTimeMs);return new Nu(t.batchId,F,s,S)}function ml(o){var t,s,l=Vu(o.readTime),p=void 0!==o.lastLimboFreeSnapshotVersion?Vu(o.lastLimboFreeSnapshotVersion):R.min();return void 0!==o.query.documents?(Yn(1===(s=o.query).documents.length),t=Bo(yu(Ed(s.documents[0])))):t=Bo(Kc(o.query)),new Cc(t,o.targetId,0,o.lastListenSequenceNumber,l,p,rr.fromBase64String(o.resumeToken))}function Xc(o,t){var s,l=Lu(t.snapshotVersion),p=Lu(t.lastLimboFreeSnapshotVersion);s=qs(t.target)?fc(o.Lt,t.target):pc(o.Lt,t.target);var v=t.resumeToken.toBase64();return new Mo(t.targetId,Ko(t.target),l,v,t.sequenceNumber,p,s)}function Od(o){var t=Kc({parent:o.parent,structuredQuery:o.structuredQuery});return"LAST"===o.limitType?jc(t,t.limit,"L"):t}var fh=function(){function o(){}return o.prototype.getBundleMetadata=function(t,s){return Uu(t).get(s).next(function(l){if(l)return{id:(p=l).bundleId,createTime:Vu(p.createTime),version:p.version};var p})},o.prototype.saveBundleMetadata=function(t,s){return Uu(t).put({bundleId:(l=s).id,createTime:Lu(Bi(l.createTime)),version:l.version});var l},o.prototype.getNamedQuery=function(t,s){return Xs(t).get(s).next(function(l){if(l)return{name:(p=l).name,query:Od(p.bundledQuery),readTime:Vu(p.readTime)};var p})},o.prototype.saveNamedQuery=function(t,s){return Xs(t).put({name:(l=s).name,readTime:Lu(Bi(l.readTime)),bundledQuery:l.bundledQuery});var l},o}();function Uu(o){return us(o,dl.store)}function Xs(o){return us(o,Fu.store)}var Hh=function(){function o(){this.Bt=new Rd}return o.prototype.addToCollectionParentIndex=function(t,s){return this.Bt.add(s),$t.resolve()},o.prototype.getCollectionParents=function(t,s){return $t.resolve(this.Bt.getEntries(s))},o}(),Rd=function(){function o(){this.index={}}return o.prototype.add=function(t){var s=t.lastSegment(),l=t.popLast(),p=this.index[s]||new vo(Ae.comparator),v=!p.has(l);return this.index[s]=p.add(l),v},o.prototype.has=function(t){var s=t.lastSegment(),l=t.popLast(),p=this.index[s];return p&&p.has(l)},o.prototype.getEntries=function(t){return(this.index[t]||new vo(Ae.comparator)).toArray()},o}(),xd=function(){function o(){this.qt=new Rd}return o.prototype.addToCollectionParentIndex=function(t,s){var l=this;if(!this.qt.has(s)){var p=s.lastSegment(),v=s.popLast();t.addOnCommittedListener(function(){l.qt.add(s)});var S={collectionId:p,parent:Ks(v)};return ph(t).put(S)}return $t.resolve()},o.prototype.getCollectionParents=function(t,s){var l=[],p=IDBKeyRange.bound([s,""],[qa(s),""],!1,!0);return ph(t).Nt(p).next(function(v){for(var S=0,F=v;S<F.length;S++){var J=F[S];if(J.collectionId!==s)break;l.push(da(J.parent))}return l})},o}();function ph(o){return us(o,xo.store)}var ea={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ks=function(){function o(t,s,l){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=l}return o.withCacheSize=function(t){return new o(t,o.DEFAULT_COLLECTION_PERCENTILE,o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},o}();function nu(o,t,s){var l=o.store(mi.store),p=o.store(ni.store),v=[],S=IDBKeyRange.only(s.batchId),F=0,J=l.$t({range:S},function(ct,Et,en){return F++,en.delete()});v.push(J.next(function(){Yn(1===F)}));for(var le=[],pe=0,Re=s.mutations;pe<Re.length;pe++){var Ge=Re[pe],ft=ni.key(t,Ge.key.path,s.batchId);v.push(p.delete(ft)),le.push(Ge.key)}return $t.waitFor(v).next(function(){return le})}function jl(o){if(!o)return 0;var t;if(o.document)t=o.document;else if(o.unknownDocument)t=o.unknownDocument;else{if(!o.noDocument)throw Nn();t=o.noDocument}return JSON.stringify(t).length}ks.DEFAULT_COLLECTION_PERCENTILE=10,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ks.DEFAULT=new ks(41943040,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ks.DISABLED=new ks(-1,0,0);var ru=function(){function o(t,s,l,p){this.userId=t,this.R=s,this.Ut=l,this.referenceDelegate=p,this.Kt={}}return o.Qt=function(t,s,l,p){return Yn(""!==t.uid),new o(t.isAuthenticated()?t.uid:"",s,l,p)},o.prototype.checkEmpty=function(t){var s=!0,l=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fa(t).$t({index:mi.userMutationsIndex,range:l},function(p,v,S){s=!1,S.done()}).next(function(){return s})},o.prototype.addMutationBatch=function(t,s,l,p){var v=this,S=_l(t),F=fa(t);return F.add({}).next(function(J){Yn("number"==typeof J);for(var le=new Nu(J,s,l,p),pe=function(pn,er,tr){var Wr=tr.baseMutations.map(function(Ni){return Yc(pn.Lt,Ni)}),ci=tr.mutations.map(function(Ni){return Yc(pn.Lt,Ni)});return new mi(er,tr.batchId,tr.localWriteTime.toMillis(),Wr,ci)}(v.R,v.userId,le),Re=[],Ge=new vo(function(pn,er){return xr(pn.canonicalString(),er.canonicalString())}),ft=0,ct=p;ft<ct.length;ft++){var Et=ct[ft],en=ni.key(v.userId,Et.key.path,J);Ge=Ge.add(Et.key.path.popLast()),Re.push(F.put(pe)),Re.push(S.put(en,ni.PLACEHOLDER))}return Ge.forEach(function(pn){Re.push(v.Ut.addToCollectionParentIndex(t,pn))}),t.addOnCommittedListener(function(){v.Kt[J]=le.keys()}),$t.waitFor(Re).next(function(){return le})})},o.prototype.lookupMutationBatch=function(t,s){var l=this;return fa(t).get(s).next(function(p){return p?(Yn(p.userId===l.userId),Bl(l.R,p)):null})},o.prototype.jt=function(t,s){var l=this;return this.Kt[s]?$t.resolve(this.Kt[s]):this.lookupMutationBatch(t,s).next(function(p){if(p){var v=p.keys();return l.Kt[s]=v,v}return null})},o.prototype.getNextMutationBatchAfterBatchId=function(t,s){var l=this,p=s+1,v=IDBKeyRange.lowerBound([this.userId,p]),S=null;return fa(t).$t({index:mi.userMutationsIndex,range:v},function(F,J,le){J.userId===l.userId&&(Yn(J.batchId>=p),S=Bl(l.R,J)),le.done()}).next(function(){return S})},o.prototype.getHighestUnacknowledgedBatchId=function(t){var s=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),l=-1;return fa(t).$t({index:mi.userMutationsIndex,range:s,reverse:!0},function(p,v,S){l=v.batchId,S.done()}).next(function(){return l})},o.prototype.getAllMutationBatches=function(t){var s=this,l=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fa(t).Nt(mi.userMutationsIndex,l).next(function(p){return p.map(function(v){return Bl(s.R,v)})})},o.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,s){var l=this,p=ni.prefixForPath(this.userId,s.path),v=IDBKeyRange.lowerBound(p),S=[];return _l(t).$t({range:v},function(F,J,le){var pe=F[0],Ge=F[2],ft=da(F[1]);if(pe===l.userId&&s.path.isEqual(ft))return fa(t).get(Ge).next(function(ct){if(!ct)throw Nn();Yn(ct.userId===l.userId),S.push(Bl(l.R,ct))});le.done()}).next(function(){return S})},o.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,s){var l=this,p=new vo(xr),v=[];return s.forEach(function(S){var F=ni.prefixForPath(l.userId,S.path),J=IDBKeyRange.lowerBound(F),le=_l(t).$t({range:J},function(pe,Re,Ge){var ft=pe[0],Et=pe[2],en=da(pe[1]);ft===l.userId&&S.path.isEqual(en)?p=p.add(Et):Ge.done()});v.push(le)}),$t.waitFor(v).next(function(){return l.Wt(t,p)})},o.prototype.getAllMutationBatchesAffectingQuery=function(t,s){var l=this,p=s.path,v=p.length+1,S=ni.prefixForPath(this.userId,p),F=IDBKeyRange.lowerBound(S),J=new vo(xr);return _l(t).$t({range:F},function(le,pe,Re){var Ge=le[0],ct=le[2],Et=da(le[1]);Ge===l.userId&&p.isPrefixOf(Et)?Et.length===v&&(J=J.add(ct)):Re.done()}).next(function(){return l.Wt(t,J)})},o.prototype.Wt=function(t,s){var l=this,p=[],v=[];return s.forEach(function(S){v.push(fa(t).get(S).next(function(F){if(null===F)throw Nn();Yn(F.userId===l.userId),p.push(Bl(l.R,F))}))}),$t.waitFor(v).next(function(){return p})},o.prototype.removeMutationBatch=function(t,s){var l=this;return nu(t.Mt,this.userId,s).next(function(p){return t.addOnCommittedListener(function(){l.Gt(s.batchId)}),$t.forEach(p,function(v){return l.referenceDelegate.markPotentiallyOrphaned(t,v)})})},o.prototype.Gt=function(t){delete this.Kt[t]},o.prototype.performConsistencyCheck=function(t){var s=this;return this.checkEmpty(t).next(function(l){if(!l)return $t.resolve();var p=IDBKeyRange.lowerBound(ni.prefixForUser(s.userId)),v=[];return _l(t).$t({range:p},function(S,F,J){if(S[0]===s.userId){var le=da(S[1]);v.push(le)}else J.done()}).next(function(){Yn(0===v.length)})})},o.prototype.containsKey=function(t,s){return ha(t,this.userId,s)},o.prototype.zt=function(t){var s=this;return Ec(t).get(this.userId).next(function(l){return l||new eu(s.userId,-1,"")})},o}();function ha(o,t,s){var l=ni.prefixForPath(t,s.path),p=l[1],v=IDBKeyRange.lowerBound(l),S=!1;return _l(o).$t({range:v,Ft:!0},function(F,J,le){F[0]===t&&F[1]===p&&(S=!0),le.done()}).next(function(){return S})}function fa(o){return us(o,mi.store)}function _l(o){return us(o,ni.store)}function Ec(o){return us(o,eu.store)}var Bu=function(){function o(t){this.Ht=t}return o.prototype.next=function(){return this.Ht+=2,this.Ht},o.Jt=function(){return new o(0)},o.Yt=function(){return new o(-1)},o}(),gh=function(){function o(t,s){this.referenceDelegate=t,this.R=s}return o.prototype.allocateTargetId=function(t){var s=this;return this.Xt(t).next(function(l){var p=new Bu(l.highestTargetId);return l.highestTargetId=p.next(),s.Zt(t,l).next(function(){return l.highestTargetId})})},o.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(s){return R.fromTimestamp(new U(s.lastRemoteSnapshotVersion.seconds,s.lastRemoteSnapshotVersion.nanoseconds))})},o.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(s){return s.highestListenSequenceNumber})},o.prototype.setTargetsMetadata=function(t,s,l){var p=this;return this.Xt(t).next(function(v){return v.highestListenSequenceNumber=s,l&&(v.lastRemoteSnapshotVersion=l.toTimestamp()),s>v.highestListenSequenceNumber&&(v.highestListenSequenceNumber=s),p.Zt(t,v)})},o.prototype.addTargetData=function(t,s){var l=this;return this.te(t,s).next(function(){return l.Xt(t).next(function(p){return p.targetCount+=1,l.ee(s,p),l.Zt(t,p)})})},o.prototype.updateTargetData=function(t,s){return this.te(t,s)},o.prototype.removeTargetData=function(t,s){var l=this;return this.removeMatchingKeysForTargetId(t,s.targetId).next(function(){return wc(t).delete(s.targetId)}).next(function(){return l.Xt(t)}).next(function(p){return Yn(p.targetCount>0),p.targetCount-=1,l.Zt(t,p)})},o.prototype.removeTargets=function(t,s,l){var p=this,v=0,S=[];return wc(t).$t(function(F,J){var le=ml(J);le.sequenceNumber<=s&&null===l.get(le.targetId)&&(v++,S.push(p.removeTargetData(t,le)))}).next(function(){return $t.waitFor(S)}).next(function(){return v})},o.prototype.forEachTarget=function(t,s){return wc(t).$t(function(l,p){var v=ml(p);s(v)})},o.prototype.Xt=function(t){return ju(t).get(ps.key).next(function(s){return Yn(null!==s),s})},o.prototype.Zt=function(t,s){return ju(t).put(ps.key,s)},o.prototype.te=function(t,s){return wc(t).put(Xc(this.R,s))},o.prototype.ee=function(t,s){var l=!1;return t.targetId>s.highestTargetId&&(s.highestTargetId=t.targetId,l=!0),t.sequenceNumber>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t.sequenceNumber,l=!0),l},o.prototype.getTargetCount=function(t){return this.Xt(t).next(function(s){return s.targetCount})},o.prototype.getTargetData=function(t,s){var l=Ko(s),p=IDBKeyRange.bound([l,Number.NEGATIVE_INFINITY],[l,Number.POSITIVE_INFINITY]),v=null;return wc(t).$t({range:p,index:Mo.queryTargetsIndexName},function(S,F,J){var le=ml(F);_o(s,le.target)&&(v=le,J.done())}).next(function(){return v})},o.prototype.addMatchingKeys=function(t,s,l){var p=this,v=[],S=pa(t);return s.forEach(function(F){var J=Ks(F.path);v.push(S.put(new io(l,J))),v.push(p.referenceDelegate.addReference(t,l,F))}),$t.waitFor(v)},o.prototype.removeMatchingKeys=function(t,s,l){var p=this,v=pa(t);return $t.forEach(s,function(S){var F=Ks(S.path);return $t.waitFor([v.delete([l,F]),p.referenceDelegate.removeReference(t,l,S)])})},o.prototype.removeMatchingKeysForTargetId=function(t,s){var l=pa(t),p=IDBKeyRange.bound([s],[s+1],!1,!0);return l.delete(p)},o.prototype.getMatchingKeysForTargetId=function(t,s){var l=IDBKeyRange.bound([s],[s+1],!1,!0),p=pa(t),v=zr();return p.$t({range:l,Ft:!0},function(S,F,J){var le=da(S[1]),pe=new qn(le);v=v.add(pe)}).next(function(){return v})},o.prototype.containsKey=function(t,s){var l=Ks(s.path),p=IDBKeyRange.bound([l],[qa(l)],!1,!0),v=0;return pa(t).$t({index:io.documentTargetsIndex,Ft:!0,range:p},function(S,F,J){0!==S[0]&&(v++,J.done())}).next(function(){return v>0})},o.prototype.lt=function(t,s){return wc(t).get(s).next(function(l){return l?ml(l):null})},o}();function wc(o){return us(o,Mo.store)}function ju(o){return us(o,ps.store)}function pa(o){return us(o,io.store)}function iu(o){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(t){if(o.code!==_t.FAILED_PRECONDITION||o.message!==bc)throw o;return nn("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Pd(o,t){var l=o[1],v=t[1],S=xr(o[0],t[0]);return 0===S?xr(l,v):S}var Fd=function(){function o(t){this.ne=t,this.buffer=new vo(Pd),this.se=0}return o.prototype.ie=function(){return++this.se},o.prototype.re=function(t){var s=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(s);else{var l=this.buffer.last();Pd(s,l)<0&&(this.buffer=this.buffer.delete(l).add(s))}},Object.defineProperty(o.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),o}(),mh=function(){function o(t,s){this.garbageCollector=t,this.asyncQueue=s,this.oe=!1,this.ce=null}return o.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},o.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(o.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),o.prototype.ue=function(t){var s=this,l=this.oe?3e5:6e4;nn("LruGarbageCollector","Garbage collection scheduled in "+l+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",l,function(){return(0,re.mG)(s,void 0,void 0,function(){var p;return(0,re.Jh)(this,function(v){switch(v.label){case 0:this.ce=null,this.oe=!0,v.label=1;case 1:return v.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return v.sent(),[3,7];case 3:return hl(p=v.sent())?(nn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",p),[3,6]):[3,4];case 4:return[4,iu(p)];case 5:v.sent(),v.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return v.sent(),[2]}})})})},o}(),_h=function(){function o(t,s){this.ae=t,this.params=s}return o.prototype.calculateTargetCount=function(t,s){return this.ae.he(t).next(function(l){return Math.floor(s/100*l)})},o.prototype.nthSequenceNumber=function(t,s){var l=this;if(0===s)return $t.resolve(Yi.o);var p=new Fd(s);return this.ae.forEachTarget(t,function(v){return p.re(v.sequenceNumber)}).next(function(){return l.ae.le(t,function(v){return p.re(v)})}).next(function(){return p.maxValue})},o.prototype.removeTargets=function(t,s,l){return this.ae.removeTargets(t,s,l)},o.prototype.removeOrphanedDocuments=function(t,s){return this.ae.removeOrphanedDocuments(t,s)},o.prototype.collect=function(t,s){var l=this;return-1===this.params.cacheSizeCollectionThreshold?(nn("LruGarbageCollector","Garbage collection skipped; disabled"),$t.resolve(ea)):this.getCacheSize(t).next(function(p){return p<l.params.cacheSizeCollectionThreshold?(nn("LruGarbageCollector","Garbage collection skipped; Cache size "+p+" is lower than threshold "+l.params.cacheSizeCollectionThreshold),ea):l.fe(t,s)})},o.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},o.prototype.fe=function(t,s){var l,p,v,S,F,J,le,pe=this,Re=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(Ge){return Ge>pe.params.maximumSequenceNumbersToCollect?(nn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+pe.params.maximumSequenceNumbersToCollect+" from "+Ge),p=pe.params.maximumSequenceNumbersToCollect):p=Ge,S=Date.now(),pe.nthSequenceNumber(t,p)}).next(function(Ge){return l=Ge,F=Date.now(),pe.removeTargets(t,l,s)}).next(function(Ge){return v=Ge,J=Date.now(),pe.removeOrphanedDocuments(t,l)}).next(function(Ge){return le=Date.now(),Sa()<=St.in.DEBUG&&nn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(S-Re)+"ms\n\tDetermined least recently used "+p+" in "+(F-S)+"ms\n\tRemoved "+v+" targets in "+(J-F)+"ms\n\tRemoved "+Ge+" documents in "+(le-J)+"ms\nTotal Duration: "+(le-Re)+"ms"),$t.resolve({didRun:!0,sequenceNumbersCollected:p,targetsRemoved:v,documentsRemoved:Ge})})},o}(),yh=function(){function o(t,s){this.db=t,this.garbageCollector=new _h(this,s)}return o.prototype.he=function(t){var s=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(l){return s.next(function(p){return l+p})})},o.prototype.de=function(t){var s=0;return this.le(t,function(l){s++}).next(function(){return s})},o.prototype.forEachTarget=function(t,s){return this.db.getTargetCache().forEachTarget(t,s)},o.prototype.le=function(t,s){return this.we(t,function(l,p){return s(p)})},o.prototype.addReference=function(t,s,l){return I(t,l)},o.prototype.removeReference=function(t,s,l){return I(t,l)},o.prototype.removeTargets=function(t,s,l){return this.db.getTargetCache().removeTargets(t,s,l)},o.prototype.markPotentiallyOrphaned=function(t,s){return I(t,s)},o.prototype._e=function(t,s){return p=s,v=!1,Ec(l=t).Ot(function(S){return ha(l,S,p).next(function(F){return F&&(v=!0),$t.resolve(!F)})}).next(function(){return v});var l,p,v},o.prototype.removeOrphanedDocuments=function(t,s){var l=this,p=this.db.getRemoteDocumentCache().newChangeBuffer(),v=[],S=0;return this.we(t,function(F,J){if(J<=s){var le=l._e(t,F).next(function(pe){if(!pe)return S++,p.getEntry(t,F).next(function(){return p.removeEntry(F),pa(t).delete([0,Ks(F.path)])})});v.push(le)}}).next(function(){return $t.waitFor(v)}).next(function(){return p.apply(t)}).next(function(){return S})},o.prototype.removeTarget=function(t,s){var l=s.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,l)},o.prototype.updateLimboDocument=function(t,s){return I(t,s)},o.prototype.we=function(t,s){var l,p=pa(t),v=Yi.o;return p.$t({index:io.documentTargetsIndex},function(S,F){var le=F.path,pe=F.sequenceNumber;0===S[0]?(v!==Yi.o&&s(new qn(da(l)),v),v=pe,l=le):v=Yi.o}).next(function(){v!==Yi.o&&s(new qn(da(l)),v)})},o.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},o}();function I(o,t){return pa(o).put((l=o.currentSequenceNumber,new io(0,Ks(t.path),l)));var l}var E=function(){function o(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={}}return o.prototype.get=function(t){var s=this.mapKeyFn(t),l=this.inner[s];if(void 0!==l)for(var p=0,v=l;p<v.length;p++){var S=v[p],J=S[1];if(this.equalsFn(S[0],t))return J}},o.prototype.has=function(t){return void 0!==this.get(t)},o.prototype.set=function(t,s){var l=this.mapKeyFn(t),p=this.inner[l];if(void 0!==p){for(var v=0;v<p.length;v++)if(this.equalsFn(p[v][0],t))return void(p[v]=[t,s]);p.push([t,s])}else this.inner[l]=[[t,s]]},o.prototype.delete=function(t){var s=this.mapKeyFn(t),l=this.inner[s];if(void 0===l)return!1;for(var p=0;p<l.length;p++)if(this.equalsFn(l[p][0],t))return 1===l.length?delete this.inner[s]:l.splice(p,1),!0;return!1},o.prototype.forEach=function(t){$(this.inner,function(s,l){for(var p=0,v=l;p<v.length;p++){var S=v[p];t(S[0],S[1])}})},o.prototype.isEmpty=function(){return ne(this.inner)},o}(),m=function(){function o(){this.changes=new E(function(t){return t.toString()},function(t,s){return t.isEqual(s)}),this.changesApplied=!1}return o.prototype.getReadTime=function(t){var s=this.changes.get(t);return s?s.readTime:R.min()},o.prototype.addEntry=function(t,s){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:s})},o.prototype.removeEntry=function(t,s){void 0===s&&(s=null),this.assertNotApplied(),this.changes.set(t,{document:Sr.newInvalidDocument(t),readTime:s})},o.prototype.getEntry=function(t,s){this.assertNotApplied();var l=this.changes.get(s);return void 0!==l?$t.resolve(l.document):this.getFromCache(t,s)},o.prototype.getEntries=function(t,s){return this.getAllFromCache(t,s)},o.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},o.prototype.assertNotApplied=function(){},o}(),w=function(){function o(t,s){this.R=t,this.Ut=s}return o.prototype.addEntry=function(t,s,l){return d(t).put(f(s),l)},o.prototype.removeEntry=function(t,s){var l=d(t),p=f(s);return l.delete(p)},o.prototype.updateMetadata=function(t,s){var l=this;return this.getMetadata(t).next(function(p){return p.byteSize+=s,l.me(t,p)})},o.prototype.getEntry=function(t,s){var l=this;return d(t).get(f(s)).next(function(p){return l.ye(s,p)})},o.prototype.ge=function(t,s){var l=this;return d(t).get(f(s)).next(function(p){return{document:l.ye(s,p),size:jl(p)}})},o.prototype.getEntries=function(t,s){var l=this,p=Io();return this.pe(t,s,function(v,S){var F=l.ye(v,S);p=p.insert(v,F)}).next(function(){return p})},o.prototype.Ee=function(t,s){var l=this,p=Io(),v=new Qo(qn.comparator);return this.pe(t,s,function(S,F){var J=l.ye(S,F);p=p.insert(S,J),v=v.insert(S,jl(F))}).next(function(){return{documents:p,Te:v}})},o.prototype.pe=function(t,s,l){if(s.isEmpty())return $t.resolve();var p=IDBKeyRange.bound(s.first().path.toArray(),s.last().path.toArray()),v=s.getIterator(),S=v.getNext();return d(t).$t({range:p},function(F,J,le){for(var pe=qn.fromSegments(F);S&&qn.comparator(S,pe)<0;)l(S,null),S=v.getNext();S&&S.isEqual(pe)&&(l(S,J),S=v.hasNext()?v.getNext():null),S?le.Ct(S.path.toArray()):le.done()}).next(function(){for(;S;)l(S,null),S=v.hasNext()?v.getNext():null})},o.prototype.getDocumentsMatchingQuery=function(t,s,l){var p=this,v=Io(),S=s.path.length+1,F={};if(l.isEqual(R.min())){var J=s.path.toArray();F.range=IDBKeyRange.lowerBound(J)}else{var le=s.path.toArray(),pe=gl(l);F.range=IDBKeyRange.lowerBound([le,pe],!0),F.index=ji.collectionReadTimeIndex}return d(t).$t(F,function(Re,Ge,ft){if(Re.length===S){var ct=ku(p.R,Ge);s.path.isPrefixOf(ct.key.path)?nl(s,ct)&&(v=v.insert(ct.key,ct)):ft.done()}}).next(function(){return v})},o.prototype.newChangeBuffer=function(t){return new z(this,!!t&&t.trackRemovals)},o.prototype.getSize=function(t){return this.getMetadata(t).next(function(s){return s.byteSize})},o.prototype.getMetadata=function(t){return c(t).get(wi.key).next(function(s){return Yn(!!s),s})},o.prototype.me=function(t,s){return c(t).put(wi.key,s)},o.prototype.ye=function(t,s){if(s){var l=ku(this.R,s);if(!l.isNoDocument()||!l.version.isEqual(R.min()))return l}return Sr.newInvalidDocument(t)},o}(),z=function(o){function t(s,l){var p=this;return(p=o.call(this)||this).Ie=s,p.trackRemovals=l,p.Ae=new E(function(v){return v.toString()},function(v,S){return v.isEqual(S)}),p}return(0,re.ZT)(t,o),t.prototype.applyChanges=function(s){var l=this,p=[],v=0,S=new vo(function(F,J){return xr(F.canonicalString(),J.canonicalString())});return this.changes.forEach(function(F,J){var le=l.Ae.get(F);if(J.document.isValidDocument()){var pe=Po(l.Ie.R,J.document,l.getReadTime(F));S=S.add(F.path.popLast());var Re=jl(pe);v+=Re-le,p.push(l.Ie.addEntry(s,F,pe))}else if(v-=le,l.trackRemovals){var Ge=Po(l.Ie.R,Sr.newNoDocument(F,R.min()),l.getReadTime(F));p.push(l.Ie.addEntry(s,F,Ge))}else p.push(l.Ie.removeEntry(s,F))}),S.forEach(function(F){p.push(l.Ie.Ut.addToCollectionParentIndex(s,F))}),p.push(this.Ie.updateMetadata(s,v)),$t.waitFor(p)},t.prototype.getFromCache=function(s,l){var p=this;return this.Ie.ge(s,l).next(function(v){return p.Ae.set(l,v.size),v.document})},t.prototype.getAllFromCache=function(s,l){var p=this;return this.Ie.Ee(s,l).next(function(v){var S=v.documents;return v.Te.forEach(function(F,J){p.Ae.set(F,J)}),S})},t}(m);function c(o){return us(o,wi.store)}function d(o){return us(o,ji.store)}function f(o){return o.path.toArray()}var y=function(){function o(t){this.R=t}return o.prototype.Rt=function(t,s,l,p){var v=this;Yn(l<p&&l>=0&&p<=11);var J,S=new Jc("createOrUpgrade",s);l<1&&p>=1&&(t.createObjectStore(Ts.store),(J=t).createObjectStore(eu.store,{keyPath:eu.keyPath}),J.createObjectStore(mi.store,{keyPath:mi.keyPath,autoIncrement:!0}).createIndex(mi.userMutationsIndex,mi.userMutationsKeyPath,{unique:!0}),J.createObjectStore(ni.store),D(t),function(J){J.createObjectStore(ji.store)}(t));var F=$t.resolve();return l<3&&p>=3&&(0!==l&&(function(J){J.deleteObjectStore(io.store),J.deleteObjectStore(Mo.store),J.deleteObjectStore(ps.store)}(t),D(t)),F=F.next(function(){return function(J){var le=J.store(ps.store),pe=new ps(0,0,R.min().toTimestamp(),0);return le.put(ps.key,pe)}(S)})),l<4&&p>=4&&(0!==l&&(F=F.next(function(){return function(J,le){return le.store(mi.store).Nt().next(function(pe){J.deleteObjectStore(mi.store),J.createObjectStore(mi.store,{keyPath:mi.keyPath,autoIncrement:!0}).createIndex(mi.userMutationsIndex,mi.userMutationsKeyPath,{unique:!0});var Re=le.store(mi.store),Ge=pe.map(function(ft){return Re.put(ft)});return $t.waitFor(Ge)})}(t,S)})),F=F.next(function(){!function(J){J.createObjectStore(Qs.store,{keyPath:Qs.keyPath})}(t)})),l<5&&p>=5&&(F=F.next(function(){return v.Re(S)})),l<6&&p>=6&&(F=F.next(function(){return function(J){J.createObjectStore(wi.store)}(t),v.be(S)})),l<7&&p>=7&&(F=F.next(function(){return v.ve(S)})),l<8&&p>=8&&(F=F.next(function(){return v.Pe(t,S)})),l<9&&p>=9&&(F=F.next(function(){(function(J){J.objectStoreNames.contains("remoteDocumentChanges")&&J.deleteObjectStore("remoteDocumentChanges")})(t),function(J){var le=J.objectStore(ji.store);le.createIndex(ji.readTimeIndex,ji.readTimeIndexPath,{unique:!1}),le.createIndex(ji.collectionReadTimeIndex,ji.collectionReadTimeIndexPath,{unique:!1})}(s)})),l<10&&p>=10&&(F=F.next(function(){return v.Ve(S)})),l<11&&p>=11&&(F=F.next(function(){(function(J){J.createObjectStore(dl.store,{keyPath:dl.keyPath})})(t),function(J){J.createObjectStore(Fu.store,{keyPath:Fu.keyPath})}(t)})),F},o.prototype.be=function(t){var s=0;return t.store(ji.store).$t(function(l,p){s+=jl(p)}).next(function(){var l=new wi(s);return t.store(wi.store).put(wi.key,l)})},o.prototype.Re=function(t){var s=this,l=t.store(eu.store),p=t.store(mi.store);return l.Nt().next(function(v){return $t.forEach(v,function(S){var F=IDBKeyRange.bound([S.userId,-1],[S.userId,S.lastAcknowledgedBatchId]);return p.Nt(mi.userMutationsIndex,F).next(function(J){return $t.forEach(J,function(le){Yn(le.userId===S.userId);var pe=Bl(s.R,le);return nu(t,S.userId,pe).next(function(){})})})})})},o.prototype.ve=function(t){var s=t.store(io.store),l=t.store(ji.store);return t.store(ps.store).get(ps.key).next(function(p){var v=[];return l.$t(function(S,F){var J=new Ae(S),le=[0,Ks(J)];v.push(s.get(le).next(function(pe){return pe?$t.resolve():s.put(new io(0,Ks(J),p.highestListenSequenceNumber))}))}).next(function(){return $t.waitFor(v)})})},o.prototype.Pe=function(t,s){t.createObjectStore(xo.store,{keyPath:xo.keyPath});var l=s.store(xo.store),p=new Rd,v=function(S){if(p.add(S)){var F=S.lastSegment(),J=S.popLast();return l.put({collectionId:F,parent:Ks(J)})}};return s.store(ji.store).$t({Ft:!0},function(S,F){var J=new Ae(S);return v(J.popLast())}).next(function(){return s.store(ni.store).$t({Ft:!0},function(S,F){var le=da(S[1]);return v(le.popLast())})})},o.prototype.Ve=function(t){var s=this,l=t.store(Mo.store);return l.$t(function(p,v){var S=ml(v),F=Xc(s.R,S);return l.put(F)})},o}();function D(o){o.createObjectStore(io.store,{keyPath:io.keyPath}).createIndex(io.documentTargetsIndex,io.documentTargetsKeyPath,{unique:!0}),o.createObjectStore(Mo.store,{keyPath:Mo.keyPath}).createIndex(Mo.queryTargetsIndexName,Mo.queryTargetsKeyPath,{unique:!0}),o.createObjectStore(ps.store)}var L="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Y=function(){function o(t,s,l,p,v,S,F,J,le,pe){if(this.allowTabSynchronization=t,this.persistenceKey=s,this.clientId=l,this.Se=v,this.window=S,this.document=F,this.De=le,this.Ce=pe,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(Re){return Promise.resolve()},!o.yt())throw new Lt(_t.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yh(this,p),this.Le=s+"main",this.R=new Ns(J),this.Be=new tu(this.Le,11,new y(this.R)),this.qe=new gh(this.referenceDelegate,this.R),this.Ut=new xd,this.Ue=new w(this.R,this.Ut),this.Ke=new fh,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===pe&&Oi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return o.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Lt(_t.FAILED_PRECONDITION,L);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(s){return t.qe.getHighestSequenceNumber(s)})}).then(function(s){t.Ne=new Yi(s,t.De)}).then(function(){t.xe=!0}).catch(function(s){return t.Be&&t.Be.close(),Promise.reject(s)})},o.prototype.He=function(t){var s=this;return this.Me=function(l){return(0,re.mG)(s,void 0,void 0,function(){return(0,re.Jh)(this,function(p){return this.started?[2,t(l)]:[2]})})},t(this.isPrimary)},o.prototype.setDatabaseDeletedListener=function(t){var s=this;this.Be.vt(function(l){return(0,re.mG)(s,void 0,void 0,function(){return(0,re.Jh)(this,function(p){switch(p.label){case 0:return null===l.newVersion?[4,t()]:[3,2];case 1:p.sent(),p.label=2;case 2:return[2]}})})})},o.prototype.setNetworkEnabled=function(t){var s=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,re.mG)(s,void 0,void 0,function(){return(0,re.Jh)(this,function(l){switch(l.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})}))},o.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(s){return ye(s).put(new Qs(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(s).next(function(l){l||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(s)}).next(function(l){return t.isPrimary&&!l?t.Xe(s).next(function(){return!1}):!!l&&t.Ze(s).next(function(){return!0})})}).catch(function(s){if(hl(s))return nn("IndexedDbPersistence","Failed to extend owner lease: ",s),t.isPrimary;if(!t.allowTabSynchronization)throw s;return nn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",s),!1}).then(function(s){t.isPrimary!==s&&t.Se.enqueueRetryable(function(){return t.Me(s)}),t.isPrimary=s})},o.prototype.Je=function(t){var s=this;return de(t).get(Ts.key).next(function(l){return $t.resolve(s.tn(l))})},o.prototype.en=function(t){return ye(t).delete(this.clientId)},o.prototype.nn=function(){return(0,re.mG)(this,void 0,void 0,function(){var t,s,l,v=this;return(0,re.Jh)(this,function(S){switch(S.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(F){var J=us(F,Qs.store);return J.Nt().next(function(le){var pe=v.rn(le,18e5),Re=le.filter(function(Ge){return-1===pe.indexOf(Ge)});return $t.forEach(Re,function(Ge){return J.delete(Ge.clientId)}).next(function(){return Re})})}).catch(function(){return[]})]);case 1:if(t=S.sent(),this.Qe)for(s=0,l=t;s<l.length;s++)this.Qe.removeItem(this.on(l[s].clientId));S.label=2;case 2:return[2]}})})},o.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},o.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},o.prototype.Ye=function(t){var s=this;return this.Ce?$t.resolve(!0):de(t).get(Ts.key).next(function(l){if(null!==l&&s.sn(l.leaseTimestampMs,5e3)&&!s.cn(l.ownerId)){if(s.tn(l)&&s.networkEnabled)return!0;if(!s.tn(l)){if(!l.allowTabSynchronization)throw new Lt(_t.FAILED_PRECONDITION,L);return!1}}return!(!s.networkEnabled||!s.inForeground)||ye(t).Nt().next(function(p){return void 0===s.rn(p,5e3).find(function(v){return!(s.clientId===v.clientId||!(!s.networkEnabled&&v.networkEnabled||!s.inForeground&&v.inForeground&&s.networkEnabled===v.networkEnabled))})})}).next(function(l){return s.isPrimary!==l&&nn("IndexedDbPersistence","Client "+(l?"is":"is not")+" eligible for a primary lease."),l})},o.prototype.shutdown=function(){return(0,re.mG)(this,void 0,void 0,function(){var t=this;return(0,re.Jh)(this,function(s){switch(s.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ts.store,Qs.store],function(l){var p=new fl(l,Yi.o);return t.Xe(p).next(function(){return t.en(p)})})];case 1:return s.sent(),this.Be.close(),this.ln(),[2]}})})},o.prototype.rn=function(t,s){var l=this;return t.filter(function(p){return l.sn(p.updateTimeMs,s)&&!l.cn(p.clientId)})},o.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(s){return ye(s).Nt().next(function(l){return t.rn(l,18e5).map(function(p){return p.clientId})})})},Object.defineProperty(o.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),o.prototype.getMutationQueue=function(t){return ru.Qt(t,this.R,this.Ut,this.referenceDelegate)},o.prototype.getTargetCache=function(){return this.qe},o.prototype.getRemoteDocumentCache=function(){return this.Ue},o.prototype.getIndexManager=function(){return this.Ut},o.prototype.getBundleCache=function(){return this.Ke},o.prototype.runTransaction=function(t,s,l){var v,p=this;return nn("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===s?"readonly":"readwrite",jh,function(F){return v=new fl(F,p.Ne?p.Ne.next():Yi.o),"readwrite-primary"===s?p.Je(v).next(function(J){return!!J||p.Ye(v)}).next(function(J){if(!J)throw Oi("Failed to obtain primary lease for action '"+t+"'."),p.isPrimary=!1,p.Se.enqueueRetryable(function(){return p.Me(!1)}),new Lt(_t.FAILED_PRECONDITION,bc);return l(v)}).next(function(J){return p.Ze(v).next(function(){return J})}):p.dn(v).next(function(){return l(v)})}).then(function(F){return v.raiseOnCommittedEvent(),F})},o.prototype.dn=function(t){var s=this;return de(t).get(Ts.key).next(function(l){if(null!==l&&s.sn(l.leaseTimestampMs,5e3)&&!s.cn(l.ownerId)&&!s.tn(l)&&!(s.Ce||s.allowTabSynchronization&&l.allowTabSynchronization))throw new Lt(_t.FAILED_PRECONDITION,L)})},o.prototype.Ze=function(t){var s=new Ts(this.clientId,this.allowTabSynchronization,Date.now());return de(t).put(Ts.key,s)},o.yt=function(){return tu.yt()},o.prototype.Xe=function(t){var s=this,l=de(t);return l.get(Ts.key).next(function(p){return s.tn(p)?(nn("IndexedDbPersistence","Releasing primary lease."),l.delete(Ts.key)):$t.resolve()})},o.prototype.sn=function(t,s){var l=Date.now();return!(t<l-s||t>l&&(Oi("Detected an update time that is in the future: "+t+" > "+l),1))},o.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},o.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},o.prototype.Ge=function(){var t,s=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){s.un(),(0,Ke.G6)()&&navigator.appVersion.match("Version/14")&&s.Se.enterRestrictedMode(!0),s.Se.enqueueAndForget(function(){return s.shutdown()})},this.window.addEventListener("pagehide",this.ke))},o.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},o.prototype.cn=function(t){var s;try{var l=null!==(null===(s=this.Qe)||void 0===s?void 0:s.getItem(this.on(t)));return nn("IndexedDbPersistence","Client '"+t+"' "+(l?"is":"is not")+" zombied in LocalStorage"),l}catch(p){return Oi("IndexedDbPersistence","Failed to get zombied client id.",p),!1}},o.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Oi("Failed to set zombie client id.",t)}},o.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},o.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},o}();function de(o){return us(o,Ts.store)}function ye(o){return us(o,Qs.store)}function Ie(o,t){var s=o.projectId;return o.isDefaultDatabase||(s+="."+o.database),"firestore/"+t+"/"+s+"/"}var Ne=function(o,t){this.progress=o,this.wn=t},ht=function(){function o(t,s,l){this.Ue=t,this._n=s,this.Ut=l}return o.prototype.mn=function(t,s){var l=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,s).next(function(p){return l.yn(t,s,p)})},o.prototype.yn=function(t,s,l){return this.Ue.getEntry(t,s).next(function(p){for(var v=0,S=l;v<S.length;v++)S[v].applyToLocalView(p);return p})},o.prototype.gn=function(t,s){t.forEach(function(l,p){for(var v=0,S=s;v<S.length;v++)S[v].applyToLocalView(p)})},o.prototype.pn=function(t,s){var l=this;return this.Ue.getEntries(t,s).next(function(p){return l.En(t,p).next(function(){return p})})},o.prototype.En=function(t,s){var l=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,s).next(function(p){return l.gn(s,p)})},o.prototype.getDocumentsMatchingQuery=function(t,s,l){return qn.isDocumentKey((p=s).path)&&null===p.collectionGroup&&0===p.filters.length?this.Tn(t,s.path):tl(s)?this.In(t,s,l):this.An(t,s,l);var p},o.prototype.Tn=function(t,s){return this.mn(t,new qn(s)).next(function(l){var p=lc();return l.isFoundDocument()&&(p=p.insert(l.key,l)),p})},o.prototype.In=function(t,s,l){var p=this,v=s.collectionGroup,S=lc();return this.Ut.getCollectionParents(t,v).next(function(F){return $t.forEach(F,function(J){var pe,Re,le=(pe=s,Re=J.child(v),new Zs(Re,null,pe.explicitOrderBy.slice(),pe.filters.slice(),pe.limit,pe.limitType,pe.startAt,pe.endAt));return p.An(t,le,l).next(function(pe){pe.forEach(function(Re,Ge){S=S.insert(Re,Ge)})})}).next(function(){return S})})},o.prototype.An=function(t,s,l){var p,v,S=this;return this.Ue.getDocumentsMatchingQuery(t,s,l).next(function(F){return p=F,S._n.getAllMutationBatchesAffectingQuery(t,s)}).next(function(F){return S.Rn(t,v=F,p).next(function(J){p=J;for(var le=0,pe=v;le<pe.length;le++)for(var Re=pe[le],Ge=0,ft=Re.mutations;Ge<ft.length;Ge++){var ct=ft[Ge],Et=ct.key,en=p.get(Et);null==en&&(en=Sr.newInvalidDocument(Et),p=p.insert(Et,en)),ol(ct,en,Re.localWriteTime),en.isFoundDocument()||(p=p.remove(Et))}})}).next(function(){return p.forEach(function(F,J){nl(s,J)||(p=p.remove(F))}),p})},o.prototype.Rn=function(t,s,l){for(var p=zr(),v=0,S=s;v<S.length;v++)for(var F=0,J=S[v].mutations;F<J.length;F++){var le=J[F];le instanceof ws&&null===l.get(le.key)&&(p=p.add(le.key))}var pe=l;return this.Ue.getEntries(t,p).next(function(Re){return Re.forEach(function(Ge,ft){ft.isFoundDocument()&&(pe=pe.insert(Ge,ft))}),pe})},o}(),At=function(){function o(t,s,l,p){this.targetId=t,this.fromCache=s,this.bn=l,this.vn=p}return o.Pn=function(t,s){for(var l=zr(),p=zr(),v=0,S=s.docChanges;v<S.length;v++){var F=S[v];switch(F.type){case 0:l=l.add(F.doc.key);break;case 1:p=p.add(F.doc.key)}}return new o(t,s.fromCache,l,p)},o}(),Ut=function(){function o(){}return o.prototype.Vn=function(t){this.Sn=t},o.prototype.getDocumentsMatchingQuery=function(t,s,l,p){var S,v=this;return 0===(S=s).filters.length&&null===S.limit&&null==S.startAt&&null==S.endAt&&(0===S.explicitOrderBy.length||1===S.explicitOrderBy.length&&S.explicitOrderBy[0].field.isKeyField())||l.isEqual(R.min())?this.Dn(t,s):this.Sn.pn(t,p).next(function(S){var F=v.Cn(s,S);return(vu(s)||Ma(s))&&v.Nn(s.limitType,F,p,l)?v.Dn(t,s):(Sa()<=St.in.DEBUG&&nn("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ac(s)),v.Sn.getDocumentsMatchingQuery(t,s,l).next(function(J){return F.forEach(function(le){J=J.insert(le.key,le)}),J}))})},o.prototype.Cn=function(t,s){var l=new vo(rl(t));return s.forEach(function(p,v){nl(t,v)&&(l=l.add(v))}),l},o.prototype.Nn=function(t,s,l,p){if(l.size!==s.size)return!0;var v="F"===t?s.last():s.first();return!!v&&(v.hasPendingWrites||v.version.compareTo(p)>0)},o.prototype.Dn=function(t,s){return Sa()<=St.in.DEBUG&&nn("QueryEngine","Using full collection scan to execute query:",ac(s)),this.Sn.getDocumentsMatchingQuery(t,s,R.min())},o}(),rn=function(){function o(t,s,l,p){this.persistence=t,this.xn=s,this.R=p,this.kn=new Qo(xr),this.Fn=new E(function(v){return Ko(v)},_o),this.$n=R.min(),this._n=t.getMutationQueue(l),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new ht(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return o.prototype.collectGarbage=function(t){var s=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(l){return t.collect(l,s.kn)})},o}();function Kn(o,t,s,l){return new rn(o,t,s,l)}function Wn(o,t){return(0,re.mG)(this,void 0,void 0,function(){var s,l,p,v;return(0,re.Jh)(this,function(S){switch(S.label){case 0:return s=an(o),l=s._n,p=s.Mn,[4,s.persistence.runTransaction("Handle user change","readonly",function(F){var J;return s._n.getAllMutationBatches(F).next(function(le){return J=le,l=s.persistence.getMutationQueue(t),p=new ht(s.On,l,s.persistence.getIndexManager()),l.getAllMutationBatches(F)}).next(function(le){for(var pe=[],Re=[],Ge=zr(),ft=0,ct=J;ft<ct.length;ft++){var Et=ct[ft];pe.push(Et.batchId);for(var en=0,pn=Et.mutations;en<pn.length;en++)Ge=Ge.add(pn[en].key)}for(var tr=0,Wr=le;tr<Wr.length;tr++){var ci=Wr[tr];Re.push(ci.batchId);for(var Ni=0,As=ci.mutations;Ni<As.length;Ni++)Ge=Ge.add(As[Ni].key)}return p.pn(F,Ge).next(function(xh){return{Ln:xh,removedBatchIds:pe,addedBatchIds:Re}})})})];case 1:return v=S.sent(),[2,(s._n=l,s.Mn=p,s.xn.Vn(s.Mn),v)]}})})}function Cr(o,t){var s=an(o);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(l){var S,F,J,le,pe,Re,Ge,p=t.batch.keys(),v=s.On.newChangeBuffer({trackRemovals:!0});return(S=s,F=l,J=t,le=v,pe=J.batch,Re=pe.keys(),Ge=$t.resolve(),Re.forEach(function(ft){Ge=Ge.next(function(){return le.getEntry(F,ft)}).next(function(ct){var Et=J.docVersions.get(ft);Yn(null!==Et),ct.version.compareTo(Et)<0&&(pe.applyToRemoteDocument(ct,J),ct.isValidDocument()&&le.addEntry(ct,J.commitVersion))})}),Ge.next(function(){return S._n.removeMutationBatch(F,pe)})).next(function(){return v.apply(l)}).next(function(){return s._n.performConsistencyCheck(l)}).next(function(){return s.Mn.pn(l,p)})})}function oo(o){var t=an(o);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(s){return t.qe.getLastRemoteSnapshotVersion(s)})}function Na(o,t){var s=an(o),l=t.snapshotVersion,p=s.kn;return s.persistence.runTransaction("Apply remote event","readwrite-primary",function(v){var S=s.On.newChangeBuffer({trackRemovals:!0});p=s.kn;var F=[];t.targetChanges.forEach(function(pe,Re){var Et,en,pn,Ge=p.get(Re);if(Ge){F.push(s.qe.removeMatchingKeys(v,pe.removedDocuments,Re).next(function(){return s.qe.addMatchingKeys(v,pe.addedDocuments,Re)}));var ft=pe.resumeToken;if(ft.approximateByteSize()>0){var ct=Ge.withResumeToken(ft,l).withSequenceNumber(v.currentSequenceNumber);p=p.insert(Re,ct),Et=Ge,pn=pe,Yn((en=ct).resumeToken.approximateByteSize()>0),(0===Et.resumeToken.approximateByteSize()||en.snapshotVersion.toMicroseconds()-Et.snapshotVersion.toMicroseconds()>=3e8||pn.addedDocuments.size+pn.modifiedDocuments.size+pn.removedDocuments.size>0)&&F.push(s.qe.updateTargetData(v,ct))}}});var J=Io();if(t.documentUpdates.forEach(function(pe,Re){t.resolvedLimboDocuments.has(pe)&&F.push(s.persistence.referenceDelegate.updateLimboDocument(v,pe))}),F.push(Hl(v,S,t.documentUpdates,l,void 0).next(function(pe){J=pe})),!l.isEqual(R.min())){var le=s.qe.getLastRemoteSnapshotVersion(v).next(function(pe){return s.qe.setTargetsMetadata(v,v.currentSequenceNumber,l)});F.push(le)}return $t.waitFor(F).next(function(){return S.apply(v)}).next(function(){return s.Mn.En(v,J)}).next(function(){return J})}).then(function(v){return s.kn=p,v})}function Hl(o,t,s,l,p){var v=zr();return s.forEach(function(S){return v=v.add(S)}),t.getEntries(o,v).next(function(S){var F=Io();return s.forEach(function(J,le){var pe=S.get(J),Re=(null==p?void 0:p.get(J))||l;le.isNoDocument()&&le.version.isEqual(R.min())?(t.removeEntry(J,Re),F=F.insert(J,le)):!pe.isValidDocument()||le.version.compareTo(pe.version)>0||0===le.version.compareTo(pe.version)&&pe.hasPendingWrites?(t.addEntry(le,Re),F=F.insert(J,le)):nn("LocalStore","Ignoring outdated watch update for ",J,". Current version:",pe.version," Watch version:",le.version)}),F})}function Nd(o,t){var s=an(o);return s.persistence.runTransaction("Get next mutation batch","readonly",function(l){return void 0===t&&(t=-1),s._n.getNextMutationBatchAfterBatchId(l,t)})}function ou(o,t){var s=an(o);return s.persistence.runTransaction("Allocate target","readwrite",function(l){var p;return s.qe.getTargetData(l,t).next(function(v){return v?$t.resolve(p=v):s.qe.allocateTargetId(l).next(function(S){return p=new Cc(t,S,0,l.currentSequenceNumber),s.qe.addTargetData(l,p).next(function(){return p})})})}).then(function(l){var p=s.kn.get(l.targetId);return(null===p||l.snapshotVersion.compareTo(p.snapshotVersion)>0)&&(s.kn=s.kn.insert(l.targetId,l),s.Fn.set(t,l.targetId)),l})}function su(o,t,s){return(0,re.mG)(this,void 0,void 0,function(){var l,p,v,S;return(0,re.Jh)(this,function(F){switch(F.label){case 0:l=an(o),p=l.kn.get(t),v=s?"readwrite":"readwrite-primary",F.label=1;case 1:return F.trys.push([1,4,,5]),s?[3,3]:[4,l.persistence.runTransaction("Release target",v,function(J){return l.persistence.referenceDelegate.removeTarget(J,p)})];case 2:F.sent(),F.label=3;case 3:return[3,5];case 4:if(!hl(S=F.sent()))throw S;return nn("LocalStore","Failed to update sequence numbers for target "+t+": "+S),[3,5];case 5:return l.kn=l.kn.remove(t),l.Fn.delete(p.target),[2]}})})}function Gh(o,t,s){var l=an(o),p=R.min(),v=zr();return l.persistence.runTransaction("Execute query","readonly",function(S){return(F=l,J=S,le=Bo(t),pe=an(F),Re=pe.Fn.get(le),void 0!==Re?$t.resolve(pe.kn.get(Re)):pe.qe.getTargetData(J,le)).next(function(F){if(F)return p=F.lastLimboFreeSnapshotVersion,l.qe.getMatchingKeysForTargetId(S,F.targetId).next(function(J){v=J})}).next(function(){return l.xn.getDocumentsMatchingQuery(S,t,s?p:R.min(),s?v:zr())}).next(function(F){return{documents:F,Bn:v}});var F,J,le,pe,Re})}function kf(o,t){var s=an(o),l=an(s.qe),p=s.kn.get(t);return p?Promise.resolve(p.target):s.persistence.runTransaction("Get target data","readonly",function(v){return l.lt(v,t).next(function(S){return S?S.target:null})})}function ig(o){var t=an(o);return t.persistence.runTransaction("Get new document changes","readonly",function(s){return p=s,v=t.$n,S=an(t.On),F=Io(),J=gl(v),le=d(p),pe=IDBKeyRange.lowerBound(J,!0),le.$t({index:ji.readTimeIndex,range:pe},function(Re,Ge){var ft=ku(S.R,Ge);F=F.insert(ft.key,ft),J=Ge.readTime}).next(function(){return{wn:F,readTime:Md(J)}});var p,v,S,F,J,le,pe}).then(function(s){var l=s.wn;return t.$n=s.readTime,l})}function t_(o){return(0,re.mG)(this,void 0,void 0,function(){var t;return(0,re.Jh)(this,function(s){return[2,(t=an(o)).persistence.runTransaction("Synchronize last document change read time","readonly",function(l){return v=d(l),S=R.min(),v.$t({index:ji.readTimeIndex,reverse:!0},function(F,J,le){J.readTime&&(S=Md(J.readTime)),le.done()}).next(function(){return S});var v,S}).then(function(l){t.$n=l})]})})}function og(o,t,s,l){return(0,re.mG)(this,void 0,void 0,function(){var p,v,S,F,J,le,pe,Re,Ge,ft;return(0,re.Jh)(this,function(ct){switch(ct.label){case 0:for(p=an(o),v=zr(),S=Io(),F=cc(),J=0,le=s;J<le.length;J++)Re=t.qn((pe=le[J]).metadata.name),pe.document&&(v=v.add(Re)),S=S.insert(Re,t.Un(pe)),F=F.insert(Re,t.Kn(pe.metadata.readTime));return Ge=p.On.newChangeBuffer({trackRemovals:!0}),[4,ou(p,(Et=l,Bo(yu(Ae.fromString("__bundle__/docs/"+Et)))))];case 1:return ft=ct.sent(),[2,p.persistence.runTransaction("Apply bundle documents","readwrite",function(Et){return Hl(Et,Ge,S,R.min(),F).next(function(en){return Ge.apply(Et),en}).next(function(en){return p.qe.removeMatchingKeysForTargetId(Et,ft.targetId).next(function(){return p.qe.addMatchingKeys(Et,v,ft.targetId)}).next(function(){return p.Mn.En(Et,en)}).next(function(){return en})})})]}var Et})})}function Lf(o,t,s){return void 0===s&&(s=zr()),(0,re.mG)(this,void 0,void 0,function(){var l,p;return(0,re.Jh)(this,function(v){switch(v.label){case 0:return[4,ou(o,Bo(Od(t.bundledQuery)))];case 1:return l=v.sent(),[2,(p=an(o)).persistence.runTransaction("Save named query","readwrite",function(S){var F=Bi(t.readTime);if(l.snapshotVersion.compareTo(F)>=0)return p.Ke.saveNamedQuery(S,t);var J=l.withResumeToken(rr.EMPTY_BYTE_STRING,F);return p.kn=p.kn.insert(J.targetId,J),p.qe.updateTargetData(S,J).next(function(){return p.qe.removeMatchingKeysForTargetId(S,l.targetId)}).next(function(){return p.qe.addMatchingKeys(S,s,l.targetId)}).next(function(){return p.Ke.saveNamedQuery(S,t)})})]}})})}var sg=function(){function o(t){this.R=t,this.Qn=new Map,this.jn=new Map}return o.prototype.getBundleMetadata=function(t,s){return $t.resolve(this.Qn.get(s))},o.prototype.saveBundleMetadata=function(t,s){var l;return this.Qn.set(s.id,{id:(l=s).id,version:l.version,createTime:Bi(l.createTime)}),$t.resolve()},o.prototype.getNamedQuery=function(t,s){return $t.resolve(this.jn.get(s))},o.prototype.saveNamedQuery=function(t,s){return this.jn.set(s.name,{name:(l=s).name,query:Od(l.bundledQuery),readTime:Bi(l.readTime)}),$t.resolve();var l},o}(),ag=function(){function o(){this.Wn=new vo(ls.Gn),this.zn=new vo(ls.Hn)}return o.prototype.isEmpty=function(){return this.Wn.isEmpty()},o.prototype.addReference=function(t,s){var l=new ls(t,s);this.Wn=this.Wn.add(l),this.zn=this.zn.add(l)},o.prototype.Jn=function(t,s){var l=this;t.forEach(function(p){return l.addReference(p,s)})},o.prototype.removeReference=function(t,s){this.Yn(new ls(t,s))},o.prototype.Xn=function(t,s){var l=this;t.forEach(function(p){return l.removeReference(p,s)})},o.prototype.Zn=function(t){var s=this,l=new qn(new Ae([])),p=new ls(l,t),v=new ls(l,t+1),S=[];return this.zn.forEachInRange([p,v],function(F){s.Yn(F),S.push(F.key)}),S},o.prototype.ts=function(){var t=this;this.Wn.forEach(function(s){return t.Yn(s)})},o.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},o.prototype.es=function(t){var s=new qn(new Ae([])),l=new ls(s,t),p=new ls(s,t+1),v=zr();return this.zn.forEachInRange([l,p],function(S){v=v.add(S.key)}),v},o.prototype.containsKey=function(t){var s=new ls(t,0),l=this.Wn.firstAfterOrEqual(s);return null!==l&&t.isEqual(l.key)},o}(),ls=function(){function o(t,s){this.key=t,this.ns=s}return o.Gn=function(t,s){return qn.comparator(t.key,s.key)||xr(t.ns,s.ns)},o.Hn=function(t,s){return xr(t.ns,s.ns)||qn.comparator(t.key,s.key)},o}(),n_=function(){function o(t,s){this.Ut=t,this.referenceDelegate=s,this._n=[],this.ss=1,this.rs=new vo(ls.Gn)}return o.prototype.checkEmpty=function(t){return $t.resolve(0===this._n.length)},o.prototype.addMutationBatch=function(t,s,l,p){var v=this.ss;this.ss++;var S=new Nu(v,s,l,p);this._n.push(S);for(var F=0,J=p;F<J.length;F++){var le=J[F];this.rs=this.rs.add(new ls(le.key,v)),this.Ut.addToCollectionParentIndex(t,le.key.path.popLast())}return $t.resolve(S)},o.prototype.lookupMutationBatch=function(t,s){return $t.resolve(this.os(s))},o.prototype.getNextMutationBatchAfterBatchId=function(t,s){var p=this.cs(s+1),v=p<0?0:p;return $t.resolve(this._n.length>v?this._n[v]:null)},o.prototype.getHighestUnacknowledgedBatchId=function(){return $t.resolve(0===this._n.length?-1:this.ss-1)},o.prototype.getAllMutationBatches=function(t){return $t.resolve(this._n.slice())},o.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,s){var l=this,p=new ls(s,0),v=new ls(s,Number.POSITIVE_INFINITY),S=[];return this.rs.forEachInRange([p,v],function(F){var J=l.os(F.ns);S.push(J)}),$t.resolve(S)},o.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,s){var l=this,p=new vo(xr);return s.forEach(function(v){var S=new ls(v,0),F=new ls(v,Number.POSITIVE_INFINITY);l.rs.forEachInRange([S,F],function(J){p=p.add(J.ns)})}),$t.resolve(this.us(p))},o.prototype.getAllMutationBatchesAffectingQuery=function(t,s){var l=s.path,p=l.length+1,v=l;qn.isDocumentKey(v)||(v=v.child(""));var S=new ls(new qn(v),0),F=new vo(xr);return this.rs.forEachWhile(function(J){var le=J.key.path;return!!l.isPrefixOf(le)&&(le.length===p&&(F=F.add(J.ns)),!0)},S),$t.resolve(this.us(F))},o.prototype.us=function(t){var s=this,l=[];return t.forEach(function(p){var v=s.os(p);null!==v&&l.push(v)}),l},o.prototype.removeMutationBatch=function(t,s){var l=this;Yn(0===this.hs(s.batchId,"removed")),this._n.shift();var p=this.rs;return $t.forEach(s.mutations,function(v){var S=new ls(v.key,s.batchId);return p=p.delete(S),l.referenceDelegate.markPotentiallyOrphaned(t,v.key)}).next(function(){l.rs=p})},o.prototype.Gt=function(t){},o.prototype.containsKey=function(t,s){var l=new ls(s,0),p=this.rs.firstAfterOrEqual(l);return $t.resolve(s.isEqual(p&&p.key))},o.prototype.performConsistencyCheck=function(t){return $t.resolve()},o.prototype.hs=function(t,s){return this.cs(t)},o.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},o.prototype.os=function(t){var s=this.cs(t);return s<0||s>=this._n.length?null:this._n[s]},o}(),ug=function(){function o(t,s){this.Ut=t,this.ls=s,this.docs=new Qo(qn.comparator),this.size=0}return o.prototype.addEntry=function(t,s,l){var p=s.key,v=this.docs.get(p),S=v?v.size:0,F=this.ls(s);return this.docs=this.docs.insert(p,{document:s.clone(),size:F,readTime:l}),this.size+=F-S,this.Ut.addToCollectionParentIndex(t,p.path.popLast())},o.prototype.removeEntry=function(t){var s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)},o.prototype.getEntry=function(t,s){var l=this.docs.get(s);return $t.resolve(l?l.document.clone():Sr.newInvalidDocument(s))},o.prototype.getEntries=function(t,s){var l=this,p=Io();return s.forEach(function(v){var S=l.docs.get(v);p=p.insert(v,S?S.document.clone():Sr.newInvalidDocument(v))}),$t.resolve(p)},o.prototype.getDocumentsMatchingQuery=function(t,s,l){for(var p=Io(),v=new qn(s.path.child("")),S=this.docs.getIteratorFrom(v);S.hasNext();){var F=S.getNext(),le=F.value,pe=le.document,Re=le.readTime;if(!s.path.isPrefixOf(F.key.path))break;Re.compareTo(l)<=0||nl(s,pe)&&(p=p.insert(pe.key,pe.clone()))}return $t.resolve(p)},o.prototype.fs=function(t,s){return $t.forEach(this.docs,function(l){return s(l)})},o.prototype.newChangeBuffer=function(t){return new r_(this)},o.prototype.getSize=function(t){return $t.resolve(this.size)},o}(),r_=function(o){function t(s){var l=this;return(l=o.call(this)||this).Ie=s,l}return(0,re.ZT)(t,o),t.prototype.applyChanges=function(s){var l=this,p=[];return this.changes.forEach(function(v,S){S.document.isValidDocument()?p.push(l.Ie.addEntry(s,S.document,l.getReadTime(v))):l.Ie.removeEntry(v)}),$t.waitFor(p)},t.prototype.getFromCache=function(s,l){return this.Ie.getEntry(s,l)},t.prototype.getAllFromCache=function(s,l){return this.Ie.getEntries(s,l)},t}(m),i_=function(){function o(t){this.persistence=t,this.ds=new E(function(s){return Ko(s)},_o),this.lastRemoteSnapshotVersion=R.min(),this.highestTargetId=0,this.ws=0,this._s=new ag,this.targetCount=0,this.ys=Bu.Jt()}return o.prototype.forEachTarget=function(t,s){return this.ds.forEach(function(l,p){return s(p)}),$t.resolve()},o.prototype.getLastRemoteSnapshotVersion=function(t){return $t.resolve(this.lastRemoteSnapshotVersion)},o.prototype.getHighestSequenceNumber=function(t){return $t.resolve(this.ws)},o.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),$t.resolve(this.highestTargetId)},o.prototype.setTargetsMetadata=function(t,s,l){return l&&(this.lastRemoteSnapshotVersion=l),s>this.ws&&(this.ws=s),$t.resolve()},o.prototype.te=function(t){this.ds.set(t.target,t);var s=t.targetId;s>this.highestTargetId&&(this.ys=new Bu(s),this.highestTargetId=s),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},o.prototype.addTargetData=function(t,s){return this.te(s),this.targetCount+=1,$t.resolve()},o.prototype.updateTargetData=function(t,s){return this.te(s),$t.resolve()},o.prototype.removeTargetData=function(t,s){return this.ds.delete(s.target),this._s.Zn(s.targetId),this.targetCount-=1,$t.resolve()},o.prototype.removeTargets=function(t,s,l){var p=this,v=0,S=[];return this.ds.forEach(function(F,J){J.sequenceNumber<=s&&null===l.get(J.targetId)&&(p.ds.delete(F),S.push(p.removeMatchingKeysForTargetId(t,J.targetId)),v++)}),$t.waitFor(S).next(function(){return v})},o.prototype.getTargetCount=function(t){return $t.resolve(this.targetCount)},o.prototype.getTargetData=function(t,s){var l=this.ds.get(s)||null;return $t.resolve(l)},o.prototype.addMatchingKeys=function(t,s,l){return this._s.Jn(s,l),$t.resolve()},o.prototype.removeMatchingKeys=function(t,s,l){this._s.Xn(s,l);var p=this.persistence.referenceDelegate,v=[];return p&&s.forEach(function(S){v.push(p.markPotentiallyOrphaned(t,S))}),$t.waitFor(v)},o.prototype.removeMatchingKeysForTargetId=function(t,s){return this._s.Zn(s),$t.resolve()},o.prototype.getMatchingKeysForTargetId=function(t,s){var l=this._s.es(s);return $t.resolve(l)},o.prototype.containsKey=function(t,s){return $t.resolve(this._s.containsKey(s))},o}(),Hu=function(){function o(t,s){var l=this;this.gs={},this.Ne=new Yi(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new i_(this),this.Ut=new Hh,this.Ue=new ug(this.Ut,function(S){return l.referenceDelegate.ps(S)}),this.R=new Ns(s),this.Ke=new sg(this.R)}return o.prototype.start=function(){return Promise.resolve()},o.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(o.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),o.prototype.setDatabaseDeletedListener=function(){},o.prototype.setNetworkEnabled=function(){},o.prototype.getIndexManager=function(){return this.Ut},o.prototype.getMutationQueue=function(t){var s=this.gs[t.toKey()];return s||(s=new n_(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=s),s},o.prototype.getTargetCache=function(){return this.qe},o.prototype.getRemoteDocumentCache=function(){return this.Ue},o.prototype.getBundleCache=function(){return this.Ke},o.prototype.runTransaction=function(t,s,l){var p=this;nn("MemoryPersistence","Starting transaction:",t);var v=new o_(this.Ne.next());return this.referenceDelegate.Es(),l(v).next(function(S){return p.referenceDelegate.Ts(v).next(function(){return S})}).toPromise().then(function(S){return v.raiseOnCommittedEvent(),S})},o.prototype.Is=function(t,s){return $t.or(Object.values(this.gs).map(function(l){return function(){return l.containsKey(t,s)}}))},o}(),o_=function(o){function t(s){var l=this;return(l=o.call(this)||this).currentSequenceNumber=s,l}return(0,re.ZT)(t,o),t}(Td),lg=function(){function o(t){this.persistence=t,this.As=new ag,this.Rs=null}return o.bs=function(t){return new o(t)},Object.defineProperty(o.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Nn()},enumerable:!1,configurable:!0}),o.prototype.addReference=function(t,s,l){return this.As.addReference(l,s),this.vs.delete(l.toString()),$t.resolve()},o.prototype.removeReference=function(t,s,l){return this.As.removeReference(l,s),this.vs.add(l.toString()),$t.resolve()},o.prototype.markPotentiallyOrphaned=function(t,s){return this.vs.add(s.toString()),$t.resolve()},o.prototype.removeTarget=function(t,s){var l=this;this.As.Zn(s.targetId).forEach(function(v){return l.vs.add(v.toString())});var p=this.persistence.getTargetCache();return p.getMatchingKeysForTargetId(t,s.targetId).next(function(v){v.forEach(function(S){return l.vs.add(S.toString())})}).next(function(){return p.removeTargetData(t,s)})},o.prototype.Es=function(){this.Rs=new Set},o.prototype.Ts=function(t){var s=this,l=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $t.forEach(this.vs,function(p){var v=qn.fromPath(p);return s.Ps(t,v).next(function(S){S||l.removeEntry(v)})}).next(function(){return s.Rs=null,l.apply(t)})},o.prototype.updateLimboDocument=function(t,s){var l=this;return this.Ps(t,s).next(function(p){p?l.vs.delete(s.toString()):l.vs.add(s.toString())})},o.prototype.ps=function(t){return 0},o.prototype.Ps=function(t,s){var l=this;return $t.or([function(){return $t.resolve(l.As.containsKey(s))},function(){return l.persistence.getTargetCache().containsKey(t,s)},function(){return l.persistence.Is(t,s)}])},o}(),Ss=function(){function o(t){this.uid=t}return o.prototype.isAuthenticated=function(){return null!=this.uid},o.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},o.prototype.isEqual=function(t){return t.uid===this.uid},o}();function cg(o,t){return"firestore_clients_"+o+"_"+t}function dg(o,t,s){var l="firestore_mutations_"+o+"_"+s;return t.isAuthenticated()&&(l+="_"+t.uid),l}function Vf(o,t){return"firestore_targets_"+o+"_"+t}Ss.UNAUTHENTICATED=new Ss(null),Ss.GOOGLE_CREDENTIALS=new Ss("google-credentials-uid"),Ss.FIRST_PARTY=new Ss("first-party-uid"),Ss.MOCK_USER=new Ss("mock-user");var Uf=function(){function o(t,s,l,p){this.user=t,this.batchId=s,this.state=l,this.error=p}return o.Vs=function(t,s,l){var p,v=JSON.parse(l),S="object"==typeof v&&-1!==["pending","acknowledged","rejected"].indexOf(v.state)&&(void 0===v.error||"object"==typeof v.error);return S&&v.error&&(S="string"==typeof v.error.message&&"string"==typeof v.error.code)&&(p=new Lt(v.error.code,v.error.message)),S?new o(t,s,v.state,p):(Oi("SharedClientState","Failed to parse mutation state for ID '"+s+"': "+l),null)},o.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},o}(),Bf=function(){function o(t,s,l){this.targetId=t,this.state=s,this.error=l}return o.Vs=function(t,s){var l,p=JSON.parse(s),v="object"==typeof p&&-1!==["not-current","current","rejected"].indexOf(p.state)&&(void 0===p.error||"object"==typeof p.error);return v&&p.error&&(v="string"==typeof p.error.message&&"string"==typeof p.error.code)&&(l=new Lt(p.error.code,p.error.message)),v?new o(t,p.state,l):(Oi("SharedClientState","Failed to parse target state for ID '"+t+"': "+s),null)},o.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},o}(),hg=function(){function o(t,s){this.clientId=t,this.activeTargetIds=s}return o.Vs=function(t,s){for(var l=JSON.parse(s),p="object"==typeof l&&l.activeTargetIds instanceof Array,v=al(),S=0;p&&S<l.activeTargetIds.length;++S)p=pu(l.activeTargetIds[S]),v=v.add(l.activeTargetIds[S]);return p?new o(t,v):(Oi("SharedClientState","Failed to parse client data for instance '"+t+"': "+s),null)},o}(),s_=function(){function o(t,s){this.clientId=t,this.onlineState=s}return o.Vs=function(t){var s=JSON.parse(t);return"object"==typeof s&&-1!==["Unknown","Online","Offline"].indexOf(s.onlineState)&&"string"==typeof s.clientId?new o(s.clientId,s.onlineState):(Oi("SharedClientState","Failed to parse online state: "+t),null)},o}(),_r=function(){function o(){this.activeTargetIds=al()}return o.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},o.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},o.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},o}(),zh=function(){function o(t,s,l,p,v){this.window=t,this.Se=s,this.persistenceKey=l,this.Ns=p,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Qo(xr),this.started=!1,this.$s=[];var S=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=v,this.Os=cg(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new _r),this.Ls=new RegExp("^firestore_clients_"+S+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+S+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+S+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(F){return"firestore_bundle_loaded_"+F}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return o.yt=function(t){return!(!t||!t.localStorage)},o.prototype.start=function(){return(0,re.mG)(this,void 0,void 0,function(){var t,s,l,p,v,S,F,J,le,pe,Ge=this;return(0,re.Jh)(this,function(ft){switch(ft.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=ft.sent(),s=0,l=t;s<l.length;s++)(p=l[s])!==this.Ns&&(v=this.getItem(cg(this.persistenceKey,p)))&&(S=hg.Vs(p,v))&&(this.Fs=this.Fs.insert(S.clientId,S));for(this.Qs(),(F=this.storage.getItem(this.Us))&&(J=this.js(F))&&this.Ws(J),le=0,pe=this.$s;le<pe.length;le++)this.ks(pe[le]);return this.$s=[],this.window.addEventListener("pagehide",function(){return Ge.shutdown()}),this.started=!0,[2]}})})},o.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},o.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},o.prototype.isActiveQueryTarget=function(t){var s=!1;return this.Fs.forEach(function(l,p){p.activeTargetIds.has(t)&&(s=!0)}),s},o.prototype.addPendingMutation=function(t){this.zs(t,"pending")},o.prototype.updateMutationState=function(t,s,l){this.zs(t,s,l),this.Hs(t)},o.prototype.addLocalQueryTarget=function(t){var s="not-current";if(this.isActiveQueryTarget(t)){var l=this.storage.getItem(Vf(this.persistenceKey,t));if(l){var p=Bf.Vs(t,l);p&&(s=p.state)}}return this.Js.Ds(t),this.Qs(),s},o.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},o.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},o.prototype.clearQueryState=function(t){this.removeItem(Vf(this.persistenceKey,t))},o.prototype.updateQueryState=function(t,s,l){this.Ys(t,s,l)},o.prototype.handleUserChange=function(t,s,l){var p=this;s.forEach(function(v){p.Hs(v)}),this.currentUser=t,l.forEach(function(v){p.addPendingMutation(v)})},o.prototype.setOnlineState=function(t){this.Xs(t)},o.prototype.notifyBundleLoaded=function(){this.Zs()},o.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},o.prototype.getItem=function(t){var s=this.storage.getItem(t);return nn("SharedClientState","READ",t,s),s},o.prototype.setItem=function(t,s){nn("SharedClientState","SET",t,s),this.storage.setItem(t,s)},o.prototype.removeItem=function(t){nn("SharedClientState","REMOVE",t),this.storage.removeItem(t)},o.prototype.ks=function(t){var s=this,l=t;if(l.storageArea===this.storage){if(nn("SharedClientState","EVENT",l.key,l.newValue),l.key===this.Os)return void Oi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,re.mG)(s,void 0,void 0,function(){var p,v,S,F,J,le;return(0,re.Jh)(this,function(pe){if(this.started){if(null!==l.key)if(this.Ls.test(l.key)){if(null==l.newValue)return p=this.ti(l.key),[2,this.ei(p,null)];if(v=this.ni(l.key,l.newValue))return[2,this.ei(v.clientId,v)]}else if(this.Bs.test(l.key)){if(null!==l.newValue&&(S=this.si(l.key,l.newValue)))return[2,this.ii(S)]}else if(this.qs.test(l.key)){if(null!==l.newValue&&(F=this.ri(l.key,l.newValue)))return[2,this.oi(F)]}else if(l.key===this.Us){if(null!==l.newValue&&(J=this.js(l.newValue)))return[2,this.Ws(J)]}else if(l.key===this.Ms)(le=function(Re){var Ge=Yi.o;if(null!=Re)try{var ft=JSON.parse(Re);Yn("number"==typeof ft),Ge=ft}catch(ct){Oi("SharedClientState","Failed to read sequence number from WebStorage",ct)}return Ge}(l.newValue))!==Yi.o&&this.sequenceNumberHandler(le);else if(l.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(l);return[2]})})})}},Object.defineProperty(o.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),o.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},o.prototype.zs=function(t,s,l){var p=new Uf(this.currentUser,t,s,l),v=dg(this.persistenceKey,this.currentUser,t);this.setItem(v,p.Ss())},o.prototype.Hs=function(t){var s=dg(this.persistenceKey,this.currentUser,t);this.removeItem(s)},o.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},o.prototype.Ys=function(t,s,l){var p=Vf(this.persistenceKey,t),v=new Bf(t,s,l);this.setItem(p,v.Ss())},o.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},o.prototype.ti=function(t){var s=this.Ls.exec(t);return s?s[1]:null},o.prototype.ni=function(t,s){var l=this.ti(t);return hg.Vs(l,s)},o.prototype.si=function(t,s){var l=this.Bs.exec(t),p=Number(l[1]);return Uf.Vs(new Ss(void 0!==l[2]?l[2]:null),p,s)},o.prototype.ri=function(t,s){var l=this.qs.exec(t),p=Number(l[1]);return Bf.Vs(p,s)},o.prototype.js=function(t){return s_.Vs(t)},o.prototype.ii=function(t){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(s){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(nn("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},o.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},o.prototype.ei=function(t,s){var l=this,p=s?this.Fs.insert(t,s):this.Fs.remove(t),v=this.Gs(this.Fs),S=this.Gs(p),F=[],J=[];return S.forEach(function(le){v.has(le)||F.push(le)}),v.forEach(function(le){S.has(le)||J.push(le)}),this.syncEngine.hi(F,J).then(function(){l.Fs=p})},o.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},o.prototype.Gs=function(t){var s=al();return t.forEach(function(l,p){s=s.unionWith(p.activeTargetIds)}),s},o}(),jf=function(){function o(){this.li=new _r,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return o.prototype.addPendingMutation=function(t){},o.prototype.updateMutationState=function(t,s,l){},o.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},o.prototype.updateQueryState=function(t,s,l){this.fi[t]=s},o.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},o.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},o.prototype.clearQueryState=function(t){delete this.fi[t]},o.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},o.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},o.prototype.start=function(){return this.li=new _r,Promise.resolve()},o.prototype.handleUserChange=function(t,s,l){},o.prototype.setOnlineState=function(t){},o.prototype.shutdown=function(){},o.prototype.writeSequenceNumber=function(t){},o.prototype.notifyBundleLoaded=function(){},o}(),qh=function(){function o(){}return o.prototype.di=function(t){},o.prototype.shutdown=function(){},o}(),au=function(){function o(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return o.prototype.di=function(t){this.gi.push(t)},o.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},o.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},o.prototype._i=function(){nn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,s=this.gi;t<s.length;t++)(0,s[t])(0)},o.prototype.yi=function(){nn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,s=this.gi;t<s.length;t++)(0,s[t])(1)},o.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},o}(),fg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},a_=function(){function o(t){this.Ei=t.Ei,this.Ti=t.Ti}return o.prototype.Ii=function(t){this.Ai=t},o.prototype.Ri=function(t){this.bi=t},o.prototype.onMessage=function(t){this.vi=t},o.prototype.close=function(){this.Ti()},o.prototype.send=function(t){this.Ei(t)},o.prototype.Pi=function(){this.Ai()},o.prototype.Vi=function(t){this.bi(t)},o.prototype.Si=function(t){this.vi(t)},o}(),Hf=function(o){function t(s){var l=this;return(l=o.call(this,s)||this).forceLongPolling=s.forceLongPolling,l.autoDetectLongPolling=s.autoDetectLongPolling,l.useFetchStreams=s.useFetchStreams,l}return(0,re.ZT)(t,o),t.prototype.Fi=function(s,l,p,v){return new Promise(function(S,F){var J=new ja;J.listenOnce(Yu.COMPLETE,function(){try{switch(J.getLastErrorCode()){case Da.NO_ERROR:var pe=J.getResponseJson();nn("Connection","XHR received:",JSON.stringify(pe)),S(pe);break;case Da.TIMEOUT:nn("Connection",'RPC "'+s+'" timed out'),F(new Lt(_t.DEADLINE_EXCEEDED,"Request time out"));break;case Da.HTTP_ERROR:var Re=J.getStatus();if(nn("Connection",'RPC "'+s+'" failed with status:',Re,"response text:",J.getResponseText()),Re>0){var Ge=J.getResponseJson().error;if(Ge&&Ge.status&&Ge.message){var ft=(Et=Ge.status.toLowerCase().replace(/_/g,"-"),Object.values(_t).indexOf(Et)>=0?Et:_t.UNKNOWN);F(new Lt(ft,Ge.message))}else F(new Lt(_t.UNKNOWN,"Server responded with status "+J.getStatus()))}else F(new Lt(_t.UNAVAILABLE,"Connection failed."));break;default:Nn()}}finally{nn("Connection",'RPC "'+s+'" completed.')}var Et});var le=JSON.stringify(v);J.send(l,"POST",le,p,15)})},t.prototype.Oi=function(s,l){var p=[this.Di,"/","google.firestore.v1.Firestore","/",s,"/channel"],v=new ba,S=qi(),F={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(F.xmlHttpFactory=new Ml({})),this.ki(F.initMessageHeaders,l),(0,Ke.uI)()||(0,Ke.b$)()||(0,Ke.d)()||(0,Ke.w1)()||(0,Ke.Mn)()||(0,Ke.ru)()||(F.httpHeadersOverwriteParam="$httpHeaders");var J=p.join("");nn("Connection","Creating WebChannel: "+J,F);var le=v.createWebChannel(J,F),pe=!1,Re=!1,Ge=new a_({Ei:function(ct){Re?nn("Connection","Not sending because WebChannel is closed:",ct):(pe||(nn("Connection","Opening WebChannel transport."),le.open(),pe=!0),nn("Connection","WebChannel sending:",ct),le.send(ct))},Ti:function(){return le.close()}}),ft=function(ct,Et,en){ct.listen(Et,function(pn){try{en(pn)}catch(er){setTimeout(function(){throw er},0)}})};return ft(le,ra.EventType.OPEN,function(){Re||nn("Connection","WebChannel transport opened.")}),ft(le,ra.EventType.CLOSE,function(){Re||(Re=!0,nn("Connection","WebChannel transport closed"),Ge.Vi())}),ft(le,ra.EventType.ERROR,function(ct){Re||(Re=!0,Cs("Connection","WebChannel transport errored:",ct),Ge.Vi(new Lt(_t.UNAVAILABLE,"The operation could not be completed")))}),ft(le,ra.EventType.MESSAGE,function(ct){var Et;if(!Re){var en=ct.data[0];Yn(!!en);var er=en.error||(null===(Et=en[0])||void 0===Et?void 0:Et.error);if(er){nn("Connection","WebChannel received error:",er);var tr=er.status,Wr=function(Ni){var As=yo[Ni];if(void 0!==As)return Zc(As)}(tr),ci=er.message;void 0===Wr&&(Wr=_t.INTERNAL,ci="Unknown error status: "+tr+" with message "+er.message),Re=!0,Ge.Vi(new Lt(Wr,ci)),le.close()}else nn("Connection","WebChannel received:",en),Ge.Si(en)}}),ft(S,hu.STAT_EVENT,function(ct){ct.stat===js_PROXY?nn("Connection","Detected buffering proxy"):ct.stat===js_NOPROXY&&nn("Connection","Detected no buffering proxy")}),setTimeout(function(){Ge.Pi()},0),Ge},t}(function(){function o(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return o.prototype.Ni=function(t,s,l,p){var v=this.xi(t,s);nn("RestConnection","Sending: ",v,l);var S={};return this.ki(S,p),this.Fi(t,v,S,l).then(function(F){return nn("RestConnection","Received: ",F),F},function(F){throw Cs("RestConnection",t+" failed with error: ",F,"url: ",v,"request:",l),F})},o.prototype.$i=function(t,s,l,p){return this.Ni(t,s,l,p)},o.prototype.ki=function(t,s){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s)for(var l in s.authHeaders)s.authHeaders.hasOwnProperty(l)&&(t[l]=s.authHeaders[l])},o.prototype.xi=function(t,s){return this.Di+"/v1/"+s+":"+fg[t]},o}());function yl(){return"undefined"!=typeof window?window:null}function kd(){return"undefined"!=typeof document?document:null}function Ld(o){return new kl(o,!0)}var vh=function(){function o(t,s,l,p,v){void 0===l&&(l=1e3),void 0===p&&(p=1.5),void 0===v&&(v=6e4),this.Se=t,this.timerId=s,this.Mi=l,this.Li=p,this.Bi=v,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return o.prototype.reset=function(){this.qi=0},o.prototype.Qi=function(){this.qi=this.Bi},o.prototype.ji=function(t){var s=this;this.cancel();var l=Math.floor(this.qi+this.Wi()),p=Math.max(0,Date.now()-this.Ki),v=Math.max(0,l-p);v>0&&nn("ExponentialBackoff","Backing off for "+v+" ms (base delay: "+this.qi+" ms, delay with jitter: "+l+" ms, last attempt: "+p+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,v,function(){return s.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},o.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},o.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},o.prototype.Wi=function(){return(Math.random()-.5)*this.qi},o}(),u_=function(){function o(t,s,l,p,v,S){this.Se=t,this.zi=l,this.Hi=p,this.Ji=v,this.listener=S,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new vh(t,s)}return o.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},o.prototype.er=function(){return 2===this.state},o.prototype.start=function(){3!==this.state?this.auth():this.nr()},o.prototype.stop=function(){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},o.prototype.sr=function(){this.state=0,this.Zi.reset()},o.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},o.prototype.cr=function(t){this.ur(),this.stream.send(t)},o.prototype.rr=function(){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},o.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},o.prototype.close=function(t,s){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(l){switch(l.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():s&&s.code===_t.RESOURCE_EXHAUSTED?(Oi(s.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):s&&s.code===_t.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(s)];case 1:return l.sent(),[2]}})})},o.prototype.ar=function(){},o.prototype.auth=function(){var t=this;this.state=1;var s=this.hr(this.Yi),l=this.Yi;this.Ji.getToken().then(function(p){t.Yi===l&&t.lr(p)},function(p){s(function(){var v=new Lt(_t.UNKNOWN,"Fetching auth token failed: "+p.message);return t.dr(v)})})},o.prototype.lr=function(t){var s=this,l=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){l(function(){return s.state=2,s.listener.Ii()})}),this.stream.Ri(function(p){l(function(){return s.dr(p)})}),this.stream.onMessage(function(p){l(function(){return s.onMessage(p)})})},o.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,re.mG)(t,void 0,void 0,function(){return(0,re.Jh)(this,function(s){return this.state=0,this.start(),[2]})})})},o.prototype.dr=function(t){return nn("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},o.prototype.hr=function(t){var s=this;return function(l){s.Se.enqueueAndForget(function(){return s.Yi===t?l():(nn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},o}(),pg=function(o){function t(s,l,p,v,S){var F=this;return(F=o.call(this,s,"listen_stream_connection_backoff","listen_stream_idle",l,p,S)||this).R=v,F}return(0,re.ZT)(t,o),t.prototype.wr=function(s){return this.Hi.Oi("Listen",s)},t.prototype.onMessage=function(s){this.Zi.reset();var l=function(v,S){var F,en;if("targetChange"in S){var J="NO_CHANGE"===(en=S.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===en?1:"REMOVE"===en?2:"CURRENT"===en?3:"RESET"===en?4:Nn(),le=S.targetChange.targetIds||[],pe=function(en,pn){return en.I?(Yn(void 0===pn||"string"==typeof pn),rr.fromBase64String(pn||"")):(Yn(void 0===pn||pn instanceof Uint8Array),rr.fromUint8Array(pn||new Uint8Array))}(v,S.targetChange.resumeToken),Re=(Ge=S.targetChange.cause)&&function(en){var pn=void 0===en.code?_t.UNKNOWN:Zc(en.code);return new Lt(pn,en.message||"")}(Ge);F=new lh(J,le,pe,Re||null)}else if("documentChange"in S){le=Fa(v,(J=S.documentChange).document.name),pe=Bi(J.document.updateTime);var Ge=new li({mapValue:{fields:J.document.fields}}),ft=(Re=Sr.newFoundDocument(le,pe,Ge),J.targetIds||[]);F=new dc(ft,J.removedTargetIds||[],Re.key,Re)}else if("documentDelete"in S)le=Fa(v,(J=S.documentDelete).document),pe=J.readTime?Bi(J.readTime):R.min(),Ge=Sr.newNoDocument(le,pe),F=new dc([],Re=J.removedTargetIds||[],Ge.key,Ge);else if("documentRemove"in S)le=Fa(v,(J=S.documentRemove).document),F=new dc([],pe=J.removedTargetIds||[],le,null);else{if(!("filter"in S))return Nn();var Et=S.filter;le=new jo(J=Et.count||0),F=new uh(pe=Et.targetId,le)}return F}(this.R,s),p=function(v){if(!("targetChange"in v))return R.min();var S=v.targetChange;return S.targetIds&&S.targetIds.length?R.min():S.readTime?Bi(S.readTime):R.min()}(s);return this.listener._r(l,p)},t.prototype.mr=function(s){var v,S,F,J,l={};l.database=la(this.R),l.addTarget=(v=this.R,(F=qs(J=(S=s).target)?{documents:fc(v,J)}:{query:pc(v,J)}).targetId=S.targetId,S.resumeToken.approximateByteSize()>0?F.resumeToken=Cd(v,S.resumeToken):S.snapshotVersion.compareTo(R.min())>0&&(F.readTime=Jo(v,S.snapshotVersion.toTimestamp())),F);var p=function(v,S){var F=function(J,le){switch(le){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Nn()}}(0,S.purpose);return null==F?null:{"goog-listen-tags":F}}(0,s);p&&(l.labels=p),this.cr(l)},t.prototype.yr=function(s){var l={};l.database=la(this.R),l.removeTarget=s,this.cr(l)},t}(u_),fv=function(o){function t(s,l,p,v,S){var F=this;return(F=o.call(this,s,"write_stream_connection_backoff","write_stream_idle",l,p,S)||this).R=v,F.gr=!1,F}return(0,re.ZT)(t,o),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,o.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(s){return this.Hi.Oi("Write",s)},t.prototype.onMessage=function(s){if(Yn(!!s.streamToken),this.lastStreamToken=s.streamToken,this.gr){this.Zi.reset();var l=(S=s.commitTime,(v=s.writeResults)&&v.length>0?(Yn(void 0!==S),v.map(function(F){return le=S,(pe=Bi((J=F).updateTime?J.updateTime:le)).isEqual(R.min())&&(pe=Bi(le)),new Gc(pe,J.transformResults||[]);var J,le,pe})):[]),p=Bi(s.commitTime);return this.listener.Tr(p,l)}var v,S;return Yn(!s.writeResults||0===s.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var s={};s.database=la(this.R),this.cr(s)},t.prototype.Er=function(s){var l=this,p={streamToken:this.lastStreamToken,writes:s.map(function(v){return Yc(l.R,v)})};this.cr(p)},t}(u_),Gl=function(o){function t(s,l,p){var v=this;return(v=o.call(this)||this).credentials=s,v.Hi=l,v.R=p,v.Rr=!1,v}return(0,re.ZT)(t,o),t.prototype.br=function(){if(this.Rr)throw new Lt(_t.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(s,l,p){var v=this;return this.br(),this.credentials.getToken().then(function(S){return v.Hi.Ni(s,l,p,S)}).catch(function(S){throw"FirebaseError"===S.name?(S.code===_t.UNAUTHENTICATED&&v.credentials.invalidateToken(),S):new Lt(_t.UNKNOWN,S.toString())})},t.prototype.$i=function(s,l,p){var v=this;return this.br(),this.credentials.getToken().then(function(S){return v.Hi.$i(s,l,p,S)}).catch(function(S){throw"FirebaseError"===S.name?(S.code===_t.UNAUTHENTICATED&&v.credentials.invalidateToken(),S):new Lt(_t.UNKNOWN,S.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),Zh=function(){function o(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return o.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},o.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},o.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},o.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},o.prototype.Cr=function(t){var s="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Oi(s),this.Vr=!1):nn("OnlineStateTracker",s)},o.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},o}(),$h=function(o,t,s,l,p){var v=this;this.localStore=o,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=p,this.Lr.di(function(S){s.enqueueAndForget(function(){return(0,re.mG)(v,void 0,void 0,function(){return(0,re.Jh)(this,function(F){switch(F.label){case 0:return zl(this)?(nn("RemoteStore","Restarting streams for network reachability change."),[4,function(J){return(0,re.mG)(this,void 0,void 0,function(){var le;return(0,re.Jh)(this,function(pe){switch(pe.label){case 0:return(le=an(J)).Or.add(4),[4,bh(le)];case 1:return pe.sent(),le.Br.set("Unknown"),le.Or.delete(4),[4,ed(le)];case 2:return pe.sent(),[2]}})})}(this)]):[3,2];case 1:F.sent(),F.label=2;case 2:return[2]}})})})}),this.Br=new Zh(s,l)};function ed(o){return(0,re.mG)(this,void 0,void 0,function(){var t,s;return(0,re.Jh)(this,function(l){switch(l.label){case 0:if(!zl(o))return[3,4];t=0,s=o.Mr,l.label=1;case 1:return t<s.length?[4,(0,s[t])(!0)]:[3,4];case 2:l.sent(),l.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function bh(o){return(0,re.mG)(this,void 0,void 0,function(){var t,s;return(0,re.Jh)(this,function(l){switch(l.label){case 0:t=0,s=o.Mr,l.label=1;case 1:return t<s.length?[4,(0,s[t])(!1)]:[3,4];case 2:l.sent(),l.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Wh(o,t){var s=an(o);s.$r.has(t.targetId)||(s.$r.set(t.targetId,t),Yh(s)?_g(s):Dc(s).er()&&gg(s,t))}function Vd(o,t){var s=an(o),l=Dc(s);s.$r.delete(t),l.er()&&mg(s,t),0===s.$r.size&&(l.er()?l.ir():zl(s)&&s.Br.set("Unknown"))}function gg(o,t){o.qr.U(t.targetId),Dc(o).mr(t)}function mg(o,t){o.qr.U(t),Dc(o).yr(t)}function _g(o){o.qr=new Nl({getRemoteKeysForTarget:function(t){return o.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return o.$r.get(t)||null}}),Dc(o).start(),o.Br.Sr()}function Yh(o){return zl(o)&&!Dc(o).tr()&&o.$r.size>0}function zl(o){return 0===an(o).Or.size}function yg(o){o.qr=void 0}function Gf(o){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(t){return o.$r.forEach(function(s,l){gg(o,s)}),[2]})})}function pv(o,t){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(s){return yg(o),Yh(o)?(o.Br.Nr(t),_g(o)):o.Br.set("Unknown"),[2]})})}function gv(o,t,s){return(0,re.mG)(this,void 0,void 0,function(){var l,p,v;return(0,re.Jh)(this,function(S){switch(S.label){case 0:if(o.Br.set("Online"),!(t instanceof lh&&2===t.state&&t.cause))return[3,6];S.label=1;case 1:return S.trys.push([1,3,,5]),[4,function(F,J){return(0,re.mG)(this,void 0,void 0,function(){var le,pe,Re,Ge;return(0,re.Jh)(this,function(ft){switch(ft.label){case 0:le=J.cause,pe=0,Re=J.targetIds,ft.label=1;case 1:return pe<Re.length?F.$r.has(Ge=Re[pe])?[4,F.remoteSyncer.rejectListen(Ge,le)]:[3,3]:[3,5];case 2:ft.sent(),F.$r.delete(Ge),F.qr.removeTarget(Ge),ft.label=3;case 3:ft.label=4;case 4:return pe++,[3,1];case 5:return[2]}})})}(o,t)];case 2:return S.sent(),[3,5];case 3:return l=S.sent(),nn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),l),[4,zf(o,l)];case 4:return S.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof dc?o.qr.X(t):t instanceof uh?o.qr.rt(t):o.qr.et(t),s.isEqual(R.min()))return[3,13];S.label=7;case 7:return S.trys.push([7,11,,13]),[4,oo(o.localStore)];case 8:return p=S.sent(),s.compareTo(p)>=0?[4,(F=o,J=s,le=F.qr.ut(J),le.targetChanges.forEach(function(pe,Re){if(pe.resumeToken.approximateByteSize()>0){var Ge=F.$r.get(Re);Ge&&F.$r.set(Re,Ge.withResumeToken(pe.resumeToken,J))}}),le.targetMismatches.forEach(function(pe){var Re=F.$r.get(pe);if(Re){F.$r.set(pe,Re.withResumeToken(rr.EMPTY_BYTE_STRING,Re.snapshotVersion)),mg(F,pe);var Ge=new Cc(Re.target,pe,1,Re.sequenceNumber);gg(F,Ge)}}),F.remoteSyncer.applyRemoteEvent(le))]:[3,10];case 9:S.sent(),S.label=10;case 10:return[3,13];case 11:return nn("RemoteStore","Failed to raise snapshot:",v=S.sent()),[4,zf(o,v)];case 12:return S.sent(),[3,13];case 13:return[2]}var F,J,le})})}function zf(o,t,s){return(0,re.mG)(this,void 0,void 0,function(){var l=this;return(0,re.Jh)(this,function(p){switch(p.label){case 0:if(!hl(t))throw t;return o.Or.add(1),[4,bh(o)];case 1:return p.sent(),o.Br.set("Offline"),s||(s=function(){return oo(o.localStore)}),o.asyncQueue.enqueueRetryable(function(){return(0,re.mG)(l,void 0,void 0,function(){return(0,re.Jh)(this,function(v){switch(v.label){case 0:return nn("RemoteStore","Retrying IndexedDB access"),[4,s()];case 1:return v.sent(),o.Or.delete(1),[4,ed(o)];case 2:return v.sent(),[2]}})})}),[2]}})})}function l_(o,t){return t().catch(function(s){return zf(o,s,t)})}function Ch(o){return(0,re.mG)(this,void 0,void 0,function(){var t,s,l,p,v;return(0,re.Jh)(this,function(S){switch(S.label){case 0:t=an(o),s=Tc(t),l=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,S.label=1;case 1:if(!(zl(F=t)&&F.Fr.length<10))return[3,7];S.label=2;case 2:return S.trys.push([2,4,,6]),[4,Nd(t.localStore,l)];case 3:return null===(p=S.sent())?(0===t.Fr.length&&s.ir(),[3,7]):(l=p.batchId,function(F,J){F.Fr.push(J);var le=Tc(F);le.er()&&le.pr&&le.Er(J.mutations)}(t,p),[3,6]);case 4:return v=S.sent(),[4,zf(t,v)];case 5:return S.sent(),[3,6];case 6:return[3,1];case 7:return c_(t)&&d_(t),[2]}var F})})}function c_(o){return zl(o)&&!Tc(o).tr()&&o.Fr.length>0}function d_(o){Tc(o).start()}function mv(o){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(t){return Tc(o).Ar(),[2]})})}function _v(o){return(0,re.mG)(this,void 0,void 0,function(){var t,s,l;return(0,re.Jh)(this,function(v){for(t=Tc(o),s=0,l=o.Fr;s<l.length;s++)t.Er(l[s].mutations);return[2]})})}function yv(o,t,s){return(0,re.mG)(this,void 0,void 0,function(){var l,p;return(0,re.Jh)(this,function(v){switch(v.label){case 0:return l=o.Fr.shift(),p=pl.from(l,t,s),[4,l_(o,function(){return o.remoteSyncer.applySuccessfulWrite(p)})];case 1:return v.sent(),[4,Ch(o)];case 2:return v.sent(),[2]}})})}function vv(o,t){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(s){switch(s.label){case 0:return t&&Tc(o).pr?[4,function(l,p){return(0,re.mG)(this,void 0,void 0,function(){var v,S;return(0,re.Jh)(this,function(F){switch(F.label){case 0:return qc(S=p.code)&&S!==_t.ABORTED?(v=l.Fr.shift(),Tc(l).sr(),[4,l_(l,function(){return l.remoteSyncer.rejectFailedWrite(v.batchId,p)})]):[3,3];case 1:return F.sent(),[4,Ch(l)];case 2:F.sent(),F.label=3;case 3:return[2]}})})}(o,t)]:[3,2];case 1:s.sent(),s.label=2;case 2:return c_(o)&&d_(o),[2]}})})}function vl(o,t){return(0,re.mG)(this,void 0,void 0,function(){var s;return(0,re.Jh)(this,function(l){switch(l.label){case 0:return s=an(o),t?(s.Or.delete(2),[4,ed(s)]):[3,2];case 1:return l.sent(),[3,5];case 2:return t?[3,4]:(s.Or.add(2),[4,bh(s)]);case 3:l.sent(),s.Br.set("Unknown"),l.label=4;case 4:l.label=5;case 5:return[2]}})})}function Dc(o){var s,l,p,v,t=this;return o.Ur||(o.Ur=(s=o.datastore,l=o.asyncQueue,p={Ii:Gf.bind(null,o),Ri:pv.bind(null,o),_r:gv.bind(null,o)},(v=an(s)).br(),new pg(l,v.Hi,v.credentials,v.R,p)),o.Mr.push(function(s){return(0,re.mG)(t,void 0,void 0,function(){return(0,re.Jh)(this,function(l){switch(l.label){case 0:return s?(o.Ur.sr(),Yh(o)?_g(o):o.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,o.Ur.stop()];case 2:l.sent(),yg(o),l.label=3;case 3:return[2]}})})})),o.Ur}function Tc(o){var s,l,p,v,t=this;return o.Kr||(o.Kr=(s=o.datastore,l=o.asyncQueue,p={Ii:mv.bind(null,o),Ri:vv.bind(null,o),Ir:_v.bind(null,o),Tr:yv.bind(null,o)},(v=an(s)).br(),new fv(l,v.Hi,v.credentials,v.R,p)),o.Mr.push(function(s){return(0,re.mG)(t,void 0,void 0,function(){return(0,re.Jh)(this,function(l){switch(l.label){case 0:return s?(o.Kr.sr(),[4,Ch(o)]):[3,2];case 1:return l.sent(),[3,4];case 2:return[4,o.Kr.stop()];case 3:l.sent(),o.Fr.length>0&&(nn("RemoteStore","Stopping write stream with "+o.Fr.length+" pending writes"),o.Fr=[]),l.label=4;case 4:return[2]}})})})),o.Kr}var vg=function(){function o(t,s,l,p,v){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=l,this.op=p,this.removalCallback=v,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(S){})}return o.createAndSchedule=function(t,s,l,p,v){var S=new o(t,s,Date.now()+l,p,v);return S.start(l),S},o.prototype.start=function(t){var s=this;this.timerHandle=setTimeout(function(){return s.handleDelayElapsed()},t)},o.prototype.skipDelay=function(){return this.handleDelayElapsed()},o.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lt(_t.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},o.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(s){return t.deferred.resolve(s)})):Promise.resolve()})},o.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},o}();function Sc(o,t){if(Oi("AsyncQueue",t+": "+o),hl(o))return new Lt(_t.UNAVAILABLE,t+": "+o);throw o}var qf=function(){function o(t){this.comparator=t?function(s,l){return t(s,l)||qn.comparator(s.key,l.key)}:function(s,l){return qn.comparator(s.key,l.key)},this.keyedMap=lc(),this.sortedSet=new Qo(this.comparator)}return o.emptySet=function(t){return new o(t.comparator)},o.prototype.has=function(t){return null!=this.keyedMap.get(t)},o.prototype.get=function(t){return this.keyedMap.get(t)},o.prototype.first=function(){return this.sortedSet.minKey()},o.prototype.last=function(){return this.sortedSet.maxKey()},o.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},o.prototype.indexOf=function(t){var s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1},Object.defineProperty(o.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),o.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(s,l){return t(s),!1})},o.prototype.add=function(t){var s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))},o.prototype.delete=function(t){var s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this},o.prototype.isEqual=function(t){if(!(t instanceof o)||this.size!==t.size)return!1;for(var s=this.sortedSet.getIterator(),l=t.sortedSet.getIterator();s.hasNext();){var p=s.getNext().key,v=l.getNext().key;if(!p.isEqual(v))return!1}return!0},o.prototype.toString=function(){var t=[];return this.forEach(function(s){t.push(s.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},o.prototype.copy=function(t,s){var l=new o;return l.comparator=this.comparator,l.keyedMap=t,l.sortedSet=s,l},o}(),Kh=function(){function o(){this.Qr=new Qo(qn.comparator)}return o.prototype.track=function(t){var s=t.doc.key,l=this.Qr.get(s);l?0!==t.type&&3===l.type?this.Qr=this.Qr.insert(s,t):3===t.type&&1!==l.type?this.Qr=this.Qr.insert(s,{type:l.type,doc:t.doc}):2===t.type&&2===l.type?this.Qr=this.Qr.insert(s,{type:2,doc:t.doc}):2===t.type&&0===l.type?this.Qr=this.Qr.insert(s,{type:0,doc:t.doc}):1===t.type&&0===l.type?this.Qr=this.Qr.remove(s):1===t.type&&2===l.type?this.Qr=this.Qr.insert(s,{type:1,doc:l.doc}):0===t.type&&1===l.type?this.Qr=this.Qr.insert(s,{type:2,doc:t.doc}):Nn():this.Qr=this.Qr.insert(s,t)},o.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(s,l){t.push(l)}),t},o}(),Qh=function(){function o(t,s,l,p,v,S,F,J){this.query=t,this.docs=s,this.oldDocs=l,this.docChanges=p,this.mutatedKeys=v,this.fromCache=S,this.syncStateChanged=F,this.excludesMetadataChanges=J}return o.fromInitialDocuments=function(t,s,l,p){var v=[];return s.forEach(function(S){v.push({type:0,doc:S})}),new o(t,s,qf.emptySet(s),v,l,p,!0,!1)},Object.defineProperty(o.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Rl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var s=this.docChanges,l=t.docChanges;if(s.length!==l.length)return!1;for(var p=0;p<s.length;p++)if(s[p].type!==l[p].type||!s[p].doc.isEqual(l[p].doc))return!1;return!0},o}(),Ac=function(){this.Wr=void 0,this.listeners=[]},bg=function(){this.queries=new E(function(o){return Hc(o)},Rl),this.onlineState="Unknown",this.Gr=new Set};function Zf(o,t){return(0,re.mG)(this,void 0,void 0,function(){var s,l,p,v,S,F,J;return(0,re.Jh)(this,function(le){switch(le.label){case 0:if(s=an(o),p=!1,(v=s.queries.get(l=t.query))||(p=!0,v=new Ac),!p)return[3,4];le.label=1;case 1:return le.trys.push([1,3,,4]),S=v,[4,s.onListen(l)];case 2:return S.Wr=le.sent(),[3,4];case 3:return F=le.sent(),J=Sc(F,"Initialization of query '"+ac(t.query)+"' failed"),[2,void t.onError(J)];case 4:return s.queries.set(l,v),v.listeners.push(t),t.zr(s.onlineState),v.Wr&&t.Hr(v.Wr)&&Jh(s),[2]}})})}function Cg(o,t){return(0,re.mG)(this,void 0,void 0,function(){var s,l,p,v,S;return(0,re.Jh)(this,function(F){return s=an(o),p=!1,(v=s.queries.get(l=t.query))&&(S=v.listeners.indexOf(t))>=0&&(v.listeners.splice(S,1),p=0===v.listeners.length),p?[2,(s.queries.delete(l),s.onUnlisten(l))]:[2]})})}function $f(o,t){for(var s=an(o),l=!1,p=0,v=t;p<v.length;p++){var S=v[p],J=s.queries.get(S.query);if(J){for(var le=0,pe=J.listeners;le<pe.length;le++)pe[le].Hr(S)&&(l=!0);J.Wr=S}}l&&Jh(s)}function h_(o,t,s){var l=an(o),p=l.queries.get(t);if(p)for(var v=0,S=p.listeners;v<S.length;v++)S[v].onError(s);l.queries.delete(t)}function Jh(o){o.Gr.forEach(function(t){t.next()})}var Wf=function(){function o(t,s,l){this.query=t,this.Jr=s,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=l||{}}return o.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var s=[],l=0,p=t.docChanges;l<p.length;l++){var v=p[l];3!==v.type&&s.push(v)}t=new Qh(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var S=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),S=!0):this.eo(t,this.onlineState)&&(this.no(t),S=!0),this.Xr=t,S},o.prototype.onError=function(t){this.Jr.error(t)},o.prototype.zr=function(t){this.onlineState=t;var s=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),s=!0),s},o.prototype.eo=function(t,s){return!t.fromCache||!(this.options.so&&"Offline"!==s||t.docs.isEmpty()&&"Offline"!==s)},o.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},o.prototype.no=function(t){t=Qh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},o}(),f_=function(){function o(t,s){this.payload=t,this.byteLength=s}return o.prototype.io=function(){return"metadata"in this.payload},o}(),Ud=function(){function o(t){this.R=t}return o.prototype.qn=function(t){return Fa(this.R,t)},o.prototype.Un=function(t){return t.metadata.exists?Bh(this.R,t.document,!1):Sr.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},o.prototype.Kn=function(t){return Bi(t)},o}();!function(){function o(t,s,l){this.ro=t,this.localStore=s,this.R=l,this.queries=[],this.documents=[],this.progress=function(o){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:o.totalDocuments,totalBytes:o.totalBytes}}(t)}o.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var s=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++s):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++s),s!==this.progress.documentsLoaded?(this.progress.documentsLoaded=s,Object.assign({},this.progress)):null},o.prototype.co=function(t){for(var s=new Map,l=new Ud(this.R),p=0,v=t;p<v.length;p++){var S=v[p];if(S.metadata.queries)for(var F=l.qn(S.metadata.name),J=0,le=S.metadata.queries;J<le.length;J++){var pe=le[J],Re=(s.get(pe)||zr()).add(F);s.set(pe,Re)}}return s},o.prototype.complete=function(){return(0,re.mG)(this,void 0,void 0,function(){var t,s,l,p,v;return(0,re.Jh)(this,function(S){switch(S.label){case 0:return[4,og(this.localStore,new Ud(this.R),this.documents,this.ro.id)];case 1:t=S.sent(),s=this.co(this.documents),l=0,p=this.queries,S.label=2;case 2:return l<p.length?[4,Lf(this.localStore,v=p[l],s.get(v.name))]:[3,5];case 3:S.sent(),S.label=4;case 4:return l++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Ne(Object.assign({},this.progress),t))]}})})}}();var td=function(o){this.key=o},jd=function(o){this.key=o},nd=function(){function o(t,s){this.query=t,this.uo=s,this.ao=null,this.current=!1,this.ho=zr(),this.mutatedKeys=zr(),this.lo=rl(t),this.fo=new qf(this.lo)}return Object.defineProperty(o.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),o.prototype._o=function(t,s){var l=this,p=s?s.mo:new Kh,v=s?s.fo:this.fo,S=s?s.mutatedKeys:this.mutatedKeys,F=v,J=!1,le=vu(this.query)&&v.size===this.query.limit?v.last():null,pe=Ma(this.query)&&v.size===this.query.limit?v.first():null;if(t.inorderTraversal(function(Ge,ft){var ct=v.get(Ge),Et=nl(l.query,ft)?ft:null,en=!!ct&&l.mutatedKeys.has(ct.key),pn=!!Et&&(Et.hasLocalMutations||l.mutatedKeys.has(Et.key)&&Et.hasCommittedMutations),er=!1;ct&&Et?ct.data.isEqual(Et.data)?en!==pn&&(p.track({type:3,doc:Et}),er=!0):l.yo(ct,Et)||(p.track({type:2,doc:Et}),er=!0,(le&&l.lo(Et,le)>0||pe&&l.lo(Et,pe)<0)&&(J=!0)):!ct&&Et?(p.track({type:0,doc:Et}),er=!0):ct&&!Et&&(p.track({type:1,doc:ct}),er=!0,(le||pe)&&(J=!0)),er&&(Et?(F=F.add(Et),S=pn?S.add(Ge):S.delete(Ge)):(F=F.delete(Ge),S=S.delete(Ge)))}),vu(this.query)||Ma(this.query))for(;F.size>this.query.limit;){var Re=vu(this.query)?F.last():F.first();F=F.delete(Re.key),S=S.delete(Re.key),p.track({type:1,doc:Re})}return{fo:F,mo:p,Nn:J,mutatedKeys:S}},o.prototype.yo=function(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations},o.prototype.applyChanges=function(t,s,l){var p=this,v=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var S=t.mo.jr();S.sort(function(pe,Re){return ft=Re.type,(ct=function(Et){switch(Et){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nn()}})(pe.type)-ct(ft)||p.lo(pe.doc,Re.doc);var ft,ct}),this.po(l);var F=s?this.Eo():[],J=0===this.ho.size&&this.current?1:0,le=J!==this.ao;return this.ao=J,0!==S.length||le?{snapshot:new Qh(this.query,t.fo,v,S,t.mutatedKeys,0===J,le,!1),To:F}:{To:F}},o.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Kh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},o.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},o.prototype.po=function(t){var s=this;t&&(t.addedDocuments.forEach(function(l){return s.uo=s.uo.add(l)}),t.modifiedDocuments.forEach(function(l){}),t.removedDocuments.forEach(function(l){return s.uo=s.uo.delete(l)}),this.current=t.current)},o.prototype.Eo=function(){var t=this;if(!this.current)return[];var s=this.ho;this.ho=zr(),this.fo.forEach(function(p){t.Io(p.key)&&(t.ho=t.ho.add(p.key))});var l=[];return s.forEach(function(p){t.ho.has(p)||l.push(new jd(p))}),this.ho.forEach(function(p){s.has(p)||l.push(new td(p))}),l},o.prototype.Ao=function(t){this.uo=t.Bn,this.ho=zr();var s=this._o(t.documents);return this.applyChanges(s,!0)},o.prototype.Ro=function(){return Qh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},o}(),p_=function(o,t,s){this.query=o,this.targetId=t,this.view=s},Eg=function(o){this.key=o,this.bo=!1},wg=function(){function o(t,s,l,p,v,S){this.localStore=t,this.remoteStore=s,this.eventManager=l,this.sharedClientState=p,this.currentUser=v,this.maxConcurrentLimboResolutions=S,this.vo={},this.Po=new E(function(F){return Hc(F)},Rl),this.Vo=new Map,this.So=new Set,this.Do=new Qo(qn.comparator),this.Co=new Map,this.No=new ag,this.xo={},this.ko=new Map,this.Fo=Bu.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(o.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),o}();function Yf(o,t){return(0,re.mG)(this,void 0,void 0,function(){var s,p,v,S,F;return(0,re.Jh)(this,function(J){switch(J.label){case 0:return s=ep(o),(v=s.Po.get(t))?(s.sharedClientState.addLocalQueryTarget(v.targetId),p=v.view.Ro(),[3,4]):[3,1];case 1:return[4,ou(s.localStore,Bo(t))];case 2:return S=J.sent(),F=s.sharedClientState.addLocalQueryTarget(S.targetId),[4,Eh(s,t,S.targetId,"current"===F)];case 3:p=J.sent(),s.isPrimaryClient&&Wh(s.remoteStore,S),J.label=4;case 4:return[2,p]}})})}function Eh(o,t,s,l){return(0,re.mG)(this,void 0,void 0,function(){var p,v,S,F,J,le;return(0,re.Jh)(this,function(pe){switch(pe.label){case 0:return o.Oo=function(Re,Ge,ft){return function(ct,Et,en,pn){return(0,re.mG)(this,void 0,void 0,function(){var er,tr,Wr;return(0,re.Jh)(this,function(ci){switch(ci.label){case 0:return(er=Et.view._o(en)).Nn?[4,Gh(ct.localStore,Et.query,!1).then(function(Ni){return Et.view._o(Ni.documents,er)})]:[3,2];case 1:er=ci.sent(),ci.label=2;case 2:return tr=pn&&pn.targetChanges.get(Et.targetId),Wr=Et.view.applyChanges(er,ct.isPrimaryClient,tr),[2,(Jf(ct,Et.targetId,Wr.To),Wr.snapshot)]}})})}(o,Re,Ge,ft)},[4,Gh(o.localStore,t,!0)];case 1:return p=pe.sent(),v=new nd(t,p.Bn),S=v._o(p.documents),F=vd.createSynthesizedTargetChangeForCurrentChange(s,l&&"Offline"!==o.onlineState),J=v.applyChanges(S,o.isPrimaryClient,F),Jf(o,s,J.To),le=new p_(t,s,v),[2,(o.Po.set(t,le),o.Vo.has(s)?o.Vo.get(s).push(t):o.Vo.set(s,[t]),J.snapshot)]}})})}function Dg(o,t){return(0,re.mG)(this,void 0,void 0,function(){var s,l,p;return(0,re.Jh)(this,function(v){switch(v.label){case 0:return s=an(o),l=s.Po.get(t),(p=s.Vo.get(l.targetId)).length>1?[2,(s.Vo.set(l.targetId,p.filter(function(S){return!Rl(S,t)})),void s.Po.delete(t))]:s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)?[3,2]:[4,su(s.localStore,l.targetId,!1).then(function(){s.sharedClientState.clearQueryState(l.targetId),Vd(s.remoteStore,l.targetId),Hd(s,l.targetId)}).catch(iu)]):[3,3];case 1:v.sent(),v.label=2;case 2:return[3,5];case 3:return Hd(s,l.targetId),[4,su(s.localStore,l.targetId,!0)];case 4:v.sent(),v.label=5;case 5:return[2]}})})}function ef(o,t,s){return(0,re.mG)(this,void 0,void 0,function(){var l,p,v,S;return(0,re.Jh)(this,function(F){switch(F.label){case 0:l=tp(o),F.label=1;case 1:return F.trys.push([1,5,,6]),[4,(J=l.localStore,le=t,Re=an(J),Ge=U.now(),ft=le.reduce(function(ct,Et){return ct.add(Et.key)},zr()),Re.persistence.runTransaction("Locally write mutations","readwrite",function(ct){return Re.Mn.pn(ct,ft).next(function(Et){pe=Et;for(var en=[],pn=0,er=le;pn<er.length;pn++){var tr=er[pn],Wr=Su(tr,pe.get(tr.key));null!=Wr&&en.push(new ws(tr.key,Wr,zs(Wr.value.mapValue),Ao.exists(!0)))}return Re._n.addMutationBatch(ct,Ge,en,le)})}).then(function(ct){return ct.applyToLocalDocumentSet(pe),{batchId:ct.batchId,changes:pe}}))];case 2:return p=F.sent(),l.sharedClientState.addPendingMutation(p.batchId),function(J,le,pe){var Re=J.xo[J.currentUser.toKey()];Re||(Re=new Qo(xr)),Re=Re.insert(le,pe),J.xo[J.currentUser.toKey()]=Re}(l,p.batchId,s),[4,Ic(l,p.changes)];case 3:return F.sent(),[4,Ch(l.remoteStore)];case 4:return F.sent(),[3,6];case 5:return v=F.sent(),S=Sc(v,"Failed to persist write"),s.reject(S),[3,6];case 6:return[2]}var J,le,pe,Re,Ge,ft})})}function Tg(o,t){return(0,re.mG)(this,void 0,void 0,function(){var s,l;return(0,re.Jh)(this,function(p){switch(p.label){case 0:s=an(o),p.label=1;case 1:return p.trys.push([1,4,,6]),[4,Na(s.localStore,t)];case 2:return l=p.sent(),t.targetChanges.forEach(function(v,S){var F=s.Co.get(S);F&&(Yn(v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size<=1),v.addedDocuments.size>0?F.bo=!0:v.modifiedDocuments.size>0?Yn(F.bo):v.removedDocuments.size>0&&(Yn(F.bo),F.bo=!1))}),[4,Ic(s,l,t)];case 3:return p.sent(),[3,6];case 4:return[4,iu(p.sent())];case 5:return p.sent(),[3,6];case 6:return[2]}})})}function Kf(o,t,s){var l=an(o);if(l.isPrimaryClient&&0===s||!l.isPrimaryClient&&1===s){var p=[];l.Po.forEach(function(v,S){var F=S.view.zr(t);F.snapshot&&p.push(F.snapshot)}),function(v,S){var F=an(v);F.onlineState=S;var J=!1;F.queries.forEach(function(le,pe){for(var Re=0,Ge=pe.listeners;Re<Ge.length;Re++)Ge[Re].zr(S)&&(J=!0)}),J&&Jh(F)}(l.eventManager,t),p.length&&l.vo._r(p),l.onlineState=t,l.isPrimaryClient&&l.sharedClientState.setOnlineState(t)}}function bv(o,t,s){return(0,re.mG)(this,void 0,void 0,function(){var l,p,v,S,F,J;return(0,re.Jh)(this,function(le){switch(le.label){case 0:return(l=an(o)).sharedClientState.updateQueryState(t,"rejected",s),p=l.Co.get(t),(v=p&&p.key)?(S=(S=new Qo(qn.comparator)).insert(v,Sr.newNoDocument(v,R.min())),F=zr().add(v),J=new yd(R.min(),new Map,new vo(xr),S,F),[4,Tg(l,J)]):[3,2];case 1:return le.sent(),l.Do=l.Do.remove(v),l.Co.delete(t),Ig(l),[3,4];case 2:return[4,su(l.localStore,t,!1).then(function(){return Hd(l,t,s)}).catch(iu)];case 3:le.sent(),le.label=4;case 4:return[2]}})})}function Sg(o,t){return(0,re.mG)(this,void 0,void 0,function(){var s,l,p;return(0,re.Jh)(this,function(v){switch(v.label){case 0:s=an(o),l=t.batch.batchId,v.label=1;case 1:return v.trys.push([1,4,,6]),[4,Cr(s.localStore,t)];case 2:return p=v.sent(),Qf(s,l,null),tf(s,l),s.sharedClientState.updateMutationState(l,"acknowledged"),[4,Ic(s,p)];case 3:return v.sent(),[3,6];case 4:return[4,iu(v.sent())];case 5:return v.sent(),[3,6];case 6:return[2]}})})}function Ag(o,t,s){return(0,re.mG)(this,void 0,void 0,function(){var l,p;return(0,re.Jh)(this,function(v){switch(v.label){case 0:l=an(o),v.label=1;case 1:return v.trys.push([1,4,,6]),[4,(S=l.localStore,F=t,J=an(S),J.persistence.runTransaction("Reject batch","readwrite-primary",function(le){var pe;return J._n.lookupMutationBatch(le,F).next(function(Re){return Yn(null!==Re),pe=Re.keys(),J._n.removeMutationBatch(le,Re)}).next(function(){return J._n.performConsistencyCheck(le)}).next(function(){return J.Mn.pn(le,pe)})}))];case 2:return p=v.sent(),Qf(l,t,s),tf(l,t),l.sharedClientState.updateMutationState(t,"rejected",s),[4,Ic(l,p)];case 3:return v.sent(),[3,6];case 4:return[4,iu(v.sent())];case 5:return v.sent(),[3,6];case 6:return[2]}var S,F,J})})}function g_(o,t){return(0,re.mG)(this,void 0,void 0,function(){var s,l,p,v,S;return(0,re.Jh)(this,function(F){switch(F.label){case 0:zl((s=an(o)).remoteStore)||nn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),F.label=1;case 1:return F.trys.push([1,3,,4]),[4,(J=s.localStore,le=an(J),le.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(pe){return le._n.getHighestUnacknowledgedBatchId(pe)}))];case 2:return-1===(l=F.sent())?[2,void t.resolve()]:((p=s.ko.get(l)||[]).push(t),s.ko.set(l,p),[3,4]);case 3:return v=F.sent(),S=Sc(v,"Initialization of waitForPendingWrites() operation failed"),t.reject(S),[3,4];case 4:return[2]}var J,le})})}function tf(o,t){(o.ko.get(t)||[]).forEach(function(s){s.resolve()}),o.ko.delete(t)}function Qf(o,t,s){var l=an(o),p=l.xo[l.currentUser.toKey()];if(p){var v=p.get(t);v&&(s?v.reject(s):v.resolve(),p=p.remove(t)),l.xo[l.currentUser.toKey()]=p}}function Hd(o,t,s){void 0===s&&(s=null),o.sharedClientState.removeLocalQueryTarget(t);for(var l=0,p=o.Vo.get(t);l<p.length;l++){var v=p[l];o.Po.delete(v),s&&o.vo.Mo(v,s)}o.Vo.delete(t),o.isPrimaryClient&&o.No.Zn(t).forEach(function(S){o.No.containsKey(S)||ga(o,S)})}function ga(o,t){o.So.delete(t.path.canonicalString());var s=o.Do.get(t);null!==s&&(Vd(o.remoteStore,s),o.Do=o.Do.remove(t),o.Co.delete(s),Ig(o))}function Jf(o,t,s){for(var l=0,p=s;l<p.length;l++){var v=p[l];v instanceof td?(o.No.addReference(v.key,t),m_(o,v)):v instanceof jd?(nn("SyncEngine","Document no longer in limbo: "+v.key),o.No.removeReference(v.key,t),o.No.containsKey(v.key)||ga(o,v.key)):Nn()}}function m_(o,t){var s=t.key,l=s.path.canonicalString();o.Do.get(s)||o.So.has(l)||(nn("SyncEngine","New document in limbo: "+s),o.So.add(l),Ig(o))}function Ig(o){for(;o.So.size>0&&o.Do.size<o.maxConcurrentLimboResolutions;){var t=o.So.values().next().value;o.So.delete(t);var s=new qn(Ae.fromString(t)),l=o.Fo.next();o.Co.set(l,new Eg(s)),o.Do=o.Do.insert(s,l),Wh(o.remoteStore,new Cc(Bo(yu(s.path)),l,2,Yi.o))}}function Ic(o,t,s){return(0,re.mG)(this,void 0,void 0,function(){var l,p,v,S;return(0,re.Jh)(this,function(F){switch(F.label){case 0:return l=an(o),p=[],v=[],S=[],l.Po.isEmpty()?[3,3]:(l.Po.forEach(function(J,le){S.push(l.Oo(le,t,s).then(function(pe){if(pe){l.isPrimaryClient&&l.sharedClientState.updateQueryState(le.targetId,pe.fromCache?"not-current":"current"),p.push(pe);var Re=At.Pn(le.targetId,pe);v.push(Re)}}))}),[4,Promise.all(S)]);case 1:return F.sent(),l.vo._r(p),[4,function(J,le){return(0,re.mG)(this,void 0,void 0,function(){var pe,Re,Ge,ft,ct,Et,en,er;return(0,re.Jh)(this,function(tr){switch(tr.label){case 0:pe=an(J),tr.label=1;case 1:return tr.trys.push([1,3,,4]),[4,pe.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(Wr){return $t.forEach(le,function(ci){return $t.forEach(ci.bn,function(Ni){return pe.persistence.referenceDelegate.addReference(Wr,ci.targetId,Ni)}).next(function(){return $t.forEach(ci.vn,function(Ni){return pe.persistence.referenceDelegate.removeReference(Wr,ci.targetId,Ni)})})})})];case 2:return tr.sent(),[3,4];case 3:if(!hl(Re=tr.sent()))throw Re;return nn("LocalStore","Failed to update sequence numbers: "+Re),[3,4];case 4:for(Ge=0,ft=le;Ge<ft.length;Ge++)Et=(ct=ft[Ge]).targetId,ct.fromCache||(en=pe.kn.get(Et),er=en.withLastLimboFreeSnapshotVersion(en.snapshotVersion),pe.kn=pe.kn.insert(Et,er));return[2]}})})}(l.localStore,v)];case 2:F.sent(),F.label=3;case 3:return[2]}})})}function Mg(o,t){return(0,re.mG)(this,void 0,void 0,function(){var s,l;return(0,re.Jh)(this,function(p){switch(p.label){case 0:return(s=an(o)).currentUser.isEqual(t)?[3,3]:(nn("SyncEngine","User change. New user:",t.toKey()),[4,Wn(s.localStore,t)]);case 1:return l=p.sent(),s.currentUser=t,(v=s).ko.forEach(function(F){F.forEach(function(J){J.reject(new Lt(_t.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),v.ko.clear(),s.sharedClientState.handleUserChange(t,l.removedBatchIds,l.addedBatchIds),[4,Ic(s,l.Ln)];case 2:p.sent(),p.label=3;case 3:return[2]}var v})})}function Cv(o,t){var s=an(o),l=s.Co.get(t);if(l&&l.bo)return zr().add(l.key);var p=zr(),v=s.Vo.get(t);if(!v)return p;for(var S=0,F=v;S<F.length;S++){var le=s.Po.get(F[S]);p=p.unionWith(le.view.wo)}return p}function __(o,t){return(0,re.mG)(this,void 0,void 0,function(){var s,l,p;return(0,re.Jh)(this,function(v){switch(v.label){case 0:return[4,Gh((s=an(o)).localStore,t.query,!0)];case 1:return l=v.sent(),p=t.view.Ao(l),[2,(s.isPrimaryClient&&Jf(s,t.targetId,p.To),p)]}})})}function Xf(o){return(0,re.mG)(this,void 0,void 0,function(){var t;return(0,re.Jh)(this,function(s){return[2,ig((t=an(o)).localStore).then(function(l){return Ic(t,l)})]})})}function Og(o,t,s,l){return(0,re.mG)(this,void 0,void 0,function(){var p,v;return(0,re.Jh)(this,function(S){switch(S.label){case 0:return[4,(F=(p=an(o)).localStore,J=t,le=an(F),pe=an(le._n),le.persistence.runTransaction("Lookup mutation documents","readonly",function(Re){return pe.jt(Re,J).next(function(Ge){return Ge?le.Mn.pn(Re,Ge):$t.resolve(null)})}))];case 1:return null===(v=S.sent())?[3,6]:"pending"!==s?[3,3]:[4,Ch(p.remoteStore)];case 2:return S.sent(),[3,4];case 3:"acknowledged"===s||"rejected"===s?(Qf(p,t,l||null),tf(p,t),function(F,J){an(an(F)._n).Gt(J)}(p.localStore,t)):Nn(),S.label=4;case 4:return[4,Ic(p,v)];case 5:return S.sent(),[3,7];case 6:nn("SyncEngine","Cannot apply mutation batch with id: "+t),S.label=7;case 7:return[2]}var F,J,le,pe})})}function y_(o,t){return(0,re.mG)(this,void 0,void 0,function(){var s,l,p,v,S,J,le;return(0,re.Jh)(this,function(pe){switch(pe.label){case 0:return ep(s=an(o)),tp(s),!0!==t||!0===s.$o?[3,3]:(l=s.sharedClientState.getAllActiveQueryTargets(),[4,Rg(s,l.toArray())]);case 1:return p=pe.sent(),s.$o=!0,[4,vl(s.remoteStore,!0)];case 2:for(pe.sent(),v=0,S=p;v<S.length;v++)Wh(s.remoteStore,S[v]);return[3,7];case 3:return!1!==t||!1===s.$o?[3,7]:(J=[],le=Promise.resolve(),s.Vo.forEach(function(Re,Ge){s.sharedClientState.isLocalQueryTarget(Ge)?J.push(Ge):le=le.then(function(){return Hd(s,Ge),su(s.localStore,Ge,!0)}),Vd(s.remoteStore,Ge)}),[4,le]);case 4:return pe.sent(),[4,Rg(s,J)];case 5:return pe.sent(),(Ge=an(s)).Co.forEach(function(ft,ct){Vd(Ge.remoteStore,ct)}),Ge.No.ts(),Ge.Co=new Map,Ge.Do=new Qo(qn.comparator),s.$o=!1,[4,vl(s.remoteStore,!1)];case 6:pe.sent(),pe.label=7;case 7:return[2]}var Ge})})}function Rg(o,t,s){return(0,re.mG)(this,void 0,void 0,function(){var l,p,v,S,F,J,le,pe,Re,Ge,ct,Et,en;return(0,re.Jh)(this,function(pn){switch(pn.label){case 0:l=an(o),p=[],v=[],S=0,F=t,pn.label=1;case 1:return S<F.length?(le=void 0,(pe=l.Vo.get(J=F[S]))&&0!==pe.length?[4,ou(l.localStore,Bo(pe[0]))]:[3,7]):[3,13];case 2:le=pn.sent(),Re=0,Ge=pe,pn.label=3;case 3:return Re<Ge.length?(ct=l.Po.get(Ge[Re]),[4,__(l,ct)]):[3,6];case 4:(Et=pn.sent()).snapshot&&v.push(Et.snapshot),pn.label=5;case 5:return Re++,[3,3];case 6:return[3,11];case 7:return[4,kf(l.localStore,J)];case 8:return en=pn.sent(),[4,ou(l.localStore,en)];case 9:return le=pn.sent(),[4,Eh(l,xg(en),J,!1)];case 10:pn.sent(),pn.label=11;case 11:p.push(le),pn.label=12;case 12:return S++,[3,1];case 13:return[2,(l.vo._r(v),p)]}})})}function xg(o){return _u(o.path,o.collectionGroup,o.orderBy,o.filters,o.limit,"F",o.startAt,o.endAt)}function Pg(o){var t=an(o);return an(an(t.localStore).persistence).fn()}function v_(o,t,s,l){return(0,re.mG)(this,void 0,void 0,function(){var p,v,S;return(0,re.Jh)(this,function(F){switch(F.label){case 0:return(p=an(o)).$o?(nn("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!p.Vo.has(t))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ig(p.localStore)];case 3:return v=F.sent(),S=yd.createSynthesizedRemoteEventForCurrentChange(t,"current"===s),[4,Ic(p,v,S)];case 4:return F.sent(),[3,8];case 5:return[4,su(p.localStore,t,!0)];case 6:return F.sent(),Hd(p,t,l),[3,8];case 7:Nn(),F.label=8;case 8:return[2]}})})}function Fg(o,t,s){return(0,re.mG)(this,void 0,void 0,function(){var l,p,v,S,F,J,le,pe,Re;return(0,re.Jh)(this,function(ft){switch(ft.label){case 0:if(!(l=ep(o)).$o)return[3,10];p=0,v=t,ft.label=1;case 1:return p<v.length?l.Vo.has(S=v[p])?(nn("SyncEngine","Adding an already active target "+S),[3,5]):[4,kf(l.localStore,S)]:[3,6];case 2:return F=ft.sent(),[4,ou(l.localStore,F)];case 3:return J=ft.sent(),[4,Eh(l,xg(F),J.targetId,!1)];case 4:ft.sent(),Wh(l.remoteStore,J),ft.label=5;case 5:return p++,[3,1];case 6:le=function(ct){return(0,re.Jh)(this,function(Et){switch(Et.label){case 0:return l.Vo.has(ct)?[4,su(l.localStore,ct,!1).then(function(){Vd(l.remoteStore,ct),Hd(l,ct)}).catch(iu)]:[3,2];case 1:Et.sent(),Et.label=2;case 2:return[2]}})},pe=0,Re=s,ft.label=7;case 7:return pe<Re.length?[5,le(Re[pe])]:[3,10];case 8:ft.sent(),ft.label=9;case 9:return pe++,[3,7];case 10:return[2]}})})}function ep(o){var t=an(o);return t.remoteStore.remoteSyncer.applyRemoteEvent=Tg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=bv.bind(null,t),t.vo._r=$f.bind(null,t.eventManager),t.vo.Mo=h_.bind(null,t.eventManager),t}function tp(o){var t=an(o);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Sg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ag.bind(null,t),t}var np=function(){function o(){this.synchronizeTabs=!1}return o.prototype.initialize=function(t){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(s){switch(s.label){case 0:return this.R=Ld(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return s.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},o.prototype.Uo=function(t){return null},o.prototype.Ko=function(t){return Kn(this.persistence,new Ut,t.initialUser,this.R)},o.prototype.qo=function(t){return new Hu(lg.bs,this.R)},o.prototype.Bo=function(t){return new jf},o.prototype.terminate=function(){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},o}(),kg=function(o){function t(s,l,p){var v=this;return(v=o.call(this)||this).Qo=s,v.cacheSizeBytes=l,v.forceOwnership=p,v.synchronizeTabs=!1,v}return(0,re.ZT)(t,o),t.prototype.initialize=function(s){return(0,re.mG)(this,void 0,void 0,function(){var l=this;return(0,re.Jh)(this,function(p){switch(p.label){case 0:return[4,o.prototype.initialize.call(this,s)];case 1:return p.sent(),[4,t_(this.localStore)];case 2:return p.sent(),[4,this.Qo.initialize(this,s)];case 3:return p.sent(),[4,tp(this.Qo.syncEngine)];case 4:return p.sent(),[4,Ch(this.Qo.remoteStore)];case 5:return p.sent(),[4,this.persistence.He(function(){return l.gcScheduler&&!l.gcScheduler.started&&l.gcScheduler.start(l.localStore),Promise.resolve()})];case 6:return p.sent(),[2]}})})},t.prototype.Ko=function(s){return Kn(this.persistence,new Ut,s.initialUser,this.R)},t.prototype.Uo=function(s){return new mh(this.persistence.referenceDelegate.garbageCollector,s.asyncQueue)},t.prototype.qo=function(s){var l=Ie(s.databaseInfo.databaseId,s.databaseInfo.persistenceKey),p=void 0!==this.cacheSizeBytes?ks.withCacheSize(this.cacheSizeBytes):ks.DEFAULT;return new Y(this.synchronizeTabs,l,s.clientId,p,s.asyncQueue,yl(),kd(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(s){return new jf},t}(np),bl=function(o){function t(s,l){var p=this;return(p=o.call(this,s,l,!1)||this).Qo=s,p.cacheSizeBytes=l,p.synchronizeTabs=!0,p}return(0,re.ZT)(t,o),t.prototype.initialize=function(s){return(0,re.mG)(this,void 0,void 0,function(){var l,p=this;return(0,re.Jh)(this,function(v){switch(v.label){case 0:return[4,o.prototype.initialize.call(this,s)];case 1:return v.sent(),l=this.Qo.syncEngine,this.sharedClientState instanceof zh?(this.sharedClientState.syncEngine={ui:Og.bind(null,l),ai:v_.bind(null,l),hi:Fg.bind(null,l),fn:Pg.bind(null,l),ci:Xf.bind(null,l)},[4,this.sharedClientState.start()]):[3,3];case 2:v.sent(),v.label=3;case 3:return[4,this.persistence.He(function(S){return(0,re.mG)(p,void 0,void 0,function(){return(0,re.Jh)(this,function(F){switch(F.label){case 0:return[4,y_(this.Qo.syncEngine,S)];case 1:return F.sent(),this.gcScheduler&&(S&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):S||this.gcScheduler.stop()),[2]}})})})];case 4:return v.sent(),[2]}})})},t.prototype.Bo=function(s){var l=yl();if(!zh.yt(l))throw new Lt(_t.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var p=Ie(s.databaseInfo.databaseId,s.databaseInfo.persistenceKey);return new zh(l,s.asyncQueue,p,s.clientId,s.initialUser)},t}(kg),wh=function(){function o(){}return o.prototype.initialize=function(t,s){return(0,re.mG)(this,void 0,void 0,function(){var l=this;return(0,re.Jh)(this,function(p){switch(p.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(v){return Kf(l.syncEngine,v,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Mg.bind(null,this.syncEngine),[4,vl(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:p.sent(),p.label=2;case 2:return[2]}})})},o.prototype.createEventManager=function(t){return new bg},o.prototype.createDatastore=function(t){var l=Ld(t.databaseInfo.databaseId),p=new Hf(t.databaseInfo);return new Gl(t.credentials,p,l)},o.prototype.createRemoteStore=function(t){var s,l,p,v,S,F=this;return s=this.localStore,l=this.datastore,p=t.asyncQueue,v=function(J){return Kf(F.syncEngine,J,0)},S=au.yt()?new au:new qh,new $h(s,l,p,v,S)},o.prototype.createSyncEngine=function(t,s){return le=s,pe=new wg(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions),le&&(pe.$o=!0),pe;var le,pe},o.prototype.terminate=function(){return function(t){return(0,re.mG)(this,void 0,void 0,function(){var s;return(0,re.Jh)(this,function(l){switch(l.label){case 0:return s=an(t),nn("RemoteStore","RemoteStore shutting down."),s.Or.add(5),[4,bh(s)];case 1:return l.sent(),s.Lr.shutdown(),s.Br.set("Unknown"),[2]}})})}(this.remoteStore)},o}(),nf=function(){function o(t){this.observer=t,this.muted=!1}return o.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},o.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},o.prototype.Wo=function(){this.muted=!0},o.prototype.jo=function(t,s){var l=this;this.muted||setTimeout(function(){l.muted||t(s)},0)},o}(),Vg=(function(){function o(t,s){var l=this;this.Go=t,this.R=s,this.metadata=new es,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(p){p&&p.io()?l.metadata.resolve(p.payload.metadata):l.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==p?void 0:p.payload)))},function(p){return l.metadata.reject(p)})}o.prototype.close=function(){return this.Go.cancel()},o.prototype.getMetadata=function(){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(t){return[2,this.metadata.promise]})})},o.prototype.Lo=function(){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},o.prototype.Ho=function(){return(0,re.mG)(this,void 0,void 0,function(){var t,s,l,p;return(0,re.Jh)(this,function(v){switch(v.label){case 0:return[4,this.Jo()];case 1:return null===(t=v.sent())?[2,null]:(s=this.zo.decode(t),l=Number(s),isNaN(l)&&this.Yo("length string ("+s+") is not valid number"),[4,this.Xo(l)]);case 2:return p=v.sent(),[2,new f_(JSON.parse(p),t.length+l)]}})})},o.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},o.prototype.Jo=function(){return(0,re.mG)(this,void 0,void 0,function(){var t,s;return(0,re.Jh)(this,function(l){switch(l.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(l.sent())return[3,3];l.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),s=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),s)])}})})},o.prototype.Xo=function(t){return(0,re.mG)(this,void 0,void 0,function(){var s;return(0,re.Jh)(this,function(l){switch(l.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:l.sent()&&this.Yo("Reached the end of bundle when more is expected."),l.label=2;case 2:return[3,0];case 3:return s=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),s)]}})})},o.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},o.prototype.tc=function(){return(0,re.mG)(this,void 0,void 0,function(){var t,s;return(0,re.Jh)(this,function(l){switch(l.label){case 0:return[4,this.Go.read()];case 1:return(t=l.sent()).done||((s=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),s.set(t.value,this.buffer.length),this.buffer=s),[2,t.done]}})})}}(),function(){function o(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return o.prototype.lookup=function(t){return(0,re.mG)(this,void 0,void 0,function(){var s,l=this;return(0,re.Jh)(this,function(p){switch(p.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Lt(_t.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(v,S){return(0,re.mG)(this,void 0,void 0,function(){var F,J,le,pe,Re,Ge;return(0,re.Jh)(this,function(ft){switch(ft.label){case 0:return F=an(v),J=la(F.R)+"/documents",le={documents:S.map(function(ct){return ul(F.R,ct)})},[4,F.$i("BatchGetDocuments",J,le)];case 1:return pe=ft.sent(),Re=new Map,pe.forEach(function(ct){var en,pn,Et=(en=F.R,"found"in(pn=ct)?function(er,tr){Yn(!!tr.found);var Wr=Fa(er,tr.found.name),ci=Bi(tr.found.updateTime),Ni=new li({mapValue:{fields:tr.found.fields}});return Sr.newFoundDocument(Wr,ci,Ni)}(en,pn):"missing"in pn?function(er,tr){Yn(!!tr.missing),Yn(!!tr.readTime);var Wr=Fa(er,tr.missing),ci=Bi(tr.readTime);return Sr.newNoDocument(Wr,ci)}(en,pn):Nn());Re.set(Et.key.toString(),Et)}),Ge=[],[2,(S.forEach(function(ct){var Et=Re.get(ct.toString());Yn(!!Et),Ge.push(Et)}),Ge)]}})})}(this.datastore,t)];case 1:return[2,((s=p.sent()).forEach(function(v){return l.recordVersion(v)}),s)]}})})},o.prototype.set=function(t,s){this.write(s.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},o.prototype.update=function(t,s){try{this.write(s.toMutation(t,this.preconditionForUpdate(t)))}catch(l){this.lastWriteError=l}this.writtenDocs.add(t.toString())},o.prototype.delete=function(t){this.write(new aa(t,this.precondition(t))),this.writtenDocs.add(t.toString())},o.prototype.commit=function(){return(0,re.mG)(this,void 0,void 0,function(){var t,s=this;return(0,re.Jh)(this,function(l){switch(l.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(p){t.delete(p.key.toString())}),t.forEach(function(p,v){var S=qn.fromPath(v);s.mutations.push(new Ja(S,s.precondition(S)))}),[4,function(p,v){return(0,re.mG)(this,void 0,void 0,function(){var S,F,J;return(0,re.Jh)(this,function(le){switch(le.label){case 0:return S=an(p),F=la(S.R)+"/documents",J={writes:v.map(function(pe){return Yc(S.R,pe)})},[4,S.Ni("Commit",F,J)];case 1:return le.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return l.sent(),this.committed=!0,[2]}})})},o.prototype.recordVersion=function(t){var s;if(t.isFoundDocument())s=t.version;else{if(!t.isNoDocument())throw Nn();s=R.min()}var l=this.readVersions.get(t.key.toString());if(l){if(!s.isEqual(l))throw new Lt(_t.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),s)},o.prototype.precondition=function(t){var s=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&s?Ao.updateTime(s):Ao.none()},o.prototype.preconditionForUpdate=function(t){var s=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&s){if(s.isEqual(R.min()))throw new Lt(_t.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ao.updateTime(s)}return Ao.exists(!0)},o.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},o.prototype.ensureCommitNotCalled=function(){},o}()),b_=function(){function o(t,s,l,p){this.asyncQueue=t,this.datastore=s,this.updateFunction=l,this.deferred=p,this.ec=5,this.Zi=new vh(this.asyncQueue,"transaction_retry")}return o.prototype.run=function(){this.ec-=1,this.nc()},o.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,re.mG)(t,void 0,void 0,function(){var s,l,p=this;return(0,re.Jh)(this,function(v){return s=new Vg(this.datastore),(l=this.sc(s))&&l.then(function(S){p.asyncQueue.enqueueAndForget(function(){return s.commit().then(function(){p.deferred.resolve(S)}).catch(function(F){p.ic(F)})})}).catch(function(S){p.ic(S)}),[2]})})})},o.prototype.sc=function(t){try{var s=this.updateFunction(t);return!Wo(s)&&s.catch&&s.then?s:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(l){return this.deferred.reject(l),null}},o.prototype.ic=function(t){var s=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return s.nc(),Promise.resolve()})):this.deferred.reject(t)},o.prototype.rc=function(t){if("FirebaseError"===t.name){var s=t.code;return"aborted"===s||"failed-precondition"===s||!qc(s)}return!1},o}(),C_=function(){function o(t,s,l){var p=this;this.credentials=t,this.asyncQueue=s,this.databaseInfo=l,this.user=Ss.UNAUTHENTICATED,this.clientId=fu.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(s,function(v){return(0,re.mG)(p,void 0,void 0,function(){return(0,re.Jh)(this,function(S){switch(S.label){case 0:return nn("FirestoreClient","Received user=",v.uid),[4,this.credentialListener(v)];case 1:return S.sent(),this.user=v,[2]}})})})}return o.prototype.getConfiguration=function(){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},o.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},o.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Lt(_t.FAILED_PRECONDITION,"The client has already been terminated.")},o.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var s=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,re.mG)(t,void 0,void 0,function(){var l,p;return(0,re.Jh)(this,function(v){switch(v.label){case 0:return v.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:v.sent(),v.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:v.sent(),v.label=4;case 4:return this.credentials.removeChangeListener(),s.resolve(),[3,6];case 5:return l=v.sent(),p=Sc(l,"Failed to shutdown persistence"),s.reject(p),[3,6];case 6:return[2]}})})}),s.promise},o}();function Ug(o,t){return(0,re.mG)(this,void 0,void 0,function(){var s,l,p=this;return(0,re.Jh)(this,function(v){switch(v.label){case 0:return o.asyncQueue.verifyOperationInProgress(),nn("FirestoreClient","Initializing OfflineComponentProvider"),[4,o.getConfiguration()];case 1:return s=v.sent(),[4,t.initialize(s)];case 2:return v.sent(),l=s.initialUser,o.setCredentialChangeListener(function(S){return(0,re.mG)(p,void 0,void 0,function(){return(0,re.Jh)(this,function(F){switch(F.label){case 0:return l.isEqual(S)?[3,2]:[4,Wn(t.localStore,S)];case 1:F.sent(),l=S,F.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return o.terminate()}),o.offlineComponents=t,[2]}})})}function rf(o,t){return(0,re.mG)(this,void 0,void 0,function(){var s,l;return(0,re.Jh)(this,function(p){switch(p.label){case 0:return o.asyncQueue.verifyOperationInProgress(),[4,rp(o)];case 1:return s=p.sent(),nn("FirestoreClient","Initializing OnlineComponentProvider"),[4,o.getConfiguration()];case 2:return l=p.sent(),[4,t.initialize(s,l)];case 3:return p.sent(),o.setCredentialChangeListener(function(v){return function(S,F){return(0,re.mG)(this,void 0,void 0,function(){var J,le;return(0,re.Jh)(this,function(pe){switch(pe.label){case 0:return(J=an(S)).asyncQueue.verifyOperationInProgress(),nn("RemoteStore","RemoteStore received new credentials"),le=zl(J),J.Or.add(3),[4,bh(J)];case 1:return pe.sent(),le&&J.Br.set("Unknown"),[4,J.remoteSyncer.handleCredentialChange(F)];case 2:return pe.sent(),J.Or.delete(3),[4,ed(J)];case 3:return pe.sent(),[2]}})})}(t.remoteStore,v)}),o.onlineComponents=t,[2]}})})}function rp(o){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(t){switch(t.label){case 0:return o.offlineComponents?[3,2]:(nn("FirestoreClient","Using default OfflineComponentProvider"),[4,Ug(o,new np)]);case 1:t.sent(),t.label=2;case 2:return[2,o.offlineComponents]}})})}function of(o){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(t){switch(t.label){case 0:return o.onlineComponents?[3,2]:(nn("FirestoreClient","Using default OnlineComponentProvider"),[4,rf(o,new wh)]);case 1:t.sent(),t.label=2;case 2:return[2,o.onlineComponents]}})})}function Dh(o){return rp(o).then(function(t){return t.persistence})}function Th(o){return rp(o).then(function(t){return t.localStore})}function Bg(o){return of(o).then(function(t){return t.remoteStore})}function Sh(o){return of(o).then(function(t){return t.syncEngine})}function Mc(o){return(0,re.mG)(this,void 0,void 0,function(){var t,s;return(0,re.Jh)(this,function(l){switch(l.label){case 0:return[4,of(o)];case 1:return t=l.sent(),[2,((s=t.eventManager).onListen=Yf.bind(null,t.syncEngine),s.onUnlisten=Dg.bind(null,t.syncEngine),s)]}})})}function ip(o,t,s){var l=this;void 0===s&&(s={});var p=new es;return o.asyncQueue.enqueueAndForget(function(){return(0,re.mG)(l,void 0,void 0,function(){var v;return(0,re.Jh)(this,function(S){switch(S.label){case 0:return v=function(F,J,le,pe,Re){var Ge=new nf({next:function(ct){J.enqueueAndForget(function(){return Cg(F,ft)});var Et=ct.docs.has(le);!Et&&ct.fromCache?Re.reject(new Lt(_t.UNAVAILABLE,"Failed to get document because the client is offline.")):Et&&ct.fromCache&&pe&&"server"===pe.source?Re.reject(new Lt(_t.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Re.resolve(ct)},error:function(ct){return Re.reject(ct)}}),ft=new Wf(yu(le.path),Ge,{includeMetadataChanges:!0,so:!0});return Zf(F,ft)},[4,Mc(o)];case 1:return[2,v.apply(void 0,[S.sent(),o.asyncQueue,t,s,p])]}})})}),p.promise}function jg(o,t,s){var l=this;void 0===s&&(s={});var p=new es;return o.asyncQueue.enqueueAndForget(function(){return(0,re.mG)(l,void 0,void 0,function(){var v;return(0,re.Jh)(this,function(S){switch(S.label){case 0:return v=function(F,J,le,pe,Re){var Ge=new nf({next:function(ct){J.enqueueAndForget(function(){return Cg(F,ft)}),ct.fromCache&&"server"===pe.source?Re.reject(new Lt(_t.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Re.resolve(ct)},error:function(ct){return Re.reject(ct)}}),ft=new Wf(le,Ge,{includeMetadataChanges:!0,so:!0});return Zf(F,ft)},[4,Mc(o)];case 1:return[2,v.apply(void 0,[S.sent(),o.asyncQueue,t,s,p])]}})})}),p.promise}var E_=function(o,t,s,l,p,v,S,F){this.databaseId=o,this.appId=t,this.persistenceKey=s,this.host=l,this.ssl=p,this.forceLongPolling=v,this.autoDetectLongPolling=S,this.useFetchStreams=F},Gd=function(){function o(t,s){this.projectId=t,this.database=s||"(default)"}return Object.defineProperty(o.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return t instanceof o&&t.projectId===this.projectId&&t.database===this.database},o}(),w_=new Map,Hg=function(o,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+o},op=function(){function o(){this.changeListener=null}return o.prototype.getToken=function(){return Promise.resolve(null)},o.prototype.invalidateToken=function(){},o.prototype.setChangeListener=function(t,s){this.changeListener=s,t.enqueueRetryable(function(){return s(Ss.UNAUTHENTICATED)})},o.prototype.removeChangeListener=function(){this.changeListener=null},o}(),Gg=function(){function o(t){this.token=t,this.changeListener=null}return o.prototype.getToken=function(){return Promise.resolve(this.token)},o.prototype.invalidateToken=function(){},o.prototype.setChangeListener=function(t,s){var l=this;this.changeListener=s,t.enqueueRetryable(function(){return s(l.token.user)})},o.prototype.removeChangeListener=function(){this.changeListener=null},o}(),zg=function(){function o(t){var s=this;this.currentUser=Ss.UNAUTHENTICATED,this.oc=new es,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){s.cc++,s.currentUser=s.ac(),s.oc.resolve(),s.changeListener&&s.asyncQueue.enqueueRetryable(function(){return s.changeListener(s.currentUser)})};var l=function(p){nn("FirebaseCredentialsProvider","Auth detected"),s.auth=p,s.auth.addAuthTokenListener(s.uc)};t.onInit(function(p){return l(p)}),setTimeout(function(){if(!s.auth){var p=t.getImmediate({optional:!0});p?l(p):(nn("FirebaseCredentialsProvider","Auth not yet detected"),s.oc.resolve())}},0)}return o.prototype.getToken=function(){var t=this,s=this.cc,l=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(l).then(function(p){return t.cc!==s?(nn("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):p?(Yn("string"==typeof p.accessToken),new Hg(p.accessToken,t.currentUser)):null}):Promise.resolve(null)},o.prototype.invalidateToken=function(){this.forceRefresh=!0},o.prototype.setChangeListener=function(t,s){var l=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,re.mG)(l,void 0,void 0,function(){return(0,re.Jh)(this,function(p){switch(p.label){case 0:return[4,this.oc.promise];case 1:return p.sent(),[4,s(this.currentUser)];case 2:return p.sent(),this.changeListener=s,[2]}})})})},o.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},o.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Yn(null===t||"string"==typeof t),new Ss(t)},o}(),qg=function(){function o(t,s,l){this.hc=t,this.lc=s,this.fc=l,this.type="FirstParty",this.user=Ss.FIRST_PARTY}return Object.defineProperty(o.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},s=this.hc.auth.getAuthHeaderValueForFirstParty([]);return s&&(t.Authorization=s),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),o}(),Zg=function(){function o(t,s,l){this.hc=t,this.lc=s,this.fc=l}return o.prototype.getToken=function(){return Promise.resolve(new qg(this.hc,this.lc,this.fc))},o.prototype.setChangeListener=function(t,s){t.enqueueRetryable(function(){return s(Ss.FIRST_PARTY)})},o.prototype.removeChangeListener=function(){},o.prototype.invalidateToken=function(){},o}();function Gu(o,t,s){if(!s)throw new Lt(_t.INVALID_ARGUMENT,"Function "+o+"() cannot be called with an empty "+t+".")}function zd(o,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Lt(_t.INVALID_ARGUMENT,"Invalid options passed to function "+o+'(): You cannot specify both "merge" and "mergeFields".');return t}function $g(o,t,s,l){if(!0===t&&!0===l)throw new Lt(_t.INVALID_ARGUMENT,o+" and "+s+" cannot be used together.")}function Wg(o){if(!qn.isDocumentKey(o))throw new Lt(_t.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+o+" has "+o.length+".")}function D_(o){if(qn.isDocumentKey(o))throw new Lt(_t.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+o+" has "+o.length+".")}function ql(o){if(void 0===o)return"undefined";if(null===o)return"null";if("string"==typeof o)return o.length>20&&(o=o.substring(0,20)+"..."),JSON.stringify(o);if("number"==typeof o||"boolean"==typeof o)return""+o;if("object"==typeof o){if(o instanceof Array)return"an array";var t=function(s){if(s.constructor){var l=/function\s+([^\s(]+)\s*\(/.exec(s.constructor.toString());if(l&&l.length>1)return l[1]}return null}(o);return t?"a custom "+t+" object":"an object"}return"function"==typeof o?"a function":Nn()}function Di(o,t){if("_delegate"in o&&(o=o._delegate),!(o instanceof t)){if(t.name===o.constructor.name)throw new Lt(_t.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var s=ql(o);throw new Lt(_t.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+s)}return o}function qd(o,t){if(t<=0)throw new Lt(_t.INVALID_ARGUMENT,"Function "+o+"() requires a positive number, but it was: "+t+".")}var Zd=function(){function o(t){var s;if(void 0===t.host){if(void 0!==t.ssl)throw new Lt(_t.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(s=t.ssl)||void 0===s||s;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Lt(_t.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,$g("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return o.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},o}(),Ah=function(){function o(t,s){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zd({}),this._settingsFrozen=!1,t instanceof Gd?(this._databaseId=t,this._credentials=new op):(this._app=t,this._databaseId=function(l){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Lt(_t.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gd(l.options.projectId)}(t),this._credentials=new zg(s))}return Object.defineProperty(o.prototype,"app",{get:function(){if(!this._app)throw new Lt(_t.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),o.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Lt(_t.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zd(t),void 0!==t.credentials&&(this._credentials=function(s){if(!s)return new op;switch(s.type){case"gapi":var l=s.client;return Yn(!("object"!=typeof l||null===l||!l.auth||!l.auth.getAuthHeaderValueForFirstParty)),new Zg(l,s.sessionIndex||"0",s.iamToken||null);case"provider":return s.client;default:throw new Lt(_t.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},o.prototype._getSettings=function(){return this._settings},o.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},o.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},o.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},o.prototype._terminate=function(){return(s=w_.get(this))&&(nn("ComponentProvider","Removing Datastore"),w_.delete(this),s.terminate()),Promise.resolve();var s},o}(),so=function(){function o(t,s,l){this.converter=s,this._key=l,this.type="document",this.firestore=t}return Object.defineProperty(o.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"parent",{get:function(){return new Oc(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),o.prototype.withConverter=function(t){return new o(this.firestore,t,this._key)},o}(),ta=function(){function o(t,s,l){this.converter=s,this._query=l,this.type="query",this.firestore=t}return o.prototype.withConverter=function(t){return new o(this.firestore,t,this._query)},o}(),Oc=function(o){function t(s,l,p){var v=this;return(v=o.call(this,s,l,yu(p))||this)._path=p,v.type="collection",v}return(0,re.ZT)(t,o),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var s=this._path.popLast();return s.isEmpty()?null:new so(this.firestore,null,new qn(s))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(s){return new t(this.firestore,s,this._path)},t}(ta);function sp(o,t){for(var s,l=[],p=2;p<arguments.length;p++)l[p-2]=arguments[p];if(o=(0,Ke.m9)(o),Gu("collection","path",t),o instanceof Ah)return D_(s=Ae.fromString.apply(Ae,(0,re.ev)([t],l))),new Oc(o,null,s);if(!(o instanceof so||o instanceof Oc))throw new Lt(_t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return D_(s=Ae.fromString.apply(Ae,(0,re.ev)([o.path],l)).child(Ae.fromString(t))),new Oc(o.firestore,null,s)}function sf(o,t){for(var s,l=[],p=2;p<arguments.length;p++)l[p-2]=arguments[p];if(o=(0,Ke.m9)(o),1===arguments.length&&(t=fu.u()),Gu("doc","path",t),o instanceof Ah)return Wg(s=Ae.fromString.apply(Ae,(0,re.ev)([t],l))),new so(o,null,new qn(s));if(!(o instanceof so||o instanceof Oc))throw new Lt(_t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Wg(s=o._path.child(Ae.fromString.apply(Ae,(0,re.ev)([t],l)))),new so(o.firestore,o instanceof Oc?o.converter:null,new qn(s))}function af(o,t){return o=(0,Ke.m9)(o),t=(0,Ke.m9)(t),(o instanceof so||o instanceof Oc)&&(t instanceof so||t instanceof Oc)&&o.firestore===t.firestore&&o.path===t.path&&o.converter===t.converter}function Yg(o,t){return o=(0,Ke.m9)(o),t=(0,Ke.m9)(t),o instanceof ta&&t instanceof ta&&o.firestore===t.firestore&&Rl(o._query,t._query)&&o.converter===t.converter}var T_=function(){function o(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new vh(this,"async_queue_retry"),this.Ic=function(){var l=kd();l&&nn("AsyncQueue","Visibility state changed to "+l.visibilityState),t.Zi.Gi()};var s=kd();s&&"function"==typeof s.addEventListener&&s.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(o.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),o.prototype.enqueueAndForget=function(t){this.enqueue(t)},o.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},o.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var s=kd();s&&"function"==typeof s.removeEventListener&&s.removeEventListener("visibilitychange",this.Ic)}},o.prototype.enqueue=function(t){var s=this;if(this.Ac(),this._c)return new Promise(function(){});var l=new es;return this.Rc(function(){return s._c&&s.Ec?Promise.resolve():(t().then(l.resolve,l.reject),l.promise)}).then(function(){return l.promise})},o.prototype.enqueueRetryable=function(t){var s=this;this.enqueueAndForget(function(){return s.wc.push(t),s.bc()})},o.prototype.bc=function(){return(0,re.mG)(this,void 0,void 0,function(){var t,s=this;return(0,re.Jh)(this,function(l){switch(l.label){case 0:if(0===this.wc.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return l.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!hl(t=l.sent()))throw t;return nn("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return s.bc()}),l.label=5;case 5:return[2]}})})},o.prototype.Rc=function(t){var s=this,l=this.dc.then(function(){return s.gc=!0,t().catch(function(p){throw s.yc=p,s.gc=!1,Oi("INTERNAL UNHANDLED ERROR: ",(S=(v=p).message||"",v.stack&&(S=v.stack.includes(v.message)?v.stack:v.message+"\n"+v.stack),S)),p;var v,S}).then(function(p){return s.gc=!1,p})});return this.dc=l,l},o.prototype.enqueueAfterDelay=function(t,s,l){var p=this;this.Ac(),this.Tc.indexOf(t)>-1&&(s=0);var v=vg.createAndSchedule(this,t,s,l,function(S){return p.vc(S)});return this.mc.push(v),v},o.prototype.Ac=function(){this.yc&&Nn()},o.prototype.verifyOperationInProgress=function(){},o.prototype.Pc=function(){return(0,re.mG)(this,void 0,void 0,function(){var t;return(0,re.Jh)(this,function(s){switch(s.label){case 0:return[4,t=this.dc];case 1:s.sent(),s.label=2;case 2:if(t!==this.dc)return[3,0];s.label=3;case 3:return[2]}})})},o.prototype.Vc=function(t){for(var s=0,l=this.mc;s<l.length;s++)if(l[s].timerId===t)return!0;return!1},o.prototype.Sc=function(t){var s=this;return this.Pc().then(function(){s.mc.sort(function(S,F){return S.targetTimeMs-F.targetTimeMs});for(var l=0,p=s.mc;l<p.length;l++){var v=p[l];if(v.skipDelay(),"all"!==t&&v.timerId===t)break}return s.Pc()})},o.prototype.Dc=function(t){this.Tc.push(t)},o.prototype.vc=function(t){var s=this.mc.indexOf(t);this.mc.splice(s,1)},o}();function rd(o){return function(t,s){if("object"!=typeof t||null===t)return!1;for(var l=t,p=0,v=["next","error","complete"];p<v.length;p++){var S=v[p];if(S in l&&"function"==typeof l[S])return!0}return!1}(o)}!function(){function o(){this._progressObserver={},this._taskCompletionResolver=new es,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}o.prototype.onProgress=function(t,s,l){this._progressObserver={next:t,error:s,complete:l}},o.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},o.prototype.then=function(t,s){return this._taskCompletionResolver.promise.then(t,s)},o.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},o.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},o.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Ho=function(o){function t(s,l){var p=this;return(p=o.call(this,s,l)||this).type="firestore",p._queue=new T_,p._persistenceKey="name"in s?s.name:"[DEFAULT]",p}return(0,re.ZT)(t,o),t.prototype._terminate=function(){return this._firestoreClient||id(this),this._firestoreClient.terminate()},t}(Ah);function gs(o){return o._firestoreClient||id(o),o._firestoreClient.verifyNotTerminated(),o._firestoreClient}function id(o){var t,v,F,s=o._freezeSettings(),l=(v=(null===(t=o._app)||void 0===t?void 0:t.options.appId)||"",new E_(o._databaseId,v,o._persistenceKey,(F=s).host,F.ssl,F.experimentalForceLongPolling,F.experimentalAutoDetectLongPolling,F.useFetchStreams));o._firestoreClient=new C_(o._credentials,o._queue,l)}function Qg(o,t,s){var l=this,p=new es;return o.asyncQueue.enqueue(function(){return(0,re.mG)(l,void 0,void 0,function(){var v;return(0,re.Jh)(this,function(S){switch(S.label){case 0:return S.trys.push([0,3,,4]),[4,Ug(o,s)];case 1:return S.sent(),[4,rf(o,t)];case 2:return S.sent(),p.resolve(),[3,4];case 3:if(!("FirebaseError"===(F=v=S.sent()).name?F.code===_t.FAILED_PRECONDITION||F.code===_t.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&F instanceof DOMException)||22===F.code||20===F.code||11===F.code))throw v;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+v),p.reject(v),[3,4];case 4:return[2]}var F})})}).then(function(){return p.promise})}function Jg(o){if(o._initialized||o._terminated)throw new Lt(_t.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Cl=function(){function o(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];for(var l=0;l<t.length;++l)if(0===t[l].length)throw new Lt(_t.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(t)}return o.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},o}(),od=function(){function o(t){this._byteString=t}return o.fromBase64String=function(t){try{return new o(rr.fromBase64String(t))}catch(s){throw new Lt(_t.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}},o.fromUint8Array=function(t){return new o(rr.fromUint8Array(t))},o.prototype.toBase64=function(){return this._byteString.toBase64()},o.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},o.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},o.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},o}(),Wd=function(o){this._methodName=o},uf=function(){function o(t,s){if(!isFinite(t)||t<-90||t>90)throw new Lt(_t.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new Lt(_t.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}return Object.defineProperty(o.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},o.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},o.prototype._compareTo=function(t){return xr(this._lat,t._lat)||xr(this._long,t._long)},o}(),Xg=/^__.*__$/,bo=function(){function o(t,s,l){this.data=t,this.fieldMask=s,this.fieldTransforms=l}return o.prototype.toMutation=function(t,s){return null!==this.fieldMask?new ws(t,this.data,this.fieldMask,s,this.fieldTransforms):new Qa(t,this.data,s,this.fieldTransforms)},o}(),lf=function(){function o(t,s,l){this.data=t,this.fieldMask=s,this.fieldTransforms=l}return o.prototype.toMutation=function(t,s){return new ws(t,this.data,this.fieldMask,s,this.fieldTransforms)},o}();function S_(o){switch(o){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nn()}}var El=function(){function o(t,s,l,p,v,S){this.settings=t,this.databaseId=s,this.R=l,this.ignoreUndefinedProperties=p,void 0===v&&this.Cc(),this.fieldTransforms=v||[],this.fieldMask=S||[]}return Object.defineProperty(o.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),o.prototype.xc=function(t){return new o(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},o.prototype.kc=function(t){var s,l=null===(s=this.path)||void 0===s?void 0:s.child(t),p=this.xc({path:l,Fc:!1});return p.$c(t),p},o.prototype.Oc=function(t){var s,l=null===(s=this.path)||void 0===s?void 0:s.child(t),p=this.xc({path:l,Fc:!1});return p.Cc(),p},o.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},o.prototype.Lc=function(t){return hf(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},o.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(s){return t.isPrefixOf(s)})||void 0!==this.fieldTransforms.find(function(s){return t.isPrefixOf(s.field)})},o.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},o.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(S_(this.Nc)&&Xg.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},o}(),ap=function(){function o(t,s,l){this.databaseId=t,this.ignoreUndefinedProperties=s,this.R=l||Ld(t)}return o.prototype.Uc=function(t,s,l,p){return void 0===p&&(p=!1),new El({Nc:t,methodName:s,qc:l,path:Ct.emptyPath(),Fc:!1,Bc:p},this.databaseId,this.R,this.ignoreUndefinedProperties)},o}();function Zl(o){var t=o._freezeSettings(),s=Ld(o._databaseId);return new ap(o._databaseId,!!t.ignoreUndefinedProperties,s)}function up(o,t,s,l,p,v){void 0===v&&(v={});var S=o.Uc(v.merge||v.mergeFields?2:0,t,s,p);cf("Data must be an object, but it was:",S,l);var F,J,le=hp(l,S);if(v.merge)F=new fn(S.fieldMask),J=S.fieldTransforms;else if(v.mergeFields){for(var pe=[],Re=0,Ge=v.mergeFields;Re<Ge.length;Re++){var ft=df(t,Ge[Re],s);if(!S.contains(ft))throw new Lt(_t.INVALID_ARGUMENT,"Field '"+ft+"' is specified in your field mask but missing from your input data.");om(pe,ft)||pe.push(ft)}F=new fn(pe),J=S.fieldTransforms.filter(function(ct){return F.covers(ct.field)})}else F=null,J=S.fieldTransforms;return new bo(new li(le),F,J)}var lp=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,re.ZT)(t,o),t.prototype._toFieldTransform=function(s){if(2!==s.Nc)throw s.Lc(1===s.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return s.fieldMask.push(s.path),null},t.prototype.isEqual=function(s){return s instanceof t},t}(Wd);function em(o,t,s){return new El({Nc:3,qc:t.settings.qc,methodName:o._methodName,Fc:s},t.databaseId,t.R,t.ignoreUndefinedProperties)}var tm=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,re.ZT)(t,o),t.prototype._toFieldTransform=function(s){return new Ka(s.path,new Eu)},t.prototype.isEqual=function(s){return s instanceof t},t}(Wd),nm=function(o){function t(s,l){var p=this;return(p=o.call(this,s)||this).Kc=l,p}return(0,re.ZT)(t,o),t.prototype._toFieldTransform=function(s){var l=em(this,s,!0),p=this.Kc.map(function(S){return $l(S,l)}),v=new Ya(p);return new Ka(s.path,v)},t.prototype.isEqual=function(s){return this===s},t}(Wd),rm=function(o){function t(s,l){var p=this;return(p=o.call(this,s)||this).Kc=l,p}return(0,re.ZT)(t,o),t.prototype._toFieldTransform=function(s){var l=em(this,s,!0),p=this.Kc.map(function(S){return $l(S,l)}),v=new Du(p);return new Ka(s.path,v)},t.prototype.isEqual=function(s){return this===s},t}(Wd),im=function(o){function t(s,l){var p=this;return(p=o.call(this,s)||this).Qc=l,p}return(0,re.ZT)(t,o),t.prototype._toFieldTransform=function(s){var l=new as(s.R,gi(s.R,this.Qc));return new Ka(s.path,l)},t.prototype.isEqual=function(s){return this===s},t}(Wd);function cp(o,t,s,l){var p=o.Uc(1,t,s);cf("Data must be an object, but it was:",p,l);var v=[],S=li.empty();$(l,function(J,le){var pe=pp(t,J,s);le=(0,Ke.m9)(le);var Re=p.Oc(pe);if(le instanceof lp)v.push(pe);else{var Ge=$l(le,Re);null!=Ge&&(v.push(pe),S.set(pe,Ge))}});var F=new fn(v);return new lf(S,F,p.fieldTransforms)}function dp(o,t,s,l,p,v){var S=o.Uc(1,t,s),F=[df(t,l,s)],J=[p];if(v.length%2!=0)throw new Lt(_t.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var le=0;le<v.length;le+=2)F.push(df(t,v[le])),J.push(v[le+1]);for(var pe=[],Re=li.empty(),Ge=F.length-1;Ge>=0;--Ge)if(!om(pe,F[Ge])){var ft=F[Ge],ct=J[Ge];ct=(0,Ke.m9)(ct);var Et=S.Oc(ft);if(ct instanceof lp)pe.push(ft);else{var en=$l(ct,Et);null!=en&&(pe.push(ft),Re.set(ft,en))}}var pn=new fn(pe);return new lf(Re,pn,S.fieldTransforms)}function Yd(o,t,s,l){return void 0===l&&(l=!1),$l(s,o.Uc(l?4:3,t))}function $l(o,t){if(fp(o=(0,Ke.m9)(o)))return cf("Unsupported field value:",t,o),hp(o,t);if(o instanceof Wd)return function(s,l){if(!S_(l.Nc))throw l.Lc(s._methodName+"() can only be used with update() and set()");if(!l.path)throw l.Lc(s._methodName+"() is not currently supported inside arrays");var p=s._toFieldTransform(l);p&&l.fieldTransforms.push(p)}(o,t),null;if(void 0===o&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),o instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(s,l){for(var p=[],v=0,S=0,F=s;S<F.length;S++){var J=$l(F[S],l.Mc(v));null==J&&(J={nullValue:"NULL_VALUE"}),p.push(J),v++}return{arrayValue:{values:p}}}(o,t)}return function(s,l){if(null===(s=(0,Ke.m9)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return gi(l.R,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){var p=U.fromDate(s);return{timestampValue:Jo(l.R,p)}}if(s instanceof U)return p=new U(s.seconds,1e3*Math.floor(s.nanoseconds/1e3)),{timestampValue:Jo(l.R,p)};if(s instanceof uf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof od)return{bytesValue:Cd(l.R,s._byteString)};if(s instanceof so){var v=s.firestore._databaseId;if(!v.isEqual(p=l.databaseId))throw l.Lc("Document reference is for database "+v.projectId+"/"+v.database+" but should be for database "+p.projectId+"/"+p.database);return{referenceValue:Ll(s.firestore._databaseId||l.databaseId,s._key.path)}}throw l.Lc("Unsupported field value: "+ql(s))}(o,t)}function hp(o,t){var s={};return ne(o)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$(o,function(l,p){var v=$l(p,t.kc(l));null!=v&&(s[l]=v)}),{mapValue:{fields:s}}}function fp(o){return!("object"!=typeof o||null===o||o instanceof Array||o instanceof Date||o instanceof U||o instanceof uf||o instanceof od||o instanceof so||o instanceof Wd)}function cf(o,t,s){if(!fp(s)||"object"!=typeof(p=s)||null===p||Object.getPrototypeOf(p)!==Object.prototype&&null!==Object.getPrototypeOf(p)){var l=ql(s);throw t.Lc("an object"===l?o+" a custom object":o+" "+l)}var p}function df(o,t,s){if((t=(0,Ke.m9)(t))instanceof Cl)return t._internalPath;if("string"==typeof t)return pp(o,t);throw hf("Field path arguments must be of type string or FieldPath.",o,!1,void 0,s)}var A_=new RegExp("[~\\*/\\[\\]]");function pp(o,t,s){if(t.search(A_)>=0)throw hf("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",o,!1,void 0,s);try{return(new(Cl.bind.apply(Cl,(0,re.ev)([void 0],t.split(".")))))._internalPath}catch(l){throw hf("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",o,!1,void 0,s)}}function hf(o,t,s,l,p){var v=l&&!l.isEmpty(),S=void 0!==p,F="Function "+t+"() called with invalid data";s&&(F+=" (via `toFirestore()`)");var J="";return(v||S)&&(J+=" (found",v&&(J+=" in field "+l),S&&(J+=" in document "+p),J+=")"),new Lt(_t.INVALID_ARGUMENT,(F+=". ")+o+J)}function om(o,t){return o.some(function(s){return s.isEqual(t)})}var Kd=function(){function o(t,s,l,p,v){this._firestore=t,this._userDataWriter=s,this._key=l,this._document=p,this._converter=v}return Object.defineProperty(o.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ref",{get:function(){return new so(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),o.prototype.exists=function(){return null!==this._document},o.prototype.data=function(){if(this._document){if(this._converter){var t=new wv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},o.prototype.get=function(t){if(this._document){var s=this._document.data.field(Ih("DocumentSnapshot.get",t));if(null!==s)return this._userDataWriter.convertValue(s)}},o}(),wv=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,re.ZT)(t,o),t.prototype.data=function(){return o.prototype.data.call(this)},t}(Kd);function Ih(o,t){return"string"==typeof t?pp(o,t):t instanceof Cl?t._internalPath:t._delegate._internalPath}var sd=function(){function o(t,s){this.hasPendingWrites=t,this.fromCache=s}return o.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},o}(),Wl=function(o){function t(s,l,p,v,S,F){var J=this;return(J=o.call(this,s,l,p,v,F)||this)._firestore=s,J._firestoreImpl=s,J.metadata=S,J}return(0,re.ZT)(t,o),t.prototype.exists=function(){return o.prototype.exists.call(this)},t.prototype.data=function(s){if(void 0===s&&(s={}),this._document){if(this._converter){var l=new ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(l,s)}return this._userDataWriter.convertValue(this._document.data.value,s.serverTimestamps)}},t.prototype.get=function(s,l){if(void 0===l&&(l={}),this._document){var p=this._document.data.field(Ih("DocumentSnapshot.get",s));if(null!==p)return this._userDataWriter.convertValue(p,l.serverTimestamps)}},t}(Kd),ff=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,re.ZT)(t,o),t.prototype.data=function(s){return void 0===s&&(s={}),o.prototype.data.call(this,s)},t}(Wl),ad=function(){function o(t,s,l,p){this._firestore=t,this._userDataWriter=s,this._snapshot=p,this.metadata=new sd(p.hasPendingWrites,p.fromCache),this.query=l}return Object.defineProperty(o.prototype,"docs",{get:function(){var t=[];return this.forEach(function(s){return t.push(s)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),o.prototype.forEach=function(t,s){var l=this;this._snapshot.docs.forEach(function(p){t.call(s,new ff(l._firestore,l._userDataWriter,p.key,p,new sd(l._snapshot.mutatedKeys.has(p.key),l._snapshot.fromCache),l.query.converter))})},o.prototype.docChanges=function(t){void 0===t&&(t={});var s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Lt(_t.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(l,p){if(l._snapshot.oldDocs.isEmpty()){var v=0;return l._snapshot.docChanges.map(function(F){return{type:"added",doc:new ff(l._firestore,l._userDataWriter,F.doc.key,F.doc,new sd(l._snapshot.mutatedKeys.has(F.doc.key),l._snapshot.fromCache),l.query.converter),oldIndex:-1,newIndex:v++}})}var S=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(function(F){return p||3!==F.type}).map(function(F){var J=new ff(l._firestore,l._userDataWriter,F.doc.key,F.doc,new sd(l._snapshot.mutatedKeys.has(F.doc.key),l._snapshot.fromCache),l.query.converter),le=-1,pe=-1;return 0!==F.type&&(le=S.indexOf(F.doc.key),S=S.delete(F.doc.key)),1!==F.type&&(pe=(S=S.add(F.doc)).indexOf(F.doc.key)),{type:gp(F.type),doc:J,oldIndex:le,newIndex:pe}})}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges},o}();function gp(o){switch(o){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nn()}}function sm(o,t){return o instanceof Wl&&t instanceof Wl?o._firestore===t._firestore&&o._key.isEqual(t._key)&&(null===o._document?null===t._document:o._document.isEqual(t._document))&&o._converter===t._converter:o instanceof ad&&t instanceof ad&&o._firestore===t._firestore&&Yg(o.query,t.query)&&o.metadata.isEqual(t.metadata)&&o._snapshot.isEqual(t._snapshot)}function mp(o){if(Ma(o)&&0===o.explicitOrderBy.length)throw new Lt(_t.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qd=function(){};function ud(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];for(var l=0,p=t;l<p.length;l++){var v=p[l];o=v._apply(o)}return o}var zu=function(o){function t(s,l,p){var v=this;return(v=o.call(this)||this).jc=s,v.Wc=l,v.Gc=p,v.type="where",v}return(0,re.ZT)(t,o),t.prototype._apply=function(s){var v,F,l=Zl(s.firestore),p=function(v,S,F,J,le,pe,Re){var Ge;if(le.isKeyField()){if("array-contains"===pe||"array-contains-any"===pe)throw new Lt(_t.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+pe+"' queries on FieldPath.documentId().");if("in"===pe||"not-in"===pe){am(Re,pe);for(var ft=[],ct=0,Et=Re;ct<Et.length;ct++)ft.push(vp(J,v,Et[ct]));Ge={arrayValue:{values:ft}}}else Ge=vp(J,v,Re)}else"in"!==pe&&"not-in"!==pe&&"array-contains-any"!==pe||am(Re,pe),Ge=Yd(F,"where",Re,"in"===pe||"not-in"===pe);var pn=So.create(le,pe,Ge);return function(er,tr){if(tr.g()){var Wr=Bc(er);if(null!==Wr&&!Wr.isEqual(tr.field))throw new Lt(_t.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+Wr.toString()+"' and '"+tr.field.toString()+"'");var ci=el(er);null!==ci&&O_(0,tr.field,ci)}var Ni=function(As,Mp){for(var xh=0,wm=As.filters;xh<wm.length;xh++){var Op=wm[xh];if(Mp.indexOf(Op.op)>=0)return Op.op}return null}(er,function(As){switch(As){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(tr.op));if(null!==Ni)throw new Lt(_t.INVALID_ARGUMENT,Ni===tr.op?"Invalid query. You cannot use more than one '"+tr.op.toString()+"' filter.":"Invalid query. You cannot use '"+tr.op.toString()+"' filters with '"+Ni.toString()+"' filters.")}(v,pn),pn}(s._query,0,l,s.firestore._databaseId,this.jc,this.Wc,this.Gc);return new ta(s.firestore,s.converter,(F=(v=s._query).filters.concat([p]),new Zs(v.path,v.collectionGroup,v.explicitOrderBy.slice(),F,v.limit,v.limitType,v.startAt,v.endAt)))},t}(Qd),Dv=function(o){function t(s,l){var p=this;return(p=o.call(this)||this).jc=s,p.zc=l,p.type="orderBy",p}return(0,re.ZT)(t,o),t.prototype._apply=function(s){var p,S,l=function(p,v,S){if(null!==p.startAt)throw new Lt(_t.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==p.endAt)throw new Lt(_t.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var F=new Ju(v,S);return function(J,le){if(null===el(J)){var pe=Bc(J);null!==pe&&O_(0,pe,le.field)}}(p,F),F}(s._query,this.jc,this.zc);return new ta(s.firestore,s.converter,(S=(p=s._query).explicitOrderBy.concat([l]),new Zs(p.path,p.collectionGroup,S,p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)))},t}(Qd),I_=function(o){function t(s,l,p){var v=this;return(v=o.call(this)||this).type=s,v.Hc=l,v.Jc=p,v}return(0,re.ZT)(t,o),t.prototype._apply=function(s){return new ta(s.firestore,s.converter,jc(s._query,this.Hc,this.Jc))},t}(Qd),M_=function(o){function t(s,l,p){var v=this;return(v=o.call(this)||this).type=s,v.Yc=l,v.Xc=p,v}return(0,re.ZT)(t,o),t.prototype._apply=function(s){var p,v,l=yp(s,this.type,this.Yc,this.Xc);return new ta(s.firestore,s.converter,(v=l,new Zs((p=s._query).path,p.collectionGroup,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,v,p.endAt)))},t}(Qd),_p=function(o){function t(s,l,p){var v=this;return(v=o.call(this)||this).type=s,v.Yc=l,v.Xc=p,v}return(0,re.ZT)(t,o),t.prototype._apply=function(s){var p,v,l=yp(s,this.type,this.Yc,this.Xc);return new ta(s.firestore,s.converter,(v=l,new Zs((p=s._query).path,p.collectionGroup,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,v)))},t}(Qd);function yp(o,t,s,l){if(s[0]=(0,Ke.m9)(s[0]),s[0]instanceof Kd)return function(v,S,F,J,le){if(!J)throw new Lt(_t.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+F+"().");for(var pe=[],Re=0,Ge=Oa(v);Re<Ge.length;Re++){var ft=Ge[Re];if(ft.field.isKeyField())pe.push(ic(S,J.key));else{var ct=J.data.field(ft.field);if(Uo(ct))throw new Lt(_t.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ft.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ct){var Et=ft.field.canonicalString();throw new Lt(_t.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+Et+"' (used as the orderBy) does not exist.")}pe.push(ct)}}return new Ps(pe,le)}(o._query,o.firestore._databaseId,t,s[0]._document,l);var p=Zl(o.firestore);return function(v,S,F,J,le,pe){var Re=v.explicitOrderBy;if(le.length>Re.length)throw new Lt(_t.INVALID_ARGUMENT,"Too many arguments provided to "+J+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var Ge=[],ft=0;ft<le.length;ft++){var ct=le[ft];if(Re[ft].field.isKeyField()){if("string"!=typeof ct)throw new Lt(_t.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+J+"(), but got a "+typeof ct);if(!tl(v)&&-1!==ct.indexOf("/"))throw new Lt(_t.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+J+"() must be a plain document ID, but '"+ct+"' contains a slash.");var Et=v.path.child(Ae.fromString(ct));if(!qn.isDocumentKey(Et))throw new Lt(_t.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+J+"() must result in a valid document path, but '"+Et+"' is not because it contains an odd number of segments.");var en=new qn(Et);Ge.push(ic(S,en))}else{var pn=Yd(F,J,ct);Ge.push(pn)}}return new Ps(Ge,pe)}(o._query,o.firestore._databaseId,p,t,s,l)}function vp(o,t,s){if("string"==typeof(s=(0,Ke.m9)(s))){if(""===s)throw new Lt(_t.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!tl(t)&&-1!==s.indexOf("/"))throw new Lt(_t.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+s+"' contains a '/' character.");var l=t.path.child(Ae.fromString(s));if(!qn.isDocumentKey(l))throw new Lt(_t.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+l+"' is not because it has an odd number of segments ("+l.length+").");return ic(o,new qn(l))}if(s instanceof so)return ic(o,s._key);throw new Lt(_t.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ql(s)+".")}function am(o,t){if(!Array.isArray(o)||0===o.length)throw new Lt(_t.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(o.length>10)throw new Lt(_t.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function O_(o,t,s){if(!s.isEqual(t))throw new Lt(_t.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+s.toString()+"' instead.")}var pf=function(){function o(){}return o.prototype.convertValue=function(t,s){switch(void 0===s&&(s="none"),Ii(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Un(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes(go(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 10:return this.convertObject(t.mapValue,s);default:throw Nn()}},o.prototype.convertObject=function(t,s){var l=this,p={};return $(t.fields,function(v,S){p[v]=l.convertValue(S,s)}),p},o.prototype.convertGeoPoint=function(t){return new uf(Un(t.latitude),Un(t.longitude))},o.prototype.convertArray=function(t,s){var l=this;return(t.values||[]).map(function(p){return l.convertValue(p,s)})},o.prototype.convertServerTimestamp=function(t,s){switch(s){case"previous":var l=mo(t);return null==l?null:this.convertValue(l,s);case"estimate":return this.convertTimestamp(Hs(t));default:return null}},o.prototype.convertTimestamp=function(t){var s=Ar(t);return new U(s.seconds,s.nanos)},o.prototype.convertDocumentKey=function(t,s){var l=Ae.fromString(t);Yn(Ys(l));var p=new Gd(l.get(1),l.get(3)),v=new qn(l.popFirst(5));return p.isEqual(s)||Oi("Document "+v+" contains a document reference within a different database ("+p.projectId+"/"+p.database+") which is not supported. It will be treated as a reference in the current database ("+s.projectId+"/"+s.database+") instead."),v},o}();function Jd(o,t,s){return o?s&&(s.merge||s.mergeFields)?o.toFirestore(t,s):o.toFirestore(t):t}var R_=function(o){function t(s){var l=this;return(l=o.call(this)||this).firestore=s,l}return(0,re.ZT)(t,o),t.prototype.convertBytes=function(s){return new od(s)},t.prototype.convertReference=function(s){var l=this.convertDocumentKey(s,this.firestore._databaseId);return new so(this.firestore,null,l)},t}(pf),bp=function(){function o(t,s){this._firestore=t,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Zl(t)}return o.prototype.set=function(t,s,l){this._verifyNotCommitted();var p=Rc(t,this._firestore),v=Jd(p.converter,s,l),S=up(this._dataReader,"WriteBatch.set",p._key,v,null!==p.converter,l);return this._mutations.push(S.toMutation(p._key,Ao.none())),this},o.prototype.update=function(t,s,l){for(var p=[],v=3;v<arguments.length;v++)p[v-3]=arguments[v];this._verifyNotCommitted();var S,F=Rc(t,this._firestore);return S="string"==typeof(s=(0,Ke.m9)(s))||s instanceof Cl?dp(this._dataReader,"WriteBatch.update",F._key,s,l,p):cp(this._dataReader,"WriteBatch.update",F._key,s),this._mutations.push(S.toMutation(F._key,Ao.exists(!0))),this},o.prototype.delete=function(t){this._verifyNotCommitted();var s=Rc(t,this._firestore);return this._mutations=this._mutations.concat(new aa(s._key,Ao.none())),this},o.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},o.prototype._verifyNotCommitted=function(){if(this._committed)throw new Lt(_t.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},o}();function Rc(o,t){if((o=(0,Ke.m9)(o)).firestore!==t)throw new Lt(_t.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return o}var ld=function(o){function t(s){var l=this;return(l=o.call(this)||this).firestore=s,l}return(0,re.ZT)(t,o),t.prototype.convertBytes=function(s){return new od(s)},t.prototype.convertReference=function(s){var l=this.convertDocumentKey(s,this.firestore._databaseId);return new so(this.firestore,null,l)},t}(pf);function um(o,t,s){for(var l=[],p=3;p<arguments.length;p++)l[p-3]=arguments[p];o=Di(o,so);var v=Di(o.firestore,Ho),S=Zl(v);return Mh(v,[("string"==typeof(t=(0,Ke.m9)(t))||t instanceof Cl?dp(S,"updateDoc",o._key,t,s,l):cp(S,"updateDoc",o._key,t)).toMutation(o._key,Ao.exists(!0))])}function lm(o){for(var t,s,l,p=[],v=1;v<arguments.length;v++)p[v-1]=arguments[v];o=(0,Ke.m9)(o);var S={includeMetadataChanges:!1},F=0;"object"!=typeof p[F]||rd(p[F])||(S=p[F],F++);var J,le,pe,Re={includeMetadataChanges:S.includeMetadataChanges};if(rd(p[F])){var Ge=p[F];p[F]=null===(t=Ge.next)||void 0===t?void 0:t.bind(Ge),p[F+1]=null===(s=Ge.error)||void 0===s?void 0:s.bind(Ge),p[F+2]=null===(l=Ge.complete)||void 0===l?void 0:l.bind(Ge)}if(o instanceof so)le=Di(o.firestore,Ho),pe=yu(o._key.path),J={next:function(Et){p[F]&&p[F](Cp(le,o,Et))},error:p[F+1],complete:p[F+2]};else{var ft=Di(o,ta);le=Di(ft.firestore,Ho),pe=ft._query;var ct=new ld(le);J={next:function(Et){p[F]&&p[F](new ad(le,ct,ft,Et))},error:p[F+1],complete:p[F+2]},mp(o._query)}return function(Et,en,pn,er){var tr=this,Wr=new nf(er),ci=new Wf(en,Wr,pn);return Et.asyncQueue.enqueueAndForget(function(){return(0,re.mG)(tr,void 0,void 0,function(){var Ni;return(0,re.Jh)(this,function(As){switch(As.label){case 0:return Ni=Zf,[4,Mc(Et)];case 1:return[2,Ni.apply(void 0,[As.sent(),ci])]}})})}),function(){Wr.Wo(),Et.asyncQueue.enqueueAndForget(function(){return(0,re.mG)(tr,void 0,void 0,function(){var Ni;return(0,re.Jh)(this,function(As){switch(As.label){case 0:return Ni=Cg,[4,Mc(Et)];case 1:return[2,Ni.apply(void 0,[As.sent(),ci])]}})})})}}(gs(le),pe,Re,J)}function Mh(o,t){return function(s,l){var p=this,v=new es;return s.asyncQueue.enqueueAndForget(function(){return(0,re.mG)(p,void 0,void 0,function(){var S;return(0,re.Jh)(this,function(F){switch(F.label){case 0:return S=ef,[4,Sh(s)];case 1:return[2,S.apply(void 0,[F.sent(),l,v])]}})})}),v.promise}(gs(o),t)}function Cp(o,t,s){var l=s.docs.get(t._key),p=new ld(o);return new Wl(o,p,t._key,l,new sd(s.hasPendingWrites,s.fromCache),t.converter)}var gf=function(o){function t(s,l){var p=this;return(p=o.call(this,s,l)||this)._firestore=s,p}return(0,re.ZT)(t,o),t.prototype.get=function(s){var l=this,p=Rc(s,this._firestore),v=new ld(this._firestore);return o.prototype.get.call(this,s).then(function(S){return new Wl(l._firestore,v,p._key,S._document,new sd(!1,!1),p.converter)})},t}(function(){function o(t,s){this._firestore=t,this._transaction=s,this._dataReader=Zl(t)}return o.prototype.get=function(t){var s=this,l=Rc(t,this._firestore),p=new R_(this._firestore);return this._transaction.lookup([l._key]).then(function(v){if(!v||1!==v.length)return Nn();var S=v[0];if(S.isFoundDocument())return new Kd(s._firestore,p,S.key,S,l.converter);if(S.isNoDocument())return new Kd(s._firestore,p,l._key,null,l.converter);throw Nn()})},o.prototype.set=function(t,s,l){var p=Rc(t,this._firestore),v=Jd(p.converter,s,l),S=up(this._dataReader,"Transaction.set",p._key,v,null!==p.converter,l);return this._transaction.set(p._key,S),this},o.prototype.update=function(t,s,l){for(var p=[],v=3;v<arguments.length;v++)p[v-3]=arguments[v];var S,F=Rc(t,this._firestore);return S="string"==typeof(s=(0,Ke.m9)(s))||s instanceof Cl?dp(this._dataReader,"Transaction.update",F._key,s,l,p):cp(this._dataReader,"Transaction.update",F._key,s),this._transaction.update(F._key,S),this},o.prototype.delete=function(t){var s=Rc(t,this._firestore);return this._transaction.delete(s._key),this},o}());function cd(){if("undefined"==typeof Uint8Array)throw new Lt(_t.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ep(){if("undefined"==typeof atob)throw new Lt(_t.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var uu=function(){function o(t){this._delegate=t}return o.fromBase64String=function(t){return Ep(),new o(od.fromBase64String(t))},o.fromUint8Array=function(t){return cd(),new o(od.fromUint8Array(t))},o.prototype.toBase64=function(){return Ep(),this._delegate.toBase64()},o.prototype.toUint8Array=function(){return cd(),this._delegate.toUint8Array()},o.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},o.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},o}(),Oh=function(){function o(){}return o.prototype.enableIndexedDbPersistence=function(t,s){return function(l,p){Jg(l=Di(l,Ho));var v=gs(l),S=l._freezeSettings(),F=new wh;return Qg(v,F,new kg(F,S.cacheSizeBytes,null==p?void 0:p.forceOwnership))}(t._delegate,{forceOwnership:s})},o.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(s){Jg(s=Di(s,Ho));var l=gs(s),p=s._freezeSettings(),v=new wh;return Qg(l,v,new bl(v,p.cacheSizeBytes))}(t._delegate)},o.prototype.clearIndexedDbPersistence=function(t){return function(s){var l=this;if(s._initialized&&!s._terminated)throw new Lt(_t.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var p=new es;return s._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,re.mG)(l,void 0,void 0,function(){var v;return(0,re.Jh)(this,function(S){switch(S.label){case 0:return S.trys.push([0,2,,3]),[4,function(F){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(le){switch(le.label){case 0:return tu.yt()?[4,tu.delete(F+"main")]:[2,Promise.resolve()];case 1:return le.sent(),[2]}})})}(Ie(s._databaseId,s._persistenceKey))];case 1:return S.sent(),p.resolve(),[3,3];case 2:return v=S.sent(),p.reject(v),[3,3];case 3:return[2]}})})}),p.promise}(t._delegate)},o}(),cm=function(){function o(t,s,l){var p=this;this._delegate=s,this.Zc=l,this.INTERNAL={delete:function(){return p.terminate()}},t instanceof Gd||(this.tu=t)}return Object.defineProperty(o.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),o.prototype.settings=function(t){var s=this._delegate._getSettings();t.merge||s.host===t.host||Cs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},s),t)).merge,this._delegate._setSettings(t)},o.prototype.useEmulator=function(t,s,l){void 0===l&&(l={}),function(p,v,S,F){var J;void 0===F&&(F={});var le=(p=Di(p,Ah))._getSettings();if("firestore.googleapis.com"!==le.host&&le.host!==v&&Cs("Host has been set in both settings() and useEmulator(), emulator host will be used"),p._setSettings(Object.assign(Object.assign({},le),{host:v+":"+S,ssl:!1})),F.mockUserToken){var pe,Re;if("string"==typeof F.mockUserToken)pe=F.mockUserToken,Re=Ss.MOCK_USER;else{pe=(0,Ke.Sg)(F.mockUserToken,null===(J=p._app)||void 0===J?void 0:J.options.projectId);var Ge=F.mockUserToken.sub||F.mockUserToken.user_id;if(!Ge)throw new Lt(_t.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");Re=new Ss(Ge)}p._credentials=new Gg(new Hg(pe,Re))}}(this._delegate,t,s,l)},o.prototype.enableNetwork=function(){return function(t){var s=this;return t.asyncQueue.enqueue(function(){return(0,re.mG)(s,void 0,void 0,function(){var l,p;return(0,re.Jh)(this,function(v){switch(v.label){case 0:return[4,Dh(t)];case 1:return l=v.sent(),[4,Bg(t)];case 2:return p=v.sent(),[2,(l.setNetworkEnabled(!0),S=p,F=an(S),F.Or.delete(0),ed(F))]}var S,F})})})}(gs(Di(this._delegate,Ho)))},o.prototype.disableNetwork=function(){return function(t){var s=this;return t.asyncQueue.enqueue(function(){return(0,re.mG)(s,void 0,void 0,function(){var l,p;return(0,re.Jh)(this,function(v){switch(v.label){case 0:return[4,Dh(t)];case 1:return l=v.sent(),[4,Bg(t)];case 2:return p=v.sent(),[2,(l.setNetworkEnabled(!1),function(S){return(0,re.mG)(this,void 0,void 0,function(){var F;return(0,re.Jh)(this,function(J){switch(J.label){case 0:return(F=an(S)).Or.add(0),[4,bh(F)];case 1:return J.sent(),F.Br.set("Offline"),[2]}})})}(p))]}})})})}(gs(Di(this._delegate,Ho)))},o.prototype.enablePersistence=function(t){var s=!1,l=!1;return t&&$g("synchronizeTabs",s=!!t.synchronizeTabs,"experimentalForceOwningTab",l=!!t.experimentalForceOwningTab),s?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,l)},o.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},o.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},o.prototype.waitForPendingWrites=function(){return function(t){var s=this,l=new es;return t.asyncQueue.enqueueAndForget(function(){return(0,re.mG)(s,void 0,void 0,function(){var p;return(0,re.Jh)(this,function(v){switch(v.label){case 0:return p=g_,[4,Sh(t)];case 1:return[2,p.apply(void 0,[v.sent(),l])]}})})}),l.promise}(gs(Di(this._delegate,Ho)))},o.prototype.onSnapshotsInSync=function(t){return l=t,function(p,v){var S=this,F=new nf(v);return p.asyncQueue.enqueueAndForget(function(){return(0,re.mG)(S,void 0,void 0,function(){var J;return(0,re.Jh)(this,function(le){switch(le.label){case 0:return J=function(pe,Re){an(pe).Gr.add(Re),Re.next()},[4,Mc(p)];case 1:return[2,J.apply(void 0,[le.sent(),F])]}})})}),function(){F.Wo(),p.asyncQueue.enqueueAndForget(function(){return(0,re.mG)(S,void 0,void 0,function(){var J;return(0,re.Jh)(this,function(le){switch(le.label){case 0:return J=function(pe,Re){an(pe).Gr.delete(Re)},[4,Mc(p)];case 1:return[2,J.apply(void 0,[le.sent(),F])]}})})})}}(gs(Di(this._delegate,Ho)),rd(l)?l:{next:l});var l},Object.defineProperty(o.prototype,"app",{get:function(){if(!this.tu)throw new Lt(_t.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),o.prototype.collection=function(t){try{return new Yl(this,sp(this._delegate,t))}catch(s){throw ms(s,"collection()","Firestore.collection()")}},o.prototype.doc=function(t){try{return new ka(this,sf(this._delegate,t))}catch(s){throw ms(s,"doc()","Firestore.doc()")}},o.prototype.collectionGroup=function(t){try{return new Tl(this,function(s,l){if(s=Di(s,Ah),Gu("collectionGroup","collection id",l),l.indexOf("/")>=0)throw new Lt(_t.INVALID_ARGUMENT,"Invalid collection ID '"+l+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ta(s,null,(p=l,new Zs(Ae.emptyPath(),p)));var p}(this._delegate,t))}catch(s){throw ms(s,"collectionGroup()","Firestore.collectionGroup()")}},o.prototype.runTransaction=function(t){var l,s=this;return function(v,S){var F=this,J=new es;return v.asyncQueue.enqueueAndForget(function(){return(0,re.mG)(F,void 0,void 0,function(){var le;return(0,re.Jh)(this,function(pe){switch(pe.label){case 0:return[4,(Re=v,of(Re).then(function(Ge){return Ge.datastore}))];case 1:return le=pe.sent(),new b_(v.asyncQueue,le,S,J).run(),[2]}var Re})})}),J.promise}(gs(l=this._delegate),function(v){return function(l){return t(new qu(s,l))}(new gf(l,v))})},o.prototype.batch=function(){var t=this;return gs(this._delegate),new Xd(new bp(this._delegate,function(s){return Mh(t._delegate,s)}))},o.prototype.loadBundle=function(t){throw new Lt(_t.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},o.prototype.namedQuery=function(t){throw new Lt(_t.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},o}(),mf=function(o){function t(s){var l=this;return(l=o.call(this)||this).firestore=s,l}return(0,re.ZT)(t,o),t.prototype.convertBytes=function(s){return new uu(new od(s))},t.prototype.convertReference=function(s){var l=this.convertDocumentKey(s,this.firestore._databaseId);return ka.eu(l,this.firestore,null)},t}(pf),qu=function(){function o(t,s){this._firestore=t,this._delegate=s,this._userDataWriter=new mf(t)}return o.prototype.get=function(t){var s=this,l=lu(t);return this._delegate.get(l).then(function(p){return new wl(s._firestore,new Wl(s._firestore._delegate,s._userDataWriter,p._key,p._document,p.metadata,l.converter))})},o.prototype.set=function(t,s,l){var p=lu(t);return l?(zd("Transaction.set",l),this._delegate.set(p,s,l)):this._delegate.set(p,s),this},o.prototype.update=function(t,s,l){for(var p,v=[],S=3;S<arguments.length;S++)v[S-3]=arguments[S];var F=lu(t);return 2===arguments.length?this._delegate.update(F,s):(p=this._delegate).update.apply(p,(0,re.ev)([F,s,l],v)),this},o.prototype.delete=function(t){var s=lu(t);return this._delegate.delete(s),this},o}(),Xd=function(){function o(t){this._delegate=t}return o.prototype.set=function(t,s,l){var p=lu(t);return l?(zd("WriteBatch.set",l),this._delegate.set(p,s,l)):this._delegate.set(p,s),this},o.prototype.update=function(t,s,l){for(var p,v=[],S=3;S<arguments.length;S++)v[S-3]=arguments[S];var F=lu(t);return 2===arguments.length?this._delegate.update(F,s):(p=this._delegate).update.apply(p,(0,re.ev)([F,s,l],v)),this},o.prototype.delete=function(t){var s=lu(t);return this._delegate.delete(s),this},o.prototype.commit=function(){return this._delegate.commit()},o}(),cs=function(){function o(t,s,l){this._firestore=t,this._userDataWriter=s,this._delegate=l}return o.prototype.fromFirestore=function(t,s){var l=new ff(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Dl(this._firestore,l),null!=s?s:{})},o.prototype.toFirestore=function(t,s){return s?this._delegate.toFirestore(t,s):this._delegate.toFirestore(t)},o.nu=function(t,s){var l=o.su,p=l.get(t);p||(p=new WeakMap,l.set(t,p));var v=p.get(s);return v||(v=new o(t,new mf(t),s),p.set(s,v)),v},o}();cs.su=new WeakMap;var ka=function(){function o(t,s){this.firestore=t,this._delegate=s,this._userDataWriter=new mf(t)}return o.iu=function(t,s,l){if(t.length%2!=0)throw new Lt(_t.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new o(s,new so(s._delegate,l,new qn(t)))},o.eu=function(t,s,l){return new o(s,new so(s._delegate,l,t))},Object.defineProperty(o.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"parent",{get:function(){return new Yl(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),o.prototype.collection=function(t){try{return new Yl(this.firestore,sp(this._delegate,t))}catch(s){throw ms(s,"collection()","DocumentReference.collection()")}},o.prototype.isEqual=function(t){return(t=(0,Ke.m9)(t))instanceof so&&af(this._delegate,t)},o.prototype.set=function(t,s){s=zd("DocumentReference.set",s);try{return function(l,p,v){l=Di(l,so);var S=Di(l.firestore,Ho),F=Jd(l.converter,p,v);return Mh(S,[up(Zl(S),"setDoc",l._key,F,null!==l.converter,v).toMutation(l._key,Ao.none())])}(this._delegate,t,s)}catch(l){throw ms(l,"setDoc()","DocumentReference.set()")}},o.prototype.update=function(t,s){for(var l=[],p=2;p<arguments.length;p++)l[p-2]=arguments[p];try{return 1===arguments.length?um(this._delegate,t):um.apply(void 0,(0,re.ev)([this._delegate,t,s],l))}catch(v){throw ms(v,"updateDoc()","DocumentReference.update()")}},o.prototype.delete=function(){return Mh(Di((t=this._delegate).firestore,Ho),[new aa(t._key,Ao.none())]);var t},o.prototype.onSnapshot=function(){for(var t=this,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var p=La(s),v=_f(s,function(S){return new wl(t.firestore,new Wl(t.firestore._delegate,t._userDataWriter,S._key,S._document,S.metadata,t._delegate.converter))});return lm(this._delegate,p,v)},o.prototype.get=function(t){var s=this;return("cache"===(null==t?void 0:t.source)?function(l){l=Di(l,so);var p=Di(l.firestore,Ho),v=gs(p),S=new ld(p);return function(F,J){var le=this,pe=new es;return F.asyncQueue.enqueueAndForget(function(){return(0,re.mG)(le,void 0,void 0,function(){var Re;return(0,re.Jh)(this,function(Ge){switch(Ge.label){case 0:return Re=function(ft,ct,Et){return(0,re.mG)(this,void 0,void 0,function(){var en,pn;return(0,re.Jh)(this,function(er){switch(er.label){case 0:return er.trys.push([0,2,,3]),[4,(tr=ft,Wr=ct,ci=an(tr),ci.persistence.runTransaction("read document","readonly",function(Ni){return ci.Mn.mn(Ni,Wr)}))];case 1:return(pn=er.sent()).isFoundDocument()?Et.resolve(pn):pn.isNoDocument()?Et.resolve(null):Et.reject(new Lt(_t.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return en=er.sent(),pn=Sc(en,"Failed to get document '"+ct+" from cache"),Et.reject(pn),[3,3];case 3:return[2]}var tr,Wr,ci})})},[4,Th(F)];case 1:return[2,Re.apply(void 0,[Ge.sent(),J,pe])]}})})}),pe.promise}(v,l._key).then(function(F){return new Wl(p,S,l._key,F,new sd(null!==F&&F.hasLocalMutations,!0),l.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(l){l=Di(l,so);var p=Di(l.firestore,Ho);return ip(gs(p),l._key,{source:"server"}).then(function(v){return Cp(p,l,v)})}(this._delegate):function(l){l=Di(l,so);var p=Di(l.firestore,Ho);return ip(gs(p),l._key).then(function(v){return Cp(p,l,v)})}(this._delegate)).then(function(l){return new wl(s.firestore,new Wl(s.firestore._delegate,s._userDataWriter,l._key,l._document,l.metadata,s._delegate.converter))})},o.prototype.withConverter=function(t){return new o(this.firestore,this._delegate.withConverter(t?cs.nu(this.firestore,t):null))},o}();function ms(o,t,s){return o.message=o.message.replace(t,s),o}function La(o){for(var t=0,s=o;t<s.length;t++){var l=s[t];if("object"==typeof l&&!rd(l))return l}return{}}function _f(o,t){var s,l,p;return{next:function(v){p.next&&p.next(t(v))},error:null===(s=(p=rd(o[0])?o[0]:rd(o[1])?o[1]:"function"==typeof o[0]?{next:o[0],error:o[1],complete:o[2]}:{next:o[1],error:o[2],complete:o[3]}).error)||void 0===s?void 0:s.bind(p),complete:null===(l=p.complete)||void 0===l?void 0:l.bind(p)}}var wl=function(){function o(t,s){this._firestore=t,this._delegate=s}return Object.defineProperty(o.prototype,"ref",{get:function(){return new ka(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),o.prototype.data=function(t){return this._delegate.data(t)},o.prototype.get=function(t,s){return this._delegate.get(t,s)},o.prototype.isEqual=function(t){return sm(this._delegate,t._delegate)},o}(),Dl=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,re.ZT)(t,o),t.prototype.data=function(s){return this._delegate.data(s)},t}(wl),Tl=function(){function o(t,s){this.firestore=t,this._delegate=s,this._userDataWriter=new mf(t)}return o.prototype.where=function(t,s,l){try{return new o(this.firestore,ud(this._delegate,(S=l,F=s,J=Ih("where",p=t),new zu(J,F,S))))}catch(p){throw ms(p,/(orderBy|where)\(\)/,"Query.$1()")}var p,S,F,J},o.prototype.orderBy=function(t,s){try{return new o(this.firestore,ud(this._delegate,function(l,p){void 0===p&&(p="asc");var v=p,S=Ih("orderBy",l);return new Dv(S,v)}(t,s)))}catch(l){throw ms(l,/(orderBy|where)\(\)/,"Query.$1()")}},o.prototype.limit=function(t){try{return new o(this.firestore,ud(this._delegate,(qd("limit",s=t),new I_("limit",s,"F"))))}catch(s){throw ms(s,"limit()","Query.limit()")}var s},o.prototype.limitToLast=function(t){try{return new o(this.firestore,ud(this._delegate,(qd("limitToLast",s=t),new I_("limitToLast",s,"L"))))}catch(s){throw ms(s,"limitToLast()","Query.limitToLast()")}var s},o.prototype.startAt=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,ud(this._delegate,function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];return new M_("startAt",l,!0)}.apply(void 0,t)))}catch(l){throw ms(l,"startAt()","Query.startAt()")}},o.prototype.startAfter=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,ud(this._delegate,function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];return new M_("startAfter",l,!1)}.apply(void 0,t)))}catch(l){throw ms(l,"startAfter()","Query.startAfter()")}},o.prototype.endBefore=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,ud(this._delegate,function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];return new _p("endBefore",l,!0)}.apply(void 0,t)))}catch(l){throw ms(l,"endBefore()","Query.endBefore()")}},o.prototype.endAt=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,ud(this._delegate,function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];return new _p("endAt",l,!1)}.apply(void 0,t)))}catch(l){throw ms(l,"endAt()","Query.endAt()")}},o.prototype.isEqual=function(t){return Yg(this._delegate,t._delegate)},o.prototype.get=function(t){var s=this;return("cache"===(null==t?void 0:t.source)?function(l){l=Di(l,ta);var p=Di(l.firestore,Ho),v=gs(p),S=new ld(p);return function(F,J){var le=this,pe=new es;return F.asyncQueue.enqueueAndForget(function(){return(0,re.mG)(le,void 0,void 0,function(){var Re;return(0,re.Jh)(this,function(Ge){switch(Ge.label){case 0:return Re=function(ft,ct,Et){return(0,re.mG)(this,void 0,void 0,function(){var en,pn,er,tr,Wr;return(0,re.Jh)(this,function(ci){switch(ci.label){case 0:return ci.trys.push([0,2,,3]),[4,Gh(ft,ct,!0)];case 1:return Wr=ci.sent(),en=new nd(ct,Wr.Bn),pn=en._o(Wr.documents),er=en.applyChanges(pn,!1),Et.resolve(er.snapshot),[3,3];case 2:return tr=ci.sent(),Wr=Sc(tr,"Failed to execute query '"+ct+" against cache"),Et.reject(Wr),[3,3];case 3:return[2]}})})},[4,Th(F)];case 1:return[2,Re.apply(void 0,[Ge.sent(),J,pe])]}})})}),pe.promise}(v,l._query).then(function(F){return new ad(p,S,l,F)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(l){l=Di(l,ta);var p=Di(l.firestore,Ho),v=gs(p),S=new ld(p);return jg(v,l._query,{source:"server"}).then(function(F){return new ad(p,S,l,F)})}(this._delegate):function(l){l=Di(l,ta);var p=Di(l.firestore,Ho),v=gs(p),S=new ld(p);return mp(l._query),jg(v,l._query).then(function(F){return new ad(p,S,l,F)})}(this._delegate)).then(function(l){return new xc(s.firestore,new ad(s.firestore._delegate,s._userDataWriter,s._delegate,l._snapshot))})},o.prototype.onSnapshot=function(){for(var t=this,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var p=La(s),v=_f(s,function(S){return new xc(t.firestore,new ad(t.firestore._delegate,t._userDataWriter,t._delegate,S._snapshot))});return lm(this._delegate,p,v)},o.prototype.withConverter=function(t){return new o(this.firestore,this._delegate.withConverter(t?cs.nu(this.firestore,t):null))},o}(),eh=function(){function o(t,s){this._firestore=t,this._delegate=s}return Object.defineProperty(o.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"doc",{get:function(){return new Dl(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),o}(),xc=function(){function o(t,s){this._firestore=t,this._delegate=s}return Object.defineProperty(o.prototype,"query",{get:function(){return new Tl(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(s){return new Dl(t._firestore,s)})},enumerable:!1,configurable:!0}),o.prototype.docChanges=function(t){var s=this;return this._delegate.docChanges(t).map(function(l){return new eh(s._firestore,l)})},o.prototype.forEach=function(t,s){var l=this;this._delegate.forEach(function(p){t.call(s,new Dl(l._firestore,p))})},o.prototype.isEqual=function(t){return sm(this._delegate,t._delegate)},o}(),Yl=function(o){function t(s,l){var p=this;return(p=o.call(this,s,l)||this).firestore=s,p._delegate=l,p}return(0,re.ZT)(t,o),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var s=this._delegate.parent;return s?new ka(this.firestore,s):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(s){try{return new ka(this.firestore,void 0===s?sf(this._delegate):sf(this._delegate,s))}catch(l){throw ms(l,"doc()","CollectionReference.doc()")}},t.prototype.add=function(s){var p,v,S,F,J,l=this;return(p=this._delegate,v=s,S=Di(p.firestore,Ho),F=sf(p),J=Jd(p.converter,v),Mh(S,[up(Zl(p.firestore),"addDoc",F._key,J,null!==p.converter,{}).toMutation(F._key,Ao.exists(!1))]).then(function(){return F})).then(function(p){return new ka(l.firestore,p)})},t.prototype.isEqual=function(s){return af(this._delegate,s._delegate)},t.prototype.withConverter=function(s){return new t(this.firestore,this._delegate.withConverter(s?cs.nu(this.firestore,s):null))},t}(Tl);function lu(o){return Di(o,so)}var th=function(){function o(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];this._delegate=new(Cl.bind.apply(Cl,(0,re.ev)([void 0],t)))}return o.documentId=function(){return new o(Ct.keyField().canonicalString())},o.prototype.isEqual=function(t){return(t=(0,Ke.m9)(t))instanceof Cl&&this._delegate._internalPath.isEqual(t._internalPath)},o}(),nh=function(){function o(t){this._delegate=t}return o.serverTimestamp=function(){var t=new tm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new o(t)},o.delete=function(){var t=new lp("deleteField");return t._methodName="FieldValue.delete",new o(t)},o.arrayUnion=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l=function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];return new nm("arrayUnion",p)}.apply(void 0,t);return l._methodName="FieldValue.arrayUnion",new o(l)},o.arrayRemove=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l=function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];return new rm("arrayRemove",p)}.apply(void 0,t);return l._methodName="FieldValue.arrayRemove",new o(l)},o.increment=function(t){var s=new im("increment",t);return s._methodName="FieldValue.increment",new o(s)},o.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},o}(),dm=Q(6034),hm={Firestore:cm,GeoPoint:uf,Timestamp:U,Blob:uu,Transaction:qu,WriteBatch:Xd,DocumentReference:ka,DocumentSnapshot:wl,Query:Tl,QueryDocumentSnapshot:Dl,QuerySnapshot:xc,CollectionReference:Yl,FieldPath:th,FieldValue:nh,setLogLevel:function(o){ss.setLogLevel(o)},CACHE_SIZE_UNLIMITED:-1};!function(o){o.INTERNAL.registerComponent(new dm.wA("firestore",function(l){return t=l.getProvider("app").getImmediate(),s=l.getProvider("auth-internal"),new cm(t,new Ho(t,s),new Oh);var t,s},"PUBLIC").setServiceProps(Object.assign({},hm))),o.registerVersion("@firebase/firestore","2.4.0")}(Xe.Z);var Dp=Q(9829);function Tp(o,t){return function(o,t=X.z){return new C.y(s=>{let l;return null!=t?t.schedule(()=>{l=o.onSnapshot({includeMetadataChanges:!0},s)}):l=o.onSnapshot({includeMetadataChanges:!0},s),()=>{null!=l&&l()}})}(o,t)}function Sp(o,t){return Tp(o,t).pipe((0,ve.U)(s=>({payload:s,type:"query"})))}function Rh(o,t){return Sp(o,t).pipe((0,Fe.O)(void 0),(0,fe.G)(),(0,ve.U)(([s,l])=>{const p=l.payload.docChanges(),v=p.map(S=>({type:S.type,payload:S}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(l.payload.metadata)&&l.payload.docs.forEach((S,F)=>{const J=p.find(pe=>pe.doc.ref.isEqual(S.ref)),le=null==s?void 0:s.payload.docs.find(pe=>pe.ref.isEqual(S.ref));J&&JSON.stringify(J.doc.metadata)===JSON.stringify(S.metadata)||!J&&le&&JSON.stringify(le.metadata)===JSON.stringify(S.metadata)||v.push({type:"modified",payload:{oldIndex:F,newIndex:F,type:"modified",doc:S}})}),v}))}function mm(o,t,s){return Rh(o,s).pipe((0,se.R)((l,p)=>function(o,t,s){return t.forEach(l=>{s.indexOf(l.type)>-1&&(o=function(o,t){switch(t.type){case"added":if(!o[t.newIndex]||!o[t.newIndex].doc.ref.isEqual(t.doc.ref))return yf(o,t.newIndex,0,t);break;case"modified":if(null==o[t.oldIndex]||o[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const s=o.slice();return s.splice(t.oldIndex,1),s.splice(t.newIndex,0,t),s}return yf(o,t.newIndex,1,t)}break;case"removed":if(o[t.oldIndex]&&o[t.oldIndex].doc.ref.isEqual(t.doc.ref))return yf(o,t.oldIndex,1)}return o}(o,l))}),o}(l,p.map(v=>v.payload),t),[]),(0,Se.x)(),(0,ve.U)(l=>l.map(p=>({type:p.type,payload:p}))))}function yf(o,t,s,...l){const p=o.slice();return p.splice(t,s,...l),p}function N_(o){return(!o||0===o.length)&&(o=["added","removed","modified"]),o}class ym{constructor(t,s,l){this.ref=t,this.query=s,this.afs=l}stateChanges(t){let s=Rh(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(s=s.pipe((0,ve.U)(l=>l.filter(p=>t.indexOf(p.type)>-1)))),s.pipe((0,Fe.O)(void 0),(0,fe.G)(),(0,me.h)(([l,p])=>p.length>0||!l),(0,ve.U)(([l,p])=>p),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe((0,se.R)((s,l)=>[...s,...l],[]))}snapshotChanges(t){const s=N_(t);return mm(this.query,s,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Sp(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(s=>s.payload.docs.map(l=>t.idField?Object.assign(Object.assign({},l.data()),{[t.idField]:l.id}):l.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Ve.D)(this.query.get(t)).pipe((0,Ce.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Ap(this.ref.doc(t),this.afs)}}class Ap{constructor(t,s){this.ref=t,this.afs=s}set(t,s){return this.ref.set(t,s)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,s){const l=this.ref.collection(t),{ref:p,query:v}=Cm(l,s);return new ym(p,v,this.afs)}snapshotChanges(){return function(o,t){return Tp(o,t).pipe((0,Fe.O)(void 0),(0,fe.G)(),(0,ve.U)(([s,l])=>l.exists?(null==s?void 0:s.exists)?{payload:l,type:"modified"}:{payload:l,type:"added"}:{payload:l,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ve.U)(({payload:s})=>t.idField?Object.assign(Object.assign({},s.data()),{[t.idField]:s.id}):s.data()))}get(t){return(0,Ve.D)(this.ref.get(t)).pipe((0,Ce.QV)(this.afs.schedulers.insideAngular))}}class k_{constructor(t,s){this.query=t,this.afs=s}stateChanges(t){return t&&0!==t.length?Rh(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(s=>s.filter(l=>t.indexOf(l.type)>-1)),(0,me.h)(s=>s.length>0),this.afs.keepUnstableUntilFirst):Rh(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe((0,se.R)((s,l)=>[...s,...l],[]))}snapshotChanges(t){const s=N_(t);return mm(this.query,s,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Sp(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(l=>l.payload.docs.map(p=>t.idField?Object.assign({[t.idField]:p.id},p.data()):p.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Ve.D)(this.query.get(t)).pipe((0,Ce.QV)(this.afs.schedulers.insideAngular))}}const Ip=new g.OlP("angularfire2.enableFirestorePersistence"),vm=new g.OlP("angularfire2.firestore.persistenceSettings"),bm=new g.OlP("angularfire2.firestore.settings"),L_=new g.OlP("angularfire2.firestore.use-emulator");function Cm(o,t=(s=>s)){return{query:t(o),ref:o}}let Em=(()=>{class o{constructor(s,l,p,v,S,F,J,le,pe){this.schedulers=new Me.HU(F),this.keepUnstableUntilFirst=(0,Me.ss)(this.schedulers);const Re=(0,Me.on)(s,F,l);!P.Z.auth&&pe&&(0,Me.yq)();const Ge=le;[this.firestore,this.persistenceEnabled$]=(0,Me.sI)(`${Re.name}.firestore`,"AngularFirestore",Re,()=>{const ft=F.runOutsideAngular(()=>Re.firestore());if(v&&ft.settings(v),Ge&&ft.useEmulator(...Ge),p&&!(0,Ue.PM)(S)){const ct=()=>{try{return(0,Ve.D)(ft.enablePersistence(J||void 0).then(()=>!0,()=>!1))}catch(Et){return"undefined"!=typeof console&&console.warn(Et),(0,Ee.of)(!1)}};return[ft,F.runOutsideAngular(ct)]}return[ft,(0,Ee.of)(!1)]},[v,Ge,p])}collection(s,l){let p;p="string"==typeof s?this.firestore.collection(s):s;const{ref:v,query:S}=Cm(p,l),F=this.schedulers.ngZone.run(()=>v);return new ym(F,S,this)}collectionGroup(s,l){const p=l||(S=>S),v=this.firestore.collectionGroup(s);return new k_(p(v),this)}doc(s){let l;l="string"==typeof s?this.firestore.doc(s):s;const p=this.schedulers.ngZone.run(()=>l);return new Ap(p,this)}createId(){return this.firestore.collection("_").doc().id}}return o.\u0275fac=function(s){return new(s||o)(g.LFG(Me.Dh),g.LFG(Me.xv,8),g.LFG(Ip,8),g.LFG(bm,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(vm,8),g.LFG(L_,8),g.LFG(Dp.Qv,8))},o.\u0275prov=g.Yz7({factory:function(){return new o(g.LFG(Me.Dh),g.LFG(Me.xv,8),g.LFG(Ip,8),g.LFG(bm,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(vm,8),g.LFG(L_,8),g.LFG(Dp.Qv,8))},token:o,providedIn:"any"}),o})();var Tv=Q(9351);let Sv=(()=>{class o{constructor(s,l){this._firestore=s,this._storage=l}setUserData(s,l){const p=this._firestore.collection("users").doc(s.uid);return p.set({name:s.name,email:s.email,active:s.active,roles:s.roles,domains:s.domains,uid:s.uid}).then(()=>{if(l)return p.collection("loginHistory").doc(s.uid).set({loginHistory:[]})})}getUserData(s,l){return this._firestore.collection("users",p=>p.where(s,"==",l)).snapshotChanges()}getUsers(){return this._firestore.collection("users").snapshotChanges()}setUserIPAddress(s){return this._firestore.collection("users").doc(s.uid).collection("loginHistory").doc(s.uid).update({loginHistory:P.Z.firestore.FieldValue.arrayUnion({date:s.date,ip:s.ip,country:s.country,city:s.city})})}updateUserActivity(s){return this._firestore.collection("users").doc(s.userId).update({active:s.parameter})}getUserLogins(s){return this._firestore.collection("users").doc(s).collection("loginHistory").snapshotChanges()}setDomain(s,l){return this._firestore.collection("users").doc(s).update({domains:P.Z.firestore.FieldValue.arrayUnion({domain:l.domain,description:l.description,checked:l.checked})})}deleteDomain(s){return this._firestore.collection("domains").doc(s).delete()}deleteDomainItem(s,l){return this._firestore.collection("users").doc(s).update({domains:P.Z.firestore.FieldValue.arrayRemove(l)})}addDomain(s){return this._firestore.collection("domains").add(s)}getDomains(){return this._firestore.collection("domains").snapshotChanges()}setUserDomain(s){return this._firestore.collection("users").doc(s.uid).set({name:s.name,email:s.email,active:s.active,roles:s.roles,domains:s.domains,uid:s.uid})}addMenuOptionItem(s){return this._firestore.collection("menuOptions").add(s)}deleteMenuOptionItem(s){return this._firestore.collection("menuOptions").doc(s.id).delete()}editMenuOptionItem(s){return this._firestore.collection("menuOptions").doc(s.id).update({key:s.key,description:s.description,active:s.active})}editMenuOptioImage(s,l){return this._firestore.collection("menuOptions").doc(s).update({img:l})}getMenuOptions(){return this._firestore.collection("menuOptions").snapshotChanges()}getActiveMenuOptions(){return this._firestore.collection("menuOptions",s=>s.where("active","==",!0)).snapshotChanges()}deleteItemFromFireStorage(s){return this._storage.storage.refFromURL(s).delete()}addChat(s){return this._firestore.collection(s.domain).doc("activeChats").collection("activeChats").doc(s.id).set(s)}getChat(s,l,p){return this._firestore.collection(s).doc(l).collection(l,v=>v.where("id","==",p)).snapshotChanges()}getChats(s,l){return this._firestore.collection(s).doc(l).collection(l).snapshotChanges()}acceptPendingChat(s,l){return this._firestore.collection(s.domain).doc("activeChats").collection("activeChats").doc(s.id).update({status:"active",operatorDisplayName:l.operatorDisplayName,operatorEmail:l.operatorEmail})}getCurrentChats(s,l){return this._firestore.collection(s).doc(l).collection(l,p=>p.where("status","==","pending")).snapshotChanges()}addMessage(s,l){return this._firestore.collection(s.domain).doc("activeChats").collection("activeChats").doc(s.chatId).update({chatHistory:P.Z.firestore.FieldValue.arrayUnion({nick:s.nick,message:l.message,time:l.time})})}}return o.\u0275fac=function(s){return new(s||o)(g.LFG(Em),g.LFG(Tv.Q1))},o.\u0275prov=g.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},2074:(jt,it,Q)=>{"use strict";Q.d(it,{U:()=>g});var P=Q(7716);let g=(()=>{class X{generateId(){let Ve="";const Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Fe=Ee.length;for(var fe=0;fe<20;fe++)Ve+=Ee.charAt(Math.floor(Math.random()*Fe));return Ve}}return X.\u0275fac=function(Ve){return new(Ve||X)},X.\u0275prov=P.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})()},4466:(jt,it,Q)=>{"use strict";Q.d(it,{m:()=>Ve});var P=Q(8583),g=Q(2213),X=Q(665),C=Q(7716);let Ve=(()=>{class Ee{}return Ee.\u0275fac=function(fe){return new(fe||Ee)},Ee.\u0275mod=C.oAB({type:Ee}),Ee.\u0275inj=C.cJS({imports:[[P.ez,g.Bz,X.UX]]}),Ee})()},2340:(jt,it,Q)=>{"use strict";Q.d(it,{N:()=>P});const P={production:!0,firebaseConfig:{apiKey:"AIzaSyAXek0gZLsyXTReB0Fyd9-OVHf1VMjT6fE",authDomain:"live-chat-dcb29.firebaseapp.com",projectId:"live-chat-dcb29",storageBucket:"live-chat-dcb29.appspot.com",messagingSenderId:"30670541766",appId:"1:30670541766:web:2e599941fa52d3985358c7"},geoLocationAPIKey:"a77ee739ab87419193811644c63fda5a"}},9014:(jt,it,Q)=>{"use strict";var P=Q(9075),g=Q(7716),X=Q(57),C=Q(3637),Ve=Q(7574),Ee=Q(5917),Fe=Q(6682),fe=Q(8002),ve=Q(8819),se=Q(3190),Se=Q(2145),me=Q(7519),Ce=Q(5197),Me=Q(509);class Xe{constructor(gt,vt){this.observables=gt,this.project=vt}call(gt,vt){return vt.subscribe(new re(gt,this.observables,this.project))}}class re extends Ce.L{constructor(gt,vt,Tt){super(gt),this.observables=vt,this.project=Tt,this.toRespond=[];const Vt=vt.length;this.values=new Array(Vt);for(let hn=0;hn<Vt;hn++)this.toRespond.push(hn);for(let hn=0;hn<Vt;hn++)this.add((0,Me.D)(this,vt[hn],void 0,hn))}notifyNext(gt,vt,Tt){this.values[Tt]=vt;const Vt=this.toRespond;if(Vt.length>0){const hn=Vt.indexOf(Tt);-1!==hn&&Vt.splice(hn,1)}}notifyComplete(){}_next(gt){if(0===this.toRespond.length){const vt=[gt,...this.values];this.project?this._tryProject(vt):this.destination.next(vt)}}_tryProject(gt){let vt;try{vt=this.project.apply(this,gt)}catch(Tt){return void this.destination.error(Tt)}this.destination.next(vt)}}var Ke=Q(7393);class Mn{constructor(gt){this.predicate=gt}call(gt,vt){return vt.subscribe(new kt(gt,this.predicate))}}class kt extends Ke.L{constructor(gt,vt){super(gt),this.predicate=vt,this.skipping=!0,this.index=0}_next(gt){const vt=this.destination;this.skipping&&this.tryCallPredicate(gt),this.skipping||vt.next(gt)}tryCallPredicate(gt){try{const vt=this.predicate(gt,this.index++);this.skipping=Boolean(vt)}catch(vt){this.destination.error(vt)}}}Q(9192);var Zt=Q(9829),Ot=Q(2329);function Je(He){return null==He}function ot(He){return"function"==typeof He.set}function st(He,gt){return ot(gt)?gt:He.ref(gt)}function nt(He,gt){if(function(He){return"string"==typeof He}(He))return gt.stringCase();if(ot(He))return gt.firebaseCase();if(function(He){return"function"==typeof He.exportVal}(He))return gt.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof He)}function yt(He,gt,vt="on",Tt=C.z){return new Ve.y(Vt=>{let hn=null;return hn=He[vt](gt,(gn,Gt)=>{Tt.schedule(()=>{Vt.next({snapshot:gn,prevKey:Gt})}),"once"===vt&&Tt.schedule(()=>Vt.complete())},gn=>{Tt.schedule(()=>Vt.error(gn))}),"on"===vt?{unsubscribe(){null!=hn&&He.off(gt,hn)}}:{unsubscribe(){}}}).pipe((0,fe.U)(Vt=>{const{snapshot:hn,prevKey:gn}=Vt;let Gt=null;return hn.exists()&&(Gt=hn.key),{type:gt,payload:hn,prevKey:gn,key:Gt}}),(0,ve.B)())}function tn(He,gt){const vt=He.length;for(let Tt=0;Tt<vt;Tt++)if(He[Tt].payload.key===gt)return Tt;return-1}function Tn(He,gt){const{payload:vt,prevKey:Tt,key:Vt}=gt,hn=tn(He,Vt),gn=function(He,gt){if(Je(gt))return 0;{const vt=tn(He,gt);return-1===vt?He.length:vt+1}}(He,Tt);switch(gt.type){case"value":if(gt.payload&&gt.payload.exists()){let Gt=null;gt.payload.forEach(Oe=>{const xe={payload:Oe,type:"value",prevKey:Gt,key:Oe.key};return Gt=Oe.key,He=[...He,xe],!1})}return He;case"child_added":if(hn>-1){const Gt=He[hn-1];(Gt&&Gt.key||null)!==Tt&&(He=He.filter(Oe=>Oe.payload.key!==vt.key)).splice(gn,0,gt)}else{if(null==Tt)return[gt,...He];(He=He.slice()).splice(gn,0,gt)}return He;case"child_removed":return He.filter(Gt=>Gt.payload.key!==vt.key);case"child_changed":return He.map(Gt=>Gt.payload.key===Vt?gt:Gt);case"child_moved":if(hn>-1){const Gt=He.splice(hn,1)[0];return(He=He.slice()).splice(gn,0,Gt),He}return He;default:return He}}function on(He){return(Je(He)||0===He.length)&&(He=["child_added","child_removed","child_changed","child_moved"]),He}function Bt(He,gt,vt){return function(He,gt,vt){return yt(He,"value","once",vt).pipe((0,se.w)(Tt=>{const Vt=[(0,Ee.of)(Tt)];return gt.forEach(hn=>Vt.push(yt(He,hn,"on",vt))),(0,Fe.T)(...Vt).pipe((0,Se.R)(Tn,[]))}),(0,me.x)())}(He,gt=on(gt),vt)}function Ft(He,gt,vt){const Tt=(gt=on(gt)).map(Vt=>yt(He,Vt,"on",vt));return(0,Fe.T)(...Tt)}function bn(He,gt){return function(Tt,Vt){return nt(Tt,{stringCase:()=>He.child(Tt)[gt](Vt),firebaseCase:()=>Tt[gt](Vt),snapshotCase:()=>Tt.ref[gt](Vt)})}}function or(He){return function(vt){return vt?nt(vt,{stringCase:()=>He.child(vt).remove(),firebaseCase:()=>vt.remove(),snapshotCase:()=>vt.ref.remove()}):He.remove()}}function Bn(He,gt){return function(){return yt(He,"value","on",gt)}}const Sn=new g.OlP("angularfire2.realtimeDatabaseURL"),An=new g.OlP("angularfire2.database.use-emulator");let Mi=(()=>{class He{constructor(vt,Tt,Vt,hn,gn,Gt,Oe){this.schedulers=new X.HU(gn),this.keepUnstableUntilFirst=(0,X.ss)(this.schedulers);const xe=Gt,Ye=(0,X.on)(vt,gn,Tt);!Ot.Z.auth&&Oe&&(0,X.yq)(),this.database=(0,X.sI)(`${Ye.name}.database.${Vt}`,"AngularFireDatabase",Ye,()=>{const et=gn.runOutsideAngular(()=>Ye.database(Vt||void 0));return xe&&et.useEmulator(...xe),et},[xe])}list(vt,Tt){const Vt=this.schedulers.ngZone.runOutsideAngular(()=>st(this.database,vt));let hn=Vt;return Tt&&(hn=Tt(Vt)),function(He,gt){const vt=gt.schedulers.outsideAngular,Tt=gt.schedulers.ngZone.run(()=>He.ref);return{query:He,update:bn(Tt,"update"),set:bn(Tt,"set"),push:Vt=>Tt.push(Vt),remove:or(Tt),snapshotChanges:Vt=>Bt(He,Vt,vt).pipe(gt.keepUnstableUntilFirst),stateChanges:Vt=>Ft(He,Vt,vt).pipe(gt.keepUnstableUntilFirst),auditTrail:Vt=>function(He,gt,vt){return function(He,gt,vt){return function(He,gt){return yt(He,"value","on",gt).pipe((0,fe.U)(vt=>{let Tt;return vt.payload.forEach(Vt=>(Tt=Vt.key,!1)),{data:vt,lastKeyToLoad:Tt}}))}(He,vt).pipe(function(...He){return gt=>{let vt;return"function"==typeof He[He.length-1]&&(vt=He.pop()),gt.lift(new Xe(He,vt))}}(gt),(0,fe.U)(([Vt,hn])=>{const gn=Vt.lastKeyToLoad,Gt=hn.map(Oe=>Oe.key);return{actions:hn,lastKeyToLoad:gn,loadedKeys:Gt}}),function(He){return gt=>gt.lift(new Mn(He))}(Vt=>-1===Vt.loadedKeys.indexOf(Vt.lastKeyToLoad)),(0,fe.U)(Vt=>Vt.actions))}(He,Ft(He,gt).pipe((0,Se.R)((Vt,hn)=>[...Vt,hn],[])),vt)}(He,Vt,vt).pipe(gt.keepUnstableUntilFirst),valueChanges:(Vt,hn)=>Bt(He,Vt,vt).pipe((0,fe.U)(Gt=>Gt.map(Oe=>hn&&hn.idField?Object.assign(Object.assign({},Oe.payload.val()),{[hn.idField]:Oe.key}):Oe.payload.val())),gt.keepUnstableUntilFirst)}}(hn,this)}object(vt){return function(He,gt){return{query:He,snapshotChanges:()=>Bn(He,gt.schedulers.outsideAngular)().pipe(gt.keepUnstableUntilFirst),update:vt=>He.ref.update(vt),set:vt=>He.ref.set(vt),remove:()=>He.ref.remove(),valueChanges:()=>Bn(He,gt.schedulers.outsideAngular)().pipe(gt.keepUnstableUntilFirst,(0,fe.U)(Tt=>Tt.payload.exists()?Tt.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>st(this.database,vt)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return He.\u0275fac=function(vt){return new(vt||He)(g.LFG(X.Dh),g.LFG(X.xv,8),g.LFG(Sn,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(An,8),g.LFG(Zt.Qv,8))},He.\u0275prov=g.Yz7({factory:function(){return new He(g.LFG(X.Dh),g.LFG(X.xv,8),g.LFG(Sn,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(An,8),g.LFG(Zt.Qv,8))},token:He,providedIn:"any"}),He})(),mn=(()=>{class He{}return He.\u0275fac=function(vt){return new(vt||He)},He.\u0275mod=g.oAB({type:He}),He.\u0275inj=g.cJS({providers:[Mi]}),He})();var Wt=Q(9351),kn=Q(1841),Ln=Q(2213);const Qt=[{path:"",redirectTo:"chat",pathMatch:"full"},{path:"chat",loadChildren:()=>Promise.resolve().then(Q.bind(Q,9437)).then(He=>He.ChatModule)},{path:"control-panel",loadChildren:()=>Promise.resolve().then(Q.bind(Q,6009)).then(He=>He.ControlPanelModule)},{path:"error",loadChildren:()=>Promise.resolve().then(Q.bind(Q,7236)).then(He=>He.ErrorModule)},{path:"**",redirectTo:"chat"}];let dr=(()=>{class He{}return He.\u0275fac=function(vt){return new(vt||He)},He.\u0275mod=g.oAB({type:He}),He.\u0275inj=g.cJS({imports:[[Ln.Bz.forRoot(Qt)],Ln.Bz]}),He})();var Ur=Q(9447);let Zn=(()=>{class He{getCurrentTheme(){const vt=JSON.parse(localStorage.getItem("theme"));vt?(document.documentElement.classList.remove("theme-light","theme-dark"),document.documentElement.classList.add(vt),this.darkMode="theme-light"!=vt):(localStorage.setItem("theme",JSON.stringify("theme-light")),document.documentElement.classList.add("theme-light"),this.darkMode=!1)}setLight(){localStorage.setItem("theme",JSON.stringify("theme-light")),this.getCurrentTheme()}setDark(){localStorage.setItem("theme",JSON.stringify("theme-dark")),this.getCurrentTheme()}}return He.\u0275fac=function(vt){return new(vt||He)},He.\u0275prov=g.Yz7({token:He,factory:He.\u0275fac,providedIn:"root"}),He})(),Dt=(()=>{class He{constructor(vt,Tt){this._authservice=vt,this._themeService=Tt}ngOnInit(){this._authservice.autoLogin(),this._themeService.getCurrentTheme()}}return He.\u0275fac=function(vt){return new(vt||He)(g.Y36(Ur.e),g.Y36(Zn))},He.\u0275cmp=g.Xpm({type:He,selectors:[["app-root"]],decls:1,vars:0,template:function(vt,Tt){1&vt&&g._UZ(0,"router-outlet")},directives:[Ln.lC],styles:[""]}),He})();var Ze=Q(2340),ze=Q(9437),It=Q(6009),xt=Q(7236),sn=Q(6237);let Mt=(()=>{class He{}return He.\u0275fac=function(vt){return new(vt||He)},He.\u0275mod=g.oAB({type:He,bootstrap:[Dt]}),He.\u0275inj=g.cJS({providers:[],imports:[[P.b2,dr,ze.ChatModule,It.ControlPanelModule,xt.ErrorModule,kn.JF,X.hO.initializeApp(Ze.N.firebaseConfig),mn,Wt.TE,sn.PW]]}),He})();Ze.N.production&&(0,g.G48)(),P.q6().bootstrapModule(Mt).catch(He=>console.error(He))},4762:(jt,it,Q)=>{"use strict";Q.d(it,{ZT:()=>g,pi:()=>X,mG:()=>fe,Jh:()=>ve,XA:()=>me,CR:()=>Ce,ev:()=>Xe});var P=function(Je,ot){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(st,nt){st.__proto__=nt}||function(st,nt){for(var yt in nt)Object.prototype.hasOwnProperty.call(nt,yt)&&(st[yt]=nt[yt])})(Je,ot)};function g(Je,ot){if("function"!=typeof ot&&null!==ot)throw new TypeError("Class extends value "+String(ot)+" is not a constructor or null");function st(){this.constructor=Je}P(Je,ot),Je.prototype=null===ot?Object.create(ot):(st.prototype=ot.prototype,new st)}var X=function(){return(X=Object.assign||function(ot){for(var st,nt=1,yt=arguments.length;nt<yt;nt++)for(var at in st=arguments[nt])Object.prototype.hasOwnProperty.call(st,at)&&(ot[at]=st[at]);return ot}).apply(this,arguments)};function fe(Je,ot,st,nt){return new(st||(st=Promise))(function(at,tn){function un(Bt){try{on(nt.next(Bt))}catch(Ft){tn(Ft)}}function Tn(Bt){try{on(nt.throw(Bt))}catch(Ft){tn(Ft)}}function on(Bt){Bt.done?at(Bt.value):function(at){return at instanceof st?at:new st(function(tn){tn(at)})}(Bt.value).then(un,Tn)}on((nt=nt.apply(Je,ot||[])).next())})}function ve(Je,ot){var nt,yt,at,tn,st={label:0,sent:function(){if(1&at[0])throw at[1];return at[1]},trys:[],ops:[]};return tn={next:un(0),throw:un(1),return:un(2)},"function"==typeof Symbol&&(tn[Symbol.iterator]=function(){return this}),tn;function un(on){return function(Bt){return function(on){if(nt)throw new TypeError("Generator is already executing.");for(;st;)try{if(nt=1,yt&&(at=2&on[0]?yt.return:on[0]?yt.throw||((at=yt.return)&&at.call(yt),0):yt.next)&&!(at=at.call(yt,on[1])).done)return at;switch(yt=0,at&&(on=[2&on[0],at.value]),on[0]){case 0:case 1:at=on;break;case 4:return st.label++,{value:on[1],done:!1};case 5:st.label++,yt=on[1],on=[0];continue;case 7:on=st.ops.pop(),st.trys.pop();continue;default:if(!(at=(at=st.trys).length>0&&at[at.length-1])&&(6===on[0]||2===on[0])){st=0;continue}if(3===on[0]&&(!at||on[1]>at[0]&&on[1]<at[3])){st.label=on[1];break}if(6===on[0]&&st.label<at[1]){st.label=at[1],at=on;break}if(at&&st.label<at[2]){st.label=at[2],st.ops.push(on);break}at[2]&&st.ops.pop(),st.trys.pop();continue}on=ot.call(Je,st)}catch(Bt){on=[6,Bt],yt=0}finally{nt=at=0}if(5&on[0])throw on[1];return{value:on[0]?on[1]:void 0,done:!0}}([on,Bt])}}}function me(Je){var ot="function"==typeof Symbol&&Symbol.iterator,st=ot&&Je[ot],nt=0;if(st)return st.call(Je);if(Je&&"number"==typeof Je.length)return{next:function(){return Je&&nt>=Je.length&&(Je=void 0),{value:Je&&Je[nt++],done:!Je}}};throw new TypeError(ot?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ce(Je,ot){var st="function"==typeof Symbol&&Je[Symbol.iterator];if(!st)return Je;var yt,tn,nt=st.call(Je),at=[];try{for(;(void 0===ot||ot-- >0)&&!(yt=nt.next()).done;)at.push(yt.value)}catch(un){tn={error:un}}finally{try{yt&&!yt.done&&(st=nt.return)&&st.call(nt)}finally{if(tn)throw tn.error}}return at}function Xe(Je,ot,st){if(st||2===arguments.length)for(var at,nt=0,yt=ot.length;nt<yt;nt++)(at||!(nt in ot))&&(at||(at=Array.prototype.slice.call(ot,0,nt)),at[nt]=ot[nt]);return Je.concat(at||Array.prototype.slice.call(ot))}}},jt=>{jt(jt.s=9014)}]);