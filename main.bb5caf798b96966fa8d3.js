(self.webpackChunklive_chat=self.webpackChunklive_chat||[]).push([[179],{8255:jt=>{function rt(Q){return Promise.resolve().then(()=>{var R=new Error("Cannot find module '"+Q+"'");throw R.code="MODULE_NOT_FOUND",R})}rt.keys=()=>[],rt.resolve=rt,rt.id=8255,jt.exports=rt},7238:(jt,rt,Q)=>{"use strict";Q.d(rt,{l3:()=>G,_j:()=>R,LC:()=>c,ZN:()=>Re,jt:()=>Ve,pV:()=>ye,IO:()=>xe,vP:()=>ke,SB:()=>Ce,oB:()=>fe,eR:()=>Ee,X$:()=>E,ZE:()=>_t,k1:()=>_n});class R{}class c{}const G="*";function E(Nt,ut){return{type:7,name:Nt,definitions:ut,options:{}}}function Ve(Nt,ut=null){return{type:4,styles:ut,timings:Nt}}function ke(Nt,ut=null){return{type:2,steps:Nt,options:ut}}function fe(Nt){return{type:6,styles:Nt,offset:null}}function Ce(Nt,ut,Yt){return{type:0,name:Nt,styles:ut,options:Yt}}function Ee(Nt,ut,Yt=null){return{type:1,expr:Nt,animation:ut,options:Yt}}function ye(Nt=null){return{type:9,options:Nt}}function xe(Nt,ut,Yt=null){return{type:11,selector:Nt,animation:ut,options:Yt}}function X(Nt){Promise.resolve(null).then(Nt)}class Re{constructor(ut=0,Yt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ut+Yt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ut=>ut()),this._onDoneFns=[])}onStart(ut){this._onStartFns.push(ut)}onDone(ut){this._onDoneFns.push(ut)}onDestroy(ut){this._onDestroyFns.push(ut)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){X(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ut=>ut()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ut=>ut()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(ut){this._position=this.totalTime?ut*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ut){const Yt="start"==ut?this._onStartFns:this._onDoneFns;Yt.forEach(wt=>wt()),Yt.length=0}}class _t{constructor(ut){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ut;let Yt=0,wt=0,In=0;const Et=this.players.length;0==Et?X(()=>this._onFinish()):this.players.forEach(Ke=>{Ke.onDone(()=>{++Yt==Et&&this._onFinish()}),Ke.onDestroy(()=>{++wt==Et&&this._onDestroy()}),Ke.onStart(()=>{++In==Et&&this._onStart()})}),this.totalTime=this.players.reduce((Ke,ot)=>Math.max(Ke,ot.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ut=>ut()),this._onDoneFns=[])}init(){this.players.forEach(ut=>ut.init())}onStart(ut){this._onStartFns.push(ut)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ut=>ut()),this._onStartFns=[])}onDone(ut){this._onDoneFns.push(ut)}onDestroy(ut){this._onDestroyFns.push(ut)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ut=>ut.play())}pause(){this.players.forEach(ut=>ut.pause())}restart(){this.players.forEach(ut=>ut.restart())}finish(){this._onFinish(),this.players.forEach(ut=>ut.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ut=>ut.destroy()),this._onDestroyFns.forEach(ut=>ut()),this._onDestroyFns=[])}reset(){this.players.forEach(ut=>ut.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ut){const Yt=ut*this.totalTime;this.players.forEach(wt=>{const In=wt.totalTime?Math.min(1,Yt/wt.totalTime):1;wt.setPosition(In)})}getPosition(){const ut=this.players.reduce((Yt,wt)=>null===Yt||wt.totalTime>Yt.totalTime?wt:Yt,null);return null!=ut?ut.getPosition():0}beforeDestroy(){this.players.forEach(ut=>{ut.beforeDestroy&&ut.beforeDestroy()})}triggerCallback(ut){const Yt="start"==ut?this._onStartFns:this._onDoneFns;Yt.forEach(wt=>wt()),Yt.length=0}}const _n="!"},8583:(jt,rt,Q)=>{"use strict";Q.d(rt,{mr:()=>_t,Ov:()=>Oo,ez:()=>Vt,K0:()=>ke,uU:()=>xo,Do:()=>Nt,V_:()=>re,Ye:()=>ut,S$:()=>X,mk:()=>cn,sg:()=>un,O5:()=>mr,RF:()=>Oi,n9:()=>ar,ED:()=>Bn,b0:()=>_n,lw:()=>fe,EM:()=>fr,JF:()=>ce,NF:()=>xi,PM:()=>Bo,w_:()=>ve,bD:()=>wn,q:()=>G,Mx:()=>Mt,HT:()=>Ve});var R=Q(7716);let c=null;function G(){return c}function Ve(P){c||(c=P)}class ve{}const ke=new R.OlP("DocumentToken");let fe=(()=>{class P{historyGo(N){throw new Error("Not implemented")}}return P.\u0275fac=function(N){return new(N||P)},P.\u0275prov=(0,R.Yz7)({factory:Ce,token:P,providedIn:"platform"}),P})();function Ce(){return(0,R.LFG)(Ee)}const re=new R.OlP("Location Initialized");let Ee=(()=>{class P extends fe{constructor(N){super(),this._doc=N,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(N){const ee=G().getGlobalEventTarget(this._doc,"window");return ee.addEventListener("popstate",N,!1),()=>ee.removeEventListener("popstate",N)}onHashChange(N){const ee=G().getGlobalEventTarget(this._doc,"window");return ee.addEventListener("hashchange",N,!1),()=>ee.removeEventListener("hashchange",N)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(N){this.location.pathname=N}pushState(N,ee,_e){pe()?this._history.pushState(N,ee,_e):this.location.hash=_e}replaceState(N,ee,_e){pe()?this._history.replaceState(N,ee,_e):this.location.hash=_e}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}}return P.\u0275fac=function(N){return new(N||P)(R.LFG(ke))},P.\u0275prov=(0,R.Yz7)({factory:ye,token:P,providedIn:"platform"}),P})();function pe(){return!!window.history.pushState}function ye(){return new Ee((0,R.LFG)(ke))}function De(P,$){if(0==P.length)return $;if(0==$.length)return P;let N=0;return P.endsWith("/")&&N++,$.startsWith("/")&&N++,2==N?P+$.substring(1):1==N?P+$:P+"/"+$}function xe(P){const $=P.match(/#|\?|$/),N=$&&$.index||P.length;return P.slice(0,N-("/"===P[N-1]?1:0))+P.slice(N)}function We(P){return P&&"?"!==P[0]?"?"+P:P}let X=(()=>{class P{historyGo(N){throw new Error("Not implemented")}}return P.\u0275fac=function(N){return new(N||P)},P.\u0275prov=(0,R.Yz7)({factory:Re,token:P,providedIn:"root"}),P})();function Re(P){const $=(0,R.LFG)(ke).location;return new _n((0,R.LFG)(fe),$&&$.origin||"")}const _t=new R.OlP("appBaseHref");let _n=(()=>{class P extends X{constructor(N,ee){if(super(),this._platformLocation=N,this._removeListenerFns=[],null==ee&&(ee=this._platformLocation.getBaseHrefFromDOM()),null==ee)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ee}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return De(this._baseHref,N)}path(N=!1){const ee=this._platformLocation.pathname+We(this._platformLocation.search),_e=this._platformLocation.hash;return _e&&N?`${ee}${_e}`:ee}pushState(N,ee,_e,Le){const tt=this.prepareExternalUrl(_e+We(Le));this._platformLocation.pushState(N,ee,tt)}replaceState(N,ee,_e,Le){const tt=this.prepareExternalUrl(_e+We(Le));this._platformLocation.replaceState(N,ee,tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(N=0){var ee,_e;null===(_e=(ee=this._platformLocation).historyGo)||void 0===_e||_e.call(ee,N)}}return P.\u0275fac=function(N){return new(N||P)(R.LFG(fe),R.LFG(_t,8))},P.\u0275prov=R.Yz7({token:P,factory:P.\u0275fac}),P})(),Nt=(()=>{class P extends X{constructor(N,ee){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=ee&&(this._baseHref=ee)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){let ee=this._platformLocation.hash;return null==ee&&(ee="#"),ee.length>0?ee.substring(1):ee}prepareExternalUrl(N){const ee=De(this._baseHref,N);return ee.length>0?"#"+ee:ee}pushState(N,ee,_e,Le){let tt=this.prepareExternalUrl(_e+We(Le));0==tt.length&&(tt=this._platformLocation.pathname),this._platformLocation.pushState(N,ee,tt)}replaceState(N,ee,_e,Le){let tt=this.prepareExternalUrl(_e+We(Le));0==tt.length&&(tt=this._platformLocation.pathname),this._platformLocation.replaceState(N,ee,tt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(N=0){var ee,_e;null===(_e=(ee=this._platformLocation).historyGo)||void 0===_e||_e.call(ee,N)}}return P.\u0275fac=function(N){return new(N||P)(R.LFG(fe),R.LFG(_t,8))},P.\u0275prov=R.Yz7({token:P,factory:P.\u0275fac}),P})(),ut=(()=>{class P{constructor(N,ee){this._subject=new R.vpe,this._urlChangeListeners=[],this._platformStrategy=N;const _e=this._platformStrategy.getBaseHref();this._platformLocation=ee,this._baseHref=xe(In(_e)),this._platformStrategy.onPopState(Le=>{this._subject.emit({url:this.path(!0),pop:!0,state:Le.state,type:Le.type})})}path(N=!1){return this.normalize(this._platformStrategy.path(N))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(N,ee=""){return this.path()==this.normalize(N+We(ee))}normalize(N){return P.stripTrailingSlash(function(P,$){return P&&$.startsWith(P)?$.substring(P.length):$}(this._baseHref,In(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._platformStrategy.prepareExternalUrl(N)}go(N,ee="",_e=null){this._platformStrategy.pushState(_e,"",N,ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+We(ee)),_e)}replaceState(N,ee="",_e=null){this._platformStrategy.replaceState(_e,"",N,ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+We(ee)),_e)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(N=0){var ee,_e;null===(_e=(ee=this._platformStrategy).historyGo)||void 0===_e||_e.call(ee,N)}onUrlChange(N){this._urlChangeListeners.push(N),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ee=>{this._notifyUrlChangeListeners(ee.url,ee.state)}))}_notifyUrlChangeListeners(N="",ee){this._urlChangeListeners.forEach(_e=>_e(N,ee))}subscribe(N,ee,_e){return this._subject.subscribe({next:N,error:ee,complete:_e})}}return P.\u0275fac=function(N){return new(N||P)(R.LFG(X),R.LFG(fe))},P.normalizeQueryParams=We,P.joinWithSlash=De,P.stripTrailingSlash=xe,P.\u0275prov=(0,R.Yz7)({factory:Yt,token:P,providedIn:"root"}),P})();function Yt(){return new ut((0,R.LFG)(X),(0,R.LFG)(fe))}function In(P){return P.replace(/\/index.html$/,"")}var ot=(()=>((ot=ot||{})[ot.Zero=0]="Zero",ot[ot.One=1]="One",ot[ot.Two=2]="Two",ot[ot.Few=3]="Few",ot[ot.Many=4]="Many",ot[ot.Other=5]="Other",ot))(),it=(()=>((it=it||{})[it.Format=0]="Format",it[it.Standalone=1]="Standalone",it))(),nt=(()=>((nt=nt||{})[nt.Narrow=0]="Narrow",nt[nt.Abbreviated=1]="Abbreviated",nt[nt.Wide=2]="Wide",nt[nt.Short=3]="Short",nt))(),vt=(()=>((vt=vt||{})[vt.Short=0]="Short",vt[vt.Medium=1]="Medium",vt[vt.Long=2]="Long",vt[vt.Full=3]="Full",vt))(),at=(()=>((at=at||{})[at.Decimal=0]="Decimal",at[at.Group=1]="Group",at[at.List=2]="List",at[at.PercentSign=3]="PercentSign",at[at.PlusSign=4]="PlusSign",at[at.MinusSign=5]="MinusSign",at[at.Exponential=6]="Exponential",at[at.SuperscriptingExponent=7]="SuperscriptingExponent",at[at.PerMille=8]="PerMille",at[at.Infinity=9]="Infinity",at[at.NaN=10]="NaN",at[at.TimeSeparator=11]="TimeSeparator",at[at.CurrencyDecimal=12]="CurrencyDecimal",at[at.CurrencyGroup=13]="CurrencyGroup",at))();function kn(P,$){return gr((0,R.cg1)(P)[R.wAp.DateFormat],$)}function Tn(P,$){return gr((0,R.cg1)(P)[R.wAp.TimeFormat],$)}function lr(P,$){return gr((0,R.cg1)(P)[R.wAp.DateTimeFormat],$)}function Zn(P,$){const N=(0,R.cg1)(P),ee=N[R.wAp.NumberSymbols][$];if(void 0===ee){if($===at.CurrencyDecimal)return N[R.wAp.NumberSymbols][at.Decimal];if($===at.CurrencyGroup)return N[R.wAp.NumberSymbols][at.Group]}return ee}const vn=R.kL8;function Kt(P){if(!P[R.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${P[R.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function gr(P,$){for(let N=$;N>-1;N--)if(void 0!==P[N])return P[N];throw new Error("Locale data API: locale data undefined")}function Vr(P){const[$,N]=P.split(":");return{hours:+$,minutes:+N}}const je=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,It={},xt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var nn=(()=>((nn=nn||{})[nn.Short=0]="Short",nn[nn.ShortGMT=1]="ShortGMT",nn[nn.Long=2]="Long",nn[nn.Extended=3]="Extended",nn))(),Ot=(()=>((Ot=Ot||{})[Ot.FullYear=0]="FullYear",Ot[Ot.Month=1]="Month",Ot[Ot.Date=2]="Date",Ot[Ot.Hours=3]="Hours",Ot[Ot.Minutes=4]="Minutes",Ot[Ot.Seconds=5]="Seconds",Ot[Ot.FractionalSeconds=6]="FractionalSeconds",Ot[Ot.Day=7]="Day",Ot))(),Ue=(()=>((Ue=Ue||{})[Ue.DayPeriods=0]="DayPeriods",Ue[Ue.Days=1]="Days",Ue[Ue.Months=2]="Months",Ue[Ue.Eras=3]="Eras",Ue))();function pt(P,$,N,ee){let _e=function(P){if(fo(P))return P;if("number"==typeof P&&!isNaN(P))return new Date(P);if("string"==typeof P){if(P=P.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(P)){const[_e,Le=1,tt=1]=P.split("-").map(H=>+H);return bt(_e,Le-1,tt)}const N=parseFloat(P);if(!isNaN(P-N))return new Date(N);let ee;if(ee=P.match(je))return function(P){const $=new Date(0);let N=0,ee=0;const _e=P[8]?$.setUTCFullYear:$.setFullYear,Le=P[8]?$.setUTCHours:$.setHours;P[9]&&(N=Number(P[9]+P[10]),ee=Number(P[9]+P[11])),_e.call($,Number(P[1]),Number(P[2])-1,Number(P[3]));const tt=Number(P[4]||0)-N,H=Number(P[5]||0)-ee,j=Number(P[6]||0),L=Math.floor(1e3*parseFloat("0."+(P[7]||0)));return Le.call($,tt,H,j,L),$}(ee)}const $=new Date(P);if(!fo($))throw new Error(`Unable to convert "${P}" into a date`);return $}(P);$=At(N,$)||$;let H,tt=[];for(;$;){if(H=xt.exec($),!H){tt.push($);break}{tt=tt.concat(H.slice(1));const ae=tt.pop();if(!ae)break;$=ae}}let j=_e.getTimezoneOffset();ee&&(j=Xr(ee,j),_e=function(P,$,N){const _e=P.getTimezoneOffset();return function(P,$){return(P=new Date(P.getTime())).setMinutes(P.getMinutes()+$),P}(P,-1*(Xr($,_e)-_e))}(_e,ee));let L="";return tt.forEach(ae=>{const ze=function(P){if(si[P])return si[P];let $;switch(P){case"G":case"GG":case"GGG":$=Ie(Ue.Eras,nt.Abbreviated);break;case"GGGG":$=Ie(Ue.Eras,nt.Wide);break;case"GGGGG":$=Ie(Ue.Eras,nt.Narrow);break;case"y":$=Zt(Ot.FullYear,1,0,!1,!0);break;case"yy":$=Zt(Ot.FullYear,2,0,!0,!0);break;case"yyy":$=Zt(Ot.FullYear,3,0,!1,!0);break;case"yyyy":$=Zt(Ot.FullYear,4,0,!1,!0);break;case"Y":$=Un(1);break;case"YY":$=Un(2,!0);break;case"YYY":$=Un(3);break;case"YYYY":$=Un(4);break;case"M":case"L":$=Zt(Ot.Month,1,1);break;case"MM":case"LL":$=Zt(Ot.Month,2,1);break;case"MMM":$=Ie(Ue.Months,nt.Abbreviated);break;case"MMMM":$=Ie(Ue.Months,nt.Wide);break;case"MMMMM":$=Ie(Ue.Months,nt.Narrow);break;case"LLL":$=Ie(Ue.Months,nt.Abbreviated,it.Standalone);break;case"LLLL":$=Ie(Ue.Months,nt.Wide,it.Standalone);break;case"LLLLL":$=Ie(Ue.Months,nt.Narrow,it.Standalone);break;case"w":$=Vn(1);break;case"ww":$=Vn(2);break;case"W":$=Vn(1,!0);break;case"d":$=Zt(Ot.Date,1);break;case"dd":$=Zt(Ot.Date,2);break;case"c":case"cc":$=Zt(Ot.Day,1);break;case"ccc":$=Ie(Ue.Days,nt.Abbreviated,it.Standalone);break;case"cccc":$=Ie(Ue.Days,nt.Wide,it.Standalone);break;case"ccccc":$=Ie(Ue.Days,nt.Narrow,it.Standalone);break;case"cccccc":$=Ie(Ue.Days,nt.Short,it.Standalone);break;case"E":case"EE":case"EEE":$=Ie(Ue.Days,nt.Abbreviated);break;case"EEEE":$=Ie(Ue.Days,nt.Wide);break;case"EEEEE":$=Ie(Ue.Days,nt.Narrow);break;case"EEEEEE":$=Ie(Ue.Days,nt.Short);break;case"a":case"aa":case"aaa":$=Ie(Ue.DayPeriods,nt.Abbreviated);break;case"aaaa":$=Ie(Ue.DayPeriods,nt.Wide);break;case"aaaaa":$=Ie(Ue.DayPeriods,nt.Narrow);break;case"b":case"bb":case"bbb":$=Ie(Ue.DayPeriods,nt.Abbreviated,it.Standalone,!0);break;case"bbbb":$=Ie(Ue.DayPeriods,nt.Wide,it.Standalone,!0);break;case"bbbbb":$=Ie(Ue.DayPeriods,nt.Narrow,it.Standalone,!0);break;case"B":case"BB":case"BBB":$=Ie(Ue.DayPeriods,nt.Abbreviated,it.Format,!0);break;case"BBBB":$=Ie(Ue.DayPeriods,nt.Wide,it.Format,!0);break;case"BBBBB":$=Ie(Ue.DayPeriods,nt.Narrow,it.Format,!0);break;case"h":$=Zt(Ot.Hours,1,-12);break;case"hh":$=Zt(Ot.Hours,2,-12);break;case"H":$=Zt(Ot.Hours,1);break;case"HH":$=Zt(Ot.Hours,2);break;case"m":$=Zt(Ot.Minutes,1);break;case"mm":$=Zt(Ot.Minutes,2);break;case"s":$=Zt(Ot.Seconds,1);break;case"ss":$=Zt(Ot.Seconds,2);break;case"S":$=Zt(Ot.FractionalSeconds,1);break;case"SS":$=Zt(Ot.FractionalSeconds,2);break;case"SSS":$=Zt(Ot.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":$=Je(nn.Short);break;case"ZZZZZ":$=Je(nn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":$=Je(nn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":$=Je(nn.Long);break;default:return null}return si[P]=$,$}(ae);L+=ze?ze(_e,N,j):"''"===ae?"'":ae.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),L}function bt(P,$,N){const ee=new Date(0);return ee.setFullYear(P,$,N),ee.setHours(0,0,0),ee}function At(P,$){const N=function(P){return(0,R.cg1)(P)[R.wAp.LocaleId]}(P);if(It[N]=It[N]||{},It[N][$])return It[N][$];let ee="";switch($){case"shortDate":ee=kn(P,vt.Short);break;case"mediumDate":ee=kn(P,vt.Medium);break;case"longDate":ee=kn(P,vt.Long);break;case"fullDate":ee=kn(P,vt.Full);break;case"shortTime":ee=Tn(P,vt.Short);break;case"mediumTime":ee=Tn(P,vt.Medium);break;case"longTime":ee=Tn(P,vt.Long);break;case"fullTime":ee=Tn(P,vt.Full);break;case"short":const _e=At(P,"shortTime"),Le=At(P,"shortDate");ee=Ut(lr(P,vt.Short),[_e,Le]);break;case"medium":const tt=At(P,"mediumTime"),H=At(P,"mediumDate");ee=Ut(lr(P,vt.Medium),[tt,H]);break;case"long":const j=At(P,"longTime"),L=At(P,"longDate");ee=Ut(lr(P,vt.Long),[j,L]);break;case"full":const ae=At(P,"fullTime"),ze=At(P,"fullDate");ee=Ut(lr(P,vt.Full),[ae,ze])}return ee&&(It[N][$]=ee),ee}function Ut(P,$){return $&&(P=P.replace(/\{([^}]+)}/g,function(N,ee){return null!=$&&ee in $?$[ee]:N})),P}function dn(P,$,N="-",ee,_e){let Le="";(P<0||_e&&P<=0)&&(_e?P=1-P:(P=-P,Le=N));let tt=String(P);for(;tt.length<$;)tt="0"+tt;return ee&&(tt=tt.substr(tt.length-$)),Le+tt}function Zt(P,$,N=0,ee=!1,_e=!1){return function(Le,tt){let H=function(P,$){switch(P){case Ot.FullYear:return $.getFullYear();case Ot.Month:return $.getMonth();case Ot.Date:return $.getDate();case Ot.Hours:return $.getHours();case Ot.Minutes:return $.getMinutes();case Ot.Seconds:return $.getSeconds();case Ot.FractionalSeconds:return $.getMilliseconds();case Ot.Day:return $.getDay();default:throw new Error(`Unknown DateType value "${P}".`)}}(P,Le);if((N>0||H>-N)&&(H+=N),P===Ot.Hours)0===H&&-12===N&&(H=12);else if(P===Ot.FractionalSeconds)return function(P,$){return dn(P,3).substr(0,$)}(H,$);const j=Zn(tt,at.MinusSign);return dn(H,$,j,ee,_e)}}function Ie(P,$,N=it.Format,ee=!1){return function(_e,Le){return function(P,$,N,ee,_e,Le){switch(N){case Ue.Months:return function(P,$,N){const ee=(0,R.cg1)(P),Le=gr([ee[R.wAp.MonthsFormat],ee[R.wAp.MonthsStandalone]],$);return gr(Le,N)}($,_e,ee)[P.getMonth()];case Ue.Days:return function(P,$,N){const ee=(0,R.cg1)(P),Le=gr([ee[R.wAp.DaysFormat],ee[R.wAp.DaysStandalone]],$);return gr(Le,N)}($,_e,ee)[P.getDay()];case Ue.DayPeriods:const tt=P.getHours(),H=P.getMinutes();if(Le){const L=function(P){const $=(0,R.cg1)(P);return Kt($),($[R.wAp.ExtraData][2]||[]).map(ee=>"string"==typeof ee?Vr(ee):[Vr(ee[0]),Vr(ee[1])])}($),ae=function(P,$,N){const ee=(0,R.cg1)(P);Kt(ee);const Le=gr([ee[R.wAp.ExtraData][0],ee[R.wAp.ExtraData][1]],$)||[];return gr(Le,N)||[]}($,_e,ee),ze=L.findIndex(Pt=>{if(Array.isArray(Pt)){const[En,pr]=Pt,Hr=tt>=En.hours&&H>=En.minutes,_r=tt<pr.hours||tt===pr.hours&&H<pr.minutes;if(En.hours<pr.hours){if(Hr&&_r)return!0}else if(Hr||_r)return!0}else if(Pt.hours===tt&&Pt.minutes===H)return!0;return!1});if(-1!==ze)return ae[ze]}return function(P,$,N){const ee=(0,R.cg1)(P),Le=gr([ee[R.wAp.DayPeriodsFormat],ee[R.wAp.DayPeriodsStandalone]],$);return gr(Le,N)}($,_e,ee)[tt<12?0:1];case Ue.Eras:return function(P,$){return gr((0,R.cg1)(P)[R.wAp.Eras],$)}($,ee)[P.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${N}`)}}(_e,Le,P,$,N,ee)}}function Je(P){return function($,N,ee){const _e=-1*ee,Le=Zn(N,at.MinusSign),tt=_e>0?Math.floor(_e/60):Math.ceil(_e/60);switch(P){case nn.Short:return(_e>=0?"+":"")+dn(tt,2,Le)+dn(Math.abs(_e%60),2,Le);case nn.ShortGMT:return"GMT"+(_e>=0?"+":"")+dn(tt,1,Le);case nn.Long:return"GMT"+(_e>=0?"+":"")+dn(tt,2,Le)+":"+dn(Math.abs(_e%60),2,Le);case nn.Extended:return 0===ee?"Z":(_e>=0?"+":"")+dn(tt,2,Le)+":"+dn(Math.abs(_e%60),2,Le);default:throw new Error(`Unknown zone width "${P}"`)}}}function sr(P){return bt(P.getFullYear(),P.getMonth(),P.getDate()+(4-P.getDay()))}function Vn(P,$=!1){return function(N,ee){let _e;if($){const Le=new Date(N.getFullYear(),N.getMonth(),1).getDay()-1,tt=N.getDate();_e=1+Math.floor((tt+Le)/7)}else{const Le=sr(N),tt=function(P){const $=bt(P,0,1).getDay();return bt(P,0,1+($<=4?4:11)-$)}(Le.getFullYear()),H=Le.getTime()-tt.getTime();_e=1+Math.round(H/6048e5)}return dn(_e,P,Zn(ee,at.MinusSign))}}function Un(P,$=!1){return function(N,ee){return dn(sr(N).getFullYear(),P,Zn(ee,at.MinusSign),$)}}const si={};function Xr(P,$){P=P.replace(/:/g,"");const N=Date.parse("Jan 01, 1970 00:00:00 "+P)/6e4;return isNaN(N)?$:N}function fo(P){return P instanceof Date&&!isNaN(P.valueOf())}class Qe{}let Ae=(()=>{class P extends Qe{constructor(N){super(),this.locale=N}getPluralCategory(N,ee){switch(vn(ee||this.locale)(N)){case ot.Zero:return"zero";case ot.One:return"one";case ot.Two:return"two";case ot.Few:return"few";case ot.Many:return"many";default:return"other"}}}return P.\u0275fac=function(N){return new(N||P)(R.LFG(R.soG))},P.\u0275prov=R.Yz7({token:P,factory:P.\u0275fac}),P})();function Mt(P,$){$=encodeURIComponent($);for(const N of P.split(";")){const ee=N.indexOf("="),[_e,Le]=-1==ee?[N,""]:[N.slice(0,ee),N.slice(ee+1)];if(_e.trim()===$)return decodeURIComponent(Le)}return null}let cn=(()=>{class P{constructor(N,ee,_e,Le){this._iterableDiffers=N,this._keyValueDiffers=ee,this._ngEl=_e,this._renderer=Le,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(N){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof N?N.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(N){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof N?N.split(/\s+/):N,this._rawClass&&((0,R.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const N=this._iterableDiffer.diff(this._rawClass);N&&this._applyIterableChanges(N)}else if(this._keyValueDiffer){const N=this._keyValueDiffer.diff(this._rawClass);N&&this._applyKeyValueChanges(N)}}_applyKeyValueChanges(N){N.forEachAddedItem(ee=>this._toggleClass(ee.key,ee.currentValue)),N.forEachChangedItem(ee=>this._toggleClass(ee.key,ee.currentValue)),N.forEachRemovedItem(ee=>{ee.previousValue&&this._toggleClass(ee.key,!1)})}_applyIterableChanges(N){N.forEachAddedItem(ee=>{if("string"!=typeof ee.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,R.AaK)(ee.item)}`);this._toggleClass(ee.item,!0)}),N.forEachRemovedItem(ee=>this._toggleClass(ee.item,!1))}_applyClasses(N){N&&(Array.isArray(N)||N instanceof Set?N.forEach(ee=>this._toggleClass(ee,!0)):Object.keys(N).forEach(ee=>this._toggleClass(ee,!!N[ee])))}_removeClasses(N){N&&(Array.isArray(N)||N instanceof Set?N.forEach(ee=>this._toggleClass(ee,!1)):Object.keys(N).forEach(ee=>this._toggleClass(ee,!1)))}_toggleClass(N,ee){(N=N.trim())&&N.split(/\s+/g).forEach(_e=>{ee?this._renderer.addClass(this._ngEl.nativeElement,_e):this._renderer.removeClass(this._ngEl.nativeElement,_e)})}}return P.\u0275fac=function(N){return new(N||P)(R.Y36(R.ZZ4),R.Y36(R.aQg),R.Y36(R.SBq),R.Y36(R.Qsj))},P.\u0275dir=R.lG2({type:P,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),P})();class mn{constructor($,N,ee,_e){this.$implicit=$,this.ngForOf=N,this.index=ee,this.count=_e}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let un=(()=>{class P{constructor(N,ee,_e){this._viewContainer=N,this._template=ee,this._differs=_e,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(N){this._ngForOf=N,this._ngForOfDirty=!0}set ngForTrackBy(N){this._trackByFn=N}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(N){N&&(this._template=N)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const N=this._ngForOf;if(!this._differ&&N)try{this._differ=this._differs.find(N).create(this.ngForTrackBy)}catch(ee){throw new Error(`Cannot find a differ supporting object '${N}' of type '${function(P){return P.name||typeof P}(N)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const N=this._differ.diff(this._ngForOf);N&&this._applyChanges(N)}}_applyChanges(N){const ee=[];N.forEachOperation((_e,Le,tt)=>{if(null==_e.previousIndex){const H=this._viewContainer.createEmbeddedView(this._template,new mn(null,this._ngForOf,-1,-1),null===tt?void 0:tt),j=new er(_e,H);ee.push(j)}else if(null==tt)this._viewContainer.remove(null===Le?void 0:Le);else if(null!==Le){const H=this._viewContainer.get(Le);this._viewContainer.move(H,tt);const j=new er(_e,H);ee.push(j)}});for(let _e=0;_e<ee.length;_e++)this._perViewChange(ee[_e].view,ee[_e].record);for(let _e=0,Le=this._viewContainer.length;_e<Le;_e++){const tt=this._viewContainer.get(_e);tt.context.index=_e,tt.context.count=Le,tt.context.ngForOf=this._ngForOf}N.forEachIdentityChange(_e=>{this._viewContainer.get(_e.currentIndex).context.$implicit=_e.item})}_perViewChange(N,ee){N.context.$implicit=ee.item}static ngTemplateContextGuard(N,ee){return!0}}return P.\u0275fac=function(N){return new(N||P)(R.Y36(R.s_b),R.Y36(R.Rgc),R.Y36(R.ZZ4))},P.\u0275dir=R.lG2({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),P})();class er{constructor($,N){this.record=$,this.view=N}}let mr=(()=>{class P{constructor(N,ee){this._viewContainer=N,this._context=new Ii,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ee}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){io("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){io("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,ee){return!0}}return P.\u0275fac=function(N){return new(N||P)(R.Y36(R.s_b),R.Y36(R.Rgc))},P.\u0275dir=R.lG2({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),P})();class Ii{constructor(){this.$implicit=null,this.ngIf=null}}function io(P,$){if($&&!$.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,R.AaK)($)}'.`)}class jr{constructor($,N){this._viewContainerRef=$,this._templateRef=N,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState($){$&&!this._created?this.create():!$&&this._created&&this.destroy()}}let Oi=(()=>{class P{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(N){this._ngSwitch=N,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(N){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(N)}_matchCase(N){const ee=N==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ee,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ee}_updateDefaultCases(N){if(this._defaultViews&&N!==this._defaultUsed){this._defaultUsed=N;for(let ee=0;ee<this._defaultViews.length;ee++)this._defaultViews[ee].enforceState(N)}}}return P.\u0275fac=function(N){return new(N||P)},P.\u0275dir=R.lG2({type:P,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),P})(),ar=(()=>{class P{constructor(N,ee,_e){this.ngSwitch=_e,_e._addCase(),this._view=new jr(N,ee)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return P.\u0275fac=function(N){return new(N||P)(R.Y36(R.s_b),R.Y36(R.Rgc),R.Y36(Oi,9))},P.\u0275dir=R.lG2({type:P,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),P})(),Bn=(()=>{class P{constructor(N,ee,_e){_e._addDefault(new jr(N,ee))}}return P.\u0275fac=function(N){return new(N||P)(R.Y36(R.s_b),R.Y36(R.Rgc),R.Y36(Oi,9))},P.\u0275dir=R.lG2({type:P,selectors:[["","ngSwitchDefault",""]]}),P})();function ai(P,$){return Error(`InvalidPipeArgument: '${$}' for pipe '${(0,R.AaK)(P)}'`)}class Yo{createSubscription($,N){return $.subscribe({next:N,error:ee=>{throw ee}})}dispose($){$.unsubscribe()}onDestroy($){$.unsubscribe()}}class Nr{createSubscription($,N){return $.then(N,ee=>{throw ee})}dispose($){}onDestroy($){}}const rs=new Nr,Bi=new Yo;let Oo=(()=>{class P{constructor(N){this._ref=N,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(N){return this._obj?N!==this._obj?(this._dispose(),this.transform(N)):this._latestValue:(N&&this._subscribe(N),this._latestValue)}_subscribe(N){this._obj=N,this._strategy=this._selectStrategy(N),this._subscription=this._strategy.createSubscription(N,ee=>this._updateLatestValue(N,ee))}_selectStrategy(N){if((0,R.QGY)(N))return rs;if((0,R.F4k)(N))return Bi;throw ai(P,N)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(N,ee){N===this._obj&&(this._latestValue=ee,this._ref.markForCheck())}}return P.\u0275fac=function(N){return new(N||P)(R.Y36(R.sBO,16))},P.\u0275pipe=R.Yjl({name:"async",type:P,pure:!1}),P})(),xo=(()=>{class P{constructor(N){this.locale=N}transform(N,ee="mediumDate",_e,Le){if(null==N||""===N||N!=N)return null;try{return pt(N,ee,Le||this.locale,_e)}catch(tt){throw ai(P,tt.message)}}}return P.\u0275fac=function(N){return new(N||P)(R.Y36(R.soG,16))},P.\u0275pipe=R.Yjl({name:"date",type:P,pure:!0}),P})(),Vt=(()=>{class P{}return P.\u0275fac=function(N){return new(N||P)},P.\u0275mod=R.oAB({type:P}),P.\u0275inj=R.cJS({providers:[{provide:Qe,useClass:Ae}]}),P})();const wn="browser";function xi(P){return P===wn}function Bo(P){return"server"===P}let fr=(()=>{class P{}return P.\u0275prov=(0,R.Yz7)({token:P,providedIn:"root",factory:()=>new jo((0,R.LFG)(ke),window)}),P})();class jo{constructor($,N){this.document=$,this.window=N,this.offset=()=>[0,0]}setOffset($){this.offset=Array.isArray($)?()=>$:$}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition($){this.supportsScrolling()&&this.window.scrollTo($[0],$[1])}scrollToAnchor($){if(!this.supportsScrolling())return;const N=function(P,$){const N=P.getElementById($)||P.getElementsByName($)[0];if(N)return N;if("function"==typeof P.createTreeWalker&&P.body&&(P.body.createShadowRoot||P.body.attachShadow)){const ee=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let _e=ee.currentNode;for(;_e;){const Le=_e.shadowRoot;if(Le){const tt=Le.getElementById($)||Le.querySelector(`[name="${$}"]`);if(tt)return tt}_e=ee.nextNode()}}return null}(this.document,$);N&&(this.scrollToElement(N),this.attemptFocus(N))}setHistoryScrollRestoration($){if(this.supportScrollRestoration()){const N=this.window.history;N&&N.scrollRestoration&&(N.scrollRestoration=$)}}scrollToElement($){const N=$.getBoundingClientRect(),ee=N.left+this.window.pageXOffset,_e=N.top+this.window.pageYOffset,Le=this.offset();this.window.scrollTo(ee-Le[0],_e-Le[1])}attemptFocus($){return $.focus(),this.document.activeElement===$}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const $=mo(this.window.history)||mo(Object.getPrototypeOf(this.window.history));return!(!$||!$.writable&&!$.set)}catch($){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch($){return!1}}}function mo(P){return Object.getOwnPropertyDescriptor(P,"scrollRestoration")}class ce{}},1841:(jt,rt,Q)=>{"use strict";Q.d(rt,{eN:()=>at,JF:()=>gr});var R=Q(8583),c=Q(7716),G=Q(5917),E=Q(7574),Ve=Q(4612),ve=Q(5435),ke=Q(8002);class fe{}class Ce{}class re{constructor(Ze){this.normalizedNames=new Map,this.lazyUpdate=null,Ze?this.lazyInit="string"==typeof Ze?()=>{this.headers=new Map,Ze.split("\n").forEach(je=>{const It=je.indexOf(":");if(It>0){const xt=je.slice(0,It),nn=xt.toLowerCase(),Ot=je.slice(It+1).trim();this.maybeSetNormalizedName(xt,nn),this.headers.has(nn)?this.headers.get(nn).push(Ot):this.headers.set(nn,[Ot])}})}:()=>{this.headers=new Map,Object.keys(Ze).forEach(je=>{let It=Ze[je];const xt=je.toLowerCase();"string"==typeof It&&(It=[It]),It.length>0&&(this.headers.set(xt,It),this.maybeSetNormalizedName(je,xt))})}:this.headers=new Map}has(Ze){return this.init(),this.headers.has(Ze.toLowerCase())}get(Ze){this.init();const je=this.headers.get(Ze.toLowerCase());return je&&je.length>0?je[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ze){return this.init(),this.headers.get(Ze.toLowerCase())||null}append(Ze,je){return this.clone({name:Ze,value:je,op:"a"})}set(Ze,je){return this.clone({name:Ze,value:je,op:"s"})}delete(Ze,je){return this.clone({name:Ze,value:je,op:"d"})}maybeSetNormalizedName(Ze,je){this.normalizedNames.has(je)||this.normalizedNames.set(je,Ze)}init(){this.lazyInit&&(this.lazyInit instanceof re?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ze=>this.applyUpdate(Ze)),this.lazyUpdate=null))}copyFrom(Ze){Ze.init(),Array.from(Ze.headers.keys()).forEach(je=>{this.headers.set(je,Ze.headers.get(je)),this.normalizedNames.set(je,Ze.normalizedNames.get(je))})}clone(Ze){const je=new re;return je.lazyInit=this.lazyInit&&this.lazyInit instanceof re?this.lazyInit:this,je.lazyUpdate=(this.lazyUpdate||[]).concat([Ze]),je}applyUpdate(Ze){const je=Ze.name.toLowerCase();switch(Ze.op){case"a":case"s":let It=Ze.value;if("string"==typeof It&&(It=[It]),0===It.length)return;this.maybeSetNormalizedName(Ze.name,je);const xt=("a"===Ze.op?this.headers.get(je):void 0)||[];xt.push(...It),this.headers.set(je,xt);break;case"d":const nn=Ze.value;if(nn){let Ot=this.headers.get(je);if(!Ot)return;Ot=Ot.filter(Ue=>-1===nn.indexOf(Ue)),0===Ot.length?(this.headers.delete(je),this.normalizedNames.delete(je)):this.headers.set(je,Ot)}else this.headers.delete(je),this.normalizedNames.delete(je)}}forEach(Ze){this.init(),Array.from(this.normalizedNames.keys()).forEach(je=>Ze(this.normalizedNames.get(je),this.headers.get(je)))}}class Ee{encodeKey(Ze){return xe(Ze)}encodeValue(Ze){return xe(Ze)}decodeKey(Ze){return decodeURIComponent(Ze)}decodeValue(Ze){return decodeURIComponent(Ze)}}const ye=/%(\d[a-f0-9])/gi,De={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function xe(St){return encodeURIComponent(St).replace(ye,(Ze,je)=>{var It;return null!==(It=De[je])&&void 0!==It?It:Ze})}function We(St){return`${St}`}class X{constructor(Ze={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ze.encoder||new Ee,Ze.fromString){if(Ze.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(St,Ze){const je=new Map;return St.length>0&&St.replace(/^\?/,"").split("&").forEach(xt=>{const nn=xt.indexOf("="),[Ot,Ue]=-1==nn?[Ze.decodeKey(xt),""]:[Ze.decodeKey(xt.slice(0,nn)),Ze.decodeValue(xt.slice(nn+1))],pt=je.get(Ot)||[];pt.push(Ue),je.set(Ot,pt)}),je}(Ze.fromString,this.encoder)}else Ze.fromObject?(this.map=new Map,Object.keys(Ze.fromObject).forEach(je=>{const It=Ze.fromObject[je];this.map.set(je,Array.isArray(It)?It:[It])})):this.map=null}has(Ze){return this.init(),this.map.has(Ze)}get(Ze){this.init();const je=this.map.get(Ze);return je?je[0]:null}getAll(Ze){return this.init(),this.map.get(Ze)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ze,je){return this.clone({param:Ze,value:je,op:"a"})}appendAll(Ze){const je=[];return Object.keys(Ze).forEach(It=>{const xt=Ze[It];Array.isArray(xt)?xt.forEach(nn=>{je.push({param:It,value:nn,op:"a"})}):je.push({param:It,value:xt,op:"a"})}),this.clone(je)}set(Ze,je){return this.clone({param:Ze,value:je,op:"s"})}delete(Ze,je){return this.clone({param:Ze,value:je,op:"d"})}toString(){return this.init(),this.keys().map(Ze=>{const je=this.encoder.encodeKey(Ze);return this.map.get(Ze).map(It=>je+"="+this.encoder.encodeValue(It)).join("&")}).filter(Ze=>""!==Ze).join("&")}clone(Ze){const je=new X({encoder:this.encoder});return je.cloneFrom=this.cloneFrom||this,je.updates=(this.updates||[]).concat(Ze),je}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ze=>this.map.set(Ze,this.cloneFrom.map.get(Ze))),this.updates.forEach(Ze=>{switch(Ze.op){case"a":case"s":const je=("a"===Ze.op?this.map.get(Ze.param):void 0)||[];je.push(We(Ze.value)),this.map.set(Ze.param,je);break;case"d":if(void 0===Ze.value){this.map.delete(Ze.param);break}{let It=this.map.get(Ze.param)||[];const xt=It.indexOf(We(Ze.value));-1!==xt&&It.splice(xt,1),It.length>0?this.map.set(Ze.param,It):this.map.delete(Ze.param)}}}),this.cloneFrom=this.updates=null)}}class _t{constructor(){this.map=new Map}set(Ze,je){return this.map.set(Ze,je),this}get(Ze){return this.map.has(Ze)||this.map.set(Ze,Ze.defaultValue()),this.map.get(Ze)}delete(Ze){return this.map.delete(Ze),this}keys(){return this.map.keys()}}function Nt(St){return"undefined"!=typeof ArrayBuffer&&St instanceof ArrayBuffer}function ut(St){return"undefined"!=typeof Blob&&St instanceof Blob}function Yt(St){return"undefined"!=typeof FormData&&St instanceof FormData}class In{constructor(Ze,je,It,xt){let nn;if(this.url=je,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ze.toUpperCase(),function(St){switch(St){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||xt?(this.body=void 0!==It?It:null,nn=xt):nn=It,nn&&(this.reportProgress=!!nn.reportProgress,this.withCredentials=!!nn.withCredentials,nn.responseType&&(this.responseType=nn.responseType),nn.headers&&(this.headers=nn.headers),nn.context&&(this.context=nn.context),nn.params&&(this.params=nn.params)),this.headers||(this.headers=new re),this.context||(this.context=new _t),this.params){const Ot=this.params.toString();if(0===Ot.length)this.urlWithParams=je;else{const Ue=je.indexOf("?");this.urlWithParams=je+(-1===Ue?"?":Ue<je.length-1?"&":"")+Ot}}else this.params=new X,this.urlWithParams=je}serializeBody(){return null===this.body?null:Nt(this.body)||ut(this.body)||Yt(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof X?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Yt(this.body)?null:ut(this.body)?this.body.type||null:Nt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof X?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ze={}){var je;const It=Ze.method||this.method,xt=Ze.url||this.url,nn=Ze.responseType||this.responseType,Ot=void 0!==Ze.body?Ze.body:this.body,Ue=void 0!==Ze.withCredentials?Ze.withCredentials:this.withCredentials,pt=void 0!==Ze.reportProgress?Ze.reportProgress:this.reportProgress;let bt=Ze.headers||this.headers,At=Ze.params||this.params;const Ut=null!==(je=Ze.context)&&void 0!==je?je:this.context;return void 0!==Ze.setHeaders&&(bt=Object.keys(Ze.setHeaders).reduce((dn,pn)=>dn.set(pn,Ze.setHeaders[pn]),bt)),Ze.setParams&&(At=Object.keys(Ze.setParams).reduce((dn,pn)=>dn.set(pn,Ze.setParams[pn]),At)),new In(It,xt,Ot,{params:At,headers:bt,context:Ut,reportProgress:pt,responseType:nn,withCredentials:Ue})}}var Et=(()=>((Et=Et||{})[Et.Sent=0]="Sent",Et[Et.UploadProgress=1]="UploadProgress",Et[Et.ResponseHeader=2]="ResponseHeader",Et[Et.DownloadProgress=3]="DownloadProgress",Et[Et.Response=4]="Response",Et[Et.User=5]="User",Et))();class Ke{constructor(Ze,je=200,It="OK"){this.headers=Ze.headers||new re,this.status=void 0!==Ze.status?Ze.status:je,this.statusText=Ze.statusText||It,this.url=Ze.url||null,this.ok=this.status>=200&&this.status<300}}class ot extends Ke{constructor(Ze={}){super(Ze),this.type=Et.ResponseHeader}clone(Ze={}){return new ot({headers:Ze.headers||this.headers,status:void 0!==Ze.status?Ze.status:this.status,statusText:Ze.statusText||this.statusText,url:Ze.url||this.url||void 0})}}class it extends Ke{constructor(Ze={}){super(Ze),this.type=Et.Response,this.body=void 0!==Ze.body?Ze.body:null}clone(Ze={}){return new it({body:void 0!==Ze.body?Ze.body:this.body,headers:Ze.headers||this.headers,status:void 0!==Ze.status?Ze.status:this.status,statusText:Ze.statusText||this.statusText,url:Ze.url||this.url||void 0})}}class nt extends Ke{constructor(Ze){super(Ze,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ze.url||"(unknown url)"}`:`Http failure response for ${Ze.url||"(unknown url)"}: ${Ze.status} ${Ze.statusText}`,this.error=Ze.error||null}}function vt(St,Ze){return{body:Ze,headers:St.headers,context:St.context,observe:St.observe,params:St.params,reportProgress:St.reportProgress,responseType:St.responseType,withCredentials:St.withCredentials}}let at=(()=>{class St{constructor(je){this.handler=je}request(je,It,xt={}){let nn;if(je instanceof In)nn=je;else{let pt,bt;pt=xt.headers instanceof re?xt.headers:new re(xt.headers),xt.params&&(bt=xt.params instanceof X?xt.params:new X({fromObject:xt.params})),nn=new In(je,It,void 0!==xt.body?xt.body:null,{headers:pt,context:xt.context,params:bt,reportProgress:xt.reportProgress,responseType:xt.responseType||"json",withCredentials:xt.withCredentials})}const Ot=(0,G.of)(nn).pipe((0,Ve.b)(pt=>this.handler.handle(pt)));if(je instanceof In||"events"===xt.observe)return Ot;const Ue=Ot.pipe((0,ve.h)(pt=>pt instanceof it));switch(xt.observe||"body"){case"body":switch(nn.responseType){case"arraybuffer":return Ue.pipe((0,ke.U)(pt=>{if(null!==pt.body&&!(pt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return pt.body}));case"blob":return Ue.pipe((0,ke.U)(pt=>{if(null!==pt.body&&!(pt.body instanceof Blob))throw new Error("Response is not a Blob.");return pt.body}));case"text":return Ue.pipe((0,ke.U)(pt=>{if(null!==pt.body&&"string"!=typeof pt.body)throw new Error("Response is not a string.");return pt.body}));case"json":default:return Ue.pipe((0,ke.U)(pt=>pt.body))}case"response":return Ue;default:throw new Error(`Unreachable: unhandled observe type ${xt.observe}}`)}}delete(je,It={}){return this.request("DELETE",je,It)}get(je,It={}){return this.request("GET",je,It)}head(je,It={}){return this.request("HEAD",je,It)}jsonp(je,It){return this.request("JSONP",je,{params:(new X).append(It,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(je,It={}){return this.request("OPTIONS",je,It)}patch(je,It,xt={}){return this.request("PATCH",je,vt(xt,It))}post(je,It,xt={}){return this.request("POST",je,vt(xt,It))}put(je,It,xt={}){return this.request("PUT",je,vt(xt,It))}}return St.\u0275fac=function(je){return new(je||St)(c.LFG(fe))},St.\u0275prov=c.Yz7({token:St,factory:St.\u0275fac}),St})();class tn{constructor(Ze,je){this.next=Ze,this.interceptor=je}handle(Ze){return this.interceptor.intercept(Ze,this.next)}}const sn=new c.OlP("HTTP_INTERCEPTORS");let Sn=(()=>{class St{intercept(je,It){return It.handle(je)}}return St.\u0275fac=function(je){return new(je||St)},St.\u0275prov=c.Yz7({token:St,factory:St.\u0275fac}),St})();const lr=/^\)\]\}',?\n/;let qn=(()=>{class St{constructor(je){this.xhrFactory=je}handle(je){if("JSONP"===je.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new E.y(It=>{const xt=this.xhrFactory.build();if(xt.open(je.method,je.urlWithParams),je.withCredentials&&(xt.withCredentials=!0),je.headers.forEach((pn,Zt)=>xt.setRequestHeader(pn,Zt.join(","))),je.headers.has("Accept")||xt.setRequestHeader("Accept","application/json, text/plain, */*"),!je.headers.has("Content-Type")){const pn=je.detectContentTypeHeader();null!==pn&&xt.setRequestHeader("Content-Type",pn)}if(je.responseType){const pn=je.responseType.toLowerCase();xt.responseType="json"!==pn?pn:"text"}const nn=je.serializeBody();let Ot=null;const Ue=()=>{if(null!==Ot)return Ot;const pn=1223===xt.status?204:xt.status,Zt=xt.statusText||"OK",Se=new re(xt.getAllResponseHeaders()),Ie=function(St){return"responseURL"in St&&St.responseURL?St.responseURL:/^X-Request-URL:/m.test(St.getAllResponseHeaders())?St.getResponseHeader("X-Request-URL"):null}(xt)||je.url;return Ot=new ot({headers:Se,status:pn,statusText:Zt,url:Ie}),Ot},pt=()=>{let{headers:pn,status:Zt,statusText:Se,url:Ie}=Ue(),$e=null;204!==Zt&&($e=void 0===xt.response?xt.responseText:xt.response),0===Zt&&(Zt=$e?200:0);let Je=Zt>=200&&Zt<300;if("json"===je.responseType&&"string"==typeof $e){const Xe=$e;$e=$e.replace(lr,"");try{$e=""!==$e?JSON.parse($e):null}catch(qt){$e=Xe,Je&&(Je=!1,$e={error:qt,text:$e})}}Je?(It.next(new it({body:$e,headers:pn,status:Zt,statusText:Se,url:Ie||void 0})),It.complete()):It.error(new nt({error:$e,headers:pn,status:Zt,statusText:Se,url:Ie||void 0}))},bt=pn=>{const{url:Zt}=Ue(),Se=new nt({error:pn,status:xt.status||0,statusText:xt.statusText||"Unknown Error",url:Zt||void 0});It.error(Se)};let At=!1;const Ut=pn=>{At||(It.next(Ue()),At=!0);let Zt={type:Et.DownloadProgress,loaded:pn.loaded};pn.lengthComputable&&(Zt.total=pn.total),"text"===je.responseType&&!!xt.responseText&&(Zt.partialText=xt.responseText),It.next(Zt)},dn=pn=>{let Zt={type:Et.UploadProgress,loaded:pn.loaded};pn.lengthComputable&&(Zt.total=pn.total),It.next(Zt)};return xt.addEventListener("load",pt),xt.addEventListener("error",bt),xt.addEventListener("timeout",bt),xt.addEventListener("abort",bt),je.reportProgress&&(xt.addEventListener("progress",Ut),null!==nn&&xt.upload&&xt.upload.addEventListener("progress",dn)),xt.send(nn),It.next({type:Et.Sent}),()=>{xt.removeEventListener("error",bt),xt.removeEventListener("abort",bt),xt.removeEventListener("load",pt),xt.removeEventListener("timeout",bt),je.reportProgress&&(xt.removeEventListener("progress",Ut),null!==nn&&xt.upload&&xt.upload.removeEventListener("progress",dn)),xt.readyState!==xt.DONE&&xt.abort()}})}}return St.\u0275fac=function(je){return new(je||St)(c.LFG(R.JF))},St.\u0275prov=c.Yz7({token:St,factory:St.\u0275fac}),St})();const Xn=new c.OlP("XSRF_COOKIE_NAME"),An=new c.OlP("XSRF_HEADER_NAME");class On{}let Si=(()=>{class St{constructor(je,It,xt){this.doc=je,this.platform=It,this.cookieName=xt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const je=this.doc.cookie||"";return je!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,R.Mx)(je,this.cookieName),this.lastCookieString=je),this.lastToken}}return St.\u0275fac=function(je){return new(je||St)(c.LFG(R.K0),c.LFG(c.Lbi),c.LFG(Xn))},St.\u0275prov=c.Yz7({token:St,factory:St.\u0275fac}),St})(),vn=(()=>{class St{constructor(je,It){this.tokenService=je,this.headerName=It}intercept(je,It){const xt=je.url.toLowerCase();if("GET"===je.method||"HEAD"===je.method||xt.startsWith("http://")||xt.startsWith("https://"))return It.handle(je);const nn=this.tokenService.getToken();return null!==nn&&!je.headers.has(this.headerName)&&(je=je.clone({headers:je.headers.set(this.headerName,nn)})),It.handle(je)}}return St.\u0275fac=function(je){return new(je||St)(c.LFG(On),c.LFG(An))},St.\u0275prov=c.Yz7({token:St,factory:St.\u0275fac}),St})(),Kt=(()=>{class St{constructor(je,It){this.backend=je,this.injector=It,this.chain=null}handle(je){if(null===this.chain){const It=this.injector.get(sn,[]);this.chain=It.reduceRight((xt,nn)=>new tn(xt,nn),this.backend)}return this.chain.handle(je)}}return St.\u0275fac=function(je){return new(je||St)(c.LFG(Ce),c.LFG(c.zs3))},St.\u0275prov=c.Yz7({token:St,factory:St.\u0275fac}),St})(),Qt=(()=>{class St{static disable(){return{ngModule:St,providers:[{provide:vn,useClass:Sn}]}}static withOptions(je={}){return{ngModule:St,providers:[je.cookieName?{provide:Xn,useValue:je.cookieName}:[],je.headerName?{provide:An,useValue:je.headerName}:[]]}}}return St.\u0275fac=function(je){return new(je||St)},St.\u0275mod=c.oAB({type:St}),St.\u0275inj=c.cJS({providers:[vn,{provide:sn,useExisting:vn,multi:!0},{provide:On,useClass:Si},{provide:Xn,useValue:"XSRF-TOKEN"},{provide:An,useValue:"X-XSRF-TOKEN"}]}),St})(),gr=(()=>{class St{}return St.\u0275fac=function(je){return new(je||St)},St.\u0275mod=c.oAB({type:St}),St.\u0275inj=c.cJS({providers:[at,{provide:fe,useClass:Kt},qn,{provide:Ce,useExisting:qn}],imports:[[Qt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),St})()},7716:(jt,rt,Q)=>{"use strict";Q.d(rt,{deG:()=>sa,tb:()=>DC,AFp:()=>wC,ip1:()=>Vv,CZH:()=>Of,hGG:()=>PA,z2F:()=>Jp,sBO:()=>ET,Sil:()=>Qp,_Vd:()=>wf,EJc:()=>AC,SBq:()=>Tc,qLn:()=>tl,vpe:()=>Dc,gxx:()=>Ll,tBr:()=>Yu,XFs:()=>Qt,OlP:()=>Ti,zs3:()=>Eo,ZZ4:()=>Rm,aQg:()=>km,soG:()=>Zm,YKP:()=>d0,v3s:()=>dA,h0i:()=>kh,PXZ:()=>oA,R0b:()=>Hu,FiY:()=>gs,Lbi:()=>TC,g9A:()=>EC,n_E:()=>Yp,Qsj:()=>uT,FYo:()=>Pm,JOm:()=>Xs,Tiy:()=>hv,q3G:()=>Yr,tp0:()=>Ls,EAV:()=>gA,Rgc:()=>Up,dDg:()=>xC,DyG:()=>vl,q4F:()=>fv,GfV:()=>r0,s_b:()=>Lm,ifc:()=>Ot,eFA:()=>NC,G48:()=>JS,Gpc:()=>Ee,f3M:()=>gd,X6Q:()=>zv,_c5:()=>DA,VLi:()=>QS,c2e:()=>SC,zSh:()=>$d,wAp:()=>vr,vHH:()=>xe,EiD:()=>Ml,mCW:()=>ls,qzn:()=>Mu,JVY:()=>ic,pB0:()=>fh,eBb:()=>oc,L6k:()=>yd,LAX:()=>hh,cg1:()=>rv,Tjo:()=>EA,kL8:()=>Db,yhl:()=>Iu,dqk:()=>Ut,sIi:()=>Oh,CqO:()=>$_,QGY:()=>z_,F4k:()=>xy,RDi:()=>Y,AaK:()=>fe,z3N:()=>Lr,qOj:()=>eh,TTD:()=>Vt,_Bn:()=>Jb,xp6:()=>Zh,uIk:()=>_f,Gre:()=>pb,ekj:()=>J_,Suo:()=>eC,Xpm:()=>Un,lG2:()=>fo,Yz7:()=>Tn,cJS:()=>Zn,oAB:()=>Mi,Yjl:()=>Wo,Y36:()=>xp,_UZ:()=>Iy,BQk:()=>q_,ynx:()=>Z_,qZA:()=>G_,TgZ:()=>H_,EpF:()=>Oy,n5z:()=>Tt,Ikx:()=>nv,LFG:()=>Di,$8M:()=>ur,NdJ:()=>W_,CRH:()=>tC,oxw:()=>Fy,ALo:()=>W0,xi3:()=>Y0,Hsn:()=>Ly,F$t:()=>Ny,Q6J:()=>B_,DdM:()=>V0,VKq:()=>B0,WLB:()=>j0,kEZ:()=>H0,iGM:()=>J0,MAs:()=>_m,Jf7:()=>Wc,CHM:()=>bs,LSH:()=>ac,kYT:()=>Uo,Udp:()=>Q_,YNc:()=>xh,_uU:()=>sb,Oqu:()=>ev,hij:()=>Dm,AsE:()=>tv,Gf:()=>X0});var R=Q(9765),c=Q(5319),G=Q(7574),E=Q(6682),Ve=Q(8819);function ve(e){for(let i in e)if(e[i]===ve)return i;throw Error("Could not find renamed property on target object.")}function ke(e,i){for(const a in i)i.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(e[a]=i[a])}function fe(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(fe).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const i=e.toString();if(null==i)return""+i;const a=i.indexOf("\n");return-1===a?i:i.substring(0,a)}function Ce(e,i){return null==e||""===e?null===i?"":i:null==i||""===i?e:e+" "+i}const re=ve({__forward_ref__:ve});function Ee(e){return e.__forward_ref__=Ee,e.toString=function(){return fe(this())},e}function pe(e){return ye(e)?e():e}function ye(e){return"function"==typeof e&&e.hasOwnProperty(re)&&e.__forward_ref__===Ee}class xe extends Error{constructor(i,a){super(function(e,i){return`${e?`NG0${e}: `:""}${i}`}(i,a)),this.code=i}}function Re(e){return"string"==typeof e?e:null==e?"":String(e)}function _t(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Re(e)}function Yt(e,i){const a=i?` in ${i}`:"";throw new xe("201",`No provider for ${_t(e)} found${a}`)}function Bt(e,i){null==e&&function(e,i,a,u){throw new Error(`ASSERTION ERROR: ${e}`+(null==u?"":` [Expected=> ${a} ${u} ${i} <=Actual]`))}(i,e,null,"!=")}function Tn(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Zn(e){return{providers:e.providers||[],imports:e.imports||[]}}function qn(e){return Xn(e,vn)||Xn(e,zn)}function Xn(e,i){return e.hasOwnProperty(i)?e[i]:null}function Si(e){return e&&(e.hasOwnProperty(Kt)||e.hasOwnProperty(Ln))?e[Kt]:null}const vn=ve({\u0275prov:ve}),Kt=ve({\u0275inj:ve}),zn=ve({ngInjectableDef:ve}),Ln=ve({ngInjectorDef:ve});var Qt=(()=>((Qt=Qt||{})[Qt.Default=0]="Default",Qt[Qt.Host=1]="Host",Qt[Qt.Self=2]="Self",Qt[Qt.SkipSelf=4]="SkipSelf",Qt[Qt.Optional=8]="Optional",Qt))();let gr;function Kn(e){const i=gr;return gr=e,i}function St(e,i,a){const u=qn(e);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&Qt.Optional?null:void 0!==i?i:void Yt(fe(e),"Injector")}function je(e){return{toString:e}.toString()}var It=(()=>((It=It||{})[It.OnPush=0]="OnPush",It[It.Default=1]="Default",It))(),Ot=(()=>((Ot=Ot||{})[Ot.Emulated=0]="Emulated",Ot[Ot.None=2]="None",Ot[Ot.ShadowDom=3]="ShadowDom",Ot))();const Ue="undefined"!=typeof globalThis&&globalThis,pt="undefined"!=typeof window&&window,bt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ut=Ue||"undefined"!=typeof global&&global||pt||bt,Zt={},Se=[],Ie=ve({\u0275cmp:ve}),$e=ve({\u0275dir:ve}),Je=ve({\u0275pipe:ve}),Xe=ve({\u0275mod:ve}),qt=ve({\u0275loc:ve}),yn=ve({\u0275fac:ve}),sr=ve({__NG_ELEMENT_ID__:ve});let Vn=0;function Un(e){return je(()=>{const a={},u={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===It.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Se,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Ot.Emulated,id:"c",styles:e.styles||Se,_:null,setInput:null,schemas:e.schemas||null,tView:null},p=e.directives,y=e.features,T=e.pipes;return u.id+=Vn++,u.inputs=Qi(e.inputs,a),u.outputs=Qi(e.outputs),y&&y.forEach(D=>D(u)),u.directiveDefs=p?()=>("function"==typeof p?p():p).map(Br):null,u.pipeDefs=T?()=>("function"==typeof T?T():T).map(Xr):null,u})}function Br(e){return Fr(e)||function(e){return e[$e]||null}(e)}function Xr(e){return function(e){return e[Je]||null}(e)}const Dr={};function Mi(e){return je(()=>{const i={type:e.type,bootstrap:e.bootstrap||Se,declarations:e.declarations||Se,imports:e.imports||Se,exports:e.exports||Se,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(Dr[e.id]=e.type),i})}function Uo(e,i){return je(()=>{const a=Ur(e,!0);a.declarations=i.declarations||Se,a.imports=i.imports||Se,a.exports=i.exports||Se})}function Qi(e,i){if(null==e)return Zt;const a={};for(const u in e)if(e.hasOwnProperty(u)){let p=e[u],y=p;Array.isArray(p)&&(y=p[1],p=p[0]),a[p]=u,i&&(i[p]=y)}return a}const fo=Un;function Wo(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function Fr(e){return e[Ie]||null}function Ur(e,i){const a=e[Xe]||null;if(!a&&!0===i)throw new Error(`Type ${fe(e)} does not have '\u0275mod' property.`);return a}function zr(e){return Array.isArray(e)&&"object"==typeof e[1]}function Mr(e){return Array.isArray(e)&&!0===e[1]}function Ui(e){return 0!=(8&e.flags)}function ni(e){return 2==(2&e.flags)}function Vi(e){return 1==(1&e.flags)}function Gi(e){return null!==e.template}function ai(e){return 0!=(512&e[2])}function he(e,i){return e.hasOwnProperty(yn)?e[yn]:null}class lt{constructor(i,a,u){this.previousValue=i,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function Vt(){return wn}function wn(e){return e.type.prototype.ngOnChanges&&(e.setInput=$n),Ir}function Ir(){const e=xi(this),i=null==e?void 0:e.current;if(i){const a=e.previous;if(a===Zt)e.previous=i;else for(let u in i)a[u]=i[u];e.current=null,this.ngOnChanges(i)}}function $n(e,i,a,u){const p=xi(e)||function(e,i){return e[hr]=i}(e,{previous:Zt,current:null}),y=p.current||(p.current={}),T=p.previous,D=this.declaredInputs[a],F=T[D];y[D]=new lt(F&&F.currentValue,i,T===Zt),e[u]=i}Vt.ngInherit=!0;const hr="__ngSimpleChanges__";function xi(e){return e[hr]||null}let mo;function Y(e){mo=e}function P(e){return!!e.listen}const N={createRenderer:(e,i)=>void 0!==mo?mo:"undefined"!=typeof document?document:void 0};function _e(e){for(;Array.isArray(e);)e=e[0];return e}function H(e,i){return _e(i[e])}function j(e,i){return _e(i[e.index])}function ae(e,i){return e.data[i]}function ze(e,i){return e[i]}function Pt(e,i){const a=i[e];return zr(a)?a:a[0]}function En(e){return 4==(4&e[2])}function pr(e){return 128==(128&e[2])}function _r(e,i){return null==i?null:e[i]}function Gr(e){e[18]=0}function _i(e,i){e[5]+=i;let a=e,u=e[3];for(;null!==u&&(1===i&&1===a[5]||-1===i&&0===a[5]);)u[5]+=i,a=u,u=u[3]}const Dn={lFrame:ci(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Gu(){return Dn.bindingsEnabled}function Ft(){return Dn.lFrame.lView}function br(){return Dn.lFrame.tView}function bs(e){return Dn.lFrame.contextLView=e,e[8]}function ji(){let e=xs();for(;null!==e&&64===e.type;)e=e.parent;return e}function xs(){return Dn.lFrame.currentTNode}function Qo(e,i){const a=Dn.lFrame;a.currentTNode=e,a.isParent=i}function oe(){return Dn.lFrame.isParent}function A(){Dn.lFrame.isParent=!1}function se(){return Dn.isInCheckNoChangesMode}function me(e){Dn.isInCheckNoChangesMode=e}function Pe(){const e=Dn.lFrame;let i=e.bindingRootIndex;return-1===i&&(i=e.bindingRootIndex=e.tView.bindingStartIndex),i}function Fe(){return Dn.lFrame.bindingIndex}function mt(){return Dn.lFrame.bindingIndex++}function Ht(e){const i=Dn.lFrame,a=i.bindingIndex;return i.bindingIndex=i.bindingIndex+e,a}function Rr(e,i){const a=Dn.lFrame;a.bindingIndex=a.bindingRootIndex=e,Fn(i)}function Fn(e){Dn.lFrame.currentDirectiveIndex=e}function vi(){return Dn.lFrame.currentQueryIndex}function ei(e){Dn.lFrame.currentQueryIndex=e}function Ri(e){const i=e[1];return 2===i.type?i.declTNode:1===i.type?e[6]:null}function li(e,i,a){if(a&Qt.SkipSelf){let p=i,y=e;for(;!(p=p.parent,null!==p||a&Qt.Host||(p=Ri(y),null===p||(y=y[15],10&p.type))););if(null===p)return!1;i=p,e=y}const u=Dn.lFrame=Ro();return u.currentTNode=i,u.lView=e,!0}function So(e){const i=Ro(),a=e[1];Dn.lFrame=i,i.currentTNode=a.firstChild,i.lView=e,i.tView=a,i.contextLView=e,i.bindingIndex=a.bindingStartIndex,i.inI18n=!1}function Ro(){const e=Dn.lFrame,i=null===e?null:e.child;return null===i?ci(e):i}function ci(e){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=i),i}function _o(){const e=Dn.lFrame;return Dn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const fs=_o;function to(){const e=_o();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function yi(){return Dn.lFrame.selectedIndex}function no(e){Dn.lFrame.selectedIndex=e}function bi(){const e=Dn.lFrame;return ae(e.tView,e.selectedIndex)}function Zi(e,i){for(let a=i.directiveStart,u=i.directiveEnd;a<u;a++){const y=e.data[a].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:D,ngAfterViewInit:F,ngAfterViewChecked:q,ngOnDestroy:ne}=y;T&&(e.contentHooks||(e.contentHooks=[])).push(-a,T),D&&((e.contentHooks||(e.contentHooks=[])).push(a,D),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(a,D)),F&&(e.viewHooks||(e.viewHooks=[])).push(-a,F),q&&((e.viewHooks||(e.viewHooks=[])).push(a,q),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(a,q)),null!=ne&&(e.destroyHooks||(e.destroyHooks=[])).push(a,ne)}}function qi(e,i,a){Ei(e,i,3,a)}function ii(e,i,a,u){(3&e[2])===a&&Ei(e,i,a,u)}function Rs(e,i){let a=e[2];(3&a)===i&&(a&=2047,a+=1,e[2]=a)}function Ei(e,i,a,u){const y=null!=u?u:-1,T=i.length-1;let D=0;for(let F=void 0!==u?65535&e[18]:0;F<T;F++)if("number"==typeof i[F+1]){if(D=i[F],null!=u&&D>=u)break}else i[F]<0&&(e[18]+=65536),(D<y||-1==y)&&($s(e,a,i,F),e[18]=(4294901760&e[18])+F+2),F++}function $s(e,i,a,u){const p=a[u]<0,y=a[u+1],D=e[p?-a[u]:a[u]];if(p){if(e[2]>>11<e[18]>>16&&(3&e[2])===i){e[2]+=2048;try{y.call(D)}finally{}}}else try{y.call(D)}finally{}}class oi{constructor(i,a,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function ra(e,i,a){const u=P(e);let p=0;for(;p<a.length;){const y=a[p];if("number"==typeof y){if(0!==y)break;p++;const T=a[p++],D=a[p++],F=a[p++];u?e.setAttribute(i,D,F,T):i.setAttributeNS(T,D,F)}else{const T=y,D=a[++p];$a(T)?u&&e.setProperty(i,T,D):u?e.setAttribute(i,T,D):i.setAttribute(T,D),p++}}return p}function Zu(e){return 3===e||4===e||6===e}function $a(e){return 64===e.charCodeAt(0)}function ia(e,i){if(null!==i&&0!==i.length)if(null===e||0===e.length)e=i.slice();else{let a=-1;for(let u=0;u<i.length;u++){const p=i[u];"number"==typeof p?a=p:0===a||vu(e,a,p,null,-1===a||2===a?i[++u]:null)}}return e}function vu(e,i,a,u,p){let y=0,T=e.length;if(-1===i)T=-1;else for(;y<e.length;){const D=e[y++];if("number"==typeof D){if(D===i){T=-1;break}if(D>i){T=y-1;break}}}for(;y<e.length;){const D=e[y];if("number"==typeof D)break;if(D===a){if(null===u)return void(null!==p&&(e[y+1]=p));if(u===e[y+1])return void(e[y+2]=p)}y++,null!==u&&y++,null!==p&&y++}-1!==T&&(e.splice(T,0,i),y=T+1),e.splice(y++,0,a),null!==u&&e.splice(y++,0,u),null!==p&&e.splice(y++,0,p)}function wa(e){return-1!==e}function Wa(e){return 32767&e}function Ea(e,i){let a=function(e){return e>>16}(e),u=i;for(;a>0;)u=u[15],a--;return u}let Ho=!0;function gt(e){const i=Ho;return Ho=e,i}let rn=0;function Jo(e,i){const a=Nn(e,i);if(-1!==a)return a;const u=i[1];u.firstCreatePass&&(e.injectorIndex=i.length,Ka(u.data,e),Ka(i,null),Ka(u.blueprint,null));const p=nr(e,i),y=e.injectorIndex;if(wa(p)){const T=Wa(p),D=Ea(p,i),F=D[1].data;for(let q=0;q<8;q++)i[y+q]=D[T+q]|F[T+q]}return i[y+8]=p,y}function Ka(e,i){e.push(0,0,0,0,0,0,0,0,i)}function Nn(e,i){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===i[e.injectorIndex+8]?-1:e.injectorIndex}function nr(e,i){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let a=0,u=null,p=i;for(;null!==p;){const y=p[1],T=y.type;if(u=2===T?y.declTNode:1===T?p[6]:null,null===u)return-1;if(a++,p=p[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function on(e,i,a){!function(e,i,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(sr)&&(u=a[sr]),null==u&&(u=a[sr]=rn++);const p=255&u;i.data[e+(p>>5)]|=1<<p}(e,i,a)}function Kl(e,i,a){if(a&Qt.Optional)return e;Yt(i,"NodeInjector")}function Tr(e,i,a,u){if(a&Qt.Optional&&void 0===u&&(u=null),0==(a&(Qt.Self|Qt.Host))){const p=e[9],y=Kn(void 0);try{return p?p.get(i,u,a&Qt.Optional):St(i,u,a&Qt.Optional)}finally{Kn(y)}}return Kl(u,i,a)}function Qa(e,i,a,u=Qt.Default,p){if(null!==e){const y=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const i=e.hasOwnProperty(sr)?e[sr]:void 0;return"number"==typeof i?i>=0?255&i:U:i}(a);if("function"==typeof y){if(!li(i,e,u))return u&Qt.Host?Kl(p,a,u):Tr(i,a,u,p);try{const T=y(u);if(null!=T||u&Qt.Optional)return T;Yt(a)}finally{fs()}}else if("number"==typeof y){let T=null,D=Nn(e,i),F=-1,q=u&Qt.Host?i[16][6]:null;for((-1===D||u&Qt.SkipSelf)&&(F=-1===D?nr(e,i):i[D+8],-1!==F&&Te(u,!1)?(T=i[1],D=Wa(F),i=Ea(F,i)):D=-1);-1!==D;){const ne=i[1];if(le(y,D,ne.data)){const ge=x(D,i,a,T,u,q);if(ge!==Ac)return ge}F=i[D+8],-1!==F&&Te(u,i[1].data[D+8]===q)&&le(y,D,i)?(T=ne,D=Wa(F),i=Ea(F,i)):D=-1}}}return Tr(i,a,u,p)}const Ac={};function U(){return new Ge(ji(),Ft())}function x(e,i,a,u,p,y){const T=i[1],D=T.data[e+8],ne=O(D,T,a,null==u?ni(D)&&Ho:u!=T&&0!=(3&D.type),p&Qt.Host&&y===D);return null!==ne?z(i,T,ne,D):Ac}function O(e,i,a,u,p){const y=e.providerIndexes,T=i.data,D=1048575&y,F=e.directiveStart,ne=y>>20,be=p?D+ne:e.directiveEnd;for(let Ne=u?D:D+ne;Ne<be;Ne++){const Ye=T[Ne];if(Ne<F&&a===Ye||Ne>=F&&Ye.type===a)return Ne}if(p){const Ne=T[F];if(Ne&&Gi(Ne)&&Ne.type===a)return F}return null}function z(e,i,a,u){let p=e[a];const y=i.data;if(function(e){return e instanceof oi}(p)){const T=p;T.resolving&&function(e,i){throw new xe("200",`Circular dependency in DI detected for ${e}`)}(_t(y[a]));const D=gt(T.canSeeViewProviders);T.resolving=!0;const F=T.injectImpl?Kn(T.injectImpl):null;li(e,u,Qt.Default);try{p=e[a]=T.factory(void 0,y,e,u),i.firstCreatePass&&a>=u.directiveStart&&function(e,i,a){const{ngOnChanges:u,ngOnInit:p,ngDoCheck:y}=i.type.prototype;if(u){const T=wn(i);(a.preOrderHooks||(a.preOrderHooks=[])).push(e,T),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(e,T)}p&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-e,p),y&&((a.preOrderHooks||(a.preOrderHooks=[])).push(e,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(e,y))}(a,y[a],i)}finally{null!==F&&Kn(F),gt(D),T.resolving=!1,fs()}}return p}function le(e,i,a){return!!(a[i+(e>>5)]&1<<e)}function Te(e,i){return!(e&Qt.Self||e&Qt.Host&&i)}class Ge{constructor(i,a){this._tNode=i,this._lView=a}get(i,a){return Qa(this._tNode,this._lView,i,void 0,a)}}function Tt(e){return je(()=>{const i=e.prototype.constructor,a=i[yn]||hn(i),u=Object.prototype;let p=Object.getPrototypeOf(e.prototype).constructor;for(;p&&p!==u;){const y=p[yn]||hn(p);if(y&&y!==a)return y;p=Object.getPrototypeOf(p)}return y=>new y})}function hn(e){return ye(e)?()=>{const i=hn(pe(e));return i&&i()}:he(e)}function ur(e){return function(e,i){if("class"===i)return e.classes;if("style"===i)return e.styles;const a=e.attrs;if(a){const u=a.length;let p=0;for(;p<u;){const y=a[p];if(Zu(y))break;if(0===y)p+=2;else if("number"==typeof y)for(p++;p<u&&"string"==typeof a[p];)p++;else{if(y===i)return a[p+1];p+=2}}}return null}(ji(),e)}const xr="__parameters__";function oo(e,i,a){return je(()=>{const u=function(e){return function(...a){if(e){const u=e(...a);for(const p in u)this[p]=u[p]}}}(i);function p(...y){if(this instanceof p)return u.apply(this,y),this;const T=new p(...y);return D.annotation=T,D;function D(F,q,ne){const ge=F.hasOwnProperty(xr)?F[xr]:Object.defineProperty(F,xr,{value:[]})[xr];for(;ge.length<=ne;)ge.push(null);return(ge[ne]=ge[ne]||[]).push(T),F}}return a&&(p.prototype=Object.create(a.prototype)),p.prototype.ngMetadataName=e,p.annotationCls=p,p})}class Ti{constructor(i,a){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Tn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const sa=new Ti("AnalyzeForEntryComponents"),vl=Function;function Xo(e,i){void 0===i&&(i=e);for(let a=0;a<e.length;a++){let u=e[a];Array.isArray(u)?(i===e&&(i=e.slice(0,a)),Xo(u,i)):i!==e&&i.push(u)}return i}function yo(e,i){e.forEach(a=>Array.isArray(a)?yo(a,i):i(a))}function Ys(e,i,a){i>=e.length?e.push(a):e.splice(i,0,a)}function Ao(e,i){return i>=e.length-1?e.pop():e.splice(i,1)[0]}function eu(e,i){const a=[];for(let u=0;u<e;u++)a.push(i);return a}function Es(e,i,a){let u=aa(e,i);return u>=0?e[1|u]=a:(u=~u,function(e,i,a,u){let p=e.length;if(p==i)e.push(a,u);else if(1===p)e.push(u,e[0]),e[0]=a;else{for(p--,e.push(e[p-1],e[p]);p>i;)e[p]=e[p-2],p--;e[i]=a,e[i+1]=u}}(e,u,i,a)),u}function Ns(e,i){const a=aa(e,i);if(a>=0)return e[1|a]}function aa(e,i){return function(e,i,a){let u=0,p=e.length>>a;for(;p!==u;){const y=u+(p-u>>1),T=e[y<<a];if(i===T)return y<<a;T>i?p=y:u=y+1}return~(p<<a)}(e,i,1)}const tu={},Cu="__NG_DI_FLAG__",ko="ngTempTokenPath",wu=/\n/gm,Wu="__source",Eu=ve({provide:String,useValue:ve});let Tu;function la(e){const i=Tu;return Tu=e,i}function wl(e,i=Qt.Default){if(void 0===Tu)throw new Error("inject() must be called from an injection context");return null===Tu?St(e,void 0,i):Tu.get(e,i&Qt.Optional?null:void 0,i)}function Di(e,i=Qt.Default){return(gr||wl)(pe(e),i)}const gd=Di;function Ma(e){const i=[];for(let a=0;a<e.length;a++){const u=pe(e[a]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let p,y=Qt.Default;for(let T=0;T<u.length;T++){const D=u[T],F=Du(D);"number"==typeof F?-1===F?p=D.token:y|=F:p=D}i.push(Di(p,y))}else i.push(Di(u))}return i}function Ia(e,i){return e[Cu]=i,e.prototype[Cu]=i,e}function Du(e){return e[Cu]}function nu(e,i,a,u){const p=e[ko];throw i[Wu]&&p.unshift(i[Wu]),e.message=function(e,i,a,u=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let p=fe(i);if(Array.isArray(i))p=i.map(fe).join(" -> ");else if("object"==typeof i){let y=[];for(let T in i)if(i.hasOwnProperty(T)){let D=i[T];y.push(T+":"+("string"==typeof D?JSON.stringify(D):fe(D)))}p=`{${y.join(", ")}}`}return`${a}${u?"("+u+")":""}[${p}]: ${e.replace(wu,"\n  ")}`}("\n"+e.message,p,a,u),e.ngTokenPath=p,e[ko]=null,e}const Yu=Ia(oo("Inject",e=>({token:e})),-1),gs=Ia(oo("Optional"),8),Ls=Ia(oo("SkipSelf"),4);let da;function No(e){var i;return(null===(i=function(){if(void 0===da&&(da=null,Ut.trustedTypes))try{da=Ut.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return da}())||void 0===i?void 0:i.createHTML(e))||e}class Co{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class ch extends Co{getTypeName(){return"HTML"}}class xa extends Co{getTypeName(){return"Style"}}class dh extends Co{getTypeName(){return"Script"}}class nc extends Co{getTypeName(){return"URL"}}class rc extends Co{getTypeName(){return"ResourceURL"}}function Lr(e){return e instanceof Co?e.changingThisBreaksApplicationSecurity:e}function Mu(e,i){const a=Iu(e);if(null!=a&&a!==i){if("ResourceURL"===a&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===i}function Iu(e){return e instanceof Co&&e.getTypeName()||null}function ic(e){return new ch(e)}function yd(e){return new xa(e)}function oc(e){return new dh(e)}function hh(e){return new nc(e)}function fh(e){return new rc(e)}class Cd{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const a=(new window.DOMParser).parseFromString(No(i),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(i):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class Tl{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const u=this.inertDocument.createElement("body");a.appendChild(u)}}getInertBodyElement(i){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=No(i),a;const u=this.inertDocument.createElement("body");return u.innerHTML=No(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const a=i.attributes;for(let p=a.length-1;0<p;p--){const T=a.item(p).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&i.removeAttribute(T)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const Nc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ou=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ls(e){return(e=String(e)).match(Nc)||e.match(Ou)?e:"unsafe:"+e}function Qs(e){const i={};for(const a of e.split(","))i[a]=!0;return i}function Fi(...e){const i={};for(const a of e)for(const u in a)a.hasOwnProperty(u)&&(i[u]=!0);return i}const Uc=Qs("area,br,col,hr,img,wbr"),Pa=Qs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dl=Qs("rp,rt"),pa=Fi(Uc,Fi(Pa,Qs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Fi(Dl,Qs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Fi(Dl,Pa)),Ju=Qs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),xu=Qs("srcset"),Sl=Fi(Ju,xu,Qs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Qs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Vc=Qs("script,style,template");class Al{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let a=i.firstChild,u=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?u=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,u&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let p=this.checkClobberedElement(a,a.nextSibling);if(p){a=p;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(i){const a=i.nodeName.toLowerCase();if(!pa.hasOwnProperty(a))return this.sanitizedSomething=!0,!Vc.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const u=i.attributes;for(let p=0;p<u.length;p++){const y=u.item(p),T=y.name,D=T.toLowerCase();if(!Sl.hasOwnProperty(D)){this.sanitizedSomething=!0;continue}let F=y.value;Ju[D]&&(F=ls(F)),xu[D]&&(e=F,F=(e=String(e)).split(",").map(i=>ls(i.trim())).join(", ")),this.buf.push(" ",T,'="',jc(F),'"')}var e;return this.buf.push(">"),!0}endElement(i){const a=i.nodeName.toLowerCase();pa.hasOwnProperty(a)&&!Uc.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(i){this.buf.push(jc(i))}checkClobberedElement(i,a){if(a&&(i.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return a}}const sc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Bc=/([^\#-~ |!])/g;function jc(e){return e.replace(/&/g,"&amp;").replace(sc,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(Bc,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Zo;function Ml(e,i){let a=null;try{Zo=Zo||function(e){const i=new Tl(e);return function(){try{return!!(new window.DOMParser).parseFromString(No(""),"text/html")}catch(e){return!1}}()?new Cd(i):i}(e);let u=i?String(i):"";a=Zo.getInertBodyElement(u);let p=5,y=u;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,u=y,y=a.innerHTML,a=Zo.getInertBodyElement(u)}while(u!==y);return No((new Al).sanitizeChildren(Ra(a)||a))}finally{if(a){const u=Ra(a)||a;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Ra(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Yr=(()=>((Yr=Yr||{})[Yr.NONE=0]="NONE",Yr[Yr.HTML=1]="HTML",Yr[Yr.STYLE=2]="STYLE",Yr[Yr.SCRIPT=3]="SCRIPT",Yr[Yr.URL=4]="URL",Yr[Yr.RESOURCE_URL=5]="RESOURCE_URL",Yr))();function ac(e){const i=function(){const e=Ft();return e&&e[12]}();return i?i.sanitize(Yr.URL,e)||"":Mu(e,"URL")?Lr(e):ls(Re(e))}const Wi="__ngContext__";function Ni(e,i){e[Wi]=i}function wo(e){const i=function(e){return e[Wi]||null}(e);return i?Array.isArray(i)?i:i.lView:null}function ga(e){return e.ngOriginalError}function Od(e,...i){e.error(...i)}class tl{constructor(){this._console=console}handleError(i){const a=this._findOriginalError(i),u=this._findContext(i),p=(e=i)&&e.ngErrorLogger||Od;var e;p(this._console,"ERROR",i),a&&p(this._console,"ORIGINAL ERROR",a),u&&p(this._console,"ERROR CONTEXT",u)}_findContext(i){return i?i.ngDebugContext||this._findContext(ga(i)):null}_findOriginalError(i){let a=i&&ga(i);for(;a&&ga(a);)a=ga(a);return a||null}}const rl=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ut))();function Wc(e){return e.ownerDocument.defaultView}function Js(e){return e instanceof Function?e():e}var Xs=(()=>((Xs=Xs||{})[Xs.Important=1]="Important",Xs[Xs.DashCase=2]="DashCase",Xs))();function du(e,i){return undefined(e,i)}function Ua(e){const i=e[3];return Mr(i)?i[3]:i}function dc(e){return Rd(e[13])}function il(e){return Rd(e[4])}function Rd(e){for(;null!==e&&!Mr(e);)e=e[4];return e}function Lu(e,i,a,u,p){if(null!=u){let y,T=!1;Mr(u)?y=u:zr(u)&&(T=!0,u=u[0]);const D=_e(u);0===e&&null!==a?null==p?b(i,a,D):d(i,a,D,p||null,!0):1===e&&null!==a?d(i,a,D,p||null,!0):2===e?function(e,i,a){const u=J(e,i);u&&function(e,i,a,u){P(e)?e.removeChild(i,a,u):i.removeChild(a)}(e,u,i,a)}(i,D,T):3===e&&i.destroyNode(D),null!=y&&function(e,i,a,u,p){const y=a[7];y!==_e(a)&&Lu(i,e,u,y,p);for(let D=10;D<a.length;D++){const F=a[D];Io(F[1],F,e,i,u,y)}}(i,e,y,a,p)}}function kd(e,i,a){return P(e)?e.createElement(i,a):null===a?e.createElement(i):e.createElementNS(a,i)}function Ld(e,i){const a=e[9],u=a.indexOf(i),p=i[3];1024&i[2]&&(i[2]&=-1025,_i(p,-1)),a.splice(u,1)}function Qc(e,i){if(e.length<=10)return;const a=10+i,u=e[a];if(u){const p=u[17];null!==p&&p!==e&&Ld(p,u),i>0&&(e[a-1][4]=u[4]);const y=Ao(e,10+i);!function(e,i){Io(e,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const T=y[19];null!==T&&T.detachView(y[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function f(e,i){if(!(256&i[2])){const a=i[11];P(a)&&a.destroyNode&&Io(e,i,a,3,null,null),function(e){let i=e[13];if(!i)return h(e[1],e);for(;i;){let a=null;if(zr(i))a=i[13];else{const u=i[10];u&&(a=u)}if(!a){for(;i&&!i[4]&&i!==e;)zr(i)&&h(i[1],i),i=i[3];null===i&&(i=e),zr(i)&&h(i[1],i),a=i&&i[4]}i=a}}(i)}}function h(e,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(e,i){let a;if(null!=e&&null!=(a=e.destroyHooks))for(let u=0;u<a.length;u+=2){const p=i[a[u]];if(!(p instanceof oi)){const y=a[u+1];if(Array.isArray(y))for(let T=0;T<y.length;T+=2){const D=p[y[T]],F=y[T+1];try{F.call(D)}finally{}}else try{y.call(p)}finally{}}}}(e,i),function(e,i){const a=e.cleanup,u=i[7];let p=-1;if(null!==a)for(let y=0;y<a.length-1;y+=2)if("string"==typeof a[y]){const T=a[y+1],D="function"==typeof T?T(i):_e(i[T]),F=u[p=a[y+2]],q=a[y+3];"boolean"==typeof q?D.removeEventListener(a[y],F,q):q>=0?u[p=q]():u[p=-q].unsubscribe(),y+=2}else{const T=u[p=a[y+1]];a[y].call(T)}if(null!==u){for(let y=p+1;y<u.length;y++)u[y]();i[7]=null}}(e,i),1===i[1].type&&P(i[11])&&i[11].destroy();const a=i[17];if(null!==a&&Mr(i[3])){a!==i[3]&&Ld(a,i);const u=i[19];null!==u&&u.detachView(e)}}}function m(e,i,a){return function(e,i,a){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return a[0];if(2&u.flags){const p=e.data[u.directiveStart].encapsulation;if(p===Ot.None||p===Ot.Emulated)return null}return j(u,a)}(e,i.parent,a)}function d(e,i,a,u,p){P(e)?e.insertBefore(i,a,u,p):i.insertBefore(a,u,p)}function b(e,i,a){P(e)?e.appendChild(i,a):i.appendChild(a)}function M(e,i,a,u,p){null!==u?d(e,i,a,u,p):b(e,i,a)}function J(e,i){return P(e)?e.parentNode(i):i.parentNode}function Oe(e,i,a){return yt(e,i,a)}let yt=function(e,i,a){return 40&e.type?j(e,a):null};function Gn(e,i,a,u){const p=m(e,u,i),y=i[11],D=Oe(u.parent||i[6],u,i);if(null!=p)if(Array.isArray(a))for(let F=0;F<a.length;F++)M(y,p,a[F],D,!1);else M(y,p,a,D,!1)}function qr(e,i){if(null!==i){const a=i.type;if(3&a)return j(i,e);if(4&a)return Gs(-1,e[i.index]);if(8&a){const u=i.child;if(null!==u)return qr(e,u);{const p=e[i.index];return Mr(p)?Gs(-1,p):_e(p)}}if(32&a)return du(i,e)()||_e(e[i.index]);{const u=Yi(e,i);return null!==u?Array.isArray(u)?u[0]:qr(Ua(e[16]),u):qr(e,i.next)}}return null}function Yi(e,i){return null!==i?e[16][6].projection[i.projection]:null}function Gs(e,i){const a=10+e+1;if(a<i.length){const u=i[a],p=u[1].firstChild;if(null!==p)return qr(u,p)}return i[7]}function Zs(e,i,a,u,p,y,T){for(;null!=a;){const D=u[a.index],F=a.type;if(T&&0===i&&(D&&Ni(_e(D),u),a.flags|=4),64!=(64&a.flags))if(8&F)Zs(e,i,a.child,u,p,y,!1),Lu(i,e,p,D,y);else if(32&F){const q=du(a,u);let ne;for(;ne=q();)Lu(i,e,p,ne,y);Lu(i,e,p,D,y)}else 16&F?Nf(e,i,u,a,p,y):Lu(i,e,p,D,y);a=T?a.projectionNext:a.next}}function Io(e,i,a,u,p,y){Zs(a,u,e.firstChild,i,p,y,!1)}function Nf(e,i,a,u,p,y){const T=a[16],F=T[6].projection[u.projection];if(Array.isArray(F))for(let q=0;q<F.length;q++)Lu(i,e,p,F[q],y);else Zs(e,i,F,T[3],p,y,!0)}function og(e,i,a){P(e)?e.setAttribute(i,"style",a):i.style.cssText=a}function Lf(e,i,a){P(e)?""===a?e.removeAttribute(i,"class"):e.setAttribute(i,"class",a):i.className=a}function sg(e,i,a){let u=e.length;for(;;){const p=e.indexOf(i,a);if(-1===p)return p;if(0===p||e.charCodeAt(p-1)<=32){const y=i.length;if(p+y===u||e.charCodeAt(p+y)<=32)return p}a=p+1}}const ds="ng-template";function n_(e,i,a){let u=0;for(;u<e.length;){let p=e[u++];if(a&&"class"===p){if(p=e[u],-1!==sg(p.toLowerCase(),i,0))return!0}else if(1===p){for(;u<e.length&&"string"==typeof(p=e[u++]);)if(p.toLowerCase()===i)return!0;return!1}}return!1}function ug(e){return 4===e.type&&e.value!==ds}function r_(e,i,a){return i===(4!==e.type||a?e.value:ds)}function i_(e,i,a){let u=4;const p=e.attrs||[],y=function(e){for(let i=0;i<e.length;i++)if(Zu(e[i]))return i;return e.length}(p);let T=!1;for(let D=0;D<i.length;D++){const F=i[D];if("number"!=typeof F){if(!T)if(4&u){if(u=2|1&u,""!==F&&!r_(e,F,a)||""===F&&1===i.length){if(Uu(u))return!1;T=!0}}else{const q=8&u?F:i[++D];if(8&u&&null!==e.attrs){if(!n_(e.attrs,q,a)){if(Uu(u))return!1;T=!0}continue}const ge=o_(8&u?"class":F,p,ug(e),a);if(-1===ge){if(Uu(u))return!1;T=!0;continue}if(""!==q){let be;be=ge>y?"":p[ge+1].toLowerCase();const Ne=8&u?be:null;if(Ne&&-1!==sg(Ne,q,0)||2&u&&q!==be){if(Uu(u))return!1;T=!0}}}}else{if(!T&&!Uu(u)&&!Uu(F))return!1;if(T&&Uu(F))continue;T=!1,u=F|1&u}}return Uu(u)||T}function Uu(e){return 0==(1&e)}function o_(e,i,a,u){if(null===i)return-1;let p=0;if(u||!a){let y=!1;for(;p<i.length;){const T=i[p];if(T===e)return p;if(3===T||6===T)y=!0;else{if(1===T||2===T){let D=i[++p];for(;"string"==typeof D;)D=i[++p];continue}if(4===T)break;if(0===T){p+=4;continue}}p+=y?1:2}return-1}return function(e,i){let a=e.indexOf(4);if(a>-1)for(a++;a<e.length;){const u=e[a];if("number"==typeof u)return-1;if(u===i)return a;a++}return-1}(i,e)}function lg(e,i,a=!1){for(let u=0;u<i.length;u++)if(i_(e,i[u],a))return!0;return!1}function Uf(e,i){e:for(let a=0;a<i.length;a++){const u=i[a];if(e.length===u.length){for(let p=0;p<e.length;p++)if(e[p]!==u[p])continue e;return!0}}return!1}function Vf(e,i){return e?":not("+i.trim()+")":i}function Bf(e){let i=e[0],a=1,u=2,p="",y=!1;for(;a<e.length;){let T=e[a];if("string"==typeof T)if(2&u){const D=e[++a];p+="["+T+(D.length>0?'="'+D+'"':"")+"]"}else 8&u?p+="."+T:4&u&&(p+=" "+T);else""!==p&&!Uu(T)&&(i+=Vf(y,p),p=""),u=T,y=y||!Uu(u);a++}return""!==p&&(i+=Vf(y,p)),i}const Cr={};function Zh(e){jf(br(),Ft(),yi()+e,se())}function jf(e,i,a,u){if(!u)if(3==(3&i[2])){const y=e.preOrderCheckHooks;null!==y&&qi(i,y,a)}else{const y=e.preOrderHooks;null!==y&&ii(i,y,0,a)}no(a)}function qh(e,i){return e<<17|i<<2}function fu(e){return e>>17&32767}function Hf(e){return 2|e}function al(e){return(131068&e)>>2}function Ud(e,i){return-131069&e|i<<2}function yh(e){return 1|e}function Jh(e,i){const a=e.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const p=a[u],y=a[u+1];if(-1!==y){const T=e.data[y];ei(p),T.contentQueries(2,i[y],y)}}}function jd(e,i,a,u,p,y,T,D,F,q){const ne=i.blueprint.slice();return ne[0]=p,ne[2]=140|u,Gr(ne),ne[3]=ne[15]=e,ne[8]=a,ne[10]=T||e&&e[10],ne[11]=D||e&&e[11],ne[12]=F||e&&e[12]||null,ne[9]=q||e&&e[9]||null,ne[6]=y,ne[16]=2==i.type?e[16]:ne,ne}function Hd(e,i,a,u,p){let y=e.data[i];if(null===y)y=function(e,i,a,u,p){const y=xs(),T=oe(),F=e.data[i]=function(e,i,a,u,p,y){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?y:y&&y.parent,a,i,u,p);return null===e.firstChild&&(e.firstChild=F),null!==y&&(T?null==y.child&&null!==F.parent&&(y.child=F):null===y.next&&(y.next=F)),F}(e,i,a,u,p),Dn.lFrame.inI18n&&(y.flags|=64);else if(64&y.type){y.type=a,y.value=u,y.attrs=p;const T=function(){const e=Dn.lFrame,i=e.currentTNode;return e.isParent?i:i.parent}();y.injectorIndex=null===T?-1:T.injectorIndex}return Qo(y,!0),y}function Xc(e,i,a,u){if(0===a)return-1;const p=i.length;for(let y=0;y<a;y++)i.push(u),e.blueprint.push(u),e.data.push(null);return p}function Gd(e,i,a){So(i);try{const u=e.viewQuery;null!==u&&qd(1,u,a);const p=e.template;null!==p&&wg(e,i,p,1,a),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Jh(e,i),e.staticViewQueries&&qd(2,e.viewQuery,a);const y=e.components;null!==y&&function(e,i){for(let a=0;a<i.length;a++)rp(e,i[a])}(i,y)}catch(u){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),u}finally{i[2]&=-5,to()}}function ed(e,i,a,u){const p=i[2];if(256==(256&p))return;So(i);const y=se();try{Gr(i),function(e){Dn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==a&&wg(e,i,a,2,u);const T=3==(3&p);if(!y)if(T){const q=e.preOrderCheckHooks;null!==q&&qi(i,q,null)}else{const q=e.preOrderHooks;null!==q&&ii(i,q,0,null),Rs(i,0)}if(function(e){for(let i=dc(e);null!==i;i=il(i)){if(!i[2])continue;const a=i[9];for(let u=0;u<a.length;u++){const p=a[u],y=p[3];0==(1024&p[2])&&_i(y,1),p[2]|=1024}}}(i),function(e){for(let i=dc(e);null!==i;i=il(i))for(let a=10;a<i.length;a++){const u=i[a],p=u[1];pr(u)&&ed(p,u,p.template,u[8])}}(i),null!==e.contentQueries&&Jh(e,i),!y)if(T){const q=e.contentCheckHooks;null!==q&&qi(i,q)}else{const q=e.contentHooks;null!==q&&ii(i,q,1),Rs(i,1)}!function(e,i){const a=e.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const p=a[u];if(p<0)no(~p);else{const y=p,T=a[++u],D=a[++u];Rr(T,y),D(2,i[y])}}}finally{no(-1)}}(e,i);const D=e.components;null!==D&&function(e,i){for(let a=0;a<i.length;a++)Vg(e,i[a])}(i,D);const F=e.viewQuery;if(null!==F&&qd(2,F,u),!y)if(T){const q=e.viewCheckHooks;null!==q&&qi(i,q)}else{const q=e.viewHooks;null!==q&&ii(i,q,2),Rs(i,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),y||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,_i(i[3],-1))}finally{to()}}function p_(e,i,a,u){const p=i[10],y=!se(),T=En(i);try{y&&!T&&p.begin&&p.begin(),T&&Gd(e,i,u),ed(e,i,a,u)}finally{y&&!T&&p.end&&p.end()}}function wg(e,i,a,u,p){const y=yi(),T=2&u;try{no(-1),T&&i.length>20&&jf(e,i,20,se()),a(u,p)}finally{no(y)}}function Eg(e,i,a){if(Ui(i)){const p=i.directiveEnd;for(let y=i.directiveStart;y<p;y++){const T=e.data[y];T.contentQueries&&T.contentQueries(1,a[y],y)}}}function Yf(e,i,a){!Gu()||(function(e,i,a,u){const p=a.directiveStart,y=a.directiveEnd;e.firstCreatePass||Jo(a,i),Ni(u,i);const T=a.initialInputs;for(let D=p;D<y;D++){const F=e.data[D],q=Gi(F);q&&Ng(i,a,F);const ne=z(i,e,D,a);Ni(ne,i),null!==T&&Lg(0,D-p,ne,F,0,T),q&&(Pt(a.index,i)[8]=ne)}}(e,i,a,j(a,i)),128==(128&a.flags)&&function(e,i,a){const u=a.directiveStart,p=a.directiveEnd,T=a.index,D=Dn.lFrame.currentDirectiveIndex;try{no(T);for(let F=u;F<p;F++){const q=e.data[F],ne=i[F];Fn(F),(null!==q.hostBindings||0!==q.hostVars||null!==q.hostAttrs)&&Rg(q,ne)}}finally{no(-1),Fn(D)}}(e,i,a))}function wh(e,i,a=j){const u=i.localNames;if(null!==u){let p=i.index+1;for(let y=0;y<u.length;y+=2){const T=u[y+1],D=-1===T?a(i,e):e[T];e[p++]=D}}}function Tg(e){const i=e.tView;return null===i||i.incompleteFirstPass?e.tView=ef(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):i}function ef(e,i,a,u,p,y,T,D,F,q){const ne=20+u,ge=ne+p,be=function(e,i){const a=[];for(let u=0;u<i;u++)a.push(u<e?null:Cr);return a}(ne,ge),Ne="function"==typeof q?q():q;return be[1]={type:e,blueprint:be,template:a,queries:null,viewQuery:D,declTNode:i,data:be.slice().fill(null,ne),bindingStartIndex:ne,expandoStartIndex:ge,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:F,consts:Ne,incompleteFirstPass:!1}}function Ag(e,i,a,u){const p=op(i);null===a?p.push(u):(p.push(a),e.firstCreatePass&&Gg(e).push(u,p.length-1))}function tf(e,i,a){for(let u in e)if(e.hasOwnProperty(u)){const p=e[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(i,p):a[u]=[i,p]}return a}function _a(e,i,a,u,p,y,T,D){const F=j(i,a);let ne,q=i.inputs;!D&&null!=q&&(ne=q[u])?(zg(e,a,ne,u,p),ni(i)&&function(e,i){const a=Pt(i,e);16&a[2]||(a[2]|=64)}(a,i.index)):3&i.type&&(u=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(u),p=null!=T?T(p,i.value||"",u):p,P(y)?y.setProperty(F,u,p):$a(u)||(F.setProperty?F.setProperty(u,p):F[u]=p))}function Xf(e,i,a,u){let p=!1;if(Gu()){const y=function(e,i,a){const u=e.directiveRegistry;let p=null;if(u)for(let y=0;y<u.length;y++){const T=u[y];lg(a,T.selectors,!1)&&(p||(p=[]),on(Jo(a,i),e,T.type),Gi(T)?(kg(e,a),p.unshift(T)):p.push(T))}return p}(e,i,a),T=null===u?null:{"":-1};if(null!==y){p=!0,Fg(a,e.data.length,y.length);for(let ne=0;ne<y.length;ne++){const ge=y[ne];ge.providersResolver&&ge.providersResolver(ge)}let D=!1,F=!1,q=Xc(e,i,y.length,null);for(let ne=0;ne<y.length;ne++){const ge=y[ne];a.mergedAttrs=ia(a.mergedAttrs,ge.hostAttrs),np(e,a,i,q,ge),tp(q,ge,T),null!==ge.contentQueries&&(a.flags|=8),(null!==ge.hostBindings||null!==ge.hostAttrs||0!==ge.hostVars)&&(a.flags|=128);const be=ge.type.prototype;!D&&(be.ngOnChanges||be.ngOnInit||be.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(a.index),D=!0),!F&&(be.ngOnChanges||be.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(a.index),F=!0),q++}!function(e,i){const u=i.directiveEnd,p=e.data,y=i.attrs,T=[];let D=null,F=null;for(let q=i.directiveStart;q<u;q++){const ne=p[q],ge=ne.inputs,be=null===y||ug(i)?null:nf(ge,y);T.push(be),D=tf(ge,q,D),F=tf(ne.outputs,q,F)}null!==D&&(D.hasOwnProperty("class")&&(i.flags|=16),D.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=T,i.inputs=D,i.outputs=F}(e,a)}T&&function(e,i,a){if(i){const u=e.localNames=[];for(let p=0;p<i.length;p+=2){const y=a[i[p+1]];if(null==y)throw new xe("301",`Export of name '${i[p+1]}' not found!`);u.push(i[p],y)}}}(a,u,T)}return a.mergedAttrs=ia(a.mergedAttrs,a.attrs),p}function Og(e,i,a,u,p,y){const T=y.hostBindings;if(T){let D=e.hostBindingOpCodes;null===D&&(D=e.hostBindingOpCodes=[]);const F=~i.index;(function(e){let i=e.length;for(;i>0;){const a=e[--i];if("number"==typeof a&&a<0)return a}return 0})(D)!=F&&D.push(F),D.push(u,p,T)}}function Rg(e,i){null!==e.hostBindings&&e.hostBindings(1,i)}function kg(e,i){i.flags|=2,(e.components||(e.components=[])).push(i.index)}function tp(e,i,a){if(a){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)a[i.exportAs[u]]=e;Gi(i)&&(a[""]=e)}}function Fg(e,i,a){e.flags|=1,e.directiveStart=i,e.directiveEnd=i+a,e.providerIndexes=i}function np(e,i,a,u,p){e.data[u]=p;const y=p.factory||(p.factory=he(p.type)),T=new oi(y,Gi(p),null);e.blueprint[u]=T,a[u]=T,Og(e,i,0,u,Xc(e,a,p.hostVars,Cr),p)}function Ng(e,i,a){const u=j(i,e),p=Tg(a),y=e[10],T=Th(e,jd(e,p,null,a.onPush?64:16,u,i,y,y.createRenderer(u,a),null,null));e[i.index]=T}function ll(e,i,a,u,p,y){const T=j(e,i);!function(e,i,a,u,p,y,T){if(null==y)P(e)?e.removeAttribute(i,p,a):i.removeAttribute(p);else{const D=null==T?Re(y):T(y,u||"",p);P(e)?e.setAttribute(i,p,D,a):a?i.setAttributeNS(a,p,D):i.setAttribute(p,D)}}(i[11],T,y,e.value,a,u,p)}function Lg(e,i,a,u,p,y){const T=y[i];if(null!==T){const D=u.setInput;for(let F=0;F<T.length;){const q=T[F++],ne=T[F++],ge=T[F++];null!==D?u.setInput(a,ge,q,ne):a[ne]=ge}}}function nf(e,i){let a=null,u=0;for(;u<i.length;){const p=i[u];if(0!==p)if(5!==p){if("number"==typeof p)break;e.hasOwnProperty(p)&&(null===a&&(a=[]),a.push(p,e[p],i[u+1])),u+=2}else u+=2;else u+=4}return a}function Ug(e,i,a,u){return new Array(e,!0,!1,i,null,0,u,a,null,null)}function Vg(e,i){const a=Pt(i,e);if(pr(a)){const u=a[1];80&a[2]?ed(u,a,u.template,a[8]):a[5]>0&&rf(a)}}function rf(e){for(let u=dc(e);null!==u;u=il(u))for(let p=10;p<u.length;p++){const y=u[p];if(1024&y[2]){const T=y[1];ed(T,y,T.template,y[8])}else y[5]>0&&rf(y)}const a=e[1].components;if(null!==a)for(let u=0;u<a.length;u++){const p=Pt(a[u],e);pr(p)&&p[5]>0&&rf(p)}}function rp(e,i){const a=Pt(i,e),u=a[1];(function(e,i){for(let a=i.length;a<e.blueprint.length;a++)i.push(e.blueprint[a])})(u,a),Gd(u,a,a[8])}function Th(e,i){return e[13]?e[14][4]=i:e[13]=i,e[14]=i,i}function Dh(e){for(;e;){e[2]|=64;const i=Ua(e);if(ai(e)&&!i)return e;e=i}return null}function vc(e,i,a){const u=i[10];u.begin&&u.begin();try{ed(e,i,e.template,a)}catch(p){throw qg(i,p),p}finally{u.end&&u.end()}}function ip(e){!function(e){for(let i=0;i<e.components.length;i++){const a=e.components[i],u=wo(a),p=u[1];p_(p,u,p.template,a)}}(e[8])}function qd(e,i,a){ei(0),i(e,a)}const Hg=(()=>Promise.resolve(null))();function op(e){return e[7]||(e[7]=[])}function Gg(e){return e.cleanup||(e.cleanup=[])}function qg(e,i){const a=e[9],u=a?a.get(tl,null):null;u&&u.handleError(i)}function zg(e,i,a,u,p){for(let y=0;y<a.length;){const T=a[y++],D=a[y++],F=i[T],q=e.data[T];null!==q.setInput?q.setInput(F,p,u,D):F[D]=p}}function Vu(e,i,a){const u=H(i,e);!function(e,i,a){P(e)?e.setValue(i,a):i.textContent=a}(e[11],u,a)}function zd(e,i,a){let u=a?e.styles:null,p=a?e.classes:null,y=0;if(null!==i)for(let T=0;T<i.length;T++){const D=i[T];"number"==typeof D?y=D:1==y?p=Ce(p,D):2==y&&(u=Ce(u,D+": "+i[++T]+";"))}a?e.styles=u:e.stylesWithoutHost=u,a?e.classes=p:e.classesWithoutHost=p}const Ll=new Ti("INJECTOR",-1);class Ci{get(i,a=tu){if(a===tu){const u=new Error(`NullInjectorError: No provider for ${fe(i)}!`);throw u.name="NullInjectorError",u}return a}}const $d=new Ti("Set Injector scope."),Wd={},Ah={};let ho;function ea(){return void 0===ho&&(ho=new Ci),ho}function sp(e,i=null,a=null,u){return new sf(e,a,i||ea(),u)}class sf{constructor(i,a,u,p=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const y=[];a&&yo(a,D=>this.processProvider(D,i,a)),yo([i],D=>this.processInjectorType(D,[],y)),this.records.set(Ll,Yd(void 0,this));const T=this.records.get($d);this.scope=null!=T?T.value:null,this.source=p||("object"==typeof i?null:fe(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,a=tu,u=Qt.Default){this.assertNotDestroyed();const p=la(this),y=Kn(void 0);try{if(!(u&Qt.SkipSelf)){let D=this.records.get(i);if(void 0===D){const F=("function"==typeof(e=i)||"object"==typeof e&&e instanceof Ti)&&qn(i);D=F&&this.injectableDefInScope(F)?Yd(af(i),Wd):null,this.records.set(i,D)}if(null!=D)return this.hydrate(i,D)}return(u&Qt.Self?ea():this.parent).get(i,a=u&Qt.Optional&&a===tu?null:a)}catch(T){if("NullInjectorError"===T.name){if((T[ko]=T[ko]||[]).unshift(fe(i)),p)throw T;return nu(T,i,"R3InjectorError",this.source)}throw T}finally{Kn(y),la(p)}var e}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,p)=>i.push(fe(p))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,a,u){if(!(i=pe(i)))return!1;let p=Si(i);const y=null==p&&i.ngModule||void 0,T=void 0===y?i:y,D=-1!==u.indexOf(T);if(void 0!==y&&(p=Si(y)),null==p)return!1;if(null!=p.imports&&!D){let ne;u.push(T);try{yo(p.imports,ge=>{this.processInjectorType(ge,a,u)&&(void 0===ne&&(ne=[]),ne.push(ge))})}finally{}if(void 0!==ne)for(let ge=0;ge<ne.length;ge++){const{ngModule:be,providers:Ne}=ne[ge];yo(Ne,Ye=>this.processProvider(Ye,be,Ne||Se))}}this.injectorDefTypes.add(T);const F=he(T)||(()=>new T);this.records.set(T,Yd(F,Wd));const q=p.providers;if(null!=q&&!D){const ne=i;yo(q,ge=>this.processProvider(ge,ne,q))}return void 0!==y&&void 0!==i.providers}processProvider(i,a,u){let p=nd(i=pe(i))?i:pe(i&&i.provide);const y=Kg(e=i)?Yd(void 0,e.useValue):Yd(td(e),Wd);var e;if(nd(i)||!0!==i.multi)this.records.get(p);else{let T=this.records.get(p);T||(T=Yd(void 0,Wd,!0),T.factory=()=>Ma(T.multi),this.records.set(p,T)),p=i,T.multi.push(i)}this.records.set(p,y)}hydrate(i,a){return a.value===Wd&&(a.value=Ah,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(e=a.value)&&"object"==typeof e&&"function"==typeof e.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var e}injectableDefInScope(i){if(!i.providedIn)return!1;const a=pe(i.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function af(e){const i=qn(e),a=null!==i?i.factory:he(e);if(null!==a)return a;if(e instanceof Ti)throw new Error(`Token ${fe(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const i=e.length;if(i>0){const u=eu(i,"?");throw new Error(`Can't resolve all parameters for ${fe(e)}: (${u.join(", ")}).`)}const a=function(e){const i=e&&(e[vn]||e[zn]);if(i){const a=function(e){if(e.hasOwnProperty("name"))return e.name;const i=(""+e).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),i}return null}(e);return null!==a?()=>a.factory(e):()=>new e}(e);throw new Error("unreachable")}function td(e,i,a){let u;if(nd(e)){const p=pe(e);return he(p)||af(p)}if(Kg(e))u=()=>pe(e.useValue);else if(function(e){return!(!e||!e.useFactory)}(e))u=()=>e.useFactory(...Ma(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))u=()=>Di(pe(e.useExisting));else{const p=pe(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return he(p)||af(p);u=()=>new p(...Ma(e.deps))}return u}function Yd(e,i,a=!1){return{factory:e,value:i,multi:a?[]:void 0}}function Kg(e){return null!==e&&"object"==typeof e&&Eu in e}function nd(e){return"function"==typeof e}const Xg=function(e,i,a){return function(e,i=null,a=null,u){const p=sp(e,i,a,u);return p._resolveInjectorDefTypes(),p}({name:a},i,e,a)};let Eo=(()=>{class e{static create(a,u){return Array.isArray(a)?Xg(a,u,""):Xg(a.providers,a.parent,a.name||"")}}return e.THROW_IF_NOT_FOUND=tu,e.NULL=new Ci,e.\u0275prov=Tn({token:e,providedIn:"any",factory:()=>Di(Ll)}),e.__NG_ELEMENT_ID__=-1,e})();function am(e,i){Zi(wo(e)[1],ji())}function eh(e){let i=function(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),a=!0;const u=[e];for(;i;){let p;if(Gi(e))p=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Error("Directives cannot inherit Components");p=i.\u0275dir}if(p){if(a){u.push(p);const T=e;T.inputs=bp(e.inputs),T.declaredInputs=bp(e.declaredInputs),T.outputs=bp(e.outputs);const D=p.hostBindings;D&&um(e,D);const F=p.viewQuery,q=p.contentQueries;if(F&&bc(e,F),q&&ad(e,q),ke(e.inputs,p.inputs),ke(e.declaredInputs,p.declaredInputs),ke(e.outputs,p.outputs),Gi(p)&&p.data.animation){const ne=e.data;ne.animation=(ne.animation||[]).concat(p.data.animation)}}const y=p.features;if(y)for(let T=0;T<y.length;T++){const D=y[T];D&&D.ngInherit&&D(e),D===eh&&(a=!1)}}i=Object.getPrototypeOf(i)}!function(e){let i=0,a=null;for(let u=e.length-1;u>=0;u--){const p=e[u];p.hostVars=i+=p.hostVars,p.hostAttrs=ia(p.hostAttrs,a=ia(a,p.hostAttrs))}}(u)}function bp(e){return e===Zt?{}:e===Se?[]:e}function bc(e,i){const a=e.viewQuery;e.viewQuery=a?(u,p)=>{i(u,p),a(u,p)}:i}function ad(e,i){const a=e.contentQueries;e.contentQueries=a?(u,p,y)=>{i(u,p,y),a(u,p,y)}:i}function um(e,i){const a=e.hostBindings;e.hostBindings=a?(u,p)=>{i(u,p),a(u,p)}:i}let gf=null;function ud(){if(!gf){const e=Ut.Symbol;if(e&&e.iterator)gf=e.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<i.length;++a){const u=i[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(gf=u)}}}return gf}class pu{constructor(i){this.wrapped=i}static wrap(i){return new pu(i)}static unwrap(i){return pu.isWrapped(i)?i.wrapped:i}static isWrapped(i){return i instanceof pu}}function Oh(e){return!!Ep(e)&&(Array.isArray(e)||!(e instanceof Map)&&ud()in e)}function Ep(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ju(e,i,a){return e[i]=a}function hs(e,i,a){return!Object.is(e[i],a)&&(e[i]=a,!0)}function ja(e,i,a,u){const p=hs(e,i,a);return hs(e,i+1,u)||p}function _f(e,i,a,u){const p=Ft();return hs(p,mt(),i)&&(br(),ll(bi(),p,e,i,a,u)),_f}function fl(e,i,a,u){return hs(e,mt(),a)?i+Re(a)+u:Cr}function xh(e,i,a,u,p,y,T,D){const F=Ft(),q=br(),ne=e+20,ge=q.firstCreatePass?function(e,i,a,u,p,y,T,D,F){const q=i.consts,ne=Hd(i,e,4,T||null,_r(q,D));Xf(i,a,ne,_r(q,F)),Zi(i,ne);const ge=ne.tViews=ef(2,ne,u,p,y,i.directiveRegistry,i.pipeRegistry,null,i.schemas,q);return null!==i.queries&&(i.queries.template(i,ne),ge.queries=i.queries.embeddedTView(ne)),ne}(ne,q,F,i,a,u,p,y,T):q.data[ne];Qo(ge,!1);const be=F[11].createComment("");Gn(q,F,be,ge),Ni(be,F),Th(F,F[ne]=Ug(be,F,be,ge)),Vi(ge)&&Yf(q,F,ge),null!=T&&wh(F,ge,D)}function _m(e){return ze(Dn.lFrame.contextLView,20+e)}function xp(e,i=Qt.Default){const a=Ft();return null===a?Di(e,i):Qa(ji(),a,pe(e),i)}function B_(e,i,a){const u=Ft();return hs(u,mt(),i)&&_a(br(),bi(),u,e,i,u[11],a,!1),B_}function j_(e,i,a,u,p){const T=p?"class":"style";zg(e,a,i.inputs[T],T,u)}function H_(e,i,a,u){const p=Ft(),y=br(),T=20+e,D=p[11],F=p[T]=kd(D,i,Dn.lFrame.currentNamespace),q=y.firstCreatePass?function(e,i,a,u,p,y,T){const D=i.consts,q=Hd(i,e,2,p,_r(D,y));return Xf(i,a,q,_r(D,T)),null!==q.attrs&&zd(q,q.attrs,!1),null!==q.mergedAttrs&&zd(q,q.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,q),q}(T,y,p,0,i,a,u):y.data[T];Qo(q,!0);const ne=q.mergedAttrs;null!==ne&&ra(D,F,ne);const ge=q.classes;null!==ge&&Lf(D,F,ge);const be=q.styles;null!==be&&og(D,F,be),64!=(64&q.flags)&&Gn(y,p,F,q),0===Dn.lFrame.elementDepthCount&&Ni(F,p),Dn.lFrame.elementDepthCount++,Vi(q)&&(Yf(y,p,q),Eg(y,q,p)),null!==u&&wh(p,q)}function G_(){let e=ji();oe()?A():(e=e.parent,Qo(e,!1));const i=e;Dn.lFrame.elementDepthCount--;const a=br();a.firstCreatePass&&(Zi(a,e),Ui(e)&&a.queries.elementEnd(e)),null!=i.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(i)&&j_(a,i,Ft(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(i)&&j_(a,i,Ft(),i.stylesWithoutHost,!1)}function Iy(e,i,a,u){H_(e,i,a,u),G_()}function Z_(e,i,a){const u=Ft(),p=br(),y=e+20,T=p.firstCreatePass?function(e,i,a,u,p){const y=i.consts,T=_r(y,u),D=Hd(i,e,8,"ng-container",T);return null!==T&&zd(D,T,!0),Xf(i,a,D,_r(y,p)),null!==i.queries&&i.queries.elementStart(i,D),D}(y,p,u,i,a):p.data[y];Qo(T,!0);const D=u[y]=u[11].createComment("");Gn(p,u,D,T),Ni(D,u),Vi(T)&&(Yf(p,u,T),Eg(p,T,u)),null!=a&&wh(u,T)}function q_(){let e=ji();const i=br();oe()?A():(e=e.parent,Qo(e,!1)),i.firstCreatePass&&(Zi(i,e),Ui(e)&&i.queries.elementEnd(e))}function Oy(){return Ft()}function z_(e){return!!e&&"function"==typeof e.then}function xy(e){return!!e&&"function"==typeof e.subscribe}const $_=xy;function W_(e,i,a,u){const p=Ft(),y=br(),T=ji();return function(e,i,a,u,p,y,T,D){const F=Vi(u),ne=e.firstCreatePass&&Gg(e),ge=i[8],be=op(i);let Ne=!0;if(3&u.type||D){const ft=j(u,i),Wt=D?D(ft):ft,kt=be.length,rr=D?wr=>D(_e(wr[u.index])):u.index;if(P(a)){let wr=null;if(!D&&F&&(wr=function(e,i,a,u){const p=e.cleanup;if(null!=p)for(let y=0;y<p.length-1;y+=2){const T=p[y];if(T===a&&p[y+1]===u){const D=i[7],F=p[y+2];return D.length>F?D[F]:null}"string"==typeof T&&(y+=2)}return null}(e,i,p,u.index)),null!==wr)(wr.__ngLastListenerFn__||wr).__ngNextListenerFn__=y,wr.__ngLastListenerFn__=y,Ne=!1;else{y=Y_(u,i,ge,y,!1);const gi=a.listen(Wt,p,y);be.push(y,gi),ne&&ne.push(p,rr,kt,kt+1)}}else y=Y_(u,i,ge,y,!0),Wt.addEventListener(p,y,T),be.push(y),ne&&ne.push(p,rr,kt,T)}else y=Y_(u,i,ge,y,!1);const Ye=u.outputs;let Ct;if(Ne&&null!==Ye&&(Ct=Ye[p])){const ft=Ct.length;if(ft)for(let Wt=0;Wt<ft;Wt+=2){const Os=i[Ct[Wt]][Ct[Wt+1]].subscribe(y),_l=be.length;be.push(y,Os),ne&&ne.push(p,u.index,_l,-(_l+1))}}}(y,p,p[11],T,e,i,!!a,u),W_}function ky(e,i,a,u){try{return!1!==a(u)}catch(p){return qg(e,p),!1}}function Y_(e,i,a,u,p){return function y(T){if(T===Function)return u;const D=2&e.flags?Pt(e.index,i):i;0==(32&i[2])&&Dh(D);let F=ky(i,0,u,T),q=y.__ngNextListenerFn__;for(;q;)F=ky(i,0,q,T)&&F,q=q.__ngNextListenerFn__;return p&&!1===F&&(T.preventDefault(),T.returnValue=!1),F}}function Fy(e=1){return function(e){return(Dn.lFrame.contextLView=function(e,i){for(;e>0;)i=i[15],e--;return i}(e,Dn.lFrame.contextLView))[8]}(e)}function Cw(e,i){let a=null;const u=function(e){const i=e.attrs;if(null!=i){const a=i.indexOf(5);if(0==(1&a))return i[a+1]}return null}(e);for(let p=0;p<i.length;p++){const y=i[p];if("*"!==y){if(null===u?lg(e,y,!0):Uf(u,y))return p}else a=p}return a}function Ny(e){const i=Ft()[16][6];if(!i.projection){const u=i.projection=eu(e?e.length:1,null),p=u.slice();let y=i.child;for(;null!==y;){const T=e?Cw(y,e):0;null!==T&&(p[T]?p[T].projectionNext=y:u[T]=y,p[T]=y),y=y.next}}}function Ly(e,i=0,a){const u=Ft(),p=br(),y=Hd(p,20+e,16,null,a||null);null===y.projection&&(y.projection=i),A(),64!=(64&y.flags)&&function(e,i,a){Nf(i[11],0,i,a,m(e,a,i),Oe(a.parent||i[6],a,i))}(p,u,y)}function $y(e,i,a,u,p){const y=e[a+1],T=null===i;let D=u?fu(y):al(y),F=!1;for(;0!==D&&(!1===F||T);){const ne=e[D+1];Tw(e[D],i)&&(F=!0,e[D+1]=u?yh(ne):Hf(ne)),D=u?fu(ne):al(ne)}F&&(e[a+1]=u?Hf(y):yh(y))}function Tw(e,i){return null===e||null==i||(Array.isArray(e)?e[1]:e)===i||!(!Array.isArray(e)||"string"!=typeof i)&&aa(e,i)>=0}const Is={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Wy(e){return e.substring(Is.key,Is.keyEnd)}function Yy(e,i){const a=Is.textEnd;return a===i?-1:(i=Is.keyEnd=function(e,i,a){for(;i<a&&e.charCodeAt(i)>32;)i++;return i}(e,Is.key=i,a),yf(e,i,a))}function yf(e,i,a){for(;i<a&&e.charCodeAt(i)<=32;)i++;return i}function Q_(e,i,a){return Hl(e,i,a,!1),Q_}function J_(e,i){return Hl(e,i,null,!0),J_}function Ec(e,i){for(let a=function(e){return function(e){Is.key=0,Is.keyEnd=0,Is.value=0,Is.valueEnd=0,Is.textEnd=e.length}(e),Yy(e,yf(e,0,Is.textEnd))}(i);a>=0;a=Yy(i,a))Es(e,Wy(i),!0)}function Hl(e,i,a,u){const p=Ft(),y=br(),T=Ht(2);y.firstUpdatePass&&tb(y,e,T,u),i!==Cr&&hs(p,T,i)&&rb(y,y.data[yi()],p,p[11],e,p[T+1]=function(e,i){return null==e||("string"==typeof i?e+=i:"object"==typeof e&&(e=fe(Lr(e)))),e}(i,a),u,T)}function eb(e,i){return i>=e.expandoStartIndex}function tb(e,i,a,u){const p=e.data;if(null===p[a+1]){const y=p[yi()],T=eb(e,a);ob(y,u)&&null===i&&!T&&(i=!1),i=function(e,i,a,u){const p=function(e){const i=Dn.lFrame.currentDirectiveIndex;return-1===i?null:e[i]}(e);let y=u?i.residualClasses:i.residualStyles;if(null===p)0===(u?i.classBindings:i.styleBindings)&&(a=Pp(a=X_(null,e,i,a,u),i.attrs,u),y=null);else{const T=i.directiveStylingLast;if(-1===T||e[T]!==p)if(a=X_(p,e,i,a,u),null===y){let F=function(e,i,a){const u=a?i.classBindings:i.styleBindings;if(0!==al(u))return e[fu(u)]}(e,i,u);void 0!==F&&Array.isArray(F)&&(F=X_(null,e,i,F[1],u),F=Pp(F,i.attrs,u),function(e,i,a,u){e[fu(a?i.classBindings:i.styleBindings)]=u}(e,i,u,F))}else y=function(e,i,a){let u;const p=i.directiveEnd;for(let y=1+i.directiveStylingLast;y<p;y++)u=Pp(u,e[y].hostAttrs,a);return Pp(u,i.attrs,a)}(e,i,u)}return void 0!==y&&(u?i.residualClasses=y:i.residualStyles=y),a}(p,y,i,u),function(e,i,a,u,p,y){let T=y?i.classBindings:i.styleBindings,D=fu(T),F=al(T);e[u]=a;let ne,q=!1;if(Array.isArray(a)){const ge=a;ne=ge[1],(null===ne||aa(ge,ne)>0)&&(q=!0)}else ne=a;if(p)if(0!==F){const be=fu(e[D+1]);e[u+1]=qh(be,D),0!==be&&(e[be+1]=Ud(e[be+1],u)),e[D+1]=function(e,i){return 131071&e|i<<17}(e[D+1],u)}else e[u+1]=qh(D,0),0!==D&&(e[D+1]=Ud(e[D+1],u)),D=u;else e[u+1]=qh(F,0),0===D?D=u:e[F+1]=Ud(e[F+1],u),F=u;q&&(e[u+1]=Hf(e[u+1])),$y(e,ne,u,!0),$y(e,ne,u,!1),function(e,i,a,u,p){const y=p?e.residualClasses:e.residualStyles;null!=y&&"string"==typeof i&&aa(y,i)>=0&&(a[u+1]=yh(a[u+1]))}(i,ne,e,u,y),T=qh(D,F),y?i.classBindings=T:i.styleBindings=T}(p,y,i,a,T,u)}}function X_(e,i,a,u,p){let y=null;const T=a.directiveEnd;let D=a.directiveStylingLast;for(-1===D?D=a.directiveStart:D++;D<T&&(y=i[D],u=Pp(u,y.hostAttrs,p),y!==e);)D++;return null!==e&&(a.directiveStylingLast=D),u}function Pp(e,i,a){const u=a?1:2;let p=-1;if(null!==i)for(let y=0;y<i.length;y++){const T=i[y];"number"==typeof T?p=T:p===u&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Es(e,T,!!a||i[++y]))}return void 0===e?null:e}function rb(e,i,a,u,p,y,T,D){if(!(3&i.type))return;const F=e.data,q=F[D+1];Tm(function(e){return 1==(1&e)}(q)?ib(F,i,a,p,al(q),T):void 0)||(Tm(y)||function(e){return 2==(2&e)}(q)&&(y=ib(F,null,a,p,D,T)),function(e,i,a,u,p){const y=P(e);if(i)p?y?e.addClass(a,u):a.classList.add(u):y?e.removeClass(a,u):a.classList.remove(u);else{let T=-1===u.indexOf("-")?void 0:Xs.DashCase;if(null==p)y?e.removeStyle(a,u,T):a.style.removeProperty(u);else{const D="string"==typeof p&&p.endsWith("!important");D&&(p=p.slice(0,-10),T|=Xs.Important),y?e.setStyle(a,u,p,T):a.style.setProperty(u,p,D?"important":"")}}}(u,T,H(yi(),a),p,y))}function ib(e,i,a,u,p,y){const T=null===i;let D;for(;p>0;){const F=e[p],q=Array.isArray(F),ne=q?F[1]:F,ge=null===ne;let be=a[p+1];be===Cr&&(be=ge?Se:void 0);let Ne=ge?Ns(be,u):ne===u?be:void 0;if(q&&!Tm(Ne)&&(Ne=Ns(F,u)),Tm(Ne)&&(D=Ne,T))return D;const Ye=e[p+1];p=T?fu(Ye):al(Ye)}if(null!==i){let F=y?i.residualClasses:i.residualStyles;null!=F&&(D=Ns(F,u))}return D}function Tm(e){return void 0!==e}function ob(e,i){return 0!=(e.flags&(i?16:32))}function sb(e,i=""){const a=Ft(),u=br(),p=e+20,y=u.firstCreatePass?Hd(u,p,1,i,null):u.data[p],T=a[p]=function(e,i){return P(e)?e.createText(i):e.createTextNode(i)}(a[11],i);Gn(u,a,T,y),Qo(y,!1)}function ev(e){return Dm("",e,""),ev}function Dm(e,i,a){const u=Ft(),p=fl(u,e,i,a);return p!==Cr&&Vu(u,yi(),p),Dm}function tv(e,i,a,u,p){const y=Ft(),T=function(e,i,a,u,p,y){const D=ja(e,Fe(),a,p);return Ht(2),D?i+Re(a)+u+Re(p)+y:Cr}(y,e,i,a,u,p);return T!==Cr&&Vu(y,yi(),T),tv}function pb(e,i,a){!function(e,i,a,u){const p=br(),y=Ht(2);p.firstUpdatePass&&tb(p,null,y,u);const T=Ft();if(a!==Cr&&hs(T,y,a)){const D=p.data[yi()];if(ob(D,u)&&!eb(p,y)){let F=u?D.classesWithoutHost:D.stylesWithoutHost;null!==F&&(a=Ce(F,a||"")),j_(p,D,T,a,u)}else!function(e,i,a,u,p,y,T,D){p===Cr&&(p=Se);let F=0,q=0,ne=0<p.length?p[0]:null,ge=0<y.length?y[0]:null;for(;null!==ne||null!==ge;){const be=F<p.length?p[F+1]:void 0,Ne=q<y.length?y[q+1]:void 0;let Ct,Ye=null;ne===ge?(F+=2,q+=2,be!==Ne&&(Ye=ge,Ct=Ne)):null===ge||null!==ne&&ne<ge?(F+=2,Ye=ne):(q+=2,Ye=ge,Ct=Ne),null!==Ye&&rb(e,i,a,u,Ye,Ct,T,D),ne=F<p.length?p[F]:null,ge=q<y.length?y[q]:null}}(p,D,T,T[11],T[y+1],T[y+1]=function(e,i,a){if(null==a||""===a)return Se;const u=[],p=Lr(a);if(Array.isArray(p))for(let y=0;y<p.length;y++)e(u,p[y],!0);else if("object"==typeof p)for(const y in p)p.hasOwnProperty(y)&&e(u,y,p[y]);else"string"==typeof p&&i(u,p);return u}(e,i,a),u,y)}}(Es,Ec,fl(Ft(),e,i,a),!0)}function nv(e,i,a){const u=Ft();return hs(u,mt(),i)&&_a(br(),bi(),u,e,i,u[11],a,!0),nv}const Rh=void 0;var iE=["en",[["a","p"],["AM","PM"],Rh],[["AM","PM"],Rh,Rh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rh,"{1} 'at' {0}",Rh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const i=Math.floor(Math.abs(e)),a=e.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===a?1:5}];let bf={};function rv(e){const i=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let a=Sb(i);if(a)return a;const u=i.split("-")[0];if(a=Sb(u),a)return a;if("en"===u)return iE;throw new Error(`Missing locale data for the locale "${e}".`)}function Db(e){return rv(e)[vr.PluralCase]}function Sb(e){return e in bf||(bf[e]=Ut.ng&&Ut.ng.common&&Ut.ng.common.locales&&Ut.ng.common.locales[e]),bf[e]}var vr=(()=>((vr=vr||{})[vr.LocaleId=0]="LocaleId",vr[vr.DayPeriodsFormat=1]="DayPeriodsFormat",vr[vr.DayPeriodsStandalone=2]="DayPeriodsStandalone",vr[vr.DaysFormat=3]="DaysFormat",vr[vr.DaysStandalone=4]="DaysStandalone",vr[vr.MonthsFormat=5]="MonthsFormat",vr[vr.MonthsStandalone=6]="MonthsStandalone",vr[vr.Eras=7]="Eras",vr[vr.FirstDayOfWeek=8]="FirstDayOfWeek",vr[vr.WeekendRange=9]="WeekendRange",vr[vr.DateFormat=10]="DateFormat",vr[vr.TimeFormat=11]="TimeFormat",vr[vr.DateTimeFormat=12]="DateTimeFormat",vr[vr.NumberSymbols=13]="NumberSymbols",vr[vr.NumberFormats=14]="NumberFormats",vr[vr.CurrencyCode=15]="CurrencyCode",vr[vr.CurrencySymbol=16]="CurrencySymbol",vr[vr.CurrencyName=17]="CurrencyName",vr[vr.Currencies=18]="Currencies",vr[vr.Directionality=19]="Directionality",vr[vr.PluralCase=20]="PluralCase",vr[vr.ExtraData=21]="ExtraData",vr))();const Sm="en-US";let Ab=Sm;function iv(e){Bt(e,"Expected localeId to be defined"),"string"==typeof e&&(Ab=e.toLowerCase().replace(/_/g,"-"))}function av(e,i,a,u,p){if(e=pe(e),Array.isArray(e))for(let y=0;y<e.length;y++)av(e[y],i,a,u,p);else{const y=br(),T=Ft();let D=nd(e)?e:pe(e.provide),F=td(e);const q=ji(),ne=1048575&q.providerIndexes,ge=q.directiveStart,be=q.providerIndexes>>20;if(nd(e)||!e.multi){const Ne=new oi(F,p,xp),Ye=lv(D,i,p?ne:ne+be,ge);-1===Ye?(on(Jo(q,T),y,D),uv(y,e,i.length),i.push(D),q.directiveStart++,q.directiveEnd++,p&&(q.providerIndexes+=1048576),a.push(Ne),T.push(Ne)):(a[Ye]=Ne,T[Ye]=Ne)}else{const Ne=lv(D,i,ne+be,ge),Ye=lv(D,i,ne,ne+be),Ct=Ne>=0&&a[Ne],ft=Ye>=0&&a[Ye];if(p&&!ft||!p&&!Ct){on(Jo(q,T),y,D);const Wt=function(e,i,a,u,p){const y=new oi(e,a,xp);return y.multi=[],y.index=i,y.componentProviders=0,Qb(y,p,u&&!a),y}(p?tT:eT,a.length,p,u,F);!p&&ft&&(a[Ye].providerFactory=Wt),uv(y,e,i.length,0),i.push(D),q.directiveStart++,q.directiveEnd++,p&&(q.providerIndexes+=1048576),a.push(Wt),T.push(Wt)}else uv(y,e,Ne>-1?Ne:Ye,Qb(a[p?Ye:Ne],F,!p&&u));!p&&u&&ft&&a[Ye].componentProviders++}}}function uv(e,i,a,u){const p=nd(i);if(p||function(e){return!!e.useClass}(i)){const T=(i.useClass||i).prototype.ngOnDestroy;if(T){const D=e.destroyHooks||(e.destroyHooks=[]);if(!p&&i.multi){const F=D.indexOf(a);-1===F?D.push(a,[u,T]):D[F+1].push(u,T)}else D.push(a,T)}}}function Qb(e,i,a){return a&&e.componentProviders++,e.multi.push(i)-1}function lv(e,i,a,u){for(let p=a;p<u;p++)if(i[p]===e)return p;return-1}function eT(e,i,a,u){return cv(this.multi,[])}function tT(e,i,a,u){const p=this.multi;let y;if(this.providerFactory){const T=this.providerFactory.componentProviders,D=z(a,a[1],this.providerFactory.index,u);y=D.slice(0,T),cv(p,y);for(let F=T;F<D.length;F++)y.push(D[F])}else y=[],cv(p,y);return y}function cv(e,i){for(let a=0;a<e.length;a++)i.push((0,e[a])());return i}function Jb(e,i=[]){return a=>{a.providersResolver=(u,p)=>function(e,i,a){const u=br();if(u.firstCreatePass){const p=Gi(e);av(a,u.data,u.blueprint,p,!0),av(i,u.data,u.blueprint,p,!1)}}(u,p?p(e):e,i)}}class Xb{}const t0="ngComponent";class iT{resolveComponentFactory(i){throw function(e){const i=Error(`No component factory found for ${fe(e)}. Did you add it to @NgModule.entryComponents?`);return i[t0]=e,i}(i)}}let wf=(()=>{class e{}return e.NULL=new iT,e})();function xm(...e){}function Ef(e,i){return new Tc(j(e,i))}const aT=function(){return Ef(ji(),Ft())};let Tc=(()=>{class e{constructor(a){this.nativeElement=a}}return e.__NG_ELEMENT_ID__=aT,e})();function n0(e){return e instanceof Tc?e.nativeElement:e}class Pm{}let uT=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>cT(),e})();const cT=function(){const e=Ft(),a=Pt(ji().index,e);return function(e){return e[11]}(zr(a)?a:e)};let hv=(()=>{class e{}return e.\u0275prov=Tn({token:e,providedIn:"root",factory:()=>null}),e})();class r0{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const fv=new r0("12.2.9");class o0{constructor(){}supports(i){return Oh(i)}create(i){return new pT(i)}}const fT=(e,i)=>i;class pT{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||fT}forEachItem(i){let a;for(a=this._itHead;null!==a;a=a._next)i(a)}forEachOperation(i){let a=this._itHead,u=this._removalsHead,p=0,y=null;for(;a||u;){const T=!u||a&&a.currentIndex<a0(u,p,y)?a:u,D=a0(T,p,y),F=T.currentIndex;if(T===u)p--,u=u._nextRemoved;else if(a=a._next,null==T.previousIndex)p++;else{y||(y=[]);const q=D-p,ne=F-p;if(q!=ne){for(let be=0;be<q;be++){const Ne=be<y.length?y[be]:y[be]=0,Ye=Ne+be;ne<=Ye&&Ye<q&&(y[be]=Ne+1)}y[T.previousIndex]=ne-q}}D!==F&&i(T,D,F)}}forEachPreviousItem(i){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)i(a)}forEachAddedItem(i){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)i(a)}forEachMovedItem(i){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)i(a)}forEachRemovedItem(i){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)i(a)}forEachIdentityChange(i){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)i(a)}diff(i){if(null==i&&(i=[]),!Oh(i))throw new Error(`Error trying to diff '${fe(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let p,y,T,a=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let D=0;D<this.length;D++)y=i[D],T=this._trackByFn(D,y),null!==a&&Object.is(a.trackById,T)?(u&&(a=this._verifyReinsertion(a,y,T,D)),Object.is(a.item,y)||this._addIdentityChange(a,y)):(a=this._mismatch(a,y,T,D),u=!0),a=a._next}else p=0,function(e,i){if(Array.isArray(e))for(let a=0;a<e.length;a++)i(e[a]);else{const a=e[ud()]();let u;for(;!(u=a.next()).done;)i(u.value)}}(i,D=>{T=this._trackByFn(p,D),null!==a&&Object.is(a.trackById,T)?(u&&(a=this._verifyReinsertion(a,D,T,p)),Object.is(a.item,D)||this._addIdentityChange(a,D)):(a=this._mismatch(a,D,T,p),u=!0),a=a._next,p++}),this.length=p;return this._truncate(a),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,a,u,p){let y;return null===i?y=this._itTail:(y=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,a)||this._addIdentityChange(i,a),this._reinsertAfter(i,y,p)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,p))?(Object.is(i.item,a)||this._addIdentityChange(i,a),this._moveAfter(i,y,p)):i=this._addAfter(new gT(a,u),y,p),i}_verifyReinsertion(i,a,u,p){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==y?i=this._reinsertAfter(y,i._prev,p):i.currentIndex!=p&&(i.currentIndex=p,this._addToMoves(i,p)),i}_truncate(i){for(;null!==i;){const a=i._next;this._addToRemovals(this._unlink(i)),i=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const p=i._prevRemoved,y=i._nextRemoved;return null===p?this._removalsHead=y:p._nextRemoved=y,null===y?this._removalsTail=p:y._prevRemoved=p,this._insertAfter(i,a,u),this._addToMoves(i,u),i}_moveAfter(i,a,u){return this._unlink(i),this._insertAfter(i,a,u),this._addToMoves(i,u),i}_addAfter(i,a,u){return this._insertAfter(i,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,a,u){const p=null===a?this._itHead:a._next;return i._next=p,i._prev=a,null===p?this._itTail=i:p._prev=i,null===a?this._itHead=i:a._next=i,null===this._linkedRecords&&(this._linkedRecords=new s0),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const a=i._prev,u=i._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,i}_addToMoves(i,a){return i.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new s0),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,a){return i.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class gT{constructor(i,a){this.item=i,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mT{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const a=i._prevDup,u=i._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class s0{constructor(){this.map=new Map}put(i){const a=i.trackById;let u=this.map.get(a);u||(u=new mT,this.map.set(a,u)),u.add(i)}get(i,a){const p=this.map.get(i);return p?p.get(i,a):null}remove(i){const a=i.trackById;return this.map.get(a).remove(i)&&this.map.delete(a),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function a0(e,i,a){const u=e.previousIndex;if(null===u)return u;let p=0;return a&&u<a.length&&(p=a[u]),u+i+p}class u0{constructor(){}supports(i){return i instanceof Map||Ep(i)}create(){return new _T}}class _T{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let a;for(a=this._mapHead;null!==a;a=a._next)i(a)}forEachPreviousItem(i){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)i(a)}forEachChangedItem(i){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)i(a)}forEachAddedItem(i){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)i(a)}forEachRemovedItem(i){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)i(a)}diff(i){if(i){if(!(i instanceof Map||Ep(i)))throw new Error(`Error trying to diff '${fe(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,p)=>{if(a&&a.key===p)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const y=this._getOrCreateRecordForKey(p,u);a=this._insertBeforeOrAppend(a,y)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,a){if(i){const u=i._prev;return a._next=i,a._prev=u,i._prev=a,u&&(u._next=a),i===this._mapHead&&(this._mapHead=a),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(i,a){if(this._records.has(i)){const p=this._records.get(i);this._maybeAddToChanges(p,a);const y=p._prev,T=p._next;return y&&(y._next=T),T&&(T._prev=y),p._next=null,p._prev=null,p}const u=new vT(i);return this._records.set(i,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,a){Object.is(a,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=a,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,a){i instanceof Map?i.forEach(a):Object.keys(i).forEach(u=>a(i[u],u))}}class vT{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function l0(){return new Rm([new o0])}let Rm=(()=>{class e{constructor(a){this.factories=a}static create(a,u){if(null!=u){const p=u.factories.slice();a=a.concat(p)}return new e(a)}static extend(a){return{provide:e,useFactory:u=>e.create(a,u||l0()),deps:[[e,new Ls,new gs]]}}find(a){const u=this.factories.find(p=>p.supports(a));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(e){return e.name||typeof e}(a)}'`)}}return e.\u0275prov=Tn({token:e,providedIn:"root",factory:l0}),e})();function c0(){return new km([new u0])}let km=(()=>{class e{constructor(a){this.factories=a}static create(a,u){if(u){const p=u.factories.slice();a=a.concat(p)}return new e(a)}static extend(a){return{provide:e,useFactory:u=>e.create(a,u||c0()),deps:[[e,new Ls,new gs]]}}find(a){const u=this.factories.find(p=>p.supports(a));if(u)return u;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return e.\u0275prov=Tn({token:e,providedIn:"root",factory:c0}),e})();function Fm(e,i,a,u,p=!1){for(;null!==a;){const y=i[a.index];if(null!==y&&u.push(_e(y)),Mr(y))for(let D=10;D<y.length;D++){const F=y[D],q=F[1].firstChild;null!==q&&Fm(F[1],F,q,u)}const T=a.type;if(8&T)Fm(e,i,a.child,u);else if(32&T){const D=du(a,i);let F;for(;F=D();)u.push(F)}else if(16&T){const D=Yi(i,a);if(Array.isArray(D))u.push(...D);else{const F=Ua(i[16]);Fm(F[1],F,D,u,!0)}}a=p?a.projectionNext:a.next}return u}class Lp{constructor(i,a){this._lView=i,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,a=i[1];return Fm(a,i,a.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Mr(i)){const a=i[8],u=a?a.indexOf(this):-1;u>-1&&(Qc(i,u),Ao(a,u))}this._attachedToViewContainer=!1}f(this._lView[1],this._lView)}onDestroy(i){Ag(this._lView[1],this._lView,null,i)}markForCheck(){Dh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){vc(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,i,a){me(!0);try{vc(e,i,a)}finally{me(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,Io(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class bT extends Lp{constructor(i){super(i),this._view=i}detectChanges(){ip(this._view)}checkNoChanges(){!function(e){me(!0);try{ip(e)}finally{me(!1)}}(this._view)}get context(){return null}}const wT=function(e){return function(e,i,a){if(ni(e)&&!a){const u=Pt(e.index,i);return new Lp(u,u)}return 47&e.type?new Lp(i[16],i):null}(ji(),Ft(),16==(16&e))};let ET=(()=>{class e{}return e.__NG_ELEMENT_ID__=wT,e})();const ST=[new u0],MT=new Rm([new o0]),IT=new km(ST),xT=function(){return Nm(ji(),Ft())};let Up=(()=>{class e{}return e.__NG_ELEMENT_ID__=xT,e})();const PT=Up,RT=class extends PT{constructor(i,a,u){super(),this._declarationLView=i,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(i){const a=this._declarationTContainer.tViews,u=jd(this._declarationLView,a,i,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(u[19]=y.createEmbeddedView(a)),Gd(a,u,i),new Lp(u)}};function Nm(e,i){return 4&e.type?new RT(i,e,Ef(e,i)):null}class kh{}class d0{}const NT=function(){return p0(ji(),Ft())};let Lm=(()=>{class e{}return e.__NG_ELEMENT_ID__=NT,e})();const UT=Lm,h0=class extends UT{constructor(i,a,u){super(),this._lContainer=i,this._hostTNode=a,this._hostLView=u}get element(){return Ef(this._hostTNode,this._hostLView)}get injector(){return new Ge(this._hostTNode,this._hostLView)}get parentInjector(){const i=nr(this._hostTNode,this._hostLView);if(wa(i)){const a=Ea(i,this._hostLView),u=Wa(i);return new Ge(a[1].data[u+8],a)}return new Ge(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const a=f0(this._lContainer);return null!==a&&a[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,a,u){const p=i.createEmbeddedView(a||{});return this.insert(p,u),p}createComponent(i,a,u,p,y){const T=u||this.parentInjector;if(!y&&null==i.ngModule&&T){const F=T.get(kh,null);F&&(y=F)}const D=i.create(T,p,void 0,y);return this.insert(D.hostView,a),D}insert(i,a){const u=i._lView,p=u[1];if(Mr(u[3])){const ne=this.indexOf(i);if(-1!==ne)this.detach(ne);else{const ge=u[3],be=new h0(ge,ge[6],ge[3]);be.detach(be.indexOf(i))}}const y=this._adjustIndex(a),T=this._lContainer;!function(e,i,a,u){const p=10+u,y=a.length;u>0&&(a[p-1][4]=i),u<y-10?(i[4]=a[p],Ys(a,10+u,i)):(a.push(i),i[4]=null),i[3]=a;const T=i[17];null!==T&&a!==T&&function(e,i){const a=e[9];i[16]!==i[3][3][16]&&(e[2]=!0),null===a?e[9]=[i]:a.push(i)}(T,i);const D=i[19];null!==D&&D.insertView(e),i[2]|=128}(p,u,T,y);const D=Gs(y,T),F=u[11],q=J(F,T[7]);return null!==q&&function(e,i,a,u,p,y){u[0]=p,u[6]=i,Io(e,u,a,1,p,y)}(p,T[6],F,u,q,D),i.attachToViewContainerRef(),Ys(pv(T),y,i),i}move(i,a){return this.insert(i,a)}indexOf(i){const a=f0(this._lContainer);return null!==a?a.indexOf(i):-1}remove(i){const a=this._adjustIndex(i,-1),u=Qc(this._lContainer,a);u&&(Ao(pv(this._lContainer),a),f(u[1],u))}detach(i){const a=this._adjustIndex(i,-1),u=Qc(this._lContainer,a);return u&&null!=Ao(pv(this._lContainer),a)?new Lp(u):null}_adjustIndex(i,a=0){return null==i?this.length+a:i}};function f0(e){return e[8]}function pv(e){return e[8]||(e[8]=[])}function p0(e,i){let a;const u=i[e.index];if(Mr(u))a=u;else{let p;if(8&e.type)p=_e(u);else{const y=i[11];p=y.createComment("");const T=j(e,i);d(y,J(y,T),p,function(e,i){return P(e)?e.nextSibling(i):i.nextSibling}(y,T),!1)}i[e.index]=a=Ug(u,i,p,e),Th(i,a)}return new h0(a,e,i)}const Af={};class k0 extends wf{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const a=Fr(i);return new N0(a,this.ngModule)}}function F0(e){const i=[];for(let a in e)e.hasOwnProperty(a)&&i.push({propName:e[a],templateName:a});return i}const kD=new Ti("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>rl});class N0 extends Xb{constructor(i,a){super(),this.componentDef=i,this.ngModule=a,this.componentType=i.type,this.selector=i.selectors.map(Bf).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return F0(this.componentDef.inputs)}get outputs(){return F0(this.componentDef.outputs)}create(i,a,u,p){const y=(p=p||this.ngModule)?function(e,i){return{get:(a,u,p)=>{const y=e.get(a,Af,p);return y!==Af||u===Af?y:i.get(a,u,p)}}}(i,p.injector):i,T=y.get(Pm,N),D=y.get(hv,null),F=T.createRenderer(null,this.componentDef),q=this.componentDef.selectors[0][0]||"div",ne=u?function(e,i,a){if(P(e))return e.selectRootElement(i,a===Ot.ShadowDom);let u="string"==typeof i?e.querySelector(i):i;return u.textContent="",u}(F,u,this.componentDef.encapsulation):kd(T.createRenderer(null,this.componentDef),q,function(e){const i=e.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(q)),ge=this.componentDef.onPush?576:528,be=function(e,i){return{components:[],scheduler:e||rl,clean:Hg,playerHandler:i||null,flags:0}}(),Ne=ef(0,null,null,1,0,null,null,null,null,null),Ye=jd(null,Ne,be,ge,null,null,T,F,D,y);let Ct,ft;So(Ye);try{const Wt=function(e,i,a,u,p,y){const T=a[1];a[20]=e;const F=Hd(T,20,2,"#host",null),q=F.mergedAttrs=i.hostAttrs;null!==q&&(zd(F,q,!0),null!==e&&(ra(p,e,q),null!==F.classes&&Lf(p,e,F.classes),null!==F.styles&&og(p,e,F.styles)));const ne=u.createRenderer(e,i),ge=jd(a,Tg(i),null,i.onPush?64:16,a[20],F,u,ne,y||null,null);return T.firstCreatePass&&(on(Jo(F,a),T,i.type),kg(T,F),Fg(F,a.length,1)),Th(a,ge),a[20]=ge}(ne,this.componentDef,Ye,T,F);if(ne)if(u)ra(F,ne,["ng-version",fv.full]);else{const{attrs:kt,classes:rr}=function(e){const i=[],a=[];let u=1,p=2;for(;u<e.length;){let y=e[u];if("string"==typeof y)2===p?""!==y&&i.push(y,e[++u]):8===p&&a.push(y);else{if(!Uu(p))break;p=y}u++}return{attrs:i,classes:a}}(this.componentDef.selectors[0]);kt&&ra(F,ne,kt),rr&&rr.length>0&&Lf(F,ne,rr.join(" "))}if(ft=ae(Ne,20),void 0!==a){const kt=ft.projection=[];for(let rr=0;rr<this.ngContentSelectors.length;rr++){const wr=a[rr];kt.push(null!=wr?Array.from(wr):null)}}Ct=function(e,i,a,u,p){const y=a[1],T=function(e,i,a){const u=ji();e.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),np(e,u,i,Xc(e,i,1,null),a));const p=z(i,e,u.directiveStart,u);Ni(p,i);const y=j(u,i);return y&&Ni(y,i),p}(y,a,i);if(u.components.push(T),e[8]=T,p&&p.forEach(F=>F(T,i)),i.contentQueries){const F=ji();i.contentQueries(1,T,F.directiveStart)}const D=ji();return!y.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(no(D.index),Og(a[1],D,0,D.directiveStart,D.directiveEnd,i),Rg(i,T)),T}(Wt,this.componentDef,Ye,be,[am]),Gd(Ne,Ye,null)}finally{to()}return new LD(this.componentType,Ct,Ef(ft,Ye),Ye,ft)}}class LD extends class{}{constructor(i,a,u,p,y){super(),this.location=u,this._rootLView=p,this._tNode=y,this.instance=a,this.hostView=this.changeDetectorRef=new bT(p),this.componentType=i}get injector(){return new Ge(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const Mf=new Map;class BD extends kh{constructor(i,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new k0(this);const u=Ur(i),p=i[qt]||null;p&&iv(p),this._bootstrapComponents=Js(u.bootstrap),this._r3Injector=sp(i,a,[{provide:kh,useValue:this},{provide:wf,useValue:this.componentFactoryResolver}],fe(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,a=Eo.THROW_IF_NOT_FOUND,u=Qt.Default){return i===Eo||i===kh||i===Ll?this:this._r3Injector.get(i,a,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Av extends d0{constructor(i){super(),this.moduleType=i,null!==Ur(i)&&function(e){const i=new Set;!function a(u){const p=Ur(u,!0),y=p.id;null!==y&&(function(e,i,a){if(i&&i!==a)throw new Error(`Duplicate module registered for ${e} - ${fe(i)} vs ${fe(i.name)}`)}(y,Mf.get(y),u),Mf.set(y,u));const T=Js(p.imports);for(const D of T)i.has(D)||(i.add(D),a(D))}(e)}(i)}create(i){return new BD(this.moduleType,i)}}function V0(e,i,a){const u=Pe()+e,p=Ft();return p[u]===Cr?ju(p,u,a?i.call(a):i()):function(e,i){return e[i]}(p,u)}function B0(e,i,a,u){return function(e,i,a,u,p,y){const T=i+a;return hs(e,T,p)?ju(e,T+1,y?u.call(y,p):u(p)):zp(e,T+1)}(Ft(),Pe(),e,i,a,u)}function j0(e,i,a,u,p){return Z0(Ft(),Pe(),e,i,a,u,p)}function H0(e,i,a,u,p,y){return function(e,i,a,u,p,y,T,D){const F=i+a;return function(e,i,a,u,p){const y=ja(e,i,a,u);return hs(e,i+2,p)||y}(e,F,p,y,T)?ju(e,F+3,D?u.call(D,p,y,T):u(p,y,T)):zp(e,F+3)}(Ft(),Pe(),e,i,a,u,p,y)}function zp(e,i){const a=e[i];return a===Cr?void 0:a}function Z0(e,i,a,u,p,y,T){const D=i+a;return ja(e,D,p,y)?ju(e,D+2,T?u.call(T,p,y):u(p,y)):zp(e,D+2)}function W0(e,i){const a=br();let u;const p=e+20;a.firstCreatePass?(u=function(e,i){if(i)for(let a=i.length-1;a>=0;a--){const u=i[a];if(e===u.name)return u}throw new xe("302",`The pipe '${e}' could not be found!`)}(i,a.pipeRegistry),a.data[p]=u,u.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(p,u.onDestroy)):u=a.data[p];const y=u.factory||(u.factory=he(u.type)),T=Kn(xp);try{const D=gt(!1),F=y();return gt(D),function(e,i,a,u){a>=e.data.length&&(e.data[a]=null,e.blueprint[a]=null),i[a]=u}(a,Ft(),p,F),F}finally{Kn(T)}}function Y0(e,i,a,u){const p=e+20,y=Ft(),T=ze(y,p);return function(e,i){pu.isWrapped(i)&&(i=pu.unwrap(i),e[Fe()]=Cr);return i}(y,function(e,i){return e[1].data[i].pure}(y,p)?Z0(y,Pe(),i,T.transform,a,u,T):T.transform(a,u))}function Mv(e){return i=>{setTimeout(e,void 0,i)}}const Dc=class extends R.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,a,u){var p,y,T;let D=i,F=a||(()=>null),q=u;if(i&&"object"==typeof i){const ge=i;D=null===(p=ge.next)||void 0===p?void 0:p.bind(ge),F=null===(y=ge.error)||void 0===y?void 0:y.bind(ge),q=null===(T=ge.complete)||void 0===T?void 0:T.bind(ge)}this.__isAsync&&(F=Mv(F),D&&(D=Mv(D)),q&&(q=Mv(q)));const ne=super.subscribe({next:D,error:F,complete:q});return i instanceof c.w&&i.add(ne),ne}};function XD(){return this._results[ud()]()}class Yp{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ud(),u=Yp.prototype;u[a]||(u[a]=XD)}get changes(){return this._changes||(this._changes=new Dc)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,a){return this._results.reduce(i,a)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,a){const u=this;u.dirty=!1;const p=Xo(i);(this._changesDetected=!function(e,i,a){if(e.length!==i.length)return!1;for(let u=0;u<e.length;u++){let p=e[u],y=i[u];if(a&&(p=a(p),y=a(y)),y!==p)return!1}return!0}(u._results,p,a))&&(u._results=p,u.length=p.length,u.last=p[this.length-1],u.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Iv{constructor(i){this.queryList=i,this.matches=null}clone(){return new Iv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ov{constructor(i=[]){this.queries=i}createEmbeddedView(i){const a=i.queries;if(null!==a){const u=null!==i.contentQueries?i.contentQueries[0]:a.length,p=[];for(let y=0;y<u;y++){const T=a.getByIndex(y);p.push(this.queries[T.indexInDeclarationView].clone())}return new Ov(p)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let a=0;a<this.queries.length;a++)null!==iC(i,a).matches&&this.queries[a].setDirty()}}class K0{constructor(i,a,u=null){this.predicate=i,this.flags=a,this.read=u}}class xv{constructor(i=[]){this.queries=i}elementStart(i,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,a)}elementEnd(i){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(i)}embeddedTView(i){let a=null;for(let u=0;u<this.length;u++){const p=null!==a?a.length:0,y=this.getByIndex(u).embeddedTView(i,p);y&&(y.indexInDeclarationView=u,null!==a?a.push(y):a=[y])}return null!==a?new xv(a):null}template(i,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,a)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Pv{constructor(i,a=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(i,a){this.isApplyingToNode(a)&&this.matchTNode(i,a)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,a){this.elementStart(i,a)}embeddedTView(i,a){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,a),new Pv(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let p=0;p<u.length;p++){const y=u[p];this.matchTNodeWithReadOption(i,a,nS(a,y)),this.matchTNodeWithReadOption(i,a,O(a,i,y,!1,!1))}else u===Up?4&a.type&&this.matchTNodeWithReadOption(i,a,-1):this.matchTNodeWithReadOption(i,a,O(a,i,u,!1,!1))}matchTNodeWithReadOption(i,a,u){if(null!==u){const p=this.metadata.read;if(null!==p)if(p===Tc||p===Lm||p===Up&&4&a.type)this.addMatch(a.index,-2);else{const y=O(a,i,p,!1,!1);null!==y&&this.addMatch(a.index,y)}else this.addMatch(a.index,u)}}addMatch(i,a){null===this.matches?this.matches=[i,a]:this.matches.push(i,a)}}function nS(e,i){const a=e.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===i)return a[u+1];return null}function iS(e,i,a,u){return-1===a?function(e,i){return 11&e.type?Ef(e,i):4&e.type?Nm(e,i):null}(i,e):-2===a?function(e,i,a){return a===Tc?Ef(i,e):a===Up?Nm(i,e):a===Lm?p0(i,e):void 0}(e,i,u):z(e,e[1],a,i)}function Q0(e,i,a,u){const p=i[19].queries[u];if(null===p.matches){const y=e.data,T=a.matches,D=[];for(let F=0;F<T.length;F+=2){const q=T[F];D.push(q<0?null:iS(i,y[q],T[F+1],a.metadata.read))}p.matches=D}return p.matches}function Rv(e,i,a,u){const p=e.queries.getByIndex(a),y=p.matches;if(null!==y){const T=Q0(e,i,p,a);for(let D=0;D<y.length;D+=2){const F=y[D];if(F>0)u.push(T[D/2]);else{const q=y[D+1],ne=i[-F];for(let ge=10;ge<ne.length;ge++){const be=ne[ge];be[17]===be[3]&&Rv(be[1],be,q,u)}if(null!==ne[9]){const ge=ne[9];for(let be=0;be<ge.length;be++){const Ne=ge[be];Rv(Ne[1],Ne,q,u)}}}}}return u}function J0(e){const i=Ft(),a=br(),u=vi();ei(u+1);const p=iC(a,u);if(e.dirty&&En(i)===(2==(2&p.metadata.flags))){if(null===p.matches)e.reset([]);else{const y=p.crossesNgTemplate?Rv(a,i,u,[]):Q0(a,i,p,u);e.reset(y,n0),e.notifyOnChanges()}return!0}return!1}function X0(e,i,a){const u=br();u.firstCreatePass&&(rC(u,new K0(e,i,a),-1),2==(2&i)&&(u.staticViewQueries=!0)),nC(u,Ft(),i)}function eC(e,i,a,u){const p=br();if(p.firstCreatePass){const y=ji();rC(p,new K0(i,a,u),y.index),function(e,i){const a=e.contentQueries||(e.contentQueries=[]);i!==(a.length?a[a.length-1]:-1)&&a.push(e.queries.length-1,i)}(p,e),2==(2&a)&&(p.staticContentQueries=!0)}nC(p,Ft(),a)}function tC(){return e=Ft(),i=vi(),e[19].queries[i].queryList;var e,i}function nC(e,i,a){const u=new Yp(4==(4&a));Ag(e,i,u,u.destroy),null===i[19]&&(i[19]=new Ov),i[19].queries.push(new Iv(u))}function rC(e,i,a){null===e.queries&&(e.queries=new xv),e.queries.track(new Pv(i,a))}function iC(e,i){return e.queries.getByIndex(i)}const Vv=new Ti("Application Initializer");let Of=(()=>{class e{constructor(a){this.appInits=a,this.resolve=xm,this.reject=xm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,p)=>{this.resolve=u,this.reject=p})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const y=this.appInits[p]();if(z_(y))a.push(y);else if($_(y)){const T=new Promise((D,F)=>{y.subscribe({complete:D,error:F})});a.push(T)}}Promise.all(a).then(()=>{u()}).catch(p=>{this.reject(p)}),0===a.length&&u(),this.initialized=!0}}return e.\u0275fac=function(a){return new(a||e)(Di(Vv,8))},e.\u0275prov=Tn({token:e,factory:e.\u0275fac}),e})();const wC=new Ti("AppId"),FS={provide:wC,useFactory:function(){return`${Bv()}${Bv()}${Bv()}`},deps:[]};function Bv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const EC=new Ti("Platform Initializer"),TC=new Ti("Platform ID"),DC=new Ti("appBootstrapListener");let SC=(()=>{class e{log(a){console.log(a)}warn(a){console.warn(a)}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=Tn({token:e,factory:e.\u0275fac}),e})();const Zm=new Ti("LocaleId"),AC=new Ti("DefaultCurrencyCode");class LS{constructor(i,a){this.ngModuleFactory=i,this.componentFactories=a}}const jv=function(e){return new Av(e)},US=jv,VS=function(e){return Promise.resolve(jv(e))},MC=function(e){const i=jv(e),u=Js(Ur(e).declarations).reduce((p,y)=>{const T=Fr(y);return T&&p.push(new N0(T)),p},[]);return new LS(i,u)},BS=MC,jS=function(e){return Promise.resolve(MC(e))};let Qp=(()=>{class e{constructor(){this.compileModuleSync=US,this.compileModuleAsync=VS,this.compileModuleAndAllComponentsSync=BS,this.compileModuleAndAllComponentsAsync=jS}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=Tn({token:e,factory:e.\u0275fac}),e})();const ZS=(()=>Promise.resolve(0))();function Hv(e){"undefined"==typeof Zone?ZS.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Hu{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dc(!1),this.onMicrotaskEmpty=new Dc(!1),this.onStable=new Dc(!1),this.onError=new Dc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!u&&a,p.shouldCoalesceRunChangeDetection=u,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function(){let e=Ut.requestAnimationFrame,i=Ut.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&i){const a=e[Zone.__symbol__("OriginalDelegate")];a&&(e=a);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(e){const i=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ut,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Zv(e),e.isCheckStableRunning=!0,Gv(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Zv(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,p,y,T,D)=>{try{return IC(e),a.invokeTask(p,y,T,D)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||e.shouldCoalesceRunChangeDetection)&&i(),OC(e)}},onInvoke:(a,u,p,y,T,D,F)=>{try{return IC(e),a.invoke(p,y,T,D,F)}finally{e.shouldCoalesceRunChangeDetection&&i(),OC(e)}},onHasTask:(a,u,p,y)=>{a.hasTask(p,y),u===p&&("microTask"==y.change?(e._hasPendingMicrotasks=y.microTask,Zv(e),Gv(e)):"macroTask"==y.change&&(e.hasPendingMacrotasks=y.macroTask))},onHandleError:(a,u,p,y)=>(a.handleError(p,y),e.runOutsideAngular(()=>e.onError.emit(y)),!1)})}(p)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Hu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,a,u){return this._inner.run(i,a,u)}runTask(i,a,u,p){const y=this._inner,T=y.scheduleEventTask("NgZoneEvent: "+p,i,zS,xm,xm);try{return y.runTask(T,a,u)}finally{y.cancelTask(T)}}runGuarded(i,a,u){return this._inner.runGuarded(i,a,u)}runOutsideAngular(i){return this._outer.run(i)}}const zS={};function Gv(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Zv(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function IC(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function OC(e){e._nesting--,Gv(e)}class YS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dc,this.onMicrotaskEmpty=new Dc,this.onStable=new Dc,this.onError=new Dc}run(i,a,u){return i.apply(a,u)}runGuarded(i,a,u){return i.apply(a,u)}runOutsideAngular(i){return i()}runTask(i,a,u,p){return i.apply(a,u)}}let xC=(()=>{class e{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hu.assertNotInAngularZone(),Hv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,p){let y=-1;u&&u>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==y),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:y,updateCb:p})}whenStable(a,u,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,p){return[]}}return e.\u0275fac=function(a){return new(a||e)(Di(Hu))},e.\u0275prov=Tn({token:e,factory:e.\u0275fac}),e})(),PC=(()=>{class e{constructor(){this._applications=new Map,qv.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return qv.findTestabilityInTree(this,a,u)}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=Tn({token:e,factory:e.\u0275fac}),e})();class KS{addToWindow(i){}findTestabilityInTree(i,a,u){return null}}function QS(e){qv=e}let qv=new KS,RC=!0,kC=!1;function zv(){return kC=!0,RC}function JS(){if(kC)throw new Error("Cannot enable prod mode after platform setup.");RC=!1}let zl;const FC=new Ti("AllowMultipleToken");class oA{constructor(i,a){this.name=i,this.token=a}}function NC(e,i,a=[]){const u=`Platform: ${i}`,p=new Ti(u);return(y=[])=>{let T=LC();if(!T||T.injector.get(FC,!1))if(e)e(a.concat(y).concat({provide:p,useValue:!0}));else{const D=a.concat(y).concat({provide:p,useValue:!0},{provide:$d,useValue:"platform"});!function(e){if(zl&&!zl.destroyed&&!zl.injector.get(FC,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");zl=e.get(UC);const i=e.get(EC,null);i&&i.forEach(a=>a())}(Eo.create({providers:D,name:u}))}return function(e){const i=LC();if(!i)throw new Error("No platform exists!");if(!i.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(p)}}function LC(){return zl&&!zl.destroyed?zl:null}let UC=(()=>{class e{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const D=function(e,i){let a;return a="noop"===e?new YS:("zone.js"===e?void 0:e)||new Hu({enableLongStackTrace:zv(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),F=[{provide:Hu,useValue:D}];return D.run(()=>{const q=Eo.create({providers:F,parent:this.injector,name:a.moduleType.name}),ne=a.create(q),ge=ne.injector.get(tl,null);if(!ge)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return D.runOutsideAngular(()=>{const be=D.onError.subscribe({next:Ne=>{ge.handleError(Ne)}});ne.onDestroy(()=>{$v(this._modules,ne),be.unsubscribe()})}),function(e,i,a){try{const u=a();return z_(u)?u.catch(p=>{throw i.runOutsideAngular(()=>e.handleError(p)),p}):u}catch(u){throw i.runOutsideAngular(()=>e.handleError(u)),u}}(ge,D,()=>{const be=ne.injector.get(Of);return be.runInitializers(),be.donePromise.then(()=>(iv(ne.injector.get(Zm,Sm)||Sm),this._moduleDoBootstrap(ne),ne))})})}bootstrapModule(a,u=[]){const p=VC({},u);return function(e,i,a){const u=new Av(a);return Promise.resolve(u)}(0,0,a).then(y=>this.bootstrapModuleFactory(y,p))}_moduleDoBootstrap(a){const u=a.injector.get(Jp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(p=>u.bootstrap(p));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${fe(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(a){return new(a||e)(Di(Eo))},e.\u0275prov=Tn({token:e,factory:e.\u0275fac}),e})();function VC(e,i){return Array.isArray(i)?i.reduce(VC,e):Object.assign(Object.assign({},e),i)}let Jp=(()=>{class e{constructor(a,u,p,y,T){this._zone=a,this._injector=u,this._exceptionHandler=p,this._componentFactoryResolver=y,this._initStatus=T,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const D=new G.y(q=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{q.next(this._stable),q.complete()})}),F=new G.y(q=>{let ne;this._zone.runOutsideAngular(()=>{ne=this._zone.onStable.subscribe(()=>{Hu.assertNotInAngularZone(),Hv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,q.next(!0))})})});const ge=this._zone.onUnstable.subscribe(()=>{Hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{q.next(!1)}))});return()=>{ne.unsubscribe(),ge.unsubscribe()}});this.isStable=(0,E.T)(D,F.pipe((0,Ve.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let p;p=a instanceof Xb?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(p.componentType);const y=function(e){return e.isBoundToModule}(p)?void 0:this._injector.get(kh),D=p.create(Eo.NULL,[],u||p.selector,y),F=D.location.nativeElement,q=D.injector.get(xC,null),ne=q&&D.injector.get(PC);return q&&ne&&ne.registerApplication(F,q),D.onDestroy(()=>{this.detachView(D.hostView),$v(this.components,D),ne&&ne.unregisterApplication(F)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;$v(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(DC,[]).concat(this._bootstrapListeners).forEach(p=>p(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(a){return new(a||e)(Di(Hu),Di(Eo),Di(tl),Di(wf),Di(Of))},e.\u0275prov=Tn({token:e,factory:e.\u0275fac}),e})();function $v(e,i){const a=e.indexOf(i);a>-1&&e.splice(a,1)}class dA{}class fA{}const pA={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let gA=(()=>{class e{constructor(a,u){this._compiler=a,this._config=u||pA}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[u,p]=a.split("#");return void 0===p&&(p="default"),Q(8255)(u).then(y=>y[p]).then(y=>GC(y,u,p)).then(y=>this._compiler.compileModuleAsync(y))}loadFactory(a){let[u,p]=a.split("#"),y="NgFactory";return void 0===p&&(p="default",y=""),Q(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(T=>T[p+y]).then(T=>GC(T,u,p))}}return e.\u0275fac=function(a){return new(a||e)(Di(Qp),Di(fA,8))},e.\u0275prov=Tn({token:e,factory:e.\u0275fac}),e})();function GC(e,i,a){if(!e)throw new Error(`Cannot find '${a}' in '${i}'`);return e}const EA=function(e){return null},DA=NC(null,"core",[{provide:TC,useValue:"unknown"},{provide:UC,deps:[Eo]},{provide:PC,deps:[]},{provide:SC,deps:[]}]),OA=[{provide:Jp,useClass:Jp,deps:[Hu,Eo,tl,wf,Of]},{provide:kD,deps:[Hu],useFactory:function(e){let i=[];return e.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(a){i.push(a)}}},{provide:Of,useClass:Of,deps:[[new gs,Vv]]},{provide:Qp,useClass:Qp,deps:[]},FS,{provide:Rm,useFactory:function(){return MT},deps:[]},{provide:km,useFactory:function(){return IT},deps:[]},{provide:Zm,useFactory:function(e){return iv(e=e||"undefined"!=typeof $localize&&$localize.locale||Sm),e},deps:[[new Yu(Zm),new gs,new Ls]]},{provide:AC,useValue:"USD"}];let PA=(()=>{class e{constructor(a){}}return e.\u0275fac=function(a){return new(a||e)(Di(Jp))},e.\u0275mod=Mi({type:e}),e.\u0275inj=Zn({providers:OA}),e})()},9829:(jt,rt,Q)=>{"use strict";Q.d(rt,{zQ:()=>wt,Qv:()=>Re});var R=Q(7716),c=Q(9765),G=Q(5917),E=Q(7574),Ve=Q(4402),ve=Q(6682),ke=Q(3190);function fe(Et,Ke){return Ke?(0,ke.w)(()=>Et,Ke):(0,ke.w)(()=>Et)}var Ce=Q(309),re=Q(8002),Ee=Q(2066),pe=Q(8049),ye=Q(9673),De=Q(5435),xe=Q(57),We=Q(8583);const Re=new R.OlP("angularfire2.auth.use-emulator"),_t=new R.OlP("angularfire2.auth.settings"),_n=new R.OlP("angularfire2.auth.tenant-id"),Nt=new R.OlP("angularfire2.auth.langugage-code"),ut=new R.OlP("angularfire2.auth.use-device-language"),Yt=new R.OlP("angularfire.auth.persistence");let wt=(()=>{class Et{constructor(ot,it,nt,vt,at,tn,sn,Sn,an,Bt){const Rt=new xe.HU(vt),Jt=(0,xe.ss)(Rt),Gt=new c.xQ,kn=(0,G.of)(void 0).pipe((0,Ce.QV)(Rt.outsideAngular),(0,ke.w)(()=>vt.runOutsideAngular(()=>Q.e(336).then(Q.bind(Q,1336)))),(0,re.U)(()=>(0,xe.on)(ot,vt,it)),(0,re.U)(Tn=>vt.runOutsideAngular(()=>{const lr=at,Zn=tn;return(0,xe.sI)(`${Tn.name}.auth`,"AngularFireAuth",Tn,()=>{const qn=vt.runOutsideAngular(()=>Tn.auth());if(lr&&qn.useEmulator(`http://${lr.join(":")}`),sn&&(qn.tenantId=sn),qn.languageCode=Sn,an&&qn.useDeviceLanguage(),Zn)for(const[Xn,An]of Object.entries(Zn))qn.settings[Xn]=An;return Bt&&qn.setPersistence(Bt),qn},[lr,sn,Sn,an,Zn,Bt])})),(0,Ee.d)({bufferSize:1,refCount:!1}));if((0,We.PM)(nt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,G.of)(null);else{kn.pipe((0,pe.P)()).subscribe();const lr=kn.pipe((0,ke.w)(An=>An.getRedirectResult().then(On=>On,()=>null)),Jt,(0,Ee.d)({bufferSize:1,refCount:!1})),Zn=An=>new E.y(On=>({unsubscribe:vt.runOutsideAngular(()=>An(On))})),qn=kn.pipe((0,ke.w)(An=>Zn(An.onAuthStateChanged.bind(An)))),Xn=kn.pipe((0,ke.w)(An=>Zn(An.onIdTokenChanged.bind(An))));this.authState=lr.pipe(fe(qn),(0,ye.R)(Rt.outsideAngular),(0,Ce.QV)(Rt.insideAngular)),this.user=lr.pipe(fe(Xn),(0,ye.R)(Rt.outsideAngular),(0,Ce.QV)(Rt.insideAngular)),this.idToken=this.user.pipe((0,ke.w)(An=>An?(0,Ve.D)(An.getIdToken()):(0,G.of)(null))),this.idTokenResult=this.user.pipe((0,ke.w)(An=>An?(0,Ve.D)(An.getIdTokenResult()):(0,G.of)(null))),this.credential=(0,ve.T)(lr,Gt,this.authState.pipe((0,De.h)(An=>!An))).pipe((0,re.U)(An=>(null==An?void 0:An.user)?An:null),(0,ye.R)(Rt.outsideAngular),(0,Ce.QV)(Rt.insideAngular))}return(0,xe.pX)(this,kn,vt,{spy:{apply:(Tn,lr,Zn)=>{(Tn.startsWith("signIn")||Tn.startsWith("createUser"))&&Zn.then(qn=>Gt.next(qn))}}})}}return Et.\u0275fac=function(ot){return new(ot||Et)(R.LFG(xe.Dh),R.LFG(xe.xv,8),R.LFG(R.Lbi),R.LFG(R.R0b),R.LFG(Re,8),R.LFG(_t,8),R.LFG(_n,8),R.LFG(Nt,8),R.LFG(ut,8),R.LFG(Yt,8))},Et.\u0275prov=R.Yz7({factory:function(){return new Et(R.LFG(xe.Dh),R.LFG(xe.xv,8),R.LFG(R.Lbi),R.LFG(R.R0b),R.LFG(Re,8),R.LFG(_t,8),R.LFG(_n,8),R.LFG(Nt,8),R.LFG(ut,8),R.LFG(Yt,8))},token:Et,providedIn:"any"}),Et})()},9351:(jt,rt,Q)=>{"use strict";Q.d(rt,{Q1:()=>$r,TE:()=>mo});var R=Q(7574),c=Q(5917),G=Q(4402),E=Q(4395),Ve=Q(8002),ve=Q(309),ke=Q(3190),fe=Q(7716),Ce=Q(57),re=Q(9759),Ee=Q(4762),pe=Q(4685),ye=Q(6034),De="firebasestorage.googleapis.com",xe="storageBucket",Re=function(Y){function Z(ce,P){var $=Y.call(this,_t(ce),"Firebase Storage: "+P+" ("+_t(ce)+")")||this;return $.customData={serverResponse:null},$._baseMessage=$.message,Object.setPrototypeOf($,Z.prototype),$}return(0,Ee.ZT)(Z,Y),Z.prototype._codeEquals=function(ce){return _t(ce)===this.code},Object.defineProperty(Z.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(ce){this.customData.serverResponse=ce,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),Z}(pe.ZR);function _t(Y){return"storage/"+Y}function _n(){return new Re("unknown","An unknown error occurred, please check the error payload for server response.")}function Ke(){return new Re("canceled","User canceled the upload/download.")}function vt(){return new Re("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function sn(Y){return new Re("invalid-argument",Y)}function Sn(){return new Re("app-deleted","The Firebase app was deleted.")}function an(Y){return new Re("invalid-root-operation","The operation '"+Y+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bt(Y,Z){return new Re("invalid-format","String does not match format '"+Y+"': "+Z)}function Rt(Y){throw new Re("internal-error","Internal error: "+Y)}var Gt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},kn=function(Z,ce){this.data=Z,this.contentType=ce||null};function Tn(Y,Z){switch(Y){case Gt.RAW:return new kn(lr(Z));case Gt.BASE64:case Gt.BASE64URL:return new kn(qn(Y,Z));case Gt.DATA_URL:return new kn(function(Y){var Z=new Xn(Y);return Z.base64?qn(Gt.BASE64,Z.rest):function(Y){var Z;try{Z=decodeURIComponent(Y)}catch(ce){throw Bt(Gt.DATA_URL,"Malformed data URL.")}return lr(Z)}(Z.rest)}(Z),function(Y){return new Xn(Y).contentType}(Z))}throw _n()}function lr(Y){for(var Z=[],ce=0;ce<Y.length;ce++){var P=Y.charCodeAt(ce);if(P<=127)Z.push(P);else if(P<=2047)Z.push(192|P>>6,128|63&P);else if(55296==(64512&P))if(ce<Y.length-1&&56320==(64512&Y.charCodeAt(ce+1))){var N=P,ee=Y.charCodeAt(++ce);Z.push(240|(P=65536|(1023&N)<<10|1023&ee)>>18,128|P>>12&63,128|P>>6&63,128|63&P)}else Z.push(239,191,189);else 56320==(64512&P)?Z.push(239,191,189):Z.push(224|P>>12,128|P>>6&63,128|63&P)}return new Uint8Array(Z)}function qn(Y,Z){switch(Y){case Gt.BASE64:var ce=-1!==Z.indexOf("-"),P=-1!==Z.indexOf("_");if(ce||P)throw Bt(Y,"Invalid character '"+(ce?"-":"_")+"' found: is it base64url encoded?");break;case Gt.BASE64URL:var N=-1!==Z.indexOf("+"),ee=-1!==Z.indexOf("/");if(N||ee)throw Bt(Y,"Invalid character '"+(N?"+":"/")+"' found: is it base64 encoded?");Z=Z.replace(/-/g,"+").replace(/_/g,"/")}var _e;try{_e=function(Y){return atob(Y)}(Z)}catch(H){throw Bt(Y,"Invalid character found")}for(var Le=new Uint8Array(_e.length),tt=0;tt<_e.length;tt++)Le[tt]=_e.charCodeAt(tt);return Le}var Xn=function(Z){this.base64=!1,this.contentType=null;var ce=Z.match(/^data:([^,]+)?,/);if(null===ce)throw Bt(Gt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var P=ce[1]||null;null!=P&&(this.base64=function(Y,Z){return Y.length>=Z.length&&Y.substring(Y.length-Z.length)===Z}(P,";base64"),this.contentType=this.base64?P.substring(0,P.length-";base64".length):P),this.rest=Z.substring(Z.indexOf(",")+1)},Kt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zn(Y){switch(Y){case"running":case"pausing":case"canceling":return Kt.RUNNING;case"paused":return Kt.PAUSED;case"success":return Kt.SUCCESS;case"canceled":return Kt.CANCELED;case"error":default:return Kt.ERROR}}var Ln=(()=>{return(Y=Ln||(Ln={}))[Y.NO_ERROR=0]="NO_ERROR",Y[Y.NETWORK_ERROR=1]="NETWORK_ERROR",Y[Y.ABORT=2]="ABORT",Ln;var Y})(),Qt=function(){function Y(){var Z=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ln.NO_ERROR,this.sendPromise_=new Promise(function(ce){Z.xhr_.addEventListener("abort",function(){Z.errorCode_=Ln.ABORT,ce()}),Z.xhr_.addEventListener("error",function(){Z.errorCode_=Ln.NETWORK_ERROR,ce()}),Z.xhr_.addEventListener("load",function(){ce()})})}return Y.prototype.send=function(Z,ce,P,$){if(this.sent_)throw Rt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(ce,Z,!0),void 0!==$)for(var N in $)$.hasOwnProperty(N)&&this.xhr_.setRequestHeader(N,$[N].toString());return void 0!==P?this.xhr_.send(P):this.xhr_.send(),this.sendPromise_},Y.prototype.getErrorCode=function(){if(!this.sent_)throw Rt("cannot .getErrorCode() before sending");return this.errorCode_},Y.prototype.getStatus=function(){if(!this.sent_)throw Rt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Z){return-1}},Y.prototype.getResponseText=function(){if(!this.sent_)throw Rt("cannot .getResponseText() before sending");return this.xhr_.responseText},Y.prototype.abort=function(){this.xhr_.abort()},Y.prototype.getResponseHeader=function(Z){return this.xhr_.getResponseHeader(Z)},Y.prototype.addUploadProgressListener=function(Z){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",Z)},Y.prototype.removeUploadProgressListener=function(Z){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",Z)},Y}(),Vr=function(){function Y(){}return Y.prototype.createConnection=function(){return new Qt},Y}(),Kn=function(){function Y(Z,ce){this.bucket=Z,this.path_=ce}return Object.defineProperty(Y.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),Y.prototype.fullServerUrl=function(){var Z=encodeURIComponent;return"/b/"+Z(this.bucket)+"/o/"+Z(this.path)},Y.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},Y.makeFromBucketSpec=function(Z,ce){var P;try{P=Y.makeFromUrl(Z,ce)}catch($){return new Y(Z,"")}if(""===P.path)return P;throw function(Y){return new Re("invalid-default-bucket","Invalid default bucket '"+Y+"'.")}(Z)},Y.makeFromUrl=function(Z,ce){var P=null,$="([A-Za-z0-9.\\-_]+)",_e=new RegExp("^gs://"+$+"(/(.*))?$","i");function tt(Po){Po.path_=decodeURIComponent(Po.path)}for(var j=ce.replace(/[.]/g,"\\."),_r=[{regex:_e,indices:{bucket:1,path:3},postModify:function(Po){"/"===Po.path.charAt(Po.path.length-1)&&(Po.path_=Po.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+j+"/v[A-Za-z0-9_]+/b/"+$+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:tt},{regex:new RegExp("^https?://"+(ce===De?"(?:storage.googleapis.com|storage.cloud.google.com)":ce)+"/"+$+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:tt}],Gr=0;Gr<_r.length;Gr++){var _i=_r[Gr],Dn=_i.regex.exec(Z);if(Dn){var ys=Dn[_i.indices.path];ys||(ys=""),P=new Y(Dn[_i.indices.bucket],ys),_i.postModify(P);break}}if(null==P)throw function(Y){return new Re("invalid-url","Invalid URL '"+Y+"'.")}(Z);return P},Y}(),St=function(){function Y(Z){this.promise_=Promise.reject(Z)}return Y.prototype.getPromise=function(){return this.promise_},Y.prototype.cancel=function(Z){},Y}();function Ot(Y){return"string"==typeof Y||Y instanceof String}function Ue(Y){return pt()&&Y instanceof Blob}function pt(){return"undefined"!=typeof Blob}function bt(Y,Z,ce,P){if(P<Z)throw sn("Invalid value for '"+Y+"'. Expected "+Z+" or greater.");if(P>ce)throw sn("Invalid value for '"+Y+"'. Expected "+ce+" or less.")}function At(Y,Z){var ce=Z.match(/^(\w+):\/\/.+/),$=Z;return null==(null==ce?void 0:ce[1])&&($="https://"+Z),$+"/v0"+Y}function Ut(Y){var Z=encodeURIComponent,ce="?";for(var P in Y)Y.hasOwnProperty(P)&&(ce=ce+(Z(P)+"=")+Z(Y[P])+"&");return ce.slice(0,-1)}var dn=function(){function Y(Z,ce,P,$,N,ee,_e,Le,tt,H,j){var L=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=Z,this.method_=ce,this.headers_=P,this.body_=$,this.successCodes_=N.slice(),this.additionalRetryCodes_=ee.slice(),this.callback_=_e,this.errorCallback_=Le,this.progressCallback_=H,this.timeout_=tt,this.pool_=j,this.promise_=new Promise(function(ae,ze){L.resolve_=ae,L.reject_=ze,L.start_()})}return Y.prototype.start_=function(){var Z=this;function P($,N){var ee=Z.resolve_,_e=Z.reject_,Le=N.connection;if(N.wasSuccessCode)try{var tt=Z.callback_(Le,Le.getResponseText());!function(Y){return void 0!==Y}(tt)?ee():ee(tt)}catch(j){_e(j)}else if(null!==Le)(H=_n()).serverResponse=Le.getResponseText(),_e(Z.errorCallback_?Z.errorCallback_(Le,H):H);else if(N.canceled)_e(H=Z.appDelete_?Sn():Ke());else{var H;_e(H=new Re("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}}this.canceled_?P(0,new pn(!1,null,!0)):this.backoffId_=function(Y,Z,ce){var P=1,$=null,N=!1,ee=0;function _e(){return 2===ee}var Le=!1;function tt(){for(var ze=[],Pt=0;Pt<arguments.length;Pt++)ze[Pt]=arguments[Pt];Le||(Le=!0,Z.apply(null,ze))}function H(ze){$=setTimeout(function(){$=null,Y(j,_e())},ze)}function j(ze){for(var Pt=[],En=1;En<arguments.length;En++)Pt[En-1]=arguments[En];if(!Le){if(ze)return void tt.call.apply(tt,(0,Ee.ev)([null,ze],Pt));var Hr;if(_e()||N)return void tt.call.apply(tt,(0,Ee.ev)([null,ze],Pt));P<64&&(P*=2),1===ee?(ee=2,Hr=0):Hr=1e3*(P+Math.random()),H(Hr)}}var L=!1;function ae(ze){L||(L=!0,!Le&&(null!==$?(ze||(ee=2),clearTimeout($),H(0)):ze||(ee=1)))}return H(0),setTimeout(function(){N=!0,ae(!0)},ce),ae}(function($,N){if(N)$(!1,new pn(!1,null,!0));else{var ee=Z.pool_.createConnection();Z.pendingConnection_=ee,null!==Z.progressCallback_&&ee.addUploadProgressListener(_e),ee.send(Z.url_,Z.method_,Z.body_,Z.headers_).then(function(){null!==Z.progressCallback_&&ee.removeUploadProgressListener(_e),Z.pendingConnection_=null;var Le=ee.getErrorCode()===Ln.NO_ERROR,tt=ee.getStatus();if(Le&&!Z.isRetryStatusCode_(tt)){var j=-1!==Z.successCodes_.indexOf(tt);$(!0,new pn(j,ee))}else{var H=ee.getErrorCode()===Ln.ABORT;$(!1,new pn(!1,null,H))}})}function _e(Le){null!==Z.progressCallback_&&Z.progressCallback_(Le.loaded,Le.lengthComputable?Le.total:-1)}},P,this.timeout_)},Y.prototype.getPromise=function(){return this.promise_},Y.prototype.cancel=function(Z){this.canceled_=!0,this.appDelete_=Z||!1,null!==this.backoffId_&&function(Y){Y(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},Y.prototype.isRetryStatusCode_=function(Z){var ce=Z>=500&&Z<600,$=-1!==[408,429].indexOf(Z),N=-1!==this.additionalRetryCodes_.indexOf(Z);return ce||$||N},Y}(),pn=function(Z,ce,P){this.wasSuccessCode=Z,this.connection=ce,this.canceled=!!P};function Xe(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function qt(){for(var Y=[],Z=0;Z<arguments.length;Z++)Y[Z]=arguments[Z];var ce=Xe();if(void 0!==ce){for(var P=new ce,$=0;$<Y.length;$++)P.append(Y[$]);return P.getBlob()}if(pt())return new Blob(Y);throw new Re("unsupported-environment","This browser doesn't seem to support creating Blobs")}var sr=function(){function Y(Z,ce){var P=0,$="";Ue(Z)?(this.data_=Z,P=Z.size,$=Z.type):Z instanceof ArrayBuffer?(ce?this.data_=new Uint8Array(Z):(this.data_=new Uint8Array(Z.byteLength),this.data_.set(new Uint8Array(Z))),P=this.data_.length):Z instanceof Uint8Array&&(ce?this.data_=Z:(this.data_=new Uint8Array(Z.length),this.data_.set(Z)),P=Z.length),this.size_=P,this.type_=$}return Y.prototype.size=function(){return this.size_},Y.prototype.type=function(){return this.type_},Y.prototype.slice=function(Z,ce){if(Ue(this.data_)){var $=function(Y,Z,ce){return Y.webkitSlice?Y.webkitSlice(Z,ce):Y.mozSlice?Y.mozSlice(Z,ce):Y.slice?Y.slice(Z,ce):null}(this.data_,Z,ce);return null===$?null:new Y($)}return new Y(new Uint8Array(this.data_.buffer,Z,ce-Z),!0)},Y.getBlob=function(){for(var Z=[],ce=0;ce<arguments.length;ce++)Z[ce]=arguments[ce];if(pt()){var P=Z.map(function(Le){return Le instanceof Y?Le.data_:Le});return new Y(qt.apply(null,P))}var $=Z.map(function(Le){return Ot(Le)?Tn(Gt.RAW,Le).data:Le.data_}),N=0;$.forEach(function(Le){N+=Le.byteLength});var ee=new Uint8Array(N),_e=0;return $.forEach(function(Le){for(var tt=0;tt<Le.length;tt++)ee[_e++]=Le[tt]}),new Y(ee,!0)},Y.prototype.uploadData=function(){return this.data_},Y}();function Vn(Y){var Z;try{Z=JSON.parse(Y)}catch(ce){return null}return function(Y){return"object"==typeof Y&&!Array.isArray(Y)}(Z)?Z:null}function Br(Y){var Z=Y.lastIndexOf("/",Y.length-2);return-1===Z?Y:Y.slice(Z+1)}function Xr(Y,Z){return Z}var Dr=function(Z,ce,P,$){this.server=Z,this.local=ce||Z,this.writable=!!P,this.xform=$||Xr},Mi=null;function Qi(){if(Mi)return Mi;var Y=[];Y.push(new Dr("bucket")),Y.push(new Dr("generation")),Y.push(new Dr("metageneration")),Y.push(new Dr("name","fullPath",!0));var ce=new Dr("name");ce.xform=function(N,ee){return function(Y){return!Ot(Y)||Y.length<2?Y:Br(Y)}(ee)},Y.push(ce);var $=new Dr("size");return $.xform=function(N,ee){return void 0!==ee?Number(ee):ee},Y.push($),Y.push(new Dr("timeCreated")),Y.push(new Dr("updated")),Y.push(new Dr("md5Hash",null,!0)),Y.push(new Dr("cacheControl",null,!0)),Y.push(new Dr("contentDisposition",null,!0)),Y.push(new Dr("contentEncoding",null,!0)),Y.push(new Dr("contentLanguage",null,!0)),Y.push(new Dr("contentType",null,!0)),Y.push(new Dr("metadata","customMetadata",!0)),Mi=Y}function Fr(Y,Z,ce){var P=Vn(Z);return null===P?null:function(Y,Z,ce){for(var P={type:"file"},$=ce.length,N=0;N<$;N++){var ee=ce[N];P[ee.local]=ee.xform(P,Z[ee.server])}return function(Y,Z){Object.defineProperty(Y,"ref",{get:function(){var N=new Kn(Y.bucket,Y.fullPath);return Z._makeStorageReference(N)}})}(P,Y),P}(Y,P,ce)}function bn(Y,Z){for(var ce={},P=Z.length,$=0;$<P;$++){var N=Z[$];N.writable&&(ce[N.server]=Y[N.local])}return JSON.stringify(ce)}var Ur="prefixes";var ln=function(Z,ce,P,$){this.url=Z,this.method=ce,this.handler=P,this.timeout=$,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function xn(Y){if(!Y)throw _n()}function Kr(Y,Z){return function(P,$){var N=Fr(Y,$,Z);return xn(null!==N),N}}function ti(Y){return function(ce,P){var $;return($=401===ce.getStatus()?ce.getResponseText().includes("Firebase App Check token is invalid")?new Re("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Re("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===ce.getStatus()?function(Y){return new Re("quota-exceeded","Quota for bucket '"+Y+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(Y.bucket):403===ce.getStatus()?function(Y){return new Re("unauthorized","User does not have permission to access '"+Y+"'.")}(Y.path):P).serverResponse=P.serverResponse,$}}function Er(Y){var Z=ti(Y);return function(P,$){var N=Z(P,$);return 404===P.getStatus()&&(N=function(Y){return new Re("object-not-found","Object '"+Y+"' does not exist.")}(Y.path)),N.serverResponse=$.serverResponse,N}}function To(Y,Z,ce){var $=At(Z.fullServerUrl(),Y.host),ee=Y.maxOperationRetryTime,_e=new ln($,"GET",Kr(Y,ce),ee);return _e.errorHandler=Er(Z),_e}function lo(Y,Z,ce,P,$){var N={};N.prefix=Z.isRoot?"":Z.path+"/",ce&&ce.length>0&&(N.delimiter=ce),P&&(N.pageToken=P),$&&(N.maxResults=$);var _e=At(Z.bucketOnlyServerUrl(),Y.host),tt=Y.maxOperationRetryTime,H=new ln(_e,"GET",function(Y,Z){return function(P,$){var N=function(Y,Z,ce){var P=Vn(ce);return null===P?null:function(Y,Z,ce){var P={prefixes:[],items:[],nextPageToken:ce.nextPageToken};if(ce[Ur])for(var $=0,N=ce[Ur];$<N.length;$++){var _e=N[$].replace(/\/$/,""),Le=Y._makeStorageReference(new Kn(Z,_e));P.prefixes.push(Le)}if(ce.items)for(var tt=0,H=ce.items;tt<H.length;tt++)Le=Y._makeStorageReference(new Kn(Z,H[tt].name)),P.items.push(Le);return P}(Y,Z,P)}(Y,Z,$);return xn(null!==N),N}}(Y,Z.bucket),tt);return H.urlParams=N,H.errorHandler=ti(Z),H}function st(Y,Z,ce){var P=Object.assign({},ce);return P.fullPath=Y.path,P.size=Z.size(),P.contentType||(P.contentType=function(Y,Z){return Z&&Z.type()||"application/octet-stream"}(0,Z)),P}var cn=function(Z,ce,P,$){this.current=Z,this.total=ce,this.finalized=!!P,this.metadata=$||null};function Hn(Y,Z){var ce=null;try{ce=Y.getResponseHeader("X-Goog-Upload-Status")}catch($){xn(!1)}return xn(!!ce&&-1!==(Z||["active"]).indexOf(ce)),ce}var mr=function(Z,ce,P){if(function(Y){return"function"==typeof Y}(Z)||null!=ce||null!=P)this.next=Z,this.error=ce,this.complete=P;else{var N=Z;this.next=N.next,this.error=N.error,this.complete=N.complete}};function Ii(Y){return function(){for(var Z=[],ce=0;ce<arguments.length;ce++)Z[ce]=arguments[ce];Promise.resolve().then(function(){return Y.apply(void 0,Z)})}}var io=function(){function Y(Z,ce,P){var $=this;void 0===P&&(P=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=Z,this._blob=ce,this._metadata=P,this._mappings=Qi(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(N){$._request=void 0,$._chunkMultiplier=1,N._codeEquals("canceled")?($._needToFetchStatus=!0,$.completeTransitions_()):($._error=N,$._transition("error"))},this._metadataErrorHandler=function(N){$._request=void 0,N._codeEquals("canceled")?$.completeTransitions_():($._error=N,$._transition("error"))},this._promise=new Promise(function(N,ee){$._resolve=N,$._reject=ee,$._start()}),this._promise.then(null,function(){})}return Y.prototype._makeProgressCallback=function(){var Z=this,ce=this._transferred;return function(P){return Z._updateProgress(ce+P)}},Y.prototype._shouldDoResumable=function(Z){return Z.size()>262144},Y.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},Y.prototype._resolveToken=function(Z){var ce=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(P){var $=P[0],N=P[1];switch(ce._state){case"running":Z($,N);break;case"canceling":ce._transition("canceled");break;case"pausing":ce._transition("paused")}})},Y.prototype._createResumable=function(){var Z=this;this._resolveToken(function(ce,P){var $=function(Y,Z,ce,P,$){var N=Z.bucketOnlyServerUrl(),ee=st(Z,P,$),_e={name:ee.fullPath},Le=At(N,Y.host),H={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+P.size(),"X-Goog-Upload-Header-Content-Type":ee.contentType,"Content-Type":"application/json; charset=utf-8"},j=bn(ee,ce),ze=new ln(Le,"POST",function(Pt){var En;Hn(Pt);try{En=Pt.getResponseHeader("X-Goog-Upload-URL")}catch(pr){xn(!1)}return xn(Ot(En)),En},Y.maxUploadRetryTime);return ze.urlParams=_e,ze.headers=H,ze.body=j,ze.errorHandler=ti(Z),ze}(Z._ref.storage,Z._ref._location,Z._mappings,Z._blob,Z._metadata),N=Z._ref.storage._makeRequest($,ce,P);Z._request=N,N.getPromise().then(function(ee){Z._request=void 0,Z._uploadUrl=ee,Z._needToFetchStatus=!1,Z.completeTransitions_()},Z._errorHandler)})},Y.prototype._fetchStatus=function(){var Z=this,ce=this._uploadUrl;this._resolveToken(function(P,$){var N=function(Y,Z,ce,P){var Le=new ln(ce,"POST",function(tt){var H=Hn(tt,["active","final"]),j=null;try{j=tt.getResponseHeader("X-Goog-Upload-Size-Received")}catch(ae){xn(!1)}j||xn(!1);var L=Number(j);return xn(!isNaN(L)),new cn(L,P.size(),"final"===H)},Y.maxUploadRetryTime);return Le.headers={"X-Goog-Upload-Command":"query"},Le.errorHandler=ti(Z),Le}(Z._ref.storage,Z._ref._location,ce,Z._blob),ee=Z._ref.storage._makeRequest(N,P,$);Z._request=ee,ee.getPromise().then(function(_e){_e=_e,Z._request=void 0,Z._updateProgress(_e.current),Z._needToFetchStatus=!1,_e.finalized&&(Z._needToFetchMetadata=!0),Z.completeTransitions_()},Z._errorHandler)})},Y.prototype._continueUpload=function(){var Z=this,ce=262144*this._chunkMultiplier,P=new cn(this._transferred,this._blob.size()),$=this._uploadUrl;this._resolveToken(function(N,ee){var _e;try{_e=function(Y,Z,ce,P,$,N,ee,_e){var Le=new cn(0,0);if(ee?(Le.current=ee.current,Le.total=ee.total):(Le.current=0,Le.total=P.size()),P.size()!==Le.total)throw new Re("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var tt=Le.total-Le.current,H=tt;$>0&&(H=Math.min(H,$));var j=Le.current,ze={"X-Goog-Upload-Command":H===tt?"upload, finalize":"upload","X-Goog-Upload-Offset":""+Le.current},Pt=P.slice(j,j+H);if(null===Pt)throw vt();var _r=new ln(ce,"POST",function(Gr,_i){var Po,Dn=Hn(Gr,["active","final"]),eo=Le.current+H,ys=P.size();return Po="final"===Dn?Kr(Z,N)(Gr,_i):null,new cn(eo,ys,"final"===Dn,Po)},Z.maxUploadRetryTime);return _r.headers=ze,_r.body=Pt.uploadData(),_r.progressCallback=_e||null,_r.errorHandler=ti(Y),_r}(Z._ref._location,Z._ref.storage,$,Z._blob,ce,Z._mappings,P,Z._makeProgressCallback())}catch(tt){return Z._error=tt,void Z._transition("error")}var Le=Z._ref.storage._makeRequest(_e,N,ee);Z._request=Le,Le.getPromise().then(function(tt){Z._increaseMultiplier(),Z._request=void 0,Z._updateProgress(tt.current),tt.finalized?(Z._metadata=tt.metadata,Z._transition("success")):Z.completeTransitions_()},Z._errorHandler)})},Y.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},Y.prototype._fetchMetadata=function(){var Z=this;this._resolveToken(function(ce,P){var $=To(Z._ref.storage,Z._ref._location,Z._mappings),N=Z._ref.storage._makeRequest($,ce,P);Z._request=N,N.getPromise().then(function(ee){Z._request=void 0,Z._metadata=ee,Z._transition("success")},Z._metadataErrorHandler)})},Y.prototype._oneShotUpload=function(){var Z=this;this._resolveToken(function(ce,P){var $=function(Y,Z,ce,P,$){var N=Z.bucketOnlyServerUrl(),ee={"X-Goog-Upload-Protocol":"multipart"},Le=function(){for(var _r="",Gr=0;Gr<2;Gr++)_r+=Math.random().toString().slice(2);return _r}();ee["Content-Type"]="multipart/related; boundary="+Le;var tt=st(Z,P,$),H=bn(tt,ce),ae=sr.getBlob("--"+Le+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+H+"\r\n--"+Le+"\r\nContent-Type: "+tt.contentType+"\r\n\r\n",P,"\r\n--"+Le+"--");if(null===ae)throw vt();var ze={name:tt.fullPath},Pt=At(N,Y.host),pr=Y.maxUploadRetryTime,Hr=new ln(Pt,"POST",Kr(Y,ce),pr);return Hr.urlParams=ze,Hr.headers=ee,Hr.body=ae.uploadData(),Hr.errorHandler=ti(Z),Hr}(Z._ref.storage,Z._ref._location,Z._mappings,Z._blob,Z._metadata),N=Z._ref.storage._makeRequest($,ce,P);Z._request=N,N.getPromise().then(function(ee){Z._request=void 0,Z._metadata=ee,Z._updateProgress(Z._blob.size()),Z._transition("success")},Z._errorHandler)})},Y.prototype._updateProgress=function(Z){var ce=this._transferred;this._transferred=Z,this._transferred!==ce&&this._notifyObservers()},Y.prototype._transition=function(Z){if(this._state!==Z)switch(Z){case"canceling":case"pausing":this._state=Z,void 0!==this._request&&this._request.cancel();break;case"running":var ce="paused"===this._state;this._state=Z,ce&&(this._notifyObservers(),this._start());break;case"paused":this._state=Z,this._notifyObservers();break;case"canceled":this._error=Ke(),this._state=Z,this._notifyObservers();break;case"error":case"success":this._state=Z,this._notifyObservers()}},Y.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(Y.prototype,"snapshot",{get:function(){var Z=zn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:Z,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),Y.prototype.on=function(Z,ce,P,$){var N=this,ee=new mr(ce,P,$);return this._addObserver(ee),function(){N._removeObserver(ee)}},Y.prototype.then=function(Z,ce){return this._promise.then(Z,ce)},Y.prototype.catch=function(Z){return this.then(null,Z)},Y.prototype._addObserver=function(Z){this._observers.push(Z),this._notifyObserver(Z)},Y.prototype._removeObserver=function(Z){var ce=this._observers.indexOf(Z);-1!==ce&&this._observers.splice(ce,1)},Y.prototype._notifyObservers=function(){var Z=this;this._finishPromise(),this._observers.slice().forEach(function(P){Z._notifyObserver(P)})},Y.prototype._finishPromise=function(){if(void 0!==this._resolve){var Z=!0;switch(zn(this._state)){case Kt.SUCCESS:Ii(this._resolve.bind(null,this.snapshot))();break;case Kt.CANCELED:case Kt.ERROR:Ii(this._reject.bind(null,this._error))();break;default:Z=!1}Z&&(this._resolve=void 0,this._reject=void 0)}},Y.prototype._notifyObserver=function(Z){switch(zn(this._state)){case Kt.RUNNING:case Kt.PAUSED:Z.next&&Ii(Z.next.bind(Z,this.snapshot))();break;case Kt.SUCCESS:Z.complete&&Ii(Z.complete.bind(Z))();break;case Kt.CANCELED:case Kt.ERROR:Z.error&&Ii(Z.error.bind(Z,this._error))();break;default:Z.error&&Ii(Z.error.bind(Z,this._error))()}},Y.prototype.resume=function(){var Z="paused"===this._state||"pausing"===this._state;return Z&&this._transition("running"),Z},Y.prototype.pause=function(){var Z="running"===this._state;return Z&&this._transition("pausing"),Z},Y.prototype.cancel=function(){var Z="running"===this._state||"pausing"===this._state;return Z&&this._transition("canceling"),Z},Y}(),jr=function(){function Y(Z,ce){this._service=Z,this._location=ce instanceof Kn?ce:Kn.makeFromUrl(ce,Z.host)}return Y.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},Y.prototype._newRef=function(Z,ce){return new Y(Z,ce)},Object.defineProperty(Y.prototype,"root",{get:function(){var Z=new Kn(this._location.bucket,"");return this._newRef(this._service,Z)},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"name",{get:function(){return Br(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"parent",{get:function(){var Z=function(Y){if(0===Y.length)return null;var Z=Y.lastIndexOf("/");return-1===Z?"":Y.slice(0,Z)}(this._location.path);if(null===Z)return null;var ce=new Kn(this._location.bucket,Z);return new Y(this._service,ce)},enumerable:!1,configurable:!0}),Y.prototype._throwIfRoot=function(Z){if(""===this._location.path)throw an(Z)},Y}();function ar(Y){var Z={prefixes:[],items:[]};return Bn(Y,Z).then(function(){return Z})}function Bn(Y,Z,ce){return(0,Ee.mG)(this,void 0,void 0,function(){var $,N,ee;return(0,Ee.Jh)(this,function(_e){switch(_e.label){case 0:return[4,zr(Y,{pageToken:ce})];case 1:return $=_e.sent(),(N=Z.prefixes).push.apply(N,$.prefixes),(ee=Z.items).push.apply(ee,$.items),null==$.nextPageToken?[3,3]:[4,Bn(Y,Z,$.nextPageToken)];case 2:_e.sent(),_e.label=3;case 3:return[2]}})})}function zr(Y,Z){return(0,Ee.mG)(this,void 0,void 0,function(){var ce,P;return(0,Ee.Jh)(this,function($){switch($.label){case 0:return null!=Z&&"number"==typeof Z.maxResults&&bt("options.maxResults",1,1e3,Z.maxResults),P=lo(Y.storage,Y._location,"/",(ce=Z||{}).pageToken,ce.maxResults),[4,Y.storage.makeRequestWithTokens(P)];case 1:return[2,$.sent().getPromise()]}})})}function ni(Y){return(0,Ee.mG)(this,void 0,void 0,function(){var Z;return(0,Ee.Jh)(this,function(ce){switch(ce.label){case 0:return Y._throwIfRoot("getDownloadURL"),Z=function(Y,Z,ce){var $=At(Z.fullServerUrl(),Y.host),ee=Y.maxOperationRetryTime,_e=new ln($,"GET",function(Y,Z){return function(P,$){var N=Fr(Y,$,Z);return xn(null!==N),function(Y,Z,ce){var P=Vn(Z);if(null===P||!Ot(P.downloadTokens))return null;var $=P.downloadTokens;if(0===$.length)return null;var N=encodeURIComponent;return $.split(",").map(function(Le){var H=Y.fullPath;return At("/b/"+N(Y.bucket)+"/o/"+N(H),ce)+Ut({alt:"media",token:Le})})[0]}(N,$,Y.host)}}(Y,ce),ee);return _e.errorHandler=Er(Z),_e}(Y.storage,Y._location,Qi()),[4,Y.storage.makeRequestWithTokens(Z)];case 1:return[2,ce.sent().getPromise().then(function(P){if(null===P)throw new Re("no-download-url","The given file does not have any download URLs.");return P})]}})})}function Gi(Y,Z){var ce=function(Y,Z){var ce=Z.split("/").filter(function(P){return P.length>0}).join("/");return 0===Y.length?ce:Y+"/"+ce}(Y._location.path,Z),P=new Kn(Y._location.bucket,ce);return new jr(Y.storage,P)}function ai(Y){return/^[A-Za-z]+:\/\//.test(Y)}function Nr(Y,Z){if(Y instanceof Do){var ce=Y;if(null==ce._bucket)throw new Re("no-default-bucket","No default bucket found. Did you set the '"+xe+"' property when initializing the app?");var P=new jr(ce,ce._bucket);return null!=Z?Nr(P,Z):P}return void 0!==Z?Gi(Y,Z):Y}function rs(Y,Z){if(Z&&ai(Z)){if(Y instanceof Do)return function(Y,Z){return new jr(Y,Z)}(Y,Z);throw sn("To use ref(service, url), the first argument must be a Storage instance.")}return Nr(Y,Z)}function Bi(Y,Z){var ce=null==Z?void 0:Z[xe];return null==ce?null:Kn.makeFromBucketSpec(ce,Y)}var Do=function(){function Y(Z,ce,P,$,N,ee){this.app=Z,this._authProvider=ce,this._appCheckProvider=P,this._pool=$,this._url=N,this._firebaseVersion=ee,this._bucket=null,this._host=De,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=N?Kn.makeFromBucketSpec(N,this._host):Bi(this._host,this.app.options)}return Object.defineProperty(Y.prototype,"host",{get:function(){return this._host},set:function(Z){this._host=Z,this._bucket=null!=this._url?Kn.makeFromBucketSpec(this._url,Z):Bi(Z,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(Z){bt("time",0,Number.POSITIVE_INFINITY,Z),this._maxUploadRetryTime=Z},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(Z){bt("time",0,Number.POSITIVE_INFINITY,Z),this._maxOperationRetryTime=Z},enumerable:!1,configurable:!0}),Y.prototype._getAuthToken=function(){return(0,Ee.mG)(this,void 0,void 0,function(){var Z,ce;return(0,Ee.Jh)(this,function(P){switch(P.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(Z=this._authProvider.getImmediate({optional:!0}))?[4,Z.getToken()]:[3,2];case 1:if(null!==(ce=P.sent()))return[2,ce.accessToken];P.label=2;case 2:return[2,null]}})})},Y.prototype._getAppCheckToken=function(){return(0,Ee.mG)(this,void 0,void 0,function(){var Z;return(0,Ee.Jh)(this,function(P){switch(P.label){case 0:return(Z=this._appCheckProvider.getImmediate({optional:!0}))?[4,Z.getToken()]:[3,2];case 1:return[2,P.sent().token];case 2:return[2,null]}})})},Y.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(Z){return Z.cancel()}),this._requests.clear()),Promise.resolve()},Y.prototype._makeStorageReference=function(Z){return new jr(this,Z)},Y.prototype._makeRequest=function(Z,ce,P){var $=this;if(this._deleted)return new St(Sn());var N=function(Y,Z,ce,P,$,N){var ee=Ut(Y.urlParams),_e=Y.url+ee,Le=Object.assign({},Y.headers);return function(Y,Z){Z&&(Y["X-Firebase-GMPID"]=Z)}(Le,Z),function(Y,Z){null!==Z&&Z.length>0&&(Y.Authorization="Firebase "+Z)}(Le,ce),function(Y,Z){Y["X-Firebase-Storage-Version"]="webjs/"+(null!=Z?Z:"AppManager")}(Le,N),function(Y,Z){null!==Z&&(Y["X-Firebase-AppCheck"]=Z)}(Le,P),new dn(_e,Y.method,Le,Y.body,Y.successCodes,Y.additionalRetryCodes,Y.handler,Y.errorHandler,Y.timeout,Y.progressCallback,$)}(Z,this._appId,ce,P,this._pool,this._firebaseVersion);return this._requests.add(N),N.getPromise().then(function(){return $._requests.delete(N)},function(){return $._requests.delete(N)}),N},Y.prototype.makeRequestWithTokens=function(Z){return(0,Ee.mG)(this,void 0,void 0,function(){var ce;return(0,Ee.Jh)(this,function(N){switch(N.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return ce=N.sent(),[2,this._makeRequest(Z,ce[0],ce[1])]}})})},Y}();function po(Y,Z){return rs(Y=(0,pe.m9)(Y),Z)}var Y,Z,ui=function(){function Y(Z,ce,P){this._delegate=Z,this.task=ce,this.ref=P}return Object.defineProperty(Y.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),Y}(),Xi=function(){function Y(Z,ce){this._delegate=Z,this._ref=ce,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(Y.prototype,"snapshot",{get:function(){return new ui(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),Y.prototype.then=function(Z,ce){var P=this;return this._delegate.then(function($){if(Z)return Z(new ui($,P,P._ref))},ce)},Y.prototype.on=function(Z,ce,P,$){var N=this,ee=void 0;return ce&&(ee="function"==typeof ce?function(_e){return ce(new ui(_e,N,N._ref))}:{next:ce.next?function(_e){return ce.next(new ui(_e,N,N._ref))}:void 0,complete:ce.complete||void 0,error:ce.error||void 0}),this._delegate.on(Z,ee,P||void 0,$||void 0)},Y}(),ri=function(){function Y(Z,ce){this._delegate=Z,this._service=ce}return Object.defineProperty(Y.prototype,"prefixes",{get:function(){var Z=this;return this._delegate.prefixes.map(function(ce){return new ie(ce,Z._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"items",{get:function(){var Z=this;return this._delegate.items.map(function(ce){return new ie(ce,Z._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),Y}(),ie=function(){function Y(Z,ce){this._delegate=Z,this.storage=ce}return Object.defineProperty(Y.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),Y.prototype.toString=function(){return this._delegate.toString()},Y.prototype.child=function(Z){return new Y(function(Y,Z){return Gi(Y,Z)}(this._delegate,Z),this.storage)},Object.defineProperty(Y.prototype,"root",{get:function(){return new Y(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"parent",{get:function(){var Z=this._delegate.parent;return null==Z?null:new Y(Z,this.storage)},enumerable:!1,configurable:!0}),Y.prototype.put=function(Z,ce){return this._throwIfRoot("put"),new Xi(function(Y,Z,ce){return function(Y,Z,ce){return Y._throwIfRoot("uploadBytesResumable"),new io(Y,new sr(Z),ce)}(Y=(0,pe.m9)(Y),Z,ce)}(this._delegate,Z,ce),this)},Y.prototype.putString=function(Z,ce,P){void 0===ce&&(ce=Gt.RAW),this._throwIfRoot("putString");var $=Tn(ce,Z),N=(0,Ee.pi)({},P);return null==N.contentType&&null!=$.contentType&&(N.contentType=$.contentType),new Xi(new io(this._delegate,new sr($.data,!0),N),this)},Y.prototype.listAll=function(){var Z=this;return function(Y){return ar(Y=(0,pe.m9)(Y))}(this._delegate).then(function(ce){return new ri(ce,Z.storage)})},Y.prototype.list=function(Z){var ce=this;return function(Y,Z){return zr(Y=(0,pe.m9)(Y),Z)}(this._delegate,Z||void 0).then(function(P){return new ri(P,ce.storage)})},Y.prototype.getMetadata=function(){return function(Y){return function(Y){return(0,Ee.mG)(this,void 0,void 0,function(){var Z;return(0,Ee.Jh)(this,function(ce){switch(ce.label){case 0:return Y._throwIfRoot("getMetadata"),Z=To(Y.storage,Y._location,Qi()),[4,Y.storage.makeRequestWithTokens(Z)];case 1:return[2,ce.sent().getPromise()]}})})}(Y=(0,pe.m9)(Y))}(this._delegate)},Y.prototype.updateMetadata=function(Z){return function(Y,Z){return function(Y,Z){return(0,Ee.mG)(this,void 0,void 0,function(){var ce;return(0,Ee.Jh)(this,function(P){switch(P.label){case 0:return Y._throwIfRoot("updateMetadata"),ce=function(Y,Z,ce,P){var N=At(Z.fullServerUrl(),Y.host),_e=bn(ce,P),tt=Y.maxOperationRetryTime,H=new ln(N,"PATCH",Kr(Y,P),tt);return H.headers={"Content-Type":"application/json; charset=utf-8"},H.body=_e,H.errorHandler=Er(Z),H}(Y.storage,Y._location,Z,Qi()),[4,Y.storage.makeRequestWithTokens(ce)];case 1:return[2,P.sent().getPromise()]}})})}(Y=(0,pe.m9)(Y),Z)}(this._delegate,Z)},Y.prototype.getDownloadURL=function(){return function(Y){return ni(Y=(0,pe.m9)(Y))}(this._delegate)},Y.prototype.delete=function(){return this._throwIfRoot("delete"),function(Y){return function(Y){return(0,Ee.mG)(this,void 0,void 0,function(){var Z;return(0,Ee.Jh)(this,function(ce){switch(ce.label){case 0:return Y._throwIfRoot("deleteObject"),Z=function(Y,Z){var P=At(Z.fullServerUrl(),Y.host),_e=new ln(P,"DELETE",function(Le,tt){},Y.maxOperationRetryTime);return _e.successCodes=[200,204],_e.errorHandler=Er(Z),_e}(Y.storage,Y._location),[4,Y.storage.makeRequestWithTokens(Z)];case 1:return[2,ce.sent().getPromise()]}})})}(Y=(0,pe.m9)(Y))}(this._delegate)},Y.prototype._throwIfRoot=function(Z){if(""===this._delegate._location.path)throw an(Z)},Y}(),qe=function(){function Y(Z,ce){this.app=Z,this._delegate=ce}return Object.defineProperty(Y.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),Y.prototype.ref=function(Z){if(ai(Z))throw sn("ref() expected a child path but got a URL, use refFromURL instead.");return new ie(po(this._delegate,Z),this)},Y.prototype.refFromURL=function(Z){if(!ai(Z))throw sn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Kn.makeFromUrl(Z,this._delegate.host)}catch(ce){throw sn("refFromUrl() expected a valid full URL but got an invalid one.")}return new ie(po(this._delegate,Z),this)},Y.prototype.setMaxUploadRetryTime=function(Z){this._delegate.maxUploadRetryTime=Z},Y.prototype.setMaxOperationRetryTime=function(Z){this._delegate.maxOperationRetryTime=Z},Y.prototype.useEmulator=function(Z,ce,P){void 0===P&&(P={}),function(Y,Z,ce,P){void 0===P&&(P={}),function(Y,Z,ce,P){void 0===P&&(P={}),Y.host="http://"+Z+":"+ce;var $=P.mockUserToken;$&&(Y._overrideAuthToken="string"==typeof $?$:(0,pe.Sg)($,Y.app.options.projectId))}(Y,Z,ce,P)}(this._delegate,Z,ce,P)},Y}();function hr(Y){const Z=function(Y){return new R.y(Z=>{const ce=ee=>Z.next(ee);ce(Y.snapshot);const N=Y.on("state_changed",ce);return Y.then(ee=>{ce(ee),Z.complete()},ee=>{ce(Y.snapshot),(ee=>{Z.error(ee)})(ee)}),function(){N()}}).pipe((0,E.b)(0))}(Y);return{task:Y,then:Y.then.bind(Y),catch:Y.catch.bind(Y),pause:Y.pause.bind(Y),cancel:Y.cancel.bind(Y),resume:Y.resume.bind(Y),snapshotChanges:()=>Z,percentageChanges:()=>Z.pipe((0,Ve.U)(ce=>ce.bytesTransferred/ce.totalBytes*100))}}function xi(Y,Z,ce){return{getDownloadURL:()=>(0,c.of)(void 0).pipe((0,ve.QV)(Z.outsideAngular),(0,ke.w)(()=>Y.getDownloadURL()),ce),getMetadata:()=>(0,c.of)(void 0).pipe((0,ve.QV)(Z.outsideAngular),(0,ke.w)(()=>Y.getMetadata()),ce),delete:()=>(0,G.D)(Y.delete()),child:P=>xi(Y.child(P),Z,ce),updateMetadata:P=>(0,G.D)(Y.updateMetadata(P)),put:(P,$)=>hr(Y.put(P,$)),putString:(P,$,N)=>hr(Y.putString(P,$,N)),listAll:()=>(0,G.D)(Y.listAll())}}Z={TaskState:Kt,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:Gt,Storage:Do,Reference:ie},(Y=re.Z).INTERNAL.registerComponent(new ye.wA("storage",function(Y,Z){var ce=Z.instanceIdentifier,P=Y.getProvider("app").getImmediate(),$=Y.getProvider("auth-internal"),N=Y.getProvider("app-check-internal");return new qe(P,new Do(P,$,N,new Vr,ce,re.Z.SDK_VERSION))},"PUBLIC").setServiceProps(Z).setMultipleInstances(!0)),Y.registerVersion("@firebase/storage","0.7.0"),Q(8583);const Bo=new fe.OlP("angularfire2.storageBucket"),Pi=new fe.OlP("angularfire2.storage.maxUploadRetryTime"),co=new fe.OlP("angularfire2.storage.maxOperationRetryTime");let $r=(()=>{class Y{constructor(ce,P,$,N,ee,_e,Le){this.schedulers=new Ce.HU(ee),this.keepUnstableUntilFirst=(0,Ce.ss)(this.schedulers);const tt=(0,Ce.on)(ce,ee,P);this.storage=(0,Ce.sI)(`${tt.name}.storage.${$}`,"AngularFireStorage",tt,()=>{const H=ee.runOutsideAngular(()=>tt.storage($||void 0));return _e&&H.setMaxUploadRetryTime(_e),Le&&H.setMaxOperationRetryTime(Le),H},[_e,Le])}ref(ce){return xi(this.storage.ref(ce),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(ce){return xi(this.storage.refFromURL(ce),this.schedulers,this.keepUnstableUntilFirst)}upload(ce,P,$){return xi(this.storage.ref(ce),this.schedulers,this.keepUnstableUntilFirst).put(P,$)}}return Y.\u0275fac=function(ce){return new(ce||Y)(fe.LFG(Ce.Dh),fe.LFG(Ce.xv,8),fe.LFG(Bo,8),fe.LFG(fe.Lbi),fe.LFG(fe.R0b),fe.LFG(Pi,8),fe.LFG(co,8))},Y.\u0275prov=fe.Yz7({factory:function(){return new Y(fe.LFG(Ce.Dh),fe.LFG(Ce.xv,8),fe.LFG(Bo,8),fe.LFG(fe.Lbi),fe.LFG(fe.R0b),fe.LFG(Pi,8),fe.LFG(co,8))},token:Y,providedIn:"any"}),Y})(),jo=(()=>{class Y{}return Y.\u0275fac=function(ce){return new(ce||Y)},Y.\u0275mod=fe.oAB({type:Y}),Y.\u0275inj=fe.cJS({}),Y})(),mo=(()=>{class Y{}return Y.\u0275fac=function(ce){return new(ce||Y)},Y.\u0275mod=fe.oAB({type:Y}),Y.\u0275inj=fe.cJS({providers:[$r],imports:[jo]}),Y})()},57:(jt,rt,Q)=>{"use strict";Q.d(rt,{hO:()=>Et,xv:()=>X,Dh:()=>We,HU:()=>Ee,GT:()=>xe,sI:()=>wt,on:()=>_n,ss:()=>pe,pX:()=>De,yq:()=>Nt});var R=Q(7771),c=Q(3637),G=Q(3342),E=Q(9673),Ve=Q(309),ve=Q(7716),ke=Q(2329);function fe(){}jt=Q.hmd(jt);class Ce{constructor(ot,it=R.N){this.zone=ot,this.delegate=it}now(){return this.delegate.now()}schedule(ot,it,nt){const vt=this.zone;return this.delegate.schedule(function(tn){vt.runGuarded(()=>{ot.apply(this,[tn])})},it,nt)}}class re{constructor(ot){this.zone=ot,this.task=null}call(ot,it){const nt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fe,{},fe,fe)),it.pipe((0,G.b)({next:nt,complete:nt,error:nt})).subscribe(ot).add(nt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class Ee{constructor(ot){this.ngZone=ot,this.outsideAngular=ot.runOutsideAngular(()=>new Ce(Zone.current)),this.insideAngular=ot.run(()=>new Ce(Zone.current,c.z))}}function pe(Ke){return function(it){return(it=it.lift(new re(Ke.ngZone))).pipe((0,E.R)(Ke.outsideAngular),(0,Ve.QV)(Ke.insideAngular))}}const ye=["ngOnDestroy"],De=(Ke,ot,it,nt={})=>new Proxy(Ke,{get:(vt,at)=>it.runOutsideAngular(()=>{var tn;if(Ke[at])return(null===(tn=null==nt?void 0:nt.spy)||void 0===tn?void 0:tn.get)&&nt.spy.get(at,Ke[at]),Ke[at];if(ye.indexOf(at)>-1)return()=>{};const sn=ot.toPromise().then(Sn=>{const an=Sn&&Sn[at];return"function"==typeof an?an.bind(Sn):an&&an.then?an.then(Bt=>it.run(()=>Bt)):it.run(()=>an)});return new Proxy(()=>{},{get:(Sn,an)=>sn[an],apply:(Sn,an,Bt)=>sn.then(Rt=>{var Jt;const Gt=Rt&&Rt(...Bt);return(null===(Jt=null==nt?void 0:nt.spy)||void 0===Jt?void 0:Jt.apply)&&nt.spy.apply(at,Bt,Gt),Gt})})})}),xe=(Ke,ot)=>{ot.forEach(it=>{Object.getOwnPropertyNames(it.prototype||it).forEach(nt=>{Object.defineProperty(Ke.prototype,nt,Object.getOwnPropertyDescriptor(it.prototype||it,nt))})})},We=new ve.OlP("angularfire2.app.options"),X=new ve.OlP("angularfire2.app.nameOrConfig"),_t=new ve.GfV("6.1.5");function _n(Ke,ot,it){const vt="object"==typeof it&&it||{};vt.name=vt.name||"string"==typeof it&&it||"[DEFAULT]";const tn=ke.Z.apps.filter(sn=>sn&&sn.name===vt.name)[0]||ot.runOutsideAngular(()=>ke.Z.initializeApp(Ke,vt));try{JSON.stringify(Ke)!==JSON.stringify(tn.options)&&ut("error",`${tn.name} Firebase App already initialized with different options${jt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(sn){}return tn}const Nt=()=>{ut("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},ut=(Ke,...ot)=>{(0,ve.X6Q)()&&"undefined"!=typeof console&&console[Ke](...ot)};function wt(Ke,ot,it,nt,vt){const[at,...tn]=globalThis.\u0275AngularfireInstanceCache.get(Ke)||[];if(at){try{vt.some((sn,Sn)=>{const an=tn[Sn];return sn&&"object"==typeof sn?JSON.stringify(sn)!==JSON.stringify(an):sn!==an})&&ut("error",`${ot} was already initialized on the ${it.name} Firebase App instance with different settings.${jt.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(sn){}return at}{const sn=nt();return globalThis.\u0275AngularfireInstanceCache.set(Ke,[sn,...vt]),sn}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const In={provide:class{},useFactory:_n,deps:[We,ve.R0b,[new ve.FiY,X]]};let Et=(()=>{class Ke{constructor(it){ke.Z.registerVersion("angularfire",_t.full,it.toString()),ke.Z.registerVersion("angular",ve.q4F.full)}static initializeApp(it,nt){return{ngModule:Ke,providers:[{provide:We,useValue:it},{provide:X,useValue:nt}]}}}return Ke.\u0275fac=function(it){return new(it||Ke)(ve.LFG(ve.Lbi))},Ke.\u0275mod=ve.oAB({type:Ke}),Ke.\u0275inj=ve.cJS({providers:[In]}),Ke})()},665:(jt,rt,Q)=>{"use strict";Q.d(rt,{Wl:()=>De,Fj:()=>Re,qu:()=>Le,NI:()=>Ar,u:()=>Vo,cw:()=>ti,sg:()=>Nr,u5:()=>N,a5:()=>Ln,JJ:()=>Kn,JL:()=>St,F:()=>Qe,On:()=>mr,UX:()=>ee,kI:()=>wt,_Y:()=>Ii});var R=Q(7716),c=Q(8583),G=Q(7574),E=Q(9796),Ve=Q(8002),ve=Q(1555),ke=Q(4402);function Ce(H,j){return new G.y(L=>{const ae=H.length;if(0===ae)return void L.complete();const ze=new Array(ae);let Pt=0,En=0;for(let pr=0;pr<ae;pr++){const Hr=(0,ke.D)(H[pr]);let _r=!1;L.add(Hr.subscribe({next:Gr=>{_r||(_r=!0,En++),ze[pr]=Gr},error:Gr=>L.error(Gr),complete:()=>{Pt++,(Pt===ae||!_r)&&(En===ae&&L.next(j?j.reduce((Gr,_i,Dn)=>(Gr[_i]=ze[Dn],Gr),{}):ze),L.complete())}}))}})}let re=(()=>{class H{constructor(L,ae){this._renderer=L,this._elementRef=ae,this.onChange=ze=>{},this.onTouched=()=>{}}setProperty(L,ae){this._renderer.setProperty(this._elementRef.nativeElement,L,ae)}registerOnTouched(L){this.onTouched=L}registerOnChange(L){this.onChange=L}setDisabledState(L){this.setProperty("disabled",L)}}return H.\u0275fac=function(L){return new(L||H)(R.Y36(R.Qsj),R.Y36(R.SBq))},H.\u0275dir=R.lG2({type:H}),H})(),Ee=(()=>{class H extends re{}return H.\u0275fac=function(){let j;return function(ae){return(j||(j=R.n5z(H)))(ae||H)}}(),H.\u0275dir=R.lG2({type:H,features:[R.qOj]}),H})();const pe=new R.OlP("NgValueAccessor"),ye={provide:pe,useExisting:(0,R.Gpc)(()=>De),multi:!0};let De=(()=>{class H extends Ee{writeValue(L){this.setProperty("checked",L)}}return H.\u0275fac=function(){let j;return function(ae){return(j||(j=R.n5z(H)))(ae||H)}}(),H.\u0275dir=R.lG2({type:H,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(L,ae){1&L&&R.NdJ("change",function(Pt){return ae.onChange(Pt.target.checked)})("blur",function(){return ae.onTouched()})},features:[R._Bn([ye]),R.qOj]}),H})();const xe={provide:pe,useExisting:(0,R.Gpc)(()=>Re),multi:!0},X=new R.OlP("CompositionEventMode");let Re=(()=>{class H extends re{constructor(L,ae,ze){super(L,ae),this._compositionMode=ze,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const H=(0,c.q)()?(0,c.q)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(L){this.setProperty("value",null==L?"":L)}_handleInput(L){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(L)}_compositionStart(){this._composing=!0}_compositionEnd(L){this._composing=!1,this._compositionMode&&this.onChange(L)}}return H.\u0275fac=function(L){return new(L||H)(R.Y36(R.Qsj),R.Y36(R.SBq),R.Y36(X,8))},H.\u0275dir=R.lG2({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(L,ae){1&L&&R.NdJ("input",function(Pt){return ae._handleInput(Pt.target.value)})("blur",function(){return ae.onTouched()})("compositionstart",function(){return ae._compositionStart()})("compositionend",function(Pt){return ae._compositionEnd(Pt.target.value)})},features:[R._Bn([xe]),R.qOj]}),H})();function _t(H){return null==H||0===H.length}function _n(H){return null!=H&&"number"==typeof H.length}const Nt=new R.OlP("NgValidators"),ut=new R.OlP("NgAsyncValidators"),Yt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class wt{static min(j){return H=j,j=>{if(_t(j.value)||_t(H))return null;const L=parseFloat(j.value);return!isNaN(L)&&L<H?{min:{min:H,actual:j.value}}:null};var H}static max(j){return H=j,j=>{if(_t(j.value)||_t(H))return null;const L=parseFloat(j.value);return!isNaN(L)&&L>H?{max:{max:H,actual:j.value}}:null};var H}static required(j){return _t(j.value)?{required:!0}:null}static requiredTrue(j){return!0===j.value?null:{required:!0}}static email(j){return _t((H=j).value)||Yt.test(H.value)?null:{email:!0};var H}static minLength(j){return H=j,j=>_t(j.value)||!_n(j.value)?null:j.value.length<H?{minlength:{requiredLength:H,actualLength:j.value.length}}:null;var H}static maxLength(j){return H=j,j=>_n(j.value)&&j.value.length>H?{maxlength:{requiredLength:H,actualLength:j.value.length}}:null;var H}static pattern(j){return function(H){if(!H)return tn;let j,L;return"string"==typeof H?(L="","^"!==H.charAt(0)&&(L+="^"),L+=H,"$"!==H.charAt(H.length-1)&&(L+="$"),j=new RegExp(L)):(L=H.toString(),j=H),ae=>{if(_t(ae.value))return null;const ze=ae.value;return j.test(ze)?null:{pattern:{requiredPattern:L,actualValue:ze}}}}(j)}static nullValidator(j){return null}static compose(j){return Gt(j)}static composeAsync(j){return Tn(j)}}function tn(H){return null}function sn(H){return null!=H}function Sn(H){const j=(0,R.QGY)(H)?(0,ke.D)(H):H;return(0,R.CqO)(j),j}function an(H){let j={};return H.forEach(L=>{j=null!=L?Object.assign(Object.assign({},j),L):j}),0===Object.keys(j).length?null:j}function Bt(H,j){return j.map(L=>L(H))}function Jt(H){return H.map(j=>function(H){return!H.validate}(j)?j:L=>j.validate(L))}function Gt(H){if(!H)return null;const j=H.filter(sn);return 0==j.length?null:function(L){return an(Bt(L,j))}}function kn(H){return null!=H?Gt(Jt(H)):null}function Tn(H){if(!H)return null;const j=H.filter(sn);return 0==j.length?null:function(L){return function(...H){if(1===H.length){const j=H[0];if((0,E.k)(j))return Ce(j,null);if((0,ve.K)(j)&&Object.getPrototypeOf(j)===Object.prototype){const L=Object.keys(j);return Ce(L.map(ae=>j[ae]),L)}}if("function"==typeof H[H.length-1]){const j=H.pop();return Ce(H=1===H.length&&(0,E.k)(H[0])?H[0]:H,null).pipe((0,Ve.U)(L=>j(...L)))}return Ce(H,null)}(Bt(L,j).map(Sn)).pipe((0,Ve.U)(an))}}function lr(H){return null!=H?Tn(Jt(H)):null}function Zn(H,j){return null===H?[j]:Array.isArray(H)?[...H,j]:[H,j]}function qn(H){return H._rawValidators}function Xn(H){return H._rawAsyncValidators}function An(H){return H?Array.isArray(H)?H:[H]:[]}function On(H,j){return Array.isArray(H)?H.includes(j):H===j}function Si(H,j){const L=An(j);return An(H).forEach(ze=>{On(L,ze)||L.push(ze)}),L}function vn(H,j){return An(j).filter(L=>!On(H,L))}let Kt=(()=>{class H{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(L){this._rawValidators=L||[],this._composedValidatorFn=kn(this._rawValidators)}_setAsyncValidators(L){this._rawAsyncValidators=L||[],this._composedAsyncValidatorFn=lr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(L){this._onDestroyCallbacks.push(L)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(L=>L()),this._onDestroyCallbacks=[]}reset(L){this.control&&this.control.reset(L)}hasError(L,ae){return!!this.control&&this.control.hasError(L,ae)}getError(L,ae){return this.control?this.control.getError(L,ae):null}}return H.\u0275fac=function(L){return new(L||H)},H.\u0275dir=R.lG2({type:H}),H})(),zn=(()=>{class H extends Kt{get formDirective(){return null}get path(){return null}}return H.\u0275fac=function(){let j;return function(ae){return(j||(j=R.n5z(H)))(ae||H)}}(),H.\u0275dir=R.lG2({type:H,features:[R.qOj]}),H})();class Ln extends Kt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Qt{constructor(j){this._cd=j}is(j){var L,ae,ze;return"submitted"===j?!!(null===(L=this._cd)||void 0===L?void 0:L.submitted):!!(null===(ze=null===(ae=this._cd)||void 0===ae?void 0:ae.control)||void 0===ze?void 0:ze[j])}}let Kn=(()=>{class H extends Qt{constructor(L){super(L)}}return H.\u0275fac=function(L){return new(L||H)(R.Y36(Ln,2))},H.\u0275dir=R.lG2({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(L,ae){2&L&&R.ekj("ng-untouched",ae.is("untouched"))("ng-touched",ae.is("touched"))("ng-pristine",ae.is("pristine"))("ng-dirty",ae.is("dirty"))("ng-valid",ae.is("valid"))("ng-invalid",ae.is("invalid"))("ng-pending",ae.is("pending"))},features:[R.qOj]}),H})(),St=(()=>{class H extends Qt{constructor(L){super(L)}}return H.\u0275fac=function(L){return new(L||H)(R.Y36(zn,10))},H.\u0275dir=R.lG2({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(L,ae){2&L&&R.ekj("ng-untouched",ae.is("untouched"))("ng-touched",ae.is("touched"))("ng-pristine",ae.is("pristine"))("ng-dirty",ae.is("dirty"))("ng-valid",ae.is("valid"))("ng-invalid",ae.is("invalid"))("ng-pending",ae.is("pending"))("ng-submitted",ae.is("submitted"))},features:[R.qOj]}),H})();function pn(H,j){return[...j.path,H]}function Zt(H,j){Je(H,j),j.valueAccessor.writeValue(H.value),function(H,j){j.valueAccessor.registerOnChange(L=>{H._pendingValue=L,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&sr(H,j)})}(H,j),function(H,j){const L=(ae,ze)=>{j.valueAccessor.writeValue(ae),ze&&j.viewToModelUpdate(ae)};H.registerOnChange(L),j._registerOnDestroy(()=>{H._unregisterOnChange(L)})}(H,j),function(H,j){j.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&sr(H,j),"submit"!==H.updateOn&&H.markAsTouched()})}(H,j),function(H,j){if(j.valueAccessor.setDisabledState){const L=ae=>{j.valueAccessor.setDisabledState(ae)};H.registerOnDisabledChange(L),j._registerOnDestroy(()=>{H._unregisterOnDisabledChange(L)})}}(H,j)}function Se(H,j,L=!0){const ae=()=>{};j.valueAccessor&&(j.valueAccessor.registerOnChange(ae),j.valueAccessor.registerOnTouched(ae)),Xe(H,j),H&&(j._invokeOnDestroyCallbacks(),H._registerOnCollectionChange(()=>{}))}function Ie(H,j){H.forEach(L=>{L.registerOnValidatorChange&&L.registerOnValidatorChange(j)})}function Je(H,j){const L=qn(H);null!==j.validator?H.setValidators(Zn(L,j.validator)):"function"==typeof L&&H.setValidators([L]);const ae=Xn(H);null!==j.asyncValidator?H.setAsyncValidators(Zn(ae,j.asyncValidator)):"function"==typeof ae&&H.setAsyncValidators([ae]);const ze=()=>H.updateValueAndValidity();Ie(j._rawValidators,ze),Ie(j._rawAsyncValidators,ze)}function Xe(H,j){let L=!1;if(null!==H){if(null!==j.validator){const ze=qn(H);if(Array.isArray(ze)&&ze.length>0){const Pt=ze.filter(En=>En!==j.validator);Pt.length!==ze.length&&(L=!0,H.setValidators(Pt))}}if(null!==j.asyncValidator){const ze=Xn(H);if(Array.isArray(ze)&&ze.length>0){const Pt=ze.filter(En=>En!==j.asyncValidator);Pt.length!==ze.length&&(L=!0,H.setAsyncValidators(Pt))}}}const ae=()=>{};return Ie(j._rawValidators,ae),Ie(j._rawAsyncValidators,ae),L}function sr(H,j){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),j.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}function Un(H,j){Je(H,j)}function Dr(H,j){if(!H.hasOwnProperty("model"))return!1;const L=H.model;return!!L.isFirstChange()||!Object.is(j,L.currentValue)}function Uo(H,j){H._syncPendingControls(),j.forEach(L=>{const ae=L.control;"submit"===ae.updateOn&&ae._pendingChange&&(L.viewToModelUpdate(ae._pendingValue),ae._pendingChange=!1)})}function Qi(H,j){if(!j)return null;let L,ae,ze;return Array.isArray(j),j.forEach(Pt=>{Pt.constructor===Re?L=Pt:function(H){return Object.getPrototypeOf(H.constructor)===Ee}(Pt)?ae=Pt:ze=Pt}),ze||ae||L||null}function fo(H,j){const L=H.indexOf(j);L>-1&&H.splice(L,1)}const Fr="VALID",cr="INVALID",bn="PENDING",Ur="DISABLED";function Sr(H){return(Kr(H)?H.validators:H)||null}function Xt(H){return Array.isArray(H)?kn(H):H||null}function ln(H,j){return(Kr(j)?j.asyncValidators:H)||null}function xn(H){return Array.isArray(H)?lr(H):H||null}function Kr(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}class wi{constructor(j,L){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=j,this._rawAsyncValidators=L,this._composedValidatorFn=Xt(this._rawValidators),this._composedAsyncValidatorFn=xn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(j){this._rawValidators=this._composedValidatorFn=j}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(j){this._rawAsyncValidators=this._composedAsyncValidatorFn=j}get parent(){return this._parent}get valid(){return this.status===Fr}get invalid(){return this.status===cr}get pending(){return this.status==bn}get disabled(){return this.status===Ur}get enabled(){return this.status!==Ur}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(j){this._rawValidators=j,this._composedValidatorFn=Xt(j)}setAsyncValidators(j){this._rawAsyncValidators=j,this._composedAsyncValidatorFn=xn(j)}addValidators(j){this.setValidators(Si(j,this._rawValidators))}addAsyncValidators(j){this.setAsyncValidators(Si(j,this._rawAsyncValidators))}removeValidators(j){this.setValidators(vn(j,this._rawValidators))}removeAsyncValidators(j){this.setAsyncValidators(vn(j,this._rawAsyncValidators))}hasValidator(j){return On(this._rawValidators,j)}hasAsyncValidator(j){return On(this._rawAsyncValidators,j)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(j={}){this.touched=!0,this._parent&&!j.onlySelf&&this._parent.markAsTouched(j)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(j=>j.markAllAsTouched())}markAsUntouched(j={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(L=>{L.markAsUntouched({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}markAsDirty(j={}){this.pristine=!1,this._parent&&!j.onlySelf&&this._parent.markAsDirty(j)}markAsPristine(j={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(L=>{L.markAsPristine({onlySelf:!0})}),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}markAsPending(j={}){this.status=bn,!1!==j.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!j.onlySelf&&this._parent.markAsPending(j)}disable(j={}){const L=this._parentMarkedDirty(j.onlySelf);this.status=Ur,this.errors=null,this._forEachChild(ae=>{ae.disable(Object.assign(Object.assign({},j),{onlySelf:!0}))}),this._updateValue(),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},j),{skipPristineCheck:L})),this._onDisabledChange.forEach(ae=>ae(!0))}enable(j={}){const L=this._parentMarkedDirty(j.onlySelf);this.status=Fr,this._forEachChild(ae=>{ae.enable(Object.assign(Object.assign({},j),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},j),{skipPristineCheck:L})),this._onDisabledChange.forEach(ae=>ae(!1))}_updateAncestors(j){this._parent&&!j.onlySelf&&(this._parent.updateValueAndValidity(j),j.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(j){this._parent=j}updateValueAndValidity(j={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fr||this.status===bn)&&this._runAsyncValidator(j.emitEvent)),!1!==j.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!j.onlySelf&&this._parent.updateValueAndValidity(j)}_updateTreeValidity(j={emitEvent:!0}){this._forEachChild(L=>L._updateTreeValidity(j)),this.updateValueAndValidity({onlySelf:!0,emitEvent:j.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ur:Fr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(j){if(this.asyncValidator){this.status=bn,this._hasOwnPendingAsyncValidator=!0;const L=Sn(this.asyncValidator(this));this._asyncValidationSubscription=L.subscribe(ae=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ae,{emitEvent:j})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(j,L={}){this.errors=j,this._updateControlsErrors(!1!==L.emitEvent)}get(j){return function(H,j,L){if(null==j||(Array.isArray(j)||(j=j.split(".")),Array.isArray(j)&&0===j.length))return null;let ae=H;return j.forEach(ze=>{ae=ae instanceof ti?ae.controls.hasOwnProperty(ze)?ae.controls[ze]:null:ae instanceof Er&&ae.at(ze)||null}),ae}(this,j)}getError(j,L){const ae=L?this.get(L):this;return ae&&ae.errors?ae.errors[j]:null}hasError(j,L){return!!this.getError(j,L)}get root(){let j=this;for(;j._parent;)j=j._parent;return j}_updateControlsErrors(j){this.status=this._calculateStatus(),j&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(j)}_initObservables(){this.valueChanges=new R.vpe,this.statusChanges=new R.vpe}_calculateStatus(){return this._allControlsDisabled()?Ur:this.errors?cr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bn)?bn:this._anyControlsHaveStatus(cr)?cr:Fr}_anyControlsHaveStatus(j){return this._anyControls(L=>L.status===j)}_anyControlsDirty(){return this._anyControls(j=>j.dirty)}_anyControlsTouched(){return this._anyControls(j=>j.touched)}_updatePristine(j={}){this.pristine=!this._anyControlsDirty(),this._parent&&!j.onlySelf&&this._parent._updatePristine(j)}_updateTouched(j={}){this.touched=this._anyControlsTouched(),this._parent&&!j.onlySelf&&this._parent._updateTouched(j)}_isBoxedValue(j){return"object"==typeof j&&null!==j&&2===Object.keys(j).length&&"value"in j&&"disabled"in j}_registerOnCollectionChange(j){this._onCollectionChange=j}_setUpdateStrategy(j){Kr(j)&&null!=j.updateOn&&(this._updateOn=j.updateOn)}_parentMarkedDirty(j){return!j&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ar extends wi{constructor(j=null,L,ae){super(Sr(L),ln(ae,L)),this._onChange=[],this._applyFormState(j),this._setUpdateStrategy(L),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(j,L={}){this.value=this._pendingValue=j,this._onChange.length&&!1!==L.emitModelToViewChange&&this._onChange.forEach(ae=>ae(this.value,!1!==L.emitViewToModelChange)),this.updateValueAndValidity(L)}patchValue(j,L={}){this.setValue(j,L)}reset(j=null,L={}){this._applyFormState(j),this.markAsPristine(L),this.markAsUntouched(L),this.setValue(this.value,L),this._pendingChange=!1}_updateValue(){}_anyControls(j){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(j){this._onChange.push(j)}_unregisterOnChange(j){fo(this._onChange,j)}registerOnDisabledChange(j){this._onDisabledChange.push(j)}_unregisterOnDisabledChange(j){fo(this._onDisabledChange,j)}_forEachChild(j){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(j){this._isBoxedValue(j)?(this.value=this._pendingValue=j.value,j.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=j}}class ti extends wi{constructor(j,L,ae){super(Sr(L),ln(ae,L)),this.controls=j,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(j,L){return this.controls[j]?this.controls[j]:(this.controls[j]=L,L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange),L)}addControl(j,L,ae={}){this.registerControl(j,L),this.updateValueAndValidity({emitEvent:ae.emitEvent}),this._onCollectionChange()}removeControl(j,L={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}setControl(j,L,ae={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),delete this.controls[j],L&&this.registerControl(j,L),this.updateValueAndValidity({emitEvent:ae.emitEvent}),this._onCollectionChange()}contains(j){return this.controls.hasOwnProperty(j)&&this.controls[j].enabled}setValue(j,L={}){this._checkAllValuesPresent(j),Object.keys(j).forEach(ae=>{this._throwIfControlMissing(ae),this.controls[ae].setValue(j[ae],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(j,L={}){null!=j&&(Object.keys(j).forEach(ae=>{this.controls[ae]&&this.controls[ae].patchValue(j[ae],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(j={},L={}){this._forEachChild((ae,ze)=>{ae.reset(j[ze],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this._reduceChildren({},(j,L,ae)=>(j[ae]=L instanceof Ar?L.value:L.getRawValue(),j))}_syncPendingControls(){let j=this._reduceChildren(!1,(L,ae)=>!!ae._syncPendingControls()||L);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_throwIfControlMissing(j){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[j])throw new Error(`Cannot find form control with name: ${j}.`)}_forEachChild(j){Object.keys(this.controls).forEach(L=>{const ae=this.controls[L];ae&&j(ae,L)})}_setUpControls(){this._forEachChild(j=>{j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(j){for(const L of Object.keys(this.controls)){const ae=this.controls[L];if(this.contains(L)&&j(ae))return!0}return!1}_reduceValue(){return this._reduceChildren({},(j,L,ae)=>((L.enabled||this.disabled)&&(j[ae]=L.value),j))}_reduceChildren(j,L){let ae=j;return this._forEachChild((ze,Pt)=>{ae=L(ae,ze,Pt)}),ae}_allControlsDisabled(){for(const j of Object.keys(this.controls))if(this.controls[j].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(j){this._forEachChild((L,ae)=>{if(void 0===j[ae])throw new Error(`Must supply a value for form control with name: '${ae}'.`)})}}class Er extends wi{constructor(j,L,ae){super(Sr(L),ln(ae,L)),this.controls=j,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(j){return this.controls[j]}push(j,L={}){this.controls.push(j),this._registerControl(j),this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}insert(j,L,ae={}){this.controls.splice(j,0,L),this._registerControl(L),this.updateValueAndValidity({emitEvent:ae.emitEvent})}removeAt(j,L={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),this.controls.splice(j,1),this.updateValueAndValidity({emitEvent:L.emitEvent})}setControl(j,L,ae={}){this.controls[j]&&this.controls[j]._registerOnCollectionChange(()=>{}),this.controls.splice(j,1),L&&(this.controls.splice(j,0,L),this._registerControl(L)),this.updateValueAndValidity({emitEvent:ae.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(j,L={}){this._checkAllValuesPresent(j),j.forEach((ae,ze)=>{this._throwIfControlMissing(ze),this.at(ze).setValue(ae,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(j,L={}){null!=j&&(j.forEach((ae,ze)=>{this.at(ze)&&this.at(ze).patchValue(ae,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(j=[],L={}){this._forEachChild((ae,ze)=>{ae.reset(j[ze],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this.controls.map(j=>j instanceof Ar?j.value:j.getRawValue())}clear(j={}){this.controls.length<1||(this._forEachChild(L=>L._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:j.emitEvent}))}_syncPendingControls(){let j=this.controls.reduce((L,ae)=>!!ae._syncPendingControls()||L,!1);return j&&this.updateValueAndValidity({onlySelf:!0}),j}_throwIfControlMissing(j){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(j))throw new Error(`Cannot find form control at index ${j}`)}_forEachChild(j){this.controls.forEach((L,ae)=>{j(L,ae)})}_updateValue(){this.value=this.controls.filter(j=>j.enabled||this.disabled).map(j=>j.value)}_anyControls(j){return this.controls.some(L=>L.enabled&&j(L))}_setUpControls(){this._forEachChild(j=>this._registerControl(j))}_checkAllValuesPresent(j){this._forEachChild((L,ae)=>{if(void 0===j[ae])throw new Error(`Must supply a value for form control at index: ${ae}.`)})}_allControlsDisabled(){for(const j of this.controls)if(j.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(j){j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange)}}const To={provide:zn,useExisting:(0,R.Gpc)(()=>Qe)},Pn=(()=>Promise.resolve(null))();let Qe=(()=>{class H extends zn{constructor(L,ae){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new R.vpe,this.form=new ti({},kn(L),lr(ae))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(L){Pn.then(()=>{const ae=this._findContainer(L.path);L.control=ae.registerControl(L.name,L.control),Zt(L.control,L),L.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(L)})}getControl(L){return this.form.get(L.path)}removeControl(L){Pn.then(()=>{const ae=this._findContainer(L.path);ae&&ae.removeControl(L.name),fo(this._directives,L)})}addFormGroup(L){Pn.then(()=>{const ae=this._findContainer(L.path),ze=new ti({});Un(ze,L),ae.registerControl(L.name,ze),ze.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(L){Pn.then(()=>{const ae=this._findContainer(L.path);ae&&ae.removeControl(L.name)})}getFormGroup(L){return this.form.get(L.path)}updateModel(L,ae){Pn.then(()=>{this.form.get(L.path).setValue(ae)})}setValue(L){this.control.setValue(L)}onSubmit(L){return this.submitted=!0,Uo(this.form,this._directives),this.ngSubmit.emit(L),!1}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(L){return L.pop(),L.length?this.form.get(L):this.form}}return H.\u0275fac=function(L){return new(L||H)(R.Y36(Nt,10),R.Y36(ut,10))},H.\u0275dir=R.lG2({type:H,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(L,ae){1&L&&R.NdJ("submit",function(Pt){return ae.onSubmit(Pt)})("reset",function(){return ae.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[R._Bn([To]),R.qOj]}),H})();const un={provide:Ln,useExisting:(0,R.Gpc)(()=>mr)},Li=(()=>Promise.resolve(null))();let mr=(()=>{class H extends Ln{constructor(L,ae,ze,Pt){super(),this.control=new Ar,this._registered=!1,this.update=new R.vpe,this._parent=L,this._setValidators(ae),this._setAsyncValidators(ze),this.valueAccessor=Qi(0,Pt)}ngOnChanges(L){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in L&&this._updateDisabled(L),Dr(L,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?pn(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Zt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(L){Li.then(()=>{this.control.setValue(L,{emitViewToModelChange:!1})})}_updateDisabled(L){const ae=L.isDisabled.currentValue,ze=""===ae||ae&&"false"!==ae;Li.then(()=>{ze&&!this.control.disabled?this.control.disable():!ze&&this.control.disabled&&this.control.enable()})}}return H.\u0275fac=function(L){return new(L||H)(R.Y36(zn,9),R.Y36(Nt,10),R.Y36(ut,10),R.Y36(pe,10))},H.\u0275dir=R.lG2({type:H,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[R._Bn([un]),R.qOj,R.TTD]}),H})(),Ii=(()=>{class H{}return H.\u0275fac=function(L){return new(L||H)},H.\u0275dir=R.lG2({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),H})(),Bn=(()=>{class H{}return H.\u0275fac=function(L){return new(L||H)},H.\u0275mod=R.oAB({type:H}),H.\u0275inj=R.cJS({}),H})();const Vi=new R.OlP("NgModelWithFormControlWarning"),Yo={provide:zn,useExisting:(0,R.Gpc)(()=>Nr)};let Nr=(()=>{class H extends zn{constructor(L,ae){super(),this.validators=L,this.asyncValidators=ae,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new R.vpe,this._setValidators(L),this._setAsyncValidators(ae)}ngOnChanges(L){this._checkFormPresent(),L.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(L){const ae=this.form.get(L.path);return Zt(ae,L),ae.updateValueAndValidity({emitEvent:!1}),this.directives.push(L),ae}getControl(L){return this.form.get(L.path)}removeControl(L){Se(L.control||null,L,!1),fo(this.directives,L)}addFormGroup(L){this._setUpFormContainer(L)}removeFormGroup(L){this._cleanUpFormContainer(L)}getFormGroup(L){return this.form.get(L.path)}addFormArray(L){this._setUpFormContainer(L)}removeFormArray(L){this._cleanUpFormContainer(L)}getFormArray(L){return this.form.get(L.path)}updateModel(L,ae){this.form.get(L.path).setValue(ae)}onSubmit(L){return this.submitted=!0,Uo(this.form,this.directives),this.ngSubmit.emit(L),!1}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_updateDomValue(){this.directives.forEach(L=>{const ae=L.control,ze=this.form.get(L.path);ae!==ze&&(Se(ae||null,L),ze instanceof Ar&&(Zt(ze,L),L.control=ze))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(L){const ae=this.form.get(L.path);Un(ae,L),ae.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(L){if(this.form){const ae=this.form.get(L.path);ae&&function(H,j){return Xe(H,j)}(ae,L)&&ae.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Je(this.form,this),this._oldForm&&Xe(this._oldForm,this)}_checkFormPresent(){}}return H.\u0275fac=function(L){return new(L||H)(R.Y36(Nt,10),R.Y36(ut,10))},H.\u0275dir=R.lG2({type:H,selectors:[["","formGroup",""]],hostBindings:function(L,ae){1&L&&R.NdJ("submit",function(Pt){return ae.onSubmit(Pt)})("reset",function(){return ae.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[R._Bn([Yo]),R.qOj,R.TTD]}),H})();const vs={provide:Ln,useExisting:(0,R.Gpc)(()=>Vo)};let Vo=(()=>{class H extends Ln{constructor(L,ae,ze,Pt,En){super(),this._ngModelWarningConfig=En,this._added=!1,this.update=new R.vpe,this._ngModelWarningSent=!1,this._parent=L,this._setValidators(ae),this._setAsyncValidators(ze),this.valueAccessor=Qi(0,Pt)}set isDisabled(L){}ngOnChanges(L){this._added||this._setUpControl(),Dr(L,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}get path(){return pn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return H.\u0275fac=function(L){return new(L||H)(R.Y36(zn,13),R.Y36(Nt,10),R.Y36(ut,10),R.Y36(pe,10),R.Y36(Vi,8))},H.\u0275dir=R.lG2({type:H,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[R._Bn([vs]),R.qOj,R.TTD]}),H._ngModelWarningSentOnce=!1,H})(),$=(()=>{class H{}return H.\u0275fac=function(L){return new(L||H)},H.\u0275mod=R.oAB({type:H}),H.\u0275inj=R.cJS({imports:[[Bn]]}),H})(),N=(()=>{class H{}return H.\u0275fac=function(L){return new(L||H)},H.\u0275mod=R.oAB({type:H}),H.\u0275inj=R.cJS({imports:[$]}),H})(),ee=(()=>{class H{static withConfig(L){return{ngModule:H,providers:[{provide:Vi,useValue:L.warnOnNgModelWithFormControl}]}}}return H.\u0275fac=function(L){return new(L||H)},H.\u0275mod=R.oAB({type:H}),H.\u0275inj=R.cJS({imports:[$]}),H})(),Le=(()=>{class H{group(L,ae=null){const ze=this._reduceControls(L);let pr,Pt=null,En=null;return null!=ae&&(function(H){return void 0!==H.asyncValidators||void 0!==H.validators||void 0!==H.updateOn}(ae)?(Pt=null!=ae.validators?ae.validators:null,En=null!=ae.asyncValidators?ae.asyncValidators:null,pr=null!=ae.updateOn?ae.updateOn:void 0):(Pt=null!=ae.validator?ae.validator:null,En=null!=ae.asyncValidator?ae.asyncValidator:null)),new ti(ze,{asyncValidators:En,updateOn:pr,validators:Pt})}control(L,ae,ze){return new Ar(L,ae,ze)}array(L,ae,ze){const Pt=L.map(En=>this._createControl(En));return new Er(Pt,ae,ze)}_reduceControls(L){const ae={};return Object.keys(L).forEach(ze=>{ae[ze]=this._createControl(L[ze])}),ae}_createControl(L){return L instanceof Ar||L instanceof ti||L instanceof Er?L:Array.isArray(L)?this.control(L[0],L.length>1?L[1]:null,L.length>2?L[2]:null):this.control(L)}}return H.\u0275fac=function(L){return new(L||H)},H.\u0275prov=(0,R.Yz7)({factory:function(){return new H},token:H,providedIn:ee}),H})()},6237:(jt,rt,Q)=>{"use strict";Q.d(rt,{Qb:()=>br,PW:()=>Cs});var R=Q(7716),c=Q(9075),G=Q(7238);function E(){return"undefined"!=typeof window&&void 0!==window.document}function Ve(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ve(oe){switch(oe.length){case 0:return new G.ZN;case 1:return oe[0];default:return new G.ZE(oe)}}function ke(oe,A,I,B,se={},me={}){const Pe=[],Fe=[];let ct=-1,mt=null;if(B.forEach(Ht=>{const Rn=Ht.offset,dr=Rn==ct,Rr=dr&&mt||{};Object.keys(Ht).forEach(Yn=>{let Fn=Yn,yr=Ht[Yn];if("offset"!==Yn)switch(Fn=A.normalizePropertyName(Fn,Pe),yr){case G.k1:yr=se[Yn];break;case G.l3:yr=me[Yn];break;default:yr=A.normalizeStyleValue(Yn,Fn,yr,Pe)}Rr[Fn]=yr}),dr||Fe.push(Rr),mt=Rr,ct=Rn}),Pe.length){const Ht="\n - ";throw new Error(`Unable to animate due to the following errors:${Ht}${Pe.join(Ht)}`)}return Fe}function fe(oe,A,I,B){switch(A){case"start":oe.onStart(()=>B(I&&Ce(I,"start",oe)));break;case"done":oe.onDone(()=>B(I&&Ce(I,"done",oe)));break;case"destroy":oe.onDestroy(()=>B(I&&Ce(I,"destroy",oe)))}}function Ce(oe,A,I){const B=I.totalTime,me=re(oe.element,oe.triggerName,oe.fromState,oe.toState,A||oe.phaseName,null==B?oe.totalTime:B,!!I.disabled),Pe=oe._data;return null!=Pe&&(me._data=Pe),me}function re(oe,A,I,B,se="",me=0,Pe){return{element:oe,triggerName:A,fromState:I,toState:B,phaseName:se,totalTime:me,disabled:!!Pe}}function Ee(oe,A,I){let B;return oe instanceof Map?(B=oe.get(A),B||oe.set(A,B=I)):(B=oe[A],B||(B=oe[A]=I)),B}function pe(oe){const A=oe.indexOf(":");return[oe.substring(1,A),oe.substr(A+1)]}let ye=(oe,A)=>!1,xe=(oe,A)=>!1,X=(oe,A,I)=>[];const _t=Ve();(_t||"undefined"!=typeof Element)&&(ye=E()?(oe,A)=>{for(;A&&A!==document.documentElement;){if(A===oe)return!0;A=A.parentNode||A.host}return!1}:(oe,A)=>oe.contains(A),xe=(()=>{if(_t||Element.prototype.matches)return(oe,A)=>oe.matches(A);{const oe=Element.prototype,A=oe.matchesSelector||oe.mozMatchesSelector||oe.msMatchesSelector||oe.oMatchesSelector||oe.webkitMatchesSelector;return A?(I,B)=>A.apply(I,[B]):xe}})(),X=(oe,A,I)=>{let B=[];if(I){const se=oe.querySelectorAll(A);for(let me=0;me<se.length;me++)B.push(se[me])}else{const se=oe.querySelector(A);se&&B.push(se)}return B});let Nt=null,ut=!1;function Yt(oe){Nt||(Nt=("undefined"!=typeof document?document.body:null)||{},ut=!!Nt.style&&"WebkitAppearance"in Nt.style);let A=!0;return Nt.style&&!function(oe){return"ebkit"==oe.substring(1,6)}(oe)&&(A=oe in Nt.style,!A&&ut&&(A="Webkit"+oe.charAt(0).toUpperCase()+oe.substr(1)in Nt.style)),A}const In=xe,Et=ye,Ke=X;function ot(oe){const A={};return Object.keys(oe).forEach(I=>{const B=I.replace(/([a-z])([A-Z])/g,"$1-$2");A[B]=oe[I]}),A}let it=(()=>{class oe{validateStyleProperty(I){return Yt(I)}matchesElement(I,B){return In(I,B)}containsElement(I,B){return Et(I,B)}query(I,B,se){return Ke(I,B,se)}computeStyle(I,B,se){return se||""}animate(I,B,se,me,Pe,Fe=[],ct){return new G.ZN(se,me)}}return oe.\u0275fac=function(I){return new(I||oe)},oe.\u0275prov=R.Yz7({token:oe,factory:oe.\u0275fac}),oe})(),nt=(()=>{class oe{}return oe.NOOP=new it,oe})();const sn="ng-enter",Sn="ng-leave",Rt="ng-trigger",Jt=".ng-trigger",Gt="ng-animating",kn=".ng-animating";function Tn(oe){if("number"==typeof oe)return oe;const A=oe.match(/^(-?[\.\d]+)(m?s)/);return!A||A.length<2?0:lr(parseFloat(A[1]),A[2])}function lr(oe,A){switch(A){case"s":return 1e3*oe;default:return oe}}function Zn(oe,A,I){return oe.hasOwnProperty("duration")?oe:function(oe,A,I){let se,me=0,Pe="";if("string"==typeof oe){const Fe=oe.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Fe)return A.push(`The provided timing value "${oe}" is invalid.`),{duration:0,delay:0,easing:""};se=lr(parseFloat(Fe[1]),Fe[2]);const ct=Fe[3];null!=ct&&(me=lr(parseFloat(ct),Fe[4]));const mt=Fe[5];mt&&(Pe=mt)}else se=oe;if(!I){let Fe=!1,ct=A.length;se<0&&(A.push("Duration values below 0 are not allowed for this animation step."),Fe=!0),me<0&&(A.push("Delay values below 0 are not allowed for this animation step."),Fe=!0),Fe&&A.splice(ct,0,`The provided timing value "${oe}" is invalid.`)}return{duration:se,delay:me,easing:Pe}}(oe,A,I)}function Xn(oe,A={}){return Object.keys(oe).forEach(I=>{A[I]=oe[I]}),A}function On(oe,A,I={}){if(A)for(let B in oe)I[B]=oe[B];else Xn(oe,I);return I}function Si(oe,A,I){return I?A+":"+I+";":""}function vn(oe){let A="";for(let I=0;I<oe.style.length;I++){const B=oe.style.item(I);A+=Si(0,B,oe.style.getPropertyValue(B))}for(const I in oe.style)oe.style.hasOwnProperty(I)&&!I.startsWith("_")&&(A+=Si(0,It(I),oe.style[I]));oe.setAttribute("style",A)}function Kt(oe,A,I){oe.style&&(Object.keys(A).forEach(B=>{const se=je(B);I&&!I.hasOwnProperty(B)&&(I[B]=oe.style[se]),oe.style[se]=A[B]}),Ve()&&vn(oe))}function zn(oe,A){oe.style&&(Object.keys(A).forEach(I=>{const B=je(I);oe.style[B]=""}),Ve()&&vn(oe))}function Ln(oe){return Array.isArray(oe)?1==oe.length?oe[0]:(0,G.vP)(oe):oe}const gr=new RegExp("{{\\s*(.+?)\\s*}}","g");function Vr(oe){let A=[];if("string"==typeof oe){let I;for(;I=gr.exec(oe);)A.push(I[1]);gr.lastIndex=0}return A}function Kn(oe,A,I){const B=oe.toString(),se=B.replace(gr,(me,Pe)=>{let Fe=A[Pe];return A.hasOwnProperty(Pe)||(I.push(`Please provide a value for the animation param ${Pe}`),Fe=""),Fe.toString()});return se==B?oe:se}function St(oe){const A=[];let I=oe.next();for(;!I.done;)A.push(I.value),I=oe.next();return A}const Ze=/-+([a-z0-9])/g;function je(oe){return oe.replace(Ze,(...A)=>A[1].toUpperCase())}function It(oe){return oe.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function xt(oe,A){return 0===oe||0===A}function nn(oe,A,I){const B=Object.keys(I);if(B.length&&A.length){let me=A[0],Pe=[];if(B.forEach(Fe=>{me.hasOwnProperty(Fe)||Pe.push(Fe),me[Fe]=I[Fe]}),Pe.length)for(var se=1;se<A.length;se++){let Fe=A[se];Pe.forEach(function(ct){Fe[ct]=Ue(oe,ct)})}}return A}function Ot(oe,A,I){switch(A.type){case 7:return oe.visitTrigger(A,I);case 0:return oe.visitState(A,I);case 1:return oe.visitTransition(A,I);case 2:return oe.visitSequence(A,I);case 3:return oe.visitGroup(A,I);case 4:return oe.visitAnimate(A,I);case 5:return oe.visitKeyframes(A,I);case 6:return oe.visitStyle(A,I);case 8:return oe.visitReference(A,I);case 9:return oe.visitAnimateChild(A,I);case 10:return oe.visitAnimateRef(A,I);case 11:return oe.visitQuery(A,I);case 12:return oe.visitStagger(A,I);default:throw new Error(`Unable to resolve animation metadata node #${A.type}`)}}function Ue(oe,A){return window.getComputedStyle(oe)[A]}function bt(oe,A){const I=[];return"string"==typeof oe?oe.split(/\s*,\s*/).forEach(B=>function(oe,A,I){if(":"==oe[0]){const ct=function(oe,A){switch(oe){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(I,B)=>parseFloat(B)>parseFloat(I);case":decrement":return(I,B)=>parseFloat(B)<parseFloat(I);default:return A.push(`The transition alias value "${oe}" is not supported`),"* => *"}}(oe,I);if("function"==typeof ct)return void A.push(ct);oe=ct}const B=oe.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==B||B.length<4)return I.push(`The provided transition expression "${oe}" is not supported`),A;const se=B[1],me=B[2],Pe=B[3];A.push(Zt(se,Pe));"<"==me[0]&&!("*"==se&&"*"==Pe)&&A.push(Zt(Pe,se))}(B,I,A)):I.push(oe),I}const dn=new Set(["true","1"]),pn=new Set(["false","0"]);function Zt(oe,A){const I=dn.has(oe)||pn.has(oe),B=dn.has(A)||pn.has(A);return(se,me)=>{let Pe="*"==oe||oe==se,Fe="*"==A||A==me;return!Pe&&I&&"boolean"==typeof se&&(Pe=se?dn.has(oe):pn.has(oe)),!Fe&&B&&"boolean"==typeof me&&(Fe=me?dn.has(A):pn.has(A)),Pe&&Fe}}const Ie=new RegExp("s*:selfs*,?","g");function $e(oe,A,I){return new Xe(oe).build(A,I)}class Xe{constructor(A){this._driver=A}build(A,I){const B=new sr(I);return this._resetContextStyleTimingState(B),Ot(this,Ln(A),B)}_resetContextStyleTimingState(A){A.currentQuerySelector="",A.collectedStyles={},A.collectedStyles[""]={},A.currentTime=0}visitTrigger(A,I){let B=I.queryCount=0,se=I.depCount=0;const me=[],Pe=[];return"@"==A.name.charAt(0)&&I.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),A.definitions.forEach(Fe=>{if(this._resetContextStyleTimingState(I),0==Fe.type){const ct=Fe,mt=ct.name;mt.toString().split(/\s*,\s*/).forEach(Ht=>{ct.name=Ht,me.push(this.visitState(ct,I))}),ct.name=mt}else if(1==Fe.type){const ct=this.visitTransition(Fe,I);B+=ct.queryCount,se+=ct.depCount,Pe.push(ct)}else I.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:A.name,states:me,transitions:Pe,queryCount:B,depCount:se,options:null}}visitState(A,I){const B=this.visitStyle(A.styles,I),se=A.options&&A.options.params||null;if(B.containsDynamicStyles){const me=new Set,Pe=se||{};if(B.styles.forEach(Fe=>{if(Un(Fe)){const ct=Fe;Object.keys(ct).forEach(mt=>{Vr(ct[mt]).forEach(Ht=>{Pe.hasOwnProperty(Ht)||me.add(Ht)})})}}),me.size){const Fe=St(me.values());I.errors.push(`state("${A.name}", ...) must define default values for all the following style substitutions: ${Fe.join(", ")}`)}}return{type:0,name:A.name,style:B,options:se?{params:se}:null}}visitTransition(A,I){I.queryCount=0,I.depCount=0;const B=Ot(this,Ln(A.animation),I);return{type:1,matchers:bt(A.expr,I.errors),animation:B,queryCount:I.queryCount,depCount:I.depCount,options:Br(A.options)}}visitSequence(A,I){return{type:2,steps:A.steps.map(B=>Ot(this,B,I)),options:Br(A.options)}}visitGroup(A,I){const B=I.currentTime;let se=0;const me=A.steps.map(Pe=>{I.currentTime=B;const Fe=Ot(this,Pe,I);return se=Math.max(se,I.currentTime),Fe});return I.currentTime=se,{type:3,steps:me,options:Br(A.options)}}visitAnimate(A,I){const B=function(oe,A){let I=null;if(oe.hasOwnProperty("duration"))I=oe;else if("number"==typeof oe)return Xr(Zn(oe,A).duration,0,"");const B=oe;if(B.split(/\s+/).some(me=>"{"==me.charAt(0)&&"{"==me.charAt(1))){const me=Xr(0,0,"");return me.dynamic=!0,me.strValue=B,me}return I=I||Zn(B,A),Xr(I.duration,I.delay,I.easing)}(A.timings,I.errors);I.currentAnimateTimings=B;let se,me=A.styles?A.styles:(0,G.oB)({});if(5==me.type)se=this.visitKeyframes(me,I);else{let Pe=A.styles,Fe=!1;if(!Pe){Fe=!0;const mt={};B.easing&&(mt.easing=B.easing),Pe=(0,G.oB)(mt)}I.currentTime+=B.duration+B.delay;const ct=this.visitStyle(Pe,I);ct.isEmptyStep=Fe,se=ct}return I.currentAnimateTimings=null,{type:4,timings:B,style:se,options:null}}visitStyle(A,I){const B=this._makeStyleAst(A,I);return this._validateStyleAst(B,I),B}_makeStyleAst(A,I){const B=[];Array.isArray(A.styles)?A.styles.forEach(Pe=>{"string"==typeof Pe?Pe==G.l3?B.push(Pe):I.errors.push(`The provided style string value ${Pe} is not allowed.`):B.push(Pe)}):B.push(A.styles);let se=!1,me=null;return B.forEach(Pe=>{if(Un(Pe)){const Fe=Pe,ct=Fe.easing;if(ct&&(me=ct,delete Fe.easing),!se)for(let mt in Fe)if(Fe[mt].toString().indexOf("{{")>=0){se=!0;break}}}),{type:6,styles:B,easing:me,offset:A.offset,containsDynamicStyles:se,options:null}}_validateStyleAst(A,I){const B=I.currentAnimateTimings;let se=I.currentTime,me=I.currentTime;B&&me>0&&(me-=B.duration+B.delay),A.styles.forEach(Pe=>{"string"!=typeof Pe&&Object.keys(Pe).forEach(Fe=>{if(!this._driver.validateStyleProperty(Fe))return void I.errors.push(`The provided animation property "${Fe}" is not a supported CSS property for animations`);const ct=I.collectedStyles[I.currentQuerySelector],mt=ct[Fe];let Ht=!0;mt&&(me!=se&&me>=mt.startTime&&se<=mt.endTime&&(I.errors.push(`The CSS property "${Fe}" that exists between the times of "${mt.startTime}ms" and "${mt.endTime}ms" is also being animated in a parallel animation between the times of "${me}ms" and "${se}ms"`),Ht=!1),me=mt.startTime),Ht&&(ct[Fe]={startTime:me,endTime:se}),I.options&&function(oe,A,I){const B=A.params||{},se=Vr(oe);se.length&&se.forEach(me=>{B.hasOwnProperty(me)||I.push(`Unable to resolve the local animation param ${me} in the given list of values`)})}(Pe[Fe],I.options,I.errors)})})}visitKeyframes(A,I){const B={type:5,styles:[],options:null};if(!I.currentAnimateTimings)return I.errors.push("keyframes() must be placed inside of a call to animate()"),B;let me=0;const Pe=[];let Fe=!1,ct=!1,mt=0;const Ht=A.steps.map(vi=>{const ei=this._makeStyleAst(vi,I);let Ri=null!=ei.offset?ei.offset:function(oe){if("string"==typeof oe)return null;let A=null;if(Array.isArray(oe))oe.forEach(I=>{if(Un(I)&&I.hasOwnProperty("offset")){const B=I;A=parseFloat(B.offset),delete B.offset}});else if(Un(oe)&&oe.hasOwnProperty("offset")){const I=oe;A=parseFloat(I.offset),delete I.offset}return A}(ei.styles),li=0;return null!=Ri&&(me++,li=ei.offset=Ri),ct=ct||li<0||li>1,Fe=Fe||li<mt,mt=li,Pe.push(li),ei});ct&&I.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),Fe&&I.errors.push("Please ensure that all keyframe offsets are in order");const Rn=A.steps.length;let dr=0;me>0&&me<Rn?I.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==me&&(dr=1/(Rn-1));const Rr=Rn-1,Yn=I.currentTime,Fn=I.currentAnimateTimings,yr=Fn.duration;return Ht.forEach((vi,ei)=>{const Ri=dr>0?ei==Rr?1:dr*ei:Pe[ei],li=Ri*yr;I.currentTime=Yn+Fn.delay+li,Fn.duration=li,this._validateStyleAst(vi,I),vi.offset=Ri,B.styles.push(vi)}),B}visitReference(A,I){return{type:8,animation:Ot(this,Ln(A.animation),I),options:Br(A.options)}}visitAnimateChild(A,I){return I.depCount++,{type:9,options:Br(A.options)}}visitAnimateRef(A,I){return{type:10,animation:this.visitReference(A.animation,I),options:Br(A.options)}}visitQuery(A,I){const B=I.currentQuerySelector,se=A.options||{};I.queryCount++,I.currentQuery=A;const[me,Pe]=function(oe){const A=!!oe.split(/\s*,\s*/).find(I=>":self"==I);return A&&(oe=oe.replace(Ie,"")),[oe=oe.replace(/@\*/g,Jt).replace(/@\w+/g,I=>Jt+"-"+I.substr(1)).replace(/:animating/g,kn),A]}(A.selector);I.currentQuerySelector=B.length?B+" "+me:me,Ee(I.collectedStyles,I.currentQuerySelector,{});const Fe=Ot(this,Ln(A.animation),I);return I.currentQuery=null,I.currentQuerySelector=B,{type:11,selector:me,limit:se.limit||0,optional:!!se.optional,includeSelf:Pe,animation:Fe,originalSelector:A.selector,options:Br(A.options)}}visitStagger(A,I){I.currentQuery||I.errors.push("stagger() can only be used inside of query()");const B="full"===A.timings?{duration:0,delay:0,easing:"full"}:Zn(A.timings,I.errors,!0);return{type:12,animation:Ot(this,Ln(A.animation),I),timings:B,options:null}}}class sr{constructor(A){this.errors=A,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Un(oe){return!Array.isArray(oe)&&"object"==typeof oe}function Br(oe){return oe?(oe=Xn(oe)).params&&(oe.params=function(oe){return oe?Xn(oe):null}(oe.params)):oe={},oe}function Xr(oe,A,I){return{duration:oe,delay:A,easing:I}}function Dr(oe,A,I,B,se,me,Pe=null,Fe=!1){return{type:1,element:oe,keyframes:A,preStyleProps:I,postStyleProps:B,duration:se,delay:me,totalTime:se+me,easing:Pe,subTimeline:Fe}}class Mi{constructor(){this._map=new Map}consume(A){let I=this._map.get(A);return I?this._map.delete(A):I=[],I}append(A,I){let B=this._map.get(A);B||this._map.set(A,B=[]),B.push(...I)}has(A){return this._map.has(A)}clear(){this._map.clear()}}const fo=new RegExp(":enter","g"),Fr=new RegExp(":leave","g");function cr(oe,A,I,B,se,me={},Pe={},Fe,ct,mt=[]){return(new bn).buildKeyframes(oe,A,I,B,se,me,Pe,Fe,ct,mt)}class bn{buildKeyframes(A,I,B,se,me,Pe,Fe,ct,mt,Ht=[]){mt=mt||new Mi;const Rn=new uo(A,I,mt,se,me,Ht,[]);Rn.options=ct,Rn.currentTimeline.setStyles([Pe],null,Rn.errors,ct),Ot(this,B,Rn);const dr=Rn.timelines.filter(Rr=>Rr.containsAnimation());if(dr.length&&Object.keys(Fe).length){const Rr=dr[dr.length-1];Rr.allowOnlyTimelineStyles()||Rr.setStyles([Fe],null,Rn.errors,ct)}return dr.length?dr.map(Rr=>Rr.buildKeyframes()):[Dr(I,[],[],[],0,0,"",!1)]}visitTrigger(A,I){}visitState(A,I){}visitTransition(A,I){}visitAnimateChild(A,I){const B=I.subInstructions.consume(I.element);if(B){const se=I.createSubContext(A.options),me=I.currentTimeline.currentTime,Pe=this._visitSubInstructions(B,se,se.options);me!=Pe&&I.transformIntoNewTimeline(Pe)}I.previousNode=A}visitAnimateRef(A,I){const B=I.createSubContext(A.options);B.transformIntoNewTimeline(),this.visitReference(A.animation,B),I.transformIntoNewTimeline(B.currentTimeline.currentTime),I.previousNode=A}_visitSubInstructions(A,I,B){let me=I.currentTimeline.currentTime;const Pe=null!=B.duration?Tn(B.duration):null,Fe=null!=B.delay?Tn(B.delay):null;return 0!==Pe&&A.forEach(ct=>{const mt=I.appendInstructionToTimeline(ct,Pe,Fe);me=Math.max(me,mt.duration+mt.delay)}),me}visitReference(A,I){I.updateOptions(A.options,!0),Ot(this,A.animation,I),I.previousNode=A}visitSequence(A,I){const B=I.subContextCount;let se=I;const me=A.options;if(me&&(me.params||me.delay)&&(se=I.createSubContext(me),se.transformIntoNewTimeline(),null!=me.delay)){6==se.previousNode.type&&(se.currentTimeline.snapshotCurrentStyles(),se.previousNode=Ur);const Pe=Tn(me.delay);se.delayNextStep(Pe)}A.steps.length&&(A.steps.forEach(Pe=>Ot(this,Pe,se)),se.currentTimeline.applyStylesToKeyframe(),se.subContextCount>B&&se.transformIntoNewTimeline()),I.previousNode=A}visitGroup(A,I){const B=[];let se=I.currentTimeline.currentTime;const me=A.options&&A.options.delay?Tn(A.options.delay):0;A.steps.forEach(Pe=>{const Fe=I.createSubContext(A.options);me&&Fe.delayNextStep(me),Ot(this,Pe,Fe),se=Math.max(se,Fe.currentTimeline.currentTime),B.push(Fe.currentTimeline)}),B.forEach(Pe=>I.currentTimeline.mergeTimelineCollectedStyles(Pe)),I.transformIntoNewTimeline(se),I.previousNode=A}_visitTiming(A,I){if(A.dynamic){const B=A.strValue;return Zn(I.params?Kn(B,I.params,I.errors):B,I.errors)}return{duration:A.duration,delay:A.delay,easing:A.easing}}visitAnimate(A,I){const B=I.currentAnimateTimings=this._visitTiming(A.timings,I),se=I.currentTimeline;B.delay&&(I.incrementTime(B.delay),se.snapshotCurrentStyles());const me=A.style;5==me.type?this.visitKeyframes(me,I):(I.incrementTime(B.duration),this.visitStyle(me,I),se.applyStylesToKeyframe()),I.currentAnimateTimings=null,I.previousNode=A}visitStyle(A,I){const B=I.currentTimeline,se=I.currentAnimateTimings;!se&&B.getCurrentStyleProperties().length&&B.forwardFrame();const me=se&&se.easing||A.easing;A.isEmptyStep?B.applyEmptyStep(me):B.setStyles(A.styles,me,I.errors,I.options),I.previousNode=A}visitKeyframes(A,I){const B=I.currentAnimateTimings,se=I.currentTimeline.duration,me=B.duration,Fe=I.createSubContext().currentTimeline;Fe.easing=B.easing,A.styles.forEach(ct=>{Fe.forwardTime((ct.offset||0)*me),Fe.setStyles(ct.styles,ct.easing,I.errors,I.options),Fe.applyStylesToKeyframe()}),I.currentTimeline.mergeTimelineCollectedStyles(Fe),I.transformIntoNewTimeline(se+me),I.previousNode=A}visitQuery(A,I){const B=I.currentTimeline.currentTime,se=A.options||{},me=se.delay?Tn(se.delay):0;me&&(6===I.previousNode.type||0==B&&I.currentTimeline.getCurrentStyleProperties().length)&&(I.currentTimeline.snapshotCurrentStyles(),I.previousNode=Ur);let Pe=B;const Fe=I.invokeQuery(A.selector,A.originalSelector,A.limit,A.includeSelf,!!se.optional,I.errors);I.currentQueryTotal=Fe.length;let ct=null;Fe.forEach((mt,Ht)=>{I.currentQueryIndex=Ht;const Rn=I.createSubContext(A.options,mt);me&&Rn.delayNextStep(me),mt===I.element&&(ct=Rn.currentTimeline),Ot(this,A.animation,Rn),Rn.currentTimeline.applyStylesToKeyframe(),Pe=Math.max(Pe,Rn.currentTimeline.currentTime)}),I.currentQueryIndex=0,I.currentQueryTotal=0,I.transformIntoNewTimeline(Pe),ct&&(I.currentTimeline.mergeTimelineCollectedStyles(ct),I.currentTimeline.snapshotCurrentStyles()),I.previousNode=A}visitStagger(A,I){const B=I.parentContext,se=I.currentTimeline,me=A.timings,Pe=Math.abs(me.duration),Fe=Pe*(I.currentQueryTotal-1);let ct=Pe*I.currentQueryIndex;switch(me.duration<0?"reverse":me.easing){case"reverse":ct=Fe-ct;break;case"full":ct=B.currentStaggerTime}const Ht=I.currentTimeline;ct&&Ht.delayNextStep(ct);const Rn=Ht.currentTime;Ot(this,A.animation,I),I.previousNode=A,B.currentStaggerTime=se.currentTime-Rn+(se.startTime-B.currentTimeline.startTime)}}const Ur={};class uo{constructor(A,I,B,se,me,Pe,Fe,ct){this._driver=A,this.element=I,this.subInstructions=B,this._enterClassName=se,this._leaveClassName=me,this.errors=Pe,this.timelines=Fe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ur,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ct||new Sr(this._driver,I,0),Fe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(A,I){if(!A)return;const B=A;let se=this.options;null!=B.duration&&(se.duration=Tn(B.duration)),null!=B.delay&&(se.delay=Tn(B.delay));const me=B.params;if(me){let Pe=se.params;Pe||(Pe=this.options.params={}),Object.keys(me).forEach(Fe=>{(!I||!Pe.hasOwnProperty(Fe))&&(Pe[Fe]=Kn(me[Fe],Pe,this.errors))})}}_copyOptions(){const A={};if(this.options){const I=this.options.params;if(I){const B=A.params={};Object.keys(I).forEach(se=>{B[se]=I[se]})}}return A}createSubContext(A=null,I,B){const se=I||this.element,me=new uo(this._driver,se,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(se,B||0));return me.previousNode=this.previousNode,me.currentAnimateTimings=this.currentAnimateTimings,me.options=this._copyOptions(),me.updateOptions(A),me.currentQueryIndex=this.currentQueryIndex,me.currentQueryTotal=this.currentQueryTotal,me.parentContext=this,this.subContextCount++,me}transformIntoNewTimeline(A){return this.previousNode=Ur,this.currentTimeline=this.currentTimeline.fork(this.element,A),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(A,I,B){const se={duration:null!=I?I:A.duration,delay:this.currentTimeline.currentTime+(null!=B?B:0)+A.delay,easing:""},me=new Xt(this._driver,A.element,A.keyframes,A.preStyleProps,A.postStyleProps,se,A.stretchStartingKeyframe);return this.timelines.push(me),se}incrementTime(A){this.currentTimeline.forwardTime(this.currentTimeline.duration+A)}delayNextStep(A){A>0&&this.currentTimeline.delayNextStep(A)}invokeQuery(A,I,B,se,me,Pe){let Fe=[];if(se&&Fe.push(this.element),A.length>0){A=(A=A.replace(fo,"."+this._enterClassName)).replace(Fr,"."+this._leaveClassName);let mt=this._driver.query(this.element,A,1!=B);0!==B&&(mt=B<0?mt.slice(mt.length+B,mt.length):mt.slice(0,B)),Fe.push(...mt)}return!me&&0==Fe.length&&Pe.push(`\`query("${I}")\` returned zero elements. (Use \`query("${I}", { optional: true })\` if you wish to allow this.)`),Fe}}class Sr{constructor(A,I,B,se){this._driver=A,this.element=I,this.startTime=B,this._elementTimelineStylesLookup=se,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(I),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(I,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(A){const I=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||I?(this.forwardTime(this.currentTime+A),I&&this.snapshotCurrentStyles()):this.startTime+=A}fork(A,I){return this.applyStylesToKeyframe(),new Sr(this._driver,A,I||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(A){this.applyStylesToKeyframe(),this.duration=A,this._loadKeyframe()}_updateStyle(A,I){this._localTimelineStyles[A]=I,this._globalTimelineStyles[A]=I,this._styleSummary[A]={time:this.currentTime,value:I}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(A){A&&(this._previousKeyframe.easing=A),Object.keys(this._globalTimelineStyles).forEach(I=>{this._backFill[I]=this._globalTimelineStyles[I]||G.l3,this._currentKeyframe[I]=G.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(A,I,B,se){I&&(this._previousKeyframe.easing=I);const me=se&&se.params||{},Pe=function(oe,A){const I={};let B;return oe.forEach(se=>{"*"===se?(B=B||Object.keys(A),B.forEach(me=>{I[me]=G.l3})):On(se,!1,I)}),I}(A,this._globalTimelineStyles);Object.keys(Pe).forEach(Fe=>{const ct=Kn(Pe[Fe],me,B);this._pendingStyles[Fe]=ct,this._localTimelineStyles.hasOwnProperty(Fe)||(this._backFill[Fe]=this._globalTimelineStyles.hasOwnProperty(Fe)?this._globalTimelineStyles[Fe]:G.l3),this._updateStyle(Fe,ct)})}applyStylesToKeyframe(){const A=this._pendingStyles,I=Object.keys(A);0!=I.length&&(this._pendingStyles={},I.forEach(B=>{this._currentKeyframe[B]=A[B]}),Object.keys(this._localTimelineStyles).forEach(B=>{this._currentKeyframe.hasOwnProperty(B)||(this._currentKeyframe[B]=this._localTimelineStyles[B])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(A=>{const I=this._localTimelineStyles[A];this._pendingStyles[A]=I,this._updateStyle(A,I)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const A=[];for(let I in this._currentKeyframe)A.push(I);return A}mergeTimelineCollectedStyles(A){Object.keys(A._styleSummary).forEach(I=>{const B=this._styleSummary[I],se=A._styleSummary[I];(!B||se.time>B.time)&&this._updateStyle(I,se.value)})}buildKeyframes(){this.applyStylesToKeyframe();const A=new Set,I=new Set,B=1===this._keyframes.size&&0===this.duration;let se=[];this._keyframes.forEach((Fe,ct)=>{const mt=On(Fe,!0);Object.keys(mt).forEach(Ht=>{const Rn=mt[Ht];Rn==G.k1?A.add(Ht):Rn==G.l3&&I.add(Ht)}),B||(mt.offset=ct/this.duration),se.push(mt)});const me=A.size?St(A.values()):[],Pe=I.size?St(I.values()):[];if(B){const Fe=se[0],ct=Xn(Fe);Fe.offset=0,ct.offset=1,se=[Fe,ct]}return Dr(this.element,se,me,Pe,this.duration,this.startTime,this.easing,!1)}}class Xt extends Sr{constructor(A,I,B,se,me,Pe,Fe=!1){super(A,I,Pe.delay),this.keyframes=B,this.preStyleProps=se,this.postStyleProps=me,this._stretchStartingKeyframe=Fe,this.timings={duration:Pe.duration,delay:Pe.delay,easing:Pe.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let A=this.keyframes,{delay:I,duration:B,easing:se}=this.timings;if(this._stretchStartingKeyframe&&I){const me=[],Pe=B+I,Fe=I/Pe,ct=On(A[0],!1);ct.offset=0,me.push(ct);const mt=On(A[0],!1);mt.offset=ln(Fe),me.push(mt);const Ht=A.length-1;for(let Rn=1;Rn<=Ht;Rn++){let dr=On(A[Rn],!1);dr.offset=ln((I+dr.offset*B)/Pe),me.push(dr)}B=Pe,I=0,se="",A=me}return Dr(this.element,A,this.preStyleProps,this.postStyleProps,B,I,se,!0)}}function ln(oe,A=3){const I=Math.pow(10,A-1);return Math.round(oe*I)/I}class wi{}class ti extends wi{normalizePropertyName(A,I){return je(A)}normalizeStyleValue(A,I,B,se){let me="";const Pe=B.toString().trim();if(To[I]&&0!==B&&"0"!==B)if("number"==typeof B)me="px";else{const Fe=B.match(/^[+-]?[\d\.]+([a-z]*)$/);Fe&&0==Fe[1].length&&se.push(`Please provide a CSS unit value for ${A}:${B}`)}return Pe+me}}const To=(()=>function(oe){const A={};return oe.forEach(I=>A[I]=!0),A}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Pn(oe,A,I,B,se,me,Pe,Fe,ct,mt,Ht,Rn,dr){return{type:0,element:oe,triggerName:A,isRemovalTransition:se,fromState:I,fromStyles:me,toState:B,toStyles:Pe,timelines:Fe,queriedElements:ct,preStyleProps:mt,postStyleProps:Ht,totalTime:Rn,errors:dr}}const Qe={};class He{constructor(A,I,B){this._triggerName=A,this.ast=I,this._stateStyles=B}match(A,I,B,se){return function(oe,A,I,B,se){return oe.some(me=>me(A,I,B,se))}(this.ast.matchers,A,I,B,se)}buildStyles(A,I,B){const se=this._stateStyles["*"],me=this._stateStyles[A],Pe=se?se.buildStyles(I,B):{};return me?me.buildStyles(I,B):Pe}build(A,I,B,se,me,Pe,Fe,ct,mt,Ht){const Rn=[],dr=this.ast.options&&this.ast.options.params||Qe,Yn=this.buildStyles(B,Fe&&Fe.params||Qe,Rn),Fn=ct&&ct.params||Qe,yr=this.buildStyles(se,Fn,Rn),vi=new Set,ei=new Map,Ri=new Map,li="void"===se,So={params:Object.assign(Object.assign({},dr),Fn)},Ro=Ht?[]:cr(A,I,this.ast.animation,me,Pe,Yn,yr,So,mt,Rn);let ci=0;if(Ro.forEach(fs=>{ci=Math.max(fs.duration+fs.delay,ci)}),Rn.length)return Pn(I,this._triggerName,B,se,li,Yn,yr,[],[],ei,Ri,ci,Rn);Ro.forEach(fs=>{const to=fs.element,Ps=Ee(ei,to,{});fs.preStyleProps.forEach(yi=>Ps[yi]=!0);const ta=Ee(Ri,to,{});fs.postStyleProps.forEach(yi=>ta[yi]=!0),to!==I&&vi.add(to)});const _o=St(vi.values());return Pn(I,this._triggerName,B,se,li,Yn,yr,Ro,_o,ei,Ri,ci)}}class st{constructor(A,I,B){this.styles=A,this.defaultParams=I,this.normalizer=B}buildStyles(A,I){const B={},se=Xn(this.defaultParams);return Object.keys(A).forEach(me=>{const Pe=A[me];null!=Pe&&(se[me]=Pe)}),this.styles.styles.forEach(me=>{if("string"!=typeof me){const Pe=me;Object.keys(Pe).forEach(Fe=>{let ct=Pe[Fe];ct.length>1&&(ct=Kn(ct,se,I));const mt=this.normalizer.normalizePropertyName(Fe,I);ct=this.normalizer.normalizeStyleValue(Fe,mt,ct,I),B[mt]=ct})}}),B}}class cn{constructor(A,I,B){this.name=A,this.ast=I,this._normalizer=B,this.transitionFactories=[],this.states={},I.states.forEach(se=>{this.states[se.name]=new st(se.style,se.options&&se.options.params||{},B)}),mn(this.states,"true","1"),mn(this.states,"false","0"),I.transitions.forEach(se=>{this.transitionFactories.push(new He(A,se,this.states))}),this.fallbackTransition=function(oe,A,I){return new He(oe,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Pe,Fe)=>!0],options:null,queryCount:0,depCount:0},A)}(A,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(A,I,B,se){return this.transitionFactories.find(Pe=>Pe.match(A,I,B,se))||null}matchStyles(A,I,B){return this.fallbackTransition.buildStyles(A,I,B)}}function mn(oe,A,I){oe.hasOwnProperty(A)?oe.hasOwnProperty(I)||(oe[I]=oe[A]):oe.hasOwnProperty(I)&&(oe[A]=oe[I])}const un=new Mi;class er{constructor(A,I,B){this.bodyNode=A,this._driver=I,this._normalizer=B,this._animations={},this._playersById={},this.players=[]}register(A,I){const B=[],se=$e(this._driver,I,B);if(B.length)throw new Error(`Unable to build the animation due to the following errors: ${B.join("\n")}`);this._animations[A]=se}_buildPlayer(A,I,B){const se=A.element,me=ke(0,this._normalizer,0,A.keyframes,I,B);return this._driver.animate(se,me,A.duration,A.delay,A.easing,[],!0)}create(A,I,B={}){const se=[],me=this._animations[A];let Pe;const Fe=new Map;if(me?(Pe=cr(this._driver,I,me,sn,Sn,{},{},B,un,se),Pe.forEach(Ht=>{const Rn=Ee(Fe,Ht.element,{});Ht.postStyleProps.forEach(dr=>Rn[dr]=null)})):(se.push("The requested animation doesn't exist or has already been destroyed"),Pe=[]),se.length)throw new Error(`Unable to create the animation due to the following errors: ${se.join("\n")}`);Fe.forEach((Ht,Rn)=>{Object.keys(Ht).forEach(dr=>{Ht[dr]=this._driver.computeStyle(Rn,dr,G.l3)})});const mt=ve(Pe.map(Ht=>{const Rn=Fe.get(Ht.element);return this._buildPlayer(Ht,{},Rn)}));return this._playersById[A]=mt,mt.onDestroy(()=>this.destroy(A)),this.players.push(mt),mt}destroy(A){const I=this._getPlayer(A);I.destroy(),delete this._playersById[A];const B=this.players.indexOf(I);B>=0&&this.players.splice(B,1)}_getPlayer(A){const I=this._playersById[A];if(!I)throw new Error(`Unable to find the timeline player referenced by ${A}`);return I}listen(A,I,B,se){const me=re(I,"","","");return fe(this._getPlayer(A),B,me,se),()=>{}}command(A,I,B,se){if("register"==B)return void this.register(A,se[0]);if("create"==B)return void this.create(A,I,se[0]||{});const me=this._getPlayer(A);switch(B){case"play":me.play();break;case"pause":me.pause();break;case"reset":me.reset();break;case"restart":me.restart();break;case"finish":me.finish();break;case"init":me.init();break;case"setPosition":me.setPosition(parseFloat(se[0]));break;case"destroy":this.destroy(A)}}}const Li="ng-animate-queued",Ii="ng-animate-disabled",io=".ng-animate-disabled",ar=[],Bn={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},zr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Mr="__ng_removed";class Ui{constructor(A,I=""){this.namespaceId=I;const B=A&&A.hasOwnProperty("value");if(this.value=null!=(oe=B?A.value:A)?oe:null,B){const me=Xn(A);delete me.value,this.options=me}else this.options={};var oe;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(A){const I=A.params;if(I){const B=this.options.params;Object.keys(I).forEach(se=>{null==B[se]&&(B[se]=I[se])})}}}const ni="void",Vi=new Ui(ni);class Gi{constructor(A,I,B){this.id=A,this.hostElement=I,this._engine=B,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+A,mi(I,this._hostClassName)}listen(A,I,B,se){if(!this._triggers.hasOwnProperty(I))throw new Error(`Unable to listen on the animation trigger event "${B}" because the animation trigger "${I}" doesn't exist!`);if(null==B||0==B.length)throw new Error(`Unable to listen on the animation trigger "${I}" because the provided event is undefined!`);if("start"!=(oe=B)&&"done"!=oe)throw new Error(`The provided animation trigger event "${B}" for the animation trigger "${I}" is not supported!`);var oe;const me=Ee(this._elementListeners,A,[]),Pe={name:I,phase:B,callback:se};me.push(Pe);const Fe=Ee(this._engine.statesByElement,A,{});return Fe.hasOwnProperty(I)||(mi(A,Rt),mi(A,Rt+"-"+I),Fe[I]=Vi),()=>{this._engine.afterFlush(()=>{const ct=me.indexOf(Pe);ct>=0&&me.splice(ct,1),this._triggers[I]||delete Fe[I]})}}register(A,I){return!this._triggers[A]&&(this._triggers[A]=I,!0)}_getTrigger(A){const I=this._triggers[A];if(!I)throw new Error(`The provided animation trigger "${A}" has not been registered!`);return I}trigger(A,I,B,se=!0){const me=this._getTrigger(I),Pe=new Yo(this.id,I,A);let Fe=this._engine.statesByElement.get(A);Fe||(mi(A,Rt),mi(A,Rt+"-"+I),this._engine.statesByElement.set(A,Fe={}));let ct=Fe[I];const mt=new Ui(B,this.id);if(!(B&&B.hasOwnProperty("value"))&&ct&&mt.absorbOptions(ct.options),Fe[I]=mt,ct||(ct=Vi),mt.value!==ni&&ct.value===mt.value){if(!function(oe,A){const I=Object.keys(oe),B=Object.keys(A);if(I.length!=B.length)return!1;for(let se=0;se<I.length;se++){const me=I[se];if(!A.hasOwnProperty(me)||oe[me]!==A[me])return!1}return!0}(ct.params,mt.params)){const Fn=[],yr=me.matchStyles(ct.value,ct.params,Fn),vi=me.matchStyles(mt.value,mt.params,Fn);Fn.length?this._engine.reportError(Fn):this._engine.afterFlush(()=>{zn(A,yr),Kt(A,vi)})}return}const dr=Ee(this._engine.playersByElement,A,[]);dr.forEach(Fn=>{Fn.namespaceId==this.id&&Fn.triggerName==I&&Fn.queued&&Fn.destroy()});let Rr=me.matchTransition(ct.value,mt.value,A,mt.params),Yn=!1;if(!Rr){if(!se)return;Rr=me.fallbackTransition,Yn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:A,triggerName:I,transition:Rr,fromState:ct,toState:mt,player:Pe,isFallbackTransition:Yn}),Yn||(mi(A,Li),Pe.onStart(()=>{Ai(A,Li)})),Pe.onDone(()=>{let Fn=this.players.indexOf(Pe);Fn>=0&&this.players.splice(Fn,1);const yr=this._engine.playersByElement.get(A);if(yr){let vi=yr.indexOf(Pe);vi>=0&&yr.splice(vi,1)}}),this.players.push(Pe),dr.push(Pe),Pe}deregister(A){delete this._triggers[A],this._engine.statesByElement.forEach((I,B)=>{delete I[A]}),this._elementListeners.forEach((I,B)=>{this._elementListeners.set(B,I.filter(se=>se.name!=A))})}clearElementCache(A){this._engine.statesByElement.delete(A),this._elementListeners.delete(A);const I=this._engine.playersByElement.get(A);I&&(I.forEach(B=>B.destroy()),this._engine.playersByElement.delete(A))}_signalRemovalForInnerTriggers(A,I){const B=this._engine.driver.query(A,Jt,!0);B.forEach(se=>{if(se[Mr])return;const me=this._engine.fetchNamespacesByElement(se);me.size?me.forEach(Pe=>Pe.triggerLeaveAnimation(se,I,!1,!0)):this.clearElementCache(se)}),this._engine.afterFlushAnimationsDone(()=>B.forEach(se=>this.clearElementCache(se)))}triggerLeaveAnimation(A,I,B,se){const me=this._engine.statesByElement.get(A);if(me){const Pe=[];if(Object.keys(me).forEach(Fe=>{if(this._triggers[Fe]){const ct=this.trigger(A,Fe,ni,se);ct&&Pe.push(ct)}}),Pe.length)return this._engine.markElementAsRemoved(this.id,A,!0,I),B&&ve(Pe).onDone(()=>this._engine.processLeaveNode(A)),!0}return!1}prepareLeaveAnimationListeners(A){const I=this._elementListeners.get(A),B=this._engine.statesByElement.get(A);if(I&&B){const se=new Set;I.forEach(me=>{const Pe=me.name;if(se.has(Pe))return;se.add(Pe);const ct=this._triggers[Pe].fallbackTransition,mt=B[Pe]||Vi,Ht=new Ui(ni),Rn=new Yo(this.id,Pe,A);this._engine.totalQueuedPlayers++,this._queue.push({element:A,triggerName:Pe,transition:ct,fromState:mt,toState:Ht,player:Rn,isFallbackTransition:!0})})}}removeNode(A,I){const B=this._engine;if(A.childElementCount&&this._signalRemovalForInnerTriggers(A,I),this.triggerLeaveAnimation(A,I,!0))return;let se=!1;if(B.totalAnimations){const me=B.players.length?B.playersByQueriedElement.get(A):[];if(me&&me.length)se=!0;else{let Pe=A;for(;Pe=Pe.parentNode;)if(B.statesByElement.get(Pe)){se=!0;break}}}if(this.prepareLeaveAnimationListeners(A),se)B.markElementAsRemoved(this.id,A,!1,I);else{const me=A[Mr];(!me||me===Bn)&&(B.afterFlush(()=>this.clearElementCache(A)),B.destroyInnerAnimations(A),B._onRemovalComplete(A,I))}}insertNode(A,I){mi(A,this._hostClassName)}drainQueuedTransitions(A){const I=[];return this._queue.forEach(B=>{const se=B.player;if(se.destroyed)return;const me=B.element,Pe=this._elementListeners.get(me);Pe&&Pe.forEach(Fe=>{if(Fe.name==B.triggerName){const ct=re(me,B.triggerName,B.fromState.value,B.toState.value);ct._data=A,fe(B.player,Fe.phase,ct,Fe.callback)}}),se.markedForDestroy?this._engine.afterFlush(()=>{se.destroy()}):I.push(B)}),this._queue=[],I.sort((B,se)=>{const me=B.transition.ast.depCount,Pe=se.transition.ast.depCount;return 0==me||0==Pe?me-Pe:this._engine.driver.containsElement(B.element,se.element)?1:-1})}destroy(A){this.players.forEach(I=>I.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,A)}elementContainsData(A){let I=!1;return this._elementListeners.has(A)&&(I=!0),I=!!this._queue.find(B=>B.element===A)||I,I}}class ai{constructor(A,I,B){this.bodyNode=A,this.driver=I,this._normalizer=B,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(se,me)=>{}}_onRemovalComplete(A,I){this.onRemovalComplete(A,I)}get queuedPlayers(){const A=[];return this._namespaceList.forEach(I=>{I.players.forEach(B=>{B.queued&&A.push(B)})}),A}createNamespace(A,I){const B=new Gi(A,I,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,I)?this._balanceNamespaceList(B,I):(this.newHostElements.set(I,B),this.collectEnterElement(I)),this._namespaceLookup[A]=B}_balanceNamespaceList(A,I){const B=this._namespaceList.length-1;if(B>=0){let se=!1;for(let me=B;me>=0;me--)if(this.driver.containsElement(this._namespaceList[me].hostElement,I)){this._namespaceList.splice(me+1,0,A),se=!0;break}se||this._namespaceList.splice(0,0,A)}else this._namespaceList.push(A);return this.namespacesByHostElement.set(I,A),A}register(A,I){let B=this._namespaceLookup[A];return B||(B=this.createNamespace(A,I)),B}registerTrigger(A,I,B){let se=this._namespaceLookup[A];se&&se.register(I,B)&&this.totalAnimations++}destroy(A,I){if(!A)return;const B=this._fetchNamespace(A);this.afterFlush(()=>{this.namespacesByHostElement.delete(B.hostElement),delete this._namespaceLookup[A];const se=this._namespaceList.indexOf(B);se>=0&&this._namespaceList.splice(se,1)}),this.afterFlushAnimationsDone(()=>B.destroy(I))}_fetchNamespace(A){return this._namespaceLookup[A]}fetchNamespacesByElement(A){const I=new Set,B=this.statesByElement.get(A);if(B){const se=Object.keys(B);for(let me=0;me<se.length;me++){const Pe=B[se[me]].namespaceId;if(Pe){const Fe=this._fetchNamespace(Pe);Fe&&I.add(Fe)}}}return I}trigger(A,I,B,se){if(Bi(I)){const me=this._fetchNamespace(A);if(me)return me.trigger(I,B,se),!0}return!1}insertNode(A,I,B,se){if(!Bi(I))return;const me=I[Mr];if(me&&me.setForRemoval){me.setForRemoval=!1,me.setForMove=!0;const Pe=this.collectedLeaveElements.indexOf(I);Pe>=0&&this.collectedLeaveElements.splice(Pe,1)}if(A){const Pe=this._fetchNamespace(A);Pe&&Pe.insertNode(I,B)}se&&this.collectEnterElement(I)}collectEnterElement(A){this.collectedEnterElements.push(A)}markElementAsDisabled(A,I){I?this.disabledNodes.has(A)||(this.disabledNodes.add(A),mi(A,Ii)):this.disabledNodes.has(A)&&(this.disabledNodes.delete(A),Ai(A,Ii))}removeNode(A,I,B,se){if(Bi(I)){const me=A?this._fetchNamespace(A):null;if(me?me.removeNode(I,se):this.markElementAsRemoved(A,I,!1,se),B){const Pe=this.namespacesByHostElement.get(I);Pe&&Pe.id!==A&&Pe.removeNode(I,se)}}else this._onRemovalComplete(I,se)}markElementAsRemoved(A,I,B,se){this.collectedLeaveElements.push(I),I[Mr]={namespaceId:A,setForRemoval:se,hasAnimation:B,removedBeforeQueried:!1}}listen(A,I,B,se,me){return Bi(I)?this._fetchNamespace(A).listen(I,B,se,me):()=>{}}_buildInstruction(A,I,B,se,me){return A.transition.build(this.driver,A.element,A.fromState.value,A.toState.value,B,se,A.fromState.options,A.toState.options,I,me)}destroyInnerAnimations(A){let I=this.driver.query(A,Jt,!0);I.forEach(B=>this.destroyActiveAnimationsForElement(B)),0!=this.playersByQueriedElement.size&&(I=this.driver.query(A,kn,!0),I.forEach(B=>this.finishActiveQueriedAnimationOnElement(B)))}destroyActiveAnimationsForElement(A){const I=this.playersByElement.get(A);I&&I.forEach(B=>{B.queued?B.markedForDestroy=!0:B.destroy()})}finishActiveQueriedAnimationOnElement(A){const I=this.playersByQueriedElement.get(A);I&&I.forEach(B=>B.finish())}whenRenderingDone(){return new Promise(A=>{if(this.players.length)return ve(this.players).onDone(()=>A());A()})}processLeaveNode(A){const I=A[Mr];if(I&&I.setForRemoval){if(A[Mr]=Bn,I.namespaceId){this.destroyInnerAnimations(A);const B=this._fetchNamespace(I.namespaceId);B&&B.clearElementCache(A)}this._onRemovalComplete(A,I.setForRemoval)}this.driver.matchesElement(A,io)&&this.markElementAsDisabled(A,!1),this.driver.query(A,io,!0).forEach(B=>{this.markElementAsDisabled(B,!1)})}flush(A=-1){let I=[];if(this.newHostElements.size&&(this.newHostElements.forEach((B,se)=>this._balanceNamespaceList(B,se)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let B=0;B<this.collectedEnterElements.length;B++)mi(this.collectedEnterElements[B],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const B=[];try{I=this._flushAnimations(B,A)}finally{for(let se=0;se<B.length;se++)B[se]()}}else for(let B=0;B<this.collectedLeaveElements.length;B++)this.processLeaveNode(this.collectedLeaveElements[B]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(B=>B()),this._flushFns=[],this._whenQuietFns.length){const B=this._whenQuietFns;this._whenQuietFns=[],I.length?ve(I).onDone(()=>{B.forEach(se=>se())}):B.forEach(se=>se())}}reportError(A){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${A.join("\n")}`)}_flushAnimations(A,I){const B=new Mi,se=[],me=new Map,Pe=[],Fe=new Map,ct=new Map,mt=new Map,Ht=new Set;this.disabledNodes.forEach(Cn=>{Ht.add(Cn);const Mn=this.driver.query(Cn,".ng-animate-queued",!0);for(let tr=0;tr<Mn.length;tr++)Ht.add(Mn[tr])});const Rn=this.bodyNode,dr=Array.from(this.statesByElement.keys()),Rr=vs(dr,this.collectedEnterElements),Yn=new Map;let Fn=0;Rr.forEach((Cn,Mn)=>{const tr=sn+Fn++;Yn.set(Mn,tr),Cn.forEach(Or=>mi(Or,tr))});const yr=[],vi=new Set,ei=new Set;for(let Cn=0;Cn<this.collectedLeaveElements.length;Cn++){const Mn=this.collectedLeaveElements[Cn],tr=Mn[Mr];tr&&tr.setForRemoval&&(yr.push(Mn),vi.add(Mn),tr.hasAnimation?this.driver.query(Mn,".ng-star-inserted",!0).forEach(Or=>vi.add(Or)):ei.add(Mn))}const Ri=new Map,li=vs(dr,Array.from(vi));li.forEach((Cn,Mn)=>{const tr=Sn+Fn++;Ri.set(Mn,tr),Cn.forEach(Or=>mi(Or,tr))}),A.push(()=>{Rr.forEach((Cn,Mn)=>{const tr=Yn.get(Mn);Cn.forEach(Or=>Ai(Or,tr))}),li.forEach((Cn,Mn)=>{const tr=Ri.get(Mn);Cn.forEach(Or=>Ai(Or,tr))}),yr.forEach(Cn=>{this.processLeaveNode(Cn)})});const So=[],Ro=[];for(let Cn=this._namespaceList.length-1;Cn>=0;Cn--)this._namespaceList[Cn].drainQueuedTransitions(I).forEach(tr=>{const Or=tr.player,Zr=tr.element;if(So.push(Or),this.collectedEnterElements.length){const Ei=Zr[Mr];if(Ei&&Ei.setForMove)return void Or.destroy()}const Wr=!Rn||!this.driver.containsElement(Rn,Zr),Zi=Ri.get(Zr),qi=Yn.get(Zr),ii=this._buildInstruction(tr,B,qi,Zi,Wr);if(ii.errors&&ii.errors.length)Ro.push(ii);else{if(Wr)return Or.onStart(()=>zn(Zr,ii.fromStyles)),Or.onDestroy(()=>Kt(Zr,ii.toStyles)),void se.push(Or);if(tr.isFallbackTransition)return Or.onStart(()=>zn(Zr,ii.fromStyles)),Or.onDestroy(()=>Kt(Zr,ii.toStyles)),void se.push(Or);ii.timelines.forEach(Ei=>Ei.stretchStartingKeyframe=!0),B.append(Zr,ii.timelines),Pe.push({instruction:ii,player:Or,element:Zr}),ii.queriedElements.forEach(Ei=>Ee(Fe,Ei,[]).push(Or)),ii.preStyleProps.forEach((Ei,$s)=>{const ro=Object.keys(Ei);if(ro.length){let oi=ct.get($s);oi||ct.set($s,oi=new Set),ro.forEach(ws=>oi.add(ws))}}),ii.postStyleProps.forEach((Ei,$s)=>{const ro=Object.keys(Ei);let oi=mt.get($s);oi||mt.set($s,oi=new Set),ro.forEach(ws=>oi.add(ws))})}});if(Ro.length){const Cn=[];Ro.forEach(Mn=>{Cn.push(`@${Mn.triggerName} has failed due to:\n`),Mn.errors.forEach(tr=>Cn.push(`- ${tr}\n`))}),So.forEach(Mn=>Mn.destroy()),this.reportError(Cn)}const ci=new Map,_o=new Map;Pe.forEach(Cn=>{const Mn=Cn.element;B.has(Mn)&&(_o.set(Mn,Mn),this._beforeAnimationBuild(Cn.player.namespaceId,Cn.instruction,ci))}),se.forEach(Cn=>{const Mn=Cn.element;this._getPreviousPlayers(Mn,!1,Cn.namespaceId,Cn.triggerName,null).forEach(Or=>{Ee(ci,Mn,[]).push(Or),Or.destroy()})});const fs=yr.filter(Cn=>ui(Cn,ct,mt)),to=new Map;Ko(to,this.driver,ei,mt,G.l3).forEach(Cn=>{ui(Cn,ct,mt)&&fs.push(Cn)});const ta=new Map;Rr.forEach((Cn,Mn)=>{Ko(ta,this.driver,new Set(Cn),ct,G.k1)}),fs.forEach(Cn=>{const Mn=to.get(Cn),tr=ta.get(Cn);to.set(Cn,Object.assign(Object.assign({},Mn),tr))});const yi=[],no=[],bi={};Pe.forEach(Cn=>{const{element:Mn,player:tr,instruction:Or}=Cn;if(B.has(Mn)){if(Ht.has(Mn))return tr.onDestroy(()=>Kt(Mn,Or.toStyles)),tr.disabled=!0,tr.overrideTotalTime(Or.totalTime),void se.push(tr);let Zr=bi;if(_o.size>1){let Zi=Mn;const qi=[];for(;Zi=Zi.parentNode;){const ii=_o.get(Zi);if(ii){Zr=ii;break}qi.push(Zi)}qi.forEach(ii=>_o.set(ii,Zr))}const Wr=this._buildAnimation(tr.namespaceId,Or,ci,me,ta,to);if(tr.setRealPlayer(Wr),Zr===bi)yi.push(tr);else{const Zi=this.playersByElement.get(Zr);Zi&&Zi.length&&(tr.parentPlayer=ve(Zi)),se.push(tr)}}else zn(Mn,Or.fromStyles),tr.onDestroy(()=>Kt(Mn,Or.toStyles)),no.push(tr),Ht.has(Mn)&&se.push(tr)}),no.forEach(Cn=>{const Mn=me.get(Cn.element);if(Mn&&Mn.length){const tr=ve(Mn);Cn.setRealPlayer(tr)}}),se.forEach(Cn=>{Cn.parentPlayer?Cn.syncPlayerEvents(Cn.parentPlayer):Cn.destroy()});for(let Cn=0;Cn<yr.length;Cn++){const Mn=yr[Cn],tr=Mn[Mr];if(Ai(Mn,Sn),tr&&tr.hasAnimation)continue;let Or=[];if(Fe.size){let Wr=Fe.get(Mn);Wr&&Wr.length&&Or.push(...Wr);let Zi=this.driver.query(Mn,kn,!0);for(let qi=0;qi<Zi.length;qi++){let ii=Fe.get(Zi[qi]);ii&&ii.length&&Or.push(...ii)}}const Zr=Or.filter(Wr=>!Wr.destroyed);Zr.length?Qn(this,Mn,Zr):this.processLeaveNode(Mn)}return yr.length=0,yi.forEach(Cn=>{this.players.push(Cn),Cn.onDone(()=>{Cn.destroy();const Mn=this.players.indexOf(Cn);this.players.splice(Mn,1)}),Cn.play()}),yi}elementContainsData(A,I){let B=!1;const se=I[Mr];return se&&se.setForRemoval&&(B=!0),this.playersByElement.has(I)&&(B=!0),this.playersByQueriedElement.has(I)&&(B=!0),this.statesByElement.has(I)&&(B=!0),this._fetchNamespace(A).elementContainsData(I)||B}afterFlush(A){this._flushFns.push(A)}afterFlushAnimationsDone(A){this._whenQuietFns.push(A)}_getPreviousPlayers(A,I,B,se,me){let Pe=[];if(I){const Fe=this.playersByQueriedElement.get(A);Fe&&(Pe=Fe)}else{const Fe=this.playersByElement.get(A);if(Fe){const ct=!me||me==ni;Fe.forEach(mt=>{mt.queued||!ct&&mt.triggerName!=se||Pe.push(mt)})}}return(B||se)&&(Pe=Pe.filter(Fe=>!(B&&B!=Fe.namespaceId||se&&se!=Fe.triggerName))),Pe}_beforeAnimationBuild(A,I,B){const me=I.element,Pe=I.isRemovalTransition?void 0:A,Fe=I.isRemovalTransition?void 0:I.triggerName;for(const ct of I.timelines){const mt=ct.element,Ht=mt!==me,Rn=Ee(B,mt,[]);this._getPreviousPlayers(mt,Ht,Pe,Fe,I.toState).forEach(Rr=>{const Yn=Rr.getRealPlayer();Yn.beforeDestroy&&Yn.beforeDestroy(),Rr.destroy(),Rn.push(Rr)})}zn(me,I.fromStyles)}_buildAnimation(A,I,B,se,me,Pe){const Fe=I.triggerName,ct=I.element,mt=[],Ht=new Set,Rn=new Set,dr=I.timelines.map(Yn=>{const Fn=Yn.element;Ht.add(Fn);const yr=Fn[Mr];if(yr&&yr.removedBeforeQueried)return new G.ZN(Yn.duration,Yn.delay);const vi=Fn!==ct,ei=function(oe){const A=[];return Ji(oe,A),A}((B.get(Fn)||ar).map(ci=>ci.getRealPlayer())).filter(ci=>!!ci.element&&ci.element===Fn),Ri=me.get(Fn),li=Pe.get(Fn),So=ke(0,this._normalizer,0,Yn.keyframes,Ri,li),Ro=this._buildPlayer(Yn,So,ei);if(Yn.subTimeline&&se&&Rn.add(Fn),vi){const ci=new Yo(A,Fe,Fn);ci.setRealPlayer(Ro),mt.push(ci)}return Ro});mt.forEach(Yn=>{Ee(this.playersByQueriedElement,Yn.element,[]).push(Yn),Yn.onDone(()=>function(oe,A,I){let B;if(oe instanceof Map){if(B=oe.get(A),B){if(B.length){const se=B.indexOf(I);B.splice(se,1)}0==B.length&&oe.delete(A)}}else if(B=oe[A],B){if(B.length){const se=B.indexOf(I);B.splice(se,1)}0==B.length&&delete oe[A]}return B}(this.playersByQueriedElement,Yn.element,Yn))}),Ht.forEach(Yn=>mi(Yn,Gt));const Rr=ve(dr);return Rr.onDestroy(()=>{Ht.forEach(Yn=>Ai(Yn,Gt)),Kt(ct,I.toStyles)}),Rn.forEach(Yn=>{Ee(se,Yn,[]).push(Rr)}),Rr}_buildPlayer(A,I,B){return I.length>0?this.driver.animate(A.element,I,A.duration,A.delay,A.easing,B):new G.ZN(A.duration,A.delay)}}class Yo{constructor(A,I,B){this.namespaceId=A,this.triggerName=I,this.element=B,this._player=new G.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(A){this._containsRealPlayer||(this._player=A,Object.keys(this._queuedCallbacks).forEach(I=>{this._queuedCallbacks[I].forEach(B=>fe(A,I,void 0,B))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(A.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(A){this.totalTime=A}syncPlayerEvents(A){const I=this._player;I.triggerCallback&&A.onStart(()=>I.triggerCallback("start")),A.onDone(()=>this.finish()),A.onDestroy(()=>this.destroy())}_queueEvent(A,I){Ee(this._queuedCallbacks,A,[]).push(I)}onDone(A){this.queued&&this._queueEvent("done",A),this._player.onDone(A)}onStart(A){this.queued&&this._queueEvent("start",A),this._player.onStart(A)}onDestroy(A){this.queued&&this._queueEvent("destroy",A),this._player.onDestroy(A)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(A){this.queued||this._player.setPosition(A)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(A){const I=this._player;I.triggerCallback&&I.triggerCallback(A)}}function Bi(oe){return oe&&1===oe.nodeType}function Do(oe,A){const I=oe.style.display;return oe.style.display=null!=A?A:"none",I}function Ko(oe,A,I,B,se){const me=[];I.forEach(ct=>me.push(Do(ct)));const Pe=[];B.forEach((ct,mt)=>{const Ht={};ct.forEach(Rn=>{const dr=Ht[Rn]=A.computeStyle(mt,Rn,se);(!dr||0==dr.length)&&(mt[Mr]=zr,Pe.push(mt))}),oe.set(mt,Ht)});let Fe=0;return I.forEach(ct=>Do(ct,me[Fe++])),Pe}function vs(oe,A){const I=new Map;if(oe.forEach(Fe=>I.set(Fe,[])),0==A.length)return I;const se=new Set(A),me=new Map;function Pe(Fe){if(!Fe)return 1;let ct=me.get(Fe);if(ct)return ct;const mt=Fe.parentNode;return ct=I.has(mt)?mt:se.has(mt)?1:Pe(mt),me.set(Fe,ct),ct}return A.forEach(Fe=>{const ct=Pe(Fe);1!==ct&&I.get(ct).push(Fe)}),I}const Vo="$$classes";function mi(oe,A){if(oe.classList)oe.classList.add(A);else{let I=oe[Vo];I||(I=oe[Vo]={}),I[A]=!0}}function Ai(oe,A){if(oe.classList)oe.classList.remove(A);else{let I=oe[Vo];I&&delete I[A]}}function Qn(oe,A,I){ve(I).onDone(()=>oe.processLeaveNode(A))}function Ji(oe,A){for(let I=0;I<oe.length;I++){const B=oe[I];B instanceof G.ZE?Ji(B.players,A):A.push(B)}}function ui(oe,A,I){const B=I.get(oe);if(!B)return!1;let se=A.get(oe);return se?B.forEach(me=>se.add(me)):A.set(oe,B),I.delete(oe),!0}class Xi{constructor(A,I,B){this.bodyNode=A,this._driver=I,this._normalizer=B,this._triggerCache={},this.onRemovalComplete=(se,me)=>{},this._transitionEngine=new ai(A,I,B),this._timelineEngine=new er(A,I,B),this._transitionEngine.onRemovalComplete=(se,me)=>this.onRemovalComplete(se,me)}registerTrigger(A,I,B,se,me){const Pe=A+"-"+se;let Fe=this._triggerCache[Pe];if(!Fe){const ct=[],mt=$e(this._driver,me,ct);if(ct.length)throw new Error(`The animation trigger "${se}" has failed to build due to the following errors:\n - ${ct.join("\n - ")}`);Fe=function(oe,A,I){return new cn(oe,A,I)}(se,mt,this._normalizer),this._triggerCache[Pe]=Fe}this._transitionEngine.registerTrigger(I,se,Fe)}register(A,I){this._transitionEngine.register(A,I)}destroy(A,I){this._transitionEngine.destroy(A,I)}onInsert(A,I,B,se){this._transitionEngine.insertNode(A,I,B,se)}onRemove(A,I,B,se){this._transitionEngine.removeNode(A,I,se||!1,B)}disableAnimations(A,I){this._transitionEngine.markElementAsDisabled(A,I)}process(A,I,B,se){if("@"==B.charAt(0)){const[me,Pe]=pe(B);this._timelineEngine.command(me,I,Pe,se)}else this._transitionEngine.trigger(A,I,B,se)}listen(A,I,B,se,me){if("@"==B.charAt(0)){const[Pe,Fe]=pe(B);return this._timelineEngine.listen(Pe,I,Fe,me)}return this._transitionEngine.listen(A,I,B,se,me)}flush(A=-1){this._transitionEngine.flush(A)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function ri(oe,A){let I=null,B=null;return Array.isArray(A)&&A.length?(I=qe(A[0]),A.length>1&&(B=qe(A[A.length-1]))):A&&(I=qe(A)),I||B?new ie(oe,I,B):null}let ie=(()=>{class oe{constructor(I,B,se){this._element=I,this._startStyles=B,this._endStyles=se,this._state=0;let me=oe.initialStylesByElement.get(I);me||oe.initialStylesByElement.set(I,me={}),this._initialStyles=me}start(){this._state<1&&(this._startStyles&&Kt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Kt(this._element,this._initialStyles),this._endStyles&&(Kt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(oe.initialStylesByElement.delete(this._element),this._startStyles&&(zn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(zn(this._element,this._endStyles),this._endStyles=null),Kt(this._element,this._initialStyles),this._state=3)}}return oe.initialStylesByElement=new WeakMap,oe})();function qe(oe){let A=null;const I=Object.keys(oe);for(let B=0;B<I.length;B++){const se=I[B];W(se)&&(A=A||{},A[se]=oe[se])}return A}function W(oe){return"display"===oe||"position"===oe}const lt="animation",Vt="animationend";class Ir{constructor(A,I,B,se,me,Pe,Fe){this._element=A,this._name=I,this._duration=B,this._delay=se,this._easing=me,this._fillMode=Pe,this._onDoneFn=Fe,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=ct=>this._handleCallback(ct)}apply(){(function(oe,A){const I=fr(oe,"").trim();let B=0;I.length&&(function(oe,A){let I=0;for(let B=0;B<oe.length;B++)","===oe.charAt(B)&&I++;return I}(I)+1,A=`${I}, ${A}`),$r(oe,"",A)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),co(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){$n(this._element,this._name,"paused")}resume(){$n(this._element,this._name,"running")}setPosition(A){const I=Bo(this._element,this._name);this._position=A*this._duration,$r(this._element,"Delay",`-${this._position}ms`,I)}getPosition(){return this._position}_handleCallback(A){const I=A._ngTestManualTimestamp||Date.now(),B=1e3*parseFloat(A.elapsedTime.toFixed(3));A.animationName==this._name&&Math.max(I-this._startTime,0)>=this._delay&&B>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),co(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(oe,A){const B=fr(oe,"").split(","),se=Pi(B,A);se>=0&&(B.splice(se,1),$r(oe,"",B.join(",")))}(this._element,this._name))}}function $n(oe,A,I){$r(oe,"PlayState",I,Bo(oe,A))}function Bo(oe,A){const I=fr(oe,"");return I.indexOf(",")>0?Pi(I.split(","),A):Pi([I],A)}function Pi(oe,A){for(let I=0;I<oe.length;I++)if(oe[I].indexOf(A)>=0)return I;return-1}function co(oe,A,I){I?oe.removeEventListener(Vt,A):oe.addEventListener(Vt,A)}function $r(oe,A,I,B){const se=lt+A;if(null!=B){const me=oe.style[se];if(me.length){const Pe=me.split(",");Pe[B]=I,I=Pe.join(",")}}oe.style[se]=I}function fr(oe,A){return oe.style[lt+A]||""}class Z{constructor(A,I,B,se,me,Pe,Fe,ct){this.element=A,this.keyframes=I,this.animationName=B,this._duration=se,this._delay=me,this._finalStyles=Fe,this._specialStyles=ct,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Pe||"linear",this.totalTime=se+me,this._buildStyler()}onStart(A){this._onStartFns.push(A)}onDone(A){this._onDoneFns.push(A)}onDestroy(A){this._onDestroyFns.push(A)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(A=>A()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(A=>A()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(A=>A()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(A){this._styler.setPosition(A)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Ir(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(A){const I="start"==A?this._onStartFns:this._onDoneFns;I.forEach(B=>B()),I.length=0}beforeDestroy(){this.init();const A={};if(this.hasStarted()){const I=this._state>=3;Object.keys(this._finalStyles).forEach(B=>{"offset"!=B&&(A[B]=I?this._finalStyles[B]:Ue(this.element,B))})}this.currentSnapshot=A}}class ce extends G.ZN{constructor(A,I){super(),this.element=A,this._startingStyles={},this.__initialized=!1,this._styles=ot(I)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(A=>{this._startingStyles[A]=this.element.style[A]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(A=>this.element.style.setProperty(A,this._styles[A])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(A=>{const I=this._startingStyles[A];I?this.element.style.setProperty(A,I):this.element.style.removeProperty(A)}),this._startingStyles=null,super.destroy())}}class N{constructor(){this._count=0}validateStyleProperty(A){return Yt(A)}matchesElement(A,I){return In(A,I)}containsElement(A,I){return Et(A,I)}query(A,I,B){return Ke(A,I,B)}computeStyle(A,I,B){return window.getComputedStyle(A)[I]}buildKeyframeElement(A,I,B){B=B.map(Fe=>ot(Fe));let se=`@keyframes ${I} {\n`,me="";B.forEach(Fe=>{me=" ";const ct=parseFloat(Fe.offset);se+=`${me}${100*ct}% {\n`,me+=" ",Object.keys(Fe).forEach(mt=>{const Ht=Fe[mt];switch(mt){case"offset":return;case"easing":return void(Ht&&(se+=`${me}animation-timing-function: ${Ht};\n`));default:return void(se+=`${me}${mt}: ${Ht};\n`)}}),se+=`${me}}\n`}),se+="}\n";const Pe=document.createElement("style");return Pe.textContent=se,Pe}animate(A,I,B,se,me,Pe=[],Fe){const ct=Pe.filter(yr=>yr instanceof Z),mt={};xt(B,se)&&ct.forEach(yr=>{let vi=yr.currentSnapshot;Object.keys(vi).forEach(ei=>mt[ei]=vi[ei])});const Ht=function(oe){let A={};return oe&&(Array.isArray(oe)?oe:[oe]).forEach(B=>{Object.keys(B).forEach(se=>{"offset"==se||"easing"==se||(A[se]=B[se])})}),A}(I=nn(A,I,mt));if(0==B)return new ce(A,Ht);const Rn="gen_css_kf_"+this._count++,dr=this.buildKeyframeElement(A,Rn,I);(function(oe){var A;const I=null===(A=oe.getRootNode)||void 0===A?void 0:A.call(oe);return"undefined"!=typeof ShadowRoot&&I instanceof ShadowRoot?I:document.head})(A).appendChild(dr);const Yn=ri(A,I),Fn=new Z(A,I,Rn,B,se,me,Ht,Yn);return Fn.onDestroy(()=>{var oe;(oe=dr).parentNode.removeChild(oe)}),Fn}}class j{constructor(A,I,B,se){this.element=A,this.keyframes=I,this.options=B,this._specialStyles=se,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=B.duration,this._delay=B.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(A=>A()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const A=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,A,this.options),this._finalKeyframe=A.length?A[A.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(A,I,B){return A.animate(I,B)}onStart(A){this._onStartFns.push(A)}onDone(A){this._onDoneFns.push(A)}onDestroy(A){this._onDestroyFns.push(A)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(A=>A()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(A=>A()),this._onDestroyFns=[])}setPosition(A){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=A*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const A={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(I=>{"offset"!=I&&(A[I]=this._finished?this._finalKeyframe[I]:Ue(this.element,I))}),this.currentSnapshot=A}triggerCallback(A){const I="start"==A?this._onStartFns:this._onDoneFns;I.forEach(B=>B()),I.length=0}}class L{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(ze().toString()),this._cssKeyframesDriver=new N}validateStyleProperty(A){return Yt(A)}matchesElement(A,I){return In(A,I)}containsElement(A,I){return Et(A,I)}query(A,I,B){return Ke(A,I,B)}computeStyle(A,I,B){return window.getComputedStyle(A)[I]}overrideWebAnimationsSupport(A){this._isNativeImpl=A}animate(A,I,B,se,me,Pe=[],Fe){if(!Fe&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(A,I,B,se,me,Pe);const Ht={duration:B,delay:se,fill:0==se?"both":"forwards"};me&&(Ht.easing=me);const Rn={},dr=Pe.filter(Yn=>Yn instanceof j);xt(B,se)&&dr.forEach(Yn=>{let Fn=Yn.currentSnapshot;Object.keys(Fn).forEach(yr=>Rn[yr]=Fn[yr])});const Rr=ri(A,I=nn(A,I=I.map(Yn=>On(Yn,!1)),Rn));return new j(A,I,Ht,Rr)}}function ze(){return E()&&Element.prototype.animate||{}}var Pt=Q(8583);let En=(()=>{class oe extends G._j{constructor(I,B){super(),this._nextAnimationId=0,this._renderer=I.createRenderer(B.body,{id:"0",encapsulation:R.ifc.None,styles:[],data:{animation:[]}})}build(I){const B=this._nextAnimationId.toString();this._nextAnimationId++;const se=Array.isArray(I)?(0,G.vP)(I):I;return _r(this._renderer,null,B,"register",[se]),new pr(B,this._renderer)}}return oe.\u0275fac=function(I){return new(I||oe)(R.LFG(R.FYo),R.LFG(Pt.K0))},oe.\u0275prov=R.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class pr extends G.LC{constructor(A,I){super(),this._id=A,this._renderer=I}create(A,I){return new Hr(this._id,A,I||{},this._renderer)}}class Hr{constructor(A,I,B,se){this.id=A,this.element=I,this._renderer=se,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",B)}_listen(A,I){return this._renderer.listen(this.element,`@@${this.id}:${A}`,I)}_command(A,...I){return _r(this._renderer,this.element,this.id,A,I)}onDone(A){this._listen("done",A)}onStart(A){this._listen("start",A)}onDestroy(A){this._listen("destroy",A)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(A){this._command("setPosition",A)}getPosition(){var A,I;return null!==(I=null===(A=this._renderer.engine.players[+this.id])||void 0===A?void 0:A.getPosition())&&void 0!==I?I:0}}function _r(oe,A,I,B,se){return oe.setProperty(A,`@@${I}:${B}`,se)}const _i="@.disabled";let Dn=(()=>{class oe{constructor(I,B,se){this.delegate=I,this.engine=B,this._zone=se,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),B.onRemovalComplete=(me,Pe)=>{Pe&&Pe.parentNode(me)&&Pe.removeChild(me.parentNode,me)}}createRenderer(I,B){const me=this.delegate.createRenderer(I,B);if(!(I&&B&&B.data&&B.data.animation)){let Ht=this._rendererCache.get(me);return Ht||(Ht=new eo("",me,this.engine),this._rendererCache.set(me,Ht)),Ht}const Pe=B.id,Fe=B.id+"-"+this._currentId;this._currentId++,this.engine.register(Fe,I);const ct=Ht=>{Array.isArray(Ht)?Ht.forEach(ct):this.engine.registerTrigger(Pe,Fe,I,Ht.name,Ht)};return B.data.animation.forEach(ct),new ys(this,Fe,me,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(I,B,se){I>=0&&I<this._microtaskId?this._zone.run(()=>B(se)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(me=>{const[Pe,Fe]=me;Pe(Fe)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([B,se]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return oe.\u0275fac=function(I){return new(I||oe)(R.LFG(R.FYo),R.LFG(Xi),R.LFG(R.R0b))},oe.\u0275prov=R.Yz7({token:oe,factory:oe.\u0275fac}),oe})();class eo{constructor(A,I,B){this.namespaceId=A,this.delegate=I,this.engine=B,this.destroyNode=this.delegate.destroyNode?se=>I.destroyNode(se):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(A,I){return this.delegate.createElement(A,I)}createComment(A){return this.delegate.createComment(A)}createText(A){return this.delegate.createText(A)}appendChild(A,I){this.delegate.appendChild(A,I),this.engine.onInsert(this.namespaceId,I,A,!1)}insertBefore(A,I,B,se=!0){this.delegate.insertBefore(A,I,B),this.engine.onInsert(this.namespaceId,I,A,se)}removeChild(A,I,B){this.engine.onRemove(this.namespaceId,I,this.delegate,B)}selectRootElement(A,I){return this.delegate.selectRootElement(A,I)}parentNode(A){return this.delegate.parentNode(A)}nextSibling(A){return this.delegate.nextSibling(A)}setAttribute(A,I,B,se){this.delegate.setAttribute(A,I,B,se)}removeAttribute(A,I,B){this.delegate.removeAttribute(A,I,B)}addClass(A,I){this.delegate.addClass(A,I)}removeClass(A,I){this.delegate.removeClass(A,I)}setStyle(A,I,B,se){this.delegate.setStyle(A,I,B,se)}removeStyle(A,I,B){this.delegate.removeStyle(A,I,B)}setProperty(A,I,B){"@"==I.charAt(0)&&I==_i?this.disableAnimations(A,!!B):this.delegate.setProperty(A,I,B)}setValue(A,I){this.delegate.setValue(A,I)}listen(A,I,B){return this.delegate.listen(A,I,B)}disableAnimations(A,I){this.engine.disableAnimations(A,I)}}class ys extends eo{constructor(A,I,B,se){super(I,B,se),this.factory=A,this.namespaceId=I}setProperty(A,I,B){"@"==I.charAt(0)?"."==I.charAt(1)&&I==_i?this.disableAnimations(A,B=void 0===B||!!B):this.engine.process(this.namespaceId,A,I.substr(1),B):this.delegate.setProperty(A,I,B)}listen(A,I,B){if("@"==I.charAt(0)){const se=function(oe){switch(oe){case"body":return document.body;case"document":return document;case"window":return window;default:return oe}}(A);let me=I.substr(1),Pe="";return"@"!=me.charAt(0)&&([me,Pe]=function(oe){const A=oe.indexOf(".");return[oe.substring(0,A),oe.substr(A+1)]}(me)),this.engine.listen(this.namespaceId,se,me,Pe,Fe=>{this.factory.scheduleListenerCallback(Fe._data||-1,B,Fe)})}return this.delegate.listen(A,I,B)}}let Gu=(()=>{class oe extends Xi{constructor(I,B,se){super(I.body,B,se)}ngOnDestroy(){this.flush()}}return oe.\u0275fac=function(I){return new(I||oe)(R.LFG(Pt.K0),R.LFG(nt),R.LFG(wi))},oe.\u0275prov=R.Yz7({token:oe,factory:oe.\u0275fac}),oe})();const br=new R.OlP("AnimationModuleType"),bs=[{provide:G._j,useClass:En},{provide:wi,useFactory:function(){return new ti}},{provide:Xi,useClass:Gu},{provide:R.FYo,useFactory:function(oe,A,I){return new Dn(oe,A,I)},deps:[c.se,Xi,R.R0b]}],ji=[{provide:nt,useFactory:function(){return"function"==typeof ze()?new L:new N}},{provide:br,useValue:"BrowserAnimations"},...bs],xs=[{provide:nt,useClass:it},{provide:br,useValue:"NoopAnimations"},...bs];let Cs=(()=>{class oe{static withConfig(I){return{ngModule:oe,providers:I.disableAnimations?xs:ji}}}return oe.\u0275fac=function(I){return new(I||oe)},oe.\u0275mod=R.oAB({type:oe}),oe.\u0275inj=R.cJS({providers:ji,imports:[c.b2]}),oe})()},9075:(jt,rt,Q)=>{"use strict";Q.d(rt,{b2:()=>Mi,q6:()=>Xr,se:()=>Xn});var R=Q(8583),c=Q(7716);class G extends R.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class E extends G{static makeCurrent(){(0,R.HT)(new E)}onAndCancel(He,Ae,st){return He.addEventListener(Ae,st,!1),()=>{He.removeEventListener(Ae,st,!1)}}dispatchEvent(He,Ae){He.dispatchEvent(Ae)}remove(He){He.parentNode&&He.parentNode.removeChild(He)}createElement(He,Ae){return(Ae=Ae||this.getDefaultDocument()).createElement(He)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(He){return He.nodeType===Node.ELEMENT_NODE}isShadowRoot(He){return He instanceof DocumentFragment}getGlobalEventTarget(He,Ae){return"window"===Ae?window:"document"===Ae?He:"body"===Ae?He.body:null}getBaseHref(He){const Ae=(Ve=Ve||document.querySelector("base"),Ve?Ve.getAttribute("href"):null);return null==Ae?null:function(Qe){ke=ke||document.createElement("a"),ke.setAttribute("href",Qe);const He=ke.pathname;return"/"===He.charAt(0)?He:`/${He}`}(Ae)}resetBaseElement(){Ve=null}getUserAgent(){return window.navigator.userAgent}getCookie(He){return(0,R.Mx)(document.cookie,He)}}let ke,Ve=null;const Ce=new c.OlP("TRANSITION_ID"),Ee=[{provide:c.ip1,useFactory:function(Qe,He,Ae){return()=>{Ae.get(c.CZH).donePromise.then(()=>{const st=(0,R.q)(),Mt=He.querySelectorAll(`style[ng-transition="${Qe}"]`);for(let cn=0;cn<Mt.length;cn++)st.remove(Mt[cn])})}},deps:[Ce,R.K0,c.zs3],multi:!0}];class pe{static init(){(0,c.VLi)(new pe)}addToWindow(He){c.dqk.getAngularTestability=(st,Mt=!0)=>{const cn=He.findTestabilityInTree(st,Mt);if(null==cn)throw new Error("Could not find testability for element.");return cn},c.dqk.getAllAngularTestabilities=()=>He.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>He.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(st=>{const Mt=c.dqk.getAllAngularTestabilities();let cn=Mt.length,Hn=!1;const mn=function(un){Hn=Hn||un,cn--,0==cn&&st(Hn)};Mt.forEach(function(un){un.whenStable(mn)})})}findTestabilityInTree(He,Ae,st){if(null==Ae)return null;const Mt=He.getTestability(Ae);return null!=Mt?Mt:st?(0,R.q)().isShadowRoot(Ae)?this.findTestabilityInTree(He,Ae.host,!0):this.findTestabilityInTree(He,Ae.parentElement,!0):null}}let ye=(()=>{class Qe{build(){return new XMLHttpRequest}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)},Qe.\u0275prov=c.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();const it=new c.OlP("EventManagerPlugins");let nt=(()=>{class Qe{constructor(Ae,st){this._zone=st,this._eventNameToPlugin=new Map,Ae.forEach(Mt=>Mt.manager=this),this._plugins=Ae.slice().reverse()}addEventListener(Ae,st,Mt){return this._findPluginFor(st).addEventListener(Ae,st,Mt)}addGlobalEventListener(Ae,st,Mt){return this._findPluginFor(st).addGlobalEventListener(Ae,st,Mt)}getZone(){return this._zone}_findPluginFor(Ae){const st=this._eventNameToPlugin.get(Ae);if(st)return st;const Mt=this._plugins;for(let cn=0;cn<Mt.length;cn++){const Hn=Mt[cn];if(Hn.supports(Ae))return this._eventNameToPlugin.set(Ae,Hn),Hn}throw new Error(`No event manager plugin found for event ${Ae}`)}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)(c.LFG(it),c.LFG(c.R0b))},Qe.\u0275prov=c.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();class vt{constructor(He){this._doc=He}addGlobalEventListener(He,Ae,st){const Mt=(0,R.q)().getGlobalEventTarget(this._doc,He);if(!Mt)throw new Error(`Unsupported event target ${Mt} for event ${Ae}`);return this.addEventListener(Mt,Ae,st)}}let at=(()=>{class Qe{constructor(){this._stylesSet=new Set}addStyles(Ae){const st=new Set;Ae.forEach(Mt=>{this._stylesSet.has(Mt)||(this._stylesSet.add(Mt),st.add(Mt))}),this.onStylesAdded(st)}onStylesAdded(Ae){}getAllStyles(){return Array.from(this._stylesSet)}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)},Qe.\u0275prov=c.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})(),tn=(()=>{class Qe extends at{constructor(Ae){super(),this._doc=Ae,this._hostNodes=new Map,this._hostNodes.set(Ae.head,[])}_addStylesToHost(Ae,st,Mt){Ae.forEach(cn=>{const Hn=this._doc.createElement("style");Hn.textContent=cn,Mt.push(st.appendChild(Hn))})}addHost(Ae){const st=[];this._addStylesToHost(this._stylesSet,Ae,st),this._hostNodes.set(Ae,st)}removeHost(Ae){const st=this._hostNodes.get(Ae);st&&st.forEach(sn),this._hostNodes.delete(Ae)}onStylesAdded(Ae){this._hostNodes.forEach((st,Mt)=>{this._addStylesToHost(Ae,Mt,st)})}ngOnDestroy(){this._hostNodes.forEach(Ae=>Ae.forEach(sn))}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)(c.LFG(R.K0))},Qe.\u0275prov=c.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();function sn(Qe){(0,R.q)().remove(Qe)}const Sn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},an=/%COMP%/g;function lr(Qe,He,Ae){for(let st=0;st<He.length;st++){let Mt=He[st];Array.isArray(Mt)?lr(Qe,Mt,Ae):(Mt=Mt.replace(an,Qe),Ae.push(Mt))}return Ae}function Zn(Qe){return He=>{if("__ngUnwrap__"===He)return Qe;!1===Qe(He)&&(He.preventDefault(),He.returnValue=!1)}}let Xn=(()=>{class Qe{constructor(Ae,st,Mt){this.eventManager=Ae,this.sharedStylesHost=st,this.appId=Mt,this.rendererByCompId=new Map,this.defaultRenderer=new An(Ae)}createRenderer(Ae,st){if(!Ae||!st)return this.defaultRenderer;switch(st.encapsulation){case c.ifc.Emulated:{let Mt=this.rendererByCompId.get(st.id);return Mt||(Mt=new Kt(this.eventManager,this.sharedStylesHost,st,this.appId),this.rendererByCompId.set(st.id,Mt)),Mt.applyToHost(Ae),Mt}case 1:case c.ifc.ShadowDom:return new zn(this.eventManager,this.sharedStylesHost,Ae,st);default:if(!this.rendererByCompId.has(st.id)){const Mt=lr(st.id,st.styles,[]);this.sharedStylesHost.addStyles(Mt),this.rendererByCompId.set(st.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)(c.LFG(nt),c.LFG(tn),c.LFG(c.AFp))},Qe.\u0275prov=c.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();class An{constructor(He){this.eventManager=He,this.data=Object.create(null)}destroy(){}createElement(He,Ae){return Ae?document.createElementNS(Sn[Ae]||Ae,He):document.createElement(He)}createComment(He){return document.createComment(He)}createText(He){return document.createTextNode(He)}appendChild(He,Ae){He.appendChild(Ae)}insertBefore(He,Ae,st){He&&He.insertBefore(Ae,st)}removeChild(He,Ae){He&&He.removeChild(Ae)}selectRootElement(He,Ae){let st="string"==typeof He?document.querySelector(He):He;if(!st)throw new Error(`The selector "${He}" did not match any elements`);return Ae||(st.textContent=""),st}parentNode(He){return He.parentNode}nextSibling(He){return He.nextSibling}setAttribute(He,Ae,st,Mt){if(Mt){Ae=Mt+":"+Ae;const cn=Sn[Mt];cn?He.setAttributeNS(cn,Ae,st):He.setAttribute(Ae,st)}else He.setAttribute(Ae,st)}removeAttribute(He,Ae,st){if(st){const Mt=Sn[st];Mt?He.removeAttributeNS(Mt,Ae):He.removeAttribute(`${st}:${Ae}`)}else He.removeAttribute(Ae)}addClass(He,Ae){He.classList.add(Ae)}removeClass(He,Ae){He.classList.remove(Ae)}setStyle(He,Ae,st,Mt){Mt&(c.JOm.DashCase|c.JOm.Important)?He.style.setProperty(Ae,st,Mt&c.JOm.Important?"important":""):He.style[Ae]=st}removeStyle(He,Ae,st){st&c.JOm.DashCase?He.style.removeProperty(Ae):He.style[Ae]=""}setProperty(He,Ae,st){He[Ae]=st}setValue(He,Ae){He.nodeValue=Ae}listen(He,Ae,st){return"string"==typeof He?this.eventManager.addGlobalEventListener(He,Ae,Zn(st)):this.eventManager.addEventListener(He,Ae,Zn(st))}}class Kt extends An{constructor(He,Ae,st,Mt){super(He),this.component=st;const cn=lr(Mt+"-"+st.id,st.styles,[]);Ae.addStyles(cn),this.contentAttr="_ngcontent-%COMP%".replace(an,Mt+"-"+st.id),this.hostAttr="_nghost-%COMP%".replace(an,Mt+"-"+st.id)}applyToHost(He){super.setAttribute(He,this.hostAttr,"")}createElement(He,Ae){const st=super.createElement(He,Ae);return super.setAttribute(st,this.contentAttr,""),st}}class zn extends An{constructor(He,Ae,st,Mt){super(He),this.sharedStylesHost=Ae,this.hostEl=st,this.shadowRoot=st.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const cn=lr(Mt.id,Mt.styles,[]);for(let Hn=0;Hn<cn.length;Hn++){const mn=document.createElement("style");mn.textContent=cn[Hn],this.shadowRoot.appendChild(mn)}}nodeOrShadowRoot(He){return He===this.hostEl?this.shadowRoot:He}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(He,Ae){return super.appendChild(this.nodeOrShadowRoot(He),Ae)}insertBefore(He,Ae,st){return super.insertBefore(this.nodeOrShadowRoot(He),Ae,st)}removeChild(He,Ae){return super.removeChild(this.nodeOrShadowRoot(He),Ae)}parentNode(He){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(He)))}}let Ln=(()=>{class Qe extends vt{constructor(Ae){super(Ae)}supports(Ae){return!0}addEventListener(Ae,st,Mt){return Ae.addEventListener(st,Mt,!1),()=>this.removeEventListener(Ae,st,Mt)}removeEventListener(Ae,st,Mt){return Ae.removeEventListener(st,Mt)}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)(c.LFG(R.K0))},Qe.\u0275prov=c.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();const nn=["alt","control","meta","shift"],Ue={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pn={alt:Qe=>Qe.altKey,control:Qe=>Qe.ctrlKey,meta:Qe=>Qe.metaKey,shift:Qe=>Qe.shiftKey};let Zt=(()=>{class Qe extends vt{constructor(Ae){super(Ae)}supports(Ae){return null!=Qe.parseEventName(Ae)}addEventListener(Ae,st,Mt){const cn=Qe.parseEventName(st),Hn=Qe.eventCallback(cn.fullKey,Mt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,R.q)().onAndCancel(Ae,cn.domEventName,Hn))}static parseEventName(Ae){const st=Ae.toLowerCase().split("."),Mt=st.shift();if(0===st.length||"keydown"!==Mt&&"keyup"!==Mt)return null;const cn=Qe._normalizeKey(st.pop());let Hn="";if(nn.forEach(un=>{const er=st.indexOf(un);er>-1&&(st.splice(er,1),Hn+=un+".")}),Hn+=cn,0!=st.length||0===cn.length)return null;const mn={};return mn.domEventName=Mt,mn.fullKey=Hn,mn}static getEventFullKey(Ae){let st="",Mt=function(Qe){let He=Qe.key;if(null==He){if(He=Qe.keyIdentifier,null==He)return"Unidentified";He.startsWith("U+")&&(He=String.fromCharCode(parseInt(He.substring(2),16)),3===Qe.location&&pt.hasOwnProperty(He)&&(He=pt[He]))}return Ue[He]||He}(Ae);return Mt=Mt.toLowerCase()," "===Mt?Mt="space":"."===Mt&&(Mt="dot"),nn.forEach(cn=>{cn!=Mt&&pn[cn](Ae)&&(st+=cn+".")}),st+=Mt,st}static eventCallback(Ae,st,Mt){return cn=>{Qe.getEventFullKey(cn)===Ae&&Mt.runGuarded(()=>st(cn))}}static _normalizeKey(Ae){switch(Ae){case"esc":return"escape";default:return Ae}}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)(c.LFG(R.K0))},Qe.\u0275prov=c.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();const Xr=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:R.bD},{provide:c.g9A,useValue:function(){E.makeCurrent(),pe.init()},multi:!0},{provide:R.K0,useFactory:function(){return(0,c.RDi)(document),document},deps:[]}]),Dr=[[],{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function(){return new c.qLn},deps:[]},{provide:it,useClass:Ln,multi:!0,deps:[R.K0,c.R0b,c.Lbi]},{provide:it,useClass:Zt,multi:!0,deps:[R.K0]},[],{provide:Xn,useClass:Xn,deps:[nt,tn,c.AFp]},{provide:c.FYo,useExisting:Xn},{provide:at,useExisting:tn},{provide:tn,useClass:tn,deps:[R.K0]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:nt,useClass:nt,deps:[it,c.R0b]},{provide:R.JF,useClass:ye,deps:[]},[]];let Mi=(()=>{class Qe{constructor(Ae){if(Ae)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Ae){return{ngModule:Qe,providers:[{provide:c.AFp,useValue:Ae.appId},{provide:Ce,useExisting:c.AFp},Ee]}}}return Qe.\u0275fac=function(Ae){return new(Ae||Qe)(c.LFG(Qe,12))},Qe.\u0275mod=c.oAB({type:Qe}),Qe.\u0275inj=c.cJS({providers:Dr,imports:[R.ez,c.hGG]}),Qe})();"undefined"!=typeof window&&window},2213:(jt,rt,Q)=>{"use strict";Q.d(rt,{gz:()=>Mr,wm:()=>$a,F0:()=>oi,rH:()=>zi,Od:()=>Ca,Bz:()=>ps,lC:()=>is});var R=Q(8583),c=Q(7716),G=Q(4869),E=Q(9796),Ve=Q(5197),ve=Q(509),ke=Q(6693);const fe={};class re{constructor(x){this.resultSelector=x}call(x,O){return O.subscribe(new Ee(x,this.resultSelector))}}class Ee extends Ve.L{constructor(x,O){super(x),this.resultSelector=O,this.active=0,this.values=[],this.observables=[]}_next(x){this.values.push(fe),this.observables.push(x)}_complete(){const x=this.observables,O=x.length;if(0===O)this.destination.complete();else{this.active=O,this.toRespond=O;for(let z=0;z<O;z++)this.add((0,ve.D)(this,x[z],void 0,z))}}notifyComplete(x){0==(this.active-=1)&&this.destination.complete()}notifyNext(x,O,z){const te=this.values,Te=this.toRespond?te[z]===fe?--this.toRespond:this.toRespond:0;te[z]=O,0===Te&&(this.resultSelector?this._tryResultSelector(te):this.destination.next(te.slice()))}_tryResultSelector(x){let O;try{O=this.resultSelector.apply(this,x)}catch(z){return void this.destination.error(z)}this.destination.next(O)}}var pe=Q(4402),ye=Q(5917),De=Q(6215),xe=Q(7574),We=Q(3410),X=Q(8071),Re=Q(1439),_t=Q(9193),_n=Q(2441),Nt=Q(9765),ut=Q(5345);function Yt(U){return function(O){const z=new wt(U),te=O.lift(z);return z.caught=te}}class wt{constructor(x){this.selector=x}call(x,O){return O.subscribe(new In(x,this.selector,this.caught))}}class In extends ut.Ds{constructor(x,O,z){super(x),this.selector=O,this.caught=z}error(x){if(!this.isStopped){let O;try{O=this.selector(x,this.caught)}catch(le){return void super.error(le)}this._unsubscribeAndRecycle();const z=new ut.IY(this);this.add(z);const te=(0,ut.ft)(O,z);te!==z&&this.add(te)}}}var Et=Q(5435),Ke=Q(7393),ot=Q(7108);function it(U){return function(O){return 0===U?(0,_t.c)():O.lift(new nt(U))}}class nt{constructor(x){if(this.total=x,this.total<0)throw new ot.W}call(x,O){return O.subscribe(new vt(x,this.total))}}class vt extends Ke.L{constructor(x,O){super(x),this.total=O,this.ring=new Array,this.count=0}_next(x){const O=this.ring,z=this.total,te=this.count++;O.length<z?O.push(x):O[te%z]=x}_complete(){const x=this.destination;let O=this.count;if(O>0){const z=this.count>=this.total?this.total:this.count,te=this.ring;for(let le=0;le<z;le++){const Te=O++%z;x.next(te[Te])}}x.complete()}}var at=Q(4635),tn=Q(5242),sn=Q(4487),an=Q(5319);class Rt{constructor(x){this.callback=x}call(x,O){return O.subscribe(new Jt(x,this.callback))}}class Jt extends Ke.L{constructor(x,O){super(x),this.add(new an.w(O))}}var Gt=Q(8002),kn=Q(3190),Tn=Q(5257),lr=Q(9761),Zn=Q(2145),qn=Q(4612),Xn=Q(8049),An=Q(9773),On=Q(3342),Si=Q(1307),vn=Q(3282);class Kt{constructor(x,O){this.id=x,this.url=O}}class zn extends Kt{constructor(x,O,z="imperative",te=null){super(x,O),this.navigationTrigger=z,this.restoredState=te}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ln extends Kt{constructor(x,O,z){super(x,O),this.urlAfterRedirects=z}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qt extends Kt{constructor(x,O,z){super(x,O),this.reason=z}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class gr extends Kt{constructor(x,O,z){super(x,O),this.error=z}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Vr extends Kt{constructor(x,O,z,te){super(x,O),this.urlAfterRedirects=z,this.state=te}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kn extends Kt{constructor(x,O,z,te){super(x,O),this.urlAfterRedirects=z,this.state=te}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class St extends Kt{constructor(x,O,z,te,le){super(x,O),this.urlAfterRedirects=z,this.state=te,this.shouldActivate=le}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ze extends Kt{constructor(x,O,z,te){super(x,O),this.urlAfterRedirects=z,this.state=te}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class je extends Kt{constructor(x,O,z,te){super(x,O),this.urlAfterRedirects=z,this.state=te}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class It{constructor(x){this.route=x}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xt{constructor(x){this.route=x}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nn{constructor(x){this.snapshot=x}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ot{constructor(x){this.snapshot=x}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ue{constructor(x){this.snapshot=x}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pt{constructor(x){this.snapshot=x}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bt{constructor(x,O,z){this.routerEvent=x,this.position=O,this.anchor=z}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const At="primary";class Ut{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const O=this.params[x];return Array.isArray(O)?O[0]:O}return null}getAll(x){if(this.has(x)){const O=this.params[x];return Array.isArray(O)?O:[O]}return[]}get keys(){return Object.keys(this.params)}}function dn(U){return new Ut(U)}const pn="ngNavigationCancelingError";function Zt(U){const x=Error("NavigationCancelingError: "+U);return x[pn]=!0,x}function Ie(U,x,O){const z=O.path.split("/");if(z.length>U.length||"full"===O.pathMatch&&(x.hasChildren()||z.length<U.length))return null;const te={};for(let le=0;le<z.length;le++){const Te=z[le],Ge=U[le];if(Te.startsWith(":"))te[Te.substring(1)]=Ge;else if(Te!==Ge.path)return null}return{consumed:U.slice(0,z.length),posParams:te}}function Je(U,x){const O=U?Object.keys(U):void 0,z=x?Object.keys(x):void 0;if(!O||!z||O.length!=z.length)return!1;let te;for(let le=0;le<O.length;le++)if(te=O[le],!Xe(U[te],x[te]))return!1;return!0}function Xe(U,x){if(Array.isArray(U)&&Array.isArray(x)){if(U.length!==x.length)return!1;const O=[...U].sort(),z=[...x].sort();return O.every((te,le)=>z[le]===te)}return U===x}function qt(U){return Array.prototype.concat.apply([],U)}function yn(U){return U.length>0?U[U.length-1]:null}function Vn(U,x){for(const O in U)U.hasOwnProperty(O)&&x(U[O],O)}function Un(U){return(0,c.CqO)(U)?U:(0,c.QGY)(U)?(0,pe.D)(Promise.resolve(U)):(0,ye.of)(U)}const Br={exact:function Uo(U,x,O){if(!Sr(U.segments,x.segments)||!Fr(U.segments,x.segments,O)||U.numberOfChildren!==x.numberOfChildren)return!1;for(const z in x.children)if(!U.children[z]||!Uo(U.children[z],x.children[z],O))return!1;return!0},subset:fo},Xr={exact:function(U,x){return Je(U,x)},subset:function(U,x){return Object.keys(x).length<=Object.keys(U).length&&Object.keys(x).every(O=>Xe(U[O],x[O]))},ignored:()=>!0};function Dr(U,x,O){return Br[O.paths](U.root,x.root,O.matrixParams)&&Xr[O.queryParams](U.queryParams,x.queryParams)&&!("exact"===O.fragment&&U.fragment!==x.fragment)}function fo(U,x,O){return Wo(U,x,x.segments,O)}function Wo(U,x,O,z){if(U.segments.length>O.length){const te=U.segments.slice(0,O.length);return!(!Sr(te,O)||x.hasChildren()||!Fr(te,O,z))}if(U.segments.length===O.length){if(!Sr(U.segments,O)||!Fr(U.segments,O,z))return!1;for(const te in x.children)if(!U.children[te]||!fo(U.children[te],x.children[te],z))return!1;return!0}{const te=O.slice(0,U.segments.length),le=O.slice(U.segments.length);return!!(Sr(U.segments,te)&&Fr(U.segments,te,z)&&U.children[At])&&Wo(U.children[At],x,le,z)}}function Fr(U,x,O){return x.every((z,te)=>Xr[O](U[te].parameters,z.parameters))}class cr{constructor(x,O,z){this.root=x,this.queryParams=O,this.fragment=z}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=dn(this.queryParams)),this._queryParamMap}toString(){return Kr.serialize(this)}}class bn{constructor(x,O){this.segments=x,this.children=O,this.parent=null,Vn(O,(z,te)=>z.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wi(this)}}class Ur{constructor(x,O){this.path=x,this.parameters=O}get parameterMap(){return this._parameterMap||(this._parameterMap=dn(this.parameters)),this._parameterMap}toString(){return He(this)}}function Sr(U,x){return U.length===x.length&&U.every((O,z)=>O.path===x[z].path)}class ln{}class xn{parse(x){const O=new Li(x);return new cr(O.parseRootSegment(),O.parseQueryParams(),O.parseFragment())}serialize(x){var U;return`${`/${Ar(x.root,!0)}`}${function(U){const x=Object.keys(U).map(O=>{const z=U[O];return Array.isArray(z)?z.map(te=>`${Er(O)}=${Er(te)}`).join("&"):`${Er(O)}=${Er(z)}`}).filter(O=>!!O);return x.length?`?${x.join("&")}`:""}(x.queryParams)}${"string"==typeof x.fragment?`#${U=x.fragment,encodeURI(U)}`:""}`}}const Kr=new xn;function wi(U){return U.segments.map(x=>He(x)).join("/")}function Ar(U,x){if(!U.hasChildren())return wi(U);if(x){const O=U.children[At]?Ar(U.children[At],!1):"",z=[];return Vn(U.children,(te,le)=>{le!==At&&z.push(`${le}:${Ar(te,!1)}`)}),z.length>0?`${O}(${z.join("//")})`:O}{const O=function(U,x){let O=[];return Vn(U.children,(z,te)=>{te===At&&(O=O.concat(x(z,te)))}),Vn(U.children,(z,te)=>{te!==At&&(O=O.concat(x(z,te)))}),O}(U,(z,te)=>te===At?[Ar(U.children[At],!1)]:[`${te}:${Ar(z,!1)}`]);return 1===Object.keys(U.children).length&&null!=U.children[At]?`${wi(U)}/${O[0]}`:`${wi(U)}/(${O.join("//")})`}}function ti(U){return encodeURIComponent(U).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Er(U){return ti(U).replace(/%3B/gi,";")}function lo(U){return ti(U).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pn(U){return decodeURIComponent(U)}function Qe(U){return Pn(U.replace(/\+/g,"%20"))}function He(U){return`${lo(U.path)}${function(U){return Object.keys(U).map(x=>`;${lo(x)}=${lo(U[x])}`).join("")}(U.parameters)}`}const Mt=/^[^\/()?;=#]+/;function cn(U){const x=U.match(Mt);return x?x[0]:""}const Hn=/^[^=?&#]+/,un=/^[^?&#]+/;class Li{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bn([],{}):new bn([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let O={};this.peekStartsWith("/(")&&(this.capture("/"),O=this.parseParens(!0));let z={};return this.peekStartsWith("(")&&(z=this.parseParens(!1)),(x.length>0||Object.keys(O).length>0)&&(z[At]=new bn(x,O)),z}parseSegment(){const x=cn(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(x),new Ur(Pn(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const O=cn(this.remaining);if(!O)return;this.capture(O);let z="";if(this.consumeOptional("=")){const te=cn(this.remaining);te&&(z=te,this.capture(z))}x[Pn(O)]=Pn(z)}parseQueryParam(x){const O=function(U){const x=U.match(Hn);return x?x[0]:""}(this.remaining);if(!O)return;this.capture(O);let z="";if(this.consumeOptional("=")){const Te=function(U){const x=U.match(un);return x?x[0]:""}(this.remaining);Te&&(z=Te,this.capture(z))}const te=Qe(O),le=Qe(z);if(x.hasOwnProperty(te)){let Te=x[te];Array.isArray(Te)||(Te=[Te],x[te]=Te),Te.push(le)}else x[te]=le}parseParens(x){const O={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const z=cn(this.remaining),te=this.remaining[z.length];if("/"!==te&&")"!==te&&";"!==te)throw new Error(`Cannot parse url '${this.url}'`);let le;z.indexOf(":")>-1?(le=z.substr(0,z.indexOf(":")),this.capture(le),this.capture(":")):x&&(le=At);const Te=this.parseChildren();O[le]=1===Object.keys(Te).length?Te[At]:new bn([],Te),this.consumeOptional("//")}return O}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new Error(`Expected "${x}".`)}}class mr{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const O=this.pathFromRoot(x);return O.length>1?O[O.length-2]:null}children(x){const O=Ii(x,this._root);return O?O.children.map(z=>z.value):[]}firstChild(x){const O=Ii(x,this._root);return O&&O.children.length>0?O.children[0].value:null}siblings(x){const O=io(x,this._root);return O.length<2?[]:O[O.length-2].children.map(te=>te.value).filter(te=>te!==x)}pathFromRoot(x){return io(x,this._root).map(O=>O.value)}}function Ii(U,x){if(U===x.value)return x;for(const O of x.children){const z=Ii(U,O);if(z)return z}return null}function io(U,x){if(U===x.value)return[x];for(const O of x.children){const z=io(U,O);if(z.length)return z.unshift(x),z}return[]}class jr{constructor(x,O){this.value=x,this.children=O}toString(){return`TreeNode(${this.value})`}}function Oi(U){const x={};return U&&U.children.forEach(O=>x[O.value.outlet]=O),x}class ar extends mr{constructor(x,O){super(x),this.snapshot=O,ai(this,x)}toString(){return this.snapshot.toString()}}function Bn(U,x){const O=function(U,x){const Te=new Vi([],{},{},"",{},At,x,null,U.root,-1,{});return new Gi("",new jr(Te,[]))}(U,x),z=new De.X([new Ur("",{})]),te=new De.X({}),le=new De.X({}),Te=new De.X({}),Ge=new De.X(""),Tt=new Mr(z,te,Te,Ge,le,At,x,O.root);return Tt.snapshot=O.root,new ar(new jr(Tt,[]),O)}class Mr{constructor(x,O,z,te,le,Te,Ge,Tt){this.url=x,this.params=O,this.queryParams=z,this.fragment=te,this.data=le,this.outlet=Te,this.component=Ge,this._futureSnapshot=Tt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Gt.U)(x=>dn(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Gt.U)(x=>dn(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ui(U,x="emptyOnly"){const O=U.pathFromRoot;let z=0;if("always"!==x)for(z=O.length-1;z>=1;){const te=O[z],le=O[z-1];if(te.routeConfig&&""===te.routeConfig.path)z--;else{if(le.component)break;z--}}return function(U){return U.reduce((x,O)=>({params:Object.assign(Object.assign({},x.params),O.params),data:Object.assign(Object.assign({},x.data),O.data),resolve:Object.assign(Object.assign({},x.resolve),O._resolvedData)}),{params:{},data:{},resolve:{}})}(O.slice(z))}class Vi{constructor(x,O,z,te,le,Te,Ge,Tt,hn,ur,Wn){this.url=x,this.params=O,this.queryParams=z,this.fragment=te,this.data=le,this.outlet=Te,this.component=Ge,this.routeConfig=Tt,this._urlSegment=hn,this._lastPathIndex=ur,this._resolve=Wn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=dn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=dn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(z=>z.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gi extends mr{constructor(x,O){super(O),this.url=x,ai(this,O)}toString(){return Yo(this._root)}}function ai(U,x){x.value._routerState=U,x.children.forEach(O=>ai(U,O))}function Yo(U){const x=U.children.length>0?` { ${U.children.map(Yo).join(", ")} } `:"";return`${U.value}${x}`}function Nr(U){if(U.snapshot){const x=U.snapshot,O=U._futureSnapshot;U.snapshot=O,Je(x.queryParams,O.queryParams)||U.queryParams.next(O.queryParams),x.fragment!==O.fragment&&U.fragment.next(O.fragment),Je(x.params,O.params)||U.params.next(O.params),function(U,x){if(U.length!==x.length)return!1;for(let O=0;O<U.length;++O)if(!Je(U[O],x[O]))return!1;return!0}(x.url,O.url)||U.url.next(O.url),Je(x.data,O.data)||U.data.next(O.data)}else U.snapshot=U._futureSnapshot,U.data.next(U._futureSnapshot.data)}function rs(U,x){return Je(U.params,x.params)&&function(U,x){return Sr(U,x)&&U.every((O,z)=>Je(O.parameters,x[z].parameters))}(U.url,x.url)&&!(!U.parent!=!x.parent)&&(!U.parent||rs(U.parent,x.parent))}function Oo(U,x,O){if(O&&U.shouldReuseRoute(x.value,O.value.snapshot)){const z=O.value;z._futureSnapshot=x.value;const te=function(U,x,O){return x.children.map(z=>{for(const te of O.children)if(U.shouldReuseRoute(z.value,te.value.snapshot))return Oo(U,z,te);return Oo(U,z)})}(U,x,O);return new jr(z,te)}{if(U.shouldAttach(x.value)){const le=U.retrieve(x.value);if(null!==le){const Te=le.route;return Do(x,Te),Te}}const z=function(U){return new Mr(new De.X(U.url),new De.X(U.params),new De.X(U.queryParams),new De.X(U.fragment),new De.X(U.data),U.outlet,U.component,U)}(x.value),te=x.children.map(le=>Oo(U,le));return new jr(z,te)}}function Do(U,x){if(U.value.routeConfig!==x.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(U.children.length!==x.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");x.value._futureSnapshot=U.value;for(let O=0;O<U.children.length;++O)Do(U.children[O],x.children[O])}function xo(U){return"object"==typeof U&&null!=U&&!U.outlets&&!U.segmentPath}function mi(U){return"object"==typeof U&&null!=U&&U.outlets}function Ai(U,x,O,z,te){let le={};return z&&Vn(z,(Te,Ge)=>{le[Ge]=Array.isArray(Te)?Te.map(Tt=>`${Tt}`):`${Te}`}),new cr(O.root===U?x:Qn(O.root,U,x),le,te)}function Qn(U,x,O){const z={};return Vn(U.children,(te,le)=>{z[le]=te===x?O:Qn(te,x,O)}),new bn(U.segments,z)}class po{constructor(x,O,z){if(this.isAbsolute=x,this.numberOfDoubleDots=O,this.commands=z,x&&z.length>0&&xo(z[0]))throw new Error("Root segment cannot have matrix parameters");const te=z.find(mi);if(te&&te!==yn(z))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class go{constructor(x,O,z){this.segmentGroup=x,this.processChildren=O,this.index=z}}function ie(U,x,O){if(U||(U=new bn([],{})),0===U.segments.length&&U.hasChildren())return qe(U,x,O);const z=function(U,x,O){let z=0,te=x;const le={match:!1,pathIndex:0,commandIndex:0};for(;te<U.segments.length;){if(z>=O.length)return le;const Te=U.segments[te],Ge=O[z];if(mi(Ge))break;const Tt=`${Ge}`,hn=z<O.length-1?O[z+1]:null;if(te>0&&void 0===Tt)break;if(Tt&&hn&&"object"==typeof hn&&void 0===hn.outlets){if(!wn(Tt,hn,Te))return le;z+=2}else{if(!wn(Tt,{},Te))return le;z++}te++}return{match:!0,pathIndex:te,commandIndex:z}}(U,x,O),te=O.slice(z.commandIndex);if(z.match&&z.pathIndex<U.segments.length){const le=new bn(U.segments.slice(0,z.pathIndex),{});return le.children[At]=new bn(U.segments.slice(z.pathIndex),U.children),qe(le,0,te)}return z.match&&0===te.length?new bn(U.segments,{}):z.match&&!U.hasChildren()?he(U,x,O):z.match?qe(U,0,te):he(U,x,O)}function qe(U,x,O){if(0===O.length)return new bn(U.segments,{});{const z=function(U){return mi(U[0])?U[0].outlets:{[At]:U}}(O),te={};return Vn(z,(le,Te)=>{"string"==typeof le&&(le=[le]),null!==le&&(te[Te]=ie(U.children[Te],x,le))}),Vn(U.children,(le,Te)=>{void 0===z[Te]&&(te[Te]=le)}),new bn(U.segments,te)}}function he(U,x,O){const z=U.segments.slice(0,x);let te=0;for(;te<O.length;){const le=O[te];if(mi(le)){const Tt=lt(le.outlets);return new bn(z,Tt)}if(0===te&&xo(O[0])){z.push(new Ur(U.segments[x].path,Vt(O[0]))),te++;continue}const Te=mi(le)?le.outlets[At]:`${le}`,Ge=te<O.length-1?O[te+1]:null;Te&&Ge&&xo(Ge)?(z.push(new Ur(Te,Vt(Ge))),te+=2):(z.push(new Ur(Te,{})),te++)}return new bn(z,{})}function lt(U){const x={};return Vn(U,(O,z)=>{"string"==typeof O&&(O=[O]),null!==O&&(x[z]=he(new bn([],{}),0,O))}),x}function Vt(U){const x={};return Vn(U,(O,z)=>x[z]=`${O}`),x}function wn(U,x,O){return U==O.path&&Je(x,O.parameters)}class $n{constructor(x,O,z,te){this.routeReuseStrategy=x,this.futureState=O,this.currState=z,this.forwardEvent=te}activate(x){const O=this.futureState._root,z=this.currState?this.currState._root:null;this.deactivateChildRoutes(O,z,x),Nr(this.futureState.root),this.activateChildRoutes(O,z,x)}deactivateChildRoutes(x,O,z){const te=Oi(O);x.children.forEach(le=>{const Te=le.value.outlet;this.deactivateRoutes(le,te[Te],z),delete te[Te]}),Vn(te,(le,Te)=>{this.deactivateRouteAndItsChildren(le,z)})}deactivateRoutes(x,O,z){const te=x.value,le=O?O.value:null;if(te===le)if(te.component){const Te=z.getContext(te.outlet);Te&&this.deactivateChildRoutes(x,O,Te.children)}else this.deactivateChildRoutes(x,O,z);else le&&this.deactivateRouteAndItsChildren(O,z)}deactivateRouteAndItsChildren(x,O){this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,O):this.deactivateRouteAndOutlet(x,O)}detachAndStoreRouteSubtree(x,O){const z=O.getContext(x.value.outlet);if(z&&z.outlet){const te=z.outlet.detach(),le=z.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:te,route:x,contexts:le})}}deactivateRouteAndOutlet(x,O){const z=O.getContext(x.value.outlet),te=z&&x.value.component?z.children:O,le=Oi(x);for(const Te of Object.keys(le))this.deactivateRouteAndItsChildren(le[Te],te);z&&z.outlet&&(z.outlet.deactivate(),z.children.onOutletDeactivated(),z.attachRef=null,z.resolver=null,z.route=null)}activateChildRoutes(x,O,z){const te=Oi(O);x.children.forEach(le=>{this.activateRoutes(le,te[le.value.outlet],z),this.forwardEvent(new pt(le.value.snapshot))}),x.children.length&&this.forwardEvent(new Ot(x.value.snapshot))}activateRoutes(x,O,z){const te=x.value,le=O?O.value:null;if(Nr(te),te===le)if(te.component){const Te=z.getOrCreateContext(te.outlet);this.activateChildRoutes(x,O,Te.children)}else this.activateChildRoutes(x,O,z);else if(te.component){const Te=z.getOrCreateContext(te.outlet);if(this.routeReuseStrategy.shouldAttach(te.snapshot)){const Ge=this.routeReuseStrategy.retrieve(te.snapshot);this.routeReuseStrategy.store(te.snapshot,null),Te.children.onOutletReAttached(Ge.contexts),Te.attachRef=Ge.componentRef,Te.route=Ge.route.value,Te.outlet&&Te.outlet.attach(Ge.componentRef,Ge.route.value),hr(Ge.route)}else{const Ge=function(U){for(let x=U.parent;x;x=x.parent){const O=x.routeConfig;if(O&&O._loadedConfig)return O._loadedConfig;if(O&&O.component)return null}return null}(te.snapshot),Tt=Ge?Ge.module.componentFactoryResolver:null;Te.attachRef=null,Te.route=te,Te.resolver=Tt,Te.outlet&&Te.outlet.activateWith(te,Tt),this.activateChildRoutes(x,null,Te.children)}}else this.activateChildRoutes(x,null,z)}}function hr(U){Nr(U.value),U.children.forEach(hr)}class Bo{constructor(x,O){this.routes=x,this.module=O}}function Pi(U){return"function"==typeof U}function $r(U){return U instanceof cr}const Z=Symbol("INITIAL_VALUE");function ce(){return(0,kn.w)(U=>function(...U){let x,O;return(0,G.K)(U[U.length-1])&&(O=U.pop()),"function"==typeof U[U.length-1]&&(x=U.pop()),1===U.length&&(0,E.k)(U[0])&&(U=U[0]),(0,ke.n)(U,O).lift(new re(x))}(U.map(x=>x.pipe((0,Tn.q)(1),(0,lr.O)(Z)))).pipe((0,Zn.R)((x,O)=>{let z=!1;return O.reduce((te,le,Te)=>te!==Z?te:(le===Z&&(z=!0),z||!1!==le&&Te!==O.length-1&&!$r(le)?te:le),x)},Z),(0,Et.h)(x=>x!==Z),(0,Gt.U)(x=>$r(x)?x:!0===x),(0,Tn.q)(1)))}let P=(()=>{class U{}return U.\u0275fac=function(O){return new(O||U)},U.\u0275cmp=c.Xpm({type:U,selectors:[["ng-component"]],decls:1,vars:0,template:function(O,z){1&O&&c._UZ(0,"router-outlet")},directives:function(){return[is]},encapsulation:2}),U})();function $(U,x=""){for(let O=0;O<U.length;O++){const z=U[O];N(z,ee(x,z))}}function N(U,x){U.children&&$(U.children,x)}function ee(U,x){return x?U||x.path?U&&!x.path?`${U}/`:!U&&x.path?x.path:`${U}/${x.path}`:"":U}function _e(U){const x=U.children&&U.children.map(_e),O=x?Object.assign(Object.assign({},U),{children:x}):Object.assign({},U);return!O.component&&(x||O.loadChildren)&&O.outlet&&O.outlet!==At&&(O.component=P),O}function Le(U){return U.outlet||At}function tt(U,x){const O=U.filter(z=>Le(z)===x);return O.push(...U.filter(z=>Le(z)!==x)),O}const H={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function j(U,x,O){var z;if(""===x.path)return"full"===x.pathMatch&&(U.hasChildren()||O.length>0)?Object.assign({},H):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const le=(x.matcher||Ie)(O,U,x);if(!le)return Object.assign({},H);const Te={};Vn(le.posParams,(Tt,hn)=>{Te[hn]=Tt.path});const Ge=le.consumed.length>0?Object.assign(Object.assign({},Te),le.consumed[le.consumed.length-1].parameters):Te;return{matched:!0,consumedSegments:le.consumed,lastChild:le.consumed.length,parameters:Ge,positionalParamSegments:null!==(z=le.posParams)&&void 0!==z?z:{}}}function L(U,x,O,z,te="corrected"){if(O.length>0&&function(U,x,O){return O.some(z=>pr(U,x,z)&&Le(z)!==At)}(U,O,z)){const Te=new bn(x,function(U,x,O,z){const te={};te[At]=z,z._sourceSegment=U,z._segmentIndexShift=x.length;for(const le of O)if(""===le.path&&Le(le)!==At){const Te=new bn([],{});Te._sourceSegment=U,Te._segmentIndexShift=x.length,te[Le(le)]=Te}return te}(U,x,z,new bn(O,U.children)));return Te._sourceSegment=U,Te._segmentIndexShift=x.length,{segmentGroup:Te,slicedSegments:[]}}if(0===O.length&&function(U,x,O){return O.some(z=>pr(U,x,z))}(U,O,z)){const Te=new bn(U.segments,function(U,x,O,z,te,le){const Te={};for(const Ge of z)if(pr(U,O,Ge)&&!te[Le(Ge)]){const Tt=new bn([],{});Tt._sourceSegment=U,Tt._segmentIndexShift="legacy"===le?U.segments.length:x.length,Te[Le(Ge)]=Tt}return Object.assign(Object.assign({},te),Te)}(U,x,O,z,U.children,te));return Te._sourceSegment=U,Te._segmentIndexShift=x.length,{segmentGroup:Te,slicedSegments:O}}const le=new bn(U.segments,U.children);return le._sourceSegment=U,le._segmentIndexShift=x.length,{segmentGroup:le,slicedSegments:O}}function pr(U,x,O){return(!(U.hasChildren()||x.length>0)||"full"!==O.pathMatch)&&""===O.path}function Hr(U,x,O,z){return!!(Le(U)===z||z!==At&&pr(x,O,U))&&("**"===U.path||j(x,U,O).matched)}function _r(U,x,O){return 0===x.length&&!U.children[O]}class Gr{constructor(x){this.segmentGroup=x||null}}class _i{constructor(x){this.urlTree=x}}function Dn(U){return new xe.y(x=>x.error(new Gr(U)))}function eo(U){return new xe.y(x=>x.error(new _i(U)))}function ys(U){return new xe.y(x=>x.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${U}'`)))}class Gu{constructor(x,O,z,te,le){this.configLoader=O,this.urlSerializer=z,this.urlTree=te,this.config=le,this.allowRedirects=!0,this.ngModule=x.get(c.h0i)}apply(){const x=L(this.urlTree.root,[],[],this.config).segmentGroup,O=new bn(x.segments,x.children);return this.expandSegmentGroup(this.ngModule,this.config,O,At).pipe((0,Gt.U)(le=>this.createUrlTree(za(le),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Yt(le=>{if(le instanceof _i)return this.allowRedirects=!1,this.match(le.urlTree);throw le instanceof Gr?this.noMatchError(le):le}))}match(x){return this.expandSegmentGroup(this.ngModule,this.config,x.root,At).pipe((0,Gt.U)(te=>this.createUrlTree(za(te),x.queryParams,x.fragment))).pipe(Yt(te=>{throw te instanceof Gr?this.noMatchError(te):te}))}noMatchError(x){return new Error(`Cannot match any routes. URL Segment: '${x.segmentGroup}'`)}createUrlTree(x,O,z){const te=x.segments.length>0?new bn([],{[At]:x}):x;return new cr(te,O,z)}expandSegmentGroup(x,O,z,te){return 0===z.segments.length&&z.hasChildren()?this.expandChildren(x,O,z).pipe((0,Gt.U)(le=>new bn([],le))):this.expandSegment(x,z,O,z.segments,te,!0)}expandChildren(x,O,z){const te=[];for(const le of Object.keys(z.children))"primary"===le?te.unshift(le):te.push(le);return(0,pe.D)(te).pipe((0,qn.b)(le=>{const Te=z.children[le],Ge=tt(O,le);return this.expandSegmentGroup(x,Ge,Te,le).pipe((0,Gt.U)(Tt=>({segment:Tt,outlet:le})))}),(0,Zn.R)((le,Te)=>(le[Te.outlet]=Te.segment,le),{}),function(U,x){const O=arguments.length>=2;return z=>z.pipe(U?(0,Et.h)((te,le)=>U(te,le,z)):sn.y,it(1),O?(0,tn.d)(x):(0,at.T)(()=>new We.K))}())}expandSegment(x,O,z,te,le,Te){return(0,pe.D)(z).pipe((0,qn.b)(Ge=>this.expandSegmentAgainstRoute(x,O,z,Ge,te,le,Te).pipe(Yt(hn=>{if(hn instanceof Gr)return(0,ye.of)(null);throw hn}))),(0,Xn.P)(Ge=>!!Ge),Yt((Ge,Tt)=>{if(Ge instanceof We.K||"EmptyError"===Ge.name){if(_r(O,te,le))return(0,ye.of)(new bn([],{}));throw new Gr(O)}throw Ge}))}expandSegmentAgainstRoute(x,O,z,te,le,Te,Ge){return Hr(te,O,le,Te)?void 0===te.redirectTo?this.matchSegmentAgainstRoute(x,O,te,le,Te):Ge&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,O,z,te,le,Te):Dn(O):Dn(O)}expandSegmentAgainstRouteUsingRedirect(x,O,z,te,le,Te){return"**"===te.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,z,te,Te):this.expandRegularSegmentAgainstRouteUsingRedirect(x,O,z,te,le,Te)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,O,z,te){const le=this.applyRedirectCommands([],z.redirectTo,{});return z.redirectTo.startsWith("/")?eo(le):this.lineralizeSegments(z,le).pipe((0,An.zg)(Te=>{const Ge=new bn(Te,{});return this.expandSegment(x,Ge,O,Te,te,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,O,z,te,le,Te){const{matched:Ge,consumedSegments:Tt,lastChild:hn,positionalParamSegments:ur}=j(O,te,le);if(!Ge)return Dn(O);const Wn=this.applyRedirectCommands(Tt,te.redirectTo,ur);return te.redirectTo.startsWith("/")?eo(Wn):this.lineralizeSegments(te,Wn).pipe((0,An.zg)(xr=>this.expandSegment(x,O,z,xr.concat(le.slice(hn)),Te,!1)))}matchSegmentAgainstRoute(x,O,z,te,le){if("**"===z.path)return z.loadChildren?(z._loadedConfig?(0,ye.of)(z._loadedConfig):this.configLoader.load(x.injector,z)).pipe((0,Gt.U)(xr=>(z._loadedConfig=xr,new bn(te,{})))):(0,ye.of)(new bn(te,{}));const{matched:Te,consumedSegments:Ge,lastChild:Tt}=j(O,z,te);if(!Te)return Dn(O);const hn=te.slice(Tt);return this.getChildConfig(x,z,te).pipe((0,An.zg)(Wn=>{const xr=Wn.module,jn=Wn.routes,{segmentGroup:vo,slicedSegments:os}=L(O,Ge,hn,jn),oo=new bn(vo.segments,vo.children);if(0===os.length&&oo.hasChildren())return this.expandChildren(xr,jn,oo).pipe((0,Gt.U)(oa=>new bn(Ge,oa)));if(0===jn.length&&0===os.length)return(0,ye.of)(new bn(Ge,{}));const Ws=Le(z)===le;return this.expandSegment(xr,oo,jn,os,Ws?At:le,!0).pipe((0,Gt.U)(as=>new bn(Ge.concat(as.segments),as.children)))}))}getChildConfig(x,O,z){return O.children?(0,ye.of)(new Bo(O.children,x)):O.loadChildren?void 0!==O._loadedConfig?(0,ye.of)(O._loadedConfig):this.runCanLoadGuards(x.injector,O,z).pipe((0,An.zg)(te=>{return te?this.configLoader.load(x.injector,O).pipe((0,Gt.U)(le=>(O._loadedConfig=le,le))):(U=O,new xe.y(x=>x.error(Zt(`Cannot load children because the guard of the route "path: '${U.path}'" returned false`))));var U})):(0,ye.of)(new Bo([],x))}runCanLoadGuards(x,O,z){const te=O.canLoad;if(!te||0===te.length)return(0,ye.of)(!0);const le=te.map(Te=>{const Ge=x.get(Te);let Tt;if((U=Ge)&&Pi(U.canLoad))Tt=Ge.canLoad(O,z);else{if(!Pi(Ge))throw new Error("Invalid CanLoad guard");Tt=Ge(O,z)}var U;return Un(Tt)});return(0,ye.of)(le).pipe(ce(),(0,On.b)(Te=>{if(!$r(Te))return;const Ge=Zt(`Redirecting to "${this.urlSerializer.serialize(Te)}"`);throw Ge.url=Te,Ge}),(0,Gt.U)(Te=>!0===Te))}lineralizeSegments(x,O){let z=[],te=O.root;for(;;){if(z=z.concat(te.segments),0===te.numberOfChildren)return(0,ye.of)(z);if(te.numberOfChildren>1||!te.children[At])return ys(x.redirectTo);te=te.children[At]}}applyRedirectCommands(x,O,z){return this.applyRedirectCreatreUrlTree(O,this.urlSerializer.parse(O),x,z)}applyRedirectCreatreUrlTree(x,O,z,te){const le=this.createSegmentGroup(x,O.root,z,te);return new cr(le,this.createQueryParams(O.queryParams,this.urlTree.queryParams),O.fragment)}createQueryParams(x,O){const z={};return Vn(x,(te,le)=>{if("string"==typeof te&&te.startsWith(":")){const Ge=te.substring(1);z[le]=O[Ge]}else z[le]=te}),z}createSegmentGroup(x,O,z,te){const le=this.createSegments(x,O.segments,z,te);let Te={};return Vn(O.children,(Ge,Tt)=>{Te[Tt]=this.createSegmentGroup(x,Ge,z,te)}),new bn(le,Te)}createSegments(x,O,z,te){return O.map(le=>le.path.startsWith(":")?this.findPosParam(x,le,te):this.findOrReturn(le,z))}findPosParam(x,O,z){const te=z[O.path.substring(1)];if(!te)throw new Error(`Cannot redirect to '${x}'. Cannot find '${O.path}'.`);return te}findOrReturn(x,O){let z=0;for(const te of O){if(te.path===x.path)return O.splice(z),te;z++}return x}}function za(U){const x={};for(const z of Object.keys(U.children)){const le=za(U.children[z]);(le.segments.length>0||le.hasChildren())&&(x[z]=le)}return function(U){if(1===U.numberOfChildren&&U.children[At]){const x=U.children[At];return new bn(U.segments.concat(x.segments),x.children)}return U}(new bn(U.segments,x))}class br{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class bs{constructor(x,O){this.component=x,this.route=O}}function ji(U,x,O){const z=U._root;return oe(z,x?x._root:null,O,[z.value])}function Cs(U,x,O){const z=function(U){if(!U)return null;for(let x=U.parent;x;x=x.parent){const O=x.routeConfig;if(O&&O._loadedConfig)return O._loadedConfig}return null}(x);return(z?z.module.injector:O).get(U)}function oe(U,x,O,z,te={canDeactivateChecks:[],canActivateChecks:[]}){const le=Oi(x);return U.children.forEach(Te=>{(function(U,x,O,z,te={canDeactivateChecks:[],canActivateChecks:[]}){const le=U.value,Te=x?x.value:null,Ge=O?O.getContext(U.value.outlet):null;if(Te&&le.routeConfig===Te.routeConfig){const Tt=function(U,x,O){if("function"==typeof O)return O(U,x);switch(O){case"pathParamsChange":return!Sr(U.url,x.url);case"pathParamsOrQueryParamsChange":return!Sr(U.url,x.url)||!Je(U.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rs(U,x)||!Je(U.queryParams,x.queryParams);case"paramsChange":default:return!rs(U,x)}}(Te,le,le.routeConfig.runGuardsAndResolvers);Tt?te.canActivateChecks.push(new br(z)):(le.data=Te.data,le._resolvedData=Te._resolvedData),oe(U,x,le.component?Ge?Ge.children:null:O,z,te),Tt&&Ge&&Ge.outlet&&Ge.outlet.isActivated&&te.canDeactivateChecks.push(new bs(Ge.outlet.component,Te))}else Te&&B(x,Ge,te),te.canActivateChecks.push(new br(z)),oe(U,null,le.component?Ge?Ge.children:null:O,z,te)})(Te,le[Te.value.outlet],O,z.concat([Te.value]),te),delete le[Te.value.outlet]}),Vn(le,(Te,Ge)=>B(Te,O.getContext(Ge),te)),te}function B(U,x,O){const z=Oi(U),te=U.value;Vn(z,(le,Te)=>{B(le,te.component?x?x.children.getContext(Te):null:x,O)}),O.canDeactivateChecks.push(new bs(te.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,te))}class dr{}function Rr(U){return new xe.y(x=>x.error(U))}class Fn{constructor(x,O,z,te,le,Te){this.rootComponentType=x,this.config=O,this.urlTree=z,this.url=te,this.paramsInheritanceStrategy=le,this.relativeLinkResolution=Te}recognize(){const x=L(this.urlTree.root,[],[],this.config.filter(Te=>void 0===Te.redirectTo),this.relativeLinkResolution).segmentGroup,O=this.processSegmentGroup(this.config,x,At);if(null===O)return null;const z=new Vi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},At,this.rootComponentType,null,this.urlTree.root,-1,{}),te=new jr(z,O),le=new Gi(this.url,te);return this.inheritParamsAndData(le._root),le}inheritParamsAndData(x){const O=x.value,z=Ui(O,this.paramsInheritanceStrategy);O.params=Object.freeze(z.params),O.data=Object.freeze(z.data),x.children.forEach(te=>this.inheritParamsAndData(te))}processSegmentGroup(x,O,z){return 0===O.segments.length&&O.hasChildren()?this.processChildren(x,O):this.processSegment(x,O,O.segments,z)}processChildren(x,O){const z=[];for(const le of Object.keys(O.children)){const Te=O.children[le],Ge=tt(x,le),Tt=this.processSegmentGroup(Ge,Te,le);if(null===Tt)return null;z.push(...Tt)}const te=Ri(z);return te.sort((x,O)=>x.value.outlet===At?-1:O.value.outlet===At?1:x.value.outlet.localeCompare(O.value.outlet)),te}processSegment(x,O,z,te){for(const le of x){const Te=this.processSegmentAgainstRoute(le,O,z,te);if(null!==Te)return Te}return _r(O,z,te)?[]:null}processSegmentAgainstRoute(x,O,z,te){if(x.redirectTo||!Hr(x,O,z,te))return null;let le,Te=[],Ge=[];if("**"===x.path){const jn=z.length>0?yn(z).parameters:{};le=new Vi(z,jn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ci(x),Le(x),x.component,x,So(O),Ro(O)+z.length,_o(x))}else{const jn=j(O,x,z);if(!jn.matched)return null;Te=jn.consumedSegments,Ge=z.slice(jn.lastChild),le=new Vi(Te,jn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ci(x),Le(x),x.component,x,So(O),Ro(O)+Te.length,_o(x))}const Tt=(U=x).children?U.children:U.loadChildren?U._loadedConfig.routes:[],{segmentGroup:hn,slicedSegments:ur}=L(O,Te,Ge,Tt.filter(jn=>void 0===jn.redirectTo),this.relativeLinkResolution);var U;if(0===ur.length&&hn.hasChildren()){const jn=this.processChildren(Tt,hn);return null===jn?null:[new jr(le,jn)]}if(0===Tt.length&&0===ur.length)return[new jr(le,[])];const Wn=Le(x)===te,xr=this.processSegment(Tt,hn,ur,Wn?At:te);return null===xr?null:[new jr(le,xr)]}}function ei(U){const x=U.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function Ri(U){const x=[],O=new Set;for(const z of U){if(!ei(z)){x.push(z);continue}const te=x.find(le=>z.value.routeConfig===le.value.routeConfig);void 0!==te?(te.children.push(...z.children),O.add(te)):x.push(z)}for(const z of O){const te=Ri(z.children);x.push(new jr(z.value,te))}return x.filter(z=>!O.has(z))}function So(U){let x=U;for(;x._sourceSegment;)x=x._sourceSegment;return x}function Ro(U){let x=U,O=x._segmentIndexShift?x._segmentIndexShift:0;for(;x._sourceSegment;)x=x._sourceSegment,O+=x._segmentIndexShift?x._segmentIndexShift:0;return O-1}function ci(U){return U.data||{}}function _o(U){return U.resolve||{}}function no(U){return(0,kn.w)(x=>{const O=U(x);return O?(0,pe.D)(O).pipe((0,Gt.U)(()=>x)):(0,ye.of)(x)})}class Mn extends class{shouldDetach(x){return!1}store(x,O){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,O){return x.routeConfig===O.routeConfig}}{}const tr=new c.OlP("ROUTES");class Or{constructor(x,O,z,te){this.loader=x,this.compiler=O,this.onLoadStartListener=z,this.onLoadEndListener=te}load(x,O){if(O._loader$)return O._loader$;this.onLoadStartListener&&this.onLoadStartListener(O);const te=this.loadModuleFactory(O.loadChildren).pipe((0,Gt.U)(le=>{this.onLoadEndListener&&this.onLoadEndListener(O);const Te=le.create(x);return new Bo(qt(Te.injector.get(tr,void 0,c.XFs.Self|c.XFs.Optional)).map(_e),Te)}),Yt(le=>{throw O._loader$=void 0,le}));return O._loader$=new _n.c(te,()=>new Nt.xQ).pipe((0,Si.x)()),O._loader$}loadModuleFactory(x){return"string"==typeof x?(0,pe.D)(this.loader.load(x)):Un(x()).pipe((0,An.zg)(O=>O instanceof c.YKP?(0,ye.of)(O):(0,pe.D)(this.compiler.compileModuleAsync(O))))}}class Zr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wr,this.attachRef=null}}class Wr{constructor(){this.contexts=new Map}onChildOutletCreated(x,O){const z=this.getOrCreateContext(x);z.outlet=O,this.contexts.set(x,z)}onChildOutletDestroyed(x){const O=this.getContext(x);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const x=this.contexts;return this.contexts=new Map,x}onOutletReAttached(x){this.contexts=x}getOrCreateContext(x){let O=this.getContext(x);return O||(O=new Zr,this.contexts.set(x,O)),O}getContext(x){return this.contexts.get(x)||null}}class qi{shouldProcessUrl(x){return!0}extract(x){return x}merge(x,O){return x}}function ii(U){throw U}function Rs(U,x,O){return x.parse("/")}function Ei(U,x){return(0,ye.of)(null)}const $s={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ro={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let oi=(()=>{class U{constructor(O,z,te,le,Te,Ge,Tt,hn){this.rootComponentType=O,this.urlSerializer=z,this.rootContexts=te,this.location=le,this.config=hn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Nt.xQ,this.errorHandler=ii,this.malformedUriErrorHandler=Rs,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ei,afterPreactivation:Ei},this.urlHandlingStrategy=new qi,this.routeReuseStrategy=new Mn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Te.get(c.h0i),this.console=Te.get(c.c2e);const xr=Te.get(c.R0b);this.isNgZoneEnabled=xr instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(hn),this.currentUrlTree=new cr(new bn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Or(Ge,Tt,jn=>this.triggerEvent(new It(jn)),jn=>this.triggerEvent(new xt(jn))),this.routerState=Bn(this.currentUrlTree,this.rootComponentType),this.transitions=new De.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var O;return null===(O=this.location.getState())||void 0===O?void 0:O.\u0275routerPageId}setupNavigations(O){const z=this.events;return O.pipe((0,Et.h)(te=>0!==te.id),(0,Gt.U)(te=>Object.assign(Object.assign({},te),{extractedUrl:this.urlHandlingStrategy.extract(te.rawUrl)})),(0,kn.w)(te=>{let le=!1,Te=!1;return(0,ye.of)(te).pipe((0,On.b)(Ge=>{this.currentNavigation={id:Ge.id,initialUrl:Ge.currentRawUrl,extractedUrl:Ge.extractedUrl,trigger:Ge.source,extras:Ge.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,kn.w)(Ge=>{const Tt=this.browserUrlTree.toString(),hn=!this.navigated||Ge.extractedUrl.toString()!==Tt||Tt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||hn)&&this.urlHandlingStrategy.shouldProcessUrl(Ge.rawUrl))return ba(Ge.source)&&(this.browserUrlTree=Ge.extractedUrl),(0,ye.of)(Ge).pipe((0,kn.w)(Wn=>{const xr=this.transitions.getValue();return z.next(new zn(Wn.id,this.serializeUrl(Wn.extractedUrl),Wn.source,Wn.restoredState)),xr!==this.transitions.getValue()?_t.E:Promise.resolve(Wn)}),function(U,x,O,z){return(0,kn.w)(te=>function(U,x,O,z,te){return new Gu(U,x,O,z,te).apply()}(U,x,O,te.extractedUrl,z).pipe((0,Gt.U)(le=>Object.assign(Object.assign({},te),{urlAfterRedirects:le}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,On.b)(Wn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Wn.urlAfterRedirects})}),function(U,x,O,z,te){return(0,An.zg)(le=>function(U,x,O,z,te="emptyOnly",le="legacy"){try{const Te=new Fn(U,x,O,z,te,le).recognize();return null===Te?Rr(new dr):(0,ye.of)(Te)}catch(Te){return Rr(Te)}}(U,x,le.urlAfterRedirects,O(le.urlAfterRedirects),z,te).pipe((0,Gt.U)(Te=>Object.assign(Object.assign({},le),{targetSnapshot:Te}))))}(this.rootComponentType,this.config,Wn=>this.serializeUrl(Wn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,On.b)(Wn=>{"eager"===this.urlUpdateStrategy&&(Wn.extras.skipLocationChange||this.setBrowserUrl(Wn.urlAfterRedirects,Wn),this.browserUrlTree=Wn.urlAfterRedirects);const xr=new Vr(Wn.id,this.serializeUrl(Wn.extractedUrl),this.serializeUrl(Wn.urlAfterRedirects),Wn.targetSnapshot);z.next(xr)}));if(hn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:xr,extractedUrl:jn,source:vo,restoredState:os,extras:oo}=Ge,Ws=new zn(xr,this.serializeUrl(jn),vo,os);z.next(Ws);const ss=Bn(jn,this.rootComponentType).snapshot;return(0,ye.of)(Object.assign(Object.assign({},Ge),{targetSnapshot:ss,urlAfterRedirects:jn,extras:Object.assign(Object.assign({},oo),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ge.rawUrl,this.browserUrlTree=Ge.urlAfterRedirects,Ge.resolve(null),_t.E}),no(Ge=>{const{targetSnapshot:Tt,id:hn,extractedUrl:ur,rawUrl:Wn,extras:{skipLocationChange:xr,replaceUrl:jn}}=Ge;return this.hooks.beforePreactivation(Tt,{navigationId:hn,appliedUrlTree:ur,rawUrlTree:Wn,skipLocationChange:!!xr,replaceUrl:!!jn})}),(0,On.b)(Ge=>{const Tt=new Kn(Ge.id,this.serializeUrl(Ge.extractedUrl),this.serializeUrl(Ge.urlAfterRedirects),Ge.targetSnapshot);this.triggerEvent(Tt)}),(0,Gt.U)(Ge=>Object.assign(Object.assign({},Ge),{guards:ji(Ge.targetSnapshot,Ge.currentSnapshot,this.rootContexts)})),function(U,x){return(0,An.zg)(O=>{const{targetSnapshot:z,currentSnapshot:te,guards:{canActivateChecks:le,canDeactivateChecks:Te}}=O;return 0===Te.length&&0===le.length?(0,ye.of)(Object.assign(Object.assign({},O),{guardsResult:!0})):function(U,x,O,z){return(0,pe.D)(U).pipe((0,An.zg)(te=>function(U,x,O,z,te){const le=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!le||0===le.length)return(0,ye.of)(!0);const Te=le.map(Ge=>{const Tt=Cs(Ge,x,te);let hn;if(function(U){return U&&Pi(U.canDeactivate)}(Tt))hn=Un(Tt.canDeactivate(U,x,O,z));else{if(!Pi(Tt))throw new Error("Invalid CanDeactivate guard");hn=Un(Tt(U,x,O,z))}return hn.pipe((0,Xn.P)())});return(0,ye.of)(Te).pipe(ce())}(te.component,te.route,O,x,z)),(0,Xn.P)(te=>!0!==te,!0))}(Te,z,te,U).pipe((0,An.zg)(Ge=>Ge&&function(U){return"boolean"==typeof U}(Ge)?function(U,x,O,z){return(0,pe.D)(x).pipe((0,qn.b)(te=>(0,X.z)(function(U,x){return null!==U&&x&&x(new nn(U)),(0,ye.of)(!0)}(te.route.parent,z),function(U,x){return null!==U&&x&&x(new Ue(U)),(0,ye.of)(!0)}(te.route,z),function(U,x,O){const z=x[x.length-1],le=x.slice(0,x.length-1).reverse().map(Te=>function(U){const x=U.routeConfig?U.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:U,guards:x}:null}(Te)).filter(Te=>null!==Te).map(Te=>(0,Re.P)(()=>{const Ge=Te.guards.map(Tt=>{const hn=Cs(Tt,Te.node,O);let ur;if(function(U){return U&&Pi(U.canActivateChild)}(hn))ur=Un(hn.canActivateChild(z,U));else{if(!Pi(hn))throw new Error("Invalid CanActivateChild guard");ur=Un(hn(z,U))}return ur.pipe((0,Xn.P)())});return(0,ye.of)(Ge).pipe(ce())}));return(0,ye.of)(le).pipe(ce())}(U,te.path,O),function(U,x,O){const z=x.routeConfig?x.routeConfig.canActivate:null;if(!z||0===z.length)return(0,ye.of)(!0);const te=z.map(le=>(0,Re.P)(()=>{const Te=Cs(le,x,O);let Ge;if(function(U){return U&&Pi(U.canActivate)}(Te))Ge=Un(Te.canActivate(x,U));else{if(!Pi(Te))throw new Error("Invalid CanActivate guard");Ge=Un(Te(x,U))}return Ge.pipe((0,Xn.P)())}));return(0,ye.of)(te).pipe(ce())}(U,te.route,O))),(0,Xn.P)(te=>!0!==te,!0))}(z,le,U,x):(0,ye.of)(Ge)),(0,Gt.U)(Ge=>Object.assign(Object.assign({},O),{guardsResult:Ge})))})}(this.ngModule.injector,Ge=>this.triggerEvent(Ge)),(0,On.b)(Ge=>{if($r(Ge.guardsResult)){const hn=Zt(`Redirecting to "${this.serializeUrl(Ge.guardsResult)}"`);throw hn.url=Ge.guardsResult,hn}const Tt=new St(Ge.id,this.serializeUrl(Ge.extractedUrl),this.serializeUrl(Ge.urlAfterRedirects),Ge.targetSnapshot,!!Ge.guardsResult);this.triggerEvent(Tt)}),(0,Et.h)(Ge=>!!Ge.guardsResult||(this.restoreHistory(Ge),this.cancelNavigationTransition(Ge,""),!1)),no(Ge=>{if(Ge.guards.canActivateChecks.length)return(0,ye.of)(Ge).pipe((0,On.b)(Tt=>{const hn=new Ze(Tt.id,this.serializeUrl(Tt.extractedUrl),this.serializeUrl(Tt.urlAfterRedirects),Tt.targetSnapshot);this.triggerEvent(hn)}),(0,kn.w)(Tt=>{let hn=!1;return(0,ye.of)(Tt).pipe(function(U,x){return(0,An.zg)(O=>{const{targetSnapshot:z,guards:{canActivateChecks:te}}=O;if(!te.length)return(0,ye.of)(O);let le=0;return(0,pe.D)(te).pipe((0,qn.b)(Te=>function(U,x,O,z){return function(U,x,O,z){const te=Object.keys(U);if(0===te.length)return(0,ye.of)({});const le={};return(0,pe.D)(te).pipe((0,An.zg)(Te=>function(U,x,O,z){const te=Cs(U,x,z);return Un(te.resolve?te.resolve(x,O):te(x,O))}(U[Te],x,O,z).pipe((0,On.b)(Ge=>{le[Te]=Ge}))),it(1),(0,An.zg)(()=>Object.keys(le).length===te.length?(0,ye.of)(le):_t.E))}(U._resolve,U,x,z).pipe((0,Gt.U)(le=>(U._resolvedData=le,U.data=Object.assign(Object.assign({},U.data),Ui(U,O).resolve),null)))}(Te.route,z,U,x)),(0,On.b)(()=>le++),it(1),(0,An.zg)(Te=>le===te.length?(0,ye.of)(O):_t.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,On.b)({next:()=>hn=!0,complete:()=>{hn||(this.restoreHistory(Tt),this.cancelNavigationTransition(Tt,"At least one route resolver didn't emit any value."))}}))}),(0,On.b)(Tt=>{const hn=new je(Tt.id,this.serializeUrl(Tt.extractedUrl),this.serializeUrl(Tt.urlAfterRedirects),Tt.targetSnapshot);this.triggerEvent(hn)}))}),no(Ge=>{const{targetSnapshot:Tt,id:hn,extractedUrl:ur,rawUrl:Wn,extras:{skipLocationChange:xr,replaceUrl:jn}}=Ge;return this.hooks.afterPreactivation(Tt,{navigationId:hn,appliedUrlTree:ur,rawUrlTree:Wn,skipLocationChange:!!xr,replaceUrl:!!jn})}),(0,Gt.U)(Ge=>{const Tt=function(U,x,O){const z=Oo(U,x._root,O?O._root:void 0);return new ar(z,x)}(this.routeReuseStrategy,Ge.targetSnapshot,Ge.currentRouterState);return Object.assign(Object.assign({},Ge),{targetRouterState:Tt})}),(0,On.b)(Ge=>{this.currentUrlTree=Ge.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ge.urlAfterRedirects,Ge.rawUrl),this.routerState=Ge.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ge.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ge),this.browserUrlTree=Ge.urlAfterRedirects)}),((U,x,O)=>(0,Gt.U)(z=>(new $n(x,z.targetRouterState,z.currentRouterState,O).activate(U),z)))(this.rootContexts,this.routeReuseStrategy,Ge=>this.triggerEvent(Ge)),(0,On.b)({next(){le=!0},complete(){le=!0}}),function(U){return x=>x.lift(new Rt(U))}(()=>{if(!le&&!Te){const Ge=`Navigation ID ${te.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(te),this.cancelNavigationTransition(te,Ge)):this.cancelNavigationTransition(te,Ge)}this.currentNavigation=null}),Yt(Ge=>{if(Te=!0,function(U){return U&&U[pn]}(Ge)){const Tt=$r(Ge.url);Tt||(this.navigated=!0,this.restoreHistory(te,!0));const hn=new Qt(te.id,this.serializeUrl(te.extractedUrl),Ge.message);z.next(hn),Tt?setTimeout(()=>{const ur=this.urlHandlingStrategy.merge(Ge.url,this.rawUrlTree),Wn={skipLocationChange:te.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ba(te.source)};this.scheduleNavigation(ur,"imperative",null,Wn,{resolve:te.resolve,reject:te.reject,promise:te.promise})},0):te.resolve(!1)}else{this.restoreHistory(te,!0);const Tt=new gr(te.id,this.serializeUrl(te.extractedUrl),Ge);z.next(Tt);try{te.resolve(this.errorHandler(Ge))}catch(hn){te.reject(hn)}}return _t.E}))}))}resetRootComponentType(O){this.rootComponentType=O,this.routerState.root.component=this.rootComponentType}getTransition(){const O=this.transitions.value;return O.urlAfterRedirects=this.browserUrlTree,O}setTransition(O){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),O))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(O=>{const z=this.extractLocationChangeInfoFromEvent(O);this.shouldScheduleNavigation(this.lastLocationChangeInfo,z)&&setTimeout(()=>{const{source:te,state:le,urlTree:Te}=z,Ge={replaceUrl:!0};if(le){const Tt=Object.assign({},le);delete Tt.navigationId,delete Tt.\u0275routerPageId,0!==Object.keys(Tt).length&&(Ge.state=Tt)}this.scheduleNavigation(Te,te,le,Ge)},0),this.lastLocationChangeInfo=z}))}extractLocationChangeInfoFromEvent(O){var z;return{source:"popstate"===O.type?"popstate":"hashchange",urlTree:this.parseUrl(O.url),state:(null===(z=O.state)||void 0===z?void 0:z.navigationId)?O.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(O,z){if(!O)return!0;const te=z.urlTree.toString()===O.urlTree.toString();return z.transitionId!==O.transitionId||!te||!("hashchange"===z.source&&"popstate"===O.source||"popstate"===z.source&&"hashchange"===O.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(O){this.events.next(O)}resetConfig(O){$(O),this.config=O.map(_e),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(O,z={}){const{relativeTo:te,queryParams:le,fragment:Te,queryParamsHandling:Ge,preserveFragment:Tt}=z,hn=te||this.routerState.root,ur=Tt?this.currentUrlTree.fragment:Te;let Wn=null;switch(Ge){case"merge":Wn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),le);break;case"preserve":Wn=this.currentUrlTree.queryParams;break;default:Wn=le||null}return null!==Wn&&(Wn=this.removeEmptyProps(Wn)),function(U,x,O,z,te){if(0===O.length)return Ai(x.root,x.root,x,z,te);const le=function(U){if("string"==typeof U[0]&&1===U.length&&"/"===U[0])return new po(!0,0,U);let x=0,O=!1;const z=U.reduce((te,le,Te)=>{if("object"==typeof le&&null!=le){if(le.outlets){const Ge={};return Vn(le.outlets,(Tt,hn)=>{Ge[hn]="string"==typeof Tt?Tt.split("/"):Tt}),[...te,{outlets:Ge}]}if(le.segmentPath)return[...te,le.segmentPath]}return"string"!=typeof le?[...te,le]:0===Te?(le.split("/").forEach((Ge,Tt)=>{0==Tt&&"."===Ge||(0==Tt&&""===Ge?O=!0:".."===Ge?x++:""!=Ge&&te.push(Ge))}),te):[...te,le]},[]);return new po(O,x,z)}(O);if(le.toRoot())return Ai(x.root,new bn([],{}),x,z,te);const Te=function(U,x,O){if(U.isAbsolute)return new go(x.root,!0,0);if(-1===O.snapshot._lastPathIndex){const le=O.snapshot._urlSegment;return new go(le,le===x.root,0)}const z=xo(U.commands[0])?0:1;return function(U,x,O){let z=U,te=x,le=O;for(;le>te;){if(le-=te,z=z.parent,!z)throw new Error("Invalid number of '../'");te=z.segments.length}return new go(z,!1,te-le)}(O.snapshot._urlSegment,O.snapshot._lastPathIndex+z,U.numberOfDoubleDots)}(le,x,U),Ge=Te.processChildren?qe(Te.segmentGroup,Te.index,le.commands):ie(Te.segmentGroup,Te.index,le.commands);return Ai(Te.segmentGroup,Ge,x,z,te)}(hn,this.currentUrlTree,O,Wn,null!=ur?ur:null)}navigateByUrl(O,z={skipLocationChange:!1}){const te=$r(O)?O:this.parseUrl(O),le=this.urlHandlingStrategy.merge(te,this.rawUrlTree);return this.scheduleNavigation(le,"imperative",null,z)}navigate(O,z={skipLocationChange:!1}){return function(U){for(let x=0;x<U.length;x++){const O=U[x];if(null==O)throw new Error(`The requested path contains ${O} segment at index ${x}`)}}(O),this.navigateByUrl(this.createUrlTree(O,z),z)}serializeUrl(O){return this.urlSerializer.serialize(O)}parseUrl(O){let z;try{z=this.urlSerializer.parse(O)}catch(te){z=this.malformedUriErrorHandler(te,this.urlSerializer,O)}return z}isActive(O,z){let te;if(te=!0===z?Object.assign({},$s):!1===z?Object.assign({},ro):z,$r(O))return Dr(this.currentUrlTree,O,te);const le=this.parseUrl(O);return Dr(this.currentUrlTree,le,te)}removeEmptyProps(O){return Object.keys(O).reduce((z,te)=>{const le=O[te];return null!=le&&(z[te]=le),z},{})}processNavigations(){this.navigations.subscribe(O=>{this.navigated=!0,this.lastSuccessfulId=O.id,this.currentPageId=O.targetPageId,this.events.next(new Ln(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,O.resolve(!0)},O=>{this.console.warn(`Unhandled Navigation Error: ${O}`)})}scheduleNavigation(O,z,te,le,Te){var Ge,Tt;if(this.disposed)return Promise.resolve(!1);const hn=this.getTransition(),ur=ba(z)&&hn&&!ba(hn.source),jn=(this.lastSuccessfulId===hn.id||this.currentNavigation?hn.rawUrl:hn.urlAfterRedirects).toString()===O.toString();if(ur&&jn)return Promise.resolve(!0);let vo,os,oo;Te?(vo=Te.resolve,os=Te.reject,oo=Te.promise):oo=new Promise((as,oa)=>{vo=as,os=oa});const Ws=++this.navigationId;let ss;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(te=this.location.getState()),ss=te&&te.\u0275routerPageId?te.\u0275routerPageId:le.replaceUrl||le.skipLocationChange?null!==(Ge=this.browserPageId)&&void 0!==Ge?Ge:0:(null!==(Tt=this.browserPageId)&&void 0!==Tt?Tt:0)+1):ss=0,this.setTransition({id:Ws,targetPageId:ss,source:z,restoredState:te,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:O,extras:le,resolve:vo,reject:os,promise:oo,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),oo.catch(as=>Promise.reject(as))}setBrowserUrl(O,z){const te=this.urlSerializer.serialize(O),le=Object.assign(Object.assign({},z.extras.state),this.generateNgRouterState(z.id,z.targetPageId));this.location.isCurrentPathEqualTo(te)||z.extras.replaceUrl?this.location.replaceState(te,"",le):this.location.go(te,"",le)}restoreHistory(O,z=!1){var te,le;if("computed"===this.canceledNavigationResolution){const Te=this.currentPageId-O.targetPageId;"popstate"!==O.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(te=this.currentNavigation)||void 0===te?void 0:te.finalUrl)||0===Te?this.currentUrlTree===(null===(le=this.currentNavigation)||void 0===le?void 0:le.finalUrl)&&0===Te&&(this.resetState(O),this.browserUrlTree=O.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Te)}else"replace"===this.canceledNavigationResolution&&(z&&this.resetState(O),this.resetUrlToCurrentUrlTree())}resetState(O){this.routerState=O.currentRouterState,this.currentUrlTree=O.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,O.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(O,z){const te=new Qt(O.id,this.serializeUrl(O.extractedUrl),z);this.triggerEvent(te),O.resolve(!1)}generateNgRouterState(O,z){return"computed"===this.canceledNavigationResolution?{navigationId:O,\u0275routerPageId:z}:{navigationId:O}}}return U.\u0275fac=function(O){return new(O||U)(c.LFG(c.DyG),c.LFG(ln),c.LFG(Wr),c.LFG(R.Ye),c.LFG(c.zs3),c.LFG(c.v3s),c.LFG(c.Sil),c.LFG(void 0))},U.\u0275prov=c.Yz7({token:U,factory:U.\u0275fac}),U})();function ba(U){return"imperative"!==U}let zi=(()=>{class U{constructor(O,z,te,le,Te){this.router=O,this.route=z,this.commands=[],this.onChanges=new Nt.xQ,null==te&&le.setAttribute(Te.nativeElement,"tabindex","0")}ngOnChanges(O){this.onChanges.next(this)}set routerLink(O){this.commands=null!=O?Array.isArray(O)?O:[O]:[]}onClick(){const O={skipLocationChange:na(this.skipLocationChange),replaceUrl:na(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,O),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:na(this.preserveFragment)})}}return U.\u0275fac=function(O){return new(O||U)(c.Y36(oi),c.Y36(Mr),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},U.\u0275dir=c.lG2({type:U,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(O,z){1&O&&c.NdJ("click",function(){return z.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[c.TTD]}),U})(),_u=(()=>{class U{constructor(O,z,te){this.router=O,this.route=z,this.locationStrategy=te,this.commands=[],this.onChanges=new Nt.xQ,this.subscription=O.events.subscribe(le=>{le instanceof Ln&&this.updateTargetUrlAndHref()})}set routerLink(O){this.commands=null!=O?Array.isArray(O)?O:[O]:[]}ngOnChanges(O){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(O,z,te,le,Te){if(0!==O||z||te||le||Te||"string"==typeof this.target&&"_self"!=this.target)return!0;const Ge={skipLocationChange:na(this.skipLocationChange),replaceUrl:na(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Ge),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:na(this.preserveFragment)})}}return U.\u0275fac=function(O){return new(O||U)(c.Y36(oi),c.Y36(Mr),c.Y36(R.S$))},U.\u0275dir=c.lG2({type:U,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(O,z){1&O&&c.NdJ("click",function(le){return z.onClick(le.button,le.ctrlKey,le.shiftKey,le.altKey,le.metaKey)}),2&O&&(c.Ikx("href",z.href,c.LSH),c.uIk("target",z.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[c.TTD]}),U})();function na(U){return""===U||!!U}let Ca=(()=>{class U{constructor(O,z,te,le,Te,Ge){this.router=O,this.element=z,this.renderer=te,this.cdr=le,this.link=Te,this.linkWithHref=Ge,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=O.events.subscribe(Tt=>{Tt instanceof Ln&&this.update()})}ngAfterContentInit(){(0,ye.of)(this.links.changes,this.linksWithHrefs.changes,(0,ye.of)(null)).pipe((0,vn.J)()).subscribe(O=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var O;null===(O=this.linkInputChangesSubscription)||void 0===O||O.unsubscribe();const z=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(te=>!!te).map(te=>te.onChanges);this.linkInputChangesSubscription=(0,pe.D)(z).pipe((0,vn.J)()).subscribe(te=>{this.isActive!==this.isLinkActive(this.router)(te)&&this.update()})}set routerLinkActive(O){const z=Array.isArray(O)?O:O.split(" ");this.classes=z.filter(te=>!!te)}ngOnChanges(O){this.update()}ngOnDestroy(){var O;this.routerEventsSubscription.unsubscribe(),null===(O=this.linkInputChangesSubscription)||void 0===O||O.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const O=this.hasActiveLinks();this.isActive!==O&&(this.isActive=O,this.cdr.markForCheck(),this.classes.forEach(z=>{O?this.renderer.addClass(this.element.nativeElement,z):this.renderer.removeClass(this.element.nativeElement,z)}))})}isLinkActive(O){const z=function(U){return!!U.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return te=>O.isActive(te.urlTree,z)}hasActiveLinks(){const O=this.isLinkActive(this.router);return this.link&&O(this.link)||this.linkWithHref&&O(this.linkWithHref)||this.links.some(O)||this.linksWithHrefs.some(O)}}return U.\u0275fac=function(O){return new(O||U)(c.Y36(oi),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(zi,8),c.Y36(_u,8))},U.\u0275dir=c.lG2({type:U,selectors:[["","routerLinkActive",""]],contentQueries:function(O,z,te){if(1&O&&(c.Suo(te,zi,5),c.Suo(te,_u,5)),2&O){let le;c.iGM(le=c.CRH())&&(z.links=le),c.iGM(le=c.CRH())&&(z.linksWithHrefs=le)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[c.TTD]}),U})(),is=(()=>{class U{constructor(O,z,te,le,Te){this.parentContexts=O,this.location=z,this.resolver=te,this.changeDetector=Te,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.name=le||At,O.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const O=this.parentContexts.getContext(this.name);O&&O.route&&(O.attachRef?this.attach(O.attachRef,O.route):this.activateWith(O.route,O.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const O=this.activated;return this.activated=null,this._activatedRoute=null,O}attach(O,z){this.activated=O,this._activatedRoute=z,this.location.insert(O.hostView)}deactivate(){if(this.activated){const O=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(O)}}activateWith(O,z){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=O;const Te=(z=z||this.resolver).resolveComponentFactory(O._futureSnapshot.routeConfig.component),Ge=this.parentContexts.getOrCreateContext(this.name).children,Tt=new ra(O,Ge,this.location.injector);this.activated=this.location.createComponent(Te,this.location.length,Tt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return U.\u0275fac=function(O){return new(O||U)(c.Y36(Wr),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},U.\u0275dir=c.lG2({type:U,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),U})();class ra{constructor(x,O,z){this.route=x,this.childContexts=O,this.parent=z}get(x,O){return x===Mr?this.route:x===Wr?this.childContexts:this.parent.get(x,O)}}class Zu{}class $a{preload(x,O){return O().pipe(Yt(()=>(0,ye.of)(null)))}}class ia{preload(x,O){return(0,ye.of)(null)}}let vu=(()=>{class U{constructor(O,z,te,le,Te){this.router=O,this.injector=le,this.preloadingStrategy=Te,this.loader=new Or(z,te,hn=>O.triggerEvent(new It(hn)),hn=>O.triggerEvent(new xt(hn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Et.h)(O=>O instanceof Ln),(0,qn.b)(()=>this.preload())).subscribe(()=>{})}preload(){const O=this.injector.get(c.h0i);return this.processRoutes(O,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(O,z){const te=[];for(const le of z)if(le.loadChildren&&!le.canLoad&&le._loadedConfig){const Te=le._loadedConfig;te.push(this.processRoutes(Te.module,Te.routes))}else le.loadChildren&&!le.canLoad?te.push(this.preloadConfig(O,le)):le.children&&te.push(this.processRoutes(O,le.children));return(0,pe.D)(te).pipe((0,vn.J)(),(0,Gt.U)(le=>{}))}preloadConfig(O,z){return this.preloadingStrategy.preload(z,()=>(z._loadedConfig?(0,ye.of)(z._loadedConfig):this.loader.load(O.injector,z)).pipe((0,An.zg)(le=>(z._loadedConfig=le,this.processRoutes(le.module,le.routes)))))}}return U.\u0275fac=function(O){return new(O||U)(c.LFG(oi),c.LFG(c.v3s),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(Zu))},U.\u0275prov=c.Yz7({token:U,factory:U.\u0275fac}),U})(),wa=(()=>{class U{constructor(O,z,te={}){this.router=O,this.viewportScroller=z,this.options=te,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},te.scrollPositionRestoration=te.scrollPositionRestoration||"disabled",te.anchorScrolling=te.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(O=>{O instanceof zn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=O.navigationTrigger,this.restoredId=O.restoredState?O.restoredState.navigationId:0):O instanceof Ln&&(this.lastId=O.id,this.scheduleScrollEvent(O,this.router.parseUrl(O.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(O=>{O instanceof bt&&(O.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(O.position):O.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(O.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(O,z){this.router.triggerEvent(new bt(O,"popstate"===this.lastSource?this.store[this.restoredId]:null,z))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return U.\u0275fac=function(O){return new(O||U)(c.LFG(oi),c.LFG(R.EM),c.LFG(void 0))},U.\u0275prov=c.Yz7({token:U,factory:U.\u0275fac}),U})();const Ya=new c.OlP("ROUTER_CONFIGURATION"),Ea=new c.OlP("ROUTER_FORROOT_GUARD"),gt=[R.Ye,{provide:ln,useClass:xn},{provide:oi,useFactory:function(U,x,O,z,te,le,Te,Ge={},Tt,hn){const ur=new oi(null,U,x,O,z,te,le,qt(Te));return Tt&&(ur.urlHandlingStrategy=Tt),hn&&(ur.routeReuseStrategy=hn),function(U,x){U.errorHandler&&(x.errorHandler=U.errorHandler),U.malformedUriErrorHandler&&(x.malformedUriErrorHandler=U.malformedUriErrorHandler),U.onSameUrlNavigation&&(x.onSameUrlNavigation=U.onSameUrlNavigation),U.paramsInheritanceStrategy&&(x.paramsInheritanceStrategy=U.paramsInheritanceStrategy),U.relativeLinkResolution&&(x.relativeLinkResolution=U.relativeLinkResolution),U.urlUpdateStrategy&&(x.urlUpdateStrategy=U.urlUpdateStrategy)}(Ge,ur),Ge.enableTracing&&ur.events.subscribe(Wn=>{var xr,jn;null===(xr=console.group)||void 0===xr||xr.call(console,`Router Event: ${Wn.constructor.name}`),console.log(Wn.toString()),console.log(Wn),null===(jn=console.groupEnd)||void 0===jn||jn.call(console)}),ur},deps:[ln,Wr,R.Ye,c.zs3,c.v3s,c.Sil,tr,Ya,[class{},new c.FiY],[class{},new c.FiY]]},Wr,{provide:Mr,useFactory:function(U){return U.routerState.root},deps:[oi]},{provide:c.v3s,useClass:c.EAV},vu,ia,$a,{provide:Ya,useValue:{enableTracing:!1}}];function Lt(){return new c.PXZ("Router",oi)}let ps=(()=>{class U{constructor(O,z){}static forRoot(O,z){return{ngModule:U,providers:[gt,Jo(O),{provide:Ea,useFactory:$i,deps:[[oi,new c.FiY,new c.tp0]]},{provide:Ya,useValue:z||{}},{provide:R.S$,useFactory:rn,deps:[R.lw,[new c.tBr(R.mr),new c.FiY],Ya]},{provide:wa,useFactory:Ta,deps:[oi,R.EM,Ya]},{provide:Zu,useExisting:z&&z.preloadingStrategy?z.preloadingStrategy:ia},{provide:c.PXZ,multi:!0,useFactory:Lt},[on,{provide:c.ip1,multi:!0,useFactory:Yl,deps:[on]},{provide:Tr,useFactory:Kl,deps:[on]},{provide:c.tb,multi:!0,useExisting:Tr}]]}}static forChild(O){return{ngModule:U,providers:[Jo(O)]}}}return U.\u0275fac=function(O){return new(O||U)(c.LFG(Ea,8),c.LFG(oi,8))},U.\u0275mod=c.oAB({type:U}),U.\u0275inj=c.cJS({}),U})();function Ta(U,x,O){return O.scrollOffset&&x.setOffset(O.scrollOffset),new wa(U,x,O)}function rn(U,x,O={}){return O.useHash?new R.Do(U,x):new R.b0(U,x)}function $i(U){return"guarded"}function Jo(U){return[{provide:c.deG,multi:!0,useValue:U},{provide:tr,multi:!0,useValue:U}]}let on=(()=>{class U{constructor(O){this.injector=O,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Nt.xQ}appInitializer(){return this.injector.get(R.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let z=null;const te=new Promise(Ge=>z=Ge),le=this.injector.get(oi),Te=this.injector.get(Ya);return"disabled"===Te.initialNavigation?(le.setUpLocationChangeListener(),z(!0)):"enabled"===Te.initialNavigation||"enabledBlocking"===Te.initialNavigation?(le.hooks.afterPreactivation=()=>this.initNavigation?(0,ye.of)(null):(this.initNavigation=!0,z(!0),this.resultOfPreactivationDone),le.initialNavigation()):z(!0),te})}bootstrapListener(O){const z=this.injector.get(Ya),te=this.injector.get(vu),le=this.injector.get(wa),Te=this.injector.get(oi),Ge=this.injector.get(c.z2F);O===Ge.components[0]&&(("enabledNonBlocking"===z.initialNavigation||void 0===z.initialNavigation)&&Te.initialNavigation(),te.setUpPreloading(),le.init(),Te.resetRootComponentType(Ge.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return U.\u0275fac=function(O){return new(O||U)(c.LFG(c.zs3))},U.\u0275prov=c.Yz7({token:U,factory:U.\u0275fac}),U})();function Yl(U){return U.appInitializer.bind(U)}function Kl(U){return U.bootstrapListener.bind(U)}const Tr=new c.OlP("Router Initializer")},9759:(jt,rt,Q)=>{"use strict";Q.d(rt,{Z:()=>Bt});var Ve,ut,R=Q(4762),c=Q(4685),G=Q(6034),E=Q(300),ve=((Ve={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ve["bad-app-name"]="Illegal App name: '{$appName}",Ve["duplicate-app"]="Firebase App named '{$appName}' already exists",Ve["app-deleted"]="Firebase App named '{$appName}' already deleted",Ve["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ve["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ve),ke=new c.LL("app","Firebase",ve),fe="@firebase/app",Yt="[DEFAULT]",wt=((ut={})[fe]="fire-core",ut["@firebase/analytics"]="fire-analytics",ut["@firebase/app-check"]="fire-app-check",ut["@firebase/auth"]="fire-auth",ut["@firebase/database"]="fire-rtdb",ut["@firebase/functions"]="fire-fn",ut["@firebase/installations"]="fire-iid",ut["@firebase/messaging"]="fire-fcm",ut["@firebase/performance"]="fire-perf",ut["@firebase/remote-config"]="fire-rc",ut["@firebase/storage"]="fire-gcs",ut["@firebase/firestore"]="fire-fst",ut["fire-js"]="fire-js",ut["firebase-wrapper"]="fire-js-all",ut),In=new E.Yd("@firebase/app"),Et=function(){function Rt(Jt,Gt,kn){var Tn=this;this.firebase_=kn,this.isDeleted_=!1,this.name_=Gt.name,this.automaticDataCollectionEnabled_=Gt.automaticDataCollectionEnabled||!1,this.options_=(0,c.p$)(Jt),this.container=new G.H0(Gt.name),this._addComponent(new G.wA("app",function(){return Tn},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(lr){return Tn._addComponent(lr)})}return Object.defineProperty(Rt.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(Jt){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=Jt},enumerable:!1,configurable:!0}),Object.defineProperty(Rt.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Rt.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Rt.prototype.delete=function(){var Jt=this;return new Promise(function(Gt){Jt.checkDestroyed_(),Gt()}).then(function(){return Jt.firebase_.INTERNAL.removeApp(Jt.name_),Promise.all(Jt.container.getProviders().map(function(Gt){return Gt.delete()}))}).then(function(){Jt.isDeleted_=!0})},Rt.prototype._getService=function(Jt,Gt){var kn;void 0===Gt&&(Gt=Yt),this.checkDestroyed_();var Tn=this.container.getProvider(Jt);return!Tn.isInitialized()&&"EXPLICIT"===(null===(kn=Tn.getComponent())||void 0===kn?void 0:kn.instantiationMode)&&Tn.initialize(),Tn.getImmediate({identifier:Gt})},Rt.prototype._removeServiceInstance=function(Jt,Gt){void 0===Gt&&(Gt=Yt),this.container.getProvider(Jt).clearInstance(Gt)},Rt.prototype._addComponent=function(Jt){try{this.container.addComponent(Jt)}catch(Gt){In.debug("Component "+Jt.name+" failed to register with FirebaseApp "+this.name,Gt)}},Rt.prototype._addOrOverwriteComponent=function(Jt){this.container.addOrOverwriteComponent(Jt)},Rt.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Rt.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ke.create("app-deleted",{appName:this.name_})},Rt}();Et.prototype.name&&Et.prototype.options||Et.prototype.delete||console.log("dc");var nt=function it(){var Rt=function(Rt){var Jt={},Gt=new Map,kn={__esModule:!0,initializeApp:function(vn,Kt){void 0===Kt&&(Kt={}),("object"!=typeof Kt||null===Kt)&&(Kt={name:Kt});var Ln=Kt;void 0===Ln.name&&(Ln.name=Yt);var Qt=Ln.name;if("string"!=typeof Qt||!Qt)throw ke.create("bad-app-name",{appName:String(Qt)});if((0,c.r3)(Jt,Qt))throw ke.create("duplicate-app",{appName:Qt});var gr=new Rt(vn,Ln,kn);return Jt[Qt]=gr,gr},app:lr,registerVersion:function(vn,Kt,zn){var Ln,Qt=null!==(Ln=wt[vn])&&void 0!==Ln?Ln:vn;zn&&(Qt+="-"+zn);var gr=Qt.match(/\s|\//),Vr=Kt.match(/\s|\//);if(gr||Vr){var Kn=['Unable to register library "'+Qt+'" with version "'+Kt+'":'];return gr&&Kn.push('library name "'+Qt+'" contains illegal characters (whitespace or "/")'),gr&&Vr&&Kn.push("and"),Vr&&Kn.push('version name "'+Kt+'" contains illegal characters (whitespace or "/")'),void In.warn(Kn.join(" "))}Xn(new G.wA(Qt+"-version",function(){return{library:Qt,version:Kt}},"VERSION"))},setLogLevel:E.Ub,onLog:function(vn,Kt){if(null!==vn&&"function"!=typeof vn)throw ke.create("invalid-log-argument");(0,E.Am)(vn,Kt)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:Xn,removeApp:function(vn){delete Jt[vn]},components:Gt,useAsService:function(vn,Kt){return"serverAuth"===Kt?null:Kt}}};function lr(vn){if(!(0,c.r3)(Jt,vn=vn||Yt))throw ke.create("no-app",{appName:vn});return Jt[vn]}function Xn(vn){var Kt=vn.name;if(Gt.has(Kt))return In.debug("There were multiple attempts to register component "+Kt+"."),"PUBLIC"===vn.type?kn[Kt]:null;if(Gt.set(Kt,vn),"PUBLIC"===vn.type){var zn=function(Vr){if(void 0===Vr&&(Vr=lr()),"function"!=typeof Vr[Kt])throw ke.create("invalid-app-argument",{appName:Kt});return Vr[Kt]()};void 0!==vn.serviceProps&&(0,c.ZB)(zn,vn.serviceProps),kn[Kt]=zn,Rt.prototype[Kt]=function(){for(var Vr=[],Kn=0;Kn<arguments.length;Kn++)Vr[Kn]=arguments[Kn];return this._getService.bind(this,Kt).apply(this,vn.multipleInstances?Vr:[])}}for(var Ln=0,Qt=Object.keys(Jt);Ln<Qt.length;Ln++)Jt[Qt[Ln]]._addComponent(vn);return"PUBLIC"===vn.type?kn[Kt]:null}return kn.default=kn,Object.defineProperty(kn,"apps",{get:function(){return Object.keys(Jt).map(function(vn){return Jt[vn]})}}),lr.App=Rt,kn}(Et);return Rt.INTERNAL=(0,R.pi)((0,R.pi)({},Rt.INTERNAL),{createFirebaseNamespace:it,extendNamespace:function(Gt){(0,c.ZB)(Rt,Gt)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Rt}(),vt=function(){function Rt(Jt){this.container=Jt}return Rt.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(Gt){if(function(Rt){var Jt=Rt.getComponent();return"VERSION"===(null==Jt?void 0:Jt.type)}(Gt)){var kn=Gt.getImmediate();return kn.library+"/"+kn.version}return null}).filter(function(Gt){return Gt}).join(" ")},Rt}();if((0,c.jU)()&&void 0!==self.firebase){In.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var sn=self.firebase.SDK_VERSION;sn&&sn.indexOf("LITE")>=0&&In.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Sn=nt.initializeApp;nt.initializeApp=function(){for(var Rt=[],Jt=0;Jt<arguments.length;Jt++)Rt[Jt]=arguments[Jt];return(0,c.UG)()&&In.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Sn.apply(void 0,Rt)};var Rt,an=nt;(Rt=an).INTERNAL.registerComponent(new G.wA("platform-logger",function(Gt){return new vt(Gt)},"PRIVATE")),Rt.registerVersion(fe,"0.6.30",undefined),Rt.registerVersion("fire-js","");const Bt=an},6034:(jt,rt,Q)=>{"use strict";Q.d(rt,{wA:()=>G,H0:()=>fe,zt:()=>Ve});var R=Q(4762),c=Q(4685),G=function(){function Ce(re,Ee,pe){this.name=re,this.instanceFactory=Ee,this.type=pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ce.prototype.setInstantiationMode=function(re){return this.instantiationMode=re,this},Ce.prototype.setMultipleInstances=function(re){return this.multipleInstances=re,this},Ce.prototype.setServiceProps=function(re){return this.serviceProps=re,this},Ce.prototype.setInstanceCreatedCallback=function(re){return this.onInstanceCreated=re,this},Ce}(),E="[DEFAULT]",Ve=function(){function Ce(re,Ee){this.name=re,this.container=Ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ce.prototype.get=function(re){var Ee=this.normalizeInstanceIdentifier(re);if(!this.instancesDeferred.has(Ee)){var pe=new c.BH;if(this.instancesDeferred.set(Ee,pe),this.isInitialized(Ee)||this.shouldAutoInitialize())try{var ye=this.getOrInitializeService({instanceIdentifier:Ee});ye&&pe.resolve(ye)}catch(De){}}return this.instancesDeferred.get(Ee).promise},Ce.prototype.getImmediate=function(re){var Ee,pe=this.normalizeInstanceIdentifier(null==re?void 0:re.identifier),ye=null!==(Ee=null==re?void 0:re.optional)&&void 0!==Ee&&Ee;if(!this.isInitialized(pe)&&!this.shouldAutoInitialize()){if(ye)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:pe})}catch(De){if(ye)return null;throw De}},Ce.prototype.getComponent=function(){return this.component},Ce.prototype.setComponent=function(re){var Ee,pe;if(re.name!==this.name)throw Error("Mismatching Component "+re.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=re,this.shouldAutoInitialize()){if(function(Ce){return"EAGER"===Ce.instantiationMode}(re))try{this.getOrInitializeService({instanceIdentifier:E})}catch(_n){}try{for(var ye=(0,R.XA)(this.instancesDeferred.entries()),De=ye.next();!De.done;De=ye.next()){var xe=(0,R.CR)(De.value,2),X=xe[1],Re=this.normalizeInstanceIdentifier(xe[0]);try{var _t=this.getOrInitializeService({instanceIdentifier:Re});X.resolve(_t)}catch(_n){}}}catch(_n){Ee={error:_n}}finally{try{De&&!De.done&&(pe=ye.return)&&pe.call(ye)}finally{if(Ee)throw Ee.error}}}},Ce.prototype.clearInstance=function(re){void 0===re&&(re=E),this.instancesDeferred.delete(re),this.instancesOptions.delete(re),this.instances.delete(re)},Ce.prototype.delete=function(){return(0,R.mG)(this,void 0,void 0,function(){var re;return(0,R.Jh)(this,function(Ee){switch(Ee.label){case 0:return re=Array.from(this.instances.values()),[4,Promise.all((0,R.ev)((0,R.ev)([],(0,R.CR)(re.filter(function(pe){return"INTERNAL"in pe}).map(function(pe){return pe.INTERNAL.delete()}))),(0,R.CR)(re.filter(function(pe){return"_delete"in pe}).map(function(pe){return pe._delete()}))))];case 1:return Ee.sent(),[2]}})})},Ce.prototype.isComponentSet=function(){return null!=this.component},Ce.prototype.isInitialized=function(re){return void 0===re&&(re=E),this.instances.has(re)},Ce.prototype.getOptions=function(re){return void 0===re&&(re=E),this.instancesOptions.get(re)||{}},Ce.prototype.initialize=function(re){var Ee,pe;void 0===re&&(re={});var ye=re.options,De=void 0===ye?{}:ye,xe=this.normalizeInstanceIdentifier(re.instanceIdentifier);if(this.isInitialized(xe))throw Error(this.name+"("+xe+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var We=this.getOrInitializeService({instanceIdentifier:xe,options:De});try{for(var X=(0,R.XA)(this.instancesDeferred.entries()),Re=X.next();!Re.done;Re=X.next()){var _t=(0,R.CR)(Re.value,2),Nt=_t[1];xe===this.normalizeInstanceIdentifier(_t[0])&&Nt.resolve(We)}}catch(Yt){Ee={error:Yt}}finally{try{Re&&!Re.done&&(pe=X.return)&&pe.call(X)}finally{if(Ee)throw Ee.error}}return We},Ce.prototype.onInit=function(re,Ee){var pe,ye=this.normalizeInstanceIdentifier(Ee),De=null!==(pe=this.onInitCallbacks.get(ye))&&void 0!==pe?pe:new Set;De.add(re),this.onInitCallbacks.set(ye,De);var xe=this.instances.get(ye);return xe&&re(xe,ye),function(){De.delete(re)}},Ce.prototype.invokeOnInitCallbacks=function(re,Ee){var pe,ye,De=this.onInitCallbacks.get(Ee);if(De)try{for(var xe=(0,R.XA)(De),We=xe.next();!We.done;We=xe.next()){var X=We.value;try{X(re,Ee)}catch(Re){}}}catch(Re){pe={error:Re}}finally{try{We&&!We.done&&(ye=xe.return)&&ye.call(xe)}finally{if(pe)throw pe.error}}},Ce.prototype.getOrInitializeService=function(re){var Ee=re.instanceIdentifier,pe=re.options,ye=void 0===pe?{}:pe,De=this.instances.get(Ee);if(!De&&this.component&&(De=this.component.instanceFactory(this.container,{instanceIdentifier:ve(Ee),options:ye}),this.instances.set(Ee,De),this.instancesOptions.set(Ee,ye),this.invokeOnInitCallbacks(De,Ee),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ee,De)}catch(xe){}return De||null},Ce.prototype.normalizeInstanceIdentifier=function(re){return void 0===re&&(re=E),this.component?this.component.multipleInstances?re:E:re},Ce.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},Ce}();function ve(Ce){return Ce===E?void 0:Ce}var fe=function(){function Ce(re){this.name=re,this.providers=new Map}return Ce.prototype.addComponent=function(re){var Ee=this.getProvider(re.name);if(Ee.isComponentSet())throw new Error("Component "+re.name+" has already been registered with "+this.name);Ee.setComponent(re)},Ce.prototype.addOrOverwriteComponent=function(re){this.getProvider(re.name).isComponentSet()&&this.providers.delete(re.name),this.addComponent(re)},Ce.prototype.getProvider=function(re){if(this.providers.has(re))return this.providers.get(re);var Ee=new Ve(re,this);return this.providers.set(re,Ee),Ee},Ce.prototype.getProviders=function(){return Array.from(this.providers.values())},Ce}()},9192:(jt,rt,Q)=>{"use strict";var R=Q(9759),c=Q(6034),G=Q(4685),E=Q(4762),Ve=Q(300);jt=Q.hmd(jt);var fe="";function Ce(f){fe=f}var f,re=function(){function f(h){this.domStorage_=h,this.prefix_="firebase:"}return f.prototype.set=function(h,_){null==_?this.domStorage_.removeItem(this.prefixedName_(h)):this.domStorage_.setItem(this.prefixedName_(h),(0,G.Pz)(_))},f.prototype.get=function(h){var _=this.domStorage_.getItem(this.prefixedName_(h));return null==_?null:(0,G.cI)(_)},f.prototype.remove=function(h){this.domStorage_.removeItem(this.prefixedName_(h))},f.prototype.prefixedName_=function(h){return this.prefix_+h},f.prototype.toString=function(){return this.domStorage_.toString()},f}(),Ee=function(){function f(){this.cache_={},this.isInMemoryStorage=!0}return f.prototype.set=function(h,_){null==_?delete this.cache_[h]:this.cache_[h]=_},f.prototype.get=function(h){return(0,G.r3)(this.cache_,h)?this.cache_[h]:null},f.prototype.remove=function(h){delete this.cache_[h]},f}(),pe=function(f){try{if("undefined"!=typeof window&&void 0!==window[f]){var h=window[f];return h.setItem("firebase:sentinel","cache"),h.removeItem("firebase:sentinel"),new re(h)}}catch(_){}return new Ee},ye=pe("localStorage"),De=pe("sessionStorage"),xe=new Ve.Yd("@firebase/database"),We=(f=1,function(){return f++}),X=function(f){var h=(0,G.dS)(f),_=new G.gQ;_.update(h);var w=_.digest();return G.US.encodeByteArray(w)},Re=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];for(var _="",w=0;w<f.length;w++){var m=f[w];Array.isArray(m)||m&&"object"==typeof m&&"number"==typeof m.length?_+=Re.apply(null,m):_+="object"==typeof m?(0,G.Pz)(m):m,_+=" "}return _},_t=null,_n=!0,Nt=function(f,h){(0,G.hu)(!h||!0===f||!1===f,"Can't turn on custom loggers persistently."),!0===f?(xe.logLevel=Ve.in.VERBOSE,_t=xe.log.bind(xe),h&&De.set("logging_enabled",!0)):"function"==typeof f?_t=f:(_t=null,De.remove("logging_enabled"))},ut=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];if(!0===_n&&(_n=!1,null===_t&&!0===De.get("logging_enabled")&&Nt(!0)),_t){var _=Re.apply(null,f);_t(_)}},Yt=function(f){return function(){for(var h=[],_=0;_<arguments.length;_++)h[_]=arguments[_];ut.apply(void 0,(0,E.ev)([f],(0,E.CR)(h)))}},wt=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var _="FIREBASE INTERNAL ERROR: "+Re.apply(void 0,(0,E.ev)([],(0,E.CR)(f)));xe.error(_)},In=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var _="FIREBASE FATAL ERROR: "+Re.apply(void 0,(0,E.ev)([],(0,E.CR)(f)));throw xe.error(_),new Error(_)},Et=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var _="FIREBASE WARNING: "+Re.apply(void 0,(0,E.ev)([],(0,E.CR)(f)));xe.warn(_)},ot=function(f){return"number"==typeof f&&(f!=f||f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY)},nt="[MIN_NAME]",vt="[MAX_NAME]",at=function(f,h){if(f===h)return 0;if(f===nt||h===vt)return-1;if(h===nt||f===vt)return 1;var _=qn(f),w=qn(h);return null!==_?null!==w?_-w==0?f.length-h.length:_-w:-1:null!==w?1:f<h?-1:1},tn=function(f,h){return f===h?0:f<h?-1:1},sn=function(f,h){if(h&&f in h)return h[f];throw new Error("Missing required key ("+f+") in object: "+(0,G.Pz)(h))},Sn=function(f){if("object"!=typeof f||null===f)return(0,G.Pz)(f);var h=[];for(var _ in f)h.push(_);h.sort();for(var w="{",m=0;m<h.length;m++)0!==m&&(w+=","),w+=(0,G.Pz)(h[m]),w+=":",w+=Sn(f[h[m]]);return w+"}"},an=function(f,h){var _=f.length;if(_<=h)return[f];for(var w=[],m=0;m<_;m+=h)w.push(f.substring(m,m+h>_?_:m+h));return w};function Bt(f,h){for(var _ in f)f.hasOwnProperty(_)&&h(_,f[_])}var Rt=function(f){(0,G.hu)(!ot(f),"Invalid JSON number");var m,v,d,b,M,w=1023;0===f?(v=0,d=0,m=1/f==-1/0?1:0):(m=f<0,(f=Math.abs(f))>=Math.pow(2,1-w)?(v=(b=Math.min(Math.floor(Math.log(f)/Math.LN2),w))+w,d=Math.round(f*Math.pow(2,52-b)-Math.pow(2,52))):(v=0,d=Math.round(f/Math.pow(2,-1074))));var V=[];for(M=52;M;M-=1)V.push(d%2?1:0),d=Math.floor(d/2);for(M=11;M;M-=1)V.push(v%2?1:0),v=Math.floor(v/2);V.push(m?1:0),V.reverse();var J=V.join(""),we="";for(M=0;M<64;M+=8){var Oe=parseInt(J.substr(M,8),2).toString(16);1===Oe.length&&(Oe="0"+Oe),we+=Oe}return we.toLowerCase()},Tn=new RegExp("^-?(0*)\\d{1,10}$"),lr=-2147483648,Zn=2147483647,qn=function(f){if(Tn.test(f)){var h=Number(f);if(h>=lr&&h<=Zn)return h}return null},Xn=function(f){try{f()}catch(h){setTimeout(function(){throw Et("Exception was thrown by user callback.",h.stack||""),h},Math.floor(0))}},On=function(f,h){var _=setTimeout(f,h);return"object"==typeof _&&_.unref&&_.unref(),_},Si=function(){function f(h,_){var w=this;this.appName_=h,this.appCheckProvider=_,this.appCheck=null==_?void 0:_.getImmediate({optional:!0}),this.appCheck||null==_||_.get().then(function(m){return w.appCheck=m})}return f.prototype.getToken=function(h){var _=this;return this.appCheck?this.appCheck.getToken(h):new Promise(function(w,m){setTimeout(function(){_.appCheck?_.getToken(h).then(w,m):w(null)},0)})},f.prototype.addTokenChangeListener=function(h){var _;null===(_=this.appCheckProvider)||void 0===_||_.get().then(function(w){return w.addTokenListener(h)})},f.prototype.notifyForInvalidToken=function(){Et('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},f}(),vn=function(){function f(h,_,w){var m=this;this.appName_=h,this.firebaseOptions_=_,this.authProvider_=w,this.auth_=null,this.auth_=w.getImmediate({optional:!0}),this.auth_||w.onInit(function(v){return m.auth_=v})}return f.prototype.getToken=function(h){var _=this;return this.auth_?this.auth_.getToken(h).catch(function(w){return w&&"auth/token-not-initialized"===w.code?(ut("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(w)}):new Promise(function(w,m){setTimeout(function(){_.auth_?_.getToken(h).then(w,m):w(null)},0)})},f.prototype.addTokenChangeListener=function(h){this.auth_?this.auth_.addAuthTokenListener(h):this.authProvider_.get().then(function(_){return _.addAuthTokenListener(h)})},f.prototype.removeTokenChangeListener=function(h){this.authProvider_.get().then(function(_){return _.removeAuthTokenListener(h)})},f.prototype.notifyForInvalidToken=function(){var h='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';Et(h+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},f}(),Kt=function(){function f(h){this.accessToken=h}return f.prototype.getToken=function(h){return Promise.resolve({accessToken:this.accessToken})},f.prototype.addTokenChangeListener=function(h){h(this.accessToken)},f.prototype.removeTokenChangeListener=function(h){},f.prototype.notifyForInvalidToken=function(){},f.OWNER="owner",f}(),Kn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,It="websocket",xt="long_polling",nn=function(){function f(h,_,w,m,v,d,b){void 0===v&&(v=!1),void 0===d&&(d=""),void 0===b&&(b=!1),this.secure=_,this.namespace=w,this.webSocketOnly=m,this.nodeAdmin=v,this.persistenceKey=d,this.includeNamespaceInQueryParams=b,this._host=h.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ye.get("host:"+h)||this._host}return f.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},f.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(f.prototype,"host",{get:function(){return this._host},set:function(h){h!==this.internalHost&&(this.internalHost=h,this.isCacheableHost()&&ye.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),f.prototype.toString=function(){var h=this.toURLString();return this.persistenceKey&&(h+="<"+this.persistenceKey+">"),h},f.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},f}();function Ue(f,h,_){var w;if((0,G.hu)("string"==typeof h,"typeof type must == string"),(0,G.hu)("object"==typeof _,"typeof params must == object"),h===It)w=(f.secure?"wss://":"ws://")+f.internalHost+"/.ws?";else{if(h!==xt)throw new Error("Unknown connection type: "+h);w=(f.secure?"https://":"http://")+f.internalHost+"/.lp?"}(function(f){return f.host!==f.internalHost||f.isCustomHost()||f.includeNamespaceInQueryParams})(f)&&(_.ns=f.namespace);var m=[];return Bt(_,function(v,d){m.push(v+"="+d)}),w+m.join("&")}var pt=function(){function f(){this.counters_={}}return f.prototype.incrementCounter=function(h,_){void 0===_&&(_=1),(0,G.r3)(this.counters_,h)||(this.counters_[h]=0),this.counters_[h]+=_},f.prototype.get=function(){return(0,G.p$)(this.counters_)},f}(),bt={},At={};function Ut(f){var h=f.toString();return bt[h]||(bt[h]=new pt),bt[h]}var pn=function(){function f(h){this.onMessage_=h,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return f.prototype.closeAfter=function(h,_){this.closeAfterResponse=h,this.onClose=_,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},f.prototype.handleResponse=function(h,_){var w=this;this.pendingResponses[h]=_;for(var m=function(){var b=v.pendingResponses[v.currentResponseNum];delete v.pendingResponses[v.currentResponseNum];for(var M=function(J){b[J]&&Xn(function(){w.onMessage_(b[J])})},V=0;V<b.length;++V)M(V);if(v.currentResponseNum===v.closeAfterResponse)return v.onClose&&(v.onClose(),v.onClose=null),"break";v.currentResponseNum++},v=this;this.pendingResponses[this.currentResponseNum]&&"break"!==m(););},f}(),Qi=function(){function f(h,_,w,m,v,d,b){var M=this;this.connId=h,this.repoInfo=_,this.applicationId=w,this.appCheckToken=m,this.authToken=v,this.transportSessionId=d,this.lastSessionId=b,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yt(h),this.stats_=Ut(_),this.urlFn=function(V){return M.appCheckToken&&(V.ac=M.appCheckToken),Ue(_,xt,V)}}return f.prototype.open=function(h,_){var w=this;this.curSegmentNum=0,this.onDisconnect_=_,this.myPacketOrderer=new pn(h),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){w.log_("Timed out trying to connect."),w.onClosed_(),w.connectTimeoutTimer_=null},Math.floor(3e4)),function(f){if((0,G.Yr)()||"complete"===document.readyState)f();else{var h=!1,_=function(){document.body?h||(h=!0,f()):setTimeout(_,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",_,!1),window.addEventListener("load",_,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&_()}),window.attachEvent("onload",_))}}(function(){if(!w.isClosed_){w.scriptTagHolder=new fo(function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];var M=(0,E.CR)(d,5),V=M[0],J=M[1],we=M[2];if(w.incrementIncomingBytes_(d),w.scriptTagHolder)if(w.connectTimeoutTimer_&&(clearTimeout(w.connectTimeoutTimer_),w.connectTimeoutTimer_=null),w.everConnected_=!0,"start"===V)w.id=J,w.password=we;else{if("close"!==V)throw new Error("Unrecognized command received: "+V);J?(w.scriptTagHolder.sendNewPolls=!1,w.myPacketOrderer.closeAfter(J,function(){w.onClosed_()})):w.onClosed_()}},function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];var M=(0,E.CR)(d,2),V=M[0],J=M[1];w.incrementIncomingBytes_(d),w.myPacketOrderer.handleResponse(V,J)},function(){w.onClosed_()},w.urlFn);var m={start:"t"};m.ser=Math.floor(1e8*Math.random()),w.scriptTagHolder.uniqueCallbackIdentifier&&(m.cb=w.scriptTagHolder.uniqueCallbackIdentifier),m.v="5",w.transportSessionId&&(m.s=w.transportSessionId),w.lastSessionId&&(m.ls=w.lastSessionId),w.applicationId&&(m.p=w.applicationId),w.appCheckToken&&(m.ac=w.appCheckToken),"undefined"!=typeof location&&location.hostname&&Kn.test(location.hostname)&&(m.r="f");var v=w.urlFn(m);w.log_("Connecting via long-poll to "+v),w.scriptTagHolder.addTag(v,function(){})}})},f.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},f.forceAllow=function(){f.forceAllow_=!0},f.forceDisallow=function(){f.forceDisallow_=!0},f.isAvailable=function(){return!((0,G.Yr)()||!f.forceAllow_&&(f.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},f.prototype.markConnectionHealthy=function(){},f.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},f.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},f.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},f.prototype.send=function(h){var _=(0,G.Pz)(h);this.bytesSent+=_.length,this.stats_.incrementCounter("bytes_sent",_.length);for(var w=(0,G.h$)(_),m=an(w,1840),v=0;v<m.length;v++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,m.length,m[v]),this.curSegmentNum++},f.prototype.addDisconnectPingFrame=function(h,_){if(!(0,G.Yr)()){this.myDisconnFrame=document.createElement("iframe");var w={dframe:"t"};w.id=h,w.pw=_,this.myDisconnFrame.src=this.urlFn(w),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},f.prototype.incrementIncomingBytes_=function(h){var _=(0,G.Pz)(h).length;this.bytesReceived+=_,this.stats_.incrementCounter("bytes_received",_)},f}(),fo=function(){function f(h,_,w,m){if(this.onDisconnect=w,this.urlFn=m,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,G.Yr)())this.commandCB=h,this.onMessageCB=_;else{this.uniqueCallbackIdentifier=We(),window["pLPCommand"+this.uniqueCallbackIdentifier]=h,window["pRTLPCB"+this.uniqueCallbackIdentifier]=_,this.myIFrame=f.createIFrame_();var v="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(v='<script>document.domain="'+document.domain+'";<\/script>');var b="<html><body>"+v+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(b),this.myIFrame.doc.close()}catch(M){ut("frame writing exception"),M.stack&&ut(M.stack),ut(M)}}}return f.createIFrame_=function(){var h=document.createElement("iframe");if(h.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(h);try{h.contentWindow.document||ut("No IE domain setting required")}catch(m){var w=document.domain;h.src="javascript:void((function(){document.open();document.domain='"+w+"';document.close();})())"}return h.contentDocument?h.doc=h.contentDocument:h.contentWindow?h.doc=h.contentWindow.document:h.document&&(h.doc=h.document),h},f.prototype.close=function(){var h=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==h.myIFrame&&(document.body.removeChild(h.myIFrame),h.myIFrame=null)},Math.floor(0)));var _=this.onDisconnect;_&&(this.onDisconnect=null,_())},f.prototype.startLongPoll=function(h,_){for(this.myID=h,this.myPW=_,this.alive=!0;this.newRequest_(););},f.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var h={};h.id=this.myID,h.pw=this.myPW,h.ser=this.currentSerial;for(var _=this.urlFn(h),w="",m=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+w.length<=1870;){var d=this.pendingSegs.shift();w=w+"&seg"+m+"="+d.seg+"&ts"+m+"="+d.ts+"&d"+m+"="+d.d,m++}return this.addLongPollTag_(_+=w,this.currentSerial),!0}return!1},f.prototype.enqueueSegment=function(h,_,w){this.pendingSegs.push({seg:h,ts:_,d:w}),this.alive&&this.newRequest_()},f.prototype.addLongPollTag_=function(h,_){var w=this;this.outstandingRequests.add(_);var m=function(){w.outstandingRequests.delete(_),w.newRequest_()},v=setTimeout(m,Math.floor(25e3));this.addTag(h,function(){clearTimeout(v),m()})},f.prototype.addTag=function(h,_){var w=this;(0,G.Yr)()?this.doNodeLongPoll(h,_):setTimeout(function(){try{if(!w.sendNewPolls)return;var m=w.myIFrame.doc.createElement("script");m.type="text/javascript",m.async=!0,m.src=h,m.onload=m.onreadystatechange=function(){var v=m.readyState;(!v||"loaded"===v||"complete"===v)&&(m.onload=m.onreadystatechange=null,m.parentNode&&m.parentNode.removeChild(m),_())},m.onerror=function(){ut("Long-poll script failed to load: "+h),w.sendNewPolls=!1,w.close()},w.myIFrame.doc.body.appendChild(m)}catch(v){}},Math.floor(1))},f}(),cr=null;"undefined"!=typeof MozWebSocket?cr=MozWebSocket:"undefined"!=typeof WebSocket&&(cr=WebSocket);var bn=function(){function f(h,_,w,m,v,d,b){this.connId=h,this.applicationId=w,this.appCheckToken=m,this.authToken=v,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yt(this.connId),this.stats_=Ut(_),this.connURL=f.connectionURL_(_,d,b,m),this.nodeAdmin=_.nodeAdmin}return f.connectionURL_=function(h,_,w,m){var v={v:"5"};return!(0,G.Yr)()&&"undefined"!=typeof location&&location.hostname&&Kn.test(location.hostname)&&(v.r="f"),_&&(v.s=_),w&&(v.ls=w),m&&(v.ac=m),Ue(h,It,v)},f.prototype.open=function(h,_){var w=this;this.onDisconnect=_,this.onMessage=h,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ye.set("previous_websocket_failure",!0);try{if((0,G.Yr)()){var v={headers:{"User-Agent":"Firebase/5/"+fe+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(v.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(v.headers["X-Firebase-AppCheck"]=this.appCheckToken);var d=process.env,b=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;b&&(v.proxy={origin:b}),this.mySock=new cr(this.connURL,[],v)}else this.mySock=new cr(this.connURL,[],v={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(V){this.log_("Error instantiating WebSocket.");var M=V.message||V.data;return M&&this.log_(M),void this.onClosed_()}this.mySock.onopen=function(){w.log_("Websocket connected."),w.everConnected_=!0},this.mySock.onclose=function(){w.log_("Websocket connection was disconnected."),w.mySock=null,w.onClosed_()},this.mySock.onmessage=function(V){w.handleIncomingFrame(V)},this.mySock.onerror=function(V){w.log_("WebSocket error.  Closing connection.");var J=V.message||V.data;J&&w.log_(J),w.onClosed_()}},f.prototype.start=function(){},f.forceDisallow=function(){f.forceDisallow_=!0},f.isAvailable=function(){var h=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var w=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);w&&w.length>1&&parseFloat(w[1])<4.4&&(h=!0)}return!h&&null!==cr&&!f.forceDisallow_},f.previouslyFailed=function(){return ye.isInMemoryStorage||!0===ye.get("previous_websocket_failure")},f.prototype.markConnectionHealthy=function(){ye.remove("previous_websocket_failure")},f.prototype.appendFrame_=function(h){if(this.frames.push(h),this.frames.length===this.totalFrames){var _=this.frames.join("");this.frames=null;var w=(0,G.cI)(_);this.onMessage(w)}},f.prototype.handleNewFrameCount_=function(h){this.totalFrames=h,this.frames=[]},f.prototype.extractFrameCount_=function(h){if((0,G.hu)(null===this.frames,"We already have a frame buffer"),h.length<=6){var _=Number(h);if(!isNaN(_))return this.handleNewFrameCount_(_),null}return this.handleNewFrameCount_(1),h},f.prototype.handleIncomingFrame=function(h){if(null!==this.mySock){var _=h.data;if(this.bytesReceived+=_.length,this.stats_.incrementCounter("bytes_received",_.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(_);else{var w=this.extractFrameCount_(_);null!==w&&this.appendFrame_(w)}}},f.prototype.send=function(h){this.resetKeepAlive();var _=(0,G.Pz)(h);this.bytesSent+=_.length,this.stats_.incrementCounter("bytes_sent",_.length);var w=an(_,16384);w.length>1&&this.sendString_(String(w.length));for(var m=0;m<w.length;m++)this.sendString_(w[m])},f.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},f.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},f.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},f.prototype.resetKeepAlive=function(){var h=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){h.mySock&&h.sendString_("0"),h.resetKeepAlive()},Math.floor(45e3))},f.prototype.sendString_=function(h){try{this.mySock.send(h)}catch(_){this.log_("Exception thrown from WebSocket.send():",_.message||_.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},f.responsesRequiredToBeHealthy=2,f.healthyTimeout=3e4,f}(),Ur=function(){function f(h){this.initTransports_(h)}return Object.defineProperty(f,"ALL_TRANSPORTS",{get:function(){return[Qi,bn]},enumerable:!1,configurable:!0}),f.prototype.initTransports_=function(h){var _,w,m=bn&&bn.isAvailable(),v=m&&!bn.previouslyFailed();if(h.webSocketOnly&&(m||Et("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),v=!0),v)this.transports_=[bn];else{var d=this.transports_=[];try{for(var b=(0,E.XA)(f.ALL_TRANSPORTS),M=b.next();!M.done;M=b.next()){var V=M.value;V&&V.isAvailable()&&d.push(V)}}catch(J){_={error:J}}finally{try{M&&!M.done&&(w=b.return)&&w.call(b)}finally{if(_)throw _.error}}}},f.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},f.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},f}(),He=function(){function f(h,_,w,m,v,d,b,M,V,J){this.id=h,this.repoInfo_=_,this.applicationId_=w,this.appCheckToken_=m,this.authToken_=v,this.onMessage_=d,this.onReady_=b,this.onDisconnect_=M,this.onKill_=V,this.lastSessionId=J,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yt("c:"+this.id+":"),this.transportManager_=new Ur(_),this.log_("Connection created"),this.start_()}return f.prototype.start_=function(){var h=this,_=this.transportManager_.initialTransport();this.conn_=new _(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=_.responsesRequiredToBeHealthy||0;var w=this.connReceiver_(this.conn_),m=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){h.conn_&&h.conn_.open(w,m)},Math.floor(0));var v=_.healthyTimeout||0;v>0&&(this.healthyTimeout_=On(function(){h.healthyTimeout_=null,h.isHealthy_||(h.conn_&&h.conn_.bytesReceived>102400?(h.log_("Connection exceeded healthy timeout but has received "+h.conn_.bytesReceived+" bytes.  Marking connection healthy."),h.isHealthy_=!0,h.conn_.markConnectionHealthy()):h.conn_&&h.conn_.bytesSent>10240?h.log_("Connection exceeded healthy timeout but has sent "+h.conn_.bytesSent+" bytes.  Leaving connection alive."):(h.log_("Closing unhealthy connection after timeout."),h.close()))},Math.floor(v)))},f.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},f.prototype.disconnReceiver_=function(h){var _=this;return function(w){h===_.conn_?_.onConnectionLost_(w):h===_.secondaryConn_?(_.log_("Secondary connection lost."),_.onSecondaryConnectionLost_()):_.log_("closing an old connection")}},f.prototype.connReceiver_=function(h){var _=this;return function(w){2!==_.state_&&(h===_.rx_?_.onPrimaryMessageReceived_(w):h===_.secondaryConn_?_.onSecondaryMessageReceived_(w):_.log_("message on old connection"))}},f.prototype.sendRequest=function(h){this.sendData_({t:"d",d:h})},f.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},f.prototype.onSecondaryControl_=function(h){if("t"in h){var _=h.t;"a"===_?this.upgradeIfSecondaryHealthy_():"r"===_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},f.prototype.onSecondaryMessageReceived_=function(h){var _=sn("t",h),w=sn("d",h);if("c"===_)this.onSecondaryControl_(w);else{if("d"!==_)throw new Error("Unknown protocol layer: "+_);this.pendingDataMessages.push(w)}},f.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},f.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},f.prototype.onPrimaryMessageReceived_=function(h){var _=sn("t",h),w=sn("d",h);"c"===_?this.onControl_(w):"d"===_&&this.onDataMessage_(w)},f.prototype.onDataMessage_=function(h){this.onPrimaryResponse_(),this.onMessage_(h)},f.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},f.prototype.onControl_=function(h){var _=sn("t",h);if("d"in h){var w=h.d;if("h"===_)this.onHandshake_(w);else if("n"===_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var m=0;m<this.pendingDataMessages.length;++m)this.onDataMessage_(this.pendingDataMessages[m]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===_?this.onConnectionShutdown_(w):"r"===_?this.onReset_(w):"e"===_?wt("Server Error: "+w):"o"===_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wt("Unknown control packet command: "+_)}},f.prototype.onHandshake_=function(h){var _=h.ts,w=h.v,m=h.h;this.sessionId=h.s,this.repoInfo_.host=m,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,_),"5"!==w&&Et("Protocol version mismatch detected"),this.tryStartUpgrade_())},f.prototype.tryStartUpgrade_=function(){var h=this.transportManager_.upgradeTransport();h&&this.startUpgrade_(h)},f.prototype.startUpgrade_=function(h){var _=this;this.secondaryConn_=new h(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=h.responsesRequiredToBeHealthy||0;var w=this.connReceiver_(this.secondaryConn_),m=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(w,m),On(function(){_.secondaryConn_&&(_.log_("Timed out trying to upgrade."),_.secondaryConn_.close())},Math.floor(6e4))},f.prototype.onReset_=function(h){this.log_("Reset packet received.  New host: "+h),this.repoInfo_.host=h,1===this.state_?this.close():(this.closeConnections_(),this.start_())},f.prototype.onConnectionEstablished_=function(h,_){var w=this;this.log_("Realtime connection established."),this.conn_=h,this.state_=1,this.onReady_&&(this.onReady_(_,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):On(function(){w.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},f.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},f.prototype.onSecondaryConnectionLost_=function(){var h=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===h||this.rx_===h)&&this.close()},f.prototype.onConnectionLost_=function(h){this.conn_=null,h||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ye.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},f.prototype.onConnectionShutdown_=function(h){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(h),this.onKill_=null),this.onDisconnect_=null,this.close()},f.prototype.sendData_=function(h){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(h)},f.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},f.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},f}(),Ae=function(){function f(){}return f.prototype.put=function(h,_,w,m){},f.prototype.merge=function(h,_,w,m){},f.prototype.refreshAuthToken=function(h){},f.prototype.refreshAppCheckToken=function(h){},f.prototype.onDisconnectPut=function(h,_,w){},f.prototype.onDisconnectMerge=function(h,_,w){},f.prototype.onDisconnectCancel=function(h,_){},f.prototype.reportStats=function(h){},f}(),st=function(){function f(h){this.allowedEvents_=h,this.listeners_={},(0,G.hu)(Array.isArray(h)&&h.length>0,"Requires a non-empty array")}return f.prototype.trigger=function(h){for(var _=[],w=1;w<arguments.length;w++)_[w-1]=arguments[w];if(Array.isArray(this.listeners_[h]))for(var m=(0,E.ev)([],(0,E.CR)(this.listeners_[h])),v=0;v<m.length;v++)m[v].callback.apply(m[v].context,_)},f.prototype.on=function(h,_,w){this.validateEventType_(h),this.listeners_[h]=this.listeners_[h]||[],this.listeners_[h].push({callback:_,context:w});var m=this.getInitialEvent(h);m&&_.apply(w,m)},f.prototype.off=function(h,_,w){this.validateEventType_(h);for(var m=this.listeners_[h]||[],v=0;v<m.length;v++)if(m[v].callback===_&&(!w||w===m[v].context))return void m.splice(v,1)},f.prototype.validateEventType_=function(h){(0,G.hu)(this.allowedEvents_.find(function(_){return _===h}),"Unknown event: "+h)},f}(),Mt=function(f){function h(){var _=f.call(this,["online"])||this;return _.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,G.uI)()&&(window.addEventListener("online",function(){_.online_||(_.online_=!0,_.trigger("online",!0))},!1),window.addEventListener("offline",function(){_.online_&&(_.online_=!1,_.trigger("online",!1))},!1)),_}return(0,E.ZT)(h,f),h.getInstance=function(){return new h},h.prototype.getInitialEvent=function(_){return(0,G.hu)("online"===_,"Unknown event type: "+_),[this.online_]},h.prototype.currentlyOnline=function(){return this.online_},h}(st),mn=function(){function f(h,_){if(void 0===_){this.pieces_=h.split("/");for(var w=0,m=0;m<this.pieces_.length;m++)this.pieces_[m].length>0&&(this.pieces_[w]=this.pieces_[m],w++);this.pieces_.length=w,this.pieceNum_=0}else this.pieces_=h,this.pieceNum_=_}return f.prototype.toString=function(){for(var h="",_=this.pieceNum_;_<this.pieces_.length;_++)""!==this.pieces_[_]&&(h+="/"+this.pieces_[_]);return h||"/"},f}();function un(){return new mn("")}function er(f){return f.pieceNum_>=f.pieces_.length?null:f.pieces_[f.pieceNum_]}function Li(f){return f.pieces_.length-f.pieceNum_}function mr(f){var h=f.pieceNum_;return h<f.pieces_.length&&h++,new mn(f.pieces_,h)}function Ii(f){return f.pieceNum_<f.pieces_.length?f.pieces_[f.pieces_.length-1]:null}function jr(f,h){return void 0===h&&(h=0),f.pieces_.slice(f.pieceNum_+h)}function Oi(f){if(f.pieceNum_>=f.pieces_.length)return null;for(var h=[],_=f.pieceNum_;_<f.pieces_.length-1;_++)h.push(f.pieces_[_]);return new mn(h,0)}function ar(f,h){for(var _=[],w=f.pieceNum_;w<f.pieces_.length;w++)_.push(f.pieces_[w]);if(h instanceof mn)for(w=h.pieceNum_;w<h.pieces_.length;w++)_.push(h.pieces_[w]);else{var m=h.split("/");for(w=0;w<m.length;w++)m[w].length>0&&_.push(m[w])}return new mn(_,0)}function Bn(f){return f.pieceNum_>=f.pieces_.length}function zr(f,h){var _=er(f),w=er(h);if(null===_)return h;if(_===w)return zr(mr(f),mr(h));throw new Error("INTERNAL ERROR: innerPath ("+h+") is not within outerPath ("+f+")")}function Mr(f,h){for(var _=jr(f,0),w=jr(h,0),m=0;m<_.length&&m<w.length;m++){var v=at(_[m],w[m]);if(0!==v)return v}return _.length===w.length?0:_.length<w.length?-1:1}function Ui(f,h){if(Li(f)!==Li(h))return!1;for(var _=f.pieceNum_,w=h.pieceNum_;_<=f.pieces_.length;_++,w++)if(f.pieces_[_]!==h.pieces_[w])return!1;return!0}function ni(f,h){var _=f.pieceNum_,w=h.pieceNum_;if(Li(f)>Li(h))return!1;for(;_<f.pieces_.length;){if(f.pieces_[_]!==h.pieces_[w])return!1;++_,++w}return!0}var Vi=function(h,_){this.errorPrefix_=_,this.parts_=jr(h,0),this.byteLength_=Math.max(1,this.parts_.length);for(var w=0;w<this.parts_.length;w++)this.byteLength_+=(0,G.ug)(this.parts_[w]);Yo(this)};function Yo(f){if(f.byteLength_>768)throw new Error(f.errorPrefix_+"has a key path longer than 768 bytes ("+f.byteLength_+").");if(f.parts_.length>32)throw new Error(f.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Nr(f))}function Nr(f){return 0===f.parts_.length?"":"in property '"+f.parts_.join(".")+"'"}var Ji,lt,rs=function(f){function h(){var w,m,_=f.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(m="visibilitychange",w="hidden"):void 0!==document.mozHidden?(m="mozvisibilitychange",w="mozHidden"):void 0!==document.msHidden?(m="msvisibilitychange",w="msHidden"):void 0!==document.webkitHidden&&(m="webkitvisibilitychange",w="webkitHidden")),_.visible_=!0,m&&document.addEventListener(m,function(){var v=!document[w];v!==_.visible_&&(_.visible_=v,_.trigger("visible",v))},!1),_}return(0,E.ZT)(h,f),h.getInstance=function(){return new h},h.prototype.getInitialEvent=function(_){return(0,G.hu)("visible"===_,"Unknown event type: "+_),[this.visible_]},h}(st),Bi=1e3,Ai=function(f){function h(_,w,m,v,d,b,M,V){var J=f.call(this)||this;if(J.repoInfo_=_,J.applicationId_=w,J.onDataUpdate_=m,J.onConnectStatus_=v,J.onServerInfoUpdate_=d,J.authTokenProvider_=b,J.appCheckTokenProvider_=M,J.authOverride_=V,J.id=h.nextPersistentConnectionId_++,J.log_=Yt("p:"+J.id+":"),J.interruptReasons_={},J.listens=new Map,J.outstandingPuts_=[],J.outstandingGets_=[],J.outstandingPutCount_=0,J.outstandingGetCount_=0,J.onDisconnectRequestQueue_=[],J.connected_=!1,J.reconnectDelay_=Bi,J.maxReconnectDelay_=3e5,J.securityDebugCallback_=null,J.lastSessionId=null,J.establishConnectionTimer_=null,J.visible_=!1,J.requestCBHash_={},J.requestNumber_=0,J.realtime_=null,J.authToken_=null,J.appCheckToken_=null,J.forceTokenRefresh_=!1,J.invalidAuthTokenCount_=0,J.invalidAppCheckTokenCount_=0,J.firstConnection_=!0,J.lastConnectionAttemptTime_=null,J.lastConnectionEstablishedTime_=null,V&&!(0,G.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return rs.getInstance().on("visible",J.onVisible_,J),-1===_.host.indexOf("fblocal")&&Mt.getInstance().on("online",J.onOnline_,J),J}return(0,E.ZT)(h,f),h.prototype.sendRequest=function(_,w,m){var v=++this.requestNumber_,d={r:v,a:_,b:w};this.log_((0,G.Pz)(d)),(0,G.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),m&&(this.requestCBHash_[v]=m)},h.prototype.get=function(_){var w=this;this.initConnection_();var m=new G.BH,v={p:_._path.toString(),q:_._queryObject},d={action:"g",request:v,onComplete:function(M){var V=M.d;"ok"===M.s?(w.onDataUpdate_(v.p,V,!1,null),m.resolve(V)):m.reject(V)}};this.outstandingGets_.push(d),this.outstandingGetCount_++;var b=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var M=w.outstandingGets_[b];void 0===M||d!==M||(delete w.outstandingGets_[b],w.outstandingGetCount_--,0===w.outstandingGetCount_&&(w.outstandingGets_=[]),w.log_("get "+b+" timed out on connection"),m.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(b),m.promise},h.prototype.listen=function(_,w,m,v){this.initConnection_();var d=_._queryIdentifier,b=_._path.toString();this.log_("Listen called for "+b+" "+d),this.listens.has(b)||this.listens.set(b,new Map),(0,G.hu)(_._queryParams.isDefault()||!_._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,G.hu)(!this.listens.get(b).has(d),"listen() called twice for same path/queryId.");var M={onComplete:v,hashFn:w,query:_,tag:m};this.listens.get(b).set(d,M),this.connected_&&this.sendListen_(M)},h.prototype.sendGet_=function(_){var w=this,m=this.outstandingGets_[_];this.sendRequest("g",m.request,function(v){delete w.outstandingGets_[_],w.outstandingGetCount_--,0===w.outstandingGetCount_&&(w.outstandingGets_=[]),m.onComplete&&m.onComplete(v)})},h.prototype.sendListen_=function(_){var w=this,m=_.query,v=m._path.toString(),d=m._queryIdentifier;this.log_("Listen on "+v+" for "+d);var b={p:v};_.tag&&(b.q=m._queryObject,b.t=_.tag),b.h=_.hashFn(),this.sendRequest("q",b,function(V){var J=V.d,we=V.s;h.warnOnListenWarnings_(J,m),(w.listens.get(v)&&w.listens.get(v).get(d))===_&&(w.log_("listen response",V),"ok"!==we&&w.removeListen_(v,d),_.onComplete&&_.onComplete(we,J))})},h.warnOnListenWarnings_=function(_,w){if(_&&"object"==typeof _&&(0,G.r3)(_,"w")){var m=(0,G.DV)(_,"w");if(Array.isArray(m)&&~m.indexOf("no_index")){var v='".indexOn": "'+w._queryParams.getIndex().toString()+'"',d=w._path.toString();Et("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+v+" at "+d+" to your security rules for better performance.")}}},h.prototype.refreshAuthToken=function(_){this.authToken_=_,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(_)},h.prototype.reduceReconnectDelayIfAdminCredential_=function(_){(_&&40===_.length||(0,G.GJ)(_))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},h.prototype.refreshAppCheckToken=function(_){this.appCheckToken_=_,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},h.prototype.tryAuth=function(){var _=this;if(this.connected_&&this.authToken_){var w=this.authToken_,m=(0,G.w9)(w)?"auth":"gauth",v={cred:w};null===this.authOverride_?v.noauth=!0:"object"==typeof this.authOverride_&&(v.authvar=this.authOverride_),this.sendRequest(m,v,function(d){var b=d.s,M=d.d||"error";_.authToken_===w&&("ok"===b?_.invalidAuthTokenCount_=0:_.onAuthRevoked_(b,M))})}},h.prototype.tryAppCheck=function(){var _=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(w){var m=w.s,v=w.d||"error";"ok"===m?_.invalidAppCheckTokenCount_=0:_.onAppCheckRevoked_(m,v)})},h.prototype.unlisten=function(_,w){var m=_._path.toString(),v=_._queryIdentifier;this.log_("Unlisten called for "+m+" "+v),(0,G.hu)(_._queryParams.isDefault()||!_._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(m,v)&&this.connected_&&this.sendUnlisten_(m,v,_._queryObject,w)},h.prototype.sendUnlisten_=function(_,w,m,v){this.log_("Unlisten on "+_+" for "+w);var d={p:_};v&&(d.q=m,d.t=v),this.sendRequest("n",d)},h.prototype.onDisconnectPut=function(_,w,m){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",_,w,m):this.onDisconnectRequestQueue_.push({pathString:_,action:"o",data:w,onComplete:m})},h.prototype.onDisconnectMerge=function(_,w,m){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",_,w,m):this.onDisconnectRequestQueue_.push({pathString:_,action:"om",data:w,onComplete:m})},h.prototype.onDisconnectCancel=function(_,w){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",_,null,w):this.onDisconnectRequestQueue_.push({pathString:_,action:"oc",data:null,onComplete:w})},h.prototype.sendOnDisconnect_=function(_,w,m,v){var d={p:w,d:m};this.log_("onDisconnect "+_,d),this.sendRequest(_,d,function(b){v&&setTimeout(function(){v(b.s,b.d)},Math.floor(0))})},h.prototype.put=function(_,w,m,v){this.putInternal("p",_,w,m,v)},h.prototype.merge=function(_,w,m,v){this.putInternal("m",_,w,m,v)},h.prototype.putInternal=function(_,w,m,v,d){this.initConnection_();var b={p:w,d:m};void 0!==d&&(b.h=d),this.outstandingPuts_.push({action:_,request:b,onComplete:v}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+w)},h.prototype.sendPut_=function(_){var w=this,m=this.outstandingPuts_[_].action,v=this.outstandingPuts_[_].request,d=this.outstandingPuts_[_].onComplete;this.outstandingPuts_[_].queued=this.connected_,this.sendRequest(m,v,function(b){w.log_(m+" response",b),delete w.outstandingPuts_[_],w.outstandingPutCount_--,0===w.outstandingPutCount_&&(w.outstandingPuts_=[]),d&&d(b.s,b.d)})},h.prototype.reportStats=function(_){var w=this;if(this.connected_){var m={c:_};this.log_("reportStats",m),this.sendRequest("s",m,function(v){"ok"!==v.s&&w.log_("reportStats","Error sending stats: "+v.d)})}},h.prototype.onDataMessage_=function(_){if("r"in _){this.log_("from server: "+(0,G.Pz)(_));var w=_.r,m=this.requestCBHash_[w];m&&(delete this.requestCBHash_[w],m(_.b))}else{if("error"in _)throw"A server-side error has occurred: "+_.error;"a"in _&&this.onDataPush_(_.a,_.b)}},h.prototype.onDataPush_=function(_,w){this.log_("handleServerMessage",_,w),"d"===_?this.onDataUpdate_(w.p,w.d,!1,w.t):"m"===_?this.onDataUpdate_(w.p,w.d,!0,w.t):"c"===_?this.onListenRevoked_(w.p,w.q):"ac"===_?this.onAuthRevoked_(w.s,w.d):"apc"===_?this.onAppCheckRevoked_(w.s,w.d):"sd"===_?this.onSecurityDebugPacket_(w):wt("Unrecognized action received from server: "+(0,G.Pz)(_)+"\nAre you using the latest client?")},h.prototype.onReady_=function(_,w){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(_),this.lastSessionId=w,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},h.prototype.scheduleConnect_=function(_){var w=this;(0,G.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){w.establishConnectionTimer_=null,w.establishConnection_()},Math.floor(_))},h.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},h.prototype.onVisible_=function(_){_&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bi,this.realtime_||this.scheduleConnect_(0)),this.visible_=_},h.prototype.onOnline_=function(_){_?(this.log_("Browser went online."),this.reconnectDelay_=Bi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},h.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Bi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var w=(new Date).getTime()-this.lastConnectionAttemptTime_,m=Math.max(0,this.reconnectDelay_-w);m=Math.random()*m,this.log_("Trying to reconnect in "+m+"ms"),this.scheduleConnect_(m),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},h.prototype.establishConnection_=function(){return(0,E.mG)(this,void 0,void 0,function(){var _,w,m,v,d,b,M,V,we,Oe,et,yt,$t,gn=this;return(0,E.Jh)(this,function(Gn){switch(Gn.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,_=this.onDataMessage_.bind(this),w=this.onReady_.bind(this),m=this.onRealtimeDisconnect_.bind(this),v=this.id+":"+h.nextConnectionId_++,d=this.lastSessionId,b=!1,M=null,this.realtime_={close:V=function(){M?M.close():(b=!0,m())},sendRequest:function(qr){(0,G.hu)(M,"sendRequest call when we're not connected not allowed."),M.sendRequest(qr)}},we=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,Gn.label=1;case 1:return Gn.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(we),this.appCheckTokenProvider_.getToken(we)])];case 2:return Oe=E.CR.apply(void 0,[Gn.sent(),2]),et=Oe[0],yt=Oe[1],b?ut("getToken() completed but was canceled"):(ut("getToken() completed. Creating connection."),this.authToken_=et&&et.accessToken,this.appCheckToken_=yt&&yt.token,M=new He(v,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,_,w,m,function(qr){Et(qr+" ("+gn.repoInfo_.toString()+")"),gn.interrupt("server_kill")},d)),[3,4];case 3:return $t=Gn.sent(),this.log_("Failed to get token: "+$t),b||(this.repoInfo_.nodeAdmin&&Et($t),V()),[3,4];case 4:return[2]}})})},h.prototype.interrupt=function(_){ut("Interrupting connection for reason: "+_),this.interruptReasons_[_]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},h.prototype.resume=function(_){ut("Resuming connection for reason: "+_),delete this.interruptReasons_[_],(0,G.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Bi,this.realtime_||this.scheduleConnect_(0))},h.prototype.handleTimestamp_=function(_){var w=_-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:w})},h.prototype.cancelSentTransactions_=function(){for(var _=0;_<this.outstandingPuts_.length;_++){var w=this.outstandingPuts_[_];w&&"h"in w.request&&w.queued&&(w.onComplete&&w.onComplete("disconnect"),delete this.outstandingPuts_[_],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},h.prototype.onListenRevoked_=function(_,w){var m;m=w?w.map(function(d){return Sn(d)}).join("$"):"default";var v=this.removeListen_(_,m);v&&v.onComplete&&v.onComplete("permission_denied")},h.prototype.removeListen_=function(_,w){var v,m=new mn(_).toString();if(this.listens.has(m)){var d=this.listens.get(m);v=d.get(w),d.delete(w),0===d.size&&this.listens.delete(m)}else v=void 0;return v},h.prototype.onAuthRevoked_=function(_,w){ut("Auth token revoked: "+_+"/"+w),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===_||"permission_denied"===_)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},h.prototype.onAppCheckRevoked_=function(_,w){ut("App check token revoked: "+_+"/"+w),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===_||"permission_denied"===_)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},h.prototype.onSecurityDebugPacket_=function(_){this.securityDebugCallback_?this.securityDebugCallback_(_):"msg"in _&&console.log("FIREBASE: "+_.msg.replace("\n","\nFIREBASE: "))},h.prototype.restoreState_=function(){var _,w,m,v;this.tryAuth(),this.tryAppCheck();try{for(var d=(0,E.XA)(this.listens.values()),b=d.next();!b.done;b=d.next()){var M=b.value;try{for(var V=(m=void 0,(0,E.XA)(M.values())),J=V.next();!J.done;J=V.next())this.sendListen_(J.value)}catch(yt){m={error:yt}}finally{try{J&&!J.done&&(v=V.return)&&v.call(V)}finally{if(m)throw m.error}}}}catch(yt){_={error:yt}}finally{try{b&&!b.done&&(w=d.return)&&w.call(d)}finally{if(_)throw _.error}}for(var Oe=0;Oe<this.outstandingPuts_.length;Oe++)this.outstandingPuts_[Oe]&&this.sendPut_(Oe);for(;this.onDisconnectRequestQueue_.length;){var et=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(et.action,et.pathString,et.data,et.onComplete)}for(Oe=0;Oe<this.outstandingGets_.length;Oe++)this.outstandingGets_[Oe]&&this.sendGet_(Oe)},h.prototype.sendConnectStats_=function(){var _={},w="js";(0,G.Yr)()&&(w=this.repoInfo_.nodeAdmin?"admin_node":"node"),_["sdk."+w+"."+fe.replace(/\./g,"-")]=1,(0,G.uI)()?_["framework.cordova"]=1:(0,G.b$)()&&(_["framework.reactnative"]=1),this.reportStats(_)},h.prototype.shouldReconnect_=function(){var _=Mt.getInstance().currentlyOnline();return(0,G.xb)(this.interruptReasons_)&&_},h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h}(Ae),Qn=function(){function f(h,_){this.name=h,this.node=_}return f.Wrap=function(h,_){return new f(h,_)},f}(),po=function(){function f(){}return f.prototype.getCompare=function(){return this.compare.bind(this)},f.prototype.indexedValueChanged=function(h,_){var w=new Qn(nt,h),m=new Qn(nt,_);return 0!==this.compare(w,m)},f.prototype.minPost=function(){return Qn.MIN},f}(),go=function(f){function h(){return null!==f&&f.apply(this,arguments)||this}return(0,E.ZT)(h,f),Object.defineProperty(h,"__EMPTY_NODE",{get:function(){return Ji},set:function(_){Ji=_},enumerable:!1,configurable:!0}),h.prototype.compare=function(_,w){return at(_.name,w.name)},h.prototype.isDefinedOn=function(_){throw(0,G.g5)("KeyIndex.isDefinedOn not expected to be called.")},h.prototype.indexedValueChanged=function(_,w){return!1},h.prototype.minPost=function(){return Qn.MIN},h.prototype.maxPost=function(){return new Qn(vt,Ji)},h.prototype.makePost=function(_,w){return(0,G.hu)("string"==typeof _,"KeyIndex indexValue must always be a string."),new Qn(_,Ji)},h.prototype.toString=function(){return".key"},h}(po),ui=new go,Xi=function(){function f(h,_,w,m,v){void 0===v&&(v=null),this.isReverse_=m,this.resultGenerator_=v,this.nodeStack_=[];for(var d=1;!h.isEmpty();)if(h=h,d=_?w(h.key,_):1,m&&(d*=-1),d<0)h=this.isReverse_?h.left:h.right;else{if(0===d){this.nodeStack_.push(h);break}this.nodeStack_.push(h),h=this.isReverse_?h.right:h.left}}return f.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var _,h=this.nodeStack_.pop();if(_=this.resultGenerator_?this.resultGenerator_(h.key,h.value):{key:h.key,value:h.value},this.isReverse_)for(h=h.left;!h.isEmpty();)this.nodeStack_.push(h),h=h.right;else for(h=h.right;!h.isEmpty();)this.nodeStack_.push(h),h=h.left;return _},f.prototype.hasNext=function(){return this.nodeStack_.length>0},f.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var h=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(h.key,h.value):{key:h.key,value:h.value}},f}(),ri=function(){function f(h,_,w,m,v){this.key=h,this.value=_,this.color=null!=w?w:f.RED,this.left=null!=m?m:qe.EMPTY_NODE,this.right=null!=v?v:qe.EMPTY_NODE}return f.prototype.copy=function(h,_,w,m,v){return new f(null!=h?h:this.key,null!=_?_:this.value,null!=w?w:this.color,null!=m?m:this.left,null!=v?v:this.right)},f.prototype.count=function(){return this.left.count()+1+this.right.count()},f.prototype.isEmpty=function(){return!1},f.prototype.inorderTraversal=function(h){return this.left.inorderTraversal(h)||!!h(this.key,this.value)||this.right.inorderTraversal(h)},f.prototype.reverseTraversal=function(h){return this.right.reverseTraversal(h)||h(this.key,this.value)||this.left.reverseTraversal(h)},f.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},f.prototype.minKey=function(){return this.min_().key},f.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},f.prototype.insert=function(h,_,w){var m=this,v=w(h,m.key);return(m=v<0?m.copy(null,null,null,m.left.insert(h,_,w),null):0===v?m.copy(null,_,null,null,null):m.copy(null,null,null,null,m.right.insert(h,_,w))).fixUp_()},f.prototype.removeMin_=function(){if(this.left.isEmpty())return qe.EMPTY_NODE;var h=this;return!h.left.isRed_()&&!h.left.left.isRed_()&&(h=h.moveRedLeft_()),(h=h.copy(null,null,null,h.left.removeMin_(),null)).fixUp_()},f.prototype.remove=function(h,_){var w,m;if(_(h,(w=this).key)<0)!w.left.isEmpty()&&!w.left.isRed_()&&!w.left.left.isRed_()&&(w=w.moveRedLeft_()),w=w.copy(null,null,null,w.left.remove(h,_),null);else{if(w.left.isRed_()&&(w=w.rotateRight_()),!w.right.isEmpty()&&!w.right.isRed_()&&!w.right.left.isRed_()&&(w=w.moveRedRight_()),0===_(h,w.key)){if(w.right.isEmpty())return qe.EMPTY_NODE;m=w.right.min_(),w=w.copy(m.key,m.value,null,null,w.right.removeMin_())}w=w.copy(null,null,null,null,w.right.remove(h,_))}return w.fixUp_()},f.prototype.isRed_=function(){return this.color},f.prototype.fixUp_=function(){var h=this;return h.right.isRed_()&&!h.left.isRed_()&&(h=h.rotateLeft_()),h.left.isRed_()&&h.left.left.isRed_()&&(h=h.rotateRight_()),h.left.isRed_()&&h.right.isRed_()&&(h=h.colorFlip_()),h},f.prototype.moveRedLeft_=function(){var h=this.colorFlip_();return h.right.left.isRed_()&&(h=(h=(h=h.copy(null,null,null,null,h.right.rotateRight_())).rotateLeft_()).colorFlip_()),h},f.prototype.moveRedRight_=function(){var h=this.colorFlip_();return h.left.left.isRed_()&&(h=(h=h.rotateRight_()).colorFlip_()),h},f.prototype.rotateLeft_=function(){var h=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,h,null)},f.prototype.rotateRight_=function(){var h=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,h)},f.prototype.colorFlip_=function(){var h=this.left.copy(null,null,!this.left.color,null,null),_=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,h,_)},f.prototype.checkMaxDepth_=function(){var h=this.check_();return Math.pow(2,h)<=this.count()+1},f.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var h=this.left.check_();if(h!==this.right.check_())throw new Error("Black depths differ");return h+(this.isRed_()?0:1)},f.RED=!0,f.BLACK=!1,f}(),ie=function(){function f(){}return f.prototype.copy=function(h,_,w,m,v){return this},f.prototype.insert=function(h,_,w){return new ri(h,_,null)},f.prototype.remove=function(h,_){return this},f.prototype.count=function(){return 0},f.prototype.isEmpty=function(){return!0},f.prototype.inorderTraversal=function(h){return!1},f.prototype.reverseTraversal=function(h){return!1},f.prototype.minKey=function(){return null},f.prototype.maxKey=function(){return null},f.prototype.check_=function(){return 0},f.prototype.isRed_=function(){return!1},f}(),qe=function(){function f(h,_){void 0===_&&(_=f.EMPTY_NODE),this.comparator_=h,this.root_=_}return f.prototype.insert=function(h,_){return new f(this.comparator_,this.root_.insert(h,_,this.comparator_).copy(null,null,ri.BLACK,null,null))},f.prototype.remove=function(h){return new f(this.comparator_,this.root_.remove(h,this.comparator_).copy(null,null,ri.BLACK,null,null))},f.prototype.get=function(h){for(var _,w=this.root_;!w.isEmpty();){if(0===(_=this.comparator_(h,w.key)))return w.value;_<0?w=w.left:_>0&&(w=w.right)}return null},f.prototype.getPredecessorKey=function(h){for(var _,w=this.root_,m=null;!w.isEmpty();){if(0===(_=this.comparator_(h,w.key))){if(w.left.isEmpty())return m?m.key:null;for(w=w.left;!w.right.isEmpty();)w=w.right;return w.key}_<0?w=w.left:_>0&&(m=w,w=w.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},f.prototype.isEmpty=function(){return this.root_.isEmpty()},f.prototype.count=function(){return this.root_.count()},f.prototype.minKey=function(){return this.root_.minKey()},f.prototype.maxKey=function(){return this.root_.maxKey()},f.prototype.inorderTraversal=function(h){return this.root_.inorderTraversal(h)},f.prototype.reverseTraversal=function(h){return this.root_.reverseTraversal(h)},f.prototype.getIterator=function(h){return new Xi(this.root_,null,this.comparator_,!1,h)},f.prototype.getIteratorFrom=function(h,_){return new Xi(this.root_,h,this.comparator_,!1,_)},f.prototype.getReverseIteratorFrom=function(h,_){return new Xi(this.root_,h,this.comparator_,!0,_)},f.prototype.getReverseIterator=function(h){return new Xi(this.root_,null,this.comparator_,!0,h)},f.EMPTY_NODE=new ie,f}();function W(f,h){return at(f.name,h.name)}function he(f,h){return at(f,h)}var $n,xi,Bo,Z,$,wn=function(f){return"number"==typeof f?"number:"+Rt(f):"string:"+f},Ir=function(f){if(f.isLeafNode()){var h=f.val();(0,G.hu)("string"==typeof h||"number"==typeof h||"object"==typeof h&&(0,G.r3)(h,".sv"),"Priority must be a string or number.")}else(0,G.hu)(f===lt||f.isEmpty(),"priority of unexpected type.");(0,G.hu)(f===lt||f.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},hr=function(){function f(h,_){void 0===_&&(_=f.__childrenNodeConstructor.EMPTY_NODE),this.value_=h,this.priorityNode_=_,this.lazyHash_=null,(0,G.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ir(this.priorityNode_)}return Object.defineProperty(f,"__childrenNodeConstructor",{get:function(){return $n},set:function(h){$n=h},enumerable:!1,configurable:!0}),f.prototype.isLeafNode=function(){return!0},f.prototype.getPriority=function(){return this.priorityNode_},f.prototype.updatePriority=function(h){return new f(this.value_,h)},f.prototype.getImmediateChild=function(h){return".priority"===h?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE},f.prototype.getChild=function(h){return Bn(h)?this:".priority"===er(h)?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE},f.prototype.hasChild=function(){return!1},f.prototype.getPredecessorChildName=function(h,_){return null},f.prototype.updateImmediateChild=function(h,_){return".priority"===h?this.updatePriority(_):_.isEmpty()&&".priority"!==h?this:f.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(h,_).updatePriority(this.priorityNode_)},f.prototype.updateChild=function(h,_){var w=er(h);return null===w?_:_.isEmpty()&&".priority"!==w?this:((0,G.hu)(".priority"!==w||1===Li(h),".priority must be the last token in a path"),this.updateImmediateChild(w,f.__childrenNodeConstructor.EMPTY_NODE.updateChild(mr(h),_)))},f.prototype.isEmpty=function(){return!1},f.prototype.numChildren=function(){return 0},f.prototype.forEachChild=function(h,_){return!1},f.prototype.val=function(h){return h&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},f.prototype.hash=function(){if(null===this.lazyHash_){var h="";this.priorityNode_.isEmpty()||(h+="priority:"+wn(this.priorityNode_.val())+":");var _=typeof this.value_;h+=_+":",h+="number"===_?Rt(this.value_):this.value_,this.lazyHash_=X(h)}return this.lazyHash_},f.prototype.getValue=function(){return this.value_},f.prototype.compareTo=function(h){return h===f.__childrenNodeConstructor.EMPTY_NODE?1:h instanceof f.__childrenNodeConstructor?-1:((0,G.hu)(h.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(h))},f.prototype.compareToLeafNode_=function(h){var _=typeof h.value_,w=typeof this.value_,m=f.VALUE_TYPE_ORDER.indexOf(_),v=f.VALUE_TYPE_ORDER.indexOf(w);return(0,G.hu)(m>=0,"Unknown leaf type: "+_),(0,G.hu)(v>=0,"Unknown leaf type: "+w),m===v?"object"===w?0:this.value_<h.value_?-1:this.value_===h.value_?0:1:v-m},f.prototype.withIndex=function(){return this},f.prototype.isIndexed=function(){return!0},f.prototype.equals=function(h){return h===this||!!h.isLeafNode()&&(this.value_===h.value_&&this.priorityNode_.equals(h.priorityNode_))},f.VALUE_TYPE_ORDER=["object","boolean","number","string"],f}(),fr=new(function(f){function h(){return null!==f&&f.apply(this,arguments)||this}return(0,E.ZT)(h,f),h.prototype.compare=function(_,w){var m=_.node.getPriority(),v=w.node.getPriority(),d=m.compareTo(v);return 0===d?at(_.name,w.name):d},h.prototype.isDefinedOn=function(_){return!_.getPriority().isEmpty()},h.prototype.indexedValueChanged=function(_,w){return!_.getPriority().equals(w.getPriority())},h.prototype.minPost=function(){return Qn.MIN},h.prototype.maxPost=function(){return new Qn(vt,new hr("[PRIORITY-POST]",Bo))},h.prototype.makePost=function(_,w){var m=xi(_);return new Qn(w,new hr("[PRIORITY-POST]",m))},h.prototype.toString=function(){return".priority"},h}(po)),jo=Math.log(2),mo=function(){function f(h){this.count=parseInt(Math.log(h+1)/jo,10),this.current_=this.count-1;var m=parseInt(Array(this.count+1).join("1"),2);this.bits_=h+1&m}return f.prototype.nextBitIsOne=function(){var h=!(this.bits_&1<<this.current_);return this.current_--,h},f}(),Y=function(f,h,_,w){f.sort(h);var m=function(M,V){var we,Oe,J=V-M;if(0===J)return null;if(1===J)return we=f[M],Oe=_?_(we):we,new ri(Oe,we.node,ri.BLACK,null,null);var et=parseInt(J/2,10)+M,yt=m(M,et),$t=m(et+1,V);return we=f[et],Oe=_?_(we):we,new ri(Oe,we.node,ri.BLACK,yt,$t)},b=function(M){for(var V=null,J=null,we=f.length,Oe=function(Gn,qr){var Yi=we-Gn,Gs=we;we-=Gn;var sl=m(Yi+1,Gs),Zs=f[Yi],Io=_?_(Zs):Zs;et(new ri(Io,Zs.node,qr,null,sl))},et=function(Gn){V?(V.left=Gn,V=Gn):(J=Gn,V=Gn)},yt=0;yt<M.count;++yt){var $t=M.nextBitIsOne(),gn=Math.pow(2,M.count-(yt+1));$t?Oe(gn,ri.BLACK):(Oe(gn,ri.BLACK),Oe(gn,ri.RED))}return J}(new mo(f.length));return new qe(w||h,b)},ce={},P=function(){function f(h,_){this.indexes_=h,this.indexSet_=_}return Object.defineProperty(f,"Default",{get:function(){return(0,G.hu)(ce&&fr,"ChildrenNode.ts has not been loaded"),Z=Z||new f({".priority":ce},{".priority":fr})},enumerable:!1,configurable:!0}),f.prototype.get=function(h){var _=(0,G.DV)(this.indexes_,h);if(!_)throw new Error("No index defined for "+h);return _ instanceof qe?_:null},f.prototype.hasIndex=function(h){return(0,G.r3)(this.indexSet_,h.toString())},f.prototype.addIndex=function(h,_){(0,G.hu)(h!==ui,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var w=[],m=!1,v=_.getIterator(Qn.Wrap),d=v.getNext();d;)m=m||h.isDefinedOn(d.node),w.push(d),d=v.getNext();var b;b=m?Y(w,h.getCompare()):ce;var M=h.toString(),V=(0,E.pi)({},this.indexSet_);V[M]=h;var J=(0,E.pi)({},this.indexes_);return J[M]=b,new f(J,V)},f.prototype.addToIndexes=function(h,_){var w=this;return new f((0,G.UI)(this.indexes_,function(v,d){var b=(0,G.DV)(w.indexSet_,d);if((0,G.hu)(b,"Missing index implementation for "+d),v===ce){if(b.isDefinedOn(h.node)){for(var M=[],V=_.getIterator(Qn.Wrap),J=V.getNext();J;)J.name!==h.name&&M.push(J),J=V.getNext();return M.push(h),Y(M,b.getCompare())}return ce}var we=_.get(h.name),Oe=v;return we&&(Oe=Oe.remove(new Qn(h.name,we))),Oe.insert(h,h.node)}),this.indexSet_)},f.prototype.removeFromIndexes=function(h,_){return new f((0,G.UI)(this.indexes_,function(m){if(m===ce)return m;var v=_.get(h.name);return v?m.remove(new Qn(h.name,v)):m}),this.indexSet_)},f}(),N=function(){function f(h,_,w){this.children_=h,this.priorityNode_=_,this.indexMap_=w,this.lazyHash_=null,this.priorityNode_&&Ir(this.priorityNode_),this.children_.isEmpty()&&(0,G.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(f,"EMPTY_NODE",{get:function(){return $||($=new f(new qe(he),null,P.Default))},enumerable:!1,configurable:!0}),f.prototype.isLeafNode=function(){return!1},f.prototype.getPriority=function(){return this.priorityNode_||$},f.prototype.updatePriority=function(h){return this.children_.isEmpty()?this:new f(this.children_,h,this.indexMap_)},f.prototype.getImmediateChild=function(h){if(".priority"===h)return this.getPriority();var _=this.children_.get(h);return null===_?$:_},f.prototype.getChild=function(h){var _=er(h);return null===_?this:this.getImmediateChild(_).getChild(mr(h))},f.prototype.hasChild=function(h){return null!==this.children_.get(h)},f.prototype.updateImmediateChild=function(h,_){if((0,G.hu)(_,"We should always be passing snapshot nodes"),".priority"===h)return this.updatePriority(_);var w=new Qn(h,_),m=void 0,v=void 0;_.isEmpty()?(m=this.children_.remove(h),v=this.indexMap_.removeFromIndexes(w,this.children_)):(m=this.children_.insert(h,_),v=this.indexMap_.addToIndexes(w,this.children_));var d=m.isEmpty()?$:this.priorityNode_;return new f(m,d,v)},f.prototype.updateChild=function(h,_){var w=er(h);if(null===w)return _;(0,G.hu)(".priority"!==er(h)||1===Li(h),".priority must be the last token in a path");var m=this.getImmediateChild(w).updateChild(mr(h),_);return this.updateImmediateChild(w,m)},f.prototype.isEmpty=function(){return this.children_.isEmpty()},f.prototype.numChildren=function(){return this.children_.count()},f.prototype.val=function(h){if(this.isEmpty())return null;var _={},w=0,m=0,v=!0;if(this.forEachChild(fr,function(M,V){_[M]=V.val(h),w++,v&&f.INTEGER_REGEXP_.test(M)?m=Math.max(m,Number(M)):v=!1}),!h&&v&&m<2*w){var d=[];for(var b in _)d[b]=_[b];return d}return h&&!this.getPriority().isEmpty()&&(_[".priority"]=this.getPriority().val()),_},f.prototype.hash=function(){if(null===this.lazyHash_){var h="";this.getPriority().isEmpty()||(h+="priority:"+wn(this.getPriority().val())+":"),this.forEachChild(fr,function(_,w){var m=w.hash();""!==m&&(h+=":"+_+":"+m)}),this.lazyHash_=""===h?"":X(h)}return this.lazyHash_},f.prototype.getPredecessorChildName=function(h,_,w){var m=this.resolveIndex_(w);if(m){var v=m.getPredecessorKey(new Qn(h,_));return v?v.name:null}return this.children_.getPredecessorKey(h)},f.prototype.getFirstChildName=function(h){var _=this.resolveIndex_(h);if(_){var w=_.minKey();return w&&w.name}return this.children_.minKey()},f.prototype.getFirstChild=function(h){var _=this.getFirstChildName(h);return _?new Qn(_,this.children_.get(_)):null},f.prototype.getLastChildName=function(h){var _=this.resolveIndex_(h);if(_){var w=_.maxKey();return w&&w.name}return this.children_.maxKey()},f.prototype.getLastChild=function(h){var _=this.getLastChildName(h);return _?new Qn(_,this.children_.get(_)):null},f.prototype.forEachChild=function(h,_){var w=this.resolveIndex_(h);return w?w.inorderTraversal(function(m){return _(m.name,m.node)}):this.children_.inorderTraversal(_)},f.prototype.getIterator=function(h){return this.getIteratorFrom(h.minPost(),h)},f.prototype.getIteratorFrom=function(h,_){var w=this.resolveIndex_(_);if(w)return w.getIteratorFrom(h,function(d){return d});for(var m=this.children_.getIteratorFrom(h.name,Qn.Wrap),v=m.peek();null!=v&&_.compare(v,h)<0;)m.getNext(),v=m.peek();return m},f.prototype.getReverseIterator=function(h){return this.getReverseIteratorFrom(h.maxPost(),h)},f.prototype.getReverseIteratorFrom=function(h,_){var w=this.resolveIndex_(_);if(w)return w.getReverseIteratorFrom(h,function(d){return d});for(var m=this.children_.getReverseIteratorFrom(h.name,Qn.Wrap),v=m.peek();null!=v&&_.compare(v,h)>0;)m.getNext(),v=m.peek();return m},f.prototype.compareTo=function(h){return this.isEmpty()?h.isEmpty()?0:-1:h.isLeafNode()||h.isEmpty()?1:h===_e?-1:0},f.prototype.withIndex=function(h){if(h===ui||this.indexMap_.hasIndex(h))return this;var _=this.indexMap_.addIndex(h,this.children_);return new f(this.children_,this.priorityNode_,_)},f.prototype.isIndexed=function(h){return h===ui||this.indexMap_.hasIndex(h)},f.prototype.equals=function(h){if(h===this)return!0;if(h.isLeafNode())return!1;var _=h;if(this.getPriority().equals(_.getPriority())){if(this.children_.count()===_.children_.count()){for(var w=this.getIterator(fr),m=_.getIterator(fr),v=w.getNext(),d=m.getNext();v&&d;){if(v.name!==d.name||!v.node.equals(d.node))return!1;v=w.getNext(),d=m.getNext()}return null===v&&null===d}return!1}return!1},f.prototype.resolveIndex_=function(h){return h===ui?null:this.indexMap_.get(h.toString())},f.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,f}(),_e=new(function(f){function h(){return f.call(this,new qe(he),N.EMPTY_NODE,P.Default)||this}return(0,E.ZT)(h,f),h.prototype.compareTo=function(_){return _===this?0:1},h.prototype.equals=function(_){return _===this},h.prototype.getPriority=function(){return this},h.prototype.getImmediateChild=function(_){return N.EMPTY_NODE},h.prototype.isEmpty=function(){return!1},h}(N));function tt(f,h){if(void 0===h&&(h=null),null===f)return N.EMPTY_NODE;if("object"==typeof f&&".priority"in f&&(h=f[".priority"]),(0,G.hu)(null===h||"string"==typeof h||"number"==typeof h||"object"==typeof h&&".sv"in h,"Invalid priority type found: "+typeof h),"object"==typeof f&&".value"in f&&null!==f[".value"]&&(f=f[".value"]),"object"!=typeof f||".sv"in f)return new hr(f,tt(h));if(f instanceof Array){var M=N.EMPTY_NODE;return Bt(f,function(V,J){if((0,G.r3)(f,V)&&"."!==V.substring(0,1)){var we=tt(J);(we.isLeafNode()||!we.isEmpty())&&(M=M.updateImmediateChild(V,we))}}),M.updatePriority(tt(h))}var w=[],m=!1;if(Bt(f,function(V,J){if("."!==V.substring(0,1)){var we=tt(J);we.isEmpty()||(m=m||!we.getPriority().isEmpty(),w.push(new Qn(V,we)))}}),0===w.length)return N.EMPTY_NODE;var d=Y(w,W,function(V){return V.name},he);if(m){var b=Y(w,fr.getCompare());return new N(d,tt(h),new P({".priority":b},{".priority":fr}))}return new N(d,tt(h),P.Default)}Object.defineProperties(Qn,{MIN:{value:new Qn(nt,N.EMPTY_NODE)},MAX:{value:new Qn(vt,_e)}}),go.__EMPTY_NODE=N.EMPTY_NODE,hr.__childrenNodeConstructor=N,function(f){lt=f}(_e),function(f){Bo=f}(_e),function(f){xi=f}(tt);var H=function(f){function h(_){var w=f.call(this)||this;return w.indexPath_=_,(0,G.hu)(!Bn(_)&&".priority"!==er(_),"Can't create PathIndex with empty path or .priority key"),w}return(0,E.ZT)(h,f),h.prototype.extractChild=function(_){return _.getChild(this.indexPath_)},h.prototype.isDefinedOn=function(_){return!_.getChild(this.indexPath_).isEmpty()},h.prototype.compare=function(_,w){var m=this.extractChild(_.node),v=this.extractChild(w.node),d=m.compareTo(v);return 0===d?at(_.name,w.name):d},h.prototype.makePost=function(_,w){var m=tt(_),v=N.EMPTY_NODE.updateChild(this.indexPath_,m);return new Qn(w,v)},h.prototype.maxPost=function(){var _=N.EMPTY_NODE.updateChild(this.indexPath_,_e);return new Qn(vt,_)},h.prototype.toString=function(){return jr(this.indexPath_,0).join("/")},h}(po),L=new(function(f){function h(){return null!==f&&f.apply(this,arguments)||this}return(0,E.ZT)(h,f),h.prototype.compare=function(_,w){var m=_.node.compareTo(w.node);return 0===m?at(_.name,w.name):m},h.prototype.isDefinedOn=function(_){return!0},h.prototype.indexedValueChanged=function(_,w){return!_.equals(w)},h.prototype.minPost=function(){return Qn.MIN},h.prototype.maxPost=function(){return Qn.MAX},h.prototype.makePost=function(_,w){var m=tt(_);return new Qn(w,m)},h.prototype.toString=function(){return".value"},h}(po)),ae="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",pr=function(){var f=0,h=[];return function(_){var w=_===f;f=_;var m,v=new Array(8);for(m=7;m>=0;m--)v[m]=ae.charAt(_%64),_=Math.floor(_/64);(0,G.hu)(0===_,"Cannot push at time == 0");var d=v.join("");if(w){for(m=11;m>=0&&63===h[m];m--)h[m]=0;h[m]++}else for(m=0;m<12;m++)h[m]=Math.floor(64*Math.random());for(m=0;m<12;m++)d+=ae.charAt(h[m]);return(0,G.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),Hr=function(f){if(f===""+Zn)return"-";var h=qn(f);if(null!=h)return""+(h+1);for(var _=new Array(f.length),w=0;w<_.length;w++)_[w]=f.charAt(w);if(_.length<786)return _.push("-"),_.join("");for(var m=_.length-1;m>=0&&"z"===_[m];)m--;if(-1===m)return vt;var d=ae.charAt(ae.indexOf(_[m])+1);return _[m]=d,_.slice(0,m+1).join("")},_r=function(f){if(f===""+lr)return nt;var h=qn(f);if(null!=h)return""+(h-1);for(var _=new Array(f.length),w=0;w<_.length;w++)_[w]=f.charAt(w);return"-"===_[_.length-1]?1===_.length?""+Zn:(delete _[_.length-1],_.join("")):(_[_.length-1]=ae.charAt(ae.indexOf(_[_.length-1])-1),_.join("")+"z".repeat(786-_.length))};function Gr(f){return{type:"value",snapshotNode:f}}function _i(f,h){return{type:"child_added",snapshotNode:h,childName:f}}function Dn(f,h){return{type:"child_removed",snapshotNode:h,childName:f}}function eo(f,h,_){return{type:"child_changed",snapshotNode:h,childName:f,oldSnap:_}}var Po=function(){function f(h){this.index_=h}return f.prototype.updateChild=function(h,_,w,m,v,d){(0,G.hu)(h.isIndexed(this.index_),"A node must be indexed if only a child is updated");var b=h.getImmediateChild(_);return b.getChild(m).equals(w.getChild(m))&&b.isEmpty()===w.isEmpty()||(null!=d&&(w.isEmpty()?h.hasChild(_)?d.trackChildChange(Dn(_,b)):(0,G.hu)(h.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):b.isEmpty()?d.trackChildChange(_i(_,w)):d.trackChildChange(eo(_,w,b))),h.isLeafNode()&&w.isEmpty())?h:h.updateImmediateChild(_,w).withIndex(this.index_)},f.prototype.updateFullNode=function(h,_,w){return null!=w&&(h.isLeafNode()||h.forEachChild(fr,function(m,v){_.hasChild(m)||w.trackChildChange(Dn(m,v))}),_.isLeafNode()||_.forEachChild(fr,function(m,v){if(h.hasChild(m)){var d=h.getImmediateChild(m);d.equals(v)||w.trackChildChange(eo(m,v,d))}else w.trackChildChange(_i(m,v))})),_.withIndex(this.index_)},f.prototype.updatePriority=function(h,_){return h.isEmpty()?N.EMPTY_NODE:h.updatePriority(_)},f.prototype.filtersNodes=function(){return!1},f.prototype.getIndexedFilter=function(){return this},f.prototype.getIndex=function(){return this.index_},f}(),qa=function(){function f(h){this.indexedFilter_=new Po(h.getIndex()),this.index_=h.getIndex(),this.startPost_=f.getStartPost_(h),this.endPost_=f.getEndPost_(h)}return f.prototype.getStartPost=function(){return this.startPost_},f.prototype.getEndPost=function(){return this.endPost_},f.prototype.matches=function(h){return this.index_.compare(this.getStartPost(),h)<=0&&this.index_.compare(h,this.getEndPost())<=0},f.prototype.updateChild=function(h,_,w,m,v,d){return this.matches(new Qn(_,w))||(w=N.EMPTY_NODE),this.indexedFilter_.updateChild(h,_,w,m,v,d)},f.prototype.updateFullNode=function(h,_,w){_.isLeafNode()&&(_=N.EMPTY_NODE);var m=_.withIndex(this.index_);m=m.updatePriority(N.EMPTY_NODE);var v=this;return _.forEachChild(fr,function(d,b){v.matches(new Qn(d,b))||(m=m.updateImmediateChild(d,N.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(h,m,w)},f.prototype.updatePriority=function(h,_){return h},f.prototype.filtersNodes=function(){return!0},f.prototype.getIndexedFilter=function(){return this.indexedFilter_},f.prototype.getIndex=function(){return this.index_},f.getStartPost_=function(h){if(h.hasStart()){var _=h.getIndexStartName();return h.getIndex().makePost(h.getIndexStartValue(),_)}return h.getIndex().minPost()},f.getEndPost_=function(h){if(h.hasEnd()){var _=h.getIndexEndName();return h.getIndex().makePost(h.getIndexEndValue(),_)}return h.getIndex().maxPost()},f}(),Gu=function(){function f(h){this.rangedFilter_=new qa(h),this.index_=h.getIndex(),this.limit_=h.getLimit(),this.reverse_=!h.isViewFromLeft()}return f.prototype.updateChild=function(h,_,w,m,v,d){return this.rangedFilter_.matches(new Qn(_,w))||(w=N.EMPTY_NODE),h.getImmediateChild(_).equals(w)?h:h.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(h,_,w,m,v,d):this.fullLimitUpdateChild_(h,_,w,v,d)},f.prototype.updateFullNode=function(h,_,w){var m;if(_.isLeafNode()||_.isEmpty())m=N.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<_.numChildren()&&_.isIndexed(this.index_)){m=N.EMPTY_NODE.withIndex(this.index_);var v=void 0;v=this.reverse_?_.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):_.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var d=0;v.hasNext()&&d<this.limit_;){var b=v.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),b)<=0:this.index_.compare(b,this.rangedFilter_.getEndPost())<=0))break;m=m.updateImmediateChild(b.name,b.node),d++}}else{m=(m=_.withIndex(this.index_)).updatePriority(N.EMPTY_NODE);var V=void 0,J=void 0,we=void 0;if(v=void 0,this.reverse_){v=m.getReverseIterator(this.index_),V=this.rangedFilter_.getEndPost(),J=this.rangedFilter_.getStartPost();var Oe=this.index_.getCompare();we=function(gn,Gn){return Oe(Gn,gn)}}else v=m.getIterator(this.index_),V=this.rangedFilter_.getStartPost(),J=this.rangedFilter_.getEndPost(),we=this.index_.getCompare();d=0;for(var et=!1;v.hasNext();)b=v.getNext(),!et&&we(V,b)<=0&&(et=!0),et&&d<this.limit_&&we(b,J)<=0?d++:m=m.updateImmediateChild(b.name,N.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(h,m,w)},f.prototype.updatePriority=function(h,_){return h},f.prototype.filtersNodes=function(){return!0},f.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},f.prototype.getIndex=function(){return this.index_},f.prototype.fullLimitUpdateChild_=function(h,_,w,m,v){var d;if(this.reverse_){var b=this.index_.getCompare();d=function(qr,Yi){return b(Yi,qr)}}else d=this.index_.getCompare();var M=h;(0,G.hu)(M.numChildren()===this.limit_,"");var V=new Qn(_,w),J=this.reverse_?M.getFirstChild(this.index_):M.getLastChild(this.index_),we=this.rangedFilter_.matches(V);if(M.hasChild(_)){for(var Oe=M.getImmediateChild(_),et=m.getChildAfterChild(this.index_,J,this.reverse_);null!=et&&(et.name===_||M.hasChild(et.name));)et=m.getChildAfterChild(this.index_,et,this.reverse_);var yt=null==et?1:d(et,V);if(we&&!w.isEmpty()&&yt>=0)return null!=v&&v.trackChildChange(eo(_,w,Oe)),M.updateImmediateChild(_,w);null!=v&&v.trackChildChange(Dn(_,Oe));var gn=M.updateImmediateChild(_,N.EMPTY_NODE);return null!=et&&this.rangedFilter_.matches(et)?(null!=v&&v.trackChildChange(_i(et.name,et.node)),gn.updateImmediateChild(et.name,et.node)):gn}return w.isEmpty()?h:we&&d(J,V)>=0?(null!=v&&(v.trackChildChange(Dn(J.name,J.node)),v.trackChildChange(_i(_,w))),M.updateImmediateChild(_,w).updateImmediateChild(J.name,N.EMPTY_NODE)):h},f}(),mu=function(){function f(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fr}return f.prototype.hasStart=function(){return this.startSet_},f.prototype.hasStartAfter=function(){return this.startAfterSet_},f.prototype.hasEndBefore=function(){return this.endBeforeSet_},f.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},f.prototype.getIndexStartValue=function(){return(0,G.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},f.prototype.getIndexStartName=function(){return(0,G.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:nt},f.prototype.hasEnd=function(){return this.endSet_},f.prototype.getIndexEndValue=function(){return(0,G.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},f.prototype.getIndexEndName=function(){return(0,G.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vt},f.prototype.hasLimit=function(){return this.limitSet_},f.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},f.prototype.getLimit=function(){return(0,G.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},f.prototype.getIndex=function(){return this.index_},f.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},f.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===fr},f.prototype.copy=function(){var h=new f;return h.limitSet_=this.limitSet_,h.limit_=this.limit_,h.startSet_=this.startSet_,h.indexStartValue_=this.indexStartValue_,h.startNameSet_=this.startNameSet_,h.indexStartName_=this.indexStartName_,h.endSet_=this.endSet_,h.indexEndValue_=this.indexEndValue_,h.endNameSet_=this.endNameSet_,h.indexEndName_=this.indexEndName_,h.index_=this.index_,h.viewFrom_=this.viewFrom_,h},f}();function bs(f,h,_){var w=f.copy();return w.startSet_=!0,void 0===h&&(h=null),w.indexStartValue_=h,null!=_?(w.startNameSet_=!0,w.indexStartName_=_):(w.startNameSet_=!1,w.indexStartName_=""),w}function xs(f,h,_){var w=f.copy();return w.endSet_=!0,void 0===h&&(h=null),w.indexEndValue_=h,void 0!==_?(w.endNameSet_=!0,w.indexEndName_=_):(w.endNameSet_=!1,w.indexEndName_=""),w}function Qo(f,h){var _=f.copy();return _.index_=h,_}function oe(f){var _,h={};return f.isDefault()||(f.index_===fr?_="$priority":f.index_===L?_="$value":f.index_===ui?_="$key":((0,G.hu)(f.index_ instanceof H,"Unrecognized index type!"),_=f.index_.toString()),h.orderBy=(0,G.Pz)(_),f.startSet_&&(h.startAt=(0,G.Pz)(f.indexStartValue_),f.startNameSet_&&(h.startAt+=","+(0,G.Pz)(f.indexStartName_))),f.endSet_&&(h.endAt=(0,G.Pz)(f.indexEndValue_),f.endNameSet_&&(h.endAt+=","+(0,G.Pz)(f.indexEndName_))),f.limitSet_&&(f.isViewFromLeft()?h.limitToFirst=f.limit_:h.limitToLast=f.limit_)),h}function A(f){var h={};if(f.startSet_&&(h.sp=f.indexStartValue_,f.startNameSet_&&(h.sn=f.indexStartName_)),f.endSet_&&(h.ep=f.indexEndValue_,f.endNameSet_&&(h.en=f.indexEndName_)),f.limitSet_){h.l=f.limit_;var _=f.viewFrom_;""===_&&(_=f.isViewFromLeft()?"l":"r"),h.vf=_}return f.index_!==fr&&(h.i=f.index_.toString()),h}var I=function(f){function h(_,w,m,v){var d=f.call(this)||this;return d.repoInfo_=_,d.onDataUpdate_=w,d.authTokenProvider_=m,d.appCheckTokenProvider_=v,d.log_=Yt("p:rest:"),d.listens_={},d}return(0,E.ZT)(h,f),h.prototype.reportStats=function(_){throw new Error("Method not implemented.")},h.getListenId_=function(_,w){return void 0!==w?"tag$"+w:((0,G.hu)(_._queryParams.isDefault(),"should have a tag if it's not a default query."),_._path.toString())},h.prototype.listen=function(_,w,m,v){var d=this,b=_._path.toString();this.log_("Listen called for "+b+" "+_._queryIdentifier);var M=h.getListenId_(_,m),V={};this.listens_[M]=V;var J=oe(_._queryParams);this.restRequest_(b+".json",J,function(we,Oe){var et=Oe;404===we&&(et=null,we=null),null===we&&d.onDataUpdate_(b,et,!1,m),(0,G.DV)(d.listens_,M)===V&&v(we?401===we?"permission_denied":"rest_error:"+we:"ok",null)})},h.prototype.unlisten=function(_,w){var m=h.getListenId_(_,w);delete this.listens_[m]},h.prototype.get=function(_){var w=this,m=oe(_._queryParams),v=_._path.toString(),d=new G.BH;return this.restRequest_(v+".json",m,function(b,M){var V=M;404===b&&(V=null,b=null),null===b?(w.onDataUpdate_(v,V,!1,null),d.resolve(V)):d.reject(new Error(V))}),d.promise},h.prototype.refreshAuthToken=function(_){},h.prototype.restRequest_=function(_,w,m){var v=this;return void 0===w&&(w={}),w.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(d){var b=(0,E.CR)(d,2),M=b[0],V=b[1];M&&M.accessToken&&(w.auth=M.accessToken),V&&V.token&&(w.ac=V.token);var J=(v.repoInfo_.secure?"https://":"http://")+v.repoInfo_.host+_+"?ns="+v.repoInfo_.namespace+(0,G.xO)(w);v.log_("Sending REST request for "+J);var we=new XMLHttpRequest;we.onreadystatechange=function(){if(m&&4===we.readyState){v.log_("REST Response for "+J+" received. status:",we.status,"response:",we.responseText);var Oe=null;if(we.status>=200&&we.status<300){try{Oe=(0,G.cI)(we.responseText)}catch(et){Et("Failed to parse JSON response for "+J+": "+we.responseText)}m(null,Oe)}else 401!==we.status&&404!==we.status&&Et("Got unsuccessful REST response for "+J+" Status: "+we.status),m(we.status);m=null}},we.open("GET",J,!0),we.send()})},h}(Ae),B=function(){function f(){this.rootNode_=N.EMPTY_NODE}return f.prototype.getNode=function(h){return this.rootNode_.getChild(h)},f.prototype.updateSnapshot=function(h,_){this.rootNode_=this.rootNode_.updateChild(h,_)},f}();function se(){return{value:null,children:new Map}}function me(f,h,_){if(Bn(h))f.value=_,f.children.clear();else if(null!==f.value)f.value=f.value.updateChild(h,_);else{var w=er(h);f.children.has(w)||f.children.set(w,se()),me(f.children.get(w),h=mr(h),_)}}function Pe(f,h){if(Bn(h))return f.value=null,f.children.clear(),!0;if(null!==f.value){if(f.value.isLeafNode())return!1;var _=f.value;return f.value=null,_.forEachChild(fr,function(v,d){me(f,new mn(v),d)}),Pe(f,h)}if(f.children.size>0){var w=er(h);return h=mr(h),f.children.has(w)&&Pe(f.children.get(w),h)&&f.children.delete(w),0===f.children.size}return!0}function Fe(f,h,_){null!==f.value?_(h,f.value):function(f,h){f.children.forEach(function(_,w){h(w,_)})}(f,function(w,m){Fe(m,new mn(h.toString()+"/"+w),_)})}var mt=function(){function f(h){this.collection_=h,this.last_=null}return f.prototype.get=function(){var h=this.collection_.get(),_=(0,E.pi)({},h);return this.last_&&Bt(this.last_,function(w,m){_[w]=_[w]-m}),this.last_=h,_},f}(),Rr=function(){function f(h,_){this.server_=_,this.statsToReport_={},this.statsListener_=new mt(h);var w=1e4+2e4*Math.random();On(this.reportStats_.bind(this),Math.floor(w))}return f.prototype.reportStats_=function(){var h=this,_=this.statsListener_.get(),w={},m=!1;Bt(_,function(v,d){d>0&&(0,G.r3)(h.statsToReport_,v)&&(w[v]=d,m=!0)}),m&&this.server_.reportStats(w),On(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},f}(),Fn=(()=>(function(f){f[f.OVERWRITE=0]="OVERWRITE",f[f.MERGE=1]="MERGE",f[f.ACK_USER_WRITE=2]="ACK_USER_WRITE",f[f.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Fn||(Fn={})),Fn))();function ei(f){return{fromUser:!1,fromServer:!0,queryId:f,tagged:!0}}var Ri=function(){function f(h,_,w){this.path=h,this.affectedTree=_,this.revert=w,this.type=Fn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return f.prototype.operationForChild=function(h){if(Bn(this.path)){if(null!=this.affectedTree.value)return(0,G.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var _=this.affectedTree.subtree(new mn(h));return new f(un(),_,this.revert)}return(0,G.hu)(er(this.path)===h,"operationForChild called for unrelated child."),new f(mr(this.path),this.affectedTree,this.revert)},f}(),li=function(){function f(h,_){this.source=h,this.path=_,this.type=Fn.LISTEN_COMPLETE}return f.prototype.operationForChild=function(h){return Bn(this.path)?new f(this.source,un()):new f(this.source,mr(this.path))},f}(),So=function(){function f(h,_,w){this.source=h,this.path=_,this.snap=w,this.type=Fn.OVERWRITE}return f.prototype.operationForChild=function(h){return Bn(this.path)?new f(this.source,un(),this.snap.getImmediateChild(h)):new f(this.source,mr(this.path),this.snap)},f}(),Ro=function(){function f(h,_,w){this.source=h,this.path=_,this.children=w,this.type=Fn.MERGE}return f.prototype.operationForChild=function(h){if(Bn(this.path)){var _=this.children.subtree(new mn(h));return _.isEmpty()?null:_.value?new So(this.source,un(),_.value):new f(this.source,un(),_)}return(0,G.hu)(er(this.path)===h,"Can't get a merge for a child not on the path of the operation"),new f(this.source,mr(this.path),this.children)},f.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},f}(),ci=function(){function f(h,_,w){this.node_=h,this.fullyInitialized_=_,this.filtered_=w}return f.prototype.isFullyInitialized=function(){return this.fullyInitialized_},f.prototype.isFiltered=function(){return this.filtered_},f.prototype.isCompleteForPath=function(h){if(Bn(h))return this.isFullyInitialized()&&!this.filtered_;var _=er(h);return this.isCompleteForChild(_)},f.prototype.isCompleteForChild=function(h){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(h)},f.prototype.getNode=function(){return this.node_},f}(),_o=function(h){this.query_=h,this.index_=this.query_._queryParams.getIndex()};function to(f,h,_,w,m,v){var d=w.filter(function(b){return b.type===_});d.sort(function(b,M){return function(f,h,_){if(null==h.childName||null==_.childName)throw(0,G.g5)("Should only compare child_ events.");var w=new Qn(h.childName,h.snapshotNode),m=new Qn(_.childName,_.snapshotNode);return f.index_.compare(w,m)}(f,b,M)}),d.forEach(function(b){var M=function(f,h,_){return"value"===h.type||"child_removed"===h.type||(h.prevName=_.getPredecessorChildName(h.childName,h.snapshotNode,f.index_)),h}(f,b,v);m.forEach(function(V){V.respondsTo(b.type)&&h.push(V.createEvent(M,f.query_))})})}function yi(f,h){return{eventCache:f,serverCache:h}}function no(f,h,_,w){return yi(new ci(h,_,w),f.serverCache)}function bi(f,h,_,w){return yi(f.eventCache,new ci(h,_,w))}function Cn(f){return f.eventCache.isFullyInitialized()?f.eventCache.getNode():null}function Mn(f){return f.serverCache.isFullyInitialized()?f.serverCache.getNode():null}var tr,Zr=function(){function f(h,_){void 0===_&&(tr||(tr=new qe(tn)),_=tr),this.value=h,this.children=_}return f.fromObject=function(h){var _=new f(null);return Bt(h,function(w,m){_=_.set(new mn(w),m)}),_},f.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},f.prototype.findRootMostMatchingPathAndValue=function(h,_){if(null!=this.value&&_(this.value))return{path:un(),value:this.value};if(Bn(h))return null;var w=er(h),m=this.children.get(w);if(null!==m){var v=m.findRootMostMatchingPathAndValue(mr(h),_);return null!=v?{path:ar(new mn(w),v.path),value:v.value}:null}return null},f.prototype.findRootMostValueAndPath=function(h){return this.findRootMostMatchingPathAndValue(h,function(){return!0})},f.prototype.subtree=function(h){if(Bn(h))return this;var _=er(h),w=this.children.get(_);return null!==w?w.subtree(mr(h)):new f(null)},f.prototype.set=function(h,_){if(Bn(h))return new f(_,this.children);var w=er(h),v=(this.children.get(w)||new f(null)).set(mr(h),_),d=this.children.insert(w,v);return new f(this.value,d)},f.prototype.remove=function(h){if(Bn(h))return this.children.isEmpty()?new f(null):new f(null,this.children);var _=er(h),w=this.children.get(_);if(w){var m=w.remove(mr(h)),v=void 0;return v=m.isEmpty()?this.children.remove(_):this.children.insert(_,m),null===this.value&&v.isEmpty()?new f(null):new f(this.value,v)}return this},f.prototype.get=function(h){if(Bn(h))return this.value;var _=er(h),w=this.children.get(_);return w?w.get(mr(h)):null},f.prototype.setTree=function(h,_){if(Bn(h))return _;var d,w=er(h),v=(this.children.get(w)||new f(null)).setTree(mr(h),_);return d=v.isEmpty()?this.children.remove(w):this.children.insert(w,v),new f(this.value,d)},f.prototype.fold=function(h){return this.fold_(un(),h)},f.prototype.fold_=function(h,_){var w={};return this.children.inorderTraversal(function(m,v){w[m]=v.fold_(ar(h,m),_)}),_(h,this.value,w)},f.prototype.findOnPath=function(h,_){return this.findOnPath_(h,un(),_)},f.prototype.findOnPath_=function(h,_,w){var m=!!this.value&&w(_,this.value);if(m)return m;if(Bn(h))return null;var v=er(h),d=this.children.get(v);return d?d.findOnPath_(mr(h),ar(_,v),w):null},f.prototype.foreachOnPath=function(h,_){return this.foreachOnPath_(h,un(),_)},f.prototype.foreachOnPath_=function(h,_,w){if(Bn(h))return this;this.value&&w(_,this.value);var m=er(h),v=this.children.get(m);return v?v.foreachOnPath_(mr(h),ar(_,m),w):new f(null)},f.prototype.foreach=function(h){this.foreach_(un(),h)},f.prototype.foreach_=function(h,_){this.children.inorderTraversal(function(w,m){m.foreach_(ar(h,w),_)}),this.value&&_(h,this.value)},f.prototype.foreachChild=function(h){this.children.inorderTraversal(function(_,w){w.value&&h(_,w.value)})},f}(),Wr=function(){function f(h){this.writeTree_=h}return f.empty=function(){return new f(new Zr(null))},f}();function Zi(f,h,_){if(Bn(h))return new Wr(new Zr(_));var w=f.writeTree_.findRootMostValueAndPath(h);if(null!=w){var m=w.path,v=w.value,d=zr(m,h);return v=v.updateChild(d,_),new Wr(f.writeTree_.set(m,v))}var b=new Zr(_),M=f.writeTree_.setTree(h,b);return new Wr(M)}function qi(f,h,_){var w=f;return Bt(_,function(m,v){w=Zi(w,ar(h,m),v)}),w}function ii(f,h){if(Bn(h))return Wr.empty();var _=f.writeTree_.setTree(h,new Zr(null));return new Wr(_)}function Rs(f,h){return null!=Ei(f,h)}function Ei(f,h){var _=f.writeTree_.findRootMostValueAndPath(h);return null!=_?f.writeTree_.get(_.path).getChild(zr(_.path,h)):null}function $s(f){var h=[],_=f.writeTree_.value;return null!=_?_.isLeafNode()||_.forEachChild(fr,function(w,m){h.push(new Qn(w,m))}):f.writeTree_.children.inorderTraversal(function(w,m){null!=m.value&&h.push(new Qn(w,m.value))}),h}function ro(f,h){if(Bn(h))return f;var _=Ei(f,h);return new Wr(null!=_?new Zr(_):f.writeTree_.subtree(h))}function oi(f){return f.writeTree_.isEmpty()}function ws(f,h){return ba(un(),f.writeTree_,h)}function ba(f,h,_){if(null!=h.value)return _.updateChild(f,h.value);var w=null;return h.children.inorderTraversal(function(m,v){".priority"===m?((0,G.hu)(null!==v.value,"Priority writes must always be leaf nodes"),w=v.value):_=ba(ar(f,m),v,_)}),!_.getChild(f).isEmpty()&&null!==w&&(_=_.updateChild(ar(f,".priority"),w)),_}function zi(f,h){return Ka(h,f)}function is(f,h){if(f.snap)return ni(f.path,h);for(var _ in f.children)if(f.children.hasOwnProperty(_)&&ni(ar(f.path,_),h))return!0;return!1}function Zu(f){return f.visible}function $a(f,h,_){for(var w=Wr.empty(),m=0;m<f.length;++m){var v=f[m];if(h(v)){var d=v.path,b=void 0;if(v.snap)ni(_,d)?w=Zi(w,b=zr(_,d),v.snap):ni(d,_)&&(b=zr(d,_),w=Zi(w,un(),v.snap.getChild(b)));else{if(!v.children)throw(0,G.g5)("WriteRecord should have .snap or .children");if(ni(_,d))w=qi(w,b=zr(_,d),v.children);else if(ni(d,_))if(Bn(b=zr(d,_)))w=qi(w,un(),v.children);else{var M=(0,G.DV)(v.children,er(b));if(M){var V=M.getChild(mr(b));w=Zi(w,un(),V)}}}}}return w}function ia(f,h,_,w,m){if(w||m){var M=ro(f.visibleWrites,h);return!m&&oi(M)?_:m||null!=_||Rs(M,un())?ws($a(f.allWrites,function(Oe){return(Oe.visible||m)&&(!w||!~w.indexOf(Oe.writeId))&&(ni(Oe.path,h)||ni(h,Oe.path))},h),_||N.EMPTY_NODE):null}var v=Ei(f.visibleWrites,h);if(null!=v)return v;var d=ro(f.visibleWrites,h);return oi(d)?_:null!=_||Rs(d,un())?ws(d,_||N.EMPTY_NODE):null}function gt(f,h,_,w){return ia(f.writeTree,f.treePath,h,_,w)}function Lt(f,h){return function(f,h,_){var w=N.EMPTY_NODE,m=Ei(f.visibleWrites,h);if(m)return m.isLeafNode()||m.forEachChild(fr,function(b,M){w=w.updateImmediateChild(b,M)}),w;if(_){var v=ro(f.visibleWrites,h);return _.forEachChild(fr,function(b,M){var V=ws(ro(v,new mn(b)),M);w=w.updateImmediateChild(b,V)}),$s(v).forEach(function(b){w=w.updateImmediateChild(b.name,b.node)}),w}return $s(ro(f.visibleWrites,h)).forEach(function(b){w=w.updateImmediateChild(b.name,b.node)}),w}(f.writeTree,f.treePath,h)}function ps(f,h,_,w){return function(f,h,_,w,m){(0,G.hu)(w||m,"Either existingEventSnap or existingServerSnap must exist");var v=ar(h,_);if(Rs(f.visibleWrites,v))return null;var d=ro(f.visibleWrites,v);return oi(d)?m.getChild(_):ws(d,m.getChild(_))}(f.writeTree,f.treePath,h,_,w)}function Ta(f,h){return function(f,h){return Ei(f.visibleWrites,h)}(f.writeTree,ar(f.treePath,h))}function $i(f,h,_){return function(f,h,_,w){var m=ar(h,_),v=Ei(f.visibleWrites,m);return null!=v?v:w.isCompleteForChild(_)?ws(ro(f.visibleWrites,m),w.getNode().getImmediateChild(_)):null}(f.writeTree,f.treePath,h,_)}function Jo(f,h){return Ka(ar(f.treePath,h),f.writeTree)}function Ka(f,h){return{treePath:f,writeTree:h}}var Nn=function(){function f(){this.changeMap=new Map}return f.prototype.trackChildChange=function(h){var _=h.type,w=h.childName;(0,G.hu)("child_added"===_||"child_changed"===_||"child_removed"===_,"Only child changes supported for tracking"),(0,G.hu)(".priority"!==w,"Only non-priority child changes can be tracked.");var m=this.changeMap.get(w);if(m){var v=m.type;if("child_added"===_&&"child_removed"===v)this.changeMap.set(w,eo(w,h.snapshotNode,m.snapshotNode));else if("child_removed"===_&&"child_added"===v)this.changeMap.delete(w);else if("child_removed"===_&&"child_changed"===v)this.changeMap.set(w,Dn(w,m.oldSnap));else if("child_changed"===_&&"child_added"===v)this.changeMap.set(w,_i(w,h.snapshotNode));else{if("child_changed"!==_||"child_changed"!==v)throw(0,G.g5)("Illegal combination of changes: "+h+" occurred after "+m);this.changeMap.set(w,eo(w,h.snapshotNode,m.oldSnap))}}else this.changeMap.set(w,h)},f.prototype.getChanges=function(){return Array.from(this.changeMap.values())},f}(),on=new(function(){function f(){}return f.prototype.getCompleteChild=function(h){return null},f.prototype.getChildAfterChild=function(h,_,w){return null},f}()),Yl=function(){function f(h,_,w){void 0===w&&(w=null),this.writes_=h,this.viewCache_=_,this.optCompleteServerCache_=w}return f.prototype.getCompleteChild=function(h){var _=this.viewCache_.eventCache;if(_.isCompleteForChild(h))return _.getNode().getImmediateChild(h);var w=null!=this.optCompleteServerCache_?new ci(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $i(this.writes_,h,w)},f.prototype.getChildAfterChild=function(h,_,w){var m=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Mn(this.viewCache_),v=function(f,h,_,w,m,v){return function(f,h,_,w,m,v,d){var b,M=ro(f.visibleWrites,h),V=Ei(M,un());if(null!=V)b=V;else{if(null==_)return[];b=ws(M,_)}if((b=b.withIndex(d)).isEmpty()||b.isLeafNode())return[];for(var J=[],we=d.getCompare(),Oe=v?b.getReverseIteratorFrom(w,d):b.getIteratorFrom(w,d),et=Oe.getNext();et&&J.length<m;)0!==we(et,w)&&J.push(et),et=Oe.getNext();return J}(f.writeTree,f.treePath,h,_,w,m,v)}(this.writes_,m,_,1,w,h);return 0===v.length?null:v[0]},f}();function U(f,h,_,w,m,v){var d=h.eventCache;if(null!=Ta(w,_))return h;var b=void 0,M=void 0;if(Bn(_))if((0,G.hu)(h.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),h.serverCache.isFiltered()){var V=Mn(h),we=Lt(w,V instanceof N?V:N.EMPTY_NODE);b=f.filter.updateFullNode(h.eventCache.getNode(),we,v)}else{var Oe=gt(w,Mn(h));b=f.filter.updateFullNode(h.eventCache.getNode(),Oe,v)}else{var et=er(_);if(".priority"===et){(0,G.hu)(1===Li(_),"Can't have a priority with additional path components");var yt=d.getNode(),$t=ps(w,_,yt,M=h.serverCache.getNode());b=null!=$t?f.filter.updatePriority(yt,$t):d.getNode()}else{var gn=mr(_),Gn=void 0;if(d.isCompleteForChild(et)){M=h.serverCache.getNode();var qr=ps(w,_,d.getNode(),M);Gn=null!=qr?d.getNode().getImmediateChild(et).updateChild(gn,qr):d.getNode().getImmediateChild(et)}else Gn=$i(w,et,h.serverCache);b=null!=Gn?f.filter.updateChild(d.getNode(),et,Gn,gn,m,v):d.getNode()}}return no(h,b,d.isFullyInitialized()||Bn(_),f.filter.filtersNodes())}function x(f,h,_,w,m,v,d,b){var V,M=h.serverCache,J=d?f.filter:f.filter.getIndexedFilter();if(Bn(_))V=J.updateFullNode(M.getNode(),w,null);else if(J.filtersNodes()&&!M.isFiltered()){var we=M.getNode().updateChild(_,w);V=J.updateFullNode(M.getNode(),we,null)}else{var Oe=er(_);if(!M.isCompleteForPath(_)&&Li(_)>1)return h;var et=mr(_),$t=M.getNode().getImmediateChild(Oe).updateChild(et,w);V=".priority"===Oe?J.updatePriority(M.getNode(),$t):J.updateChild(M.getNode(),Oe,$t,et,on,null)}var gn=bi(h,V,M.isFullyInitialized()||Bn(_),J.filtersNodes());return U(f,gn,_,m,new Yl(m,gn,v),b)}function O(f,h,_,w,m,v,d){var M,V,b=h.eventCache,J=new Yl(m,h,v);if(Bn(_))V=f.filter.updateFullNode(h.eventCache.getNode(),w,d),M=no(h,V,!0,f.filter.filtersNodes());else{var we=er(_);if(".priority"===we)V=f.filter.updatePriority(h.eventCache.getNode(),w),M=no(h,V,b.isFullyInitialized(),b.isFiltered());else{var Oe=mr(_),et=b.getNode().getImmediateChild(we),yt=void 0;if(Bn(Oe))yt=w;else{var $t=J.getCompleteChild(we);yt=null!=$t?".priority"===Ii(Oe)&&$t.getChild(Oi(Oe)).isEmpty()?$t:$t.updateChild(Oe,w):N.EMPTY_NODE}M=et.equals(yt)?h:no(h,f.filter.updateChild(b.getNode(),we,yt,Oe,J,d),b.isFullyInitialized(),f.filter.filtersNodes())}}return M}function z(f,h){return f.eventCache.isCompleteForChild(h)}function le(f,h,_){return _.foreach(function(w,m){h=h.updateChild(w,m)}),h}function Te(f,h,_,w,m,v,d,b){if(h.serverCache.getNode().isEmpty()&&!h.serverCache.isFullyInitialized())return h;var V,M=h;V=Bn(_)?w:new Zr(null).setTree(_,w);var J=h.serverCache.getNode();return V.children.inorderTraversal(function(we,Oe){if(J.hasChild(we)){var yt=le(0,h.serverCache.getNode().getImmediateChild(we),Oe);M=x(f,M,new mn(we),yt,m,v,d,b)}}),V.children.inorderTraversal(function(we,Oe){var et=!h.serverCache.isCompleteForChild(we)&&void 0===Oe.value;if(!J.hasChild(we)&&!et){var $t=le(0,h.serverCache.getNode().getImmediateChild(we),Oe);M=x(f,M,new mn(we),$t,m,v,d,b)}}),M}var ur=function(){function f(h,_){this.query_=h,this.eventRegistrations_=[];var w=this.query_._queryParams,m=new Po(w.getIndex()),v=function(f){return f.loadsAllData()?new Po(f.getIndex()):f.hasLimit()?new Gu(f):new qa(f)}(w);this.processor_=function(f){return{filter:f}}(v);var d=_.serverCache,b=_.eventCache,M=m.updateFullNode(N.EMPTY_NODE,d.getNode(),null),V=v.updateFullNode(N.EMPTY_NODE,b.getNode(),null),J=new ci(M,d.isFullyInitialized(),m.filtersNodes()),we=new ci(V,b.isFullyInitialized(),v.filtersNodes());this.viewCache_=yi(we,J),this.eventGenerator_=new _o(this.query_)}return Object.defineProperty(f.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),f}();function jn(f,h){var _=Mn(f.viewCache_);return _&&(f.query._queryParams.loadsAllData()||!Bn(h)&&!_.getImmediateChild(er(h)).isEmpty())?_.getChild(h):null}function vo(f){return 0===f.eventRegistrations_.length}function oo(f,h,_){var w=[];if(_){(0,G.hu)(null==h,"A cancel should cancel all event registrations.");var m=f.query._path;f.eventRegistrations_.forEach(function(M){var V=M.createCancelEvent(_,m);V&&w.push(V)})}if(h){for(var v=[],d=0;d<f.eventRegistrations_.length;++d){var b=f.eventRegistrations_[d];if(b.matches(h)){if(h.hasAnyCallback()){v=v.concat(f.eventRegistrations_.slice(d+1));break}}else v.push(b)}f.eventRegistrations_=v}else f.eventRegistrations_=[];return w}function Ws(f,h,_,w){h.type===Fn.MERGE&&null!==h.source.queryId&&((0,G.hu)(Mn(f.viewCache_),"We should always have a full cache before handling merges"),(0,G.hu)(Cn(f.viewCache_),"Missing event cache, even though we have a server cache"));var m=f.viewCache_,v=function(f,h,_,w,m){var d,b,v=new Nn;if(_.type===Fn.OVERWRITE){var M=_;M.source.fromUser?d=O(f,h,M.path,M.snap,w,m,v):((0,G.hu)(M.source.fromServer,"Unknown source."),b=M.source.tagged||h.serverCache.isFiltered()&&!Bn(M.path),d=x(f,h,M.path,M.snap,w,m,b,v))}else if(_.type===Fn.MERGE){var V=_;V.source.fromUser?d=function(f,h,_,w,m,v,d){var b=h;return w.foreach(function(M,V){var J=ar(_,M);z(h,er(J))&&(b=O(f,b,J,V,m,v,d))}),w.foreach(function(M,V){var J=ar(_,M);z(h,er(J))||(b=O(f,b,J,V,m,v,d))}),b}(f,h,V.path,V.children,w,m,v):((0,G.hu)(V.source.fromServer,"Unknown source."),b=V.source.tagged||h.serverCache.isFiltered(),d=Te(f,h,V.path,V.children,w,m,b,v))}else if(_.type===Fn.ACK_USER_WRITE){var J=_;d=J.revert?function(f,h,_,w,m,v){var d;if(null!=Ta(w,_))return h;var b=new Yl(w,h,m),M=h.eventCache.getNode(),V=void 0;if(Bn(_)||".priority"===er(_)){var J=void 0;if(h.serverCache.isFullyInitialized())J=gt(w,Mn(h));else{var we=h.serverCache.getNode();(0,G.hu)(we instanceof N,"serverChildren would be complete if leaf node"),J=Lt(w,we)}V=f.filter.updateFullNode(M,J=J,v)}else{var Oe=er(_),et=$i(w,Oe,h.serverCache);null==et&&h.serverCache.isCompleteForChild(Oe)&&(et=M.getImmediateChild(Oe)),(V=null!=et?f.filter.updateChild(M,Oe,et,mr(_),b,v):h.eventCache.getNode().hasChild(Oe)?f.filter.updateChild(M,Oe,N.EMPTY_NODE,mr(_),b,v):M).isEmpty()&&h.serverCache.isFullyInitialized()&&(d=gt(w,Mn(h))).isLeafNode()&&(V=f.filter.updateFullNode(V,d,v))}return d=h.serverCache.isFullyInitialized()||null!=Ta(w,un()),no(h,V,d,f.filter.filtersNodes())}(f,h,J.path,w,m,v):function(f,h,_,w,m,v,d){if(null!=Ta(m,_))return h;var b=h.serverCache.isFiltered(),M=h.serverCache;if(null!=w.value){if(Bn(_)&&M.isFullyInitialized()||M.isCompleteForPath(_))return x(f,h,_,M.getNode().getChild(_),m,v,b,d);if(Bn(_)){var V=new Zr(null);return M.getNode().forEachChild(ui,function(we,Oe){V=V.set(new mn(we),Oe)}),Te(f,h,_,V,m,v,b,d)}return h}var J=new Zr(null);return w.foreach(function(we,Oe){var et=ar(_,we);M.isCompleteForPath(et)&&(J=J.set(we,M.getNode().getChild(et)))}),Te(f,h,_,J,m,v,b,d)}(f,h,J.path,J.affectedTree,w,m,v)}else{if(_.type!==Fn.LISTEN_COMPLETE)throw(0,G.g5)("Unknown operation type: "+_.type);d=function(f,h,_,w,m){var v=h.serverCache;return U(f,bi(h,v.getNode(),v.isFullyInitialized()||Bn(_),v.isFiltered()),_,w,on,m)}(f,h,_.path,w,v)}var we=v.getChanges();return function(f,h,_){var w=h.eventCache;if(w.isFullyInitialized()){var m=w.getNode().isLeafNode()||w.getNode().isEmpty(),v=Cn(f);(_.length>0||!f.eventCache.isFullyInitialized()||m&&!w.getNode().equals(v)||!w.getNode().getPriority().equals(v.getPriority()))&&_.push(Gr(Cn(h)))}}(h,d,we),{viewCache:d,changes:we}}(f.processor_,m,h,_,w);return function(f,h){(0,G.hu)(h.eventCache.getNode().isIndexed(f.filter.getIndex()),"Event snap not indexed"),(0,G.hu)(h.serverCache.getNode().isIndexed(f.filter.getIndex()),"Server snap not indexed")}(f.processor_,v.viewCache),(0,G.hu)(v.viewCache.serverCache.isFullyInitialized()||!m.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),f.viewCache_=v.viewCache,as(f,v.changes,v.viewCache.eventCache.getNode(),null)}function as(f,h,_,w){return function(f,h,_,w){var m=[],v=[];return h.forEach(function(d){"child_changed"===d.type&&f.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&v.push(function(f,h){return{type:"child_moved",snapshotNode:h,childName:f}}(d.childName,d.snapshotNode))}),to(f,m,"child_removed",h,w,_),to(f,m,"child_added",h,w,_),to(f,m,"child_moved",v,w,_),to(f,m,"child_changed",h,w,_),to(f,m,"value",h,w,_),m}(f.eventGenerator_,h,_,w?[w]:f.eventRegistrations_)}var oa,yu,Jn=function(){this.views=new Map};function Ja(f,h,_,w){var m,v,d=h.source.queryId;if(null!==d){var b=f.views.get(d);return(0,G.hu)(null!=b,"SyncTree gave us an op for an invalid query."),Ws(b,h,_,w)}var M=[];try{for(var V=(0,E.XA)(f.views.values()),J=V.next();!J.done;J=V.next())M=M.concat(Ws(b=J.value,h,_,w))}catch(we){m={error:we}}finally{try{J&&!J.done&&(v=V.return)&&v.call(V)}finally{if(m)throw m.error}}return M}function Mc(f,h,_,w,m){var d=f.views.get(h._queryIdentifier);if(!d){var b=gt(_,m?w:null),M=!1;b?M=!0:w instanceof N?(b=Lt(_,w),M=!1):(b=N.EMPTY_NODE,M=!1);var V=yi(new ci(b,M,!1),new ci(w,m,!1));return new ur(h,V)}return d}function Xa(f){var h,_,w=[];try{for(var m=(0,E.XA)(f.views.values()),v=m.next();!v.done;v=m.next()){var d=v.value;d.query._queryParams.loadsAllData()||w.push(d)}}catch(b){h={error:b}}finally{try{v&&!v.done&&(_=m.return)&&_.call(m)}finally{if(h)throw h.error}}return w}function Da(f,h){var _,w,m=null;try{for(var v=(0,E.XA)(f.views.values()),d=v.next();!d.done;d=v.next())m=m||jn(d.value,h)}catch(M){_={error:M}}finally{try{d&&!d.done&&(w=v.return)&&w.call(v)}finally{if(_)throw _.error}}return m}function Oc(f,h){return h._queryParams.loadsAllData()?Fs(f):f.views.get(h._queryIdentifier)}function ah(f,h){return null!=Oc(f,h)}function ks(f){return null!=Fs(f)}function Fs(f){var h,_;try{for(var w=(0,E.XA)(f.views.values()),m=w.next();!m.done;m=w.next()){var v=m.value;if(v.query._queryParams.loadsAllData())return v}}catch(d){h={error:d}}finally{try{m&&!m.done&&(_=w.return)&&_.call(w)}finally{if(h)throw h.error}}return null}var ki=1,so=function(h){this.listenProvider_=h,this.syncPointTree_=new Zr(null),this.pendingWriteTree_={visibleWrites:Wr.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Ql(f,h,_,w,m){return function(f,h,_,w,m){(0,G.hu)(w>f.lastWriteId,"Stacking an older write on top of newer ones"),void 0===m&&(m=!0),f.allWrites.push({path:h,snap:_,writeId:w,visible:m}),m&&(f.visibleWrites=Zi(f.visibleWrites,h,_)),f.lastWriteId=w}(f.pendingWriteTree_,h,_,w,m),m?Ns(f,new So({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},h,_)):[]}function yo(f,h,_){void 0===_&&(_=!1);var w=function(f,h){for(var _=0;_<f.allWrites.length;_++){var w=f.allWrites[_];if(w.writeId===h)return w}return null}(f.pendingWriteTree_,h);if(function(f,h){var _=f.allWrites.findIndex(function(V){return V.writeId===h});(0,G.hu)(_>=0,"removeWrite called with nonexistent writeId.");var w=f.allWrites[_];f.allWrites.splice(_,1);for(var m=w.visible,v=!1,d=f.allWrites.length-1;m&&d>=0;){var b=f.allWrites[d];b.visible&&(d>=_&&is(b,w.path)?m=!1:ni(w.path,b.path)&&(v=!0)),d--}return!!m&&(v?(function(f){f.visibleWrites=$a(f.allWrites,Zu,un()),f.lastWriteId=f.allWrites.length>0?f.allWrites[f.allWrites.length-1].writeId:-1}(f),!0):(w.snap?f.visibleWrites=ii(f.visibleWrites,w.path):Bt(w.children,function(V){f.visibleWrites=ii(f.visibleWrites,ar(w.path,V))}),!0))}(f.pendingWriteTree_,h)){var v=new Zr(null);return null!=w.snap?v=v.set(un(),!0):Bt(w.children,function(d){v=v.set(new mn(d),!0)}),Ns(f,new Ri(w.path,v,_))}return[]}function Ys(f,h,_){return Ns(f,new So({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h,_))}function xc(f,h,_,w){var m=h._path,v=f.syncPointTree_.get(m),d=[];if(v&&("default"===h._queryIdentifier||ah(v,h))){var b=function(f,h,_,w){var m,v,d=h._queryIdentifier,b=[],M=[],V=ks(f);if("default"===d)try{for(var J=(0,E.XA)(f.views.entries()),we=J.next();!we.done;we=J.next()){var yt,Oe=(0,E.CR)(we.value,2),et=Oe[0];M=M.concat(oo(yt=Oe[1],_,w)),vo(yt)&&(f.views.delete(et),yt.query._queryParams.loadsAllData()||b.push(yt.query))}}catch($t){m={error:$t}}finally{try{we&&!we.done&&(v=J.return)&&v.call(J)}finally{if(m)throw m.error}}else(yt=f.views.get(d))&&(M=M.concat(oo(yt,_,w)),vo(yt)&&(f.views.delete(d),yt.query._queryParams.loadsAllData()||b.push(yt.query)));return V&&!ks(f)&&b.push(new((0,G.hu)(oa,"Reference.ts has not been loaded"),oa)(h._repo,h._path)),{removed:b,events:M}}(v,h,_,w);(function(f){return 0===f.views.size})(v)&&(f.syncPointTree_=f.syncPointTree_.remove(m));var M=b.removed;d=b.events;var V=-1!==M.findIndex(function(qr){return qr._queryParams.loadsAllData()}),J=f.syncPointTree_.findOnPath(m,function(qr,Yi){return ks(Yi)});if(V&&!J){var we=f.syncPointTree_.subtree(m);if(!we.isEmpty())for(var Oe=function(f){return f.fold(function(h,_,w){if(_&&ks(_))return[Fs(_)];var v=[];return _&&(v=Xa(_)),Bt(w,function(d,b){v=v.concat(b)}),v})}(we),et=0;et<Oe.length;++et){var yt=Oe[et],$t=yt.query,gn=Pc(f,yt);f.listenProvider_.startListening(Sa($t),bl(f,$t),gn.hashFn,gn.onComplete)}}!J&&M.length>0&&!w&&(V?f.listenProvider_.stopListening(Sa(h),null):M.forEach(function(qr){var Yi=f.queryToTagMap.get($u(qr));f.listenProvider_.stopListening(Sa(qr),Yi)})),function(f,h){for(var _=0;_<h.length;++_){var w=h[_];if(!w._queryParams.loadsAllData()){var m=$u(w),v=f.queryToTagMap.get(m);f.queryToTagMap.delete(m),f.tagToQueryMap.delete(v)}}}(f,M)}return d}function uh(f,h,_){var w=h._path,m=null,v=!1;f.syncPointTree_.foreachOnPath(w,function($t,gn){var Gn=zr($t,w);m=m||Da(gn,Gn),v=v||ks(gn)});var b,d=f.syncPointTree_.get(w);d?(v=v||ks(d),m=m||Da(d,un())):(d=new Jn,f.syncPointTree_=f.syncPointTree_.set(w,d)),null!=m?b=!0:(b=!1,m=N.EMPTY_NODE,f.syncPointTree_.subtree(w).foreachChild(function($t,gn){var Gn=Da(gn,un());Gn&&(m=m.updateImmediateChild($t,Gn))}));var V=ah(d,h);if(!V&&!h._queryParams.loadsAllData()){var J=$u(h);(0,G.hu)(!f.queryToTagMap.has(J),"View does not exist, but we have a tag");var we=ki++;f.queryToTagMap.set(J,we),f.tagToQueryMap.set(we,J)}var et=function(f,h,_,w,m,v){var d=Mc(f,h,w,m,v);return f.views.has(h._queryIdentifier)||f.views.set(h._queryIdentifier,d),function(f,h){f.eventRegistrations_.push(h)}(d,_),function(f,h){var _=f.viewCache_.eventCache,w=[];return _.getNode().isLeafNode()||_.getNode().forEachChild(fr,function(v,d){w.push(_i(v,d))}),_.isFullyInitialized()&&w.push(Gr(_.getNode())),as(f,w,_.getNode(),h)}(d,_)}(d,h,_,zi(f.pendingWriteTree_,w),m,b);if(!V&&!v){var yt=Oc(d,h);et=et.concat(function(f,h,_){var w=h._path,m=bl(f,h),v=Pc(f,_),d=f.listenProvider_.startListening(Sa(h),m,v.hashFn,v.onComplete),b=f.syncPointTree_.subtree(w);if(m)(0,G.hu)(!ks(b.value),"If we're adding a query, it shouldn't be shadowed");else for(var M=b.fold(function(we,Oe,et){if(!Bn(we)&&Oe&&ks(Oe))return[Fs(Oe).query];var yt=[];return Oe&&(yt=yt.concat(Xa(Oe).map(function($t){return $t.query}))),Bt(et,function($t,gn){yt=yt.concat(gn)}),yt}),V=0;V<M.length;++V){var J=M[V];f.listenProvider_.stopListening(Sa(J),bl(f,J))}return d}(f,h,yt))}return et}function yl(f,h,_){var m=f.pendingWriteTree_,v=f.syncPointTree_.findOnPath(h,function(d,b){var V=Da(b,zr(d,h));if(V)return V});return ia(m,h,v,_,!0)}function Ns(f,h){return aa(h,f.syncPointTree_,null,zi(f.pendingWriteTree_,un()))}function aa(f,h,_,w){if(Bn(f.path))return zu(f,h,_,w);var m=h.get(un());null==_&&null!=m&&(_=Da(m,un()));var v=[],d=er(f.path),b=f.operationForChild(d),M=h.children.get(d);if(M&&b){var V=_?_.getImmediateChild(d):null,J=Jo(w,d);v=v.concat(aa(b,M,V,J))}return m&&(v=v.concat(Ja(m,f,w,_))),v}function zu(f,h,_,w){var m=h.get(un());null==_&&null!=m&&(_=Da(m,un()));var v=[];return h.children.inorderTraversal(function(d,b){var M=_?_.getImmediateChild(d):null,V=Jo(w,d),J=f.operationForChild(d);J&&(v=v.concat(zu(J,b,M,V)))}),m&&(v=v.concat(Ja(m,f,w,_))),v}function Pc(f,h){var _=h.query,w=bl(f,_);return{hashFn:function(){return(function(f){return f.viewCache_.serverCache.getNode()}(h)||N.EMPTY_NODE).hash()},onComplete:function(m){if("ok"===m)return w?function(f,h,_){var w=ua(f,_);if(w){var m=Jl(w),v=m.path,d=m.queryId,b=zr(v,h);return Ks(f,v,new li(ei(d),b))}return[]}(f,_._path,w):function(f,h){return Ns(f,new li({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h))}(f,_._path);var v=function(f,h){var _="Unknown Error";"too_big"===f?_="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===f?_="Client doesn't have permission to access the desired data.":"unavailable"===f&&(_="The service is unavailable");var w=new Error(f+" at "+h._path.toString()+": "+_);return w.code=f.toUpperCase(),w}(m,_);return xc(f,_,null,v)}}}function bl(f,h){var _=$u(h);return f.queryToTagMap.get(_)}function $u(f){return f._path.toString()+"$"+f._queryIdentifier}function ua(f,h){return f.tagToQueryMap.get(h)}function Jl(f){var h=f.indexOf("$");return(0,G.hu)(-1!==h&&h<f.length-1,"Bad queryKey."),{queryId:f.substr(h+1),path:new mn(f.substr(0,h))}}function Ks(f,h,_){var w=f.syncPointTree_.get(h);return(0,G.hu)(w,"Missing sync point for query tag that we're tracking"),Ja(w,_,zi(f.pendingWriteTree_,h),null)}function Sa(f){return f._queryParams.loadsAllData()&&!f._queryParams.isDefault()?new((0,G.hu)(yu,"Reference.ts has not been loaded"),yu)(f._repo,f._path):f}var Cu=function(){function f(h){this.node_=h}return f.prototype.getImmediateChild=function(h){return new f(this.node_.getImmediateChild(h))},f.prototype.node=function(){return this.node_},f}(),ko=function(){function f(h,_){this.syncTree_=h,this.path_=_}return f.prototype.getImmediateChild=function(h){var _=ar(this.path_,h);return new f(this.syncTree_,_)},f.prototype.node=function(){return yl(this.syncTree_,this.path_)},f}(),wu=function(f,h,_){return f&&"object"==typeof f?((0,G.hu)(".sv"in f,"Unexpected leaf node or priority contents"),"string"==typeof f[".sv"]?lh(f[".sv"],h,_):"object"==typeof f[".sv"]?Wu(f[".sv"],h):void(0,G.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2))):f},lh=function(f,h,_){switch(f){case"timestamp":return _.timestamp;default:(0,G.hu)(!1,"Unexpected server value: "+f)}},Wu=function(f,h,_){f.hasOwnProperty("increment")||(0,G.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2));var w=f.increment;"number"!=typeof w&&(0,G.hu)(!1,"Unexpected increment value: "+w);var m=h.node();if((0,G.hu)(null!=m,"Expected ChildrenNode.EMPTY_NODE for nulls"),!m.isLeafNode())return w;var d=m.getValue();return"number"!=typeof d?w:d+w},Xl=function(f,h,_,w){return Tu(h,new ko(_,f),w)},Eu=function(f,h,_){return Tu(f,new Cu(h),_)};function Tu(f,h,_){var v,w=f.getPriority().val(),m=wu(w,h.getImmediateChild(".priority"),_);if(f.isLeafNode()){var d=f,b=wu(d.getValue(),h,_);return b!==d.getValue()||m!==d.getPriority().val()?new hr(b,tt(m)):f}var M=f;return v=M,m!==M.getPriority().val()&&(v=v.updatePriority(new hr(m))),M.forEachChild(fr,function(V,J){var we=Tu(J,h.getImmediateChild(V),_);we!==J&&(v=v.updateImmediateChild(V,we))}),v}var la=function(h,_,w){void 0===h&&(h=""),void 0===_&&(_=null),void 0===w&&(w={children:{},childCount:0}),this.name=h,this.parent=_,this.node=w};function wl(f,h){for(var _=h instanceof mn?h:new mn(h),w=f,m=er(_);null!==m;){var v=(0,G.DV)(w.node.children,m)||{children:{},childCount:0};w=new la(m,w,v),m=er(_=mr(_))}return w}function Di(f){return f.node.value}function Aa(f,h){f.node.value=h,ru(f)}function gd(f){return f.node.childCount>0}function Ia(f,h){Bt(f.node.children,function(_,w){h(new la(_,f,w))})}function Du(f,h,_,w){_&&!w&&h(f),Ia(f,function(m){Du(m,h,!0,w)}),_&&w&&h(f)}function Su(f){return new mn(null===f.parent?f.name:Su(f.parent)+"/"+f.name)}function ru(f){null!==f.parent&&function(f,h,_){var w=function(f){return void 0===Di(f)&&!gd(f)}(_),m=(0,G.r3)(f.node.children,h);w&&m?(delete f.node.children[h],f.node.childCount--,ru(f)):!w&&!m&&(f.node.children[h]=_.node,f.node.childCount++,ru(f))}(f.parent,f.name,f)}var gs=/[\[\].#$\/\u0000-\u001F\u007F]/,Ku=/[\[\].#$\u0000-\u001F\u007F]/,Ls=10485760,iu=function(f){return"string"==typeof f&&0!==f.length&&!gs.test(f)},Rc=function(f){return"string"==typeof f&&0!==f.length&&!Ku.test(f)},Us=function(f){return null===f||"string"==typeof f||"number"==typeof f&&!ot(f)||f&&"object"==typeof f&&(0,G.r3)(f,".sv")},us=function(f,h,_,w){w&&void 0===h||El((0,G.gK)(f,"value"),h,_)},El=function(f,h,_){var w=_ instanceof mn?new Vi(_,f):_;if(void 0===h)throw new Error(f+"contains undefined "+Nr(w));if("function"==typeof h)throw new Error(f+"contains a function "+Nr(w)+" with contents = "+h.toString());if(ot(h))throw new Error(f+"contains "+h.toString()+" "+Nr(w));if("string"==typeof h&&h.length>Ls/3&&(0,G.ug)(h)>Ls)throw new Error(f+"contains a string greater than "+Ls+" utf8 bytes "+Nr(w)+" ('"+h.substring(0,50)+"...')");if(h&&"object"==typeof h){var m=!1,v=!1;if(Bt(h,function(d,b){if(".value"===d)m=!0;else if(".priority"!==d&&".sv"!==d&&(v=!0,!iu(d)))throw new Error(f+" contains an invalid key ("+d+") "+Nr(w)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(f,h){f.parts_.length>0&&(f.byteLength_+=1),f.parts_.push(h),f.byteLength_+=(0,G.ug)(h),Yo(f)})(w,d),El(f,b,w),function(f){var h=f.parts_.pop();f.byteLength_-=(0,G.ug)(h),f.parts_.length>0&&(f.byteLength_-=1)}(w)}),m&&v)throw new Error(f+' contains ".value" child '+Nr(w)+" in addition to actual children.")}},ca=function(f,h,_,w){if(!w||void 0!==h){var m=(0,G.gK)(f,"values");if(!h||"object"!=typeof h||Array.isArray(h))throw new Error(m+" must be an object containing the children to replace.");var v=[];Bt(h,function(d,b){var M=new mn(d);if(El(m,b,ar(_,M)),".priority"===Ii(M)&&!Us(b))throw new Error(m+"contains an invalid value for '"+M.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");v.push(M)}),function(f,h){var _,w;for(_=0;_<h.length;_++)for(var m=jr(w=h[_]),v=0;v<m.length;v++)if((".priority"!==m[v]||v!==m.length-1)&&!iu(m[v]))throw new Error(f+"contains an invalid key ("+m[v]+") in path "+w.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');h.sort(Mr);var d=null;for(_=0;_<h.length;_++){if(w=h[_],null!==d&&ni(d,w))throw new Error(f+"contains a path "+d.toString()+" that is ancestor of another path "+w.toString());d=w}}(m,v)}},ou=function(f,h,_){if(!_||void 0!==h){if(ot(h))throw new Error((0,G.gK)(f,"priority")+"is "+h.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Us(h))throw new Error((0,G.gK)(f,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ec=function(f,h,_){if(!_||void 0!==h)switch(h){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,G.gK)(f,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},su=function(f,h,_,w){if(!(w&&void 0===_||iu(_)))throw new Error((0,G.gK)(f,h)+'was an invalid key = "'+_+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ts=function(f,h,_,w){if(!(w&&void 0===_||Rc(_)))throw new Error((0,G.gK)(f,h)+'was an invalid path = "'+_+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Vs=function(f,h){if(".info"===er(h))throw new Error(f+" failed = Can't modify data under /.info/")},_d=function(f,h){var _=h.path.toString();if("string"!=typeof h.repoInfo.host||0===h.repoInfo.host.length||!iu(h.repoInfo.namespace)&&"localhost"!==h.repoInfo.host.split(":")[0]||0!==_.length&&!function(f){return f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),Rc(f)}(_))throw new Error((0,G.gK)(f,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bo=function(f,h,_,w){if((!w||void 0!==_)&&"boolean"!=typeof _)throw new Error((0,G.gK)(f,h)+"must be a boolean.")},Qr=function(){this.eventLists_=[],this.recursionDepth_=0};function da(f,h){for(var _=null,w=0;w<h.length;w++){var m=h[w],v=m.getPath();null!==_&&!Ui(v,_.path)&&(f.eventLists_.push(_),_=null),null===_&&(_={events:[],path:v}),_.events.push(m)}_&&f.eventLists_.push(_)}function Qu(f,h,_){da(f,_),Fc(f,function(w){return Ui(w,h)})}function No(f,h,_){da(f,_),Fc(f,function(w){return ni(w,h)||ni(h,w)})}function Fc(f,h){f.recursionDepth_++;for(var _=!0,w=0;w<f.eventLists_.length;w++){var m=f.eventLists_[w];m&&(h(m.path)?(vd(f.eventLists_[w]),f.eventLists_[w]=null):_=!1)}_&&(f.eventLists_=[]),f.recursionDepth_--}function vd(f){for(var h=0;h<f.events.length;h++){var _=f.events[h];if(null!==_){f.events[h]=null;var w=_.getEventRunner();_t&&ut("event: "+_.toString()),Xn(w)}}}var Go="repo_interrupt",ha=function(){function f(h,_,w,m){this.repoInfo_=h,this.forceRestClient_=_,this.authTokenProvider_=w,this.appCheckProvider_=m,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Qr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=se(),this.transactionQueueTree_=new la,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return f.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},f}();function tc(f){var _=f.infoData_.getNode(new mn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+_}function Oa(f){return function(f){return(f=f||{}).timestamp=f.timestamp||(new Date).getTime(),f}({timestamp:tc(f)})}function Co(f,h,_,w,m){f.dataUpdateCount++;var v=new mn(h);_=f.interceptServerDataCallback_?f.interceptServerDataCallback_(h,_):_;var d=[];if(m)if(w){var b=(0,G.UI)(_,function(Oe){return tt(Oe)});d=function(f,h,_,w){var m=ua(f,w);if(m){var v=Jl(m),d=v.path,b=v.queryId,M=zr(d,h),V=Zr.fromObject(_);return Ks(f,d,new Ro(ei(b),M,V))}return[]}(f.serverSyncTree_,v,b,m)}else{var M=tt(_);d=function(f,h,_,w){var m=ua(f,w);if(null!=m){var v=Jl(m),d=v.path,b=v.queryId,M=zr(d,h);return Ks(f,d,new So(ei(b),M,_))}return[]}(f.serverSyncTree_,v,M,m)}else if(w){var V=(0,G.UI)(_,function(Oe){return tt(Oe)});d=function(f,h,_){var w=Zr.fromObject(_);return Ns(f,new Ro({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h,w))}(f.serverSyncTree_,v,V)}else{var J=tt(_);d=Ys(f.serverSyncTree_,v,J)}var we=v;d.length>0&&(we=Pa(f,v)),No(f.eventQueue_,we,d)}function xa(f,h){nc(f,"connected",h),!1===h&&function(f){Ou(f,"onDisconnectEvents");var h=Oa(f),_=se();Fe(f.onDisconnect_,un(),function(m,v){var d=Xl(m,v,f.serverSyncTree_,h);me(_,m,d)});var w=[];Fe(_,un(),function(m,v){w=w.concat(Ys(f.serverSyncTree_,m,v));var d=Ju(f,m);Pa(f,d)}),f.onDisconnect_=se(),No(f.eventQueue_,un(),w)}(f)}function nc(f,h,_){var w=new mn("/.info/"+h),m=tt(_);f.infoData_.updateSnapshot(w,m);var v=Ys(f.infoSyncTree_,w,m);No(f.eventQueue_,w,v)}function rc(f){return f.nextWriteId_++}function Mu(f,h,_,w,m){Ou(f,"set",{path:h.toString(),value:_,priority:w});var v=Oa(f),d=tt(_,w),b=yl(f.serverSyncTree_,h),M=Eu(d,b,v),V=rc(f),J=Ql(f.serverSyncTree_,h,M,V,!0);da(f.eventQueue_,J),f.server_.put(h.toString(),d.val(!0),function(Oe,et){var yt="ok"===Oe;yt||Et("set at "+h+" failed: "+Oe);var $t=yo(f.serverSyncTree_,V,!yt);No(f.eventQueue_,h,$t),ls(0,m,Oe,et)});var we=Ju(f,h);Pa(f,we),No(f.eventQueue_,we,[])}function yd(f,h,_){f.server_.onDisconnectCancel(h.toString(),function(w,m){"ok"===w&&Pe(f.onDisconnect_,h),ls(0,_,w,m)})}function oc(f,h,_,w){var m=tt(_);f.server_.onDisconnectPut(h.toString(),m.val(!0),function(v,d){"ok"===v&&me(f.onDisconnect_,h,m),ls(0,w,v,d)})}function Cd(f,h,_){var w;w=".info"===er(h._path)?xc(f.infoSyncTree_,h,_):xc(f.serverSyncTree_,h,_),Qu(f.eventQueue_,h._path,w)}function Tl(f){f.persistentConnection_&&f.persistentConnection_.interrupt(Go)}function Ou(f){for(var h=[],_=1;_<arguments.length;_++)h[_-1]=arguments[_];var w="";f.persistentConnection_&&(w=f.persistentConnection_.id+":"),ut.apply(void 0,(0,E.ev)([w],(0,E.CR)(h)))}function ls(f,h,_,w){h&&Xn(function(){if("ok"===_)h(null);else{var m=(_||"error").toUpperCase(),v=m;w&&(v+=": "+w);var d=new Error(v);d.code=m,h(d)}})}function Qs(f,h,_){return yl(f.serverSyncTree_,h,_)||N.EMPTY_NODE}function Fi(f,h){if(void 0===h&&(h=f.transactionQueueTree_),h||pa(f,h),Di(h)){var _=Ed(f,h);(0,G.hu)(_.length>0,"Sending zero length transaction queue"),_.every(function(m){return 0===m.status})&&function(f,h,_){for(var w=_.map(function(Oe){return Oe.currentWriteId}),m=Qs(f,h,w),v=m,d=m.hash(),b=0;b<_.length;b++){var M=_[b];(0,G.hu)(0===M.status,"tryToSendTransactionQueue_: items in queue should all be run."),M.status=1,M.retryCount++;var V=zr(h,M.path);v=v.updateChild(V,M.currentOutputSnapshotRaw)}var J=v.val(!0),we=h;f.server_.put(we.toString(),J,function(Oe){Ou(f,"transaction put response",{path:we.toString(),status:Oe});var et=[];if("ok"===Oe){for(var yt=[],$t=function(Gn){_[Gn].status=2,et=et.concat(yo(f.serverSyncTree_,_[Gn].currentWriteId)),_[Gn].onComplete&&yt.push(function(){return _[Gn].onComplete(null,!0,_[Gn].currentOutputSnapshotResolved)}),_[Gn].unwatcher()},gn=0;gn<_.length;gn++)$t(gn);for(pa(f,wl(f.transactionQueueTree_,h)),Fi(f,f.transactionQueueTree_),No(f.eventQueue_,h,et),gn=0;gn<yt.length;gn++)Xn(yt[gn])}else{if("datastale"===Oe)for(gn=0;gn<_.length;gn++)_[gn].status=3===_[gn].status?4:0;else for(Et("transaction at "+we.toString()+" failed: "+Oe),gn=0;gn<_.length;gn++)_[gn].status=4,_[gn].abortReason=Oe;Pa(f,h)}},d)}(f,Su(h),_)}else gd(h)&&Ia(h,function(m){Fi(f,m)})}function Pa(f,h){var _=fa(f,h),w=Su(_);return function(f,h,_){if(0!==h.length){for(var w=[],m=[],d=h.filter(function(V){return 0===V.status}).map(function(V){return V.currentWriteId}),b=function(V){var et,J=h[V],we=zr(_,J.path),Oe=!1;if((0,G.hu)(null!==we,"rerunTransactionsUnderNode_: relativePath should not be null."),4===J.status)Oe=!0,et=J.abortReason,m=m.concat(yo(f.serverSyncTree_,J.currentWriteId,!0));else if(0===J.status)if(J.retryCount>=25)Oe=!0,et="maxretry",m=m.concat(yo(f.serverSyncTree_,J.currentWriteId,!0));else{var yt=Qs(f,J.path,d);J.currentInputSnapshot=yt;var $t=h[V].update(yt.val());if(void 0!==$t){El("transaction failed: Data returned ",$t,J.path);var gn=tt($t);"object"==typeof $t&&null!=$t&&(0,G.r3)($t,".priority")||(gn=gn.updatePriority(yt.getPriority()));var qr=J.currentWriteId,Yi=Oa(f),Gs=Eu(gn,yt,Yi);J.currentOutputSnapshotRaw=gn,J.currentOutputSnapshotResolved=Gs,J.currentWriteId=rc(f),d.splice(d.indexOf(qr),1),m=(m=m.concat(Ql(f.serverSyncTree_,J.path,Gs,J.currentWriteId,J.applyLocally))).concat(yo(f.serverSyncTree_,qr,!0))}else Oe=!0,et="nodata",m=m.concat(yo(f.serverSyncTree_,J.currentWriteId,!0))}No(f.eventQueue_,_,m),m=[],Oe&&(h[V].status=2,setTimeout(h[V].unwatcher,Math.floor(0)),h[V].onComplete&&w.push("nodata"===et?function(){return h[V].onComplete(null,!1,h[V].currentInputSnapshot)}:function(){return h[V].onComplete(new Error(et),!1,null)}))},M=0;M<h.length;M++)b(M);for(pa(f,f.transactionQueueTree_),M=0;M<w.length;M++)Xn(w[M]);Fi(f,f.transactionQueueTree_)}}(f,Ed(f,_),w),w}function fa(f,h){var _,w=f.transactionQueueTree_;for(_=er(h);null!==_&&void 0===Di(w);)w=wl(w,_),_=er(h=mr(h));return w}function Ed(f,h){var _=[];return Td(f,h,_),_.sort(function(w,m){return w.order-m.order}),_}function Td(f,h,_){var w=Di(h);if(w)for(var m=0;m<w.length;m++)_.push(w[m]);Ia(h,function(v){Td(f,v,_)})}function pa(f,h){var _=Di(h);if(_){for(var w=0,m=0;m<_.length;m++)2!==_[m].status&&(_[w]=_[m],w++);_.length=w,Aa(h,_.length>0?_:void 0)}Ia(h,function(v){pa(f,v)})}function Ju(f,h){var _=Su(fa(f,h)),w=wl(f.transactionQueueTree_,h);return function(f,h,_){for(var w=f.parent;null!==w;){if(h(w))return!0;w=w.parent}}(w,function(m){xu(f,m)}),xu(f,w),Du(w,function(m){xu(f,m)}),_}function xu(f,h){var _=Di(h);if(_){for(var w=[],m=[],v=-1,d=0;d<_.length;d++)3===_[d].status||(1===_[d].status?((0,G.hu)(v===d-1,"All SENT items should be at beginning of queue."),v=d,_[d].status=3,_[d].abortReason="set"):((0,G.hu)(0===_[d].status,"Unexpected transaction status in abort"),_[d].unwatcher(),m=m.concat(yo(f.serverSyncTree_,_[d].currentWriteId,!0)),_[d].onComplete&&w.push(_[d].onComplete.bind(null,new Error("set"),!1,null))));for(-1===v?Aa(h,void 0):_.length=v+1,No(f.eventQueue_,Su(h),m),d=0;d<w.length;d++)Xn(w[d])}}var Sl=function(f,h){var _=Vc(f),w=_.namespace;return"firebase.com"===_.domain&&In(_.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!w||"undefined"===w)&&"localhost"!==_.domain&&In("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),_.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Et("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new nn(_.host,_.secure,w,h,"ws"===_.scheme||"wss"===_.scheme,"",w!==_.subdomain),path:new mn(_.pathString)}},Vc=function(f){var h="",_="",w="",m="",v="",d=!0,b="https",M=443;if("string"==typeof f){var V=f.indexOf("//");V>=0&&(b=f.substring(0,V-1),f=f.substring(V+2));var J=f.indexOf("/");-1===J&&(J=f.length);var we=f.indexOf("?");-1===we&&(we=f.length),h=f.substring(0,Math.min(J,we)),J<we&&(m=function(f){for(var h="",_=f.split("/"),w=0;w<_.length;w++)if(_[w].length>0){var m=_[w];try{m=decodeURIComponent(m.replace(/\+/g," "))}catch(v){}h+="/"+m}return h}(f.substring(J,we)));var Oe=function(f){var h,_,w={};"?"===f.charAt(0)&&(f=f.substring(1));try{for(var m=(0,E.XA)(f.split("&")),v=m.next();!v.done;v=m.next()){var d=v.value;if(0!==d.length){var b=d.split("=");2===b.length?w[decodeURIComponent(b[0])]=decodeURIComponent(b[1]):Et("Invalid query segment '"+d+"' in query '"+f+"'")}}}catch(M){h={error:M}}finally{try{v&&!v.done&&(_=m.return)&&_.call(m)}finally{if(h)throw h.error}}return w}(f.substring(Math.min(f.length,we)));(V=h.indexOf(":"))>=0?(d="https"===b||"wss"===b,M=parseInt(h.substring(V+1),10)):V=h.length;var et=h.slice(0,V);if("localhost"===et.toLowerCase())_="localhost";else if(et.split(".").length<=2)_=et;else{var yt=h.indexOf(".");w=h.substring(0,yt).toLowerCase(),_=h.substring(yt+1),v=w}"ns"in Oe&&(v=Oe.ns)}return{host:h,port:M,domain:_,subdomain:w,secure:d,scheme:b,pathString:m,namespace:v}},Al=function(){function f(h,_,w,m){this.eventType=h,this.eventRegistration=_,this.snapshot=w,this.prevName=m}return f.prototype.getPath=function(){var h=this.snapshot.ref;return"value"===this.eventType?h._path:h.parent._path},f.prototype.getEventType=function(){return this.eventType},f.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},f.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,G.Pz)(this.snapshot.exportVal())},f}(),sc=function(){function f(h,_,w){this.eventRegistration=h,this.error=_,this.path=w}return f.prototype.getPath=function(){return this.path},f.prototype.getEventType=function(){return"cancel"},f.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},f.prototype.toString=function(){return this.path.toString()+":cancel"},f}(),Bc=function(){function f(h,_){this.snapshotCallback=h,this.cancelCallback=_}return f.prototype.onValue=function(h,_){this.snapshotCallback.call(null,h,_)},f.prototype.onCancel=function(h){return(0,G.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,h)},Object.defineProperty(f.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),f.prototype.matches=function(h){return this.snapshotCallback===h.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===h.snapshotCallback.userCallback&&this.snapshotCallback.context===h.snapshotCallback.context},f}(),jc=function(){function f(h,_){this._repo=h,this._path=_}return f.prototype.cancel=function(){var h=new G.BH;return yd(this._repo,this._path,h.wrapCallback(function(){})),h.promise},f.prototype.remove=function(){Vs("OnDisconnect.remove",this._path);var h=new G.BH;return oc(this._repo,this._path,null,h.wrapCallback(function(){})),h.promise},f.prototype.set=function(h){Vs("OnDisconnect.set",this._path),us("OnDisconnect.set",h,this._path,!1);var _=new G.BH;return oc(this._repo,this._path,h,_.wrapCallback(function(){})),_.promise},f.prototype.setWithPriority=function(h,_){Vs("OnDisconnect.setWithPriority",this._path),us("OnDisconnect.setWithPriority",h,this._path,!1),ou("OnDisconnect.setWithPriority",_,!1);var w=new G.BH;return function(f,h,_,w,m){var v=tt(_,w);f.server_.onDisconnectPut(h.toString(),v.val(!0),function(d,b){"ok"===d&&me(f.onDisconnect_,h,v),ls(0,m,d,b)})}(this._repo,this._path,h,_,w.wrapCallback(function(){})),w.promise},f.prototype.update=function(h){Vs("OnDisconnect.update",this._path),ca("OnDisconnect.update",h,this._path,!1);var _=new G.BH;return function(f,h,_,w){if((0,G.xb)(_))return ut("onDisconnect().update() called with empty data.  Don't do anything."),void ls(0,w,"ok",void 0);f.server_.onDisconnectMerge(h.toString(),_,function(m,v){"ok"===m&&Bt(_,function(d,b){var M=tt(b);me(f.onDisconnect_,ar(h,d),M)}),ls(0,w,m,v)})}(this._repo,this._path,h,_.wrapCallback(function(){})),_.promise},f}(),Zo=function(){function f(h,_,w,m){this._repo=h,this._path=_,this._queryParams=w,this._orderByCalled=m}return Object.defineProperty(f.prototype,"key",{get:function(){return Bn(this._path)?null:Ii(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"ref",{get:function(){return new Yr(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"_queryIdentifier",{get:function(){var h=A(this._queryParams),_=Sn(h);return"{}"===_?"default":_},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"_queryObject",{get:function(){return A(this._queryParams)},enumerable:!1,configurable:!0}),f.prototype.isEqual=function(h){if(!((h=(0,G.m9)(h))instanceof f))return!1;var _=this._repo===h._repo,w=Ui(this._path,h._path);return _&&w&&this._queryIdentifier===h._queryIdentifier},f.prototype.toJSON=function(){return this.toString()},f.prototype.toString=function(){return this._repo.toString()+function(f){for(var h="",_=f.pieceNum_;_<f.pieces_.length;_++)""!==f.pieces_[_]&&(h+="/"+encodeURIComponent(String(f.pieces_[_])));return h||"/"}(this._path)},f}();function Ml(f,h){if(!0===f._orderByCalled)throw new Error(h+": You can't combine multiple orderBy calls.")}function Ra(f){var h=null,_=null;if(f.hasStart()&&(h=f.getIndexStartValue()),f.hasEnd()&&(_=f.getIndexEndValue()),f.getIndex()===ui){var w="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",m="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(f.hasStart()){if(f.getIndexStartName()!==nt)throw new Error(w);if("string"!=typeof h)throw new Error(m)}if(f.hasEnd()){if(f.getIndexEndName()!==vt)throw new Error(w);if("string"!=typeof _)throw new Error(m)}}else if(f.getIndex()===fr){if(null!=h&&!Us(h)||null!=_&&!Us(_))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,G.hu)(f.getIndex()instanceof H||f.getIndex()===L,"unknown index type."),null!=h&&"object"==typeof h||null!=_&&"object"==typeof _)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ka(f){if(f.hasStart()&&f.hasEnd()&&f.hasLimit()&&!f.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Yr=function(f){function h(_,w){return f.call(this,_,w,new mu,!1)||this}return(0,E.ZT)(h,f),Object.defineProperty(h.prototype,"parent",{get:function(){var _=Oi(this._path);return null===_?null:new h(this._repo,_)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"root",{get:function(){for(var _=this;null!==_.parent;)_=_.parent;return _},enumerable:!1,configurable:!0}),h}(Zo),Hc=function(){function f(h,_,w){this._node=h,this.ref=_,this._index=w}return Object.defineProperty(f.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),f.prototype.child=function(h){var _=new mn(h),w=Fa(this.ref,h);return new f(this._node.getChild(_),w,fr)},f.prototype.exists=function(){return!this._node.isEmpty()},f.prototype.exportVal=function(){return this._node.val(!0)},f.prototype.forEach=function(h){var _=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(m,v){return h(new f(v,Fa(_.ref,m),fr))})},f.prototype.hasChild=function(h){var _=new mn(h);return!this._node.getChild(_).isEmpty()},f.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},f.prototype.toJSON=function(){return this.exportVal()},f.prototype.val=function(){return this._node.val()},f}();function Gc(f,h){return(f=(0,G.m9)(f))._checkNotDeleted("ref"),void 0!==h?Fa(f._root,h):f._root}function ac(f,h){(f=(0,G.m9)(f))._checkNotDeleted("refFromURL");var _=Sl(h,f._repo.repoInfo_.nodeAdmin);_d("refFromURL",_);var w=_.repoInfo;return!f._repo.repoInfo_.isCustomHost()&&w.host!==f._repo.repoInfo_.host&&In("refFromURL: Host name does not match the current database: (found "+w.host+" but expected "+f._repo.repoInfo_.host+")"),Gc(f,_.path.toString())}function Fa(f,h){return null===er((f=(0,G.m9)(f))._path)?((_=h)&&(_=_.replace(/^\/*\.info(\/|$)/,"/")),Ts("child","path",_,!1)):Ts("child","path",h,!1),new Yr(f._repo,ar(f._path,h));var _}function Ds(f,h){f=(0,G.m9)(f),Vs("push",f._path),us("push",h,f._path,!0);var d,_=tc(f._repo),w=pr(_),m=Fa(f,w),v=Fa(f,w);return d=null!=h?Il(v,h).then(function(){return v}):Promise.resolve(v),m.then=d.then.bind(d),m.catch=d.then.bind(d,void 0),m}function gh(f){return Vs("remove",f._path),Il(f,null)}function Il(f,h){f=(0,G.m9)(f),Vs("set",f._path),us("set",h,f._path,!1);var _=new G.BH;return Mu(f._repo,f._path,h,null,_.wrapCallback(function(){})),_.promise}function Na(f,h){f=(0,G.m9)(f),Vs("setPriority",f._path),ou("setPriority",h,!1);var _=new G.BH;return Mu(f._repo,ar(f._path,".priority"),h,null,_.wrapCallback(function(){})),_.promise}function Sd(f,h,_){if(Vs("setWithPriority",f._path),us("setWithPriority",h,f._path,!1),ou("setWithPriority",_,!1),".length"===f.key||".keys"===f.key)throw"setWithPriority failed: "+f.key+" is a read-only object.";var w=new G.BH;return Mu(f._repo,f._path,h,_,w.wrapCallback(function(){})),w.promise}function Lo(f,h){ca("update",h,f._path,!1);var _=new G.BH;return function(f,h,_,w){Ou(f,"update",{path:h.toString(),value:_});var m=!0,v=Oa(f),d={};if(Bt(_,function(V,J){m=!1,d[V]=Xl(ar(h,V),tt(J),f.serverSyncTree_,v)}),m)ut("update() called with empty data.  Don't do anything."),ls(0,w,"ok",void 0);else{var b=rc(f),M=function(f,h,_,w){!function(f,h,_,w){(0,G.hu)(w>f.lastWriteId,"Stacking an older merge on top of newer ones"),f.allWrites.push({path:h,children:_,writeId:w,visible:!0}),f.visibleWrites=qi(f.visibleWrites,h,_),f.lastWriteId=w}(f.pendingWriteTree_,h,_,w);var m=Zr.fromObject(_);return Ns(f,new Ro({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},h,m))}(f.serverSyncTree_,h,d,b);da(f.eventQueue_,M),f.server_.merge(h.toString(),_,function(V,J){var we="ok"===V;we||Et("update at "+h+" failed: "+V);var Oe=yo(f.serverSyncTree_,b,!we),et=Oe.length>0?Pa(f,h):h;No(f.eventQueue_,et,Oe),ls(0,w,V,J)}),Bt(_,function(V){var J=Ju(f,ar(h,V));Pa(f,J)}),No(f.eventQueue_,h,[])}}(f._repo,f._path,h,_.wrapCallback(function(){})),_.promise}function au(f){return function(f,h){var _=function(f,h){var _=h._path,w=null;f.syncPointTree_.foreachOnPath(_,function(V,J){var we=zr(V,_);w=w||Da(J,we)});var m=f.syncPointTree_.get(_);m?w=w||Da(m,un()):(m=new Jn,f.syncPointTree_=f.syncPointTree_.set(_,m));var v=null!=w,d=v?new ci(w,!0,!1):null;return function(f){return Cn(f.viewCache_)}(Mc(m,h,zi(f.pendingWriteTree_,h._path),v?d.getNode():N.EMPTY_NODE,v))}(f.serverSyncTree_,h);return null!=_?Promise.resolve(_):f.server_.get(h).then(function(w){var m=tt(w).withIndex(h._queryParams.getIndex()),v=Ys(f.serverSyncTree_,h._path,m);return Qu(f.eventQueue_,h._path,v),Promise.resolve(m)},function(w){return Ou(f,"get for query "+(0,G.Pz)(h)+" failed: "+w),Promise.reject(new Error(w))})}((f=(0,G.m9)(f))._repo,f).then(function(h){return new Hc(h,new Yr(f._repo,f._path),f._queryParams.getIndex())})}var hi=function(){function f(h){this.callbackContext=h}return f.prototype.respondsTo=function(h){return"value"===h},f.prototype.createEvent=function(h,_){var w=_._queryParams.getIndex();return new Al("value",this,new Hc(h.snapshotNode,new Yr(_._repo,_._path),w))},f.prototype.getEventRunner=function(h){var _=this;return"cancel"===h.getEventType()?function(){return _.callbackContext.onCancel(h.error)}:function(){return _.callbackContext.onValue(h.snapshot,null)}},f.prototype.createCancelEvent=function(h,_){return this.callbackContext.hasCancelCallback?new sc(this,h,_):null},f.prototype.matches=function(h){return h instanceof f&&(!h.callbackContext||!this.callbackContext||h.callbackContext.matches(this.callbackContext))},f.prototype.hasAnyCallback=function(){return null!==this.callbackContext},f}(),fi=function(){function f(h,_){this.eventType=h,this.callbackContext=_}return f.prototype.respondsTo=function(h){var _="children_added"===h?"child_added":h;return this.eventType===("children_removed"===_?"child_removed":_)},f.prototype.createCancelEvent=function(h,_){return this.callbackContext.hasCancelCallback?new sc(this,h,_):null},f.prototype.createEvent=function(h,_){(0,G.hu)(null!=h.childName,"Child events should have a childName.");var w=Fa(new Yr(_._repo,_._path),h.childName),m=_._queryParams.getIndex();return new Al(h.type,this,new Hc(h.snapshotNode,w,m),h.prevName)},f.prototype.getEventRunner=function(h){var _=this;return"cancel"===h.getEventType()?function(){return _.callbackContext.onCancel(h.error)}:function(){return _.callbackContext.onValue(h.snapshot,h.prevName)}},f.prototype.matches=function(h){return h instanceof f&&this.eventType===h.eventType&&(!this.callbackContext||!h.callbackContext||this.callbackContext.matches(h.callbackContext))},f.prototype.hasAnyCallback=function(){return!!this.callbackContext},f}();function uu(f,h,_,w,m){var v;if("object"==typeof w&&(v=void 0,m=w),"function"==typeof w&&(v=w),m&&m.onlyOnce){var d=_,b=function(J,we){Cd(f._repo,f,V),d(J,we)};b.userCallback=_.userCallback,b.context=_.context,_=b}var M=new Bc(_,v||void 0),V="value"===h?new hi(M):new fi(h,M);return function(f,h,_){var w;w=".info"===er(h._path)?uh(f.infoSyncTree_,h,_):uh(f.serverSyncTree_,h,_),Qu(f.eventQueue_,h._path,w)}(f._repo,f,V),function(){return Cd(f._repo,f,V)}}function uc(f,h,_,w){return uu(f,"value",h,_,w)}function Wi(f,h,_,w){return uu(f,"child_added",h,_,w)}function Ni(f,h,_,w){return uu(f,"child_changed",h,_,w)}function ao(f,h,_,w){return uu(f,"child_moved",h,_,w)}function wo(f,h,_,w){return uu(f,"child_removed",h,_,w)}function cs(f,h,_){var w=null,m=_?new Bc(_):null;"value"===h?w=new hi(m):h&&(w=new fi(h,m)),Cd(f._repo,f,w)}var qo=function(){},Bs=function(f){function h(_,w){var m=f.call(this)||this;return m._value=_,m._key=w,m}return(0,E.ZT)(h,f),h.prototype._apply=function(_){us("endAt",this._value,_._path,!0);var w=xs(_._queryParams,this._value,this._key);if(ka(w),Ra(w),_._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Zo(_._repo,_._path,w,_._orderByCalled)},h}(qo);function Xu(f,h){return su("endAt","key",h,!0),new Bs(f,h)}var Pu=function(f){function h(_,w){var m=f.call(this)||this;return m._value=_,m._key=w,m}return(0,E.ZT)(h,f),h.prototype._apply=function(_){us("endBefore",this._value,_._path,!1);var w=function(f,h,_){var m;return f.index_===ui?("string"==typeof h&&(h=_r(h)),m=xs(f,h,_)):m=xs(f,h,null==_?nt:_r(_)),m.endBeforeSet_=!0,m}(_._queryParams,this._value,this._key);if(ka(w),Ra(w),_._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Zo(_._repo,_._path,w,_._orderByCalled)},h}(qo);function mh(f,h){return su("endBefore","key",h,!0),new Pu(f,h)}var Zc=function(f){function h(_,w){var m=f.call(this)||this;return m._value=_,m._key=w,m}return(0,E.ZT)(h,f),h.prototype._apply=function(_){us("startAt",this._value,_._path,!0);var w=bs(_._queryParams,this._value,this._key);if(ka(w),Ra(w),_._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Zo(_._repo,_._path,w,_._orderByCalled)},h}(qo);function Ad(f,h){return void 0===f&&(f=null),su("startAt","key",h,!0),new Zc(f,h)}var es=function(f){function h(_,w){var m=f.call(this)||this;return m._value=_,m._key=w,m}return(0,E.ZT)(h,f),h.prototype._apply=function(_){us("startAfter",this._value,_._path,!1);var w=function(f,h,_){var w;return f.index_===ui?("string"==typeof h&&(h=Hr(h)),w=bs(f,h,_)):w=bs(f,h,null==_?vt:Hr(_)),w.startAfterSet_=!0,w}(_._queryParams,this._value,this._key);if(ka(w),Ra(w),_._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Zo(_._repo,_._path,w,_._orderByCalled)},h}(qo);function zt(f,h){return su("startAfter","key",h,!0),new es(f,h)}var qc=function(f){function h(_){var w=f.call(this)||this;return w._limit=_,w}return(0,E.ZT)(h,f),h.prototype._apply=function(_){if(_._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Zo(_._repo,_._path,function(f,h){var _=f.copy();return _.limitSet_=!0,_.limit_=h,_.viewFrom_="l",_}(_._queryParams,this._limit),_._orderByCalled)},h}(qo);function lu(f){if("number"!=typeof f||Math.floor(f)!==f||f<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new qc(f)}var Md=function(f){function h(_){var w=f.call(this)||this;return w._limit=_,w}return(0,E.ZT)(h,f),h.prototype._apply=function(_){if(_._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Zo(_._repo,_._path,function(f,h){var _=f.copy();return _.limitSet_=!0,_.limit_=h,_.viewFrom_="r",_}(_._queryParams,this._limit),_._orderByCalled)},h}(qo);function Ol(f){if("number"!=typeof f||Math.floor(f)!==f||f<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Md(f)}var el=function(f){function h(_){var w=f.call(this)||this;return w._path=_,w}return(0,E.ZT)(h,f),h.prototype._apply=function(_){Ml(_,"orderByChild");var w=new mn(this._path);if(Bn(w))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var m=new H(w),v=Qo(_._queryParams,m);return Ra(v),new Zo(_._repo,_._path,v,!0)},h}(qo);function Id(f){if("$key"===f)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===f)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===f)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ts("orderByChild","path",f,!1),new el(f)}var ga=function(f){function h(){return null!==f&&f.apply(this,arguments)||this}return(0,E.ZT)(h,f),h.prototype._apply=function(_){Ml(_,"orderByKey");var w=Qo(_._queryParams,ui);return Ra(w),new Zo(_._repo,_._path,w,!0)},h}(qo);function zc(){return new ga}var Od=function(f){function h(){return null!==f&&f.apply(this,arguments)||this}return(0,E.ZT)(h,f),h.prototype._apply=function(_){Ml(_,"orderByPriority");var w=Qo(_._queryParams,fr);return Ra(w),new Zo(_._repo,_._path,w,!0)},h}(qo);function tl(){return new Od}var Ss=function(f){function h(){return null!==f&&f.apply(this,arguments)||this}return(0,E.ZT)(h,f),h.prototype._apply=function(_){Ml(_,"orderByValue");var w=Qo(_._queryParams,L);return Ra(w),new Zo(_._repo,_._path,w,!0)},h}(qo);function lc(){return new Ss}var xl=function(f){function h(_,w){var m=f.call(this)||this;return m._value=_,m._key=w,m}return(0,E.ZT)(h,f),h.prototype._apply=function(_){if(us("equalTo",this._value,_._path,!1),_._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(_._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Bs(this._value,this._key)._apply(new Zc(this._value,this._key)._apply(_))},h}(qo);function La(f,h){return su("equalTo","key",h,!0),new xl(f,h)}function js(f){for(var h,_,w=[],m=1;m<arguments.length;m++)w[m-1]=arguments[m];var v=(0,G.m9)(f);try{for(var d=(0,E.XA)(w),b=d.next();!b.done;b=d.next()){var M=b.value;v=M._apply(v)}}catch(V){h={error:V}}finally{try{b&&!b.done&&(_=d.return)&&_.call(d)}finally{if(h)throw h.error}}return v}(function(f){(0,G.hu)(!oa,"__referenceConstructor has already been defined"),oa=f})(Yr),function(f){(0,G.hu)(!yu,"__referenceConstructor has already been defined"),yu=f}(Yr);var ts={},cu=!1;function Ru(f,h,_,w,m){var v=w||f.options.databaseURL;void 0===v&&(f.options.projectId||In("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ut("Using default host for project ",f.options.projectId),v=f.options.projectId+"-default-rtdb.firebaseio.com");var M,d=Sl(v,m),b=d.repoInfo,V=void 0;"undefined"!=typeof process&&(V=process.env.FIREBASE_DATABASE_EMULATOR_HOST),V?(M=!0,b=(d=Sl(v="http://"+V+"?ns="+b.namespace,m)).repoInfo):M=!d.repoInfo.secure;var J=m&&M?new Kt(Kt.OWNER):new vn(f.name,f.options,h);_d("Invalid Firebase Database URL",d),Bn(d.path)||In("Database URL must point to the root of a Firebase Database (not including a child path).");var we=function(f,h,_,w){var m=ts[h.name];m||(ts[h.name]=m={});var v=m[f.toURLString()];return v&&In("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),v=new ha(f,cu,_,w),m[f.toURLString()]=v,v}(b,f,J,new Si(f.name,_));return new Wc(we,f)}var Wc=function(){function f(h,_){this._repoInternal=h,this.app=_,this.type="database",this._instanceStarted=!1}return Object.defineProperty(f.prototype,"_repo",{get:function(){return this._instanceStarted||(function(f,h,_){if(f.stats_=Ut(f.repoInfo_),f.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)f.server_=new I(f.repoInfo_,function(w,m,v,d){Co(f,w,m,v,d)},f.authTokenProvider_,f.appCheckProvider_),setTimeout(function(){return xa(f,!0)},0);else{if(null!=_){if("object"!=typeof _)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,G.Pz)(_)}catch(w){throw new Error("Invalid authOverride provided: "+w)}}f.persistentConnection_=new Ai(f.repoInfo_,h,function(w,m,v,d){Co(f,w,m,v,d)},function(w){xa(f,w)},function(w){!function(f,h){Bt(h,function(_,w){nc(f,_,w)})}(f,w)},f.authTokenProvider_,f.appCheckProvider_,_),f.server_=f.persistentConnection_}f.authTokenProvider_.addTokenChangeListener(function(w){f.server_.refreshAuthToken(w)}),f.appCheckProvider_.addTokenChangeListener(function(w){f.server_.refreshAppCheckToken(w.token)}),f.statsReporter_=function(f,h){var _=f.toString();return At[_]||(At[_]=h()),At[_]}(f.repoInfo_,function(){return new Rr(f.stats_,f.server_)}),f.infoData_=new B,f.infoSyncTree_=new so({startListening:function(w,m,v,d){var b=[],M=f.infoData_.getNode(w._path);return M.isEmpty()||(b=Ys(f.infoSyncTree_,w._path,M),setTimeout(function(){d("ok")},0)),b},stopListening:function(){}}),nc(f,"connected",!1),f.serverSyncTree_=new so({startListening:function(w,m,v,d){return f.server_.listen(w,v,m,function(b,M){var V=d(b,M);No(f.eventQueue_,w._path,V)}),[]},stopListening:function(w,m){f.server_.unlisten(w,m)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Yr(this._repo,un())),this._rootInternal},enumerable:!1,configurable:!0}),f.prototype._delete=function(){return null!==this._rootInternal&&(function(f,h){var _=ts[h];(!_||_[f.key]!==f)&&In("Database "+h+"("+f.repoInfo_+") has already been deleted."),Tl(f),delete _[f.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},f.prototype._checkNotDeleted=function(h){null===this._rootInternal&&In("Cannot call "+h+" on a deleted database.")},f}();function jh(f){(f=(0,G.m9)(f))._checkNotDeleted("goOffline"),Tl(f._repo)}function Fu(f){(f=(0,G.m9)(f))._checkNotDeleted("goOnline"),function(f){f.persistentConnection_&&f.persistentConnection_.resume(Go)}(f._repo)}var Js={".sv":"timestamp"},Pd=function(){function f(h,_){this.committed=h,this.snapshot=_}return f.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},f}();function _h(f,h,_){var w;if(f=(0,G.m9)(f),Vs("Reference.transaction",f._path),".length"===f.key||".keys"===f.key)throw"Reference.transaction failed: "+f.key+" is a read-only object.";var m=null===(w=null==_?void 0:_.applyLocally)||void 0===w||w,v=new G.BH,b=uc(f,function(){});return function(f,h,_,w,m,v){Ou(f,"transaction on "+h);var d={path:h,update:_,onComplete:w,status:null,order:We(),applyLocally:v,retryCount:0,unwatcher:m,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},b=Qs(f,h,void 0);d.currentInputSnapshot=b;var M=d.update(b.val());if(void 0===M)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{El("transaction failed: Data returned ",M,d.path),d.status=0;var V=wl(f.transactionQueueTree_,h),J=Di(V)||[];J.push(d),Aa(V,J);var we=void 0;"object"==typeof M&&null!==M&&(0,G.r3)(M,".priority")?(we=(0,G.DV)(M,".priority"),(0,G.hu)(Us(we),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):we=(yl(f.serverSyncTree_,h)||N.EMPTY_NODE).getPriority().val();var et=Oa(f),yt=tt(M,we),$t=Eu(yt,b,et);d.currentOutputSnapshotRaw=yt,d.currentOutputSnapshotResolved=$t,d.currentWriteId=rc(f);var gn=Ql(f.serverSyncTree_,h,$t,d.currentWriteId,d.applyLocally);No(f.eventQueue_,h,gn),Fi(f,f.transactionQueueTree_)}}(f._repo,f._path,h,function(M,V,J){var we=null;M?v.reject(M):(we=new Hc(J,new Yr(f._repo,f._path),fr),v.resolve(new Pd(V,we)))},b,m),v.promise}var Xs=function(){function f(h){this._delegate=h}return f.prototype.cancel=function(h){(0,G.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,G.Wj)("OnDisconnect.cancel","onComplete",h,!0);var _=this._delegate.cancel();return h&&_.then(function(){return h(null)},function(w){return h(w)}),_},f.prototype.remove=function(h){(0,G.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,G.Wj)("OnDisconnect.remove","onComplete",h,!0);var _=this._delegate.remove();return h&&_.then(function(){return h(null)},function(w){return h(w)}),_},f.prototype.set=function(h,_){(0,G.Dv)("OnDisconnect.set",1,2,arguments.length),(0,G.Wj)("OnDisconnect.set","onComplete",_,!0);var w=this._delegate.set(h);return _&&w.then(function(){return _(null)},function(m){return _(m)}),w},f.prototype.setWithPriority=function(h,_,w){(0,G.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,G.Wj)("OnDisconnect.setWithPriority","onComplete",w,!0);var m=this._delegate.setWithPriority(h,_);return w&&m.then(function(){return w(null)},function(v){return w(v)}),m},f.prototype.update=function(h,_){if((0,G.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(h)){for(var w={},m=0;m<h.length;++m)w[""+m]=h[m];h=w,Et("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,G.Wj)("OnDisconnect.update","onComplete",_,!0);var v=this._delegate.update(h);return _&&v.then(function(){return _(null)},function(d){return _(d)}),v},f}(),Hs=function(){function f(h,_){this.committed=h,this.snapshot=_}return f.prototype.toJSON=function(){return(0,G.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},f}(),du=function(){function f(h,_){this._database=h,this._delegate=_}return f.prototype.val=function(){return(0,G.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},f.prototype.exportVal=function(){return(0,G.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},f.prototype.toJSON=function(){return(0,G.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},f.prototype.exists=function(){return(0,G.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},f.prototype.child=function(h){return(0,G.Dv)("DataSnapshot.child",0,1,arguments.length),h=String(h),Ts("DataSnapshot.child","path",h,!1),new f(this._database,this._delegate.child(h))},f.prototype.hasChild=function(h){return(0,G.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Ts("DataSnapshot.hasChild","path",h,!1),this._delegate.hasChild(h)},f.prototype.getPriority=function(){return(0,G.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},f.prototype.forEach=function(h){var _=this;return(0,G.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,G.Wj)("DataSnapshot.forEach","action",h,!1),this._delegate.forEach(function(w){return h(new f(_._database,w))})},f.prototype.hasChildren=function(){return(0,G.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(f.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),f.prototype.numChildren=function(){return(0,G.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},f.prototype.getRef=function(){return(0,G.Dv)("DataSnapshot.ref",0,0,arguments.length),new hu(this._database,this._delegate.ref)},Object.defineProperty(f.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),f}(),Rl=function(){function f(h,_){this.database=h,this._delegate=_}return f.prototype.on=function(h,_,w,m){var d,v=this;(0,G.Dv)("Query.on",2,4,arguments.length),(0,G.Wj)("Query.on","callback",_,!1);var b=f.getCancelAndContextArgs_("Query.on",w,m),M=function(J,we){_.call(b.context,new du(v.database,J),we)};M.userCallback=_,M.context=b.context;var V=null===(d=b.cancel)||void 0===d?void 0:d.bind(b.context);switch(h){case"value":return uc(this._delegate,M,V),_;case"child_added":return Wi(this._delegate,M,V),_;case"child_removed":return wo(this._delegate,M,V),_;case"child_changed":return Ni(this._delegate,M,V),_;case"child_moved":return ao(this._delegate,M,V),_;default:throw new Error((0,G.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},f.prototype.off=function(h,_,w){if((0,G.Dv)("Query.off",0,3,arguments.length),ec("Query.off",h,!0),(0,G.Wj)("Query.off","callback",_,!0),(0,G.lb)("Query.off","context",w,!0),_){var m=function(){};m.userCallback=_,m.context=w,cs(this._delegate,h,m)}else cs(this._delegate,h)},f.prototype.get=function(){var h=this;return au(this._delegate).then(function(_){return new du(h.database,_)})},f.prototype.once=function(h,_,w,m){var v=this;(0,G.Dv)("Query.once",1,4,arguments.length),(0,G.Wj)("Query.once","callback",_,!0);var d=f.getCancelAndContextArgs_("Query.once",w,m),b=new G.BH,M=function(J,we){var Oe=new du(v.database,J);_&&_.call(d.context,Oe,we),b.resolve(Oe)};M.userCallback=_,M.context=d.context;var V=function(J){d.cancel&&d.cancel.call(d.context,J),b.reject(J)};switch(h){case"value":uc(this._delegate,M,V,{onlyOnce:!0});break;case"child_added":Wi(this._delegate,M,V,{onlyOnce:!0});break;case"child_removed":wo(this._delegate,M,V,{onlyOnce:!0});break;case"child_changed":Ni(this._delegate,M,V,{onlyOnce:!0});break;case"child_moved":ao(this._delegate,M,V,{onlyOnce:!0});break;default:throw new Error((0,G.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return b.promise},f.prototype.limitToFirst=function(h){return(0,G.Dv)("Query.limitToFirst",1,1,arguments.length),new f(this.database,js(this._delegate,lu(h)))},f.prototype.limitToLast=function(h){return(0,G.Dv)("Query.limitToLast",1,1,arguments.length),new f(this.database,js(this._delegate,Ol(h)))},f.prototype.orderByChild=function(h){return(0,G.Dv)("Query.orderByChild",1,1,arguments.length),new f(this.database,js(this._delegate,Id(h)))},f.prototype.orderByKey=function(){return(0,G.Dv)("Query.orderByKey",0,0,arguments.length),new f(this.database,js(this._delegate,zc()))},f.prototype.orderByPriority=function(){return(0,G.Dv)("Query.orderByPriority",0,0,arguments.length),new f(this.database,js(this._delegate,tl()))},f.prototype.orderByValue=function(){return(0,G.Dv)("Query.orderByValue",0,0,arguments.length),new f(this.database,js(this._delegate,lc()))},f.prototype.startAt=function(h,_){return void 0===h&&(h=null),(0,G.Dv)("Query.startAt",0,2,arguments.length),new f(this.database,js(this._delegate,Ad(h,_)))},f.prototype.startAfter=function(h,_){return void 0===h&&(h=null),(0,G.Dv)("Query.startAfter",0,2,arguments.length),new f(this.database,js(this._delegate,zt(h,_)))},f.prototype.endAt=function(h,_){return void 0===h&&(h=null),(0,G.Dv)("Query.endAt",0,2,arguments.length),new f(this.database,js(this._delegate,Xu(h,_)))},f.prototype.endBefore=function(h,_){return void 0===h&&(h=null),(0,G.Dv)("Query.endBefore",0,2,arguments.length),new f(this.database,js(this._delegate,mh(h,_)))},f.prototype.equalTo=function(h,_){return(0,G.Dv)("Query.equalTo",1,2,arguments.length),new f(this.database,js(this._delegate,La(h,_)))},f.prototype.toString=function(){return(0,G.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},f.prototype.toJSON=function(){return(0,G.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},f.prototype.isEqual=function(h){if((0,G.Dv)("Query.isEqual",1,1,arguments.length),!(h instanceof f)){var _="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(_)}return this._delegate.isEqual(h._delegate)},f.getCancelAndContextArgs_=function(h,_,w){var m={cancel:void 0,context:void 0};if(_&&w)m.cancel=_,(0,G.Wj)(h,"cancel",m.cancel,!0),m.context=w,(0,G.lb)(h,"context",m.context,!0);else if(_)if("object"==typeof _&&null!==_)m.context=_;else{if("function"!=typeof _)throw new Error((0,G.gK)(h,"cancelOrContext")+" must either be a cancel callback or a context object.");m.cancel=_}return m},Object.defineProperty(f.prototype,"ref",{get:function(){return new hu(this.database,new Yr(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),f}(),hu=function(f){function h(_,w){var m=f.call(this,_,new Zo(w._repo,w._path,new mu,!1))||this;return m.database=_,m._delegate=w,m}return(0,E.ZT)(h,f),h.prototype.getKey=function(){return(0,G.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},h.prototype.child=function(_){return(0,G.Dv)("Reference.child",1,1,arguments.length),"number"==typeof _&&(_=String(_)),new h(this.database,Fa(this._delegate,_))},h.prototype.getParent=function(){(0,G.Dv)("Reference.parent",0,0,arguments.length);var _=this._delegate.parent;return _?new h(this.database,_):null},h.prototype.getRoot=function(){return(0,G.Dv)("Reference.root",0,0,arguments.length),new h(this.database,this._delegate.root)},h.prototype.set=function(_,w){(0,G.Dv)("Reference.set",1,2,arguments.length),(0,G.Wj)("Reference.set","onComplete",w,!0);var m=Il(this._delegate,_);return w&&m.then(function(){return w(null)},function(v){return w(v)}),m},h.prototype.update=function(_,w){if((0,G.Dv)("Reference.update",1,2,arguments.length),Array.isArray(_)){for(var m={},v=0;v<_.length;++v)m[""+v]=_[v];_=m,Et("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Vs("Reference.update",this._delegate._path),(0,G.Wj)("Reference.update","onComplete",w,!0);var d=Lo(this._delegate,_);return w&&d.then(function(){return w(null)},function(b){return w(b)}),d},h.prototype.setWithPriority=function(_,w,m){(0,G.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,G.Wj)("Reference.setWithPriority","onComplete",m,!0);var v=Sd(this._delegate,_,w);return m&&v.then(function(){return m(null)},function(d){return m(d)}),v},h.prototype.remove=function(_){(0,G.Dv)("Reference.remove",0,1,arguments.length),(0,G.Wj)("Reference.remove","onComplete",_,!0);var w=gh(this._delegate);return _&&w.then(function(){return _(null)},function(m){return _(m)}),w},h.prototype.transaction=function(_,w,m){var v=this;(0,G.Dv)("Reference.transaction",1,3,arguments.length),(0,G.Wj)("Reference.transaction","transactionUpdate",_,!1),(0,G.Wj)("Reference.transaction","onComplete",w,!0),bo("Reference.transaction","applyLocally",m,!0);var d=_h(this._delegate,_,{applyLocally:m}).then(function(b){return new Hs(b.committed,new du(v.database,b.snapshot))});return w&&d.then(function(b){return w(null,b.committed,b.snapshot)},function(b){return w(b,!1,null)}),d},h.prototype.setPriority=function(_,w){(0,G.Dv)("Reference.setPriority",1,2,arguments.length),(0,G.Wj)("Reference.setPriority","onComplete",w,!0);var m=Na(this._delegate,_);return w&&m.then(function(){return w(null)},function(v){return w(v)}),m},h.prototype.push=function(_,w){var m=this;(0,G.Dv)("Reference.push",0,2,arguments.length),(0,G.Wj)("Reference.push","onComplete",w,!0);var v=Ds(this._delegate,_),d=v.then(function(M){return new h(m.database,M)});w&&d.then(function(){return w(null)},function(M){return w(M)});var b=new h(this.database,v);return b.then=d.then.bind(d),b.catch=d.catch.bind(d,void 0),b},h.prototype.onDisconnect=function(){return Vs("Reference.onDisconnect",this._delegate._path),new Xs(new jc(this._delegate._repo,this._delegate._path))},Object.defineProperty(h.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),h}(Rl),Ua=function(){function f(h,_){var w=this;this._delegate=h,this.app=_,this.INTERNAL={delete:function(){return w._delegate._delete()}}}return f.prototype.useEmulator=function(h,_,w){void 0===w&&(w={}),function(f,h,_,w){void 0===w&&(w={}),(f=(0,G.m9)(f))._checkNotDeleted("useEmulator"),f._instanceStarted&&In("Cannot call useEmulator() after instance has already been initialized.");var m=f._repoInternal,v=void 0;if(m.repoInfo_.nodeAdmin)w.mockUserToken&&In('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),v=new Kt(Kt.OWNER);else if(w.mockUserToken){var d="string"==typeof w.mockUserToken?w.mockUserToken:(0,G.Sg)(w.mockUserToken,f.app.options.projectId);v=new Kt(d)}!function(f,h,_,w){f.repoInfo_=new nn(h+":"+_,!1,f.repoInfo_.namespace,f.repoInfo_.webSocketOnly,f.repoInfo_.nodeAdmin,f.repoInfo_.persistenceKey,f.repoInfo_.includeNamespaceInQueryParams),w&&(f.authTokenProvider_=w)}(m,h,_,v)}(this._delegate,h,_,w)},f.prototype.ref=function(h){if((0,G.Dv)("database.ref",0,1,arguments.length),h instanceof hu){var _=ac(this._delegate,h.toString());return new hu(this,_)}return _=Gc(this._delegate,h),new hu(this,_)},f.prototype.refFromURL=function(h){var _="database.refFromURL";(0,G.Dv)(_,1,1,arguments.length);var w=ac(this._delegate,h);return new hu(this,w)},f.prototype.goOffline=function(){return(0,G.Dv)("database.goOffline",0,0,arguments.length),jh(this._delegate)},f.prototype.goOnline=function(){return(0,G.Dv)("database.goOnline",0,0,arguments.length),Fu(this._delegate)},f.ServerValue={TIMESTAMP:Js,increment:function(h){return function(f){return{".sv":{increment:f}}}(h)}},f}(),Yc=Object.freeze({__proto__:null,forceLongPolling:function(){bn.forceDisallow(),Qi.forceAllow()},forceWebSockets:function(){Qi.forceDisallow()},isWebSocketsAvailable:function(){return bn.isAvailable()},setSecurityDebugCallback:function(f,h){f._delegate._repo.persistentConnection_.securityDebugCallback_=h},stats:function(f,h){!function(f,h){if(void 0===h&&(h=!1),"undefined"!=typeof console){var _;h?(f.statsListener_||(f.statsListener_=new mt(f.stats_)),_=f.statsListener_.get()):_=f.stats_.get();var w=Object.keys(_).reduce(function(m,v){return Math.max(v.length,m)},0);Bt(_,function(m,v){for(var d=m,b=m.length;b<w+2;b++)d+=" ";console.log(d+v)})}}(f._delegate._repo,h)},statsIncrementCounter:function(f,h){!function(f,h){f.stats_.incrementCounter(h),function(f,h){f.statsToReport_[h]=!0}(f.statsReporter_,h)}(f._delegate._repo,h)},dataUpdateCount:function(f){return f._delegate._repo.dataUpdateCount},interceptServerData:function(f,h){return function(f,h){f.interceptServerDataCallback_=h}(f._delegate._repo,h)},initStandalone:function(f){var h=f.app,_=f.url,m=f.customAuthImpl,v=f.namespace,d=f.nodeAdmin,b=void 0!==d&&d;Ce(f.version);var M=new c.zt("auth-internal",new c.H0("database-standalone"));return M.setComponent(new c.wA("auth-internal",function(){return m},"PRIVATE")),{instance:new Ua(Ru(h,M,void 0,_,b),h),namespace:v}}}),kd=Ai;Ai.prototype.simpleListen=function(f,h){this.sendRequest("q",{p:f},h)},Ai.prototype.echo=function(f,h){this.sendRequest("echo",{d:f},h)};var Nd=Object.freeze({__proto__:null,DataConnection:kd,RealTimeConnection:He,hijackHash:function(f){var h=Ai.prototype.put;return Ai.prototype.put=function(_,w,m,v){void 0!==v&&(v=f()),h.call(this,_,w,m,v)},function(){Ai.prototype.put=h}},ConnectionTarget:nn,queryIdentifier:function(f){return f._delegate._queryIdentifier},forceRestClient:function(f){!function(f){cu=f}(f)}}),Ld=Ua.ServerValue;!function(f){Ce(f.SDK_VERSION);var h=f.INTERNAL.registerComponent(new c.wA("database",function(_,w){var m=w.instanceIdentifier,v=_.getProvider("app").getImmediate(),d=_.getProvider("auth-internal"),b=_.getProvider("app-check-internal");return new Ua(Ru(v,d,b,m),v)},"PUBLIC").setServiceProps({Reference:hu,Query:Rl,Database:Ua,DataSnapshot:du,enableLogging:Nt,INTERNAL:Yc,ServerValue:Ld,TEST_ACCESS:Nd}).setMultipleInstances(!0));f.registerVersion("@firebase/database","0.11.0"),(0,G.Yr)()&&(jt.exports=h)}(R.Z)},300:(jt,rt,Q)=>{"use strict";function R(){for(var pe=0,ye=0,De=arguments.length;ye<De;ye++)pe+=arguments[ye].length;var xe=Array(pe),We=0;for(ye=0;ye<De;ye++)for(var X=arguments[ye],Re=0,_t=X.length;Re<_t;Re++,We++)xe[We]=X[Re];return xe}Q.d(rt,{in:()=>E,Yd:()=>Ce,Ub:()=>re,Am:()=>Ee});var c,G=[],E=(()=>{return(pe=E||(E={}))[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",E;var pe})(),Ve={debug:E.DEBUG,verbose:E.VERBOSE,info:E.INFO,warn:E.WARN,error:E.ERROR,silent:E.SILENT},ve=E.INFO,ke=((c={})[E.DEBUG]="log",c[E.VERBOSE]="log",c[E.INFO]="info",c[E.WARN]="warn",c[E.ERROR]="error",c),fe=function(pe,ye){for(var De=[],xe=2;xe<arguments.length;xe++)De[xe-2]=arguments[xe];if(!(ye<pe.logLevel)){var We=(new Date).toISOString(),X=ke[ye];if(!X)throw new Error("Attempted to log a message with an invalid logType (value: "+ye+")");console[X].apply(console,R(["["+We+"]  "+pe.name+":"],De))}},Ce=function(){function pe(ye){this.name=ye,this._logLevel=ve,this._logHandler=fe,this._userLogHandler=null,G.push(this)}return Object.defineProperty(pe.prototype,"logLevel",{get:function(){return this._logLevel},set:function(ye){if(!(ye in E))throw new TypeError('Invalid value "'+ye+'" assigned to `logLevel`');this._logLevel=ye},enumerable:!1,configurable:!0}),pe.prototype.setLogLevel=function(ye){this._logLevel="string"==typeof ye?Ve[ye]:ye},Object.defineProperty(pe.prototype,"logHandler",{get:function(){return this._logHandler},set:function(ye){if("function"!=typeof ye)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ye},enumerable:!1,configurable:!0}),Object.defineProperty(pe.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(ye){this._userLogHandler=ye},enumerable:!1,configurable:!0}),pe.prototype.debug=function(){for(var ye=[],De=0;De<arguments.length;De++)ye[De]=arguments[De];this._userLogHandler&&this._userLogHandler.apply(this,R([this,E.DEBUG],ye)),this._logHandler.apply(this,R([this,E.DEBUG],ye))},pe.prototype.log=function(){for(var ye=[],De=0;De<arguments.length;De++)ye[De]=arguments[De];this._userLogHandler&&this._userLogHandler.apply(this,R([this,E.VERBOSE],ye)),this._logHandler.apply(this,R([this,E.VERBOSE],ye))},pe.prototype.info=function(){for(var ye=[],De=0;De<arguments.length;De++)ye[De]=arguments[De];this._userLogHandler&&this._userLogHandler.apply(this,R([this,E.INFO],ye)),this._logHandler.apply(this,R([this,E.INFO],ye))},pe.prototype.warn=function(){for(var ye=[],De=0;De<arguments.length;De++)ye[De]=arguments[De];this._userLogHandler&&this._userLogHandler.apply(this,R([this,E.WARN],ye)),this._logHandler.apply(this,R([this,E.WARN],ye))},pe.prototype.error=function(){for(var ye=[],De=0;De<arguments.length;De++)ye[De]=arguments[De];this._userLogHandler&&this._userLogHandler.apply(this,R([this,E.ERROR],ye)),this._logHandler.apply(this,R([this,E.ERROR],ye))},pe}();function re(pe){G.forEach(function(ye){ye.setLogLevel(pe)})}function Ee(pe,ye){for(var De=function(Re){var _t=null;ye&&ye.level&&(_t=Ve[ye.level]),Re.userLogHandler=null===pe?null:function(_n,Nt){for(var ut=[],Yt=2;Yt<arguments.length;Yt++)ut[Yt-2]=arguments[Yt];var wt=ut.map(function(In){if(null==In)return null;if("string"==typeof In)return In;if("number"==typeof In||"boolean"==typeof In)return In.toString();if(In instanceof Error)return In.message;try{return JSON.stringify(In)}catch(Et){return null}}).filter(function(In){return In}).join(" ");Nt>=(null!=_t?_t:_n.logLevel)&&pe({level:E[Nt].toLowerCase(),message:wt,args:ut,type:_n.name})}},xe=0,We=G;xe<We.length;xe++)De(We[xe])}},4685:(jt,rt,Q)=>{"use strict";Q.d(rt,{BH:()=>De,LL:()=>tn,ZR:()=>at,gQ:()=>zn,hu:()=>G,g5:()=>E,US:()=>ke,h$:()=>fe,r3:()=>lr,Sg:()=>xe,ne:()=>Ln,p$:()=>Ee,ZB:()=>pe,gK:()=>Ze,m9:()=>Zt,z$:()=>We,GJ:()=>Tn,jU:()=>_t,ru:()=>_n,d:()=>ut,xb:()=>qn,w1:()=>Yt,uI:()=>X,UG:()=>Re,Yr:()=>In,b$:()=>Nt,G6:()=>Et,Mn:()=>wt,w9:()=>kn,cI:()=>an,UI:()=>Xn,xO:()=>Si,DV:()=>Zn,ug:()=>Ot,dS:()=>nn,Pz:()=>Bt,Dv:()=>St,Wj:()=>It,lb:()=>xt});var R=Q(4762),G=function(Se,Ie){if(!Se)throw E(Ie)},E=function(Se){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Se)},Ve=function(Se){for(var Ie=[],$e=0,Je=0;Je<Se.length;Je++){var Xe=Se.charCodeAt(Je);Xe<128?Ie[$e++]=Xe:Xe<2048?(Ie[$e++]=Xe>>6|192,Ie[$e++]=63&Xe|128):55296==(64512&Xe)&&Je+1<Se.length&&56320==(64512&Se.charCodeAt(Je+1))?(Xe=65536+((1023&Xe)<<10)+(1023&Se.charCodeAt(++Je)),Ie[$e++]=Xe>>18|240,Ie[$e++]=Xe>>12&63|128,Ie[$e++]=Xe>>6&63|128,Ie[$e++]=63&Xe|128):(Ie[$e++]=Xe>>12|224,Ie[$e++]=Xe>>6&63|128,Ie[$e++]=63&Xe|128)}return Ie},ke={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(Se,Ie){if(!Array.isArray(Se))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var $e=Ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,Je=[],Xe=0;Xe<Se.length;Xe+=3){var qt=Se[Xe],yn=Xe+1<Se.length,sr=yn?Se[Xe+1]:0,Vn=Xe+2<Se.length,Un=Vn?Se[Xe+2]:0,Xr=(15&sr)<<2|Un>>6,Dr=63&Un;Vn||(Dr=64,yn||(Xr=64)),Je.push($e[qt>>2],$e[(3&qt)<<4|sr>>4],$e[Xr],$e[Dr])}return Je.join("")},encodeString:function(Se,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?btoa(Se):this.encodeByteArray(Ve(Se),Ie)},decodeString:function(Se,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?atob(Se):function(Se){for(var Ie=[],$e=0,Je=0;$e<Se.length;){var Xe=Se[$e++];if(Xe<128)Ie[Je++]=String.fromCharCode(Xe);else if(Xe>191&&Xe<224){var qt=Se[$e++];Ie[Je++]=String.fromCharCode((31&Xe)<<6|63&qt)}else if(Xe>239&&Xe<365){var Vn=((7&Xe)<<18|(63&(qt=Se[$e++]))<<12|(63&(yn=Se[$e++]))<<6|63&Se[$e++])-65536;Ie[Je++]=String.fromCharCode(55296+(Vn>>10)),Ie[Je++]=String.fromCharCode(56320+(1023&Vn))}else{qt=Se[$e++];var yn=Se[$e++];Ie[Je++]=String.fromCharCode((15&Xe)<<12|(63&qt)<<6|63&yn)}}return Ie.join("")}(this.decodeStringToByteArray(Se,Ie))},decodeStringToByteArray:function(Se,Ie){this.init_();for(var $e=Ie?this.charToByteMapWebSafe_:this.charToByteMap_,Je=[],Xe=0;Xe<Se.length;){var qt=$e[Se.charAt(Xe++)],sr=Xe<Se.length?$e[Se.charAt(Xe)]:0,Un=++Xe<Se.length?$e[Se.charAt(Xe)]:64,Br=++Xe<Se.length?$e[Se.charAt(Xe)]:64;if(++Xe,null==qt||null==sr||null==Un||null==Br)throw Error();Je.push(qt<<2|sr>>4),64!==Un&&(Je.push(sr<<4&240|Un>>2),64!==Br&&Je.push(Un<<6&192|Br))}return Je},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var Se=0;Se<this.ENCODED_VALS.length;Se++)this.byteToCharMap_[Se]=this.ENCODED_VALS.charAt(Se),this.charToByteMap_[this.byteToCharMap_[Se]]=Se,this.byteToCharMapWebSafe_[Se]=this.ENCODED_VALS_WEBSAFE.charAt(Se),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Se]]=Se,Se>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Se)]=Se,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Se)]=Se)}}},fe=function(Se){var Ie=Ve(Se);return ke.encodeByteArray(Ie,!0)},Ce=function(Se){return fe(Se).replace(/\./g,"")},re=function(Se){try{return ke.decodeString(Se,!0)}catch(Ie){console.error("base64Decode failed: ",Ie)}return null};function Ee(Se){return pe(void 0,Se)}function pe(Se,Ie){if(!(Ie instanceof Object))return Ie;switch(Ie.constructor){case Date:return new Date(Ie.getTime());case Object:void 0===Se&&(Se={});break;case Array:Se=[];break;default:return Ie}for(var Je in Ie)!Ie.hasOwnProperty(Je)||!ye(Je)||(Se[Je]=pe(Se[Je],Ie[Je]));return Se}function ye(Se){return"__proto__"!==Se}var De=function(){function Se(){var Ie=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function($e,Je){Ie.resolve=$e,Ie.reject=Je})}return Se.prototype.wrapCallback=function(Ie){var $e=this;return function(Je,Xe){Je?$e.reject(Je):$e.resolve(Xe),"function"==typeof Ie&&($e.promise.catch(function(){}),1===Ie.length?Ie(Je):Ie(Je,Xe))}},Se}();function xe(Se,Ie){if(Se.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var Je=Ie||"demo-project",Xe=Se.iat||0,qt=Se.sub||Se.user_id;if(!qt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var yn=(0,R.pi)({iss:"https://securetoken.google.com/"+Je,aud:Je,iat:Xe,exp:Xe+3600,auth_time:Xe,sub:qt,user_id:qt,firebase:{sign_in_provider:"custom",identities:{}}},Se);return[Ce(JSON.stringify({alg:"none",type:"JWT"})),Ce(JSON.stringify(yn)),""].join(".")}function We(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function X(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Re(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Se){return!1}}function _t(){return"object"==typeof self&&self.self===self}function _n(){var Se="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Se&&void 0!==Se.id}function Nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ut(){return We().indexOf("Electron/")>=0}function Yt(){var Se=We();return Se.indexOf("MSIE ")>=0||Se.indexOf("Trident/")>=0}function wt(){return We().indexOf("MSAppHost/")>=0}function In(){return!1}function Et(){return!Re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var at=function(Se){function Ie($e,Je,Xe){var qt=Se.call(this,Je)||this;return qt.code=$e,qt.customData=Xe,qt.name="FirebaseError",Object.setPrototypeOf(qt,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(qt,tn.prototype.create),qt}return(0,R.ZT)(Ie,Se),Ie}(Error),tn=function(){function Se(Ie,$e,Je){this.service=Ie,this.serviceName=$e,this.errors=Je}return Se.prototype.create=function(Ie){for(var $e=[],Je=1;Je<arguments.length;Je++)$e[Je-1]=arguments[Je];var Xe=$e[0]||{},qt=this.service+"/"+Ie,yn=this.errors[Ie],sr=yn?sn(yn,Xe):"Error",Vn=this.serviceName+": "+sr+" ("+qt+").",Un=new at(qt,Vn,Xe);return Un},Se}();function sn(Se,Ie){return Se.replace(Sn,function($e,Je){var Xe=Ie[Je];return null!=Xe?String(Xe):"<"+Je+"?>"})}var Sn=/\{\$([^}]+)}/g;function an(Se){return JSON.parse(Se)}function Bt(Se){return JSON.stringify(Se)}var Rt=function(Se){var Ie={},$e={},Je={},Xe="";try{var qt=Se.split(".");Ie=an(re(qt[0])||""),$e=an(re(qt[1])||""),Xe=qt[2],Je=$e.d||{},delete $e.d}catch(yn){}return{header:Ie,claims:$e,data:Je,signature:Xe}},kn=function(Se){var $e=Rt(Se).claims;return!!$e&&"object"==typeof $e&&$e.hasOwnProperty("iat")},Tn=function(Se){var Ie=Rt(Se).claims;return"object"==typeof Ie&&!0===Ie.admin};function lr(Se,Ie){return Object.prototype.hasOwnProperty.call(Se,Ie)}function Zn(Se,Ie){if(Object.prototype.hasOwnProperty.call(Se,Ie))return Se[Ie]}function qn(Se){for(var Ie in Se)if(Object.prototype.hasOwnProperty.call(Se,Ie))return!1;return!0}function Xn(Se,Ie,$e){var Je={};for(var Xe in Se)Object.prototype.hasOwnProperty.call(Se,Xe)&&(Je[Xe]=Ie.call($e,Se[Xe],Xe,Se));return Je}function Si(Se){for(var Ie=[],$e=function(Vn,Un){Array.isArray(Un)?Un.forEach(function(si){Ie.push(encodeURIComponent(Vn)+"="+encodeURIComponent(si))}):Ie.push(encodeURIComponent(Vn)+"="+encodeURIComponent(Un))},Je=0,Xe=Object.entries(Se);Je<Xe.length;Je++){var qt=Xe[Je];$e(qt[0],qt[1])}return Ie.length?"&"+Ie.join("&"):""}var zn=function(){function Se(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var Ie=1;Ie<this.blockSize;++Ie)this.pad_[Ie]=0;this.reset()}return Se.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Se.prototype.compress_=function(Ie,$e){$e||($e=0);var Je=this.W_;if("string"==typeof Ie)for(var Xe=0;Xe<16;Xe++)Je[Xe]=Ie.charCodeAt($e)<<24|Ie.charCodeAt($e+1)<<16|Ie.charCodeAt($e+2)<<8|Ie.charCodeAt($e+3),$e+=4;else for(Xe=0;Xe<16;Xe++)Je[Xe]=Ie[$e]<<24|Ie[$e+1]<<16|Ie[$e+2]<<8|Ie[$e+3],$e+=4;for(Xe=16;Xe<80;Xe++)Je[Xe]=4294967295&((qt=Je[Xe-3]^Je[Xe-8]^Je[Xe-14]^Je[Xe-16])<<1|qt>>>31);var Br,Xr,yn=this.chain_[0],sr=this.chain_[1],Vn=this.chain_[2],Un=this.chain_[3],si=this.chain_[4];for(Xe=0;Xe<80;Xe++){Xe<40?Xe<20?(Br=Un^sr&(Vn^Un),Xr=1518500249):(Br=sr^Vn^Un,Xr=1859775393):Xe<60?(Br=sr&Vn|Un&(sr|Vn),Xr=2400959708):(Br=sr^Vn^Un,Xr=3395469782);var qt=(yn<<5|yn>>>27)+Br+si+Xr+Je[Xe]&4294967295;si=Un,Un=Vn,Vn=4294967295&(sr<<30|sr>>>2),sr=yn,yn=qt}this.chain_[0]=this.chain_[0]+yn&4294967295,this.chain_[1]=this.chain_[1]+sr&4294967295,this.chain_[2]=this.chain_[2]+Vn&4294967295,this.chain_[3]=this.chain_[3]+Un&4294967295,this.chain_[4]=this.chain_[4]+si&4294967295},Se.prototype.update=function(Ie,$e){if(null!=Ie){void 0===$e&&($e=Ie.length);for(var Je=$e-this.blockSize,Xe=0,qt=this.buf_,yn=this.inbuf_;Xe<$e;){if(0===yn)for(;Xe<=Je;)this.compress_(Ie,Xe),Xe+=this.blockSize;if("string"==typeof Ie){for(;Xe<$e;)if(qt[yn]=Ie.charCodeAt(Xe),++Xe,++yn===this.blockSize){this.compress_(qt),yn=0;break}}else for(;Xe<$e;)if(qt[yn]=Ie[Xe],++Xe,++yn===this.blockSize){this.compress_(qt),yn=0;break}}this.inbuf_=yn,this.total_+=$e}},Se.prototype.digest=function(){var Ie=[],$e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var Je=this.blockSize-1;Je>=56;Je--)this.buf_[Je]=255&$e,$e/=256;this.compress_(this.buf_);var Xe=0;for(Je=0;Je<5;Je++)for(var qt=24;qt>=0;qt-=8)Ie[Xe]=this.chain_[Je]>>qt&255,++Xe;return Ie},Se}();function Ln(Se,Ie){var $e=new Qt(Se,Ie);return $e.subscribe.bind($e)}var Qt=function(){function Se(Ie,$e){var Je=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$e,this.task.then(function(){Ie(Je)}).catch(function(Xe){Je.error(Xe)})}return Se.prototype.next=function(Ie){this.forEachObserver(function($e){$e.next(Ie)})},Se.prototype.error=function(Ie){this.forEachObserver(function($e){$e.error(Ie)}),this.close(Ie)},Se.prototype.complete=function(){this.forEachObserver(function(Ie){Ie.complete()}),this.close()},Se.prototype.subscribe=function(Ie,$e,Je){var qt,Xe=this;if(void 0===Ie&&void 0===$e&&void 0===Je)throw new Error("Missing Observer.");void 0===(qt=function(Se,Ie){if("object"!=typeof Se||null===Se)return!1;for(var $e=0,Je=["next","error","complete"];$e<Je.length;$e++){var Xe=Je[$e];if(Xe in Se&&"function"==typeof Se[Xe])return!0}return!1}(Ie)?Ie:{next:Ie,error:$e,complete:Je}).next&&(qt.next=Kn),void 0===qt.error&&(qt.error=Kn),void 0===qt.complete&&(qt.complete=Kn);var yn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{Xe.finalError?qt.error(Xe.finalError):qt.complete()}catch(sr){}}),this.observers.push(qt),yn},Se.prototype.unsubscribeOne=function(Ie){void 0===this.observers||void 0===this.observers[Ie]||(delete this.observers[Ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Se.prototype.forEachObserver=function(Ie){if(!this.finalized)for(var $e=0;$e<this.observers.length;$e++)this.sendOne($e,Ie)},Se.prototype.sendOne=function(Ie,$e){var Je=this;this.task.then(function(){if(void 0!==Je.observers&&void 0!==Je.observers[Ie])try{$e(Je.observers[Ie])}catch(Xe){"undefined"!=typeof console&&console.error&&console.error(Xe)}})},Se.prototype.close=function(Ie){var $e=this;this.finalized||(this.finalized=!0,void 0!==Ie&&(this.finalError=Ie),this.task.then(function(){$e.observers=void 0,$e.onNoObservers=void 0}))},Se}();function Kn(){}var St=function(Se,Ie,$e,Je){var Xe;if(Je<Ie?Xe="at least "+Ie:Je>$e&&(Xe=0===$e?"none":"no more than "+$e),Xe)throw new Error(Se+" failed: Was called with "+Je+(1===Je?" argument.":" arguments.")+" Expects "+Xe+".")};function Ze(Se,Ie){return Se+" failed: "+Ie+" argument "}function It(Se,Ie,$e,Je){if((!Je||$e)&&"function"!=typeof $e)throw new Error(Ze(Se,Ie)+"must be a valid function.")}function xt(Se,Ie,$e,Je){if((!Je||$e)&&("object"!=typeof $e||null===$e))throw new Error(Ze(Se,Ie)+"must be a valid context object.")}var nn=function(Se){for(var Ie=[],$e=0,Je=0;Je<Se.length;Je++){var Xe=Se.charCodeAt(Je);if(Xe>=55296&&Xe<=56319){var qt=Xe-55296;Je++,G(Je<Se.length,"Surrogate pair missing trail surrogate."),Xe=65536+(qt<<10)+(Se.charCodeAt(Je)-56320)}Xe<128?Ie[$e++]=Xe:Xe<2048?(Ie[$e++]=Xe>>6|192,Ie[$e++]=63&Xe|128):Xe<65536?(Ie[$e++]=Xe>>12|224,Ie[$e++]=Xe>>6&63|128,Ie[$e++]=63&Xe|128):(Ie[$e++]=Xe>>18|240,Ie[$e++]=Xe>>12&63|128,Ie[$e++]=Xe>>6&63|128,Ie[$e++]=63&Xe|128)}return Ie},Ot=function(Se){for(var Ie=0,$e=0;$e<Se.length;$e++){var Je=Se.charCodeAt($e);Je<128?Ie++:Je<2048?Ie+=2:Je>=55296&&Je<=56319?(Ie+=4,$e++):Ie+=3}return Ie};function Zt(Se){return Se&&Se._delegate?Se._delegate:Se}},2329:(jt,rt,Q)=>{"use strict";Q.d(rt,{Z:()=>R.Z});var R=Q(9759),G="8.10.0";R.Z.registerVersion("firebase",G,"app"),R.Z.SDK_VERSION=G},6215:(jt,rt,Q)=>{"use strict";Q.d(rt,{X:()=>G});var R=Q(9765),c=Q(7971);class G extends R.xQ{constructor(Ve){super(),this._value=Ve}get value(){return this.getValue()}_subscribe(Ve){const ve=super._subscribe(Ve);return ve&&!ve.closed&&Ve.next(this._value),ve}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new c.N;return this._value}next(Ve){super.next(this._value=Ve)}}},7574:(jt,rt,Q)=>{"use strict";Q.d(rt,{y:()=>Ee});var R=Q(7393),G=Q(9181),E=Q(6490),ve=Q(6554),ke=Q(4487);var re=Q(2494);let Ee=(()=>{class ye{constructor(xe){this._isScalar=!1,xe&&(this._subscribe=xe)}lift(xe){const We=new ye;return We.source=this,We.operator=xe,We}subscribe(xe,We,X){const{operator:Re}=this,_t=function(ye,De,xe){if(ye){if(ye instanceof R.L)return ye;if(ye[G.b])return ye[G.b]()}return ye||De||xe?new R.L(ye,De,xe):new R.L(E.c)}(xe,We,X);if(_t.add(Re?Re.call(_t,this.source):this.source||re.v.useDeprecatedSynchronousErrorHandling&&!_t.syncErrorThrowable?this._subscribe(_t):this._trySubscribe(_t)),re.v.useDeprecatedSynchronousErrorHandling&&_t.syncErrorThrowable&&(_t.syncErrorThrowable=!1,_t.syncErrorThrown))throw _t.syncErrorValue;return _t}_trySubscribe(xe){try{return this._subscribe(xe)}catch(We){re.v.useDeprecatedSynchronousErrorHandling&&(xe.syncErrorThrown=!0,xe.syncErrorValue=We),function(ye){for(;ye;){const{closed:De,destination:xe,isStopped:We}=ye;if(De||We)return!1;ye=xe&&xe instanceof R.L?xe:null}return!0}(xe)?xe.error(We):console.warn(We)}}forEach(xe,We){return new(We=pe(We))((X,Re)=>{let _t;_t=this.subscribe(_n=>{try{xe(_n)}catch(Nt){Re(Nt),_t&&_t.unsubscribe()}},Re,X)})}_subscribe(xe){const{source:We}=this;return We&&We.subscribe(xe)}[ve.L](){return this}pipe(...xe){return 0===xe.length?this:function(ye){return 0===ye.length?ke.y:1===ye.length?ye[0]:function(xe){return ye.reduce((We,X)=>X(We),xe)}}(xe)(this)}toPromise(xe){return new(xe=pe(xe))((We,X)=>{let Re;this.subscribe(_t=>Re=_t,_t=>X(_t),()=>We(Re))})}}return ye.create=De=>new ye(De),ye})();function pe(ye){if(ye||(ye=re.v.Promise||Promise),!ye)throw new Error("no Promise impl found");return ye}},6490:(jt,rt,Q)=>{"use strict";Q.d(rt,{c:()=>G});var R=Q(2494),c=Q(4449);const G={closed:!0,next(E){},error(E){if(R.v.useDeprecatedSynchronousErrorHandling)throw E;(0,c.z)(E)},complete(){}}},5197:(jt,rt,Q)=>{"use strict";Q.d(rt,{L:()=>c});var R=Q(7393);class c extends R.L{notifyNext(E,Ve,ve,ke,fe){this.destination.next(Ve)}notifyError(E,Ve){this.destination.error(E)}notifyComplete(E){this.destination.complete()}}},9765:(jt,rt,Q)=>{"use strict";Q.d(rt,{Yc:()=>ke,xQ:()=>fe});var R=Q(7574),c=Q(7393),G=Q(5319),E=Q(7971),Ve=Q(8858),ve=Q(9181);class ke extends c.L{constructor(Ee){super(Ee),this.destination=Ee}}let fe=(()=>{class re extends R.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ve.b](){return new ke(this)}lift(pe){const ye=new Ce(this,this);return ye.operator=pe,ye}next(pe){if(this.closed)throw new E.N;if(!this.isStopped){const{observers:ye}=this,De=ye.length,xe=ye.slice();for(let We=0;We<De;We++)xe[We].next(pe)}}error(pe){if(this.closed)throw new E.N;this.hasError=!0,this.thrownError=pe,this.isStopped=!0;const{observers:ye}=this,De=ye.length,xe=ye.slice();for(let We=0;We<De;We++)xe[We].error(pe);this.observers.length=0}complete(){if(this.closed)throw new E.N;this.isStopped=!0;const{observers:pe}=this,ye=pe.length,De=pe.slice();for(let xe=0;xe<ye;xe++)De[xe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(pe){if(this.closed)throw new E.N;return super._trySubscribe(pe)}_subscribe(pe){if(this.closed)throw new E.N;return this.hasError?(pe.error(this.thrownError),G.w.EMPTY):this.isStopped?(pe.complete(),G.w.EMPTY):(this.observers.push(pe),new Ve.W(this,pe))}asObservable(){const pe=new R.y;return pe.source=this,pe}}return re.create=(Ee,pe)=>new Ce(Ee,pe),re})();class Ce extends fe{constructor(Ee,pe){super(),this.destination=Ee,this.source=pe}next(Ee){const{destination:pe}=this;pe&&pe.next&&pe.next(Ee)}error(Ee){const{destination:pe}=this;pe&&pe.error&&this.destination.error(Ee)}complete(){const{destination:Ee}=this;Ee&&Ee.complete&&this.destination.complete()}_subscribe(Ee){const{source:pe}=this;return pe?this.source.subscribe(Ee):G.w.EMPTY}}},8858:(jt,rt,Q)=>{"use strict";Q.d(rt,{W:()=>c});var R=Q(5319);class c extends R.w{constructor(E,Ve){super(),this.subject=E,this.subscriber=Ve,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const E=this.subject,Ve=E.observers;if(this.subject=null,!Ve||0===Ve.length||E.isStopped||E.closed)return;const ve=Ve.indexOf(this.subscriber);-1!==ve&&Ve.splice(ve,1)}}},7393:(jt,rt,Q)=>{"use strict";Q.d(rt,{L:()=>ke});var R=Q(9105),c=Q(6490),G=Q(5319),E=Q(9181),Ve=Q(2494),ve=Q(4449);class ke extends G.w{constructor(re,Ee,pe){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=c.c;break;case 1:if(!re){this.destination=c.c;break}if("object"==typeof re){re instanceof ke?(this.syncErrorThrowable=re.syncErrorThrowable,this.destination=re,re.add(this)):(this.syncErrorThrowable=!0,this.destination=new fe(this,re));break}default:this.syncErrorThrowable=!0,this.destination=new fe(this,re,Ee,pe)}}[E.b](){return this}static create(re,Ee,pe){const ye=new ke(re,Ee,pe);return ye.syncErrorThrowable=!1,ye}next(re){this.isStopped||this._next(re)}error(re){this.isStopped||(this.isStopped=!0,this._error(re))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(re){this.destination.next(re)}_error(re){this.destination.error(re),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:re}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=re,this}}class fe extends ke{constructor(re,Ee,pe,ye){super(),this._parentSubscriber=re;let De,xe=this;(0,R.m)(Ee)?De=Ee:Ee&&(De=Ee.next,pe=Ee.error,ye=Ee.complete,Ee!==c.c&&(xe=Object.create(Ee),(0,R.m)(xe.unsubscribe)&&this.add(xe.unsubscribe.bind(xe)),xe.unsubscribe=this.unsubscribe.bind(this))),this._context=xe,this._next=De,this._error=pe,this._complete=ye}next(re){if(!this.isStopped&&this._next){const{_parentSubscriber:Ee}=this;Ve.v.useDeprecatedSynchronousErrorHandling&&Ee.syncErrorThrowable?this.__tryOrSetError(Ee,this._next,re)&&this.unsubscribe():this.__tryOrUnsub(this._next,re)}}error(re){if(!this.isStopped){const{_parentSubscriber:Ee}=this,{useDeprecatedSynchronousErrorHandling:pe}=Ve.v;if(this._error)pe&&Ee.syncErrorThrowable?(this.__tryOrSetError(Ee,this._error,re),this.unsubscribe()):(this.__tryOrUnsub(this._error,re),this.unsubscribe());else if(Ee.syncErrorThrowable)pe?(Ee.syncErrorValue=re,Ee.syncErrorThrown=!0):(0,ve.z)(re),this.unsubscribe();else{if(this.unsubscribe(),pe)throw re;(0,ve.z)(re)}}}complete(){if(!this.isStopped){const{_parentSubscriber:re}=this;if(this._complete){const Ee=()=>this._complete.call(this._context);Ve.v.useDeprecatedSynchronousErrorHandling&&re.syncErrorThrowable?(this.__tryOrSetError(re,Ee),this.unsubscribe()):(this.__tryOrUnsub(Ee),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(re,Ee){try{re.call(this._context,Ee)}catch(pe){if(this.unsubscribe(),Ve.v.useDeprecatedSynchronousErrorHandling)throw pe;(0,ve.z)(pe)}}__tryOrSetError(re,Ee,pe){if(!Ve.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Ee.call(this._context,pe)}catch(ye){return Ve.v.useDeprecatedSynchronousErrorHandling?(re.syncErrorValue=ye,re.syncErrorThrown=!0,!0):((0,ve.z)(ye),!0)}return!1}_unsubscribe(){const{_parentSubscriber:re}=this;this._context=null,this._parentSubscriber=null,re.unsubscribe()}}},5319:(jt,rt,Q)=>{"use strict";Q.d(rt,{w:()=>ve});var R=Q(9796),c=Q(1555),G=Q(9105);const Ve=(()=>{function fe(Ce){return Error.call(this),this.message=Ce?`${Ce.length} errors occurred during unsubscription:\n${Ce.map((re,Ee)=>`${Ee+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ce,this}return fe.prototype=Object.create(Error.prototype),fe})();class ve{constructor(Ce){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Ce&&(this._ctorUnsubscribe=!0,this._unsubscribe=Ce)}unsubscribe(){let Ce;if(this.closed)return;let{_parentOrParents:re,_ctorUnsubscribe:Ee,_unsubscribe:pe,_subscriptions:ye}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,re instanceof ve)re.remove(this);else if(null!==re)for(let De=0;De<re.length;++De)re[De].remove(this);if((0,G.m)(pe)){Ee&&(this._unsubscribe=void 0);try{pe.call(this)}catch(De){Ce=De instanceof Ve?ke(De.errors):[De]}}if((0,R.k)(ye)){let De=-1,xe=ye.length;for(;++De<xe;){const We=ye[De];if((0,c.K)(We))try{We.unsubscribe()}catch(X){Ce=Ce||[],X instanceof Ve?Ce=Ce.concat(ke(X.errors)):Ce.push(X)}}}if(Ce)throw new Ve(Ce)}add(Ce){let re=Ce;if(!Ce)return ve.EMPTY;switch(typeof Ce){case"function":re=new ve(Ce);case"object":if(re===this||re.closed||"function"!=typeof re.unsubscribe)return re;if(this.closed)return re.unsubscribe(),re;if(!(re instanceof ve)){const ye=re;re=new ve,re._subscriptions=[ye]}break;default:throw new Error("unrecognized teardown "+Ce+" added to Subscription.")}let{_parentOrParents:Ee}=re;if(null===Ee)re._parentOrParents=this;else if(Ee instanceof ve){if(Ee===this)return re;re._parentOrParents=[Ee,this]}else{if(-1!==Ee.indexOf(this))return re;Ee.push(this)}const pe=this._subscriptions;return null===pe?this._subscriptions=[re]:pe.push(re),re}remove(Ce){const re=this._subscriptions;if(re){const Ee=re.indexOf(Ce);-1!==Ee&&re.splice(Ee,1)}}}var fe;function ke(fe){return fe.reduce((Ce,re)=>Ce.concat(re instanceof Ve?re.errors:re),[])}ve.EMPTY=((fe=new ve).closed=!0,fe)},2494:(jt,rt,Q)=>{"use strict";Q.d(rt,{v:()=>c});let R=!1;const c={Promise:void 0,set useDeprecatedSynchronousErrorHandling(G){if(G){const E=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+E.stack)}else R&&console.log("RxJS: Back to a better error behavior. Thank you. <3");R=G},get useDeprecatedSynchronousErrorHandling(){return R}}},5345:(jt,rt,Q)=>{"use strict";Q.d(rt,{IY:()=>E,Ds:()=>ve,ft:()=>fe});var R=Q(7393),c=Q(7574),G=Q(7444);class E extends R.L{constructor(re){super(),this.parent=re}_next(re){this.parent.notifyNext(re)}_error(re){this.parent.notifyError(re),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ve extends R.L{notifyNext(re){this.destination.next(re)}notifyError(re){this.destination.error(re)}notifyComplete(){this.destination.complete()}}function fe(Ce,re){if(re.closed)return;if(Ce instanceof c.y)return Ce.subscribe(re);let Ee;try{Ee=(0,G.s)(Ce)(re)}catch(pe){re.error(pe)}return Ee}},2441:(jt,rt,Q)=>{"use strict";Q.d(rt,{c:()=>Ve,N:()=>ve});var R=Q(9765),c=Q(7574),G=Q(5319),E=Q(1307);class Ve extends c.y{constructor(Ee,pe){super(),this.source=Ee,this.subjectFactory=pe,this._refCount=0,this._isComplete=!1}_subscribe(Ee){return this.getSubject().subscribe(Ee)}getSubject(){const Ee=this._subject;return(!Ee||Ee.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Ee=this._connection;return Ee||(this._isComplete=!1,Ee=this._connection=new G.w,Ee.add(this.source.subscribe(new ke(this.getSubject(),this))),Ee.closed&&(this._connection=null,Ee=G.w.EMPTY)),Ee}refCount(){return(0,E.x)()(this)}}const ve=(()=>{const re=Ve.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:re._subscribe},_isComplete:{value:re._isComplete,writable:!0},getSubject:{value:re.getSubject},connect:{value:re.connect},refCount:{value:re.refCount}}})();class ke extends R.Yc{constructor(Ee,pe){super(Ee),this.connectable=pe}_error(Ee){this._unsubscribe(),super._error(Ee)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Ee=this.connectable;if(Ee){this.connectable=null;const pe=Ee._connection;Ee._refCount=0,Ee._subject=null,Ee._connection=null,pe&&pe.unsubscribe()}}}},8071:(jt,rt,Q)=>{"use strict";Q.d(rt,{z:()=>E});var R=Q(5917),c=Q(3282);function E(...Ve){return(0,c.J)(1)((0,R.of)(...Ve))}},1439:(jt,rt,Q)=>{"use strict";Q.d(rt,{P:()=>E});var R=Q(7574),c=Q(4402),G=Q(9193);function E(Ve){return new R.y(ve=>{let ke;try{ke=Ve()}catch(Ce){return void ve.error(Ce)}return(ke?(0,c.D)(ke):(0,G.c)()).subscribe(ve)})}},9193:(jt,rt,Q)=>{"use strict";Q.d(rt,{E:()=>c,c:()=>G});var R=Q(7574);const c=new R.y(Ve=>Ve.complete());function G(Ve){return Ve?function(Ve){return new R.y(ve=>Ve.schedule(()=>ve.complete()))}(Ve):c}},4402:(jt,rt,Q)=>{"use strict";Q.d(rt,{D:()=>xe});var R=Q(7574),c=Q(7444),G=Q(5319),E=Q(6554),ke=Q(4087),fe=Q(377),Ee=Q(4072),pe=Q(9489);function xe(We,X){return X?function(We,X){if(null!=We){if(function(We){return We&&"function"==typeof We[E.L]}(We))return function(We,X){return new R.y(Re=>{const _t=new G.w;return _t.add(X.schedule(()=>{const _n=We[E.L]();_t.add(_n.subscribe({next(Nt){_t.add(X.schedule(()=>Re.next(Nt)))},error(Nt){_t.add(X.schedule(()=>Re.error(Nt)))},complete(){_t.add(X.schedule(()=>Re.complete()))}}))})),_t})}(We,X);if((0,Ee.t)(We))return function(We,X){return new R.y(Re=>{const _t=new G.w;return _t.add(X.schedule(()=>We.then(_n=>{_t.add(X.schedule(()=>{Re.next(_n),_t.add(X.schedule(()=>Re.complete()))}))},_n=>{_t.add(X.schedule(()=>Re.error(_n)))}))),_t})}(We,X);if((0,pe.z)(We))return(0,ke.r)(We,X);if(function(We){return We&&"function"==typeof We[fe.hZ]}(We)||"string"==typeof We)return function(We,X){if(!We)throw new Error("Iterable cannot be null");return new R.y(Re=>{const _t=new G.w;let _n;return _t.add(()=>{_n&&"function"==typeof _n.return&&_n.return()}),_t.add(X.schedule(()=>{_n=We[fe.hZ](),_t.add(X.schedule(function(){if(Re.closed)return;let Nt,ut;try{const Yt=_n.next();Nt=Yt.value,ut=Yt.done}catch(Yt){return void Re.error(Yt)}ut?Re.complete():(Re.next(Nt),this.schedule())}))})),_t})}(We,X)}throw new TypeError((null!==We&&typeof We||We)+" is not observable")}(We,X):We instanceof R.y?We:new R.y((0,c.s)(We))}},6693:(jt,rt,Q)=>{"use strict";Q.d(rt,{n:()=>E});var R=Q(7574),c=Q(5015),G=Q(4087);function E(Ve,ve){return ve?(0,G.r)(Ve,ve):new R.y((0,c.V)(Ve))}},6682:(jt,rt,Q)=>{"use strict";Q.d(rt,{T:()=>Ve});var R=Q(7574),c=Q(4869),G=Q(3282),E=Q(6693);function Ve(...ve){let ke=Number.POSITIVE_INFINITY,fe=null,Ce=ve[ve.length-1];return(0,c.K)(Ce)?(fe=ve.pop(),ve.length>1&&"number"==typeof ve[ve.length-1]&&(ke=ve.pop())):"number"==typeof Ce&&(ke=ve.pop()),null===fe&&1===ve.length&&ve[0]instanceof R.y?ve[0]:(0,G.J)(ke)((0,E.n)(ve,fe))}},5917:(jt,rt,Q)=>{"use strict";Q.d(rt,{of:()=>E});var R=Q(4869),c=Q(6693),G=Q(4087);function E(...Ve){let ve=Ve[Ve.length-1];return(0,R.K)(ve)?(Ve.pop(),(0,G.r)(Ve,ve)):(0,c.n)(Ve)}},4612:(jt,rt,Q)=>{"use strict";Q.d(rt,{b:()=>c});var R=Q(9773);function c(G,E){return(0,R.zg)(G,E,1)}},4395:(jt,rt,Q)=>{"use strict";Q.d(rt,{b:()=>G});var R=Q(7393),c=Q(3637);function G(ke,fe=c.P){return Ce=>Ce.lift(new E(ke,fe))}class E{constructor(fe,Ce){this.dueTime=fe,this.scheduler=Ce}call(fe,Ce){return Ce.subscribe(new Ve(fe,this.dueTime,this.scheduler))}}class Ve extends R.L{constructor(fe,Ce,re){super(fe),this.dueTime=Ce,this.scheduler=re,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(fe){this.clearDebounce(),this.lastValue=fe,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ve,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:fe}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(fe)}}clearDebounce(){const fe=this.debouncedSubscription;null!==fe&&(this.remove(fe),fe.unsubscribe(),this.debouncedSubscription=null)}}function ve(ke){ke.debouncedNext()}},5242:(jt,rt,Q)=>{"use strict";Q.d(rt,{d:()=>c});var R=Q(7393);function c(Ve=null){return ve=>ve.lift(new G(Ve))}class G{constructor(ve){this.defaultValue=ve}call(ve,ke){return ke.subscribe(new E(ve,this.defaultValue))}}class E extends R.L{constructor(ve,ke){super(ve),this.defaultValue=ke,this.isEmpty=!0}_next(ve){this.isEmpty=!1,this.destination.next(ve)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7519:(jt,rt,Q)=>{"use strict";Q.d(rt,{x:()=>c});var R=Q(7393);function c(Ve,ve){return ke=>ke.lift(new G(Ve,ve))}class G{constructor(ve,ke){this.compare=ve,this.keySelector=ke}call(ve,ke){return ke.subscribe(new E(ve,this.compare,this.keySelector))}}class E extends R.L{constructor(ve,ke,fe){super(ve),this.keySelector=fe,this.hasKey=!1,"function"==typeof ke&&(this.compare=ke)}compare(ve,ke){return ve===ke}_next(ve){let ke;try{const{keySelector:Ce}=this;ke=Ce?Ce(ve):ve}catch(Ce){return this.destination.error(Ce)}let fe=!1;if(this.hasKey)try{const{compare:Ce}=this;fe=Ce(this.key,ke)}catch(Ce){return this.destination.error(Ce)}else this.hasKey=!0;fe||(this.key=ke,this.destination.next(ve))}}},5435:(jt,rt,Q)=>{"use strict";Q.d(rt,{h:()=>c});var R=Q(7393);function c(Ve,ve){return function(fe){return fe.lift(new G(Ve,ve))}}class G{constructor(ve,ke){this.predicate=ve,this.thisArg=ke}call(ve,ke){return ke.subscribe(new E(ve,this.predicate,this.thisArg))}}class E extends R.L{constructor(ve,ke,fe){super(ve),this.predicate=ke,this.thisArg=fe,this.count=0}_next(ve){let ke;try{ke=this.predicate.call(this.thisArg,ve,this.count++)}catch(fe){return void this.destination.error(fe)}ke&&this.destination.next(ve)}}},8049:(jt,rt,Q)=>{"use strict";Q.d(rt,{P:()=>ke});var R=Q(3410),c=Q(5435),G=Q(5257),E=Q(5242),Ve=Q(4635),ve=Q(4487);function ke(fe,Ce){const re=arguments.length>=2;return Ee=>Ee.pipe(fe?(0,c.h)((pe,ye)=>fe(pe,ye,Ee)):ve.y,(0,G.q)(1),re?(0,E.d)(Ce):(0,Ve.T)(()=>new R.K))}},8002:(jt,rt,Q)=>{"use strict";Q.d(rt,{U:()=>c});var R=Q(7393);function c(Ve,ve){return function(fe){if("function"!=typeof Ve)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return fe.lift(new G(Ve,ve))}}class G{constructor(ve,ke){this.project=ve,this.thisArg=ke}call(ve,ke){return ke.subscribe(new E(ve,this.project,this.thisArg))}}class E extends R.L{constructor(ve,ke,fe){super(ve),this.project=ke,this.count=0,this.thisArg=fe||this}_next(ve){let ke;try{ke=this.project.call(this.thisArg,ve,this.count++)}catch(fe){return void this.destination.error(fe)}this.destination.next(ke)}}},3282:(jt,rt,Q)=>{"use strict";Q.d(rt,{J:()=>G});var R=Q(9773),c=Q(4487);function G(E=Number.POSITIVE_INFINITY){return(0,R.zg)(c.y,E)}},9773:(jt,rt,Q)=>{"use strict";Q.d(rt,{zg:()=>E});var R=Q(8002),c=Q(4402),G=Q(5345);function E(fe,Ce,re=Number.POSITIVE_INFINITY){return"function"==typeof Ce?Ee=>Ee.pipe(E((pe,ye)=>(0,c.D)(fe(pe,ye)).pipe((0,R.U)((De,xe)=>Ce(pe,De,ye,xe))),re)):("number"==typeof Ce&&(re=Ce),Ee=>Ee.lift(new Ve(fe,re)))}class Ve{constructor(Ce,re=Number.POSITIVE_INFINITY){this.project=Ce,this.concurrent=re}call(Ce,re){return re.subscribe(new ve(Ce,this.project,this.concurrent))}}class ve extends G.Ds{constructor(Ce,re,Ee=Number.POSITIVE_INFINITY){super(Ce),this.project=re,this.concurrent=Ee,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Ce){this.active<this.concurrent?this._tryNext(Ce):this.buffer.push(Ce)}_tryNext(Ce){let re;const Ee=this.index++;try{re=this.project(Ce,Ee)}catch(pe){return void this.destination.error(pe)}this.active++,this._innerSub(re)}_innerSub(Ce){const re=new G.IY(this),Ee=this.destination;Ee.add(re);const pe=(0,G.ft)(Ce,re);pe!==re&&Ee.add(pe)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Ce){this.destination.next(Ce)}notifyComplete(){const Ce=this.buffer;this.active--,Ce.length>0?this._next(Ce.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(jt,rt,Q)=>{"use strict";Q.d(rt,{ht:()=>Ee,QV:()=>Ce});var R=Q(7393),c=Q(9193),G=Q(5917),E=Q(7574);class fe{constructor(De,xe,We){this.kind=De,this.value=xe,this.error=We,this.hasValue="N"===De}observe(De){switch(this.kind){case"N":return De.next&&De.next(this.value);case"E":return De.error&&De.error(this.error);case"C":return De.complete&&De.complete()}}do(De,xe,We){switch(this.kind){case"N":return De&&De(this.value);case"E":return xe&&xe(this.error);case"C":return We&&We()}}accept(De,xe,We){return De&&"function"==typeof De.next?this.observe(De):this.do(De,xe,We)}toObservable(){switch(this.kind){case"N":return(0,G.of)(this.value);case"E":return ye=this.error,new E.y(xe=>xe.error(ye));case"C":return(0,c.c)()}var ye;throw new Error("unexpected notification kind value")}static createNext(De){return void 0!==De?new fe("N",De):fe.undefinedValueNotification}static createError(De){return new fe("E",void 0,De)}static createComplete(){return fe.completeNotification}}function Ce(ye,De=0){return function(We){return We.lift(new re(ye,De))}}fe.completeNotification=new fe("C"),fe.undefinedValueNotification=new fe("N",void 0);class re{constructor(De,xe=0){this.scheduler=De,this.delay=xe}call(De,xe){return xe.subscribe(new Ee(De,this.scheduler,this.delay))}}class Ee extends R.L{constructor(De,xe,We=0){super(De),this.scheduler=xe,this.delay=We}static dispatch(De){const{notification:xe,destination:We}=De;xe.observe(We),this.unsubscribe()}scheduleMessage(De){this.destination.add(this.scheduler.schedule(Ee.dispatch,this.delay,new pe(De,this.destination)))}_next(De){this.scheduleMessage(fe.createNext(De))}_error(De){this.scheduleMessage(fe.createError(De)),this.unsubscribe()}_complete(){this.scheduleMessage(fe.createComplete()),this.unsubscribe()}}class pe{constructor(De,xe){this.notification=De,this.destination=xe}}},9328:(jt,rt,Q)=>{"use strict";Q.d(rt,{G:()=>c});var R=Q(7393);function c(){return Ve=>Ve.lift(new G)}class G{call(ve,ke){return ke.subscribe(new E(ve))}}class E extends R.L{constructor(ve){super(ve),this.hasPrev=!1}_next(ve){let ke;this.hasPrev?ke=[this.prev,ve]:this.hasPrev=!0,this.prev=ve,ke&&this.destination.next(ke)}}},1307:(jt,rt,Q)=>{"use strict";Q.d(rt,{x:()=>c});var R=Q(7393);function c(){return function(ve){return ve.lift(new G(ve))}}class G{constructor(ve){this.connectable=ve}call(ve,ke){const{connectable:fe}=this;fe._refCount++;const Ce=new E(ve,fe),re=ke.subscribe(Ce);return Ce.closed||(Ce.connection=fe.connect()),re}}class E extends R.L{constructor(ve,ke){super(ve),this.connectable=ke}_unsubscribe(){const{connectable:ve}=this;if(!ve)return void(this.connection=null);this.connectable=null;const ke=ve._refCount;if(ke<=0)return void(this.connection=null);if(ve._refCount=ke-1,ke>1)return void(this.connection=null);const{connection:fe}=this,Ce=ve._connection;this.connection=null,Ce&&(!fe||Ce===fe)&&Ce.unsubscribe()}}},2145:(jt,rt,Q)=>{"use strict";Q.d(rt,{R:()=>c});var R=Q(7393);function c(Ve,ve){let ke=!1;return arguments.length>=2&&(ke=!0),function(Ce){return Ce.lift(new G(Ve,ve,ke))}}class G{constructor(ve,ke,fe=!1){this.accumulator=ve,this.seed=ke,this.hasSeed=fe}call(ve,ke){return ke.subscribe(new E(ve,this.accumulator,this.seed,this.hasSeed))}}class E extends R.L{constructor(ve,ke,fe,Ce){super(ve),this.accumulator=ke,this._seed=fe,this.hasSeed=Ce,this.index=0}get seed(){return this._seed}set seed(ve){this.hasSeed=!0,this._seed=ve}_next(ve){if(this.hasSeed)return this._tryNext(ve);this.seed=ve,this.destination.next(ve)}_tryNext(ve){const ke=this.index++;let fe;try{fe=this.accumulator(this.seed,ve,ke)}catch(Ce){this.destination.error(Ce)}this.seed=fe,this.destination.next(fe)}}},8819:(jt,rt,Q)=>{"use strict";Q.d(rt,{B:()=>ke});var R=Q(2441);var E=Q(1307),Ve=Q(9765);function ve(){return new Ve.xQ}function ke(){return fe=>(0,E.x)()(function(fe,Ce){return function(Ee){let pe;pe="function"==typeof fe?fe:function(){return fe};const ye=Object.create(Ee,R.N);return ye.source=Ee,ye.subjectFactory=pe,ye}}(ve)(fe))}},2066:(jt,rt,Q)=>{"use strict";Q.d(rt,{d:()=>Ce});var R=Q(9765),c=Q(7771),G=Q(5319),E=Q(309),Ve=Q(7971),ve=Q(8858);class ke extends R.xQ{constructor(pe=Number.POSITIVE_INFINITY,ye=Number.POSITIVE_INFINITY,De){super(),this.scheduler=De,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=pe<1?1:pe,this._windowTime=ye<1?1:ye,ye===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(pe){if(!this.isStopped){const ye=this._events;ye.push(pe),ye.length>this._bufferSize&&ye.shift()}super.next(pe)}nextTimeWindow(pe){this.isStopped||(this._events.push(new fe(this._getNow(),pe)),this._trimBufferThenGetEvents()),super.next(pe)}_subscribe(pe){const ye=this._infiniteTimeWindow,De=ye?this._events:this._trimBufferThenGetEvents(),xe=this.scheduler,We=De.length;let X;if(this.closed)throw new Ve.N;if(this.isStopped||this.hasError?X=G.w.EMPTY:(this.observers.push(pe),X=new ve.W(this,pe)),xe&&pe.add(pe=new E.ht(pe,xe)),ye)for(let Re=0;Re<We&&!pe.closed;Re++)pe.next(De[Re]);else for(let Re=0;Re<We&&!pe.closed;Re++)pe.next(De[Re].value);return this.hasError?pe.error(this.thrownError):this.isStopped&&pe.complete(),X}_getNow(){return(this.scheduler||c.c).now()}_trimBufferThenGetEvents(){const pe=this._getNow(),ye=this._bufferSize,De=this._windowTime,xe=this._events,We=xe.length;let X=0;for(;X<We&&!(pe-xe[X].time<De);)X++;return We>ye&&(X=Math.max(X,We-ye)),X>0&&xe.splice(0,X),xe}}class fe{constructor(pe,ye){this.time=pe,this.value=ye}}function Ce(Ee,pe,ye){let De;return De=Ee&&"object"==typeof Ee?Ee:{bufferSize:Ee,windowTime:pe,refCount:!1,scheduler:ye},xe=>xe.lift(function({bufferSize:Ee=Number.POSITIVE_INFINITY,windowTime:pe=Number.POSITIVE_INFINITY,refCount:ye,scheduler:De}){let xe,X,We=0,Re=!1,_t=!1;return function(Nt){let ut;We++,!xe||Re?(Re=!1,xe=new ke(Ee,pe,De),ut=xe.subscribe(this),X=Nt.subscribe({next(Yt){xe.next(Yt)},error(Yt){Re=!0,xe.error(Yt)},complete(){_t=!0,X=void 0,xe.complete()}}),_t&&(X=void 0)):ut=xe.subscribe(this),this.add(()=>{We--,ut.unsubscribe(),ut=void 0,X&&!_t&&ye&&0===We&&(X.unsubscribe(),X=void 0,xe=void 0)})}}(De))}},9761:(jt,rt,Q)=>{"use strict";Q.d(rt,{O:()=>G});var R=Q(8071),c=Q(4869);function G(...E){const Ve=E[E.length-1];return(0,c.K)(Ve)?(E.pop(),ve=>(0,R.z)(E,ve,Ve)):ve=>(0,R.z)(E,ve)}},9673:(jt,rt,Q)=>{"use strict";Q.d(rt,{R:()=>Ve});var R=Q(7574),c=Q(4581),G=Q(6561);class E extends R.y{constructor(fe,Ce=0,re=c.e){super(),this.source=fe,this.delayTime=Ce,this.scheduler=re,(!(0,G.k)(Ce)||Ce<0)&&(this.delayTime=0),(!re||"function"!=typeof re.schedule)&&(this.scheduler=c.e)}static create(fe,Ce=0,re=c.e){return new E(fe,Ce,re)}static dispatch(fe){const{source:Ce,subscriber:re}=fe;return this.add(Ce.subscribe(re))}_subscribe(fe){return this.scheduler.schedule(E.dispatch,this.delayTime,{source:this.source,subscriber:fe})}}function Ve(ke,fe=0){return function(re){return re.lift(new ve(ke,fe))}}class ve{constructor(fe,Ce){this.scheduler=fe,this.delay=Ce}call(fe,Ce){return new E(Ce,this.delay,this.scheduler).subscribe(fe)}}},3190:(jt,rt,Q)=>{"use strict";Q.d(rt,{w:()=>E});var R=Q(8002),c=Q(4402),G=Q(5345);function E(ke,fe){return"function"==typeof fe?Ce=>Ce.pipe(E((re,Ee)=>(0,c.D)(ke(re,Ee)).pipe((0,R.U)((pe,ye)=>fe(re,pe,Ee,ye))))):Ce=>Ce.lift(new Ve(ke))}class Ve{constructor(fe){this.project=fe}call(fe,Ce){return Ce.subscribe(new ve(fe,this.project))}}class ve extends G.Ds{constructor(fe,Ce){super(fe),this.project=Ce,this.index=0}_next(fe){let Ce;const re=this.index++;try{Ce=this.project(fe,re)}catch(Ee){return void this.destination.error(Ee)}this._innerSub(Ce)}_innerSub(fe){const Ce=this.innerSubscription;Ce&&Ce.unsubscribe();const re=new G.IY(this),Ee=this.destination;Ee.add(re),this.innerSubscription=(0,G.ft)(fe,re),this.innerSubscription!==re&&Ee.add(this.innerSubscription)}_complete(){const{innerSubscription:fe}=this;(!fe||fe.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(fe){this.destination.next(fe)}}},5257:(jt,rt,Q)=>{"use strict";Q.d(rt,{q:()=>E});var R=Q(7393),c=Q(7108),G=Q(9193);function E(ke){return fe=>0===ke?(0,G.c)():fe.lift(new Ve(ke))}class Ve{constructor(fe){if(this.total=fe,this.total<0)throw new c.W}call(fe,Ce){return Ce.subscribe(new ve(fe,this.total))}}class ve extends R.L{constructor(fe,Ce){super(fe),this.total=Ce,this.count=0}_next(fe){const Ce=this.total,re=++this.count;re<=Ce&&(this.destination.next(fe),re===Ce&&(this.destination.complete(),this.unsubscribe()))}}},3342:(jt,rt,Q)=>{"use strict";Q.d(rt,{b:()=>E});var R=Q(7393);function c(){}var G=Q(9105);function E(ke,fe,Ce){return function(Ee){return Ee.lift(new Ve(ke,fe,Ce))}}class Ve{constructor(fe,Ce,re){this.nextOrObserver=fe,this.error=Ce,this.complete=re}call(fe,Ce){return Ce.subscribe(new ve(fe,this.nextOrObserver,this.error,this.complete))}}class ve extends R.L{constructor(fe,Ce,re,Ee){super(fe),this._tapNext=c,this._tapError=c,this._tapComplete=c,this._tapError=re||c,this._tapComplete=Ee||c,(0,G.m)(Ce)?(this._context=this,this._tapNext=Ce):Ce&&(this._context=Ce,this._tapNext=Ce.next||c,this._tapError=Ce.error||c,this._tapComplete=Ce.complete||c)}_next(fe){try{this._tapNext.call(this._context,fe)}catch(Ce){return void this.destination.error(Ce)}this.destination.next(fe)}_error(fe){try{this._tapError.call(this._context,fe)}catch(Ce){return void this.destination.error(Ce)}this.destination.error(fe)}_complete(){try{this._tapComplete.call(this._context)}catch(fe){return void this.destination.error(fe)}return this.destination.complete()}}},4635:(jt,rt,Q)=>{"use strict";Q.d(rt,{T:()=>G});var R=Q(3410),c=Q(7393);function G(ke=ve){return fe=>fe.lift(new E(ke))}class E{constructor(fe){this.errorFactory=fe}call(fe,Ce){return Ce.subscribe(new Ve(fe,this.errorFactory))}}class Ve extends c.L{constructor(fe,Ce){super(fe),this.errorFactory=Ce,this.hasValue=!1}_next(fe){this.hasValue=!0,this.destination.next(fe)}_complete(){if(this.hasValue)return this.destination.complete();{let fe;try{fe=this.errorFactory()}catch(Ce){fe=Ce}this.destination.error(fe)}}}function ve(){return new R.K}},4087:(jt,rt,Q)=>{"use strict";Q.d(rt,{r:()=>G});var R=Q(7574),c=Q(5319);function G(E,Ve){return new R.y(ve=>{const ke=new c.w;let fe=0;return ke.add(Ve.schedule(function(){fe!==E.length?(ve.next(E[fe++]),ve.closed||ke.add(this.schedule())):ve.complete()})),ke})}},6465:(jt,rt,Q)=>{"use strict";Q.d(rt,{o:()=>G});var R=Q(5319);class c extends R.w{constructor(Ve,ve){super()}schedule(Ve,ve=0){return this}}class G extends c{constructor(Ve,ve){super(Ve,ve),this.scheduler=Ve,this.work=ve,this.pending=!1}schedule(Ve,ve=0){if(this.closed)return this;this.state=Ve;const ke=this.id,fe=this.scheduler;return null!=ke&&(this.id=this.recycleAsyncId(fe,ke,ve)),this.pending=!0,this.delay=ve,this.id=this.id||this.requestAsyncId(fe,this.id,ve),this}requestAsyncId(Ve,ve,ke=0){return setInterval(Ve.flush.bind(Ve,this),ke)}recycleAsyncId(Ve,ve,ke=0){if(null!==ke&&this.delay===ke&&!1===this.pending)return ve;clearInterval(ve)}execute(Ve,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ke=this._execute(Ve,ve);if(ke)return ke;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ve,ve){let fe,ke=!1;try{this.work(Ve)}catch(Ce){ke=!0,fe=!!Ce&&Ce||new Error(Ce)}if(ke)return this.unsubscribe(),fe}_unsubscribe(){const Ve=this.id,ve=this.scheduler,ke=ve.actions,fe=ke.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==fe&&ke.splice(fe,1),null!=Ve&&(this.id=this.recycleAsyncId(ve,Ve,null)),this.delay=null}}},6102:(jt,rt,Q)=>{"use strict";Q.d(rt,{v:()=>c});let R=(()=>{class G{constructor(Ve,ve=G.now){this.SchedulerAction=Ve,this.now=ve}schedule(Ve,ve=0,ke){return new this.SchedulerAction(this,Ve).schedule(ke,ve)}}return G.now=()=>Date.now(),G})();class c extends R{constructor(E,Ve=R.now){super(E,()=>c.delegate&&c.delegate!==this?c.delegate.now():Ve()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(E,Ve=0,ve){return c.delegate&&c.delegate!==this?c.delegate.schedule(E,Ve,ve):super.schedule(E,Ve,ve)}flush(E){const{actions:Ve}=this;if(this.active)return void Ve.push(E);let ve;this.active=!0;do{if(ve=E.execute(E.state,E.delay))break}while(E=Ve.shift());if(this.active=!1,ve){for(;E=Ve.shift();)E.unsubscribe();throw ve}}}},4581:(jt,rt,Q)=>{"use strict";Q.d(rt,{e:()=>pe,E:()=>Ee});let R=1;const c=Promise.resolve(),G={};function E(ye){return ye in G&&(delete G[ye],!0)}const Ve={setImmediate(ye){const De=R++;return G[De]=!0,c.then(()=>E(De)&&ye()),De},clearImmediate(ye){E(ye)}};var ke=Q(6465),Ce=Q(6102);const Ee=new class extends Ce.v{flush(De){this.active=!0,this.scheduled=void 0;const{actions:xe}=this;let We,X=-1,Re=xe.length;De=De||xe.shift();do{if(We=De.execute(De.state,De.delay))break}while(++X<Re&&(De=xe.shift()));if(this.active=!1,We){for(;++X<Re&&(De=xe.shift());)De.unsubscribe();throw We}}}(class extends ke.o{constructor(De,xe){super(De,xe),this.scheduler=De,this.work=xe}requestAsyncId(De,xe,We=0){return null!==We&&We>0?super.requestAsyncId(De,xe,We):(De.actions.push(this),De.scheduled||(De.scheduled=Ve.setImmediate(De.flush.bind(De,null))))}recycleAsyncId(De,xe,We=0){if(null!==We&&We>0||null===We&&this.delay>0)return super.recycleAsyncId(De,xe,We);0===De.actions.length&&(Ve.clearImmediate(xe),De.scheduled=void 0)}}),pe=Ee},3637:(jt,rt,Q)=>{"use strict";Q.d(rt,{z:()=>G,P:()=>E});var R=Q(6465);const G=new(Q(6102).v)(R.o),E=G},7771:(jt,rt,Q)=>{"use strict";Q.d(rt,{c:()=>ve,N:()=>Ve});var R=Q(6465),G=Q(6102);const Ve=new class extends G.v{}(class extends R.o{constructor(fe,Ce){super(fe,Ce),this.scheduler=fe,this.work=Ce}schedule(fe,Ce=0){return Ce>0?super.schedule(fe,Ce):(this.delay=Ce,this.state=fe,this.scheduler.flush(this),this)}execute(fe,Ce){return Ce>0||this.closed?super.execute(fe,Ce):this._execute(fe,Ce)}requestAsyncId(fe,Ce,re=0){return null!==re&&re>0||null===re&&this.delay>0?super.requestAsyncId(fe,Ce,re):fe.flush(this)}}),ve=Ve},377:(jt,rt,Q)=>{"use strict";Q.d(rt,{hZ:()=>c});const c="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(jt,rt,Q)=>{"use strict";Q.d(rt,{L:()=>R});const R="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(jt,rt,Q)=>{"use strict";Q.d(rt,{b:()=>R});const R="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(jt,rt,Q)=>{"use strict";Q.d(rt,{W:()=>c});const c=(()=>{function G(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return G.prototype=Object.create(Error.prototype),G})()},3410:(jt,rt,Q)=>{"use strict";Q.d(rt,{K:()=>c});const c=(()=>{function G(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return G.prototype=Object.create(Error.prototype),G})()},7971:(jt,rt,Q)=>{"use strict";Q.d(rt,{N:()=>c});const c=(()=>{function G(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return G.prototype=Object.create(Error.prototype),G})()},4449:(jt,rt,Q)=>{"use strict";function R(c){setTimeout(()=>{throw c},0)}Q.d(rt,{z:()=>R})},4487:(jt,rt,Q)=>{"use strict";function R(c){return c}Q.d(rt,{y:()=>R})},9796:(jt,rt,Q)=>{"use strict";Q.d(rt,{k:()=>R});const R=Array.isArray||(c=>c&&"number"==typeof c.length)},9489:(jt,rt,Q)=>{"use strict";Q.d(rt,{z:()=>R});const R=c=>c&&"number"==typeof c.length&&"function"!=typeof c},9105:(jt,rt,Q)=>{"use strict";function R(c){return"function"==typeof c}Q.d(rt,{m:()=>R})},6561:(jt,rt,Q)=>{"use strict";Q.d(rt,{k:()=>c});var R=Q(9796);function c(G){return!(0,R.k)(G)&&G-parseFloat(G)+1>=0}},1555:(jt,rt,Q)=>{"use strict";function R(c){return null!==c&&"object"==typeof c}Q.d(rt,{K:()=>R})},4072:(jt,rt,Q)=>{"use strict";function R(c){return!!c&&"function"!=typeof c.subscribe&&"function"==typeof c.then}Q.d(rt,{t:()=>R})},4869:(jt,rt,Q)=>{"use strict";function R(c){return c&&"function"==typeof c.schedule}Q.d(rt,{K:()=>R})},7444:(jt,rt,Q)=>{"use strict";Q.d(rt,{s:()=>Ee});var R=Q(5015),c=Q(4449),E=Q(377),ve=Q(6554),fe=Q(9489),Ce=Q(4072),re=Q(1555);const Ee=pe=>{if(pe&&"function"==typeof pe[ve.L])return(pe=>ye=>{const De=pe[ve.L]();if("function"!=typeof De.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return De.subscribe(ye)})(pe);if((0,fe.z)(pe))return(0,R.V)(pe);if((0,Ce.t)(pe))return(pe=>ye=>(pe.then(De=>{ye.closed||(ye.next(De),ye.complete())},De=>ye.error(De)).then(null,c.z),ye))(pe);if(pe&&"function"==typeof pe[E.hZ])return(pe=>ye=>{const De=pe[E.hZ]();for(;;){let xe;try{xe=De.next()}catch(We){return ye.error(We),ye}if(xe.done){ye.complete();break}if(ye.next(xe.value),ye.closed)break}return"function"==typeof De.return&&ye.add(()=>{De.return&&De.return()}),ye})(pe);{const De=`You provided ${(0,re.K)(pe)?"an invalid object":`'${pe}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(De)}}},5015:(jt,rt,Q)=>{"use strict";Q.d(rt,{V:()=>R});const R=c=>G=>{for(let E=0,Ve=c.length;E<Ve&&!G.closed;E++)G.next(c[E]);G.complete()}},509:(jt,rt,Q)=>{"use strict";Q.d(rt,{D:()=>Ve});var R=Q(7393);class c extends R.L{constructor(ke,fe,Ce){super(),this.parent=ke,this.outerValue=fe,this.outerIndex=Ce,this.index=0}_next(ke){this.parent.notifyNext(this.outerValue,ke,this.outerIndex,this.index++,this)}_error(ke){this.parent.notifyError(ke,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var G=Q(7444),E=Q(7574);function Ve(ve,ke,fe,Ce,re=new c(ve,fe,Ce)){if(!re.closed)return ke instanceof E.y?ke.subscribe(re):(0,G.s)(ke)(re)}},3370:(jt,rt,Q)=>{"use strict";Q.r(rt),Q.d(rt,{ChatModule:()=>w});var R=Q(8583),c=Q(665),G=Q(2340),E=Q(7716),Ve=Q(3210),ve=Q(2213);let ke=(()=>{class m{generateId(){let d="";const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",M=b.length;for(var V=0;V<20;V++)d+=b.charAt(Math.floor(Math.random()*M));return d}}return m.\u0275fac=function(d){return new(d||m)},m.\u0275prov=E.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();var fe=Q(1841),Ce=Q(2152);function re(m){return null!=m&&"false"!=`${m}`}function Ee(m,v=0){return function(m){return!isNaN(parseFloat(m))&&!isNaN(Number(m))}(m)?Number(m):v}function ye(m){return Array.isArray(m)?m:[m]}function De(m){return null==m?"":"string"==typeof m?m:`${m}px`}function xe(m){return m instanceof E.SBq?m.nativeElement:m}var X=Q(7574),Re=Q(9765),_t=Q(4395);let _n=(()=>{class m{create(d){return"undefined"==typeof MutationObserver?null:new MutationObserver(d)}}return m.\u0275fac=function(d){return new(d||m)},m.\u0275prov=E.Yz7({factory:function(){return new m},token:m,providedIn:"root"}),m})(),Nt=(()=>{class m{constructor(d){this._mutationObserverFactory=d,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((d,b)=>this._cleanupObserver(b))}observe(d){const b=xe(d);return new X.y(M=>{const J=this._observeElement(b).subscribe(M);return()=>{J.unsubscribe(),this._unobserveElement(b)}})}_observeElement(d){if(this._observedElements.has(d))this._observedElements.get(d).count++;else{const b=new Re.xQ,M=this._mutationObserverFactory.create(V=>b.next(V));M&&M.observe(d,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(d,{observer:M,stream:b,count:1})}return this._observedElements.get(d).stream}_unobserveElement(d){this._observedElements.has(d)&&(this._observedElements.get(d).count--,this._observedElements.get(d).count||this._cleanupObserver(d))}_cleanupObserver(d){if(this._observedElements.has(d)){const{observer:b,stream:M}=this._observedElements.get(d);b&&b.disconnect(),M.complete(),this._observedElements.delete(d)}}}return m.\u0275fac=function(d){return new(d||m)(E.LFG(_n))},m.\u0275prov=E.Yz7({factory:function(){return new m(E.LFG(_n))},token:m,providedIn:"root"}),m})(),ut=(()=>{class m{constructor(d,b,M){this._contentObserver=d,this._elementRef=b,this._ngZone=M,this.event=new E.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(d){this._disabled=re(d),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(d){this._debounce=Ee(d),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const d=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?d.pipe((0,_t.b)(this.debounce)):d).subscribe(this.event)})}_unsubscribe(){var d;null===(d=this._currentSubscription)||void 0===d||d.unsubscribe()}}return m.\u0275fac=function(d){return new(d||m)(E.Y36(Nt),E.Y36(E.SBq),E.Y36(E.R0b))},m.\u0275dir=E.lG2({type:m,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),m})(),Yt=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({providers:[_n]}),m})();var wt=Q(5319),Et=(Q(6215),Q(5917));function Qn(m,...v){return v.length?v.some(d=>m[d]):m.altKey||m.shiftKey||m.ctrlKey||m.metaKey}var po=Q(3342),Ji=Q(5435),go=Q(8002),ui=Q(5257),Xi=Q(7393),W=Q(7519),he=Q(5345);function lt(m){return v=>v.lift(new Vt(m))}class Vt{constructor(v){this.notifier=v}call(v,d){const b=new wn(v),M=(0,he.ft)(this.notifier,new he.IY(b));return M&&!b.seenValue?(b.add(M),d.subscribe(b)):b}}class wn extends he.Ds{constructor(v){super(v),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let Ir;try{Ir="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(m){Ir=!1}let co,mo,_e,$n=(()=>{class m{constructor(d){this._platformId=d,this.isBrowser=this._platformId?(0,R.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Ir)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return m.\u0275fac=function(d){return new(d||m)(E.LFG(E.Lbi))},m.\u0275prov=E.Yz7({factory:function(){return new m(E.LFG(E.Lbi))},token:m,providedIn:"root"}),m})(),hr=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({}),m})();function fr(m){return function(){if(null==co&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>co=!0}))}finally{co=co||!1}return co}()?m:!!m.capture}function Y(){if(null==mo){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return mo=!1,mo;if("scrollBehavior"in document.documentElement.style)mo=!0;else{const m=Element.prototype.scrollTo;mo=!!m&&!/\{\s*\[native code\]\s*\}/.test(m.toString())}}return mo}function ee(m){return m.composedPath?m.composedPath()[0]:m.target}function Le(){return void 0!==_e.__karma__&&!!_e.__karma__||void 0!==_e.jasmine&&!!_e.jasmine||void 0!==_e.jest&&!!_e.jest||void 0!==_e.Mocha&&!!_e.Mocha}_e="undefined"!=typeof global?global:"undefined"!=typeof window?window:{};class eo extends class{constructor(v){this._items=v,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Re.xQ,this._typeaheadSubscription=wt.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=d=>d.disabled,this._pressedLetters=[],this.tabOut=new Re.xQ,this.change=new Re.xQ,v instanceof E.n_E&&v.changes.subscribe(d=>{if(this._activeItem){const M=d.toArray().indexOf(this._activeItem);M>-1&&M!==this._activeItemIndex&&(this._activeItemIndex=M)}})}skipPredicate(v){return this._skipPredicateFn=v,this}withWrap(v=!0){return this._wrap=v,this}withVerticalOrientation(v=!0){return this._vertical=v,this}withHorizontalOrientation(v){return this._horizontal=v,this}withAllowedModifierKeys(v){return this._allowedModifierKeys=v,this}withTypeAhead(v=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,po.b)(d=>this._pressedLetters.push(d)),(0,_t.b)(v),(0,Ji.h)(()=>this._pressedLetters.length>0),(0,go.U)(()=>this._pressedLetters.join(""))).subscribe(d=>{const b=this._getItemsArray();for(let M=1;M<b.length+1;M++){const V=(this._activeItemIndex+M)%b.length,J=b[V];if(!this._skipPredicateFn(J)&&0===J.getLabel().toUpperCase().trim().indexOf(d)){this.setActiveItem(V);break}}this._pressedLetters=[]}),this}withHomeAndEnd(v=!0){return this._homeAndEnd=v,this}setActiveItem(v){const d=this._activeItem;this.updateActiveItem(v),this._activeItem!==d&&this.change.next(this._activeItemIndex)}onKeydown(v){const d=v.keyCode,M=["altKey","ctrlKey","metaKey","shiftKey"].every(V=>!v[V]||this._allowedModifierKeys.indexOf(V)>-1);switch(d){case 9:return void this.tabOut.next();case 40:if(this._vertical&&M){this.setNextItemActive();break}return;case 38:if(this._vertical&&M){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&M){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&M){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&M){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&M){this.setLastItemActive();break}return;default:return void((M||Qn(v,"shiftKey"))&&(v.key&&1===v.key.length?this._letterKeyStream.next(v.key.toLocaleUpperCase()):(d>=65&&d<=90||d>=48&&d<=57)&&this._letterKeyStream.next(String.fromCharCode(d))))}this._pressedLetters=[],v.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(v){const d=this._getItemsArray(),b="number"==typeof v?v:d.indexOf(v),M=d[b];this._activeItem=null==M?null:M,this._activeItemIndex=b}_setActiveItemByDelta(v){this._wrap?this._setActiveInWrapMode(v):this._setActiveInDefaultMode(v)}_setActiveInWrapMode(v){const d=this._getItemsArray();for(let b=1;b<=d.length;b++){const M=(this._activeItemIndex+v*b+d.length)%d.length;if(!this._skipPredicateFn(d[M]))return void this.setActiveItem(M)}}_setActiveInDefaultMode(v){this._setActiveItemByIndex(this._activeItemIndex+v,v)}_setActiveItemByIndex(v,d){const b=this._getItemsArray();if(b[v]){for(;this._skipPredicateFn(b[v]);)if(!b[v+=d])return;this.setActiveItem(v)}}_getItemsArray(){return this._items instanceof E.n_E?this._items.toArray():this._items}}{setActiveItem(v){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(v),this.activeItem&&this.activeItem.setActiveStyles()}}"undefined"!=typeof Element&&Element;const So=new E.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),ci=new E.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let _o=(()=>{class m{constructor(d,b,M,V){this._ngZone=b,this._defaultOptions=V,this._document=M,this._liveElement=d||this._createLiveElement()}announce(d,...b){const M=this._defaultOptions;let V,J;return 1===b.length&&"number"==typeof b[0]?J=b[0]:[V,J]=b,this.clear(),clearTimeout(this._previousTimeout),V||(V=M&&M.politeness?M.politeness:"polite"),null==J&&M&&(J=M.duration),this._liveElement.setAttribute("aria-live",V),this._ngZone.runOutsideAngular(()=>new Promise(we=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=d,we(),"number"==typeof J&&(this._previousTimeout=setTimeout(()=>this.clear(),J))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const d="cdk-live-announcer-element",b=this._document.getElementsByClassName(d),M=this._document.createElement("div");for(let V=0;V<b.length;V++)b[V].parentNode.removeChild(b[V]);return M.classList.add(d),M.classList.add("cdk-visually-hidden"),M.setAttribute("aria-atomic","true"),M.setAttribute("aria-live","polite"),this._document.body.appendChild(M),M}}return m.\u0275fac=function(d){return new(d||m)(E.LFG(So,8),E.LFG(E.R0b),E.LFG(R.K0),E.LFG(ci,8))},m.\u0275prov=E.Yz7({factory:function(){return new m(E.LFG(So,8),E.LFG(E.R0b),E.LFG(R.K0),E.LFG(ci,8))},token:m,providedIn:"root"}),m})();const no="cdk-high-contrast-black-on-white",bi="cdk-high-contrast-white-on-black",Cn="cdk-high-contrast-active";let Mn=(()=>{class m{constructor(d,b){this._platform=d,this._document=b}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const d=this._document.createElement("div");d.style.backgroundColor="rgb(1,2,3)",d.style.position="absolute",this._document.body.appendChild(d);const b=this._document.defaultView||window,M=b&&b.getComputedStyle?b.getComputedStyle(d):null,V=(M&&M.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(d),V){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const d=this._document.body.classList;d.remove(Cn),d.remove(no),d.remove(bi),this._hasCheckedHighContrastMode=!0;const b=this.getHighContrastMode();1===b?(d.add(Cn),d.add(no)):2===b&&(d.add(Cn),d.add(bi))}}}return m.\u0275fac=function(d){return new(d||m)(E.LFG($n),E.LFG(R.K0))},m.\u0275prov=E.Yz7({factory:function(){return new m(E.LFG($n),E.LFG(R.K0))},token:m,providedIn:"root"}),m})();const Or=new E.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,E.f3M)(R.K0)}});let Wr=(()=>{class m{constructor(d){if(this.value="ltr",this.change=new E.vpe,d){const M=d.documentElement?d.documentElement.dir:null,V=(d.body?d.body.dir:null)||M;this.value="ltr"===V||"rtl"===V?V:"ltr"}}ngOnDestroy(){this.change.complete()}}return m.\u0275fac=function(d){return new(d||m)(E.LFG(Or,8))},m.\u0275prov=E.Yz7({factory:function(){return new m(E.LFG(Or,8))},token:m,providedIn:"root"}),m})(),qi=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({}),m})();const ii=new E.GfV("12.2.11");var Rs=Q(6237);function ro(m,v){if(1&m&&E._UZ(0,"mat-pseudo-checkbox",4),2&m){const d=E.oxw();E.Q6J("state",d.selected?"checked":"unchecked")("disabled",d.disabled)}}function oi(m,v){if(1&m&&(E.TgZ(0,"span",5),E._uU(1),E.qZA()),2&m){const d=E.oxw();E.xp6(1),E.hij("(",d.group.label,")")}}const ws=["*"],na=new E.GfV("12.2.11"),Sc=new E.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let gt,is=(()=>{class m{constructor(d,b,M){this._hasDoneGlobalChecks=!1,this._document=M,d._applyBodyHighContrastModeCssClasses(),this._sanityChecks=b,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(d){return!(!(0,E.X6Q)()||Le())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[d])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const d=this._document.createElement("div");d.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(d);const b=getComputedStyle(d);b&&"none"!==b.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(d)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&na.full!==ii.full&&console.warn("The Angular Material version ("+na.full+") does not match the Angular CDK version ("+ii.full+").\nPlease ensure the versions of these two packages exactly match.")}}return m.\u0275fac=function(d){return new(d||m)(E.LFG(Mn),E.LFG(Sc,8),E.LFG(R.K0))},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({imports:[[qi],qi]}),m})();function ra(m){return class extends m{constructor(...v){super(...v),this._disabled=!1}get disabled(){return this._disabled}set disabled(v){this._disabled=re(v)}}}function Zu(m,v){return class extends m{constructor(...d){super(...d),this.defaultColor=v,this.color=v}get color(){return this._color}set color(d){const b=d||this.defaultColor;b!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),b&&this._elementRef.nativeElement.classList.add(`mat-${b}`),this._color=b)}}}function $a(m){return class extends m{constructor(...v){super(...v),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(v){this._disableRipple=re(v)}}}function ia(m,v=0){return class extends m{constructor(...d){super(...d),this._tabIndex=v,this.defaultTabIndex=v}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(d){this._tabIndex=null!=d?Ee(d):this.defaultTabIndex}}}function vu(m){return class extends m{constructor(...v){super(...v),this.stateChanges=new Re.xQ,this.errorState=!1}updateErrorState(){const v=this.errorState,V=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);V!==v&&(this.errorState=V,this.stateChanges.next())}}}try{gt="undefined"!=typeof Intl}catch(m){gt=!1}let Tr=(()=>{class m{isErrorState(d,b){return!!(d&&d.invalid&&(d.touched||b&&b.submitted))}}return m.\u0275fac=function(d){return new(d||m)},m.\u0275prov=E.Yz7({factory:function(){return new m},token:m,providedIn:"root"}),m})();class O{constructor(v,d,b){this._renderer=v,this.element=d,this.config=b,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const z={enterDuration:225,exitDuration:150},le=fr({passive:!0}),Te=["mousedown","touchstart"],Ge=["mouseup","mouseleave","touchend","touchcancel"];class Tt{constructor(v,d,b,M){this._target=v,this._ngZone=d,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,M.isBrowser&&(this._containerElement=xe(b))}fadeInRipple(v,d,b={}){const M=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),V=Object.assign(Object.assign({},z),b.animation);b.centered&&(v=M.left+M.width/2,d=M.top+M.height/2);const J=b.radius||function(m,v,d){const b=Math.max(Math.abs(m-d.left),Math.abs(m-d.right)),M=Math.max(Math.abs(v-d.top),Math.abs(v-d.bottom));return Math.sqrt(b*b+M*M)}(v,d,M),we=v-M.left,Oe=d-M.top,et=V.enterDuration,yt=document.createElement("div");yt.classList.add("mat-ripple-element"),yt.style.left=we-J+"px",yt.style.top=Oe-J+"px",yt.style.height=2*J+"px",yt.style.width=2*J+"px",null!=b.color&&(yt.style.backgroundColor=b.color),yt.style.transitionDuration=`${et}ms`,this._containerElement.appendChild(yt),window.getComputedStyle(yt).getPropertyValue("opacity"),yt.style.transform="scale(1)";const $t=new O(this,yt,b);return $t.state=0,this._activeRipples.add($t),b.persistent||(this._mostRecentTransientRipple=$t),this._runTimeoutOutsideZone(()=>{const gn=$t===this._mostRecentTransientRipple;$t.state=1,!b.persistent&&(!gn||!this._isPointerDown)&&$t.fadeOut()},et),$t}fadeOutRipple(v){const d=this._activeRipples.delete(v);if(v===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!d)return;const b=v.element,M=Object.assign(Object.assign({},z),v.config.animation);b.style.transitionDuration=`${M.exitDuration}ms`,b.style.opacity="0",v.state=2,this._runTimeoutOutsideZone(()=>{v.state=3,b.parentNode.removeChild(b)},M.exitDuration)}fadeOutAll(){this._activeRipples.forEach(v=>v.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(v=>{v.config.persistent||v.fadeOut()})}setupTriggerEvents(v){const d=xe(v);!d||d===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=d,this._registerEvents(Te))}handleEvent(v){"mousedown"===v.type?this._onMousedown(v):"touchstart"===v.type?this._onTouchStart(v):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Ge),this._pointerUpEventsRegistered=!0)}_onMousedown(v){const d=0===(m=v).offsetX&&0===m.offsetY,b=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;var m;!this._target.rippleDisabled&&!d&&!b&&(this._isPointerDown=!0,this.fadeInRipple(v.clientX,v.clientY,this._target.rippleConfig))}_onTouchStart(v){if(!this._target.rippleDisabled&&!function(m){const v=m.touches&&m.touches[0]||m.changedTouches&&m.changedTouches[0];return!(!v||-1!==v.identifier||null!=v.radiusX&&1!==v.radiusX||null!=v.radiusY&&1!==v.radiusY)}(v)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const d=v.changedTouches;for(let b=0;b<d.length;b++)this.fadeInRipple(d[b].clientX,d[b].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(v=>{!v.config.persistent&&(1===v.state||v.config.terminateOnPointerUp&&0===v.state)&&v.fadeOut()}))}_runTimeoutOutsideZone(v,d=0){this._ngZone.runOutsideAngular(()=>setTimeout(v,d))}_registerEvents(v){this._ngZone.runOutsideAngular(()=>{v.forEach(d=>{this._triggerElement.addEventListener(d,this,le)})})}_removeTriggerEvents(){this._triggerElement&&(Te.forEach(v=>{this._triggerElement.removeEventListener(v,this,le)}),this._pointerUpEventsRegistered&&Ge.forEach(v=>{this._triggerElement.removeEventListener(v,this,le)}))}}const Wn=new E.OlP("mat-ripple-global-options");let xr=(()=>{class m{constructor(d,b,M,V,J){this._elementRef=d,this._animationMode=J,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=V||{},this._rippleRenderer=new Tt(this,b,d,M)}get disabled(){return this._disabled}set disabled(d){d&&this.fadeOutAllNonPersistent(),this._disabled=d,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(d){this._trigger=d,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(d,b=0,M){return"number"==typeof d?this._rippleRenderer.fadeInRipple(d,b,Object.assign(Object.assign({},this.rippleConfig),M)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),d))}}return m.\u0275fac=function(d){return new(d||m)(E.Y36(E.SBq),E.Y36(E.R0b),E.Y36($n),E.Y36(Wn,8),E.Y36(Rs.Qb,8))},m.\u0275dir=E.lG2({type:m,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(d,b){2&d&&E.ekj("mat-ripple-unbounded",b.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),m})(),jn=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({imports:[[is,hr],is]}),m})(),vo=(()=>{class m{constructor(d){this._animationMode=d,this.state="unchecked",this.disabled=!1}}return m.\u0275fac=function(d){return new(d||m)(E.Y36(Rs.Qb,8))},m.\u0275cmp=E.Xpm({type:m,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(d,b){2&d&&E.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===b.state)("mat-pseudo-checkbox-checked","checked"===b.state)("mat-pseudo-checkbox-disabled",b.disabled)("_mat-animation-noopable","NoopAnimations"===b._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(d,b){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),m})(),os=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({imports:[[is]]}),m})();const oo=new E.OlP("MAT_OPTION_PARENT_COMPONENT"),Ws=ra(class{});let ss=0,as=(()=>{class m extends Ws{constructor(d){var b;super(),this._labelId="mat-optgroup-label-"+ss++,this._inert=null!==(b=null==d?void 0:d.inertGroups)&&void 0!==b&&b}}return m.\u0275fac=function(d){return new(d||m)(E.Y36(oo,8))},m.\u0275dir=E.lG2({type:m,inputs:{label:"label"},features:[E.qOj]}),m})();const oa=new E.OlP("MatOptgroup");let Ti=0;class sa{constructor(v,d=!1){this.source=v,this.isUserInput=d}}let qu=(()=>{class m{constructor(d,b,M,V){this._element=d,this._changeDetectorRef=b,this._parent=M,this.group=V,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Ti++,this.onSelectionChange=new E.vpe,this._stateChanges=new Re.xQ}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(d){this._disabled=re(d)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(d,b){const M=this._getHostElement();"function"==typeof M.focus&&M.focus(b)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(d){(13===d.keyCode||32===d.keyCode)&&!Qn(d)&&(this._selectViaInteraction(),d.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const d=this.viewValue;d!==this._mostRecentViewValue&&(this._mostRecentViewValue=d,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(d=!1){this.onSelectionChange.emit(new sa(this,d))}}return m.\u0275fac=function(d){return new(d||m)(E.Y36(E.SBq),E.Y36(E.sBO),E.Y36(void 0),E.Y36(as))},m.\u0275dir=E.lG2({type:m,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),m})(),Ja=(()=>{class m extends qu{constructor(d,b,M,V){super(d,b,M,V)}}return m.\u0275fac=function(d){return new(d||m)(E.Y36(E.SBq),E.Y36(E.sBO),E.Y36(oo,8),E.Y36(oa,8))},m.\u0275cmp=E.Xpm({type:m,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(d,b){1&d&&E.NdJ("click",function(){return b._selectViaInteraction()})("keydown",function(V){return b._handleKeydown(V)}),2&d&&(E.Ikx("id",b.id),E.uIk("tabindex",b._getTabIndex())("aria-selected",b._getAriaSelected())("aria-disabled",b.disabled.toString()),E.ekj("mat-selected",b.selected)("mat-option-multiple",b.multiple)("mat-active",b.active)("mat-option-disabled",b.disabled))},exportAs:["matOption"],features:[E.qOj],ngContentSelectors:ws,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(d,b){1&d&&(E.F$t(),E.YNc(0,ro,1,2,"mat-pseudo-checkbox",0),E.TgZ(1,"span",1),E.Hsn(2),E.qZA(),E.YNc(3,oi,2,1,"span",2),E._UZ(4,"div",3)),2&d&&(E.Q6J("ngIf",b.multiple),E.xp6(3),E.Q6J("ngIf",b.group&&b.group._inert),E.xp6(1),E.Q6J("matRippleTrigger",b._getHostElement())("matRippleDisabled",b.disabled||b.disableRipple))},directives:[R.O5,xr,vo],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),m})();function Mc(m,v,d){if(d.length){let b=v.toArray(),M=d.toArray(),V=0;for(let J=0;J<m+1;J++)b[J].group&&b[J].group===M[V]&&V++;return V}return 0}let Ic=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({imports:[[jn,R.ez,is,os]]}),m})();var Xa=Q(6682),Da=Q(9796),Oc=Q(9105);function ks(m,v,d,b){return(0,Oc.m)(d)&&(b=d,d=void 0),b?ks(m,v,d).pipe((0,go.U)(M=>(0,Da.k)(M)?b(...M):b(M))):new X.y(M=>{Fs(m,v,function(J){M.next(arguments.length>1?Array.prototype.slice.call(arguments):J)},M,d)})}function Fs(m,v,d,b,M){let V;if(function(m){return m&&"function"==typeof m.addEventListener&&"function"==typeof m.removeEventListener}(m)){const J=m;m.addEventListener(v,d,M),V=()=>J.removeEventListener(v,d,M)}else if(function(m){return m&&"function"==typeof m.on&&"function"==typeof m.off}(m)){const J=m;m.on(v,d),V=()=>J.off(v,d)}else if(function(m){return m&&"function"==typeof m.addListener&&"function"==typeof m.removeListener}(m)){const J=m;m.addListener(v,d),V=()=>J.removeListener(v,d)}else{if(!m||!m.length)throw new TypeError("Invalid event target");for(let J=0,we=m.length;J<we;J++)Fs(m[J],v,d,b,M)}b.add(V)}var ki=Q(9761),so=Q(7238);const Ql=["underline"],Xo=["connectionContainer"],yo=["inputContainer"],Ys=["label"];function Ao(m,v){1&m&&(E.ynx(0),E.TgZ(1,"div",14),E._UZ(2,"div",15),E._UZ(3,"div",16),E._UZ(4,"div",17),E.qZA(),E.TgZ(5,"div",18),E._UZ(6,"div",15),E._UZ(7,"div",16),E._UZ(8,"div",17),E.qZA(),E.BQk())}function eu(m,v){1&m&&(E.TgZ(0,"div",19),E.Hsn(1,1),E.qZA())}function dd(m,v){if(1&m&&(E.ynx(0),E.Hsn(1,2),E.TgZ(2,"span"),E._uU(3),E.qZA(),E.BQk()),2&m){const d=E.oxw(2);E.xp6(3),E.Oqu(d._control.placeholder)}}function xc(m,v){1&m&&E.Hsn(0,3,["*ngSwitchCase","true"])}function hd(m,v){1&m&&(E.TgZ(0,"span",23),E._uU(1," *"),E.qZA())}function Vh(m,v){if(1&m){const d=E.EpF();E.TgZ(0,"label",20,21),E.NdJ("cdkObserveContent",function(){return E.CHM(d),E.oxw().updateOutlineGap()}),E.YNc(2,dd,4,1,"ng-container",12),E.YNc(3,xc,1,0,"ng-content",12),E.YNc(4,hd,2,0,"span",22),E.qZA()}if(2&m){const d=E.oxw();E.ekj("mat-empty",d._control.empty&&!d._shouldAlwaysFloat())("mat-form-field-empty",d._control.empty&&!d._shouldAlwaysFloat())("mat-accent","accent"==d.color)("mat-warn","warn"==d.color),E.Q6J("cdkObserveContentDisabled","outline"!=d.appearance)("id",d._labelId)("ngSwitch",d._hasLabel()),E.uIk("for",d._control.id)("aria-owns",d._control.id),E.xp6(2),E.Q6J("ngSwitchCase",!1),E.xp6(1),E.Q6J("ngSwitchCase",!0),E.xp6(1),E.Q6J("ngIf",!d.hideRequiredMarker&&d._control.required&&!d._control.disabled)}}function uh(m,v){1&m&&(E.TgZ(0,"div",24),E.Hsn(1,4),E.qZA())}function yl(m,v){if(1&m&&(E.TgZ(0,"div",25,26),E._UZ(2,"span",27),E.qZA()),2&m){const d=E.oxw();E.xp6(2),E.ekj("mat-accent","accent"==d.color)("mat-warn","warn"==d.color)}}function Es(m,v){if(1&m&&(E.TgZ(0,"div"),E.Hsn(1,5),E.qZA()),2&m){const d=E.oxw();E.Q6J("@transitionMessages",d._subscriptAnimationState)}}function Ns(m,v){if(1&m&&(E.TgZ(0,"div",31),E._uU(1),E.qZA()),2&m){const d=E.oxw(2);E.Q6J("id",d._hintLabelId),E.xp6(1),E.Oqu(d.hintLabel)}}function aa(m,v){if(1&m&&(E.TgZ(0,"div",28),E.YNc(1,Ns,2,2,"div",29),E.Hsn(2,6),E._UZ(3,"div",30),E.Hsn(4,7),E.qZA()),2&m){const d=E.oxw();E.Q6J("@transitionMessages",d._subscriptAnimationState),E.xp6(1),E.Q6J("ngIf",d.hintLabel)}}const zu=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Pc=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],$u=new E.OlP("MatError"),Jl={transitionMessages:(0,so.X$)("transitionMessages",[(0,so.SB)("enter",(0,so.oB)({opacity:1,transform:"translateY(0%)"})),(0,so.eR)("void => enter",[(0,so.oB)({opacity:0,transform:"translateY(-5px)"}),(0,so.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Ks=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275dir=E.lG2({type:m}),m})();const tu=new E.OlP("MatHint");let ko=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275dir=E.lG2({type:m,selectors:[["mat-label"]]}),m})(),pd=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275dir=E.lG2({type:m,selectors:[["mat-placeholder"]]}),m})();const wu=new E.OlP("MatPrefix"),Wu=new E.OlP("MatSuffix");let Eu=0;const wl=Zu(class{constructor(m){this._elementRef=m}},"primary"),Di=new E.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Aa=new E.OlP("MatFormField");let gd=(()=>{class m extends wl{constructor(d,b,M,V,J,we,Oe,et){super(d),this._changeDetectorRef=b,this._dir=V,this._defaults=J,this._platform=we,this._ngZone=Oe,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Re.xQ,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Eu++,this._labelId="mat-form-field-label-"+Eu++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==et,this.appearance=J&&J.appearance?J.appearance:"legacy",this._hideRequiredMarker=!(!J||null==J.hideRequiredMarker)&&J.hideRequiredMarker}get appearance(){return this._appearance}set appearance(d){const b=this._appearance;this._appearance=d||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&b!==d&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(d){this._hideRequiredMarker=re(d)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(d){this._hintLabel=d,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(d){d!==this._floatLabel&&(this._floatLabel=d||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(d){this._explicitFormFieldControl=d}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const d=this._control;d.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${d.controlType}`),d.stateChanges.pipe((0,ki.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),d.ngControl&&d.ngControl.valueChanges&&d.ngControl.valueChanges.pipe(lt(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(lt(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Xa.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,ki.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,ki.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(lt(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(d){const b=this._control?this._control.ngControl:null;return b&&b[d]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,ks(this._label.nativeElement,"transitionend").pipe((0,ui.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let d=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&d.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const b=this._hintChildren?this._hintChildren.find(V=>"start"===V.align):null,M=this._hintChildren?this._hintChildren.find(V=>"end"===V.align):null;b?d.push(b.id):this._hintLabel&&d.push(this._hintLabelId),M&&d.push(M.id)}else this._errorChildren&&d.push(...this._errorChildren.map(b=>b.id));this._control.setDescribedByIds(d)}}_validateControlChild(){}updateOutlineGap(){const d=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&d&&d.children.length&&d.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let b=0,M=0;const V=this._connectionContainerRef.nativeElement,J=V.querySelectorAll(".mat-form-field-outline-start"),we=V.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const Oe=V.getBoundingClientRect();if(0===Oe.width&&0===Oe.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const et=this._getStartEnd(Oe),yt=d.children,$t=this._getStartEnd(yt[0].getBoundingClientRect());let gn=0;for(let Gn=0;Gn<yt.length;Gn++)gn+=yt[Gn].offsetWidth;b=Math.abs($t-et)-5,M=gn>0?.75*gn+10:0}for(let Oe=0;Oe<J.length;Oe++)J[Oe].style.width=`${b}px`;for(let Oe=0;Oe<we.length;Oe++)we[Oe].style.width=`${M}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(d){return this._dir&&"rtl"===this._dir.value?d.right:d.left}_isAttachedToDOM(){const d=this._elementRef.nativeElement;if(d.getRootNode){const b=d.getRootNode();return b&&b!==d}return document.documentElement.contains(d)}}return m.\u0275fac=function(d){return new(d||m)(E.Y36(E.SBq),E.Y36(E.sBO),E.Y36(E.SBq),E.Y36(Wr,8),E.Y36(Di,8),E.Y36($n),E.Y36(E.R0b),E.Y36(Rs.Qb,8))},m.\u0275cmp=E.Xpm({type:m,selectors:[["mat-form-field"]],contentQueries:function(d,b,M){if(1&d&&(E.Suo(M,Ks,5),E.Suo(M,Ks,7),E.Suo(M,ko,5),E.Suo(M,ko,7),E.Suo(M,pd,5),E.Suo(M,$u,5),E.Suo(M,tu,5),E.Suo(M,wu,5),E.Suo(M,Wu,5)),2&d){let V;E.iGM(V=E.CRH())&&(b._controlNonStatic=V.first),E.iGM(V=E.CRH())&&(b._controlStatic=V.first),E.iGM(V=E.CRH())&&(b._labelChildNonStatic=V.first),E.iGM(V=E.CRH())&&(b._labelChildStatic=V.first),E.iGM(V=E.CRH())&&(b._placeholderChild=V.first),E.iGM(V=E.CRH())&&(b._errorChildren=V),E.iGM(V=E.CRH())&&(b._hintChildren=V),E.iGM(V=E.CRH())&&(b._prefixChildren=V),E.iGM(V=E.CRH())&&(b._suffixChildren=V)}},viewQuery:function(d,b){if(1&d&&(E.Gf(Ql,5),E.Gf(Xo,7),E.Gf(yo,5),E.Gf(Ys,5)),2&d){let M;E.iGM(M=E.CRH())&&(b.underlineRef=M.first),E.iGM(M=E.CRH())&&(b._connectionContainerRef=M.first),E.iGM(M=E.CRH())&&(b._inputContainerRef=M.first),E.iGM(M=E.CRH())&&(b._label=M.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(d,b){2&d&&E.ekj("mat-form-field-appearance-standard","standard"==b.appearance)("mat-form-field-appearance-fill","fill"==b.appearance)("mat-form-field-appearance-outline","outline"==b.appearance)("mat-form-field-appearance-legacy","legacy"==b.appearance)("mat-form-field-invalid",b._control.errorState)("mat-form-field-can-float",b._canLabelFloat())("mat-form-field-should-float",b._shouldLabelFloat())("mat-form-field-has-label",b._hasFloatingLabel())("mat-form-field-hide-placeholder",b._hideControlPlaceholder())("mat-form-field-disabled",b._control.disabled)("mat-form-field-autofilled",b._control.autofilled)("mat-focused",b._control.focused)("ng-untouched",b._shouldForward("untouched"))("ng-touched",b._shouldForward("touched"))("ng-pristine",b._shouldForward("pristine"))("ng-dirty",b._shouldForward("dirty"))("ng-valid",b._shouldForward("valid"))("ng-invalid",b._shouldForward("invalid"))("ng-pending",b._shouldForward("pending"))("_mat-animation-noopable",!b._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[E._Bn([{provide:Aa,useExisting:m}]),E.qOj],ngContentSelectors:Pc,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(d,b){1&d&&(E.F$t(zu),E.TgZ(0,"div",0),E.TgZ(1,"div",1,2),E.NdJ("click",function(V){return b._control.onContainerClick&&b._control.onContainerClick(V)}),E.YNc(3,Ao,9,0,"ng-container",3),E.YNc(4,eu,2,0,"div",4),E.TgZ(5,"div",5,6),E.Hsn(7),E.TgZ(8,"span",7),E.YNc(9,Vh,5,16,"label",8),E.qZA(),E.qZA(),E.YNc(10,uh,2,0,"div",9),E.qZA(),E.YNc(11,yl,3,4,"div",10),E.TgZ(12,"div",11),E.YNc(13,Es,2,1,"div",12),E.YNc(14,aa,5,2,"div",13),E.qZA(),E.qZA()),2&d&&(E.xp6(3),E.Q6J("ngIf","outline"==b.appearance),E.xp6(1),E.Q6J("ngIf",b._prefixChildren.length),E.xp6(5),E.Q6J("ngIf",b._hasFloatingLabel()),E.xp6(1),E.Q6J("ngIf",b._suffixChildren.length),E.xp6(1),E.Q6J("ngIf","outline"!=b.appearance),E.xp6(1),E.Q6J("ngSwitch",b._getDisplayedMessages()),E.xp6(1),E.Q6J("ngSwitchCase","error"),E.xp6(1),E.Q6J("ngSwitchCase","hint"))},directives:[R.O5,R.RF,R.n9,ut],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Jl.transitionMessages]},changeDetection:0}),m})(),Ma=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({imports:[[R.ez,is,Yt],is]}),m})();var Ia=Q(6465),nu=Q(6102);new class extends nu.v{flush(v){this.active=!0,this.scheduled=void 0;const{actions:d}=this;let b,M=-1,V=d.length;v=v||d.shift();do{if(b=v.execute(v.state,v.delay))break}while(++M<V&&(v=d.shift()));if(this.active=!1,b){for(;++M<V&&(v=d.shift());)v.unsubscribe();throw b}}}(class extends Ia.o{constructor(v,d){super(v,d),this.scheduler=v,this.work=d}requestAsyncId(v,d,b=0){return null!==b&&b>0?super.requestAsyncId(v,d,b):(v.actions.push(this),v.scheduled||(v.scheduled=requestAnimationFrame(()=>v.flush(null))))}recycleAsyncId(v,d,b=0){if(null!==b&&b>0||null===b&&this.delay>0)return super.recycleAsyncId(v,d,b);0===v.actions.length&&(cancelAnimationFrame(d),v.scheduled=void 0)}});Q(4581);var Ls=Q(3637);class Rc{constructor(v){this.durationSelector=v}call(v,d){return d.subscribe(new Fo(v,this.durationSelector))}}class Fo extends he.Ds{constructor(v,d){super(v),this.durationSelector=d,this.hasValue=!1}_next(v){if(this.value=v,this.hasValue=!0,!this.throttled){let d;try{const{durationSelector:M}=this;d=M(v)}catch(M){return this.destination.error(M)}const b=(0,he.ft)(d,new he.IY(this));!b||b.closed?this.clearThrottle():this.add(this.throttled=b)}}clearThrottle(){const{value:v,hasValue:d,throttled:b}=this;b&&(this.remove(b),this.throttled=void 0,b.unsubscribe()),d&&(this.value=void 0,this.hasValue=!1,this.destination.next(v))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var Us=Q(6561),us=Q(4869);function kc(m){const{index:v,period:d,subscriber:b}=m;if(b.next(v),!b.closed){if(-1===d)return b.complete();m.index=v+1,this.schedule(m,d)}}function ca(m,v=Ls.P){return function(m){return function(d){return d.lift(new Rc(m))}}(()=>function(m=0,v,d){let b=-1;return(0,Us.k)(v)?b=Number(v)<1?1:Number(v):(0,us.K)(v)&&(d=v),(0,us.K)(d)||(d=Ls.P),new X.y(M=>{const V=(0,Us.k)(m)?m:+m-d.now();return d.schedule(kc,V,{index:0,period:b,subscriber:M})})}(m,v))}Q(9328);var ec=Q(3190);Q(2066);class Qr{constructor(v=!1,d,b=!0){this._multiple=v,this._emitChanges=b,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Re.xQ,d&&d.length&&(v?d.forEach(M=>this._markSelected(M)):this._markSelected(d[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...v){this._verifyValueAssignment(v),v.forEach(d=>this._markSelected(d)),this._emitChangeEvent()}deselect(...v){this._verifyValueAssignment(v),v.forEach(d=>this._unmarkSelected(d)),this._emitChangeEvent()}toggle(v){this.isSelected(v)?this.deselect(v):this.select(v)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(v){return this._selection.has(v)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(v){this._multiple&&this.selected&&this._selected.sort(v)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(v){this.isSelected(v)||(this._multiple||this._unmarkAll(),this._selection.add(v),this._emitChanges&&this._selectedToEmit.push(v))}_unmarkSelected(v){this.isSelected(v)&&(this._selection.delete(v),this._emitChanges&&this._deselectedToEmit.push(v))}_unmarkAll(){this.isEmpty()||this._selection.forEach(v=>this._unmarkSelected(v))}_verifyValueAssignment(v){}}let Oa=(()=>{class m{constructor(d,b,M){this._ngZone=d,this._platform=b,this._scrolled=new Re.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=M}register(d){this.scrollContainers.has(d)||this.scrollContainers.set(d,d.elementScrolled().subscribe(()=>this._scrolled.next(d)))}deregister(d){const b=this.scrollContainers.get(d);b&&(b.unsubscribe(),this.scrollContainers.delete(d))}scrolled(d=20){return this._platform.isBrowser?new X.y(b=>{this._globalSubscription||this._addGlobalListener();const M=d>0?this._scrolled.pipe(ca(d)).subscribe(b):this._scrolled.subscribe(b);return this._scrolledCount++,()=>{M.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Et.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((d,b)=>this.deregister(b)),this._scrolled.complete()}ancestorScrolled(d,b){const M=this.getAncestorScrollContainers(d);return this.scrolled(b).pipe((0,Ji.h)(V=>!V||M.indexOf(V)>-1))}getAncestorScrollContainers(d){const b=[];return this.scrollContainers.forEach((M,V)=>{this._scrollableContainsElement(V,d)&&b.push(V)}),b}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(d,b){let M=xe(b),V=d.getElementRef().nativeElement;do{if(M==V)return!0}while(M=M.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ks(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return m.\u0275fac=function(d){return new(d||m)(E.LFG(E.R0b),E.LFG($n),E.LFG(R.K0,8))},m.\u0275prov=E.Yz7({factory:function(){return new m(E.LFG(E.R0b),E.LFG($n),E.LFG(R.K0,8))},token:m,providedIn:"root"}),m})(),xa=(()=>{class m{constructor(d,b,M){this._platform=d,this._change=new Re.xQ,this._changeListener=V=>{this._change.next(V)},this._document=M,b.runOutsideAngular(()=>{if(d.isBrowser){const V=this._getWindow();V.addEventListener("resize",this._changeListener),V.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const d=this._getWindow();d.removeEventListener("resize",this._changeListener),d.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const d={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),d}getViewportRect(){const d=this.getViewportScrollPosition(),{width:b,height:M}=this.getViewportSize();return{top:d.top,left:d.left,bottom:d.top+M,right:d.left+b,height:M,width:b}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const d=this._document,b=this._getWindow(),M=d.documentElement,V=M.getBoundingClientRect();return{top:-V.top||d.body.scrollTop||b.scrollY||M.scrollTop||0,left:-V.left||d.body.scrollLeft||b.scrollX||M.scrollLeft||0}}change(d=20){return d>0?this._change.pipe(ca(d)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const d=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:d.innerWidth,height:d.innerHeight}:{width:0,height:0}}}return m.\u0275fac=function(d){return new(d||m)(E.LFG($n),E.LFG(E.R0b),E.LFG(R.K0,8))},m.\u0275prov=E.Yz7({factory:function(){return new m(E.LFG($n),E.LFG(E.R0b),E.LFG(R.K0,8))},token:m,providedIn:"root"}),m})(),Iu=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({}),m})(),ic=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({imports:[[qi,hr,Iu],qi,Iu]}),m})();class Tl{attach(v){return this._attachedHost=v,v.attach(this)}detach(){let v=this._attachedHost;null!=v&&(this._attachedHost=null,v.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(v){this._attachedHost=v}}class wd extends Tl{constructor(v,d,b,M){super(),this.component=v,this.viewContainerRef=d,this.injector=b,this.componentFactoryResolver=M}}class Nc extends Tl{constructor(v,d,b){super(),this.templateRef=v,this.viewContainerRef=d,this.context=b}get origin(){return this.templateRef.elementRef}attach(v,d=this.context){return this.context=d,super.attach(v)}detach(){return this.context=void 0,super.detach()}}class Bh extends Tl{constructor(v){super(),this.element=v instanceof E.SBq?v.nativeElement:v}}class Lc extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(v){return v instanceof wd?(this._attachedPortal=v,this.attachComponentPortal(v)):v instanceof Nc?(this._attachedPortal=v,this.attachTemplatePortal(v)):this.attachDomPortal&&v instanceof Bh?(this._attachedPortal=v,this.attachDomPortal(v)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(v){this._disposeFn=v}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(v,d,b,M,V){super(),this.outletElement=v,this._componentFactoryResolver=d,this._appRef=b,this._defaultInjector=M,this.attachDomPortal=J=>{const we=J.element,Oe=this._document.createComment("dom-portal");we.parentNode.insertBefore(Oe,we),this.outletElement.appendChild(we),this._attachedPortal=J,super.setDisposeFn(()=>{Oe.parentNode&&Oe.parentNode.replaceChild(we,Oe)})},this._document=V}attachComponentPortal(v){const b=(v.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(v.component);let M;return v.viewContainerRef?(M=v.viewContainerRef.createComponent(b,v.viewContainerRef.length,v.injector||v.viewContainerRef.injector),this.setDisposeFn(()=>M.destroy())):(M=b.create(v.injector||this._defaultInjector),this._appRef.attachView(M.hostView),this.setDisposeFn(()=>{this._appRef.detachView(M.hostView),M.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(M)),this._attachedPortal=v,M}attachTemplatePortal(v){let d=v.viewContainerRef,b=d.createEmbeddedView(v.templateRef,v.context);return b.rootNodes.forEach(M=>this.outletElement.appendChild(M)),b.detectChanges(),this.setDisposeFn(()=>{let M=d.indexOf(b);-1!==M&&d.remove(M)}),this._attachedPortal=v,b}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(v){return v.hostView.rootNodes[0]}}let fa=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({}),m})();class pa{constructor(v,d){this.predicate=v,this.inclusive=d}call(v,d){return d.subscribe(new Ju(v,this.predicate,this.inclusive))}}class Ju extends Xi.L{constructor(v,d,b){super(v),this.predicate=d,this.inclusive=b,this.index=0}_next(v){const d=this.destination;let b;try{b=this.predicate(v,this.index++)}catch(M){return void d.error(M)}this.nextOrComplete(v,b)}nextOrComplete(v,d){const b=this.destination;Boolean(d)?b.next(v):(this.inclusive&&b.next(v),b.complete())}}const xu=Y();class ph{constructor(v,d){this._viewportRuler=v,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=d}attach(){}enable(){if(this._canBeEnabled()){const v=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=v.style.left||"",this._previousHTMLStyles.top=v.style.top||"",v.style.left=De(-this._previousScrollPosition.left),v.style.top=De(-this._previousScrollPosition.top),v.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const v=this._document.documentElement,b=v.style,M=this._document.body.style,V=b.scrollBehavior||"",J=M.scrollBehavior||"";this._isEnabled=!1,b.left=this._previousHTMLStyles.left,b.top=this._previousHTMLStyles.top,v.classList.remove("cdk-global-scrollblock"),xu&&(b.scrollBehavior=M.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),xu&&(b.scrollBehavior=V,M.scrollBehavior=J)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const d=this._document.body,b=this._viewportRuler.getViewportSize();return d.scrollHeight>b.height||d.scrollWidth>b.width}}class Sl{constructor(v,d,b,M){this._scrollDispatcher=v,this._ngZone=d,this._viewportRuler=b,this._config=M,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(v){this._overlayRef=v}enable(){if(this._scrollSubscription)return;const v=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=v.subscribe(()=>{const d=this._viewportRuler.getViewportScrollPosition().top;Math.abs(d-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=v.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Vc{enable(){}disable(){}attach(){}}function Al(m,v){return v.some(d=>m.bottom<d.top||m.top>d.bottom||m.right<d.left||m.left>d.right)}function sc(m,v){return v.some(d=>m.top<d.top||m.bottom>d.bottom||m.left<d.left||m.right>d.right)}class Bc{constructor(v,d,b,M){this._scrollDispatcher=v,this._viewportRuler=d,this._ngZone=b,this._config=M,this._scrollSubscription=null}attach(v){this._overlayRef=v}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const d=this._overlayRef.overlayElement.getBoundingClientRect(),{width:b,height:M}=this._viewportRuler.getViewportSize();Al(d,[{width:b,height:M,bottom:M,right:b,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let jc=(()=>{class m{constructor(d,b,M,V){this._scrollDispatcher=d,this._viewportRuler=b,this._ngZone=M,this.noop=()=>new Vc,this.close=J=>new Sl(this._scrollDispatcher,this._ngZone,this._viewportRuler,J),this.block=()=>new ph(this._viewportRuler,this._document),this.reposition=J=>new Bc(this._scrollDispatcher,this._viewportRuler,this._ngZone,J),this._document=V}}return m.\u0275fac=function(d){return new(d||m)(E.LFG(Oa),E.LFG(xa),E.LFG(E.R0b),E.LFG(R.K0))},m.\u0275prov=E.Yz7({factory:function(){return new m(E.LFG(Oa),E.LFG(xa),E.LFG(E.R0b),E.LFG(R.K0))},token:m,providedIn:"root"}),m})();class Zo{constructor(v){if(this.scrollStrategy=new Vc,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,v){const d=Object.keys(v);for(const b of d)void 0!==v[b]&&(this[b]=v[b])}}}class Ml{constructor(v,d,b,M,V){this.offsetX=b,this.offsetY=M,this.panelClass=V,this.originX=v.originX,this.originY=v.originY,this.overlayX=d.overlayX,this.overlayY=d.overlayY}}class ka{constructor(v,d){this.connectionPair=v,this.scrollableViewProperties=d}}let Gc=(()=>{class m{constructor(d){this._attachedOverlays=[],this._document=d}ngOnDestroy(){this.detach()}add(d){this.remove(d),this._attachedOverlays.push(d)}remove(d){const b=this._attachedOverlays.indexOf(d);b>-1&&this._attachedOverlays.splice(b,1),0===this._attachedOverlays.length&&this.detach()}}return m.\u0275fac=function(d){return new(d||m)(E.LFG(R.K0))},m.\u0275prov=E.Yz7({factory:function(){return new m(E.LFG(R.K0))},token:m,providedIn:"root"}),m})(),ac=(()=>{class m extends Gc{constructor(d){super(d),this._keydownListener=b=>{const M=this._attachedOverlays;for(let V=M.length-1;V>-1;V--)if(M[V]._keydownEvents.observers.length>0){M[V]._keydownEvents.next(b);break}}}add(d){super.add(d),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return m.\u0275fac=function(d){return new(d||m)(E.LFG(R.K0))},m.\u0275prov=E.Yz7({factory:function(){return new m(E.LFG(R.K0))},token:m,providedIn:"root"}),m})(),Fa=(()=>{class m extends Gc{constructor(d,b){super(d),this._platform=b,this._cursorStyleIsSet=!1,this._pointerDownListener=M=>{this._pointerDownEventTarget=ee(M)},this._clickListener=M=>{const V=ee(M),J="click"===M.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:V;this._pointerDownEventTarget=null;const we=this._attachedOverlays.slice();for(let Oe=we.length-1;Oe>-1;Oe--){const et=we[Oe];if(!(et._outsidePointerEvents.observers.length<1)&&et.hasAttached()){if(et.overlayElement.contains(V)||et.overlayElement.contains(J))break;et._outsidePointerEvents.next(M)}}}}add(d){if(super.add(d),!this._isAttached){const b=this._document.body;b.addEventListener("pointerdown",this._pointerDownListener,!0),b.addEventListener("click",this._clickListener,!0),b.addEventListener("auxclick",this._clickListener,!0),b.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=b.style.cursor,b.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const d=this._document.body;d.removeEventListener("pointerdown",this._pointerDownListener,!0),d.removeEventListener("click",this._clickListener,!0),d.removeEventListener("auxclick",this._clickListener,!0),d.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(d.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return m.\u0275fac=function(d){return new(d||m)(E.LFG(R.K0),E.LFG($n))},m.\u0275prov=E.Yz7({factory:function(){return new m(E.LFG(R.K0),E.LFG($n))},token:m,providedIn:"root"}),m})(),Ds=(()=>{class m{constructor(d,b){this._platform=b,this._document=d}ngOnDestroy(){const d=this._containerElement;d&&d.parentNode&&d.parentNode.removeChild(d)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const d="cdk-overlay-container";if(this._platform.isBrowser||Le()){const M=this._document.querySelectorAll(`.${d}[platform="server"], .${d}[platform="test"]`);for(let V=0;V<M.length;V++)M[V].parentNode.removeChild(M[V])}const b=this._document.createElement("div");b.classList.add(d),Le()?b.setAttribute("platform","test"):this._platform.isBrowser||b.setAttribute("platform","server"),this._document.body.appendChild(b),this._containerElement=b}}return m.\u0275fac=function(d){return new(d||m)(E.LFG(R.K0),E.LFG($n))},m.\u0275prov=E.Yz7({factory:function(){return new m(E.LFG(R.K0),E.LFG($n))},token:m,providedIn:"root"}),m})();class gh{constructor(v,d,b,M,V,J,we,Oe,et){this._portalOutlet=v,this._host=d,this._pane=b,this._config=M,this._ngZone=V,this._keyboardDispatcher=J,this._document=we,this._location=Oe,this._outsideClickDispatcher=et,this._backdropElement=null,this._backdropClick=new Re.xQ,this._attachments=new Re.xQ,this._detachments=new Re.xQ,this._locationChanges=wt.w.EMPTY,this._backdropClickHandler=yt=>this._backdropClick.next(yt),this._keydownEvents=new Re.xQ,this._outsidePointerEvents=new Re.xQ,M.scrollStrategy&&(this._scrollStrategy=M.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=M.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(v){let d=this._portalOutlet.attach(v);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,ui.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),d}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const v=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),v}dispose(){const v=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,v&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(v){v!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=v,this.hasAttached()&&(v.attach(this),this.updatePosition()))}updateSize(v){this._config=Object.assign(Object.assign({},this._config),v),this._updateElementSize()}setDirection(v){this._config=Object.assign(Object.assign({},this._config),{direction:v}),this._updateElementDirection()}addPanelClass(v){this._pane&&this._toggleClasses(this._pane,v,!0)}removePanelClass(v){this._pane&&this._toggleClasses(this._pane,v,!1)}getDirection(){const v=this._config.direction;return v?"string"==typeof v?v:v.value:"ltr"}updateScrollStrategy(v){v!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=v,this.hasAttached()&&(v.attach(this),v.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const v=this._pane.style;v.width=De(this._config.width),v.height=De(this._config.height),v.minWidth=De(this._config.minWidth),v.minHeight=De(this._config.minHeight),v.maxWidth=De(this._config.maxWidth),v.maxHeight=De(this._config.maxHeight)}_togglePointerEvents(v){this._pane.style.pointerEvents=v?"":"none"}_attachBackdrop(){const v="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(v)})}):this._backdropElement.classList.add(v)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const v=this._backdropElement;if(!v)return;let d;const b=()=>{v&&(v.removeEventListener("click",this._backdropClickHandler),v.removeEventListener("transitionend",b),this._disposeBackdrop(v)),this._config.backdropClass&&this._toggleClasses(v,this._config.backdropClass,!1),clearTimeout(d)};v.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{v.addEventListener("transitionend",b)}),v.style.pointerEvents="none",d=this._ngZone.runOutsideAngular(()=>setTimeout(b,500))}_toggleClasses(v,d,b){const M=v.classList;ye(d).forEach(V=>{V&&(b?M.add(V):M.remove(V))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const v=this._ngZone.onStable.pipe(lt((0,Xa.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),v.unsubscribe())})})}_disposeScrollStrategy(){const v=this._scrollStrategy;v&&(v.disable(),v.detach&&v.detach())}_disposeBackdrop(v){v&&(v.parentNode&&v.parentNode.removeChild(v),this._backdropElement===v&&(this._backdropElement=null))}}const Il="cdk-overlay-connected-position-bounding-box",Na=/([A-Za-z%]+)$/;class Sd{constructor(v,d,b,M,V){this._viewportRuler=d,this._document=b,this._platform=M,this._overlayContainer=V,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Re.xQ,this._resizeSubscription=wt.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(v)}get positions(){return this._preferredPositions}attach(v){this._validatePositions(),v.hostElement.classList.add(Il),this._overlayRef=v,this._boundingBox=v.hostElement,this._pane=v.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const v=this._originRect,d=this._overlayRect,b=this._viewportRect,M=[];let V;for(let J of this._preferredPositions){let we=this._getOriginPoint(v,J),Oe=this._getOverlayPoint(we,d,J),et=this._getOverlayFit(Oe,d,b,J);if(et.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(J,we);this._canFitWithFlexibleDimensions(et,Oe,b)?M.push({position:J,origin:we,overlayRect:d,boundingBoxRect:this._calculateBoundingBoxRect(we,J)}):(!V||V.overlayFit.visibleArea<et.visibleArea)&&(V={overlayFit:et,overlayPoint:Oe,originPoint:we,position:J,overlayRect:d})}if(M.length){let J=null,we=-1;for(const Oe of M){const et=Oe.boundingBoxRect.width*Oe.boundingBoxRect.height*(Oe.position.weight||1);et>we&&(we=et,J=Oe)}return this._isPushed=!1,void this._applyPosition(J.position,J.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(V.position,V.originPoint);this._applyPosition(V.position,V.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Lo(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Il),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const v=this._lastPosition||this._preferredPositions[0],d=this._getOriginPoint(this._originRect,v);this._applyPosition(v,d)}}withScrollableContainers(v){return this._scrollables=v,this}withPositions(v){return this._preferredPositions=v,-1===v.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(v){return this._viewportMargin=v,this}withFlexibleDimensions(v=!0){return this._hasFlexibleDimensions=v,this}withGrowAfterOpen(v=!0){return this._growAfterOpen=v,this}withPush(v=!0){return this._canPush=v,this}withLockedPosition(v=!0){return this._positionLocked=v,this}setOrigin(v){return this._origin=v,this}withDefaultOffsetX(v){return this._offsetX=v,this}withDefaultOffsetY(v){return this._offsetY=v,this}withTransformOriginOn(v){return this._transformOriginSelector=v,this}_getOriginPoint(v,d){let b,M;if("center"==d.originX)b=v.left+v.width/2;else{const V=this._isRtl()?v.right:v.left,J=this._isRtl()?v.left:v.right;b="start"==d.originX?V:J}return M="center"==d.originY?v.top+v.height/2:"top"==d.originY?v.top:v.bottom,{x:b,y:M}}_getOverlayPoint(v,d,b){let M,V;return M="center"==b.overlayX?-d.width/2:"start"===b.overlayX?this._isRtl()?-d.width:0:this._isRtl()?0:-d.width,V="center"==b.overlayY?-d.height/2:"top"==b.overlayY?0:-d.height,{x:v.x+M,y:v.y+V}}_getOverlayFit(v,d,b,M){const V=hi(d);let{x:J,y:we}=v,Oe=this._getOffset(M,"x"),et=this._getOffset(M,"y");Oe&&(J+=Oe),et&&(we+=et);let gn=0-we,Gn=we+V.height-b.height,qr=this._subtractOverflows(V.width,0-J,J+V.width-b.width),Yi=this._subtractOverflows(V.height,gn,Gn),Gs=qr*Yi;return{visibleArea:Gs,isCompletelyWithinViewport:V.width*V.height===Gs,fitsInViewportVertically:Yi===V.height,fitsInViewportHorizontally:qr==V.width}}_canFitWithFlexibleDimensions(v,d,b){if(this._hasFlexibleDimensions){const M=b.bottom-d.y,V=b.right-d.x,J=au(this._overlayRef.getConfig().minHeight),we=au(this._overlayRef.getConfig().minWidth),et=v.fitsInViewportHorizontally||null!=we&&we<=V;return(v.fitsInViewportVertically||null!=J&&J<=M)&&et}return!1}_pushOverlayOnScreen(v,d,b){if(this._previousPushAmount&&this._positionLocked)return{x:v.x+this._previousPushAmount.x,y:v.y+this._previousPushAmount.y};const M=hi(d),V=this._viewportRect,J=Math.max(v.x+M.width-V.width,0),we=Math.max(v.y+M.height-V.height,0),Oe=Math.max(V.top-b.top-v.y,0),et=Math.max(V.left-b.left-v.x,0);let yt=0,$t=0;return yt=M.width<=V.width?et||-J:v.x<this._viewportMargin?V.left-b.left-v.x:0,$t=M.height<=V.height?Oe||-we:v.y<this._viewportMargin?V.top-b.top-v.y:0,this._previousPushAmount={x:yt,y:$t},{x:v.x+yt,y:v.y+$t}}_applyPosition(v,d){if(this._setTransformOrigin(v),this._setOverlayElementStyles(d,v),this._setBoundingBoxStyles(d,v),v.panelClass&&this._addPanelClasses(v.panelClass),this._lastPosition=v,this._positionChanges.observers.length){const b=this._getScrollVisibility(),M=new ka(v,b);this._positionChanges.next(M)}this._isInitialRender=!1}_setTransformOrigin(v){if(!this._transformOriginSelector)return;const d=this._boundingBox.querySelectorAll(this._transformOriginSelector);let b,M=v.overlayY;b="center"===v.overlayX?"center":this._isRtl()?"start"===v.overlayX?"right":"left":"start"===v.overlayX?"left":"right";for(let V=0;V<d.length;V++)d[V].style.transformOrigin=`${b} ${M}`}_calculateBoundingBoxRect(v,d){const b=this._viewportRect,M=this._isRtl();let V,J,we,yt,$t,gn;if("top"===d.overlayY)J=v.y,V=b.height-J+this._viewportMargin;else if("bottom"===d.overlayY)we=b.height-v.y+2*this._viewportMargin,V=b.height-we+this._viewportMargin;else{const Gn=Math.min(b.bottom-v.y+b.top,v.y),qr=this._lastBoundingBoxSize.height;V=2*Gn,J=v.y-Gn,V>qr&&!this._isInitialRender&&!this._growAfterOpen&&(J=v.y-qr/2)}if("end"===d.overlayX&&!M||"start"===d.overlayX&&M)gn=b.width-v.x+this._viewportMargin,yt=v.x-this._viewportMargin;else if("start"===d.overlayX&&!M||"end"===d.overlayX&&M)$t=v.x,yt=b.right-v.x;else{const Gn=Math.min(b.right-v.x+b.left,v.x),qr=this._lastBoundingBoxSize.width;yt=2*Gn,$t=v.x-Gn,yt>qr&&!this._isInitialRender&&!this._growAfterOpen&&($t=v.x-qr/2)}return{top:J,left:$t,bottom:we,right:gn,width:yt,height:V}}_setBoundingBoxStyles(v,d){const b=this._calculateBoundingBoxRect(v,d);!this._isInitialRender&&!this._growAfterOpen&&(b.height=Math.min(b.height,this._lastBoundingBoxSize.height),b.width=Math.min(b.width,this._lastBoundingBoxSize.width));const M={};if(this._hasExactPosition())M.top=M.left="0",M.bottom=M.right=M.maxHeight=M.maxWidth="",M.width=M.height="100%";else{const V=this._overlayRef.getConfig().maxHeight,J=this._overlayRef.getConfig().maxWidth;M.height=De(b.height),M.top=De(b.top),M.bottom=De(b.bottom),M.width=De(b.width),M.left=De(b.left),M.right=De(b.right),M.alignItems="center"===d.overlayX?"center":"end"===d.overlayX?"flex-end":"flex-start",M.justifyContent="center"===d.overlayY?"center":"bottom"===d.overlayY?"flex-end":"flex-start",V&&(M.maxHeight=De(V)),J&&(M.maxWidth=De(J))}this._lastBoundingBoxSize=b,Lo(this._boundingBox.style,M)}_resetBoundingBoxStyles(){Lo(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Lo(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(v,d){const b={},M=this._hasExactPosition(),V=this._hasFlexibleDimensions,J=this._overlayRef.getConfig();if(M){const yt=this._viewportRuler.getViewportScrollPosition();Lo(b,this._getExactOverlayY(d,v,yt)),Lo(b,this._getExactOverlayX(d,v,yt))}else b.position="static";let we="",Oe=this._getOffset(d,"x"),et=this._getOffset(d,"y");Oe&&(we+=`translateX(${Oe}px) `),et&&(we+=`translateY(${et}px)`),b.transform=we.trim(),J.maxHeight&&(M?b.maxHeight=De(J.maxHeight):V&&(b.maxHeight="")),J.maxWidth&&(M?b.maxWidth=De(J.maxWidth):V&&(b.maxWidth="")),Lo(this._pane.style,b)}_getExactOverlayY(v,d,b){let M={top:"",bottom:""},V=this._getOverlayPoint(d,this._overlayRect,v);this._isPushed&&(V=this._pushOverlayOnScreen(V,this._overlayRect,b));let J=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return V.y-=J,"bottom"===v.overlayY?M.bottom=this._document.documentElement.clientHeight-(V.y+this._overlayRect.height)+"px":M.top=De(V.y),M}_getExactOverlayX(v,d,b){let J,M={left:"",right:""},V=this._getOverlayPoint(d,this._overlayRect,v);return this._isPushed&&(V=this._pushOverlayOnScreen(V,this._overlayRect,b)),J=this._isRtl()?"end"===v.overlayX?"left":"right":"end"===v.overlayX?"right":"left","right"===J?M.right=this._document.documentElement.clientWidth-(V.x+this._overlayRect.width)+"px":M.left=De(V.x),M}_getScrollVisibility(){const v=this._getOriginRect(),d=this._pane.getBoundingClientRect(),b=this._scrollables.map(M=>M.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:sc(v,b),isOriginOutsideView:Al(v,b),isOverlayClipped:sc(d,b),isOverlayOutsideView:Al(d,b)}}_subtractOverflows(v,...d){return d.reduce((b,M)=>b-Math.max(M,0),v)}_getNarrowedViewportRect(){const v=this._document.documentElement.clientWidth,d=this._document.documentElement.clientHeight,b=this._viewportRuler.getViewportScrollPosition();return{top:b.top+this._viewportMargin,left:b.left+this._viewportMargin,right:b.left+v-this._viewportMargin,bottom:b.top+d-this._viewportMargin,width:v-2*this._viewportMargin,height:d-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(v,d){return"x"===d?null==v.offsetX?this._offsetX:v.offsetX:null==v.offsetY?this._offsetY:v.offsetY}_validatePositions(){}_addPanelClasses(v){this._pane&&ye(v).forEach(d=>{""!==d&&-1===this._appliedPanelClasses.indexOf(d)&&(this._appliedPanelClasses.push(d),this._pane.classList.add(d))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(v=>{this._pane.classList.remove(v)}),this._appliedPanelClasses=[])}_getOriginRect(){const v=this._origin;if(v instanceof E.SBq)return v.nativeElement.getBoundingClientRect();if(v instanceof Element)return v.getBoundingClientRect();const d=v.width||0,b=v.height||0;return{top:v.y,bottom:v.y+b,left:v.x,right:v.x+d,height:b,width:d}}}function Lo(m,v){for(let d in v)v.hasOwnProperty(d)&&(m[d]=v[d]);return m}function au(m){if("number"!=typeof m&&null!=m){const[v,d]=m.split(Na);return d&&"px"!==d?null:parseFloat(v)}return m||null}function hi(m){return{top:Math.floor(m.top),right:Math.floor(m.right),bottom:Math.floor(m.bottom),left:Math.floor(m.left),width:Math.floor(m.width),height:Math.floor(m.height)}}class fi{constructor(v,d,b,M,V,J,we){this._preferredPositions=[],this._positionStrategy=new Sd(b,M,V,J,we).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(v,d),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(v){this._overlayRef=v,this._positionStrategy.attach(v),this._direction&&(v.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(v){this._positionStrategy.withScrollableContainers(v)}withFallbackPosition(v,d,b,M){const V=new Ml(v,d,b,M);return this._preferredPositions.push(V),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(v){return this._overlayRef?this._overlayRef.setDirection(v):this._direction=v,this}withOffsetX(v){return this._positionStrategy.withDefaultOffsetX(v),this}withOffsetY(v){return this._positionStrategy.withDefaultOffsetY(v),this}withLockedPosition(v){return this._positionStrategy.withLockedPosition(v),this}withPositions(v){return this._preferredPositions=v.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(v){return this._positionStrategy.setOrigin(v),this}}const uu="cdk-global-overlay-wrapper";class uc{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(v){const d=v.getConfig();this._overlayRef=v,this._width&&!d.width&&v.updateSize({width:this._width}),this._height&&!d.height&&v.updateSize({height:this._height}),v.hostElement.classList.add(uu),this._isDisposed=!1}top(v=""){return this._bottomOffset="",this._topOffset=v,this._alignItems="flex-start",this}left(v=""){return this._rightOffset="",this._leftOffset=v,this._justifyContent="flex-start",this}bottom(v=""){return this._topOffset="",this._bottomOffset=v,this._alignItems="flex-end",this}right(v=""){return this._leftOffset="",this._rightOffset=v,this._justifyContent="flex-end",this}width(v=""){return this._overlayRef?this._overlayRef.updateSize({width:v}):this._width=v,this}height(v=""){return this._overlayRef?this._overlayRef.updateSize({height:v}):this._height=v,this}centerHorizontally(v=""){return this.left(v),this._justifyContent="center",this}centerVertically(v=""){return this.top(v),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const v=this._overlayRef.overlayElement.style,d=this._overlayRef.hostElement.style,b=this._overlayRef.getConfig(),{width:M,height:V,maxWidth:J,maxHeight:we}=b,Oe=!("100%"!==M&&"100vw"!==M||J&&"100%"!==J&&"100vw"!==J),et=!("100%"!==V&&"100vh"!==V||we&&"100%"!==we&&"100vh"!==we);v.position=this._cssPosition,v.marginLeft=Oe?"0":this._leftOffset,v.marginTop=et?"0":this._topOffset,v.marginBottom=this._bottomOffset,v.marginRight=this._rightOffset,Oe?d.justifyContent="flex-start":"center"===this._justifyContent?d.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?d.justifyContent="flex-end":"flex-end"===this._justifyContent&&(d.justifyContent="flex-start"):d.justifyContent=this._justifyContent,d.alignItems=et?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const v=this._overlayRef.overlayElement.style,d=this._overlayRef.hostElement,b=d.style;d.classList.remove(uu),b.justifyContent=b.alignItems=v.marginTop=v.marginBottom=v.marginLeft=v.marginRight=v.position="",this._overlayRef=null,this._isDisposed=!0}}let Wi=(()=>{class m{constructor(d,b,M,V){this._viewportRuler=d,this._document=b,this._platform=M,this._overlayContainer=V}global(){return new uc}connectedTo(d,b,M){return new fi(b,M,d,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(d){return new Sd(d,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return m.\u0275fac=function(d){return new(d||m)(E.LFG(xa),E.LFG(R.K0),E.LFG($n),E.LFG(Ds))},m.\u0275prov=E.Yz7({factory:function(){return new m(E.LFG(xa),E.LFG(R.K0),E.LFG($n),E.LFG(Ds))},token:m,providedIn:"root"}),m})(),Ni=0,ao=(()=>{class m{constructor(d,b,M,V,J,we,Oe,et,yt,$t,gn){this.scrollStrategies=d,this._overlayContainer=b,this._componentFactoryResolver=M,this._positionBuilder=V,this._keyboardDispatcher=J,this._injector=we,this._ngZone=Oe,this._document=et,this._directionality=yt,this._location=$t,this._outsideClickDispatcher=gn}create(d){const b=this._createHostElement(),M=this._createPaneElement(b),V=this._createPortalOutlet(M),J=new Zo(d);return J.direction=J.direction||this._directionality.value,new gh(V,b,M,J,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(d){const b=this._document.createElement("div");return b.id="cdk-overlay-"+Ni++,b.classList.add("cdk-overlay-pane"),d.appendChild(b),b}_createHostElement(){const d=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(d),d}_createPortalOutlet(d){return this._appRef||(this._appRef=this._injector.get(E.z2F)),new Lc(d,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return m.\u0275fac=function(d){return new(d||m)(E.LFG(jc),E.LFG(Ds),E.LFG(E._Vd),E.LFG(Wi),E.LFG(ac),E.LFG(E.zs3),E.LFG(E.R0b),E.LFG(R.K0),E.LFG(Wr),E.LFG(R.Ye),E.LFG(Fa))},m.\u0275prov=E.Yz7({token:m,factory:m.\u0275fac}),m})();const wo=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],cs=new E.OlP("cdk-connected-overlay-scroll-strategy");let qo=(()=>{class m{constructor(d){this.elementRef=d}}return m.\u0275fac=function(d){return new(d||m)(E.Y36(E.SBq))},m.\u0275dir=E.lG2({type:m,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),m})(),Bs=(()=>{class m{constructor(d,b,M,V,J){this._overlay=d,this._dir=J,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=wt.w.EMPTY,this._attachSubscription=wt.w.EMPTY,this._detachSubscription=wt.w.EMPTY,this._positionSubscription=wt.w.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new E.vpe,this.positionChange=new E.vpe,this.attach=new E.vpe,this.detach=new E.vpe,this.overlayKeydown=new E.vpe,this.overlayOutsideClick=new E.vpe,this._templatePortal=new Nc(b,M),this._scrollStrategyFactory=V,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(d){this._offsetX=d,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(d){this._offsetY=d,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(d){this._hasBackdrop=re(d)}get lockPosition(){return this._lockPosition}set lockPosition(d){this._lockPosition=re(d)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(d){this._flexibleDimensions=re(d)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(d){this._growAfterOpen=re(d)}get push(){return this._push}set push(d){this._push=re(d)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(d){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),d.origin&&this.open&&this._position.apply()),d.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=wo);const d=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=d.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=d.detachments().subscribe(()=>this.detach.emit()),d.keydownEvents().subscribe(b=>{this.overlayKeydown.next(b),27===b.keyCode&&!this.disableClose&&!Qn(b)&&(b.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(b=>{this.overlayOutsideClick.next(b)})}_buildConfig(){const d=this._position=this.positionStrategy||this._createPositionStrategy(),b=new Zo({direction:this._dir,positionStrategy:d,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(b.width=this.width),(this.height||0===this.height)&&(b.height=this.height),(this.minWidth||0===this.minWidth)&&(b.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(b.minHeight=this.minHeight),this.backdropClass&&(b.backdropClass=this.backdropClass),this.panelClass&&(b.panelClass=this.panelClass),b}_updatePositionStrategy(d){const b=this.positions.map(M=>({originX:M.originX,originY:M.originY,overlayX:M.overlayX,overlayY:M.overlayY,offsetX:M.offsetX||this.offsetX,offsetY:M.offsetY||this.offsetY,panelClass:M.panelClass||void 0}));return d.setOrigin(this.origin.elementRef).withPositions(b).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const d=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(d),d}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(d=>{this.backdropClick.emit(d)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(m,v=!1){return d=>d.lift(new pa(m,v))}(()=>this.positionChange.observers.length>0)).subscribe(d=>{this.positionChange.emit(d),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return m.\u0275fac=function(d){return new(d||m)(E.Y36(ao),E.Y36(E.Rgc),E.Y36(E.s_b),E.Y36(cs),E.Y36(Wr,8))},m.\u0275dir=E.lG2({type:m,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[E.TTD]}),m})();const Pu={provide:cs,deps:[ao],useFactory:function(m){return()=>m.scrollStrategies.reposition()}};let mh=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({providers:[ao,Pu],imports:[[qi,fa,ic],ic]}),m})();var Ad=Q(1439);const es=["trigger"],zt=["panel"];function qc(m,v){if(1&m&&(E.TgZ(0,"span",8),E._uU(1),E.qZA()),2&m){const d=E.oxw();E.xp6(1),E.Oqu(d.placeholder)}}function lu(m,v){if(1&m&&(E.TgZ(0,"span",12),E._uU(1),E.qZA()),2&m){const d=E.oxw(2);E.xp6(1),E.Oqu(d.triggerValue)}}function Md(m,v){1&m&&E.Hsn(0,0,["*ngSwitchCase","true"])}function Ol(m,v){if(1&m&&(E.TgZ(0,"span",9),E.YNc(1,lu,2,1,"span",10),E.YNc(2,Md,1,0,"ng-content",11),E.qZA()),2&m){const d=E.oxw();E.Q6J("ngSwitch",!!d.customTrigger),E.xp6(2),E.Q6J("ngSwitchCase",!0)}}function el(m,v){if(1&m){const d=E.EpF();E.TgZ(0,"div",13),E.TgZ(1,"div",14,15),E.NdJ("@transformPanel.done",function(M){return E.CHM(d),E.oxw()._panelDoneAnimatingStream.next(M.toState)})("keydown",function(M){return E.CHM(d),E.oxw()._handleKeydown(M)}),E.Hsn(3,1),E.qZA(),E.qZA()}if(2&m){const d=E.oxw();E.Q6J("@transformPanelWrap",void 0),E.xp6(1),E.Gre("mat-select-panel ",d._getPanelTheme(),""),E.Udp("transform-origin",d._transformOrigin)("font-size",d._triggerFontSize,"px"),E.Q6J("ngClass",d.panelClass)("@transformPanel",d.multiple?"showing-multiple":"showing"),E.uIk("id",d.id+"-panel")("aria-multiselectable",d.multiple)("aria-label",d.ariaLabel||null)("aria-labelledby",d._getPanelAriaLabelledby())}}const Id=[[["mat-select-trigger"]],"*"],ga=["mat-select-trigger","*"],zc={transformPanelWrap:(0,so.X$)("transformPanelWrap",[(0,so.eR)("* => void",(0,so.IO)("@transformPanel",[(0,so.pV)()],{optional:!0}))]),transformPanel:(0,so.X$)("transformPanel",[(0,so.SB)("void",(0,so.oB)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),(0,so.SB)("showing",(0,so.oB)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),(0,so.SB)("showing-multiple",(0,so.oB)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),(0,so.eR)("void => *",(0,so.jt)("120ms cubic-bezier(0, 0, 0.2, 1)")),(0,so.eR)("* => void",(0,so.jt)("100ms 25ms linear",(0,so.oB)({opacity:0})))])};let lc=0;const $c=new E.OlP("mat-select-scroll-strategy"),ku=new E.OlP("MAT_SELECT_CONFIG"),Pl={provide:$c,deps:[ao],useFactory:function(m){return()=>m.scrollStrategies.reposition()}};class rl{constructor(v,d){this.source=v,this.value=d}}const Wc=$a(ia(ra(vu(class{constructor(m,v,d,b,M){this._elementRef=m,this._defaultErrorStateMatcher=v,this._parentForm=d,this._parentFormGroup=b,this.ngControl=M}})))),cc=new E.OlP("MatSelectTrigger");let Fu=(()=>{class m extends Wc{constructor(d,b,M,V,J,we,Oe,et,yt,$t,gn,Gn,qr,Yi){var Gs,sl,Zs;super(J,V,Oe,et,$t),this._viewportRuler=d,this._changeDetectorRef=b,this._ngZone=M,this._dir=we,this._parentFormField=yt,this._liveAnnouncer=qr,this._defaultOptions=Yi,this._panelOpen=!1,this._compareWith=(Io,hc)=>Io===hc,this._uid="mat-select-"+lc++,this._triggerAriaLabelledBy=null,this._destroy=new Re.xQ,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+lc++,this._panelDoneAnimatingStream=new Re.xQ,this._overlayPanelClass=(null===(Gs=this._defaultOptions)||void 0===Gs?void 0:Gs.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(Zs=null===(sl=this._defaultOptions)||void 0===sl?void 0:sl.disableOptionCentering)&&void 0!==Zs&&Zs,this.ariaLabel="",this.optionSelectionChanges=(0,Ad.P)(()=>{const Io=this.options;return Io?Io.changes.pipe((0,ki.O)(Io),(0,ec.w)(()=>(0,Xa.T)(...Io.map(hc=>hc.onSelectionChange)))):this._ngZone.onStable.pipe((0,ui.q)(1),(0,ec.w)(()=>this.optionSelectionChanges))}),this.openedChange=new E.vpe,this._openedStream=this.openedChange.pipe((0,Ji.h)(Io=>Io),(0,go.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,Ji.h)(Io=>!Io),(0,go.U)(()=>{})),this.selectionChange=new E.vpe,this.valueChange=new E.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==Yi?void 0:Yi.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=Yi.typeaheadDebounceInterval),this._scrollStrategyFactory=Gn,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(gn)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(d){this._placeholder=d,this.stateChanges.next()}get required(){return this._required}set required(d){this._required=re(d),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(d){this._multiple=re(d)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(d){this._disableOptionCentering=re(d)}get compareWith(){return this._compareWith}set compareWith(d){this._compareWith=d,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(d){(d!==this._value||this._multiple&&Array.isArray(d))&&(this.options&&this._setSelectionByValue(d),this._value=d)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(d){this._typeaheadDebounceInterval=Ee(d)}get id(){return this._id}set id(d){this._id=d||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new Qr(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,W.x)(),lt(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(lt(this._destroy)).subscribe(d=>{d.added.forEach(b=>b.select()),d.removed.forEach(b=>b.deselect())}),this.options.changes.pipe((0,ki.O)(null),lt(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const d=this._getTriggerAriaLabelledby();if(d!==this._triggerAriaLabelledBy){const b=this._elementRef.nativeElement;this._triggerAriaLabelledBy=d,d?b.setAttribute("aria-labelledby",d):b.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(d){d.disabled&&this.stateChanges.next(),d.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(d){this.value=d}registerOnChange(d){this._onChange=d}registerOnTouched(d){this._onTouched=d}setDisabledState(d){this.disabled=d,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var d,b;return this.multiple?(null===(d=this._selectionModel)||void 0===d?void 0:d.selected)||[]:null===(b=this._selectionModel)||void 0===b?void 0:b.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const d=this._selectionModel.selected.map(b=>b.viewValue);return this._isRtl()&&d.reverse(),d.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(d){this.disabled||(this.panelOpen?this._handleOpenKeydown(d):this._handleClosedKeydown(d))}_handleClosedKeydown(d){const b=d.keyCode,M=40===b||38===b||37===b||39===b,V=13===b||32===b,J=this._keyManager;if(!J.isTyping()&&V&&!Qn(d)||(this.multiple||d.altKey)&&M)d.preventDefault(),this.open();else if(!this.multiple){const we=this.selected;J.onKeydown(d);const Oe=this.selected;Oe&&we!==Oe&&this._liveAnnouncer.announce(Oe.viewValue,1e4)}}_handleOpenKeydown(d){const b=this._keyManager,M=d.keyCode,V=40===M||38===M,J=b.isTyping();if(V&&d.altKey)d.preventDefault(),this.close();else if(J||13!==M&&32!==M||!b.activeItem||Qn(d))if(!J&&this._multiple&&65===M&&d.ctrlKey){d.preventDefault();const we=this.options.some(Oe=>!Oe.disabled&&!Oe.selected);this.options.forEach(Oe=>{Oe.disabled||(we?Oe.select():Oe.deselect())})}else{const we=b.activeItemIndex;b.onKeydown(d),this._multiple&&V&&d.shiftKey&&b.activeItem&&b.activeItemIndex!==we&&b.activeItem._selectViaInteraction()}else d.preventDefault(),b.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,ui.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(d){if(this._selectionModel.selected.forEach(b=>b.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&d)Array.isArray(d),d.forEach(b=>this._selectValue(b)),this._sortValues();else{const b=this._selectValue(d);b?this._keyManager.updateActiveItem(b):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(d){const b=this.options.find(M=>{if(this._selectionModel.isSelected(M))return!1;try{return null!=M.value&&this._compareWith(M.value,d)}catch(V){return!1}});return b&&this._selectionModel.select(b),b}_initKeyManager(){this._keyManager=new eo(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(lt(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(lt(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const d=(0,Xa.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(lt(d)).subscribe(b=>{this._onSelect(b.source,b.isUserInput),b.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Xa.T)(...this.options.map(b=>b._stateChanges)).pipe(lt(d)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(d,b){const M=this._selectionModel.isSelected(d);null!=d.value||this._multiple?(M!==d.selected&&(d.selected?this._selectionModel.select(d):this._selectionModel.deselect(d)),b&&this._keyManager.setActiveItem(d),this.multiple&&(this._sortValues(),b&&this.focus())):(d.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(d.value)),M!==this._selectionModel.isSelected(d)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const d=this.options.toArray();this._selectionModel.sort((b,M)=>this.sortComparator?this.sortComparator(b,M,d):d.indexOf(b)-d.indexOf(M)),this.stateChanges.next()}}_propagateChanges(d){let b=null;b=this.multiple?this.selected.map(M=>M.value):this.selected?this.selected.value:d,this._value=b,this.valueChange.emit(b),this._onChange(b),this.selectionChange.emit(this._getChangeEvent(b)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var d;return!this._panelOpen&&!this.disabled&&(null===(d=this.options)||void 0===d?void 0:d.length)>0}focus(d){this._elementRef.nativeElement.focus(d)}_getPanelAriaLabelledby(){var d;if(this.ariaLabel)return null;const b=null===(d=this._parentFormField)||void 0===d?void 0:d.getLabelId();return this.ariaLabelledby?(b?b+" ":"")+this.ariaLabelledby:b}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var d;if(this.ariaLabel)return null;const b=null===(d=this._parentFormField)||void 0===d?void 0:d.getLabelId();let M=(b?b+" ":"")+this._valueId;return this.ariaLabelledby&&(M+=" "+this.ariaLabelledby),M}_panelDoneAnimating(d){this.openedChange.emit(d)}setDescribedByIds(d){this._ariaDescribedby=d.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return m.\u0275fac=function(d){return new(d||m)(E.Y36(xa),E.Y36(E.sBO),E.Y36(E.R0b),E.Y36(Tr),E.Y36(E.SBq),E.Y36(Wr,8),E.Y36(c.F,8),E.Y36(c.sg,8),E.Y36(Aa,8),E.Y36(c.a5,10),E.$8M("tabindex"),E.Y36($c),E.Y36(_o),E.Y36(ku,8))},m.\u0275dir=E.lG2({type:m,viewQuery:function(d,b){if(1&d&&(E.Gf(es,5),E.Gf(zt,5),E.Gf(Bs,5)),2&d){let M;E.iGM(M=E.CRH())&&(b.trigger=M.first),E.iGM(M=E.CRH())&&(b.panel=M.first),E.iGM(M=E.CRH())&&(b._overlayDir=M.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[E.qOj,E.TTD]}),m})(),Js=(()=>{class m extends Fu{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(d,b,M){const V=this._getItemHeight();return Math.min(Math.max(0,V*d-b+V/2),M)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(lt(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,ui.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(d){const b=Mc(d,this.options,this.optionGroups),M=this._getItemHeight();this.panel.nativeElement.scrollTop=0===d&&1===b?0:function(m,v,d,b){return m<d?m:m+v>d+256?Math.max(0,m-256+v):d}((d+b)*M,M,this.panel.nativeElement.scrollTop)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(d){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(d)}_getChangeEvent(d){return new rl(this,d)}_calculateOverlayOffsetX(){const d=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),b=this._viewportRuler.getViewportSize(),M=this._isRtl(),V=this.multiple?56:32;let J;if(this.multiple)J=40;else if(this.disableOptionCentering)J=16;else{let et=this._selectionModel.selected[0]||this.options.first;J=et&&et.group?32:16}M||(J*=-1);const we=0-(d.left+J-(M?V:0)),Oe=d.right+J-b.width+(M?0:V);we>0?J+=we+8:Oe>0&&(J-=Oe+8),this._overlayDir.offsetX=Math.round(J),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(d,b,M){const V=this._getItemHeight(),J=(V-this._triggerRect.height)/2,we=Math.floor(256/V);let Oe;return this.disableOptionCentering?0:(Oe=0===this._scrollTop?d*V:this._scrollTop===M?(d-(this._getItemCount()-we))*V+(V-(this._getItemCount()*V-256)%V):b-V/2,Math.round(-1*Oe-J))}_checkOverlayWithinViewport(d){const b=this._getItemHeight(),M=this._viewportRuler.getViewportSize(),V=this._triggerRect.top-8,J=M.height-this._triggerRect.bottom-8,we=Math.abs(this._offsetY),et=Math.min(this._getItemCount()*b,256)-we-this._triggerRect.height;et>J?this._adjustPanelUp(et,J):we>V?this._adjustPanelDown(we,V,d):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(d,b){const M=Math.round(d-b);this._scrollTop-=M,this._offsetY-=M,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(d,b,M){const V=Math.round(d-b);if(this._scrollTop+=V,this._offsetY+=V,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=M)return this._scrollTop=M,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const d=this._getItemHeight(),b=this._getItemCount(),M=Math.min(b*d,256),J=b*d-M;let we;we=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),we+=Mc(we,this.options,this.optionGroups);const Oe=M/2;this._scrollTop=this._calculateOverlayScroll(we,Oe,J),this._offsetY=this._calculateOverlayOffsetY(we,Oe,J),this._checkOverlayWithinViewport(J)}_getOriginBasedOnOption(){const d=this._getItemHeight(),b=(d-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-b+d/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return m.\u0275fac=function(){let v;return function(b){return(v||(v=E.n5z(m)))(b||m)}}(),m.\u0275cmp=E.Xpm({type:m,selectors:[["mat-select"]],contentQueries:function(d,b,M){if(1&d&&(E.Suo(M,cc,5),E.Suo(M,Ja,5),E.Suo(M,oa,5)),2&d){let V;E.iGM(V=E.CRH())&&(b.customTrigger=V.first),E.iGM(V=E.CRH())&&(b.options=V),E.iGM(V=E.CRH())&&(b.optionGroups=V)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(d,b){1&d&&E.NdJ("keydown",function(V){return b._handleKeydown(V)})("focus",function(){return b._onFocus()})("blur",function(){return b._onBlur()}),2&d&&(E.uIk("id",b.id)("tabindex",b.tabIndex)("aria-controls",b.panelOpen?b.id+"-panel":null)("aria-expanded",b.panelOpen)("aria-label",b.ariaLabel||null)("aria-required",b.required.toString())("aria-disabled",b.disabled.toString())("aria-invalid",b.errorState)("aria-describedby",b._ariaDescribedby||null)("aria-activedescendant",b._getAriaActiveDescendant()),E.ekj("mat-select-disabled",b.disabled)("mat-select-invalid",b.errorState)("mat-select-required",b.required)("mat-select-empty",b.empty)("mat-select-multiple",b.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[E._Bn([{provide:Ks,useExisting:m},{provide:oo,useExisting:m}]),E.qOj],ngContentSelectors:ga,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(d,b){if(1&d&&(E.F$t(Id),E.TgZ(0,"div",0,1),E.NdJ("click",function(){return b.toggle()}),E.TgZ(3,"div",2),E.YNc(4,qc,2,1,"span",3),E.YNc(5,Ol,3,2,"span",4),E.qZA(),E.TgZ(6,"div",5),E._UZ(7,"div",6),E.qZA(),E.qZA(),E.YNc(8,el,4,14,"ng-template",7),E.NdJ("backdropClick",function(){return b.close()})("attach",function(){return b._onAttached()})("detach",function(){return b.close()})),2&d){const M=E.MAs(1);E.uIk("aria-owns",b.panelOpen?b.id+"-panel":null),E.xp6(3),E.Q6J("ngSwitch",b.empty),E.uIk("id",b._valueId),E.xp6(1),E.Q6J("ngSwitchCase",!0),E.xp6(1),E.Q6J("ngSwitchCase",!1),E.xp6(3),E.Q6J("cdkConnectedOverlayPanelClass",b._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",b._scrollStrategy)("cdkConnectedOverlayOrigin",M)("cdkConnectedOverlayOpen",b.panelOpen)("cdkConnectedOverlayPositions",b._positions)("cdkConnectedOverlayMinWidth",null==b._triggerRect?null:b._triggerRect.width)("cdkConnectedOverlayOffsetY",b._offsetY)}},directives:[qo,R.RF,R.n9,Bs,R.ED,R.mk],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[zc.transformPanelWrap,zc.transformPanel]},changeDetection:0}),m})(),Hh=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({providers:[Pl],imports:[[R.ez,mh,Ic,is],Iu,Ma,Ic,is]}),m})();var xd=Q(1437);function Pd(m,v){1&m&&E._UZ(0,"app-loading-spinner")}function _h(m,v){if(1&m&&(E.TgZ(0,"mat-option",21),E.TgZ(1,"div"),E.TgZ(2,"p"),E._uU(3),E.qZA(),E.qZA(),E.qZA()),2&m){const d=v.$implicit;E.Q6J("value",d.key),E.xp6(3),E.Oqu(d.description)}}function Xs(m,v){if(1&m){const d=E.EpF();E.TgZ(0,"form",11),E.NdJ("ngSubmit",function(){E.CHM(d);const M=E.oxw(2);return M.submitStartChatForm(M.startChatForm)}),E.TgZ(1,"div",12),E.TgZ(2,"label",13),E._uU(3,"Username"),E.qZA(),E.TgZ(4,"div",14),E._UZ(5,"div",15),E._UZ(6,"input",16),E.qZA(),E.qZA(),E.TgZ(7,"div",17),E.TgZ(8,"mat-form-field"),E.TgZ(9,"mat-select",18),E.YNc(10,_h,4,2,"mat-option",19),E.qZA(),E.qZA(),E.qZA(),E.TgZ(11,"div"),E.TgZ(12,"button",20),E._uU(13," Start chat "),E.qZA(),E.qZA(),E.qZA()}if(2&m){const d=E.oxw(2);E.Q6J("formGroup",d.startChatForm),E.xp6(10),E.Q6J("ngForOf",d.menuOptions),E.xp6(2),E.Q6J("disabled",d.startChatForm.invalid)}}function Hs(m,v){1&m&&(E.TgZ(0,"div",22),E._uU(1," Your chat will be accepted soon! "),E.qZA())}const du=function(m,v,d){return{chatId:m,domain:v,client:d}};function Rl(m,v){if(1&m&&(E.TgZ(0,"div"),E._UZ(1,"app-chat-form",23),E.qZA()),2&m){const d=E.oxw(2);E.xp6(1),E.Q6J("chatHistory",d.currentChat[0].chatHistory)("userInfo",E.kEZ(2,du,d.clientChatId,d.clientChatDomain,d.clientUsername))}}function hu(m,v){if(1&m&&(E.TgZ(0,"div",8),E.YNc(1,Pd,1,0,"app-loading-spinner",7),E.YNc(2,Xs,14,3,"form",9),E.YNc(3,Hs,2,0,"div",10),E.YNc(4,Rl,2,6,"div",7),E.qZA()),2&m){const d=E.oxw();E.xp6(1),E.Q6J("ngIf",d.currentChat.length>0&&"pending"==d.currentChat[0].status),E.xp6(1),E.Q6J("ngIf","pending"!==(null==d.currentChat[0]?null:d.currentChat[0].status)&&"active"!==(null==d.currentChat[0]?null:d.currentChat[0].status)),E.xp6(1),E.Q6J("ngIf",d.currentChat.length>0&&"pending"==d.currentChat[0].status),E.xp6(1),E.Q6J("ngIf",d.currentChat.length>0&&"active"==d.currentChat[0].status)}}function Ua(m,v){1&m&&(E.TgZ(0,"div",24),E._uU(1," Your account has been blocked for misconduct! "),E.qZA())}function Va(m,v){if(1&m&&(E.TgZ(0,"li"),E._uU(1),E.qZA()),2&m){const d=E.oxw();E.xp6(1),E.Oqu(d.errorOnGetActiveMenuOptions)}}function Nu(m,v){if(1&m&&(E.TgZ(0,"li"),E._uU(1),E.qZA()),2&m){const d=E.oxw();E.xp6(1),E.Oqu(d.erroOnGetDomains)}}function dc(m,v){if(1&m&&(E.TgZ(0,"li"),E._uU(1),E.qZA()),2&m){const d=E.oxw();E.xp6(1),E.Oqu(d.errorOnGetChat)}}function il(m,v){if(1&m&&(E.TgZ(0,"li"),E._uU(1),E.qZA()),2&m){const d=E.oxw();E.xp6(1),E.Oqu(d.errorOnAddChat)}}function Rd(m,v){if(1&m&&(E.TgZ(0,"li"),E._uU(1),E.qZA()),2&m){const d=E.oxw();E.xp6(1),E.Oqu(d.errorOnGetBlockedUsers)}}function kl(m,v){if(1&m&&(E.TgZ(0,"li"),E._uU(1),E.qZA()),2&m){const d=E.oxw();E.xp6(1),E.Oqu(d.errorOnGetClientInfo)}}let Lu=(()=>{class m{constructor(d,b,M,V,J,we){this._fb=d,this._firestoreCollections=b,this._route=M,this._router=V,this._generateId=J,this._http=we,this.currentChat=[],this.clientInformation=[],this.isBlocked=void 0,this.errorOnGetActiveMenuOptions="",this.erroOnGetDomains="",this.errorOnGetChat="",this.errorOnAddChat="",this.errorOnGetBlockedUsers="",this.errorOnGetClientInfo=""}ngOnInit(){this._route.snapshot.queryParams.domain?(this.domain=this._route.snapshot.queryParams.domain,this.clientUsername=JSON.parse(localStorage.getItem("username/"+this.domain)),this.getClientInformation(),this._menuOptionsSubscription=this._firestoreCollections.getActiveMenuOptions().subscribe(d=>{this.menuOptions=d.map(b=>Object.assign({id:b.payload.doc.id},b.payload.doc.data())),this.startChatForm=this._fb.group({username:[this.clientUsername],option:[this.menuOptions[0].key,c.kI.required]}),this.errorOnGetActiveMenuOptions=""},d=>{this.errorOnGetActiveMenuOptions=d.message}),this.clientChatData=JSON.parse(localStorage.getItem("clientChatData/"+this.domain)),this.clientChatData&&(this.clientChatId=this.clientChatData.chatId,this.clientChatDomain=this.clientChatData.chatDomain,this._currentChatSubscription=this._firestoreCollections.getChat(this.clientChatDomain,"activeChats",this.clientChatId).subscribe(d=>{this.currentChat=d.map(b=>Object.assign({},b.payload.doc.data())),0==this.currentChat.length&&(localStorage.removeItem("clientChatData/"+this.domain),this._currentChatSubscription.unsubscribe()),this.errorOnGetChat=""},d=>{this.errorOnGetChat=d.message})),this._domainsSubscription=this._firestoreCollections.getDomains().subscribe(d=>{this.domains=d.map(b=>Object.assign({id:b.payload.doc.id},b.payload.doc.data())),new Promise((b,M)=>{for(let V=0;V<this.domains.length;V++){if(this.domains[V].domain==this.domain)return b();V==this.domains.length-1&&this._router.navigate(["/error"])}}),this.erroOnGetDomains=""},d=>{this.erroOnGetDomains=d.message})):this._router.navigate(["/error"])}ngOnDestroy(){this._menuOptionsSubscription&&this._menuOptionsSubscription.unsubscribe(),this._blockedUsersSubscription&&this._blockedUsersSubscription.unsubscribe(),this._currentChatSubscription&&this._currentChatSubscription.unsubscribe(),this._domainsSubscription&&this._domainsSubscription.unsubscribe()}submitStartChatForm(d){if(d.invalid)return;const b=d.value.username,M=this.clientInformation,V=d.value.option,J=this.domain,Oe=this._generateId.generateId(),et={username:b,clientInformation:M,option:V,domain:J,status:"pending",id:Oe};this.clientUsername=b,localStorage.setItem("username/"+this.domain,JSON.stringify(this.clientUsername)),this.clientChatDomain=J,this.clientChatId=Oe,localStorage.setItem("clientChatData/"+this.domain,JSON.stringify({chatDomain:this.clientChatDomain,chatId:this.clientChatId})),this._firestoreCollections.addChat(et,"activeChats").then(()=>{this._currentChatSubscription=this._firestoreCollections.getChat(this.clientChatDomain,"activeChats",this.clientChatId).subscribe($t=>{this.currentChat=$t.map(gn=>Object.assign({},gn.payload.doc.data())),this.errorOnGetChat=""},$t=>{this.errorOnGetChat=$t.message}),this.errorOnAddChat=""},$t=>{this.errorOnAddChat=$t.message})}getClientInformation(){this._http.get("https://api.geoapify.com/v1/ipinfo?apiKey="+G.N.geoLocationAPIKey).subscribe(d=>{const b=d.ip;this.clientInformation.push({ip:b,country:d.country.name,city:d.city.name}),this._blockedUsersSubscription=this._firestoreCollections.getBlockedUsersById().subscribe(we=>{this.blockedUsers=we.map(Oe=>Object.assign({id:Oe.payload.doc.id},Oe.payload.doc.data())),0==this.blockedUsers.length&&(this.isBlocked=!1),new Promise((Oe,et)=>{for(let yt=0;yt<this.blockedUsers.length;yt++)b==this.blockedUsers[yt].ip?(this.isBlocked=!0,Oe()):(yt==this.blockedUsers.length-1||0==this.blockedUsers.length)&&(this.isBlocked=!1,Oe())}),this.errorOnGetBlockedUsers=""},we=>{this.errorOnGetBlockedUsers=we.message}),this.errorOnGetClientInfo=""},d=>{this.errorOnGetClientInfo=d})}}return m.\u0275fac=function(d){return new(d||m)(E.Y36(c.qu),E.Y36(Ve.P),E.Y36(ve.gz),E.Y36(ve.F0),E.Y36(ke),E.Y36(fe.eN))},m.\u0275cmp=E.Xpm({type:m,selectors:[["app-chat"]],decls:14,vars:8,consts:[[1,"client-chat"],[1,"client-chat__header"],[1,"client-chat__container"],[2,"font-size","20px","font-weight","bold","line-height","80px"],["class","client-chat__form client-chat__container",4,"ngIf"],["style","text-align: center; padding: 5px;","class","client-chat__container",4,"ngIf"],[1,"error","client-chat__container"],[4,"ngIf"],[1,"client-chat__form","client-chat__container"],["class","sign-form",3,"formGroup","ngSubmit",4,"ngIf"],["style","text-align: center; padding: 5px; position: relative; z-index: 500;",4,"ngIf"],[1,"sign-form",3,"formGroup","ngSubmit"],[1,"sign-form__sign-element"],["for","username"],[1,"name"],[1,"name-img"],["type","text","name","username","formControlName","username","placeholder","Leave blank if you don't have..."],[1,"client-chat__form__select"],["formControlName","option"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn-default",2,"margin-top","20px",3,"disabled"],[3,"value"],[2,"text-align","center","padding","5px","position","relative","z-index","500"],[3,"chatHistory","userInfo"],[1,"client-chat__container",2,"text-align","center","padding","5px"]],template:function(d,b){1&d&&(E.TgZ(0,"div",0),E.TgZ(1,"div",1),E.TgZ(2,"div",2),E.TgZ(3,"p",3),E._uU(4,"LOGO"),E.qZA(),E.qZA(),E.qZA(),E.YNc(5,hu,5,4,"div",4),E.YNc(6,Ua,2,0,"div",5),E.TgZ(7,"ul",6),E.YNc(8,Va,2,1,"li",7),E.YNc(9,Nu,2,1,"li",7),E.YNc(10,dc,2,1,"li",7),E.YNc(11,il,2,1,"li",7),E.YNc(12,Rd,2,1,"li",7),E.YNc(13,kl,2,1,"li",7),E.qZA(),E.qZA()),2&d&&(E.xp6(5),E.Q6J("ngIf",null!=b.isBlocked&&1!=b.isBlocked),E.xp6(1),E.Q6J("ngIf",null!=b.isBlocked&&0!=b.isBlocked),E.xp6(2),E.Q6J("ngIf",b.errorOnGetActiveMenuOptions),E.xp6(1),E.Q6J("ngIf",b.erroOnGetDomains),E.xp6(1),E.Q6J("ngIf",b.errorOnGetChat),E.xp6(1),E.Q6J("ngIf",b.errorOnAddChat),E.xp6(1),E.Q6J("ngIf",b.errorOnGetBlockedUsers),E.xp6(1),E.Q6J("ngIf",b.errorOnGetClientInfo))},directives:[R.O5,Ce.g,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,gd,Js,R.sg,Ja,xd.a],styles:[".sign-form[_ngcontent-%COMP%]{background-color:var(--color2);max-width:767px;padding:20px;margin:0 auto;position:relative}.sign-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.sign-form__sign-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ebc317;text-align:center;font-size:1.3em;padding:5px}.sign-form__sign-element[_ngcontent-%COMP%]{margin:20px 0}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{display:flex}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(user.73c0f083ad3711c1d950.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   .email-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;box-sizing:border-box;background-image:url(email.31cd4a3f10faa4acdb5c.png);padding:10px}.sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .password-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(password.63582da5386052e0358d.png)}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 50px);border:1px solid var(--color8);color:var(--color7);border-radius:0 3px 3px 0;box-sizing:border-box;padding:7px;outline:none;background-color:#ffffff80;filter:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{border:1px solid var(--color8);-webkit-text-fill-color:var(--color7);-webkit-box-shadow:none;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.sign-form__sign-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;color:var(--color7)}.sign-form[_ngcontent-%COMP%]   .hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:10px 0 20px}.sign-form[_ngcontent-%COMP%]{border:1px solid var(--color8);border-radius:5px}.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}@media not all and (pointer: coarse){.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]:hover{background-color:#fbf4d3}}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:49%}.client-chat__header[_ngcontent-%COMP%]{background-color:#ebc317;height:80px;position:relative;z-index:500}.client-chat__form[_ngcontent-%COMP%]{padding:5px}.client-chat__container[_ngcontent-%COMP%]{max-width:767px;margin:0 auto}.client-chat[_ngcontent-%COMP%]   .sign-form[_ngcontent-%COMP%]{border:none;width:100%;box-sizing:border-box;padding:1%}.client-chat[_ngcontent-%COMP%]   .sign-form[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-top:10px}"]}),m})();Q(9193);let Fd=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({imports:[[hr]]}),m})(),h=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({providers:[Tr],imports:[[Fd,Ma,is],Fd,Ma]}),m})();var _=Q(4466);let w=(()=>{class m{}return m.\u0275fac=function(d){return new(d||m)},m.\u0275mod=E.oAB({type:m}),m.\u0275inj=E.cJS({imports:[[R.ez,c.UX,c.u5,h,Hh,_.m,ve.Bz.forChild([{path:"",component:Lu},{path:"**",redirectTo:""}])]]}),m})()},6592:(jt,rt,Q)=>{"use strict";Q.r(rt),Q.d(rt,{ControlPanelModule:()=>ri});var R=Q(8583),c=Q(7716),G=Q(9447),E=Q(2213);const Ve=function(){return["chats"]},ve=function(){return["settings"]};function ke(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",2),c.TgZ(1,"ul",3),c.TgZ(2,"li",4),c._uU(3,"Chats"),c.qZA(),c.TgZ(4,"li",4),c._uU(5,"Settings"),c.qZA(),c.qZA(),c.TgZ(6,"button",5),c.NdJ("click",function(){return c.CHM(W),c.oxw().logout()}),c._uU(7,"Logout"),c.qZA(),c.qZA()}2&ie&&(c.xp6(2),c.Q6J("routerLink",c.DdM(2,Ve)),c.xp6(2),c.Q6J("routerLink",c.DdM(3,ve)))}let fe=(()=>{class ie{constructor(W){this._authService=W}ngOnInit(){this._userSubscription=this._authService.user.subscribe(W=>{this.user=W})}ngOnDestroy(){this._userSubscription.unsubscribe()}logout(){this._authService.logout()}}return ie.\u0275fac=function(W){return new(W||ie)(c.Y36(G.e))},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-header"]],decls:2,vars:1,consts:[[1,"container"],["class","header-nav",4,"ngIf"],[1,"header-nav"],[1,"header-nav__links"],["routerLinkActive","header-router-link-active",3,"routerLink"],[1,"header-nav__logout-btn","btn-default","narrow-btn",3,"click"]],template:function(W,he){1&W&&(c.TgZ(0,"div",0),c.YNc(1,ke,8,4,"div",1),c.qZA()),2&W&&(c.xp6(1),c.Q6J("ngIf",null!=he.user&&null!=he.user))},directives:[R.O5,E.Od,E.rH],styles:[".header-nav[_ngcontent-%COMP%]{display:flex;padding-right:10px;justify-content:space-between;align-items:center;border-bottom:1px solid var(--color8);margin-bottom:5px}.header-nav__links[_ngcontent-%COMP%]{display:flex;align-items:center}.header-nav__links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px;list-style:none;margin-right:10px;cursor:pointer;font-size:1.2rem}.header-nav__links[_ngcontent-%COMP%]   .header-router-link-active[_ngcontent-%COMP%]{background-color:#ebc317;color:#fff}.header-nav__logout-btn[_ngcontent-%COMP%]{font-size:1.2rem}"]}),ie})(),Ce=(()=>{class ie{constructor(){}ngOnInit(){}}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-control-panel"]],decls:3,vars:0,consts:[[1,"control-panel"]],template:function(W,he){1&W&&(c.TgZ(0,"div",0),c._UZ(1,"app-header"),c._UZ(2,"router-outlet"),c.qZA())},directives:[fe,E.lC],styles:[""]}),ie})();var re=Q(665),Ee=Q(2152);function pe(ie,qe){1&ie&&c._UZ(0,"app-loading-spinner")}function ye(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," Please enter your email! "),c.qZA())}function De(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," Please enter a valid email! "),c.qZA())}function xe(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," Please enter a passowrd! "),c.qZA())}function We(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," The password could not be longer then 30 symbols! "),c.qZA())}function X(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," The password should be at least 8 symbols! "),c.qZA())}function Re(ie,qe){if(1&ie&&(c.TgZ(0,"li",17),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorAuthMsg)}}function _t(ie,qe){if(1&ie&&(c.TgZ(0,"li",17),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnGetuserData)}}let _n=(()=>{class ie{constructor(W){this._authService=W}ngOnInit(){this.signinForm=new re.cw({email:new re.NI(null,[re.kI.required,re.kI.email]),password:new re.NI(null,[re.kI.required,re.kI.minLength(8),re.kI.maxLength(30)])}),this._errorAuthMsgSubscription=this._authService.errorAuthMsgSubject.subscribe(W=>{this.errorAuthMsg=W}),this._errorOnGetuserDataSubscription=this._authService.errorOnGetuserDataSubject.subscribe(W=>{this.errorOnGetuserData=W}),this._isLoadingSubscription=this._authService.isLoadingSubject.subscribe(W=>{this.isLoading=W})}ngOnDestroy(){this._errorAuthMsgSubscription.unsubscribe(),this._errorOnGetuserDataSubscription.unsubscribe(),this._isLoadingSubscription.unsubscribe(),this._authService.errorAuthMsg="",this._authService.errorAuthMsgSubject.next(this._authService.errorAuthMsg)}onSubmit(W){this._authService.signIn(W.value.email,W.value.password)}}return ie.\u0275fac=function(W){return new(W||ie)(c.Y36(G.e))},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-login"]],decls:33,vars:10,consts:[[1,"container"],[1,"sign-form",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"sign-form__sign-up-header"],[1,"hr-border"],[1,"sign-form__sign-element"],["for","email"],[1,"email"],[1,"email-img"],["type","text","name","email","formControlName","email"],[1,"error"],["for","password"],[1,"password"],[1,"password-img"],["type","password","name","password","formControlName","password"],["type","submit",1,"btn-default",3,"disabled"],["class","error-msg",4,"ngIf"],[1,"error-msg"]],template:function(W,he){1&W&&(c.TgZ(0,"div"),c.TgZ(1,"div",0),c.TgZ(2,"form",1),c.NdJ("ngSubmit",function(){return he.onSubmit(he.signinForm)}),c.YNc(3,pe,1,0,"app-loading-spinner",2),c.TgZ(4,"div",3),c.TgZ(5,"h2"),c._uU(6,"Login"),c.qZA(),c.qZA(),c._UZ(7,"hr",4),c.TgZ(8,"div",5),c.TgZ(9,"label",6),c._uU(10,"Email"),c.qZA(),c.TgZ(11,"div",7),c._UZ(12,"div",8),c._UZ(13,"input",9),c.qZA(),c.TgZ(14,"ul",10),c.YNc(15,ye,2,0,"li",2),c.YNc(16,De,2,0,"li",2),c.qZA(),c.qZA(),c.TgZ(17,"div",5),c.TgZ(18,"label",11),c._uU(19,"Password"),c.qZA(),c.TgZ(20,"div",12),c._UZ(21,"div",13),c._UZ(22,"input",14),c.qZA(),c.TgZ(23,"ul",10),c.YNc(24,xe,2,0,"li",2),c.YNc(25,We,2,0,"li",2),c.YNc(26,X,2,0,"li",2),c.qZA(),c.qZA(),c.TgZ(27,"div"),c.TgZ(28,"button",15),c._uU(29,"Login"),c.qZA(),c.TgZ(30,"ul",10),c.YNc(31,Re,2,1,"li",16),c.YNc(32,_t,2,1,"li",16),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&W&&(c.xp6(2),c.Q6J("formGroup",he.signinForm),c.xp6(1),c.Q6J("ngIf",he.isLoading),c.xp6(12),c.Q6J("ngIf",!he.signinForm.get("email").valid&&!he.signinForm.get("email").hasError("email")&&he.signinForm.get("email").touched),c.xp6(1),c.Q6J("ngIf",he.signinForm.get("email").hasError("email")&&he.signinForm.get("email").touched),c.xp6(8),c.Q6J("ngIf",!he.signinForm.get("password").valid&&!he.signinForm.get("password").hasError("maxlength")&&!he.signinForm.get("password").hasError("minlength")&&he.signinForm.get("password").touched),c.xp6(1),c.Q6J("ngIf",he.signinForm.get("password").hasError("maxlength")&&he.signinForm.get("password").touched),c.xp6(1),c.Q6J("ngIf",he.signinForm.get("password").hasError("minlength")&&he.signinForm.get("password").touched),c.xp6(2),c.Q6J("disabled",!he.signinForm.valid),c.xp6(3),c.Q6J("ngIf",he.errorAuthMsg),c.xp6(1),c.Q6J("ngIf",he.errorOnGetuserData))},directives:[re._Y,re.JL,re.sg,R.O5,re.Fj,re.JJ,re.u,Ee.g],styles:['@import"https://fonts.googleapis.com/css?family=Rubik&display=swap";.sign-form[_ngcontent-%COMP%]{background-color:var(--color2);max-width:767px;padding:20px;margin:0 auto;position:relative}.sign-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.sign-form__sign-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ebc317;text-align:center;font-size:1.3em;padding:5px}.sign-form__sign-element[_ngcontent-%COMP%]{margin:20px 0}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{display:flex}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(user.73c0f083ad3711c1d950.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   .email-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;box-sizing:border-box;background-image:url(email.31cd4a3f10faa4acdb5c.png);padding:10px}.sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .password-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(password.63582da5386052e0358d.png)}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 50px);border:1px solid var(--color8);color:var(--color7);border-radius:0 3px 3px 0;box-sizing:border-box;padding:7px;outline:none;background-color:#ffffff80;filter:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{border:1px solid var(--color8);-webkit-text-fill-color:var(--color7);-webkit-box-shadow:none;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.sign-form__sign-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;color:var(--color7)}.sign-form[_ngcontent-%COMP%]   .hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:10px 0 20px}.sign-form[_ngcontent-%COMP%]{border:1px solid var(--color8);border-radius:5px}.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}@media not all and (pointer: coarse){.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]:hover{background-color:#fbf4d3}}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:49%}.sign-form[_ngcontent-%COMP%]{margin-top:100px;box-shadow:0 0 10px 1px #000000bf;border-radius:5px}']}),ie})();var Nt=Q(2329),ut=Q(3210),Yt=Q(1437);function wt(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"p"),c.TgZ(2,"span",10),c._uU(3,"user: "),c.qZA(),c._uU(4),c.qZA(),c.TgZ(5,"p"),c.TgZ(6,"span",10),c._uU(7,"option: "),c.qZA(),c._uU(8),c.qZA(),c.TgZ(9,"div"),c.TgZ(10,"button",11),c.NdJ("click",function(){c.CHM(W);const lt=c.oxw().$implicit;return c.oxw(2).acceptChat(lt)}),c._uU(11," Accept "),c.qZA(),c.qZA(),c.qZA()}if(2&ie){const W=c.oxw().$implicit;c.xp6(4),c.Oqu(W.username),c.xp6(4),c.Oqu(W.option)}}function In(ie,qe){if(1&ie&&(c.TgZ(0,"div"),c.YNc(1,wt,12,2,"div",7),c.qZA()),2&ie){const W=qe.$implicit;c.xp6(1),c.Q6J("ngIf","pending"==W.status)}}function Et(ie,qe){if(1&ie&&(c.TgZ(0,"div"),c.TgZ(1,"div"),c.TgZ(2,"p",8),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"div",9),c.YNc(5,In,2,1,"div",4),c.qZA(),c.qZA()),2&ie){const W=qe.$implicit;c.xp6(3),c.hij(" ",W.domainDescription," "),c.xp6(2),c.Q6J("ngForOf",W.chats)}}function Ke(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"button",25),c.NdJ("click",function(){return c.CHM(W),c.oxw(5).enableBlockOptio()}),c._uU(1," Block client "),c.qZA()}}function ot(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"form",26),c.NdJ("ngSubmit",function(){c.CHM(W);const lt=c.oxw(3).$implicit,Vt=c.oxw(2);return Vt.submitBlockForm(lt,Vt.blockForm)}),c._UZ(1,"textarea",27),c.TgZ(2,"div"),c.TgZ(3,"button",28),c._uU(4," Block "),c.qZA(),c.TgZ(5,"button",29),c.NdJ("click",function(){return c.CHM(W),c.oxw(5).cancelBLokcOption()}),c._uU(6," Close "),c.qZA(),c.qZA(),c.qZA()}if(2&ie){const W=c.oxw(5);c.Q6J("formGroup",W.blockForm),c.xp6(3),c.Q6J("disabled",W.blockForm.invalid)}}function it(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"button",29),c.NdJ("click",function(){return c.CHM(W),c.oxw(5).enableChatPopUp()}),c._uU(1," Close Chat "),c.qZA()}}function nt(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",30),c.TgZ(1,"div",31),c.TgZ(2,"p"),c._uU(3,"\u0410re you sure you want to close this chat?"),c.qZA(),c.TgZ(4,"div",32),c.TgZ(5,"button",33),c.NdJ("click",function(){c.CHM(W);const lt=c.oxw(3).$implicit;return c.oxw(2).closeChat(lt)}),c._uU(6," Yes "),c.qZA(),c.TgZ(7,"button",34),c.NdJ("click",function(){return c.CHM(W),c.oxw(5).disableCloseChatOption()}),c._uU(8," No "),c.qZA(),c.qZA(),c.qZA(),c.qZA()}}const vt=function(ie,qe,W){return{chatId:ie,domain:qe,operator:W}};function at(ie,qe){if(1&ie&&(c.TgZ(0,"div",16),c.TgZ(1,"div"),c.TgZ(2,"div",17),c._UZ(3,"app-chat-form",18),c.qZA(),c.qZA(),c.TgZ(4,"div",19),c.TgZ(5,"p",2),c._uU(6,"Client's info"),c.qZA(),c.TgZ(7,"div",20),c.TgZ(8,"p"),c.TgZ(9,"span"),c._uU(10,"IP: "),c.qZA(),c._uU(11),c.qZA(),c.TgZ(12,"p"),c.TgZ(13,"span"),c._uU(14,"City: "),c.qZA(),c._uU(15),c.qZA(),c.TgZ(16,"p"),c.TgZ(17,"span"),c._uU(18,"Country: "),c.qZA(),c._uU(19),c.qZA(),c.TgZ(20,"div"),c.YNc(21,Ke,2,0,"button",21),c.YNc(22,ot,7,2,"form",22),c.qZA(),c.TgZ(23,"div"),c.YNc(24,it,2,0,"button",23),c.YNc(25,nt,9,0,"div",24),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&ie){const W=c.oxw(2).$implicit,he=c.oxw(2);c.xp6(3),c.Q6J("chatHistory",W.chatHistory)("userInfo",c.kEZ(9,vt,W.id,W.domain,W.operatorDisplayName)),c.xp6(8),c.Oqu(W.clientInformation[0].ip),c.xp6(4),c.Oqu(W.clientInformation[0].city),c.xp6(4),c.Oqu(W.clientInformation[0].country),c.xp6(2),c.Q6J("ngIf",!he.isBlockOptionActive),c.xp6(1),c.Q6J("ngIf",he.isBlockOptionActive),c.xp6(2),c.Q6J("ngIf",!he.isCloseChatPopUpAcive),c.xp6(1),c.Q6J("ngIf",he.isCloseChatPopUpAcive)}}const tn=function(ie){return{"active-chat":ie}};function sn(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"div",14),c.NdJ("click",function(){c.CHM(W);const lt=c.oxw().$implicit;return c.oxw(2).setActiveChat(lt.id)}),c.TgZ(2,"p"),c.TgZ(3,"span"),c._uU(4,"user:"),c.qZA(),c._uU(5),c.qZA(),c.TgZ(6,"p"),c.TgZ(7,"span"),c._uU(8,"option:"),c.qZA(),c._uU(9),c.qZA(),c.TgZ(10,"p"),c.TgZ(11,"span"),c._uU(12,"domain:"),c.qZA(),c._uU(13),c.qZA(),c.qZA(),c.YNc(14,at,26,13,"div",15),c.qZA()}if(2&ie){const W=c.oxw().$implicit,he=c.oxw(2);c.xp6(1),c.Q6J("ngClass",c.VKq(5,tn,W.id==he.activeChat)),c.xp6(4),c.hij(" ",W.username,""),c.xp6(4),c.hij(" ",W.option,""),c.xp6(4),c.hij(" ",W.domain,""),c.xp6(1),c.Q6J("ngIf",W.id==he.activeChat)}}function Sn(ie,qe){if(1&ie&&(c.TgZ(0,"div"),c.YNc(1,sn,15,7,"div",12),c.qZA()),2&ie){const W=qe.$implicit,he=c.oxw(2);c.xp6(1),c.Q6J("ngIf","active"==W.status&&W.operatorEmail==(null==he.user?null:he.user.email))}}function an(ie,qe){if(1&ie&&(c.TgZ(0,"div"),c.YNc(1,Sn,2,1,"div",4),c.qZA()),2&ie){const W=qe.$implicit;c.xp6(1),c.Q6J("ngForOf",W.chats)}}function Bt(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnaAcceptChat)}}function Rt(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnBlockUser)}}function Jt(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnGetChats)}}function Gt(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnAddChat)}}function kn(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnDeleteChat)}}let Tn=(()=>{class ie{constructor(W,he,lt){this._authService=W,this._firestoreCollections=he,this._fb=lt,this.activeChats=[],this.chatPopUp=!1,this.isBlockOptionActive=!1,this.isCloseChatPopUpAcive=!1,this.errorOnaAcceptChat="",this.errorOnBlockUser="",this.errorOnGetChats="",this.errorOnAddChat="",this.errorOnDeleteChat=""}ngOnInit(){this.activeChat=JSON.parse(localStorage.getItem("operator/activeChat")),new Promise((W,he)=>{this._userSubscription=this._authService.user.subscribe(lt=>{this.user=lt,null!=this.user&&W()})}).then(()=>{for(const W of this.user.domains)W.checked&&this.activeChats.push({domainDescription:W.description,fsCollection:W.domain,chatsSubscription:""});for(let W=0;W<this.activeChats.length;W++)this.activeChats[W].chatsSubscription=this._firestoreCollections.getChats(this.activeChats[W].fsCollection,"activeChats").subscribe(Vt=>{this.activeChats[W].chats=Vt.map(wn=>Object.assign({},wn.payload.doc.data())),this.errorOnGetChats=""},Vt=>{this.errorOnGetChats=Vt.message})}),this.blockForm=this._fb.group({reason:[null,re.kI.required]})}ngOnDestroy(){this._userSubscription.unsubscribe();for(const W of this.activeChats)W.chatsSubscription.unsubscribe()}acceptChat(W){this._firestoreCollections.acceptPendingChat(W,{operatorDisplayName:this.user.name,operatorEmail:this.user.email}).then(()=>{this.setActiveChat(W.id),this.errorOnaAcceptChat=""},wn=>{this.errorOnaAcceptChat=wn.message})}setActiveChat(W){this.activeChat=W,localStorage.setItem("operator/activeChat",JSON.stringify(this.activeChat)),this.blockForm.reset()}submitBlockForm(W,he){if(he.invalid)return;const lt=W.username,Vt=W.clientInformation[0].ip,wn=he.value.reason,Ir=this.user.email,$n=Nt.Z.firestore.Timestamp.now();this._firestoreCollections.blockUserByIp({username:lt,ip:Vt,reason:wn,operator:Ir,date:$n}).then(()=>{this.cancelBLokcOption(),this.closeChat(W),this.errorOnBlockUser=""},xi=>{this.errorOnBlockUser=xi.message})}enableBlockOptio(){this.isBlockOptionActive=!0}cancelBLokcOption(){this.blockForm.reset(),this.isBlockOptionActive=!1}enableChatPopUp(){this.isCloseChatPopUpAcive=!0}closeChat(W){this._firestoreCollections.addChat(W,"finishedChats").then(()=>{this._firestoreCollections.deleteChat(W.domain,W.id).then(()=>{this.disableCloseChatOption();for(const he of this.activeChats)for(const lt of he.chats)lt.id&&(localStorage.setItem("operator/activeChat",JSON.stringify(lt.id)),this.activeChat=JSON.parse(localStorage.getItem("operator/activeChat")));this.errorOnDeleteChat=""},he=>{this.errorOnDeleteChat=he.message}),this.errorOnAddChat=""},he=>{this.errorOnAddChat=he.message})}disableCloseChatOption(){this.isCloseChatPopUpAcive=!1}}return ie.\u0275fac=function(W){return new(W||ie)(c.Y36(G.e),c.Y36(ut.P),c.Y36(re.qu))},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-chats"]],decls:17,vars:7,consts:[[1,"chats"],[1,"chats__pending"],[1,"chats__title"],[1,"chats__pending__container"],[4,"ngFor","ngForOf"],[1,"chats__chats"],[1,"error"],[4,"ngIf"],[1,"chats__pending__container__pending-chat__domain"],[1,"chats__pending__container__pending-chat"],[1,"client-info"],["type","button",1,"btn-default","narrow-btn",2,"margin","5px 0 15px 0",3,"click"],["class","chats__chats__nav",4,"ngIf"],[1,"chats__chats__nav"],[1,"chats__chats__nav__chat-info",3,"ngClass","click"],["class","chats__chats__content",4,"ngIf"],[1,"chats__chats__content"],[1,"chats__chats__content__chat-history"],[3,"chatHistory","userInfo"],[1,"chats__chats__content__clint-info-container"],[1,"chats__chats__content__clint-info-container__clint-info"],["class","btn-default narrow-btn","style","margin: 10px 0;","type","button",3,"click",4,"ngIf"],["style","margin: 10px 0;",3,"formGroup","ngSubmit",4,"ngIf"],["class","btn-default narrow-btn","type","button",3,"click",4,"ngIf"],["class","fixed-pop-up-container",4,"ngIf"],["type","button",1,"btn-default","narrow-btn",2,"margin","10px 0",3,"click"],[2,"margin","10px 0",3,"formGroup","ngSubmit"],["formControlName","reason","placeholder","Blocking reason..."],["type","submit",1,"btn-default","narrow-btn",2,"margin-right","10px",3,"disabled"],["type","button",1,"btn-default","narrow-btn",3,"click"],[1,"fixed-pop-up-container"],[1,"pop-up-body"],[1,"pop-up-buttons"],[1,"btn-default","narrow-btn",2,"margin-right","10px",3,"click"],[1,"btn-default","narrow-btn",3,"click"]],template:function(W,he){1&W&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"p",2),c._uU(3,"Pending chats"),c.qZA(),c.TgZ(4,"div",3),c.YNc(5,Et,6,2,"div",4),c.qZA(),c.qZA(),c.TgZ(6,"div",5),c.TgZ(7,"p",2),c._uU(8,"Chats"),c.qZA(),c.TgZ(9,"div"),c.YNc(10,an,2,1,"div",4),c.qZA(),c.TgZ(11,"ul",6),c.YNc(12,Bt,2,1,"li",7),c.YNc(13,Rt,2,1,"li",7),c.YNc(14,Jt,2,1,"li",7),c.YNc(15,Gt,2,1,"li",7),c.YNc(16,kn,2,1,"li",7),c.qZA(),c.qZA(),c.qZA()),2&W&&(c.xp6(5),c.Q6J("ngForOf",he.activeChats),c.xp6(5),c.Q6J("ngForOf",he.activeChats),c.xp6(2),c.Q6J("ngIf",he.errorOnaAcceptChat),c.xp6(1),c.Q6J("ngIf",he.errorOnBlockUser),c.xp6(1),c.Q6J("ngIf",he.errorOnGetChats),c.xp6(1),c.Q6J("ngIf",he.errorOnAddChat),c.xp6(1),c.Q6J("ngIf",he.errorOnDeleteChat))},directives:[R.sg,R.O5,R.mk,Yt.a,re._Y,re.JL,re.sg,re.Fj,re.JJ,re.u],styles:[".chats[_ngcontent-%COMP%]{display:flex;align-items:flex-start;height:calc(100vh - 48px)}.chats__pending[_ngcontent-%COMP%]{width:250px;height:100%;border-right:1px solid var(--color8)}.chats__pending__container[_ngcontent-%COMP%]{height:calc(100% - 30px);overflow:scroll;scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.chats__pending__container[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.chats__pending__container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.chats__pending__container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.chats__pending__container[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.chats__pending__container[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.chats__pending__container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.chats__pending__container[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.chats__pending__container__pending-chat[_ngcontent-%COMP%]{height:300px;overflow:scroll;scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.chats__pending__container__pending-chat[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.chats__pending__container__pending-chat[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.chats__pending__container__pending-chat[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.chats__pending__container__pending-chat[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.chats__pending__container__pending-chat[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.chats__pending__container__pending-chat[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.chats__pending__container__pending-chat[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.chats__pending__container__pending-chat__domain[_ngcontent-%COMP%]{background-color:#fbf4d3;border-top-right-radius:10px;border-bottom-right-radius:10px}.chats__pending__container__pending-chat[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]{display:inline-block;width:53px}.chats__chats[_ngcontent-%COMP%]{width:calc(100% - 250px);position:relative;height:100%;overflow:scroll;scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.chats__chats[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.chats__chats[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.chats__chats[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.chats__chats[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.chats__chats[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.chats__chats[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.chats__chats[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.chats__chats__content[_ngcontent-%COMP%]{position:absolute;display:flex;top:29px;left:260px;width:calc(100% - 260px)}.chats__chats__content__chat-history[_ngcontent-%COMP%]{width:700px}.chats__chats__content__clint-info-container[_ngcontent-%COMP%]{width:100%;min-width:220px}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]{padding:5px 0 5px 10px}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:64px}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:100px}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{outline-color:#ebc317;background-color:var(--color12);border:1px solid var(--color9);border-radius:3px;padding:10px;resize:none;width:100%;height:70px;box-sizing:border-box;color:var(--color7);scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#b53636}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#b53636}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:-moz-placeholder{color:#b53636}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-moz-placeholder{color:#b53636}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:-ms-input-placeholder{color:#b53636}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.chats__chats__content__clint-info-container__clint-info[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.chats__chats__nav[_ngcontent-%COMP%]{width:250px}.chats__chats__nav__chat-info[_ngcontent-%COMP%]{padding:5px;cursor:pointer}.chats__chats__nav__chat-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:56px}.chats__chats__nav[_ngcontent-%COMP%]   .active-chat[_ngcontent-%COMP%]{background-color:#ebc317;color:#fff;border-top-right-radius:20px;border-bottom-right-radius:20px}.chats__title[_ngcontent-%COMP%], .chats__pending__container__pending-chat__domain[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:bold;padding:5px 0 5px 10px;border-bottom:1px solid var(--color8)}"]}),ie})();var lr=Q(4466);let Zn=(()=>{class ie{constructor(){this.defaultRoles=[{name:"Users",value:"users",route:"users",checked:!1},{name:"Register",value:"register",route:"register",checked:!1},{name:"Blocked Users",value:"blockedUsers",route:"blocked-users",checked:!0},{name:"Account Settings",value:"accountSettings",route:"account-settings",checked:!0},{name:"Domain Options",value:"domainOptions",route:"domain-options",checked:!1},{name:"Reports",value:"reports",route:"reports",checked:!1}]}}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275prov=c.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})();function qn(ie,qe){1&ie&&c._UZ(0,"app-loading-spinner")}function Xn(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," Please enter your name! "),c.qZA())}function An(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," The name could not be longer then 10 characters! "),c.qZA())}function On(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," The name should be at least 3 characters! "),c.qZA())}function Si(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," Please enter your email! "),c.qZA())}function vn(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," Please enter a valid email! "),c.qZA())}function Kt(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," Please enter a passowrd! "),c.qZA())}function zn(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," The password could not be longer then 20 symbols! "),c.qZA())}function Ln(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," The password should be at least 8 symbols! "),c.qZA())}function Qt(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," The passwords do not match! "),c.qZA())}function gr(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",27),c.TgZ(1,"label"),c._uU(2),c.qZA(),c.TgZ(3,"input",28),c.NdJ("change",function(lt){const wn=c.CHM(W).index;return c.oxw().onRoleChange(lt,wn)}),c.qZA(),c.qZA()}if(2&ie){const W=qe.$implicit;c.xp6(2),c.hij(" ",W.name," "),c.xp6(1),c.Q6J("value",W.value),c.uIk("checked",W.checked?"checked":null)("name",W.name)("data-route",W.route)("data-checked",W.checked)}}function Vr(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",27),c.TgZ(1,"label"),c._uU(2),c.qZA(),c.TgZ(3,"input",29),c.NdJ("change",function(lt){const wn=c.CHM(W).index;return c.oxw().onDomainChange(lt,wn)}),c.qZA(),c.qZA()}if(2&ie){const W=qe.$implicit;c.xp6(2),c.hij(" ",W.description," "),c.xp6(1),c.Q6J("value",W.domain)("name",W.description)}}function Kn(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorAuthMsg)}}function St(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnSetUserData)}}function Ze(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",30),c.TgZ(1,"div",31),c.TgZ(2,"p"),c._uU(3,"The registration has been created."),c.qZA(),c.TgZ(4,"div",32),c.TgZ(5,"button",33),c.NdJ("click",function(){return c.CHM(W),c.oxw().resetForm()}),c._uU(6,"Close"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}}const je=function(ie){return{invalid:ie}};let It=(()=>{class ie{constructor(W,he,lt,Vt){this._formBuilder=W,this._authService=he,this._roleService=lt,this._firestoreCollections=Vt,this.roles=this._roleService.defaultRoles,this.finishedReg=!1}ngOnInit(){this.signupForm=this._formBuilder.group({name:[null,[re.kI.required,re.kI.minLength(3),re.kI.maxLength(10)]],email:[null,[re.kI.required,re.kI.email]],password:[null,[re.kI.required,re.kI.minLength(8),re.kI.maxLength(20)]],confirmPass:[null,[re.kI.required]],roles:this._formBuilder.array([]),domains:this._formBuilder.array([])},{validator:this.confirmPasswordMatcher("password","confirmPass")}),this.rolesArray=this.signupForm.get("roles"),this.domainsArray=this.signupForm.get("domains"),new Promise((W,he)=>{this._domainsSubscription=this._firestoreCollections.getDomains().subscribe(lt=>{this.domains=lt.map(Vt=>Object.assign({id:Vt.payload.doc.id},Vt.payload.doc.data())),null!=this.domains&&W()},lt=>{})}).then(()=>{for(const W of this.domains)this.domainsArray.push(new re.NI({checked:!1,description:W.description,domain:W.domain}))});for(const W of this.roles)this.rolesArray.push(new re.NI({name:W.name,value:W.value,route:W.route,checked:W.checked}));this._errorAuthMsgSubscription=this._authService.errorAuthMsgSubject.subscribe(W=>{this.errorAuthMsg=W}),this._errorOnSetUserDataSubscription=this._authService.errorOnSetUserDataSubject.subscribe(W=>{this.errorOnSetUserData=W}),this._isLoadingSubscription=this._authService.isLoadingSubject.subscribe(W=>{this.isLoading=W}),this._finishedRegSubscription=this._authService.finishedRegSubject.subscribe(W=>{this.finishedReg=W})}ngOnDestroy(){this._errorAuthMsgSubscription.unsubscribe(),this._errorOnSetUserDataSubscription.unsubscribe(),this._isLoadingSubscription.unsubscribe(),this._domainsSubscription.unsubscribe(),this._finishedRegSubscription.unsubscribe(),this._authService.errorAuthMsg="",this._authService.errorAuthMsgSubject.next(this._authService.errorAuthMsg)}confirmPasswordMatcher(W,he){return lt=>{const wn=lt.controls[he];wn.setErrors(lt.controls[W].value!==wn.value?{mustMatch:!0}:null)}}onRoleChange(W,he){this.rolesArray.value[he].checked=!!W.target.checked}onDomainChange(W,he){this.domainsArray.value[he].checked=!!W.target.checked}onSubmit(W){W.invalid||this._authService.signUp({name:W.value.name,email:W.value.email,password:W.value.password,roles:W.value.roles,domains:W.value.domains,active:!0})}resetForm(){this.signupForm.reset(),this._authService.finishedReg=!1,this._authService.finishedRegSubject.next(this._authService.finishedReg)}}return ie.\u0275fac=function(W){return new(W||ie)(c.Y36(re.qu),c.Y36(G.e),c.Y36(Zn),c.Y36(ut.P))},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-register"]],decls:67,vars:20,consts:[[1,"container"],[1,"sign-form",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"sign-form__sign-up-header"],[1,"hr-border"],[1,"sign-form__sign-element"],["for","name"],[1,"name"],[1,"name-img"],["type","text","name","name","formControlName","name"],[1,"error"],["for","email"],[1,"email"],[1,"email-img"],["type","text","name","email","formControlName","email"],["for","password"],[1,"password"],[1,"password-img"],["type","password","name","password","formControlName","password"],["for","confirmPass"],["type","password","name","confirmPass","formControlName","confirmPass",3,"ngClass"],[1,"sign-form__sign-element","options"],[1,"sign-form__sign-element__option-containter"],["class","sign-form__sign-element__option-containter__option",4,"ngFor","ngForOf"],[1,"sign-form__sign-form-btn"],["type","submit",1,"btn-default",3,"disabled"],["class","fixed-pop-up-container",4,"ngIf"],[1,"sign-form__sign-element__option-containter__option"],["type","checkbox",3,"value","change"],["type","checkbox",3,"value","name","change"],[1,"fixed-pop-up-container"],[1,"pop-up-body"],[1,"pop-up-buttons"],["type","button",1,"btn-default","narrow-btn",3,"click"]],template:function(W,he){1&W&&(c.TgZ(0,"div"),c.TgZ(1,"div",0),c.TgZ(2,"form",1),c.NdJ("ngSubmit",function(){return he.onSubmit(he.signupForm)}),c.YNc(3,qn,1,0,"app-loading-spinner",2),c.TgZ(4,"div",3),c.TgZ(5,"h2"),c._uU(6,"Create user"),c.qZA(),c.qZA(),c._UZ(7,"hr",4),c.TgZ(8,"div",5),c.TgZ(9,"label",6),c._uU(10,"Display Name (visible to the client)"),c.qZA(),c.TgZ(11,"div",7),c._UZ(12,"div",8),c._UZ(13,"input",9),c.qZA(),c.TgZ(14,"ul",10),c.YNc(15,Xn,2,0,"li",2),c.YNc(16,An,2,0,"li",2),c.YNc(17,On,2,0,"li",2),c.qZA(),c.qZA(),c.TgZ(18,"div",5),c.TgZ(19,"label",11),c._uU(20,"Email"),c.qZA(),c.TgZ(21,"div",12),c._UZ(22,"div",13),c._UZ(23,"input",14),c.qZA(),c.TgZ(24,"ul",10),c.YNc(25,Si,2,0,"li",2),c.YNc(26,vn,2,0,"li",2),c.qZA(),c.qZA(),c.TgZ(27,"div",5),c.TgZ(28,"label",15),c._uU(29,"Password"),c.qZA(),c.TgZ(30,"div",16),c._UZ(31,"div",17),c._UZ(32,"input",18),c.qZA(),c.TgZ(33,"ul",10),c.YNc(34,Kt,2,0,"li",2),c.YNc(35,zn,2,0,"li",2),c.YNc(36,Ln,2,0,"li",2),c.qZA(),c.qZA(),c.TgZ(37,"div",5),c.TgZ(38,"label",19),c._uU(39,"Confirm Password"),c.qZA(),c.TgZ(40,"div",16),c._UZ(41,"div",17),c._UZ(42,"input",20),c.qZA(),c.TgZ(43,"ul",10),c.YNc(44,Qt,2,0,"li",2),c.qZA(),c.qZA(),c.TgZ(45,"div",21),c.TgZ(46,"div"),c.TgZ(47,"div",3),c.TgZ(48,"h2"),c._uU(49,"Roles"),c.qZA(),c.qZA(),c._UZ(50,"hr",4),c.TgZ(51,"div",22),c.YNc(52,gr,4,6,"div",23),c.qZA(),c.qZA(),c.TgZ(53,"div"),c.TgZ(54,"div",3),c.TgZ(55,"h2"),c._uU(56,"Domains"),c.qZA(),c.qZA(),c._UZ(57,"hr",4),c.TgZ(58,"div",22),c.YNc(59,Vr,4,3,"div",23),c.qZA(),c.qZA(),c.qZA(),c.TgZ(60,"div",24),c.TgZ(61,"button",25),c._uU(62,"Create user"),c.qZA(),c.TgZ(63,"ul",10),c.YNc(64,Kn,2,1,"li",2),c.YNc(65,St,2,1,"li",2),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(66,Ze,7,0,"div",26),c.qZA()),2&W&&(c.xp6(2),c.Q6J("formGroup",he.signupForm),c.xp6(1),c.Q6J("ngIf",he.isLoading),c.xp6(12),c.Q6J("ngIf",!he.signupForm.get("name").valid&&!he.signupForm.get("name").hasError("maxlength")&&!he.signupForm.get("name").hasError("minlength")&&he.signupForm.get("name").touched),c.xp6(1),c.Q6J("ngIf",he.signupForm.get("name").hasError("maxlength")&&he.signupForm.get("name").touched),c.xp6(1),c.Q6J("ngIf",he.signupForm.get("name").hasError("minlength")&&he.signupForm.get("name").touched),c.xp6(8),c.Q6J("ngIf",!he.signupForm.get("email").valid&&!he.signupForm.get("email").hasError("email")&&he.signupForm.get("email").touched),c.xp6(1),c.Q6J("ngIf",he.signupForm.get("email").hasError("email")&&he.signupForm.get("email").touched),c.xp6(8),c.Q6J("ngIf",!he.signupForm.get("password").valid&&!he.signupForm.get("password").hasError("maxlength")&&!he.signupForm.get("password").hasError("minlength")&&he.signupForm.get("password").touched),c.xp6(1),c.Q6J("ngIf",he.signupForm.get("password").hasError("maxlength")&&he.signupForm.get("password").touched),c.xp6(1),c.Q6J("ngIf",he.signupForm.get("password").hasError("minlength")&&he.signupForm.get("password").touched),c.xp6(6),c.Q6J("ngClass",c.VKq(18,je,!he.signupForm.get("confirmPass").valid&&he.signupForm.get("confirmPass").dirty)),c.xp6(2),c.Q6J("ngIf",!he.signupForm.get("confirmPass").valid&&he.signupForm.get("confirmPass").dirty),c.xp6(8),c.Q6J("ngForOf",he.roles),c.xp6(7),c.Q6J("ngForOf",he.domains),c.xp6(2),c.Q6J("disabled",!he.signupForm.valid),c.xp6(3),c.Q6J("ngIf",he.errorAuthMsg),c.xp6(1),c.Q6J("ngIf",he.errorOnSetUserData),c.xp6(1),c.Q6J("ngIf",he.finishedReg))},directives:[re._Y,re.JL,re.sg,R.O5,re.Fj,re.JJ,re.u,R.mk,R.sg,Ee.g],styles:['@import"https://fonts.googleapis.com/css?family=Rubik&display=swap";.sign-form[_ngcontent-%COMP%]{background-color:var(--color2);max-width:767px;padding:20px;margin:0 auto;position:relative}.sign-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.sign-form__sign-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ebc317;text-align:center;font-size:1.3em;padding:5px}.sign-form__sign-element[_ngcontent-%COMP%]{margin:20px 0}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{display:flex}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(user.73c0f083ad3711c1d950.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   .email-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;box-sizing:border-box;background-image:url(email.31cd4a3f10faa4acdb5c.png);padding:10px}.sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .password-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(password.63582da5386052e0358d.png)}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 50px);border:1px solid var(--color8);color:var(--color7);border-radius:0 3px 3px 0;box-sizing:border-box;padding:7px;outline:none;background-color:#ffffff80;filter:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{border:1px solid var(--color8);-webkit-text-fill-color:var(--color7);-webkit-box-shadow:none;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.sign-form__sign-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;color:var(--color7)}.sign-form[_ngcontent-%COMP%]   .hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:10px 0 20px}.sign-form[_ngcontent-%COMP%]{border:1px solid var(--color8);border-radius:5px}.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}@media not all and (pointer: coarse){.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]:hover{background-color:#fbf4d3}}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:49%}.sign-form[_ngcontent-%COMP%]{min-width:400px}']}),ie})();var xt=Q(9829);let nn=(()=>{class ie{constructor(W,he){this._router=W,this._firebaseAuth=he}canActivate(W,he){const{autenticationRequired:lt,autenticationFailureRedirectUrl:Vt}=W.data;return new Promise((Ir,$n)=>{this.userSubscription=this._firebaseAuth.authState.subscribe(hr=>lt&&hr||!lt&&!hr?(this.userSubscription.unsubscribe(),Ir(!0)):(this.userSubscription.unsubscribe(),this._router.navigate([Vt])))})}}return ie.\u0275fac=function(W){return new(W||ie)(c.LFG(E.F0),c.LFG(xt.zQ))},ie.\u0275prov=c.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})();function Ot(ie,qe){if(1&ie&&(c.TgZ(0,"p"),c._uU(1),c.qZA()),2&ie){const W=c.oxw().$implicit;c.xp6(1),c.hij(" ",W.name," ")}}const Ue=function(ie){return[ie]};function pt(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"li",5),c.NdJ("click",function(){const Vt=c.CHM(W).$implicit;return c.oxw().setActiveRoute(Vt.route)}),c.YNc(1,Ot,2,1,"p",6),c.qZA()}if(2&ie){const W=qe.$implicit;c.Q6J("routerLink",c.VKq(2,Ue,W.route)),c.xp6(1),c.Q6J("ngIf",W.checked)}}let bt=(()=>{class ie{constructor(W,he){this._authService=W,this._router=he,this.user=void 0}ngOnInit(){this.userSubscirption=this._authService.user.subscribe(W=>{if(this.user=W,null!=this.user){const he=JSON.parse(localStorage.getItem("operator/activeRoute"));he?new Promise((lt,Vt)=>{for(let wn=0;wn<this.user.roles.length;wn++){if(he==this.user.roles[wn].route&&this.user.roles[wn].checked)return void this._router.navigate(["/control-panel/settings/"+he]);wn==this.user.roles.length-1&&lt()}}).then(()=>{this.setRoute()}):this.setRoute()}})}ngOnDestroy(){this.userSubscirption.unsubscribe()}setRoute(){for(const W of this.user.roles)if(W.checked)return this._router.navigate(["/control-panel/settings/"+W.route]),void localStorage.setItem("operator/activeRoute",JSON.stringify(W.route))}setActiveRoute(W){localStorage.setItem("operator/activeRoute",JSON.stringify(W))}}return ie.\u0275fac=function(W){return new(W||ie)(c.Y36(G.e),c.Y36(E.F0))},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-settings"]],decls:7,vars:1,consts:[[1,"container"],[1,"settings"],[1,"settings__nav"],["routerLinkActive","settings-link-active",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"settings__options"],["routerLinkActive","settings-link-active",3,"routerLink","click"],[4,"ngIf"]],template:function(W,he){1&W&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"ul"),c.YNc(4,pt,2,4,"li",3),c.qZA(),c.qZA(),c.TgZ(5,"div",4),c._UZ(6,"router-outlet"),c.qZA(),c.qZA(),c.qZA()),2&W&&(c.xp6(4),c.Q6J("ngForOf",null==he.user?null:he.user.roles))},directives:[R.sg,E.lC,E.Od,E.rH,R.O5],styles:[".settings[_ngcontent-%COMP%]{display:flex;align-items:flex-start;height:calc(100vh - 48px)}.settings__nav[_ngcontent-%COMP%]{width:170px;height:100%;box-sizing:border-box;border-right:1px solid var(--color8);padding-right:10px;overflow:scroll;scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.settings__nav[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.settings__nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.settings__nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.settings__nav[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.settings__nav[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.settings__nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.settings__nav[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.settings__nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;cursor:pointer;padding:5px 0 5px 10px;border-top-right-radius:10px;border-bottom-right-radius:10px}.settings__nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem}.settings__nav[_ngcontent-%COMP%]   .settings-link-active[_ngcontent-%COMP%]{background-color:#ebc317;color:#fff}.settings__options[_ngcontent-%COMP%]{width:calc(100% - 170px);height:100%;padding:5px 10px 20px;box-sizing:border-box;overflow:scroll;scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.settings__options[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.settings__options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.settings__options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.settings__options[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.settings__options[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.settings__options[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.settings__options[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}"]}),ie})();const At=function(){return["active"]},Ut=function(){return["inactive"]};let dn=(()=>{class ie{constructor(){}ngOnInit(){}}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-users"]],decls:8,vars:4,consts:[[1,"container"],[1,"sub-nav"],["routerLinkActive","router-link-active",3,"routerLink"]],template:function(W,he){1&W&&(c.TgZ(0,"div",0),c.TgZ(1,"div"),c.TgZ(2,"ul",1),c.TgZ(3,"li",2),c._uU(4,"Active Accounts"),c.qZA(),c.TgZ(5,"li",2),c._uU(6,"Inactive Accounts"),c.qZA(),c.qZA(),c.qZA(),c._UZ(7,"router-outlet"),c.qZA()),2&W&&(c.xp6(3),c.Q6J("routerLink",c.DdM(2,At)),c.xp6(2),c.Q6J("routerLink",c.DdM(3,Ut)))},directives:[E.Od,E.rH,E.lC],styles:[""]}),ie})();const pn=function(){return["change-password"]},Zt=function(){return["change-theme"]};let Se=(()=>{class ie{constructor(){}ngOnInit(){}}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-account-settings"]],decls:9,vars:4,consts:[[1,"container"],[1,"sub-nav"],["routerLinkActive","router-link-active",3,"routerLink"]],template:function(W,he){1&W&&(c.TgZ(0,"div",0),c.TgZ(1,"div"),c.TgZ(2,"ul",1),c.TgZ(3,"li",2),c._uU(4," Change Password "),c.qZA(),c.TgZ(5,"li",2),c._uU(6," Change Theme "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div"),c._UZ(8,"router-outlet"),c.qZA(),c.qZA()),2&W&&(c.xp6(3),c.Q6J("routerLink",c.DdM(2,pn)),c.xp6(2),c.Q6J("routerLink",c.DdM(3,Zt)))},directives:[E.Od,E.rH,E.lC],styles:[""]}),ie})();function Ie(ie,qe){1&ie&&c._UZ(0,"app-loading-spinner")}function $e(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"button",7),c.NdJ("click",function(){return c.CHM(W),c.oxw().onShowDomainForm()}),c._uU(1," Add domain "),c.qZA()}}function Je(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1,"\u0410llowed characters: a-z"),c.qZA())}function Xe(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"form",8),c.NdJ("ngSubmit",function(){c.CHM(W);const lt=c.oxw();return lt.submitDomainForm(lt.addDomainForm)}),c.TgZ(1,"div",9),c._UZ(2,"input",10),c._UZ(3,"input",11),c.qZA(),c.TgZ(4,"ul",6),c.YNc(5,Je,2,0,"li",0),c.qZA(),c.TgZ(6,"div",12),c.TgZ(7,"button",13),c._uU(8,"Add"),c.qZA(),c.TgZ(9,"button",14),c.NdJ("click",function(){return c.CHM(W),c.oxw().onResetDomainForm()}),c._uU(10,"Cancel"),c.qZA(),c.qZA(),c.qZA()}if(2&ie){const W=c.oxw();c.Q6J("formGroup",W.addDomainForm),c.xp6(5),c.Q6J("ngIf",W.addDomainForm.get("domain").hasError("pattern")),c.xp6(2),c.Q6J("disabled",W.addDomainForm.invalid)}}function qt(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c.TgZ(6,"button",15),c.NdJ("click",function(){const Vt=c.CHM(W).$implicit;return c.oxw().deleteDomainPopUpFun(Vt)}),c._uU(7,"Delete"),c.qZA(),c.qZA(),c.qZA()}if(2&ie){const W=qe.$implicit;c.xp6(2),c.Oqu(W.domain),c.xp6(2),c.Oqu(W.description)}}function yn(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",16),c.TgZ(1,"div",17),c.TgZ(2,"p"),c._uU(3),c.qZA(),c.TgZ(4,"div",18),c.TgZ(5,"button",19),c.NdJ("click",function(){return c.CHM(W),c.oxw().deleteDomain()}),c._uU(6,"Yes"),c.qZA(),c.TgZ(7,"button",15),c.NdJ("click",function(){return c.CHM(W),c.oxw().cancelPopUpFun()}),c._uU(8,"No"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&ie){const W=c.oxw();c.xp6(3),c.hij("\u0410re you sure you want to delete domain ",W.currentDomain.description,"?")}}function sr(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnGetUsers)}}function Vn(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnGetDomains)}}function Un(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnAddDomain)}}function si(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnSetDomain)}}function Br(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnDeleteDomain)}}function Xr(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnDeleteDomainItem)}}let Dr=(()=>{class ie{constructor(W,he){this._fb=W,this._firestoreCollections=he,this.deleteDomainPopUp=!1,this.showDomainForm=!1,this.isLoading=!1,this.errorOnGetUsers="",this.errorOnGetDomains="",this.errorOnAddDomain="",this.errorOnSetDomain="",this.errorOnDeleteDomain="",this.errorOnDeleteDomainItem=""}ngOnInit(){this.addDomainForm=this._fb.group({domain:[null,[re.kI.required,re.kI.pattern("^[a-z]*$")]],description:[null,re.kI.required]}),this._usersSubscription=this._firestoreCollections.getUsers().subscribe(W=>{this.users=W.map(he=>Object.assign({id:he.payload.doc.id},he.payload.doc.data())),this.errorOnGetUsers=""},W=>{this.errorOnGetUsers=W.message}),this._domainsSubscription=this._firestoreCollections.getDomains().subscribe(W=>{this.domains=W.map(he=>Object.assign({id:he.payload.doc.id},he.payload.doc.data())),this.errorOnGetDomains=""},W=>{this.errorOnGetDomains=W.message})}ngOnDestroy(){this._domainsSubscription.unsubscribe(),this._usersSubscription.unsubscribe()}onShowDomainForm(){this.showDomainForm=!0}onResetDomainForm(){this.showDomainForm=!1,this.addDomainForm.reset()}submitDomainForm(W){if(W.invalid)return;this.isLoading=!0;const he=W.value.domain,lt=W.value.description,Ir={domain:he,description:lt,checked:!1};this._firestoreCollections.addDomain({domain:he,description:lt}).then(()=>{for(const $n of this.users)this._firestoreCollections.setDomain($n.uid,Ir).then(()=>{this.onResetDomainForm(),this.errorOnSetDomain="",this.isLoading=!1},hr=>{this.errorOnSetDomain=hr.message,this.isLoading=!1});W.reset(),this.errorOnAddDomain="",this.isLoading=!1},$n=>{this.errorOnAddDomain=$n.message,this.isLoading=!1})}deleteDomain(){this._firestoreCollections.deleteDomain(this.currentDomain.id).then(()=>{const W=this.currentDomain.description,he=this.currentDomain.domain;for(const lt of this.users)this.deleteDomainItem(lt.uid,{checked:!0,description:W,domain:he});for(const lt of this.users)this.deleteDomainItem(lt.uid,{checked:!1,description:W,domain:he});this.cancelPopUpFun(),this.errorOnDeleteDomain=""},W=>{this.errorOnDeleteDomain=W.message})}deleteDomainPopUpFun(W){this.deleteDomainPopUp=!0,this.currentDomain=W}cancelPopUpFun(){this.deleteDomainPopUp=!1,this.currentDomain=void 0}deleteDomainItem(W,he){this._firestoreCollections.deleteDomainItem(W,he).then(()=>{this.errorOnDeleteDomainItem=""},lt=>{this.errorOnDeleteDomainItem=lt.message})}}return ie.\u0275fac=function(W){return new(W||ie)(c.Y36(re.qu),c.Y36(ut.P))},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-allowed-domains"]],decls:22,vars:11,consts:[[4,"ngIf"],["style","margin-bottom: 10px;","type","button","class","btn-default narrow-btn",3,"click",4,"ngIf"],["class","domain-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["class","fixed-pop-up-container",4,"ngIf"],[1,"error"],["type","button",1,"btn-default","narrow-btn",2,"margin-bottom","10px",3,"click"],[1,"domain-form",3,"formGroup","ngSubmit"],[1,"domain-form__inputs"],["type","text","formControlName","domain","placeholder","Link parameter..."],["type","text","formControlName","description","placeholder","Description..."],[1,"domain-form__buttons"],["type","submit",1,"btn-default","narrow-btn",2,"margin-right","10px",3,"disabled"],["type","button",1,"btn-default","narrow-btn",3,"click"],[1,"btn-default","narrow-btn",3,"click"],[1,"fixed-pop-up-container"],[1,"pop-up-body"],[1,"pop-up-buttons"],[1,"btn-default","narrow-btn",2,"margin-right","10px",3,"click"]],template:function(W,he){1&W&&(c.TgZ(0,"div"),c.YNc(1,Ie,1,0,"app-loading-spinner",0),c.TgZ(2,"div"),c.YNc(3,$e,2,0,"button",1),c.YNc(4,Xe,11,3,"form",2),c.qZA(),c.TgZ(5,"div"),c.TgZ(6,"table",3),c.TgZ(7,"tr"),c.TgZ(8,"th"),c._uU(9,"Link parameter"),c.qZA(),c.TgZ(10,"th"),c._uU(11,"Description"),c.qZA(),c._UZ(12,"th"),c.qZA(),c.YNc(13,qt,8,2,"tr",4),c.qZA(),c.qZA(),c.YNc(14,yn,9,1,"div",5),c.TgZ(15,"ul",6),c.YNc(16,sr,2,1,"li",0),c.YNc(17,Vn,2,1,"li",0),c.YNc(18,Un,2,1,"li",0),c.YNc(19,si,2,1,"li",0),c.YNc(20,Br,2,1,"li",0),c.YNc(21,Xr,2,1,"li",0),c.qZA(),c.qZA()),2&W&&(c.xp6(1),c.Q6J("ngIf",he.isLoading),c.xp6(2),c.Q6J("ngIf",!he.showDomainForm),c.xp6(1),c.Q6J("ngIf",he.showDomainForm),c.xp6(9),c.Q6J("ngForOf",he.domains),c.xp6(1),c.Q6J("ngIf",he.deleteDomainPopUp),c.xp6(2),c.Q6J("ngIf",he.errorOnGetUsers),c.xp6(1),c.Q6J("ngIf",he.errorOnGetDomains),c.xp6(1),c.Q6J("ngIf",he.errorOnAddDomain),c.xp6(1),c.Q6J("ngIf",he.errorOnSetDomain),c.xp6(1),c.Q6J("ngIf",he.errorOnDeleteDomain),c.xp6(1),c.Q6J("ngIf",he.errorOnDeleteDomainItem))},directives:[R.O5,R.sg,Ee.g,re._Y,re.JL,re.sg,re.Fj,re.JJ,re.u],styles:[".domain-form[_ngcontent-%COMP%]{margin-bottom:10px}.domain-form__inputs[_ngcontent-%COMP%]{width:440px}.domain-form__inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:5px;border:1px solid var(--color8);outline:none;padding:5px;width:200px}.domain-form__inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.domain-form__buttons[_ngcontent-%COMP%]{margin-top:10px}.domain-form__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:65px!important}"]}),ie})(),Mi=(()=>{class ie{transform(W,he){return W?he?(he=he.toLowerCase(),W.filter(lt=>JSON.stringify(lt.name).toLocaleLowerCase().includes(he)||JSON.stringify(lt.email).toLocaleLowerCase().includes(he))):W:null}}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275pipe=c.Yjl({name:"searchPipe",type:ie,pure:!0}),ie})();function Uo(ie,qe){1&ie&&c._UZ(0,"app-loading-spinner")}function Qi(ie,qe){if(1&ie&&(c.TgZ(0,"div",20),c.TgZ(1,"label"),c._uU(2),c.qZA(),c._UZ(3,"input",21),c.qZA()),2&ie){const W=qe.$implicit;c.xp6(2),c.hij(" ",W.name," "),c.xp6(1),c.uIk("checked",W.checked?"checked":null)}}function fo(ie,qe){if(1&ie&&(c.TgZ(0,"div",22),c.TgZ(1,"label"),c._uU(2),c.qZA(),c._UZ(3,"input",23),c.qZA()),2&ie){const W=qe.$implicit;c.xp6(2),c.hij(" ",W.description," "),c.xp6(1),c.Q6J("checked",W.checked?"checked":null)}}function Wo(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"button",10),c.NdJ("click",function(){c.CHM(W);const lt=c.oxw().$implicit;return c.oxw(2).changeAccountActivity(lt.uid,!0)}),c._uU(1," Activate "),c.qZA()}}function Fr(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"button",10),c.NdJ("click",function(){c.CHM(W);const lt=c.oxw().$implicit;return c.oxw(2).changeAccountActivity(lt.uid,!1)}),c._uU(1," Deactivate "),c.qZA()}}function cr(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c.TgZ(2,"div",9),c.TgZ(3,"button",10),c.NdJ("click",function(){const Vt=c.CHM(W).$implicit;return c.oxw(2).editUser(Vt)}),c._uU(4,"Edit"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(5,"td"),c.TgZ(6,"div",11),c._uU(7),c.qZA(),c.qZA(),c.TgZ(8,"td"),c.TgZ(9,"div",12),c._uU(10),c.qZA(),c.qZA(),c.TgZ(11,"td"),c.TgZ(12,"div",13),c.YNc(13,Qi,4,2,"div",14),c.qZA(),c.qZA(),c.TgZ(14,"td"),c.TgZ(15,"div",15),c.YNc(16,fo,4,2,"div",16),c.qZA(),c.qZA(),c.TgZ(17,"td"),c.TgZ(18,"div",17),c.TgZ(19,"button",18),c.NdJ("click",function(){const Vt=c.CHM(W).$implicit;return c.oxw(2).resetPassword(Vt.email)}),c._uU(20," Reset pass "),c.qZA(),c.YNc(21,Wo,2,0,"button",19),c.YNc(22,Fr,2,0,"button",19),c.TgZ(23,"button",10),c.NdJ("click",function(){const Vt=c.CHM(W).$implicit;return c.oxw(2).getUserLogins(Vt.uid)}),c._uU(24," Logins "),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&ie){const W=qe.$implicit,he=c.oxw(2);c.xp6(7),c.hij(" ",W.email," "),c.xp6(3),c.hij(" ",W.name," "),c.xp6(3),c.Q6J("ngForOf",W.roles),c.xp6(3),c.Q6J("ngForOf",W.domains),c.xp6(3),c.Q6J("disabled",he.disabledResetPasswordButton&&he.currentResetEmail==W.email),c.xp6(2),c.Q6J("ngIf",!W.active),c.xp6(1),c.Q6J("ngIf",W.active)}}function bn(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"div",4),c._UZ(2,"div",5),c.TgZ(3,"input",6),c.NdJ("ngModelChange",function(lt){return c.CHM(W),c.oxw().searchParams=lt}),c.qZA(),c.qZA(),c.TgZ(4,"table",7),c.TgZ(5,"tr"),c._UZ(6,"th"),c.TgZ(7,"th"),c._uU(8,"Email Address"),c.qZA(),c.TgZ(9,"th"),c._uU(10,"Display Name"),c.qZA(),c.TgZ(11,"th"),c._uU(12,"Roles"),c.qZA(),c.TgZ(13,"th"),c._uU(14,"Domains"),c.qZA(),c._UZ(15,"th"),c.qZA(),c.YNc(16,cr,25,7,"tr",8),c.ALo(17,"searchPipe"),c.qZA(),c.qZA()}if(2&ie){const W=c.oxw();c.xp6(3),c.Q6J("ngModel",W.searchParams),c.xp6(13),c.Q6J("ngForOf",c.xi3(17,2,W.users,W.searchParams))}}function Ur(ie,qe){1&ie&&(c.TgZ(0,"p"),c._uU(1," \u0422here are currently no users added. "),c.qZA())}function uo(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",24),c.TgZ(1,"div",25),c.TgZ(2,"p"),c._uU(3," Reset password email was successfully sent to "),c.TgZ(4,"span",26),c._uU(5),c.qZA(),c._uU(6,"! "),c.qZA(),c.TgZ(7,"div",27),c.TgZ(8,"button",10),c.NdJ("click",function(){return c.CHM(W),c.oxw().closeResetPasswordPopUp()}),c._uU(9,"Close"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&ie){const W=c.oxw();c.xp6(5),c.Oqu(W.currentResetEmail)}}function Sr(ie,qe){if(1&ie&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.ALo(3,"date"),c.ALo(4,"date"),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.qZA()),2&ie){const W=qe.$implicit;c.xp6(2),c.AsE("",c.xi3(3,5,W.date.toDate(),"dd.MM.yyyy")," at ",c.xi3(4,8,W.date.toDate(),"HH:mm"),""),c.xp6(4),c.Oqu(W.ip),c.xp6(2),c.Oqu(W.country),c.xp6(2),c.Oqu(W.city)}}function Xt(ie,qe){if(1&ie&&(c.TgZ(0,"table",7),c.TgZ(1,"tr"),c.TgZ(2,"th"),c._uU(3,"Time"),c.qZA(),c.TgZ(4,"th"),c._uU(5,"IP"),c.qZA(),c.TgZ(6,"th"),c._uU(7,"Country"),c.qZA(),c.TgZ(8,"th"),c._uU(9,"City"),c.qZA(),c.qZA(),c.YNc(10,Sr,11,11,"tr",8),c.qZA()),2&ie){const W=c.oxw(2);c.xp6(10),c.Q6J("ngForOf",null==W.loginHistory[0]?null:W.loginHistory[0].loginHistory)}}function ln(ie,qe){1&ie&&(c.TgZ(0,"p"),c._uU(1," \u0422he current user still has no logins. "),c.qZA())}function xn(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",24),c.TgZ(1,"div",28),c.TgZ(2,"div",29),c.TgZ(3,"button",30),c.NdJ("click",function(){return c.CHM(W),c.oxw().closeLogins()}),c._uU(4,"Close"),c.qZA(),c.qZA(),c.YNc(5,Xt,11,1,"table",31),c.YNc(6,ln,2,0,"p",1),c.qZA(),c.qZA()}if(2&ie){const W=c.oxw();c.xp6(5),c.Q6J("ngIf",(null==W.loginHistory[0]?null:W.loginHistory[0].loginHistory.length)>0),c.xp6(1),c.Q6J("ngIf",0==(null==W.loginHistory[0]?null:W.loginHistory[0].loginHistory.length))}}function Kr(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," Please enter your name! "),c.qZA())}function wi(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," The name could not be longer then 10 characters! "),c.qZA())}function Ar(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," The name should be at least 3 characters! "),c.qZA())}function ti(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",44),c.TgZ(1,"label"),c._uU(2),c.qZA(),c.TgZ(3,"input",45),c.NdJ("change",function(lt){const wn=c.CHM(W).index;return c.oxw(2).onRoleChange(lt,wn)}),c.qZA(),c.qZA()}if(2&ie){const W=qe.$implicit;c.xp6(2),c.hij(" ",W.name," "),c.xp6(1),c.Q6J("checked",W.checked?"checked":null)}}function Er(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",44),c.TgZ(1,"label"),c._uU(2),c.qZA(),c.TgZ(3,"input",45),c.NdJ("change",function(lt){const wn=c.CHM(W).index;return c.oxw(2).onDomainChange(lt,wn)}),c.qZA(),c.qZA()}if(2&ie){const W=qe.$implicit;c.xp6(2),c.hij(" ",W.description," "),c.xp6(1),c.Q6J("checked",W.checked?"checked":null)}}function To(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",24),c.TgZ(1,"div",25),c.TgZ(2,"form",32),c.NdJ("ngSubmit",function(){return c.CHM(W),c.oxw().submitEditUserForm()}),c.TgZ(3,"div",33),c.TgZ(4,"h2"),c._uU(5,"Change User"),c.qZA(),c.qZA(),c.TgZ(6,"div",34),c.TgZ(7,"label",35),c._uU(8,"Display Name (visible to the client)"),c.qZA(),c.TgZ(9,"div",36),c._UZ(10,"div",37),c._UZ(11,"input",38),c.qZA(),c.TgZ(12,"ul",3),c.YNc(13,Kr,2,0,"li",1),c.YNc(14,wi,2,0,"li",1),c.YNc(15,Ar,2,0,"li",1),c.qZA(),c.qZA(),c.TgZ(16,"div",39),c.TgZ(17,"div"),c.TgZ(18,"div",33),c.TgZ(19,"h2"),c._uU(20,"Roles"),c.qZA(),c.qZA(),c._UZ(21,"hr",40),c.TgZ(22,"div",41),c.YNc(23,ti,4,2,"div",42),c.qZA(),c.qZA(),c.TgZ(24,"div"),c.TgZ(25,"div",33),c.TgZ(26,"h2"),c._uU(27,"Domains"),c.qZA(),c.qZA(),c._UZ(28,"hr",40),c.TgZ(29,"div",41),c.YNc(30,Er,4,2,"div",42),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"div"),c.TgZ(32,"button",43),c._uU(33,"Apply"),c.qZA(),c.TgZ(34,"button",10),c.NdJ("click",function(){return c.CHM(W),c.oxw().resetEditUserForm()}),c._uU(35,"Cancel"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&ie){const W=c.oxw();c.xp6(2),c.Q6J("formGroup",W.editUserForm),c.xp6(11),c.Q6J("ngIf",!W.editUserForm.get("name").valid&&!W.editUserForm.get("name").hasError("maxlength")&&!W.editUserForm.get("name").hasError("minlength")&&W.editUserForm.get("name").touched),c.xp6(1),c.Q6J("ngIf",W.editUserForm.get("name").hasError("maxlength")&&W.editUserForm.get("name").touched),c.xp6(1),c.Q6J("ngIf",W.editUserForm.get("name").hasError("minlength")&&W.editUserForm.get("name").touched),c.xp6(8),c.Q6J("ngForOf",W.currentUser.roles),c.xp6(7),c.Q6J("ngForOf",W.currentUser.domains)}}function lo(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnSetUserData)}}function Pn(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnGetUserLogins)}}function Qe(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnUpdateUserActivity)}}function He(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorMsgOnResetPassword)}}let Ae=(()=>{class ie{constructor(W,he,lt){this._firestoreCollections=W,this._firebaseAuth=he,this._fb=lt,this.users=[],this.resetPasswordPopUp=!1,this.disabledResetPasswordButton=!1,this.loginHistory=[],this.isLoading=!1,this.errorOnSetUserData="",this.errorOnGetUserLogins="",this.errorOnUpdateUserActivity="",this.errorMsgOnResetPassword=""}editUser(W){this.currentUser=W,this.editUserForm=this._fb.group({name:[W.name,[re.kI.required,re.kI.minLength(3),re.kI.maxLength(10)]],roles:this._fb.array([]),domains:this._fb.array([])});const he=this.editUserForm.get("roles"),lt=this.editUserForm.get("domains");for(const Vt of W.roles)he.push(new re.NI({checked:Vt.checked,name:Vt.name,route:Vt.route,value:Vt.value}));for(const Vt of W.domains)lt.push(new re.NI({checked:Vt.checked,description:Vt.description,domain:Vt.domain}))}submitEditUserForm(){this.editUserForm.invalid||this._firestoreCollections.setUserData({name:this.editUserForm.value.name,email:this.currentUser.email,active:this.currentUser.active,roles:this.editUserForm.value.roles,domains:this.editUserForm.value.domains,uid:this.currentUser.uid},!1).then(()=>{this.editUserForm.reset(),this.currentUser=void 0,this.errorOnSetUserData=""},hr=>{this.errorOnSetUserData=hr.message})}resetEditUserForm(){this.currentUser=void 0,this.editUserForm.reset()}onRoleChange(W,he){this.editUserForm.value.roles[he].checked=!!W.target.checked}onDomainChange(W,he){this.editUserForm.value.domains[he].checked=!!W.target.checked}getUserLogins(W){this._loginHistorySubscription=this._firestoreCollections.getUserLogins(W).subscribe(he=>{this.loginHistory=he.map(lt=>Object.assign({id:lt.payload.doc.id},lt.payload.doc.data())),this.errorOnGetUserLogins=""},he=>{this.errorOnGetUserLogins=he.message})}closeLogins(){this.loginHistory=[],this._loginHistorySubscription.unsubscribe()}changeAccountActivity(W,he){this._firestoreCollections.updateUserActivity({userId:W,parameter:he}).then(()=>{this.errorOnUpdateUserActivity=""},Ir=>{this.errorOnUpdateUserActivity=Ir.message})}closeResetPasswordPopUp(){this.resetPasswordPopUp=!1,this.disabledResetPasswordButton=!1,this.currentResetEmail=""}resetPassword(W){this.isLoading=!0,this.disabledResetPasswordButton=!0,this.currentResetEmail=W,this._firebaseAuth.sendPasswordResetEmail(this.currentResetEmail).then(()=>{this.resetPasswordPopUp=!0,this.errorMsgOnResetPassword="",this.isLoading=!1},he=>{this.errorMsgOnResetPassword=he.message,this.disabledResetPasswordButton=!1,this.isLoading=!1})}}return ie.\u0275fac=function(W){return new(W||ie)(c.Y36(ut.P),c.Y36(xt.zQ),c.Y36(re.qu))},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-users-template"]],inputs:{users:"users"},decls:12,vars:10,consts:[[1,"users-container"],[4,"ngIf"],["class","fixed-pop-up-container",4,"ngIf"],[1,"error"],[1,"search-field"],[1,"search-field__icon"],["type","text","placeholder","Search by email or display name...",1,"search-field__input",3,"ngModel","ngModelChange"],[1,"table"],[4,"ngFor","ngForOf"],[1,"table__edit"],["type","button",1,"btn-default","narrow-btn",3,"click"],[1,"table__email"],[1,"table__name"],[1,"table__option","table__roles"],["class","table__roles__role",4,"ngFor","ngForOf"],[1,"table__option","table__domains"],["class","table__domains__domain",4,"ngFor","ngForOf"],[1,"table__buttons"],["type","button",1,"btn-default","narrow-btn",3,"disabled","click"],["class","btn-default narrow-btn","type","button",3,"click",4,"ngIf"],[1,"table__roles__role"],["disabled","","type","checkbox"],[1,"table__domains__domain"],["type","checkbox","disabled","",3,"checked"],[1,"fixed-pop-up-container"],[1,"pop-up-body"],[2,"font-weight","bold"],[1,"pop-up-buttons"],[1,"pop-up-body","login-history"],[1,"login-history__close-btn"],[1,"btn-default","narrow-btn",3,"click"],["class","table",4,"ngIf"],[1,"sign-form","edit-user-form",3,"formGroup","ngSubmit"],[1,"sign-form__sign-up-header"],[1,"sign-form__sign-element"],["for","name"],[1,"name"],[1,"name-img"],["type","text","name","name","formControlName","name"],[1,"sign-form__sign-element","options"],[1,"hr-border"],[1,"sign-form__sign-element__option-containter"],["class","sign-form__sign-element__option-containter__option",4,"ngFor","ngForOf"],["type","submit",1,"btn-default","narrow-btn",2,"margin-right","10px"],[1,"sign-form__sign-element__option-containter__option"],["type","checkbox",3,"checked","change"]],template:function(W,he){1&W&&(c.TgZ(0,"div",0),c.YNc(1,Uo,1,0,"app-loading-spinner",1),c.YNc(2,bn,18,5,"div",1),c.YNc(3,Ur,2,0,"p",1),c.YNc(4,uo,10,1,"div",2),c.YNc(5,xn,7,2,"div",2),c.YNc(6,To,36,6,"div",2),c.TgZ(7,"ul",3),c.YNc(8,lo,2,1,"li",1),c.YNc(9,Pn,2,1,"li",1),c.YNc(10,Qe,2,1,"li",1),c.YNc(11,He,2,1,"li",1),c.qZA(),c.qZA()),2&W&&(c.xp6(1),c.Q6J("ngIf",he.isLoading),c.xp6(1),c.Q6J("ngIf",(null==he.users?null:he.users.length)>0),c.xp6(1),c.Q6J("ngIf",0==(null==he.users?null:he.users.length)),c.xp6(1),c.Q6J("ngIf",he.resetPasswordPopUp),c.xp6(1),c.Q6J("ngIf",null==he.loginHistory[0]?null:he.loginHistory[0].loginHistory),c.xp6(1),c.Q6J("ngIf",he.currentUser),c.xp6(2),c.Q6J("ngIf",he.errorOnSetUserData),c.xp6(1),c.Q6J("ngIf",he.errorOnGetUserLogins),c.xp6(1),c.Q6J("ngIf",he.errorOnUpdateUserActivity),c.xp6(1),c.Q6J("ngIf",he.errorMsgOnResetPassword))},directives:[R.O5,Ee.g,re.Fj,re.JJ,re.On,R.sg,re._Y,re.JL,re.sg,re.u],pipes:[Mi,R.uU],styles:[".sign-form[_ngcontent-%COMP%]{background-color:var(--color2);max-width:767px;padding:20px;margin:0 auto;position:relative}.sign-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.sign-form__sign-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ebc317;text-align:center;font-size:1.3em;padding:5px}.sign-form__sign-element[_ngcontent-%COMP%]{margin:20px 0}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{display:flex}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(user.73c0f083ad3711c1d950.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   .email-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;box-sizing:border-box;background-image:url(email.31cd4a3f10faa4acdb5c.png);padding:10px}.sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .password-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(password.63582da5386052e0358d.png)}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 50px);border:1px solid var(--color8);color:var(--color7);border-radius:0 3px 3px 0;box-sizing:border-box;padding:7px;outline:none;background-color:#ffffff80;filter:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{border:1px solid var(--color8);-webkit-text-fill-color:var(--color7);-webkit-box-shadow:none;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.sign-form__sign-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;color:var(--color7)}.sign-form[_ngcontent-%COMP%]   .hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:10px 0 20px}.sign-form[_ngcontent-%COMP%]{border:1px solid var(--color8);border-radius:5px}.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}@media not all and (pointer: coarse){.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]:hover{background-color:#fbf4d3}}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:49%}.users-container[_ngcontent-%COMP%]{position:relative}.search-field[_ngcontent-%COMP%]{margin:20px 0;width:400px;display:flex}.search-field__icon[_ngcontent-%COMP%]{width:31px;height:31px;background-color:#ebc317;background-image:url(search-icon.1f18176a687ce3124477.png);background-size:70% 70%;background-position:center;background-repeat:no-repeat;border-top-left-radius:5px;border-bottom-left-radius:5px}.search-field__input[_ngcontent-%COMP%]{border:1px solid var(--color8);outline:none;padding:5px;font-size:1.1rem;border-top-right-radius:5px;border-bottom-right-radius:5px;width:calc(100% - 31px)}.login-history[_ngcontent-%COMP%]{width:50%;height:500px;overflow:scroll;scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.login-history[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.login-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.login-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.login-history[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.login-history[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.login-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.login-history[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.login-history__close-btn[_ngcontent-%COMP%]{text-align:right}.edit-user-form[_ngcontent-%COMP%]{width:500px;border:none;text-align:left}.table__option[_ngcontent-%COMP%]{display:flex;align-items:center}.table__option[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:last-child){margin-right:15px}.table__edit[_ngcontent-%COMP%]{width:43px;text-align:center}.table__email[_ngcontent-%COMP%]{width:220px}.table__name[_ngcontent-%COMP%]{width:115px}.table__roles[_ngcontent-%COMP%]{width:470px;flex-wrap:wrap}.table__roles[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:140px;display:flex;justify-content:space-between;align-items:center}@media not all and (pointer: coarse){.table__roles__role[_ngcontent-%COMP%]:hover{background-color:#fbf4d3}}.table__domains[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.table__domains__domain[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:5px}@media not all and (pointer: coarse){.table__domains__domain[_ngcontent-%COMP%]:hover{background-color:#fbf4d3}}.table__buttons[_ngcontent-%COMP%]{width:265px;text-align:center}.table__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:5px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:20px}"]}),ie})(),st=(()=>{class ie{constructor(W){this._firestoreCollections=W}ngOnInit(){this._activeUsersSubscription=this._firestoreCollections.getUserData("active",!0).subscribe(W=>{this.activeUsers=W.map(he=>Object.assign({id:he.payload.doc.id},he.payload.doc.data()))},W=>{})}ngOnDestroy(){this._activeUsersSubscription.unsubscribe()}}return ie.\u0275fac=function(W){return new(W||ie)(c.Y36(ut.P))},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-active-acounts"]],decls:1,vars:1,consts:[[3,"users"]],template:function(W,he){1&W&&c._UZ(0,"app-users-template",0),2&W&&c.Q6J("users",he.activeUsers)},directives:[Ae],styles:[""]}),ie})(),Mt=(()=>{class ie{constructor(W){this._firestoreCollections=W}ngOnInit(){this._inactiveUsersSubscription=this._firestoreCollections.getUserData("active",!1).subscribe(W=>{this.inactiveUsers=W.map(he=>Object.assign({id:he.payload.doc.id},he.payload.doc.data()))},W=>{})}ngOnDestroy(){this._inactiveUsersSubscription.unsubscribe()}}return ie.\u0275fac=function(W){return new(W||ie)(c.Y36(ut.P))},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-inactive-acounts"]],decls:1,vars:1,consts:[[3,"users"]],template:function(W,he){1&W&&c._UZ(0,"app-users-template",0),2&W&&c.Q6J("users",he.inactiveUsers)},directives:[Ae],styles:[""]}),ie})(),cn=(()=>{class ie{constructor(W,he){this._router=W,this._authService=he}canActivate(W,he){const{role:lt,autenticationFailureRedirectUrl:Vt}=W.data;return new Promise((wn,Ir)=>{this.userSubscription=this._authService.user.subscribe($n=>{if(null!=$n){for(let hr of $n.roles)if(lt==hr.value&&hr.checked)return void 0!==this.userSubscription&&this.userSubscription.unsubscribe(),wn(!0);return this.userSubscription.unsubscribe(),this._router.navigate([Vt])}null==$n&&this.userSubscription&&this.userSubscription.unsubscribe()})})}}return ie.\u0275fac=function(W){return new(W||ie)(c.LFG(E.F0),c.LFG(G.e))},ie.\u0275prov=c.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})();function Hn(ie,qe){1&ie&&c._UZ(0,"app-loading-spinner")}function mn(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," Please enter a passowrd! "),c.qZA())}function un(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," The password could not be longer then 20 symbols! "),c.qZA())}function er(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," The password should be at least 8 symbols! "),c.qZA())}function Li(ie,qe){1&ie&&(c.TgZ(0,"li"),c._uU(1," The passwords do not match! "),c.qZA())}function mr(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",12),c.TgZ(1,"div",13),c.TgZ(2,"p"),c._uU(3,"Your password has been successfully changed!"),c.qZA(),c.TgZ(4,"div",14),c.TgZ(5,"button",15),c.NdJ("click",function(){return c.CHM(W),c.oxw().closePasswordChangePopUp()}),c._uU(6,"Close"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}}function Ii(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",12),c.TgZ(1,"div",13),c.TgZ(2,"p"),c._uU(3),c.qZA(),c.TgZ(4,"div",14),c.TgZ(5,"button",16),c.NdJ("click",function(){return c.CHM(W),c.oxw().logout()}),c._uU(6,"Logout"),c.qZA(),c.TgZ(7,"button",17),c.NdJ("click",function(){return c.CHM(W),c.oxw().stayLogged()}),c._uU(8,"Change later"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&ie){const W=c.oxw();c.xp6(3),c.Oqu(W.errorOnChangePassword)}}const io=function(ie){return{invalid:ie}};let jr=(()=>{class ie{constructor(W,he,lt){this._fb=W,this._firebaseAuth=he,this._authService=lt,this.changePasswordPopUp=!1,this.changePasswordLogoutPopUp=!1,this.errorOnChangePassword="",this.isLoading=!1}ngOnInit(){this.changePasswordFrom=this._fb.group({password:[null,[re.kI.required,re.kI.minLength(8),re.kI.maxLength(20)]],confirmPass:[null,[re.kI.required]]},{validator:this.confirmPasswordMatcher("password","confirmPass")})}confirmPasswordMatcher(W,he){return lt=>{const wn=lt.controls[he];wn.setErrors(lt.controls[W].value!==wn.value?{mustMatch:!0}:null)}}changePassword(W){if(W.invalid)return;this.isLoading=!0;const he=W.value.password;this._firebaseAuth.currentUser.then(lt=>{null==lt||lt.updatePassword(he).then(()=>{this.changePasswordPopUp=!0,W.reset(),this.errorOnChangePassword="",this.isLoading=!1},Vt=>{this.changePasswordLogoutPopUp=!0,this.errorOnChangePassword=Vt.message,this.isLoading=!1})})}closePasswordChangePopUp(){this.changePasswordPopUp=!1}logout(){this._authService.logout()}stayLogged(){this.changePasswordLogoutPopUp=!1,this.errorOnChangePassword="",this.changePasswordFrom.reset()}}return ie.\u0275fac=function(W){return new(W||ie)(c.Y36(re.qu),c.Y36(xt.zQ),c.Y36(G.e))},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-change-password"]],decls:26,vars:12,consts:[[4,"ngIf"],[1,"sign-form","change-password-form",3,"formGroup","ngSubmit"],[1,"sign-form__sign-element"],["for","password"],[1,"password"],[1,"password-img"],["type","password","name","password","formControlName","password"],[1,"error"],["for","confirmPass"],["type","password","name","confirmPass","formControlName","confirmPass",3,"ngClass"],["type","submit",1,"btn-default","narrow-btn",3,"disabled"],["class","fixed-pop-up-container",4,"ngIf"],[1,"fixed-pop-up-container"],[1,"pop-up-body"],[1,"pop-up-buttons"],["type","button",1,"btn-default","narrow-btn",3,"click"],[1,"btn-default","narrow-btn",2,"margin-right","10px",3,"click"],[1,"btn-default","narrow-btn",3,"click"]],template:function(W,he){1&W&&(c.TgZ(0,"div"),c.YNc(1,Hn,1,0,"app-loading-spinner",0),c.TgZ(2,"form",1),c.NdJ("ngSubmit",function(){return he.changePassword(he.changePasswordFrom)}),c.TgZ(3,"div",2),c.TgZ(4,"label",3),c._uU(5,"Password"),c.qZA(),c.TgZ(6,"div",4),c._UZ(7,"div",5),c._UZ(8,"input",6),c.qZA(),c.TgZ(9,"ul",7),c.YNc(10,mn,2,0,"li",0),c.YNc(11,un,2,0,"li",0),c.YNc(12,er,2,0,"li",0),c.qZA(),c.qZA(),c.TgZ(13,"div",2),c.TgZ(14,"label",8),c._uU(15,"Confirm Password"),c.qZA(),c.TgZ(16,"div",4),c._UZ(17,"div",5),c._UZ(18,"input",9),c.qZA(),c.TgZ(19,"ul",7),c.YNc(20,Li,2,0,"li",0),c.qZA(),c.qZA(),c.TgZ(21,"div"),c.TgZ(22,"button",10),c._uU(23,"Change Password"),c.qZA(),c.qZA(),c.qZA(),c.YNc(24,mr,7,0,"div",11),c.YNc(25,Ii,9,1,"div",11),c.qZA()),2&W&&(c.xp6(1),c.Q6J("ngIf",he.isLoading),c.xp6(1),c.Q6J("formGroup",he.changePasswordFrom),c.xp6(8),c.Q6J("ngIf",!he.changePasswordFrom.get("password").valid&&!he.changePasswordFrom.get("password").hasError("maxlength")&&!he.changePasswordFrom.get("password").hasError("minlength")&&he.changePasswordFrom.get("password").touched),c.xp6(1),c.Q6J("ngIf",he.changePasswordFrom.get("password").hasError("maxlength")&&he.changePasswordFrom.get("password").touched),c.xp6(1),c.Q6J("ngIf",he.changePasswordFrom.get("password").hasError("minlength")&&he.changePasswordFrom.get("password").touched),c.xp6(6),c.Q6J("ngClass",c.VKq(10,io,!he.changePasswordFrom.get("confirmPass").valid&&he.changePasswordFrom.get("confirmPass").dirty)),c.xp6(2),c.Q6J("ngIf",!he.changePasswordFrom.get("confirmPass").valid&&he.changePasswordFrom.get("confirmPass").dirty),c.xp6(2),c.Q6J("disabled",he.changePasswordFrom.invalid),c.xp6(2),c.Q6J("ngIf",he.changePasswordPopUp),c.xp6(1),c.Q6J("ngIf",he.changePasswordLogoutPopUp))},directives:[R.O5,re._Y,re.JL,re.sg,re.Fj,re.JJ,re.u,R.mk,Ee.g],styles:[".sign-form[_ngcontent-%COMP%]{background-color:var(--color2);max-width:767px;padding:20px;margin:0 auto;position:relative}.sign-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.sign-form__sign-up-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ebc317;text-align:center;font-size:1.3em;padding:5px}.sign-form__sign-element[_ngcontent-%COMP%]{margin:20px 0}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{display:flex}.sign-form__sign-element[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .name-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(user.73c0f083ad3711c1d950.png)}.sign-form__sign-element[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   .email-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;box-sizing:border-box;background-image:url(email.31cd4a3f10faa4acdb5c.png);padding:10px}.sign-form__sign-element[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .password-img[_ngcontent-%COMP%]{background-color:#ebc317;background-size:contain;background-position:center;background-origin:content-box;background-repeat:no-repeat;width:50px;border-radius:3px 0 0 3px;padding:7px;box-sizing:border-box;background-image:url(password.63582da5386052e0358d.png)}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 50px);border:1px solid var(--color8);color:var(--color7);border-radius:0 3px 3px 0;box-sizing:border-box;padding:7px;outline:none;background-color:#ffffff80;filter:none}.sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, .sign-form__sign-element[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{border:1px solid var(--color8);-webkit-text-fill-color:var(--color7);-webkit-box-shadow:none;-webkit-transition:background-color 5000s ease-in-out 0s;transition:background-color 5000s ease-in-out 0s}.sign-form__sign-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;color:var(--color7)}.sign-form[_ngcontent-%COMP%]   .hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:10px 0 20px}.sign-form[_ngcontent-%COMP%]{border:1px solid var(--color8);border-radius:5px}.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}@media not all and (pointer: coarse){.sign-form__sign-element__option-containter__option[_ngcontent-%COMP%]:hover{background-color:#fbf4d3}}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.sign-form[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:49%}.change-password-form[_ngcontent-%COMP%]{width:400px;border:none;margin:0;padding:0}"]}),ie})(),Oi=(()=>{class ie{constructor(){}ngOnInit(){}}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-change-theme"]],decls:2,vars:0,template:function(W,he){1&W&&(c.TgZ(0,"p"),c._uU(1,"This option will be available soon."),c.qZA())},styles:[""]}),ie})();const ar=function(){return["allowed-domains"]},Bn=function(){return["chat-menu-options"]};let zr=(()=>{class ie{constructor(){}ngOnInit(){}}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-domain-options"]],decls:8,vars:4,consts:[[1,"sub-nav"],["routerLinkActive","router-link-active",3,"routerLink"]],template:function(W,he){1&W&&(c.TgZ(0,"div"),c.TgZ(1,"div"),c.TgZ(2,"ul",0),c.TgZ(3,"li",1),c._uU(4,"Allowed Domains"),c.qZA(),c.TgZ(5,"li",1),c._uU(6,"Chat Menu Options"),c.qZA(),c.qZA(),c.qZA(),c._UZ(7,"router-outlet"),c.qZA()),2&W&&(c.xp6(3),c.Q6J("routerLink",c.DdM(2,ar)),c.xp6(2),c.Q6J("routerLink",c.DdM(3,Bn)))},directives:[E.Od,E.rH,E.lC],styles:[""]}),ie})();function Mr(ie,qe){1&ie&&c._UZ(0,"app-loading-spinner")}function Ui(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"button",8),c.NdJ("click",function(){return c.CHM(W),c.oxw().activateMenuOptionForm()}),c._uU(1," Add menu option "),c.qZA()}}function ni(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"form",9),c.NdJ("ngSubmit",function(){c.CHM(W);const lt=c.oxw();return lt.isInEditMenuEditOptionMode?lt.submitmenuEditOptionsForm():lt.submitMenuOptionsForm(lt.menuOptionsForm)}),c.TgZ(1,"div",10),c.TgZ(2,"label",11),c._uU(3,"Active"),c.qZA(),c._UZ(4,"input",12),c.qZA(),c.TgZ(5,"div",13),c.TgZ(6,"label",14),c._uU(7,"Key"),c.qZA(),c._UZ(8,"input",15),c.qZA(),c.TgZ(9,"div",13),c.TgZ(10,"label",16),c._uU(11,"Description"),c.qZA(),c._UZ(12,"input",17),c.qZA(),c.TgZ(13,"div",18),c.TgZ(14,"button",19),c._uU(15),c.qZA(),c.TgZ(16,"button",20),c.NdJ("click",function(){return c.CHM(W),c.oxw().clearMenuOptionForm()}),c._uU(17," Cancel "),c.qZA(),c.qZA(),c.qZA()}if(2&ie){const W=c.oxw();c.Q6J("formGroup",W.menuOptionsForm),c.xp6(14),c.Q6J("disabled",W.menuOptionsForm.invalid),c.xp6(1),c.hij(" ",W.isInEditMenuEditOptionMode?"Change":"Add"," ")}}function Vi(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c.TgZ(2,"label",21),c._uU(3,"Active"),c.qZA(),c._UZ(4,"input",22),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c.TgZ(10,"button",23),c.NdJ("click",function(){const Vt=c.CHM(W).$implicit;return c.oxw().editOption(Vt)}),c._uU(11,"Edit"),c.qZA(),c.TgZ(12,"button",24),c.NdJ("click",function(){const Vt=c.CHM(W).$implicit;return c.oxw().deleteMenuOptionPopUp(Vt)}),c._uU(13,"Delete"),c.qZA(),c.qZA(),c.qZA()}if(2&ie){const W=qe.$implicit;c.xp6(4),c.Q6J("checked",W.active?"checked":null),c.xp6(2),c.Oqu(W.description),c.xp6(2),c.Oqu(W.key)}}function Gi(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div",25),c.TgZ(1,"div",26),c.TgZ(2,"p"),c._uU(3),c.qZA(),c.TgZ(4,"div",27),c.TgZ(5,"button",28),c.NdJ("click",function(){return c.CHM(W),c.oxw().deleteMenuOption()}),c._uU(6,"OK"),c.qZA(),c.TgZ(7,"button",28),c.NdJ("click",function(){return c.CHM(W),c.oxw().clearMenuOptionForm()}),c._uU(8,"Cancel"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&ie){const W=c.oxw();c.xp6(3),c.hij("Menu ",W.currentOption.description," will be deleted!")}}function ai(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.erroOnGetMenuOptions)}}function Yo(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnAddMenuOption)}}function Nr(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnDeleteMenuOption)}}function rs(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnAddMenuOptionItem)}}function Bi(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.erroOnEditMenuOption)}}const Oo=function(ie){return{"fixed-pop-up-container":ie}},Do=function(ie){return{"pop-up-body":ie}};let Ko=(()=>{class ie{constructor(W,he){this._fb=W,this._firestoreCollectionService=he,this.ismenuOptionsFormActive=!1,this.isInEditMenuEditOptionMode=!1,this.isLoading=!1,this.isDeleteMenuOptionPopUpActive=!1,this.erroOnGetMenuOptions="",this.errorOnAddMenuOption="",this.errorOnDeleteMenuOption="",this.errorOnAddMenuOptionItem="",this.erroOnEditMenuOption=""}ngOnInit(){this.menuOptionsForm=this._fb.group({key:[null,[re.kI.required]],description:[null,re.kI.required],active:[!0]}),this._menuOptionsSubscription=this._firestoreCollectionService.getMenuOptions().subscribe(W=>{this.menuOptions=W.map(he=>Object.assign({id:he.payload.doc.id},he.payload.doc.data())),this.erroOnGetMenuOptions=""},W=>{this.erroOnGetMenuOptions=W.message})}ngOnDestroy(){this._menuOptionsSubscription.unsubscribe()}activateMenuOptionForm(){this.ismenuOptionsFormActive=!0}clearMenuOptionForm(){this.ismenuOptionsFormActive=!1,this.currentOption=void 0,this.isDeleteMenuOptionPopUpActive=!1,this.isInEditMenuEditOptionMode=!1,this.menuEditedImage=void 0,this.menuOptionsForm.reset()}submitMenuOptionsForm(W){if(!W.invalid)return this.isLoading=!0,this._firestoreCollectionService.addMenuOptionItem({key:W.value.key,description:W.value.description,active:W.value.active}).then(()=>{this.clearMenuOptionForm(),this.ismenuOptionsFormActive=!1,this.errorOnAddMenuOption="",this.isLoading=!1},Ir=>{this.errorOnAddMenuOption=Ir.message,this.isLoading=!1})}deleteMenuOptionPopUp(W){this.currentOption=W,this.isDeleteMenuOptionPopUpActive=!0}deleteMenuOption(){this._firestoreCollectionService.deleteMenuOptionItem(this.currentOption).then(()=>{this.clearMenuOptionForm(),this.errorOnDeleteMenuOption=""},W=>{this.errorOnDeleteMenuOption=W.message})}editOption(W){this.ismenuOptionsFormActive=!0,this.isInEditMenuEditOptionMode=!0,this.currentOption=W,this.menuOptionsForm.controls.key.setValue(W.key),this.menuOptionsForm.controls.description.setValue(W.description),this.menuOptionsForm.controls.active.setValue(W.active)}submitmenuEditOptionsForm(){this._firestoreCollectionService.editMenuOptionItem({key:this.menuOptionsForm.value.key,description:this.menuOptionsForm.value.description,active:this.menuOptionsForm.value.active,id:this.currentOption.id}).then(()=>{this.clearMenuOptionForm(),this.errorOnAddMenuOptionItem=""},Ir=>{this.errorOnAddMenuOptionItem=Ir.message})}}return ie.\u0275fac=function(W){return new(W||ie)(c.Y36(re.qu),c.Y36(ut.P))},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-chat-menu-options"]],decls:25,vars:16,consts:[[4,"ngIf"],["style","margin-bottom: 10px;","class","btn-default narrow-btn","type","button",3,"click",4,"ngIf"],[3,"ngClass"],["class","menu-option-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["class","fixed-pop-up-container",4,"ngIf"],[1,"error"],["type","button",1,"btn-default","narrow-btn",2,"margin-bottom","10px",3,"click"],[1,"menu-option-form",3,"formGroup","ngSubmit"],[1,"menu-option-form__item","active"],["for","active"],["type","checkbox","name","active","formControlName","active"],[1,"menu-option-form__item","input-option"],["for","key"],["type","text","name","key","formControlName","key"],["for","description"],["type","text","name","description","formControlName","description"],[1,"menu-option-form__buttons"],["type","submit",1,"btn-default","narrow-btn",3,"disabled"],["type","button",1,"btn-default","narrow-btn",3,"click"],[2,"margin-right","5px"],["type","checkbox","disabled","",3,"checked"],["type","button",1,"btn-default","narrow-btn",2,"margin-right","10px","min-width","65px",3,"click"],["type","button",1,"btn-default","narrow-btn",2,"min-width","65px",3,"click"],[1,"fixed-pop-up-container"],[1,"pop-up-body"],[1,"pop-up-buttons"],["type","button",1,"btn-default","narrow-btn",2,"margin-right","10px",3,"click"]],template:function(W,he){1&W&&(c.TgZ(0,"div"),c.YNc(1,Mr,1,0,"app-loading-spinner",0),c.YNc(2,Ui,2,0,"button",1),c.TgZ(3,"div"),c.TgZ(4,"div",2),c.TgZ(5,"div",2),c.YNc(6,ni,18,3,"form",3),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div"),c.TgZ(8,"table",4),c.TgZ(9,"tr"),c.TgZ(10,"th"),c._uU(11,"Activity"),c.qZA(),c.TgZ(12,"th"),c._uU(13,"Description"),c.qZA(),c.TgZ(14,"th"),c._uU(15,"Key"),c.qZA(),c._UZ(16,"th"),c.qZA(),c.YNc(17,Vi,14,3,"tr",5),c.qZA(),c.qZA(),c.YNc(18,Gi,9,1,"div",6),c.TgZ(19,"ul",7),c.YNc(20,ai,2,1,"li",0),c.YNc(21,Yo,2,1,"li",0),c.YNc(22,Nr,2,1,"li",0),c.YNc(23,rs,2,1,"li",0),c.YNc(24,Bi,2,1,"li",0),c.qZA(),c.qZA()),2&W&&(c.xp6(1),c.Q6J("ngIf",he.isLoading),c.xp6(1),c.Q6J("ngIf",!he.ismenuOptionsFormActive),c.xp6(2),c.Q6J("ngClass",c.VKq(12,Oo,he.isInEditMenuEditOptionMode)),c.xp6(1),c.Q6J("ngClass",c.VKq(14,Do,he.isInEditMenuEditOptionMode)),c.xp6(1),c.Q6J("ngIf",he.ismenuOptionsFormActive),c.xp6(11),c.Q6J("ngForOf",he.menuOptions),c.xp6(1),c.Q6J("ngIf",he.isDeleteMenuOptionPopUpActive),c.xp6(2),c.Q6J("ngIf",he.erroOnGetMenuOptions),c.xp6(1),c.Q6J("ngIf",he.errorOnAddMenuOption),c.xp6(1),c.Q6J("ngIf",he.errorOnDeleteMenuOption),c.xp6(1),c.Q6J("ngIf",he.errorOnAddMenuOptionItem),c.xp6(1),c.Q6J("ngIf",he.erroOnEditMenuOption))},directives:[R.O5,R.mk,R.sg,Ee.g,re._Y,re.JL,re.sg,re.Wl,re.JJ,re.u,re.Fj],styles:[".menu-option-form[_ngcontent-%COMP%]{width:400px}.menu-option-form__item[_ngcontent-%COMP%]{margin-top:10px}.menu-option-form__buttons[_ngcontent-%COMP%]{margin-top:10px}.menu-option-form__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:65px!important}.menu-option-form__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.menu-option-form[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.menu-option-form[_ngcontent-%COMP%]   .input-option[_ngcontent-%COMP%]{display:flex;flex-direction:column}.menu-option-form[_ngcontent-%COMP%]   .input-option[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid var(--color8);border-radius:3px;padding:5px;outline:none}.menu-option-form[_ngcontent-%COMP%]   .img-upload[_ngcontent-%COMP%]{text-align:center}.pop-up-body[_ngcontent-%COMP%]{text-align:left}"]}),ie})();function vs(ie,qe){1&ie&&c._UZ(0,"app-loading-spinner")}function Vo(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){return c.CHM(W),c.oxw().enableAddBlockMode()}),c._uU(1," Block User "),c.qZA()}}function xo(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"form",6),c.NdJ("ngSubmit",function(){c.CHM(W);const lt=c.oxw();return lt.submitAddUserForBlockForm(lt.addUserForBlockForm)}),c.TgZ(2,"div",7),c._UZ(3,"input",8),c._UZ(4,"input",9),c._UZ(5,"input",10),c.qZA(),c.TgZ(6,"div"),c.TgZ(7,"button",11),c._uU(8,"Submit"),c.qZA(),c.TgZ(9,"button",5),c.NdJ("click",function(){return c.CHM(W),c.oxw().resetAddUserForBlockForm()}),c._uU(10,"Cancel"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&ie){const W=c.oxw();c.xp6(1),c.Q6J("formGroup",W.addUserForBlockForm),c.xp6(6),c.Q6J("disabled",W.addUserForBlockForm.invalid)}}function mi(ie,qe){if(1&ie){const W=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c.TgZ(2,"button",5),c.NdJ("click",function(){const Vt=c.CHM(W).$implicit;return c.oxw(2).unblockUser(Vt.id)}),c._uU(3,"Unblock"),c.qZA(),c.qZA(),c.TgZ(4,"td"),c._uU(5),c.qZA(),c.TgZ(6,"td"),c._uU(7),c.qZA(),c.TgZ(8,"td"),c._uU(9),c.qZA(),c.TgZ(10,"td"),c._uU(11),c.qZA(),c.TgZ(12,"td"),c._uU(13),c.ALo(14,"date"),c.ALo(15,"date"),c.qZA(),c.qZA()}if(2&ie){const W=qe.$implicit;c.xp6(5),c.Oqu(W.username),c.xp6(2),c.Oqu(W.ip),c.xp6(2),c.Oqu(W.reason),c.xp6(2),c.Oqu(W.operator),c.xp6(2),c.AsE("",c.xi3(14,6,W.date.toDate(),"dd.MM.yyyy")," at ",c.xi3(15,9,W.date.toDate(),"HH:mm"),"")}}function Ai(ie,qe){if(1&ie&&(c.TgZ(0,"table",12),c.TgZ(1,"tr"),c._UZ(2,"th"),c.TgZ(3,"th"),c._uU(4,"Username"),c.qZA(),c.TgZ(5,"th"),c._uU(6,"IP"),c.qZA(),c.TgZ(7,"th"),c._uU(8,"Reason"),c.qZA(),c.TgZ(9,"th"),c._uU(10,"Blocked by"),c.qZA(),c.TgZ(11,"th"),c._uU(12,"Time of block"),c.qZA(),c.qZA(),c.YNc(13,mi,16,12,"tr",13),c.qZA()),2&ie){const W=c.oxw();c.xp6(13),c.Q6J("ngForOf",W.blockedUsers)}}function Qn(ie,qe){1&ie&&(c.TgZ(0,"p"),c._uU(1,"\u0422here are currently no blocked users."),c.qZA())}function po(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnGetBlockedUsers)}}function Ji(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnDeleteBlockedUsers)}}function go(ie,qe){if(1&ie&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&ie){const W=c.oxw();c.xp6(1),c.Oqu(W.errorOnBlockUser)}}let ui=(()=>{class ie{constructor(W,he,lt){this._fireStoreCollections=W,this._fb=he,this._authService=lt,this.blockedUsers=[],this.isInBlockMode=!1,this.errorOnGetBlockedUsers="",this.errorOnDeleteBlockedUsers="",this.errorOnBlockUser="",this.isLoading=!1}ngOnInit(){this._blockedUsersSubscription=this._fireStoreCollections.getBlockedUsersById().subscribe(W=>{this.blockedUsers=W.map(he=>Object.assign({id:he.payload.doc.id},he.payload.doc.data())),this.errorOnGetBlockedUsers=""},W=>{this.errorOnGetBlockedUsers=W.message}),this._userSubscription=this._authService.user.subscribe(W=>{this.user=W}),this.addUserForBlockForm=this._fb.group({username:[null,re.kI.required],ip:[null,re.kI.required],reason:[null,re.kI.required],operator:[]})}ngOnDestroy(){this._blockedUsersSubscription.unsubscribe(),this._userSubscription.unsubscribe()}unblockUser(W){this._fireStoreCollections.deleteBlockedUser(W).then(()=>{this.errorOnDeleteBlockedUsers=""},he=>{this.errorOnDeleteBlockedUsers=he.message})}enableAddBlockMode(){this.isInBlockMode=!0}resetAddUserForBlockForm(){this.isInBlockMode=!1,this.addUserForBlockForm.reset()}submitAddUserForBlockForm(W){if(W.invalid)return;this.isLoading=!0;const he=W.value.username,lt=W.value.ip,Vt=W.value.reason,wn=this.user.email,Ir=Nt.Z.firestore.Timestamp.now();this._fireStoreCollections.blockUserByIp({username:he,ip:lt,reason:Vt,operator:wn,date:Ir}).then(()=>{this.resetAddUserForBlockForm(),this.isLoading=!1,this.errorOnBlockUser=""},hr=>{this.errorOnBlockUser=hr.message,this.isLoading=!1})}}return ie.\u0275fac=function(W){return new(W||ie)(c.Y36(ut.P),c.Y36(re.qu),c.Y36(G.e))},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-blocked-users"]],decls:12,vars:8,consts:[[4,"ngIf"],[1,"block-form-container"],["class","btn-default narrow-btn","type","button",3,"click",4,"ngIf"],["class","table",4,"ngIf"],[1,"error"],["type","button",1,"btn-default","narrow-btn",3,"click"],[1,"block-user-form",3,"formGroup","ngSubmit"],[1,"block-user-form__inputs"],["type","text","formControlName","username","placeholder","Username..."],["type","text","formControlName","ip","placeholder","IP..."],["type","text","formControlName","reason","placeholder","Reason..."],["type","submit",1,"btn-default","narrow-btn",2,"margin-right","10px",3,"disabled"],[1,"table"],[4,"ngFor","ngForOf"]],template:function(W,he){1&W&&(c.TgZ(0,"div"),c.YNc(1,vs,1,0,"app-loading-spinner",0),c.TgZ(2,"div",1),c.TgZ(3,"div"),c.YNc(4,Vo,2,0,"button",2),c.qZA(),c.YNc(5,xo,11,2,"div",0),c.qZA(),c.YNc(6,Ai,14,1,"table",3),c.YNc(7,Qn,2,0,"p",0),c.TgZ(8,"ul",4),c.YNc(9,po,2,1,"li",0),c.YNc(10,Ji,2,1,"li",0),c.YNc(11,go,2,1,"li",0),c.qZA(),c.qZA()),2&W&&(c.xp6(1),c.Q6J("ngIf",he.isLoading),c.xp6(3),c.Q6J("ngIf",!he.isInBlockMode),c.xp6(1),c.Q6J("ngIf",he.isInBlockMode),c.xp6(1),c.Q6J("ngIf",he.blockedUsers.length>0),c.xp6(1),c.Q6J("ngIf",0==he.blockedUsers.length),c.xp6(2),c.Q6J("ngIf",he.errorOnGetBlockedUsers),c.xp6(1),c.Q6J("ngIf",he.errorOnDeleteBlockedUsers),c.xp6(1),c.Q6J("ngIf",he.errorOnBlockUser))},directives:[R.O5,Ee.g,re._Y,re.JL,re.sg,re.Fj,re.JJ,re.u,R.sg],pipes:[R.uU],styles:[".block-form-container[_ngcontent-%COMP%]{margin-bottom:20px}.block-user-form__inputs[_ngcontent-%COMP%]{margin-bottom:10px;width:670px}.block-user-form__inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:5px;border:1px solid var(--color8);outline:none;padding:5px;width:200px}.block-user-form__inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.table[_ngcontent-%COMP%]{width:770px}"]}),ie})(),Xi=(()=>{class ie{constructor(){}ngOnInit(){}}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275cmp=c.Xpm({type:ie,selectors:[["app-reports"]],decls:2,vars:0,template:function(W,he){1&W&&(c.TgZ(0,"p"),c._uU(1,"This option will be available soon."),c.qZA())},styles:[""]}),ie})(),ri=(()=>{class ie{}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275mod=c.oAB({type:ie}),ie.\u0275inj=c.cJS({imports:[[R.ez,re.UX,lr.m,re.u5,E.Bz.forChild([{path:"",component:Ce,children:[{path:"login",component:_n,canActivate:[nn],data:{autenticationRequired:!1,autenticationFailureRedirectUrl:"/control-panel/chats"}},{path:"chats",component:Tn,canActivate:[nn],data:{autenticationRequired:!0,autenticationFailureRedirectUrl:"/control-panel/login"}},{path:"settings",component:bt,children:[{path:"users",component:dn,children:[{path:"active",component:st},{path:"inactive",component:Mt},{path:"",redirectTo:"active",pathMatch:"full"}],canActivate:[cn],data:{role:"users",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"register",component:It,canActivate:[cn],data:{role:"register",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"account-settings",component:Se,children:[{path:"change-password",component:jr},{path:"change-theme",component:Oi},{path:"",redirectTo:"change-password",pathMatch:"full"}],canActivate:[cn],data:{role:"accountSettings",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"domain-options",component:zr,children:[{path:"allowed-domains",component:Dr},{path:"chat-menu-options",component:Ko},{path:"",redirectTo:"allowed-domains",pathMatch:"full"}],canActivate:[cn],data:{role:"domainOptions",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"blocked-users",component:ui,canActivate:[cn],data:{role:"blockedUsers",autenticationFailureRedirectUrl:"/control-panel/settings"}},{path:"reports",component:Xi,canActivate:[cn],data:{role:"reports",autenticationFailureRedirectUrl:"/control-panel/settings"}}],canActivate:[nn],data:{autenticationRequired:!0,autenticationFailureRedirectUrl:"/control-panel/login"}},{path:"**",redirectTo:"chats"}]}])]]}),ie})()},7236:(jt,rt,Q)=>{"use strict";Q.r(rt),Q.d(rt,{ErrorModule:()=>Ve});var R=Q(8583),c=Q(7716);let G=(()=>{class ve{constructor(){}ngOnInit(){}}return ve.\u0275fac=function(fe){return new(fe||ve)},ve.\u0275cmp=c.Xpm({type:ve,selectors:[["app-error"]],decls:2,vars:0,template:function(fe,Ce){1&fe&&(c.TgZ(0,"p"),c._uU(1,"error works!"),c.qZA())},styles:[""]}),ve})();var E=Q(2213);let Ve=(()=>{class ve{}return ve.\u0275fac=function(fe){return new(fe||ve)},ve.\u0275mod=c.oAB({type:ve}),ve.\u0275inj=c.cJS({imports:[[R.ez,E.Bz.forChild([{path:"",component:G}])]]}),ve})()},1437:(jt,rt,Q)=>{"use strict";Q.d(rt,{a:()=>De});var R=Q(665),c=Q(2329),G=Q(7716),E=Q(3210),Ve=Q(8583);const ve=["textarea"],ke=["chatHistoryContainer"];function fe(xe,We){if(1&xe&&(G.TgZ(0,"p"),G._uU(1),G.qZA()),2&xe){const X=G.oxw().$implicit;G.xp6(1),G.Oqu(X.client)}}function Ce(xe,We){if(1&xe&&(G.TgZ(0,"p"),G._uU(1),G.qZA()),2&xe){const X=G.oxw().$implicit;G.xp6(1),G.Oqu(X.operator)}}const re=function(xe,We){return{"client-container":xe,"operator-container":We}},Ee=function(xe,We){return{client:xe,operator:We}};function pe(xe,We){if(1&xe&&(G.TgZ(0,"div"),G.TgZ(1,"div",9),G.TgZ(2,"div",10),G.TgZ(3,"div",11),G.YNc(4,fe,2,1,"p",8),G.YNc(5,Ce,2,1,"p",8),G.TgZ(6,"p"),G._uU(7),G.ALo(8,"date"),G.qZA(),G.qZA(),G.TgZ(9,"p"),G._uU(10),G.qZA(),G.qZA(),G.qZA(),G.qZA()),2&xe){const X=We.$implicit;G.xp6(1),G.Q6J("ngClass",G.WLB(9,re,X.client||""==X.client,X.operator)),G.xp6(1),G.Q6J("ngClass",G.WLB(12,Ee,X.client||""==X.client,X.operator)),G.xp6(2),G.Q6J("ngIf",X.client),G.xp6(1),G.Q6J("ngIf",X.operator),G.xp6(2),G.Oqu(G.xi3(8,6,X.time.toDate(),"HH:mm")),G.xp6(3),G.Oqu(X.message)}}function ye(xe,We){if(1&xe&&(G.TgZ(0,"li"),G._uU(1),G.qZA()),2&xe){const X=G.oxw();G.xp6(1),G.Oqu(X.errorOnAddMessage)}}let De=(()=>{class xe{constructor(X,Re){this._firestoreCollections=X,this._fb=Re,this.chatHistory=[],this.vh=.01*window.innerHeight,this.errorOnAddMessage=""}ngOnInit(){this.chatForm=this._fb.group({message:[null,[R.kI.required]]}),document.documentElement.style.setProperty("--vh",`${this.vh}px`)}ngAfterViewInit(){this.chatHistoryContainer.nativeElement.scrollTop=this.chatHistoryContainer.nativeElement.scrollHeight,this.textarea.nativeElement.focus()}ngOnChanges(X){X.chatHistory&&null!=this.chatHistoryContainer&&(this.chatHistoryContainer.nativeElement.scrollTop=this.chatHistoryContainer.nativeElement.scrollHeight,console.log(this.chatHistoryContainer.nativeElement.scrollHeight),console.log(this.chatHistoryContainer.nativeElement.scrollHeight+200)),console.log(X)}submitChatForm(X){if(X.invalid)return;let Re;const _t=this.userInfo.chatId,_n=this.userInfo.domain;Re=null!=this.userInfo.client?{chatId:_t,domain:_n,client:this.userInfo.client}:{chatId:_t,domain:_n,operator:this.userInfo.operator};const Nt=X.value.message.trim(),ut=c.Z.firestore.Timestamp.now();this._firestoreCollections.addMessage(Re,{message:Nt,time:ut}).then(()=>{this.textarea.nativeElement.focus(),this.chatForm.reset(),this.errorOnAddMessage=""},wt=>{this.errorOnAddMessage=wt.message})}submitOnEnter(X,Re){var _t;13===X.keyCode&&""!=(null===(_t=Re.value.message)||void 0===_t?void 0:_t.trim())&&this.submitChatForm(Re)}onResize(X){this.vh=.01*window.innerHeight,document.documentElement.style.setProperty("--vh",`${this.vh}px`)}}return xe.\u0275fac=function(X){return new(X||xe)(G.Y36(E.P),G.Y36(R.qu))},xe.\u0275cmp=G.Xpm({type:xe,selectors:[["app-chat-form"]],viewQuery:function(X,Re){if(1&X&&(G.Gf(ve,5),G.Gf(ke,5)),2&X){let _t;G.iGM(_t=G.CRH())&&(Re.textarea=_t.first),G.iGM(_t=G.CRH())&&(Re.chatHistoryContainer=_t.first)}},hostBindings:function(X,Re){1&X&&G.NdJ("resize",function(_n){return Re.onResize(_n)},!1,G.Jf7)},inputs:{userInfo:"userInfo",chatHistory:"chatHistory"},features:[G.TTD],decls:11,vars:3,consts:[[1,"chat-history"],["chatHistoryContainer",""],[4,"ngFor","ngForOf"],[1,"chat-form",3,"formGroup","ngSubmit","keydown"],["formControlName","message",1,"chat-form__message"],["textarea",""],["type","submit",1,"chat-form__submit-btn"],[1,"error"],[4,"ngIf"],[1,"chat-history__buble-container",3,"ngClass"],[1,"chat-history__buble-container__buble",3,"ngClass"],[1,"chat-history__buble-container__buble__header"]],template:function(X,Re){1&X&&(G.TgZ(0,"div"),G.TgZ(1,"div",0,1),G.YNc(3,pe,11,15,"div",2),G.qZA(),G.TgZ(4,"div"),G.TgZ(5,"form",3),G.NdJ("ngSubmit",function(){return Re.submitChatForm(Re.chatForm)})("keydown",function(_n){return Re.submitOnEnter(_n,Re.chatForm)}),G._UZ(6,"textarea",4,5),G._UZ(8,"button",6),G.qZA(),G.TgZ(9,"ul",7),G.YNc(10,ye,2,1,"li",8),G.qZA(),G.qZA(),G.qZA()),2&X&&(G.xp6(3),G.Q6J("ngForOf",Re.chatHistory),G.xp6(2),G.Q6J("formGroup",Re.chatForm),G.xp6(5),G.Q6J("ngIf",Re.errorOnAddMessage))},directives:[Ve.sg,R._Y,R.JL,R.sg,R.Fj,R.JJ,R.u,Ve.O5,Ve.mk],pipes:[Ve.uU],styles:[".chat-history[_ngcontent-%COMP%]{height:calc(100vh - 250px);height:calc(var(--vh, 1vh) * 100 - 180px);border:1px solid var(--color8);margin-bottom:10px;padding:3px 3px 0;overflow:scroll;scrollbar-color:var(--color14) transparent;scrollbar-width:thin}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.chat-history__buble-container[_ngcontent-%COMP%]{display:flex}.chat-history__buble-container__buble[_ngcontent-%COMP%]{border-radius:10px;border:1px solid var(--color8);padding:5px;min-width:40%;max-width:70%;margin-bottom:5px}.chat-history__buble-container__buble__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;font-weight:bold}.chat-form[_ngcontent-%COMP%]{display:flex;align-items:center}.chat-form__message[_ngcontent-%COMP%]{outline-color:#ebc317;background-color:var(--color12);border:1px solid var(--color9);border-radius:3px;padding:10px;resize:none;width:100%;height:70px;box-sizing:border-box;color:var(--color7);scrollbar-color:var(--color14) transparent;scrollbar-width:thin;margin-right:10px}.chat-form__message[_ngcontent-%COMP%]::placeholder{color:#b53636}.chat-form__message[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#b53636}.chat-form__message[_ngcontent-%COMP%]:-moz-placeholder{color:#b53636}.chat-form__message[_ngcontent-%COMP%]::-moz-placeholder{color:#b53636}.chat-form__message[_ngcontent-%COMP%]:-ms-input-placeholder{color:#b53636}.chat-form__message[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.chat-form__message[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer: coarse){.chat-form__message[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.chat-form__message[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.chat-form__message[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.chat-form__message[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.chat-form__message[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:transparent}.chat-form__submit-btn[_ngcontent-%COMP%]{cursor:pointer;border:1px solid #999;outline:none;-webkit-user-select:none;user-select:none;padding:10px;border-radius:50%;width:35px;height:35px;background-color:#ebc317;background-image:url(arrow.29eac2d1e142a30ed882.png);background-size:80%;background-repeat:no-repeat;background-position:center}"]}),xe})()},2152:(jt,rt,Q)=>{"use strict";Q.d(rt,{g:()=>c});var R=Q(7716);let c=(()=>{class G{constructor(){}}return G.\u0275fac=function(Ve){return new(Ve||G)},G.\u0275cmp=R.Xpm({type:G,selectors:[["app-loading-spinner"]],decls:14,vars:0,consts:[[1,"loading-spinner"],[1,"loader"]],template:function(Ve,ve){1&Ve&&(R.TgZ(0,"div",0),R.TgZ(1,"div",1),R._UZ(2,"div"),R._UZ(3,"div"),R._UZ(4,"div"),R._UZ(5,"div"),R._UZ(6,"div"),R._UZ(7,"div"),R._UZ(8,"div"),R._UZ(9,"div"),R._UZ(10,"div"),R._UZ(11,"div"),R._UZ(12,"div"),R._UZ(13,"div"),R.qZA(),R.qZA())},styles:['.loading-spinner[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;left:0px;top:0px;width:100%;height:100%;z-index:499;background-color:var(--color13)}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{display:flex;width:64px;height:64px}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:32px 32px;animation:spin 1.2s linear infinite;-webkit-transform-origin:32px 32px;-webkit-animation:spin 1.2s linear infinite}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:52px;left:30px;width:7px;height:22px;border-radius:20%;background-color:#ebc317}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);-webkit-transform:rotate(0deg);animation-delay:-1.1s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);-webkit-transform:rotate(30deg);animation-delay:-1s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);-webkit-transform:rotate(60deg);animation-delay:-.9s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);-webkit-transform:rotate(90deg);animation-delay:-.8s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);-webkit-transform:rotate(120deg);animation-delay:-.7s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);-webkit-transform:rotate(150deg);animation-delay:-.6s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);-webkit-transform:rotate(180deg);animation-delay:-.5s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);-webkit-transform:rotate(210deg);animation-delay:-.4s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);-webkit-transform:rotate(240deg);animation-delay:-.3s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);-webkit-transform:rotate(270deg);animation-delay:-.2s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);-webkit-transform:rotate(300deg);animation-delay:-.1s}.loading-spinner[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);-webkit-transform:rotate(330deg);animation-delay:0s}@keyframes spin{0%{opacity:1}to{opacity:0}}']}),G})()},9447:(jt,rt,Q)=>{"use strict";Q.d(rt,{e:()=>pe});var R=Q(6215),c=Q(2329),G=Q(2340);class Ve{constructor(De,xe,We,X,Re){this.ip=De,this.country=xe,this.city=We,this.uid=X,this.date=Re}}var ke=Q(7716),fe=Q(2213),Ce=Q(9829),re=Q(3210),Ee=Q(1841);let pe=(()=>{class ye{constructor(xe,We,X,Re){this._router=xe,this._firebaseAuth=We,this._firestoreCollections=X,this._http=Re,this.user=new R.X(void 0),this.userLocation=new Ve("","","","",null),this.setIP=!1,this.errorAuthMsg="",this.errorAuthMsgSubject=new R.X(this.errorAuthMsg),this.errorOnGetuserData="",this.errorOnGetuserDataSubject=new R.X(this.errorOnGetuserData),this.errorOnSetUserData="",this.errorOnSetUserDataSubject=new R.X(this.errorOnSetUserData),this.isLoading=!1,this.isLoadingSubject=new R.X(this.isLoading),this.finishedReg=!1,this.finishedRegSubject=new R.X(this.finishedReg),this.secondaryApp=c.Z.initializeApp(G.N.firebaseConfig,"Secondary")}signUp(xe){this.enableLoadingSpinner(),this.finishedReg=!1,this.finishedRegSubject.next(this.finishedReg),this.secondaryApp.auth().createUserWithEmailAndPassword(xe.email,xe.password).then(We=>{xe.uid=We.user.uid,this._firestoreCollections.setUserData(xe,!0).then(()=>{this.secondaryApp.auth().signOut(),this.errorOnSetUserData="",this.errorOnSetUserDataSubject.next(this.errorOnSetUserData)},X=>{this.errorOnSetUserData=X.message,this.errorOnSetUserDataSubject.next(this.errorOnSetUserData)}),this.errorAuthMsg="",this.errorAuthMsgSubject.next(this.errorAuthMsg),this.finishedReg=!0,this.finishedRegSubject.next(this.finishedReg),this.disableLoadingSpinner()},We=>{this.errorAuthHandler(We),this.disableLoadingSpinner()})}signIn(xe,We){this.enableLoadingSpinner(),this._firebaseAuth.signInWithEmailAndPassword(xe,We).then(()=>{this.setIP=!0,this.subscribeForDbCollectionUser(xe),this.errorAuthMsg="",this.errorAuthMsgSubject.next(this.errorAuthMsg),this.disableLoadingSpinner()},X=>{this.errorAuthHandler(X),this.disableLoadingSpinner()})}logout(){this._firebaseAuth.signOut().then(()=>{this.userDbSubscription.unsubscribe(),this.user.next(null),this._router.navigate(["/control-panel/login"])})}autoLogin(){this._firebaseAuth.authState.subscribe(xe=>{xe&&!this.userDbSubscription?this.subscribeForDbCollectionUser(xe.email):this.user.next(null)})}subscribeForDbCollectionUser(xe){this.userDbSubscription=this._firestoreCollections.getUserData("email",xe).subscribe(We=>{var X;const Re=We.map(_t=>Object.assign({},_t.payload.doc.data()));this.user.next(Re[0]),this.userLocation.uid=null===(X=Re[0])||void 0===X?void 0:X.uid,Re[0].active||this.logout(),this.setIP&&(this.setIP=!1,this.setUserIP(),this._router.navigate(["/control-panel/chats"])),this.errorOnGetuserData="",this.errorOnGetuserDataSubject.next(this.errorOnGetuserData)},We=>{this.errorOnGetuserData=We.message,this.errorOnGetuserDataSubject.next(this.errorOnGetuserData)})}setUserIP(){this._userLocationSubscription=this._http.get("https://api.geoapify.com/v1/ipinfo?apiKey="+G.N.geoLocationAPIKey).subscribe(xe=>{this.userLocation.country=xe.country.name,this.userLocation.city=xe.city.name,this.userLocation.ip=xe.ip,this.userLocation.date=c.Z.firestore.Timestamp.now(),this._firestoreCollections.setUserIPAddress(this.userLocation).then(()=>{this._userLocationSubscription.unsubscribe()},We=>{this._userLocationSubscription.unsubscribe()})})}errorAuthHandler(xe){switch(xe.code){case"auth/email-already-in-use":this.errorAuthMsg="Already has a registration with this email!",this.errorAuthMsgSubject.next(this.errorAuthMsg);break;case"auth/user-not-found":this.errorAuthMsg="Wrong email!",this.errorAuthMsgSubject.next(this.errorAuthMsg);break;case"auth/wrong-password":this.errorAuthMsg="Wrong password!",this.errorAuthMsgSubject.next(this.errorAuthMsg);break;default:this.errorAuthMsg="Unknown Error",this.errorAuthMsgSubject.next(this.errorAuthMsg)}}enableLoadingSpinner(){this.isLoading=!0,this.isLoadingSubject.next(this.isLoading)}disableLoadingSpinner(){this.isLoading=!1,this.isLoadingSubject.next(this.isLoading)}}return ye.\u0275fac=function(xe){return new(xe||ye)(ke.LFG(fe.F0),ke.LFG(Ce.zQ),ke.LFG(re.P),ke.LFG(Ee.eN))},ye.\u0275prov=ke.Yz7({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye})()},3210:(jt,rt,Q)=>{"use strict";Q.d(rt,{P:()=>Sy});var R=Q(2329),c=Q(7716),G=Q(3637),E=Q(7574),Ve=Q(4402),ve=Q(5917),ke=Q(9761),fe=Q(9328),Ce=Q(8002),re=Q(2145),Ee=Q(7519),pe=Q(5435),ye=Q(309),De=Q(57),xe=Q(8583),We=Q(9759),X=Q(4762),Re=Q(4685),_t=Q(300),_n=function(o,t){return(_n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(s[g]=l[g])})(o,t)};function ut(o){var t="function"==typeof Symbol&&Symbol.iterator,s=t&&o[t],l=0;if(s)return s.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&l>=o.length&&(o=void 0),{value:o&&o[l++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var wt,Yt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},In=In||{},Et=Yt||self;function Ke(){}function ot(o){var t=typeof o;return"array"==(t="object"!=t?t:o?Array.isArray(o)?"array":t:"null")||"object"==t&&"number"==typeof o.length}function it(o){var t=typeof o;return"object"==t&&null!=o||"function"==t}var vt="closure_uid_"+(1e9*Math.random()>>>0),at=0;function tn(o,t,s){return o.call.apply(o.bind,arguments)}function sn(o,t,s){if(!o)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,l),o.apply(t,g)}}return function(){return o.apply(t,arguments)}}function Sn(o,t,s){return(Sn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tn:sn).apply(null,arguments)}function an(o,t){var s=Array.prototype.slice.call(arguments,1);return function(){var l=s.slice();return l.push.apply(l,arguments),o.apply(this,l)}}function Bt(o,t){function s(){}s.prototype=t.prototype,o.Z=t.prototype,o.prototype=new s,o.prototype.constructor=o,o.Vb=function(l,g,C){for(var S=Array(arguments.length-2),k=2;k<arguments.length;k++)S[k-2]=arguments[k];return t.prototype[g].apply(l,S)}}function Rt(){this.s=this.s,this.o=this.o}var Gt={};Rt.prototype.s=!1,Rt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var o=function(o){return Object.prototype.hasOwnProperty.call(o,vt)&&o[vt]||(o[vt]=++at)}(this);delete Gt[o]}},Rt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var kn=Array.prototype.indexOf?function(o,t){return Array.prototype.indexOf.call(o,t,void 0)}:function(o,t){if("string"==typeof o)return"string"!=typeof t||1!=t.length?-1:o.indexOf(t,0);for(var s=0;s<o.length;s++)if(s in o&&o[s]===t)return s;return-1},Tn=Array.prototype.forEach?function(o,t,s){Array.prototype.forEach.call(o,t,s)}:function(o,t,s){for(var l=o.length,g="string"==typeof o?o.split(""):o,C=0;C<l;C++)C in g&&t.call(s,g[C],C,o)};function Zn(o){return Array.prototype.concat.apply([],arguments)}function qn(o){var t=o.length;if(0<t){for(var s=Array(t),l=0;l<t;l++)s[l]=o[l];return s}return[]}function Xn(o){return/^[\s\xa0]*$/.test(o)}var vn,An=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]};function On(o,t){return-1!=o.indexOf(t)}function Si(o,t){return o<t?-1:o>t?1:0}e:{var Kt=Et.navigator;if(Kt){var zn=Kt.userAgent;if(zn){vn=zn;break e}}vn=""}function Ln(o,t,s){for(var l in o)t.call(s,o[l],l,o)}function Qt(o){var t={};for(var s in o)t[s]=o[s];return t}var gr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vr(o,t){for(var s,l,g=1;g<arguments.length;g++){for(s in l=arguments[g])o[s]=l[s];for(var C=0;C<gr.length;C++)s=gr[C],Object.prototype.hasOwnProperty.call(l,s)&&(o[s]=l[s])}}function Kn(o){return Kn[" "](o),o}Kn[" "]=Ke;var pt,o,Ze=On(vn,"Opera"),je=On(vn,"Trident")||On(vn,"MSIE"),It=On(vn,"Edge"),xt=It||je,nn=On(vn,"Gecko")&&!(On(vn.toLowerCase(),"webkit")&&!On(vn,"Edge"))&&!(On(vn,"Trident")||On(vn,"MSIE"))&&!On(vn,"Edge"),Ot=On(vn.toLowerCase(),"webkit")&&!On(vn,"Edge");function Ue(){var o=Et.document;return o?o.documentMode:void 0}e:{var bt="",At=(o=vn,nn?/rv:([^\);]+)(\)|;)/.exec(o):It?/Edge\/([\d\.]+)/.exec(o):je?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o):Ot?/WebKit\/(\S+)/.exec(o):Ze?/(?:Version)[ \/]?(\S+)/.exec(o):void 0);if(At&&(bt=At?At[1]:""),je){var Ut=Ue();if(null!=Ut&&Ut>parseFloat(bt)){pt=String(Ut);break e}}pt=bt}var dn={};function pn(){return t=dn,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var o=0,t=An(String(pt)).split("."),s=An("9").split("."),l=Math.max(t.length,s.length),g=0;0==o&&g<l;g++){var C=t[g]||"",S=s[g]||"";do{if(C=/(\d*)(\D*)(.*)/.exec(C)||["","","",""],S=/(\d*)(\D*)(.*)/.exec(S)||["","","",""],0==C[0].length&&0==S[0].length)break;o=Si(0==C[1].length?0:parseInt(C[1],10),0==S[1].length?0:parseInt(S[1],10))||Si(0==C[2].length,0==S[2].length)||Si(C[2],S[2]),C=C[3],S=S[3]}while(0==o)}return 0<=o}();var t}var Ie=Et.document&&je&&(Ue()||parseInt(pt,10))||void 0,$e=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var o=!1,t=Object.defineProperty({},"passive",{get:function(){o=!0}});try{Et.addEventListener("test",Ke,t),Et.removeEventListener("test",Ke,t)}catch(s){}return o}();function Je(o,t){this.type=o,this.g=this.target=t,this.defaultPrevented=!1}function Xe(o,t){if(Je.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var s=this.type=o.type,l=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=t,t=o.relatedTarget){if(nn){e:{try{Kn(t.nodeName);var g=!0;break e}catch(C){}g=!1}g||(t=null)}}else"mouseover"==s?t=o.fromElement:"mouseout"==s&&(t=o.toElement);this.relatedTarget=t,l?(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0):(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType="string"==typeof o.pointerType?o.pointerType:qt[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Xe.Z.h.call(this)}}Je.prototype.h=function(){this.defaultPrevented=!0},Bt(Xe,Je);var qt={2:"touch",3:"pen",4:"mouse"};Xe.prototype.h=function(){Xe.Z.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var yn="closure_listenable_"+(1e6*Math.random()|0),sr=0;function Vn(o,t,s,l,g){this.listener=o,this.proxy=null,this.src=t,this.type=s,this.capture=!!l,this.ia=g,this.key=++sr,this.ca=this.fa=!1}function Un(o){o.ca=!0,o.listener=null,o.proxy=null,o.src=null,o.ia=null}function si(o){this.src=o,this.g={},this.h=0}function Br(o,t){var s=t.type;if(s in o.g){var C,l=o.g[s],g=kn(l,t);(C=0<=g)&&Array.prototype.splice.call(l,g,1),C&&(Un(t),0==o.g[s].length&&(delete o.g[s],o.h--))}}function Xr(o,t,s,l){for(var g=0;g<o.length;++g){var C=o[g];if(!C.ca&&C.listener==t&&C.capture==!!s&&C.ia==l)return g}return-1}si.prototype.add=function(o,t,s,l,g){var C=o.toString();(o=this.g[C])||(o=this.g[C]=[],this.h++);var S=Xr(o,t,l,g);return-1<S?(t=o[S],s||(t.fa=!1)):((t=new Vn(t,this.src,C,!!l,g)).fa=s,o.push(t)),t};var Dr="closure_lm_"+(1e6*Math.random()|0),Mi={};function Uo(o,t,s,l,g){if(l&&l.once)return Wo(o,t,s,l,g);if(Array.isArray(t)){for(var C=0;C<t.length;C++)Uo(o,t[C],s,l,g);return null}return s=Xt(s),o&&o[yn]?o.N(t,s,it(l)?!!l.capture:!!l,g):Qi(o,t,s,!1,l,g)}function Qi(o,t,s,l,g,C){if(!t)throw Error("Invalid event type");var S=it(g)?!!g.capture:!!g,k=uo(o);if(k||(o[Dr]=k=new si(o)),(s=k.add(t,s,l,S,C)).proxy)return s;if(l=function(){var t=Ur;return function o(s){return t.call(o.src,o.listener,s)}}(),s.proxy=l,l.src=o,l.listener=s,o.addEventListener)$e||(g=S),void 0===g&&(g=!1),o.addEventListener(t.toString(),l,g);else if(o.attachEvent)o.attachEvent(bn(t.toString()),l);else{if(!o.addListener||!o.removeListener)throw Error("addEventListener and attachEvent are unavailable.");o.addListener(l)}return s}function Wo(o,t,s,l,g){if(Array.isArray(t)){for(var C=0;C<t.length;C++)Wo(o,t[C],s,l,g);return null}return s=Xt(s),o&&o[yn]?o.O(t,s,it(l)?!!l.capture:!!l,g):Qi(o,t,s,!0,l,g)}function Fr(o,t,s,l,g){if(Array.isArray(t))for(var C=0;C<t.length;C++)Fr(o,t[C],s,l,g);else l=it(l)?!!l.capture:!!l,s=Xt(s),o&&o[yn]?(o=o.i,(t=String(t).toString())in o.g&&-1<(s=Xr(C=o.g[t],s,l,g))&&(Un(C[s]),Array.prototype.splice.call(C,s,1),0==C.length&&(delete o.g[t],o.h--))):o&&(o=uo(o))&&(t=o.g[t.toString()],o=-1,t&&(o=Xr(t,s,l,g)),(s=-1<o?t[o]:null)&&cr(s))}function cr(o){if("number"!=typeof o&&o&&!o.ca){var t=o.src;if(t&&t[yn])Br(t.i,o);else{var s=o.type,l=o.proxy;t.removeEventListener?t.removeEventListener(s,l,o.capture):t.detachEvent?t.detachEvent(bn(s),l):t.addListener&&t.removeListener&&t.removeListener(l),(s=uo(t))?(Br(s,o),0==s.h&&(s.src=null,t[Dr]=null)):Un(o)}}}function bn(o){return o in Mi?Mi[o]:Mi[o]="on"+o}function Ur(o,t){if(o.ca)o=!0;else{t=new Xe(t,this);var s=o.listener,l=o.ia||o.src;o.fa&&cr(o),o=s.call(l,t)}return o}function uo(o){return(o=o[Dr])instanceof si?o:null}var Sr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xt(o){return"function"==typeof o?o:(o[Sr]||(o[Sr]=function(t){return o.handleEvent(t)}),o[Sr])}function ln(){Rt.call(this),this.i=new si(this),this.P=this,this.I=null}function xn(o,t){var s,l=o.I;if(l)for(s=[];l;l=l.I)s.push(l);if(o=o.P,l=t.type||t,"string"==typeof t)t=new Je(t,o);else if(t instanceof Je)t.target=t.target||o;else{var g=t;Vr(t=new Je(l,o),g)}if(g=!0,s)for(var C=s.length-1;0<=C;C--){var S=t.g=s[C];g=Kr(S,l,!0,t)&&g}if(g=Kr(S=t.g=o,l,!0,t)&&g,g=Kr(S,l,!1,t)&&g,s)for(C=0;C<s.length;C++)g=Kr(S=t.g=s[C],l,!1,t)&&g}function Kr(o,t,s,l){if(!(t=o.i.g[String(t)]))return!0;t=t.concat();for(var g=!0,C=0;C<t.length;++C){var S=t[C];if(S&&!S.ca&&S.capture==s){var k=S.listener,K=S.ia||S.src;S.fa&&Br(o.i,S),g=!1!==k.call(K,l)&&g}}return g&&!l.defaultPrevented}Bt(ln,Rt),ln.prototype[yn]=!0,ln.prototype.removeEventListener=function(o,t,s,l){Fr(this,o,t,s,l)},ln.prototype.M=function(){if(ln.Z.M.call(this),this.i){var t,o=this.i;for(t in o.g){for(var s=o.g[t],l=0;l<s.length;l++)Un(s[l]);delete o.g[t],o.h--}}this.I=null},ln.prototype.N=function(o,t,s,l){return this.i.add(String(o),t,!1,s,l)},ln.prototype.O=function(o,t,s,l){return this.i.add(String(o),t,!0,s,l)};var wi=Et.JSON.stringify;function Ar(){var o=st,t=null;return o.g&&(t=o.g,o.g=o.g.next,o.g||(o.h=null),t.next=null),t}var Qe,ti=function(){function o(){this.h=this.g=null}return o.prototype.add=function(t,s){var l=Er.get();l.set(t,s),this.h?this.h.next=l:this.g=l,this.h=l},o}(),Er=new(function(){function o(t,s){this.i=t,this.j=s,this.h=0,this.g=null}return o.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},o}())(function(){return new To},function(o){return o.reset()}),To=function(){function o(){this.next=this.g=this.h=null}return o.prototype.set=function(t,s){this.h=t,this.g=s,this.next=null},o.prototype.reset=function(){this.next=this.g=this.h=null},o}();function lo(o){Et.setTimeout(function(){throw o},0)}function Pn(o,t){Qe||function(){var o=Et.Promise.resolve(void 0);Qe=function(){o.then(Mt)}}(),Ae||(Qe(),Ae=!0),st.add(o,t)}var Ae=!1,st=new ti;function Mt(){for(var o;o=Ar();){try{o.h.call(o.g)}catch(s){lo(s)}var t=Er;t.j(o),100>t.h&&(t.h++,o.next=t.g,t.g=o)}Ae=!1}function cn(o,t){ln.call(this),this.h=o||1,this.g=t||Et,this.j=Sn(this.kb,this),this.l=Date.now()}function Hn(o){o.da=!1,o.S&&(o.g.clearTimeout(o.S),o.S=null)}function mn(o,t,s){if("function"==typeof o)s&&(o=Sn(o,s));else{if(!o||"function"!=typeof o.handleEvent)throw Error("Invalid listener argument");o=Sn(o.handleEvent,o)}return 2147483647<Number(t)?-1:Et.setTimeout(o,t||0)}function un(o){o.g=mn(function(){o.g=null,o.i&&(o.i=!1,un(o))},o.j);var t=o.h;o.h=null,o.m.apply(null,t)}Bt(cn,ln),(wt=cn.prototype).da=!1,wt.S=null,wt.kb=function(){if(this.da){var o=Date.now()-this.l;0<o&&o<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-o):(this.S&&(this.g.clearTimeout(this.S),this.S=null),xn(this,"tick"),this.da&&(Hn(this),this.start()))}},wt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wt.M=function(){cn.Z.M.call(this),Hn(this),delete this.g};var er=function(o){function t(s,l){var g=o.call(this)||this;return g.m=s,g.j=l,g.h=null,g.i=!1,g.g=null,g}return function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=o}_n(o,t),o.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}(t,o),t.prototype.l=function(s){this.h=arguments,this.g?this.i=!0:un(this)},t.prototype.M=function(){o.prototype.M.call(this),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(Rt);function Li(o){Rt.call(this),this.h=o,this.g={}}Bt(Li,Rt);var mr=[];function Ii(o,t,s,l){Array.isArray(s)||(s&&(mr[0]=s.toString()),s=mr);for(var g=0;g<s.length;g++){var C=Uo(t,s[g],l||o.handleEvent,!1,o.h||o);if(!C)break;o.g[C.key]=C}}function io(o){Ln(o.g,function(t,s){this.g.hasOwnProperty(s)&&cr(t)},o),o.g={}}function jr(){this.g=!0}function Bn(o,t,s,l){o.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(o,t){if(!o.g)return t;if(!t)return null;try{var s=JSON.parse(t);if(s)for(o=0;o<s.length;o++)if(Array.isArray(s[o])){var l=s[o];if(!(2>l.length)){var g=l[1];if(Array.isArray(g)&&!(1>g.length)){var C=g[0];if("noop"!=C&&"stop"!=C&&"close"!=C)for(var S=1;S<g.length;S++)g[S]=""}}}return wi(s)}catch(k){return t}}(o,s)+(l?" "+l:"")})}Li.prototype.M=function(){Li.Z.M.call(this),io(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jr.prototype.Aa=function(){this.g=!1},jr.prototype.info=function(){};var Ui={},ni=null;function Vi(){return ni=ni||new ln}function Gi(o){Je.call(this,Ui.Ma,o)}function ai(o){var t=Vi();xn(t,new Gi(t,o))}function Yo(o,t){Je.call(this,Ui.STAT_EVENT,o),this.stat=t}function Nr(o){var t=Vi();xn(t,new Yo(t,o))}function rs(o,t){Je.call(this,Ui.Na,o),this.size=t}function Bi(o,t){if("function"!=typeof o)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){o()},t)}Ui.Ma="serverreachability",Bt(Gi,Je),Ui.STAT_EVENT="statevent",Bt(Yo,Je),Ui.Na="timingevent",Bt(rs,Je);var Oo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Do={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ko(){}function Vo(){}Ko.prototype.h=null;var Qn,xo={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function mi(){Je.call(this,"d")}function Ai(){Je.call(this,"c")}function po(){}function Ji(o,t,s,l){this.l=o,this.j=t,this.m=s,this.X=l||1,this.V=new Li(this),this.P=ui,this.W=new cn(o=xt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new go}function go(){this.i=null,this.g="",this.h=!1}Bt(mi,Je),Bt(Ai,Je),Bt(po,Ko),po.prototype.g=function(){return new XMLHttpRequest},po.prototype.i=function(){return{}},Qn=new po;var ui=45e3,Xi={},ri={};function ie(o,t,s){o.K=1,o.v=_e(Z(t)),o.s=s,o.U=!0,qe(o,null)}function qe(o,t){o.F=Date.now(),Vt(o),o.A=Z(o.v);var s=o.A,l=o.X;Array.isArray(l)||(l=[String(l)]),Dn(s.h,"t",l),o.C=0,s=o.l.H,o.h=new go,o.g=oi(o.l,s?t:null,!o.s),0<o.O&&(o.L=new er(Sn(o.Ia,o,o.g),o.O)),Ii(o.V,o.g,"readystatechange",o.gb),t=o.H?Qt(o.H):{},o.s?(o.u||(o.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.s,t)):(o.u="GET",o.g.ea(o.A,o.u,null,t)),ai(1),function(o,t,s,l,g,C){o.info(function(){if(o.g)if(C)for(var S="",k=C.split("&"),K=0;K<k.length;K++){var ue=k[K].split("=");if(1<ue.length){var de=ue[0];ue=ue[1];var Me=de.split("_");S=2<=Me.length&&"type"==Me[1]?S+(de+"=")+ue+"&":S+(de+"=redacted&")}}else S=null;else S=C;return"XMLHTTP REQ ("+l+") [attempt "+g+"]: "+t+"\n"+s+"\n"+S})}(o.j,o.u,o.A,o.m,o.X,o.s)}function W(o){return!!o.g&&"GET"==o.u&&2!=o.K&&o.l.Ba}function he(o,t,s){for(var g,l=!0;!o.I&&o.C<s.length;){if((g=lt(o,s))==ri){4==t&&(o.o=4,Nr(14),l=!1),Bn(o.j,o.m,null,"[Incomplete Response]");break}if(g==Xi){o.o=4,Nr(15),Bn(o.j,o.m,s,"[Invalid Chunk]"),l=!1;break}Bn(o.j,o.m,g,null),xi(o,g)}W(o)&&g!=ri&&g!=Xi&&(o.h.g="",o.C=0),4!=t||0!=s.length||o.h.h||(o.o=1,Nr(16),l=!1),o.i=o.i&&l,l?0<s.length&&!o.aa&&(o.aa=!0,(t=o.l).g==o&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+s.length),Wr(t),t.L=!0,Nr(11))):(Bn(o.j,o.m,s,"[Invalid Chunked Response]"),hr(o),$n(o))}function lt(o,t){var s=o.C,l=t.indexOf("\n",s);return-1==l?ri:(s=Number(t.substring(s,l)),isNaN(s)?Xi:(l+=1)+s>t.length?ri:(t=t.substr(l,s),o.C=l+s,t))}function Vt(o){o.Y=Date.now()+o.P,wn(o,o.P)}function wn(o,t){if(null!=o.B)throw Error("WatchDog timer not null");o.B=Bi(Sn(o.eb,o),t)}function Ir(o){o.B&&(Et.clearTimeout(o.B),o.B=null)}function $n(o){0==o.l.G||o.I||ii(o.l,o)}function hr(o){Ir(o);var t=o.L;t&&"function"==typeof t.na&&t.na(),o.L=null,Hn(o.W),io(o.V),o.g&&(t=o.g,o.g=null,t.abort(),t.na())}function xi(o,t){try{var s=o.l;if(0!=s.G&&(s.g==o||Ft(s.i,o)))if(s.I=o.N,!o.J&&Ft(s.i,o)&&3==s.G){try{var l=s.Ca.g.parse(t)}catch(en){l=null}if(Array.isArray(l)&&3==l.length){var g=l;if(0==g[0])e:if(s.u)s.ta=g[1],0<s.ta-s.U&&37500>g[2]&&s.N&&0==s.A&&!s.v&&(s.v=Bi(Sn(s.ab,s),6e3));else{if(s.g){if(!(s.g.F+3e3<o.F))break e;qi(s),Ps(s)}Zr(s),Nr(18)}if(1>=za(s.i)&&s.ka){try{s.ka()}catch(en){}s.ka=void 0}}else Ei(s,11)}else if((o.J||s.g==o)&&qi(s),!Xn(t))for(g=s.Ca.g.parse(t),t=0;t<g.length;t++){var C=g[t];if(s.U=C[0],C=C[1],2==s.G)if("c"==C[0]){s.J=C[1],s.la=C[2];var S=C[3];null!=S&&(s.ma=S,s.h.info("VER="+s.ma));var k=C[4];null!=k&&(s.za=k,s.h.info("SVER="+s.za));var K=C[5];null!=K&&"number"==typeof K&&0<K&&(s.K=l=1.5*K,s.h.info("backChannelRequestTimeoutMs_="+l)),l=s;var ue=o.g;if(ue){var de=ue.g?ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(de){var Me=l.i;!Me.g&&(On(de,"spdy")||On(de,"quic")||On(de,"h2"))&&(Me.j=Me.l,Me.g=new Set,Me.h&&(br(Me,Me.h),Me.h=null))}if(l.D){var Be=ue.g?ue.g.getResponseHeader("X-HTTP-Session-Id"):null;Be&&(l.sa=Be,ee(l.F,l.D,Be))}}s.G=3,s.j&&s.j.xa(),s.$&&(s.O=Date.now()-o.F,s.h.info("Handshake RTT: "+s.O+"ms"));var ht=o;if((l=s).oa=ro(l,l.H?l.la:null,l.W),ht.J){bs(l.i,ht);var dt=ht,Dt=l.K;Dt&&dt.setTimeout(Dt),dt.B&&(Ir(dt),Vt(dt)),l.g=ht}else Or(l);0<s.l.length&&no(s)}else"stop"!=C[0]&&"close"!=C[0]||Ei(s,7);else 3==s.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Ei(s,7):to(s):"noop"!=C[0]&&s.j&&s.j.wa(C),s.A=0)}ai(4)}catch(en){}}function Pi(o,t){if(o.forEach&&"function"==typeof o.forEach)o.forEach(t,void 0);else if(ot(o)||"string"==typeof o)Tn(o,t,void 0);else{if(o.T&&"function"==typeof o.T)var s=o.T();else if(o.R&&"function"==typeof o.R)s=void 0;else if(ot(o)||"string"==typeof o){s=[];for(var l=o.length,g=0;g<l;g++)s.push(g)}else for(g in s=[],l=0,o)s[l++]=g;g=(l=function(o){if(o.R&&"function"==typeof o.R)return o.R();if("string"==typeof o)return o.split("");if(ot(o)){for(var t=[],s=o.length,l=0;l<s;l++)t.push(o[l]);return t}for(l in t=[],s=0,o)t[s++]=o[l];return t}(o)).length;for(var C=0;C<g;C++)t.call(void 0,l[C],s&&s[C],o)}}function co(o,t){this.h={},this.g=[],this.i=0;var s=arguments.length;if(1<s){if(s%2)throw Error("Uneven number of arguments");for(var l=0;l<s;l+=2)this.set(arguments[l],arguments[l+1])}else if(o)if(o instanceof co)for(s=o.T(),l=0;l<s.length;l++)this.set(s[l],o.get(s[l]));else for(l in o)this.set(l,o[l])}function $r(o){if(o.i!=o.g.length){for(var t=0,s=0;t<o.g.length;){var l=o.g[t];fr(o.h,l)&&(o.g[s++]=l),t++}o.g.length=s}if(o.i!=o.g.length){var g={};for(s=t=0;t<o.g.length;)fr(g,l=o.g[t])||(o.g[s++]=l,g[l]=1),t++;o.g.length=s}}function fr(o,t){return Object.prototype.hasOwnProperty.call(o,t)}(wt=Ji.prototype).setTimeout=function(o){this.P=o},wt.gb=function(o){o=o.target;var t=this.L;t&&3==li(o)?t.l():this.Ia(o)},wt.Ia=function(o){try{if(o==this.g)e:{var t=li(this.g),s=this.g.Da(),l=this.g.ba();if(!(3>t)&&(3!=t||xt||this.g&&(this.h.h||this.g.ga()||So(this.g)))){this.I||4!=t||7==s||ai(8==s||0>=l?3:2),Ir(this);var g=this.g.ba();this.N=g;t:if(W(this)){var C=So(this.g);o="";var S=C.length,k=4==li(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){hr(this),$n(this);var K="";break t}this.h.i=new Et.TextDecoder}for(s=0;s<S;s++)this.h.h=!0,o+=this.h.i.decode(C[s],{stream:k&&s==S-1});C.splice(0,S),this.h.g+=o,this.C=0,K=this.h.g}else K=this.g.ga();if(this.i=200==g,function(o,t,s,l,g,C,S){o.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+g+"]: "+t+"\n"+s+"\n"+C+" "+S})}(this.j,this.u,this.A,this.m,this.X,t,g),this.i){if(this.$&&!this.J){t:{if(this.g){var ue,de=this.g;if((ue=de.g?de.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xn(ue)){var Me=ue;break t}}Me=null}if(!(g=Me)){this.i=!1,this.o=3,Nr(12),hr(this),$n(this);break e}Bn(this.j,this.m,g,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xi(this,g)}this.U?(he(this,t,K),xt&&this.i&&3==t&&(Ii(this.V,this.W,"tick",this.fb),this.W.start())):(Bn(this.j,this.m,K,null),xi(this,K)),4==t&&hr(this),this.i&&!this.I&&(4==t?ii(this.l,this):(this.i=!1,Vt(this)))}else 400==g&&0<K.indexOf("Unknown SID")?(this.o=3,Nr(12)):(this.o=0,Nr(13)),hr(this),$n(this)}}}catch(Be){}},wt.fb=function(){if(this.g){var o=li(this.g),t=this.g.ga();this.C<t.length&&(Ir(this),he(this,o,t),this.i&&4!=o&&Vt(this))}},wt.cancel=function(){this.I=!0,hr(this)},wt.eb=function(){this.B=null;var o=Date.now();0<=o-this.Y?(function(o,t){o.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(ai(3),Nr(17)),hr(this),this.o=2,$n(this)):wn(this,this.Y-o)},(wt=co.prototype).R=function(){$r(this);for(var o=[],t=0;t<this.g.length;t++)o.push(this.h[this.g[t]]);return o},wt.T=function(){return $r(this),this.g.concat()},wt.get=function(o,t){return fr(this.h,o)?this.h[o]:t},wt.set=function(o,t){fr(this.h,o)||(this.i++,this.g.push(o)),this.h[o]=t},wt.forEach=function(o,t){for(var s=this.T(),l=0;l<s.length;l++){var g=s[l],C=this.get(g);o.call(t,C,g,this)}};var jo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Y(o,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,o instanceof Y){this.g=void 0!==t?t:o.g,ce(this,o.j),this.s=o.s,P(this,o.i),$(this,o.m),this.l=o.l,t=o.h;var s=new Hr;s.i=t.i,t.g&&(s.g=new co(t.g),s.h=t.h),N(this,s),this.o=o.o}else o&&(s=String(o).match(jo))?(this.g=!!t,ce(this,s[1]||"",!0),this.s=H(s[2]||""),P(this,s[3]||"",!0),$(this,s[4]),this.l=H(s[5]||"",!0),N(this,s[6]||"",!0),this.o=H(s[7]||"")):(this.g=!!t,this.h=new Hr(null,this.g))}function Z(o){return new Y(o)}function ce(o,t,s){o.j=s?H(t,!0):t,o.j&&(o.j=o.j.replace(/:$/,""))}function P(o,t,s){o.i=s?H(t,!0):t}function $(o,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);o.m=t}else o.m=null}function N(o,t,s){t instanceof Hr?(o.h=t,function(o,t){t&&!o.j&&(_r(o),o.i=null,o.g.forEach(function(s,l){var g=l.toLowerCase();l!=g&&(Gr(this,l),Dn(this,g,s))},o)),o.j=t}(o.h,o.g)):(s||(t=j(t,En)),o.h=new Hr(t,o.g))}function ee(o,t,s){o.h.set(t,s)}function _e(o){return ee(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function H(o,t){return o?t?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function j(o,t,s){return"string"==typeof o?(o=encodeURI(o).replace(t,L),s&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function L(o){return"%"+((o=o.charCodeAt(0))>>4&15).toString(16)+(15&o).toString(16)}Y.prototype.toString=function(){var o=[],t=this.j;t&&o.push(j(t,ae,!0),":");var s=this.i;return(s||"file"==t)&&(o.push("//"),(t=this.s)&&o.push(j(t,ae,!0),"@"),o.push(encodeURIComponent(String(s)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(s=this.m)&&o.push(":",String(s))),(s=this.l)&&(this.i&&"/"!=s.charAt(0)&&o.push("/"),o.push(j(s,"/"==s.charAt(0)?Pt:ze,!0))),(s=this.h.toString())&&o.push("?",s),(s=this.o)&&o.push("#",j(s,pr)),o.join("")};var ae=/[#\/\?@]/g,ze=/[#\?:]/g,Pt=/[#\?]/g,En=/[#\?@]/g,pr=/#/g;function Hr(o,t){this.h=this.g=null,this.i=o||null,this.j=!!t}function _r(o){o.g||(o.g=new co,o.h=0,o.i&&function(o,t){if(o){o=o.split("&");for(var s=0;s<o.length;s++){var l=o[s].indexOf("="),g=null;if(0<=l){var C=o[s].substring(0,l);g=o[s].substring(l+1)}else C=o[s];t(C,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}(o.i,function(t,s){o.add(decodeURIComponent(t.replace(/\+/g," ")),s)}))}function Gr(o,t){_r(o),t=eo(o,t),fr(o.g.h,t)&&(o.i=null,o.h-=o.g.get(t).length,fr((o=o.g).h,t)&&(delete o.h[t],o.i--,o.g.length>2*o.i&&$r(o)))}function _i(o,t){return _r(o),t=eo(o,t),fr(o.g.h,t)}function Dn(o,t,s){Gr(o,t),0<s.length&&(o.i=null,o.g.set(eo(o,t),qn(s)),o.h+=s.length)}function eo(o,t){return t=String(t),o.j&&(t=t.toLowerCase()),t}(wt=Hr.prototype).add=function(o,t){_r(this),this.i=null,o=eo(this,o);var s=this.g.get(o);return s||this.g.set(o,s=[]),s.push(t),this.h+=1,this},wt.forEach=function(o,t){_r(this),this.g.forEach(function(s,l){Tn(s,function(g){o.call(t,g,l,this)},this)},this)},wt.T=function(){_r(this);for(var o=this.g.R(),t=this.g.T(),s=[],l=0;l<t.length;l++)for(var g=o[l],C=0;C<g.length;C++)s.push(t[l]);return s},wt.R=function(o){_r(this);var t=[];if("string"==typeof o)_i(this,o)&&(t=Zn(t,this.g.get(eo(this,o))));else{o=this.g.R();for(var s=0;s<o.length;s++)t=Zn(t,o[s])}return t},wt.set=function(o,t){return _r(this),this.i=null,_i(this,o=eo(this,o))&&(this.h-=this.g.get(o).length),this.g.set(o,[t]),this.h+=1,this},wt.get=function(o,t){return o&&0<(o=this.R(o)).length?String(o[0]):t},wt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var o=[],t=this.g.T(),s=0;s<t.length;s++){var l=t[s],g=encodeURIComponent(String(l));l=this.R(l);for(var C=0;C<l.length;C++){var S=g;""!==l[C]&&(S+="="+encodeURIComponent(String(l[C]))),o.push(S)}}return this.i=o.join("&")};var Po=function(t,s){this.h=t,this.g=s};function qa(o){this.l=o||Gu,o=Et.PerformanceNavigationTiming?0<(o=Et.performance.getEntriesByType("navigation")).length&&("hq"==o[0].nextHopProtocol||"h2"==o[0].nextHopProtocol):!!(Et.g&&Et.g.Ea&&Et.g.Ea()&&Et.g.Ea().Zb),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Gu=10;function mu(o){return!!o.h||!!o.g&&o.g.size>=o.j}function za(o){return o.h?1:o.g?o.g.size:0}function Ft(o,t){return o.h?o.h==t:!!o.g&&o.g.has(t)}function br(o,t){o.g?o.g.add(t):o.h=t}function bs(o,t){o.h&&o.h==t?o.h=null:o.g&&o.g.has(t)&&o.g.delete(t)}function ji(o){var t,s;if(null!=o.h)return o.i.concat(o.h.D);if(null!=o.g&&0!==o.g.size){var l=o.i;try{for(var g=ut(o.g.values()),C=g.next();!C.done;C=g.next())l=l.concat(C.value.D)}catch(k){t={error:k}}finally{try{C&&!C.done&&(s=g.return)&&s.call(g)}finally{if(t)throw t.error}}return l}return qn(o.i)}function xs(){}function Cs(){this.g=new xs}function Qo(o,t,s){var l=s||"";try{Pi(o,function(g,C){var S=g;it(g)&&(S=wi(g)),t.push(l+C+"="+encodeURIComponent(S))})}catch(g){throw t.push(l+"type="+encodeURIComponent("_badmap")),g}}function A(o,t,s,l,g){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,g(l)}catch(C){}}function I(o){this.l=o.$b||null,this.j=o.ib||!1}function B(o,t){ln.call(this),this.D=o,this.u=t,this.m=void 0,this.readyState=se,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qa.prototype.cancel=function(){var o,t;if(this.i=ji(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var s=ut(this.g.values()),l=s.next();!l.done;l=s.next())l.value.cancel()}catch(C){o={error:C}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(o)throw o.error}}this.g.clear()}},xs.prototype.stringify=function(o){return Et.JSON.stringify(o,void 0)},xs.prototype.parse=function(o){return Et.JSON.parse(o,void 0)},Bt(I,Ko),I.prototype.g=function(){return new B(this.l,this.j)},I.prototype.i=function(o){return function(){return o}}({}),Bt(B,ln);var se=0;function me(o){o.j.read().then(o.Sa.bind(o)).catch(o.ha.bind(o))}function Pe(o){o.readyState=4,o.l=null,o.j=null,o.A=null,Fe(o)}function Fe(o){o.onreadystatechange&&o.onreadystatechange.call(o)}(wt=B.prototype).open=function(o,t){if(this.readyState!=se)throw this.abort(),Error("Error reopening a connection");this.C=o,this.B=t,this.readyState=1,Fe(this)},wt.send=function(o){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};o&&(t.body=o),(this.D||Et).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},wt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pe(this)),this.readyState=se},wt.Va=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Fe(this)),this.g&&(this.readyState=3,Fe(this),this.g)))if("arraybuffer"===this.responseType)o.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Et.ReadableStream&&"body"in o){if(this.j=o.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;me(this)}else o.text().then(this.Ua.bind(this),this.ha.bind(this))},wt.Sa=function(o){if(this.g){if(this.u&&o.value)this.response.push(o.value);else if(!this.u){var t=o.value?o.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!o.done}))&&(this.response=this.responseText+=t)}o.done?Pe(this):Fe(this),3==this.readyState&&me(this)}},wt.Ua=function(o){this.g&&(this.response=this.responseText=o,Pe(this))},wt.Ta=function(o){this.g&&(this.response=o,Pe(this))},wt.ha=function(){this.g&&Pe(this)},wt.setRequestHeader=function(o,t){this.v.append(o,t)},wt.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},wt.getAllResponseHeaders=function(){if(!this.h)return"";for(var o=[],t=this.h.entries(),s=t.next();!s.done;)o.push((s=s.value)[0]+": "+s[1]),s=t.next();return o.join("\r\n")},Object.defineProperty(B.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(o){this.m=o?"include":"same-origin"}});var ct=Et.JSON.parse;function mt(o){ln.call(this),this.headers=new co,this.u=o||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ht,this.K=this.L=!1}Bt(mt,ln);var Ht="",Rn=/^https?$/i,dr=["POST","PUT"];function Yn(o){return"content-type"==o.toLowerCase()}function Fn(o,t){o.h=!1,o.g&&(o.l=!0,o.g.abort(),o.l=!1),o.j=t,o.m=5,yr(o),ei(o)}function yr(o){o.D||(o.D=!0,xn(o,"complete"),xn(o,"error"))}function vi(o){if(o.h&&void 0!==In&&(!o.C[1]||4!=li(o)||2!=o.ba()))if(o.v&&4==li(o))mn(o.Fa,0,o);else if(xn(o,"readystatechange"),4==li(o)){o.h=!1;try{var l,t=o.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break e;default:s=!1}if(!(l=s)){var g;if(g=0===t){var C=String(o.H).match(jo)[1]||null;if(!C&&Et.self&&Et.self.location){var S=Et.self.location.protocol;C=S.substr(0,S.length-1)}g=!Rn.test(C?C.toLowerCase():"")}l=g}if(l)xn(o,"complete"),xn(o,"success");else{o.m=6;try{var k=2<li(o)?o.g.statusText:""}catch(K){k=""}o.j=k+" ["+o.ba()+"]",yr(o)}}finally{ei(o)}}}function ei(o,t){if(o.g){Ri(o);var s=o.g,l=o.C[0]?Ke:null;o.g=null,o.C=null,t||xn(o,"ready");try{s.onreadystatechange=l}catch(g){}}}function Ri(o){o.g&&o.K&&(o.g.ontimeout=null),o.A&&(Et.clearTimeout(o.A),o.A=null)}function li(o){return o.g?o.g.readyState:0}function So(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.J){case Ht:case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ci(o,t,s){e:{for(l in s){var l=!1;break e}l=!0}l||(s=function(o){var t="";return Ln(o,function(s,l){t+=l,t+=":",t+=s,t+="\r\n"}),t}(s),"string"==typeof o?null!=s&&encodeURIComponent(String(s)):ee(o,t,s))}function _o(o,t,s){return s&&s.internalChannelParams&&s.internalChannelParams[o]||t}function fs(o){this.za=0,this.l=[],this.h=new jr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=_o("failFast",!1,o),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=_o("baseRetryDelayMs",5e3,o),this.$a=_o("retryDelaySeedMs",1e4,o),this.Ya=_o("forwardChannelMaxRetries",2,o),this.ra=_o("forwardChannelRequestTimeoutMs",2e4,o),this.qa=o&&o.xmlHttpFactory||void 0,this.Ba=o&&o.Yb||!1,this.K=void 0,this.H=o&&o.supportsCrossDomainXhr||!1,this.J="",this.i=new qa(o&&o.concurrentRequestLimit),this.Ca=new Cs,this.ja=o&&o.fastHandshake||!1,this.Ra=o&&o.Wb||!1,o&&o.Aa&&this.h.Aa(),o&&o.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&o&&o.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!o||!1!==o.Xb}function to(o){if(ta(o),3==o.G){var t=o.V++,s=Z(o.F);ee(s,"SID",o.J),ee(s,"RID",t),ee(s,"TYPE","terminate"),Mn(o,s),(t=new Ji(o,o.h,t,void 0)).K=2,t.v=_e(Z(s)),s=!1,Et.navigator&&Et.navigator.sendBeacon&&(s=Et.navigator.sendBeacon(t.v.toString(),"")),!s&&Et.Image&&((new Image).src=t.v,s=!0),s||(t.g=oi(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Vt(t)}$s(o)}function Ps(o){o.g&&(Wr(o),o.g.cancel(),o.g=null)}function ta(o){Ps(o),o.u&&(Et.clearTimeout(o.u),o.u=null),qi(o),o.i.cancel(),o.m&&("number"==typeof o.m&&Et.clearTimeout(o.m),o.m=null)}function yi(o,t){o.l.push(new Po(o.Za++,t)),3==o.G&&no(o)}function no(o){mu(o.i)||o.m||(o.m=!0,Pn(o.Ha,o),o.C=0)}function Cn(o,t){var s;s=t?t.m:o.V++;var l=Z(o.F);ee(l,"SID",o.J),ee(l,"RID",s),ee(l,"AID",o.U),Mn(o,l),o.o&&o.s&&ci(l,o.o,o.s),s=new Ji(o,o.h,s,o.C+1),null===o.o&&(s.H=o.s),t&&(o.l=t.D.concat(o.l)),t=tr(o,s,1e3),s.setTimeout(Math.round(.5*o.ra)+Math.round(.5*o.ra*Math.random())),br(o.i,s),ie(s,l,t)}function Mn(o,t){o.j&&Pi({},function(s,l){ee(t,l,s)})}function tr(o,t,s){s=Math.min(o.l.length,s);var l=o.j?Sn(o.j.Oa,o.j,o):null;e:for(var g=o.l,C=-1;;){var S=["count="+s];-1==C?0<s?S.push("ofs="+(C=g[0].h)):C=0:S.push("ofs="+C);for(var k=!0,K=0;K<s;K++){var ue=g[K].h,de=g[K].g;if(0>(ue-=C))C=Math.max(0,g[K].h-100),k=!1;else try{Qo(de,S,"req"+ue+"_")}catch(Me){l&&l(de)}}if(k){l=S.join("&");break e}}return o=o.l.splice(0,s),t.D=o,l}function Or(o){o.g||o.u||(o.Y=1,Pn(o.Ga,o),o.A=0)}function Zr(o){return!(o.g||o.u||3<=o.A||(o.Y++,o.u=Bi(Sn(o.Ga,o),Rs(o,o.A)),o.A++,0))}function Wr(o){null!=o.B&&(Et.clearTimeout(o.B),o.B=null)}function Zi(o){o.g=new Ji(o,o.h,"rpc",o.Y),null===o.o&&(o.g.H=o.s),o.g.O=0;var t=Z(o.oa);ee(t,"RID","rpc"),ee(t,"SID",o.J),ee(t,"CI",o.N?"0":"1"),ee(t,"AID",o.U),Mn(o,t),ee(t,"TYPE","xmlhttp"),o.o&&o.s&&ci(t,o.o,o.s),o.K&&o.g.setTimeout(o.K);var s=o.g;o=o.la,s.K=1,s.v=_e(Z(t)),s.s=null,s.U=!0,qe(s,o)}function qi(o){null!=o.v&&(Et.clearTimeout(o.v),o.v=null)}function ii(o,t){var s=null;if(o.g==t){qi(o),Wr(o),o.g=null;var l=2}else{if(!Ft(o.i,t))return;s=t.D,bs(o.i,t),l=1}if(o.I=t.N,0!=o.G)if(t.i)if(1==l){s=t.s?t.s.length:0,t=Date.now()-t.F;var g=o.C;xn(l=Vi(),new rs(l,s,t,g)),no(o)}else Or(o);else if(3==(g=t.o)||0==g&&0<o.I||!(1==l&&function(o,t){return!(za(o.i)>=o.i.j-(o.m?1:0)||(o.m?(o.l=t.D.concat(o.l),0):1==o.G||2==o.G||o.C>=(o.Xa?0:o.Ya)||(o.m=Bi(Sn(o.Ha,o,t),Rs(o,o.C)),o.C++,0)))}(o,t)||2==l&&Zr(o)))switch(s&&0<s.length&&(t=o.i,t.i=t.i.concat(s)),g){case 1:Ei(o,5);break;case 4:Ei(o,10);break;case 3:Ei(o,6);break;default:Ei(o,2)}}function Rs(o,t){var s=o.Pa+Math.floor(Math.random()*o.$a);return o.j||(s*=2),s*t}function Ei(o,t){if(o.h.info("Error code "+t),2==t){var s=null;o.j&&(s=null);var l=Sn(o.jb,o);s||(s=new Y("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||ce(s,"https"),_e(s)),function(o,t){var s=new jr;if(Et.Image){var l=new Image;l.onload=an(A,s,l,"TestLoadImage: loaded",!0,t),l.onerror=an(A,s,l,"TestLoadImage: error",!1,t),l.onabort=an(A,s,l,"TestLoadImage: abort",!1,t),l.ontimeout=an(A,s,l,"TestLoadImage: timeout",!1,t),Et.setTimeout(function(){l.ontimeout&&l.ontimeout()},1e4),l.src=o}else t(!1)}(s.toString(),l)}else Nr(2);o.G=0,o.j&&o.j.va(t),$s(o),ta(o)}function $s(o){o.G=0,o.I=-1,o.j&&((0!=ji(o.i).length||0!=o.l.length)&&(o.i.i.length=0,qn(o.l),o.l.length=0),o.j.ua())}function ro(o,t,s){var l=function(o){return o instanceof Y?Z(o):new Y(o,void 0)}(s);if(""!=l.i)t&&P(l,t+"."+l.i),$(l,l.m);else{var g=Et.location;l=function(o,t,s,l){var g=new Y(null,void 0);return o&&ce(g,o),t&&P(g,t),s&&$(g,s),l&&(g.l=l),g}(g.protocol,t?t+"."+g.hostname:g.hostname,+g.port,s)}return o.aa&&Ln(o.aa,function(C,S){ee(l,S,C)}),s=o.sa,(t=o.D)&&s&&ee(l,t,s),ee(l,"VER",o.ma),Mn(o,l),l}function oi(o,t,s){if(t&&!o.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new mt(s&&o.Ba&&!o.qa?new I({ib:!0}):o.qa)).L=o.H,t}function ws(){}function ba(){if(je&&!(10<=Number(Ie)))throw Error("Environmental error: no available transport.")}function zi(o,t){ln.call(this),this.g=new fs(t),this.l=o,this.h=t&&t.messageUrlParams||null,o=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.s=o,o=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(o?o["X-WebChannel-Content-Type"]=t.messageContentType:o={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(o?o["X-WebChannel-Client-Profile"]=t.ya:o={"X-WebChannel-Client-Profile":t.ya}),this.g.P=o,(o=t&&t.httpHeadersOverwriteParam)&&!Xn(o)&&(this.g.o=o),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Xn(t)&&(this.g.D=t,null!==(o=this.h)&&t in o&&t in(o=this.h)&&delete o[t]),this.j=new Ca(this)}function _u(o){mi.call(this);var t=o.__sm__;if(t){e:{for(var s in t){o=s;break e}o=void 0}(this.i=o)&&(o=this.i,t=null!==t&&o in t?t[o]:void 0),this.data=t}else this.data=o}function na(){Ai.call(this),this.status=1}function Ca(o){this.g=o}(wt=mt.prototype).ea=function(o,t,s,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+o);t=t?t.toUpperCase():"GET",this.H=o,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Qn.g(),this.C=function(o){return o.h||(o.h=o.i())}(this.u?this.u:Qn),this.g.onreadystatechange=Sn(this.Fa,this);try{this.F=!0,this.g.open(t,String(o),!0),this.F=!1}catch(C){return void Fn(this,C)}o=s||"";var g=new co(this.headers);l&&Pi(l,function(C,S){g.set(S,C)}),l=function(o){e:{for(var t=Yn,s=o.length,l="string"==typeof o?o.split(""):o,g=0;g<s;g++)if(g in l&&t.call(void 0,l[g],g,o)){t=g;break e}t=-1}return 0>t?null:"string"==typeof o?o.charAt(t):o[t]}(g.T()),s=Et.FormData&&o instanceof Et.FormData,!(0<=kn(dr,t))||l||s||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),g.forEach(function(C,S){this.g.setRequestHeader(S,C)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ri(this),0<this.B&&((this.K=function(o){return je&&pn()&&"number"==typeof o.timeout&&void 0!==o.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Sn(this.pa,this)):this.A=mn(this.pa,this.B,this)),this.v=!0,this.g.send(o),this.v=!1}catch(C){Fn(this,C)}},wt.pa=function(){void 0!==In&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xn(this,"timeout"),this.abort(8))},wt.abort=function(o){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=o||7,xn(this,"complete"),xn(this,"abort"),ei(this))},wt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ei(this,!0)),mt.Z.M.call(this)},wt.Fa=function(){this.s||(this.F||this.v||this.l?vi(this):this.cb())},wt.cb=function(){vi(this)},wt.ba=function(){try{return 2<li(this)?this.g.status:-1}catch(o){return-1}},wt.ga=function(){try{return this.g?this.g.responseText:""}catch(o){return""}},wt.Qa=function(o){if(this.g){var t=this.g.responseText;return o&&0==t.indexOf(o)&&(t=t.substring(o.length)),ct(t)}},wt.Da=function(){return this.m},wt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(wt=fs.prototype).ma=8,wt.G=1,wt.hb=function(o){try{this.h.info("Origin Trials invoked: "+o)}catch(t){}},wt.Ha=function(o){if(this.m)if(this.m=null,1==this.G){if(!o){this.V=Math.floor(1e5*Math.random()),o=this.V++;var t=new Ji(this,this.h,o,void 0),s=this.s;if(this.P&&(s?Vr(s=Qt(s),this.P):s=this.P),null===this.o&&(t.H=s),this.ja)e:{for(var l=0,g=0;g<this.l.length;g++){var C=this.l[g];if(void 0===(C="__data__"in C.g&&"string"==typeof(C=C.g.__data__)?C.length:void 0))break;if(4096<(l+=C)){l=g;break e}if(4096===l||g===this.l.length-1){l=g+1;break e}}l=1e3}else l=1e3;l=tr(this,t,l),ee(g=Z(this.F),"RID",o),ee(g,"CVER",22),this.D&&ee(g,"X-HTTP-Session-Id",this.D),Mn(this,g),this.o&&s&&ci(g,this.o,s),br(this.i,t),this.Ra&&ee(g,"TYPE","init"),this.ja?(ee(g,"$req",l),ee(g,"SID","null"),t.$=!0,ie(t,g,null)):ie(t,g,l),this.G=2}}else 3==this.G&&(o?Cn(this,o):0==this.l.length||mu(this.i)||Cn(this))},wt.Ga=function(){if(this.u=null,Zi(this),this.$&&!(this.L||null==this.g||0>=this.O)){var o=2*this.O;this.h.info("BP detection timer enabled: "+o),this.B=Bi(Sn(this.bb,this),o)}},wt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Nr(10),Ps(this),Zi(this))},wt.ab=function(){null!=this.v&&(this.v=null,Ps(this),Zr(this),Nr(19))},wt.jb=function(o){o?(this.h.info("Successfully pinged google.com"),Nr(2)):(this.h.info("Failed to ping google.com"),Nr(1))},(wt=ws.prototype).xa=function(){},wt.wa=function(){},wt.va=function(){},wt.ua=function(){},wt.Oa=function(){},ba.prototype.g=function(o,t){return new zi(o,t)},Bt(zi,ln),zi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var o=this.g,t=this.l,s=this.h||void 0;o.Wa&&(o.h.info("Origin Trials enabled."),Pn(Sn(o.hb,o,t))),Nr(0),o.W=t,o.aa=s||{},o.N=o.X,o.F=ro(o,null,o.W),no(o)},zi.prototype.close=function(){to(this.g)},zi.prototype.u=function(o){if("string"==typeof o){var t={};t.__data__=o,yi(this.g,t)}else this.v?((t={}).__data__=wi(o),yi(this.g,t)):yi(this.g,o)},zi.prototype.M=function(){this.g.j=null,delete this.j,to(this.g),delete this.g,zi.Z.M.call(this)},Bt(_u,mi),Bt(na,Ai),Bt(Ca,ws),Ca.prototype.xa=function(){xn(this.g,"a")},Ca.prototype.wa=function(o){xn(this.g,new _u(o))},Ca.prototype.va=function(o){xn(this.g,new na(o))},Ca.prototype.ua=function(){xn(this.g,"b")},ba.prototype.createWebChannel=ba.prototype.g,zi.prototype.send=zi.prototype.u,zi.prototype.open=zi.prototype.m,zi.prototype.close=zi.prototype.close,Oo.NO_ERROR=0,Oo.TIMEOUT=8,Oo.HTTP_ERROR=6,Do.COMPLETE="complete",Vo.EventType=xo,xo.OPEN="a",xo.CLOSE="b",xo.ERROR="c",xo.MESSAGE="d",ln.prototype.listen=ln.prototype.N,mt.prototype.listenOnce=mt.prototype.O,mt.prototype.getLastError=mt.prototype.La,mt.prototype.getLastErrorCode=mt.prototype.Da,mt.prototype.getStatus=mt.prototype.ba,mt.prototype.getResponseJson=mt.prototype.Qa,mt.prototype.getResponseText=mt.prototype.ga,mt.prototype.send=mt.prototype.ea;var ra=Oo,Zu=Do,$a=Ui,ia_PROXY=10,ia_NOPROXY=11,vu=I,wa=Vo,Wa=mt,Ho=function(){function o(t,s){var l=this;this.previousValue=t,s&&(s.sequenceNumberHandler=function(g){return l.t(g)},this.i=function(g){return s.writeSequenceNumber(g)})}return o.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},o.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},o}();Ho.o=-1;var gt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Lt=function(o){function t(s,l){var g=this;return(g=o.call(this,l)||this).code=s,g.message=l,g.name="FirebaseError",g.toString=function(){return g.name+": [code="+g.code+"]: "+g.message},g}return(0,X.ZT)(t,o),t}(Error),ps=new _t.Yd("@firebase/firestore");function Ta(){return ps.logLevel}function rn(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(ps.logLevel<=_t.in.DEBUG){var l=t.map(Ka);ps.debug.apply(ps,(0,X.ev)(["Firestore (8.10.0): "+o],l))}}function $i(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(ps.logLevel<=_t.in.ERROR){var l=t.map(Ka);ps.error.apply(ps,(0,X.ev)(["Firestore (8.10.0): "+o],l))}}function Jo(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(ps.logLevel<=_t.in.WARN){var l=t.map(Ka);ps.warn.apply(ps,(0,X.ev)(["Firestore (8.10.0): "+o],l))}}function Ka(o){if("string"==typeof o)return o;try{return JSON.stringify(o)}catch(s){return o}}function Nn(o){void 0===o&&(o="Unexpected state");var t="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+o;throw $i(t),new Error(t)}function nr(o,t){o||Nn()}function on(o,t){return o}function Yl(o){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),s=new Uint8Array(o);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(s);else for(var l=0;l<o;l++)s[l]=Math.floor(256*Math.random());return s}var Kl=function(){function o(){}return o.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/t.length)*t.length,l="";l.length<20;)for(var g=Yl(40),C=0;C<g.length;++C)l.length<20&&g[C]<s&&(l+=t.charAt(g[C]%t.length));return l},o}();function Tr(o,t){return o<t?-1:o>t?1:0}function Qa(o,t,s){return o.length===t.length&&o.every(function(l,g){return s(l,t[g])})}function Ac(o){return o+"\0"}var U=function(){function o(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new Lt(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Lt(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<-62135596800)throw new Lt(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Lt(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return o.now=function(){return o.fromMillis(Date.now())},o.fromDate=function(t){return o.fromMillis(t.getTime())},o.fromMillis=function(t){var s=Math.floor(t/1e3);return new o(s,Math.floor(1e6*(t-1e3*s)))},o.prototype.toDate=function(){return new Date(this.toMillis())},o.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},o.prototype._compareTo=function(t){return this.seconds===t.seconds?Tr(this.nanoseconds,t.nanoseconds):Tr(this.seconds,t.seconds)},o.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},o.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},o.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},o.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},o}(),x=function(){function o(t){this.timestamp=t}return o.fromTimestamp=function(t){return new o(t)},o.min=function(){return new o(new U(0,0))},o.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},o.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},o.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},o.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},o.prototype.toTimestamp=function(){return this.timestamp},o}();function O(o){var t=0;for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&t++;return t}function z(o,t){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&t(s,o[s])}function te(o){for(var t in o)if(Object.prototype.hasOwnProperty.call(o,t))return!1;return!0}var le=function(){function o(t,s,l){void 0===s?s=0:s>t.length&&Nn(),void 0===l?l=t.length-s:l>t.length-s&&Nn(),this.segments=t,this.offset=s,this.len=l}return Object.defineProperty(o.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return 0===o.comparator(this,t)},o.prototype.child=function(t){var s=this.segments.slice(this.offset,this.limit());return t instanceof o?t.forEach(function(l){s.push(l)}):s.push(t),this.construct(s)},o.prototype.limit=function(){return this.offset+this.length},o.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},o.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},o.prototype.firstSegment=function(){return this.segments[this.offset]},o.prototype.lastSegment=function(){return this.get(this.length-1)},o.prototype.get=function(t){return this.segments[this.offset+t]},o.prototype.isEmpty=function(){return 0===this.length},o.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0},o.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0},o.prototype.forEach=function(t){for(var s=this.offset,l=this.limit();s<l;s++)t(this.segments[s])},o.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},o.comparator=function(t,s){for(var l=Math.min(t.length,s.length),g=0;g<l;g++){var C=t.get(g),S=s.get(g);if(C<S)return-1;if(C>S)return 1}return t.length<s.length?-1:t.length>s.length?1:0},o}(),Te=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,X.ZT)(t,o),t.prototype.construct=function(s,l,g){return new t(s,l,g)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];for(var g=[],C=0,S=s;C<S.length;C++){var k=S[C];if(k.indexOf("//")>=0)throw new Lt(gt.INVALID_ARGUMENT,"Invalid segment ("+k+"). Paths must not contain // in them.");g.push.apply(g,k.split("/").filter(function(K){return K.length>0}))}return new t(g)},t.emptyPath=function(){return new t([])},t}(le),Ge=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Tt=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,X.ZT)(t,o),t.prototype.construct=function(s,l,g){return new t(s,l,g)},t.isValidIdentifier=function(s){return Ge.test(s)},t.prototype.canonicalString=function(){return this.toArray().map(function(s){return s=s.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(s)||(s="`"+s+"`"),s}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(s){for(var l=[],g="",C=0,S=function(){if(0===g.length)throw new Lt(gt.INVALID_ARGUMENT,"Invalid field path ("+s+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");l.push(g),g=""},k=!1;C<s.length;){var K=s[C];if("\\"===K){if(C+1===s.length)throw new Lt(gt.INVALID_ARGUMENT,"Path has trailing escape character: "+s);var ue=s[C+1];if("\\"!==ue&&"."!==ue&&"`"!==ue)throw new Lt(gt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+s);g+=ue,C+=2}else"`"===K?(k=!k,C++):"."!==K||k?(g+=K,C++):(S(),C++)}if(S(),k)throw new Lt(gt.INVALID_ARGUMENT,"Unterminated ` in path: "+s);return new t(l)},t.emptyPath=function(){return new t([])},t}(le),hn=function(){function o(t){this.fields=t,t.sort(Tt.comparator)}return o.prototype.covers=function(t){for(var s=0,l=this.fields;s<l.length;s++)if(l[s].isPrefixOf(t))return!0;return!1},o.prototype.isEqual=function(t){return Qa(this.fields,t.fields,function(s,l){return s.isEqual(l)})},o}(),ur=function(){function o(t){this.binaryString=t}return o.fromBase64String=function(t){return new o(atob(t))},o.fromUint8Array=function(t){return new o(function(s){for(var l="",g=0;g<s.length;++g)l+=String.fromCharCode(s[g]);return l}(t))},o.prototype.toBase64=function(){return btoa(this.binaryString)},o.prototype.toUint8Array=function(){return function(t){for(var s=new Uint8Array(t.length),l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s}(this.binaryString)},o.prototype.approximateByteSize=function(){return 2*this.binaryString.length},o.prototype.compareTo=function(t){return Tr(this.binaryString,t.binaryString)},o.prototype.isEqual=function(t){return this.binaryString===t.binaryString},o}();ur.EMPTY_BYTE_STRING=new ur("");var Wn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(o){if(nr(!!o),"string"==typeof o){var t=0,s=Wn.exec(o);if(nr(!!s),s[1]){var l=s[1];l=(l+"000000000").substr(0,9),t=Number(l)}var g=new Date(o);return{seconds:Math.floor(g.getTime()/1e3),nanos:t}}return{seconds:jn(o.seconds),nanos:jn(o.nanos)}}function jn(o){return"number"==typeof o?o:"string"==typeof o?Number(o):0}function vo(o){return"string"==typeof o?ur.fromBase64String(o):ur.fromUint8Array(o)}function os(o){var t,s;return"server_timestamp"===(null===(s=((null===(t=null==o?void 0:o.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===s?void 0:s.stringValue)}function oo(o){var t=o.mapValue.fields.__previous_value__;return os(t)?oo(t):t}function Ws(o){var t=xr(o.mapValue.fields.__local_write_time__.timestampValue);return new U(t.seconds,t.nanos)}function ss(o){return null==o}function as(o){return 0===o&&1/o==-1/0}function oa(o){return"number"==typeof o&&Number.isInteger(o)&&!as(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER}var Jn=function(){function o(t){this.path=t}return o.fromPath=function(t){return new o(Te.fromString(t))},o.fromName=function(t){return new o(Te.fromString(t).popFirst(5))},o.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},o.prototype.isEqual=function(t){return null!==t&&0===Te.comparator(this.path,t.path)},o.prototype.toString=function(){return this.path.toString()},o.comparator=function(t,s){return Te.comparator(t.path,s.path)},o.isDocumentKey=function(t){return t.length%2==0},o.fromSegments=function(t){return new o(new Te(t.slice()))},o}();function Ti(o){return"nullValue"in o?0:"booleanValue"in o?1:"integerValue"in o||"doubleValue"in o?2:"timestampValue"in o?3:"stringValue"in o?5:"bytesValue"in o?6:"referenceValue"in o?7:"geoPointValue"in o?8:"arrayValue"in o?9:"mapValue"in o?os(o)?4:10:Nn()}function sa(o,t){var g,s=Ti(o);if(s!==Ti(t))return!1;switch(s){case 0:return!0;case 1:return o.booleanValue===t.booleanValue;case 4:return Ws(o).isEqual(Ws(t));case 3:return function(l,g){if("string"==typeof l.timestampValue&&"string"==typeof g.timestampValue&&l.timestampValue.length===g.timestampValue.length)return l.timestampValue===g.timestampValue;var C=xr(l.timestampValue),S=xr(g.timestampValue);return C.seconds===S.seconds&&C.nanos===S.nanos}(o,t);case 5:return o.stringValue===t.stringValue;case 6:return g=t,vo(o.bytesValue).isEqual(vo(g.bytesValue));case 7:return o.referenceValue===t.referenceValue;case 8:return function(l,g){return jn(l.geoPointValue.latitude)===jn(g.geoPointValue.latitude)&&jn(l.geoPointValue.longitude)===jn(g.geoPointValue.longitude)}(o,t);case 2:return function(l,g){if("integerValue"in l&&"integerValue"in g)return jn(l.integerValue)===jn(g.integerValue);if("doubleValue"in l&&"doubleValue"in g){var C=jn(l.doubleValue),S=jn(g.doubleValue);return C===S?as(C)===as(S):isNaN(C)&&isNaN(S)}return!1}(o,t);case 9:return Qa(o.arrayValue.values||[],t.arrayValue.values||[],sa);case 10:return function(l,g){var C=l.mapValue.fields||{},S=g.mapValue.fields||{};if(O(C)!==O(S))return!1;for(var k in C)if(C.hasOwnProperty(k)&&(void 0===S[k]||!sa(C[k],S[k])))return!1;return!0}(o,t);default:return Nn()}}function qu(o,t){return void 0!==(o.values||[]).find(function(s){return sa(s,t)})}function Ja(o,t){var g,C,S,k,s=Ti(o),l=Ti(t);if(s!==l)return Tr(s,l);switch(s){case 0:return 0;case 1:return Tr(o.booleanValue,t.booleanValue);case 2:return C=t,(S=jn((g=o).integerValue||g.doubleValue))<(k=jn(C.integerValue||C.doubleValue))?-1:S>k?1:S===k?0:isNaN(S)?isNaN(k)?0:-1:1;case 3:return Mc(o.timestampValue,t.timestampValue);case 4:return Mc(Ws(o),Ws(t));case 5:return Tr(o.stringValue,t.stringValue);case 6:return function(g,C){var S=vo(g),k=vo(C);return S.compareTo(k)}(o.bytesValue,t.bytesValue);case 7:return function(g,C){for(var S=g.split("/"),k=C.split("/"),K=0;K<S.length&&K<k.length;K++){var ue=Tr(S[K],k[K]);if(0!==ue)return ue}return Tr(S.length,k.length)}(o.referenceValue,t.referenceValue);case 8:return function(g,C){var S=Tr(jn(g.latitude),jn(C.latitude));return 0!==S?S:Tr(jn(g.longitude),jn(C.longitude))}(o.geoPointValue,t.geoPointValue);case 9:return function(g,C){for(var S=g.values||[],k=C.values||[],K=0;K<S.length&&K<k.length;++K){var ue=Ja(S[K],k[K]);if(ue)return ue}return Tr(S.length,k.length)}(o.arrayValue,t.arrayValue);case 10:return function(g,C){var S=g.fields||{},k=Object.keys(S),K=C.fields||{},ue=Object.keys(K);k.sort(),ue.sort();for(var de=0;de<k.length&&de<ue.length;++de){var Me=Tr(k[de],ue[de]);if(0!==Me)return Me;var Be=Ja(S[k[de]],K[ue[de]]);if(0!==Be)return Be}return Tr(k.length,ue.length)}(o.mapValue,t.mapValue);default:throw Nn()}}function Mc(o,t){if("string"==typeof o&&"string"==typeof t&&o.length===t.length)return Tr(o,t);var s=xr(o),l=xr(t),g=Tr(s.seconds,l.seconds);return 0!==g?g:Tr(s.nanos,l.nanos)}function cd(o){return Ic(o)}function Ic(o){return"nullValue"in o?"null":"booleanValue"in o?""+o.booleanValue:"integerValue"in o?""+o.integerValue:"doubleValue"in o?""+o.doubleValue:"timestampValue"in o?"time("+(g=xr(o.timestampValue)).seconds+","+g.nanos+")":"stringValue"in o?o.stringValue:"bytesValue"in o?vo(o.bytesValue).toBase64():"referenceValue"in o?Jn.fromName(o.referenceValue).toString():"geoPointValue"in o?"geo("+(t=o.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in o?function(l){for(var g="[",C=!0,S=0,k=l.values||[];S<k.length;S++)C?C=!1:g+=",",g+=Ic(k[S]);return g+"]"}(o.arrayValue):"mapValue"in o?function(l){for(var g="{",C=!0,S=0,k=Object.keys(l.fields||{}).sort();S<k.length;S++){var K=k[S];C?C=!1:g+=",",g+=K+":"+Ic(l.fields[K])}return g+"}"}(o.mapValue):Nn();var g,t}function Xa(o,t){return{referenceValue:"projects/"+o.projectId+"/databases/"+o.database+"/documents/"+t.path.canonicalString()}}function Da(o){return!!o&&"integerValue"in o}function Oc(o){return!!o&&"arrayValue"in o}function ah(o){return!!o&&"nullValue"in o}function ks(o){return!!o&&"doubleValue"in o&&isNaN(Number(o.doubleValue))}function Fs(o){return!!o&&"mapValue"in o}function yu(o){if(o.geoPointValue)return{geoPointValue:Object.assign({},o.geoPointValue)};if(o.timestampValue&&"object"==typeof o.timestampValue)return{timestampValue:Object.assign({},o.timestampValue)};if(o.mapValue){var t={mapValue:{fields:{}}};return z(o.mapValue.fields,function(g,C){return t.mapValue.fields[g]=yu(C)}),t}if(o.arrayValue){for(var s={arrayValue:{values:[]}},l=0;l<(o.arrayValue.values||[]).length;++l)s.arrayValue.values[l]=yu(o.arrayValue.values[l]);return s}return Object.assign({},o)}var di=function(){function o(t){this.value=t}return o.empty=function(){return new o({mapValue:{}})},o.prototype.field=function(t){if(t.isEmpty())return this.value;for(var s=this.value,l=0;l<t.length-1;++l)if(!Fs(s=(s.mapValue.fields||{})[t.get(l)]))return null;return(s=(s.mapValue.fields||{})[t.lastSegment()])||null},o.prototype.set=function(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=yu(s)},o.prototype.setAll=function(t){var s=this,l=Tt.emptyPath(),g={},C=[];t.forEach(function(k,K){if(!l.isImmediateParentOf(K)){var ue=s.getFieldsMap(l);s.applyChanges(ue,g,C),g={},C=[],l=K.popLast()}k?g[K.lastSegment()]=yu(k):C.push(K.lastSegment())});var S=this.getFieldsMap(l);this.applyChanges(S,g,C)},o.prototype.delete=function(t){var s=this.field(t.popLast());Fs(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]},o.prototype.isEqual=function(t){return sa(this.value,t.value)},o.prototype.getFieldsMap=function(t){var s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(var l=0;l<t.length;++l){var g=s.mapValue.fields[t.get(l)];Fs(g)&&g.mapValue.fields||(g={mapValue:{fields:{}}},s.mapValue.fields[t.get(l)]=g),s=g}return s.mapValue.fields},o.prototype.applyChanges=function(t,s,l){z(s,function(k,K){return t[k]=K});for(var g=0,C=l;g<C.length;g++)delete t[C[g]]},o.prototype.clone=function(){return new o(yu(this.value))},o}();function vl(o){var t=[];return z(o.fields,function(s,l){var g=new Tt([s]);if(Fs(l)){var C=vl(l.mapValue).fields;if(0===C.length)t.push(g);else for(var S=0,k=C;S<k.length;S++)t.push(g.child(k[S]))}else t.push(g)}),new hn(t)}var ki=function(){function o(t,s,l,g,C){this.key=t,this.documentType=s,this.version=l,this.data=g,this.documentState=C}return o.newInvalidDocument=function(t){return new o(t,0,x.min(),di.empty(),0)},o.newFoundDocument=function(t,s,l){return new o(t,1,s,l,0)},o.newNoDocument=function(t,s){return new o(t,2,s,di.empty(),0)},o.newUnknownDocument=function(t,s){return new o(t,3,s,di.empty(),2)},o.prototype.convertToFoundDocument=function(t,s){return this.version=t,this.documentType=1,this.data=s,this.documentState=0,this},o.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=di.empty(),this.documentState=0,this},o.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=di.empty(),this.documentState=2,this},o.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},o.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(o.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),o.prototype.isValidDocument=function(){return 0!==this.documentType},o.prototype.isFoundDocument=function(){return 1===this.documentType},o.prototype.isNoDocument=function(){return 2===this.documentType},o.prototype.isUnknownDocument=function(){return 3===this.documentType},o.prototype.isEqual=function(t){return t instanceof o&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},o.prototype.clone=function(){return new o(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},o.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},o}(),so=function(o,t,s,l,g,C,S){void 0===t&&(t=null),void 0===s&&(s=[]),void 0===l&&(l=[]),void 0===g&&(g=null),void 0===C&&(C=null),void 0===S&&(S=null),this.path=o,this.collectionGroup=t,this.orderBy=s,this.filters=l,this.limit=g,this.startAt=C,this.endAt=S,this.h=null};function Ql(o,t,s,l,g,C,S){return void 0===t&&(t=null),void 0===s&&(s=[]),void 0===l&&(l=[]),void 0===g&&(g=null),void 0===C&&(C=null),void 0===S&&(S=null),new so(o,t,s,l,g,C,S)}function Xo(o){var t=on(o);if(null===t.h){var s=t.path.canonicalString();null!==t.collectionGroup&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map(function(l){return(g=l).field.canonicalString()+g.op.toString()+cd(g.value);var g}).join(","),s+="|ob:",s+=t.orderBy.map(function(l){return(g=l).field.canonicalString()+g.dir;var g}).join(","),ss(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=aa(t.startAt)),t.endAt&&(s+="|ub:",s+=aa(t.endAt)),t.h=s}return t.h}function yo(o,t){if(o.limit!==t.limit||o.orderBy.length!==t.orderBy.length)return!1;for(var s=0;s<o.orderBy.length;s++)if(!Pc(o.orderBy[s],t.orderBy[s]))return!1;if(o.filters.length!==t.filters.length)return!1;for(var l=0;l<o.filters.length;l++)if((g=o.filters[l]).op!==(C=t.filters[l]).op||!g.field.isEqual(C.field)||!sa(g.value,C.value))return!1;var g,C;return o.collectionGroup===t.collectionGroup&&!!o.path.isEqual(t.path)&&!!$u(o.startAt,t.startAt)&&$u(o.endAt,t.endAt)}function Ys(o){return Jn.isDocumentKey(o.path)&&null===o.collectionGroup&&0===o.filters.length}var Ao=function(o){function t(s,l,g){var C=this;return(C=o.call(this)||this).field=s,C.op=l,C.value=g,C}return(0,X.ZT)(t,o),t.create=function(s,l,g){return s.isKeyField()?"in"===l||"not-in"===l?this.l(s,l,g):new eu(s,l,g):"array-contains"===l?new Vh(s,g):"in"===l?new uh(s,g):"not-in"===l?new yl(s,g):"array-contains-any"===l?new Es(s,g):new t(s,l,g)},t.l=function(s,l,g){return"in"===l?new dd(s,g):new xc(s,g)},t.prototype.matches=function(s){var l=s.data.field(this.field);return"!="===this.op?null!==l&&this.m(Ja(l,this.value)):null!==l&&Ti(this.value)===Ti(l)&&this.m(Ja(l,this.value))},t.prototype.m=function(s){switch(this.op){case"<":return s<0;case"<=":return s<=0;case"==":return 0===s;case"!=":return 0!==s;case">":return s>0;case">=":return s>=0;default:return Nn()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),eu=function(o){function t(s,l,g){var C=this;return(C=o.call(this,s,l,g)||this).key=Jn.fromName(g.referenceValue),C}return(0,X.ZT)(t,o),t.prototype.matches=function(s){var l=Jn.comparator(s.key,this.key);return this.m(l)},t}(Ao),dd=function(o){function t(s,l){var g=this;return(g=o.call(this,s,"in",l)||this).keys=hd(0,l),g}return(0,X.ZT)(t,o),t.prototype.matches=function(s){return this.keys.some(function(l){return l.isEqual(s.key)})},t}(Ao),xc=function(o){function t(s,l){var g=this;return(g=o.call(this,s,"not-in",l)||this).keys=hd(0,l),g}return(0,X.ZT)(t,o),t.prototype.matches=function(s){return!this.keys.some(function(l){return l.isEqual(s.key)})},t}(Ao);function hd(o,t){var s;return((null===(s=t.arrayValue)||void 0===s?void 0:s.values)||[]).map(function(l){return Jn.fromName(l.referenceValue)})}var Vh=function(o){function t(s,l){return o.call(this,s,"array-contains",l)||this}return(0,X.ZT)(t,o),t.prototype.matches=function(s){var l=s.data.field(this.field);return Oc(l)&&qu(l.arrayValue,this.value)},t}(Ao),uh=function(o){function t(s,l){return o.call(this,s,"in",l)||this}return(0,X.ZT)(t,o),t.prototype.matches=function(s){var l=s.data.field(this.field);return null!==l&&qu(this.value.arrayValue,l)},t}(Ao),yl=function(o){function t(s,l){return o.call(this,s,"not-in",l)||this}return(0,X.ZT)(t,o),t.prototype.matches=function(s){if(qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var l=s.data.field(this.field);return null!==l&&!qu(this.value.arrayValue,l)},t}(Ao),Es=function(o){function t(s,l){return o.call(this,s,"array-contains-any",l)||this}return(0,X.ZT)(t,o),t.prototype.matches=function(s){var l=this,g=s.data.field(this.field);return!(!Oc(g)||!g.arrayValue.values)&&g.arrayValue.values.some(function(C){return qu(l.value.arrayValue,C)})},t}(Ao),Ns=function(o,t){this.position=o,this.before=t};function aa(o){return(o.before?"b":"a")+":"+o.position.map(function(t){return cd(t)}).join(",")}var zu=function(o,t){void 0===t&&(t="asc"),this.field=o,this.dir=t};function Pc(o,t){return o.dir===t.dir&&o.field.isEqual(t.field)}function bl(o,t,s){for(var l=0,g=0;g<o.position.length;g++){var C=t[g],S=o.position[g];if(l=C.field.isKeyField()?Jn.comparator(Jn.fromName(S.referenceValue),s.key):Ja(S,s.data.field(C.field)),"desc"===C.dir&&(l*=-1),0!==l)break}return o.before?l<=0:l<0}function $u(o,t){if(null===o)return null===t;if(null===t||o.before!==t.before||o.position.length!==t.position.length)return!1;for(var s=0;s<o.position.length;s++)if(!sa(o.position[s],t.position[s]))return!1;return!0}var ua=function(o,t,s,l,g,C,S,k){void 0===t&&(t=null),void 0===s&&(s=[]),void 0===l&&(l=[]),void 0===g&&(g=null),void 0===C&&(C="F"),void 0===S&&(S=null),void 0===k&&(k=null),this.path=o,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=l,this.limit=g,this.limitType=C,this.startAt=S,this.endAt=k,this.p=null,this.T=null};function Jl(o,t,s,l,g,C,S,k){return new ua(o,t,s,l,g,C,S,k)}function Ks(o){return new ua(o)}function bu(o){return!ss(o.limit)&&"F"===o.limitType}function Sa(o){return!ss(o.limit)&&"L"===o.limitType}function Cl(o){return o.explicitOrderBy.length>0?o.explicitOrderBy[0].field:null}function fd(o){for(var t=0,s=o.filters;t<s.length;t++){var l=s[t];if(l.g())return l.field}return null}function tu(o){return null!==o.collectionGroup}function Cu(o){var t=on(o);if(null===t.p){t.p=[];var s=fd(t),l=Cl(t);if(null!==s&&null===l)s.isKeyField()||t.p.push(new zu(s)),t.p.push(new zu(Tt.keyField(),"asc"));else{for(var g=!1,C=0,S=t.explicitOrderBy;C<S.length;C++){var k=S[C];t.p.push(k),k.field.isKeyField()&&(g=!0)}if(!g){var K=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new zu(Tt.keyField(),K))}}}return t.p}function ko(o){var t=on(o);if(!t.T)if("F"===t.limitType)t.T=Ql(t.path,t.collectionGroup,Cu(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var s=[],l=0,g=Cu(t);l<g.length;l++){var C=g[l];s.push(new zu(C.field,"desc"===C.dir?"asc":"desc"))}var k=t.endAt?new Ns(t.endAt.position,!t.endAt.before):null,K=t.startAt?new Ns(t.startAt.position,!t.startAt.before):null;t.T=Ql(t.path,t.collectionGroup,s,t.filters,t.limit,k,K)}return t.T}function pd(o,t,s){return new ua(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),t,s,o.startAt,o.endAt)}function wu(o,t){return yo(ko(o),ko(t))&&o.limitType===t.limitType}function lh(o){return Xo(ko(o))+"|lt:"+o.limitType}function Wu(o){return"Query(target="+(s=(t=ko(o)).path.canonicalString(),null!==t.collectionGroup&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=", filters: ["+t.filters.map(function(l){return(g=l).field.canonicalString()+" "+g.op+" "+cd(g.value);var g}).join(", ")+"]"),ss(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=", orderBy: ["+t.orderBy.map(function(l){return(g=l).field.canonicalString()+" ("+g.dir+")";var g}).join(", ")+"]"),t.startAt&&(s+=", startAt: "+aa(t.startAt)),t.endAt&&(s+=", endAt: "+aa(t.endAt)),"Target("+s+"); limitType=")+o.limitType+")";var t,s}function Xl(o,t){return t.isFoundDocument()&&(g=(l=t).key.path,null!==(s=o).collectionGroup?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(g):Jn.isDocumentKey(s.path)?s.path.isEqual(g):s.path.isImmediateParentOf(g))&&function(s,l){for(var g=0,C=s.explicitOrderBy;g<C.length;g++){var S=C[g];if(!S.field.isKeyField()&&null===l.data.field(S.field))return!1}return!0}(o,t)&&function(s,l){for(var g=0,C=s.filters;g<C.length;g++)if(!C[g].matches(l))return!1;return!0}(o,t)&&function(s,l){return!(s.startAt&&!bl(s.startAt,Cu(s),l)||s.endAt&&bl(s.endAt,Cu(s),l))}(o,t);var s,l,g}function Eu(o){return function(t,s){for(var l=!1,g=0,C=Cu(o);g<C.length;g++){var S=C[g],k=Tu(S,t,s);if(0!==k)return k;l=l||S.field.isKeyField()}return 0}}function Tu(o,t,s){var g,S,k,K,l=o.field.isKeyField()?Jn.comparator(t.key,s.key):(S=s,k=t.data.field(g=o.field),K=S.data.field(g),null!==k&&null!==K?Ja(k,K):Nn());switch(o.dir){case"asc":return l;case"desc":return-1*l;default:return Nn()}}function la(o,t){if(o.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:as(t)?"-0":t}}function wl(o){return{integerValue:""+o}}function Di(o,t){return oa(t)?wl(t):la(o,t)}var Aa=function(){this._=void 0};function gd(o,t,s){return o instanceof Du?(C={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(l=s).seconds,nanos:l.nanoseconds}}}},(g=t)&&(C.fields.__previous_value__=g),{mapValue:C}):o instanceof nu?Su(o,t):o instanceof ru?Yu(o,t):function(l,g){var C=Ia(l,g),S=Ku(C)+Ku(l.A);return Da(C)&&Da(l.A)?wl(S):la(l.R,S)}(o,t);var l,g,C}function Ma(o,t,s){return o instanceof nu?Su(o,t):o instanceof ru?Yu(o,t):s}function Ia(o,t){return o instanceof gs?Da(s=t)||(l=s)&&"doubleValue"in l?t:{integerValue:0}:null;var l,s}var Du=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,X.ZT)(t,o),t}(Aa),nu=function(o){function t(s){var l=this;return(l=o.call(this)||this).elements=s,l}return(0,X.ZT)(t,o),t}(Aa);function Su(o,t){for(var s=Ls(t),l=function(S){s.some(function(k){return sa(k,S)})||s.push(S)},g=0,C=o.elements;g<C.length;g++)l(C[g]);return{arrayValue:{values:s}}}var ru=function(o){function t(s){var l=this;return(l=o.call(this)||this).elements=s,l}return(0,X.ZT)(t,o),t}(Aa);function Yu(o,t){for(var s=Ls(t),l=function(S){s=s.filter(function(k){return!sa(k,S)})},g=0,C=o.elements;g<C.length;g++)l(C[g]);return{arrayValue:{values:s}}}var gs=function(o){function t(s,l){var g=this;return(g=o.call(this)||this).R=s,g.A=l,g}return(0,X.ZT)(t,o),t}(Aa);function Ku(o){return jn(o.integerValue||o.doubleValue)}function Ls(o){return Oc(o)&&o.arrayValue.values?o.arrayValue.values.slice():[]}var iu=function(o,t){this.field=o,this.transform=t},Rc=function(o,t){this.version=o,this.transformResults=t},Fo=function(){function o(t,s){this.updateTime=t,this.exists=s}return o.none=function(){return new o},o.exists=function(t){return new o(void 0,t)},o.updateTime=function(t){return new o(t)},Object.defineProperty(o.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},o}();function Us(o,t){return void 0!==o.updateTime?t.isFoundDocument()&&t.version.isEqual(o.updateTime):void 0===o.exists||o.exists===t.isFoundDocument()}var us=function(){};function El(o,t,s){var l,g,C,S,k;o instanceof su?(g=t,C=s,S=(l=o).value.clone(),k=Vs(l.fieldTransforms,g,C.transformResults),S.setAll(k),g.convertToFoundDocument(C.version,S).setHasCommittedMutations()):o instanceof Ts?function(l,g,C){if(Us(l.precondition,g)){var S=Vs(l.fieldTransforms,g,C.transformResults),k=g.data;k.setAll(md(l)),k.setAll(S),g.convertToFoundDocument(C.version,k).setHasCommittedMutations()}else g.convertToUnknownDocument(C.version)}(o,t,s):function(l,g,C){g.convertToNoDocument(C.version).setHasCommittedMutations()}(0,t,s)}function kc(o,t,s){var g;o instanceof su?function(l,g,C){if(Us(l.precondition,g)){var S=l.value.clone(),k=_d(l.fieldTransforms,C,g);S.setAll(k),g.convertToFoundDocument(ec(g),S).setHasLocalMutations()}}(o,t,s):o instanceof Ts?function(l,g,C){if(Us(l.precondition,g)){var S=_d(l.fieldTransforms,C,g),k=g.data;k.setAll(md(l)),k.setAll(S),g.convertToFoundDocument(ec(g),k).setHasLocalMutations()}}(o,t,s):Us(o.precondition,g=t)&&g.convertToNoDocument(x.min())}function ca(o,t){for(var s=null,l=0,g=o.fieldTransforms;l<g.length;l++){var C=g[l],S=t.data.field(C.field),k=Ia(C.transform,S||null);null!=k&&(null==s&&(s=di.empty()),s.set(C.field,k))}return s||null}function ou(o,t){return o.type===t.type&&!!o.key.isEqual(t.key)&&!!o.precondition.isEqual(t.precondition)&&(l=t.fieldTransforms,!!(void 0===(s=o.fieldTransforms)&&void 0===l||s&&l&&Qa(s,l,function(g,C){return(S=g).field.isEqual((k=C).field)&&(ue=k.transform,(K=S.transform)instanceof nu&&ue instanceof nu||K instanceof ru&&ue instanceof ru?Qa(K.elements,ue.elements,sa):K instanceof gs&&ue instanceof gs?sa(K.A,ue.A):K instanceof Du&&ue instanceof Du);var S,k,K,ue})))&&(0===o.type?o.value.isEqual(t.value):1!==o.type||o.data.isEqual(t.data)&&o.fieldMask.isEqual(t.fieldMask));var s,l}function ec(o){return o.isFoundDocument()?o.version:x.min()}var su=function(o){function t(s,l,g,C){void 0===C&&(C=[]);var S=this;return(S=o.call(this)||this).key=s,S.value=l,S.precondition=g,S.fieldTransforms=C,S.type=0,S}return(0,X.ZT)(t,o),t}(us),Ts=function(o){function t(s,l,g,C,S){void 0===S&&(S=[]);var k=this;return(k=o.call(this)||this).key=s,k.data=l,k.fieldMask=g,k.precondition=C,k.fieldTransforms=S,k.type=1,k}return(0,X.ZT)(t,o),t}(us);function md(o){var t=new Map;return o.fieldMask.fields.forEach(function(s){if(!s.isEmpty()){var l=o.data.field(s);t.set(s,l)}}),t}function Vs(o,t,s){var l=new Map;nr(o.length===s.length);for(var g=0;g<s.length;g++){var C=o[g],S=C.transform,k=t.data.field(C.field);l.set(C.field,Ma(S,k,s[g]))}return l}function _d(o,t,s){for(var l=new Map,g=0,C=o;g<C.length;g++){var S=C[g],k=S.transform,K=s.data.field(S.field);l.set(S.field,gd(k,K,t))}return l}var bo,Qr,da=function(o){function t(s,l){var g=this;return(g=o.call(this)||this).key=s,g.precondition=l,g.type=2,g.fieldTransforms=[],g}return(0,X.ZT)(t,o),t}(us),Qu=function(o){function t(s,l){var g=this;return(g=o.call(this)||this).key=s,g.precondition=l,g.type=3,g.fieldTransforms=[],g}return(0,X.ZT)(t,o),t}(us),No=function(o){this.count=o};function Fc(o){switch(o){case gt.OK:return Nn();case gt.CANCELLED:case gt.UNKNOWN:case gt.DEADLINE_EXCEEDED:case gt.RESOURCE_EXHAUSTED:case gt.INTERNAL:case gt.UNAVAILABLE:case gt.UNAUTHENTICATED:return!1;case gt.INVALID_ARGUMENT:case gt.NOT_FOUND:case gt.ALREADY_EXISTS:case gt.PERMISSION_DENIED:case gt.FAILED_PRECONDITION:case gt.ABORTED:case gt.OUT_OF_RANGE:case gt.UNIMPLEMENTED:case gt.DATA_LOSS:return!0;default:return Nn()}}function vd(o){if(void 0===o)return $i("GRPC error has no .code"),gt.UNKNOWN;switch(o){case bo.OK:return gt.OK;case bo.CANCELLED:return gt.CANCELLED;case bo.UNKNOWN:return gt.UNKNOWN;case bo.DEADLINE_EXCEEDED:return gt.DEADLINE_EXCEEDED;case bo.RESOURCE_EXHAUSTED:return gt.RESOURCE_EXHAUSTED;case bo.INTERNAL:return gt.INTERNAL;case bo.UNAVAILABLE:return gt.UNAVAILABLE;case bo.UNAUTHENTICATED:return gt.UNAUTHENTICATED;case bo.INVALID_ARGUMENT:return gt.INVALID_ARGUMENT;case bo.NOT_FOUND:return gt.NOT_FOUND;case bo.ALREADY_EXISTS:return gt.ALREADY_EXISTS;case bo.PERMISSION_DENIED:return gt.PERMISSION_DENIED;case bo.FAILED_PRECONDITION:return gt.FAILED_PRECONDITION;case bo.ABORTED:return gt.ABORTED;case bo.OUT_OF_RANGE:return gt.OUT_OF_RANGE;case bo.UNIMPLEMENTED:return gt.UNIMPLEMENTED;case bo.DATA_LOSS:return gt.DATA_LOSS;default:return Nn()}}(Qr=bo||(bo={}))[Qr.OK=0]="OK",Qr[Qr.CANCELLED=1]="CANCELLED",Qr[Qr.UNKNOWN=2]="UNKNOWN",Qr[Qr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qr[Qr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qr[Qr.NOT_FOUND=5]="NOT_FOUND",Qr[Qr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qr[Qr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qr[Qr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qr[Qr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qr[Qr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qr[Qr.ABORTED=10]="ABORTED",Qr[Qr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qr[Qr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qr[Qr.INTERNAL=13]="INTERNAL",Qr[Qr.UNAVAILABLE=14]="UNAVAILABLE",Qr[Qr.DATA_LOSS=15]="DATA_LOSS";var Go=function(){function o(t,s){this.comparator=t,this.root=s||ha.EMPTY}return o.prototype.insert=function(t,s){return new o(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,ha.BLACK,null,null))},o.prototype.remove=function(t){return new o(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ha.BLACK,null,null))},o.prototype.get=function(t){for(var s=this.root;!s.isEmpty();){var l=this.comparator(t,s.key);if(0===l)return s.value;l<0?s=s.left:l>0&&(s=s.right)}return null},o.prototype.indexOf=function(t){for(var s=0,l=this.root;!l.isEmpty();){var g=this.comparator(t,l.key);if(0===g)return s+l.left.size;g<0?l=l.left:(s+=l.left.size+1,l=l.right)}return-1},o.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(o.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),o.prototype.minKey=function(){return this.root.minKey()},o.prototype.maxKey=function(){return this.root.maxKey()},o.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},o.prototype.forEach=function(t){this.inorderTraversal(function(s,l){return t(s,l),!1})},o.prototype.toString=function(){var t=[];return this.inorderTraversal(function(s,l){return t.push(s+":"+l),!1}),"{"+t.join(", ")+"}"},o.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},o.prototype.getIterator=function(){return new Au(this.root,null,this.comparator,!1)},o.prototype.getIteratorFrom=function(t){return new Au(this.root,t,this.comparator,!1)},o.prototype.getReverseIterator=function(){return new Au(this.root,null,this.comparator,!0)},o.prototype.getReverseIteratorFrom=function(t){return new Au(this.root,t,this.comparator,!0)},o}(),Au=function(){function o(t,s,l,g){this.isReverse=g,this.nodeStack=[];for(var C=1;!t.isEmpty();)if(C=s?l(t.key,s):1,g&&(C*=-1),C<0)t=this.isReverse?t.left:t.right;else{if(0===C){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return o.prototype.getNext=function(){var t=this.nodeStack.pop(),s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s},o.prototype.hasNext=function(){return this.nodeStack.length>0},o.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},o}(),ha=function(){function o(t,s,l,g,C){this.key=t,this.value=s,this.color=null!=l?l:o.RED,this.left=null!=g?g:o.EMPTY,this.right=null!=C?C:o.EMPTY,this.size=this.left.size+1+this.right.size}return o.prototype.copy=function(t,s,l,g,C){return new o(null!=t?t:this.key,null!=s?s:this.value,null!=l?l:this.color,null!=g?g:this.left,null!=C?C:this.right)},o.prototype.isEmpty=function(){return!1},o.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},o.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},o.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},o.prototype.minKey=function(){return this.min().key},o.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},o.prototype.insert=function(t,s,l){var g=this,C=l(t,g.key);return(g=C<0?g.copy(null,null,null,g.left.insert(t,s,l),null):0===C?g.copy(null,s,null,null,null):g.copy(null,null,null,null,g.right.insert(t,s,l))).fixUp()},o.prototype.removeMin=function(){if(this.left.isEmpty())return o.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},o.prototype.remove=function(t,s){var l,g=this;if(s(t,g.key)<0)g.left.isEmpty()||g.left.isRed()||g.left.left.isRed()||(g=g.moveRedLeft()),g=g.copy(null,null,null,g.left.remove(t,s),null);else{if(g.left.isRed()&&(g=g.rotateRight()),g.right.isEmpty()||g.right.isRed()||g.right.left.isRed()||(g=g.moveRedRight()),0===s(t,g.key)){if(g.right.isEmpty())return o.EMPTY;l=g.right.min(),g=g.copy(l.key,l.value,null,null,g.right.removeMin())}g=g.copy(null,null,null,null,g.right.remove(t,s))}return g.fixUp()},o.prototype.isRed=function(){return this.color},o.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},o.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},o.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},o.prototype.rotateLeft=function(){var t=this.copy(null,null,o.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},o.prototype.rotateRight=function(){var t=this.copy(null,null,o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},o.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)},o.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},o.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Nn();var t=this.left.check();if(t!==this.right.check())throw Nn();return t+(this.isRed()?0:1)},o}();ha.EMPTY=null,ha.RED=!0,ha.BLACK=!1,ha.EMPTY=new(function(){function o(){this.size=0}return Object.defineProperty(o.prototype,"key",{get:function(){throw Nn()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"value",{get:function(){throw Nn()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"color",{get:function(){throw Nn()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"left",{get:function(){throw Nn()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"right",{get:function(){throw Nn()},enumerable:!1,configurable:!0}),o.prototype.copy=function(t,s,l,g,C){return this},o.prototype.insert=function(t,s,l){return new ha(t,s)},o.prototype.remove=function(t,s){return this},o.prototype.isEmpty=function(){return!0},o.prototype.inorderTraversal=function(t){return!1},o.prototype.reverseTraversal=function(t){return!1},o.prototype.minKey=function(){return null},o.prototype.maxKey=function(){return null},o.prototype.isRed=function(){return!1},o.prototype.checkMaxDepth=function(){return!0},o.prototype.check=function(){return 0},o}());var Mo=function(){function o(t){this.comparator=t,this.data=new Go(this.comparator)}return o.prototype.has=function(t){return null!==this.data.get(t)},o.prototype.first=function(){return this.data.minKey()},o.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(o.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),o.prototype.indexOf=function(t){return this.data.indexOf(t)},o.prototype.forEach=function(t){this.data.inorderTraversal(function(s,l){return t(s),!1})},o.prototype.forEachInRange=function(t,s){for(var l=this.data.getIteratorFrom(t[0]);l.hasNext();){var g=l.getNext();if(this.comparator(g.key,t[1])>=0)return;s(g.key)}},o.prototype.forEachWhile=function(t,s){var l;for(l=void 0!==s?this.data.getIteratorFrom(s):this.data.getIterator();l.hasNext();)if(!t(l.getNext().key))return},o.prototype.firstAfterOrEqual=function(t){var s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null},o.prototype.getIterator=function(){return new tc(this.data.getIterator())},o.prototype.getIteratorFrom=function(t){return new tc(this.data.getIteratorFrom(t))},o.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},o.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},o.prototype.isEmpty=function(){return this.data.isEmpty()},o.prototype.unionWith=function(t){var s=this;return s.size<t.size&&(s=t,t=this),t.forEach(function(l){s=s.add(l)}),s},o.prototype.isEqual=function(t){if(!(t instanceof o)||this.size!==t.size)return!1;for(var s=this.data.getIterator(),l=t.data.getIterator();s.hasNext();){var g=s.getNext().key,C=l.getNext().key;if(0!==this.comparator(g,C))return!1}return!0},o.prototype.toArray=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},o.prototype.toString=function(){var t=[];return this.forEach(function(s){return t.push(s)}),"SortedSet("+t.toString()+")"},o.prototype.copy=function(t){var s=new o(this.comparator);return s.data=t,s},o}(),tc=function(){function o(t){this.iter=t}return o.prototype.getNext=function(){return this.iter.getNext().key},o.prototype.hasNext=function(){return this.iter.hasNext()},o}(),Oa=new Go(Jn.comparator);function Co(){return Oa}var ch=new Go(Jn.comparator);function xa(){return ch}var dh=new Go(Jn.comparator);function nc(){return dh}var rc=new Mo(Jn.comparator);function Lr(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];for(var s=rc,l=0,g=o;l<g.length;l++){var C=g[l];s=s.add(C)}return s}var Mu=new Mo(Tr);function Iu(){return Mu}var ic=function(){function o(t,s,l,g,C){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=l,this.documentUpdates=g,this.resolvedLimboDocuments=C}return o.createSynthesizedRemoteEventForCurrentChange=function(t,s){var l=new Map;return l.set(t,yd.createSynthesizedTargetChangeForCurrentChange(t,s)),new o(x.min(),l,Iu(),Co(),Lr())},o}(),yd=function(){function o(t,s,l,g,C){this.resumeToken=t,this.current=s,this.addedDocuments=l,this.modifiedDocuments=g,this.removedDocuments=C}return o.createSynthesizedTargetChangeForCurrentChange=function(t,s){return new o(ur.EMPTY_BYTE_STRING,s,Lr(),Lr(),Lr())},o}(),oc=function(o,t,s,l){this.v=o,this.removedTargetIds=t,this.key=s,this.P=l},hh=function(o,t){this.targetId=o,this.V=t},fh=function(o,t,s,l){void 0===s&&(s=ur.EMPTY_BYTE_STRING),void 0===l&&(l=null),this.state=o,this.targetIds=t,this.resumeToken=s,this.cause=l},bd=function(){function o(){this.S=0,this.D=wd(),this.C=ur.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(o.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),o.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},o.prototype.M=function(){var t=Lr(),s=Lr(),l=Lr();return this.D.forEach(function(g,C){switch(C){case 0:t=t.add(g);break;case 2:s=s.add(g);break;case 1:l=l.add(g);break;default:Nn()}}),new yd(this.C,this.N,t,s,l)},o.prototype.L=function(){this.k=!1,this.D=wd()},o.prototype.B=function(t,s){this.k=!0,this.D=this.D.insert(t,s)},o.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},o.prototype.U=function(){this.S+=1},o.prototype.K=function(){this.S-=1},o.prototype.j=function(){this.k=!0,this.N=!0},o}(),Cd=function(){function o(t){this.W=t,this.G=new Map,this.H=Co(),this.J=Tl(),this.Y=new Mo(Tr)}return o.prototype.X=function(t){for(var s=0,l=t.v;s<l.length;s++){var g=l[s];t.P&&t.P.isFoundDocument()?this.Z(g,t.P):this.tt(g,t.key,t.P)}for(var C=0,S=t.removedTargetIds;C<S.length;C++)this.tt(g=S[C],t.key,t.P)},o.prototype.et=function(t){var s=this;this.forEachTarget(t,function(l){var g=s.nt(l);switch(t.state){case 0:s.st(l)&&g.O(t.resumeToken);break;case 1:g.K(),g.F||g.L(),g.O(t.resumeToken);break;case 2:g.K(),g.F||s.removeTarget(l);break;case 3:s.st(l)&&(g.j(),g.O(t.resumeToken));break;case 4:s.st(l)&&(s.it(l),g.O(t.resumeToken));break;default:Nn()}})},o.prototype.forEachTarget=function(t,s){var l=this;t.targetIds.length>0?t.targetIds.forEach(s):this.G.forEach(function(g,C){l.st(C)&&s(C)})},o.prototype.rt=function(t){var s=t.targetId,l=t.V.count,g=this.ot(s);if(g){var C=g.target;if(Ys(C))if(0===l){var S=new Jn(C.path);this.tt(s,S,ki.newNoDocument(S,x.min()))}else nr(1===l);else this.ct(s)!==l&&(this.it(s),this.Y=this.Y.add(s))}},o.prototype.ut=function(t){var s=this,l=new Map;this.G.forEach(function(S,k){var K=s.ot(k);if(K){if(S.current&&Ys(K.target)){var ue=new Jn(K.target.path);null!==s.H.get(ue)||s.at(k,ue)||s.tt(k,ue,ki.newNoDocument(ue,t))}S.$&&(l.set(k,S.M()),S.L())}});var g=Lr();this.J.forEach(function(S,k){var K=!0;k.forEachWhile(function(ue){var de=s.ot(ue);return!de||2===de.purpose||(K=!1,!1)}),K&&(g=g.add(S))});var C=new ic(t,l,this.Y,this.H,g);return this.H=Co(),this.J=Tl(),this.Y=new Mo(Tr),C},o.prototype.Z=function(t,s){if(this.st(t)){var l=this.at(t,s.key)?2:0;this.nt(t).B(s.key,l),this.H=this.H.insert(s.key,s),this.J=this.J.insert(s.key,this.ht(s.key).add(t))}},o.prototype.tt=function(t,s,l){if(this.st(t)){var g=this.nt(t);this.at(t,s)?g.B(s,1):g.q(s),this.J=this.J.insert(s,this.ht(s).delete(t)),l&&(this.H=this.H.insert(s,l))}},o.prototype.removeTarget=function(t){this.G.delete(t)},o.prototype.ct=function(t){var s=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size},o.prototype.U=function(t){this.nt(t).U()},o.prototype.nt=function(t){var s=this.G.get(t);return s||(s=new bd,this.G.set(t,s)),s},o.prototype.ht=function(t){var s=this.J.get(t);return s||(s=new Mo(Tr),this.J=this.J.insert(t,s)),s},o.prototype.st=function(t){var s=null!==this.ot(t);return s||rn("WatchChangeAggregator","Detected inactive target",t),s},o.prototype.ot=function(t){var s=this.G.get(t);return s&&s.F?null:this.W.lt(t)},o.prototype.it=function(t){var s=this;this.G.set(t,new bd),this.W.getRemoteKeysForTarget(t).forEach(function(l){s.tt(t,l,null)})},o.prototype.at=function(t,s){return this.W.getRemoteKeysForTarget(t).has(s)},o}();function Tl(){return new Go(Jn.comparator)}function wd(){return new Go(Jn.comparator)}var Nc={asc:"ASCENDING",desc:"DESCENDING"},Bh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ou=function(o,t){this.databaseId=o,this.I=t};function ls(o,t){return o.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function Lc(o,t){return o.I?t.toBase64():t.toUint8Array()}function Qs(o,t){return ls(o,t.toTimestamp())}function Fi(o){return nr(!!o),x.fromTimestamp((s=xr(o),new U(s.seconds,s.nanos)));var s}function Uc(o,t){return(s=o,new Te(["projects",s.projectId,"databases",s.database])).child("documents").child(t).canonicalString();var s}function Pa(o){var t=Te.fromString(o);return nr(Fa(t)),t}function Dl(o,t){return Uc(o.databaseId,t.path)}function fa(o,t){var s=Pa(t);if(s.get(1)!==o.databaseId.projectId)throw new Lt(gt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+o.databaseId.projectId);if(s.get(3)!==o.databaseId.database)throw new Lt(gt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+o.databaseId.database);return new Jn(Ju(s))}function Ed(o,t){return Uc(o.databaseId,t)}function Td(o){var t=Pa(o);return 4===t.length?Te.emptyPath():Ju(t)}function pa(o){return new Te(["projects",o.databaseId.projectId,"databases",o.databaseId.database]).canonicalString()}function Ju(o){return nr(o.length>4&&"documents"===o.get(4)),o.popFirst(5)}function xu(o,t,s){return{name:Dl(o,t),fields:s.value.mapValue.fields}}function ph(o,t,s){var l=fa(o,t.name),g=Fi(t.updateTime),C=new di({mapValue:{fields:t.fields}}),S=ki.newFoundDocument(l,g,C);return s&&S.setHasCommittedMutations(),s?S.setHasCommittedMutations():S}function Dd(o,t){var s,g;if(t instanceof su)s={update:xu(o,t.key,t.value)};else if(t instanceof da)s={delete:Dl(o,t.key)};else if(t instanceof Ts)s={update:xu(o,t.key,t.data),updateMask:ac(t.fieldMask)};else{if(!(t instanceof Qu))return Nn();s={verify:Dl(o,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map(function(l){return function(g,C){var S=C.transform;if(S instanceof Du)return{fieldPath:C.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(S instanceof nu)return{fieldPath:C.field.canonicalString(),appendMissingElements:{values:S.elements}};if(S instanceof ru)return{fieldPath:C.field.canonicalString(),removeAllFromArray:{values:S.elements}};if(S instanceof gs)return{fieldPath:C.field.canonicalString(),increment:S.A};throw Nn()}(0,l)})),t.precondition.isNone||(s.currentDocument=void 0!==(g=t.precondition).updateTime?{updateTime:Qs(o,g.updateTime)}:void 0!==g.exists?{exists:g.exists}:Nn()),s}function Sl(o,t){var ue,s=t.currentDocument?void 0!==(ue=t.currentDocument).updateTime?Fo.updateTime(Fi(ue.updateTime)):void 0!==ue.exists?Fo.exists(ue.exists):Fo.none():Fo.none(),l=t.updateTransforms?t.updateTransforms.map(function(ue){return function(de,Me){var Be=null;"setToServerValue"in Me?(nr("REQUEST_TIME"===Me.setToServerValue),Be=new Du):"appendMissingElements"in Me?Be=new nu(Me.appendMissingElements.values||[]):"removeAllFromArray"in Me?Be=new ru(Me.removeAllFromArray.values||[]):"increment"in Me?Be=new gs(de,Me.increment):Nn();var Dt=Tt.fromServerFormat(Me.fieldPath);return new iu(Dt,Be)}(o,ue)}):[];if(t.update){var g=fa(o,t.update.name),C=new di({mapValue:{fields:t.update.fields}});if(t.updateMask){var S=function(ue){return new hn((ue.fieldPaths||[]).map(function(Me){return Tt.fromServerFormat(Me)}))}(t.updateMask);return new Ts(g,C,S,s,l)}return new su(g,C,s,l)}if(t.delete){var k=fa(o,t.delete);return new da(k,s)}if(t.verify){var K=fa(o,t.verify);return new Qu(K,s)}return Nn()}function Vc(o,t){return{documents:[Ed(o,t.path)]}}function Al(o,t){var s={structuredQuery:{}},l=t.path;null!==t.collectionGroup?(s.parent=Ed(o,l),s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s.parent=Ed(o,l.popLast()),s.structuredQuery.from=[{collectionId:l.lastSegment()}]);var g=function(k){if(0!==k.length){var K=k.map(function(ue){return function(de){if("=="===de.op){if(ks(de.value))return{unaryFilter:{field:ka(de.field),op:"IS_NAN"}};if(ah(de.value))return{unaryFilter:{field:ka(de.field),op:"IS_NULL"}}}else if("!="===de.op){if(ks(de.value))return{unaryFilter:{field:ka(de.field),op:"IS_NOT_NAN"}};if(ah(de.value))return{unaryFilter:{field:ka(de.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(de.field),op:Ra(de.op),value:de.value}}}(ue)});return 1===K.length?K[0]:{compositeFilter:{op:"AND",filters:K}}}}(t.filters);g&&(s.structuredQuery.where=g);var C=function(k){if(0!==k.length)return k.map(function(K){return{field:ka((ue=K).field),direction:Ml(ue.dir)};var ue})}(t.orderBy);C&&(s.structuredQuery.orderBy=C);var K,S=(K=t.limit,o.I||ss(K)?K:{value:K});return null!==S&&(s.structuredQuery.limit=S),t.startAt&&(s.structuredQuery.startAt=jc(t.startAt)),t.endAt&&(s.structuredQuery.endAt=jc(t.endAt)),s}function sc(o){var t=Td(o.parent),s=o.structuredQuery,l=s.from?s.from.length:0,g=null;if(l>0){nr(1===l);var C=s.from[0];C.allDescendants?g=C.collectionId:t=t.child(C.collectionId)}var S=[];s.where&&(S=Bc(s.where));var k=[];s.orderBy&&(k=s.orderBy.map(function(Me){return new zu(Yr((Be=Me).field),function(ht){switch(ht){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Be.direction));var Be}));var Me,Be,K=null;s.limit&&(K=ss(Be="object"==typeof(Me=s.limit)?Me.value:Me)?null:Be);var ue=null;s.startAt&&(ue=Zo(s.startAt));var de=null;return s.endAt&&(de=Zo(s.endAt)),Jl(t,g,k,S,K,"F",ue,de)}function Bc(o){return o?void 0!==o.unaryFilter?[Gc(o)]:void 0!==o.fieldFilter?[Hc(o)]:void 0!==o.compositeFilter?o.compositeFilter.filters.map(function(t){return Bc(t)}).reduce(function(t,s){return t.concat(s)}):Nn():[]}function jc(o){return{before:o.before,values:o.position}}function Zo(o){return new Ns(o.values||[],!!o.before)}function Ml(o){return Nc[o]}function Ra(o){return Bh[o]}function ka(o){return{fieldPath:o.canonicalString()}}function Yr(o){return Tt.fromServerFormat(o.fieldPath)}function Hc(o){return Ao.create(Yr(o.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Nn()}}(o.fieldFilter.op),o.fieldFilter.value)}function Gc(o){switch(o.unaryFilter.op){case"IS_NAN":var t=Yr(o.unaryFilter.field);return Ao.create(t,"==",{doubleValue:NaN});case"IS_NULL":var s=Yr(o.unaryFilter.field);return Ao.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var l=Yr(o.unaryFilter.field);return Ao.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var g=Yr(o.unaryFilter.field);return Ao.create(g,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Nn()}}function ac(o){var t=[];return o.fields.forEach(function(s){return t.push(s.canonicalString())}),{fieldPaths:t}}function Fa(o){return o.length>=4&&"projects"===o.get(0)&&"databases"===o.get(2)}function Ds(o){for(var t="",s=0;s<o.length;s++)t.length>0&&(t=Il(t)),t=gh(o.get(s),t);return Il(t)}function gh(o,t){for(var s=t,l=o.length,g=0;g<l;g++){var C=o.charAt(g);switch(C){case"\0":s+="\x01\x10";break;case"\x01":s+="\x01\x11";break;default:s+=C}}return s}function Il(o){return o+"\x01\x01"}function Na(o){var t=o.length;if(nr(t>=2),2===t)return nr("\x01"===o.charAt(0)&&"\x01"===o.charAt(1)),Te.emptyPath();for(var s=t-2,l=[],g="",C=0;C<t;){var S=o.indexOf("\x01",C);switch((S<0||S>s)&&Nn(),o.charAt(S+1)){case"\x01":var k=o.substring(C,S),K=void 0;0===g.length?K=k:(K=g+=k,g=""),l.push(K);break;case"\x10":g+=o.substring(C,S),g+="\0";break;case"\x11":g+=o.substring(C,S+1);break;default:Nn()}C=S+2}return new Te(l)}var Sd=function(o,t){this.seconds=o,this.nanoseconds=t},Lo=function(o,t,s){this.ownerId=o,this.allowTabSynchronization=t,this.leaseTimestampMs=s};Lo.store="owner",Lo.key="owner";var au=function(o,t,s){this.userId=o,this.lastAcknowledgedBatchId=t,this.lastStreamToken=s};au.store="mutationQueues",au.keyPath="userId";var hi=function(o,t,s,l,g){this.userId=o,this.batchId=t,this.localWriteTimeMs=s,this.baseMutations=l,this.mutations=g};hi.store="mutations",hi.keyPath="batchId",hi.userMutationsIndex="userMutationsIndex",hi.userMutationsKeyPath=["userId","batchId"];var fi=function(){function o(){}return o.prefixForUser=function(t){return[t]},o.prefixForPath=function(t,s){return[t,Ds(s)]},o.key=function(t,s,l){return[t,Ds(s),l]},o}();fi.store="documentMutations",fi.PLACEHOLDER=new fi;var uu=function(o,t){this.path=o,this.readTime=t},uc=function(o,t){this.path=o,this.version=t},Wi=function(o,t,s,l,g,C){this.unknownDocument=o,this.noDocument=t,this.document=s,this.hasCommittedMutations=l,this.readTime=g,this.parentPath=C};Wi.store="remoteDocuments",Wi.readTimeIndex="readTimeIndex",Wi.readTimeIndexPath="readTime",Wi.collectionReadTimeIndex="collectionReadTimeIndex",Wi.collectionReadTimeIndexPath=["parentPath","readTime"];var Ni=function(o){this.byteSize=o};Ni.store="remoteDocumentGlobal",Ni.key="remoteDocumentGlobalKey";var ao=function(o,t,s,l,g,C,S){this.targetId=o,this.canonicalId=t,this.readTime=s,this.resumeToken=l,this.lastListenSequenceNumber=g,this.lastLimboFreeSnapshotVersion=C,this.query=S};ao.store="targets",ao.keyPath="targetId",ao.queryTargetsIndexName="queryTargetsIndex",ao.queryTargetsKeyPath=["canonicalId","targetId"];var wo=function(o,t,s){this.targetId=o,this.path=t,this.sequenceNumber=s};wo.store="targetDocuments",wo.keyPath=["targetId","path"],wo.documentTargetsIndex="documentTargetsIndex",wo.documentTargetsKeyPath=["path","targetId"];var cs=function(o,t,s,l){this.highestTargetId=o,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=s,this.targetCount=l};cs.key="targetGlobalKey",cs.store="targetGlobal";var qo=function(o,t){this.collectionId=o,this.parent=t};qo.store="collectionParents",qo.keyPath=["collectionId","parent"];var Bs=function(o,t,s,l){this.clientId=o,this.updateTimeMs=t,this.networkEnabled=s,this.inForeground=l};Bs.store="clientMetadata",Bs.keyPath="clientId";var Xu=function(o,t,s){this.bundleId=o,this.createTime=t,this.version=s};Xu.store="bundles",Xu.keyPath="bundleId";var Pu=function(o,t,s){this.name=o,this.readTime=t,this.bundledQuery=s};Pu.store="namedQueries",Pu.keyPath="name";var mh=(0,X.ev)((0,X.ev)([],(0,X.ev)((0,X.ev)([],(0,X.ev)((0,X.ev)([],(0,X.ev)((0,X.ev)([],[au.store,hi.store,fi.store,Wi.store,ao.store,Lo.store,cs.store,wo.store]),[Bs.store])),[Ni.store])),[qo.store])),[Xu.store,Pu.store]),Zc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ad=function(){function o(){this.onCommittedListeners=[]}return o.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},o.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},o}(),es=function(){var o=this;this.promise=new Promise(function(t,s){o.resolve=t,o.reject=s})},zt=function(){function o(t){var s=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(l){s.isDone=!0,s.result=l,s.nextCallback&&s.nextCallback(l)},function(l){s.isDone=!0,s.error=l,s.catchCallback&&s.catchCallback(l)})}return o.prototype.catch=function(t){return this.next(void 0,t)},o.prototype.next=function(t,s){var l=this;return this.callbackAttached&&Nn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new o(function(g,C){l.nextCallback=function(S){l.wrapSuccess(t,S).next(g,C)},l.catchCallback=function(S){l.wrapFailure(s,S).next(g,C)}})},o.prototype.toPromise=function(){var t=this;return new Promise(function(s,l){t.next(s,l)})},o.prototype.wrapUserFunction=function(t){try{var s=t();return s instanceof o?s:o.resolve(s)}catch(l){return o.reject(l)}},o.prototype.wrapSuccess=function(t,s){return t?this.wrapUserFunction(function(){return t(s)}):o.resolve(s)},o.prototype.wrapFailure=function(t,s){return t?this.wrapUserFunction(function(){return t(s)}):o.reject(s)},o.resolve=function(t){return new o(function(s,l){s(t)})},o.reject=function(t){return new o(function(s,l){l(t)})},o.waitFor=function(t){return new o(function(s,l){var g=0,C=0,S=!1;t.forEach(function(k){++g,k.next(function(){++C,S&&C===g&&s()},function(K){return l(K)})}),S=!0,C===g&&s()})},o.or=function(t){for(var s=o.resolve(!1),l=function(S){s=s.next(function(k){return k?o.resolve(k):S()})},g=0,C=t;g<C.length;g++)l(C[g]);return s},o.forEach=function(t,s){var l=this,g=[];return t.forEach(function(C,S){g.push(s.call(l,C,S))}),this.waitFor(g)},o}(),qc=function(){function o(t,s){var l=this;this.action=t,this.transaction=s,this.aborted=!1,this.ft=new es,this.transaction.oncomplete=function(){l.ft.resolve()},this.transaction.onabort=function(){s.error?l.ft.reject(new Ol(t,s.error)):l.ft.resolve()},this.transaction.onerror=function(g){var C=Od(g.target.error);l.ft.reject(new Ol(t,C))}}return o.open=function(t,s,l,g){try{return new o(s,t.transaction(g,l))}catch(C){throw new Ol(s,C)}},Object.defineProperty(o.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),o.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(rn("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},o.prototype.store=function(t){var s=this.transaction.objectStore(t);return new Id(s)},o}(),lu=function(){function o(t,s,l){this.name=t,this.version=s,this.wt=l,12.2===o._t((0,Re.z$)())&&$i("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return o.delete=function(t){return rn("SimpleDb","Removing database:",t),ga(window.indexedDB.deleteDatabase(t)).toPromise()},o.yt=function(){if("undefined"==typeof indexedDB)return!1;if(o.gt())return!0;var t=(0,Re.z$)(),s=o._t(t),l=0<s&&s<10,g=o.Et(t),C=0<g&&g<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||l||C)},o.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},o.It=function(t,s){return t.store(s)},o._t=function(t){var s=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),l=s?s[1].split("_").slice(0,2).join("."):"-1";return Number(l)},o.Et=function(t){var s=t.match(/Android ([\d.]+)/i),l=s?s[1].split(".").slice(0,2).join("."):"-1";return Number(l)},o.prototype.At=function(t){return(0,X.mG)(this,void 0,void 0,function(){var s,l=this;return(0,X.Jh)(this,function(g){switch(g.label){case 0:return this.db?[3,2]:(rn("SimpleDb","Opening database:",this.name),s=this,[4,new Promise(function(C,S){var k=indexedDB.open(l.name,l.version);k.onsuccess=function(K){C(K.target.result)},k.onblocked=function(){S(new Ol(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},k.onerror=function(K){var ue=K.target.error;S("VersionError"===ue.name?new Lt(gt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ol(t,ue))},k.onupgradeneeded=function(K){rn("SimpleDb",'Database "'+l.name+'" requires upgrade from version:',K.oldVersion),l.wt.Rt(K.target.result,k.transaction,K.oldVersion,l.version).next(function(){rn("SimpleDb","Database upgrade to version "+l.version+" complete")})}})]);case 1:s.db=g.sent(),g.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(C){return l.bt(C)}),this.db)]}})})},o.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(s){return t(s)})},o.prototype.runTransaction=function(t,s,l,g){return(0,X.mG)(this,void 0,void 0,function(){var C,S,k,K,ue;return(0,X.Jh)(this,function(de){switch(de.label){case 0:C="readonly"===s,S=0,k=function(){var Me,Be,ht,dt,Dt;return(0,X.Jh)(this,function(en){switch(en.label){case 0:++S,en.label=1;case 1:return en.trys.push([1,4,,5]),[4,K.At(t)];case 2:return K.db=en.sent(),Me=qc.open(K.db,t,C?"readonly":"readwrite",l),Be=g(Me).catch(function(fn){return Me.abort(fn),zt.reject(fn)}).toPromise(),ht={},Be.catch(function(){}),[4,Me.dt];case 3:return[2,(ht.value=(en.sent(),Be),ht)];case 4:return rn("SimpleDb","Transaction failed with error:",(dt=en.sent()).message,"Retrying:",Dt="FirebaseError"!==dt.name&&S<3),K.close(),Dt?[3,5]:[2,{value:Promise.reject(dt)}];case 5:return[2]}})},K=this,de.label=1;case 1:return[5,k()];case 2:if("object"==typeof(ue=de.sent()))return[2,ue.value];de.label=3;case 3:return[3,1];case 4:return[2]}})})},o.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},o}(),Md=function(){function o(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(o.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),o.prototype.done=function(){this.Vt=!0},o.prototype.Ct=function(t){this.St=t},o.prototype.delete=function(){return ga(this.Pt.delete())},o}(),Ol=function(o){function t(s,l){var g=this;return(g=o.call(this,gt.UNAVAILABLE,"IndexedDB transaction '"+s+"' failed: "+l)||this).name="IndexedDbTransactionError",g}return(0,X.ZT)(t,o),t}(Lt);function el(o){return"IndexedDbTransactionError"===o.name}var Id=function(){function o(t){this.store=t}return o.prototype.put=function(t,s){var l;return void 0!==s?(rn("SimpleDb","PUT",this.store.name,t,s),l=this.store.put(s,t)):(rn("SimpleDb","PUT",this.store.name,"<auto-key>",t),l=this.store.put(t)),ga(l)},o.prototype.add=function(t){return rn("SimpleDb","ADD",this.store.name,t,t),ga(this.store.add(t))},o.prototype.get=function(t){var s=this;return ga(this.store.get(t)).next(function(l){return void 0===l&&(l=null),rn("SimpleDb","GET",s.store.name,t,l),l})},o.prototype.delete=function(t){return rn("SimpleDb","DELETE",this.store.name,t),ga(this.store.delete(t))},o.prototype.count=function(){return rn("SimpleDb","COUNT",this.store.name),ga(this.store.count())},o.prototype.Nt=function(t,s){var l=this.cursor(this.options(t,s)),g=[];return this.xt(l,function(C,S){g.push(S)}).next(function(){return g})},o.prototype.kt=function(t,s){rn("SimpleDb","DELETE ALL",this.store.name);var l=this.options(t,s);l.Ft=!1;var g=this.cursor(l);return this.xt(g,function(C,S,k){return k.delete()})},o.prototype.$t=function(t,s){var l;s?l=t:(l={},s=t);var g=this.cursor(l);return this.xt(g,s)},o.prototype.Ot=function(t){var s=this.cursor({});return new zt(function(l,g){s.onerror=function(C){var S=Od(C.target.error);g(S)},s.onsuccess=function(C){var S=C.target.result;S?t(S.primaryKey,S.value).next(function(k){k?S.continue():l()}):l()}})},o.prototype.xt=function(t,s){var l=[];return new zt(function(g,C){t.onerror=function(S){C(S.target.error)},t.onsuccess=function(S){var k=S.target.result;if(k){var K=new Md(k),ue=s(k.primaryKey,k.value,K);if(ue instanceof zt){var de=ue.catch(function(Me){return K.done(),zt.reject(Me)});l.push(de)}K.isDone?g():null===K.Dt?k.continue():k.continue(K.Dt)}else g()}}).next(function(){return zt.waitFor(l)})},o.prototype.options=function(t,s){var l;return void 0!==t&&("string"==typeof t?l=t:s=t),{index:l,range:s}},o.prototype.cursor=function(t){var s="next";if(t.reverse&&(s="prev"),t.index){var l=this.store.index(t.index);return t.Ft?l.openKeyCursor(t.range,s):l.openCursor(t.range,s)}return this.store.openCursor(t.range,s)},o}();function ga(o){return new zt(function(t,s){o.onsuccess=function(l){t(l.target.result)},o.onerror=function(l){var g=Od(l.target.error);s(g)}})}var zc=!1;function Od(o){var t=lu._t((0,Re.z$)());if(t>=12.2&&t<13){var s="An internal error was encountered in the Indexed Database server";if(o.message.indexOf(s)>=0){var l=new Lt("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+s+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return zc||(zc=!0,setTimeout(function(){throw l},0)),l}}return o}var tl=function(o){function t(s,l){var g=this;return(g=o.call(this)||this).Mt=s,g.currentSequenceNumber=l,g}return(0,X.ZT)(t,o),t}(Ad);function Ss(o,t){var s=on(o);return lu.It(s.Mt,t)}var lc=function(){function o(t,s,l,g){this.batchId=t,this.localWriteTime=s,this.baseMutations=l,this.mutations=g}return o.prototype.applyToRemoteDocument=function(t,s){for(var l=s.mutationResults,g=0;g<this.mutations.length;g++){var C=this.mutations[g];C.key.isEqual(t.key)&&El(C,t,l[g])}},o.prototype.applyToLocalView=function(t){for(var s=0,l=this.baseMutations;s<l.length;s++)(S=l[s]).key.isEqual(t.key)&&kc(S,t,this.localWriteTime);for(var g=0,C=this.mutations;g<C.length;g++){var S;(S=C[g]).key.isEqual(t.key)&&kc(S,t,this.localWriteTime)}},o.prototype.applyToLocalDocumentSet=function(t){var s=this;this.mutations.forEach(function(l){var g=t.get(l.key),C=g;s.applyToLocalView(C),g.isValidDocument()||C.convertToNoDocument(x.min())})},o.prototype.keys=function(){return this.mutations.reduce(function(t,s){return t.add(s.key)},Lr())},o.prototype.isEqual=function(t){return this.batchId===t.batchId&&Qa(this.mutations,t.mutations,function(s,l){return ou(s,l)})&&Qa(this.baseMutations,t.baseMutations,function(s,l){return ou(s,l)})},o}(),xl=function(){function o(t,s,l,g){this.batch=t,this.commitVersion=s,this.mutationResults=l,this.docVersions=g}return o.from=function(t,s,l){nr(t.mutations.length===l.length);for(var g=nc(),C=t.mutations,S=0;S<C.length;S++)g=g.insert(C[S].key,l[S].version);return new o(t,s,l,g)},o}(),La=function(){function o(t,s,l,g,C,S,k){void 0===C&&(C=x.min()),void 0===S&&(S=x.min()),void 0===k&&(k=ur.EMPTY_BYTE_STRING),this.target=t,this.targetId=s,this.purpose=l,this.sequenceNumber=g,this.snapshotVersion=C,this.lastLimboFreeSnapshotVersion=S,this.resumeToken=k}return o.prototype.withSequenceNumber=function(t){return new o(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},o.prototype.withResumeToken=function(t,s){return new o(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t)},o.prototype.withLastLimboFreeSnapshotVersion=function(t){return new o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},o}(),js=function(o){this.Lt=o};function nl(o,t){if(t.document)return ph(o.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var s=Jn.fromSegments(t.noDocument.path),l=ku(t.noDocument.readTime),g=ki.newNoDocument(s,l);return t.hasCommittedMutations?g.setHasCommittedMutations():g}if(t.unknownDocument){var C=Jn.fromSegments(t.unknownDocument.path);return l=ku(t.unknownDocument.version),ki.newUnknownDocument(C,l)}return Nn()}function ts(o,t,s){var Me,Be,l=cu(s),g=t.key.path.popLast().toArray();if(t.isFoundDocument()){var C={name:Dl(Me=o.Lt,(Be=t).key),fields:Be.data.value.mapValue.fields,updateTime:ls(Me,Be.version.toTimestamp())},S=t.hasCommittedMutations;return new Wi(null,null,C,S,l,g)}if(t.isNoDocument()){var k=t.key.path.toArray(),K=Ru(t.version);return S=t.hasCommittedMutations,new Wi(null,new uu(k,K),null,S,l,g)}if(t.isUnknownDocument()){var ue=t.key.path.toArray(),de=Ru(t.version);return new Wi(new uc(ue,de),null,null,!0,l,g)}return Nn()}function cu(o){var t=o.toTimestamp();return[t.seconds,t.nanoseconds]}function $c(o){var t=new U(o[0],o[1]);return x.fromTimestamp(t)}function Ru(o){var t=o.toTimestamp();return new Sd(t.seconds,t.nanoseconds)}function ku(o){var t=new U(o.seconds,o.nanoseconds);return x.fromTimestamp(t)}function Pl(o,t){for(var s=(t.baseMutations||[]).map(function(K){return Sl(o.Lt,K)}),l=0;l<t.mutations.length-1;++l)l+1<t.mutations.length&&void 0!==t.mutations[l+1].transform&&(t.mutations[l].updateTransforms=t.mutations[l+1].transform.fieldTransforms,t.mutations.splice(l+1,1),++l);var S=t.mutations.map(function(K){return Sl(o.Lt,K)}),k=U.fromMillis(t.localWriteTimeMs);return new lc(t.batchId,k,s,S)}function rl(o){var t,s,l=ku(o.readTime),g=void 0!==o.lastLimboFreeSnapshotVersion?ku(o.lastLimboFreeSnapshotVersion):x.min();return void 0!==o.query.documents?(nr(1===(s=o.query).documents.length),t=ko(Ks(Td(s.documents[0])))):t=ko(sc(o.query)),new La(t,o.targetId,0,o.lastListenSequenceNumber,l,g,ur.fromBase64String(o.resumeToken))}function Wc(o,t){var s,l=Ru(t.snapshotVersion),g=Ru(t.lastLimboFreeSnapshotVersion);s=Ys(t.target)?Vc(o.Lt,t.target):Al(o.Lt,t.target);var C=t.resumeToken.toBase64();return new ao(t.targetId,Xo(t.target),l,C,t.sequenceNumber,g,s)}function cc(o){var t=sc({parent:o.parent,structuredQuery:o.structuredQuery});return"LAST"===o.limitType?pd(t,t.limit,"L"):t}var jh=function(){function o(){}return o.prototype.getBundleMetadata=function(t,s){return Fu(t).get(s).next(function(l){if(l)return{id:(g=l).bundleId,createTime:ku(g.createTime),version:g.version};var g})},o.prototype.saveBundleMetadata=function(t,s){return Fu(t).put({bundleId:(l=s).id,createTime:Ru(Fi(l.createTime)),version:l.version});var l},o.prototype.getNamedQuery=function(t,s){return Js(t).get(s).next(function(l){if(l)return{name:(g=l).name,query:cc(g.bundledQuery),readTime:ku(g.readTime)};var g})},o.prototype.saveNamedQuery=function(t,s){return Js(t).put({name:(l=s).name,readTime:Ru(Fi(l.readTime)),bundledQuery:l.bundledQuery});var l},o}();function Fu(o){return Ss(o,Xu.store)}function Js(o){return Ss(o,Pu.store)}var Hh=function(){function o(){this.Bt=new xd}return o.prototype.addToCollectionParentIndex=function(t,s){return this.Bt.add(s),zt.resolve()},o.prototype.getCollectionParents=function(t,s){return zt.resolve(this.Bt.getEntries(s))},o}(),xd=function(){function o(){this.index={}}return o.prototype.add=function(t){var s=t.lastSegment(),l=t.popLast(),g=this.index[s]||new Mo(Te.comparator),C=!g.has(l);return this.index[s]=g.add(l),C},o.prototype.has=function(t){var s=t.lastSegment(),l=t.popLast(),g=this.index[s];return g&&g.has(l)},o.prototype.getEntries=function(t){return(this.index[t]||new Mo(Te.comparator)).toArray()},o}(),Pd=function(){function o(){this.qt=new xd}return o.prototype.addToCollectionParentIndex=function(t,s){var l=this;if(!this.qt.has(s)){var g=s.lastSegment(),C=s.popLast();t.addOnCommittedListener(function(){l.qt.add(s)});var S={collectionId:g,parent:Ds(C)};return _h(t).put(S)}return zt.resolve()},o.prototype.getCollectionParents=function(t,s){var l=[],g=IDBKeyRange.bound([s,""],[Ac(s),""],!1,!0);return _h(t).Nt(g).next(function(C){for(var S=0,k=C;S<k.length;S++){var K=k[S];if(K.collectionId!==s)break;l.push(Na(K.parent))}return l})},o}();function _h(o){return Ss(o,qo.store)}var Xs={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hs=function(){function o(t,s,l){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=l}return o.withCacheSize=function(t){return new o(t,o.DEFAULT_COLLECTION_PERCENTILE,o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},o}();function du(o,t,s){var l=o.store(hi.store),g=o.store(fi.store),C=[],S=IDBKeyRange.only(s.batchId),k=0,K=l.$t({range:S},function(dt,Dt,en){return k++,en.delete()});C.push(K.next(function(){nr(1===k)}));for(var ue=[],de=0,Me=s.mutations;de<Me.length;de++){var Be=Me[de],ht=fi.key(t,Be.key.path,s.batchId);C.push(g.delete(ht)),ue.push(Be.key)}return zt.waitFor(C).next(function(){return ue})}function Rl(o){if(!o)return 0;var t;if(o.document)t=o.document;else if(o.unknownDocument)t=o.unknownDocument;else{if(!o.noDocument)throw Nn();t=o.noDocument}return JSON.stringify(t).length}Hs.DEFAULT_COLLECTION_PERCENTILE=10,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hs.DEFAULT=new Hs(41943040,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hs.DISABLED=new Hs(-1,0,0);var hu=function(){function o(t,s,l,g){this.userId=t,this.R=s,this.Ut=l,this.referenceDelegate=g,this.Kt={}}return o.Qt=function(t,s,l,g){return nr(""!==t.uid),new o(t.isAuthenticated()?t.uid:"",s,l,g)},o.prototype.checkEmpty=function(t){var s=!0,l=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Va(t).$t({index:hi.userMutationsIndex,range:l},function(g,C,S){s=!1,S.done()}).next(function(){return s})},o.prototype.addMutationBatch=function(t,s,l,g){var C=this,S=Nu(t),k=Va(t);return k.add({}).next(function(K){nr("number"==typeof K);for(var ue=new lc(K,s,l,g),de=function(fn,ir,or){var Jr=or.baseMutations.map(function(Hi){return Dd(fn.Lt,Hi)}),pi=or.mutations.map(function(Hi){return Dd(fn.Lt,Hi)});return new hi(ir,or.batchId,or.localWriteTime.toMillis(),Jr,pi)}(C.R,C.userId,ue),Me=[],Be=new Mo(function(fn,ir){return Tr(fn.canonicalString(),ir.canonicalString())}),ht=0,dt=g;ht<dt.length;ht++){var Dt=dt[ht],en=fi.key(C.userId,Dt.key.path,K);Be=Be.add(Dt.key.path.popLast()),Me.push(k.put(de)),Me.push(S.put(en,fi.PLACEHOLDER))}return Be.forEach(function(fn){Me.push(C.Ut.addToCollectionParentIndex(t,fn))}),t.addOnCommittedListener(function(){C.Kt[K]=ue.keys()}),zt.waitFor(Me).next(function(){return ue})})},o.prototype.lookupMutationBatch=function(t,s){var l=this;return Va(t).get(s).next(function(g){return g?(nr(g.userId===l.userId),Pl(l.R,g)):null})},o.prototype.jt=function(t,s){var l=this;return this.Kt[s]?zt.resolve(this.Kt[s]):this.lookupMutationBatch(t,s).next(function(g){if(g){var C=g.keys();return l.Kt[s]=C,C}return null})},o.prototype.getNextMutationBatchAfterBatchId=function(t,s){var l=this,g=s+1,C=IDBKeyRange.lowerBound([this.userId,g]),S=null;return Va(t).$t({index:hi.userMutationsIndex,range:C},function(k,K,ue){K.userId===l.userId&&(nr(K.batchId>=g),S=Pl(l.R,K)),ue.done()}).next(function(){return S})},o.prototype.getHighestUnacknowledgedBatchId=function(t){var s=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),l=-1;return Va(t).$t({index:hi.userMutationsIndex,range:s,reverse:!0},function(g,C,S){l=C.batchId,S.done()}).next(function(){return l})},o.prototype.getAllMutationBatches=function(t){var s=this,l=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Va(t).Nt(hi.userMutationsIndex,l).next(function(g){return g.map(function(C){return Pl(s.R,C)})})},o.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,s){var l=this,g=fi.prefixForPath(this.userId,s.path),C=IDBKeyRange.lowerBound(g),S=[];return Nu(t).$t({range:C},function(k,K,ue){var de=k[0],Be=k[2],ht=Na(k[1]);if(de===l.userId&&s.path.isEqual(ht))return Va(t).get(Be).next(function(dt){if(!dt)throw Nn();nr(dt.userId===l.userId),S.push(Pl(l.R,dt))});ue.done()}).next(function(){return S})},o.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,s){var l=this,g=new Mo(Tr),C=[];return s.forEach(function(S){var k=fi.prefixForPath(l.userId,S.path),K=IDBKeyRange.lowerBound(k),ue=Nu(t).$t({range:K},function(de,Me,Be){var ht=de[0],Dt=de[2],en=Na(de[1]);ht===l.userId&&S.path.isEqual(en)?g=g.add(Dt):Be.done()});C.push(ue)}),zt.waitFor(C).next(function(){return l.Wt(t,g)})},o.prototype.getAllMutationBatchesAffectingQuery=function(t,s){var l=this,g=s.path,C=g.length+1,S=fi.prefixForPath(this.userId,g),k=IDBKeyRange.lowerBound(S),K=new Mo(Tr);return Nu(t).$t({range:k},function(ue,de,Me){var Be=ue[0],dt=ue[2],Dt=Na(ue[1]);Be===l.userId&&g.isPrefixOf(Dt)?Dt.length===C&&(K=K.add(dt)):Me.done()}).next(function(){return l.Wt(t,K)})},o.prototype.Wt=function(t,s){var l=this,g=[],C=[];return s.forEach(function(S){C.push(Va(t).get(S).next(function(k){if(null===k)throw Nn();nr(k.userId===l.userId),g.push(Pl(l.R,k))}))}),zt.waitFor(C).next(function(){return g})},o.prototype.removeMutationBatch=function(t,s){var l=this;return du(t.Mt,this.userId,s).next(function(g){return t.addOnCommittedListener(function(){l.Gt(s.batchId)}),zt.forEach(g,function(C){return l.referenceDelegate.markPotentiallyOrphaned(t,C)})})},o.prototype.Gt=function(t){delete this.Kt[t]},o.prototype.performConsistencyCheck=function(t){var s=this;return this.checkEmpty(t).next(function(l){if(!l)return zt.resolve();var g=IDBKeyRange.lowerBound(fi.prefixForUser(s.userId)),C=[];return Nu(t).$t({range:g},function(S,k,K){if(S[0]===s.userId){var ue=Na(S[1]);C.push(ue)}else K.done()}).next(function(){nr(0===C.length)})})},o.prototype.containsKey=function(t,s){return Ua(t,this.userId,s)},o.prototype.zt=function(t){var s=this;return dc(t).get(this.userId).next(function(l){return l||new au(s.userId,-1,"")})},o}();function Ua(o,t,s){var l=fi.prefixForPath(t,s.path),g=l[1],C=IDBKeyRange.lowerBound(l),S=!1;return Nu(o).$t({range:C,Ft:!0},function(k,K,ue){k[0]===t&&k[1]===g&&(S=!0),ue.done()}).next(function(){return S})}function Va(o){return Ss(o,hi.store)}function Nu(o){return Ss(o,fi.store)}function dc(o){return Ss(o,au.store)}var il=function(){function o(t){this.Ht=t}return o.prototype.next=function(){return this.Ht+=2,this.Ht},o.Jt=function(){return new o(0)},o.Yt=function(){return new o(-1)},o}(),Rd=function(){function o(t,s){this.referenceDelegate=t,this.R=s}return o.prototype.allocateTargetId=function(t){var s=this;return this.Xt(t).next(function(l){var g=new il(l.highestTargetId);return l.highestTargetId=g.next(),s.Zt(t,l).next(function(){return l.highestTargetId})})},o.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(s){return x.fromTimestamp(new U(s.lastRemoteSnapshotVersion.seconds,s.lastRemoteSnapshotVersion.nanoseconds))})},o.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(s){return s.highestListenSequenceNumber})},o.prototype.setTargetsMetadata=function(t,s,l){var g=this;return this.Xt(t).next(function(C){return C.highestListenSequenceNumber=s,l&&(C.lastRemoteSnapshotVersion=l.toTimestamp()),s>C.highestListenSequenceNumber&&(C.highestListenSequenceNumber=s),g.Zt(t,C)})},o.prototype.addTargetData=function(t,s){var l=this;return this.te(t,s).next(function(){return l.Xt(t).next(function(g){return g.targetCount+=1,l.ee(s,g),l.Zt(t,g)})})},o.prototype.updateTargetData=function(t,s){return this.te(t,s)},o.prototype.removeTargetData=function(t,s){var l=this;return this.removeMatchingKeysForTargetId(t,s.targetId).next(function(){return kl(t).delete(s.targetId)}).next(function(){return l.Xt(t)}).next(function(g){return nr(g.targetCount>0),g.targetCount-=1,l.Zt(t,g)})},o.prototype.removeTargets=function(t,s,l){var g=this,C=0,S=[];return kl(t).$t(function(k,K){var ue=rl(K);ue.sequenceNumber<=s&&null===l.get(ue.targetId)&&(C++,S.push(g.removeTargetData(t,ue)))}).next(function(){return zt.waitFor(S)}).next(function(){return C})},o.prototype.forEachTarget=function(t,s){return kl(t).$t(function(l,g){var C=rl(g);s(C)})},o.prototype.Xt=function(t){return Lu(t).get(cs.key).next(function(s){return nr(null!==s),s})},o.prototype.Zt=function(t,s){return Lu(t).put(cs.key,s)},o.prototype.te=function(t,s){return kl(t).put(Wc(this.R,s))},o.prototype.ee=function(t,s){var l=!1;return t.targetId>s.highestTargetId&&(s.highestTargetId=t.targetId,l=!0),t.sequenceNumber>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t.sequenceNumber,l=!0),l},o.prototype.getTargetCount=function(t){return this.Xt(t).next(function(s){return s.targetCount})},o.prototype.getTargetData=function(t,s){var l=Xo(s),g=IDBKeyRange.bound([l,Number.NEGATIVE_INFINITY],[l,Number.POSITIVE_INFINITY]),C=null;return kl(t).$t({range:g,index:ao.queryTargetsIndexName},function(S,k,K){var ue=rl(k);yo(s,ue.target)&&(C=ue,K.done())}).next(function(){return C})},o.prototype.addMatchingKeys=function(t,s,l){var g=this,C=[],S=ma(t);return s.forEach(function(k){var K=Ds(k.path);C.push(S.put(new wo(l,K))),C.push(g.referenceDelegate.addReference(t,l,k))}),zt.waitFor(C)},o.prototype.removeMatchingKeys=function(t,s,l){var g=this,C=ma(t);return zt.forEach(s,function(S){var k=Ds(S.path);return zt.waitFor([C.delete([l,k]),g.referenceDelegate.removeReference(t,l,S)])})},o.prototype.removeMatchingKeysForTargetId=function(t,s){var l=ma(t),g=IDBKeyRange.bound([s],[s+1],!1,!0);return l.delete(g)},o.prototype.getMatchingKeysForTargetId=function(t,s){var l=IDBKeyRange.bound([s],[s+1],!1,!0),g=ma(t),C=Lr();return g.$t({range:l,Ft:!0},function(S,k,K){var ue=Na(S[1]),de=new Jn(ue);C=C.add(de)}).next(function(){return C})},o.prototype.containsKey=function(t,s){var l=Ds(s.path),g=IDBKeyRange.bound([l],[Ac(l)],!1,!0),C=0;return ma(t).$t({index:wo.documentTargetsIndex,Ft:!0,range:g},function(S,k,K){0!==S[0]&&(C++,K.done())}).next(function(){return C>0})},o.prototype.lt=function(t,s){return kl(t).get(s).next(function(l){return l?rl(l):null})},o}();function kl(o){return Ss(o,ao.store)}function Lu(o){return Ss(o,cs.store)}function ma(o){return Ss(o,wo.store)}function Ba(o){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(t){if(o.code!==gt.FAILED_PRECONDITION||o.message!==Zc)throw o;return rn("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Yc(o,t){var l=o[1],C=t[1],S=Tr(o[0],t[0]);return 0===S?Tr(l,C):S}var kd=function(){function o(t){this.ne=t,this.buffer=new Mo(Yc),this.se=0}return o.prototype.ie=function(){return++this.se},o.prototype.re=function(t){var s=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(s);else{var l=this.buffer.last();Yc(s,l)<0&&(this.buffer=this.buffer.delete(l).add(s))}},Object.defineProperty(o.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),o}(),vh=function(){function o(t,s){this.garbageCollector=t,this.asyncQueue=s,this.oe=!1,this.ce=null}return o.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},o.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(o.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),o.prototype.ue=function(t){var s=this,l=this.oe?3e5:6e4;rn("LruGarbageCollector","Garbage collection scheduled in "+l+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",l,function(){return(0,X.mG)(s,void 0,void 0,function(){var g;return(0,X.Jh)(this,function(C){switch(C.label){case 0:this.ce=null,this.oe=!0,C.label=1;case 1:return C.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return C.sent(),[3,7];case 3:return el(g=C.sent())?(rn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",g),[3,6]):[3,4];case 4:return[4,Ba(g)];case 5:C.sent(),C.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return C.sent(),[2]}})})})},o}(),Fd=function(){function o(t,s){this.ae=t,this.params=s}return o.prototype.calculateTargetCount=function(t,s){return this.ae.he(t).next(function(l){return Math.floor(s/100*l)})},o.prototype.nthSequenceNumber=function(t,s){var l=this;if(0===s)return zt.resolve(Ho.o);var g=new kd(s);return this.ae.forEachTarget(t,function(C){return g.re(C.sequenceNumber)}).next(function(){return l.ae.le(t,function(C){return g.re(C)})}).next(function(){return g.maxValue})},o.prototype.removeTargets=function(t,s,l){return this.ae.removeTargets(t,s,l)},o.prototype.removeOrphanedDocuments=function(t,s){return this.ae.removeOrphanedDocuments(t,s)},o.prototype.collect=function(t,s){var l=this;return-1===this.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector","Garbage collection skipped; disabled"),zt.resolve(Xs)):this.getCacheSize(t).next(function(g){return g<l.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector","Garbage collection skipped; Cache size "+g+" is lower than threshold "+l.params.cacheSizeCollectionThreshold),Xs):l.fe(t,s)})},o.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},o.prototype.fe=function(t,s){var l,g,C,S,k,K,ue,de=this,Me=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(Be){return Be>de.params.maximumSequenceNumbersToCollect?(rn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+de.params.maximumSequenceNumbersToCollect+" from "+Be),g=de.params.maximumSequenceNumbersToCollect):g=Be,S=Date.now(),de.nthSequenceNumber(t,g)}).next(function(Be){return l=Be,k=Date.now(),de.removeTargets(t,l,s)}).next(function(Be){return C=Be,K=Date.now(),de.removeOrphanedDocuments(t,l)}).next(function(Be){return ue=Date.now(),Ta()<=_t.in.DEBUG&&rn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(S-Me)+"ms\n\tDetermined least recently used "+g+" in "+(k-S)+"ms\n\tRemoved "+C+" targets in "+(K-k)+"ms\n\tRemoved "+Be+" documents in "+(ue-K)+"ms\nTotal Duration: "+(ue-Me)+"ms"),zt.resolve({didRun:!0,sequenceNumbersCollected:g,targetsRemoved:C,documentsRemoved:Be})})},o}(),Gh=function(){function o(t,s){this.db=t,this.garbageCollector=new Fd(this,s)}return o.prototype.he=function(t){var s=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(l){return s.next(function(g){return l+g})})},o.prototype.de=function(t){var s=0;return this.le(t,function(l){s++}).next(function(){return s})},o.prototype.forEachTarget=function(t,s){return this.db.getTargetCache().forEachTarget(t,s)},o.prototype.le=function(t,s){return this.we(t,function(l,g){return s(g)})},o.prototype.addReference=function(t,s,l){return Kc(t,l)},o.prototype.removeReference=function(t,s,l){return Kc(t,l)},o.prototype.removeTargets=function(t,s,l){return this.db.getTargetCache().removeTargets(t,s,l)},o.prototype.markPotentiallyOrphaned=function(t,s){return Kc(t,s)},o.prototype._e=function(t,s){return g=s,C=!1,dc(l=t).Ot(function(S){return Ua(l,S,g).next(function(k){return k&&(C=!0),zt.resolve(!k)})}).next(function(){return C});var l,g,C},o.prototype.removeOrphanedDocuments=function(t,s){var l=this,g=this.db.getRemoteDocumentCache().newChangeBuffer(),C=[],S=0;return this.we(t,function(k,K){if(K<=s){var ue=l._e(t,k).next(function(de){if(!de)return S++,g.getEntry(t,k).next(function(){return g.removeEntry(k),ma(t).delete([0,Ds(k.path)])})});C.push(ue)}}).next(function(){return zt.waitFor(C)}).next(function(){return g.apply(t)}).next(function(){return S})},o.prototype.removeTarget=function(t,s){var l=s.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,l)},o.prototype.updateLimboDocument=function(t,s){return Kc(t,s)},o.prototype.we=function(t,s){var l,g=ma(t),C=Ho.o;return g.$t({index:wo.documentTargetsIndex},function(S,k){var ue=k.path,de=k.sequenceNumber;0===S[0]?(C!==Ho.o&&s(new Jn(Na(l)),C),C=de,l=ue):C=Ho.o}).next(function(){C!==Ho.o&&s(new Jn(Na(l)),C)})},o.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},o}();function Kc(o,t){return ma(o).put((l=o.currentSequenceNumber,new wo(0,Ds(t.path),l)));var l}var ol=function(){function o(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={}}return o.prototype.get=function(t){var s=this.mapKeyFn(t),l=this.inner[s];if(void 0!==l)for(var g=0,C=l;g<C.length;g++){var S=C[g],K=S[1];if(this.equalsFn(S[0],t))return K}},o.prototype.has=function(t){return void 0!==this.get(t)},o.prototype.set=function(t,s){var l=this.mapKeyFn(t),g=this.inner[l];if(void 0!==g){for(var C=0;C<g.length;C++)if(this.equalsFn(g[C][0],t))return void(g[C]=[t,s]);g.push([t,s])}else this.inner[l]=[[t,s]]},o.prototype.delete=function(t){var s=this.mapKeyFn(t),l=this.inner[s];if(void 0===l)return!1;for(var g=0;g<l.length;g++)if(this.equalsFn(l[g][0],t))return 1===l.length?delete this.inner[s]:l.splice(g,1),!0;return!1},o.prototype.forEach=function(t){z(this.inner,function(s,l){for(var g=0,C=l;g<C.length;g++){var S=C[g];t(S[0],S[1])}})},o.prototype.isEmpty=function(){return te(this.inner)},o}(),Nd=function(){function o(){this.changes=new ol(function(t){return t.toString()},function(t,s){return t.isEqual(s)}),this.changesApplied=!1}return o.prototype.getReadTime=function(t){var s=this.changes.get(t);return s?s.readTime:x.min()},o.prototype.addEntry=function(t,s){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:s})},o.prototype.removeEntry=function(t,s){void 0===s&&(s=null),this.assertNotApplied(),this.changes.set(t,{document:ki.newInvalidDocument(t),readTime:s})},o.prototype.getEntry=function(t,s){this.assertNotApplied();var l=this.changes.get(s);return void 0!==l?zt.resolve(l.document):this.getFromCache(t,s)},o.prototype.getEntries=function(t,s){return this.getAllFromCache(t,s)},o.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},o.prototype.assertNotApplied=function(){},o}(),Ld=function(){function o(t,s){this.R=t,this.Ut=s}return o.prototype.addEntry=function(t,s,l){return h(t).put(_(s),l)},o.prototype.removeEntry=function(t,s){var l=h(t),g=_(s);return l.delete(g)},o.prototype.updateMetadata=function(t,s){var l=this;return this.getMetadata(t).next(function(g){return g.byteSize+=s,l.me(t,g)})},o.prototype.getEntry=function(t,s){var l=this;return h(t).get(_(s)).next(function(g){return l.ye(s,g)})},o.prototype.ge=function(t,s){var l=this;return h(t).get(_(s)).next(function(g){return{document:l.ye(s,g),size:Rl(g)}})},o.prototype.getEntries=function(t,s){var l=this,g=Co();return this.pe(t,s,function(C,S){var k=l.ye(C,S);g=g.insert(C,k)}).next(function(){return g})},o.prototype.Ee=function(t,s){var l=this,g=Co(),C=new Go(Jn.comparator);return this.pe(t,s,function(S,k){var K=l.ye(S,k);g=g.insert(S,K),C=C.insert(S,Rl(k))}).next(function(){return{documents:g,Te:C}})},o.prototype.pe=function(t,s,l){if(s.isEmpty())return zt.resolve();var g=IDBKeyRange.bound(s.first().path.toArray(),s.last().path.toArray()),C=s.getIterator(),S=C.getNext();return h(t).$t({range:g},function(k,K,ue){for(var de=Jn.fromSegments(k);S&&Jn.comparator(S,de)<0;)l(S,null),S=C.getNext();S&&S.isEqual(de)&&(l(S,K),S=C.hasNext()?C.getNext():null),S?ue.Ct(S.path.toArray()):ue.done()}).next(function(){for(;S;)l(S,null),S=C.hasNext()?C.getNext():null})},o.prototype.getDocumentsMatchingQuery=function(t,s,l){var g=this,C=Co(),S=s.path.length+1,k={};if(l.isEqual(x.min())){var K=s.path.toArray();k.range=IDBKeyRange.lowerBound(K)}else{var ue=s.path.toArray(),de=cu(l);k.range=IDBKeyRange.lowerBound([ue,de],!0),k.index=Wi.collectionReadTimeIndex}return h(t).$t(k,function(Me,Be,ht){if(Me.length===S){var dt=nl(g.R,Be);s.path.isPrefixOf(dt.key.path)?Xl(s,dt)&&(C=C.insert(dt.key,dt)):ht.done()}}).next(function(){return C})},o.prototype.newChangeBuffer=function(t){return new Qc(this,!!t&&t.trackRemovals)},o.prototype.getSize=function(t){return this.getMetadata(t).next(function(s){return s.byteSize})},o.prototype.getMetadata=function(t){return f(t).get(Ni.key).next(function(s){return nr(!!s),s})},o.prototype.me=function(t,s){return f(t).put(Ni.key,s)},o.prototype.ye=function(t,s){if(s){var l=nl(this.R,s);if(!l.isNoDocument()||!l.version.isEqual(x.min()))return l}return ki.newInvalidDocument(t)},o}(),Qc=function(o){function t(s,l){var g=this;return(g=o.call(this)||this).Ie=s,g.trackRemovals=l,g.Ae=new ol(function(C){return C.toString()},function(C,S){return C.isEqual(S)}),g}return(0,X.ZT)(t,o),t.prototype.applyChanges=function(s){var l=this,g=[],C=0,S=new Mo(function(k,K){return Tr(k.canonicalString(),K.canonicalString())});return this.changes.forEach(function(k,K){var ue=l.Ae.get(k);if(K.document.isValidDocument()){var de=ts(l.Ie.R,K.document,l.getReadTime(k));S=S.add(k.path.popLast());var Me=Rl(de);C+=Me-ue,g.push(l.Ie.addEntry(s,k,de))}else if(C-=ue,l.trackRemovals){var Be=ts(l.Ie.R,ki.newNoDocument(k,x.min()),l.getReadTime(k));g.push(l.Ie.addEntry(s,k,Be))}else g.push(l.Ie.removeEntry(s,k))}),S.forEach(function(k){g.push(l.Ie.Ut.addToCollectionParentIndex(s,k))}),g.push(this.Ie.updateMetadata(s,C)),zt.waitFor(g)},t.prototype.getFromCache=function(s,l){var g=this;return this.Ie.ge(s,l).next(function(C){return g.Ae.set(l,C.size),C.document})},t.prototype.getAllFromCache=function(s,l){var g=this;return this.Ie.Ee(s,l).next(function(C){var S=C.documents;return C.Te.forEach(function(k,K){g.Ae.set(k,K)}),S})},t}(Nd);function f(o){return Ss(o,Ni.store)}function h(o){return Ss(o,Wi.store)}function _(o){return o.path.toArray()}var w=function(){function o(t){this.R=t}return o.prototype.Rt=function(t,s,l,g){var C=this;nr(l<g&&l>=0&&g<=11);var K,S=new qc("createOrUpgrade",s);l<1&&g>=1&&(t.createObjectStore(Lo.store),(K=t).createObjectStore(au.store,{keyPath:au.keyPath}),K.createObjectStore(hi.store,{keyPath:hi.keyPath,autoIncrement:!0}).createIndex(hi.userMutationsIndex,hi.userMutationsKeyPath,{unique:!0}),K.createObjectStore(fi.store),m(t),function(K){K.createObjectStore(Wi.store)}(t));var k=zt.resolve();return l<3&&g>=3&&(0!==l&&(function(K){K.deleteObjectStore(wo.store),K.deleteObjectStore(ao.store),K.deleteObjectStore(cs.store)}(t),m(t)),k=k.next(function(){return function(K){var ue=K.store(cs.store),de=new cs(0,0,x.min().toTimestamp(),0);return ue.put(cs.key,de)}(S)})),l<4&&g>=4&&(0!==l&&(k=k.next(function(){return function(K,ue){return ue.store(hi.store).Nt().next(function(de){K.deleteObjectStore(hi.store),K.createObjectStore(hi.store,{keyPath:hi.keyPath,autoIncrement:!0}).createIndex(hi.userMutationsIndex,hi.userMutationsKeyPath,{unique:!0});var Me=ue.store(hi.store),Be=de.map(function(ht){return Me.put(ht)});return zt.waitFor(Be)})}(t,S)})),k=k.next(function(){!function(K){K.createObjectStore(Bs.store,{keyPath:Bs.keyPath})}(t)})),l<5&&g>=5&&(k=k.next(function(){return C.Re(S)})),l<6&&g>=6&&(k=k.next(function(){return function(K){K.createObjectStore(Ni.store)}(t),C.be(S)})),l<7&&g>=7&&(k=k.next(function(){return C.ve(S)})),l<8&&g>=8&&(k=k.next(function(){return C.Pe(t,S)})),l<9&&g>=9&&(k=k.next(function(){(function(K){K.objectStoreNames.contains("remoteDocumentChanges")&&K.deleteObjectStore("remoteDocumentChanges")})(t),function(K){var ue=K.objectStore(Wi.store);ue.createIndex(Wi.readTimeIndex,Wi.readTimeIndexPath,{unique:!1}),ue.createIndex(Wi.collectionReadTimeIndex,Wi.collectionReadTimeIndexPath,{unique:!1})}(s)})),l<10&&g>=10&&(k=k.next(function(){return C.Ve(S)})),l<11&&g>=11&&(k=k.next(function(){(function(K){K.createObjectStore(Xu.store,{keyPath:Xu.keyPath})})(t),function(K){K.createObjectStore(Pu.store,{keyPath:Pu.keyPath})}(t)})),k},o.prototype.be=function(t){var s=0;return t.store(Wi.store).$t(function(l,g){s+=Rl(g)}).next(function(){var l=new Ni(s);return t.store(Ni.store).put(Ni.key,l)})},o.prototype.Re=function(t){var s=this,l=t.store(au.store),g=t.store(hi.store);return l.Nt().next(function(C){return zt.forEach(C,function(S){var k=IDBKeyRange.bound([S.userId,-1],[S.userId,S.lastAcknowledgedBatchId]);return g.Nt(hi.userMutationsIndex,k).next(function(K){return zt.forEach(K,function(ue){nr(ue.userId===S.userId);var de=Pl(s.R,ue);return du(t,S.userId,de).next(function(){})})})})})},o.prototype.ve=function(t){var s=t.store(wo.store),l=t.store(Wi.store);return t.store(cs.store).get(cs.key).next(function(g){var C=[];return l.$t(function(S,k){var K=new Te(S),ue=[0,Ds(K)];C.push(s.get(ue).next(function(de){return de?zt.resolve():s.put(new wo(0,Ds(K),g.highestListenSequenceNumber))}))}).next(function(){return zt.waitFor(C)})})},o.prototype.Pe=function(t,s){t.createObjectStore(qo.store,{keyPath:qo.keyPath});var l=s.store(qo.store),g=new xd,C=function(S){if(g.add(S)){var k=S.lastSegment(),K=S.popLast();return l.put({collectionId:k,parent:Ds(K)})}};return s.store(Wi.store).$t({Ft:!0},function(S,k){var K=new Te(S);return C(K.popLast())}).next(function(){return s.store(fi.store).$t({Ft:!0},function(S,k){var ue=Na(S[1]);return C(ue.popLast())})})},o.prototype.Ve=function(t){var s=this,l=t.store(ao.store);return l.$t(function(g,C){var S=rl(C),k=Wc(s.R,S);return l.put(k)})},o}();function m(o){o.createObjectStore(wo.store,{keyPath:wo.keyPath}).createIndex(wo.documentTargetsIndex,wo.documentTargetsKeyPath,{unique:!0}),o.createObjectStore(ao.store,{keyPath:ao.keyPath}).createIndex(ao.queryTargetsIndexName,ao.queryTargetsKeyPath,{unique:!0}),o.createObjectStore(cs.store)}var v="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",d=function(){function o(t,s,l,g,C,S,k,K,ue,de){if(this.allowTabSynchronization=t,this.persistenceKey=s,this.clientId=l,this.Se=C,this.window=S,this.document=k,this.De=ue,this.Ce=de,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(Me){return Promise.resolve()},!o.yt())throw new Lt(gt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gh(this,g),this.Le=s+"main",this.R=new js(K),this.Be=new lu(this.Le,11,new w(this.R)),this.qe=new Rd(this.referenceDelegate,this.R),this.Ut=new Pd,this.Ue=new Ld(this.R,this.Ut),this.Ke=new jh,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===de&&$i("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return o.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Lt(gt.FAILED_PRECONDITION,v);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(s){return t.qe.getHighestSequenceNumber(s)})}).then(function(s){t.Ne=new Ho(s,t.De)}).then(function(){t.xe=!0}).catch(function(s){return t.Be&&t.Be.close(),Promise.reject(s)})},o.prototype.He=function(t){var s=this;return this.Me=function(l){return(0,X.mG)(s,void 0,void 0,function(){return(0,X.Jh)(this,function(g){return this.started?[2,t(l)]:[2]})})},t(this.isPrimary)},o.prototype.setDatabaseDeletedListener=function(t){var s=this;this.Be.vt(function(l){return(0,X.mG)(s,void 0,void 0,function(){return(0,X.Jh)(this,function(g){switch(g.label){case 0:return null===l.newVersion?[4,t()]:[3,2];case 1:g.sent(),g.label=2;case 2:return[2]}})})})},o.prototype.setNetworkEnabled=function(t){var s=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,X.mG)(s,void 0,void 0,function(){return(0,X.Jh)(this,function(l){switch(l.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})}))},o.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(s){return M(s).put(new Bs(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(s).next(function(l){l||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(s)}).next(function(l){return t.isPrimary&&!l?t.Xe(s).next(function(){return!1}):!!l&&t.Ze(s).next(function(){return!0})})}).catch(function(s){if(el(s))return rn("IndexedDbPersistence","Failed to extend owner lease: ",s),t.isPrimary;if(!t.allowTabSynchronization)throw s;return rn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",s),!1}).then(function(s){t.isPrimary!==s&&t.Se.enqueueRetryable(function(){return t.Me(s)}),t.isPrimary=s})},o.prototype.Je=function(t){var s=this;return b(t).get(Lo.key).next(function(l){return zt.resolve(s.tn(l))})},o.prototype.en=function(t){return M(t).delete(this.clientId)},o.prototype.nn=function(){return(0,X.mG)(this,void 0,void 0,function(){var t,s,l,C=this;return(0,X.Jh)(this,function(S){switch(S.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(k){var K=Ss(k,Bs.store);return K.Nt().next(function(ue){var de=C.rn(ue,18e5),Me=ue.filter(function(Be){return-1===de.indexOf(Be)});return zt.forEach(Me,function(Be){return K.delete(Be.clientId)}).next(function(){return Me})})}).catch(function(){return[]})]);case 1:if(t=S.sent(),this.Qe)for(s=0,l=t;s<l.length;s++)this.Qe.removeItem(this.on(l[s].clientId));S.label=2;case 2:return[2]}})})},o.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},o.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},o.prototype.Ye=function(t){var s=this;return this.Ce?zt.resolve(!0):b(t).get(Lo.key).next(function(l){if(null!==l&&s.sn(l.leaseTimestampMs,5e3)&&!s.cn(l.ownerId)){if(s.tn(l)&&s.networkEnabled)return!0;if(!s.tn(l)){if(!l.allowTabSynchronization)throw new Lt(gt.FAILED_PRECONDITION,v);return!1}}return!(!s.networkEnabled||!s.inForeground)||M(t).Nt().next(function(g){return void 0===s.rn(g,5e3).find(function(C){return!(s.clientId===C.clientId||!(!s.networkEnabled&&C.networkEnabled||!s.inForeground&&C.inForeground&&s.networkEnabled===C.networkEnabled))})})}).next(function(l){return s.isPrimary!==l&&rn("IndexedDbPersistence","Client "+(l?"is":"is not")+" eligible for a primary lease."),l})},o.prototype.shutdown=function(){return(0,X.mG)(this,void 0,void 0,function(){var t=this;return(0,X.Jh)(this,function(s){switch(s.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Lo.store,Bs.store],function(l){var g=new tl(l,Ho.o);return t.Xe(g).next(function(){return t.en(g)})})];case 1:return s.sent(),this.Be.close(),this.ln(),[2]}})})},o.prototype.rn=function(t,s){var l=this;return t.filter(function(g){return l.sn(g.updateTimeMs,s)&&!l.cn(g.clientId)})},o.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(s){return M(s).Nt().next(function(l){return t.rn(l,18e5).map(function(g){return g.clientId})})})},Object.defineProperty(o.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),o.prototype.getMutationQueue=function(t){return hu.Qt(t,this.R,this.Ut,this.referenceDelegate)},o.prototype.getTargetCache=function(){return this.qe},o.prototype.getRemoteDocumentCache=function(){return this.Ue},o.prototype.getIndexManager=function(){return this.Ut},o.prototype.getBundleCache=function(){return this.Ke},o.prototype.runTransaction=function(t,s,l){var C,g=this;return rn("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===s?"readonly":"readwrite",mh,function(k){return C=new tl(k,g.Ne?g.Ne.next():Ho.o),"readwrite-primary"===s?g.Je(C).next(function(K){return!!K||g.Ye(C)}).next(function(K){if(!K)throw $i("Failed to obtain primary lease for action '"+t+"'."),g.isPrimary=!1,g.Se.enqueueRetryable(function(){return g.Me(!1)}),new Lt(gt.FAILED_PRECONDITION,Zc);return l(C)}).next(function(K){return g.Ze(C).next(function(){return K})}):g.dn(C).next(function(){return l(C)})}).then(function(k){return C.raiseOnCommittedEvent(),k})},o.prototype.dn=function(t){var s=this;return b(t).get(Lo.key).next(function(l){if(null!==l&&s.sn(l.leaseTimestampMs,5e3)&&!s.cn(l.ownerId)&&!s.tn(l)&&!(s.Ce||s.allowTabSynchronization&&l.allowTabSynchronization))throw new Lt(gt.FAILED_PRECONDITION,v)})},o.prototype.Ze=function(t){var s=new Lo(this.clientId,this.allowTabSynchronization,Date.now());return b(t).put(Lo.key,s)},o.yt=function(){return lu.yt()},o.prototype.Xe=function(t){var s=this,l=b(t);return l.get(Lo.key).next(function(g){return s.tn(g)?(rn("IndexedDbPersistence","Releasing primary lease."),l.delete(Lo.key)):zt.resolve()})},o.prototype.sn=function(t,s){var l=Date.now();return!(t<l-s||t>l&&($i("Detected an update time that is in the future: "+t+" > "+l),1))},o.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},o.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},o.prototype.Ge=function(){var t,s=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){s.un(),(0,Re.G6)()&&navigator.appVersion.match("Version/14")&&s.Se.enterRestrictedMode(!0),s.Se.enqueueAndForget(function(){return s.shutdown()})},this.window.addEventListener("pagehide",this.ke))},o.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},o.prototype.cn=function(t){var s;try{var l=null!==(null===(s=this.Qe)||void 0===s?void 0:s.getItem(this.on(t)));return rn("IndexedDbPersistence","Client '"+t+"' "+(l?"is":"is not")+" zombied in LocalStorage"),l}catch(g){return $i("IndexedDbPersistence","Failed to get zombied client id.",g),!1}},o.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){$i("Failed to set zombie client id.",t)}},o.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},o.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},o}();function b(o){return Ss(o,Lo.store)}function M(o){return Ss(o,Bs.store)}function V(o,t){var s=o.projectId;return o.isDefaultDatabase||(s+="."+o.database),"firestore/"+t+"/"+s+"/"}var J=function(o,t){this.progress=o,this.wn=t},we=function(){function o(t,s,l){this.Ue=t,this._n=s,this.Ut=l}return o.prototype.mn=function(t,s){var l=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,s).next(function(g){return l.yn(t,s,g)})},o.prototype.yn=function(t,s,l){return this.Ue.getEntry(t,s).next(function(g){for(var C=0,S=l;C<S.length;C++)S[C].applyToLocalView(g);return g})},o.prototype.gn=function(t,s){t.forEach(function(l,g){for(var C=0,S=s;C<S.length;C++)S[C].applyToLocalView(g)})},o.prototype.pn=function(t,s){var l=this;return this.Ue.getEntries(t,s).next(function(g){return l.En(t,g).next(function(){return g})})},o.prototype.En=function(t,s){var l=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,s).next(function(g){return l.gn(s,g)})},o.prototype.getDocumentsMatchingQuery=function(t,s,l){return Jn.isDocumentKey((g=s).path)&&null===g.collectionGroup&&0===g.filters.length?this.Tn(t,s.path):tu(s)?this.In(t,s,l):this.An(t,s,l);var g},o.prototype.Tn=function(t,s){return this.mn(t,new Jn(s)).next(function(l){var g=xa();return l.isFoundDocument()&&(g=g.insert(l.key,l)),g})},o.prototype.In=function(t,s,l){var g=this,C=s.collectionGroup,S=xa();return this.Ut.getCollectionParents(t,C).next(function(k){return zt.forEach(k,function(K){var de,Me,ue=(de=s,Me=K.child(C),new ua(Me,null,de.explicitOrderBy.slice(),de.filters.slice(),de.limit,de.limitType,de.startAt,de.endAt));return g.An(t,ue,l).next(function(de){de.forEach(function(Me,Be){S=S.insert(Me,Be)})})}).next(function(){return S})})},o.prototype.An=function(t,s,l){var g,C,S=this;return this.Ue.getDocumentsMatchingQuery(t,s,l).next(function(k){return g=k,S._n.getAllMutationBatchesAffectingQuery(t,s)}).next(function(k){return S.Rn(t,C=k,g).next(function(K){g=K;for(var ue=0,de=C;ue<de.length;ue++)for(var Me=de[ue],Be=0,ht=Me.mutations;Be<ht.length;Be++){var dt=ht[Be],Dt=dt.key,en=g.get(Dt);null==en&&(en=ki.newInvalidDocument(Dt),g=g.insert(Dt,en)),kc(dt,en,Me.localWriteTime),en.isFoundDocument()||(g=g.remove(Dt))}})}).next(function(){return g.forEach(function(k,K){Xl(s,K)||(g=g.remove(k))}),g})},o.prototype.Rn=function(t,s,l){for(var g=Lr(),C=0,S=s;C<S.length;C++)for(var k=0,K=S[C].mutations;k<K.length;k++){var ue=K[k];ue instanceof Ts&&null===l.get(ue.key)&&(g=g.add(ue.key))}var de=l;return this.Ue.getEntries(t,g).next(function(Me){return Me.forEach(function(Be,ht){ht.isFoundDocument()&&(de=de.insert(Be,ht))}),de})},o}(),Oe=function(){function o(t,s,l,g){this.targetId=t,this.fromCache=s,this.bn=l,this.vn=g}return o.Pn=function(t,s){for(var l=Lr(),g=Lr(),C=0,S=s.docChanges;C<S.length;C++){var k=S[C];switch(k.type){case 0:l=l.add(k.doc.key);break;case 1:g=g.add(k.doc.key)}}return new o(t,s.fromCache,l,g)},o}(),et=function(){function o(){}return o.prototype.Vn=function(t){this.Sn=t},o.prototype.getDocumentsMatchingQuery=function(t,s,l,g){var S,C=this;return 0===(S=s).filters.length&&null===S.limit&&null==S.startAt&&null==S.endAt&&(0===S.explicitOrderBy.length||1===S.explicitOrderBy.length&&S.explicitOrderBy[0].field.isKeyField())||l.isEqual(x.min())?this.Dn(t,s):this.Sn.pn(t,g).next(function(S){var k=C.Cn(s,S);return(bu(s)||Sa(s))&&C.Nn(s.limitType,k,g,l)?C.Dn(t,s):(Ta()<=_t.in.DEBUG&&rn("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Wu(s)),C.Sn.getDocumentsMatchingQuery(t,s,l).next(function(K){return k.forEach(function(ue){K=K.insert(ue.key,ue)}),K}))})},o.prototype.Cn=function(t,s){var l=new Mo(Eu(t));return s.forEach(function(g,C){Xl(t,C)&&(l=l.add(C))}),l},o.prototype.Nn=function(t,s,l,g){if(l.size!==s.size)return!0;var C="F"===t?s.last():s.first();return!!C&&(C.hasPendingWrites||C.version.compareTo(g)>0)},o.prototype.Dn=function(t,s){return Ta()<=_t.in.DEBUG&&rn("QueryEngine","Using full collection scan to execute query:",Wu(s)),this.Sn.getDocumentsMatchingQuery(t,s,x.min())},o}(),yt=function(){function o(t,s,l,g){this.persistence=t,this.xn=s,this.R=g,this.kn=new Go(Tr),this.Fn=new ol(function(C){return Xo(C)},yo),this.$n=x.min(),this._n=t.getMutationQueue(l),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new we(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return o.prototype.collectGarbage=function(t){var s=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(l){return t.collect(l,s.kn)})},o}();function $t(o,t,s,l){return new yt(o,t,s,l)}function gn(o,t){return(0,X.mG)(this,void 0,void 0,function(){var s,l,g,C;return(0,X.Jh)(this,function(S){switch(S.label){case 0:return s=on(o),l=s._n,g=s.Mn,[4,s.persistence.runTransaction("Handle user change","readonly",function(k){var K;return s._n.getAllMutationBatches(k).next(function(ue){return K=ue,l=s.persistence.getMutationQueue(t),g=new we(s.On,l,s.persistence.getIndexManager()),l.getAllMutationBatches(k)}).next(function(ue){for(var de=[],Me=[],Be=Lr(),ht=0,dt=K;ht<dt.length;ht++){var Dt=dt[ht];de.push(Dt.batchId);for(var en=0,fn=Dt.mutations;en<fn.length;en++)Be=Be.add(fn[en].key)}for(var or=0,Jr=ue;or<Jr.length;or++){var pi=Jr[or];Me.push(pi.batchId);for(var Hi=0,Ms=pi.mutations;Hi<Ms.length;Hi++)Be=Be.add(Ms[Hi].key)}return g.pn(k,Be).next(function(Ph){return{Ln:Ph,removedBatchIds:de,addedBatchIds:Me}})})})];case 1:return C=S.sent(),[2,(s._n=l,s.Mn=g,s.xn.Vn(s.Mn),C)]}})})}function Gn(o,t){var s=on(o);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(l){var S,k,K,ue,de,Me,Be,g=t.batch.keys(),C=s.On.newChangeBuffer({trackRemovals:!0});return(S=s,k=l,K=t,ue=C,de=K.batch,Me=de.keys(),Be=zt.resolve(),Me.forEach(function(ht){Be=Be.next(function(){return ue.getEntry(k,ht)}).next(function(dt){var Dt=K.docVersions.get(ht);nr(null!==Dt),dt.version.compareTo(Dt)<0&&(de.applyToRemoteDocument(dt,K),dt.isValidDocument()&&ue.addEntry(dt,K.commitVersion))})}),Be.next(function(){return S._n.removeMutationBatch(k,de)})).next(function(){return C.apply(l)}).next(function(){return s._n.performConsistencyCheck(l)}).next(function(){return s.Mn.pn(l,g)})})}function qr(o){var t=on(o);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(s){return t.qe.getLastRemoteSnapshotVersion(s)})}function Yi(o,t){var s=on(o),l=t.snapshotVersion,g=s.kn;return s.persistence.runTransaction("Apply remote event","readwrite-primary",function(C){var S=s.On.newChangeBuffer({trackRemovals:!0});g=s.kn;var k=[];t.targetChanges.forEach(function(de,Me){var Dt,en,fn,Be=g.get(Me);if(Be){k.push(s.qe.removeMatchingKeys(C,de.removedDocuments,Me).next(function(){return s.qe.addMatchingKeys(C,de.addedDocuments,Me)}));var ht=de.resumeToken;if(ht.approximateByteSize()>0){var dt=Be.withResumeToken(ht,l).withSequenceNumber(C.currentSequenceNumber);g=g.insert(Me,dt),Dt=Be,fn=de,nr((en=dt).resumeToken.approximateByteSize()>0),(0===Dt.resumeToken.approximateByteSize()||en.snapshotVersion.toMicroseconds()-Dt.snapshotVersion.toMicroseconds()>=3e8||fn.addedDocuments.size+fn.modifiedDocuments.size+fn.removedDocuments.size>0)&&k.push(s.qe.updateTargetData(C,dt))}}});var K=Co();if(t.documentUpdates.forEach(function(de,Me){t.resolvedLimboDocuments.has(de)&&k.push(s.persistence.referenceDelegate.updateLimboDocument(C,de))}),k.push(Gs(C,S,t.documentUpdates,l,void 0).next(function(de){K=de})),!l.isEqual(x.min())){var ue=s.qe.getLastRemoteSnapshotVersion(C).next(function(de){return s.qe.setTargetsMetadata(C,C.currentSequenceNumber,l)});k.push(ue)}return zt.waitFor(k).next(function(){return S.apply(C)}).next(function(){return s.Mn.En(C,K)}).next(function(){return K})}).then(function(C){return s.kn=g,C})}function Gs(o,t,s,l,g){var C=Lr();return s.forEach(function(S){return C=C.add(S)}),t.getEntries(o,C).next(function(S){var k=Co();return s.forEach(function(K,ue){var de=S.get(K),Me=(null==g?void 0:g.get(K))||l;ue.isNoDocument()&&ue.version.isEqual(x.min())?(t.removeEntry(K,Me),k=k.insert(K,ue)):!de.isValidDocument()||ue.version.compareTo(de.version)>0||0===ue.version.compareTo(de.version)&&de.hasPendingWrites?(t.addEntry(ue,Me),k=k.insert(K,ue)):rn("LocalStore","Ignoring outdated watch update for ",K,". Current version:",de.version," Watch version:",ue.version)}),k})}function sl(o,t){var s=on(o);return s.persistence.runTransaction("Get next mutation batch","readonly",function(l){return void 0===t&&(t=-1),s._n.getNextMutationBatchAfterBatchId(l,t)})}function Zs(o,t){var s=on(o);return s.persistence.runTransaction("Allocate target","readwrite",function(l){var g;return s.qe.getTargetData(l,t).next(function(C){return C?zt.resolve(g=C):s.qe.allocateTargetId(l).next(function(S){return g=new La(t,S,0,l.currentSequenceNumber),s.qe.addTargetData(l,g).next(function(){return g})})})}).then(function(l){var g=s.kn.get(l.targetId);return(null===g||l.snapshotVersion.compareTo(g.snapshotVersion)>0)&&(s.kn=s.kn.insert(l.targetId,l),s.Fn.set(t,l.targetId)),l})}function Io(o,t,s){return(0,X.mG)(this,void 0,void 0,function(){var l,g,C,S;return(0,X.Jh)(this,function(k){switch(k.label){case 0:l=on(o),g=l.kn.get(t),C=s?"readwrite":"readwrite-primary",k.label=1;case 1:return k.trys.push([1,4,,5]),s?[3,3]:[4,l.persistence.runTransaction("Release target",C,function(K){return l.persistence.referenceDelegate.removeTarget(K,g)})];case 2:k.sent(),k.label=3;case 3:return[3,5];case 4:if(!el(S=k.sent()))throw S;return rn("LocalStore","Failed to update sequence numbers for target "+t+": "+S),[3,5];case 5:return l.kn=l.kn.remove(t),l.Fn.delete(g.target),[2]}})})}function hc(o,t,s){var l=on(o),g=x.min(),C=Lr();return l.persistence.runTransaction("Execute query","readonly",function(S){return(k=l,K=S,ue=ko(t),de=on(k),Me=de.Fn.get(ue),void 0!==Me?zt.resolve(de.kn.get(Me)):de.qe.getTargetData(K,ue)).next(function(k){if(k)return g=k.lastLimboFreeSnapshotVersion,l.qe.getMatchingKeysForTargetId(S,k.targetId).next(function(K){C=K})}).next(function(){return l.xn.getDocumentsMatchingQuery(S,t,s?g:x.min(),s?C:Lr())}).next(function(k){return{documents:k,Bn:C}});var k,K,ue,de,Me})}function Nf(o,t){var s=on(o),l=on(s.qe),g=s.kn.get(t);return g?Promise.resolve(g.target):s.persistence.runTransaction("Get target data","readonly",function(C){return l.lt(C,t).next(function(S){return S?S.target:null})})}function ig(o){var t=on(o);return t.persistence.runTransaction("Get new document changes","readonly",function(s){return g=s,C=t.$n,S=on(t.On),k=Co(),K=cu(C),ue=h(g),de=IDBKeyRange.lowerBound(K,!0),ue.$t({index:Wi.readTimeIndex,range:de},function(Me,Be){var ht=nl(S.R,Be);k=k.insert(ht.key,ht),K=Be.readTime}).next(function(){return{wn:k,readTime:$c(K)}});var g,C,S,k,K,ue,de}).then(function(s){var l=s.wn;return t.$n=s.readTime,l})}function t_(o){return(0,X.mG)(this,void 0,void 0,function(){var t;return(0,X.Jh)(this,function(s){return[2,(t=on(o)).persistence.runTransaction("Synchronize last document change read time","readonly",function(l){return C=h(l),S=x.min(),C.$t({index:Wi.readTimeIndex,reverse:!0},function(k,K,ue){K.readTime&&(S=$c(K.readTime)),ue.done()}).next(function(){return S});var C,S}).then(function(l){t.$n=l})]})})}function og(o,t,s,l){return(0,X.mG)(this,void 0,void 0,function(){var g,C,S,k,K,ue,de,Me,Be,ht;return(0,X.Jh)(this,function(dt){switch(dt.label){case 0:for(g=on(o),C=Lr(),S=Co(),k=nc(),K=0,ue=s;K<ue.length;K++)Me=t.qn((de=ue[K]).metadata.name),de.document&&(C=C.add(Me)),S=S.insert(Me,t.Un(de)),k=k.insert(Me,t.Kn(de.metadata.readTime));return Be=g.On.newChangeBuffer({trackRemovals:!0}),[4,Zs(g,(Dt=l,ko(Ks(Te.fromString("__bundle__/docs/"+Dt)))))];case 1:return ht=dt.sent(),[2,g.persistence.runTransaction("Apply bundle documents","readwrite",function(Dt){return Gs(Dt,Be,S,x.min(),k).next(function(en){return Be.apply(Dt),en}).next(function(en){return g.qe.removeMatchingKeysForTargetId(Dt,ht.targetId).next(function(){return g.qe.addMatchingKeys(Dt,C,ht.targetId)}).next(function(){return g.Mn.En(Dt,en)}).next(function(){return en})})})]}var Dt})})}function Lf(o,t,s){return void 0===s&&(s=Lr()),(0,X.mG)(this,void 0,void 0,function(){var l,g;return(0,X.Jh)(this,function(C){switch(C.label){case 0:return[4,Zs(o,ko(cc(t.bundledQuery)))];case 1:return l=C.sent(),[2,(g=on(o)).persistence.runTransaction("Save named query","readwrite",function(S){var k=Fi(t.readTime);if(l.snapshotVersion.compareTo(k)>=0)return g.Ke.saveNamedQuery(S,t);var K=l.withResumeToken(ur.EMPTY_BYTE_STRING,k);return g.kn=g.kn.insert(K.targetId,K),g.qe.updateTargetData(S,K).next(function(){return g.qe.removeMatchingKeysForTargetId(S,l.targetId)}).next(function(){return g.qe.addMatchingKeys(S,s,l.targetId)}).next(function(){return g.Ke.saveNamedQuery(S,t)})})]}})})}var sg=function(){function o(t){this.R=t,this.Qn=new Map,this.jn=new Map}return o.prototype.getBundleMetadata=function(t,s){return zt.resolve(this.Qn.get(s))},o.prototype.saveBundleMetadata=function(t,s){var l;return this.Qn.set(s.id,{id:(l=s).id,version:l.version,createTime:Fi(l.createTime)}),zt.resolve()},o.prototype.getNamedQuery=function(t,s){return zt.resolve(this.jn.get(s))},o.prototype.saveNamedQuery=function(t,s){return this.jn.set(s.name,{name:(l=s).name,query:cc(l.bundledQuery),readTime:Fi(l.readTime)}),zt.resolve();var l},o}(),ag=function(){function o(){this.Wn=new Mo(ds.Gn),this.zn=new Mo(ds.Hn)}return o.prototype.isEmpty=function(){return this.Wn.isEmpty()},o.prototype.addReference=function(t,s){var l=new ds(t,s);this.Wn=this.Wn.add(l),this.zn=this.zn.add(l)},o.prototype.Jn=function(t,s){var l=this;t.forEach(function(g){return l.addReference(g,s)})},o.prototype.removeReference=function(t,s){this.Yn(new ds(t,s))},o.prototype.Xn=function(t,s){var l=this;t.forEach(function(g){return l.removeReference(g,s)})},o.prototype.Zn=function(t){var s=this,l=new Jn(new Te([])),g=new ds(l,t),C=new ds(l,t+1),S=[];return this.zn.forEachInRange([g,C],function(k){s.Yn(k),S.push(k.key)}),S},o.prototype.ts=function(){var t=this;this.Wn.forEach(function(s){return t.Yn(s)})},o.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},o.prototype.es=function(t){var s=new Jn(new Te([])),l=new ds(s,t),g=new ds(s,t+1),C=Lr();return this.zn.forEachInRange([l,g],function(S){C=C.add(S.key)}),C},o.prototype.containsKey=function(t){var s=new ds(t,0),l=this.Wn.firstAfterOrEqual(s);return null!==l&&t.isEqual(l.key)},o}(),ds=function(){function o(t,s){this.key=t,this.ns=s}return o.Gn=function(t,s){return Jn.comparator(t.key,s.key)||Tr(t.ns,s.ns)},o.Hn=function(t,s){return Tr(t.ns,s.ns)||Jn.comparator(t.key,s.key)},o}(),n_=function(){function o(t,s){this.Ut=t,this.referenceDelegate=s,this._n=[],this.ss=1,this.rs=new Mo(ds.Gn)}return o.prototype.checkEmpty=function(t){return zt.resolve(0===this._n.length)},o.prototype.addMutationBatch=function(t,s,l,g){var C=this.ss;this.ss++;var S=new lc(C,s,l,g);this._n.push(S);for(var k=0,K=g;k<K.length;k++){var ue=K[k];this.rs=this.rs.add(new ds(ue.key,C)),this.Ut.addToCollectionParentIndex(t,ue.key.path.popLast())}return zt.resolve(S)},o.prototype.lookupMutationBatch=function(t,s){return zt.resolve(this.os(s))},o.prototype.getNextMutationBatchAfterBatchId=function(t,s){var g=this.cs(s+1),C=g<0?0:g;return zt.resolve(this._n.length>C?this._n[C]:null)},o.prototype.getHighestUnacknowledgedBatchId=function(){return zt.resolve(0===this._n.length?-1:this.ss-1)},o.prototype.getAllMutationBatches=function(t){return zt.resolve(this._n.slice())},o.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,s){var l=this,g=new ds(s,0),C=new ds(s,Number.POSITIVE_INFINITY),S=[];return this.rs.forEachInRange([g,C],function(k){var K=l.os(k.ns);S.push(K)}),zt.resolve(S)},o.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,s){var l=this,g=new Mo(Tr);return s.forEach(function(C){var S=new ds(C,0),k=new ds(C,Number.POSITIVE_INFINITY);l.rs.forEachInRange([S,k],function(K){g=g.add(K.ns)})}),zt.resolve(this.us(g))},o.prototype.getAllMutationBatchesAffectingQuery=function(t,s){var l=s.path,g=l.length+1,C=l;Jn.isDocumentKey(C)||(C=C.child(""));var S=new ds(new Jn(C),0),k=new Mo(Tr);return this.rs.forEachWhile(function(K){var ue=K.key.path;return!!l.isPrefixOf(ue)&&(ue.length===g&&(k=k.add(K.ns)),!0)},S),zt.resolve(this.us(k))},o.prototype.us=function(t){var s=this,l=[];return t.forEach(function(g){var C=s.os(g);null!==C&&l.push(C)}),l},o.prototype.removeMutationBatch=function(t,s){var l=this;nr(0===this.hs(s.batchId,"removed")),this._n.shift();var g=this.rs;return zt.forEach(s.mutations,function(C){var S=new ds(C.key,s.batchId);return g=g.delete(S),l.referenceDelegate.markPotentiallyOrphaned(t,C.key)}).next(function(){l.rs=g})},o.prototype.Gt=function(t){},o.prototype.containsKey=function(t,s){var l=new ds(s,0),g=this.rs.firstAfterOrEqual(l);return zt.resolve(s.isEqual(g&&g.key))},o.prototype.performConsistencyCheck=function(t){return zt.resolve()},o.prototype.hs=function(t,s){return this.cs(t)},o.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},o.prototype.os=function(t){var s=this.cs(t);return s<0||s>=this._n.length?null:this._n[s]},o}(),ug=function(){function o(t,s){this.Ut=t,this.ls=s,this.docs=new Go(Jn.comparator),this.size=0}return o.prototype.addEntry=function(t,s,l){var g=s.key,C=this.docs.get(g),S=C?C.size:0,k=this.ls(s);return this.docs=this.docs.insert(g,{document:s.clone(),size:k,readTime:l}),this.size+=k-S,this.Ut.addToCollectionParentIndex(t,g.path.popLast())},o.prototype.removeEntry=function(t){var s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)},o.prototype.getEntry=function(t,s){var l=this.docs.get(s);return zt.resolve(l?l.document.clone():ki.newInvalidDocument(s))},o.prototype.getEntries=function(t,s){var l=this,g=Co();return s.forEach(function(C){var S=l.docs.get(C);g=g.insert(C,S?S.document.clone():ki.newInvalidDocument(C))}),zt.resolve(g)},o.prototype.getDocumentsMatchingQuery=function(t,s,l){for(var g=Co(),C=new Jn(s.path.child("")),S=this.docs.getIteratorFrom(C);S.hasNext();){var k=S.getNext(),ue=k.value,de=ue.document,Me=ue.readTime;if(!s.path.isPrefixOf(k.key.path))break;Me.compareTo(l)<=0||Xl(s,de)&&(g=g.insert(de.key,de.clone()))}return zt.resolve(g)},o.prototype.fs=function(t,s){return zt.forEach(this.docs,function(l){return s(l)})},o.prototype.newChangeBuffer=function(t){return new r_(this)},o.prototype.getSize=function(t){return zt.resolve(this.size)},o}(),r_=function(o){function t(s){var l=this;return(l=o.call(this)||this).Ie=s,l}return(0,X.ZT)(t,o),t.prototype.applyChanges=function(s){var l=this,g=[];return this.changes.forEach(function(C,S){S.document.isValidDocument()?g.push(l.Ie.addEntry(s,S.document,l.getReadTime(C))):l.Ie.removeEntry(C)}),zt.waitFor(g)},t.prototype.getFromCache=function(s,l){return this.Ie.getEntry(s,l)},t.prototype.getAllFromCache=function(s,l){return this.Ie.getEntries(s,l)},t}(Nd),i_=function(){function o(t){this.persistence=t,this.ds=new ol(function(s){return Xo(s)},yo),this.lastRemoteSnapshotVersion=x.min(),this.highestTargetId=0,this.ws=0,this._s=new ag,this.targetCount=0,this.ys=il.Jt()}return o.prototype.forEachTarget=function(t,s){return this.ds.forEach(function(l,g){return s(g)}),zt.resolve()},o.prototype.getLastRemoteSnapshotVersion=function(t){return zt.resolve(this.lastRemoteSnapshotVersion)},o.prototype.getHighestSequenceNumber=function(t){return zt.resolve(this.ws)},o.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),zt.resolve(this.highestTargetId)},o.prototype.setTargetsMetadata=function(t,s,l){return l&&(this.lastRemoteSnapshotVersion=l),s>this.ws&&(this.ws=s),zt.resolve()},o.prototype.te=function(t){this.ds.set(t.target,t);var s=t.targetId;s>this.highestTargetId&&(this.ys=new il(s),this.highestTargetId=s),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},o.prototype.addTargetData=function(t,s){return this.te(s),this.targetCount+=1,zt.resolve()},o.prototype.updateTargetData=function(t,s){return this.te(s),zt.resolve()},o.prototype.removeTargetData=function(t,s){return this.ds.delete(s.target),this._s.Zn(s.targetId),this.targetCount-=1,zt.resolve()},o.prototype.removeTargets=function(t,s,l){var g=this,C=0,S=[];return this.ds.forEach(function(k,K){K.sequenceNumber<=s&&null===l.get(K.targetId)&&(g.ds.delete(k),S.push(g.removeMatchingKeysForTargetId(t,K.targetId)),C++)}),zt.waitFor(S).next(function(){return C})},o.prototype.getTargetCount=function(t){return zt.resolve(this.targetCount)},o.prototype.getTargetData=function(t,s){var l=this.ds.get(s)||null;return zt.resolve(l)},o.prototype.addMatchingKeys=function(t,s,l){return this._s.Jn(s,l),zt.resolve()},o.prototype.removeMatchingKeys=function(t,s,l){this._s.Xn(s,l);var g=this.persistence.referenceDelegate,C=[];return g&&s.forEach(function(S){C.push(g.markPotentiallyOrphaned(t,S))}),zt.waitFor(C)},o.prototype.removeMatchingKeysForTargetId=function(t,s){return this._s.Zn(s),zt.resolve()},o.prototype.getMatchingKeysForTargetId=function(t,s){var l=this._s.es(s);return zt.resolve(l)},o.prototype.containsKey=function(t,s){return zt.resolve(this._s.containsKey(s))},o}(),Uu=function(){function o(t,s){var l=this;this.gs={},this.Ne=new Ho(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new i_(this),this.Ut=new Hh,this.Ue=new ug(this.Ut,function(S){return l.referenceDelegate.ps(S)}),this.R=new js(s),this.Ke=new sg(this.R)}return o.prototype.start=function(){return Promise.resolve()},o.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(o.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),o.prototype.setDatabaseDeletedListener=function(){},o.prototype.setNetworkEnabled=function(){},o.prototype.getIndexManager=function(){return this.Ut},o.prototype.getMutationQueue=function(t){var s=this.gs[t.toKey()];return s||(s=new n_(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=s),s},o.prototype.getTargetCache=function(){return this.qe},o.prototype.getRemoteDocumentCache=function(){return this.Ue},o.prototype.getBundleCache=function(){return this.Ke},o.prototype.runTransaction=function(t,s,l){var g=this;rn("MemoryPersistence","Starting transaction:",t);var C=new o_(this.Ne.next());return this.referenceDelegate.Es(),l(C).next(function(S){return g.referenceDelegate.Ts(C).next(function(){return S})}).toPromise().then(function(S){return C.raiseOnCommittedEvent(),S})},o.prototype.Is=function(t,s){return zt.or(Object.values(this.gs).map(function(l){return function(){return l.containsKey(t,s)}}))},o}(),o_=function(o){function t(s){var l=this;return(l=o.call(this)||this).currentSequenceNumber=s,l}return(0,X.ZT)(t,o),t}(Ad),lg=function(){function o(t){this.persistence=t,this.As=new ag,this.Rs=null}return o.bs=function(t){return new o(t)},Object.defineProperty(o.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Nn()},enumerable:!1,configurable:!0}),o.prototype.addReference=function(t,s,l){return this.As.addReference(l,s),this.vs.delete(l.toString()),zt.resolve()},o.prototype.removeReference=function(t,s,l){return this.As.removeReference(l,s),this.vs.add(l.toString()),zt.resolve()},o.prototype.markPotentiallyOrphaned=function(t,s){return this.vs.add(s.toString()),zt.resolve()},o.prototype.removeTarget=function(t,s){var l=this;this.As.Zn(s.targetId).forEach(function(C){return l.vs.add(C.toString())});var g=this.persistence.getTargetCache();return g.getMatchingKeysForTargetId(t,s.targetId).next(function(C){C.forEach(function(S){return l.vs.add(S.toString())})}).next(function(){return g.removeTargetData(t,s)})},o.prototype.Es=function(){this.Rs=new Set},o.prototype.Ts=function(t){var s=this,l=this.persistence.getRemoteDocumentCache().newChangeBuffer();return zt.forEach(this.vs,function(g){var C=Jn.fromPath(g);return s.Ps(t,C).next(function(S){S||l.removeEntry(C)})}).next(function(){return s.Rs=null,l.apply(t)})},o.prototype.updateLimboDocument=function(t,s){var l=this;return this.Ps(t,s).next(function(g){g?l.vs.delete(s.toString()):l.vs.add(s.toString())})},o.prototype.ps=function(t){return 0},o.prototype.Ps=function(t,s){var l=this;return zt.or([function(){return zt.resolve(l.As.containsKey(s))},function(){return l.persistence.getTargetCache().containsKey(t,s)},function(){return l.persistence.Is(t,s)}])},o}(),As=function(){function o(t){this.uid=t}return o.prototype.isAuthenticated=function(){return null!=this.uid},o.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},o.prototype.isEqual=function(t){return t.uid===this.uid},o}();function cg(o,t){return"firestore_clients_"+o+"_"+t}function dg(o,t,s){var l="firestore_mutations_"+o+"_"+s;return t.isAuthenticated()&&(l+="_"+t.uid),l}function Uf(o,t){return"firestore_targets_"+o+"_"+t}As.UNAUTHENTICATED=new As(null),As.GOOGLE_CREDENTIALS=new As("google-credentials-uid"),As.FIRST_PARTY=new As("first-party-uid"),As.MOCK_USER=new As("mock-user");var Vf=function(){function o(t,s,l,g){this.user=t,this.batchId=s,this.state=l,this.error=g}return o.Vs=function(t,s,l){var g,C=JSON.parse(l),S="object"==typeof C&&-1!==["pending","acknowledged","rejected"].indexOf(C.state)&&(void 0===C.error||"object"==typeof C.error);return S&&C.error&&(S="string"==typeof C.error.message&&"string"==typeof C.error.code)&&(g=new Lt(C.error.code,C.error.message)),S?new o(t,s,C.state,g):($i("SharedClientState","Failed to parse mutation state for ID '"+s+"': "+l),null)},o.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},o}(),Bf=function(){function o(t,s,l){this.targetId=t,this.state=s,this.error=l}return o.Vs=function(t,s){var l,g=JSON.parse(s),C="object"==typeof g&&-1!==["not-current","current","rejected"].indexOf(g.state)&&(void 0===g.error||"object"==typeof g.error);return C&&g.error&&(C="string"==typeof g.error.message&&"string"==typeof g.error.code)&&(l=new Lt(g.error.code,g.error.message)),C?new o(t,g.state,l):($i("SharedClientState","Failed to parse target state for ID '"+t+"': "+s),null)},o.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},o}(),hg=function(){function o(t,s){this.clientId=t,this.activeTargetIds=s}return o.Vs=function(t,s){for(var l=JSON.parse(s),g="object"==typeof l&&l.activeTargetIds instanceof Array,C=Iu(),S=0;g&&S<l.activeTargetIds.length;++S)g=oa(l.activeTargetIds[S]),C=C.add(l.activeTargetIds[S]);return g?new o(t,C):($i("SharedClientState","Failed to parse client data for instance '"+t+"': "+s),null)},o}(),s_=function(){function o(t,s){this.clientId=t,this.onlineState=s}return o.Vs=function(t){var s=JSON.parse(t);return"object"==typeof s&&-1!==["Unknown","Online","Offline"].indexOf(s.onlineState)&&"string"==typeof s.clientId?new o(s.clientId,s.onlineState):($i("SharedClientState","Failed to parse online state: "+t),null)},o}(),Cr=function(){function o(){this.activeTargetIds=Iu()}return o.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},o.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},o.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},o}(),Zh=function(){function o(t,s,l,g,C){this.window=t,this.Se=s,this.persistenceKey=l,this.Ns=g,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Go(Tr),this.started=!1,this.$s=[];var S=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=C,this.Os=cg(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new Cr),this.Ls=new RegExp("^firestore_clients_"+S+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+S+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+S+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(k){return"firestore_bundle_loaded_"+k}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return o.yt=function(t){return!(!t||!t.localStorage)},o.prototype.start=function(){return(0,X.mG)(this,void 0,void 0,function(){var t,s,l,g,C,S,k,K,ue,de,Be=this;return(0,X.Jh)(this,function(ht){switch(ht.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=ht.sent(),s=0,l=t;s<l.length;s++)(g=l[s])!==this.Ns&&(C=this.getItem(cg(this.persistenceKey,g)))&&(S=hg.Vs(g,C))&&(this.Fs=this.Fs.insert(S.clientId,S));for(this.Qs(),(k=this.storage.getItem(this.Us))&&(K=this.js(k))&&this.Ws(K),ue=0,de=this.$s;ue<de.length;ue++)this.ks(de[ue]);return this.$s=[],this.window.addEventListener("pagehide",function(){return Be.shutdown()}),this.started=!0,[2]}})})},o.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},o.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},o.prototype.isActiveQueryTarget=function(t){var s=!1;return this.Fs.forEach(function(l,g){g.activeTargetIds.has(t)&&(s=!0)}),s},o.prototype.addPendingMutation=function(t){this.zs(t,"pending")},o.prototype.updateMutationState=function(t,s,l){this.zs(t,s,l),this.Hs(t)},o.prototype.addLocalQueryTarget=function(t){var s="not-current";if(this.isActiveQueryTarget(t)){var l=this.storage.getItem(Uf(this.persistenceKey,t));if(l){var g=Bf.Vs(t,l);g&&(s=g.state)}}return this.Js.Ds(t),this.Qs(),s},o.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},o.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},o.prototype.clearQueryState=function(t){this.removeItem(Uf(this.persistenceKey,t))},o.prototype.updateQueryState=function(t,s,l){this.Ys(t,s,l)},o.prototype.handleUserChange=function(t,s,l){var g=this;s.forEach(function(C){g.Hs(C)}),this.currentUser=t,l.forEach(function(C){g.addPendingMutation(C)})},o.prototype.setOnlineState=function(t){this.Xs(t)},o.prototype.notifyBundleLoaded=function(){this.Zs()},o.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},o.prototype.getItem=function(t){var s=this.storage.getItem(t);return rn("SharedClientState","READ",t,s),s},o.prototype.setItem=function(t,s){rn("SharedClientState","SET",t,s),this.storage.setItem(t,s)},o.prototype.removeItem=function(t){rn("SharedClientState","REMOVE",t),this.storage.removeItem(t)},o.prototype.ks=function(t){var s=this,l=t;if(l.storageArea===this.storage){if(rn("SharedClientState","EVENT",l.key,l.newValue),l.key===this.Os)return void $i("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,X.mG)(s,void 0,void 0,function(){var g,C,S,k,K,ue;return(0,X.Jh)(this,function(de){if(this.started){if(null!==l.key)if(this.Ls.test(l.key)){if(null==l.newValue)return g=this.ti(l.key),[2,this.ei(g,null)];if(C=this.ni(l.key,l.newValue))return[2,this.ei(C.clientId,C)]}else if(this.Bs.test(l.key)){if(null!==l.newValue&&(S=this.si(l.key,l.newValue)))return[2,this.ii(S)]}else if(this.qs.test(l.key)){if(null!==l.newValue&&(k=this.ri(l.key,l.newValue)))return[2,this.oi(k)]}else if(l.key===this.Us){if(null!==l.newValue&&(K=this.js(l.newValue)))return[2,this.Ws(K)]}else if(l.key===this.Ms)(ue=function(Me){var Be=Ho.o;if(null!=Me)try{var ht=JSON.parse(Me);nr("number"==typeof ht),Be=ht}catch(dt){$i("SharedClientState","Failed to read sequence number from WebStorage",dt)}return Be}(l.newValue))!==Ho.o&&this.sequenceNumberHandler(ue);else if(l.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(l);return[2]})})})}},Object.defineProperty(o.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),o.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},o.prototype.zs=function(t,s,l){var g=new Vf(this.currentUser,t,s,l),C=dg(this.persistenceKey,this.currentUser,t);this.setItem(C,g.Ss())},o.prototype.Hs=function(t){var s=dg(this.persistenceKey,this.currentUser,t);this.removeItem(s)},o.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},o.prototype.Ys=function(t,s,l){var g=Uf(this.persistenceKey,t),C=new Bf(t,s,l);this.setItem(g,C.Ss())},o.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},o.prototype.ti=function(t){var s=this.Ls.exec(t);return s?s[1]:null},o.prototype.ni=function(t,s){var l=this.ti(t);return hg.Vs(l,s)},o.prototype.si=function(t,s){var l=this.Bs.exec(t),g=Number(l[1]);return Vf.Vs(new As(void 0!==l[2]?l[2]:null),g,s)},o.prototype.ri=function(t,s){var l=this.qs.exec(t),g=Number(l[1]);return Bf.Vs(g,s)},o.prototype.js=function(t){return s_.Vs(t)},o.prototype.ii=function(t){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(s){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(rn("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},o.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},o.prototype.ei=function(t,s){var l=this,g=s?this.Fs.insert(t,s):this.Fs.remove(t),C=this.Gs(this.Fs),S=this.Gs(g),k=[],K=[];return S.forEach(function(ue){C.has(ue)||k.push(ue)}),C.forEach(function(ue){S.has(ue)||K.push(ue)}),this.syncEngine.hi(k,K).then(function(){l.Fs=g})},o.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},o.prototype.Gs=function(t){var s=Iu();return t.forEach(function(l,g){s=s.unionWith(g.activeTargetIds)}),s},o}(),jf=function(){function o(){this.li=new Cr,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return o.prototype.addPendingMutation=function(t){},o.prototype.updateMutationState=function(t,s,l){},o.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},o.prototype.updateQueryState=function(t,s,l){this.fi[t]=s},o.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},o.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},o.prototype.clearQueryState=function(t){delete this.fi[t]},o.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},o.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},o.prototype.start=function(){return this.li=new Cr,Promise.resolve()},o.prototype.handleUserChange=function(t,s,l){},o.prototype.setOnlineState=function(t){},o.prototype.shutdown=function(){},o.prototype.writeSequenceNumber=function(t){},o.prototype.notifyBundleLoaded=function(){},o}(),qh=function(){function o(){}return o.prototype.di=function(t){},o.prototype.shutdown=function(){},o}(),fu=function(){function o(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return o.prototype.di=function(t){this.gi.push(t)},o.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},o.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},o.prototype._i=function(){rn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,s=this.gi;t<s.length;t++)(0,s[t])(0)},o.prototype.yi=function(){rn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,s=this.gi;t<s.length;t++)(0,s[t])(1)},o.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},o}(),fg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},a_=function(){function o(t){this.Ei=t.Ei,this.Ti=t.Ti}return o.prototype.Ii=function(t){this.Ai=t},o.prototype.Ri=function(t){this.bi=t},o.prototype.onMessage=function(t){this.vi=t},o.prototype.close=function(){this.Ti()},o.prototype.send=function(t){this.Ei(t)},o.prototype.Pi=function(){this.Ai()},o.prototype.Vi=function(t){this.bi(t)},o.prototype.Si=function(t){this.vi(t)},o}(),Hf=function(o){function t(s){var l=this;return(l=o.call(this,s)||this).forceLongPolling=s.forceLongPolling,l.autoDetectLongPolling=s.autoDetectLongPolling,l.useFetchStreams=s.useFetchStreams,l}return(0,X.ZT)(t,o),t.prototype.Fi=function(s,l,g,C){return new Promise(function(S,k){var K=new Wa;K.listenOnce(Zu.COMPLETE,function(){try{switch(K.getLastErrorCode()){case ra.NO_ERROR:var de=K.getResponseJson();rn("Connection","XHR received:",JSON.stringify(de)),S(de);break;case ra.TIMEOUT:rn("Connection",'RPC "'+s+'" timed out'),k(new Lt(gt.DEADLINE_EXCEEDED,"Request time out"));break;case ra.HTTP_ERROR:var Me=K.getStatus();if(rn("Connection",'RPC "'+s+'" failed with status:',Me,"response text:",K.getResponseText()),Me>0){var Be=K.getResponseJson().error;if(Be&&Be.status&&Be.message){var ht=(Dt=Be.status.toLowerCase().replace(/_/g,"-"),Object.values(gt).indexOf(Dt)>=0?Dt:gt.UNKNOWN);k(new Lt(ht,Be.message))}else k(new Lt(gt.UNKNOWN,"Server responded with status "+K.getStatus()))}else k(new Lt(gt.UNAVAILABLE,"Connection failed."));break;default:Nn()}}finally{rn("Connection",'RPC "'+s+'" completed.')}var Dt});var ue=JSON.stringify(C);K.send(l,"POST",ue,g,15)})},t.prototype.Oi=function(s,l){var g=[this.Di,"/","google.firestore.v1.Firestore","/",s,"/channel"],C=new ba,S=Vi(),k={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(k.xmlHttpFactory=new vu({})),this.ki(k.initMessageHeaders,l),(0,Re.uI)()||(0,Re.b$)()||(0,Re.d)()||(0,Re.w1)()||(0,Re.Mn)()||(0,Re.ru)()||(k.httpHeadersOverwriteParam="$httpHeaders");var K=g.join("");rn("Connection","Creating WebChannel: "+K,k);var ue=C.createWebChannel(K,k),de=!1,Me=!1,Be=new a_({Ei:function(dt){Me?rn("Connection","Not sending because WebChannel is closed:",dt):(de||(rn("Connection","Opening WebChannel transport."),ue.open(),de=!0),rn("Connection","WebChannel sending:",dt),ue.send(dt))},Ti:function(){return ue.close()}}),ht=function(dt,Dt,en){dt.listen(Dt,function(fn){try{en(fn)}catch(ir){setTimeout(function(){throw ir},0)}})};return ht(ue,wa.EventType.OPEN,function(){Me||rn("Connection","WebChannel transport opened.")}),ht(ue,wa.EventType.CLOSE,function(){Me||(Me=!0,rn("Connection","WebChannel transport closed"),Be.Vi())}),ht(ue,wa.EventType.ERROR,function(dt){Me||(Me=!0,Jo("Connection","WebChannel transport errored:",dt),Be.Vi(new Lt(gt.UNAVAILABLE,"The operation could not be completed")))}),ht(ue,wa.EventType.MESSAGE,function(dt){var Dt;if(!Me){var en=dt.data[0];nr(!!en);var ir=en.error||(null===(Dt=en[0])||void 0===Dt?void 0:Dt.error);if(ir){rn("Connection","WebChannel received error:",ir);var or=ir.status,Jr=function(Hi){var Ms=bo[Hi];if(void 0!==Ms)return vd(Ms)}(or),pi=ir.message;void 0===Jr&&(Jr=gt.INTERNAL,pi="Unknown error status: "+or+" with message "+ir.message),Me=!0,Be.Vi(new Lt(Jr,pi)),ue.close()}else rn("Connection","WebChannel received:",en),Be.Si(en)}}),ht(S,$a.STAT_EVENT,function(dt){dt.stat===ia_PROXY?rn("Connection","Detected buffering proxy"):dt.stat===ia_NOPROXY&&rn("Connection","Detected no buffering proxy")}),setTimeout(function(){Be.Pi()},0),Be},t}(function(){function o(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return o.prototype.Ni=function(t,s,l,g){var C=this.xi(t,s);rn("RestConnection","Sending: ",C,l);var S={};return this.ki(S,g),this.Fi(t,C,S,l).then(function(k){return rn("RestConnection","Received: ",k),k},function(k){throw Jo("RestConnection",t+" failed with error: ",k,"url: ",C,"request:",l),k})},o.prototype.$i=function(t,s,l,g){return this.Ni(t,s,l,g)},o.prototype.ki=function(t,s){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s)for(var l in s.authHeaders)s.authHeaders.hasOwnProperty(l)&&(t[l]=s.authHeaders[l])},o.prototype.xi=function(t,s){return this.Di+"/v1/"+s+":"+fg[t]},o}());function al(){return"undefined"!=typeof window?window:null}function Ud(){return"undefined"!=typeof document?document:null}function Vd(o){return new Ou(o,!0)}var yh=function(){function o(t,s,l,g,C){void 0===l&&(l=1e3),void 0===g&&(g=1.5),void 0===C&&(C=6e4),this.Se=t,this.timerId=s,this.Mi=l,this.Li=g,this.Bi=C,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return o.prototype.reset=function(){this.qi=0},o.prototype.Qi=function(){this.qi=this.Bi},o.prototype.ji=function(t){var s=this;this.cancel();var l=Math.floor(this.qi+this.Wi()),g=Math.max(0,Date.now()-this.Ki),C=Math.max(0,l-g);C>0&&rn("ExponentialBackoff","Backing off for "+C+" ms (base delay: "+this.qi+" ms, delay with jitter: "+l+" ms, last attempt: "+g+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,C,function(){return s.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},o.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},o.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},o.prototype.Wi=function(){return(Math.random()-.5)*this.qi},o}(),u_=function(){function o(t,s,l,g,C,S){this.Se=t,this.zi=l,this.Hi=g,this.Ji=C,this.listener=S,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new yh(t,s)}return o.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},o.prototype.er=function(){return 2===this.state},o.prototype.start=function(){3!==this.state?this.auth():this.nr()},o.prototype.stop=function(){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},o.prototype.sr=function(){this.state=0,this.Zi.reset()},o.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},o.prototype.cr=function(t){this.ur(),this.stream.send(t)},o.prototype.rr=function(){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},o.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},o.prototype.close=function(t,s){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(l){switch(l.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():s&&s.code===gt.RESOURCE_EXHAUSTED?($i(s.toString()),$i("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):s&&s.code===gt.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(s)];case 1:return l.sent(),[2]}})})},o.prototype.ar=function(){},o.prototype.auth=function(){var t=this;this.state=1;var s=this.hr(this.Yi),l=this.Yi;this.Ji.getToken().then(function(g){t.Yi===l&&t.lr(g)},function(g){s(function(){var C=new Lt(gt.UNKNOWN,"Fetching auth token failed: "+g.message);return t.dr(C)})})},o.prototype.lr=function(t){var s=this,l=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){l(function(){return s.state=2,s.listener.Ii()})}),this.stream.Ri(function(g){l(function(){return s.dr(g)})}),this.stream.onMessage(function(g){l(function(){return s.onMessage(g)})})},o.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,X.mG)(t,void 0,void 0,function(){return(0,X.Jh)(this,function(s){return this.state=0,this.start(),[2]})})})},o.prototype.dr=function(t){return rn("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},o.prototype.hr=function(t){var s=this;return function(l){s.Se.enqueueAndForget(function(){return s.Yi===t?l():(rn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},o}(),pg=function(o){function t(s,l,g,C,S){var k=this;return(k=o.call(this,s,"listen_stream_connection_backoff","listen_stream_idle",l,g,S)||this).R=C,k}return(0,X.ZT)(t,o),t.prototype.wr=function(s){return this.Hi.Oi("Listen",s)},t.prototype.onMessage=function(s){this.Zi.reset();var l=function(C,S){var k,en;if("targetChange"in S){var K="NO_CHANGE"===(en=S.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===en?1:"REMOVE"===en?2:"CURRENT"===en?3:"RESET"===en?4:Nn(),ue=S.targetChange.targetIds||[],de=function(en,fn){return en.I?(nr(void 0===fn||"string"==typeof fn),ur.fromBase64String(fn||"")):(nr(void 0===fn||fn instanceof Uint8Array),ur.fromUint8Array(fn||new Uint8Array))}(C,S.targetChange.resumeToken),Me=(Be=S.targetChange.cause)&&function(en){var fn=void 0===en.code?gt.UNKNOWN:vd(en.code);return new Lt(fn,en.message||"")}(Be);k=new fh(K,ue,de,Me||null)}else if("documentChange"in S){ue=fa(C,(K=S.documentChange).document.name),de=Fi(K.document.updateTime);var Be=new di({mapValue:{fields:K.document.fields}}),ht=(Me=ki.newFoundDocument(ue,de,Be),K.targetIds||[]);k=new oc(ht,K.removedTargetIds||[],Me.key,Me)}else if("documentDelete"in S)ue=fa(C,(K=S.documentDelete).document),de=K.readTime?Fi(K.readTime):x.min(),Be=ki.newNoDocument(ue,de),k=new oc([],Me=K.removedTargetIds||[],Be.key,Be);else if("documentRemove"in S)ue=fa(C,(K=S.documentRemove).document),k=new oc([],de=K.removedTargetIds||[],ue,null);else{if(!("filter"in S))return Nn();var Dt=S.filter;ue=new No(K=Dt.count||0),k=new hh(de=Dt.targetId,ue)}return k}(this.R,s),g=function(C){if(!("targetChange"in C))return x.min();var S=C.targetChange;return S.targetIds&&S.targetIds.length?x.min():S.readTime?Fi(S.readTime):x.min()}(s);return this.listener._r(l,g)},t.prototype.mr=function(s){var C,S,k,K,l={};l.database=pa(this.R),l.addTarget=(C=this.R,(k=Ys(K=(S=s).target)?{documents:Vc(C,K)}:{query:Al(C,K)}).targetId=S.targetId,S.resumeToken.approximateByteSize()>0?k.resumeToken=Lc(C,S.resumeToken):S.snapshotVersion.compareTo(x.min())>0&&(k.readTime=ls(C,S.snapshotVersion.toTimestamp())),k);var g=function(C,S){var k=function(K,ue){switch(ue){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Nn()}}(0,S.purpose);return null==k?null:{"goog-listen-tags":k}}(0,s);g&&(l.labels=g),this.cr(l)},t.prototype.yr=function(s){var l={};l.database=pa(this.R),l.removeTarget=s,this.cr(l)},t}(u_),fy=function(o){function t(s,l,g,C,S){var k=this;return(k=o.call(this,s,"write_stream_connection_backoff","write_stream_idle",l,g,S)||this).R=C,k.gr=!1,k}return(0,X.ZT)(t,o),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,o.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(s){return this.Hi.Oi("Write",s)},t.prototype.onMessage=function(s){if(nr(!!s.streamToken),this.lastStreamToken=s.streamToken,this.gr){this.Zi.reset();var l=(S=s.commitTime,(C=s.writeResults)&&C.length>0?(nr(void 0!==S),C.map(function(k){return ue=S,(de=Fi((K=k).updateTime?K.updateTime:ue)).isEqual(x.min())&&(de=Fi(ue)),new Rc(de,K.transformResults||[]);var K,ue,de})):[]),g=Fi(s.commitTime);return this.listener.Tr(g,l)}var C,S;return nr(!s.writeResults||0===s.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var s={};s.database=pa(this.R),this.cr(s)},t.prototype.Er=function(s){var l=this,g={streamToken:this.lastStreamToken,writes:s.map(function(C){return Dd(l.R,C)})};this.cr(g)},t}(u_),Fl=function(o){function t(s,l,g){var C=this;return(C=o.call(this)||this).credentials=s,C.Hi=l,C.R=g,C.Rr=!1,C}return(0,X.ZT)(t,o),t.prototype.br=function(){if(this.Rr)throw new Lt(gt.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(s,l,g){var C=this;return this.br(),this.credentials.getToken().then(function(S){return C.Hi.Ni(s,l,g,S)}).catch(function(S){throw"FirebaseError"===S.name?(S.code===gt.UNAUTHENTICATED&&C.credentials.invalidateToken(),S):new Lt(gt.UNKNOWN,S.toString())})},t.prototype.$i=function(s,l,g){var C=this;return this.br(),this.credentials.getToken().then(function(S){return C.Hi.$i(s,l,g,S)}).catch(function(S){throw"FirebaseError"===S.name?(S.code===gt.UNAUTHENTICATED&&C.credentials.invalidateToken(),S):new Lt(gt.UNKNOWN,S.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),zh=function(){function o(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return o.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},o.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},o.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},o.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},o.prototype.Cr=function(t){var s="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?($i(s),this.Vr=!1):rn("OnlineStateTracker",s)},o.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},o}(),$h=function(o,t,s,l,g){var C=this;this.localStore=o,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=g,this.Lr.di(function(S){s.enqueueAndForget(function(){return(0,X.mG)(C,void 0,void 0,function(){return(0,X.Jh)(this,function(k){switch(k.label){case 0:return Nl(this)?(rn("RemoteStore","Restarting streams for network reachability change."),[4,function(K){return(0,X.mG)(this,void 0,void 0,function(){var ue;return(0,X.Jh)(this,function(de){switch(de.label){case 0:return(ue=on(K)).Or.add(4),[4,bh(ue)];case 1:return de.sent(),ue.Br.set("Unknown"),ue.Or.delete(4),[4,Jc(ue)];case 2:return de.sent(),[2]}})})}(this)]):[3,2];case 1:k.sent(),k.label=2;case 2:return[2]}})})})}),this.Br=new zh(s,l)};function Jc(o){return(0,X.mG)(this,void 0,void 0,function(){var t,s;return(0,X.Jh)(this,function(l){switch(l.label){case 0:if(!Nl(o))return[3,4];t=0,s=o.Mr,l.label=1;case 1:return t<s.length?[4,(0,s[t])(!0)]:[3,4];case 2:l.sent(),l.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function bh(o){return(0,X.mG)(this,void 0,void 0,function(){var t,s;return(0,X.Jh)(this,function(l){switch(l.label){case 0:t=0,s=o.Mr,l.label=1;case 1:return t<s.length?[4,(0,s[t])(!1)]:[3,4];case 2:l.sent(),l.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Wh(o,t){var s=on(o);s.$r.has(t.targetId)||(s.$r.set(t.targetId,t),Yh(s)?_g(s):fc(s).er()&&gg(s,t))}function Bd(o,t){var s=on(o),l=fc(s);s.$r.delete(t),l.er()&&mg(s,t),0===s.$r.size&&(l.er()?l.ir():Nl(s)&&s.Br.set("Unknown"))}function gg(o,t){o.qr.U(t.targetId),fc(o).mr(t)}function mg(o,t){o.qr.U(t),fc(o).yr(t)}function _g(o){o.qr=new Cd({getRemoteKeysForTarget:function(t){return o.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return o.$r.get(t)||null}}),fc(o).start(),o.Br.Sr()}function Yh(o){return Nl(o)&&!fc(o).tr()&&o.$r.size>0}function Nl(o){return 0===on(o).Or.size}function vg(o){o.qr=void 0}function Gf(o){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(t){return o.$r.forEach(function(s,l){gg(o,s)}),[2]})})}function py(o,t){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(s){return vg(o),Yh(o)?(o.Br.Nr(t),_g(o)):o.Br.set("Unknown"),[2]})})}function gy(o,t,s){return(0,X.mG)(this,void 0,void 0,function(){var l,g,C;return(0,X.Jh)(this,function(S){switch(S.label){case 0:if(o.Br.set("Online"),!(t instanceof fh&&2===t.state&&t.cause))return[3,6];S.label=1;case 1:return S.trys.push([1,3,,5]),[4,function(k,K){return(0,X.mG)(this,void 0,void 0,function(){var ue,de,Me,Be;return(0,X.Jh)(this,function(ht){switch(ht.label){case 0:ue=K.cause,de=0,Me=K.targetIds,ht.label=1;case 1:return de<Me.length?k.$r.has(Be=Me[de])?[4,k.remoteSyncer.rejectListen(Be,ue)]:[3,3]:[3,5];case 2:ht.sent(),k.$r.delete(Be),k.qr.removeTarget(Be),ht.label=3;case 3:ht.label=4;case 4:return de++,[3,1];case 5:return[2]}})})}(o,t)];case 2:return S.sent(),[3,5];case 3:return l=S.sent(),rn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),l),[4,Zf(o,l)];case 4:return S.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof oc?o.qr.X(t):t instanceof hh?o.qr.rt(t):o.qr.et(t),s.isEqual(x.min()))return[3,13];S.label=7;case 7:return S.trys.push([7,11,,13]),[4,qr(o.localStore)];case 8:return g=S.sent(),s.compareTo(g)>=0?[4,(k=o,K=s,ue=k.qr.ut(K),ue.targetChanges.forEach(function(de,Me){if(de.resumeToken.approximateByteSize()>0){var Be=k.$r.get(Me);Be&&k.$r.set(Me,Be.withResumeToken(de.resumeToken,K))}}),ue.targetMismatches.forEach(function(de){var Me=k.$r.get(de);if(Me){k.$r.set(de,Me.withResumeToken(ur.EMPTY_BYTE_STRING,Me.snapshotVersion)),mg(k,de);var Be=new La(Me.target,de,1,Me.sequenceNumber);gg(k,Be)}}),k.remoteSyncer.applyRemoteEvent(ue))]:[3,10];case 9:S.sent(),S.label=10;case 10:return[3,13];case 11:return rn("RemoteStore","Failed to raise snapshot:",C=S.sent()),[4,Zf(o,C)];case 12:return S.sent(),[3,13];case 13:return[2]}var k,K,ue})})}function Zf(o,t,s){return(0,X.mG)(this,void 0,void 0,function(){var l=this;return(0,X.Jh)(this,function(g){switch(g.label){case 0:if(!el(t))throw t;return o.Or.add(1),[4,bh(o)];case 1:return g.sent(),o.Br.set("Offline"),s||(s=function(){return qr(o.localStore)}),o.asyncQueue.enqueueRetryable(function(){return(0,X.mG)(l,void 0,void 0,function(){return(0,X.Jh)(this,function(C){switch(C.label){case 0:return rn("RemoteStore","Retrying IndexedDB access"),[4,s()];case 1:return C.sent(),o.Or.delete(1),[4,Jc(o)];case 2:return C.sent(),[2]}})})}),[2]}})})}function l_(o,t){return t().catch(function(s){return Zf(o,s,t)})}function Ch(o){return(0,X.mG)(this,void 0,void 0,function(){var t,s,l,g,C;return(0,X.Jh)(this,function(S){switch(S.label){case 0:t=on(o),s=pc(t),l=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,S.label=1;case 1:if(!(Nl(k=t)&&k.Fr.length<10))return[3,7];S.label=2;case 2:return S.trys.push([2,4,,6]),[4,sl(t.localStore,l)];case 3:return null===(g=S.sent())?(0===t.Fr.length&&s.ir(),[3,7]):(l=g.batchId,function(k,K){k.Fr.push(K);var ue=pc(k);ue.er()&&ue.pr&&ue.Er(K.mutations)}(t,g),[3,6]);case 4:return C=S.sent(),[4,Zf(t,C)];case 5:return S.sent(),[3,6];case 6:return[3,1];case 7:return c_(t)&&d_(t),[2]}var k})})}function c_(o){return Nl(o)&&!pc(o).tr()&&o.Fr.length>0}function d_(o){pc(o).start()}function my(o){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(t){return pc(o).Ar(),[2]})})}function _y(o){return(0,X.mG)(this,void 0,void 0,function(){var t,s,l;return(0,X.Jh)(this,function(C){for(t=pc(o),s=0,l=o.Fr;s<l.length;s++)t.Er(l[s].mutations);return[2]})})}function vy(o,t,s){return(0,X.mG)(this,void 0,void 0,function(){var l,g;return(0,X.Jh)(this,function(C){switch(C.label){case 0:return l=o.Fr.shift(),g=xl.from(l,t,s),[4,l_(o,function(){return o.remoteSyncer.applySuccessfulWrite(g)})];case 1:return C.sent(),[4,Ch(o)];case 2:return C.sent(),[2]}})})}function yy(o,t){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(s){switch(s.label){case 0:return t&&pc(o).pr?[4,function(l,g){return(0,X.mG)(this,void 0,void 0,function(){var C,S;return(0,X.Jh)(this,function(k){switch(k.label){case 0:return Fc(S=g.code)&&S!==gt.ABORTED?(C=l.Fr.shift(),pc(l).sr(),[4,l_(l,function(){return l.remoteSyncer.rejectFailedWrite(C.batchId,g)})]):[3,3];case 1:return k.sent(),[4,Ch(l)];case 2:k.sent(),k.label=3;case 3:return[2]}})})}(o,t)]:[3,2];case 1:s.sent(),s.label=2;case 2:return c_(o)&&d_(o),[2]}})})}function ul(o,t){return(0,X.mG)(this,void 0,void 0,function(){var s;return(0,X.Jh)(this,function(l){switch(l.label){case 0:return s=on(o),t?(s.Or.delete(2),[4,Jc(s)]):[3,2];case 1:return l.sent(),[3,5];case 2:return t?[3,4]:(s.Or.add(2),[4,bh(s)]);case 3:l.sent(),s.Br.set("Unknown"),l.label=4;case 4:l.label=5;case 5:return[2]}})})}function fc(o){var s,l,g,C,t=this;return o.Ur||(o.Ur=(s=o.datastore,l=o.asyncQueue,g={Ii:Gf.bind(null,o),Ri:py.bind(null,o),_r:gy.bind(null,o)},(C=on(s)).br(),new pg(l,C.Hi,C.credentials,C.R,g)),o.Mr.push(function(s){return(0,X.mG)(t,void 0,void 0,function(){return(0,X.Jh)(this,function(l){switch(l.label){case 0:return s?(o.Ur.sr(),Yh(o)?_g(o):o.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,o.Ur.stop()];case 2:l.sent(),vg(o),l.label=3;case 3:return[2]}})})})),o.Ur}function pc(o){var s,l,g,C,t=this;return o.Kr||(o.Kr=(s=o.datastore,l=o.asyncQueue,g={Ii:my.bind(null,o),Ri:yy.bind(null,o),Ir:_y.bind(null,o),Tr:vy.bind(null,o)},(C=on(s)).br(),new fy(l,C.Hi,C.credentials,C.R,g)),o.Mr.push(function(s){return(0,X.mG)(t,void 0,void 0,function(){return(0,X.Jh)(this,function(l){switch(l.label){case 0:return s?(o.Kr.sr(),[4,Ch(o)]):[3,2];case 1:return l.sent(),[3,4];case 2:return[4,o.Kr.stop()];case 3:l.sent(),o.Fr.length>0&&(rn("RemoteStore","Stopping write stream with "+o.Fr.length+" pending writes"),o.Fr=[]),l.label=4;case 4:return[2]}})})})),o.Kr}var yg=function(){function o(t,s,l,g,C){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=l,this.op=g,this.removalCallback=C,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(S){})}return o.createAndSchedule=function(t,s,l,g,C){var S=new o(t,s,Date.now()+l,g,C);return S.start(l),S},o.prototype.start=function(t){var s=this;this.timerHandle=setTimeout(function(){return s.handleDelayElapsed()},t)},o.prototype.skipDelay=function(){return this.handleDelayElapsed()},o.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lt(gt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},o.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(s){return t.deferred.resolve(s)})):Promise.resolve()})},o.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},o}();function gc(o,t){if($i("AsyncQueue",t+": "+o),el(o))return new Lt(gt.UNAVAILABLE,t+": "+o);throw o}var qf=function(){function o(t){this.comparator=t?function(s,l){return t(s,l)||Jn.comparator(s.key,l.key)}:function(s,l){return Jn.comparator(s.key,l.key)},this.keyedMap=xa(),this.sortedSet=new Go(this.comparator)}return o.emptySet=function(t){return new o(t.comparator)},o.prototype.has=function(t){return null!=this.keyedMap.get(t)},o.prototype.get=function(t){return this.keyedMap.get(t)},o.prototype.first=function(){return this.sortedSet.minKey()},o.prototype.last=function(){return this.sortedSet.maxKey()},o.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},o.prototype.indexOf=function(t){var s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1},Object.defineProperty(o.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),o.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(s,l){return t(s),!1})},o.prototype.add=function(t){var s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))},o.prototype.delete=function(t){var s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this},o.prototype.isEqual=function(t){if(!(t instanceof o)||this.size!==t.size)return!1;for(var s=this.sortedSet.getIterator(),l=t.sortedSet.getIterator();s.hasNext();){var g=s.getNext().key,C=l.getNext().key;if(!g.isEqual(C))return!1}return!0},o.prototype.toString=function(){var t=[];return this.forEach(function(s){t.push(s.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},o.prototype.copy=function(t,s){var l=new o;return l.comparator=this.comparator,l.keyedMap=t,l.sortedSet=s,l},o}(),Kh=function(){function o(){this.Qr=new Go(Jn.comparator)}return o.prototype.track=function(t){var s=t.doc.key,l=this.Qr.get(s);l?0!==t.type&&3===l.type?this.Qr=this.Qr.insert(s,t):3===t.type&&1!==l.type?this.Qr=this.Qr.insert(s,{type:l.type,doc:t.doc}):2===t.type&&2===l.type?this.Qr=this.Qr.insert(s,{type:2,doc:t.doc}):2===t.type&&0===l.type?this.Qr=this.Qr.insert(s,{type:0,doc:t.doc}):1===t.type&&0===l.type?this.Qr=this.Qr.remove(s):1===t.type&&2===l.type?this.Qr=this.Qr.insert(s,{type:1,doc:l.doc}):0===t.type&&1===l.type?this.Qr=this.Qr.insert(s,{type:2,doc:t.doc}):Nn():this.Qr=this.Qr.insert(s,t)},o.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(s,l){t.push(l)}),t},o}(),Qh=function(){function o(t,s,l,g,C,S,k,K){this.query=t,this.docs=s,this.oldDocs=l,this.docChanges=g,this.mutatedKeys=C,this.fromCache=S,this.syncStateChanged=k,this.excludesMetadataChanges=K}return o.fromInitialDocuments=function(t,s,l,g){var C=[];return s.forEach(function(S){C.push({type:0,doc:S})}),new o(t,s,qf.emptySet(s),C,l,g,!0,!1)},Object.defineProperty(o.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&wu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var s=this.docChanges,l=t.docChanges;if(s.length!==l.length)return!1;for(var g=0;g<s.length;g++)if(s[g].type!==l[g].type||!s[g].doc.isEqual(l[g].doc))return!1;return!0},o}(),mc=function(){this.Wr=void 0,this.listeners=[]},bg=function(){this.queries=new ol(function(o){return lh(o)},wu),this.onlineState="Unknown",this.Gr=new Set};function zf(o,t){return(0,X.mG)(this,void 0,void 0,function(){var s,l,g,C,S,k,K;return(0,X.Jh)(this,function(ue){switch(ue.label){case 0:if(s=on(o),g=!1,(C=s.queries.get(l=t.query))||(g=!0,C=new mc),!g)return[3,4];ue.label=1;case 1:return ue.trys.push([1,3,,4]),S=C,[4,s.onListen(l)];case 2:return S.Wr=ue.sent(),[3,4];case 3:return k=ue.sent(),K=gc(k,"Initialization of query '"+Wu(t.query)+"' failed"),[2,void t.onError(K)];case 4:return s.queries.set(l,C),C.listeners.push(t),t.zr(s.onlineState),C.Wr&&t.Hr(C.Wr)&&Jh(s),[2]}})})}function Cg(o,t){return(0,X.mG)(this,void 0,void 0,function(){var s,l,g,C,S;return(0,X.Jh)(this,function(k){return s=on(o),g=!1,(C=s.queries.get(l=t.query))&&(S=C.listeners.indexOf(t))>=0&&(C.listeners.splice(S,1),g=0===C.listeners.length),g?[2,(s.queries.delete(l),s.onUnlisten(l))]:[2]})})}function $f(o,t){for(var s=on(o),l=!1,g=0,C=t;g<C.length;g++){var S=C[g],K=s.queries.get(S.query);if(K){for(var ue=0,de=K.listeners;ue<de.length;ue++)de[ue].Hr(S)&&(l=!0);K.Wr=S}}l&&Jh(s)}function h_(o,t,s){var l=on(o),g=l.queries.get(t);if(g)for(var C=0,S=g.listeners;C<S.length;C++)S[C].onError(s);l.queries.delete(t)}function Jh(o){o.Gr.forEach(function(t){t.next()})}var Wf=function(){function o(t,s,l){this.query=t,this.Jr=s,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=l||{}}return o.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var s=[],l=0,g=t.docChanges;l<g.length;l++){var C=g[l];3!==C.type&&s.push(C)}t=new Qh(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var S=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),S=!0):this.eo(t,this.onlineState)&&(this.no(t),S=!0),this.Xr=t,S},o.prototype.onError=function(t){this.Jr.error(t)},o.prototype.zr=function(t){this.onlineState=t;var s=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),s=!0),s},o.prototype.eo=function(t,s){return!t.fromCache||!(this.options.so&&"Offline"!==s||t.docs.isEmpty()&&"Offline"!==s)},o.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},o.prototype.no=function(t){t=Qh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},o}(),f_=function(){function o(t,s){this.payload=t,this.byteLength=s}return o.prototype.io=function(){return"metadata"in this.payload},o}(),jd=function(){function o(t){this.R=t}return o.prototype.qn=function(t){return fa(this.R,t)},o.prototype.Un=function(t){return t.metadata.exists?ph(this.R,t.document,!1):ki.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},o.prototype.Kn=function(t){return Fi(t)},o}();!function(){function o(t,s,l){this.ro=t,this.localStore=s,this.R=l,this.queries=[],this.documents=[],this.progress=function(o){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:o.totalDocuments,totalBytes:o.totalBytes}}(t)}o.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var s=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++s):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++s),s!==this.progress.documentsLoaded?(this.progress.documentsLoaded=s,Object.assign({},this.progress)):null},o.prototype.co=function(t){for(var s=new Map,l=new jd(this.R),g=0,C=t;g<C.length;g++){var S=C[g];if(S.metadata.queries)for(var k=l.qn(S.metadata.name),K=0,ue=S.metadata.queries;K<ue.length;K++){var de=ue[K],Me=(s.get(de)||Lr()).add(k);s.set(de,Me)}}return s},o.prototype.complete=function(){return(0,X.mG)(this,void 0,void 0,function(){var t,s,l,g,C;return(0,X.Jh)(this,function(S){switch(S.label){case 0:return[4,og(this.localStore,new jd(this.R),this.documents,this.ro.id)];case 1:t=S.sent(),s=this.co(this.documents),l=0,g=this.queries,S.label=2;case 2:return l<g.length?[4,Lf(this.localStore,C=g[l],s.get(C.name))]:[3,5];case 3:S.sent(),S.label=4;case 4:return l++,[3,2];case 5:return[2,(this.progress.taskState="Success",new J(Object.assign({},this.progress),t))]}})})}}();var Xc=function(o){this.key=o},Gd=function(o){this.key=o},ed=function(){function o(t,s){this.query=t,this.uo=s,this.ao=null,this.current=!1,this.ho=Lr(),this.mutatedKeys=Lr(),this.lo=Eu(t),this.fo=new qf(this.lo)}return Object.defineProperty(o.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),o.prototype._o=function(t,s){var l=this,g=s?s.mo:new Kh,C=s?s.fo:this.fo,S=s?s.mutatedKeys:this.mutatedKeys,k=C,K=!1,ue=bu(this.query)&&C.size===this.query.limit?C.last():null,de=Sa(this.query)&&C.size===this.query.limit?C.first():null;if(t.inorderTraversal(function(Be,ht){var dt=C.get(Be),Dt=Xl(l.query,ht)?ht:null,en=!!dt&&l.mutatedKeys.has(dt.key),fn=!!Dt&&(Dt.hasLocalMutations||l.mutatedKeys.has(Dt.key)&&Dt.hasCommittedMutations),ir=!1;dt&&Dt?dt.data.isEqual(Dt.data)?en!==fn&&(g.track({type:3,doc:Dt}),ir=!0):l.yo(dt,Dt)||(g.track({type:2,doc:Dt}),ir=!0,(ue&&l.lo(Dt,ue)>0||de&&l.lo(Dt,de)<0)&&(K=!0)):!dt&&Dt?(g.track({type:0,doc:Dt}),ir=!0):dt&&!Dt&&(g.track({type:1,doc:dt}),ir=!0,(ue||de)&&(K=!0)),ir&&(Dt?(k=k.add(Dt),S=fn?S.add(Be):S.delete(Be)):(k=k.delete(Be),S=S.delete(Be)))}),bu(this.query)||Sa(this.query))for(;k.size>this.query.limit;){var Me=bu(this.query)?k.last():k.first();k=k.delete(Me.key),S=S.delete(Me.key),g.track({type:1,doc:Me})}return{fo:k,mo:g,Nn:K,mutatedKeys:S}},o.prototype.yo=function(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations},o.prototype.applyChanges=function(t,s,l){var g=this,C=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var S=t.mo.jr();S.sort(function(de,Me){return ht=Me.type,(dt=function(Dt){switch(Dt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nn()}})(de.type)-dt(ht)||g.lo(de.doc,Me.doc);var ht,dt}),this.po(l);var k=s?this.Eo():[],K=0===this.ho.size&&this.current?1:0,ue=K!==this.ao;return this.ao=K,0!==S.length||ue?{snapshot:new Qh(this.query,t.fo,C,S,t.mutatedKeys,0===K,ue,!1),To:k}:{To:k}},o.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Kh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},o.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},o.prototype.po=function(t){var s=this;t&&(t.addedDocuments.forEach(function(l){return s.uo=s.uo.add(l)}),t.modifiedDocuments.forEach(function(l){}),t.removedDocuments.forEach(function(l){return s.uo=s.uo.delete(l)}),this.current=t.current)},o.prototype.Eo=function(){var t=this;if(!this.current)return[];var s=this.ho;this.ho=Lr(),this.fo.forEach(function(g){t.Io(g.key)&&(t.ho=t.ho.add(g.key))});var l=[];return s.forEach(function(g){t.ho.has(g)||l.push(new Gd(g))}),this.ho.forEach(function(g){s.has(g)||l.push(new Xc(g))}),l},o.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Lr();var s=this._o(t.documents);return this.applyChanges(s,!0)},o.prototype.Ro=function(){return Qh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},o}(),p_=function(o,t,s){this.query=o,this.targetId=t,this.view=s},wg=function(o){this.key=o,this.bo=!1},Eg=function(){function o(t,s,l,g,C,S){this.localStore=t,this.remoteStore=s,this.eventManager=l,this.sharedClientState=g,this.currentUser=C,this.maxConcurrentLimboResolutions=S,this.vo={},this.Po=new ol(function(k){return lh(k)},wu),this.Vo=new Map,this.So=new Set,this.Do=new Go(Jn.comparator),this.Co=new Map,this.No=new ag,this.xo={},this.ko=new Map,this.Fo=il.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(o.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),o}();function Yf(o,t){return(0,X.mG)(this,void 0,void 0,function(){var s,g,C,S,k;return(0,X.Jh)(this,function(K){switch(K.label){case 0:return s=ep(o),(C=s.Po.get(t))?(s.sharedClientState.addLocalQueryTarget(C.targetId),g=C.view.Ro(),[3,4]):[3,1];case 1:return[4,Zs(s.localStore,ko(t))];case 2:return S=K.sent(),k=s.sharedClientState.addLocalQueryTarget(S.targetId),[4,wh(s,t,S.targetId,"current"===k)];case 3:g=K.sent(),s.isPrimaryClient&&Wh(s.remoteStore,S),K.label=4;case 4:return[2,g]}})})}function wh(o,t,s,l){return(0,X.mG)(this,void 0,void 0,function(){var g,C,S,k,K,ue;return(0,X.Jh)(this,function(de){switch(de.label){case 0:return o.Oo=function(Me,Be,ht){return function(dt,Dt,en,fn){return(0,X.mG)(this,void 0,void 0,function(){var ir,or,Jr;return(0,X.Jh)(this,function(pi){switch(pi.label){case 0:return(ir=Dt.view._o(en)).Nn?[4,hc(dt.localStore,Dt.query,!1).then(function(Hi){return Dt.view._o(Hi.documents,ir)})]:[3,2];case 1:ir=pi.sent(),pi.label=2;case 2:return or=fn&&fn.targetChanges.get(Dt.targetId),Jr=Dt.view.applyChanges(ir,dt.isPrimaryClient,or),[2,(Jf(dt,Dt.targetId,Jr.To),Jr.snapshot)]}})})}(o,Me,Be,ht)},[4,hc(o.localStore,t,!0)];case 1:return g=de.sent(),C=new ed(t,g.Bn),S=C._o(g.documents),k=yd.createSynthesizedTargetChangeForCurrentChange(s,l&&"Offline"!==o.onlineState),K=C.applyChanges(S,o.isPrimaryClient,k),Jf(o,s,K.To),ue=new p_(t,s,C),[2,(o.Po.set(t,ue),o.Vo.has(s)?o.Vo.get(s).push(t):o.Vo.set(s,[t]),K.snapshot)]}})})}function Tg(o,t){return(0,X.mG)(this,void 0,void 0,function(){var s,l,g;return(0,X.Jh)(this,function(C){switch(C.label){case 0:return s=on(o),l=s.Po.get(t),(g=s.Vo.get(l.targetId)).length>1?[2,(s.Vo.set(l.targetId,g.filter(function(S){return!wu(S,t)})),void s.Po.delete(t))]:s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)?[3,2]:[4,Io(s.localStore,l.targetId,!1).then(function(){s.sharedClientState.clearQueryState(l.targetId),Bd(s.remoteStore,l.targetId),Zd(s,l.targetId)}).catch(Ba)]):[3,3];case 1:C.sent(),C.label=2;case 2:return[3,5];case 3:return Zd(s,l.targetId),[4,Io(s.localStore,l.targetId,!0)];case 4:C.sent(),C.label=5;case 5:return[2]}})})}function ef(o,t,s){return(0,X.mG)(this,void 0,void 0,function(){var l,g,C,S;return(0,X.Jh)(this,function(k){switch(k.label){case 0:l=tp(o),k.label=1;case 1:return k.trys.push([1,5,,6]),[4,(K=l.localStore,ue=t,Me=on(K),Be=U.now(),ht=ue.reduce(function(dt,Dt){return dt.add(Dt.key)},Lr()),Me.persistence.runTransaction("Locally write mutations","readwrite",function(dt){return Me.Mn.pn(dt,ht).next(function(Dt){de=Dt;for(var en=[],fn=0,ir=ue;fn<ir.length;fn++){var or=ir[fn],Jr=ca(or,de.get(or.key));null!=Jr&&en.push(new Ts(or.key,Jr,vl(Jr.value.mapValue),Fo.exists(!0)))}return Me._n.addMutationBatch(dt,Be,en,ue)})}).then(function(dt){return dt.applyToLocalDocumentSet(de),{batchId:dt.batchId,changes:de}}))];case 2:return g=k.sent(),l.sharedClientState.addPendingMutation(g.batchId),function(K,ue,de){var Me=K.xo[K.currentUser.toKey()];Me||(Me=new Go(Tr)),Me=Me.insert(ue,de),K.xo[K.currentUser.toKey()]=Me}(l,g.batchId,s),[4,_c(l,g.changes)];case 3:return k.sent(),[4,Ch(l.remoteStore)];case 4:return k.sent(),[3,6];case 5:return C=k.sent(),S=gc(C,"Failed to persist write"),s.reject(S),[3,6];case 6:return[2]}var K,ue,de,Me,Be,ht})})}function Dg(o,t){return(0,X.mG)(this,void 0,void 0,function(){var s,l;return(0,X.Jh)(this,function(g){switch(g.label){case 0:s=on(o),g.label=1;case 1:return g.trys.push([1,4,,6]),[4,Yi(s.localStore,t)];case 2:return l=g.sent(),t.targetChanges.forEach(function(C,S){var k=s.Co.get(S);k&&(nr(C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size<=1),C.addedDocuments.size>0?k.bo=!0:C.modifiedDocuments.size>0?nr(k.bo):C.removedDocuments.size>0&&(nr(k.bo),k.bo=!1))}),[4,_c(s,l,t)];case 3:return g.sent(),[3,6];case 4:return[4,Ba(g.sent())];case 5:return g.sent(),[3,6];case 6:return[2]}})})}function Kf(o,t,s){var l=on(o);if(l.isPrimaryClient&&0===s||!l.isPrimaryClient&&1===s){var g=[];l.Po.forEach(function(C,S){var k=S.view.zr(t);k.snapshot&&g.push(k.snapshot)}),function(C,S){var k=on(C);k.onlineState=S;var K=!1;k.queries.forEach(function(ue,de){for(var Me=0,Be=de.listeners;Me<Be.length;Me++)Be[Me].zr(S)&&(K=!0)}),K&&Jh(k)}(l.eventManager,t),g.length&&l.vo._r(g),l.onlineState=t,l.isPrimaryClient&&l.sharedClientState.setOnlineState(t)}}function by(o,t,s){return(0,X.mG)(this,void 0,void 0,function(){var l,g,C,S,k,K;return(0,X.Jh)(this,function(ue){switch(ue.label){case 0:return(l=on(o)).sharedClientState.updateQueryState(t,"rejected",s),g=l.Co.get(t),(C=g&&g.key)?(S=(S=new Go(Jn.comparator)).insert(C,ki.newNoDocument(C,x.min())),k=Lr().add(C),K=new ic(x.min(),new Map,new Mo(Tr),S,k),[4,Dg(l,K)]):[3,2];case 1:return ue.sent(),l.Do=l.Do.remove(C),l.Co.delete(t),Mg(l),[3,4];case 2:return[4,Io(l.localStore,t,!1).then(function(){return Zd(l,t,s)}).catch(Ba)];case 3:ue.sent(),ue.label=4;case 4:return[2]}})})}function Sg(o,t){return(0,X.mG)(this,void 0,void 0,function(){var s,l,g;return(0,X.Jh)(this,function(C){switch(C.label){case 0:s=on(o),l=t.batch.batchId,C.label=1;case 1:return C.trys.push([1,4,,6]),[4,Gn(s.localStore,t)];case 2:return g=C.sent(),Qf(s,l,null),tf(s,l),s.sharedClientState.updateMutationState(l,"acknowledged"),[4,_c(s,g)];case 3:return C.sent(),[3,6];case 4:return[4,Ba(C.sent())];case 5:return C.sent(),[3,6];case 6:return[2]}})})}function Ag(o,t,s){return(0,X.mG)(this,void 0,void 0,function(){var l,g;return(0,X.Jh)(this,function(C){switch(C.label){case 0:l=on(o),C.label=1;case 1:return C.trys.push([1,4,,6]),[4,(S=l.localStore,k=t,K=on(S),K.persistence.runTransaction("Reject batch","readwrite-primary",function(ue){var de;return K._n.lookupMutationBatch(ue,k).next(function(Me){return nr(null!==Me),de=Me.keys(),K._n.removeMutationBatch(ue,Me)}).next(function(){return K._n.performConsistencyCheck(ue)}).next(function(){return K.Mn.pn(ue,de)})}))];case 2:return g=C.sent(),Qf(l,t,s),tf(l,t),l.sharedClientState.updateMutationState(t,"rejected",s),[4,_c(l,g)];case 3:return C.sent(),[3,6];case 4:return[4,Ba(C.sent())];case 5:return C.sent(),[3,6];case 6:return[2]}var S,k,K})})}function g_(o,t){return(0,X.mG)(this,void 0,void 0,function(){var s,l,g,C,S;return(0,X.Jh)(this,function(k){switch(k.label){case 0:Nl((s=on(o)).remoteStore)||rn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),k.label=1;case 1:return k.trys.push([1,3,,4]),[4,(K=s.localStore,ue=on(K),ue.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(de){return ue._n.getHighestUnacknowledgedBatchId(de)}))];case 2:return-1===(l=k.sent())?[2,void t.resolve()]:((g=s.ko.get(l)||[]).push(t),s.ko.set(l,g),[3,4]);case 3:return C=k.sent(),S=gc(C,"Initialization of waitForPendingWrites() operation failed"),t.reject(S),[3,4];case 4:return[2]}var K,ue})})}function tf(o,t){(o.ko.get(t)||[]).forEach(function(s){s.resolve()}),o.ko.delete(t)}function Qf(o,t,s){var l=on(o),g=l.xo[l.currentUser.toKey()];if(g){var C=g.get(t);C&&(s?C.reject(s):C.resolve(),g=g.remove(t)),l.xo[l.currentUser.toKey()]=g}}function Zd(o,t,s){void 0===s&&(s=null),o.sharedClientState.removeLocalQueryTarget(t);for(var l=0,g=o.Vo.get(t);l<g.length;l++){var C=g[l];o.Po.delete(C),s&&o.vo.Mo(C,s)}o.Vo.delete(t),o.isPrimaryClient&&o.No.Zn(t).forEach(function(S){o.No.containsKey(S)||_a(o,S)})}function _a(o,t){o.So.delete(t.path.canonicalString());var s=o.Do.get(t);null!==s&&(Bd(o.remoteStore,s),o.Do=o.Do.remove(t),o.Co.delete(s),Mg(o))}function Jf(o,t,s){for(var l=0,g=s;l<g.length;l++){var C=g[l];C instanceof Xc?(o.No.addReference(C.key,t),m_(o,C)):C instanceof Gd?(rn("SyncEngine","Document no longer in limbo: "+C.key),o.No.removeReference(C.key,t),o.No.containsKey(C.key)||_a(o,C.key)):Nn()}}function m_(o,t){var s=t.key,l=s.path.canonicalString();o.Do.get(s)||o.So.has(l)||(rn("SyncEngine","New document in limbo: "+s),o.So.add(l),Mg(o))}function Mg(o){for(;o.So.size>0&&o.Do.size<o.maxConcurrentLimboResolutions;){var t=o.So.values().next().value;o.So.delete(t);var s=new Jn(Te.fromString(t)),l=o.Fo.next();o.Co.set(l,new wg(s)),o.Do=o.Do.insert(s,l),Wh(o.remoteStore,new La(ko(Ks(s.path)),l,2,Ho.o))}}function _c(o,t,s){return(0,X.mG)(this,void 0,void 0,function(){var l,g,C,S;return(0,X.Jh)(this,function(k){switch(k.label){case 0:return l=on(o),g=[],C=[],S=[],l.Po.isEmpty()?[3,3]:(l.Po.forEach(function(K,ue){S.push(l.Oo(ue,t,s).then(function(de){if(de){l.isPrimaryClient&&l.sharedClientState.updateQueryState(ue.targetId,de.fromCache?"not-current":"current"),g.push(de);var Me=Oe.Pn(ue.targetId,de);C.push(Me)}}))}),[4,Promise.all(S)]);case 1:return k.sent(),l.vo._r(g),[4,function(K,ue){return(0,X.mG)(this,void 0,void 0,function(){var de,Me,Be,ht,dt,Dt,en,ir;return(0,X.Jh)(this,function(or){switch(or.label){case 0:de=on(K),or.label=1;case 1:return or.trys.push([1,3,,4]),[4,de.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(Jr){return zt.forEach(ue,function(pi){return zt.forEach(pi.bn,function(Hi){return de.persistence.referenceDelegate.addReference(Jr,pi.targetId,Hi)}).next(function(){return zt.forEach(pi.vn,function(Hi){return de.persistence.referenceDelegate.removeReference(Jr,pi.targetId,Hi)})})})})];case 2:return or.sent(),[3,4];case 3:if(!el(Me=or.sent()))throw Me;return rn("LocalStore","Failed to update sequence numbers: "+Me),[3,4];case 4:for(Be=0,ht=ue;Be<ht.length;Be++)Dt=(dt=ht[Be]).targetId,dt.fromCache||(en=de.kn.get(Dt),ir=en.withLastLimboFreeSnapshotVersion(en.snapshotVersion),de.kn=de.kn.insert(Dt,ir));return[2]}})})}(l.localStore,C)];case 2:k.sent(),k.label=3;case 3:return[2]}})})}function Ig(o,t){return(0,X.mG)(this,void 0,void 0,function(){var s,l;return(0,X.Jh)(this,function(g){switch(g.label){case 0:return(s=on(o)).currentUser.isEqual(t)?[3,3]:(rn("SyncEngine","User change. New user:",t.toKey()),[4,gn(s.localStore,t)]);case 1:return l=g.sent(),s.currentUser=t,(C=s).ko.forEach(function(k){k.forEach(function(K){K.reject(new Lt(gt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),C.ko.clear(),s.sharedClientState.handleUserChange(t,l.removedBatchIds,l.addedBatchIds),[4,_c(s,l.Ln)];case 2:g.sent(),g.label=3;case 3:return[2]}var C})})}function Cy(o,t){var s=on(o),l=s.Co.get(t);if(l&&l.bo)return Lr().add(l.key);var g=Lr(),C=s.Vo.get(t);if(!C)return g;for(var S=0,k=C;S<k.length;S++){var ue=s.Po.get(k[S]);g=g.unionWith(ue.view.wo)}return g}function __(o,t){return(0,X.mG)(this,void 0,void 0,function(){var s,l,g;return(0,X.Jh)(this,function(C){switch(C.label){case 0:return[4,hc((s=on(o)).localStore,t.query,!0)];case 1:return l=C.sent(),g=t.view.Ao(l),[2,(s.isPrimaryClient&&Jf(s,t.targetId,g.To),g)]}})})}function Xf(o){return(0,X.mG)(this,void 0,void 0,function(){var t;return(0,X.Jh)(this,function(s){return[2,ig((t=on(o)).localStore).then(function(l){return _c(t,l)})]})})}function Og(o,t,s,l){return(0,X.mG)(this,void 0,void 0,function(){var g,C;return(0,X.Jh)(this,function(S){switch(S.label){case 0:return[4,(k=(g=on(o)).localStore,K=t,ue=on(k),de=on(ue._n),ue.persistence.runTransaction("Lookup mutation documents","readonly",function(Me){return de.jt(Me,K).next(function(Be){return Be?ue.Mn.pn(Me,Be):zt.resolve(null)})}))];case 1:return null===(C=S.sent())?[3,6]:"pending"!==s?[3,3]:[4,Ch(g.remoteStore)];case 2:return S.sent(),[3,4];case 3:"acknowledged"===s||"rejected"===s?(Qf(g,t,l||null),tf(g,t),function(k,K){on(on(k)._n).Gt(K)}(g.localStore,t)):Nn(),S.label=4;case 4:return[4,_c(g,C)];case 5:return S.sent(),[3,7];case 6:rn("SyncEngine","Cannot apply mutation batch with id: "+t),S.label=7;case 7:return[2]}var k,K,ue,de})})}function v_(o,t){return(0,X.mG)(this,void 0,void 0,function(){var s,l,g,C,S,K,ue;return(0,X.Jh)(this,function(de){switch(de.label){case 0:return ep(s=on(o)),tp(s),!0!==t||!0===s.$o?[3,3]:(l=s.sharedClientState.getAllActiveQueryTargets(),[4,xg(s,l.toArray())]);case 1:return g=de.sent(),s.$o=!0,[4,ul(s.remoteStore,!0)];case 2:for(de.sent(),C=0,S=g;C<S.length;C++)Wh(s.remoteStore,S[C]);return[3,7];case 3:return!1!==t||!1===s.$o?[3,7]:(K=[],ue=Promise.resolve(),s.Vo.forEach(function(Me,Be){s.sharedClientState.isLocalQueryTarget(Be)?K.push(Be):ue=ue.then(function(){return Zd(s,Be),Io(s.localStore,Be,!0)}),Bd(s.remoteStore,Be)}),[4,ue]);case 4:return de.sent(),[4,xg(s,K)];case 5:return de.sent(),(Be=on(s)).Co.forEach(function(ht,dt){Bd(Be.remoteStore,dt)}),Be.No.ts(),Be.Co=new Map,Be.Do=new Go(Jn.comparator),s.$o=!1,[4,ul(s.remoteStore,!1)];case 6:de.sent(),de.label=7;case 7:return[2]}var Be})})}function xg(o,t,s){return(0,X.mG)(this,void 0,void 0,function(){var l,g,C,S,k,K,ue,de,Me,Be,dt,Dt,en;return(0,X.Jh)(this,function(fn){switch(fn.label){case 0:l=on(o),g=[],C=[],S=0,k=t,fn.label=1;case 1:return S<k.length?(ue=void 0,(de=l.Vo.get(K=k[S]))&&0!==de.length?[4,Zs(l.localStore,ko(de[0]))]:[3,7]):[3,13];case 2:ue=fn.sent(),Me=0,Be=de,fn.label=3;case 3:return Me<Be.length?(dt=l.Po.get(Be[Me]),[4,__(l,dt)]):[3,6];case 4:(Dt=fn.sent()).snapshot&&C.push(Dt.snapshot),fn.label=5;case 5:return Me++,[3,3];case 6:return[3,11];case 7:return[4,Nf(l.localStore,K)];case 8:return en=fn.sent(),[4,Zs(l.localStore,en)];case 9:return ue=fn.sent(),[4,wh(l,Pg(en),K,!1)];case 10:fn.sent(),fn.label=11;case 11:g.push(ue),fn.label=12;case 12:return S++,[3,1];case 13:return[2,(l.vo._r(C),g)]}})})}function Pg(o){return Jl(o.path,o.collectionGroup,o.orderBy,o.filters,o.limit,"F",o.startAt,o.endAt)}function Rg(o){var t=on(o);return on(on(t.localStore).persistence).fn()}function y_(o,t,s,l){return(0,X.mG)(this,void 0,void 0,function(){var g,C,S;return(0,X.Jh)(this,function(k){switch(k.label){case 0:return(g=on(o)).$o?(rn("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!g.Vo.has(t))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ig(g.localStore)];case 3:return C=k.sent(),S=ic.createSynthesizedRemoteEventForCurrentChange(t,"current"===s),[4,_c(g,C,S)];case 4:return k.sent(),[3,8];case 5:return[4,Io(g.localStore,t,!0)];case 6:return k.sent(),Zd(g,t,l),[3,8];case 7:Nn(),k.label=8;case 8:return[2]}})})}function kg(o,t,s){return(0,X.mG)(this,void 0,void 0,function(){var l,g,C,S,k,K,ue,de,Me;return(0,X.Jh)(this,function(ht){switch(ht.label){case 0:if(!(l=ep(o)).$o)return[3,10];g=0,C=t,ht.label=1;case 1:return g<C.length?l.Vo.has(S=C[g])?(rn("SyncEngine","Adding an already active target "+S),[3,5]):[4,Nf(l.localStore,S)]:[3,6];case 2:return k=ht.sent(),[4,Zs(l.localStore,k)];case 3:return K=ht.sent(),[4,wh(l,Pg(k),K.targetId,!1)];case 4:ht.sent(),Wh(l.remoteStore,K),ht.label=5;case 5:return g++,[3,1];case 6:ue=function(dt){return(0,X.Jh)(this,function(Dt){switch(Dt.label){case 0:return l.Vo.has(dt)?[4,Io(l.localStore,dt,!1).then(function(){Bd(l.remoteStore,dt),Zd(l,dt)}).catch(Ba)]:[3,2];case 1:Dt.sent(),Dt.label=2;case 2:return[2]}})},de=0,Me=s,ht.label=7;case 7:return de<Me.length?[5,ue(Me[de])]:[3,10];case 8:ht.sent(),ht.label=9;case 9:return de++,[3,7];case 10:return[2]}})})}function ep(o){var t=on(o);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=by.bind(null,t),t.vo._r=$f.bind(null,t.eventManager),t.vo.Mo=h_.bind(null,t.eventManager),t}function tp(o){var t=on(o);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Sg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ag.bind(null,t),t}var np=function(){function o(){this.synchronizeTabs=!1}return o.prototype.initialize=function(t){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(s){switch(s.label){case 0:return this.R=Vd(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return s.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},o.prototype.Uo=function(t){return null},o.prototype.Ko=function(t){return $t(this.persistence,new et,t.initialUser,this.R)},o.prototype.qo=function(t){return new Uu(lg.bs,this.R)},o.prototype.Bo=function(t){return new jf},o.prototype.terminate=function(){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},o}(),Ng=function(o){function t(s,l,g){var C=this;return(C=o.call(this)||this).Qo=s,C.cacheSizeBytes=l,C.forceOwnership=g,C.synchronizeTabs=!1,C}return(0,X.ZT)(t,o),t.prototype.initialize=function(s){return(0,X.mG)(this,void 0,void 0,function(){var l=this;return(0,X.Jh)(this,function(g){switch(g.label){case 0:return[4,o.prototype.initialize.call(this,s)];case 1:return g.sent(),[4,t_(this.localStore)];case 2:return g.sent(),[4,this.Qo.initialize(this,s)];case 3:return g.sent(),[4,tp(this.Qo.syncEngine)];case 4:return g.sent(),[4,Ch(this.Qo.remoteStore)];case 5:return g.sent(),[4,this.persistence.He(function(){return l.gcScheduler&&!l.gcScheduler.started&&l.gcScheduler.start(l.localStore),Promise.resolve()})];case 6:return g.sent(),[2]}})})},t.prototype.Ko=function(s){return $t(this.persistence,new et,s.initialUser,this.R)},t.prototype.Uo=function(s){return new vh(this.persistence.referenceDelegate.garbageCollector,s.asyncQueue)},t.prototype.qo=function(s){var l=V(s.databaseInfo.databaseId,s.databaseInfo.persistenceKey),g=void 0!==this.cacheSizeBytes?Hs.withCacheSize(this.cacheSizeBytes):Hs.DEFAULT;return new d(this.synchronizeTabs,l,s.clientId,g,s.asyncQueue,al(),Ud(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(s){return new jf},t}(np),ll=function(o){function t(s,l){var g=this;return(g=o.call(this,s,l,!1)||this).Qo=s,g.cacheSizeBytes=l,g.synchronizeTabs=!0,g}return(0,X.ZT)(t,o),t.prototype.initialize=function(s){return(0,X.mG)(this,void 0,void 0,function(){var l,g=this;return(0,X.Jh)(this,function(C){switch(C.label){case 0:return[4,o.prototype.initialize.call(this,s)];case 1:return C.sent(),l=this.Qo.syncEngine,this.sharedClientState instanceof Zh?(this.sharedClientState.syncEngine={ui:Og.bind(null,l),ai:y_.bind(null,l),hi:kg.bind(null,l),fn:Rg.bind(null,l),ci:Xf.bind(null,l)},[4,this.sharedClientState.start()]):[3,3];case 2:C.sent(),C.label=3;case 3:return[4,this.persistence.He(function(S){return(0,X.mG)(g,void 0,void 0,function(){return(0,X.Jh)(this,function(k){switch(k.label){case 0:return[4,v_(this.Qo.syncEngine,S)];case 1:return k.sent(),this.gcScheduler&&(S&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):S||this.gcScheduler.stop()),[2]}})})})];case 4:return C.sent(),[2]}})})},t.prototype.Bo=function(s){var l=al();if(!Zh.yt(l))throw new Lt(gt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var g=V(s.databaseInfo.databaseId,s.databaseInfo.persistenceKey);return new Zh(l,s.asyncQueue,g,s.clientId,s.initialUser)},t}(Ng),Eh=function(){function o(){}return o.prototype.initialize=function(t,s){return(0,X.mG)(this,void 0,void 0,function(){var l=this;return(0,X.Jh)(this,function(g){switch(g.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(C){return Kf(l.syncEngine,C,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ig.bind(null,this.syncEngine),[4,ul(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:g.sent(),g.label=2;case 2:return[2]}})})},o.prototype.createEventManager=function(t){return new bg},o.prototype.createDatastore=function(t){var l=Vd(t.databaseInfo.databaseId),g=new Hf(t.databaseInfo);return new Fl(t.credentials,g,l)},o.prototype.createRemoteStore=function(t){var s,l,g,C,S,k=this;return s=this.localStore,l=this.datastore,g=t.asyncQueue,C=function(K){return Kf(k.syncEngine,K,0)},S=fu.yt()?new fu:new qh,new $h(s,l,g,C,S)},o.prototype.createSyncEngine=function(t,s){return ue=s,de=new Eg(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions),ue&&(de.$o=!0),de;var ue,de},o.prototype.terminate=function(){return function(t){return(0,X.mG)(this,void 0,void 0,function(){var s;return(0,X.Jh)(this,function(l){switch(l.label){case 0:return s=on(t),rn("RemoteStore","RemoteStore shutting down."),s.Or.add(5),[4,bh(s)];case 1:return l.sent(),s.Lr.shutdown(),s.Br.set("Unknown"),[2]}})})}(this.remoteStore)},o}(),nf=function(){function o(t){this.observer=t,this.muted=!1}return o.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},o.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},o.prototype.Wo=function(){this.muted=!0},o.prototype.jo=function(t,s){var l=this;this.muted||setTimeout(function(){l.muted||t(s)},0)},o}(),Ug=(function(){function o(t,s){var l=this;this.Go=t,this.R=s,this.metadata=new es,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(g){g&&g.io()?l.metadata.resolve(g.payload.metadata):l.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==g?void 0:g.payload)))},function(g){return l.metadata.reject(g)})}o.prototype.close=function(){return this.Go.cancel()},o.prototype.getMetadata=function(){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(t){return[2,this.metadata.promise]})})},o.prototype.Lo=function(){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},o.prototype.Ho=function(){return(0,X.mG)(this,void 0,void 0,function(){var t,s,l,g;return(0,X.Jh)(this,function(C){switch(C.label){case 0:return[4,this.Jo()];case 1:return null===(t=C.sent())?[2,null]:(s=this.zo.decode(t),l=Number(s),isNaN(l)&&this.Yo("length string ("+s+") is not valid number"),[4,this.Xo(l)]);case 2:return g=C.sent(),[2,new f_(JSON.parse(g),t.length+l)]}})})},o.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},o.prototype.Jo=function(){return(0,X.mG)(this,void 0,void 0,function(){var t,s;return(0,X.Jh)(this,function(l){switch(l.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(l.sent())return[3,3];l.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),s=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),s)])}})})},o.prototype.Xo=function(t){return(0,X.mG)(this,void 0,void 0,function(){var s;return(0,X.Jh)(this,function(l){switch(l.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:l.sent()&&this.Yo("Reached the end of bundle when more is expected."),l.label=2;case 2:return[3,0];case 3:return s=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),s)]}})})},o.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},o.prototype.tc=function(){return(0,X.mG)(this,void 0,void 0,function(){var t,s;return(0,X.Jh)(this,function(l){switch(l.label){case 0:return[4,this.Go.read()];case 1:return(t=l.sent()).done||((s=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),s.set(t.value,this.buffer.length),this.buffer=s),[2,t.done]}})})}}(),function(){function o(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return o.prototype.lookup=function(t){return(0,X.mG)(this,void 0,void 0,function(){var s,l=this;return(0,X.Jh)(this,function(g){switch(g.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Lt(gt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(C,S){return(0,X.mG)(this,void 0,void 0,function(){var k,K,ue,de,Me,Be;return(0,X.Jh)(this,function(ht){switch(ht.label){case 0:return k=on(C),K=pa(k.R)+"/documents",ue={documents:S.map(function(dt){return Dl(k.R,dt)})},[4,k.$i("BatchGetDocuments",K,ue)];case 1:return de=ht.sent(),Me=new Map,de.forEach(function(dt){var en,fn,Dt=(en=k.R,"found"in(fn=dt)?function(ir,or){nr(!!or.found);var Jr=fa(ir,or.found.name),pi=Fi(or.found.updateTime),Hi=new di({mapValue:{fields:or.found.fields}});return ki.newFoundDocument(Jr,pi,Hi)}(en,fn):"missing"in fn?function(ir,or){nr(!!or.missing),nr(!!or.readTime);var Jr=fa(ir,or.missing),pi=Fi(or.readTime);return ki.newNoDocument(Jr,pi)}(en,fn):Nn());Me.set(Dt.key.toString(),Dt)}),Be=[],[2,(S.forEach(function(dt){var Dt=Me.get(dt.toString());nr(!!Dt),Be.push(Dt)}),Be)]}})})}(this.datastore,t)];case 1:return[2,((s=g.sent()).forEach(function(C){return l.recordVersion(C)}),s)]}})})},o.prototype.set=function(t,s){this.write(s.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},o.prototype.update=function(t,s){try{this.write(s.toMutation(t,this.preconditionForUpdate(t)))}catch(l){this.lastWriteError=l}this.writtenDocs.add(t.toString())},o.prototype.delete=function(t){this.write(new da(t,this.precondition(t))),this.writtenDocs.add(t.toString())},o.prototype.commit=function(){return(0,X.mG)(this,void 0,void 0,function(){var t,s=this;return(0,X.Jh)(this,function(l){switch(l.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(g){t.delete(g.key.toString())}),t.forEach(function(g,C){var S=Jn.fromPath(C);s.mutations.push(new Qu(S,s.precondition(S)))}),[4,function(g,C){return(0,X.mG)(this,void 0,void 0,function(){var S,k,K;return(0,X.Jh)(this,function(ue){switch(ue.label){case 0:return S=on(g),k=pa(S.R)+"/documents",K={writes:C.map(function(de){return Dd(S.R,de)})},[4,S.Ni("Commit",k,K)];case 1:return ue.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return l.sent(),this.committed=!0,[2]}})})},o.prototype.recordVersion=function(t){var s;if(t.isFoundDocument())s=t.version;else{if(!t.isNoDocument())throw Nn();s=x.min()}var l=this.readVersions.get(t.key.toString());if(l){if(!s.isEqual(l))throw new Lt(gt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),s)},o.prototype.precondition=function(t){var s=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&s?Fo.updateTime(s):Fo.none()},o.prototype.preconditionForUpdate=function(t){var s=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&s){if(s.isEqual(x.min()))throw new Lt(gt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fo.updateTime(s)}return Fo.exists(!0)},o.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},o.prototype.ensureCommitNotCalled=function(){},o}()),b_=function(){function o(t,s,l,g){this.asyncQueue=t,this.datastore=s,this.updateFunction=l,this.deferred=g,this.ec=5,this.Zi=new yh(this.asyncQueue,"transaction_retry")}return o.prototype.run=function(){this.ec-=1,this.nc()},o.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,X.mG)(t,void 0,void 0,function(){var s,l,g=this;return(0,X.Jh)(this,function(C){return s=new Ug(this.datastore),(l=this.sc(s))&&l.then(function(S){g.asyncQueue.enqueueAndForget(function(){return s.commit().then(function(){g.deferred.resolve(S)}).catch(function(k){g.ic(k)})})}).catch(function(S){g.ic(S)}),[2]})})})},o.prototype.sc=function(t){try{var s=this.updateFunction(t);return!ss(s)&&s.catch&&s.then?s:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(l){return this.deferred.reject(l),null}},o.prototype.ic=function(t){var s=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return s.nc(),Promise.resolve()})):this.deferred.reject(t)},o.prototype.rc=function(t){if("FirebaseError"===t.name){var s=t.code;return"aborted"===s||"failed-precondition"===s||!Fc(s)}return!1},o}(),C_=function(){function o(t,s,l){var g=this;this.credentials=t,this.asyncQueue=s,this.databaseInfo=l,this.user=As.UNAUTHENTICATED,this.clientId=Kl.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(s,function(C){return(0,X.mG)(g,void 0,void 0,function(){return(0,X.Jh)(this,function(S){switch(S.label){case 0:return rn("FirestoreClient","Received user=",C.uid),[4,this.credentialListener(C)];case 1:return S.sent(),this.user=C,[2]}})})})}return o.prototype.getConfiguration=function(){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},o.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},o.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Lt(gt.FAILED_PRECONDITION,"The client has already been terminated.")},o.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var s=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,X.mG)(t,void 0,void 0,function(){var l,g;return(0,X.Jh)(this,function(C){switch(C.label){case 0:return C.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:C.sent(),C.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:C.sent(),C.label=4;case 4:return this.credentials.removeChangeListener(),s.resolve(),[3,6];case 5:return l=C.sent(),g=gc(l,"Failed to shutdown persistence"),s.reject(g),[3,6];case 6:return[2]}})})}),s.promise},o}();function Vg(o,t){return(0,X.mG)(this,void 0,void 0,function(){var s,l,g=this;return(0,X.Jh)(this,function(C){switch(C.label){case 0:return o.asyncQueue.verifyOperationInProgress(),rn("FirestoreClient","Initializing OfflineComponentProvider"),[4,o.getConfiguration()];case 1:return s=C.sent(),[4,t.initialize(s)];case 2:return C.sent(),l=s.initialUser,o.setCredentialChangeListener(function(S){return(0,X.mG)(g,void 0,void 0,function(){return(0,X.Jh)(this,function(k){switch(k.label){case 0:return l.isEqual(S)?[3,2]:[4,gn(t.localStore,S)];case 1:k.sent(),l=S,k.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return o.terminate()}),o.offlineComponents=t,[2]}})})}function rf(o,t){return(0,X.mG)(this,void 0,void 0,function(){var s,l;return(0,X.Jh)(this,function(g){switch(g.label){case 0:return o.asyncQueue.verifyOperationInProgress(),[4,rp(o)];case 1:return s=g.sent(),rn("FirestoreClient","Initializing OnlineComponentProvider"),[4,o.getConfiguration()];case 2:return l=g.sent(),[4,t.initialize(s,l)];case 3:return g.sent(),o.setCredentialChangeListener(function(C){return function(S,k){return(0,X.mG)(this,void 0,void 0,function(){var K,ue;return(0,X.Jh)(this,function(de){switch(de.label){case 0:return(K=on(S)).asyncQueue.verifyOperationInProgress(),rn("RemoteStore","RemoteStore received new credentials"),ue=Nl(K),K.Or.add(3),[4,bh(K)];case 1:return de.sent(),ue&&K.Br.set("Unknown"),[4,K.remoteSyncer.handleCredentialChange(k)];case 2:return de.sent(),K.Or.delete(3),[4,Jc(K)];case 3:return de.sent(),[2]}})})}(t.remoteStore,C)}),o.onlineComponents=t,[2]}})})}function rp(o){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(t){switch(t.label){case 0:return o.offlineComponents?[3,2]:(rn("FirestoreClient","Using default OfflineComponentProvider"),[4,Vg(o,new np)]);case 1:t.sent(),t.label=2;case 2:return[2,o.offlineComponents]}})})}function of(o){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(t){switch(t.label){case 0:return o.onlineComponents?[3,2]:(rn("FirestoreClient","Using default OnlineComponentProvider"),[4,rf(o,new Eh)]);case 1:t.sent(),t.label=2;case 2:return[2,o.onlineComponents]}})})}function Th(o){return rp(o).then(function(t){return t.persistence})}function Dh(o){return rp(o).then(function(t){return t.localStore})}function Bg(o){return of(o).then(function(t){return t.remoteStore})}function Sh(o){return of(o).then(function(t){return t.syncEngine})}function vc(o){return(0,X.mG)(this,void 0,void 0,function(){var t,s;return(0,X.Jh)(this,function(l){switch(l.label){case 0:return[4,of(o)];case 1:return t=l.sent(),[2,((s=t.eventManager).onListen=Yf.bind(null,t.syncEngine),s.onUnlisten=Tg.bind(null,t.syncEngine),s)]}})})}function ip(o,t,s){var l=this;void 0===s&&(s={});var g=new es;return o.asyncQueue.enqueueAndForget(function(){return(0,X.mG)(l,void 0,void 0,function(){var C;return(0,X.Jh)(this,function(S){switch(S.label){case 0:return C=function(k,K,ue,de,Me){var Be=new nf({next:function(dt){K.enqueueAndForget(function(){return Cg(k,ht)});var Dt=dt.docs.has(ue);!Dt&&dt.fromCache?Me.reject(new Lt(gt.UNAVAILABLE,"Failed to get document because the client is offline.")):Dt&&dt.fromCache&&de&&"server"===de.source?Me.reject(new Lt(gt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Me.resolve(dt)},error:function(dt){return Me.reject(dt)}}),ht=new Wf(Ks(ue.path),Be,{includeMetadataChanges:!0,so:!0});return zf(k,ht)},[4,vc(o)];case 1:return[2,C.apply(void 0,[S.sent(),o.asyncQueue,t,s,g])]}})})}),g.promise}function jg(o,t,s){var l=this;void 0===s&&(s={});var g=new es;return o.asyncQueue.enqueueAndForget(function(){return(0,X.mG)(l,void 0,void 0,function(){var C;return(0,X.Jh)(this,function(S){switch(S.label){case 0:return C=function(k,K,ue,de,Me){var Be=new nf({next:function(dt){K.enqueueAndForget(function(){return Cg(k,ht)}),dt.fromCache&&"server"===de.source?Me.reject(new Lt(gt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Me.resolve(dt)},error:function(dt){return Me.reject(dt)}}),ht=new Wf(ue,Be,{includeMetadataChanges:!0,so:!0});return zf(k,ht)},[4,vc(o)];case 1:return[2,C.apply(void 0,[S.sent(),o.asyncQueue,t,s,g])]}})})}),g.promise}var w_=function(o,t,s,l,g,C,S,k){this.databaseId=o,this.appId=t,this.persistenceKey=s,this.host=l,this.ssl=g,this.forceLongPolling=C,this.autoDetectLongPolling=S,this.useFetchStreams=k},qd=function(){function o(t,s){this.projectId=t,this.database=s||"(default)"}return Object.defineProperty(o.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return t instanceof o&&t.projectId===this.projectId&&t.database===this.database},o}(),E_=new Map,Hg=function(o,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+o},op=function(){function o(){this.changeListener=null}return o.prototype.getToken=function(){return Promise.resolve(null)},o.prototype.invalidateToken=function(){},o.prototype.setChangeListener=function(t,s){this.changeListener=s,t.enqueueRetryable(function(){return s(As.UNAUTHENTICATED)})},o.prototype.removeChangeListener=function(){this.changeListener=null},o}(),Gg=function(){function o(t){this.token=t,this.changeListener=null}return o.prototype.getToken=function(){return Promise.resolve(this.token)},o.prototype.invalidateToken=function(){},o.prototype.setChangeListener=function(t,s){var l=this;this.changeListener=s,t.enqueueRetryable(function(){return s(l.token.user)})},o.prototype.removeChangeListener=function(){this.changeListener=null},o}(),Zg=function(){function o(t){var s=this;this.currentUser=As.UNAUTHENTICATED,this.oc=new es,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){s.cc++,s.currentUser=s.ac(),s.oc.resolve(),s.changeListener&&s.asyncQueue.enqueueRetryable(function(){return s.changeListener(s.currentUser)})};var l=function(g){rn("FirebaseCredentialsProvider","Auth detected"),s.auth=g,s.auth.addAuthTokenListener(s.uc)};t.onInit(function(g){return l(g)}),setTimeout(function(){if(!s.auth){var g=t.getImmediate({optional:!0});g?l(g):(rn("FirebaseCredentialsProvider","Auth not yet detected"),s.oc.resolve())}},0)}return o.prototype.getToken=function(){var t=this,s=this.cc,l=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(l).then(function(g){return t.cc!==s?(rn("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):g?(nr("string"==typeof g.accessToken),new Hg(g.accessToken,t.currentUser)):null}):Promise.resolve(null)},o.prototype.invalidateToken=function(){this.forceRefresh=!0},o.prototype.setChangeListener=function(t,s){var l=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,X.mG)(l,void 0,void 0,function(){return(0,X.Jh)(this,function(g){switch(g.label){case 0:return[4,this.oc.promise];case 1:return g.sent(),[4,s(this.currentUser)];case 2:return g.sent(),this.changeListener=s,[2]}})})})},o.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},o.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return nr(null===t||"string"==typeof t),new As(t)},o}(),qg=function(){function o(t,s,l){this.hc=t,this.lc=s,this.fc=l,this.type="FirstParty",this.user=As.FIRST_PARTY}return Object.defineProperty(o.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},s=this.hc.auth.getAuthHeaderValueForFirstParty([]);return s&&(t.Authorization=s),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),o}(),zg=function(){function o(t,s,l){this.hc=t,this.lc=s,this.fc=l}return o.prototype.getToken=function(){return Promise.resolve(new qg(this.hc,this.lc,this.fc))},o.prototype.setChangeListener=function(t,s){t.enqueueRetryable(function(){return s(As.FIRST_PARTY)})},o.prototype.removeChangeListener=function(){},o.prototype.invalidateToken=function(){},o}();function Vu(o,t,s){if(!s)throw new Lt(gt.INVALID_ARGUMENT,"Function "+o+"() cannot be called with an empty "+t+".")}function zd(o,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Lt(gt.INVALID_ARGUMENT,"Invalid options passed to function "+o+'(): You cannot specify both "merge" and "mergeFields".');return t}function $g(o,t,s,l){if(!0===t&&!0===l)throw new Lt(gt.INVALID_ARGUMENT,o+" and "+s+" cannot be used together.")}function Wg(o){if(!Jn.isDocumentKey(o))throw new Lt(gt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+o+" has "+o.length+".")}function T_(o){if(Jn.isDocumentKey(o))throw new Lt(gt.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+o+" has "+o.length+".")}function Ll(o){if(void 0===o)return"undefined";if(null===o)return"null";if("string"==typeof o)return o.length>20&&(o=o.substring(0,20)+"..."),JSON.stringify(o);if("number"==typeof o||"boolean"==typeof o)return""+o;if("object"==typeof o){if(o instanceof Array)return"an array";var t=function(s){if(s.constructor){var l=/function\s+([^\s(]+)\s*\(/.exec(s.constructor.toString());if(l&&l.length>1)return l[1]}return null}(o);return t?"a custom "+t+" object":"an object"}return"function"==typeof o?"a function":Nn()}function Ci(o,t){if("_delegate"in o&&(o=o._delegate),!(o instanceof t)){if(t.name===o.constructor.name)throw new Lt(gt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var s=Ll(o);throw new Lt(gt.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+s)}return o}function $d(o,t){if(t<=0)throw new Lt(gt.INVALID_ARGUMENT,"Function "+o+"() requires a positive number, but it was: "+t+".")}var Wd=function(){function o(t){var s;if(void 0===t.host){if(void 0!==t.ssl)throw new Lt(gt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(s=t.ssl)||void 0===s||s;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Lt(gt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,$g("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return o.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},o}(),Ah=function(){function o(t,s){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wd({}),this._settingsFrozen=!1,t instanceof qd?(this._databaseId=t,this._credentials=new op):(this._app=t,this._databaseId=function(l){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Lt(gt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qd(l.options.projectId)}(t),this._credentials=new Zg(s))}return Object.defineProperty(o.prototype,"app",{get:function(){if(!this._app)throw new Lt(gt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),o.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Lt(gt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wd(t),void 0!==t.credentials&&(this._credentials=function(s){if(!s)return new op;switch(s.type){case"gapi":var l=s.client;return nr(!("object"!=typeof l||null===l||!l.auth||!l.auth.getAuthHeaderValueForFirstParty)),new zg(l,s.sessionIndex||"0",s.iamToken||null);case"provider":return s.client;default:throw new Lt(gt.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},o.prototype._getSettings=function(){return this._settings},o.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},o.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},o.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},o.prototype._terminate=function(){return(s=E_.get(this))&&(rn("ComponentProvider","Removing Datastore"),E_.delete(this),s.terminate()),Promise.resolve();var s},o}(),ho=function(){function o(t,s,l){this.converter=s,this._key=l,this.type="document",this.firestore=t}return Object.defineProperty(o.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"parent",{get:function(){return new yc(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),o.prototype.withConverter=function(t){return new o(this.firestore,t,this._key)},o}(),ea=function(){function o(t,s,l){this.converter=s,this._query=l,this.type="query",this.firestore=t}return o.prototype.withConverter=function(t){return new o(this.firestore,t,this._query)},o}(),yc=function(o){function t(s,l,g){var C=this;return(C=o.call(this,s,l,Ks(g))||this)._path=g,C.type="collection",C}return(0,X.ZT)(t,o),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var s=this._path.popLast();return s.isEmpty()?null:new ho(this.firestore,null,new Jn(s))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(s){return new t(this.firestore,s,this._path)},t}(ea);function sp(o,t){for(var s,l=[],g=2;g<arguments.length;g++)l[g-2]=arguments[g];if(o=(0,Re.m9)(o),Vu("collection","path",t),o instanceof Ah)return T_(s=Te.fromString.apply(Te,(0,X.ev)([t],l))),new yc(o,null,s);if(!(o instanceof ho||o instanceof yc))throw new Lt(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return T_(s=Te.fromString.apply(Te,(0,X.ev)([o.path],l)).child(Te.fromString(t))),new yc(o.firestore,null,s)}function sf(o,t){for(var s,l=[],g=2;g<arguments.length;g++)l[g-2]=arguments[g];if(o=(0,Re.m9)(o),1===arguments.length&&(t=Kl.u()),Vu("doc","path",t),o instanceof Ah)return Wg(s=Te.fromString.apply(Te,(0,X.ev)([t],l))),new ho(o,null,new Jn(s));if(!(o instanceof ho||o instanceof yc))throw new Lt(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Wg(s=o._path.child(Te.fromString.apply(Te,(0,X.ev)([t],l)))),new ho(o.firestore,o instanceof yc?o.converter:null,new Jn(s))}function af(o,t){return o=(0,Re.m9)(o),t=(0,Re.m9)(t),(o instanceof ho||o instanceof yc)&&(t instanceof ho||t instanceof yc)&&o.firestore===t.firestore&&o.path===t.path&&o.converter===t.converter}function Yg(o,t){return o=(0,Re.m9)(o),t=(0,Re.m9)(t),o instanceof ea&&t instanceof ea&&o.firestore===t.firestore&&wu(o._query,t._query)&&o.converter===t.converter}var D_=function(){function o(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new yh(this,"async_queue_retry"),this.Ic=function(){var l=Ud();l&&rn("AsyncQueue","Visibility state changed to "+l.visibilityState),t.Zi.Gi()};var s=Ud();s&&"function"==typeof s.addEventListener&&s.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(o.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),o.prototype.enqueueAndForget=function(t){this.enqueue(t)},o.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},o.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var s=Ud();s&&"function"==typeof s.removeEventListener&&s.removeEventListener("visibilitychange",this.Ic)}},o.prototype.enqueue=function(t){var s=this;if(this.Ac(),this._c)return new Promise(function(){});var l=new es;return this.Rc(function(){return s._c&&s.Ec?Promise.resolve():(t().then(l.resolve,l.reject),l.promise)}).then(function(){return l.promise})},o.prototype.enqueueRetryable=function(t){var s=this;this.enqueueAndForget(function(){return s.wc.push(t),s.bc()})},o.prototype.bc=function(){return(0,X.mG)(this,void 0,void 0,function(){var t,s=this;return(0,X.Jh)(this,function(l){switch(l.label){case 0:if(0===this.wc.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return l.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!el(t=l.sent()))throw t;return rn("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return s.bc()}),l.label=5;case 5:return[2]}})})},o.prototype.Rc=function(t){var s=this,l=this.dc.then(function(){return s.gc=!0,t().catch(function(g){throw s.yc=g,s.gc=!1,$i("INTERNAL UNHANDLED ERROR: ",(S=(C=g).message||"",C.stack&&(S=C.stack.includes(C.message)?C.stack:C.message+"\n"+C.stack),S)),g;var C,S}).then(function(g){return s.gc=!1,g})});return this.dc=l,l},o.prototype.enqueueAfterDelay=function(t,s,l){var g=this;this.Ac(),this.Tc.indexOf(t)>-1&&(s=0);var C=yg.createAndSchedule(this,t,s,l,function(S){return g.vc(S)});return this.mc.push(C),C},o.prototype.Ac=function(){this.yc&&Nn()},o.prototype.verifyOperationInProgress=function(){},o.prototype.Pc=function(){return(0,X.mG)(this,void 0,void 0,function(){var t;return(0,X.Jh)(this,function(s){switch(s.label){case 0:return[4,t=this.dc];case 1:s.sent(),s.label=2;case 2:if(t!==this.dc)return[3,0];s.label=3;case 3:return[2]}})})},o.prototype.Vc=function(t){for(var s=0,l=this.mc;s<l.length;s++)if(l[s].timerId===t)return!0;return!1},o.prototype.Sc=function(t){var s=this;return this.Pc().then(function(){s.mc.sort(function(S,k){return S.targetTimeMs-k.targetTimeMs});for(var l=0,g=s.mc;l<g.length;l++){var C=g[l];if(C.skipDelay(),"all"!==t&&C.timerId===t)break}return s.Pc()})},o.prototype.Dc=function(t){this.Tc.push(t)},o.prototype.vc=function(t){var s=this.mc.indexOf(t);this.mc.splice(s,1)},o}();function td(o){return function(t,s){if("object"!=typeof t||null===t)return!1;for(var l=t,g=0,C=["next","error","complete"];g<C.length;g++){var S=C[g];if(S in l&&"function"==typeof l[S])return!0}return!1}(o)}!function(){function o(){this._progressObserver={},this._taskCompletionResolver=new es,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}o.prototype.onProgress=function(t,s,l){this._progressObserver={next:t,error:s,complete:l}},o.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},o.prototype.then=function(t,s){return this._taskCompletionResolver.promise.then(t,s)},o.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},o.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},o.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var zo=function(o){function t(s,l){var g=this;return(g=o.call(this,s,l)||this).type="firestore",g._queue=new D_,g._persistenceKey="name"in s?s.name:"[DEFAULT]",g}return(0,X.ZT)(t,o),t.prototype._terminate=function(){return this._firestoreClient||nd(this),this._firestoreClient.terminate()},t}(Ah);function ms(o){return o._firestoreClient||nd(o),o._firestoreClient.verifyNotTerminated(),o._firestoreClient}function nd(o){var t,C,k,s=o._freezeSettings(),l=(C=(null===(t=o._app)||void 0===t?void 0:t.options.appId)||"",new w_(o._databaseId,C,o._persistenceKey,(k=s).host,k.ssl,k.experimentalForceLongPolling,k.experimentalAutoDetectLongPolling,k.useFetchStreams));o._firestoreClient=new C_(o._credentials,o._queue,l)}function Qg(o,t,s){var l=this,g=new es;return o.asyncQueue.enqueue(function(){return(0,X.mG)(l,void 0,void 0,function(){var C;return(0,X.Jh)(this,function(S){switch(S.label){case 0:return S.trys.push([0,3,,4]),[4,Vg(o,s)];case 1:return S.sent(),[4,rf(o,t)];case 2:return S.sent(),g.resolve(),[3,4];case 3:if(!("FirebaseError"===(k=C=S.sent()).name?k.code===gt.FAILED_PRECONDITION||k.code===gt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&k instanceof DOMException)||22===k.code||20===k.code||11===k.code))throw C;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+C),g.reject(C),[3,4];case 4:return[2]}var k})})}).then(function(){return g.promise})}function Jg(o){if(o._initialized||o._terminated)throw new Lt(gt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var cl=function(){function o(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];for(var l=0;l<t.length;++l)if(0===t[l].length)throw new Lt(gt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(t)}return o.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},o}(),rd=function(){function o(t){this._byteString=t}return o.fromBase64String=function(t){try{return new o(ur.fromBase64String(t))}catch(s){throw new Lt(gt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}},o.fromUint8Array=function(t){return new o(ur.fromUint8Array(t))},o.prototype.toBase64=function(){return this._byteString.toBase64()},o.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},o.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},o.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},o}(),Kd=function(o){this._methodName=o},uf=function(){function o(t,s){if(!isFinite(t)||t<-90||t>90)throw new Lt(gt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new Lt(gt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}return Object.defineProperty(o.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},o.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},o.prototype._compareTo=function(t){return Tr(this._lat,t._lat)||Tr(this._long,t._long)},o}(),Xg=/^__.*__$/,Eo=function(){function o(t,s,l){this.data=t,this.fieldMask=s,this.fieldTransforms=l}return o.prototype.toMutation=function(t,s){return null!==this.fieldMask?new Ts(t,this.data,this.fieldMask,s,this.fieldTransforms):new su(t,this.data,s,this.fieldTransforms)},o}(),lf=function(){function o(t,s,l){this.data=t,this.fieldMask=s,this.fieldTransforms=l}return o.prototype.toMutation=function(t,s){return new Ts(t,this.data,this.fieldMask,s,this.fieldTransforms)},o}();function S_(o){switch(o){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nn()}}var dl=function(){function o(t,s,l,g,C,S){this.settings=t,this.databaseId=s,this.R=l,this.ignoreUndefinedProperties=g,void 0===C&&this.Cc(),this.fieldTransforms=C||[],this.fieldMask=S||[]}return Object.defineProperty(o.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),o.prototype.xc=function(t){return new o(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},o.prototype.kc=function(t){var s,l=null===(s=this.path)||void 0===s?void 0:s.child(t),g=this.xc({path:l,Fc:!1});return g.$c(t),g},o.prototype.Oc=function(t){var s,l=null===(s=this.path)||void 0===s?void 0:s.child(t),g=this.xc({path:l,Fc:!1});return g.Cc(),g},o.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},o.prototype.Lc=function(t){return hf(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},o.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(s){return t.isPrefixOf(s)})||void 0!==this.fieldTransforms.find(function(s){return t.isPrefixOf(s.field)})},o.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},o.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(S_(this.Nc)&&Xg.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},o}(),ap=function(){function o(t,s,l){this.databaseId=t,this.ignoreUndefinedProperties=s,this.R=l||Vd(t)}return o.prototype.Uc=function(t,s,l,g){return void 0===g&&(g=!1),new dl({Nc:t,methodName:s,qc:l,path:Tt.emptyPath(),Fc:!1,Bc:g},this.databaseId,this.R,this.ignoreUndefinedProperties)},o}();function Ul(o){var t=o._freezeSettings(),s=Vd(o._databaseId);return new ap(o._databaseId,!!t.ignoreUndefinedProperties,s)}function up(o,t,s,l,g,C){void 0===C&&(C={});var S=o.Uc(C.merge||C.mergeFields?2:0,t,s,g);cf("Data must be an object, but it was:",S,l);var k,K,ue=hp(l,S);if(C.merge)k=new hn(S.fieldMask),K=S.fieldTransforms;else if(C.mergeFields){for(var de=[],Me=0,Be=C.mergeFields;Me<Be.length;Me++){var ht=df(t,Be[Me],s);if(!S.contains(ht))throw new Lt(gt.INVALID_ARGUMENT,"Field '"+ht+"' is specified in your field mask but missing from your input data.");om(de,ht)||de.push(ht)}k=new hn(de),K=S.fieldTransforms.filter(function(dt){return k.covers(dt.field)})}else k=null,K=S.fieldTransforms;return new Eo(new di(ue),k,K)}var lp=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,X.ZT)(t,o),t.prototype._toFieldTransform=function(s){if(2!==s.Nc)throw s.Lc(1===s.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return s.fieldMask.push(s.path),null},t.prototype.isEqual=function(s){return s instanceof t},t}(Kd);function em(o,t,s){return new dl({Nc:3,qc:t.settings.qc,methodName:o._methodName,Fc:s},t.databaseId,t.R,t.ignoreUndefinedProperties)}var tm=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,X.ZT)(t,o),t.prototype._toFieldTransform=function(s){return new iu(s.path,new Du)},t.prototype.isEqual=function(s){return s instanceof t},t}(Kd),nm=function(o){function t(s,l){var g=this;return(g=o.call(this,s)||this).Kc=l,g}return(0,X.ZT)(t,o),t.prototype._toFieldTransform=function(s){var l=em(this,s,!0),g=this.Kc.map(function(S){return Vl(S,l)}),C=new nu(g);return new iu(s.path,C)},t.prototype.isEqual=function(s){return this===s},t}(Kd),rm=function(o){function t(s,l){var g=this;return(g=o.call(this,s)||this).Kc=l,g}return(0,X.ZT)(t,o),t.prototype._toFieldTransform=function(s){var l=em(this,s,!0),g=this.Kc.map(function(S){return Vl(S,l)}),C=new ru(g);return new iu(s.path,C)},t.prototype.isEqual=function(s){return this===s},t}(Kd),im=function(o){function t(s,l){var g=this;return(g=o.call(this,s)||this).Qc=l,g}return(0,X.ZT)(t,o),t.prototype._toFieldTransform=function(s){var l=new gs(s.R,Di(s.R,this.Qc));return new iu(s.path,l)},t.prototype.isEqual=function(s){return this===s},t}(Kd);function cp(o,t,s,l){var g=o.Uc(1,t,s);cf("Data must be an object, but it was:",g,l);var C=[],S=di.empty();z(l,function(K,ue){var de=pp(t,K,s);ue=(0,Re.m9)(ue);var Me=g.Oc(de);if(ue instanceof lp)C.push(de);else{var Be=Vl(ue,Me);null!=Be&&(C.push(de),S.set(de,Be))}});var k=new hn(C);return new lf(S,k,g.fieldTransforms)}function dp(o,t,s,l,g,C){var S=o.Uc(1,t,s),k=[df(t,l,s)],K=[g];if(C.length%2!=0)throw new Lt(gt.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var ue=0;ue<C.length;ue+=2)k.push(df(t,C[ue])),K.push(C[ue+1]);for(var de=[],Me=di.empty(),Be=k.length-1;Be>=0;--Be)if(!om(de,k[Be])){var ht=k[Be],dt=K[Be];dt=(0,Re.m9)(dt);var Dt=S.Oc(ht);if(dt instanceof lp)de.push(ht);else{var en=Vl(dt,Dt);null!=en&&(de.push(ht),Me.set(ht,en))}}var fn=new hn(de);return new lf(Me,fn,S.fieldTransforms)}function Qd(o,t,s,l){return void 0===l&&(l=!1),Vl(s,o.Uc(l?4:3,t))}function Vl(o,t){if(fp(o=(0,Re.m9)(o)))return cf("Unsupported field value:",t,o),hp(o,t);if(o instanceof Kd)return function(s,l){if(!S_(l.Nc))throw l.Lc(s._methodName+"() can only be used with update() and set()");if(!l.path)throw l.Lc(s._methodName+"() is not currently supported inside arrays");var g=s._toFieldTransform(l);g&&l.fieldTransforms.push(g)}(o,t),null;if(void 0===o&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),o instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(s,l){for(var g=[],C=0,S=0,k=s;S<k.length;S++){var K=Vl(k[S],l.Mc(C));null==K&&(K={nullValue:"NULL_VALUE"}),g.push(K),C++}return{arrayValue:{values:g}}}(o,t)}return function(s,l){if(null===(s=(0,Re.m9)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return Di(l.R,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){var g=U.fromDate(s);return{timestampValue:ls(l.R,g)}}if(s instanceof U)return g=new U(s.seconds,1e3*Math.floor(s.nanoseconds/1e3)),{timestampValue:ls(l.R,g)};if(s instanceof uf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof rd)return{bytesValue:Lc(l.R,s._byteString)};if(s instanceof ho){var C=s.firestore._databaseId;if(!C.isEqual(g=l.databaseId))throw l.Lc("Document reference is for database "+C.projectId+"/"+C.database+" but should be for database "+g.projectId+"/"+g.database);return{referenceValue:Uc(s.firestore._databaseId||l.databaseId,s._key.path)}}throw l.Lc("Unsupported field value: "+Ll(s))}(o,t)}function hp(o,t){var s={};return te(o)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):z(o,function(l,g){var C=Vl(g,t.kc(l));null!=C&&(s[l]=C)}),{mapValue:{fields:s}}}function fp(o){return!("object"!=typeof o||null===o||o instanceof Array||o instanceof Date||o instanceof U||o instanceof uf||o instanceof rd||o instanceof ho||o instanceof Kd)}function cf(o,t,s){if(!fp(s)||"object"!=typeof(g=s)||null===g||Object.getPrototypeOf(g)!==Object.prototype&&null!==Object.getPrototypeOf(g)){var l=Ll(s);throw t.Lc("an object"===l?o+" a custom object":o+" "+l)}var g}function df(o,t,s){if((t=(0,Re.m9)(t))instanceof cl)return t._internalPath;if("string"==typeof t)return pp(o,t);throw hf("Field path arguments must be of type string or FieldPath.",o,!1,void 0,s)}var A_=new RegExp("[~\\*/\\[\\]]");function pp(o,t,s){if(t.search(A_)>=0)throw hf("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",o,!1,void 0,s);try{return(new(cl.bind.apply(cl,(0,X.ev)([void 0],t.split(".")))))._internalPath}catch(l){throw hf("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",o,!1,void 0,s)}}function hf(o,t,s,l,g){var C=l&&!l.isEmpty(),S=void 0!==g,k="Function "+t+"() called with invalid data";s&&(k+=" (via `toFirestore()`)");var K="";return(C||S)&&(K+=" (found",C&&(K+=" in field "+l),S&&(K+=" in document "+g),K+=")"),new Lt(gt.INVALID_ARGUMENT,(k+=". ")+o+K)}function om(o,t){return o.some(function(s){return s.isEqual(t)})}var Jd=function(){function o(t,s,l,g,C){this._firestore=t,this._userDataWriter=s,this._key=l,this._document=g,this._converter=C}return Object.defineProperty(o.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ref",{get:function(){return new ho(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),o.prototype.exists=function(){return null!==this._document},o.prototype.data=function(){if(this._document){if(this._converter){var t=new Ey(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},o.prototype.get=function(t){if(this._document){var s=this._document.data.field(Mh("DocumentSnapshot.get",t));if(null!==s)return this._userDataWriter.convertValue(s)}},o}(),Ey=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,X.ZT)(t,o),t.prototype.data=function(){return o.prototype.data.call(this)},t}(Jd);function Mh(o,t){return"string"==typeof t?pp(o,t):t instanceof cl?t._internalPath:t._delegate._internalPath}var id=function(){function o(t,s){this.hasPendingWrites=t,this.fromCache=s}return o.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},o}(),Bl=function(o){function t(s,l,g,C,S,k){var K=this;return(K=o.call(this,s,l,g,C,k)||this)._firestore=s,K._firestoreImpl=s,K.metadata=S,K}return(0,X.ZT)(t,o),t.prototype.exists=function(){return o.prototype.exists.call(this)},t.prototype.data=function(s){if(void 0===s&&(s={}),this._document){if(this._converter){var l=new ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(l,s)}return this._userDataWriter.convertValue(this._document.data.value,s.serverTimestamps)}},t.prototype.get=function(s,l){if(void 0===l&&(l={}),this._document){var g=this._document.data.field(Mh("DocumentSnapshot.get",s));if(null!==g)return this._userDataWriter.convertValue(g,l.serverTimestamps)}},t}(Jd),ff=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,X.ZT)(t,o),t.prototype.data=function(s){return void 0===s&&(s={}),o.prototype.data.call(this,s)},t}(Bl),od=function(){function o(t,s,l,g){this._firestore=t,this._userDataWriter=s,this._snapshot=g,this.metadata=new id(g.hasPendingWrites,g.fromCache),this.query=l}return Object.defineProperty(o.prototype,"docs",{get:function(){var t=[];return this.forEach(function(s){return t.push(s)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),o.prototype.forEach=function(t,s){var l=this;this._snapshot.docs.forEach(function(g){t.call(s,new ff(l._firestore,l._userDataWriter,g.key,g,new id(l._snapshot.mutatedKeys.has(g.key),l._snapshot.fromCache),l.query.converter))})},o.prototype.docChanges=function(t){void 0===t&&(t={});var s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Lt(gt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(l,g){if(l._snapshot.oldDocs.isEmpty()){var C=0;return l._snapshot.docChanges.map(function(k){return{type:"added",doc:new ff(l._firestore,l._userDataWriter,k.doc.key,k.doc,new id(l._snapshot.mutatedKeys.has(k.doc.key),l._snapshot.fromCache),l.query.converter),oldIndex:-1,newIndex:C++}})}var S=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(function(k){return g||3!==k.type}).map(function(k){var K=new ff(l._firestore,l._userDataWriter,k.doc.key,k.doc,new id(l._snapshot.mutatedKeys.has(k.doc.key),l._snapshot.fromCache),l.query.converter),ue=-1,de=-1;return 0!==k.type&&(ue=S.indexOf(k.doc.key),S=S.delete(k.doc.key)),1!==k.type&&(de=(S=S.add(k.doc)).indexOf(k.doc.key)),{type:gp(k.type),doc:K,oldIndex:ue,newIndex:de}})}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges},o}();function gp(o){switch(o){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nn()}}function sm(o,t){return o instanceof Bl&&t instanceof Bl?o._firestore===t._firestore&&o._key.isEqual(t._key)&&(null===o._document?null===t._document:o._document.isEqual(t._document))&&o._converter===t._converter:o instanceof od&&t instanceof od&&o._firestore===t._firestore&&Yg(o.query,t.query)&&o.metadata.isEqual(t.metadata)&&o._snapshot.isEqual(t._snapshot)}function mp(o){if(Sa(o)&&0===o.explicitOrderBy.length)throw new Lt(gt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xd=function(){};function sd(o){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];for(var l=0,g=t;l<g.length;l++){var C=g[l];o=C._apply(o)}return o}var Bu=function(o){function t(s,l,g){var C=this;return(C=o.call(this)||this).jc=s,C.Wc=l,C.Gc=g,C.type="where",C}return(0,X.ZT)(t,o),t.prototype._apply=function(s){var C,k,l=Ul(s.firestore),g=function(C,S,k,K,ue,de,Me){var Be;if(ue.isKeyField()){if("array-contains"===de||"array-contains-any"===de)throw new Lt(gt.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+de+"' queries on FieldPath.documentId().");if("in"===de||"not-in"===de){am(Me,de);for(var ht=[],dt=0,Dt=Me;dt<Dt.length;dt++)ht.push(yp(K,C,Dt[dt]));Be={arrayValue:{values:ht}}}else Be=yp(K,C,Me)}else"in"!==de&&"not-in"!==de&&"array-contains-any"!==de||am(Me,de),Be=Qd(k,"where",Me,"in"===de||"not-in"===de);var fn=Ao.create(ue,de,Be);return function(ir,or){if(or.g()){var Jr=fd(ir);if(null!==Jr&&!Jr.isEqual(or.field))throw new Lt(gt.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+Jr.toString()+"' and '"+or.field.toString()+"'");var pi=Cl(ir);null!==pi&&O_(0,or.field,pi)}var Hi=function(Ms,Ip){for(var Ph=0,Em=Ms.filters;Ph<Em.length;Ph++){var Op=Em[Ph];if(Ip.indexOf(Op.op)>=0)return Op.op}return null}(ir,function(Ms){switch(Ms){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(or.op));if(null!==Hi)throw new Lt(gt.INVALID_ARGUMENT,Hi===or.op?"Invalid query. You cannot use more than one '"+or.op.toString()+"' filter.":"Invalid query. You cannot use '"+or.op.toString()+"' filters with '"+Hi.toString()+"' filters.")}(C,fn),fn}(s._query,0,l,s.firestore._databaseId,this.jc,this.Wc,this.Gc);return new ea(s.firestore,s.converter,(k=(C=s._query).filters.concat([g]),new ua(C.path,C.collectionGroup,C.explicitOrderBy.slice(),k,C.limit,C.limitType,C.startAt,C.endAt)))},t}(Xd),Ty=function(o){function t(s,l){var g=this;return(g=o.call(this)||this).jc=s,g.zc=l,g.type="orderBy",g}return(0,X.ZT)(t,o),t.prototype._apply=function(s){var g,S,l=function(g,C,S){if(null!==g.startAt)throw new Lt(gt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==g.endAt)throw new Lt(gt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var k=new zu(C,S);return function(K,ue){if(null===Cl(K)){var de=fd(K);null!==de&&O_(0,de,ue.field)}}(g,k),k}(s._query,this.jc,this.zc);return new ea(s.firestore,s.converter,(S=(g=s._query).explicitOrderBy.concat([l]),new ua(g.path,g.collectionGroup,S,g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)))},t}(Xd),M_=function(o){function t(s,l,g){var C=this;return(C=o.call(this)||this).type=s,C.Hc=l,C.Jc=g,C}return(0,X.ZT)(t,o),t.prototype._apply=function(s){return new ea(s.firestore,s.converter,pd(s._query,this.Hc,this.Jc))},t}(Xd),I_=function(o){function t(s,l,g){var C=this;return(C=o.call(this)||this).type=s,C.Yc=l,C.Xc=g,C}return(0,X.ZT)(t,o),t.prototype._apply=function(s){var g,C,l=vp(s,this.type,this.Yc,this.Xc);return new ea(s.firestore,s.converter,(C=l,new ua((g=s._query).path,g.collectionGroup,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,C,g.endAt)))},t}(Xd),_p=function(o){function t(s,l,g){var C=this;return(C=o.call(this)||this).type=s,C.Yc=l,C.Xc=g,C}return(0,X.ZT)(t,o),t.prototype._apply=function(s){var g,C,l=vp(s,this.type,this.Yc,this.Xc);return new ea(s.firestore,s.converter,(C=l,new ua((g=s._query).path,g.collectionGroup,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,C)))},t}(Xd);function vp(o,t,s,l){if(s[0]=(0,Re.m9)(s[0]),s[0]instanceof Jd)return function(C,S,k,K,ue){if(!K)throw new Lt(gt.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+k+"().");for(var de=[],Me=0,Be=Cu(C);Me<Be.length;Me++){var ht=Be[Me];if(ht.field.isKeyField())de.push(Xa(S,K.key));else{var dt=K.data.field(ht.field);if(os(dt))throw new Lt(gt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ht.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===dt){var Dt=ht.field.canonicalString();throw new Lt(gt.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+Dt+"' (used as the orderBy) does not exist.")}de.push(dt)}}return new Ns(de,ue)}(o._query,o.firestore._databaseId,t,s[0]._document,l);var g=Ul(o.firestore);return function(C,S,k,K,ue,de){var Me=C.explicitOrderBy;if(ue.length>Me.length)throw new Lt(gt.INVALID_ARGUMENT,"Too many arguments provided to "+K+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var Be=[],ht=0;ht<ue.length;ht++){var dt=ue[ht];if(Me[ht].field.isKeyField()){if("string"!=typeof dt)throw new Lt(gt.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+K+"(), but got a "+typeof dt);if(!tu(C)&&-1!==dt.indexOf("/"))throw new Lt(gt.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+K+"() must be a plain document ID, but '"+dt+"' contains a slash.");var Dt=C.path.child(Te.fromString(dt));if(!Jn.isDocumentKey(Dt))throw new Lt(gt.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+K+"() must result in a valid document path, but '"+Dt+"' is not because it contains an odd number of segments.");var en=new Jn(Dt);Be.push(Xa(S,en))}else{var fn=Qd(k,K,dt);Be.push(fn)}}return new Ns(Be,de)}(o._query,o.firestore._databaseId,g,t,s,l)}function yp(o,t,s){if("string"==typeof(s=(0,Re.m9)(s))){if(""===s)throw new Lt(gt.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!tu(t)&&-1!==s.indexOf("/"))throw new Lt(gt.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+s+"' contains a '/' character.");var l=t.path.child(Te.fromString(s));if(!Jn.isDocumentKey(l))throw new Lt(gt.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+l+"' is not because it has an odd number of segments ("+l.length+").");return Xa(o,new Jn(l))}if(s instanceof ho)return Xa(o,s._key);throw new Lt(gt.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ll(s)+".")}function am(o,t){if(!Array.isArray(o)||0===o.length)throw new Lt(gt.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(o.length>10)throw new Lt(gt.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function O_(o,t,s){if(!s.isEqual(t))throw new Lt(gt.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+s.toString()+"' instead.")}var pf=function(){function o(){}return o.prototype.convertValue=function(t,s){switch(void 0===s&&(s="none"),Ti(t)){case 0:return null;case 1:return t.booleanValue;case 2:return jn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes(vo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 10:return this.convertObject(t.mapValue,s);default:throw Nn()}},o.prototype.convertObject=function(t,s){var l=this,g={};return z(t.fields,function(C,S){g[C]=l.convertValue(S,s)}),g},o.prototype.convertGeoPoint=function(t){return new uf(jn(t.latitude),jn(t.longitude))},o.prototype.convertArray=function(t,s){var l=this;return(t.values||[]).map(function(g){return l.convertValue(g,s)})},o.prototype.convertServerTimestamp=function(t,s){switch(s){case"previous":var l=oo(t);return null==l?null:this.convertValue(l,s);case"estimate":return this.convertTimestamp(Ws(t));default:return null}},o.prototype.convertTimestamp=function(t){var s=xr(t);return new U(s.seconds,s.nanos)},o.prototype.convertDocumentKey=function(t,s){var l=Te.fromString(t);nr(Fa(l));var g=new qd(l.get(1),l.get(3)),C=new Jn(l.popFirst(5));return g.isEqual(s)||$i("Document "+C+" contains a document reference within a different database ("+g.projectId+"/"+g.database+") which is not supported. It will be treated as a reference in the current database ("+s.projectId+"/"+s.database+") instead."),C},o}();function eh(o,t,s){return o?s&&(s.merge||s.mergeFields)?o.toFirestore(t,s):o.toFirestore(t):t}var x_=function(o){function t(s){var l=this;return(l=o.call(this)||this).firestore=s,l}return(0,X.ZT)(t,o),t.prototype.convertBytes=function(s){return new rd(s)},t.prototype.convertReference=function(s){var l=this.convertDocumentKey(s,this.firestore._databaseId);return new ho(this.firestore,null,l)},t}(pf),bp=function(){function o(t,s){this._firestore=t,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Ul(t)}return o.prototype.set=function(t,s,l){this._verifyNotCommitted();var g=bc(t,this._firestore),C=eh(g.converter,s,l),S=up(this._dataReader,"WriteBatch.set",g._key,C,null!==g.converter,l);return this._mutations.push(S.toMutation(g._key,Fo.none())),this},o.prototype.update=function(t,s,l){for(var g=[],C=3;C<arguments.length;C++)g[C-3]=arguments[C];this._verifyNotCommitted();var S,k=bc(t,this._firestore);return S="string"==typeof(s=(0,Re.m9)(s))||s instanceof cl?dp(this._dataReader,"WriteBatch.update",k._key,s,l,g):cp(this._dataReader,"WriteBatch.update",k._key,s),this._mutations.push(S.toMutation(k._key,Fo.exists(!0))),this},o.prototype.delete=function(t){this._verifyNotCommitted();var s=bc(t,this._firestore);return this._mutations=this._mutations.concat(new da(s._key,Fo.none())),this},o.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},o.prototype._verifyNotCommitted=function(){if(this._committed)throw new Lt(gt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},o}();function bc(o,t){if((o=(0,Re.m9)(o)).firestore!==t)throw new Lt(gt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return o}var ad=function(o){function t(s){var l=this;return(l=o.call(this)||this).firestore=s,l}return(0,X.ZT)(t,o),t.prototype.convertBytes=function(s){return new rd(s)},t.prototype.convertReference=function(s){var l=this.convertDocumentKey(s,this.firestore._databaseId);return new ho(this.firestore,null,l)},t}(pf);function um(o,t,s){for(var l=[],g=3;g<arguments.length;g++)l[g-3]=arguments[g];o=Ci(o,ho);var C=Ci(o.firestore,zo),S=Ul(C);return Ih(C,[("string"==typeof(t=(0,Re.m9)(t))||t instanceof cl?dp(S,"updateDoc",o._key,t,s,l):cp(S,"updateDoc",o._key,t)).toMutation(o._key,Fo.exists(!0))])}function lm(o){for(var t,s,l,g=[],C=1;C<arguments.length;C++)g[C-1]=arguments[C];o=(0,Re.m9)(o);var S={includeMetadataChanges:!1},k=0;"object"!=typeof g[k]||td(g[k])||(S=g[k],k++);var K,ue,de,Me={includeMetadataChanges:S.includeMetadataChanges};if(td(g[k])){var Be=g[k];g[k]=null===(t=Be.next)||void 0===t?void 0:t.bind(Be),g[k+1]=null===(s=Be.error)||void 0===s?void 0:s.bind(Be),g[k+2]=null===(l=Be.complete)||void 0===l?void 0:l.bind(Be)}if(o instanceof ho)ue=Ci(o.firestore,zo),de=Ks(o._key.path),K={next:function(Dt){g[k]&&g[k](Cp(ue,o,Dt))},error:g[k+1],complete:g[k+2]};else{var ht=Ci(o,ea);ue=Ci(ht.firestore,zo),de=ht._query;var dt=new ad(ue);K={next:function(Dt){g[k]&&g[k](new od(ue,dt,ht,Dt))},error:g[k+1],complete:g[k+2]},mp(o._query)}return function(Dt,en,fn,ir){var or=this,Jr=new nf(ir),pi=new Wf(en,Jr,fn);return Dt.asyncQueue.enqueueAndForget(function(){return(0,X.mG)(or,void 0,void 0,function(){var Hi;return(0,X.Jh)(this,function(Ms){switch(Ms.label){case 0:return Hi=zf,[4,vc(Dt)];case 1:return[2,Hi.apply(void 0,[Ms.sent(),pi])]}})})}),function(){Jr.Wo(),Dt.asyncQueue.enqueueAndForget(function(){return(0,X.mG)(or,void 0,void 0,function(){var Hi;return(0,X.Jh)(this,function(Ms){switch(Ms.label){case 0:return Hi=Cg,[4,vc(Dt)];case 1:return[2,Hi.apply(void 0,[Ms.sent(),pi])]}})})})}}(ms(ue),de,Me,K)}function Ih(o,t){return function(s,l){var g=this,C=new es;return s.asyncQueue.enqueueAndForget(function(){return(0,X.mG)(g,void 0,void 0,function(){var S;return(0,X.Jh)(this,function(k){switch(k.label){case 0:return S=ef,[4,Sh(s)];case 1:return[2,S.apply(void 0,[k.sent(),l,C])]}})})}),C.promise}(ms(o),t)}function Cp(o,t,s){var l=s.docs.get(t._key),g=new ad(o);return new Bl(o,g,t._key,l,new id(s.hasPendingWrites,s.fromCache),t.converter)}var gf=function(o){function t(s,l){var g=this;return(g=o.call(this,s,l)||this)._firestore=s,g}return(0,X.ZT)(t,o),t.prototype.get=function(s){var l=this,g=bc(s,this._firestore),C=new ad(this._firestore);return o.prototype.get.call(this,s).then(function(S){return new Bl(l._firestore,C,g._key,S._document,new id(!1,!1),g.converter)})},t}(function(){function o(t,s){this._firestore=t,this._transaction=s,this._dataReader=Ul(t)}return o.prototype.get=function(t){var s=this,l=bc(t,this._firestore),g=new x_(this._firestore);return this._transaction.lookup([l._key]).then(function(C){if(!C||1!==C.length)return Nn();var S=C[0];if(S.isFoundDocument())return new Jd(s._firestore,g,S.key,S,l.converter);if(S.isNoDocument())return new Jd(s._firestore,g,l._key,null,l.converter);throw Nn()})},o.prototype.set=function(t,s,l){var g=bc(t,this._firestore),C=eh(g.converter,s,l),S=up(this._dataReader,"Transaction.set",g._key,C,null!==g.converter,l);return this._transaction.set(g._key,S),this},o.prototype.update=function(t,s,l){for(var g=[],C=3;C<arguments.length;C++)g[C-3]=arguments[C];var S,k=bc(t,this._firestore);return S="string"==typeof(s=(0,Re.m9)(s))||s instanceof cl?dp(this._dataReader,"Transaction.update",k._key,s,l,g):cp(this._dataReader,"Transaction.update",k._key,s),this._transaction.update(k._key,S),this},o.prototype.delete=function(t){var s=bc(t,this._firestore);return this._transaction.delete(s._key),this},o}());function ud(){if("undefined"==typeof Uint8Array)throw new Lt(gt.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function wp(){if("undefined"==typeof atob)throw new Lt(gt.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var pu=function(){function o(t){this._delegate=t}return o.fromBase64String=function(t){return wp(),new o(rd.fromBase64String(t))},o.fromUint8Array=function(t){return ud(),new o(rd.fromUint8Array(t))},o.prototype.toBase64=function(){return wp(),this._delegate.toBase64()},o.prototype.toUint8Array=function(){return ud(),this._delegate.toUint8Array()},o.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},o.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},o}(),Oh=function(){function o(){}return o.prototype.enableIndexedDbPersistence=function(t,s){return function(l,g){Jg(l=Ci(l,zo));var C=ms(l),S=l._freezeSettings(),k=new Eh;return Qg(C,k,new Ng(k,S.cacheSizeBytes,null==g?void 0:g.forceOwnership))}(t._delegate,{forceOwnership:s})},o.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(s){Jg(s=Ci(s,zo));var l=ms(s),g=s._freezeSettings(),C=new Eh;return Qg(l,C,new ll(C,g.cacheSizeBytes))}(t._delegate)},o.prototype.clearIndexedDbPersistence=function(t){return function(s){var l=this;if(s._initialized&&!s._terminated)throw new Lt(gt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var g=new es;return s._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,X.mG)(l,void 0,void 0,function(){var C;return(0,X.Jh)(this,function(S){switch(S.label){case 0:return S.trys.push([0,2,,3]),[4,function(k){return(0,X.mG)(this,void 0,void 0,function(){return(0,X.Jh)(this,function(ue){switch(ue.label){case 0:return lu.yt()?[4,lu.delete(k+"main")]:[2,Promise.resolve()];case 1:return ue.sent(),[2]}})})}(V(s._databaseId,s._persistenceKey))];case 1:return S.sent(),g.resolve(),[3,3];case 2:return C=S.sent(),g.reject(C),[3,3];case 3:return[2]}})})}),g.promise}(t._delegate)},o}(),cm=function(){function o(t,s,l){var g=this;this._delegate=s,this.Zc=l,this.INTERNAL={delete:function(){return g.terminate()}},t instanceof qd||(this.tu=t)}return Object.defineProperty(o.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),o.prototype.settings=function(t){var s=this._delegate._getSettings();t.merge||s.host===t.host||Jo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},s),t)).merge,this._delegate._setSettings(t)},o.prototype.useEmulator=function(t,s,l){void 0===l&&(l={}),function(g,C,S,k){var K;void 0===k&&(k={});var ue=(g=Ci(g,Ah))._getSettings();if("firestore.googleapis.com"!==ue.host&&ue.host!==C&&Jo("Host has been set in both settings() and useEmulator(), emulator host will be used"),g._setSettings(Object.assign(Object.assign({},ue),{host:C+":"+S,ssl:!1})),k.mockUserToken){var de,Me;if("string"==typeof k.mockUserToken)de=k.mockUserToken,Me=As.MOCK_USER;else{de=(0,Re.Sg)(k.mockUserToken,null===(K=g._app)||void 0===K?void 0:K.options.projectId);var Be=k.mockUserToken.sub||k.mockUserToken.user_id;if(!Be)throw new Lt(gt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");Me=new As(Be)}g._credentials=new Gg(new Hg(de,Me))}}(this._delegate,t,s,l)},o.prototype.enableNetwork=function(){return function(t){var s=this;return t.asyncQueue.enqueue(function(){return(0,X.mG)(s,void 0,void 0,function(){var l,g;return(0,X.Jh)(this,function(C){switch(C.label){case 0:return[4,Th(t)];case 1:return l=C.sent(),[4,Bg(t)];case 2:return g=C.sent(),[2,(l.setNetworkEnabled(!0),S=g,k=on(S),k.Or.delete(0),Jc(k))]}var S,k})})})}(ms(Ci(this._delegate,zo)))},o.prototype.disableNetwork=function(){return function(t){var s=this;return t.asyncQueue.enqueue(function(){return(0,X.mG)(s,void 0,void 0,function(){var l,g;return(0,X.Jh)(this,function(C){switch(C.label){case 0:return[4,Th(t)];case 1:return l=C.sent(),[4,Bg(t)];case 2:return g=C.sent(),[2,(l.setNetworkEnabled(!1),function(S){return(0,X.mG)(this,void 0,void 0,function(){var k;return(0,X.Jh)(this,function(K){switch(K.label){case 0:return(k=on(S)).Or.add(0),[4,bh(k)];case 1:return K.sent(),k.Br.set("Offline"),[2]}})})}(g))]}})})})}(ms(Ci(this._delegate,zo)))},o.prototype.enablePersistence=function(t){var s=!1,l=!1;return t&&$g("synchronizeTabs",s=!!t.synchronizeTabs,"experimentalForceOwningTab",l=!!t.experimentalForceOwningTab),s?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,l)},o.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},o.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},o.prototype.waitForPendingWrites=function(){return function(t){var s=this,l=new es;return t.asyncQueue.enqueueAndForget(function(){return(0,X.mG)(s,void 0,void 0,function(){var g;return(0,X.Jh)(this,function(C){switch(C.label){case 0:return g=g_,[4,Sh(t)];case 1:return[2,g.apply(void 0,[C.sent(),l])]}})})}),l.promise}(ms(Ci(this._delegate,zo)))},o.prototype.onSnapshotsInSync=function(t){return l=t,function(g,C){var S=this,k=new nf(C);return g.asyncQueue.enqueueAndForget(function(){return(0,X.mG)(S,void 0,void 0,function(){var K;return(0,X.Jh)(this,function(ue){switch(ue.label){case 0:return K=function(de,Me){on(de).Gr.add(Me),Me.next()},[4,vc(g)];case 1:return[2,K.apply(void 0,[ue.sent(),k])]}})})}),function(){k.Wo(),g.asyncQueue.enqueueAndForget(function(){return(0,X.mG)(S,void 0,void 0,function(){var K;return(0,X.Jh)(this,function(ue){switch(ue.label){case 0:return K=function(de,Me){on(de).Gr.delete(Me)},[4,vc(g)];case 1:return[2,K.apply(void 0,[ue.sent(),k])]}})})})}}(ms(Ci(this._delegate,zo)),td(l)?l:{next:l});var l},Object.defineProperty(o.prototype,"app",{get:function(){if(!this.tu)throw new Lt(gt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),o.prototype.collection=function(t){try{return new jl(this,sp(this._delegate,t))}catch(s){throw _s(s,"collection()","Firestore.collection()")}},o.prototype.doc=function(t){try{return new ja(this,sf(this._delegate,t))}catch(s){throw _s(s,"doc()","Firestore.doc()")}},o.prototype.collectionGroup=function(t){try{return new pl(this,function(s,l){if(s=Ci(s,Ah),Vu("collectionGroup","collection id",l),l.indexOf("/")>=0)throw new Lt(gt.INVALID_ARGUMENT,"Invalid collection ID '"+l+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ea(s,null,(g=l,new ua(Te.emptyPath(),g)));var g}(this._delegate,t))}catch(s){throw _s(s,"collectionGroup()","Firestore.collectionGroup()")}},o.prototype.runTransaction=function(t){var l,s=this;return function(C,S){var k=this,K=new es;return C.asyncQueue.enqueueAndForget(function(){return(0,X.mG)(k,void 0,void 0,function(){var ue;return(0,X.Jh)(this,function(de){switch(de.label){case 0:return[4,(Me=C,of(Me).then(function(Be){return Be.datastore}))];case 1:return ue=de.sent(),new b_(C.asyncQueue,ue,S,K).run(),[2]}var Me})})}),K.promise}(ms(l=this._delegate),function(C){return function(l){return t(new ju(s,l))}(new gf(l,C))})},o.prototype.batch=function(){var t=this;return ms(this._delegate),new th(new bp(this._delegate,function(s){return Ih(t._delegate,s)}))},o.prototype.loadBundle=function(t){throw new Lt(gt.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},o.prototype.namedQuery=function(t){throw new Lt(gt.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},o}(),mf=function(o){function t(s){var l=this;return(l=o.call(this)||this).firestore=s,l}return(0,X.ZT)(t,o),t.prototype.convertBytes=function(s){return new pu(new rd(s))},t.prototype.convertReference=function(s){var l=this.convertDocumentKey(s,this.firestore._databaseId);return ja.eu(l,this.firestore,null)},t}(pf),ju=function(){function o(t,s){this._firestore=t,this._delegate=s,this._userDataWriter=new mf(t)}return o.prototype.get=function(t){var s=this,l=gu(t);return this._delegate.get(l).then(function(g){return new hl(s._firestore,new Bl(s._firestore._delegate,s._userDataWriter,g._key,g._document,g.metadata,l.converter))})},o.prototype.set=function(t,s,l){var g=gu(t);return l?(zd("Transaction.set",l),this._delegate.set(g,s,l)):this._delegate.set(g,s),this},o.prototype.update=function(t,s,l){for(var g,C=[],S=3;S<arguments.length;S++)C[S-3]=arguments[S];var k=gu(t);return 2===arguments.length?this._delegate.update(k,s):(g=this._delegate).update.apply(g,(0,X.ev)([k,s,l],C)),this},o.prototype.delete=function(t){var s=gu(t);return this._delegate.delete(s),this},o}(),th=function(){function o(t){this._delegate=t}return o.prototype.set=function(t,s,l){var g=gu(t);return l?(zd("WriteBatch.set",l),this._delegate.set(g,s,l)):this._delegate.set(g,s),this},o.prototype.update=function(t,s,l){for(var g,C=[],S=3;S<arguments.length;S++)C[S-3]=arguments[S];var k=gu(t);return 2===arguments.length?this._delegate.update(k,s):(g=this._delegate).update.apply(g,(0,X.ev)([k,s,l],C)),this},o.prototype.delete=function(t){var s=gu(t);return this._delegate.delete(s),this},o.prototype.commit=function(){return this._delegate.commit()},o}(),hs=function(){function o(t,s,l){this._firestore=t,this._userDataWriter=s,this._delegate=l}return o.prototype.fromFirestore=function(t,s){var l=new ff(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new fl(this._firestore,l),null!=s?s:{})},o.prototype.toFirestore=function(t,s){return s?this._delegate.toFirestore(t,s):this._delegate.toFirestore(t)},o.nu=function(t,s){var l=o.su,g=l.get(t);g||(g=new WeakMap,l.set(t,g));var C=g.get(s);return C||(C=new o(t,new mf(t),s),g.set(s,C)),C},o}();hs.su=new WeakMap;var ja=function(){function o(t,s){this.firestore=t,this._delegate=s,this._userDataWriter=new mf(t)}return o.iu=function(t,s,l){if(t.length%2!=0)throw new Lt(gt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new o(s,new ho(s._delegate,l,new Jn(t)))},o.eu=function(t,s,l){return new o(s,new ho(s._delegate,l,t))},Object.defineProperty(o.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"parent",{get:function(){return new jl(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),o.prototype.collection=function(t){try{return new jl(this.firestore,sp(this._delegate,t))}catch(s){throw _s(s,"collection()","DocumentReference.collection()")}},o.prototype.isEqual=function(t){return(t=(0,Re.m9)(t))instanceof ho&&af(this._delegate,t)},o.prototype.set=function(t,s){s=zd("DocumentReference.set",s);try{return function(l,g,C){l=Ci(l,ho);var S=Ci(l.firestore,zo),k=eh(l.converter,g,C);return Ih(S,[up(Ul(S),"setDoc",l._key,k,null!==l.converter,C).toMutation(l._key,Fo.none())])}(this._delegate,t,s)}catch(l){throw _s(l,"setDoc()","DocumentReference.set()")}},o.prototype.update=function(t,s){for(var l=[],g=2;g<arguments.length;g++)l[g-2]=arguments[g];try{return 1===arguments.length?um(this._delegate,t):um.apply(void 0,(0,X.ev)([this._delegate,t,s],l))}catch(C){throw _s(C,"updateDoc()","DocumentReference.update()")}},o.prototype.delete=function(){return Ih(Ci((t=this._delegate).firestore,zo),[new da(t._key,Fo.none())]);var t},o.prototype.onSnapshot=function(){for(var t=this,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var g=Ha(s),C=_f(s,function(S){return new hl(t.firestore,new Bl(t.firestore._delegate,t._userDataWriter,S._key,S._document,S.metadata,t._delegate.converter))});return lm(this._delegate,g,C)},o.prototype.get=function(t){var s=this;return("cache"===(null==t?void 0:t.source)?function(l){l=Ci(l,ho);var g=Ci(l.firestore,zo),C=ms(g),S=new ad(g);return function(k,K){var ue=this,de=new es;return k.asyncQueue.enqueueAndForget(function(){return(0,X.mG)(ue,void 0,void 0,function(){var Me;return(0,X.Jh)(this,function(Be){switch(Be.label){case 0:return Me=function(ht,dt,Dt){return(0,X.mG)(this,void 0,void 0,function(){var en,fn;return(0,X.Jh)(this,function(ir){switch(ir.label){case 0:return ir.trys.push([0,2,,3]),[4,(or=ht,Jr=dt,pi=on(or),pi.persistence.runTransaction("read document","readonly",function(Hi){return pi.Mn.mn(Hi,Jr)}))];case 1:return(fn=ir.sent()).isFoundDocument()?Dt.resolve(fn):fn.isNoDocument()?Dt.resolve(null):Dt.reject(new Lt(gt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return en=ir.sent(),fn=gc(en,"Failed to get document '"+dt+" from cache"),Dt.reject(fn),[3,3];case 3:return[2]}var or,Jr,pi})})},[4,Dh(k)];case 1:return[2,Me.apply(void 0,[Be.sent(),K,de])]}})})}),de.promise}(C,l._key).then(function(k){return new Bl(g,S,l._key,k,new id(null!==k&&k.hasLocalMutations,!0),l.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(l){l=Ci(l,ho);var g=Ci(l.firestore,zo);return ip(ms(g),l._key,{source:"server"}).then(function(C){return Cp(g,l,C)})}(this._delegate):function(l){l=Ci(l,ho);var g=Ci(l.firestore,zo);return ip(ms(g),l._key).then(function(C){return Cp(g,l,C)})}(this._delegate)).then(function(l){return new hl(s.firestore,new Bl(s.firestore._delegate,s._userDataWriter,l._key,l._document,l.metadata,s._delegate.converter))})},o.prototype.withConverter=function(t){return new o(this.firestore,this._delegate.withConverter(t?hs.nu(this.firestore,t):null))},o}();function _s(o,t,s){return o.message=o.message.replace(t,s),o}function Ha(o){for(var t=0,s=o;t<s.length;t++){var l=s[t];if("object"==typeof l&&!td(l))return l}return{}}function _f(o,t){var s,l,g;return{next:function(C){g.next&&g.next(t(C))},error:null===(s=(g=td(o[0])?o[0]:td(o[1])?o[1]:"function"==typeof o[0]?{next:o[0],error:o[1],complete:o[2]}:{next:o[1],error:o[2],complete:o[3]}).error)||void 0===s?void 0:s.bind(g),complete:null===(l=g.complete)||void 0===l?void 0:l.bind(g)}}var hl=function(){function o(t,s){this._firestore=t,this._delegate=s}return Object.defineProperty(o.prototype,"ref",{get:function(){return new ja(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),o.prototype.data=function(t){return this._delegate.data(t)},o.prototype.get=function(t,s){return this._delegate.get(t,s)},o.prototype.isEqual=function(t){return sm(this._delegate,t._delegate)},o}(),fl=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return(0,X.ZT)(t,o),t.prototype.data=function(s){return this._delegate.data(s)},t}(hl),pl=function(){function o(t,s){this.firestore=t,this._delegate=s,this._userDataWriter=new mf(t)}return o.prototype.where=function(t,s,l){try{return new o(this.firestore,sd(this._delegate,(S=l,k=s,K=Mh("where",g=t),new Bu(K,k,S))))}catch(g){throw _s(g,/(orderBy|where)\(\)/,"Query.$1()")}var g,S,k,K},o.prototype.orderBy=function(t,s){try{return new o(this.firestore,sd(this._delegate,function(l,g){void 0===g&&(g="asc");var C=g,S=Mh("orderBy",l);return new Ty(S,C)}(t,s)))}catch(l){throw _s(l,/(orderBy|where)\(\)/,"Query.$1()")}},o.prototype.limit=function(t){try{return new o(this.firestore,sd(this._delegate,($d("limit",s=t),new M_("limit",s,"F"))))}catch(s){throw _s(s,"limit()","Query.limit()")}var s},o.prototype.limitToLast=function(t){try{return new o(this.firestore,sd(this._delegate,($d("limitToLast",s=t),new M_("limitToLast",s,"L"))))}catch(s){throw _s(s,"limitToLast()","Query.limitToLast()")}var s},o.prototype.startAt=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,sd(this._delegate,function(){for(var l=[],g=0;g<arguments.length;g++)l[g]=arguments[g];return new I_("startAt",l,!0)}.apply(void 0,t)))}catch(l){throw _s(l,"startAt()","Query.startAt()")}},o.prototype.startAfter=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,sd(this._delegate,function(){for(var l=[],g=0;g<arguments.length;g++)l[g]=arguments[g];return new I_("startAfter",l,!1)}.apply(void 0,t)))}catch(l){throw _s(l,"startAfter()","Query.startAfter()")}},o.prototype.endBefore=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,sd(this._delegate,function(){for(var l=[],g=0;g<arguments.length;g++)l[g]=arguments[g];return new _p("endBefore",l,!0)}.apply(void 0,t)))}catch(l){throw _s(l,"endBefore()","Query.endBefore()")}},o.prototype.endAt=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];try{return new o(this.firestore,sd(this._delegate,function(){for(var l=[],g=0;g<arguments.length;g++)l[g]=arguments[g];return new _p("endAt",l,!1)}.apply(void 0,t)))}catch(l){throw _s(l,"endAt()","Query.endAt()")}},o.prototype.isEqual=function(t){return Yg(this._delegate,t._delegate)},o.prototype.get=function(t){var s=this;return("cache"===(null==t?void 0:t.source)?function(l){l=Ci(l,ea);var g=Ci(l.firestore,zo),C=ms(g),S=new ad(g);return function(k,K){var ue=this,de=new es;return k.asyncQueue.enqueueAndForget(function(){return(0,X.mG)(ue,void 0,void 0,function(){var Me;return(0,X.Jh)(this,function(Be){switch(Be.label){case 0:return Me=function(ht,dt,Dt){return(0,X.mG)(this,void 0,void 0,function(){var en,fn,ir,or,Jr;return(0,X.Jh)(this,function(pi){switch(pi.label){case 0:return pi.trys.push([0,2,,3]),[4,hc(ht,dt,!0)];case 1:return Jr=pi.sent(),en=new ed(dt,Jr.Bn),fn=en._o(Jr.documents),ir=en.applyChanges(fn,!1),Dt.resolve(ir.snapshot),[3,3];case 2:return or=pi.sent(),Jr=gc(or,"Failed to execute query '"+dt+" against cache"),Dt.reject(Jr),[3,3];case 3:return[2]}})})},[4,Dh(k)];case 1:return[2,Me.apply(void 0,[Be.sent(),K,de])]}})})}),de.promise}(C,l._query).then(function(k){return new od(g,S,l,k)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(l){l=Ci(l,ea);var g=Ci(l.firestore,zo),C=ms(g),S=new ad(g);return jg(C,l._query,{source:"server"}).then(function(k){return new od(g,S,l,k)})}(this._delegate):function(l){l=Ci(l,ea);var g=Ci(l.firestore,zo),C=ms(g),S=new ad(g);return mp(l._query),jg(C,l._query).then(function(k){return new od(g,S,l,k)})}(this._delegate)).then(function(l){return new Cc(s.firestore,new od(s.firestore._delegate,s._userDataWriter,s._delegate,l._snapshot))})},o.prototype.onSnapshot=function(){for(var t=this,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var g=Ha(s),C=_f(s,function(S){return new Cc(t.firestore,new od(t.firestore._delegate,t._userDataWriter,t._delegate,S._snapshot))});return lm(this._delegate,g,C)},o.prototype.withConverter=function(t){return new o(this.firestore,this._delegate.withConverter(t?hs.nu(this.firestore,t):null))},o}(),nh=function(){function o(t,s){this._firestore=t,this._delegate=s}return Object.defineProperty(o.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"doc",{get:function(){return new fl(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),o}(),Cc=function(){function o(t,s){this._firestore=t,this._delegate=s}return Object.defineProperty(o.prototype,"query",{get:function(){return new pl(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(s){return new fl(t._firestore,s)})},enumerable:!1,configurable:!0}),o.prototype.docChanges=function(t){var s=this;return this._delegate.docChanges(t).map(function(l){return new nh(s._firestore,l)})},o.prototype.forEach=function(t,s){var l=this;this._delegate.forEach(function(g){t.call(s,new fl(l._firestore,g))})},o.prototype.isEqual=function(t){return sm(this._delegate,t._delegate)},o}(),jl=function(o){function t(s,l){var g=this;return(g=o.call(this,s,l)||this).firestore=s,g._delegate=l,g}return(0,X.ZT)(t,o),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var s=this._delegate.parent;return s?new ja(this.firestore,s):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(s){try{return new ja(this.firestore,void 0===s?sf(this._delegate):sf(this._delegate,s))}catch(l){throw _s(l,"doc()","CollectionReference.doc()")}},t.prototype.add=function(s){var g,C,S,k,K,l=this;return(g=this._delegate,C=s,S=Ci(g.firestore,zo),k=sf(g),K=eh(g.converter,C),Ih(S,[up(Ul(g.firestore),"addDoc",k._key,K,null!==g.converter,{}).toMutation(k._key,Fo.exists(!1))]).then(function(){return k})).then(function(g){return new ja(l.firestore,g)})},t.prototype.isEqual=function(s){return af(this._delegate,s._delegate)},t.prototype.withConverter=function(s){return new t(this.firestore,this._delegate.withConverter(s?hs.nu(this.firestore,s):null))},t}(pl);function gu(o){return Ci(o,ho)}var rh=function(){function o(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];this._delegate=new(cl.bind.apply(cl,(0,X.ev)([void 0],t)))}return o.documentId=function(){return new o(Tt.keyField().canonicalString())},o.prototype.isEqual=function(t){return(t=(0,Re.m9)(t))instanceof cl&&this._delegate._internalPath.isEqual(t._internalPath)},o}(),ih=function(){function o(t){this._delegate=t}return o.serverTimestamp=function(){var t=new tm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new o(t)},o.delete=function(){var t=new lp("deleteField");return t._methodName="FieldValue.delete",new o(t)},o.arrayUnion=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l=function(){for(var g=[],C=0;C<arguments.length;C++)g[C]=arguments[C];return new nm("arrayUnion",g)}.apply(void 0,t);return l._methodName="FieldValue.arrayUnion",new o(l)},o.arrayRemove=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var l=function(){for(var g=[],C=0;C<arguments.length;C++)g[C]=arguments[C];return new rm("arrayRemove",g)}.apply(void 0,t);return l._methodName="FieldValue.arrayRemove",new o(l)},o.increment=function(t){var s=new im("increment",t);return s._methodName="FieldValue.increment",new o(s)},o.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},o}(),dm=Q(6034),hm={Firestore:cm,GeoPoint:uf,Timestamp:U,Blob:pu,Transaction:ju,WriteBatch:th,DocumentReference:ja,DocumentSnapshot:hl,Query:pl,QueryDocumentSnapshot:fl,QuerySnapshot:Cc,CollectionReference:jl,FieldPath:rh,FieldValue:ih,setLogLevel:function(o){ps.setLogLevel(o)},CACHE_SIZE_UNLIMITED:-1};!function(o){o.INTERNAL.registerComponent(new dm.wA("firestore",function(l){return t=l.getProvider("app").getImmediate(),s=l.getProvider("auth-internal"),new cm(t,new zo(t,s),new Oh);var t,s},"PUBLIC").setServiceProps(Object.assign({},hm))),o.registerVersion("@firebase/firestore","2.4.0")}(We.Z);var Tp=Q(9829);function Dp(o,t){return function(o,t=G.z){return new E.y(s=>{let l;return null!=t?t.schedule(()=>{l=o.onSnapshot({includeMetadataChanges:!0},s)}):l=o.onSnapshot({includeMetadataChanges:!0},s),()=>{null!=l&&l()}})}(o,t)}function Sp(o,t){return Dp(o,t).pipe((0,Ce.U)(s=>({payload:s,type:"query"})))}function xh(o,t){return Sp(o,t).pipe((0,ke.O)(void 0),(0,fe.G)(),(0,Ce.U)(([s,l])=>{const g=l.payload.docChanges(),C=g.map(S=>({type:S.type,payload:S}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(l.payload.metadata)&&l.payload.docs.forEach((S,k)=>{const K=g.find(de=>de.doc.ref.isEqual(S.ref)),ue=null==s?void 0:s.payload.docs.find(de=>de.ref.isEqual(S.ref));K&&JSON.stringify(K.doc.metadata)===JSON.stringify(S.metadata)||!K&&ue&&JSON.stringify(ue.metadata)===JSON.stringify(S.metadata)||C.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:S}})}),C}))}function mm(o,t,s){return xh(o,s).pipe((0,re.R)((l,g)=>function(o,t,s){return t.forEach(l=>{s.indexOf(l.type)>-1&&(o=function(o,t){switch(t.type){case"added":if(!o[t.newIndex]||!o[t.newIndex].doc.ref.isEqual(t.doc.ref))return vf(o,t.newIndex,0,t);break;case"modified":if(null==o[t.oldIndex]||o[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const s=o.slice();return s.splice(t.oldIndex,1),s.splice(t.newIndex,0,t),s}return vf(o,t.newIndex,1,t)}break;case"removed":if(o[t.oldIndex]&&o[t.oldIndex].doc.ref.isEqual(t.doc.ref))return vf(o,t.oldIndex,1)}return o}(o,l))}),o}(l,g.map(C=>C.payload),t),[]),(0,Ee.x)(),(0,Ce.U)(l=>l.map(g=>({type:g.type,payload:g}))))}function vf(o,t,s,...l){const g=o.slice();return g.splice(t,s,...l),g}function F_(o){return(!o||0===o.length)&&(o=["added","removed","modified"]),o}class vm{constructor(t,s,l){this.ref=t,this.query=s,this.afs=l}stateChanges(t){let s=xh(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(s=s.pipe((0,Ce.U)(l=>l.filter(g=>t.indexOf(g.type)>-1)))),s.pipe((0,ke.O)(void 0),(0,fe.G)(),(0,pe.h)(([l,g])=>g.length>0||!l),(0,Ce.U)(([l,g])=>g),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe((0,re.R)((s,l)=>[...s,...l],[]))}snapshotChanges(t){const s=F_(t);return mm(this.query,s,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Sp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ce.U)(s=>s.payload.docs.map(l=>t.idField?Object.assign(Object.assign({},l.data()),{[t.idField]:l.id}):l.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Ve.D)(this.query.get(t)).pipe((0,ye.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Ap(this.ref.doc(t),this.afs)}}class Ap{constructor(t,s){this.ref=t,this.afs=s}set(t,s){return this.ref.set(t,s)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,s){const l=this.ref.collection(t),{ref:g,query:C}=Cm(l,s);return new vm(g,C,this.afs)}snapshotChanges(){return function(o,t){return Dp(o,t).pipe((0,ke.O)(void 0),(0,fe.G)(),(0,Ce.U)(([s,l])=>l.exists?(null==s?void 0:s.exists)?{payload:l,type:"modified"}:{payload:l,type:"added"}:{payload:l,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Ce.U)(({payload:s})=>t.idField?Object.assign(Object.assign({},s.data()),{[t.idField]:s.id}):s.data()))}get(t){return(0,Ve.D)(this.ref.get(t)).pipe((0,ye.QV)(this.afs.schedulers.insideAngular))}}class N_{constructor(t,s){this.query=t,this.afs=s}stateChanges(t){return t&&0!==t.length?xh(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ce.U)(s=>s.filter(l=>t.indexOf(l.type)>-1)),(0,pe.h)(s=>s.length>0),this.afs.keepUnstableUntilFirst):xh(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe((0,re.R)((s,l)=>[...s,...l],[]))}snapshotChanges(t){const s=F_(t);return mm(this.query,s,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Sp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ce.U)(l=>l.payload.docs.map(g=>t.idField?Object.assign({[t.idField]:g.id},g.data()):g.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Ve.D)(this.query.get(t)).pipe((0,ye.QV)(this.afs.schedulers.insideAngular))}}const Mp=new c.OlP("angularfire2.enableFirestorePersistence"),ym=new c.OlP("angularfire2.firestore.persistenceSettings"),bm=new c.OlP("angularfire2.firestore.settings"),L_=new c.OlP("angularfire2.firestore.use-emulator");function Cm(o,t=(s=>s)){return{query:t(o),ref:o}}let wm=(()=>{class o{constructor(s,l,g,C,S,k,K,ue,de){this.schedulers=new De.HU(k),this.keepUnstableUntilFirst=(0,De.ss)(this.schedulers);const Me=(0,De.on)(s,k,l);!R.Z.auth&&de&&(0,De.yq)();const Be=ue;[this.firestore,this.persistenceEnabled$]=(0,De.sI)(`${Me.name}.firestore`,"AngularFirestore",Me,()=>{const ht=k.runOutsideAngular(()=>Me.firestore());if(C&&ht.settings(C),Be&&ht.useEmulator(...Be),g&&!(0,xe.PM)(S)){const dt=()=>{try{return(0,Ve.D)(ht.enablePersistence(K||void 0).then(()=>!0,()=>!1))}catch(Dt){return"undefined"!=typeof console&&console.warn(Dt),(0,ve.of)(!1)}};return[ht,k.runOutsideAngular(dt)]}return[ht,(0,ve.of)(!1)]},[C,Be,g])}collection(s,l){let g;g="string"==typeof s?this.firestore.collection(s):s;const{ref:C,query:S}=Cm(g,l),k=this.schedulers.ngZone.run(()=>C);return new vm(k,S,this)}collectionGroup(s,l){const g=l||(S=>S),C=this.firestore.collectionGroup(s);return new N_(g(C),this)}doc(s){let l;l="string"==typeof s?this.firestore.doc(s):s;const g=this.schedulers.ngZone.run(()=>l);return new Ap(g,this)}createId(){return this.firestore.collection("_").doc().id}}return o.\u0275fac=function(s){return new(s||o)(c.LFG(De.Dh),c.LFG(De.xv,8),c.LFG(Mp,8),c.LFG(bm,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(ym,8),c.LFG(L_,8),c.LFG(Tp.Qv,8))},o.\u0275prov=c.Yz7({factory:function(){return new o(c.LFG(De.Dh),c.LFG(De.xv,8),c.LFG(Mp,8),c.LFG(bm,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(ym,8),c.LFG(L_,8),c.LFG(Tp.Qv,8))},token:o,providedIn:"any"}),o})();var Dy=Q(9351);let Sy=(()=>{class o{constructor(s,l){this._firestore=s,this._storage=l}setUserData(s,l){const g=this._firestore.collection("users").doc(s.uid);return g.set({name:s.name,email:s.email,active:s.active,roles:s.roles,domains:s.domains,uid:s.uid}).then(()=>{if(l)return g.collection("loginHistory").doc(s.uid).set({loginHistory:[]})})}getUserData(s,l){return this._firestore.collection("users",g=>g.where(s,"==",l)).snapshotChanges()}getUsers(){return this._firestore.collection("users").snapshotChanges()}setUserIPAddress(s){return this._firestore.collection("users").doc(s.uid).collection("loginHistory").doc(s.uid).update({loginHistory:R.Z.firestore.FieldValue.arrayUnion({date:s.date,ip:s.ip,country:s.country,city:s.city})})}updateUserActivity(s){return this._firestore.collection("users").doc(s.userId).update({active:s.parameter})}getUserLogins(s){return this._firestore.collection("users").doc(s).collection("loginHistory").snapshotChanges()}setDomain(s,l){return this._firestore.collection("users").doc(s).update({domains:R.Z.firestore.FieldValue.arrayUnion({domain:l.domain,description:l.description,checked:l.checked})})}deleteDomain(s){return this._firestore.collection("domains").doc(s).delete()}deleteDomainItem(s,l){return this._firestore.collection("users").doc(s).update({domains:R.Z.firestore.FieldValue.arrayRemove(l)})}addDomain(s){return this._firestore.collection("domains").add(s)}getDomains(){return this._firestore.collection("domains").snapshotChanges()}setUserDomain(s){return this._firestore.collection("users").doc(s.uid).set({name:s.name,email:s.email,active:s.active,roles:s.roles,domains:s.domains,uid:s.uid})}addMenuOptionItem(s){return this._firestore.collection("menuOptions").add(s)}deleteMenuOptionItem(s){return this._firestore.collection("menuOptions").doc(s.id).delete()}editMenuOptionItem(s){return this._firestore.collection("menuOptions").doc(s.id).update({key:s.key,description:s.description,active:s.active})}editMenuOptioImage(s,l){return this._firestore.collection("menuOptions").doc(s).update({img:l})}getMenuOptions(){return this._firestore.collection("menuOptions").snapshotChanges()}getActiveMenuOptions(){return this._firestore.collection("menuOptions",s=>s.where("active","==",!0)).snapshotChanges()}deleteItemFromFireStorage(s){return this._storage.storage.refFromURL(s).delete()}addChat(s,l){return this._firestore.collection(s.domain).doc(l).collection(l).doc(s.id).set(s)}deleteChat(s,l){return this._firestore.collection(s).doc("activeChats").collection("activeChats").doc(l).delete()}getChat(s,l,g){return this._firestore.collection(s).doc(l).collection(l,C=>C.where("id","==",g)).snapshotChanges()}getChats(s,l){return this._firestore.collection(s).doc(l).collection(l).snapshotChanges()}acceptPendingChat(s,l){return this._firestore.collection(s.domain).doc("activeChats").collection("activeChats").doc(s.id).update({status:"active",operatorDisplayName:l.operatorDisplayName,operatorEmail:l.operatorEmail})}getCurrentChats(s,l){return this._firestore.collection(s).doc(l).collection(l,g=>g.where("status","==","pending")).snapshotChanges()}addMessage(s,l){return null!=s.client?this._firestore.collection(s.domain).doc("activeChats").collection("activeChats").doc(s.chatId).update({chatHistory:R.Z.firestore.FieldValue.arrayUnion({client:s.client,message:l.message,time:l.time})}):this._firestore.collection(s.domain).doc("activeChats").collection("activeChats").doc(s.chatId).update({chatHistory:R.Z.firestore.FieldValue.arrayUnion({operator:s.operator,message:l.message,time:l.time})})}blockUserByIp(s){return this._firestore.collection("blockedUsers").add(s)}getBlockedUsersById(){return this._firestore.collection("blockedUsers").snapshotChanges()}deleteBlockedUser(s){return this._firestore.collection("blockedUsers").doc(s).delete()}}return o.\u0275fac=function(s){return new(s||o)(c.LFG(wm),c.LFG(Dy.Q1))},o.\u0275prov=c.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},4466:(jt,rt,Q)=>{"use strict";Q.d(rt,{m:()=>Ve});var R=Q(8583),c=Q(2213),G=Q(665),E=Q(7716);let Ve=(()=>{class ve{}return ve.\u0275fac=function(fe){return new(fe||ve)},ve.\u0275mod=E.oAB({type:ve}),ve.\u0275inj=E.cJS({imports:[[R.ez,c.Bz,G.UX]]}),ve})()},2340:(jt,rt,Q)=>{"use strict";Q.d(rt,{N:()=>R});const R={production:!0,firebaseConfig:{apiKey:"AIzaSyAXek0gZLsyXTReB0Fyd9-OVHf1VMjT6fE",authDomain:"live-chat-dcb29.firebaseapp.com",projectId:"live-chat-dcb29",storageBucket:"live-chat-dcb29.appspot.com",messagingSenderId:"30670541766",appId:"1:30670541766:web:2e599941fa52d3985358c7"},geoLocationAPIKey:"a77ee739ab87419193811644c63fda5a"}},9014:(jt,rt,Q)=>{"use strict";var R=Q(9075),c=Q(7716),G=Q(57),E=Q(3637),Ve=Q(7574),ve=Q(5917),ke=Q(6682),fe=Q(8002),Ce=Q(8819),re=Q(3190),Ee=Q(2145),pe=Q(7519),ye=Q(5197),De=Q(509);class We{constructor(pt,bt){this.observables=pt,this.project=bt}call(pt,bt){return bt.subscribe(new X(pt,this.observables,this.project))}}class X extends ye.L{constructor(pt,bt,At){super(pt),this.observables=bt,this.project=At,this.toRespond=[];const Ut=bt.length;this.values=new Array(Ut);for(let dn=0;dn<Ut;dn++)this.toRespond.push(dn);for(let dn=0;dn<Ut;dn++)this.add((0,De.D)(this,bt[dn],void 0,dn))}notifyNext(pt,bt,At){this.values[At]=bt;const Ut=this.toRespond;if(Ut.length>0){const dn=Ut.indexOf(At);-1!==dn&&Ut.splice(dn,1)}}notifyComplete(){}_next(pt){if(0===this.toRespond.length){const bt=[pt,...this.values];this.project?this._tryProject(bt):this.destination.next(bt)}}_tryProject(pt){let bt;try{bt=this.project.apply(this,pt)}catch(At){return void this.destination.error(At)}this.destination.next(bt)}}var Re=Q(7393);class _n{constructor(pt){this.predicate=pt}call(pt,bt){return bt.subscribe(new Nt(pt,this.predicate))}}class Nt extends Re.L{constructor(pt,bt){super(pt),this.predicate=bt,this.skipping=!0,this.index=0}_next(pt){const bt=this.destination;this.skipping&&this.tryCallPredicate(pt),this.skipping||bt.next(pt)}tryCallPredicate(pt){try{const bt=this.predicate(pt,this.index++);this.skipping=Boolean(bt)}catch(bt){this.destination.error(bt)}}}Q(9192);var Yt=Q(9829),wt=Q(2329);function Ke(Ue){return null==Ue}function ot(Ue){return"function"==typeof Ue.set}function it(Ue,pt){return ot(pt)?pt:Ue.ref(pt)}function nt(Ue,pt){if(function(Ue){return"string"==typeof Ue}(Ue))return pt.stringCase();if(ot(Ue))return pt.firebaseCase();if(function(Ue){return"function"==typeof Ue.exportVal}(Ue))return pt.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof Ue)}function vt(Ue,pt,bt="on",At=E.z){return new Ve.y(Ut=>{let dn=null;return dn=Ue[bt](pt,(pn,Zt)=>{At.schedule(()=>{Ut.next({snapshot:pn,prevKey:Zt})}),"once"===bt&&At.schedule(()=>Ut.complete())},pn=>{At.schedule(()=>Ut.error(pn))}),"on"===bt?{unsubscribe(){null!=dn&&Ue.off(pt,dn)}}:{unsubscribe(){}}}).pipe((0,fe.U)(Ut=>{const{snapshot:dn,prevKey:pn}=Ut;let Zt=null;return dn.exists()&&(Zt=dn.key),{type:pt,payload:dn,prevKey:pn,key:Zt}}),(0,Ce.B)())}function tn(Ue,pt){const bt=Ue.length;for(let At=0;At<bt;At++)if(Ue[At].payload.key===pt)return At;return-1}function Sn(Ue,pt){const{payload:bt,prevKey:At,key:Ut}=pt,dn=tn(Ue,Ut),pn=function(Ue,pt){if(Ke(pt))return 0;{const bt=tn(Ue,pt);return-1===bt?Ue.length:bt+1}}(Ue,At);switch(pt.type){case"value":if(pt.payload&&pt.payload.exists()){let Zt=null;pt.payload.forEach(Se=>{const Ie={payload:Se,type:"value",prevKey:Zt,key:Se.key};return Zt=Se.key,Ue=[...Ue,Ie],!1})}return Ue;case"child_added":if(dn>-1){const Zt=Ue[dn-1];(Zt&&Zt.key||null)!==At&&(Ue=Ue.filter(Se=>Se.payload.key!==bt.key)).splice(pn,0,pt)}else{if(null==At)return[pt,...Ue];(Ue=Ue.slice()).splice(pn,0,pt)}return Ue;case"child_removed":return Ue.filter(Zt=>Zt.payload.key!==bt.key);case"child_changed":return Ue.map(Zt=>Zt.payload.key===Ut?pt:Zt);case"child_moved":if(dn>-1){const Zt=Ue.splice(dn,1)[0];return(Ue=Ue.slice()).splice(pn,0,Zt),Ue}return Ue;default:return Ue}}function an(Ue){return(Ke(Ue)||0===Ue.length)&&(Ue=["child_added","child_removed","child_changed","child_moved"]),Ue}function Bt(Ue,pt,bt){return function(Ue,pt,bt){return vt(Ue,"value","once",bt).pipe((0,re.w)(At=>{const Ut=[(0,ve.of)(At)];return pt.forEach(dn=>Ut.push(vt(Ue,dn,"on",bt))),(0,ke.T)(...Ut).pipe((0,Ee.R)(Sn,[]))}),(0,pe.x)())}(Ue,pt=an(pt),bt)}function Rt(Ue,pt,bt){const At=(pt=an(pt)).map(Ut=>vt(Ue,Ut,"on",bt));return(0,ke.T)(...At)}function Tn(Ue,pt){return function(At,Ut){return nt(At,{stringCase:()=>Ue.child(At)[pt](Ut),firebaseCase:()=>At[pt](Ut),snapshotCase:()=>At.ref[pt](Ut)})}}function lr(Ue){return function(bt){return bt?nt(bt,{stringCase:()=>Ue.child(bt).remove(),firebaseCase:()=>bt.remove(),snapshotCase:()=>bt.ref.remove()}):Ue.remove()}}function qn(Ue,pt){return function(){return vt(Ue,"value","on",pt)}}const An=new c.OlP("angularfire2.realtimeDatabaseURL"),On=new c.OlP("angularfire2.database.use-emulator");let Si=(()=>{class Ue{constructor(bt,At,Ut,dn,pn,Zt,Se){this.schedulers=new G.HU(pn),this.keepUnstableUntilFirst=(0,G.ss)(this.schedulers);const Ie=Zt,$e=(0,G.on)(bt,pn,At);!wt.Z.auth&&Se&&(0,G.yq)(),this.database=(0,G.sI)(`${$e.name}.database.${Ut}`,"AngularFireDatabase",$e,()=>{const Je=pn.runOutsideAngular(()=>$e.database(Ut||void 0));return Ie&&Je.useEmulator(...Ie),Je},[Ie])}list(bt,At){const Ut=this.schedulers.ngZone.runOutsideAngular(()=>it(this.database,bt));let dn=Ut;return At&&(dn=At(Ut)),function(Ue,pt){const bt=pt.schedulers.outsideAngular,At=pt.schedulers.ngZone.run(()=>Ue.ref);return{query:Ue,update:Tn(At,"update"),set:Tn(At,"set"),push:Ut=>At.push(Ut),remove:lr(At),snapshotChanges:Ut=>Bt(Ue,Ut,bt).pipe(pt.keepUnstableUntilFirst),stateChanges:Ut=>Rt(Ue,Ut,bt).pipe(pt.keepUnstableUntilFirst),auditTrail:Ut=>function(Ue,pt,bt){return function(Ue,pt,bt){return function(Ue,pt){return vt(Ue,"value","on",pt).pipe((0,fe.U)(bt=>{let At;return bt.payload.forEach(Ut=>(At=Ut.key,!1)),{data:bt,lastKeyToLoad:At}}))}(Ue,bt).pipe(function(...Ue){return pt=>{let bt;return"function"==typeof Ue[Ue.length-1]&&(bt=Ue.pop()),pt.lift(new We(Ue,bt))}}(pt),(0,fe.U)(([Ut,dn])=>{const pn=Ut.lastKeyToLoad,Zt=dn.map(Se=>Se.key);return{actions:dn,lastKeyToLoad:pn,loadedKeys:Zt}}),function(Ue){return pt=>pt.lift(new _n(Ue))}(Ut=>-1===Ut.loadedKeys.indexOf(Ut.lastKeyToLoad)),(0,fe.U)(Ut=>Ut.actions))}(Ue,Rt(Ue,pt).pipe((0,Ee.R)((Ut,dn)=>[...Ut,dn],[])),bt)}(Ue,Ut,bt).pipe(pt.keepUnstableUntilFirst),valueChanges:(Ut,dn)=>Bt(Ue,Ut,bt).pipe((0,fe.U)(Zt=>Zt.map(Se=>dn&&dn.idField?Object.assign(Object.assign({},Se.payload.val()),{[dn.idField]:Se.key}):Se.payload.val())),pt.keepUnstableUntilFirst)}}(dn,this)}object(bt){return function(Ue,pt){return{query:Ue,snapshotChanges:()=>qn(Ue,pt.schedulers.outsideAngular)().pipe(pt.keepUnstableUntilFirst),update:bt=>Ue.ref.update(bt),set:bt=>Ue.ref.set(bt),remove:()=>Ue.ref.remove(),valueChanges:()=>qn(Ue,pt.schedulers.outsideAngular)().pipe(pt.keepUnstableUntilFirst,(0,fe.U)(At=>At.payload.exists()?At.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>it(this.database,bt)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return Ue.\u0275fac=function(bt){return new(bt||Ue)(c.LFG(G.Dh),c.LFG(G.xv,8),c.LFG(An,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(On,8),c.LFG(Yt.Qv,8))},Ue.\u0275prov=c.Yz7({factory:function(){return new Ue(c.LFG(G.Dh),c.LFG(G.xv,8),c.LFG(An,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(On,8),c.LFG(Yt.Qv,8))},token:Ue,providedIn:"any"}),Ue})(),vn=(()=>{class Ue{}return Ue.\u0275fac=function(bt){return new(bt||Ue)},Ue.\u0275mod=c.oAB({type:Ue}),Ue.\u0275inj=c.cJS({providers:[Si]}),Ue})();var Kt=Q(9351),zn=Q(1841),Ln=Q(2213);const Qt=[{path:"",redirectTo:"chat",pathMatch:"full"},{path:"chat",loadChildren:()=>Promise.resolve().then(Q.bind(Q,3370)).then(Ue=>Ue.ChatModule)},{path:"control-panel",loadChildren:()=>Promise.resolve().then(Q.bind(Q,6592)).then(Ue=>Ue.ControlPanelModule)},{path:"error",loadChildren:()=>Promise.resolve().then(Q.bind(Q,7236)).then(Ue=>Ue.ErrorModule)},{path:"**",redirectTo:"chat"}];let gr=(()=>{class Ue{}return Ue.\u0275fac=function(bt){return new(bt||Ue)},Ue.\u0275mod=c.oAB({type:Ue}),Ue.\u0275inj=c.cJS({imports:[[Ln.Bz.forRoot(Qt,{preloadingStrategy:Ln.wm})],Ln.Bz]}),Ue})();var Vr=Q(9447);let Kn=(()=>{class Ue{getCurrentTheme(){const bt=JSON.parse(localStorage.getItem("theme"));bt?(document.documentElement.classList.remove("theme-light","theme-dark"),document.documentElement.classList.add(bt),this.darkMode="theme-light"!=bt):(localStorage.setItem("theme",JSON.stringify("theme-light")),document.documentElement.classList.add("theme-light"),this.darkMode=!1)}setLight(){localStorage.setItem("theme",JSON.stringify("theme-light")),this.getCurrentTheme()}setDark(){localStorage.setItem("theme",JSON.stringify("theme-dark")),this.getCurrentTheme()}}return Ue.\u0275fac=function(bt){return new(bt||Ue)},Ue.\u0275prov=c.Yz7({token:Ue,factory:Ue.\u0275fac,providedIn:"root"}),Ue})(),St=(()=>{class Ue{constructor(bt,At){this._authservice=bt,this._themeService=At}ngOnInit(){this._authservice.autoLogin(),this._themeService.getCurrentTheme()}}return Ue.\u0275fac=function(bt){return new(bt||Ue)(c.Y36(Vr.e),c.Y36(Kn))},Ue.\u0275cmp=c.Xpm({type:Ue,selectors:[["app-root"]],decls:1,vars:0,template:function(bt,At){1&bt&&c._UZ(0,"router-outlet")},directives:[Ln.lC],styles:[""]}),Ue})();var Ze=Q(2340),je=Q(3370),It=Q(6592),xt=Q(7236),nn=Q(6237);let Ot=(()=>{class Ue{}return Ue.\u0275fac=function(bt){return new(bt||Ue)},Ue.\u0275mod=c.oAB({type:Ue,bootstrap:[St]}),Ue.\u0275inj=c.cJS({providers:[],imports:[[R.b2,gr,je.ChatModule,It.ControlPanelModule,xt.ErrorModule,zn.JF,G.hO.initializeApp(Ze.N.firebaseConfig),vn,Kt.TE,nn.PW]]}),Ue})();Ze.N.production&&(0,c.G48)(),R.q6().bootstrapModule(Ot).catch(Ue=>console.error(Ue))},4762:(jt,rt,Q)=>{"use strict";Q.d(rt,{ZT:()=>c,pi:()=>G,mG:()=>fe,Jh:()=>Ce,XA:()=>pe,CR:()=>ye,ev:()=>We});var R=function(Ke,ot){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,nt){it.__proto__=nt}||function(it,nt){for(var vt in nt)Object.prototype.hasOwnProperty.call(nt,vt)&&(it[vt]=nt[vt])})(Ke,ot)};function c(Ke,ot){if("function"!=typeof ot&&null!==ot)throw new TypeError("Class extends value "+String(ot)+" is not a constructor or null");function it(){this.constructor=Ke}R(Ke,ot),Ke.prototype=null===ot?Object.create(ot):(it.prototype=ot.prototype,new it)}var G=function(){return(G=Object.assign||function(ot){for(var it,nt=1,vt=arguments.length;nt<vt;nt++)for(var at in it=arguments[nt])Object.prototype.hasOwnProperty.call(it,at)&&(ot[at]=it[at]);return ot}).apply(this,arguments)};function fe(Ke,ot,it,nt){return new(it||(it=Promise))(function(at,tn){function sn(Bt){try{an(nt.next(Bt))}catch(Rt){tn(Rt)}}function Sn(Bt){try{an(nt.throw(Bt))}catch(Rt){tn(Rt)}}function an(Bt){Bt.done?at(Bt.value):function(at){return at instanceof it?at:new it(function(tn){tn(at)})}(Bt.value).then(sn,Sn)}an((nt=nt.apply(Ke,ot||[])).next())})}function Ce(Ke,ot){var nt,vt,at,tn,it={label:0,sent:function(){if(1&at[0])throw at[1];return at[1]},trys:[],ops:[]};return tn={next:sn(0),throw:sn(1),return:sn(2)},"function"==typeof Symbol&&(tn[Symbol.iterator]=function(){return this}),tn;function sn(an){return function(Bt){return function(an){if(nt)throw new TypeError("Generator is already executing.");for(;it;)try{if(nt=1,vt&&(at=2&an[0]?vt.return:an[0]?vt.throw||((at=vt.return)&&at.call(vt),0):vt.next)&&!(at=at.call(vt,an[1])).done)return at;switch(vt=0,at&&(an=[2&an[0],at.value]),an[0]){case 0:case 1:at=an;break;case 4:return it.label++,{value:an[1],done:!1};case 5:it.label++,vt=an[1],an=[0];continue;case 7:an=it.ops.pop(),it.trys.pop();continue;default:if(!(at=(at=it.trys).length>0&&at[at.length-1])&&(6===an[0]||2===an[0])){it=0;continue}if(3===an[0]&&(!at||an[1]>at[0]&&an[1]<at[3])){it.label=an[1];break}if(6===an[0]&&it.label<at[1]){it.label=at[1],at=an;break}if(at&&it.label<at[2]){it.label=at[2],it.ops.push(an);break}at[2]&&it.ops.pop(),it.trys.pop();continue}an=ot.call(Ke,it)}catch(Bt){an=[6,Bt],vt=0}finally{nt=at=0}if(5&an[0])throw an[1];return{value:an[0]?an[1]:void 0,done:!0}}([an,Bt])}}}function pe(Ke){var ot="function"==typeof Symbol&&Symbol.iterator,it=ot&&Ke[ot],nt=0;if(it)return it.call(Ke);if(Ke&&"number"==typeof Ke.length)return{next:function(){return Ke&&nt>=Ke.length&&(Ke=void 0),{value:Ke&&Ke[nt++],done:!Ke}}};throw new TypeError(ot?"Object is not iterable.":"Symbol.iterator is not defined.")}function ye(Ke,ot){var it="function"==typeof Symbol&&Ke[Symbol.iterator];if(!it)return Ke;var vt,tn,nt=it.call(Ke),at=[];try{for(;(void 0===ot||ot-- >0)&&!(vt=nt.next()).done;)at.push(vt.value)}catch(sn){tn={error:sn}}finally{try{vt&&!vt.done&&(it=nt.return)&&it.call(nt)}finally{if(tn)throw tn.error}}return at}function We(Ke,ot,it){if(it||2===arguments.length)for(var at,nt=0,vt=ot.length;nt<vt;nt++)(at||!(nt in ot))&&(at||(at=Array.prototype.slice.call(ot,0,nt)),at[nt]=ot[nt]);return Ke.concat(at||Array.prototype.slice.call(ot))}}},jt=>{jt(jt.s=9014)}]);